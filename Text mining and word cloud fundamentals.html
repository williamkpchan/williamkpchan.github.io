<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><base target=_blank><style>body { margin: 10%; font-size: 24px; background-color: #000000; color: #109030;}a { text-decoration: none; color: #28B8B8;}a:visited { color: #389898;}A:hover { color: yellow;}A:focus { color: red;}code { color: pink; background-color: #001500}pre { color: gray; background-color: #001010}</style>
                <h1>Text mining and word cloud fundamentals in R : 5 simple steps you should know</h1>
<p><strong>Text mining</strong> methods allow us to highlight the most frequently used keywords in a paragraph of texts. One can create a <strong>word cloud</strong>, also referred as <em>text cloud</em> or <em>tag cloud</em>, which is a visual representation of text data.</p>
<p>The procedure of creating word clouds is very simple in R if you know the different steps to execute. The text mining package (<em>tm</em>) and the word cloud generator package (<em>wordcloud</em>) are available in R for helping us to analyze texts and to quickly visualize the keywords as a word cloud.</p>
<p><span class="success">In this article, we’ll describe, step by step, how to generate <strong>word clouds</strong> using the R software.</span></p>
<div class="figure">
<img src="https://i0.wp.com/www.r-bloggers.com/wp-content/plugins/lazy-load/images/1x1.trans.gif?ssl=1" data-lazy-src="https://i2.wp.com/www.sthda.com/sthda/RDoc/images/word-cloud.png?w=456" alt="word cloud and text mining, I have a dream speech from Martin luther king" data-recalc-dims="1"><noscript><img src="https://i2.wp.com/www.sthda.com/sthda/RDoc/images/word-cloud.png?w=456" alt="word cloud and text mining, I have a dream speech from Martin luther king" data-recalc-dims="1" /></noscript></p>
<p class="caption">word cloud and text mining, I have a dream speech from Martin luther king</p>
</div>
<p></p>
<div id="TOC">
  <strong>Contents</strong></p>
<ul>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#reasons-you-should-use-word-clouds-to-present-your-text-data" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#reasons-you-should-use-word-clouds-to-present-your-text-data', '3 reasons you should use word clouds to present your text data']);" rel="nofollow" target="_blank">3 reasons you should use word clouds to present your text data</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#who-is-using-word-clouds" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#who-is-using-word-clouds', 'Who is using word clouds ?']);" rel="nofollow" target="_blank">Who is using word clouds ?</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#the-5-main-steps-to-create-word-clouds-in-r" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#the-5-main-steps-to-create-word-clouds-in-r', 'The 5 main steps to create word clouds in R']);" rel="nofollow" target="_blank">The 5 main steps to create word clouds in R</a>
<ul>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-1-create-a-text-file" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-1-create-a-text-file', 'Step 1: Create a text file']);" rel="nofollow" target="_blank">Step 1: Create a text file</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-2-install-and-load-the-required-packages" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-2-install-and-load-the-required-packages', 'Step 2 : Install and load the required packages']);" rel="nofollow" target="_blank">Step 2 : Install and load the required packages</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-3-text-mining" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-3-text-mining', 'Step 3 : Text mining']);" rel="nofollow" target="_blank">Step 3 : Text mining</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-4-build-a-term-document-matrix" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-4-build-a-term-document-matrix', 'Step 4 : Build a term-document matrix']);" rel="nofollow" target="_blank">Step 4 : Build a term-document matrix</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-5-generate-the-word-cloud" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#step-5-generate-the-word-cloud', 'Step 5 : Generate the Word cloud']);" rel="nofollow" target="_blank">Step 5 : Generate the Word cloud</a></li>
</ul>
</li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#go-further" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#go-further', 'Go further']);" rel="nofollow" target="_blank">Go further</a>
<ul>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#explore-frequent-terms-and-their-associations" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#explore-frequent-terms-and-their-associations', 'Explore frequent terms and their associations']);" rel="nofollow" target="_blank">Explore frequent terms and their associations</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#the-frequency-table-of-words" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#the-frequency-table-of-words', 'The frequency table of words']);" rel="nofollow" target="_blank">The frequency table of words</a></li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#plot-word-frequencies" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#plot-word-frequencies', 'Plot word frequencies']);" rel="nofollow" target="_blank">Plot word frequencies</a></li>
</ul>
</li>
<li><a href="http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#infos" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.sthda.com/english/wiki/text-mining-and-word-cloud-fundamentals-in-r-5-simple-steps-you-should-know#infos', 'Infos']);" rel="nofollow" target="_blank">Infos</a></li>
</ul>
</div>
<p></p>
<div id="reasons-you-should-use-word-clouds-to-present-your-text-data" class="section level2">
<h2>3 reasons you should use word clouds to present your text data</h2>
<ol style="list-style-type: decimal">
<li><strong>Word clouds</strong> add simplicity and clarity. The most used keywords stand out better in a word cloud
</li>
<li><strong>Word clouds</strong> are a potent communication tool. They are easy to understand, to be shared and are impactful</li>
<li><strong>Word clouds</strong> are visually engaging than a table data</li>
</ol>
</div>
<div id="who-is-using-word-clouds" class="section level2">
<h2>Who is using word clouds ?</h2>
<ul>
<li>Researchers : for reporting qualitative data</li>
<li>Marketers : for highlighting the needs and pain points of customers</li>
<li>Educators : to support essential issues</li>
<li>Politicians and journalists</li>
<li>social media sites : to collect, analyze and share user sentiments</li>
</ul>
</div>
<div id="the-5-main-steps-to-create-word-clouds-in-r" class="section level2">
<h2>The 5 main steps to create word clouds in R</h2>
<div id="step-1-create-a-text-file" class="section level3">
<h3>Step 1: Create a text file</h3>
<p>In the following examples, I’ll process the “<strong>I have a dream speech</strong>” from “<strong>Martin Luther King</strong>” but you can use any text you want :</p>
<ul>
<li>Copy and paste the text in a plain text file (e.g : ml.txt)</li>
<li>Save the file</li>
</ul>
<p><span class="warning">Note that, the text should be saved in a plain text (.txt) file format using your favorite text editor.</span></p>
</div>
<div id="step-2-install-and-load-the-required-packages" class="section level3">
<h3>Step 2 : Install and load the required packages</h3>
<p>Type the R code below, to install and load the required packages:</p>
<pre class="r"><code># Install
install.packages("tm")  # for text mining
install.packages("SnowballC") # for text stemming
install.packages("wordcloud") # word-cloud generator 
install.packages("RColorBrewer") # color palettes
# Load
library("tm")
library("SnowballC")
library("wordcloud")
library("RColorBrewer")</code></pre>
</div>
<div id="step-3-text-mining" class="section level3">
<h3>Step 3 : Text mining</h3>
<div id="load-the-text" class="section level4">
<h4>load the text</h4>
<p>The text is loaded using <strong>Corpus()</strong> function from <strong>text mining</strong> &#8482; package. Corpus is a list of a document (in our case, we only have one document).</p>
<ol style="list-style-type: decimal">
<li><strong>We start by importing the text file created in Step 1</strong></li>
</ol>
<p>To import the file saved locally in your computer, type the following R code. You will be asked to choose the text file interactively.</p>
<pre class="r"><code>text <- readLines(file.choose())</code></pre>
<p>In the example below, I’ll load a .txt file hosted on STHDA website:</p>
<pre class="r"><code># Read the text file from internet
filePath <- "http://www.sthda.com/sthda/RDoc/example-files/martin-luther-king-i-have-a-dream-speech.txt"
text <- readLines(filePath)</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><strong>Load the data as a corpus</strong></li>
</ol>
<pre class="r"><code># Load the data as a corpus
docs <- Corpus(VectorSource(text))</code></pre>
<p><span class="warning">VectorSource() function creates a corpus of character vectors</span></p>
<ol start="3" style="list-style-type: decimal">
<li><strong>Inspect the content of the document</strong></li>
</ol>
<pre class="r"><code>inspect(docs)</code></pre>
</div>
<div id="text-transformation" class="section level4">
<h4>Text transformation</h4>
<p>Transformation is performed using <strong>tm_map()</strong> function to replace, for example, special characters from the text.</p>
<p>Replacing “/”, “@” and “|” with space:</p>
<pre class="r"><code>toSpace <- content_transformer(function (x , pattern ) gsub(pattern, " ", x))
docs <- tm_map(docs, toSpace, "/")
docs <- tm_map(docs, toSpace, "@")
docs <- tm_map(docs, toSpace, "\\|")</code></pre>
</div>
<div id="cleaning-the-text" class="section level4">
<h4>Cleaning the text</h4>
<p>the <strong>tm_map()</strong> function is used to remove unnecessary white space, to convert the text to lower case, to remove common stopwords like ‘the’, “we”.</p>
<p>The information value of ‘stopwords’ is near zero due to the fact that they are so common in a language. Removing this kind of words is useful before further analyses. For ‘stopwords’, supported languages are danish, dutch, english, finnish, french, german, hungarian, italian, norwegian, portuguese, russian, spanish and swedish. Language names are case sensitive.</p>
<p><span class="success">I’ll also show you how to make your own list of stopwords to remove from the text.</span></p>
<p>You could also remove numbers and punctuation with <strong>removeNumbers</strong> and <strong>removePunctuation</strong> arguments.</p>
<p>Another important preprocessing step is to make a <strong>text stemming</strong> which reduces words to their root form. In other words, this process removes suffixes from words to make it simple and to get the common origin. For example, a stemming process reduces the words “moving”, “moved” and “movement” to the root word, “move”.</p>
<p><span class="warning">Note that, text stemming require the package ‘SnowballC’. </span></p>
<p>The R code below can be used to clean your text :</p>
<pre class="r"><code># Convert the text to lower case
docs <- tm_map(docs, content_transformer(tolower))
# Remove numbers
docs <- tm_map(docs, removeNumbers)
# Remove english common stopwords
docs <- tm_map(docs, removeWords, stopwords("english"))
# Remove your own stop word
# specify your stopwords as a character vector
docs <- tm_map(docs, removeWords, c("blabla1", "blabla2")) 
# Remove punctuations
docs <- tm_map(docs, removePunctuation)
# Eliminate extra white spaces
docs <- tm_map(docs, stripWhitespace)
# Text stemming
# docs <- tm_map(docs, stemDocument)</code></pre>
</div>
</div>
<div id="step-4-build-a-term-document-matrix" class="section level3">
<h3>Step 4 : Build a term-document matrix</h3>
<p>Document matrix is a table containing the frequency of the words. Column names are words and row names are documents. The function <em>TermDocumentMatrix()</em> from <strong>text mining</strong> package can be used as follow :</p>
<pre class="r"><code>dtm <- TermDocumentMatrix(docs)
m <- as.matrix(dtm)
v <- sort(rowSums(m),decreasing=TRUE)
d <- data.frame(word = names(v),freq=v)
head(d, 10)</code></pre>
<pre><code>             word freq
will         will   17
freedom   freedom   13
ring         ring   12
day           day   11
dream       dream   11
let           let   11
every       every    9
able         able    8
one           one    8
together together    7</code></pre>
</div>
<div id="step-5-generate-the-word-cloud" class="section level3">
<h3>Step 5 : Generate the Word cloud</h3>
<p>The importance of words can be illustrated as a <strong>word cloud</strong> as follow :</p>
<pre class="r"><code>set.seed(1234)
wordcloud(words = d$word, freq = d$freq, min.freq = 1,
          max.words=200, random.order=FALSE, rot.per=0.35, 
          colors=brewer.pal(8, "Dark2"))</code></pre>
<div class="figure">
<img src="https://i0.wp.com/www.r-bloggers.com/wp-content/plugins/lazy-load/images/1x1.trans.gif?ssl=1" data-lazy-src="https://i0.wp.com/www.sthda.com/sthda/RDoc/figure/text-mining/word-cloud-martin-luther-king-i-have-a-dream-speech.png?w=456" alt="word cloud and text mining, I have a dream speech from Martin Luther King" style="margin-bottom:10px;" data-recalc-dims="1"><noscript><img src="https://i0.wp.com/www.sthda.com/sthda/RDoc/figure/text-mining/word-cloud-martin-luther-king-i-have-a-dream-speech.png?w=456" alt="word cloud and text mining, I have a dream speech from Martin Luther King" style="margin-bottom:10px;" data-recalc-dims="1" /></noscript></p>
<p class="caption">
word cloud and text mining, I have a dream speech from Martin Luther King
</p>
</div>
<p>The above <strong>word cloud</strong> clearly shows that “Will”, “freedom”, “dream”, “day” and “together” are the five most important words in the “<strong>I have a dream speech</strong>” from <strong>Martin Luther King</strong>.</p>
<p>Arguments of the <strong>word cloud generator</strong> function :</p>
<p></p>
<div class="block">
<ul>
<li>words : the words to be plotted</li>
<li>freq : their frequencies</li>
<li>min.freq : words with frequency below min.freq will not be plotted</li>
<li>max.words : maximum number of words to be plotted</li>
<li>random.order : plot words in random order. If false, they will be plotted in decreasing frequency</li>
<li>rot.per : proportion words with 90 degree rotation (vertical text)</li>
<li>colors : color words from least to most frequent. Use, for example, colors =“black” for single color.</li>
</ul>
</div>
<p></p>
</div>
</div>
<div id="go-further" class="section level2">
<h2>Go further</h2>
<div id="explore-frequent-terms-and-their-associations" class="section level3">
<h3>Explore frequent terms and their associations</h3>
<p>You can have a look at the frequent terms in the term-document matrix as follow. In the example below we want to find words that occur at least four times :</p>
<pre class="r"><code>findFreqTerms(dtm, lowfreq = 4)</code></pre>
<pre><code> [1] "able"     "day"      "dream"    "every"    "faith"    "free"     "freedom"  "let"      "mountain" "nation"  
[11] "one"      "ring"     "shall"    "together" "will"    </code></pre>
<p>You can analyze the association between frequent terms (i.e., terms which correlate) using findAssocs() function. The R code below identifies which words are associated with “freedom” in <strong>I have a dream speech</strong> :</p>
<pre class="r"><code>findAssocs(dtm, terms = "freedom", corlimit = 0.3)</code></pre>
<pre><code>$freedom
         let         ring  mississippi mountainside        stone        every     mountain        state 
        0.89         0.86         0.34         0.34         0.34         0.32         0.32         0.32 </code></pre>
</div>
<div id="the-frequency-table-of-words" class="section level3">
<h3>The frequency table of words</h3>
<pre class="r"><code>head(d, 10)</code></pre>
<pre><code>             word freq
will         will   17
freedom   freedom   13
ring         ring   12
day           day   11
dream       dream   11
let           let   11
every       every    9
able         able    8
one           one    8
together together    7</code></pre>
</div>
<div id="plot-word-frequencies" class="section level3">
<h3>Plot word frequencies</h3>
<p>The frequency of the first 10 frequent words are plotted :</p>
<pre class="r"><code>barplot(d[1:10,]$freq, las = 2, names.arg = d[1:10,]$word,
        col ="lightblue", main ="Most frequent words",
        ylab = "Word frequencies")</code></pre>
<div class="figure">
<img src="https://i0.wp.com/www.r-bloggers.com/wp-content/plugins/lazy-load/images/1x1.trans.gif?ssl=1" data-lazy-src="https://i2.wp.com/www.sthda.com/sthda/RDoc/figure/text-mining/word-cloud-frequency-plot.png?w=384" alt="word cloud and text mining" style="margin-bottom:10px;" data-recalc-dims="1"><noscript><img src="https://i2.wp.com/www.sthda.com/sthda/RDoc/figure/text-mining/word-cloud-frequency-plot.png?w=384" alt="word cloud and text mining" style="margin-bottom:10px;" data-recalc-dims="1" /></noscript></p>
<p class="caption">
word cloud and text mining
</p>
</div>
</div>
</div>
<div id="infos" class="section level1">
<h1>Infos</h1>
<p><span class="warning"> This analysis has been performed using R (ver. 3.3.2). </span></p>
</div>
</div>
