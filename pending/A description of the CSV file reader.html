<html>
<head>
</head>
<body>

        <h1 itemprop="headline" >A <span>description of the CSV reader</span></h1><a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http://www.rgraph.net', 'facebook-sharer-window', 'top=50,left=50,width=300,height=200')"><img src="/images/facebook-share.png" style="box-shadow: 1px 1px 1px gray" /></a>&nbsp;<a href="#" onclick="window.open('http://www.twitter.com/share?url=http://www.rgraph.net&text=JavaScript%20charts%20for%20the%20web%20with%20@_RGraph%20', 'twitter-sharer-window', 'top=50,left=50,width=700,height=300')"><img src="/images/twitter-60x20.png" style="box-shadow: 1px 1px 1px gray" /></a><nav><div id="breadcrumb"><a href="/">Home</a> &gt; <a href="/docs/index.html">Documentation and examples</a> &gt; <a href="/docs/features-index.html">Features and examples</a> &gt; <b>A description of the CSV reader</b></div></nav><br clear="all" /><p id="summary"><b>Summary</b><br />There is now a CSV reader that is a part of RGraph that makes reading CSV files easier. It reads the files by AJAX and has methods such as getRow() and getCol()</p>            <!-- Needed for menuhints -->
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" ></script>
            <script src="/js/combined.html/navigation-top-bar.js" defer ></script>
            <script src="/js/combined.html/menuhints.js" defer ></script>
            <script src="/libraries/combined.html/RGraph.common.core.js" ></script>
            
    <canvas id="cvs" width="600" height="250" style="float: right">[No canvas support]</canvas>

    <ul>
        <li><a href="#intro">Introduction</a></li>
        <li><a href="#example">An example</a></li>
        <li><a href="#api">API</a></li>
        <li><a href="#end-of-lines">Trailing end-of-lines</a></li>
        <li><a href="#database">Database integration</a></li>
        <li><a href="#div">Reading a DIV instead of a file</a></li>
        <li><a href="#demos">Demo pages</a></li>
    </ul>
    
    <a name="intro"></a><p>&nbsp;</p>
    <h2 >Introduction <span></span></h2>    
    <p>
        As of October 2013 there is now a CSV reader class that is a part of RGraph. This class helps you fetch and read the
        contents of CSV files that are held on your server. This could make it easier for you to get information from your
        database - you can have a server-based script that gets data from your database and outputs it as a CSV file and
        then use this CSV reader to read it and get the data from it.
    </p>
    
    <p>
        Alternatively you might have a CSV file that is generated by a server based application so you can read it using this CSV
        reader.
    </p>
    
    <p>
        The chart to the right uses the CSV reader to fetch <a href="/sample.csv">this file</a> and then format into usable data.
    </p>
    
    <a name="example"></a></a><p>&nbsp;</p>
    <h2 >An <span>example</span></h2>        <pre class="code" style="">
&lt;script&gt;
    window.onload = function ()
    {
        <span>/**
        * This fetchs the CSV file and shows the Bar chart
        */</span>
        var csv = new RGraph.CSV('/sample.csv', function (csv)
        {
            <span>// Get the first column which becomes the labels</span>
            var labels = csv.getCol(0);
            
            <span>// Get the number of rows in the CSV</span>
            var numrows = csv.numrows;

            <span>// Get the number of cols in the CSV</span>
            var numcols = csv.numcols;

            <span>// Get the second column which becomes the data</span>
            var data = csv.getCol(1);
            
            
            <span>// Create the chart</span>
            var bar = new RGraph.Bar({
                id: 'cvs',
                data: data,
                options: {
                    labels: labels,
                    title: 'A chart using the CSV reader',
                    colors: ['red'],
                    strokestyle: 'white',
                    noxaxis: true,
                    shadowColor: '#aaa'
                    textAccessible: true,
                    textSize: 14
                }
            }).draw()
        })
    }
&lt;/script&gt;
</pre>






    <br clear="all" />






    
    <a name="api"></a><p>&nbsp;</p>
    <h2 >API <span></span></h2>    
    <p>
        <b>Constructor(URL, callback[, seperator[, endofline]])</b><br />
        You use the constructor to create and fetch the CSV file. It takes two arguments:
    </p>
    
    <ul>
        <li>
            <i>URL</i><br />
            This is the URL of the CSV file to fetch. Because of AJAX security restrictions it should be of the same domain as
            the file that's making the request. This can also be a string containing the ID of a tag tht you want to get data
            from - such as <i>id:myDiv</i>
        </li>

        <br />

        <li>
            <i>callback</i><br />
            This should be a function that creates the chart. The function is passed the CSV object as an argument so that you can
            access the data.
        </li>

        <br />

        <li>
            <i>seperator</i><br />
            You can optionally specify the field-seperator to use. This is given directly to the JavaScript split() function so it can
            either be a string or a regular expression. It defaults to: <i>, (a comma)</i>
        </li>

        <br />

        <li>
            <i>endofline</i><br />
            You can optionally specify the endofline to use. This is given directly to the JavaScript split() function so it can either be
            a string or a regular expression. It defaults to: <i>/\r?\n/</i>
        </li>
    </ul>
    
    <p>
        <b>row = getRow(index[, start])</b><br />
        This function fetchs a row of data from the CSV and returns it (as an array). You can optionally give the column index to
        start at (the column numbering starts from 0). eg <i>row = csv.getRow(3, 1);</i>
    </p>
    
    <p>
        <b>col = getCol(index[, start])</b><br />
        This function fetchs a column of data from the CSV and returns it (as an array). You can optionally give the row index to
        start at (the row numbering starts from 0). eg <i>col = csv.getCol(3, 1);</i>
    </p>





    <a name="end-of-lines"></a><p>&nbsp;</p>
    <h2 >Trailing <span>end-of-lines</span></h2>    <p>
        Note that trailing EOLs (eg \r\n) are stripped automatically.
    </p>





    <a name="database"></a><p>&nbsp;</p>
    <h2 >Database <span>integration</span></h2>    <p>
        By using the CSV file reader you can make integrating with a database easier. You can have a server-side script that
        retrieves data from the database and <a href="/sample.csv">outputs it like this</a> (<a href="/sample2.csv">or like this</a>).
        You can then request that CSV file using the CSV file reader and that allows you to get the data into RGraph.
    </p>



    <a name="div"></a><p>&nbsp;</p>
    <h2 >Reading <span>a DIV instead of a file</span></h2>        <canvas id="cvs2" width="600" height="250" style="float: right">[No canvas support]</canvas>
        <p>
            Instead of reading a CSV file from your server you can also embed the CSV data in a hidden DIV in your page. If
            your server has high response times you may prefer this in place of an extra AJAX round-trip to your server to fetch
            the data.
        </p>
        
        <p>
            The code is very similar though instead of a filename you would use a DIV tags ID - like this:
        </p>
        
        <br clear="all" />
        
        <pre class="code">
&lt;script&gt;
    window.onload = function ()
    {
        <span>/**
        * This fetchs the CSV file and shows the Bar chart
        */</span>
        var csv = new RGraph.CSV('id:myDiv', function (csv)
        {
            <span>// Create the chart here</span>
        }
    }
&lt;/script&gt;
</pre>

    <p>
        If you view the source of the page you can see the hidden DIV tag (at the bottom of the page) which contains the CSV data.
    </p>

    <br clear="all" />

    
    <!-- Instead of requesting a seperate file - you can "embed" the CSV data within a hidden DIV instead -->
    <div id="myDiv" style="display: none">Richard,8,4,7,6,5,3,4
Dave,7,4,6,9,5,8,7
Luis,4,3,5,2,6,5,4
Kevin,4,2,8,9,6,7,3
Joel,4,5,1,3,5,8,6
Pete,4,5,6,3,5,8,6</div>
    
    
    
    <script src="/libraries/combined.html/RGraph.common.csv.js/RGraph.common.key.js/RGraph.common.dynamic.js/RGraph.drawing.rect.js/RGraph.bar.js" ></script>
    
    <script>
        window.onload = function ()
        {
            /**
            * This fetchs the CSV file and shows the Bar chart
            */
            var csv = new RGraph.CSV('/sample.csv', function (csv)
            {
                // A few variables
                var labels = csv.getCol(0);
                var data   = csv.getCol(1);

                var numrows = csv.numrows;
                var numcols = csv.numcols;
                

                // Create the chart
                var bar = new RGraph.Bar('cvs', data)
                    .set('background.grid.vlines', false)
                    .set('background.grid.border', false)
                    .set('labels', labels)
                    .set('title', 'A chart using the CSV reader')
                    .set('colors', ['red'])
                    .set('strokestyle', 'white')
                    .set('noxaxis', true)
                    .set('gutter.top', 35)
                    .set('shadow', false)
                    .set('strokestyle', 'rgba(0,0,0,0)')
                    .set('textAccessible', true)
                    .set('textSize', 14)
                    .draw();
            });




            /**
            * This example of the CSV reader reads the data from the element whose id you give instead of the filename
            */
            var csv = new RGraph.CSV('id:myDiv', function (csv)
            {
                // A few variables
                var labels = csv.getCol(0);
                var data   = csv.getCol(2);

                var numrows = csv.numrows;
                var numcols = csv.numcols;
                

                // Create the chart
                var bar = new RGraph.Bar('cvs2', data)
                    .set('labels', labels)
                    .set('title', 'A chart using the CSV reader with embedded data')
                    .set('colors', ['red'])
                    .set('strokestyle', 'white')
                    .set('noxaxis', true)
                    .set('shadow', true)
                    .set('shadow.color', '#aaa')
                    .set('textAccessible', true)
                    .set('textSize', 14)
                    .draw();
            });
        }
    </script>

</body>
</html>