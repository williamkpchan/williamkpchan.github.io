<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width"/>
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, strong,  div.title').click(function(){
    parent.history.back();
    return false;
    });
    $('h2').click(function() { scrollTo(0,document.body.scrollHeight);});
});
</script>
<style>
body{width:80%;margin-left: 10%; font-size:22px;}
strong, h1, h2 {color: gold;}
img {width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%;margin-left: auto; margin-right: auto;
}
pre { text-align: left; width:70%;}

</style>
</head>
<body onkeypress="chkKey()">
<center>
<div class="imagearea"> </div>
<br>

<div id="toc"></div>
<br>
<br>
<span class="redbut whitebs silver">keys: b backward, f foreward</span>
</center>
<br>

<script>
var toc = $('#toc');
var patt1 = /(<h2>).*(<\/h2>)/i;
var patt2 = /(<h2[^>]*>|<\/h2>)/g;

function makeTOC(theStr, index) {
	var topic = theStr.match(patt1)[0];
	topic = topic.replace(patt2, "");
	toc.append('<span onclick="jumpto(' + index + ')">' + topic +'</span><br>');
}

function jumpto(index) {
	topicpointer = index;
	showImg();
}
function chkKey() {
var testkey = getChar(event);
if(testkey == "b"){ backward();}
if(testkey == "f"){ foreward();}
if(testkey == "p"){ pause();}
if(testkey == "c"){ continU();}
if(testkey == "s"){ showMov();}}
function getChar(event){if (event.which!=0 && event.charCode!=0) {return String.fromCharCode(event.which)}
 else {return null}}

var ImgList = [
'<h2>女性欢迎的笑话</h2><br><br>1<br>一个男人厌倦了他每天出门工作而他的老婆却整天呆在家里。<br>他希望老婆能明白他每天是如何在外打拼的。<br>于是他祷告祈求：<br>上帝啊，我每天在外工作整整八小时，而我的老婆却仅仅是呆在屋里，我要让她知道我，我是怎么过的，求你让我和她的躯体调换一天吧！<br>上帝满足了他的愿望。<br><br>2<br>第二天一早，他醒来，当然，是作为一个女人。<br>他起床为他的另一半准备早点，叫醒孩子们，为他们穿上校服，喂早餐，装好他们的午餐，然后开车送他们去学校，回到家，他挑出需要干洗的衣物，送到干洗店，回来的路上还顺路去了银行，然后去超市采购，回到家，放下东西，要缴清帐单、结算支票本。<br>当他打扫了猫盒，给狗洗完澡，已经是下午一点了。<br>他匆忙地整理床铺，洗衣服，给地毯吸尘，除尘，清扫，擦洗厨房的地板。<br>他冲往学校去接孩子们，回来的路上还同他们争论了一番。<br>他准备好点心和牛奶，督促孩子们做功课，然后架起烫衣板，一边忙着一边看会电视。<br><br>3<br>四点半的时候，他开始削土豆，清洗蔬菜做沙拉，给猪排沾上面包屑，剥开那些新鲜的豆子，准备晚餐。<br>吃完晚饭，他开始收拾厨房，打开洗碗机，叠好洗干净的衣物，给孩子们洗澡，送他们上床。<br>晚上九点，他已经撑不住了，然而，他的每日例行工作还没结束。<br>他爬上床，在那里还有人期待着他，他必须，而且不能有任何抱怨。<br><br>4<br>第二天一早，他一醒来就跪在床边，祈求：<br>上帝啊，我真不知道自己是怎样想的，我怎么会傻到嫉妒我老婆能成天呆在家里？<br>求你，哦！求求你，让我们换回来吧！<br>上帝回答他：<br>“我的孩子，我想你已经吃到苦头了，我会很高兴让一切恢复原来的样子。<br>但是......<br>你不得不再等上九个月，昨晚，你怀孕了！”<br>......<br>',
]
var topicpointer = ImgList.length, timer = 15000
function shuffle(array) {
 var i = ImgList.length, j = 0, temp;
 while (i--) { j = Math.floor(Math.random() * (i+1))
  temp = ImgList[i];  ImgList[i] = ImgList[j];  ImgList[j] = temp;
 } 
 return ImgList;
}
ImgList = shuffle(Array.from(Array(ImgList.length).keys()))
ImgList.forEach(makeTOC);
function changeImg() {
 if (topicpointer >= ImgList.length - 1) { topicpointer = 0;}
 else if (topicpointer < 0) { topicpointer = ImgList.length - 1;} 
 else { topicpointer = topicpointer + 1;}
 showImg()
}
function backward() { topicpointer = topicpointer - 2; changeImg();}
function foreward() { changeImg();}
function pause() { clearInterval(myVar);}
function continU() { myVar = setInterval(changeImg, timer); foreward()}
function showImg() { var thePointerImg = document.querySelector(".imagearea");
 thePointerImg.innerHTML = ImgList[topicpointer];
 console.log(thePointerImg.innerHTML);
 scroll(0,0);
}
function showMov() { var imgAdr = ImgList[topicpointer];
 var start = imgAdr.indexOf("=\"")+1;
 var end = imgAdr.indexOf('"></a>', start+1);
 var list = imgAdr.substring(start+1, end);
 console.log(list);
 window.open(list);
}
changeImg();
</script>
</body></html>
