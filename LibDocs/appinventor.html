<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width"/>
<link rel="stylesheet" href="..\maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, .apply, div.title').click(function(){
    parent.history.back();
    return false;
    });
});
</script>
<style>
h1, h2 {color: gold;}
img{transform: scale(1.1, 1.1);
-ms-transform: scale(1.1, 1.1);
-webkit-transform: scale(1.1, 1.1);
padding:10px;
margin: 15px;
}
</style>
</head><body>
<center><h1>Appinventor Tutorial List</h1></center>
<div id="toc"></div>
<br>
<br>
<br>


  <article id="article-489" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/beginner-tutorials-short" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Beginner Tutorials: Short Videos to get started                  </h1>
      
      
    </header>
    <span property="dc:title" content="Beginner Tutorials: Short Videos to get started" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

		.center{
			text-align: center;
		}
		#video_table video{
			width:90% !important;
		}
		#video_table td {
			text-align: center;
			width:50%;
			border:none;
		}
		#video_table p {
			padding: 10px 20px 30px 20px;
		}
	
/*--><!]]>*/
</style><div>
	<img src="http://appinventor.mit.edu/explore/sites/all/files/begin_video_tut.jpg" style="width: 30%;float: left;padding: 0 20px 15px 10px;" /><p>With these <strong>beginner-friendly</strong> tutorials, you will learn the basics of programming apps for Android.</p>
<p>App Inventor is a <strong>free, cloud-based service</strong> that you access using a web browser.<br />Log in with a Google account (Gmail or school email tied to Google) to start inventing right away!</p>
<p>To <strong>see your app on your phone as you build</strong>:<br />
     • Follow the instructions to <a href="ai2/setup.html" target="_blank">connect your phone to App Inventor on your computer.</a>.<br />
     • If you hit any snags, <a href="forums.html">we're here to help!</a><br />
     • If you are Android-less, never fear, you can <a href="ai2/setup-emulator.html">use the on-screen emulator</a>!</p>
<p><strong>Teachers:</strong> <a href="hour-of-code/teach.html">Get support and tips for using</a> App Inventor with your students.</p>
<h3>Is YouTube blocked in your school? <a href="https://vimeo.com/album/2642338" target="blank">See these videos on Vimeo instead of YouTube</a></h3>
</div>
<hr /><h1 style="text-align:center;">Making Mobile Apps with App Inventor<br /><h1>
</h1></h1><p>Follow these four short videos and you'll have <strong>three working apps</strong> to show for it! After building the starter apps, which will take around an hour, you can move on to extending them with more functionality, or you can start building apps of your own design. <strong>Get started now with Video 1 below</strong>.</p>
<p><br /></p>
<table id="video_table"><tr><td>
<h2 class="center">1. TalkToMe Text-to-Speech App</h2>
</td>
<td>
<h2 class="center">2. Extended TalkToMe App: Shake!</h2>
</td>
</tr><tr><td>
<a href="http://www.youtube.com/embed/Vdo8UdkgDD8?autoplay=1" rel="lightframe[|width:760px; height:480px;]"><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/hoc_video1_thumbnail.png" /></a>
</td>
<td>
<a href="http://www.youtube.com/embed/0hikoCvM3oc?autoplay=1" rel="lightframe[|width:760px; height:480px;]"><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/hoc_video2_thumbnail.png" /></a>
			</td>
</tr><tr><td>
<p>Text to Speech is surprisingly fun. Find out for yourself with this starter app that talks.<br /><a href="sites/all/files/hourofcode/TalkToMePart1.pdf"> View Tutorial as Text &amp; Images</a> (PDF)</p>
</td>
<td>
<p>Make it do tricks! How about if the phone responds to shaking, and also speaks any phrase you give it?<br /><a href="sites/all/files/hourofcode/TalkToMePart2.pdf">View tutorial as Text &amp; Images</a> (PDF)</p>
</td>
</tr><tr><td>
<h2 class="center">3. BallBounce Game App</h2>
</td>
<td>
<h2 class="center">4. DigitalDoodle Drawing App</h2>
</td>
</tr><tr><td>
<a href="http://www.youtube.com/embed/w0yxJSlC00w?autoplay=1" rel="lightframe[|width:760px; height:480px;]"><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/hoc_video3_thumbnail.png" /></a>
			</td>
<td>
<a href="http://www.youtube.com/embed/fQKNzLYEN0M?autoplay=1" rel="lightframe[|width:760px; height:480px;]"><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/hoc_video4_thumbnail.png" /></a>
			</td>
</tr><tr><td>
<p>Fling, Flang, Flung? Whatever you call it, bouncing the ball around the screen is pure fun.<br /><a href="sites/all/files/hourofcode/BallBounceTutorial.pdf"> Follow this tutorial in Text &amp; Images</a> (PDF)</p>
</td>
<td>
<p>Who needs paper? Doodle all day on your phone's screen.<br /><a href="sites/all/files/hourofcode/DigitalDoodle.pdf"> Follow this tutorial in Text &amp; Images</a> (PDF)</p>
</td>
</tr><tr><td colspan="2">
<div style="text-align:center"><strong>Is YouTube blocked in your school? <u><a href="https://vimeo.com/album/2642338" target="blank">See these videos on Vimeo instead of YouTube</a></u></strong></div>
</td>
</tr></table><p><br /></p>
<p>Trouble with the Text-To-Speech player on your phone? <a href="ai2/support/troubleshooting.html#Sounds">Get help here</a>.</p>
<table><caption>
<h2>Download PDF versions of the Tutorials</h2>
</caption>
<tr><td style="padding:5px;text-align:center"><a href="sites/all/files/hourofcode/TalkToMePart1.pdf"><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/screenshotTTM1.png" /></a></td>
<td style="padding:5px;text-align:center"><a href="sites/all/files/hourofcode/TalkToMePart2.pdf"><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/screenshotTTM2.png" /></a></td>
<td style="padding:5px;text-align:center"><a href="sites/all/files/hourofcode/BallBounceTutorial.pdf"><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/screenshotBB.png" /></a></td>
<td style="padding:5px;text-align:center"><a href="sites/all/files/hourofcode/DigitalDoodle.pdf"><img src="http://appinventor.mit.edu/explore/sites/all/files/hourofcode/screenshotDD.png" /></a></td>
</tr><tr><td style="padding:5px;text-align:center">TalkToMe Part 1</td>
<td style="padding:5px;text-align:center">TalkToMe Part 2</td>
<td style="padding:5px;text-align:center">BallBounce</td>
<td style="padding:5px;text-align:center">Digital Doodle</td>
</tr></table><hr /><h2>Extending Your Initial Apps</h2>
<p>You just made some pretty cool apps! But now the real fun begins: try turning TalkToMe into a <a href="ai2/magic-8-ball.html" target="blank">Magic 8 Ball</a>; turn BallBounce into a <a href="ai2/minigolf.html" target="blank">Mini Golf game</a>, take DigitalDoodle to the next level by adding colors and incorporating pictures as backgrounds in <a href="ai2/paintpot-part1.html" target="blank">PaintPot</a>. The possibilities really are endless!<br /><strong><a href="ai2/tutorials.html">See the full collection of Tutorials for more ideas.</a></strong></p>
<div class="center">
<h1>Great Job!</h1>
<h2><a href="ai2/tutorials.html">Find more tutorials to learn even more about the power of App Inventor!</a></h2>
</div>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Drawing Canvas</li><li class="field-item odd">Game</li><li class="field-item even">Accelerometer</li></ul></section>  </div>

  
  
  <article id="article-348" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/hellopurr" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Hello Purr for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Hello Purr for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><h2 class="ai-header">Building your first app: HelloPurr</h2>
<p>Now that you've set up your computer and device, and you've learned how the Designer and the Blocks Editor work, you are ready to build the HelloPurr app. At this point, you should have the Designer or Blocks Editor open in your browser, and either an Android device or an Android emulator connected to the Blocks Editor. (See <a href="setup.html">Setup Instructions for App Inventor 2</a> if you do not have these things running.)</p>
<h3>HelloPurr: tap the kitty, hear him meow</h3>
<p>HelloPurr is a simple app that you can build in a very short time. You create a button that has a picture of a cat on it, and then program the button so that when it is clicked a "meow" sound plays.</p>
<p>To build HelloPurr, you'll need a image file of a cat and an audio file with a "meow" sound. Download these files to your computer by clicking the following links. To download: after clicking a link, right click on the image or sound bar and select "Save As." Save both files onto your desktop or downloads folder, or anywhere that you can easily find later.</p>
<ul><li>Kitty picture: <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/kitty.png"> kitty.png</a> (Right-click and Save)</li>
<li>Meow sound: <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/meow.mp3">meow.mp3</a> (Right-click and Save)</li>
</ul><h3>Select components to design your app</h3>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/basic_palette.png" style="float:left;" /></p>
<p>The App Inventor <b>Components</b> are located on the left hand side of the <em>Designer Window</em> under the title <b>Palette</b>. Components are the basic elements you use to make apps on the Android phone. They're like the ingredients in a recipe. Some components are very simple, like a <b>Label</b> component, which just shows text on the screen, or a <b>Button</b> component (#1 left) that you tap to initiate an action. </p>
<p>Other components are more elaborate: a drawing <b>Canvas</b> that can hold still images or animations, an <b>Accelerometer</b> sensor that works like a Wii controller and detects when you move or shake the phone, components that send text messages, components that play music and video, components that get information from Web sites, and so on.</p>
<p>To use a component in your app, you need to click and drag it onto the viewer in the middle of the <b>Designer</b>. When you add a component to the <b>Viewer</b> (#1 below), it will also appear in the components list on the right hand side of the Viewer.</p>
<p>Components (#2 below) have properties that can be adjusted to change the way the component appears or behaves within the app. To view and change the properties of a component (#3 below), you must first select the desired component in your list of components.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/viewer.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/viewer.png" /></a></p>
<h3>Steps for selecting components and setting properties</h3>
<p><span style="color:green;">HelloPurr</span> will have a <b>Button</b> component that displays the image of the kitty you downloaded earlier. To accomplish this:</p>
<p><b>Step 1a</b>. From the <b>User Interface</b> palette, drag and drop the <b>Button</b> component to Screen1 (#1). </p>
<p><b>Step 1b</b>.To make the button have an image of a cat, in the <b>Properties</b> pane, under Image, click on the text <em>"None..."</em> and click <em>"Upload New…"</em> (#2). A window will pop up to let you choose the image file. Click "Browse" and then navigate to the location of the <em>kitty.png</em> file you downloaded earlier (#3). Click the <em>kitty.png</em> file, click "Open", and then click "OK".</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/upload.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/upload.png" /></a></p>
<hr /><p><b>Step 2</b>. Change the Button's <b>Text</b> property: Delete "Text for Button1", leaving the Button's text property blank so that there is no writing over the kitty's face. Your Designer should look like this:</p>
<blockquote><p>If the entire kitty picture is not showing up, you can fix this by setting the Height and Width properties of the button to "Fill Parent". To do this, click on the Button component, go to the right-hand Properties pane, scroll down to the very bottom to where it says Width and click on the word "Automatic..." to activate the drop down list. Choose "Fill Parent". Do the same for the Height property.</p></blockquote>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/kitty.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/kitty.png" /></a></p>
<hr /><p><b>Step 3</b>. From the <b>User Interface</b> palette, drag and drop the <b>Label</b> component to the Viewer (#1), placing it below the picture of the kitty. It will appear under your list of components as <span style="color:green;">Label1</span>.</p>
<p>Under the <b>Properties</b> pane, change the <b>Text</b> property of Label1 to read "Pet the Kitty" (#2). You'll see the text change in the Designer and on your device. Change the FontSize of Label1 to 30 (#3). Change the BackgroundColor of Label1 by clicking on the box (#4): you can change it to any color you like.  Change the TextColor of Label1 (#5) to any color you like. Here, the background color is set to blue and the text color is set yellow. </p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/label.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/label.png" /></a></p>
<hr /><p><b>Step 4</b>. Under Palette, click on the <b>Media</b> drawer and drag out a <b>Sound</b> component and place it in the Viewer (#1). Wherever you drop it, it will appear in the area at the bottom of the Viewer marked <b>Non-visible components</b>. Under the <b>Media</b> pane, Click <em>Upload New...</em> (#2) Browse to the location of the <b>meow.mp3</b> file that you downloaded earlier and upload it to this project (#3). Under the Properties pane, see that the <b>Source</b> property currently says <em>None...</em>. Click the word <em>None...</em> to change the Sound1 component's <b>Source</b> to <em>meow.mp3</em> (#4).</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/sound.png" /></p>
<h3>Programming with the Blocks Editor</h3>
<p>So far you have been arranging your app's screen and components in the <em>Designer</em>, which is in a web browser window. To start programming the behavior of the app, you need to go to the <em>Blocks Editor</em>. Click the Blocks button to go to the Blocks Editor.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/blocks.png" /></p>
<p>Once you have the Blocks Editor in front of you, continue to the next step to start programming your app with blocks.</p>
<h3>Making the sound play</h3>
<p><b>Step 1</b>. On the left side of the Blocks Editor, click the <b>Button1</b> drawer to open it. Drag and drop the <span class="blocks">Button1.Click</span> block in the work area (the open area on the right). </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/buttonblocks.png" /></p>
<p>Those mustard yellow blocks are called <b>event handler</b> blocks. The event handler blocks specifiy how the phone should respond to certain events: a button has been pressed, the phone is being shaken, the user is dragging her finger over a canvas, etc.  The event handler blocks are mustard yellow in color and use the word <em>when</em>. For example, <span class="eventblock">when Button1.Click</span> is an event handler</p>
<p>.</p>
<p><b>Step 2</b>. Click the <b>Sound1</b> drawer and drag the <span class="blocks">Sound1.Play</span> block and connect it to the "do" section of the <span class="blocks">when Button1.Click</span> block. The blocks connect together like puzzle pieces and you can hear a clicking sound when they connect.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/soundblocks.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/soundblocks.png" /></a></p>
<p>The purple blocks are called <b>command</b> blocks, which are placed in the body of event handlers.  When an event handler is executed, it runs the sequence of commands in its body.  A command is a block that specifies an action to be performed (e.g., playing sound) when the event (e.g., pressing Button1) is triggered.</p>
<p>Your blocks should look like this at this point:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/button1.click.png" /></p>
<p>Now you can see that the <b>command block</b> is in the <b>event handler</b>. This set of blocks means; "when Button1 is clicked, Sound1 will play."  The event handler is like a category of action (e.g., a button is being clicked), and the command specifies the type of action and the details of the action (e.g., playing sound a specified sound).</p>
<p>You can read more about the blocks and how they work here: <a href="support/blocks.html">Understanding Blocks in App Inventor 2</a>.</p>
<p>Try It! When you click the button you should hear the kitty meow. Congratulations, your first app is running! </p>
<pre class="box">Note: there is a known issue with the Sound component on some devices. If you see an "OS Error" and the sound does not play - or is very delayed in playing, go back into the Designer and try using a Player component (found under Media) instead of the Sound component.</pre><h3>Packaging your app</h3>
<p>While your device (emulator or phone/tablet) has been connected to App Inventor, your app has been running in real time on your device. If you disconnect the emulator/phone/tablet from the Blocks Editor, the app will vanish. You can always make it return by reconnecting the device. To have an app running without being connected to App Inventor, you must "<b>package</b>" the app to produce an application package (apk file).</p>
<p>To "package" the app to your phone or to send to someone else, click the <strong>Build</strong> tab at the top of the screen. Under Build, here are two options available for you to choose from.:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/package.png" /></p>
<p>1. <b>App (provide QR code):</b> You can generate a Barcode (a QR Code), which you can use to install the app on a phone or tablet that has a camera, with the aid of a barcode scanner, like the ZXing barcode scanner (freely available in Google Play). </p>
<p style="color:red;">Note: this barcode works only for your own device because it is associated with your google account. If you want to share your app with others via barcode, you'll need to download the .apk file to your computer and use a third-party software to convert the file into a barcode. More information can be found <a href="share.html">here</a>.</p>
<p>2. <b>App (save to my computer):</b> You can download the app to your computer as an apk file, which you can distribute and share as you like by manually installing it on other devices. (sometimes called <a href="http://www.techrepublic.com/blog/smartphones/how-to-side-load-apps-on-your-android-device/3114" target="blank">"side loading"</a>.</p>
<h3>Challenge! Make the cat purr</h3>
<p> The challenge is to have the cat purr when the button is clicked. Go to the Blocks Editor and open the <b>Sound1</b> drawer and drag the <span class="blocks">Sound1.Vibrate</span> block and place it under the <span class="blocks">Sound1.Play</span> block.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/vibrate.png" /></p>
<p>The <span class="blocks">Sound1.Vibrate</span> block has an open slot, which means you need to plug something into it to specify more about how the behavior should work. Here, we want to specify the length of the vibration. Numbers are calculated in thousandths of a second (milliseconds): to make the phone vibrate for half a second, we need to plug in a value of <b>500 milliseconds</b>.</p>
<p>In the Built-In palette, go to the <b>Math</b> drawer, drag the number block and place it at the socket of the <span class="blocks">Sound1.Vibrate</span>.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/selectnumber.png" /></p>
<p>After you place the number block, click the number "0". It highlights the number in black: type "500" with your keyboard.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/change0to500.png" /><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/done.png" /></p>
<p>Done!</p>
<p>Now connect your phone and tap the image of the cat on the phone. The phone should vibrate <em>and</em> meow at the same time. If you packaged your app to your phone, this may not happen. Although it may appear that your phone is connected, it might not be in real time.  To reconnect your phone, click the Connect button at the top of your screen, and select Reset Connection. If this does not work, close out of the app on your phone and restart the connection.</p>
<h4>Review</h4>
<p>Here are the key ideas covered so far:</p>
<ul><li>You build apps by selecting components (ingredients) and then telling them what to do and when to do it.</li>
<li>You use the <strong>Designer</strong> to select components and set each component's properties. Some components are visible and some aren't.</li>
<li>You can add media (sounds and images) to apps by uploading them from your computer.</li>
<li>You use the <strong>Blocks Editor</strong> to assemble blocks that define the components' behavior</li>
<li><span class="eventblock">when ... do ...</span> blocks define <em>event handlers</em>, that tell components what to do <em>when</em> something happens.</li>
<li><span class="blocks">call ...</span> blocks tell components to do things.</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/HelloPurrBarcode.png" /></p>
<p>Or <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/HelloPurr.apk">download the apk</a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/HelloPurr.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<h4 class="ai-header">Next steps</h4>
<p>Now that you know the basics of how App Inventor works we recommend you:</p>
<ul><li>Complete additional <a href="tutorials.html">Tutorials</a>.</li>
<li>Review the <a href="http://appinventor.mit.edu/explore/library.html">User Guide for App Inventor 2</a>.</li>
<li>Join the <a href="http://appinventor.mit.edu/explore/forums.html">User Discussion Forum</a>.</li>
<li>Read the guide to <a href="support/blocks.html">Understanding Blocks</a><a>.</a></li>
<li>Or, if you've been using the emulator and want to start using your phone, you can <a href="setup.html">set up your Android device</a> to build apps.</li>
</ul><pre class="ai-box">Something not working right? Visit the <a href="support/troubleshooting.html">troubleshooting page</a>, or check the <a href="http://appinventor.mit.edu/explore/forums.html">App Inventor User Forum</a> for help.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section>  </div>

  
  
  <article id="article-355" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/magic-8-ball" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Magic 8 Ball for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Magic 8 Ball for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><h3>Lesson One: Magic 8-Ball Predicts the Future</h3>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/8ball.jpg" style="float:left;width:75px;" /></p>
<p>This introductory module will guide you through building a “Magic 8-Ball” app with App Inventor 2. When activated, your 8-ball will deliver one of its classic predictions, such as “It is decidedly so” or “Reply hazy, try again.”</p>
<h3>Learning Goals</h3>
<p>After completing this app, you will be able to:</p>
<ul><li>Navigate the App Inventor environment: designer, blocks editor, emulator and/or physical phone</li>
<li>Correctly use the following App Inventor components: accelerometer sensor, button, player</li>
<li>Correctly use the following App Inventor concepts: making and using a list, responding to an event</li>
</ul><h3>Materials</h3>
<ul><li>A selection of images and sounds are available at the <a href="http://appinventor.mit.edu/explore/media-library.html">App Inventor Media Library</a>.</li>
</ul><h3>Outline</h3>
<ol><li><a href="setup.html">Set up</a> computers and phones or emulators. (Suggestion: do this ahead of time)</li>
<li><a href="#m8one">Part One: Click a Button, Hear a Sound</a> </li>
<li><a href="#m8two">Part Two: Click the Button, Get a Prediction + Hear a Sound</a> </li>
<li><a href="#m8three">Part Three: Shake the Phone, Get a Prediction + Hear a Sound</a> </li>
<li><a href="#m8four">Suggestions for further exploration:</a>  Text-to-Speech, Rotating image, Custom prediction lists</li>
</ol><h3><a name="m8one" id="m8one"></a>Part One: Click a Button, Hear a Sound</h3>
<p>The final Magic 8-Ball App will deliver a prediction from a list that you have designed. To get started, first we'll make a button with a picture on it, and program it to play a sound when the button is clicked.</p>
<p style="color:green;">DESIGN: App Inventor Designer</p>
<ol><li>To open the App Inventor Designer window, open a new tab or window in your browser and go to http://newblocks.appinventor.mit.edu. See <a href="setup.html">setup instructions</a> if you are not sure how to sign in.</li>
<li>If you have already made an app (such as Hello Purr), you will automatically be directed to the Designer with the last project you worked on showing. Click "Project" in the upper left corner of the screen and then "My Projects", which will take you to your list of projects. Click "New Project" and name your project something like "Magic8Ball" (note: spaces are not allowed).<br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/newproject.png" /></li>
<li>Download <b>one image</b> and <b>one sound file</b> from below to be used in your app.  Right click (control-click) on the link of the image or sound, then choose "Download" or "Save As". Save the media files to a convenient location that you will remember.
<ul><li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Cha_Ching.mp3">ChaChing Sound</a></li>
<li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Clinking_Teaspoon.mp3">Clinking Teaspoon Sound</a></li>
<li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Tada.mp3">Ta-Da Sound</a></li>
<li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/8ball.jpg">Magic 8 Ball Image</a></li>
<li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/magic8ball.jpg">Blank 8 Ball Image</a></li>
</ul></li>
<li>On the left column of the Designer, the User Interface palette should be open.  If it is not, click to open it.  Drag a Button component over to the Viewer (#1).</li>
<li>Set the button image to an 8-Ball image:<br />Click on your newly added button to see its properties in the Properties pane on the right. Under "Image" click on the word "None..." and a small selection window will pop up (#2). Click the "Upload File" button and browse to where you saved the 8-Ball image. Select the file, then click “OK” to close the selection window. Click “OK” again on the properties pane to close the small popup window (#3).</li>
<li>Go to the text field in the Properties pane and delete the display text of your button component (#4).<br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/newbutton.png" /><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/buttonproperties.png" /></li>
<li>From the Media palette, drag over a Player component onto the Viewer pane (#1). The Player component plays sound files. Notice that since the player will not be a visible part of the app, it appears at the bottom of the Viewer pane, as a “Non-visible component”.</li>
<li>Set the Player component's source file:<br />Click on your newly added Player component to see its properties in the Properties pane on the right. Under "Source" click in the small box on the word "None..." and a small selection window will pop up (#2). Click the "Upload File" button and browse to where you saved the sound file. Select the sound file, then click “OK” to close the selection window. Click “OK” again on the properties pane to close the small popup window (#3).
</li>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/soundproperties.png" /></p><li>You have now completed the work in the Designer for Part One of this app. It's time now to go over to the Blocks Editor to program the behavior of these components.</li>
</ol><p style="color:green;">BUILD: Blocks Editor</p>
<p>In the upper right corner of the Designer, click on the Blocks button.</p>
<p>Now you are going to tell your app how to behave when the button is clicked. This is actually very simple in App Inventor, because the "code" for the program only consists of two blocks!</p>
<p>Once the Blocks Editor is open, there are several options running along the left side of the screen. We refer to these as "Palettes" with “Drawers.” </p>
<p>From the blocks palette located under Screen1, click on the Button1 drawer. Drag the <span class="controlblock-ai2">when Button1.Click</span> block into the work area (#1). From the blocks palette, click on the Player1 drawer, drag the <span class="callblock-ai2">Player1.Play</span> block into the work area and insert it into the <span class="controlblock-ai2">when Button1.Click</span> block (#2). They will click together like magnetic puzzle pieces.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/blocks_drag.png" /></p>
<p>Your blocks should now look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/button1.click.png" /></p>
<p>That's it! You've written the program for Part One of Magic 8-Ball. Now it's time to test that it's working right.</p>
<p style="color:green;">TEST: Phone/Emulator</p>
<p>You have now built an app! To test that it works, you either have to launch an emulator, or connect to a phone. Go back to the <a href="setup.html">Setup Instructions</a> if you do not have a phone or an emulator running.</p>
<p><b>Emulator</b>: click on the picture, you will hear the sound play.<br /><b>Phone</b>: tap the picture, you will hear the sound play.</p>
<pre class="ai-box">Note: If you don't hear the sound, first be sure you have the volume turned up on your device (or computer if using emulator). Also, make sure your device has an SD card. App Inventor stores media files to the SD card. </pre><h3><a name="m8two" id="m8two"></a>Part Two: Click the Button, Get a Prediction + Hear a Sound</h3>
<p>Now that we've gotten the button to perform an action (play a sound), we want to extend that action to include giving the user a prediction. First we'll need two labels: Label1 will display the instructions, and Label2 will display the chosen prediction. We'll use blocks to program a "list picker" to choose from a list of predictions. Each time the button is clicked, the app will change the text of Label2 to display the chosen prediction.</p>
<p style="color:green;">DESIGN: App Inventor</p>
<p>Go back to the Designer window in your browser and add some new things to your app.</p>
<ol><li>From the Screen Arrangement palette, drag over the Vertical Arrangement component (#1). At first it will just look like an empty box, but when you put things in it, App Inventor will know that you want to line them up vertically (one on top of the other).</li>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/viewer_addvertarr.png" /></p>
<li>From the Basic palette, drag over a Label component (#2) and drop it inside of the vertical arrangement component. In the Properties pane, change the "Text" property of Label1 to “Ask the Magic 8-Ball a question”.(#3)</li>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/vert_addlabel.png" /></p>
<li>From the Basic palette, drag over another Label component (Label2) into the Vertical Arrangement box so that it sits right below Label1. Change the "Text" property of the Label2 to “Touch the Magic 8-Ball to receive your answer.” Now drag the 8-Ball image so that it is also inside the Vertical Arrangement component on top of the two labels. This will cause them to line up with each other in a vertical line. (Note: this can be tricky mouse work, but get them in there just right and the vertical arrangement will resize itself to fit everything.)</li>
</ol><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/align.png" /></p>
<p>Now it’s time to go back into the Blocks Editor to program the components you just added to your project.</p>
<p style="color:green;">BUILD: Blocks Editor</p>
<p>Now for the fun part! You're going to make a list of predictions and program the button to pick one item from the list and display it inside Label2. The button will also still play the sound that you programmed in Part One. Here's how to do it...</p>
<ol><li>From the blocks palette, click on Label2 drawer to see all of its associated blocks. Drag over the green <span class="setcomponent-ai2">set Label2.BackgroundColor</span> and insert it just above the <span class="callblock-ai2">Player1.Start</span> block. Notice that the <span class="controlblock-ai2">when Button1.Click</span> block automatically gets bigger to accomodate the new block.</li>
<li>Clicking on the word "BackgroundColor" will allow you to change the property that is being set. We want to change the Text so our block will look like <span class="setcomponent-ai2">set Label2.Text</span>.<br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Label2.Text.png" /></li>
<li>From the Built-In palette, click on the Lists drawer. Drag over the <span class="listblock-ai2">pick random item</span> block and connect it to the open socket of the <span class="setcomponent-ai2">set Label2.Text</span> block.<br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Listdrawer.png" /></li>
<li>From the Built-In palette, click on Lists again, then drag out the <span class="listblock-ai2">make a list</span> block and plug it into the "list" socket on the right side of the <span class="listblock-ai2">pick random item</span> block.</li>
<li>From the Built-In palette, click on the Text drawer, drag out a <span class="textblock-ai2">"   "</span> block and connect it to the item socket of the <span class="listblock-ai2">make a list</span> block.  Click directly on the space in the block. You can then type in text there. Think about the sayings you want in your list of predictions for the Magic 8-Ball.  Type the first prediction into this new text block.</li>
<li>Notice after you plug in two text blocks, there are no more sockets to add more responses. To create more sockets, you need to click the dark blue button on the block. <span class="listblock-ai2">Make a list</span> is called a mutator block and thus can be expanded or shrunk by clicking the blue button in the upper left corner.  For a summary of mutators, check out the <a href="support/concepts/mutators.html">Mutators page</a><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/UserGuide/blocks/lists/makealist.gif" /></li>
<li> Plug each text block into the <span class="listblock-ai2">pick random item</span> block. (Ideas for answers: <a href="http://en.wikipedia.org/wiki/Magic_8-Ball">http://en.wikipedia.org/wiki/Magic_8-Ball</a>)</li>
</ol><p>Blocks should look something like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/finalblocks.png" /></p>
<p>You've got a Magic 8-Ball App! Now your app is fully functional and will predict the future with absolute certainty. Test out that this works, and then come back for some challenge tasks to make the app even more fun.</p>
<p style="color:green;">TEST: Emulator or Phone</p>
<p><b>Emulator</b>: Click on the picture of the 8-Ball, you should see one of your answers displayed in the Label2.Text field, followed by the sound.<br /><b>Phone</b>: Tap on the picture of the 8-Ball, you should see one of your answers displayed in the Label2.Text field, followed by the sound.</p>
<h3><a name="m8three" id="m8three"></a>Part Three: Shake the Phone, Get a Prediction + Hear a Sound</h3>
<p>Even though you have a working Magic 8-Ball app, there is a way to make it even more fun. You can use the accelerometer component to make the phone respond to shaking instead of responding to a button click. This will make the app much more like a real Magic 8-Ball toy. <em>Note: This part can only be done with an actual phone or tablet equipped with an accelerometer. If you are using an emulator, skip this part and go to Challenge 1 instead.</em></p>
<p style="color;green;">DESIGN: App Inventor</p>
<p>From the Sensors palette, drag over an <b>AccelerometerSensor</b> sensor component. Notice that it automatically drops down to the “Non-visible components” area of the Viewer window. This is the only new component you need, so go on over to the Blocks Editor to change your program.</p>
<p style="color:green;">BUILD: Blocks Editor</p>
<ol><li>From the blocks drawer, click on AccelerometerSensor, then drag out the block for <span class="controlblock-ai2">when AccelerometerSensor.Shaking</span>.</li>
<li>Disconnect all of the blocks from inside the <span class="controlblock-ai2">Button1.Click</span> block and move them inside the <span class="controlblock-ai2">AccelerometerSensor.Shaking</span> block. <b>NOTE:</b> you can move whole sections of connected blocks by clicking on the uppermost or leftmost block and dragging it. The connected blocks will come with it.</li>
<li>Delete the <span class="controlblock-ai2">Button1.Click</span> block to keep your work area tidy.</li>
</ol><p>The blocks should look something like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/shaking.png" /></p>
<p style="color:green;">TEST: Phone/Emulator</p>
<p><b>Phone</b>: When you shake the phone it should show an answer and play a sound.<br /><b>Emulator</b>: unfortunately, you can not simulate shaking the phone when using the emulator.</p>
<p style="color:green;">Package the App to Your Phone!</p>
<p>Your app would disappear if you were to disconnect your phone from the Blocks Editor. This is because the app is still stored on the App Inventor server and not on your phone. Follow <a href="share.html">these instructions</a> to package your app to your phone or to make an ".apk" file that can be installed on any android phone. Or, if you want to make your app even cooler, try the challenges below.</p>
<h3>Challenge 1: Make the Magic 8-Ball Speak</h3>
<p>Instead of (or in addition to) making the prediction appear as text, can you make the 8-Ball speak it aloud? Hint: the text-to-speech component is under the <b>Media</b> palette in the Designer. <em>Note: Most Android devices have the text-to-speech (TTS) capability, but if you have trouble getting the TTS component in App Inventor to work, you may need to find out how to install TTS and/or enable TTS on your device.</em></p>
<h3><a name="m8four" id="m8four"></a>Suggestions for Further Exploration</h3>
<p>
</p><ul><li>Make the image rotate when the phone is shaken or have several images that the app rotates through while the phone is shaken. You could use this technique to make it look like the triangle piece inside the 8-ball window is surfacing. You could also make different images for different predictions and display the correct image for each prediction.</li>
<li>Make a similar app but for a different purpose. The phone could be used in place of dice or yahtzee letters. It could simulate a coin toss or a random number or color generator for investigating probability.</li>
<li>Ask end users to add choices to the list of predictions (See <a href="makequiz.html">Make Quiz</a> tutorial).</li>
<li>"Crowd source" for prediction choices: allow people to send text messages and have the app add them to the list.</li>
<li>Make the 8 Ball app a "server" so that anyone who sends a text to it will receive a text message prediction in return.</li>
<li>Complete change the list to humorous choices (e.g. an app for teacher to use when a student has an excuse for not doing homework), or for useful purposes like randomly selecting a name from amongst people in the class.</li>
</ul><pre class="ai-box">Done with Magic 8-Ball? Return to <a href="http://appinventor.mit.edu/explore/teach.html">Curriculum (Teacher Resources)</a> or <a href="tutorials.html">Tutorials</a>.</pre><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Magic8BallBarcode.png" /></p>
<p>Or <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Magic8Ball.apk">download the apk</a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/magic8ball/Magic8Ball.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Game</li><li class="field-item odd">Accelerometer</li></ul></section>  </div>

  
  
  <article id="article-356" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/molemash" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      MoleMash for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="MoleMash for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p><img style="float:right;" src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoleOnEmulator.png" /></p>
<p>In the game <span style="color:green;">MoleMash</span>, a mole pops up at random positions on a playing field, and the player scores points by hitting the mole before it jumps away. This tutorial shows how to build <span style="color:green;">MoleMash</span> as an example of a simple game that uses animation.</p>
<p><a href="http://www.appinventor.org/MoleMash2">View the NEW book chapter from the App Inventor Book by Wolber, et al. (Includes VIDEO tutorial)</a></p>
<h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project. Name it "MoleMash", and also set the screen's <strong style="color:green;">Title</strong> to "MoleMash". Open the Blocks Editor and connect to the phone.</p>
<p>Also download this <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/mole.png">picture of a mole</a> and save it on your computer.</p>
<h4 class="ai-header">Introduction</h4>
<p>You'll design the game so that the mole moves once every half-second. If it is touched, the score increases by one, and the phone vibrates. Pressing restart resets the score to zero.</p>
<p>This tutorial introduces:</p>
<ul><li>image sprites</li>
<li>timers and the <strong>Clock</strong> component</li>
<li>procedures</li>
<li>picking random numbers between 0 and 1</li>
<li>text blocks</li>
<li>typeblocking</li>
</ul><h4 class="ai-header">The first components</h4>
<p>Several components should be familiar from previous tutorials:</p>
<ul><li>A <strong>Canvas</strong> named "MyCanvas". This is the area where the mole moves.</li>
<li>A <strong>Label</strong> named "ScoreLabel" that shows the score, i.e., the number of times the player has hit the mole.</li>
<li>A <strong>Button</strong> named "ResetButton".</li>
</ul><p>Drag these components from the Palette onto the Viewer and assign their names. Put <span style="color:green;">MyCanvas</span> on top and set its dimensions to 300 pixels wide by 300 pixels high. Set the <strong style="color:green;">Text</strong> of ScoreLabel to "Score: ---". Set the <strong style="color:green;">Text</strong> of ResetButton to "Reset". Also add a <strong>Sound</strong> component and name it "Noise". You'll use <span style="color:green;">Noise</span> to make the phone vibrate when the mole is hit, similar to the way you made the kitty purr in <span style="color:green;">HelloPurr</span>.</p>
<h4 class="ai-header">Timers and the Clock component</h4>
<p>You need to arrange for the mole to jump periodically, and you'll do this with the aid of a <strong>Clock</strong> component. The Clock component provides various operations dealing with time, like telling you what the date is. Here, you'll use the component as a timer that fires at regular internals. The firing interval is determined by the Clock 's <strong style="color:green;">TimerInterval</strong> property. Drag out a Clock component; it will go into the non-visible components area. Name it "MoleTimer". Set its TimeInterval to 500 milliseconds to make the mole move every half second. Make sure that <strong style="color:green;">TimerEnabled</strong> is checked.</p>
<h4 class="ai-header">Adding an Image Sprite</h4>
<p>To add the moving mole we'll use a <em>sprite</em>.</p>
<p>Sprites are images that can move on the screen within a Canvas. Each sprite has a <strong style="color:green;">Speed</strong> and a <strong style="color:green;">Heading</strong>, and also an <strong style="color:green;">Interval</strong> that determines how often the sprite moves at its designated speed. Sprites can also detect when they are touched. In <span style="color:green;">MoleMash</span>, the mole has a speed zero, so it won't move by itself. Instead, you'll be setting the mole's position each time the timer fires. Drag an <strong>ImageSprite</strong> component onto the Viewer. You'll find this component in the Drawing and Animation category of the Palette. Place it within <span style="color:green;">MyCanvas</span> area. Set these properties for the Mole sprite:</p>
<ul><li><strong style="color:green;">Picture</strong>: Use mole.png, which you downloaded to your computer at the beginning of this tutorial.</li>
<li><strong style="color:green;">Enabled</strong>: checked</li>
<li><strong style="color:green;">Interval</strong>: 500 (The interval doesn't matter here, because the mole's speed is zero: it's not moving by itself.)</li>
<li><strong style="color:green;">Heading</strong>: 0 The heading doesn't matter here either, because the speed is 0.</li>
<li><strong style="color:green;">Speed</strong>: 0.0</li>
<li><strong style="color:green;">Visible</strong>: checked</li>
<li><strong style="color:green;">Width</strong>: Automatic</li>
<li><strong style="color:green;">Height</strong>: Automatic</li>
</ul><p>You should see the <strong style="color:green;">x</strong> and <strong style="color:green;">y</strong> properties already filled in. They were determined by where you placed the mole when you dragged it onto <span style="color:green;">MyCanvas</span>. Go ahead and drag the mole some more. You should see <strong style="color:green;">x</strong> and <strong style="color:green;">y</strong> change. You should also see the mole on your connected phone, and the mole moving around on the phone as you drag it around in the Designer. You've now specified all the components. The Designer should look like this. Notice how <span style="color:green;">Mole</span> is indented under <span style="color:green;">MyCanvas</span> in the component structure list, indicating that the sprite is a sub-component of the canvas.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoleMashDesigner.png" /></p>
<h4 class="ai-header">Component Behavior and Event Handlers</h4>
<p>Now you'll specify the component behavior. This introduces some new App Inventor ideas. The first is the idea of a <em>procedure</em>. For an overview and explanation of procedures, check out the <a href="support/concepts/procedures.html">Procedures page</a>.</p>
<p>A procedure is a sequence of statements that you can refer to all at once as single command. If you have a sequence that you need to use more than once in a program, you can define that as a procedure, and then you don't have to repeat the sequence each time you use it. Procedures in App Inventor can take arguments and return values. This tutorial covers only the simplest case: procedures that take no arguments and return no values.</p>
<h4 class="ai-header">Define Procedures</h4>
<p>Define two procedures:</p>
<ul><li><span class="callblock-ai2">MoveMole</span> moves the <span style="color:green;">Mole</span> sprite to a new random position on the canvas.</li>
<li><span class="callblock-ai2">UpdateScore</span> shows the score, by changing the text of the <strong style="color:green;">ScoreLabel</strong></li>
</ul><p>Start with MoveMole:</p>
<ul><li>In the Blocks Editor, under Built-In, open the Procedures drawer. Drag out a <span class="callblock-ai2">to procedure</span> block and change the label "procedure" to "MoveMole".<br /><pre class="box">Note: There are two similar blocks: <span class="callblock-ai2">procedure then do</span> and <span class="callblock-ai2">procedure then resu;t</span>. Here you should use <span class="callblock-ai2">procedure then do</span>.</pre><p>The <span class="callblock-ai2">to MoveMole</span> block has a slot labeled "do". That's where you put the statements for the procedure. In this case there will be two statements: one to set the mole's x position and one to set its y position. In each case, you'll set the position to be a random fraction, between 0 and 1, of the difference between the size of the canvas and the size of the mole. You create that value using blocks for <span class="mathblock-ai2">random fraction</span> and multiplication and subtraction. You can find these in the Math drawer.</p></li>
<li>Build the <span style="color:green;">MoveMole</span> procedure. The completed definition should look like this:<br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoveMole.png" /><br /><span style="color:green;">MoveMole</span> does not take any arguments so you don't have to use the <a href="support/concepts/mutators.html">mutator</a> function of the procedure block. Observe how the blocks connect together: the first statement uses the <span class="setblock">Mole.X set</span> block to set mole's horizontal position. The value plugged into the block's socket is the result of multiplying:
<ol><li>The result of the <span class="mathblock-ai2">call random fraction</span> block, which a value between 0 and 1</li>
<li>The result of subtracting the mole's width from the canvas width</li>
</ol><p>The vertical position is handled similarly.</p></li>
</ul><p>With <span style="color:green;">MoveMole</span> done, the next step is to define a variable called <span style="color:green;">score</span> to hold the score (number of hits) and give it initial value 0. Also define a procedure <span class="callblock-ai2">UpdateScore</span> that shows the score in <span style="color:green;">ScoreLabel</span>. The actual contents to be shown in <span style="color:green;">ScoreLabel</span> will be the text "Score: " joined to the value of <span style="color:green;">score</span>.</p>
<ul><li>To create the "Score: " part of the label, drag out a text block from the Text drawer. Change the block to read "Score: " rather than "   ".</li>
<li>Use a join block to attach this to a block that gives the value of the score variable. You can find the join block in the Text drawer.</li>
</ul><p>Here's how <span style="color:green;">score</span> and <span class="callblock-ai2">UpdateScore</span> should look:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/UpdateScore.png" /></p>
<h4 class="ai-header">Add a Timer</h4>
<p>The next step is to make the mole keep moving. Here's where you'll use <span style="color:green;">MoleTimer</span>. Clock components have an event handler called <span class="eventblock">when ... Timer</span> that triggers repeatedly at a rate determined by the <strong style="color:green;">TimerInterval</strong>.</p>
<p>Set up <span style="color:green;">MoleTimer</span> to call <span class="callblock-ai2">MoveMole</span> each time the timer fires, by building the event handler like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoleMashTimerEventHandler.png" /></p>
<pre class="ai-box">Notice how the mole starts jumping around on the phone as soon as you define the event handler. This is an example of how things in App Inventor start happening instantaneously, as soon as you define them.</pre><h4 class="ai-header">Add a Mole Touch Handler</h4>
<p>The program should increment the score each time the mole is touched. Sprites, like canvases, respond to touch events. So create a touch event handler for <span style="color:green;">Mole</span> that:</p>
<ol><li>Increments the score.</li>
<li>Calls <span class="callblock-ai2">UpdateScore</span> to show the new score.</li>
<li>Makes the phone vibrate for 1/10 second (100 milliseconds).</li>
<li>Calls <span class="callblock-ai2">MoveMole</span> so that the mole moves right away, rather than waiting for the timer.</li>
</ol><p>Here's what this looks like in blocks. Go ahead and assemble the <span class="eventblock">when Mole.Touched</span> blocks as shown.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoleMashTouchEventHandler.png" /></p>
<p>Here's a tip: You can use <a href="http://appinventor.mit.edu/explore/tips/typeblocking.html">typeblocking</a>: typing to quickly create blocks.</p>
<ul><li>To create a value block containing 100, just type 100 and press return.</li>
<li>To create a <span class="callblock-ai2">MoveMole</span> block, just type <span class="callblock-ai2">MoveMole</span> and select the block you want from the list</li>
</ul><h4 class="ai-header">Reset the Score</h4>
<p>One final detail is resetting the score. That's simply a matter of making the <span style="color:green;">ResetButton</span> change the score to 0 and calling <span class="callblock-ai2">UpdateScore</span>.</p>
<h4 class="ai-header">Complete Program</h4>
<p>Here's the complete <span style="color:green;">MoleMash</span> program:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoleMashComplete.png" /></p>
<h4 class="ai-header">Variations</h4>
<p>Once you get the game working, you might want to explore some variations. For example:</p>
<ul><li>Make the game vary the speed of the mole in response to how well the player is doing. To vary how quickly the mole moves, you'll need to change the <span style="color:green;">MoleTimer</span>'s <strong style="color:green;">Interval</strong> property.</li>
<li>Keep track of when the player hits the mole and when the player misses the mole, and show a score with both hits and misses. To do this, you'll need do define touched handlers both for <span style="color:green;">Mole</span>, same as now, and for <span style="color:green;">MyCanvas</span>. One subtle issue, if the player touches the mole, does that also count as a touch for <span style="color:green;">MyCanvas</span>? The answer is yes. Both touch events will register.</li>
</ul><h4 class="ai-header">Review</h4>
<p>Here are some of the ideas covered in this project:</p>
<ul><li>Sprites are touch-sensitive shapes that you can program to move around on a <strong>Canvas</strong>.</li>
<li>The <strong>Clock</strong> component can be used as a timer to make events that happen at regular intervals.</li>
<li>Procedures are defined using <span class="callblock-ai2">to</span> blocks.</li>
<li>For each procedure you define, App Inventor automatically creates an associated call block and places it in the My Definitions drawer.</li>
<li>Making a <span class="mathblock-ai2">random-fraction</span> block produces a number between 0 and 1.</li>
<li>Text blocks specify literal text, similar to the way that number blocks specify literal numbers.</li>
<li><a href="http://appinventor.mit.edu/explore/tips/typeblocking.html">Typeblocking</a> is a way to create blocks quickly, by typing a block's name.</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoleMashBarcode.png" /></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash/MoleMash.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<pre class="ai-box">Done with <span style="color:black;">MoleMash</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Sprites</li><li class="field-item odd">Clock Timer</li><li class="field-item even">Game</li></ul></section>  </div>

  
  
  <article id="article-357" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/paintpot-part1" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      PaintPot (Part 1) for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="PaintPot (Part 1) for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>This tutorial has two parts: <a href="paintpot-part1.html">Part 1</a> | <a href="paintpot-part2.html">Part 2</a> </p>
<p>This tutorial introduces the <strong>Canvas</strong> component for creating simple two-dimensional graphics. You'll build an app that lets you draw on the phone screen in different colors.</p>
<pre class="ai-box"><strong>Historical note</strong>: PaintPot was one of the first programs developed to demonstrate the potential of personal computers, as far back as the 1970s.</pre><p><a href="http://cs.usfca.edu/~wolber/appinventor/bookSplits/ch2PaintPot.pdf">Download Book Chapter PDF</a></p>
<p><img style="float:right;margin:5px;" src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPotPart1PhoneImage.png" /></p>
<p>With the <span style="font-style:italic;">PaintPot</span> app, you can:</p>
<ul><li>Dip your finger into a virtual paint pot to draw in that color.</li>
<li>Drag your finger along the screen to draw a line.</li>
<li>Tap the screen to make dots.</li>
<li>Use the button at the bottom to wipe the screen clean.</li>
<li>Include an image as a drawing background.</li>
</ul><p><span style="font-style:italic;">
<p>This tutorial assumes that you have completed the <a href="hellopurr.html">HelloPurr</a> tutorial. This tutorial introduces the following App Inventor concepts:</p>
<ul><li>The <strong>Canvas</strong> component for drawing.</li>
<li>Controlling screen layout with <strong>Arrangement</strong> components.</li>
<li>Event handlers that take arguments.</li>
<li>Variables.</li>
</ul><h4 class="ai-header">Before starting</h4>
<p>Make sure your computer and your phone are set up to use App Inventor. Start a new project in the Designer window, and name it <span style="font-style:italic;">"PaintPot"</span>. Open the Blocks Editor, click <strong>Connect to Phone</strong>, and make sure the phone has started the App Inventor app.</p>
<h4 class="ai-header">Screen title</h4>
<p>To get started, go to the Properties panel on the right of the Designer and change the screen <strong>Title</strong> to "PaintPot". You should see this change on phone, with the new title showing in the title bar.</p>
<p>There are three names in App Inventor, and it's easy to confuse them:</p>
<ol><li>The name you choose for your project as you work on it (in this case, <span style="font-style:italic;">PaintPot</span>). This will also be the name of the application if you package it for the phone.</li>
<li>The name "Screen1", which is the name of the <strong>Screen</strong> component. You'll see it listed in the Components panel in the Designer. You can't change the name of the first Screen component in the current version of App Inventor but you can create additional screens with names of anything you should choose.</li>
<li>The <strong>Title</strong> property of the screen, which is what you'll see in the phone's title bar. Title is a property of the <strong>Screen</strong> component. The Title starts out being "Screen1", which is what you used in  <span style="font-style:italic;">HelloPurr</span>. However, you can change it, as you're doing for <span style="font-style:italic;">PaintPot</span>. To reiterate, the name and the title of Screen1 are initially the same, but you can change the title if you want.</li>
</ol><h4 class="ai-header">Set up the Components</h4>
<p>You'll use these components to make <span style="font-style:italic;">PaintPot</span>:</p>
<ul><li>Three <strong>Buttons</strong> for selecting <strong style="color:red">red</strong>, <strong style="color:blue">blue</strong>, or <strong style="color:green">green</strong> paint, and another button for wiping the drawing.</li>
<li>A <strong>Canvas</strong>, the drawing surface. This canvas has a <strong>BackgroundImage</strong>, which is <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloPurr/kitty.png">this kitty</a> from the <span style="font-style:italic;">HelloPurr</span> tutorial. You can also draw on a blank canvas. That's just a canvas without a background image.</li>
<li>There's also a component you don't see: you use a <strong>HorizontalArrangement</strong> to make the three color buttons line up.</li>
</ul><p>That makes five components in all. Let's get them and build the app.</p>
<h4 class="ai-header">Color Buttons</h4>
<ul><li>Drag a <strong>Button</strong> component onto the Viewer and change the button's <strong>Text</strong> attribute to "Red" and make its <strong>BackgroundColor</strong> red.</li>
<li>Click on <span style="font-style:italic;">Button1</span> in the components list in the Viewer to highlight it (it might already be highlighted) and use the <strong>Rename...</strong> button to change its name from "Button1" to "ButtonRed".</li>
<li>Similarly, make two more buttons for blue and green, named "ButtonBlue" and "ButtonGreen", placing them vertically under the red button.</li>
</ul><p>Here's how this should look in the designer, with the button names appearing in the list of project components. In this project, you're changing the names of the components rather than leaving them as the default names as you did with <span style="font-style:italic;">HelloPurr</span>. Using meaningful names makes your projects more readable to yourself and others.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPotThreeButtonsVertically.png" /></p>
<p>You should also see the three buttons on the phone screen.</p>
<h4 class="ai-header">Layout with Screen Arrangement</h4>
<p>You should now have three buttons, one above the other. The next step is to make them line up horizontally. You do this using a <strong>HorizontalArrangement</strong> component.</p>
<ol><li>From the Palette's Layout category, drag out a <strong>HorizontalArrangement</strong> component and place it under the buttons. Change the name of this component from "HorizontalArrangement1" to "ThreeButtons".</li>
<li>In the Properties panel, change the <strong>Width</strong> of <span style="font-style:italic;">ThreeButtons</span> to "Fill Parent..." so that it fills the entire width of the screen.</li>
<li>Move the three buttons side by side into the <strong>HorizontalArrangement</strong> component. <strong>Hint</strong>: You'll see a blue vertical line that shows where the piece you're dragging will go.</li>
</ol><p>If you look in the list of project components, you'll see the three buttons indented under the <span style="font-style:italic;">ThreeButtons</span> to show that they are now its subcomponents. Notice that all the components are indented under <span style="font-style:italic;">Screen1</span>.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPotThreeButtonsHoriz.png" /></p>
<p>You should also see your three buttons line up in a row on the phone screen, although things might not look exactly as on the Designer. For example, the Arrangement's outline shows in the Designer but not on the phone.</p>
<p>In general, you use Screen Arrangement to create simple vertical or horizontal layouts. You can create more complex layouts by nesting Screen Arrangement components. There is also a <strong>TableArrangement</strong> component (not covered in this tutorial).</p>
<h4 class="ai-header">Canvas and wipe button</h4>
<p>The final two components are the canvas and the wipe button.</p>
<ol><li>From the Palette's Drawing and Animation category drag a <strong>Canvas</strong> component onto the Viewer. Change its name to "DrawingCanvas". Set its <strong>Width</strong> to "Fill Parent" and set its <strong>Height</strong> to 300 pixels.</li>
<li>Add a Background Image to the <strong>Canvas</strong>. Click on the field containing "None..." next to <strong>BackgroundImage</strong> in the canvas's Properties panel. You can use the same kitty.png file, if you still have it on your desktop from an earlier tutorial. Or you can use another image.<br /><pre class="ai-box">You can use any image you like, but you'll get the best results if the size of the image (in pixels) is close to the size at which you'll be showing it on the phone. Also, large images will take a long time to load, and might exceed the memory capacity of the phone allocates for applications.</pre></li>
<li>From the Palette, drag the final button onto the screen, placing it under the canvas. Rename this button component to "ButtonWipe" and change its <strong>Text</strong> attribute to "Wipe".</li>
</ol><p>You've now completed the steps to set the appearance of your app. Here's how this should look in the Designer. Next, you'll define how the components behave.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPotDesign.png" /></p>
<h4 class="ai-header">Add behaviors to the components</h4>
<p>Click the Blocks button to switch to the Blocks Editor. First you will set up the buttons that change the paint color. Later you will add blocks to decide what happens when someone touches or drags the screen.</p>
<h4 class="ai-header">Add button event handlers</h4>
<p>In the Blocks Editor:</p>
<ol><li>Open the drawer for <span style="font-style:italic;">ButtonRed</span> and drag out the <span class="controlblock-ai2">when ButtonRed.Click </span> block.</li>
<li>Open the <span style="font-style:italic;">DrawingCanvas</span> drawer. Drag out the <span class="setcomponent-ai2">set DrawingCanvas.PaintColor to </span> block (remember that the set block of components is a <a href="concepts/dropdowns.html">dropdown</a> so PaintColor is a selection in the dropdown) and place it in the <span class="controlblock-ai2">do</span> section of <span class="controlblock-ai2">when ButtonRed.Click </span>.<br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/canvasdropdown.gif" /></li>
<li>Open the Colors drawer and drag out the block for the color Red and put it into <span class="setcomponent-ai2">set DrawingCanvas.PaintColor to </span>. (Clicking on a color block after it's been placed will display a table of colors that you can select from.)</li>
<li>Repeat steps 2-4 for the blue and green buttons.</li>
<li>The final button to set up is the Wipe button. Make a click event handler for <span style="font-style:italic;">ButtonWipe</span> by dragging <span class="controlblock-ai2">when ButtonWipe.Click </span> from the <span style="font-style:italic;">ButtonWipe</span> drawer. From the <span style="font-style:italic;">DrawingCanvas</span> drawer, drag <span class="callblock-ai2">call DrawingCanvas.Clear </span> and place it in the <span class="controlblock-ai2">do</span> area of the <span class="controlblock-ai2">when ButtonWipe.Click</span> block.</li>
</ol><p>The blocks for the buttons should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/buttonsclick.png" /></p>
<h4 class="ai-header">Add Touch-event Handlers</h4>
<p>Now for the next step: drawing on the <strong>Canvas</strong>. You'll arrange things so that when you touch the canvas, you get a dot at the spot where you touch. If you drag your finger slowly along the canvas, it draws a line.</p>
<ul><li>In the Blocks Editor, open the drawer for the canvas and drag the <span class="controlblock-ai2">when DrawingCanvas.Touched</span> block to the workspace. As soon as you drag the block out, you may notice three argument names (highlighted in orange) located at the top of the block <strong>x</strong>, <strong>y</strong>, and <strong>touchedSprite</strong>. These arguments are also known as local variables and can get accessed by using the <span class="variableblock-ai2">get</span> or <span class="variableblock-ai2">set</span> block found in the Variables drawer and then selecting the proper variable in the drop drown menu. You can also access these variables by moving your cursor over to the highlighted name and selecting the variable you would like to use.</li>
</ul><p>You've already seen button click events. Clicks are simple, because there's nothing to know about the click other than that it happened. Other event handlers such as <span class="controlblock-ai2">when ... Touched</span> need information about the event. In App Inventor, this information is expressed as the value of arguments associated with the event handler. For the <span class="controlblock-ai2">when ... Touched</span> event, the first two arguments stand for the x and y coordinates of where the touch happened. We'll save <strong>touchedSprite</strong> for a later tutorial.</p>
<ul><li>For this touch event, make the canvas draw a small circle at the point with coordinates (x, y). Drag out a <span class="callblock-ai2">call DrawingCanvas.DrawCircle</span> command from the canvas drawer and place it in the <span class="controlblock-ai2">do</span> section of <span class="controlblock-ai2">when DrawingCanvas.Touched</span>.</li>
</ul><p>On the right side of the <span class="callblock-ai2">call DrawingCanvas.DrawCircle</span> block are four sockets where you must specify values for the x and y coordinates where the circle should be drawn, <strong>r</strong>, which is the radius of the circle, and <strong>fill</strong>, which is true to draw a filled circle, or false to draw an outlined circle. For <strong>x</strong> and <strong>y</strong>, you'll use values of the arguments that were supplied to the Touched handler:</p>
<ol><li>Move your cursor over the x variable (highlighted in orange). Find the <span class="getblock">get x</span> block and drag it into the corresponding x socket in the <span class="controlblock-ai2">when DrawingCanvas.Touched</span> block.</li>
<li>Do the same for the y variable.</li>
<li>You'll also need to specify the radius of the circle to draw. Five (pixels) is a good value for this app. Click in a blank area of the screen and type the number 5 followed by return to create a number block with a value of 5. Typing on the blank area of the screen is called <a href="http://appinventor.mit.edu/explore/tips/typeblocking.html">typeblocking</a> and is a useful shortcut to know. This can be done for any block, not just numbers. Plug the block for 5 into the radius slot. Click on the following links for more information on <a href="support/concepts/procedures.html">arguments</a> and <a href="http://appinventor.mit.edu/explore/tips/typeblocking.html">typeblocking</a>.</li>
<li>Drag out a true block from the Logic drawer and plug it into the fill slot. This ensures the dots drawn will be filled in.</li>
</ol><p>Here's how the touch event handler should look:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPotTouchHandler.png" /></p>
<p>Try out what you have so far on the phone. Touch a color button. Now touch the canvas, and your finger should leave a spot at each place you touch. Touching the Wipe button should clear your drawing.</p>
<h4 class="ai-header">Add Drag Events</h4>
<p>Finally, add the drag event handler. Here's the difference between a touch and a drag:</p>
<ul><li>A touch is when you place your finger on the canvas and lift it without moving it.</li>
<li>A drag is when you place your finger on the canvas and move your finger while keeping it in contact.</li>
</ul><p>When you drag your finger across the screen, it appears to draw a giant, curved line where you moved your finger. What you're actually doing is drawing hundreds of tiny straight lines: each time you move your finger, even a little bit, you extend the line from your finger's immediate last position to its new position.</p>
<p>A drag event comes with 6 arguments. These are three pairs of x and y coordinates that show:</p>
<ul><li>The position of your finger back where the drag started.</li>
<li>The current position of your finger.</li>
<li>The immediately previous position of your finger.</li>
</ul><p>There's also a sprite, which we'll ignore for this tutorial.</p>
<p>Now make dragging draw a line between the previous position and the current position by creating a drag handler:</p>
<ol><li>From the <span style="font-style:italic;">DrawingCanvas</span> drawer, drag the <span class="controlblock-ai2">when DrawingCanvas.Dragged</span> block to the workspace.</li>
<li>Also from the <span style="font-style:italic;">DrawingCanvas</span> drawer, drag the <span class="callblock-ai2">call DrawingCanvas.DrawLine</span> block into the <span class="controlblock-ai2">do</span> slot of the <span class="controlblock-ai2">when DrawingCanvas.Dragged</span> block.</li>
<li>Drag a <span class="variableblock-ai2">get prevX</span> block to the open <strong>x1</strong> slot in <span class="callblock-ai2">when DrawingCanvas.DrawLine</span>. Do the same for the other spaces: <strong>y1</strong> should be <span class="variableblock-ai2">get prevY</span>, <strong>x2</strong> should be <span class="variableblock-ai2">get currentX</span>, and <strong>y2</strong> should be <span class="variableblock-ai2">get currentY</span>.</li>
</ol><p>Here's the result:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPotDragHandler.png" /></p>
<p>Test your work by trying it on the phone: drag your finger around on the screen to draw lines and curves. Touch the screen to make spots. Use the Wipe button to clear the screen.</p>
<p>In <a href="paintpot-part2.html">PaintPot Part 2</a>, you'll see how to use global variables to create dots of different sizes.</p>
<h4 class="ai-header">Review</h4>
<p>Here are some of the ideas covered in this tutorial:</p>
<ul><li>You can use Screen Arrangement components to specify screen layouts other than just placing components one under the other.</li>
<li>The <strong>Canvas</strong> component lets you draw on it. It can also sense touches and drags.</li>
<li>Some event handlers are called with information about the event, such as the coordinates of where the screen was touched. This information is represented by arguments. When you select an event handler that has arguments, App Inventor creates <span class="variableblock-ai2">value</span> blocks for these.</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/tutorials/paintPot1/PaintPotBarcode.png" /></p>
<p>Or <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPot.apk">download the apk</a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot1/PaintPot.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
</span></p></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Drawing Canvas</li></ul></section>  </div>

  
  
  <article id="article-364" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/paintpot-part2" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      PaintPot (Part 2) for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="PaintPot (Part 2) for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>This tutorial has two parts: <a href="paintpot-part1.html">Part 1</a> | <a href="paintpot-part2.html">Part 2</a> </p>
<p>Part 2 extends <a href="paintpot-part1.html">Part 1</a> of the tutorial to create both large and small dots, as a demonstration of how to use <em>global variables</em>.</p>
<h4 class="ai-header">Starting</h4>
<p>Make sure you've completed the <a href="setup.html">Set Up</a> process and you have your completed project from <a href="paintpot-part1.html">PaintPot Part 1</a> loaded.</p>
<p>Start where you left off at the end of Part 1, with the project open in App Inventor. Use the <strong>Save As</strong> button to make a copy of <span style="color:green;">PaintPot</span> so you can work on the new version without affecting the original version. Name the copy "PaintPotV2" (with no spaces). After saving a copy, you should see <span style="color:green;">PaintPotV2</span> in the Designer.</p>
<h4 class="ai-header">Creating variables</h4>
<p>The size of the dots drawn on the canvas is determined in the <span class="controlblock-ai2">when DrawingCanvas.Touched</span> event handler where <span class="callblock-ai2">call Drawing.DrawCircle</span> is called with <strong style="color:green;">r</strong>, the radius of the circle, equal to 5. To change the thickness, all we need to do is use different values for <strong style="color:green;">r</strong>. Use <strong style="color:green;">r</strong> = 2 for small dots and <strong style="color:green;">r</strong> = 8 for large dots.</p>
<p>Start by creating names for these values:</p>
<ol><li>Open the Blocks Editor if it isn't already open and connect the phone. Your phone should show the buttons and the canvas you built previously.</li>
<li>In the Blocks Editor, in the Built-In column, open the Variables drawer. Drag out a <span class="variableblock-ai2">initialize global name to</span> block. Change the text that reads "name" to read "small". A yellow warning exclamation mark might appear on the block. If you mouse over this you'll see a warning message explaining that the block has an empty socket.</li>
<li>You need to fill in the socket with a number block that specifies the value for "small" -- use 2 as the value. To create the number block, type the number 2. A menu will appear, showing you all the possible blocks that include "2" in their name. Click on the first one, which is the <span class="mathblock">number 2</span> itself, and a number block with the value 2 should appear. Plug that in to the <span class="variable block">initialize global small to</span> block. The yellow warning mark will disappear, because the empty socket has been filled. (The second value listed in the menu is the math block <span class="mathblock">atan2</span> which you won't use here.)</li>
</ol><p>Here are the steps in the sequence:</p>
<ol><li><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/var1.png" /></li>
<li><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/var2.png" /></li>
<li><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/var3.png" /></li>
<li><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/var4.png" /></li>
<li><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/var5.png" /></li>
</ol><p>You've now defined a global variable named <span class="variableblock-ai2">small</span> whose value is the number 2.<br />
Similar to <span class="variableblock-ai2">small</span>, define a global variable <span class="variableblock-ai2">big</span>, whose value is 8.<br />
Finally, define a global variable <span class="variableblock-ai2">dotsize</span> and give it an initial value of 2.</p>
<pre class="ai-box">You might wonder whether it would be better programming style to make the initial value of <span style="color:black;">dotsize</span> be the value of <span style="color:black;">small</span> rather than 2. That would be true, except for a subtle programming point: Doing that would be relying on the assumption that <span style="color:black;">small</span> will already have a value at the point in time when <span style="color:black;">dotsize</span> is assigned its value. In App Inventor, you can't make assumptions about the order in which different <span class="setblock" style="color:black;">def</span> blocks will be processed. In general, of course, you really <em>would</em> like to specify the order in which variables are assigned. You can do this by assigning all values when the application is initialized, using the Screen initialize event. The <a href="http://appinventor.mit.edu/explore/content/quizme.html">Quiz Me</a> tutorial gives an example of initialization.</pre><h4 class="ai-header">Using variables</h4>
<p>Now go back to the touch event handler you set up in Part 1 and change the <span class="callblock-ai2">call to DrawCircle</span> block so that it uses the value of <span style="color:green;">dotsize</span> rather than always using 5.</p>
<p>In the Blocks Editor, open the Variables drawer. Pull out a get block and click on the dropdown. You should see three new variables in the dropdown: small, big, and dotsize</p>
<p>These blocks were automatically created and put in the dropdown of <span class="variableblock-ai2">get</span> and <span class="variableblock-ai2">set</span> variable blocks, similarly to the way that x and y were created in the dropdown when you defined the <span class="controlblock-ai2">when DrawingCanvas.Touched</span> event handler in the part 1 of this tutorial. "Global" means "global variable", in contrast to the event-handler arguments, which are considered "local variables". The difference is that the argument values are accessible only within the body of the event handler, while global variables are accessible throughout the entire program.</p>
<ul><li>Go to the <span class="controlblock-ai2">when MyCanvas.Touched</span> event handler and replace the number 5 block in <span class="callblock-ai2">call DrawCircle</span> with the <span class="variableblock-ai2">get dotsize</span> block from the Variables drawer.</li>
</ul><h4 class="ai-header">Changing the values of variables</h4>
<p>Now set up a way to change dotsize to be small (2) or big (8). Do this with buttons.</p>
<ol><li>In the Designer, drag a <strong>HorizontalArrangement</strong> component into the Viewer pane below the <span style="color:green;">DrawingCanvas</span> component. Name the component "BottomButtons".</li>
<li>Drag the existing <span style="color:green;">ButtonWipe</span> into <span style="color:green;">BottomButtons</span>.</li>
<li>Drag two more button components from the Palette into <span style="color:green;">BottomButtons</span>, placing them next to <span style="color:green;">ButtonWipe</span>.</li>
<li>Name the buttons "ButtonBig" and "ButtonSmall", and set their <strong style="color:green;">Text</strong> to read "Big dots" and "Small dots", respectively.</li>
<li>In the Blocks Editor, create a <span class="controlblock-ai2">when ... Clicked</span> event handler for <span style="color:green;">ButtonSmall</span> that changes <span style="color:green;">dotsize</span> to be the value of <span style="color:green;">small</span>. To change <span style="color:green;">dotsize</span> use the <span class="variableblock-ai2">set global dotsize to</span> block from the MyDefinitions drawer and plug in the <span class="variableblock-ai2">global small</span> block.</li>
<li>Make a similar event handler for <span style="color:green;">ButtonBig</span>.</li>
</ol><p>The two click event handlers should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/PaintPotDotsClick.png" /></p>
<p>You're done! You can draw in <span style="color:green;">PaintPot</span> and use the new buttons to draw either big dots or small dots. Notice that dragging your finger still produces a thin line. That's because the changes we just made don't affect how <span class="callblock-ai2">DrawLine</span> is called.</p>
<p>Here's the finished program in the Designer:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/PaintPotAllDesigner.png" /></p>
<p>and in the Blocks Editor:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/PaintPotAllBlocks.png" /></p>
<pre class="ai-box">A bug for you to work on: The program you just built has a slight bug. If you start drawing before pressing any of the paint buttons, the paint color will be black; however, after you choose a color, there's no way to get back to black. Think about how you could fix that.</pre><h4 class="ai-header">Review</h4>
<p>You create global variables by using <span class="variableblock-ai2">def</span> blocks from the Variables drawer.</p>
<p>For each global variable you define, App Inventor automatically supplies a <span class="variableblock-ai2">global</span> block that gives the value of the variable, and a <span class="variableblock-ai2">set global ... to</span> block for changing the value of the variable. These blocks can be found in the Variables drawer.</p>
<h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/PaintPot2Barcode.png" /></p>
<p>Or <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/PaintPot2.apk">download the apk</a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/paintPot2/PaintPot2.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<pre class="ai-box">Done with <span style="color:black;">PaintPot</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Drawing Canvas</li></ul></section>  </div>

  
  
  <article id="article-358" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/piccall" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      PicCall for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="PicCall for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p><span style="color:green;">PicCall</span> shows you how you can use App Inventor to make apps that do actual things, like calling friends.</p>
<p>This tutorial assumes that you have completed the <a href="setup.html">Set Up</a> process.</p>
<h4 class="ai-header">Before starting</h4>
<p>To run <span style="color:green;">PicCall</span>, your phone must be set up and activated for making phone calls. If it isn't you can still build <span style="color:green;">PicCall</span> for practice, but the phone won't actually make the calls.</p>
<pre class="ai-warning">Warning: <span style="color:black;">PicCall</span> does not work on all Android phones in the current implementation of App Inventor: you'll get an error notice on some phones when you try to pick a phone number. Also, you won't see all your contacts — only those created from Gmail. These limitations will be removed in the future.</pre><p>In this tutorial, unlike <span style="color:green;">HelloPurr</span>, you'll give names to components, rather than just using the default names that App Inventor provides (like "Button1"). Using meaningful names is good programming practice: it helps you keep your programs straight in your own mind, and it helps others understand your programs.</p>
<p>Your phone should also contain a few contacts with pictures. You can use the Contacts app to save pictures for your contacts. You can also click on Contacts in your Gmail account on your computer and add pictures there.</p>
<p>Make sure your computer and your phone are set up to use App Inventor. Start a new project in the Designer window. Name it "PicCall" and change the screen <strong style="color:green;">Title</strong> to <span style="color:green;">PicCall</span>. Open the Blocks Editor, click <strong>Connect to Companion</strong>, and check that the phone has started the App Inventor app.</p>
<h4 class="ai-header">Getting started</h4>
<p>Start out just like in <span style="color:green;">HelloPurr</span> by placing a button on the screen. Make the button 150 pixels wide and 150 pixels high. Set button's <strong style="color:green;">Image</strong> to a picture. You may as well use the picture of the kitty if it's handy -- you'll be changing the picture soon. Set the <strong style="color:green;">Text</strong> of the button to "Press to Call", although you'll be changing that soon as well.</p>
<p>Change the name of the Button component to "TopButton" (you'll make one called "BottomButton" later in the tutorial). To change a component's <strong style="color:green;">Name</strong>, click the <strong>Rename</strong> button in the Components panel and enter the new name.</p>
<pre class="ai-box">In this tutorial, unlike <span style="color:black;">HelloPurr</span>, you'll give names to components, rather than just using the default names that App Inventor provides (like "Button1"). Using meaningful names is good programming practice: it helps you keep your programs straight in your own mind, and it helps others understand your programs.Don't confuse the <strong style="color:black;">Name</strong> of a component with the <strong style="color:black;">Text</strong> of a component. The <strong style="color:black;">Text</strong> is what appears on the screen. The <strong style="color:black;">Name</strong> is the name your program uses to refer to the component. You'll see the name in the Components structure list in the Designer and on the drawers in the Blocks editor.</pre><h4 class="ai-header">Making phone calls</h4>
<p>In <span style="color:green;">HelloPurr</span>, you made the phone play a sound when the button was clicked. <span style="color:green;">PicCall</span> in almost the same, except that instead of playing a sound, the phone makes a call.</p>
<p>App Inventor's <strong>PhoneCall</strong> component makes phone calls. You can find PhoneCall in the Social section of the Palette. Open that section and drag out a PhoneCall into the viewer. It will go into the Non-visible components area. Name it "TopCall". The PhoneCall's <strong style="color:green;">PhoneNumber</strong> property determines the number to call. Set that to some 10-digit phone number you'd like to call. Here's how the Designer should look:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/picCall/PicCallDesigner.png" /></p>
<p>Now switch to the Blocks Editor and pull out the <span class="eventblock">when TopButton.Click do</span> block. In the <span class="eventblock">do</span> slot, place a <span class="callblock-ai2">call TopCall.MakePhoneCall</span> block from the TopCall drawer, so that the event handler looks like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/picCall/PicCallWhenClick.png" /></p>
<p>Go ahead and test what you have so far on the phone: Press the button and make the call. You could package this up as an app right now. It would be a pretty limited app, always calling the same fixed number, some people might find that useful.</p>
<h4 class="ai-header">Phone contact information</h4>
<p>In addition to making phone calls, App Inventor apps can also get information from the phone's contact list. You do this with the <strong>PhoneNumberPicker</strong> component.</p>
<p>Pull out a PhoneNumberPicker component from the Social section of the Palette, place it under <span style="color:green;">TopButton</span>. A PhoneNumberPicker is a kind of button: when you press it, it brings up your phone contacts list and lets you pick someone. Change the name of the PhoneNumberPicker to "TopPick", and change its <strong style="color:green;">Text</strong> to "Press to pick a number to call". Try it by pressing the picker on your phone: you should see your contacts come up, and you can pick one. Nothing will happen after you pick, because you haven't yet told the components to do anything. You'll do that next.</p>
<h4 class="ai-header">Using the picker</h4>
<p>Switch to the Blocks window and open the drawer for <span style="color:green;">TopPick</span>. Drag out the <span class="controlblock-ai2">when TopPick.AfterPicking do</span> block. This lets you define an event handler that says what to do after you've picked a number from your contacts.</p>
<p>Now open the <span style="color:green;">TopCall</span> drawer and drag out <span class="setcomponent-ai2">set TopCall.PhoneNumber to</span> and fit it into the slot in the <span class="controlblock-ai2">when TopPick.AfterPicking do</span> block. Now drag out <span class="getcomponent-ai2">TopPick.PhoneNumber</span> from the <span style="color:green;">TopPick</span> drawer and plug it into the empty socket. Here's how your event handler should look:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/picCall/PicCallAfterPicking.png" /></p>
<p>Try it on the phone: Press the picker, choose a contact and a phone number. Then press the phone call button to make the call. Add a command to the event handler to set <span style="color:green;">TopButton</span>'s <strong style="color:green;">Text</strong> property to <span class="getcomponent-ai2">TopPick.PhoneNumber:</span></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/picCall/PicCallAfterPicking2.png" /></p>
<h4 class="ai-header">Pictures</h4>
<p>If you have a picture stored with your contacts, you can make the button show that along with the phone number, rather than always using the picture of the kitty. To do this, add an command to the event handler, to set the <strong style="color:green;">Image</strong> property of <span style="color:green;">TopButton</span> to be the the <strong style="color:green;">Picture</strong> property of <span style="color:green;">TopPick</span>:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/picCall/PicCallAfterPicking3.png" /></p>
<pre class="ai-box">PhoneNumberPicker has two properties that are easy to confuse: <strong style="color:black;">Picture</strong> and <strong style="color:black;">Image</strong>. <strong style="color:black;">Picture</strong> is the picture associated with the contact that's picked. <strong style="color:black;">Image</strong> is the image of the PhoneNumberPicker component as it appears in the Designer and on the phone.</pre><h4 class="ai-header">Enhancements</h4>
<p>Here are some variations for you to try:</p>
<ul><li>Add a second button, <span style="color:green;">BottomButton</span>, and a second PhoneNumberPicker, so that your app gives you the choice of two numbers.</li>
<li>Add a label with instructions on how to use the app.</li>
<li>Show the name of the person being called in addition to the phone number. Use an extra label to show the additional information.</li>
</ul><h4 class="ai-header">Using PicCall</h4>
<p>You can package <span style="color:green;">PicCall</span> and download it to the phone so you can use it when you're not connected to the computer. But there's a big limitation: Every time you restart <span style="color:green;">PicCall</span>, it starts fresh and does not remember what you picked last time. Later, we'll see how to use the <strong>TinyDB</strong> component to create apps that can remember information from one time to the next. Such information is called <em>persistent data</em>.</p>
<h4 class="ai-header">Review</h4>
<p>Here are the key ideas covered in this tutorial:</p>
<ul><li>You can name components by means of the <strong>Rename</strong> button.</li>
<li>App Inventor has components that can use information stored on the phone. The <strong>PhoneNumberPicker</strong> can get phone numbers and pictures for your contacts, and <strong>PhoneCall</strong> can make calls.</li>
</ul><pre class="ai-box" style="background-image: url('/sites/all/files/ai2tutorials/picCall/android-warning-30x30.gif"><strong>Tip</strong>: The list that comes up when you run the phone number picker does not show the pictures associated with your contacts, on some Android systems. Even though the image isn't shown, the "Picture" property will still return a picture that will show up when you run the app, provided that the phone has a picture for that contact.</pre><p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/picCall/PicCallBarcode.png" /></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/picCall/PicCall.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<pre class="ai-box">Done with <span style="color:black;">PicCall</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section>  </div>

  
  
  <article id="article-909" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/hello-codi" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Hello Codi!                  </h1>
      
      
    </header>
    <span property="dc:title" content="Hello Codi!" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="padding: 10px;">
<h2 class="ai-header">Building your first app: HelloCodi</h2>
<p>Now that you've set up your computer and device, and you've learned how the Designer and the Blocks Editor work, you are ready to build the HelloCodi app. At this point, you should have the Designer or Blocks Editor open in your browser, and either an Android device or an Android emulator connected to the Blocks Editor. (See <a href="setup.html">Setup Instructions for App Inventor 2</a> if you do not have these things running.)  Choose “Start a New Project” from the Projects menu and name it HelloCodi.</p>
<h3>HelloCodi: tap the bee, hear the bee buzz!</h3>
<p>HelloCodi is a simple app that you can build in a very short time. You create a button that has a picture of Codi the bee on it, and then program the button so that when it is clicked the phone will make a buzzing sound.</p>
<p>To build HelloCodi, you'll need an image file of Codi the bee. Download these files to your computer by clicking the following links. To download: after clicking a link, right click on the image and select "Save As." Save the file onto your desktop or downloads folder, or anywhere that you can easily find it later.</p>
<ul><li>Code picture: <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/codi.jpg"> codi.jpg</a> (Right-click and Save)</li>
<li>Bee sound: <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/Bee-Sound.mp3"> Bee-Sound.mp3</a> (Right-click and Save)</li>
</ul><h3>Select components to design your app</h3>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/button.png" style="float:left; width: 15%; border: grey solid 1px; margin-right: 10px; margin-bottom: 10px;" /></p>
<p style="width: 50%;">The App Inventor <b>Components</b> are located on the left hand side of the <em>Designer Window</em> under the title <b>Palette</b>. Components are the basic elements you use to make apps on the Android phone. They're like the ingredients in a recipe. Some components are very simple, like a <b>Label</b> component, which just shows text on the screen, or a <b>Button</b> component (#1 left) that you tap to initiate an action. </p>
<p style="width: 50%;">Other components are more elaborate: a drawing <b>Canvas</b> that can hold still images or animations, an <b>Accelerometer</b> sensor that works like a Wii controller and detects when you move or shake the phone, components that send text messages, components that play music and video, components that get information from Web sites, and so on.</p>
<p style="clear:both;">To use a component in your app, you need to click and drag it onto the viewer in the middle of the <b>Designer</b>. When you add a component to the <b>Viewer</b> (#1 below), it will also appear in the components list on the right hand side of the Viewer.</p>
<p><strong>Components</strong> (#2 below) have adjustable properties. These properties change the way the component appears or behaves within the app. To view and change the <strong>Properties</strong> of a component (#3 below), you must first select the desired component in your list of components.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/viewer.png" style="border: grey solid 1px; margin:auto; width:50%; display: block;" /></p>
<h3>Steps for selecting components and setting properties</h3>
<p><span style="color:green;">HelloCodi</span> will have a <b>Button</b> component that displays the image of the bee you downloaded earlier. To accomplish this:</p>
<p><b>Step 1a</b>. From the <b>User Interface</b> palette, drag and drop the <b>Button</b> component to Screen1 (#1). </p>
<p><b>Step 1b</b>.To give the button the image of the bee, in the <b>Properties</b> pane, under Image, click on the text <em>"None..."</em> and click <em>"Upload File..."</em> (#2). A window will pop up to let you choose the image file. Click "Browse" and then navigate to the location of the <em>codi.jpg</em> file you downloaded earlier (#3). Click the <em>codi.jpg</em> file, click "Open", and then click "OK".</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/upload.png" style="border: grey solid 1px; margin:auto; width:70%; display: block;" /></p>
<hr /><p style="width: 70%;"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/text-properties.png" style="float:right; width: 25%; border: grey solid 1px; margin-left: 10px; margin-bottom: 10px;" /><b>Step 2</b>. Change the Button's <b>Text</b> property:<br />Delete "Text for Button1", leaving the Button's text property blank so that there is no writing over the bee image.</p>
<hr style="clear:both;" /><p><b>Step 3</b>. From the <b>User Interface</b> palette, drag and drop the <b>Label</b> component to the Viewer (#1), placing it below the picture of the bee. It will appear under your list of components as <strong>Label1</strong>.</p>
<p>Under the <b>Properties</b> pane, change the </p>
<ul style="list-style: none;"><li><b>(2) Text</b> property of Label1 to read "Touch the Bee". You'll see the text change in the Designer and on your device.</li>
<li><b>(3) FontSize</b> to 30.</li>
<li><b>(4) BackgroundColor</b> of Label1 by clicking on the box. You can change it to any color you like.</li>
<li><b>(5) TextColor</b> to any color you like. (Note: if BackgroundColor and TextColor are the same, you will not be able to read your text!)</li>
</ul><p> Here, the background color is set to aqua and the text color is set blue. </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/label.png" style="border: grey solid 1px; margin:auto; width:70%; display: block;" /></p>
<hr /><p><b>Step 4</b>. Under Palette, click on the <b>Media</b> drawer and drag out a <b>Sound</b> component and place it in the Viewer (#1). Wherever you drop it, it will appear in the area at the bottom of the Viewer marked <b>Non-visible components</b>. Under the Media pane, Click Upload File... (#2) Browse to the location of the <em>Bee-Sound.mp3</em> file that you downloaded earlier and upload it to this project (#3). Under the Properties pane, see that the Source property currently says None.... Click the word None... to change the Sound1 component's Source to <em>Bee-Sound.mp3</em> (#4).</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/sound.png" style="border: grey solid 1px; margin:auto; width:70%; display: block;" /></p>
<h3>Programming with the Blocks Editor</h3>
<p>So far you have been arranging your app's screen and components in the <em>Designer</em>, which is in a web browser window. To start programming the behavior of the app, you need to go to the <em>Blocks Editor</em>. Click the Blocks button in the upper right of your screen to go to the Blocks Editor.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/blocks.png" style="border: grey solid 1px; margin:auto; width:90%; display: block;" /></p>
<p>Once you have the Blocks Editor in front of you, continue to the next step to start programming your app with blocks.</p>
<h3>Playing the Sound</h3>
<p><b>Step 1</b>. On the left side of the Blocks Editor, click the <b>Button1</b> drawer to open it. Drag and drop the <span class="blocks">Button1.Click</span> block in the work area (the open area on the right). </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/buttonblocks.png" style="border: grey solid 1px; margin:auto; width:50%; display: block;" /></p>
<p>Those mustard yellow blocks are called <b>event handler</b> blocks. The event handler blocks specifiy how the phone should respond to certain events: a button has been pressed, the phone is being shaken, the user is dragging her finger over a canvas, etc. <span class="eventblock">when Button1.Click</span> is an event handler.</p>
<p><b>Step 2a</b>. Click the <b>Sound1</b> drawer and drag the <span class="blocks">Sound1.Play</span> block and connect it to the "do" section of the <span class="blocks">when Button1.Click</span> block. The blocks connect together like puzzle pieces and you can hear a clicking sound when they connect.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/soundblocks.png" style="border: grey solid 1px; margin:auto; width:50%; display: block;" /></p>
<p>The purple blocks are called <b>command</b> blocks, which are placed in the body of event handlers.  When an event handler is executed, it runs the sequence of commands in its body.  A command is a block that specifies an action to be performed (e.g., playing sound) when the event (e.g., pressing Button1) is triggered.</p>
<p>Your blocks should look like this at this point:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/button1click.png" /></p>
<p>Now you can see that the <b>command block</b> is in the <b>event handler</b>. This set of blocks means; "when Button1 is clicked, Sound1 will play."  The event handler is like a category of action (e.g., a button is being clicked), and the command specifies the type of action and the details of the action (e.g., playing a sound).</p>
<p>You can read more about the blocks and how they work here: <a href="support/blocks.html">Understanding Blocks in App Inventor 2</a>.</p>
<p>Try It! When you click the button you should hear Codi buzz. Congratulations, your first app is running! </p>
<pre class="box">Note: there is a known issue with the Sound component on some devices. If you see an "OS Error" and the sound does not play - or is very delayed in playing, go back into the Designer and try using a Player component (found under Media) instead of the Sound component.</pre><h3>Packaging your app</h3>
<p>While your device (emulator or phone/tablet) has been connected to App Inventor, your app has been running in real time on your device. If you disconnect the emulator/phone/tablet from the Blocks Editor, the app will vanish. You can always make it return by reconnecting the device. To have an app running without being connected to App Inventor, you must "<b>package</b>" the app to produce an application package (apk file).</p>
<p>To "package" the app to your phone or to send to someone else, click the <strong>Build</strong> tab at the top of the screen. Under Build, here are two options available for you to choose from:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/package.png" style="border: grey solid 1px; margin:auto; width:50%; display: block;" /></p>
<p>1. <b>App (provide QR code):</b> You can generate a Barcode (a QR Code), which you can use to install the app on a phone or tablet that has a camera, with the aid of a barcode scanner, like the ZXing barcode scanner (freely available in Google Play). </p>
<p style="color:red;">Note: this barcode works only for your own device because it is associated with your Google account. If you want to share your app with others via barcode, you'll need to download the .apk file to your computer and use a third-party software to convert the file into a barcode. More information can be found <a href="share.html">here</a>.</p>
<p>2. <b>App (save to my computer):</b> You can download the app to your computer as an apk file, which you can distribute and share as you like by manually installing it on other devices. (sometimes called <a href="http://www.techrepublic.com/blog/smartphones/how-to-side-load-apps-on-your-android-device/3114" target="blank">"side loading"</a>.</p>
<h4>Review</h4>
<p>Here are the key ideas covered so far:</p>
<ul><li>You build apps by selecting components (ingredients) and then telling them what to do and when to do it.</li>
<li>You use the <strong>Designer</strong> to select components and set each component's properties. Some components are visible and some aren't.</li>
<li>You can add media (sounds and images) to apps by uploading them from your computer.</li>
<li>You use the <strong>Blocks Editor</strong> to assemble blocks that define the components' behavior</li>
<li><span class="eventblock">when ... do ...</span> blocks define <em>event handlers</em>, that tell components what to do <em>when</em> something happens.</li>
<li><span class="blocks">call ...</span> blocks tell components to do things.</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/HelloCodiBarcode.jpg" /></p>
<p>Or <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/HelloCodi.apk">download the apk</a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/helloCodi/HelloCodi.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<h4 class="ai-header">Next steps</h4>
<p>Now that you know the basics of how App Inventor works we recommend you:</p>
<ul><li>Complete additional <a href="tutorials.html">Tutorials</a>.</li>
<li>Review the <a href="http://appinventor.mit.edu/explore/library.html">User Guide for App Inventor 2</a>.</li>
<li>Join the <a href="http://appinventor.mit.edu/explore/forums.html">User Discussion Forum</a>.</li>
<li>Read the guide to <a href="support/blocks.html">Understanding Blocks</a><a>.</a></li>
<li>Or, if you've been using the emulator and want to start using your phone, you can <a href="setup.html">set up your Android device</a> to build apps.</li>
</ul><pre class="ai-box">Something not working right? Visit the <a href="support/troubleshooting.html">troubleshooting page</a>, or check the <a href="http://appinventor.mit.edu/explore/forums.html">App Inventor User Forum</a> for help.</pre></div>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Basic</li></ul></section>  </div>

  
  
  <article id="article-347" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/get-gold" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Get the Gold for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Get the Gold for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

.ButtonText {
color:green;
font-weight: bold;
}

li {
padding-bottom: 7px;
}

.basicblock {
border: 1px dashed #7AA81C;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.callblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.argblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.textblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.setblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

.controlblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

.listblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}


/*--><!]]>*/
</style><h4 class="ai-header">What You're Building</h4>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/GetTheGoldMain.png" style="float:right; height: 453px; width: 197px;" /></p>
<p> By building the <span style="color:green;">Get The Gold App</span> you will get practice with setting visibility, using Clock components and Timers, and detecting collisions in App Inventor. You'll program an application that has a pirate ship whose goal is to collect all the gold on the screen.</p>
<h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project. Name it <span style="color:green;">GetTheGold</span>, and also set the screen's <strong style="color:green;">Title</strong> to "GetTheGold". Switch to the Blocks view and connect to a device or emulator.</p>
<h4 class="ai-header">Introduction</h4>
<p>This tutorial introduces the following skills, useful for future game development:</p>
<ul><li>Using the Clock component</li>
<li>Using Clock.Timer to move sprites</li>
<li>Using Sprite.Flung to move a sprite </li>
<li>Using collision detection</li>
</ul><h4 class="ai-header">Getting Ready</h4>
<p>For this game, you will have two types of imagesprites: pirate and gold coin. Click below to download the image file for your sprites.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/pirateship.jpg"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/pirateship.jpg" /></a><br /><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/goldcoin.jpg"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/goldcoin.jpg" /></a></p>
<h4 class="ai-header">Set up the Components</h4>
<p>Use the component designer to create the interface for <span style="color:green;">GetTheGold</span>. When you finish, it should look something like the snapshot below (more detailed instructions below the snapshot).</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/GetTheGoldDesigner.png" /></p>
<p>To create this interface, put the following components into the Designer by dragging them from the Component Palette into the Viewer.</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
</tr><tr><td><strong>Canvas</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">Canvas1</td>
<td>The background that we will be putting our imagesprites on</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">PirateSprite</td>
<td>The pirate ship in our game</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">ImageSprite2</td>
<td>One of the gold coins in the game</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">ImageSprite3</td>
<td>One of the gold coins in the game</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">ImageSprite4</td>
<td>One of the gold coins in the game</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">ImageSprite5</td>
<td>One of the gold coins in the game</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">ImageSprite6</td>
<td>One of the gold coins in the game</td>
</tr><tr><td><strong>Clock</strong></td>
<td>User Interface</td>
<td style="color:green;">Clock1</td>
<td>We use the Clock for its Timer method to move the coins</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green;">ResetButton</td>
<td>To reset the game so the player can play again</td>
</tr></table><p>Set the properties of the components as described below:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td><strong>Component</strong></td>
<td><strong>Action</strong></td>
<td>  </td>
</tr><tr><td><span style="color:green;">ResetButton</span>
</td>
<td>
Change <span class="ButtonText">Text</span> property to "Reset".
</td>
<td>
</td>
</tr><tr><td><span style="color:green;">PirateSprite</span>
</td>
<td>
Change <span class="ButtonText">Speed</span> property to 6.
</td>
<td>
Upload the pirateship image and set <span class="ButtonText">Picture</span> property to pirateship.
</td>
</tr><tr><td><span style="color:green;">ImageSprite(2,3,4,5,6)</span>
</td>
<td>
Upload the goldcoin image and set <span class="ButtonText">Picture</span> property to goldcoin.
</td>
<td>
</td>
</tr><tr><td><span style="color:green;">Clock</span>
</td>
<td>
Change <span class="ButtonText">TimerInterval</span> property to 2000.
</td>
<td>
</td>
</tr></table><h4 class="ai-header">Moving the Pirate</h4>
<p> To move the PirateSprite, we want the user to be able to "fling" the sprite in the direction that they choose. To do this, we will use the <span class="eventblock">PirateSprite.Flung</span> event handler. </p>
<p> You may notice that <span class="eventblock">PirateSprite.Flung</span> takes in 6 attributes: x, y, xvel, yvel, speed, and heading. We want to reassign PirateSprite's current heading to the heading given to us from PirateSprite.Flung. This means that the user can now control the direction of the pirate ship with their fingers by flinging on the screen. </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/PirateSpriteFlung.png" /></p>
<p>To prevent the pirate from moving off the screen, we will also use PirateSprite.Bounce when an edge is reached. </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/PirateSpriteBounce.png" /></p>
<h4 class="ai-header">Moving the Coins</h4>
<p> We want the coins to move to random positions on the screen. We will use <span class="eventblock">Clock1.Timer </span> and the ImageSprite's MoveTo method to do this. </p>
<p> When the Clock1.Timer goes off, we want all of our gold coin ImageSprites to move to a new random location on the Canvas. We will do this by using the <span class="callblock-ai2">Sprite.MoveTo</span> block. </p>
<p>MoveTo takes in two arguments: the x and y coordinates on the canvas of the new position we want the sprite to move to. We want the Sprite to move to a new <i>random</i> location so we will use the <span class="mathblock-ai2">random integer</span> block found in the Math box. Since we want each Gold ImageSprite to move to a new location, we repeat this process for each sprite's MoveTo function. </p>
<p>For ImageSprite2, we want x to be a random integer from 0 to <i>Canvas1.Width-ImageSprite2.Width</i> and y to be a random integer from 0 to <i>Canvas1.Height-ImageSprite2.Height</i>. This is to be repeated for all the Gold Image Sprites.</p>
<p>Remember that sprites are measured at the upper left corner as (0,0) so if we don't want them to go off the screen, we need to take the sprite's height/width into account when setting the range for our random numbers.</p>
<p>We will do this by setting up our blocks as in the image below:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/ClockTimer.png" /></p>
<h4 class="ai-header">Detecting Collisions</h4>
<p> App Inventor detects collisions by checking for an intersection between the bounding rectangles of each ImageSprite. We call this rectangle-based collision detection. As you can see in the image below, sprites with circular or polygon shape will appear to collide because of the rectangular bounds around them when they might not actually be colliding.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/CollisionDetection.png" /></p>
<p>We can use the <span class="eventblock">PirateSprite.CollidedWith </span> event handler to detect whenever the pirate ship collides with another sprite or gold coin. You may notice that <span class="eventblock">PirateSprite.CollidedWith </span> takes in an argument. This argument is the object that PirateSprite just collided with. We will be testing inside the handler for which object so the name of this argument is not significant. You can name it other. </p>
<p>Whenever the pirate collides with a gold coin, we want the coin to disappear. We can do this by setting the coin's visibility to false. To find which coin the pirate collided with, we will use the <span class="eventblock">PirateSprite.CollidingWith</span>. </p>
<p> We can use <span class="eventblock">PirateSprite.CollidingWith</span> to take in a component (each of the gold coin sprites) to detect which sprite was hit. This is a component block and NOT a text block with the words ImageSprite inside. The component block can be found in the drawer for each component. If a sprite was hit, we will set its visibility to false. </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/CollisionSprites.png" /></p>
<h4 class="ai-header">Reset Button</h4>
<p>After the user hits all of the gold sprites with the pirate ship, none of them will be visible. The reset button should set all of the gold sprites' visibility to true. </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/ResetVis.png" /></p>
<h4 class="ai-header">Complete Program</h4>
<p>Here's the complete <strong><span style="color:green;">GetTheGold</span></strong> program.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/GetTheGoldAll.png" /></p>
<p>Package the final version of the app by choosing <strong>Package For Phone | Barcode</strong> from the Component Designer menu. When the barcode appears, use the barcode scanner on your phone to download and install the app.</p>
<h4 class="ai-header">Variations</h4>
<p>Once you get this program running, you may want to do the following additional features to extend it. For example,</p>
<ul><li>Create a label to display the time that it took you to get all the gold</li>
<li>Change the speed of the ship or gold coins</li>
<li>Add an enemy sprite that when collided with, causes your pirate to lose speed</li>
<li>Use one of the phone's sensors to control movement of the pirate ship </li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/GetTheGoldBarcode.png" /></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/GetTheGold/GetTheGold.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<p>Done with <span style="color:black;">GetTheGold</span>? Return to to the other App Inventor 2 tutorials <a href="tutorials.html">here</a>.</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Sprites</li><li class="field-item odd">Clock Timer</li><li class="field-item even">Game</li></ul></section>  </div>

  
  
  <article id="article-503" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/paint-pot-extended-camera" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Paint Pot Extended with Camera (AI2)                  </h1>
      
      
    </header>
    <span property="dc:title" content="Paint Pot Extended with Camera (AI2)" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p><img style="float:right;" src="http://www.appinventor.org/apps2/paintpot2/hero.png" /><br />
This version of Paintpot allows you to draw circles and lines on a picture you take with your camera. You'll learn about the Canvas component, drawing, color, and the Camera component</p>
<p>Note: This tutorial will open a new window and take you off of MIT's App Inventor site, bringing you over to our partner site at AppInventor.org.<br /><a href="http://www.appinventor.org/paintpot2-steps">Go to Paint Pot Extended now</a></p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Drawing Canvas</li><li class="field-item odd">Camera</li></ul></section>  </div>

  
  
  <article id="article-349" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/molemash-2" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Mole Mash 2 with Sprite Layering for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Mole Mash 2 with Sprite Layering for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><h4 class="ai-header">What You're Building</h4>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/MoleMashScreenShot.png" style="float:right;" /></p>
<p>This tutorial shows you how to build a game similar to the Whac-A-MoleTM arcade game. Specifically, your goal is to tap a mole that randomly pops out of one of five fixed holes. Every time you succeed, your score is increased by one point.
</p>
<p>In order to highlight new App Inventor features — the Advanced tab and Sprite Z-layering — this app takes a different approach than the <a href="molemash.html">original Mole Mash tutorial</a>, which you <strong>do not need</strong> to have completed in order to do this one. You should, however, be familiar with the basics of App Inventor — using the Component Designer to build a user interface and using the Blocks Editor to specify event handlers. If you are not familiar with the basics, try stepping through some of the <a href="tutorials.html">basic tutorials</a> before continuing.</p>
<h4 class="ai-header">Introduction</h4>
<p>This tutorial includes:</p>
<ol><li>Creating a list of components</li>
<li>Using functionality from the Advanced section of the Blocks Editor to get and set properties of arbitrary components</li>
<li>Having game events controlled by the <b>Clock</b> component</li>
<li>Using Sprite Z-layering to ensure that one sprite (<b>ImageSprite</b> or <b>Ball</b>) appears in front of another</li>
</ol><h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project. Set the screen's <b style="color:green;">Title</b> property to an appropriate name, such as "Mole Mash". Open the Blocks Editor and connect it to the phone. Download these image files (created by Yun Miao) by right-clicking on them, then add them to the project by pressing the "Add..." button in the Media pane.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/hole.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/hole.png" /></a><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/mole.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/mole.png" /></a></p>
<h4 class="ai-header">Set up the Components</h4>
<p>The user interface will contain a total of 6 ImageSprites: 5 unmoving holes and 1 mole, which will move on top of the holes. Use the component designer to create the user interface. When you are done, it should look something like the picture below. Don't worry about lining up the holes evenly. You will specify their locations through their <b style="color:green;">X</b> and <b style="color:green;">Y</b> properties. Additional instructions are below the picture.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/designer1.png" /></p>
<p>Create the following components by dragging them from the Palette into the Viewer.</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
</tr><tr><td>
<b>Canvas</b>
</td>
<td>Drawing and Animation</td>
<td style="color:green;">GameCanvas</td>
<td>The game field</td>
</tr><tr><td>
<b>ImageSprite</b> (5)
</td>
<td>Drawing and Animation</td>
<td style="color:green;">Hole1 ... Hole5</td>
<td>Holes from which the mole can appear</td>
</tr><tr><td>
<b>ImageSprite</b>
</td>
<td>Drawing and Animation</td>
<td style="color:green;">Mole</td>
<td>The mole</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">ScoreArrangement</td>
<td>To display the score</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">ScoreTextLabel</td>
<td>To hold "Score: "</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">ScoreValueLabel</td>
<td>To hold the score (# of times the mole was hit)</td>
</tr><tr><td>
<b>Clock</b>
</td>
<td>User Interface</td>
<td style="color:green;">MoleClock</td>
<td>To control the mole's movement</td>
</tr><tr><td>
<b>Sound</b>
</td>
<td>Media</td>
<td style="color:green;">Buzzer</td>
<td>To vibrate when the mole is touched</td>
</tr></table><p>Make the following changes to the components' properties:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component
</td>
<td>
Action
</td>
</tr><tr><td>Canvas1</td>
<td>Set <b style="color:green;">BackgroundColor</b> to Green. Set <b style="color:green;">Width</b> to 320 pixels. Set <b style="color:green;">Height</b> to 320 pixels.</td>
</tr><tr><td>Hole1</td>
<td>Set <b style="color:green;">X</b> to 20 and <b style="color:green;">Y</b> to 60 (upper left).</td>
</tr><tr><td>Hole2</td>
<td>Set <b style="color:green;">X</b> to 130 and <b style="color:green;">Y</b> to 60 (upper center).</td>
</tr><tr><td>Hole3</td>
<td>Set <b style="color:green;">X</b> to 240 and <b style="color:green;">Y</b> to 60 (upper right)</td>
</tr><tr><td>Hole4</td>
<td>Set <b style="color:green;">X</b> to 75 and <b style="color:green;">Y</b> to 140 (lower left).</td>
</tr><tr><td>Hole5</td>
<td>Set <b style="color:green;">X</b> to 185 and <b style="color:green;">Y</b> to 140 (lower right).</td>
</tr><tr><td>Mole</td>
<td>Set <b style="color:green;">Picture</b> to "mole.png". Set <b style="color:green;">Z</b> to 2 so the mole appears in front of the other <b style="color:green;">ImageSprite</b> s, which have the default <b style="color:green;">Z</b> value of 1.</td>
</tr><tr><td>ScoreTextLabel</td>
<td>Set <b style="color:green;">Text</b> to "Score: ".</td>
</tr><tr><td>ScoreTextValue</td>
<td>Set <b style="color:green;">Text</b> to "0".</td>
</tr></table><p>Don't worry now about setting the <b style="color:green;">Picture</b> property for the holes; we'll set the property in the Blocks Editor.</p>
<h4 class="ai-header">Add Behaviors to the Components</h4>
<p>Here is an overview of what we need to create blocks to do:</p>
<ol><li>Create global variable:
<ol><li><b style="color:green;">holes</b>: a list of holes</li>
</ol></li>
<li>When the app starts:
<ol><li>Populate the list of holes.</li>
<li>Set each hole's <b style="color:green;">Picture</b> property to "hole.png".</li>
<li>Call procedure <span class="callblock-ai2">MoveMole</span> (below).</li>
</ol></li>
<li>Create a procedure <span class="callblock-ai2">MoveMole</span> to:
<ol><li>Set local variable <b style="color:green;">currentHole</b> to a random hole from the list <b style="color:green;">holes</b>.</li>
<li>Move the mole to the location of <b style="color:green;">currentHole</b>.</li>
</ol></li>
<li>Make <b>MoleClock</b> call <span class="callblock-ai2">MoveMole</span> whenever its timer goes off (every second).
</li>
<li>Implement a handler that does the following when the mole is touched:
<ol><li>Add one to the score.</li>
<li>Make the phone briefly vibrate.</li>
<li>Call <span class="callblock-ai2">MoveMole</span>.</li>
</ol></li>
</ol><p>To proceed, switch to the Blocks Editor.</p>
<h4 class="ai-header">Creating Variables</h4>
<p>Create the variable <b style="color:green;">holes</b>. For now, we will give it a "dummy" initial value of an empty list; we'll set the real initial value in the <span class="controlblock-ai2">Screen1.Initialize</span> event handler, which gets executed each time the app loads the screen. (For technical reasons, components cannot be referred to in variable initialize blocks, which are run before the app has started.) Here is a picture and list of the blocks you will need:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/blocks1.png" /></p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="variableblock-ai2">initialize global holes to</span></td>
<td>Variables</td>
<td>Hold a list of holes.</td>
</tr><tr><td><span class="listblock-ai2">create empty list</span></td>
<td>Lists</td>
<td>Create an empty list, to be filled in when the program starts.</td>
</tr></table><p>As always, comments (created by right-clicking on a block) are encouraged but not required.</p>
<h4 class="ai-header">Starting the App</h4>
<p>The first event to occur in any program in <span class="controlblock-ai2">Screen1.Initialize</span>, so we will put start-up code in that handler. Specifically, we will add the hole components to the list holes, set each hole's <b style="color:green;">Picture</b> property to "hole.png", and call <span class="callblock-ai2">MoveMole</span>. Since we have not yet written MoveMole, we will create an empty procedure with that name, which we will fill in later.</p>
<p>Below are a picture and table of the blocks you need to create. Note that the "Any ImageSprite" drawer is found under the "Any component" tab at the bottom of the list of Blocks in the Blocks Editor.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/blocks2.png" /></p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="controlblock-ai2">Screen1.Initialize</span></td>
<td>Screen1</td>
<td>Specify what should happen when the app starts.</td>
</tr><tr><td><span class="listblock-ai2">add items to list</span></td>
<td>Lists</td>
<td>Add the following values to...</td>
</tr><tr><td><span class="variableblock-ai2">get global holes</span></td>
<td>Variables</td>
<td>...the list of holes:</td>
</tr><tr><td><span class="getcomponent-ai2">Hole1</span></td>
<td>Hole1</td>
<td>-the upper left hole</td>
</tr><tr><td><span class="getcomponent-ai2">Hole2</span></td>
<td>Hole2</td>
<td>-the upper center hole</td>
</tr><tr><td><span class="getcomponent-ai2">Hole3</span></td>
<td>Hole3</td>
<td>-the upper right hole</td>
</tr><tr><td><span class="getcomponent-ai2">Hole4</span></td>
<td>Hole4</td>
<td>-the lower left hole</td>
</tr><tr><td><span class="getcomponent-ai2">Hole5</span></td>
<td>Hole5</td>
<td>-the lower right hole</td>
</tr><tr><td><span class="controlblock-ai2">for each hole in list</span></td>
<td>Control</td>
<td>Specify that we would like a variable named "hole"....</td>
</tr><tr><td><span class="variableblock-ai2">get global holes</span></td>
<td>Variables</td>
<td>...to take on each of the values in the list holes .</td>
</tr><tr><td><span class="setcomponent-ai2">set ImageSprite.Picture of component ... to</span></td>
<td>Any ImageSprite</td>
<td>Set the Picture property of...</td>
</tr><tr><td><span class="variableblock-ai2">get global hole</span></td>
<td>Variables</td>
<td>...the ImageSprite referred to by the variable hole ...</td>
</tr><tr><td><span class="textblock-ai2">"    "</span> (hole.png)</td>
<td>Text</td>
<td>...to the picture of the empty hole.</td>
</tr><tr><td><span class="callblock-ai2">to procedure</span> (MoveMole)</td>
<td>Procedures</td>
<td>Create an procedure, to be filled in later, for moving the mole.</td>
</tr><tr><td><span class="callblock-ai2">call MoveMole</span></td>
<td>Procedures</td>
<td>Call MoveMole to make the first placement of the mole.</td>
</tr></table><p>Compare the <span class="controlblock-ai2">for each</span> block to the equivalent blocks that would be necessary without it:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/blocks_new_old.png" /></p>
<p>Not only is the left set of blocks shorter, it is less repetitious, sparing the programmer from semi-mindless copy-and-pasting and making it easier to modify, for example, if the name of the picture is changed.</p>
<h4 class="ai-header">Moving the Mole</h4>
<p>Now let's fill in the body of the procedure MoveMole, which we'll call when the program starts, when the mole gets touched, and when our timer goes off every second. What we want it to do is to pick a random hole and move the mole on top of it. Here are a picture and list of the new blocks:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/blocks4.png" /></p>
<table class="line-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="variableblock-ai2">initialize local currentHole to</span><br />(there are two types of 'initialize local': take the one that fits the procedure block)</td>
<td>Variables</td>
<td>Save the...</td>
</tr><tr><td><span class="listblock-ai2">pick a random item</span></td>
<td>Lists</td>
<td>...randomly selected...</td>
</tr><tr><td><span class="variableblock-ai2">get global holes</span></td>
<td>Variables</td>
<td>...hole.</td>
</tr><tr><td><span class="callblock-ai2">call Mole.MoveTo</span></td>
<td>Mole</td>
<td>Move the mole to the...</td>
</tr><tr><td><span class="getcomponent-ai2">ImageSprite.X</span></td>
<td>Any ImageSprite</td>
<td>..x-coordinate of...</td>
</tr><tr><td><span class="variableblock-ai2">get local currentHole</span></td>
<td>Variables</td>
<td>...the chosen hole...</td>
</tr><tr><td><span class="getcomponent-ai2">ImageSprite.Y</span></td>
<td>Any ImageSprite</td>
<td>...and the y-coordinate of...</td>
</tr><tr><td><span class="variableblock-ai2">get local currentHole</span></td>
<td>Variables</td>
<td>...the chosen hole.</td>
</tr></table><p>We now need to specify that MoveMole should be called whenever MoleClock's Timer goes off. We just need two blocks to accomplish that:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/blocks5.png" /></p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="controlblock-ai2">MoleClock.Timer</span></td>
<td>MoleClock</td>
<td>When the timer goes off...</td>
</tr><tr><td><span class="callblock-ai2">call MoveMole</span></td>
<td>Procedures</td>
<td>...move the mole.</td>
</tr></table><h4 class="ai-header">Registering Touches</h4>
<p>Finally, we need to specify what happens when the mole is touched. Specifically, we want to:</p>
<ol><li>Increment the score.</li>
<li>Make the phone vibrate briefly.</li>
<li>Move the mole.</li>
</ol><p>We can easily translate these to blocks:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/blocks6.png" /></p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="controlblock-ai2">Mole.Touched</span></td>
<td>Mole</td>
<td>When the mole is touched...</td>
</tr><tr><td><span class="setcomponent-ai2">set ScoreValueLabel.Text to</span></td>
<td>ScoreValueLabel</td>
<td>...update the visible score to...</td>
</tr><tr><td><span class="mathblock-ai2"> + </span></td>
<td>Math</td>
<td>...the result of adding...</td>
</tr><tr><td><span class="mathblock-ai2"> 1 </span></td>
<td>Math</td>
<td>...1 [and]...</td>
</tr><tr><td><span class="getcomponent-ai2">ScoreValueLabel.Text</span></td>
<td>ScoreValueLabel</td>
<td>...the previous score.</td>
</tr><tr><td><span class="callblock-ai2">call Buzzer.Vibrate</span></td>
<td>Buzzer</td>
<td>Make the phone vibrate for...</td>
</tr><tr><td><span class="mathblock-ai2"> 100 </span></td>
<td>Math</td>
<td>...100 milliseconds.</td>
</tr><tr><td><span class="callblock-ai2">call MoveMole</span></td>
<td>Procedures</td>
<td>Move the mole to a new location.</td>
</tr></table><h4 class="ai-header">Final Program</h4>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/blocks-final.png" /></p>
<h4 class="ai-header">Variations</h4>
<p>Here are some variations you might want to implement:</p>
<ul><li>Adding a Reset button to set the score back to 0.</li>
<li>Having the score depend not just on the number of hits but also the number of misses and escaped moles.</li>
<li>Increasing the speed of the game of mole movement if the player is doing well and decreasing it if the player is doing poorly.</li>
<li>Adding a second mole on a different timer.</li>
</ul><p>You can see how to implement the first two variations in the <a href="molemash.html">original Mole Mash tutorial</a>.</p>
<h4 class="ai-header">Review</h4>
<p>Here are some of the ideas covered in this tutorial:</p>
<ul><li>Putting components in a <b>List</b>.</li>
<li>Performing an operation on every component in a <b>List</b> using the <span class="controlblock-ai2">for each</span> block and Advanced features.</li>
<li>Placing an <b>ImageSprite</b> on top of another, using their <b style="color:green;">Z</b> properties to control which goes in front.</li>
<li>Using the <b>Clock</b> component to control game play.</li>
<li>Creating a procedure and calling it from multiple places.</li>
</ul><p>Looking for more information about Mole Mash? Check out the <a href="http://www.appinventor.org/MoleMash2">Book Chapter for more explanation and background information.</a></p>
<pre class="ai-box">Done with <span style="color:black;">MoleMash 2</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/MoleMash2Barcode.png" /></p>
<p>Or <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/MoleMash2.apk">download the apk</a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/moleMash2/MoleMash2_MIT.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Sprites</li><li class="field-item odd">Clock Timer</li><li class="field-item even">Game</li></ul></section>  </div>

  
  
  <article id="article-353" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/videowall" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      VideoWall for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="VideoWall for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

li {
padding-bottom: 7px;
}

.basicblock {
border: 1px dashed #7AA81C;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.callblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.argblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.textblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.setblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

.controlblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}


/*--><!]]>*/
</style><h4 class="ai-header">What you're building</h4>
<p>The VideoWall app tutorial demonstrates how you can control the size of a video playing in an app by using the <strong>Video Player</strong> component's <b style="color:green;">Width</b>, <b style="color:green;">Height</b>, and <b style="color:green;">FullScreen</b> features. The VideoWall uses media assets (videos stored in the app itself), but you can use the app to display videos from the internet as well.</p>
<p>This tutorial assumes you are familiar with the basics of App Inventor-- using the Component Designer to build a user interface, and using the Blocks Editor to specify the app's behavior. If you are not familiar with the basics, try stepping through some of the <a href="http://appinventor.mit.edu/explore/ai2/tutorials.html">basic tutorials</a> before continuing.</p>
<h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project. Name the new project VideoWall and set the screen's Orientation to Landscape.</p>
<p>Download the following video files* for use later on (right click and choose "Save Link As..."):</p>
<ul><li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/bigbuckbunny.3gp">BigBuckBunny (bigbuckbunny.3gp)</a></li>
<li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/nasa.3gp">NASA (nasa.3gp)</a></li>
<li><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/sintel.3gp">Sintel (sintel.3gp)</a></li>
</ul><p>*Attributions for these videos are included at the end of this tutorial.</p>
<h4 class="ai-header">Introduction</h4>
<p>The finished VideoWall app will display a wall of three videos that can be expanded to their true size and then shrunk back down again. The app will also allow you to display the videos in fullscreen. This tutorial assumes you have followed earlier tutorials to learn how the following blocks work:</p>
<ul><li><span class="variableblock-ai2">Variables</span></li>
<li><span class="callblock-ai2">Procedures</span></li>
<li><span class="controlblock-ai2">Button.Click blocks</span></li>
<li><span class="controlblock-ai2">Control (if-else) blocks</span></li>
</ul><p>This tutorial introduces the following:</p>
<ul><li>Resizing the VideoPlayer</li>
<li>Showing the VideoPlayer video in fullscreen mode</li>
</ul><h4 class="ai-header">Set up the Components</h4>
<p>Use the component designer to create the interface for the <span style="color:green;">VideoWall</span>. When completed, the designer should look similar to the snapshot below.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/setupcomponents.png" /></p>
<p>First, you need to upload the video files. Click on the Upload File... button and select a video file downloaded earlier. Repeat this step to add the other two video files. </p>
<p>In the properties of Screen1, set the BackgroundColor to Black, the ScreenOrientation to Landscape, and the Title to VideoWall. Now create the interface by dragging and dropping the components from the Palette to the Viewer.</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
<td>
Action
</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement1</td>
<td>Holds all other components: makes the three vertical arrangements line up side by side</td>
<td>Set Width to Fill parent...</td>
</tr><tr><td>
<b>VerticalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">VerticalArrangement1</td>
<td>Holds the left-most VideoPlayer and controls (VideoPlayer1, ResizeButton1, and FullScreenButton1)</td>
<td>Set Width to Fill parent...</td>
</tr><tr><td>
<b>VerticalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">VerticalArrangement2</td>
<td>Holds the middle VideoPlayer and controls (VideoPlayer2, ResizeButton2, and FullScreenButton2)</td>
<td>Set Width to Fill parent...</td>
</tr><tr><td>
<b>VerticalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">VerticalArrangement3</td>
<td>Holds the right-most VideoPlayer and controls (VideoPlayer3, ResizeButton3, and FullScreenButton3)</td>
<td>Set Width to Fill parent...</td>
</tr><tr><td>
<b>VideoPlayer</b>
</td>
<td>Media</td>
<td style="color:green;">VideoPlayer1</td>
<td>Displays the BigBuckBunny video</td>
<td>Set Source to bigbuckbunny.3gp , set Width to Fill parent... , and set Height to 36 pixels</td>
</tr><tr><td>
<b>VideoPlayer</b>
</td>
<td>Media</td>
<td style="color:green;">VideoPlayer2</td>
<td>Displays the NASA video</td>
<td>Set Source to nasa.3gp , set Width to Fill parent... , and set Height to 36 pixels</td>
</tr><tr><td>
<b>VideoPlayer</b>
</td>
<td>Media</td>
<td style="color:green;">VideoPlayer3</td>
<td>Displays the Sintel video</td>
<td>Set Source to sintel.3gp , set Width to Fill parent... , and set Height to 36 pixels</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">ResizeButton1</td>
<td>Resizes VideoPlayer1</td>
<td>Set Text to "Grow" and set Width to Fill parent...</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">ResizeButton2</td>
<td>Resizes VideoPlayer2</td>
<td>Set Text to "Grow" and set Width to Fill parent...</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">ResizeButton3</td>
<td>Resizes VideoPlayer3</td>
<td>Set Text to "Grow" and set Width to Fill parent...</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">FullScreenButton1</td>
<td>Shows the VideoPlayer1 video in fullscreen</td>
<td>Set Text to "Show Full Screen" and set Width to Fill parent...</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">FullScreenButton2</td>
<td>Shows the VideoPlayer2 video in fullscreen</td>
<td>Set Text to "Show Full Screen" and set Width to Fill parent...</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">FullScreenButton3</td>
<td>Shows the VideoPlayer3 video in fullscreen</td>
<td>Set Text to "Show Full Screen" and set Width to Fill parent...</td>
</tr></table><h4 class="ai-header">Add Behaviors to the Components</h4>
<p>The interface is complete, but the buttons don't resize the videos yet. Open the Blocks Editor to add the behavior to the buttons. First, you'll define three variable blocks to keep track of the size of the VideoPlayers:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="variableblock-ai2">initialize global name to</span></td>
<td>Variables</td>
<td>Defines the vid1_zoomed variable (rename it)</td>
</tr><tr><td><span class="variableblock-ai2">initialize global name to</span></td>
<td>Variables</td>
<td>Defines the vid2_zoomed variable (rename it)</td>
</tr><tr><td><span class="variableblock-ai2">initialize global name to</span></td>
<td>Variables</td>
<td>Defines the vid3_zoomed variable (rename it)</td>
</tr></table><p>The three variables should like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/flagblocks.png" /></p>
<p>Create the <span class="callblock-ai2">resizeVideoPlayer Procedure</span> block. There are three VideoPlayers in the app, but you'll use one Procedure block to resize all three. To accomplish this simplicity, you will use the Any Component blocks component <strong>Any VideoPlayer</strong> blocks. To find the Any VideoPlayer drawer, scroll to the bottom of the block drawers on the left of your screen. Next to Any Component, click on the + sign and scroll down further to find the Any VideoPlayer drawer. Create the <span class="callblock-ai2">resizeVideoPlayer Procedure</span> block using the following blocks:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="callblock-ai2">Procedure</span></td>
<td>Procedures</td>
<td>Defines the resizeVideoPlayer procedure. Use the mutator ability of the procedure to add three arguments: x, x2, x3. (Change the names of these arguments to VideoPlayer, zoomed, and button.)</td>
</tr><tr><td><span class="controlblock-ai2">if then</span></td>
<td>Control</td>
<td>Defines the block that chooses whether the VideoPlayer is shrunk or expanded. Use the mutator to add in an else statement.</td>
</tr><tr><td><span class="logicblock-ai2">=</span> block</td>
<td>Logic</td>
<td>Defines the equals block for testing if the zoomed block is true</td>
</tr><tr><td><span class="logicblock-ai2">true</span></td>
<td>Logic</td>
<td>Defines the block that zoomed is compared to</td>
</tr><tr><td><span class="setcomponent-ai2">set VideoPlayer.Width</span> (x2)</td>
<td>Any VideoPlayer</td>
<td>Sets the VideoPlayer Width to a number</td>
</tr><tr><td><span class="mathblock-ai2">0</span> (x2), change to -1</td>
<td>Math</td>
<td>Width to set VideoPlayer to</td>
</tr><tr><td><span class="setcomponent-ai2">set VideoPlayer.Height </span> (x2)</td>
<td>Any VideoPlayer</td>
<td>Sets the VideoPlayer Height to a number</td>
</tr><tr><td><span class="mathblock-ai2">0</span> (x2), change to 36 and 144</td>
<td>Math</td>
<td>Height to set VideoPlayer to</td>
</tr><tr><td><span class="setcomponent-ai2">set Button.text</span></td>
<td>Any Button</td>
<td>Changes the button text</td>
</tr><tr><td><span class="textblock-ai2">"  "</span> (x2)</td>
<td>Text</td>
<td>Text to set button to. Make one text block text's Shrink and the other's Grow.</td>
</tr></table><p>The <span class="callblock-ai2">resizeVideoPlayer</span> block should look like the following:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/resize_block.png" /></p>
<p>The <span class="callblock-ai2">resizeVideoPlayer</span> block will be explained later after you create the blocks for responding to button clicks.</p>
<h4 class="ai-header">Create the Click Blocks</h4>
<p>The blocks you will create respond to clicks on the ResizeButton buttons. To build the three blocks, you will need the following blocks:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="controlblock-ai2">ResizeButton1.Click</span></td>
<td>ResizeButton1</td>
<td>Defines the block for responding to clicks on ResizeButton1</td>
</tr><tr><td><span class="controlblock-ai2">ResizeButton2.Click</span></td>
<td>ResizeButton2</td>
<td>Defines the block for responding to clicks on ResizeButton2</td>
</tr><tr><td><span class="controlblock-ai2">ResizeButton3.Click</span></td>
<td>ResizeButton3</td>
<td>Defines the block for responding to clicks on ResizeButton3</td>
</tr><tr><td><span class="callblock-ai2">resizeVideoPlayer</span> (x3)</td>
<td>Procedures</td>
<td>Starts the resizeVideoPlayer block for resizing a VideoPlayer</td>
</tr><tr><td><span class="logicblock-ai2">not</span> (x3)</td>
<td>Logic</td>
<td>Defines the block for switching the various zoomed block values</td>
</tr><tr><td><span class="variableblock-ai2">set global vid1_zoomed</span></td>
<td>Variables</td>
<td>Sets the vid1_zoomed block to a different value</td>
</tr><tr><td><span class="variableblock-ai2">set global vid2_zoomed</span></td>
<td>Variables</td>
<td>Sets the vid2_zoomed block to a different value</td>
</tr><tr><td><span class="variableblock-ai2">set global vid3_zoomed</span></td>
<td>Variables</td>
<td>Sets the vid3_zoomed block to a different value</td>
</tr><tr><td><span class="variableblock-ai2">get global vid1_zoomed</span> (x2)</td>
<td>Variables</td>
<td>Used to change the vid1_zoomed value.</td>
</tr><tr><td><span class="variableblock-ai2">get global vid2_zoomed</span> (x2)</td>
<td>Variables</td>
<td>Used to change the vid2_zoomed value.</td>
</tr><tr><td><span class="variableblock-ai2">get global vid3_zoomed</span> (x2)</td>
<td>Variables</td>
<td>Used to change the vid3_zoomed value.</td>
</tr><tr><td><span class="getcomponent-ai2">ResizeButton1</span></td>
<td>ResizeButton1</td>
<td>Passed to the resizeVideoPlayer procedure</td>
</tr><tr><td><span class="getcomponent-ai2">ResizeButton2</span></td>
<td>ResizeButton2</td>
<td>Passed to the resizeVideoPlayer procedure</td>
</tr><tr><td><span class="getcomponent-ai2">ResizeButton3</span></td>
<td>ResizeButton3</td>
<td>Passed to the resizeVideoPlayer procedure</td>
</tr><tr><td><span class="getcomponent-ai2">VideoPlayer1</span></td>
<td>VideoPlayer1</td>
<td>Passed to the resizeVideoPlayer procedure</td>
</tr><tr><td><span class="getcomponent-ai2">VideoPlayer2</span></td>
<td>VideoPlayer2</td>
<td>Passed to the resizeVideoPlayer procedure</td>
</tr><tr><td><span class="getcomponent-ai2">VideoPlayer3</span></td>
<td>VideoPlayer3</td>
<td>Passed to the resizeVideoPlayer procedure</td>
</tr></table><p>The blocks should look like the following:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/resize_blocks.png" /></p>
<p>Most blocks in App Inventor require you to know exactly what component your app will manipulate when you design the app. For some apps, you will have several of the same type of component and you want to program the same behavior for all of the similar components (like the VideoPlayer blocks in this app). The blocks in the Any component section allow you to build some general manipulation on some type of component. When you built the <span class="callblock-ai2">resizeVideoPlayer procedure</span> block, you didn't know specifically which VideoPlayer would be used in the procedure. The <span class="callblock-ai2">resizeVideoPlayer</span> works on VideoPlayers; but not until the <span class="callblock-ai2">resizeVideoPlayer</span> block is used in the <span class="eventblock">ResizeButton1.Click</span> block (for example) is the specific VideoPlayer known.</p>
<p><b>Note:</b> The <span style="color:green;">VideoWall</span> app could have been designed with a specific resizing procedure for each VideoPlayer. By using the Advanced blocks in a single resizing procedure, the app is much simpler.</p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>Setting the Width and Height property for a VideoPlayer works exactly the same way as setting the Width and Height of a Button. For whatever positive number is set, the video playing will resize its appearance to fit that value. There are two values that are exceptions to the using positive values rule: -1 and -2. Setting VideoPlayer.Width or VideoPlayer.Height to -1 is like setting the Width or Height to <em>Fill parent</em> in the designer. Setting VideoPlayer.Width or VideoPlayer.Height to -2 is like setting the Width or Height to <em>Automatic</em> in the designer.</p>
<pre class="ai-warning"><b>Warning:</b> You can set the VideoPlayer Width and Height to any positive number you want. The VideoPlayer will change its size to match the values you set; but on some devices, the VideoPlayer does not change its size correctly. The behavior on such devices is usually unpredictable.</pre><pre class="ai-testing"><b>Test this behavior.</b> Click on the Grow button below the BigBuckBunny video. The video's size should expand, and the text of the button should change to "Shrink". Click on the Shrink button below the BigBuckBunny video. The video's size should shrink back to its original size and the text should change back to "Grow".</pre><h4 class="ai-header">Create the blocks for showing fullscreen video</h4>
<p>You will now add the blocks for showing the videos in fullscreen mode. Use the following blocks:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="logicblock-ai2">true</span> (x3)</td>
<td>Logic</td>
<td>Value to set FullScreen as</td>
</tr><tr><td><span class="controlblock-ai2">FullScreenButton1.Click</span></td>
<td>FullScreenButton1</td>
<td>Responds to clicks on FullScreenButton1</td>
</tr><tr><td><span class="setcomponent-ai2">set VideoPlayer1.FullScreen</span></td>
<td>VideoPlayer1</td>
<td>Used to show fullscreen video</td>
</tr><tr><td><span class="controlblock-ai2">FullScreenButton2.Click</span></td>
<td>FullScreenButton2</td>
<td>Responds to clicks on FullScreenButton2</td>
</tr><tr><td><span class="setcomponent-ai2">set VideoPlayer2.FullScreen</span></td>
<td>VideoPlayer2</td>
<td>Used to show fullscreen video</td>
</tr><tr><td><span class="controlblock-ai2">FullScreenButton3.Click</span></td>
<td>FullScreenButton3</td>
<td>Responds to clicks on FullScreenButton3</td>
</tr><tr><td><span class="setcomponent-ai2">set VideoPlayer3.FullScreen</span></td>
<td>VideoPlayer3</td>
<td>Used to show fullscreen video</td>
</tr></table><p>The blocks should look like the following:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/fullscreen_blocks.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The <span class="setcomponent-ai2">VideoPlayer.FullScreen</span> block takes a true/false value (also called a boolean) to tell it whether to go full screen or not. Setting a <span class="setcomponent-ai2">VideoPlayer.FullScreen</span> block to true causes that VideoPlayer to be displayed in fullscreen mode. If there is another VideoPlayer in fullscreen mode, that VideoPlayer's .FullScreen value is set to false and it is replaced with the current VideoPlayer. If a <span class="setcomponent-ai2">VideoPlayer.FullScreen</span> is true, setting a <span class="setcomponent-ai2">VideoPlayer.FullScreen</span> block to false causes the fullscreen mode to be exited and the app's interface to display. Test this behavior. Start playing the BigBuckVideo, and click on the Show FullScreen button below the BigBuckBunny video. The app's interface should disappear and some media controls with the BigBuckBunny video should appear. Use the Back button on your device or the emulator to exit fullscreen. The app's interface should appear.</p>
<h4 class="ai-header">Final Program</h4>
<p>VideoWall Final Version</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/blockseditor_full.png" /></p>
<p>Package the final version of the app by choosing <b>Build | App (provide QR code for .apk)</b> from the Component Designer menu. When the barcode appears, use the barcode scanner on your phone to download and install the app. For more information on sharing and packaging apps, click <a href="http://appinventor.mit.edu/explore/ai2/share.html">here</a>.</p>
<h4 class="ai-header">Variations</h4>
<p>Now that you have finished the first <span style="color:green;">VideoWall</span> app, you might want to build some variations. For example:</p>
<ul><li>Get more video files and add a second row to create a real VideoWall</li>
<li>Use videos from an online server.</li>
<li>Expand the resizeVideoPlayer procedure to resize VideoPlayers by small increments to create an animation effect. You could use multiple Clocks to start the resizeVideoPlayer procedure and animate multiple VideoPlayers at once.</li>
</ul><p><b>If you distribute your app to others, make sure you respect any license requirements for the videos you use.</b></p>
<p>Below are the attributions to the video files included in this demo app. The creators of the source videos that these clips are from do not endorse App Inventor.</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>Video File</td>
<td>Information</td>
<td>Attribution</td>
</tr><tr><td>bigbuckbunny.3gp</td>
<td>A clip from the full length film</td>
<td>(c) copyright 2008, Blender Foundation / <a href="http://www.bigbuckbunny.org/">http://www.bigbuckbunny.org</a></td>
</tr><tr><td>nasa.3gp</td>
<td>A formatted version of the Mars' Whirling Dust Devil clip.</td>
<td>Here is the <a>original video.</a></td>
</tr><tr><td>sintel.3gp</td>
<td>A clip from the full length film
</td>
<td>(c) copyright Blender Foundation | <a href="http://durian.blender.org/">http://durian.blender.org</a></td>
</tr></table><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/VideoWallBarcode.png" /></p>
<p>Or <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/VideoWall.apk">download the apk</a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/videoWall/VideoWall.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<pre class="ai-box">MIT is grateful to <a href="http://appinventor.mit.edu/explore/people/vance-turnewitsch.html">Vance Turnewitsch</a> for developing this tutorial.

Done with <span style="color:black;">VideoWall</span>? Return to the other App Inventor 2 tutorials <a href="tutorials.html">here</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Video</li></ul></section>  </div>

  
  
  <article id="article-354" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/stockquotes" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      StockQuotes for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="StockQuotes for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

li {
padding-bottom: 7px;
}

.basicblock {
border: 1px dashed #7AA81C;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;
	
}

.callblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.argblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.textblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.setblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

.controlblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

/*--><!]]>*/
</style><h2 class="ai-header"><span style="color:green;">StockQuotes</span></h2>
<h4 class="ai-header">What You're Building</h4>
<p>Just like you can access web pages from your phone -- for example, to look up a stock price -- so can App Inventor.  This app enables the user to enter a stock symbol, then looks up the price of the stock on Yahoo! Finance and displays the price on the phone.</p>
<p>This tutorial assumes that you are familiar with the basics of App Inventor -- using the Component Designer to build a user interface and using the Blocks Editor to specify event handlers.  If you are not familiar with the basics, try stepping through some of the <a href="http://appinventor.mit.edu/explore/ai2/tutorials.html">basic tutorials</a> before continuing.</p>
<h4 class="ai-header">Introduction</h4>
<p>This tutorial includes</p>
<ol><li>Accepting text input from the user to specify the stock symbol.</li>
<li>Using the Web component to ask Yahoo! Finance for the latest price for the stock.</li>
<li>Displaying the result.</li>
</ol><h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project.  Name it StockQuotes, and also set the screen’s <b style="color:green;">Title</b> to “Stock Quotes”. Open the Blocks Editor and connect it to the phone.</p>
<h4 class="ai-header">Set up the Components</h4>
<p>Use the component designer to create the user interface.  When you are done, it should look something like the picture below.  Additional instructions are below the picture.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/stockQuotes/components1.png" /></p>
<p>Create the following components by dragging them from the Palette into the Viewer.</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>User Interface</td>
<td style="color:green;">StockSymbolTextBox</td>
<td>Where the user enters the stock symbol</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">GetQuoteButton</td>
<td>To request the stock quote</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">ValueLabel</td>
<td>To display the stock quote</td>
</tr><tr><td>
<b>Web</b>
</td>
<td>Connectivity</td>
<td style="color:green;">Web1</td>
<td>To request and receive the stock quote</td>
</tr></table><p>Stick with the default properties except for the following changes:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>Component</td>
<td>Action</td>
</tr><tr><td><b>StockSymbolTextBox</b></td>
<td>Set its <b style="color:green;">Hint</b> property to "Enter a stock symbol".</td>
</tr><tr><td><b>GetQuoteButton</b></td>
<td>Set its <b style="color:green;">Text</b> property to "Get Stock Quote".</td>
</tr><tr><td><b>ValueLabel</b></td>
<td>Clear its <b style="color:green;">Text</b> property.</td>
</tr></table><h4 class="ai-header">The Yahoo! Finance API</h4>
<p>Many web services provide an <em>application programmer interface</em> (API) for developers to enable their programs to access the service. Some ways to discover APIs are through the website <a href="http://programmableweb.com/">http://programmableweb.com</a> or just by doing a web search for the service name and “API”.</p>
<p>For example, you can use the Yahoo! Finance API to get the latest price for the stock with the symbol "GOOG", for example, with the URL <a href="http://download.finance.yahoo.com/d/quotes.csv?f=nl1c1&amp;e=.csv&amp;s=GOOG">http://download.finance.yahoo.com/d/quotes.csv?f=nl1c1&amp;e=.csv&amp;s=GOOG</a> . The section "f=l1" (lower-case letter L, followed by the number 1) says we would like the latest price, and the section “s=GOOG” says we would like information about the stock whose symbol is “GOOG”.  The result is returned in comma-separated value (CSV) format, which you may be familiar with from spreadsheets.  Since only one value will be returned for our query, the result will be a plain old number, such as “511.5”, without any commas.  (Commas would be used if we requested multiple pieces of data from Yahoo!, such as the name of the company and the daily trade volume. To get data for multiple stocks, chain together the stock symbols with commas).</p>
<h4 class="ai-header">Add Behaviors to the Components</h4>
<h5 class="ai-header">Requesting the Data</h5>
<p>The blocks to make the web request are shown here and detailed below:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/stockQuotes/GetQuoteButton.png" /></p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="controlblock-ai2">GetQuoteButton.Click</span></td>
<td>GetQuoteButton</td>
<td>Handle a click of the "Get Quote" button.</td>
</tr><tr><td><span class="setcomponent-ai2">set Web1.Url to</span></td>
<td>Web1</td>
<td>Specify the URL to request.</td>
</tr><tr><td><span class="textblock-ai2">join</span></td>
<td>Text</td>
<td>Concatenate the parts of the URL.</td>
</tr><tr><td><span class="textblock-ai2">"   "</span> (<a href="http://download.finance.yahoo.com/d/quotes.csv?f=nl1c1&amp;e=.csv&amp;s=">http://download.finance.yahoo.com/d/quotes.csv?f=nl1c1&amp;e=.csv&amp;s=</a>)</td>
<td>Text</td>
<td>Specify the first unchanging part of the URL.</td>
</tr><tr><td><span class="getcomponent-ai2">StockSymbolTextBox.Text</span></td>
<td>StockSymbolTextBox</td>
<td>Get the stock symbol from the text box.</td>
</tr><tr><td><span class="callblock-ai2">call Web1.Get</span></td>
<td>Web1</td>
<td>Make the web request.</td>
</tr></table><p>The meaning is: When GetQuoteButton is clicked:</p>
<ol><li>Build the Web component’s URL by concatenating “<a href="http://download.finance.yahoo.com/d/quotes.csv?f=nl1c1&amp;e=.csv&amp;s=">http://download.finance.yahoo.com/d/quotes.csv?f=nl1c1&amp;e=.csv&amp;s=</a>” (which you should copy and paste into the text block) and the symbol entered by the user (StockSymbolTextBox.Text).</li>
<li>Request the page specified by the URL. (This is like pressing return after entering a URL in your web browser.)</li>
</ol><h5 class="ai-header">Receiving the Data
</h5><p>When the response to the web request arrives, the <span class="eventblock">Web.GotText</span> event is raised with four parameters (only some of which we’ll use in this app):</p>
<ol><li><b>url</b>: the URL of the original request (which is useful if requests are made with many different URLs).</li>
<li><b>responseCode</b>: <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">the HTTP status code</a>, which indicates whether the web request succeeded or how it failed; for example, 200 means that the request succeeded, 404 that the page could not be found, etc.</li>
<li><b>responseType</b>: <a href="http://en.wikipedia.org/wiki/Mime_type">the MIME type</a> of the response, such as “text/csv” in this app, “image/jpeg”, etc.</li>
<li><b>responseContent</b>: the data being returned, such as “511.5”.</li>
</ol><p>Here are a picture and table of the blocks you need to create:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/stockQuotes/receive-data.png" /></p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="controlblock-ai2">Web1.GotText</span></td>
<td>Web1</td>
<td>Specify what to do when the reply comes back from the web.</td>
</tr><tr><td><span class="controlblock-ai2">if then</span></td>
<td>Control</td>
<td>Provide different behavior depending on whether the request succeeded. Use the mutator to add an else statement.</td>
</tr><tr><td><span class="variableblock-ai2">get responseCode</span></td>
<td>Variables</td>
<td>Gets the response code returned for the web request, which...</td>
</tr><tr><td><span class="logicblock-ai2"> = </span> (equals) block</td>
<td>Logic</td>
<td>...is checked for equality with...</td>
</tr><tr><td><span class="mathblock-ai2">number</span> (200)</td>
<td>Math</td>
<td>...200, the code for valid web responses.</td>
</tr><tr><td><span class="setcomponent-ai2">set ValueLabel.Text to</span></td>
<td>ValueLabel</td>
<td>Display the result on the screen.</td>
</tr><tr><td><span class="textblock-ai2">join</span></td>
<td>Text</td>
<td>Build the result by concatenating...</td>
</tr><tr><td><span class="textblock-ai2">"   "</span> ("Current value: ")</td>
<td>Text</td>
<td>...the text “Current value: “ and...</td>
</tr><tr><td><span class="variableblock-ai2">get responseContent</span></td>
<td>Variables</td>
<td>Gets the value returned from the web.</td>
</tr><tr><td><span class="setcomponent-ai2">set ValueLabel.Text to</span></td>
<td>ValueLabel</td>
<td>Display an error message.</td>
</tr><tr><td><span class="textblock-ai2">"   "</span> ("Error getting stock quote")</td>
<td>Text</td>
<td>The error message</td>
</tr></table><p>Here's a description of the block's behavior:</p>
<ol><li>If the response code indicates that the web request succeeded (= 200), set the label to the concatenation of “Current value: “ and the returned data (e.g., 511.5).</li>
<li>Otherwise, set the label to “Error getting stock quote”.</li>
</ol><h4 class="ai-header">Invalid Stock Symbol</h4>
<p>What happens if you misspell a stock symbol? The app says that the Current Value is N/A! N/A stands for “not applicable”--or, that the API doesn’t know what that stock symbol is, so it can’t find a current value. Below is a picture and a table of the blocks required to tell the user they have entered an invalid stock symbol. </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/stockQuotes/WebGotText2.png" /></p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="controlblock-ai2">Web1.GotText</span></td>
<td>Web1</td>
<td>Specify what to do when the reply comes back from the web.</td>
</tr><tr><td><span class="controlblock-ai2">if then</span></td>
<td>Control</td>
<td>Provide different behavior depending on whether the request succeeded. Use the mutator to add an else statement.</td>
</tr><tr><td><span class="variableblock-ai2">get responseCode</span></td>
<td>Variables</td>
<td>Gets the response code returned for the web request, which...</td>
</tr><tr><td><span class="logicblock-ai2"> = </span> (equals) block</td>
<td>Logic</td>
<td>...is checked for equality with...</td>
</tr><tr><td><span class="mathblock-ai2">number</span> (200)</td>
<td>Math</td>
<td>...200, the code for valid web responses.</td>
</tr><tr><td><span class="controlblock-ai2">if then</span></td>
<td>Control</td>
<td>Provide different behavior depending on whether the symbol was valid. use the mutator to add an else statement.</td>
</tr><tr><td><span class="textblock-ai2">contains</span></td>
<td>Text</td>
<td>Checks whether a piece of text exists within another piece of text</td>
</tr><tr><td><span class="variableblock-ai2">get responseContent</span></td>
<td>Variables</td>
<td>Gets the value returned from the web, which contains “N/A” if the symbol was not found.<br /></td></tr><tr><td><span class="textblock-ai2">"   "</span> ("N/A")</td>
<td>Text</td>
<td>The text "N/A"<br /></td></tr><tr><td>span class="setcomponent-ai2"&gt;set ValueLabel.Text to</td>
<td>ValueLabel</td>
<td>Display an error message.</td>
</tr><tr><td><span class="textblock-ai2">"   "</span> ("Couldn't find quote. Are you sure that's a valid symbol?")</td>
<td>Text</td>
<td>An error message.<br /></td></tr><tr><td><span class="setcomponent-ai2">set ValueLabel.Text to</span></td>
<td>ValueLabel</td>
<td>Display the result on the screen.</td>
</tr><tr><td><span class="textblock-ai2">join</span></td>
<td>Text</td>
<td>Build the result by concatenating...</td>
</tr><tr><td><span class="textblock-ai2">"   "</span> ("Current value: $")</td>
<td>Text</td>
<td>...the text “Current value: $“ and...</td>
</tr><tr><td><span class="variableblock-ai2">get responseContent</span></td>
<td>Variables</td>
<td>Gets the value returned from the web.</td>
</tr><tr><td><span class="setcomponent-ai2">set ValueLabel.Text to</span></td>
<td>ValueLabel</td>
<td>Display an error message.</td>
</tr><tr><td><span class="textblock-ai2">"   "</span> ("Error getting stock quote")</td>
<td>Text</td>
<td>An error message</td>
</tr></table><p>Here's a description of the block's behavior:</p>
<ol><li>Check whether the response code indicates that the web request succeeded (=200); if it did not, set the label to "Error getting stock quote".</li>
<li>If it did, check if the stock symbol was found. If it was not found, set the label to "Couldn't find quote. Are you sure that's a valid symbol?".</li>
<li>If the stock symbol was found, set the label to the concatenation of "Current Value: $" and the returned data (e.g., 511.5).</li>
</ol><h4 class="ai-header">Review</h4>
<p>Here are some ideas introduced in this tutorial:</p>
<ol><li>Using an application programmer interface (API)</li>
<li>Making a request with the Web component</li>
<li>Checking whether a web request was successful</li>
<li>Displaying information returned from the web</li>
</ol><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/stockQuotes/StockQuotesBarcode.png" /></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/stockQuotes/stockQuotes.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<h4 class="ai-header">Credits</h4>
<pre class="ai-box">This tutorial is based on <a href="http://appinventor.org/">an app created by Prof. David Wolber</a> and relies on the Yahoo! Finance API.

Done with <span style="color:black;">StockQuotes</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">External API</li></ul></section>  </div>

  
  
  <article id="article-379" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/minigolf" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Mini Golf: Fling, TouchUp, TouchDown Gestures for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Mini Golf: Fling, TouchUp, TouchDown Gestures for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>This Mini Golf App demonstrates how to use the Fling, TouchUp, and TouchDown gestures for Sprites<br />Note that these event handlers are also available for the Canvas.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/minigolfscreen.png" style="float: right;border:none" width="250" /></p>
<p>To play this mini golf app, the player first positions his/her ball within the confines of the tee, and then flings the ball toward the hole. The ball will bounce off of the rectangular obstacle and the sides of the course. For each fling of the ball, the stroke count goes up by one. The total score is the number of strokes it takes to complete the entire course. </p>
<p>This tutorial covers:</p>
<ul><li>Using the <b>Sprite</b> component and the TouchUp, TouchDown, and Flung events</li>
<li>Using a <b>Clock</b> component</li>
<li>Dynamic Positioning of sprites on a canvas, based on the size of the screen</li>
<li>Sprite Collisions</li>
</ul><p>This tutorial assumes you are familiar with the basics of App Inventor-- using the Component Designer to build a user interface, and using the Blocks Editor to specify the app's behavior. If you are not familiar with the basics, try stepping through some of the <a href="http://appinventor.mit.edu/explore/ai2/tutorials.html">basic tutorials</a> before continuing.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/MiniGolf_MIT.aia"><img src="http://appinventor.mit.edu/explore/sites/all/files/tutorials/miniGolf/downloadSourcebutton.png" style="float: right; border:none" width="250" /></a><br /><br /><br /><br /></p>
<hr /><h3>Part I: Start a new app and make a ball that responds to fling events</h3>
<p>We'll build this app in stages, adding a little bit of the game at a time. Log into App Inventor and start a new project. Name it "MiniGolf". When the Design window opens notice that App Inventor automatically names the screen "Screen1", but you can set the Title of the screen, which will show up in the top bar of the app. Think of a title related to Mini Golf, or feel free to use the suggested title "Fling It Mini Golf", and type it into the Properties pane on the right side of the Designer.</p>
<p>In the Screen Properties (shown in right-hand pane): Uncheck the checkbox labeled "Scrollable" so that the screen will not scroll when the app is running. Screens that are set to scroll do not have a height. We’ll need our screen to have a defined height in order to set up the golf course properly.</p>
<p><strong>Add the following components in the Designer:</strong></p>
<table class="lined-table" cellpadding="0" cellspacing="0"><tbody><tr style="background-color: black; font-weight: bold;"><td>
<p><strong>Component Type</strong></p>
</td>
<td>
<p><strong>Palette Group</strong></p>
</td>
<td>
<p><strong>What You'll Name It</strong></p>
</td>
<td>
<p><strong>Purpose</strong></p>
</td>
<td>
<p><strong>Properties</strong></p>
</td>
</tr><tr><td>
<p>Canvas</p>
</td>
<td>
<p>Drawing and Animation</p>
</td>
<td>
<p>Canvas1</p>
</td>
<td>
<p>The canvas serves as the golf course</p>
</td>
<td>
<p>Height: 300<br />Width: FillParent<br />BackgroundColor: Green (or whatever you like!)</p>
</td>
</tr><tr><td>
<p>Ball</p>
</td>
<td>
<p>Drawing and Animation</p>
</td>
<td>
<p>GolfBall</p>
</td>
<td>
<p>This is the ball the player will fling to try to hit the Hole</p>
</td>
<td>
<p>Radius = 10<br />Color: White (or your choice!)<br />Speed: 0<br />Interval: 1 (ms)</p>
<p>Z = 2 (when sprites are overlapping, the one with the higher z will appear on top)</p>
</td>
</tr><tr><td>
<p>Ball</p>
</td>
<td>
<p>Drawing and Animation</p>
</td>
<td>
<p>Hole</p>
</td>
<td>
<p>This will be the target for the GolfBall</p>
</td>
<td>
<p>Radius = 15<br />Color: Black<br />Speed: 0</p>
</td>
</tr><tr><td>
<p>Clock</p>
</td>
<td>
<p>Sensors</p>
</td>
<td>
<p>Clock1</p>
</td>
<td>
<p>The clock will fire continuously to control the movement of the ball</p>
</td>
<td>
<p>Timer Always Fires</p>
<p>Timer Enabled</p>
<p>TimerInterval: 100</p>
</td>
</tr></tbody></table><p><strong>Open the Blocks Editor</strong></p>
<p><strong>Program the behavior of the Ball:</strong></p>
<p>First, use the <span class="eventblock">GolfBall.Flung</span> event handler to move the golf ball when it is flung. Notice how this event handler takes in 6 different arguments: </p>
<ul><li><em>x</em>, the x position on the Canvas grid of the user's finger </li>
<li><em>y</em>, the y position on the Canvas grid of the user's finger</li>
<li><em>speed</em>, the speed of the user's flinging gesture</li>
<li><em>heading</em>, the direction (in degrees) of the user's fling gesture</li>
<li><em>xvel</em>, the speed in the x direction of the user's fling</li>
<li><em>yvel</em>, the speed in the y direction of the user's fling</li>
</ul><p>Essentially, you want to set the GolfBall’s speed and heading to match the speed and heading of the player’s fling gesture. You may want to scale up the speed a little bit because the speed of the fling is a little slower than how a golf ball would move. You can play with this "scaling factor" to make the ball more or less responsive to a fling.</p>
<p> <img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/golfBall.flung.png" /></p>
<p><strong>Program the behavior of the clock:</strong></p>
<p> Use timer event to slow ball down so it doesn’t bounce around forever.</p>
<p>Each time the clock fires, it will reduce the speed of the ball slightly. Notice that if the ball is not moving then these blocks will do nothing. If you don’t have this then the ball will just bounce forever.</p>
<p>You'll need to use the if mutator function to change the <span class="controlblock-ai2">if</span> block into an <span class="controlblock-ai2">if-else</span> block. For a summary of mutators, check out the <a href="http://appinventor.mit.edu/explore/ai2/support/concepts/mutators">Mutators page</a></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/clock1.timer.png" /></p>
<p><strong>Program a new procedure called SetupNewHole:</strong></p>
<p>This procedure will be called when a hole is scored and the ball has to be placed back at the starting point. Note that the <span class="callblock-ai2">Hole.MoveTo</span> block sets the hole up in a new random location for the next play.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/setupNewHole.png" /></p>
<p><strong>Program the Behavior of the Hole: </strong><span>When the ball collides with the hole, the ball disappears and resets at the bottom of the screen.</span></p>
<p>Note: When you first drag out the <span class="controlblock-ai2">GolfBall.CollidedWith</span> event handler, the named parameter is called "other". Notice that the <span class="controlblock-ai2">if then</span> block tests to see if the object involved in the collision with the golf ball (<span class="variableblock-ai2">other</span>) is the black ball sprite representing the hole. You can't just put a text block with the word "Hole" in it, you must use the <span class="getcomponent-ai2">Hole</span><span> block, that can be found in the drawer for the Hole image sprite. Do not use a <span class="textblock-ai2">text block</span> here.</span></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/golfball.collidedwith.png" /></p>
<pre class="ai-testing"><strong>Test this Behavior.</strong> Connect your device to AppInventor, or start the emulator to load your app. When you fling the ball it should move in the direction of your fling, with a speed similar to the strength of your fling. The ball should slow down as it moves, eventually stopping. When the ball hits the hole, the ball should reset at the bottom of the screen and the hole should move to a new random location.</pre><p> </p>
<p><strong>Does your ball get stuck if it hits the edge? </strong></p>
<p>This is easy to fix with the when <span class="controlblock-ai2">EdgeReached</span> event. Note that you can find the "edge" value block by using a <span class="variableblock-ai2">get</span> block and selecting "edge" from the dropdown.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/golfBall.edgeReached.png" /></p>
<p>Double check to make sure your code is right: fling the ball a few times and see that that ball now bounces off the edges of the course.</p>
<h3>Part II: Keeping Score</h3>
<p>Games are more fun if you have a way to see how you’re doing. Let’s add a stroke counter. In mini golf your score goes up as you take more strokes. The goal is to have the lowest score possible. Let’s show the player how many strokes she or he has taken on this hole. Let’s also show the number of strokes taken during the whole game.</p>
<p> </p>
<p>Go back to the Designer and set up the following components:</p>
<p><a href="#" name="84f417a34cd2d904669a10a8f96b32bf41ae274b" id="84f417a34cd2d904669a10a8f96b32bf41ae274b"></a><a href="#" name="2" id="2"></a><br /></p><table class="lined-table" cellpadding="0" cellspacing="0"><tbody><tr style="background-color: black; font-weight: bold;"><td>
<p><strong>Component Type</strong></p>
</td>
<td>
<p><strong>Palette Group</strong></p>
</td>
<td>
<p><strong>What You’ll Name It</strong></p>
</td>
<td>
<p><strong>Purpose</strong></p>
</td>
<td>
<p><strong>Properties</strong></p>
</td>
</tr><tr><td>
<p>Horizontal Arrangement</p>
</td>
<td>
<p>Layout</p>
</td>
<td>
<p>HorizontalArrangement1</p>
</td>
<td>
<p>Contains LabelScore and LabelStroke</p>
</td>
<td>
<p>Place at top of screen</p>
</td>
</tr><tr><td>
<p>Label</p>
</td>
<td>
<p>User Interface</p>
</td>
<td>
<p>LabelScore</p>
</td>
<td>
<p>Displays the total stroke count for the entire game</p>
</td>
<td></td>
</tr><tr><td>
<p>Label</p>
</td>
<td>
<p>User Interface</p>
</td>
<td>
<p>LabelStroke</p>
</td>
<td>
<p>Displays the stroke count for the hole the player is currently on</p>
</td>
<td></td>
</tr></tbody></table><p>In the Blocks Editor, you can program updates to the Score and Stroke labels. First, set two new global variables called <span class="variableblock-ai2">StrokeCount</span> and <span class="variableblock-ai2">Score</span>, and set their initial values to 0.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/scoreto0.png" /></p>
<p>Then add the following blocks to the <span class="controlblock-ai2">GolfBall.Flung</span> event (red rectangle indicates new blocks):</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/golfball.flung_final.png" /></p>
<p>Next add the following blocks to the Event that handles the ball hitting the hole:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/golfball_collidewith.png" /></p>
<pre class="ai-testing"><strong>Test the behavior.</strong> With these new changes, you should have a "Total Strokes" count and "This Hole" count at the top of the screen. When you fling the ball, the "This Hole" count  and "Total Strokes" count should both increase by one, and when you make the ball go into the hole the "This Hole" count should reset to 0.</pre><h3>Part III: Positioning Ball on Tee using TouchUp and TouchDown events</h3>
<p>Ok, so now you’ve got a working game! Now let’s make it a little more interesting and fun. First we’ll add a Tee and let the player position the golf ball on the tee before they fling the ball.</p>
<p><strong>Go back to the Designer and add three new image sprite components:</strong></p>
<p><a href="#" name="f32e9ebd8bb0c367ac6b009ebba0af05e4eb1b4e" id="f32e9ebd8bb0c367ac6b009ebba0af05e4eb1b4e"></a><a href="#" name="1" id="1"></a><br /></p><table class="lined-table" cellpadding="0" cellspacing="0"><tbody><tr style="background-color: black; font-weight: bold;"><td>
<p><strong>Component Type</strong></p>
</td>
<td>
<p><strong>Palette Group</strong></p>
</td>
<td>
<p><strong>What You’ll Name It</strong></p>
</td>
<td>
<p><strong>Purpose</strong></p>
</td>
<td>
<p><strong>Properties</strong></p>
</td>
</tr><tr><td>
<p>ImageSprite</p>
</td>
<td>
<p>Drawing and Animation</p>
</td>
<td>
<p>Tee</p>
</td>
<td>
<p>A rectangular area in which the player can position their ball before teeing off.</p>
</td>
<td>
<p>Upload the Tee image (<a href="http://appinventor.mit.edu/explore/sites/all/files/tutorials/miniGolf/tee_graphic.png">right click on this link</a>, or see below).</p>
</td>
</tr><tr><td>
<p>ImageSprite</p>
</td>
<td>
<p>Drawing and Animation</p>
</td>
<td>
<p>LeftSprite</p>
</td>
<td>
<p>This is a left pointing arrow that the player will use to move the ball to the left on the tee</p>
</td>
<td>
<p>Upload the left arrow graphic (<a href="http://appinventor.mit.edu/explore/sites/all/files/tutorials/miniGolf/left_arrow.jpg">right click on this link</a></p>
</td>
</tr><tr><td>
<p>ImageSprite</p>
</td>
<td>
<p>Drawing and Animation</p>
</td>
<td>
<p>RightSprite</p>
</td>
<td>
<p>This is a right pointing arrow that the player will use to move the ball to the left on the tee</p>
</td>
<td>
<p>Upload the right arrow graphic (<a href="http://appinventor.mit.edu/explore/sites/all/files/tutorials/miniGolf/right_arrow.jpg">right click on this link</a></p>
</td>
</tr></tbody></table><p><strong>Program the size of the canvas, and the placement of the ball and image sprites on the canvas:</strong></p>
<p>First, program the setup of these components on the screen. It’s best to accommodate all different screen sizes by placing the sprites on the screen relative to the size of the screen. The blocks below show how to set up the screen <em>dynamically</em><span> so that everything fits the right way. We start off by making the canvas size based on the screen size, and then we place each sprite in relation to the width and height of the canvas. We'll make a procedure to do this for us. Try to understand all of these blocks before you move on.</span></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/preparescreen.png" /></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/golf_screen_init.png" /></p>
<p><strong>Position the Golf Ball on the Tee using TouchUp and TouchDown on the Arrow sprites:</strong></p>
<p>To handle this, first set up two global variables that are toggled each time an arrow is pressed.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/global.png" /></p>
<p><strong>Program the behavior of the Right and Left Arrows</strong></p>
<p>The left and right arrows are image sprites, so they come equipped with the ability to know when the player is is holding his/her finger down on them. The following blocks toggle the global variables based on whether the user is pressing either of these arrows.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/spriteTouchDown.png" /></p>
<p><strong>Procedure MoveBallOnTee:</strong></p>
<p>Make a new procedure <span class="callblock-ai2">moveBallOnTee</span> that makes the golf ball move left or right on the tee depending on the global variables. Although the math here looks complicated, it’s pretty simple. If the ball is supposed to move left, you first check to make sure that moving the ball 2 pixels left will not exceed the left-most coordinate of the Tee. If moving the golf ball to the right, you first check that moving the ball right 2 pixels will not move it past the right-most coordinate of the Tee.</p>
<p><em>Note: if blocks look different in this image than on your own screen, this is because they were aligned differently. If you right click on the blocks, a list of options will appear and one of them is external inputs. When you select this, it will change how the blocks are configured. It does not change how the blocks function. If you want to change this, right click again and select internal inputs.</em></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/moveBallOnTee.png" /></p>
<p><strong>MoveBallOnCourse Procedure</strong></p>
<p>Note that the blocks that we had inside the <span class="controlblock-ai2">Clock1.Timer</span> event are now moved over to a new procedure called <span class="callblock-ai2"> moveBallOnCourse: </span></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/moveBallOnCourse.png" /></p>
<p>On each new course, players can position the ball on the tee before attempting to fling the ball toward the hole. To program this, you first have to check to make sure this is a new course and the ball has not been flung yet. If <span class="variableblock-ai2">StrokeCount</span> = 0 then we know this course is brand new and the player has not yet attempted to get the ball into the hole.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/timer_final.png" /></p>
<p>As the blocks above show, after verifying that the StrokeCount is 0, you then want to proceed to move the golf ball left or right depending on which arrow is being pressed. </p>
<pre class="ai-testing"><strong>Test the behavior.</strong> Make sure your app is doing what you expect: play the game on your device or emulator. Before you tee off, are you able to move the ball left and right on the tee by using the left and right arrows? After you tee off, you should no longer be able to use the left and right arrows (pressing them will do nothing). After the ball goes into the hole and the screen resets, you should then be able to move the ball left and right on the tee before teeing off again.</pre><p><strong>Keep track of the number of holes played, and allow a game reset</strong></p>
<p>The game is working pretty well now, but what about giving the player a way to reset the game? Also, it would be nice to give the player some instructions so they know how to play the game. While we’re at it, let’s also give an indication of how many holes the player has completed. Add the following components in the Designer:</p>
<p><a href="#" name="0899df2ccc45cb7f22bfe41d004593ed854f9f2c" id="0899df2ccc45cb7f22bfe41d004593ed854f9f2c"></a><a href="#" name="3" id="3"></a><br /></p><table class="lined-table" cellpadding="0" cellspacing="0"><tbody><tr style="background-color: black; font-weight: bold;"><td>
<p><strong>Component Type</strong></p>
</td>
<td>
<p><strong>Palette Group</strong></p>
</td>
<td>
<p><strong>What You’ll Name It</strong></p>
</td>
<td>
<p><strong>Purpose</strong></p>
</td>
<td>
<p><strong>Properties</strong></p>
</td>
</tr><tr><td>
<p>Horizontal Arrangement</p>
</td>
<td>
<p>Layout</p>
</td>
<td>
<p>Horizontal Arrangement2</p>
</td>
<td>
<p>Contains the NewGame button and the HoleNum label</p>
</td>
<td></td>
</tr><tr><td>
<p>Button</p>
</td>
<td>
<p>User Interface</p>
</td>
<td>
<p>ButtonNewGame</p>
</td>
<td>
<p>Resets the game to Hole #1 with a score of 0.</p>
</td>
<td>
<p>Text: "New Game"</p>
</td>
</tr><tr><td>
<p>Label</p>
</td>
<td>
<p>User Interface</p>
</td>
<td>
<p>LabelHoleNum</p>
</td>
<td>
<p>Displays the current hole number, increments by one each time a hole is completed.</p>
</td>
<td>
<p>Text = "Hole # 1"<br />Font: bold, 28, blue<br /></p>
</td>
</tr><tr><td>
<p>Label</p>
</td>
<td>
<p>User Interface</p>
</td>
<td>
<p>LabelInstruct</p>
</td>
<td>
<p>Displays instructions</p>
</td>
<td>
<p>Text = "Use arrows to position ball on tee. Hit the ball by flinging it with your finger."</p>
</td>
</tr></tbody></table><p>Define a new global variable to keep track of the Hole Number:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/holecount.png" /></p>
<p>Add the following blocks to the <span class="callblock-ai2">setupNewHole</span> procedure: set <span class="setblock">global HoleCount</span> and set <span class="setblock">LabelHoleNum.Text</span>...</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/setup_final.png" /></p>
<p>Program the "New Game" button’s behavior, which is pretty simple. When the button is pressed, set up a new course and reset both the hole stroke counter and total stroke counter to zero. Also set the hole number back to 1, by displaying "Hole #1" in LabelHoleNum. The blocks look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/buttonNewGame.png" /></p>
<pre class="ai-testing"><strong>Test the behavior.</strong><p> Go back to your device or emulator and play the game some more. Now you should see the Hole # displayed in the lower right. Hitting "New Game" button should reset the game, returning both scores to 0, resetting the screen, and setting the Hole number to #1.</p></pre><h3>Part IV: Introduce an Obstacle</h3>
<p>Most mini golf courses have obstacles on them. Let’s add a simple rectangular obstacle that will randomly position itself on the course somewhere between the Tee and the Hole. Each time a new course is presented, the obstacle will move, just the same way the Hole moves each time a new course is set up.</p>
<p><strong>Add the following component in the Designer:</strong></p>
<p><a href="#" name="981d9864ae92d2e44bbc01311278b4463bf01a1e" id="981d9864ae92d2e44bbc01311278b4463bf01a1e"></a><a href="#" name="4" id="4"></a></p>
<table class="lined-table" cellpadding="0" cellspacing="0"><tbody><tr style="background-color: black; font-weight: bold;"><td>
<p><strong>Component Type</strong></p>
</td>
<td>
<p><strong>Palette Group</strong></p>
</td>
<td>
<p><strong>What You’ll Name It</strong></p>
</td>
<td>
<p><strong>Purpose</strong></p>
</td>
<td>
<p><strong>Properties</strong></p>
</td>
</tr><tr><td>
<p>ImageSprite</p>
</td>
<td>
<p>Drawing and Animation</p>
</td>
<td>
<p>ObstacleSprite1</p>
</td>
<td>
<p>This sprite will be somewhere between the golf ball and hole and will make it harder to get the ball into the hole</p>
</td>
<td>
<p>Upload the obstacle (rectangle) graphic (<a href="http://appinventor.mit.edu/explore/sites/all/files/tutorials/miniGolf/golf_obstacle1.png">right click on this link</a>, or see below).</p>
</td>
</tr></tbody></table><p>Program the behavior of the obstacle in the blocks editor. First, set the behavior for when the ball hits the obstacle.  *Note: Using Heading = 0 - heading works because we are dealing with bouncing off of horizonal surfaces, this will not work for bouncing off of vertical or inclined surfaces. For our purposes, it works all right. See Challenge #2 below for more information.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/obstaclecollide.png" /></p>
<p>Each time the course is reset, position the obstacle will be positioned randomly. Add these blocks to the <span class="callblock-ai2">setupNewHole</span> procedure:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/addtosetup.png" /></p>
<pre class="ai-testing"><strong>Test the behavior.</strong> Play the game again. Notice that the ball bounces off when it hits the obstacle. When the ball goes into the hole, or when the New Game button is pressed, the obstacle appears in a new location somewhere between the tee and the hole.</pre><p>That’s it! Share your game with friends by building an APK or by downloading the source and sharing the zip file with other App Inventors!<br /></p>
<h3>Part V: Challenges</h3>
<p>Here are some extra challenges to make your game better.</p>
<p><strong>Challenge 1:</strong> Program the Ball to Hole collision so that the ball only goes into the hole if the golf ball’s speed is not too fast. In real mini golf, the ball will bounce right over the hole if you hit the ball too hard.</p>
<p><strong>Challenge 2:</strong> There is a slight bug when the ball hits the vertical sides of obstacle. Figure out how to program the ball to obstacle collision so that it bounces the way you would expect when the ball hits the vertical sides.</p>
<p><strong>Challenge 3:</strong> Limit the number of holes per game. Keep track of the number of holes and end the game after a set number. (A typical mini golf course has 18 holes.)</p>
<p>Below is a summary of all of the components:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/components.png" /></p>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/MiniGolfBarcode.png" /></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/miniGolf/MiniGolf_MIT.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<pre class="ai-box"><span style="color:black;">Done with Mini Golf?</span> <a href="tutorials.html">Return to the other tutorials</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Sprites</li><li class="field-item odd">Clock Timer</li><li class="field-item even">Game</li></ul></section>  </div>

  
  
  <article id="article-466" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/space-invaders" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Space Invaders                  </h1>
      
      
    </header>
    <span property="dc:title" content="Space Invaders" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

.ButtonText {
color:green;
font-weight: bold;
}

li {
padding-bottom: 7px;
}

.basicblock {
border: 1px dashed #7AA81C;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.callblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.argblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.textblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.setblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

.controlblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

.listblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}


/*--><!]]>*/
</style><h4 class="ai-header">What You're Building</h4>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/app.png" style="float:right; height: 453px; width: 197px;" /></p>
<p> By building the <span style="color:green;">Space Invaders App</span> you will get practice with using Clock components and Timers, using Animation components such as Image Sprites and the Canvas, setting visibility, and detecting collisions in App Inventor. You'll program an application that has a shooter ship whose goal is to shoot all the flying saucers on the screen.</p>
<h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project. Name it <span style="color:green;">SpaceInvaders</span>, and also set the screen's <strong style="color:green;">Title</strong> to "SpaceInvaders". Connect to a device or emulator.</p>
<h4 class="ai-header">Introduction</h4>
<p>This tutorial introduces the following skills, useful for future game development:</p>
<ul><li>Using the Clock component</li>
<li>Using Clock.Timer to move sprites</li>
<li>Using Sprite.Flung to move a sprite </li>
<li>Using collision detection</li>
<li>Setting visibility of sprites</li>
</ul><h4 class="ai-header">Getting Ready</h4>
<p>For this game, you will have two types of sprites: an imagesprite represented by a shooter ship and flying saucers represented by a ball sprite. Click below to download the image files for your rocket ship sprite and flying saucer sprite.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/rocket.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/rocket.png" /></a><br /><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/saucer.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/saucer.png" /></a></p>
<h4 class="ai-header">Set up the Components</h4>
<p>Use the component designer to create the interface for <span style="color:green;">SpaceInvaders</span>. When you finish, it should look something like the snapshot below (more detailed instructions below the snapshot).</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/SpaceInvadersDesigner.png" /></p>
<p>To create this interface, put the following components into the Designer by dragging them from the Component Palette into the Viewer and set the properties of the components as described below:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
<td>
Action
</td>
</tr><tr><td><strong>Canvas</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">Canvas1</td>
<td>The background that we will be putting our sprites on</td>
<td>Change <span class="ButtonText">Width</span> property to "Fill parent" and <span class="ButtonText">Height</span> property to 300. Set the <span class="ButtonText">BackgroundColor</span> property to Black.</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">RocketSprite</td>
<td>The rocket ship in our game</td>
<td>Upload the rocketship image and set the <span class="ButtonText">Picture</span> property to "rocket.png". Set the <span class="ButtonText">Y</span> property to 230. This will place the rocket at the bottom of the canvas.</td>
</tr><tr><td><strong>ImageSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">SaucerSprite</td>
<td>The flying saucer in our game</td>
<td>Upload the saucer image and set the <span class="ButtonText">Picture</span> property to "saucer.png".</td>
</tr><tr><td><strong>BallSprite</strong></td>
<td>Drawing and Animation</td>
<td style="color:green;">Bullet</td>
<td>The bullet from the rocket ship.</td>
<td>Change <span class="ButtonText">PaintColor</span> to Green and set the <span class="ButtonText">Radius</span> property to 8.</td>
</tr><tr><td><strong>Clock</strong></td>
<td>User Interface</td>
<td style="color:green;">Clock1</td>
<td>We use the Clock for its Timer method to move the the saucer</td>
<td>Change <span class="ButtonText">TimerInterval</span> property to 3000.</td>
</tr><tr><td><strong>Horizontal Arrangement</strong></td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement1</td>
<td>To contain Label1 and ScoreLabel </td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green;">Label1</td>
<td>To contain the word "Score: "</td>
<td>Change <span class="ButtonText">Text</span> property to "Score: ".</td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green;">ScoreLabel</td>
<td>To contain the current numerical score</td>
<td>Change <span class="ButtonText">Text</span> property to "0".</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green;">ResetButton</td>
<td>To reset the game so the player can play again</td>
<td>Change <span class="ButtonText">Text</span> property to "Reset".</td>
</tr></table><p>Now that you have all the essential properties configured, feel free to change the colors of any components that you want to.</p>
<h4 class="ai-header">Moving the rocket </h4>
<p>In this game, the user will move the rocket from side to side. This means we will only be changing the X-direction of the rocket sprite. To do this we will use the <span class="eventblock">RocketSprite.Dragged</span> event handler. When the rocket is dragged, we will adjust it's X property to be the currentX that we dragged the sprite to.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/rocketdragged.png" /></p>
<p>Once you put these blocks together, connect your phone and test this feature out!</p>
<h4 class="ai-header">Programming the Bullet's Behavior</h4>
<p>There are several features we want our bullet to have in this game. We want it to shoot from the rocket, collide with the saucer, and be invisible after the collision and before being shot.</p>
<p>Let's start by using the <span class="eventblock">Screen1.initialize</span> block. When the screen is initialized, we will program the bullet to be invisible. We do this by setting the bullet's visibility property to False.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/invisiblebullet.png" /></p>
<p>Next, we want to make sure that the bullet appears again when we shoot from the rocket. When we touch the rocket, we want the bullet to start heading towards the saucer. We will do this by using the <span class="eventblock">RocketSprite.Touched</span> event handler. When the rocket is touched, we not only want to set the rocket to be visible, but we also want to set the speed and heading of the rocket. Heading is a value from 0 to 360 that indicates what direction the sprite should be moving towards. 0/360 is to the left, 90 is up, 180 is right, and 270 is down. The speed is measured in pixels/sec.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/usingthebullet.png" /></p>
<p>The last thing we need to program is what happens when the bullet hits the saucer. We will use the <span class="eventblock">Bullet.CollidedWith</span> event handler. This event is called whenever the bullet collides with another sprite. Since our rocket sprite is locked into a Y at the bottom of the screen, the bullet will never collide with the rocket and only with the saucer. On collision we want two things to happen. 1. The score should increase by 1. 2. The bullet should become invisible.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/bulletcollides.png" /></p>
<p>If you have started testing this game out, you may have noticed that once you shoot the bullet, it doesn't appear to let you shoot it again. We need to program the bullet to return to the place in front of the rocket when we shoot it. We can do this using the <span class="callblock">Bullet.MoveTo</span> block.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/movebullet.png" /></p>
<p>Now, test it out!</p>
<p>You may have noticed that if you miss the saucer, the bullet moves to the top of the screen and gets stuck there until you try shooting again. To make the bullet disappear when it hits the top edge of our canvas, we need to use the <span class="eventblock">Bullet.EdgeReached<span> event handler.</span></span></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/edgereached.png" /></p>
<h4 class="ai-header">Programming the Reset Button</h4>
<p>Sometimes, users might want to restart the game and reset their score. When this happens, we need to set the score back to 0.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/resetscore.png" /></p>
<h4 class="ai-header">Increasing the Difficulty -- Changing the Position of the Saucer</h4>
<p>Let's make the game a little more challenging! Now, when the bullet collides with the saucer, let's change the location of the saucer. The saucer will keep the same Y value so we'll only have to change the X. We can do this by using the random block.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/movesaucer.png" /></p>
<p>To make it even more difficult, we'll also change the position of the saucer when the Timer goes off.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/timer.png" /></p>
<h4 class="ai-header">Complete Program</h4>
<p>Here's the complete <strong>SpaceInvaders</strong> program.<br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/SpaceInvaders/completeprogram.png" /></p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Sprites</li><li class="field-item odd">Drawing Canvas</li><li class="field-item even">Game</li></ul></section>  </div>

  
  
  <article id="article-502" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/no-text-while-driving-ai2" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      No Text While Driving for AI2                  </h1>
      
      
    </header>
    <span property="dc:title" content="No Text While Driving for AI2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p><img style="float:right;width:25%;height:25%" src="http://www.appinventor.org/apps2/notext/hero.png" /><br />
This tutorial, available on our partner site Appinventor.org, will demonstrate how to respond to an incoming text by sending an automatic text response, and also using Text-to-Speech to read the message out loud. </p>
<p>The following link will open a new window and take you away from MIT's site.<br /><a href="http://www.appinventor.org/notext-steps">http://www.appinventor.org/notext-steps</a></p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">SMS Texting</li></ul></section>  </div>

  
  
  <article id="article-504" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/quizme" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      QuizMe for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="QuizMe for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><h4 class="ai-header">What you're building</h4>
<p><img src="http://beta.appinventor.mit.edu/learn/tutorials/quizme/QuizMeAssets/quizOnEmulator.png" style="float:right; height: 453px; width: 197px;" /></p>
<p><span style="color:green;">QuizMe</span> is a trivia game about baseball, but you can use it as a template to build quizzes on any topic. With <span style="color:green;">QuizMe</span>:</p>
<ul><li>The user steps through a series of questions, clicking a button to proceed to the next question.</li>
<li>The user enters an answer for each question and the app reports whether each answer is correct or not.</li>
</ul><p>With <span style="color:green;">QuizMe</span>, the quiz questions are always the same unless you, the programmer, change them. Later, you can create <a href="makequiztakequiz.html">MakeQuiz &amp; TakeQuiz</a>, an app that lets users of the app create and modify the quiz questions.</p>
<p>This tutorial assumes you are familiar with the basics of App Inventor -- using the Component Designer to build a user interface, and using the Blocks Editor to specify event-handlers. If you are not familiar with the basics, try stepping through some of the <a href="tutorials.html">basic tutorials</a> before continuing.</p>
<h4 class="ai-header">Getting Started</h4>
<p>Connect to the App Inventor web site and start a new project. Name it <span style="color:green;">QuizMe</span>, and also set the screen's <strong style="color:green;">Title</strong> to "QuizMe". Open the Blocks Editor and connect to the phone.</p>
<p>Also download the following pictures of baseball players and save them on your computer. Later, you'll load these images into your project.</p>
<ul><li><a href="http://beta.appinventor.mit.edu/learn/tutorials/quizme/QuizMeAssets/Larsenberra.jpg">Larsenberra.jpg</a></li>
<li><a href="http://beta.appinventor.mit.edu/learn/tutorials/quizme/QuizMeAssets/dallasbraden.jpg">Dallasbraden.jpg</a></li>
<li><a href="http://beta.appinventor.mit.edu/learn/tutorials/quizme/QuizMeAssets/cyyoung.jpg">Cyyoung.jpg</a></li>
<li><a href="http://beta.appinventor.mit.edu/learn/tutorials/quizme/QuizMeAssets/nolanryan.jpg">Nolanryan.jpg</a></li>
</ul><h4 class="ai-header">Introduction</h4>
<p>You'll design the quiz game so that the user proceeds from question to question by clicking a Next button, and receives simple correct/incorrect feedback on each answer.</p>
<p>This tutorial introduces:</p>
<ul><li>Defining and displaying lists of information.</li>
<li>Sequencing through a list using an index variable -- a variable that keeps track of a position in a list.</li>
<li>Conditional behaviors-- performing certain operations only when a condition is met.</li>
<li>Switching an image to show a different picture at different times.</li>
</ul><h4 class="ai-header">Set up the Components</h4>
<p>Use the component designer to create the interface for <span style="color:green;">QuizMe</span>. When you finish, it should look something like the snapshot below (there are also more detailed instructions below the snapshot).</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/designer.png" /></p>
<p>To create this interface, first load the images you downloaded into the project. Click on the "Upload File..." button in the Media area and select one of the downloaded files (e.g., Larsenberra.jpg). Then do the same for the other three images.</p>
<p>Next, create the following components by dragging them from the Palette into the Viewer and et the properties of the components as described below:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Action
</td>
<td>
Purpose of Component
</td>
</tr><tr><td>
<strong>Image</strong></td>
<td>User Interface</td>
<td style="color:green;">Image1</td>
<td>Set its <span class="ButtonText">Picture</span> property to "Larsenberra.jpg". This is the first picture that should appear.</td>
<td>The picture part of the question</td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green;">QuestionLabel</td>
<td>Change <span class="ButtonText">Text</span> property to "Question:"</td>
<td>Displays the current question</td>
</tr><tr><td><strong>HorizontalArrangement</strong></td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement1</td>
<td></td>
<td>Organizes the AnswerPrompt and Text</td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green;">AnswerPromptLabel</td>
<td>Change <span class="ButtonText">Text</span> property to "Enter Answer:". On the Viewer screen, move this label into <span style="color:green;">HorizontalArrangement1</span>.</td>
<td>Text prompting for an anwer</td>
</tr><tr><td><strong>TextBox</strong></td>
<td>User Interface</td>
<td style="color:green;">AnswerText</td>
<td>Change <span class="ButtonText">Hint</span> to "Please Enter an Answer". On the Viewer screen, move <span style="color:green;">AnswerText</span> into <span style="color:green;">HorizontalArrangement1</span>.</td>
<td>User will enter answer here.</td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green;">RightWrongLabel</td>
<td>Change <span class="ButtonText">Text</span> property to "Correct/Incorrect".</td>
<td>Correct/Incorrect is displayed here.</td>
</tr><tr><td><strong>HorizontalArrangement</strong></td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement2</td>
<td></td>
<td>Organizes the AnswerButton and NextButton</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green;">AnswerButton</td>
<td>Change <span class="ButtonText">Text</span> property to "Submit". On the Viewer, move the button into <span style="color:green;">HorizontalArrangment2.</span></td>
<td>User clicks to submit an answer</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green;">NextButton</td>
<td>Change <span class="ButtonText">Text</span> property to "Next". Move the button into <span style="color:green;">HorizontalArrangement2</span>.</td>
<td>User clicks to proceed to the next answer</td>
</tr></table><h4 class="ai-header">Add Behaviors to the Components</h4>
<p>Open the Blocks Editor to add the behaviors for the app. First, you'll define two list variables, <span style="color:green;">QuestionList</span> to hold the list of questions, and <span style="color:green;">AnswerList</span> to hold the list of corresponding answers.</p>
<p>To define the two list variables, you'll need the following blocks:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="variableblock-ai2">initialize global name to</span></td>
<td>Variables</td>
<td>Defines the <span style="color:green;">QuestionList</span> variable (rename it)</td>
</tr><tr><td><span class="variableblock-ai2">initialize global name to</span></td>
<td>Variables</td>
<td>Defines the <span style="color:green;">AnswerList</span> variable (rename it)</td>
</tr><tr><td><span class="listblock-ai2">make a list</span></td>
<td>Lists</td>
<td>Used to insert the items of the <span style="color:green;">QuestionList</span></td>
</tr><tr><td><span class="textblock-ai2">"  "</span> (3 of them)</td>
<td>Text</td>
<td>The actual questions</td>
</tr><tr><td><span class="listblock-ai2">make a list</span></td>
<td>Lists</td>
<td>Used to insert the items of the <span style="color:green;">AnswerList</span></td>
</tr><tr><td><span class="textblock-ai2">"  "</span> (3 of them)</td>
<td>Text</td>
<td>The actual answers</td>
</tr></table><p>You create global variables by dragging in a <span class="variableblock-ai2">initialize global name to</span> block from the Variables drawer and double-clicking the default name "name" to change its name. The <span class="variableblock-ai2">initialize global name to</span> block has a slot for the initial value of the variable. The variable can represent a number or text, or even a list, for which you can plug in a <span class="listblock-ai2">make a list</span> block into the variable definition.</p>
<p>The blocks should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/QuestionListAnswerList.png" /></p>
<h4 class="ai-header">Define the Hidden Index Variable</h4>
<p>Each time the user clicks the <span style="color:green;">NextButton</span> to proceed through the quiz, the app needs to remember which question it is on. In programming, to remember something, you define a new variable.  In this case, the app needs to remember the current question number -- the index into the list <span style="color:green;">QuestionList</span>.</p>
<p>To create the variable <span style="color:green;">currentQuestionIndex</span>, you'll need the following blocks:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="variableblock-ai2">initialize global name to</span></td>
<td>Variables</td>
<td>Defines the <span style="color:green;">currentQuestionIndex</span> variable (rename it)</td>
</tr><tr><td><span class="mathblock-ai2">0</span> (1)</td>
<td>Math</td>
<td>Set the initial value of <span style="color:green;">currentQuestionIndex</span> to 1 (renumber it)</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/index.png" /></p>
<h4 class="ai-header">Display the first question</h4>
<p>To start, you'll ignore the answers and just work on the behavior to sequence through the questions. The desired behavior is the following: when the app starts, the first question should appear in the label named <span style="color:green;">QuestionLabel</span>. When the user clicks the <span style="color:green;">NextButton</span>, the second question should appear. When the user clicks again, the third should appear. When the last question is reached, clicking the <span style="color:green;">NextButton</span> should result in the first question once again appearing in the <span color="color:green;">QuestionLabel</span>.</p>
<pre class="ai-box">With App Inventor, you select particular items in a list with the <span class="listblock-ai2">select list item</span> block. The block asks you to specify the list and an index--a position in the list. If a list has three items, the indexes 1, 2, and 3 are valid.</pre><p>For <span style="color:green;">QuizMe</span>, when the app starts, the app should choose the first question in the list and display it in the <span style="color:green;">QuestionLabel</span> component.</p>
<p>For this app initialization behavior, you'll need the following blocks:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="controlblock-ai2">when Screen1.Initialize</span></td>
<td>Screen1</td>
<td>When the app begins, this event-handler is triggered.</td>
</tr><tr><td><span class="setcomponent-ai2">set QuestionLabel.Text to</span></td>
<td>QuestionLabel</td>
<td>Need to put the first question in <span style="color:green;">QuestionLabel</span></td>
</tr><tr><td><span class="listblock-ai2">select list item</span></td>
<td>Lists</td>
<td>Need to select the first question from <span style="color:green;">QuestionLabel</span></td>
</tr><tr><td><span class="variableblock-ai2">get </span></td>
<td>Variables</td>
<td>The list to select from. Select "global QuestionList"</td>
</tr><tr><td><span class="mathblock-ai2">0</span> (1)</td>
<td>Math</td>
<td>Select the first question by using an index of 1. Set the value to be 1.</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/screenInit.png" /></p>
<h4 class="ai-header">How the blocks work</h4>
<p>The <span class="controlblock-ai2">when Screen1.Initialize</span> event is triggered when the app begins. The first item of the variable <span style="color:green;">QuestionList</span> is selected and placed into <span class="setcomponent-ai2">set QuestionLabel.Text</span>. So when the app begins, the user will see the first question.</p>
<pre class="ai-testing"><strong style="color:black;">Test this behavior.</strong> Click <span style="color:black;">Connect Phone</span> if your phone is not already connected. What appears on the phone? If you created the <span style="color:black;">QuestionList</span> as described above, the first item of <span style="color:black;">QuestionList</span>, "Who pitched a perfect game in the World Series?", should appear in the <span style="color:black;">QuestionLabel</span>.</pre><h4 class="ai-header">Iterating Through the Questions</h4>
<p>Now program the behavior of the <span style="color:green;">NextButton</span>. You've already defined the <span class="variableblock-ai2">currentQuestionIndex</span> to remember the question the user is on. When <span style="color:green;">NextButton</span> is clicked, the app needs to increment this variable, e.g., change it from 1 to 2 or from 2 to 3, etc., and then use the resulting value to select the new "current" question. For this behavior, you'll need the following blocks:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="controlblock-ai2">when NextButton.Click</span></td>
<td>NextButton</td>
<td>When user clicks Next, this event-handler is triggered.</td>
</tr><tr><td><span class="variableblock-ai2">set currentQuestionIndex to</span></td>
<td>Variables</td>
<td>Need to put the first question in <span style="color:green;">QuestionLabel</span></td>
</tr><tr><td><span class="mathblock-ai2"> + </span></td>
<td>Math</td>
<td>Used to increment <span style="color:green;">currentQuestionIndex</span></td>
</tr><tr><td><span class="variableblock-ai2">get global currentQuestionIndex</span></td>
<td>Variables</td>
<td>New value will be old value + 1</td>
</tr><tr><td><span class="mathblock-ai2">0</span> (1)</td>
<td>Math</td>
<td>For the + 1</td>
</tr><tr><td><span class="setcomponent-ai2">set QuestionLabel.Text to</span></td>
<td>QuestionLabel</td>
<td>Need to display the next question here</td>
</tr><tr><td><span class="listblock-ai2">select list item</span></td>
<td>Lists</td>
<td>Need to select the first question from <span style="color:green;">QuestionList</span></td>
</tr><tr><td><span class="variableblock-ai2">get global QuestionList</span></td>
<td>Variables</td>
<td>Plug into <span style="color:green;">list</span> slot of call select list item</td>
</tr><tr><td><span class="variableblock-ai2">get global currentQuestionIndex</span></td>
<td>Variables</td>
<td>Plug into <span style="color:green;">index</span> slot of call select list item, we want nth item</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/firstNext.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The first row of blocks increments the variable <span style="color:green;">currentQuestionIndex</span>. If <span style="color:green;">currentQuestionIndex</span> has a 1 in it, it is changed to 2. If it has a 2, it is changed to 3, and so on. Once the <span style="color:green;">currentQuestionIndex</span> variable has been changed, the app uses it to select the "current" question.</p>
<p>Recall that in the <span class="controlblock-ai2">Screen.Initialize</span> event-handler, the app selected the first question to display:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/selectFirst.png" /></p>
<p>When the <span style="color:green;">NextButton</span> is clicked, the app doesn't choose the first item in the list, or the 2nd or 3rd, it chooses the <span class="variableblock-ai2">currentQuestionIndex</span>-th item.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/chooseCurrent.png" /></p>
<p>The blocks are executed in a right-to-left manner. The app first evaluates the index parameter of <span class="listblock-ai2">select list item</span>, which is the variable <span style="color:green;">currentQuestionIndex</span>. The number is stored in <span style="color:green;">currentQuestionIndex</span> is used as the index when the select list item is executed.</p>
<p>When the <span style="color:green;">NextButton</span> is clicked for the first time, the increment blocks will set <span style="color:green;">currentQuestionIndex</span> from 1 to 2, so the app will select the second item from <span style="color:green;">QuestionList</span>, "who pitched the first perfect game of 2010?". The second time <span style="color:green;">NextButton</span> is clicked, <span style="color:green;">currentQuestionIndex</span> will be set from 2 to 3, and the app will select the 3rd question in the list, "who pitched the first perfect game of the modern era?"</p>
<pre class="ai-testing"><strong style="color:black;">Test this behavior.</strong> Test the behavior of the <span style="color:black;">NextButton</span> to see if the app is working correctly thus far. To test, play the role of the user and click the <span style="color:black;">NextButton</span> on the phone. Does the phone display the second question, "Who pitched the first perfect game of 2010?" It should, and the third question should appear when you click the <span style="color:black;">NextButton</span> again. If this is working, pat yourself on the back quickly, and then go on.

Try clicking the <span style="color:black;">NextButton</span> again (a third time). You should see an error: "Attempting to get item 4 of a list of length 3". The app has a bug-- do you know what the problem is?</pre><p>The problem with the app is that it always increments the <span style="color:green;">currentQuestionIndex</span> variable when the <span style="color:green;">NextButton</span> is clicked.  When <span style="color:green;">currentQuestionIndex</span> is already 3 and the user clicks the <span style="color:green;">NextButton</span>, the app changes <span style="color:green;">currentQuestionIndex</span> from 3 to 4, then calls select list item to get the <span style="color:green;">currentQuestionIndex</span>-th , or in this case, the 4th item. Since there are only three items in the variable <span style="color:green;">QuestionList</span>, Android complains.</p>
<p>What the app needs to do is ask a question-- check a condition-- when the <span style="color:green;">NextButton</span> is clicked, and execute different blocks dependending on the answer. One way to ask the question is to ask, "is the variable <span style="color:green;">currentQuestionIndex</span> already 3?" If the answer is yes, you should set <span style="color:green;">currentQuestionIndex</span> back to 0 so the user is taken back to the first question.</p>
<p>You'll need the following blocks:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="controlblock-ai2">if then</span></td>
<td>Control</td>
<td>To ask if user is on last question</td>
</tr><tr><td><span class="mathblock-ai2"> = </span></td>
<td>Math</td>
<td>to test if <span class="listblock">currentQuestionIndex</span> is 3</td>
</tr><tr><td><span class="variableblock-ai2">get global currentQuestionIndex</span></td>
<td>Variables</td>
<td>-</td>
</tr><tr><td><span class="mathblock-ai2"> 0 </span> (3)</td>
<td>Math</td>
<td>3 is number of items in the list</td>
</tr><tr><td><span class="variableblock-ai2">set currentQuestionIndex to</span></td>
<td>Variables</td>
<td>set to 0 to go back to first question</td>
</tr><tr><td><span class="mathblock-ai2">0</span></td>
<td>Math</td>
<td>set to 0 because next blocks will increment to 1</td>
</tr></table><p>The modified <span class="controlblock-ai2">when NextButton.Click</span> event-handler should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/nextif3.png" /></p>
<h4 class="ai-header">How the blocks work</h4>
<p>When the <span style="color:green;">NextButton</span> is clicked, the app first checks to see if <span style="color:green;">currentQuestionIndex</span> has a 3 in it. If it does, <span style="color:green;">currentQuestionIndex</span> is set back to 0 so that when 1 is added to it with the blocks below, it will be 1 and the quiz will loop back to display the first question. Note that only the blocks inset within the <span class="controlblock-ai2">if-then</span> block are dependent on the condition-- the increment and set <span class="setcomponent-ai2">set QuestionLabel.Text to</span> blocks are executed under all conditions.</p>
<h4 class="ai-header">A Maintainable App: Making it Easy to Modify the Questions</h4>
<p>Next, you'll modify the app to make it easy to add and remove elements from the list. You'll rewrite the blocks so that they'll work on any list, not just one with exactly three items. To begin, add a fourth question to <span style="color:green;">QuestionList</span> and another answer into <span style="color:green;">AnswerList</span>. To do this, you will first need to expand the number of available slots by using the mutator. For more information on how to use the mutator, <a href="http://appinventor.mit.edu/explore/ai2/support/concepts/mutators">click here</a>. The blocks should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/listsWith4.png" /></p>
<pre class="ai-testing"><strong style="color:black;">Test the modified app.</strong> Click the <span style="color:black;">NextButton</span> a number of times. You should see that the fourth question never appears, no matter how many times you click <span style="color:black;">Next</span>.</pre><p>The problem is that the test to see if the user is on the last question is too specific: it asks if the <span style="color:green;">currentQuestionIndex</span> variable is 3:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/if3.png" /></p>
<p>You could just change the number 3 to a 4, and the app would again work correctly. The problem with this solution, however, is that each time you modify the questions and answers, you also have to remember to make this change. Such dependencies in a computer program often lead to bugs, especially as an app grows in complexity. It's much better to set the program up so that it will work no matter how many questions there are. Such generality is even more important when the list you are working with changes dynamically, e.g., a quiz app that allows the user to add new questions.</p>
<p>The better solution is to ask the question in a more general way. You really want to know if the current question the user is on-- the value of <span style="color:green;">currentQuestionIndex</span> -- is as large as the number of items in <span style="color:green;">QuestionList</span>. If the app asks the question in this more general manner, it will work even when you add to or remove items from the <span style="color:green;">QuestionList</span>. To modify the <span class="controlblock-ai2">when NextButton.Click</span> event-handler you'll replace the previous test that referred directly to 3. You'll need the following blocks:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="listblock-ai2">length of list</span></td>
<td>Lists</td>
<td>asks how many items are in <span style="color:green;">QuestionList</span></td>
</tr><tr><td><span class="variableblock-ai2">get global QuestionList</span></td>
<td>Variables</td>
<td>put into list slot of <span class="listblock-ai2">length of list</span></td>
</tr></table><p>Your <span class="controlblock-ai2">when NextButton.Click</span> event-handler should now appear as:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/nextWithLength.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The <span class="controlblock-ai2">if</span> now compares the <span style="color:green;">currentQuestionIndex</span> to the length of the <span style="color:green;">QuestionList</span>. So if <span style="color:green;">currentQuestionIndex</span> has a 4 in it, and the length of the <span style="color:green;">QuestionList</span> is 4, then the <span style="color:green;">currentQuestionIndex</span> will be set to 0 (and then 1 after the increment operation in the first row of blocks after the if). Note that, because the blocks no longer refer to 3 or any specific size, the behavior will work no matter how many items are in the list.</p>
<pre class="ai-testing"><strong style="color:black;">Test the modified behavior.</strong> When you click the <span style="color:black;">NextButton</span>, does the app now sequence through the four questions, moving to the first one after the fourth?</pre><h4 class="ai-header">Switching the Image for Each Question</h4>
<p>The current app shows the same image, no matter what question is being asked. You can change this so an image pertaining to each question appears when the <span style="color:green;">NextButton</span> is clicked. Earlier, you added four pictures as media for the project. Now, you'll create a third list, <span style="color:green;">PictureList</span>, with the names of the image files as its items. and you'll modify the <span class="controlblock-ai2">when NextButton.Click</span> event-handler to switch the picture each time.</p>
<p>First, create a <span style="color:green;">PictureList</span> and initialize it with the names of the image files. Be sure that the names are exactly the same as the names of the files that were loaded in to the media of the project. Here's how the blocks for the <span style="color:green;">PictureList</span> should look:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/pictureList.png" /></p>
<p>Next, you need to modify the <span class="controlblock-ai2">when NextButton.Click</span> event-handler so that it modifies the picture depending on what question the user is on. If you set the <strong style="color:green;">Image.Picture</strong> property to a file name of an image that has been loaded, that image will appear. To modify <span class="controlblock-ai2">when NextButton.Click</span>, you'll need the following blocks:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="setcomponent-ai2">set Image1.Picture to</span></td>
<td>Image1</td>
<td>set this to change the picture</td>
</tr><tr><td><span class="listblock-ai2">select list item</span></td>
<td>Lists</td>
<td>need to select the picture corresponding to current question</td>
</tr><tr><td><span class="variableblock-ai2">get global PictureList</span></td>
<td>Variables</td>
<td>select a file name from this list</td>
</tr><tr><td><span class="variableblock-ai2">get global currentQuestionIndex</span></td>
<td>Variables</td>
<td>select the <span style="color:green;">currentQuestionIndex</span>-th item</td>
</tr></table><p>Here is how the blocks should look:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/nextWithImageSwitch.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The <span style="color:green;">currentQuestionIndex</span> serves as the index for the <span style="color:green;">QuestionList</span> and the <span style="color:green;&gt;PictureList&lt;/span&gt;. When &lt;span style=" color:green="">currentQuestionIndex</span> is 1, the app selects the first question and the first picture. When <span style="color:green;">currentQuestionIndex</span> is 2, the app selects the second question and second picture. Of course this scheme depends on the lists being in sync and indeed they are. For instance, the first picture, LarsenBerra.jpg, is a picture of Don Larsen, and Don Larsen is the answer to the first question, "Who pitched a perfect game in the World Series?" Test the modified behavior. Does a different image appear each time you click the <span style="color:green;">NextButton</span>?</p>
<h4 class="ai-header">Evaluating Answers</h4>
<p>Next, you'll add blocks that report whether the user has answered a question correctly or not. The user enters the answer in <span style="color:green;">AnswerText</span> and then clicks the <span style="color:green;">AnswerButton</span>. The app must compare the user's entry with the answer to the "current" question, using an <span class="controlblock-ai2">if then</span> block to check. The <span style="color:green;">RightWrongLabel</span> should be modified to report whether or not the answer is correct. You'll need the following blocks for this behavior:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="controlblock-ai2">when AnswerButton.Click</span></td>
<td>AnswerButton</td>
<td>the behavior is triggered when user clicks the <span style="color:green;">AnswerButton</span></td>
</tr><tr><td><span class="controlblock-ai2">if then</span></td>
<td>Control</td>
<td>Use the mutator to add an else. If answer is correct, do one thing, else do another</td>
</tr><tr><td><span class="mathblock-ai2"> = </span></td>
<td>Math</td>
<td>to ask if answer is correct</td>
</tr><tr><td><span class="getcomponent-ai2">AnswerText.Text</span></td>
<td>AnswerText</td>
<td>the user's answer is in this textbox</td>
</tr><tr><td><span class="listblock-ai2">select list item</span></td>
<td>Lists</td>
<td>to select the current answer from <span style="color:green;">AnswerList</span></td>
</tr><tr><td><span class="variableblock-ai2">get global AnswerList</span></td>
<td>Variables</td>
<td>The list to select from</td>
</tr><tr><td><span class="variableblock-ai2">get global currentQuestionIndex</span></td>
<td>Variables</td>
<td>the question number (and answer number) the user is on</td>
</tr><tr><td><span class="setcomponent-ai2">set RightWrongLabel.Text to</span></td>
<td>RightWrongLabel</td>
<td>report the answer here</td>
</tr><tr><td><span class="textblock-ai2">" "</span> "Correct!"</td>
<td>Text</td>
<td>if answer is right</td>
</tr><tr><td><span class="setcomponent-ai2">set RightWrongLabel.Text to</span></td>
<td>RightWrongLabel</td>
<td>report the answer here</td>
</tr><tr><td><span class="textblock-ai2">" "</span> "Incorrect"</td>
<td>Text</td>
<td>if answer is wrong</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/answerButton.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>The <span class="controlblock-ai2">if</span> test reads, "is the user's answer (<strong style="color:green;">AnswerText.Text</strong>) equal to the <span style="color:green;">currentQuestionIndex</span>-th item in the <span style="color:green;">AnswerList</span>?" If <span style="color:green;">currentQuestionIndex</span> is 1, the app will compare the user's answer with the first item in <span style="color:green;">AnswerList</span>, "Don Larsen". If <span style="color:green;">currentQuestionIndex</span> is 2, the app will compare the user's answer with the second answer in the list, "Dallas Braden", and so on. If the test result is positive, the <span class="controlblock-ai2">then</span> blocks are executed and the <span style="color:green;">RightWrongLabel</span> is set to "Correct!". If the test is false, the <span class="controlblock-ai2">else</span> blocks are executed and the <span style="color:green;">RightWrongLabel</span> is set to "Incorrect".</p>
<pre class="ai-testing"><strong style="color:black;">Test the modified app.</strong> Try answering one of the questions. It should report whether or not you answered the question exactly as is specified in the <span style="color:black;">AnswerList</span>. Test with both a correct and incorrect answer (because text is being compared, the test is case-sensitive).

Click the <span style="color:black;">NextButton</span> and answer a second question. Does it still work? It should, but you might notice that when you click the <span style="color:black;">NextButton</span>, the "correct"/"incorrect" text and the previous answer are still there. Though it's fairly innocuous, such user interface issues will definitely be noticed by the users of your app.</pre><p>To blank out the <span style="color:green;">RightWrongLabel</span> and the <span style="color:green;">AnswerText</span>, you'll put the following blocks within the <span class="controlblock-ai2">when NextButton.click</span> event-handler:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Block Type</td>
<td>Drawer</td>
<td>Purpose</td>
</tr><tr><td><span class="setcomponent-ai2">set RightWrongLabel.Text to</span></td>
<td>RightWrongLabel</td>
<td>the label to blank out</td>
</tr><tr><td><span class="textblock-ai2">" "</span></td>
<td>Text</td>
<td>When <span style="color:green;">Next</span> is clicked, erase old answer critique</td>
</tr><tr><td><span class="setcomponent-ai2">set AnswerText.Text to</span></td>
<td>AnswerText</td>
<td>the user's answer from previous question</td>
</tr><tr><td><span class="textblock-ai2">" "</span></td>
<td>Text</td>
<td>When <span style="color:green;">Next</span> is clicked, erase old answer</td>
</tr></table><p>The blocks should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/nextButtonFinal.png" /></p>
<h4 class="ai-header">How the Blocks Work</h4>
<p>When the <span style="color:green;">NextButton</span> is clicked, the user is moving on to the next question, so the top two rows of the event-handler blank out the <span style="color:green;">RightWrongLabel</span> and the <span style="color:green;">AnswerText</span>.</p>
<pre class="ai-testing"><strong style="color:black;">Test this behavior.</strong> Answer a question and click <span style="color;black;">Submit</span>, then click the <span style="color:black;">NextButton</span>. Does your previous answer and the apps critique disappear?</pre><h4 class="ai-header">Final Program</h4>
<p><strong><span style="color:green;">QuizMe</span>! Final Version:</strong></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/quizmeFinal.png" /></p>
<p>Package the final version of the app by choosing <strong>Build | App (provide QR code for .apk)</strong> from the Component Designer menu. When the barcode appears, use the barcode scanner on your phone to download and install the app.</p>
<h4 class="ai-header">Variations</h4>
<p>Once you get a quiz working, you might want to explore some variations. For example,</p>
<ul><li>Instead of just showing images for each question, try playing a sound clip or a short video. With sound, you can turn your quiz app into a <span style="color:green;">Name That Tune</span> app.</li>
<li>The quiz is very rigid in terms of what is accepted as a valid answer. There are a number of ways to modify this. One is to use the text.contains block to see if the user's answer is contained in the actual answer. Another is to provide multiple answers for each question, and check by iterating (using <span class="controlblock-ai2">for each</span>) through them to see if any match.</li>
<li>Transform the quiz so that it is multiple-choice. The list of answers will need to be a list of lists, with each sub-list holding the answer choices. Use the <strong>ListPicker</strong> component to allow the user to choose an answer.</li>
</ul><h4 class="ai-header">Review</h4>
<p>Here are some of the ideas covered in this tutorial:</p>
<ul><li>Apps can be written in a general manner so that they work with any data list.</li>
<li>Index variables are used to track the current position within a list. When you increment them, be careful about reaching the end of the list.</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app. (or tap on the barcode if you're viewing this webpage on an Android device)
</p><p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/QuizMe_MIT.apk"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/QuizMeBarcode.png" /></a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/QuizMe/QuizMe_MIT.aia">source code</a> to your computer, then open App Inventor, go to the My Projects page, and choose <b>Project | Import project (.aia) from my computer ...</b>.</p>
<pre class="ai-box">MIT and Google are grateful to <a href="http://www.appinventor.org/">Professor David Wolber</a>, CS Professor at The University of San Francisco, for developing this tutorial.

Done with <span style="color:black;">QuizMe</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre><style></style></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section>  </div>

  
  
  <article id="article-505" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/file-sharing" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Sharing Component: send files and text with the app of your choice                  </h1>
      
      
    </header>
    <span property="dc:title" content="Sharing Component: send files and text with the app of your choice" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>In this <strong>3-minute video</strong>, App Inventor Developer José Dominguez shows you how to use the File Sharing component to share text and/or files from your App Inventor app to any capable service on your device (e.g. Gmail, Twitter, G+, WhatsApp, Messaging, etc.).</p>
<p><a href="http://www.youtube.com/embed/fCdxtYj09Zw" rel="lightframe[|width:760px; height:480px;]"><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/file_sharing_screenshot.png" /></a></p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">File Sharing</li></ul></section>  </div>

  
  
  <article id="article-584" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/photo-booth-app" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Photo Booth App                  </h1>
      
      
    </header>
    <span property="dc:title" content="Photo Booth App" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>This tutorial demonstrates how to develop a Photo Booth app. You’ll build an app that let’s you take pictures, assign pictures to canvases and share pictures via email. </p>
<p>
<a href="https://docs.google.com/document/d/1trt9smFfyiztdVoaq5ONaOM8GWOMoSFxTRJ7Eyyajuw/pub">Go to Photo Booth app</a>
</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Camera</li></ul></section>  </div>

  
  
  <article id="article-759" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/lego-%C2%AE-ev3-tilt-drive" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      LEGO ®  EV3 Tilt-to-Drive Tutorial                  </h1>
      
      
    </header>
    <span property="dc:title" content="LEGO ®  EV3 Tilt-to-Drive Tutorial" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>This tutorial lets you make an app that drives around an EV3 LEGO robot by tilting a phone or tablet. Tilting forward makes the bot go forward, back --&gt; back, right --&gt; right, left --&gt;left. A steeper pitch will make the robot drive faster… etc.<br /><br /><a href="https://docs.google.com/document/d/1KZF1785Kan2ZKHY90114lIXzhn-5SOX3g21h03fHRnA/edit?usp=sharing">Go to tutorial</a>. </p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Intermediate</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">LEGO® EV3</li></ul></section>  </div>

  
  
  <article id="article-380" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/colored-dots" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Colored Dots for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Colored Dots for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><style>
<!--/*--><![CDATA[/* ><!--*/

li {
padding-bottom: 7px;
}

.basicblock {
border: 1px dashed #7AA81C;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.callblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.argblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.textblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color:black;
font-size: 9pt;
text-wrap: suppress;

}

.setblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

.controlblock {
border: 1px dashed #000000;
padding-left: 4px;
padding-right: 4px;
padding-top: 1px;
padding-bottom: 1px;
background-color: black;
font-size: 9pt;
text-wrap: suppress;
}

/*--><!]]>*/
</style><div align="center">
<h3 style="background-color:black;margin:10px;">This is an App Inventor 2 Tutorial (Need the <a href="http://appinventor.mit.edu/explore/content/colored-dots.html">App Inventor Classic version</a>?)</h3>
</div>
<h2 class="ai-header"><span style="color:green;">Colored Dots</span>: Creating Apps with Multiple Screens</h2>
<p>This tutorial shows how to create apps that have multiple screens. In App Inventor, you can have a screen open a second screen. Later, the second screen can return to the screen that opened it. You can have as many screens as you like, but each screen closes by returning to the screen that opened it. The screens can share information by passing and returning values when they open and close. The screens also share the same TinyDB data, which they can use to store and share values.</p>
<p>Building an app with multiple screens is a lot like creating several individual apps. Every screen that you create has its own components in the Designer window. In the Blocks Editor, you will be able to see only the components of the screen currently selected in the Designer. Similarly, the blocks of code related to a screen cannot refer to blocks of code in another screen.</p>
<p>This program, ColoredDots, has two screens. ColoredDots is similar to <a href="paintpot-part1.html">PaintPot</a>, but it uses a second screen to let the user create new colors by providing numerical values for the red, green, and blue color composition (RGB). In the PaintPot app, a user can only paint with one of the three predefined colors. Adding more colors to Paintpot would have required new buttons on the screen, reducing the amount of space available for painting. In ColoredDots, the new color is chosen on a second screen called Brush_Picker. Once a new color has been created in this second screen, its value is passed back to the first screen. You can also save and name the colors you create in the second screen, then use the saved colors later when painting. By using ListPicker to store the colors you create, it eliminates the need for the user to remember the name of the color they saved and spell it correctly in accessing it again. This makes the database of stored colors more accessible, making it easier to share the app among a group of people.</p>
<p>Here are the two screens for the ColoredDots app:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/tutorials/coloredDots/brush_picker.png" style="float:right;" /></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/tutorials/coloredDots/screen1.png" /></p>
<h4 class="ai-header">Objectives</h4>
<p>By the end of this tutorial, you should have a understanding of:</p>
<ul><li>How to make an app with multiple screens.</li>
<li>How to pass values from one screen to another via <b>TinyDB</b>.</li>
<li>How to fill and use the <b>ListPicker</b> element.</li>
</ul><h4 class="ai-header">Building the Main Screen (Screen1)</h4>
<p>You start building a multiscreen app by creating a new project, just as with any other app. As usual, App Inventor automatically creates the main screen and names it <b>Screen1</b> and you can add components. Here's the Designer and the Components panel when all the components for <b>Screen1</b> have been added.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/viewer.png" /></p>
<p>The components are:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
<td>
Component Settings
</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">TitleLabel</td>
<td>Shows the title "Paint with Colored Dots"</td>
<td>Change Properties to FontBold and set FontSize to 16, TextAlignment to center, and Width to Fill parent</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement1</td>
<td>Holds the following 4 labels:</td>
<td>Set Width to Fill Parent and AlignHorizontal to Center</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">ColorLabel</td>
<td>Shows the text "Current Color"</td>
<td></td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">ColorSample</td>
<td>Blank label whose background color is the current color which we initialize to be black</td>
<td></td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">DotSizeLabel</td>
<td>Shows the text "Dot size"</td>
<td></td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">DotSizeValue</td>
<td>Shows the current dot size. We will initialize this to 3.</td>
<td></td>
</tr><tr><td>
<b>Canvas</b>
</td>
<td>Drawing and Animation</td>
<td style="color:green;">Canvas1</td>
<td>Shows dots at the places you touch</td>
<td>Set the width to Fill parent and the height to 300 pixels</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement2</td>
<td>Holds the following 2 Buttons and ListPicker</td>
<td>Set Width to Fill Parent and AlignHorizontal to Center</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">EraseButton</td>
<td>Clears the canvas</td>
<td>Set Text to "Erase"</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">openBrushPicker</td>
<td>Launches the second screen</td>
<td>Set Text to "Customize Brush"</td>
</tr><tr><td>
<b>ListPicker</b>
</td>
<td>User Interface</td>
<td style="color:green;">ListPicker1</td>
<td>Loads the list of colors from the data base</td>
<td>Set Text to "Stored Colors"</td>
</tr><tr><td>
<b>TinyDB</b>
</td>
<td>Storage</td>
<td style="color:green;">TinyDB1</td>
<td>Stores color names and values</td>
<td></td>
</tr></table><p>We'll look at the blocks for <b>Screen1</b> below. But first let's add the other screen.</p>
<h4 class="ai-header">Adding a second screen</h4>
<p>To add a new screen to your app, click the Add Screen button in the top toolbar of the Designer window. A dialog window will appear, in which you can provide a name for the new screen.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/newscreen.png" style="float:right; width:250px;" /></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/addScreen.png" style="width:400px;" /></p>
<pre class="ai-box"><b>Note:</b> You should make the name of the new screen something meaningful when you add it. Do that now, because once a screen has been added, its name cannot be changed -- the Rename button for the screen component itself is disabled -- it's good to have meaningful names for the parts of your program. One limitation here is that <b>Screen1</b> cannot be renamed. Remember also that the screen's title (shown in the title bar when the app is running) is different from its name. You can change the screen title in the Properties pane.</pre><p>When you create a new screen, the Designer window switches to display it. Initially there will be no components, just like with a new app, and you add new components by dragging them from the Palette, just as with any screen. Here's the Designer window for the second screen, named <b>Brush_Picker</b>, after the components have been added. Notice that <b>Brush_Picker</b> is selected in the dropdown on the top bar outlined in red. This is because it is the current screen.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/brush_designer.jpg" /></p>
<p>The components for the brush picker screen are:</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
<td>
Component Settings
</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">RedLabel</td>
<td>Shows the text "Red"</td>
<td></td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>User Interface</td>
<td style="color:green;">Red</td>
<td>For entering the amount of red in the color (0-255)</td>
<td>Set NumbersOnly</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">RedHorizontalArrangement</td>
<td>Holds RedLabel and Red TextBox</td>
<td></td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">BlueLabel</td>
<td>Shows the text "Blue"</td>
<td></td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>User Interface</td>
<td style="color:green;">Blue</td>
<td>For entering the amount of blue in the color (0-255)</td>
<td>Set NumbersOnly</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">BlueHorizontalArrangement</td>
<td>Holds BlueLabel and Blue TextBox</td>
<td></td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">GreenLabel</td>
<td>Shows the text "Green"</td>
<td></td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>User Interface</td>
<td style="color:green;">Green</td>
<td>For entering the amount of green in the color (0-255)</td>
<td>Set NumbersOnly</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">GreenHorizontalArrangement</td>
<td>Holds GreenLabel and Green TextBox</td>
<td></td>
</tr><tr><td>
<b>VerticalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">VerticalArrangement1</td>
<td>Holds Color HorizontalArrangements</td>
<td></td>
</tr><tr><td>
<b>Canvas</b>
</td>
<td>Drawing and Animation</td>
<td style="color:green;">Canvas1</td>
<td>Displays the size and color of the test color</td>
<td>Set Width and Height to Fill parent</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement1</td>
<td>Holds VerticalArrangement1 and Canvas1</td>
<td>Set Width to Fill parent</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">DotRadius</td>
<td>Shows the text "Dot Size"</td>
<td></td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>User Interface</td>
<td style="color:green;">RadiusTextBox</td>
<td>Shows the current dot size</td>
<td>Set NumbersOnly</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">RadiusHorizontalArrangement</td>
<td>Holds DotRadius and RadiusTextBox</td>
<td></td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">TestColorButton</td>
<td>Press to create the new color and prompts the user to store this color</td>
<td>Set Text to "Test Color"</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">LabelTestColorSample</td>
<td>Blank label whose background color is the new color</td>
<td>Set Width to Fill parent</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">TestHorizontalArrangement</td>
<td>Holds TestColorButton and LabelTestColorSample</td>
<td>Set Width to Fill parent</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">ResetColorButton</td>
<td>Resets all the values to the default color, black</td>
<td>Set Text to "Reset Brush Selector"</td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">ReturnToPainting</td>
<td>Returns to the main screen with the new color and dot size</td>
<td>Set Text to "Return to Painting" and FontSize to 16</td>
</tr><tr><td>
<b>VerticalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">VerticalArrangement2</td>
<td>Holds ResetColorButton and ReturnToPainting</td>
<td>Set Width to Fill Parent and AlignHorizontal to Center</td>
</tr><tr><td>
<b>Notifier</b>
</td>
<td>User Interface</td>
<td style="color:green;">Notifier1</td>
<td>Shows a dialog for saving the color and entering a color name</td>
<td></td>
</tr><tr><td>
<b>TinyDB</b>
</td>
<td>Storage</td>
<td style="color:green;">TinyDB1</td>
<td>Stores color names and values</td>
<td></td>
</tr></table><p>Here and in general with multiple screen apps, only the components that belong to the current screen (in this case <b>Brush_Picker</b>) are shown in the Designer and the Components pane. You can switch between screens by toggling between <b>Brush_Picker</b> and <b>Screen1</b> using the dropdown, and the view in the Designer will show the corresponding screen. The same is true for the Blocks Editor: When you're working on a screen you'll see only the blocks for that screen.</p>
<pre class="ai-box">None of the components, variable definitions, and procedures that you define in one screen will be accessible from any other screen. We'll see below how to pass information between screens.</pre><h4 class="ai-header">Blocks for the main screen (<b>Screen1</b>)</h4>
<p>The <b>Screen1</b> is essentially a drawing program. When you touch the Canvas, the app draws a dot of the current radius and color. The color is specified by the background of the <b>ColorSample</b> label. The erase button clears the canvas. When the screen opens, it initializes the radius to 3 and the color to black. Here are the corresponding blocks:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/screen1basicblocks.png" /></p>
<p>It is worth noting that the <span class="eventblock">Initialize</span> block uses the procedure <span class="callblock-ai2">TinyDB1.StoreValue</span>. This action will be discussed in more detail later. Basically, when the screen starts, it stores the default color, Black. </p>
<pre class="ai-testing"><b>Testing the behavior.</b> Test to make sure the drawing behavior acts as you expect it to. You won't be able to add new colors yet, but see what happens when you try to draw dots of the page.</pre><h4 class="ai-header">Communicating with the brush picker screen</h4>
<p>The multiple screen aspect of the app involves getting the "new brush": the new color and the new dot radius. It's the job of <b>Brush_Picker</b> to create these values and return these to <b>Screen1</b> as a list of three items: the color, the dotsize, and the total number of colors stored. The number of colors is necessary for creating the list that ListPicker will reference. We'll see how <b>Brush_Picker</b> does this below, but from the perspective of <b>Screen1</b>, all it needs to do is open <b>Brush_Picker</b> and get the result.</p>
<p>Here's how this happens: when the Customize Brush button is pressed, <b>Screen1</b> uses <span class="controlblock-ai2">open another screen with start value</span> to open <b>Brush_Picker</b>. When the user finishes with Brush_Picker, it will signal the other screen closed event, which provides the name of the screen (here Brush_Picker) and the value returned (here the three-element list). The event handler for <b>Screen1</b> extracts the three items from the list and sets the ColorSample background and the DotSizeValue text properties. Here are the blocks:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/screen1more.png" /></p>
<p>ColoredDots uses <span class="controlblock-ai2">open another screen with value</span> to open <b>Brush_Picker</b> with values passed to it from <b>Screen1</b>. The other screen then accesses these opening values using <span class="controlblock-ai2">get start value</span> blocks. In general, a screen opens another screen with <span class="controlblock-ai2">open another screen</span> and gets a result back through the <span class="controlblock-ai2">when other screen closed</span> event. In this case, the values are passed from <b>Screen1</b> to <b>Brush_Picker</b> so the app can keep track of how many colors are stored and what the current values are.</p>
<h4 class="ai-header">Sharing data via TinyDB</h4>
<p>Besides opening screens and returning values, the different screens in a multiple screen app can communicate through TinyDB. To do this, give every screen its individual TinyDB component. Even though these will be "different" TinyDB components, they will in fact all share the same keys and values: If one screen stores a value under a key, the other screen can get that value by using the same key.</p>
<p>ColoredDots uses TinyDB to let you name the colors you create and save them to later use. The saving and naming will be done in <b>Brush_Picker</b>, as shown in the blocks later. When you open ListPicker (labelled Stored Color) in <b>Screen1</b>, the app uses opens the list of colors that you have stored for you to choose one and then sets the drawing color to the result. The elements are added to this list by creating the procedure <span class="callblock-ai2">populateList</span>. As shown in these blocks, <span class="callblock-ai2">populateList</span> iterates through the all of the stored entries in the database up to the number of stored colors and adds them to the list tinyDBlist. It returns this list, which ListPicker1 points to.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/screen1populatelist.png" /></p>
<p>Now that <span class="callblock-ai2">populateList</span> has been created, add the following to <span class="controlblock-ai2">Screen1.Initialize</span> and <span class="controlblock-ai2">Screen1.OtherScreenClosed</span> :</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/screen1addedblocks.png" /></p>
<p>When ListPicker is opened, you will see a list of all the colors you created. <span class="controlblock-ai2">ListPicker1.AfterPicking</span> sets the Color value stored for that name to be the current drawing color and then sets the current color swatch to that color, as shown here. </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/screen1listpicker.png" /></p>
<h4 class="ai-header">Blocks for the <b>Brush_Picker</b> screen</h4>
<p>The main job of <b>Brush_Picker</b> is to create a color from the red-green-blue values entered in the text boxes and provide that color to <b>Screen1</b>. One thing the <b>Brush_Picker</b> needs to check is that it's using good values for colors and dot size. Each of the red, green, blue values should be a number between 0 and 255. But you could have entered anything in those text boxes. The <span class="callblock-ai2">checkColor</span> procedure takes a value and limits its range to between 0 and 255. If it's less than 0 (or not a number at all) the result will be 0. If it's greater than 255, the result will be 255. </p>
<p>The <span class="callblock-ai2">checkColor</span> procedure calls the <span class="callblock-ai2">limitRange</span> procedure. This is a general procedure that takes an input, a lower limit, and an upper limit, and restricts the input to lie within that range (and it returns the lower limit if the input is not a number). The procedure is simple, but tricky: To restrict the range, take the maximum of the input and the lower limit, then take the minimum of the result and the upper limit. This programming "trick" has little to do with multiple screens or App Inventor. You might want to take a few moments to convince yourself that it really works.</p>
<p>Below are the blocks for <span class="callblock-ai2">checkColor</span> and <span class="callblock-ai2">limitRange</span>. Remember that procedures are mutator blocks and we can use the mutator button to add (and change the names of) parameters to our procedure. To review mutators, check out the <a href="support/concepts/mutators.html">mutators page</a>.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/checkColor.png" /></p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/LimitRange.png" /></p>
<p>Now, we will use those two procedures to create the rest of the blocks for <b>Brush_Picker</b>. When you click ReturnToPainting, the new color, the new dot size (taken from the RadiusTextBox), and the total number of colors are returned to <b>Screen1</b> as a three-item list. As mentioned before, when <b>Brush_Picker</b> is open, <b>Screen1</b> passes its values of the current color, the number of colors, and the current dot radius size. <b>Brush_Picker</b> uses <span class="controlblock-ai2">get start value</span> when it is initialized to access these values.</p>
<p>When you click the TestColorButton, the color is created for you as the background of LabelTestColorSample and the Canvas shows a circle of the appropriate size and color. To return the list to <b>Screen1</b>, <b>Brush_Picker</b> uses <span class="controlblock-ai2">close screen with value</span>, which takes as an argument the value to be returned (in this case, the list). When a screen closes, the app returns to the screen that opened it.</p>
<p>Here are the blocks that do this. <b>Brush_Picker</b> uses the procedures <span class="callblock-ai2">CheckColor</span> and <span class="callblock-ai2">LimitRange</span> to ensure that the values entered in the text boxes are valid numbers for colors and dot size.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/brushpicker_init.png" /></p>
<p>When TestColorButton is clicked, is displays the created color. Notifier1 is then used to give you a choice to save the color or cancel using the <span class="eventblock">Notifier1.ShowChooseDialog</span> block. The response from this will trigger further Notifier events so that you can save the color.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/testcolorbutton.png" /></p>
<p>The next blocks show how Brush_Picker associates a name with a color for use by Screen1. The <span class="eventblock">Notifier1.ShowChooseDialog</span> block triggers a <span class="eventblock">Notifier1.AfterChoosing</span> event. In these blocks, the <span class="controlblock-ai2">ifelse</span> block checks the response to whether or not the color should be saved. If the response is "OK," <span class="eventblock">Notifier1.AfterChoosing</span> calls <span class="eventblock">Notifier1.ShowTextDialog</span> which prompts you to store a name for this color.</p>
<p>Once you make your entry, the color is stored with two tags two ways in TinyDB1. First, it stores the name with the current number of colors as the key. This is used when iterating through the list of colors for ListPicker in <b>Screen1</b> so that the names will be displayed for the user. Secondly, the color is stored in TinyDB, using the name you entered as a key. <b>Screen1</b> can then retrieve the color using its own TinyDB component and access it via the stored name as chosen in ListPicker.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/notifier.png" /><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/notifier2.png" /></p>
<p>The Reset button allows the user to clear all of the entries in the red, green, and blue fields so they can start over easily. The blocks for this are shown here:</p>
<p>Note: you can use copy paste (ctl-v and ctl-c) after creating the first set Red.Text then you can use the dropdown to change from red to green to blue.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/coloredDots/reset.png" /></p>
<h4 class="ai-header">Comments on multiple screens</h4>
<p>You can have many screens in an App Inventor app, but a screen always returns to the screen that opened it. On the other hand, you can get the effect of screens switching to arbitrary other screen by setting up a "manager screen" that is used for opening all the other screens. When a screen wants to switch, it returns to the manager with a value saying which screen to open next.</p>
<pre class="ai-testing"><b>Testing the behavior.</b> App Inventor 2 allows multi-screen app testing during live development, however it is not fully functional when passing values between screens. REMEMBER, <strong>you actually have to <a href="share.html" target="blank">package the app to your phone or emulator</a> to test the multi-screen switching behavior</strong>.</pre><h4 class="ai-header">Further exploration</h4>
<p>Now that you are able to create your own colors and access them for drawing, try some variations!</p>
<ul><li>Make Brush_Picker warn the user if they are trying to store a color with the same name as something that has already been stored (e.g. don't let them make two colors named "red").
</li><li>Have the starting color be the last one that the user was using in the app instead of always starting with black.
</li></ul><h4 class="ai-header">Summary</h4>
<p>In this tutorial you have learned:</p>
<ul><li>How to make an app with multiple screens</li>
<li>How to share data between those two screens using <b>TinyDB</b></li>
<li>How to use a counter to add all of the values in <b>TinyDB</b> to add to a list.</li>
<li>How to use <b>ListPicker</b> to select from a list of items</li>
</ul><pre class="ai-box">This tutorial is based on work by Eni Mustafaraj of Wellesley College.

Done with <span style="color:black;">Colored Dots</span>? Return to the other tutorials <a href="tutorials.html">here</a>.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Drawing Canvas</li><li class="field-item odd">Multiple Screens</li><li class="field-item even">Data Storage</li></ul></section>  </div>

  
  
  <article id="article-381" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/pizzaparty" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Pizza Party with Fusion Tables for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Pizza Party with Fusion Tables for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><div style="float:right;">
  <img src="http://appinventor.mit.edu/explore/sites/all/files/tutorials/pizzaParty/pizza_party_screenshot.png" style="border:none; padding-left:15;" /><br /><br /><br /><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/PizzaParty_MIT_2016.aia"><br /><img src="http://appinventor.mit.edu/explore/sites/all/files/tutorials/pizzaParty/downloadSourcebutton.png" style="border:none; padding-left:65;" /><br /></a>
</div>
<p>In this tutorial, you will create an app that allows people to enter food orders for a pizza party. Orders are stored in a Fusion Table, providing one easy-to-access place for the data. By reading from the table, the app can easily display the orders that have been entered.</p>
<p>A <a href="https://en.wikipedia.org/wiki/Google_Fusion_Tables" target="_blank">Fusion Table</a> is a Google service to support the gathering, managing, sharing, and visualizing of data. Data is stored in Google's <a href="https://en.wikipedia.org/wiki/Cloud_computing" target="_blank">cloud</a>. All of the data are stored in a public table (or tables) that can be accessed via Google Drive, and allows different users to add information to the tables.</p>
<p>For example, coupled with a location sensor, an App Inventor app could post periodic updates of each user's location to a public fusion table. Users could post notes to mark noteworthy locations, such as a team of botanists could use a Fusion Table app to create an annotated catalog of the trees or plants within a certain geographical area. <a href="https://developers.google.com/fusiontables/docs/v1/sql-reference" target="_blank">See the Google Documentation on Fusion Tables for more information.</a></p>
<p>This tutorial introduces:</p>
<ul><li>Using the <b>FusionTables</b> component</li>
<li>Using a <b>WebViewer</b> component</li>
</ul><p>This tutorial assumes you are familiar with the basics of App Inventor, including using the Component Designer to build a user interface, and using the Blocks Editor to specify the app's behavior. If you are not familiar with the basics, try stepping through some of the <a href="tutorials.html">basic tutorials</a> before continuing.</p>
<hr /><p><strong>IF YOU DOWNLOAD THE SOURCE CODE</strong> you will need to supply your own <em>service account</em> keyfile and email, and your own Table URL and Table ID in the global variables in the blocks editor. This source code will not work without these additions. </p>
<h4 class="ai-header">Setting up a Service Account</h4>
<p> Before App Inventor can access any fusion tables you create, you need a special "Service Account Email Address." This special account and its keyfile allows your users to edit your Fusion Tables without logging in- your service account handles all the access. Instructions are here:</p>
<p>
  <a href="https://docs.google.com/document/d/1HifuZqz5xu0KPS-e4oUv-t-nQoUQ8VMNyh_y6OjZkc0/pub" target="_blank">How to create a Service Account for Fusion Tables</a>
</p>
<h4 class="ai-header">Creating your own Fusion Table</h4>
<p>Creating your own Fusion Tables is as easy as creating a Google document.</p>
<ol><li>On the web, login to your Gmail account.</li>
<li>Go to Google Drive and click the red <strong>New</strong> button and navigate to <i>More</i>. Select <strong>Google Fusion Tables</strong> in the list of choices. (If you do not see Google Fusion Tables in the menu, click <i>+Connect more apps</i>. Scroll down until you find Fusion Tables and hover over it. Click the <i>+ Connect button</i>, then click OK. Now, when you click the New button, Fusion Tables should appear. If not, then you may need to contact your school's network administrator. See Troubleshooting section at the bottom of this page.) </li>
<li>You will be given a few different options for the new table. Select <b>Create empty table</b>.</li>
<li>You will see that the new table automatically comes with four columns. Change the column names for your pizza party app by going to <strong>Edit &gt; Change Columns</strong>.You'll rename the four default columns to <em>Date</em> (type=Date), <em>Name</em> (type=Text), <em>Pizza</em> (type=Text), <em>Drink</em> (type=Text). Click save and then add a fifth column by going to the <strong>Edit &gt; Add Column</strong>. Name this fifth column <em>Comment</em> (type=Text). </li>
<li>Leave this window open so that you can come back and get the URL, which you'll need when you set up the properties of the WebViewer component in your app.</li>
</ol><h4 class="ai-header">Share the Fusion Table with the Service Account</h4>
<p>The service account acts as a virtual user who can read and edit the table. This prevents your user from having to log in.</p>
<ol><li>
    In the Fusion Table, click "Share"
  </li>
<li>
    Find "Invite people"
  </li>
<li>
    Enter your service account email, from the Developer Console (e.g.   <span id="7fcabfe4911afec8b5b8fd80ef54fc7b1cfad1d3"></span>
<script type="text/javascript">
<!--//--><![CDATA[// ><!--
 <!--
  document.getElementById('7fcabfe4911afec8b5b8fd80ef54fc7b1cfad1d3').innerHTML = '<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#46;&#46;&#46;&#64;&#100;&#101;&#118;&#101;&#108;&#111;&#112;&#101;&#114;&#46;&#103;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#97;&#99;&#99;&#111;&#117;&#110;&#116;&#46;&#99;&#111;&#109;">&#109;&#121;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#46;&#46;&#46;&#64;&#100;&#101;&#118;&#101;&#108;&#111;&#112;&#101;&#114;&#46;&#103;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#97;&#99;&#99;&#111;&#117;&#110;&#116;&#46;&#99;&#111;&#109;';
// --> 
//--><!]]>
</script><p>)
  </p></li>
<li>
    Ensure "Can Edit" is selected.
  </li>
<li>
    Unlick "notify people" (the service account isn't a real person so it doesn't care about the notification)
  </li>
<li>
    Click "OK", and when it says "skip sending notification?" click "OK".
  </li>
</ol><h4 class="ai-header">Building the App</h4>
<p>Connect to the App Inventor web site and start a new project. Name the new project PizzaParty, set the screen's orientation to Portrait and uncheck the Screen's scrollable property. You may also wish to set the Screen's Title property to something other than 'Screen 1'.</p>
<h4 class="ai-header">The User Interface</h4>
<p>In addition to the FusiontablesControl component, the Pizza Party app makes use of several other types of components. It is assumed that you have learned how to use these in previous tutorials. Use the designer window to create the interface for the Pizza Party. When completed, the designer should look like this:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/designer.png" /></p>
<p>The components are: </p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Component Type
</td>
<td>
Palette Group
</td>
<td>
What you'll name it
</td>
<td>
Purpose of Component
</td>
<td>
Settings of Component
</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">LabelName</td>
<td>Shows the text "Your Name:"</td>
<td></td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>User Interface</td>
<td style="color:green;">TextBoxUserName</td>
<td>Gets input from user</td>
<td>Set the width property to Fill Parent</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement1</td>
<td>Contains Name Label and Textbox</td>
<td></td>
</tr><tr><td>
<b>ListPicker</b>
</td>
<td>User Interface</td>
<td style="color:green;">ListPickerPizza</td>
<td>Accesses the list of available pizza types.</td>
<td>
<p>Set the Width property to Fill Parent</p>
<p>Set the Text property to "What type of pizza?"</p>
<p>Set the ElementsFromString to "Cheese, Pepperoni, Anchovies, Hawaiian"</p>
</td>
</tr><tr><td>
<b>ListPicker</b>
</td>
<td>User Interface</td>
<td style="color:green;">ListPickerDrink</td>
<td>Accesses the list of available drinks.</td>
<td>
<p>Set the Width property to Fill Parent</p>
<p>Set the Text property to "What type of drink?"</p>
<p>Set the ElementsFromString to "Coke, Diet Coke, Sprite, Ginger Ale"</p>
</td>
</tr><tr><td>
<b>Label</b>
</td>
<td>User Interface</td>
<td style="color:green;">LabelComment</td>
<td>Shows the text "Comments:"</td>
<td></td>
</tr><tr><td>
<b>TextBox</b>
</td>
<td>User Interface</td>
<td style="color:green;">TextBoxComments</td>
<td>Takes user input</td>
<td>Set the width property to Fill Parent</td>
</tr><tr><td>
<b>HorizontalArrangement</b>
</td>
<td>Layout</td>
<td style="color:green;">HorizontalArrangement2</td>
<td>Contains Comments Label and Textbox</td>
<td></td>
</tr><tr><td>
<b>Button</b>
</td>
<td>User Interface</td>
<td style="color:green;">ButtonSubmit</td>
<td>Adds new data to the public fusion table</td>
<td>
<p>Set the Text to "Submit"</p>
<p>Set the width property to Fill Parent</p>
</td>
</tr><tr><td>
<b>WebViewer</b>
</td>
<td>User Interface</td>
<td style="color:green;">WebViewer1</td>
<td>Displays Fusion Table</td>
<td>
<p>Set width property to Fill Parent</p>
<p>Set height property to Fill Parent</p>
</td>
</tr><tr><td>
<b>FusiontablesControl</b>
</td>
<td>Storage</td>
<td style="color:green;">FusiontablesControl1</td>
<td>Manages interactions with the app's Fusion Table</td>
<td></td>
</tr><tr><td>
<b>Clock</b>
</td>
<td>User Interface</td>
<td style="color:green;">Clock1</td>
<td>Used to provide a timestamp each time an order is placed.</td>
<td></td>
</tr><tr><td>
<b>Notifier</b>
</td>
<td>User Interface</td>
<td style="color:green;">Notifier1</td>
<td>Notifies the user of any errors</td>
<td></td>
</tr></table><h4 class="ai-header">Determining your Fusion Table URL and Table ID</h4>
<p>In the blocks editor, you will set the WebViewer component's HomeURL property to point to the URL of your table. To find your Fusion Table's URL:</p>
<ol><li>In your browser, navigate to the Fusion Table you just created.</li>
<li>Go to the menu and select <b>Tools &gt; Publish</b>.</li>
<li>You'll see a notice saying: "This table is private and will not be visible". Click the blue link that says "Change Visibility".</li>
<li>In the list of "Who Has Access", click the blue "Change..." link next to "Private - Only people listed below..."</li>
<li>Choose"Public on the Web" or "Anyone with the link". Either of these settings will work for this tutorial. In the future, you should decide this setting based on the sensitivity of your data.</li>
<li>Click the green Save button, then the blue Done button.</li>
<li>Back on the Fusion Table page, go to the menu bar and select <strong>Tools &gt; Publish</strong>. Select the URL from the top text box (labeled "Send in an email or IM"), copy the URL and return to App Inventor. You will paste the URL into the definition block for the TABLE_URL (see below).</li>
<li>You can find the Table ID by browsing to your table, then selecting <b>File &gt; About this table</b> in the menu.</li>
</ol><h4 class="ai-header">Upload your .p12 key file</h4>
<p>
  In the designer, upload the the key file you downloaded from the Developer Console. Upload it under Media, the same way you would upload an image file.
</p>
<p>
  Click on the FusiontablesControl1 component, and find the KeyFile property. Click where it says "none" under KeyFile, and select the .p12 file you previously uploaded.
</p>
<h4 class="ai-header">Blocks Editor</h4>
<p>Open the Blocks Editor so you can program the app's behavior. First, you will describe the app's variables. Variables whose names are ALL_CAPS are constants -- that is, variables whose values do not change while the program is running. It is good to get into the habit of using this naming convention. Define the following variables and give them the initial values shown in the table.</p>
<table class="lined-table"><tr style="background-color: black; font-weight: bold;"><td>
Block type
</td>
<td>
Drawer
</td>
<td>
Purpose
</td>
</tr><tr><td><span class="variableblock-ai2">initialize global TABLE_URL</span></td>
<td>Variables</td>
<td>Initialize this global variable to the "published" URL of your fusion table. See instructions above.</td>
</tr><tr><td><span class="variableblock-ai2">initialize global TABLE_ID</span></td>
<td>Variables</td>
<td>Initialize this global variable to your table ID (e.g. a long string of characters unique to your fusion table). See instructions above.</td>
</tr><tr><td><span class="variableblock-ai2">initialize global SERVICE_ACCOUNT_EMAIL</span></td>
<td>Variables</td>
<td>Initialize this global variable to the own service account ID (email address) for you service account.  To find this, go to your developer console and select IAM &amp; Admin from the three horizontal lines menu at the upper left.  You should see your service account listed (there might be only one) together with its email address (service account id).
</td>
</tr><tr><td><span class="variableblock-ai2 ">initialize global UserName</span></td>
<td>Variables</td>
<td>Records the name of the user. (Starts off as an empty text string.)</td>
</tr><tr><td><span class="variableblock-ai2 ">initialize global pizza</span></td>
<td>Variables</td>
<td>Stores the pizza choice input by the user. (Starts off as an empty text string.)</td>
</tr><tr><td><span class="variableblock-ai2 ">initialize global drink</span></td>
<td>Variables</td>
<td>Stores the drink choice input by the user. (Starts off as an empty text string.)</td>
</tr><tr><td><span class="variableblock-ai2 ">initialize global comment</span></td>
<td>Variables</td>
<td>Stores the comment input by the user. (Starts off as an empty text string.)</td>
</tr></table><p><b>Initializing the App</b></p>
<p>It is important to perform some initialization steps whenever the app is started. These are done in the <span class="eventblock">Screen1.Initialize</span> block. For this app we need to set the initial values for the FusionTable component's service account property (set to global SERVICE_ACCOUNT_EMAIL) and the WebViewer component's HomeURL property (set to global TABLE_URL).</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/initialblocks.png" /></p>
<p>Set up the <span class="callblock-ai2">resetForm</span> procedure as shown below. After recording an entry, this procedure resets the interface back to the original state.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/resetForm.png" /></p>
<p><b>List Picker Blocks</b></p>
<p>In the designer, you set the choices for the pizza and drink types by filling in the "Selection" property with comma separated lists. These pre-programmed choices will be displayed on the user interface so the user can select their food and drink. Their selections are stored in the pizza and drink variables.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/listpicker.png" /></p>
<p><b>Inserting Data into the Fusion Table</b></p>
<p>The FusiontablesControl component is used to send the data to the Fusion Table. This action will create a new row in the Fusion Table, setting the values of the various columns involved. App Inventor makes this easy to do, but you have to be careful that the insert query is formatted correctly.</p>
<p>First there is a list of column names, followed by a list of values. The order of the column names and value names must be in the same order so that they match up. An example of what this might look like is shown below. </p>
<p>First, setup a new <span class="callblock-ai2">Procedure With Result</span> that takes a string as an argument and returns that same string surrounded by single quotes. The procedure <span class="callblock-ai2">quotify</span> is used in the InsertDataInTable procedure to place quotes around all of the values in the query. It also takes care of "escaping" any single quotes or apostrophes that are input by the user. You can send single apostrophes as part of a value in the query, so the "replace all" block adds an extra single quote. Two single quotes in a row are interpreted as one single quote. The figures below show how to make the procedure. Notice that you have to tell the procedure block to add a parameter. You do this with the blue icon that pops up a small window where you specify how many items you need to act as parameters. In this case, you just need one. App Inventor will automatically name the parameter "x" but you can rename it to "str" by clicking on the x and typing directly into the block. Similarly, you can rename the procedure from "procedure" to "quotify" by typing directly into the block.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/quotify_param.png" /><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/quotify.png" /></p>
<p>Use the Fusion Table component's <span class="callblock-ai2">InsertRow</span> block. To construct the list of values, we use App Inventor's <span class="textblock-ai2">join</span> text block.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/insertTable.png" /></p>
<p>For this app, the column names must match the column names of the table we created earlier (with columns Date, Name, Pizza, Drink, Comment). Their respective values are taken from the procedure's global variables.  Note: If you did not use these exact words for your table's columns, then be sure to use your table's column names when you build your query.</p>
<p><b>Submitting Data</b><br /></p><p></p>
<p>Once the user has entered their name, food choices, and comments, they will click the <b>Submit</b> button. The app tests to make sure that the name, pizza, and drink fields have values in them, and prompts the user to try again if any of the required answers are missing. Notice that the <span class="textblock-ai2">compare texts</span> block is used (find it under Built-in palette, Text drawer). This block compares two strings of text to see if they are equal.  If all required information is present, it calls the procedure <span class="callblock-ai2">InsertDataInTable</span> (see below). The blocks for the <span class="eventblock">ButtonSubmit.Click</span> are shown here:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/submit.png" /></p>
<p><strong>A note about Invalid Query/Parse Error Messages</strong>: There are a few different reasons your app may get a response from Fusion Tables that gives an Error related to Parsing or Invalid Query. This could be because you are missing spaces in the query string or have not handled single quotes (see the quotify procedure above). It may also be that you have used one of the Fusion Table RESERVED WORDS as a column name (<a href="https://developers.google.com/fusiontables/docs/v1/using#reserved" target="_blank">More info about reserved words</a>).</p>
<p><b>Handling the Response from the Fusion Tables Service</b></p>
<p>The <span class="eventblock">FusiontablesControl.GotResult</span> event will be fired when the app receives a response from Google's Fusion Tables Service. For an insert query, the service will return the rowID of the new row that was inserted or an error message if something went wrong. In this simple example, we use the "contains" block (find it under Built-in palette, Text drawer) to check whether the result string has the rowID in it. If so, then we know that the rowID was received, and we then invoke the <span class="callblock-ai2">WebViewer.GoHome</span> procedure, which reloads the "HomeURL" as specified in the WebViewer's properties. Note that this set of blocks also calls the <span class="callblock-ai2">resetForm</span> procedure. After recording an entry, it resets the interface back to the original state.</p>

<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/gotresult.png" /></p>
<p><b>You're done!</b> Package the app by going to <b>Package for Phone</b> on the Designer. You can now test the app for the purposes of the pizza party. Once you understand this tutorial, you'll be ready to make new Fusion Tables and modify the app to collect different types data from users. </p>
<h4 class="ai-header">Challenges</h4>
<p>This app has the Fusion Table hard-coded into the blocks. Find a way to let users specify their own Fusion Table ID so that they can host their own Pizza Party.</p>
<h4 class="ai-header">Variations</h4>
<p>Now that you have a simple app that uses Fusion Tables and a WebViewer, you might want to build some other apps with Fusion Tables. For example:</p>
<ul><li>Include a <b>LocationSensor</b> so that the user's location can be added to the Fusion Table to create a map with notes.</li>
<li>Make the WebViewer display something other than the table of stored values, like a map or a chart.</li>
</ul><h4 class="ai-header">Troubleshooting</h4>
<p>If you are using a Google Apps for Education account, and you are not able to create a new Fusion Table (in the "Create" menu of Google Drive you won't even see an option for Fusion Tables), you will need to ask your system administrator to turn this option on for you. Or, you can switch to a standard Gmail account. Fusion Tables are not automatically turned on for Google Apps for Education Accounts, your system administrator must make Fusion Tables available to the accounts in your domain.</p>
<p>If you are receiving errors when trying to submit to the Fusion Table, especially if the error mentions Authentication, be sure that you have put the correct service account email address in set, either as a variable that is set during Screen1.Initialize, or in the property field on the FusionTables component in the Design Window. Also make sure the key file (.p12) is uploaded as media, and the KeyFile property in the Design Window is set to that file.</p>
<p>If you are getting an error that says "403 Forbidden" with no other detail, make sure the fusion table is shared with your service account email. The service account email comes from your developer console, and looks like   <span id="b605c87554ef12002a17312a2b9fd78634a2745c"></span></p>
<script type="text/javascript">
<!--//--><![CDATA[// ><!--
 <!--
  document.getElementById('b605c87554ef12002a17312a2b9fd78634a2745c').innerHTML = '<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#109;&#121;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#46;&#46;&#46;&#64;&#100;&#101;&#118;&#101;&#108;&#111;&#112;&#101;&#114;&#46;&#103;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#97;&#99;&#99;&#111;&#117;&#110;&#116;&#46;&#99;&#111;&#109;">&#109;&#121;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#46;&#46;&#46;&#64;&#100;&#101;&#118;&#101;&#108;&#111;&#112;&#101;&#114;&#46;&#103;&#115;&#101;&#114;&#118;&#105;&#99;&#101;&#97;&#99;&#99;&#111;&#117;&#110;&#116;&#46;&#99;&#111;&#109;';
// --> 
//--><!]]>
</script><p>. It is <em>not</em> the same as your usual google account email.</p>
<p>To familiarize yourself with Fusion Tables, have a look around the <a href="https://support.google.com/fusiontables/answer/2571232" target="_blank">Fusion Tables Web Site</a>. Check out the example gallery to see what kinds of things are possible. Work through this <a href="https://support.google.com/fusiontables/answer/2527132" target="_blank">Fusion Table tutorial</a>, which shows how import some data, create a Fusion Table, and view the data on a map with your browser. You'll need to log in with your Google account.</p>
<p>STILL HAVING TROUBLE? Check out the FusionTables Help put together by Taifun Bär: <a href="http://puravidaapps.com/fusionerror.php" target="_blank">http://puravidaapps.com/fusionerror.php</a></p>
<pre class="ai-box"><span style="color:black;">Done with PizzaParty?</span> <a href="http://appinventor.mit.edu/explore/tutorials.html">Return to the other tutorials</a>.</pre><h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/pizzaParty/PizzaParty_MIT_2016.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Clock Timer</li><li class="field-item odd">Data Storage</li></ul></section>  </div>

  
  
  <article id="article-473" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/cup-game" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      NFC Cup Game for AI2                  </h1>
      
      
    </header>
    <span property="dc:title" content="NFC Cup Game for AI2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><h2 class="ai-header">Introduction</h2>
<p> This tutorial will demonstrate App Inventor's Near Field Communication (NFC) capabilities. You'll build an application that will simulate the shell game by writing messages to NFC tags in setup mode and reading them in play mode. In order to get the full experience from this application, you will need to purchase readable, writable, NFC tags. </p>
<pre class="ai-box">IMPORTANT: Applications built with the NFC component will not respond to tags while in live development mode. <strong>To test your application, you must build your app and download the APK to your phone</strong>. (<a href="share.html">How do I build an APK?</a>)</pre><h2 class="ai-header">Getting Started</h2>
<p>Go to the App Inventor website, begin a new project titled 'BallShuffle', and connect your phone. Download the following images onto your computer and upload them into your project. (Right-click or ctrl-click and choose Save Image. Remember where you put them!)</p>
<ul><li> <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfcballshuffle/pingpongball.jpg" target="blank">Ping Pong Ball Image</a><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfcballshuffle/pingpongball.jpg" style="width:30px;height:30px" /></li>
<li> <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfcballshuffle/questionmark.png" target="blank">Question Mark Image</a><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfcballshuffle/questionmark.png" style="width:30px;height:30px" /></li>
<li> <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfcballshuffle/redcup.jpg" target="blank">Red Cup Image</a><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfcballshuffle/redcup.jpg" style="width:30px;height:30px" /></li>
</ul><h2 class="ai-header">Set up the Components</h2>
<p>The user interface will consist of a menu at the top that lets you switch between the “setup” and “play” modes, a menu that will appear during setup mode and disappear during play mode, and in image that will change based on NFC input and output.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/nfcComponentSetup.png" /></p>
<table cellpadding="0" cellspacing="0"><tr style="background-color:black; font-weight: bold;"><td>Component Type</td>
<td>Palette Group</td>
<td>What You'll Name It</td>
<td>Purpose of Component</td>
<td>Component Settings</td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green">MainMenuLabel</td>
<td>Title bar for main menu</td>
<td><span class="ButtonText">Text</span>: Main Menu; <span class="ButtonText">Font</span>: Bold; <span class="ButtonText">Fontsize</span>: 16</td>
</tr><tr><td><strong>HorizontalArrangement</strong></td>
<td>Layout</td>
<td style="color:green">MainMenuArrangement</td>
<td>Line up two "mode" buttons side by side</td>
<td><span class="ButtonText">Width</span>: Fill Parent; <span class="ButtonText">Height</span>: Automatic</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green">SetupModeButton</td>
<td>Change to setup mode</td>
<td><span class="ButtonText">Text</span>: Setup; <span class="ButtonText">Width</span>: Fill Parent</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green">PlayModeButton</td>
<td>Change to play mode</td>
<td><span class="ButtonText">Text</span>: Play; <span class="ButtonText">Width</span>: Fill Parent</td>
</tr><tr><td><strong>VerticalArrangement</strong></td>
<td>Layout</td>
<td style="color:green">SetupArrangement</td>
<td></td>
<td><span class="ButtonText">Width</span>: Fill Parent; <span class="ButtonText">Height</span>: Fill Parent</td>
</tr><tr><td><strong>VerticalArrangement</strong></td>
<td>Layout</td>
<td style="color:green">SetupMenuArrangement</td>
<td>Line up the setup menu options</td>
<td><span class="ButtonText">Width</span>: Fill Parent; <span class="ButtonText">Height</span>: Fill Parent</td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green">SetupMenuLabel</td>
<td>Title bar for setup menu</td>
<td><span class="ButtonText">Text</span>: SetupMenu; <span class="ButtonText">Font</span>: Bold</td>
</tr><tr><td><strong>HorizontalArrangement</strong></td>
<td>Layout</td>
<td style="color:green">SetupButtonArrangement</td>
<td>Hold the buttons for setup menu</td>
<td><span class="ButtonText">Width</span>: Fill Parent; <span class="ButtonText">Height</span>: Fill Parent</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green">BallButton</td>
<td>Lets user define NFC tag as "ball"</td>
<td><span class="ButtonText">Text</span>: Ball; <span class="ButtonText">Width</span>: Fill Parent</td>
</tr><tr><td><strong>Button</strong></td>
<td>User Interface</td>
<td style="color:green">CupButton</td>
<td>Lets user define NFC tag as "cup"</td>
<td><span class="ButtonText">Text</span>: Cup; <span class="ButtonText">Width</span>: Fill Parent</td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green">InstructionLabel</td>
<td>Give the user instructions for the mode they are in</td>
<td><span class="ButtonText">Text</span>: -; <span class="ButtonText">Width</span>: Fill Parent</td>
</tr><tr><td><strong>Image</strong></td>
<td>User Interface</td>
<td style="color:green">Image1</td>
<td>Place holder for images</td>
<td><span class="ButtonText">Height</span>: 200 pixels; <span class="ButtonText">Width</span>: Fill Parent; <span class="ButtonText">Picture</span>: questionmark.png</td>
</tr><tr><td><strong>Horizontal Arrangement</strong></td>
<td>Layout</td>
<td style="color:green">ImageArrangement</td>
<td>Allows you to center the image</td>
<td><span class="ButtonText">AlignHorizontal</span>: Center; <span class="ButtonText">Width</span>: Fill Parent; </td>
</tr><tr><td><strong>Label</strong></td>
<td>User Interface</td>
<td style="color:green">ResultsLabel</td>
<td>Show results of user's actions</td>
<td><span class="ButtonText">Text</span>: -; <span class="ButtonText">Width</span>: Fill Parent</td>
</tr><tr><td><strong>NearField</strong></td>
<td>Sensors</td>
<td style="color:green">NearField1</td>
<td>Gives access to NFC capabilities</td>
<td><span class="ButtonText">ReadMode</span>: checked;</td>
</tr></table><h2 class="ai-header">Add Behaviors to the Components</h2>
<p>We're going to build all of the menus and make the menus work, then we'll modify them to incorperate the NearField component.</p>
<p>To start, we're going to create several variables to make it easier to reference text that will be reused throughout the application:</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/globalVariablesBlock.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/globalVariablesBlock.png" /></a></p>
<p>Next we're going to define the initialization behavior and define the button behavior:</p>
<p>When the screen is initialized, we want the app to display the question mark picture and the setup instructions. Since the SetupMenuArrangement is initially set to visible, we don't have to address it in the Screen1.Initialize block. When the user clicks on the SetupModeButton or on the PlayModeButton, then we want to change the SetupMenuArrangement to visible or invisible respectively. In addition, when the user clicks one of these two buttons, we want to make sure that the correct instructions for that mode is displayed and that the image resets to the question mark picture. When the user clicks on BallButton, we want the image to a change picture of the ball and the CupButton should change the image to a picture of the cup. </p>
<p> The blocks should look like the image below and the buttons should correctly toggle all of the images</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/menuControlBlock.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/menuControlBlock.png" /></a></p>
<p>Now that the interface works correctly, we're going to add the NFC functionality to the app. We're going to modify the 5 blocks by adding the correct NFC behavior to each one. This will make the buttons turn on read mode when the </p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/menuControlBlockNFC.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/menuControlBlockNFC.png" /></a></p>
<p>Now, we define the app's behavior when a tag is written. When the app writes a tag, we want the the instructions to update, we want the picture to reset, and we want to change NearField1.ReadMode to true so that the tag isn't accidentally overwritten.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/tagWrittenBlocks.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/tagWrittenBlocks.png" /></a></p>
<p>Finally, we're going to define the tag read block which contains the majority of the logic for the app. If the app is in play mode and it reads a tag that says "ball," then it will display the victory message and show a picture of a ball. If it reads "cup," then it will display the loss message and show a picture of a cup. Finally, if it doesn't recognize the message, it will display an error message and append the message to the end.</p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/tagReadBlocks.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/tagReadBlocks.png" /></a></p>
<p> Finally, here's a screen shot of the entire completed app </p>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/nfcFinalBlocks.png"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/nfcFinalBlocks.png" /></a></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/nfccupgame/cup_game.aia">source code</a> to your computer, then open App Inventor, go to the My Projects page, and choose <b>More Actions | Upload Source</b>.</p>
<p>Done with <span style="color:black;">CupGame</span>? Return to to the other App Inventor 2 tutorials <a href="tutorials.html">here</a>.</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">NFC (Near Field Comm.)</li><li class="field-item odd">Game</li></ul></section>  </div>

  
  
  <article id="article-486" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/android-wheres-my-car" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Android, Where&#039;s My Car? for App Inventor 2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Android, Where&#039;s My Car? for App Inventor 2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><h2 class="ai-header"><span style="color:green;">Android, Where's My Car?</span></h2>
<p><a href="http://appinventor.mit.edu/explore/sites/all/files/tutorials/wheresMyCar/wheresMyCar.zip"><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/wheresMyCar/android-where.jpg" style="float:right; width:250px;" /></a></p>
<p>You parked somewhere near the stadium, but when the concert ends you don't have a clue where the car is. The friends you came with are equally as clueless.</p>
<p>Fortunately you haven't lost your Android phone that never forgets anything, and you remember you have the hot new app, <span style="color:green;">Android, Where's My Car?</span>. With this app, you click a button when you park your car, and the Android uses its location sensor to record the car's GPS coordinates and address. Later, when you reopen the app, it shows you a map from where you are to the remembered location-- problem solved!</p>
<p><a href="http://www.flickr.com/photos/dailylifeofmojo/4128596089/">Photo</a> licensed under <a href="http://creativecommons.org/licenses/by/2.0/deed.en">Creative Commons</a></p>
<h4 class="ai-header">Getting Started</h4>
<p>The app demonstrates how to communicate with the Android location sensor, how to record data in the phone's long-term memory (database), and how you can open the Google Maps app from your app to show directions from one one location to another. It makes use of the following App Inventor components:</p>
<ul><li><b>Location Sensor</b></li>
<li><b>TinyDB</b> -- to store the data</li>
<li><b>ActivityStarter</b> -- to open a map</li>
</ul><h4 class="ai-header">The User Interface</h4>
<p>Here are the components for the <span style="color:green;">Android, Where's My Car?</span> app, as shown in the Component Designer:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/wheresMyCar/WheresMyCarDesign.png" /></p>
<p>The user interface consists of labels to show location data and buttons to initiate events. Some labels just show static text, e.g., GPSLabel is the text "GPS:" that appears in the user interface. Others, such as CurrentLatLabel, will display dynamic data one the location sensor gets its readings. For these labels, a default value is set (0) here in the Component Designer.</p>
<p>The ActivityStarter1 component is used to launch the map when the user asks for directions. Its properties are only partially shown above. Here is how they should be specified:</p>
<table><tr style="background-color: black; font-weight: bold;"><td>Property</td>
<td>Value</td>
</tr><tr><td>
<b>Action</b>
</td>
<td>android.intent.action.VIEW</td>
</tr><tr><td>
<b>ActivityClass</b>
</td>
<td>com.google.android.maps.MapsActivity</td>
</tr><tr><td>
<b>ActivityPackage</b>
</td>
<td>com.google.android.apps.maps</td>
</tr></table><h4 class="ai-header">The App's Behavior</h4>
<p>Here are the blocks for the <span style="color: green;">Android, Where's My Car</span> app (the yellow annotations will also appear when you load this app into App Inventor):</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/wheresMyCar/WheresMyCarBlocks.png" /></p>
<p>Let's examine the four different event-handlers of the app, starting in the top-left and working around in counter-clockwise order.</p>
<p><span class="controlblock-ai2">LocationSensor1.LocationChanged</span>: This event occurs when the phone's location sensor first gets a reading, or when the phone is moved to produce a new reading. The event-handler just places the readings--latitude, longitude, and current (street) address-- into the corresponding "Current" labels so that they appear on the phone. The RememberButton is also enabled in this event-handler. Its enabled setting should be unchecked in the Component Designer because there is nothing for the user to remember until the sensor gets a reading.</p>
<p><span class="controlblock-ai2">RememberButton.Click</span>: When the user clicks the RememberButton , the location sensor's current readings are put into the "remember" labels and stored to the database as well. The DirectionsButton is enabled as it now makes sense for the user click on it to see a map (though it will make more sense once the user changes location).</p>
<p><span class="controlblock-ai2">DirectionsButton.Click</span>: When the user clicks the DirectionsButton , the event-handler builds a URL for a map and calls ActivityStarter to launch the Maps application and load the map. <span class="textblock-ai2">join</span> is used to build the URL to send to the Maps application. The resulting URL consists of the Maps domain along with two crucial parameters, saddr and daddr , which specify the start and destination for the directions. For this app, the saddr is set to the latitude and longitude of the current location, and the daddr is set to the latitude and longitude of the location that was "remembered" (the location of your car!).</p>
<p><span class="controlblock-ai2">Screen1.Initialize</span>: This event is always triggered when an app opens. To understand it, you have to envision the user recording the location of the car, then closing the app, then later re-opening the app. When the app re-opens, the user expects that the location remembered earlier should appear on the phone. To facilitate this, the event-handler queries the database (<span class="callblock-ai2">call TinyDB.GetValue</span>). If there is indeed a remembered address stored in the database-- the length of the stored address is greater than zero--the remembered latitude, longitude, and street addres are placed in the corresponding labels.</p>
<h4 class="ai-header">Variations</h4>
<ul><li>Create "Android, Where is Everyone?", an app that lets a group of people track each other's whereabouts. Whether your hiking or at the park, this app could help save time and even lives.</li>
<li>Create a "breadcrumb" app that tracks your (phone's) whereabouts by recording each location change. One interesting refinement would be to only record a new "breadcrumb" if the location has changed by a certain amount.</li>
</ul><h4 class="ai-header">Review</h4>
<p>Lines and paragraphs break automatically.</p>
<p>Here are some of the ideas covered in this tutorial:</p>
<ul><li>The <b>LocationSensor</b> component can report the phone's latitude, longitude, and current street address. Its LocationChanged event is triggered when sensor gets its first reading and when the reading changes (the phone has moved).</li>
<li>The <b>ActivityStarter</b> component can launch any app including Google Maps. For Maps, you set the DataUri property to the URL of the map you want to display. If you want to show directions, the URL will be of the form: <a href="http://maps.google.com/maps/?saddr=0.1,0.1&amp;daddr=0.2,0.2">http://maps.google.com/maps/?saddr=0.1,0.1&amp;daddr=0.2,0.2</a>, where the numbers are GPS coordinates.</li>
<li><span class="textblock-ai2">join</span> is used to piece together (concatenate) separate text items into a single text object. It allows you to concatenate dynamic data with static text. With the Maps URL, the GPS coordinates are the dynamic data.</li>
<li><b>TinyDB</b> allows you to store data persistently in the phone's database. Whereas the data in a variable or property is lost when an app closes, the data you store in the database can be loaded into your app each time it is opened.</li>
</ul><h4 class="ai-header">Scan the Sample App to your Phone</h4>
<p>Scan the following barcode onto your phone to install and run the sample app.
</p><p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/wheresMyCar/AndroidBarcode.png" /></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/wheresMyCar/AndroidWheresMyCar_MIT.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<p><a href="http://cs.usfca.edu/~wolber/appinventor/bookSplits/ch7AndroidWhere.pdf">Download Refined Version (Book Chapter PDF)</a></p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Activity Starter</li><li class="field-item odd">Data Storage</li><li class="field-item even">GPS</li></ul></section>  </div>

  
  
  <article id="article-487" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/displaying-maps" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Map It: Displaying Locations on a Google Map                  </h1>
      
      
    </header>
    <span property="dc:title" content="Map It: Displaying Locations on a Google Map" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>This tutorial shows how you can develop an app that allows you to record list of addresses and view the address on the Google Maps. It will also show you how view your current location on the Google Map. This tutorial assumes you have completed the basic tutorials of App Inventor. <strong>For basic and intermediate tutorials, <a href="http://appinventor.mit.edu/explore/ai2/tutorials.html">click here</a>.<strong></strong></strong></p>
<h4 class="ai-header">Introduction</h4>
<p>This tutorial introduces:</p>
<ul><li>List manipulation – creating lists, appending items to lists</li>
<li>ListPicker – adding items to lists, saving list data</li>
<li>LocationSensor – detecting current location for displaying on Google Maps</li>
<li>ActivityStarter – used to start-up Google Maps for current or predefined address</li>
<li>Notifier – displaying messages</li>
<li>TinyDB – saving data into a persistent database</li>
<li>Misc. – text manipulation, basic validation</li>
</ul><p>We will be working toward the design shown in figure blow:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/design.png" /></p>
<p>The figure below shows how the components are arranged in the design editor. It also shows you the non-visible components (e.g. TinyDb, ActivityStarter, LocationSensor, Notifier) that are used in the app.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/mapItDesigner.png" /></p>
<p> </p>
<h4 class="ai-header">Blocks</h4>
<p>We define 2 global variables.</p>
<ul><li><em>tagAddress</em> – a variable that is a constant and will be used, as a tag, for storing and retrieving data from our database.</li>
<li><em>listLocations</em> – a variable that can be used to store and manipulate list of addresses.</li>
</ul><p>We now create a procedure that can be invoked when the app is started (initialized). The procedure sets up the initial state of some of the components. Some of these settings could have been done from the design editor, but for demo purpose and clarification, we are using a procedure. In the procedure, we also check our database to find out if there are any stored addresses. If no data, then we just use an empty list.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/InitializeScreen1blocks.png" /></p>
<h4 class="ai-header">Adding a New Addresses</h4>
<p>We use AddLocationButton to add a new address, CancelButton to cancel the process of adding, and LocationHelpButton to display what type of addresses can be entered. The blocks to make these actions work are here:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/AddingNewAddresses.png" /></p>
<p>When AddLocationButton is clicked, we make our address data entry visible (using screen arrangement), allowing user to enter address. If user clicks on Cancel, we make the arrangement hidden again. Using this approach, we keep the screen simple and avoid the clutter. We also provide the SubmitButton to allow the user to indicate that they want to store data.</p>
<p>When the user clicks on SubmitButton, we perform basic validation to ensure data has been submitted. If validation does not pass, we display an error message. Otherwise, we invoke a procedure that appends the new address to our list. We also store the updated list into our database. Once address is added, we hide our arrangement again.  The blocks below show how this logic is done:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/SubmittingNewAddresses.png" /></p>
<h4 class="ai-header">Selecting an Addresses</h4>
<p>When the user clicks on ListPicker1 ‘Select Location’ and selects an address, this action calls the blocks below:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/ListPicker1AfterPicking.png" /></p>
<p>This displays the address in the device and allow the user to tap on ViewOnMapButton to see the blocks selected address on the Google Map — see the figure below:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/SelectAddress.png" /></p>
<p>When ViewOnMapButton is clicked, we validate to ensure that an address already has been selected. If not, an error message is displayed. Otherwise, we use blocks below to show address:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/ViewOnMapBlocks.png" /></p>
<p>The above blocks will open the map and the output will be like image below:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/Map.png" /></p>
<h4 class="ai-header">Viewing Current Location On the Map</h4>
<p>We have dropped in a button, MyLocationButton ‘My location On the Map’ that can be clicked to view one's current location. It will use </p>
<p><img src="http://appinventor.mit.edu/explore/sites/all/files/ai2tutorials/mapIt/MyLocationButtonBlocks.png" /></p>
<h4 class="ai-header">Download Source Code</h4>
<p>If you'd like to work with this sample in App Inventor, download the <a href="sites/all/files/ai2tutorials/mapIt/MapIt_MIT.aia">source code</a> to your computer, then open App Inventor, click <b>Projects</b>, choose <b>Import project (.aia) from my computer...</b>, and select the source code you just downloaded.</p>
<pre class="ai-box">MIT App Inventor expresses its gratitude to M. Hossein Amerkashi for developing this tutorial. Visit <a href="http://amerkashi.wordpress.com/2014/02/27/how-to-develop-location-based-android-app/">Hossein's blog</a> to find out more about him and his App Inventor support materials.</pre></div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">ListPicker</li><li class="field-item odd">Data Storage</li><li class="field-item even">Activity Starter</li><li class="field-item odd">External API</li><li class="field-item even">Location Sensor</li><li class="field-item odd">GPS</li></ul></section>  </div>

  
  
  <article id="article-498" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/location-sensor" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Exploring with Location Sensor in AI2                  </h1>
      
      
    </header>
    <span property="dc:title" content="Exploring with Location Sensor in AI2" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p><a href="https://docs.google.com/document/d/1V1Zm5cYoa12KVb_cTlfelSfyUkW7IH2WPHUoTa02XaY/pub">Go to tutorial</a></p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Location Sensor</li><li class="field-item odd">GPS</li></ul></section>  </div>

  
  
  <article id="article-556" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/oh-my-spikes" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Oh My Spikes                  </h1>
      
      
    </header>
    <span property="dc:title" content="Oh My Spikes" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p>This tutorial by Saj Dutta shows how to create a complete game from scratch.  The game is variant of the popular spikes games and uses App Inventor sprites.</p>
<p><a href="http://www.imagnity.com/android/oh-my-spikes-create-a-game-from-scratch-using-app-inventor/">Go to tutorial</a></p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">Game</li></ul></section>  </div>

  
  
  <article id="article-919" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/webview-javascript" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      WebView Javascript Processor for App Inventor                  </h1>
      
      
    </header>
    <span property="dc:title" content="WebView Javascript Processor for App Inventor" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p><i>This tutorial is written by Rich Interdonato, MIT Master Trainer.</i></p>
<p>App Inventor allows users to write powerful programs using blocks instead of “traditional” programming languages.  It also allows advanced users to include traditional Java code in their apps by means of its new Extensions feature.  What you might not know is that there is another, even older way for you to incorporate “traditional” programming into your apps.  The technique involves using the WebViewer component as a javascript processor, and this blog post will show you how it can be done using a simple example.  In it, an HTML file is sent input text from an App Inventor program, it reverses the text using javascript, and then it sends the result back to the App Inventor program as output that the app can use (show to the user in a Message Dialog).</p>
<p>Our example requires an HTML file that includes javascript that can reverse text.  The file is included below, and the javascript command that reverses the text is highlighted in <span style="background-color:black;">yellow</span>.  The javascript in this file is like the other javascript you might find on the Web, except in one way.  It includes two special App Inventor Only functions, <span style="background-color:black;">window.AppInventor.getWebViewString()</span> and <span style="background-color:black;">window.AppInventor.setWebViewString()</span>.  It is these two, App Inventor Only functions that allow your apps to communicate with the javascript that runs inside the WebViewer component.  By using them creatively, you can leverage the vast number of javascript programs that are freely available on the Web, and some of them can be really useful.</p>
<p>For now, let’s keep things simple and create a file called <span style="font-family: Courier;">javascriptWebViewProcessor.html</span>.  The complete text of the file follows:</p>
<h3>HTML file (included as media/asset: javascriptWebViewProcessor.html)</h3>
<p><span style="font-family: Courier;"></span></p>
<pre>
&lt;!doctype html&gt;
&lt;head&gt;
&lt;title&gt;WebView Javascript Processor&lt;/title&gt;
&lt;/head&gt;

&lt;body onload="processJavascript();"&gt;
&lt;b&gt;This page includes a javascript function that reverses text.&lt;/b&gt;
&lt;p&gt;The javascript function incorporates a special App Inventor feature called &lt;i&gt;window.AppInventor.getWebViewString()&lt;/i&gt;, which allows App Inventor apps to communicate with the WebViewer component's internal processing of javascript.
&lt;p&gt;This simple example shows how to use the &lt;i&gt;window.AppInventor.getWebViewString()&lt;/i&gt; function to pass data to and from the WebViewer component, and thereby an App Inventor app.

&lt;script&gt;
    var result = new Date().toString();
    var appInventorInput = <span style="background-color:black;">window.AppInventor.getWebViewString()</span>;
        function processJavascript() {
        if (appInventorInput.length &gt; 0) {
            document.write( "WebView InputString received FROM app:<br />" + appInventorInput );
            <span style="background-color:black;">result = appInventorInput.split("").reverse().join("");</span>
            document.write( "&lt;p/&gt;WebView InputString sending BACK TO app:&lt;br/&gt;" +
            result );
        } else {
            document.write( "No WebView InputString set by app at: &lt;br/&gt;" + result );
        }
        <span style="background-color:black;">window.AppInventor.setWebViewString( result )</span>;
    }
&lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre><p></p>
<h3>Designer</h3>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/webviewer-designer.png" style="display:block; margin:auto; width: 80%;" /></p>
<p>Once the <span style="font-family: Courier;"> javascriptWebViewProcessor.html</span> has been created, make a new App Inventor app called SimpleWebviewerJavascriptProcessor, and upload the HTML file as an app media asset.  Add a HorizontalArrangement with a:</p>
<ul><li><i>TextBox</i> named <i>StringToBeProcessedByJavascriptFile</i></li>
<li><i>Button</i> named <i>btnProcess</i></li>
</ul><p>Also, using the default names and properties for each, add a:</p>
<ul><li>WebViewer component</li>
<li>Notifier component</li>
<li>Clock component</li>
</ul><h3>
Blocks Overview</h3>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/webviewer-blocks-overview.png" style="display:block; margin:auto; width: 100%;" /><br />
As you can see, the blocks for this app are quite simple.  There are 4 variables and 3 event handlers.  Each will be explained in individual sections.</p>
<h4>Variables</h4>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/webviewer-variables.png" style="display:block; margin:auto; width: 80%;" /></p>
<p><strong>processingIntervalMillis:</strong> sets the frequency of calls to the WebViewer component from the App Inventor app<br /><strong>debugMode:</strong> used to specify the location of the HTML file that is used by the WebViewer because App Inventor apps use different directories for development and running apps<br /><strong>currentProcessingDurationMillis:</strong> tracks the amount of time (in milliseconds) that the WebViewer has been working as it processes the javascript in the HTML file<br /><strong>maximumProcessingDurationMillis:</strong> controls the number of milliseconds that the app will wait for a reply from the WebViewer component before determining that it is unresponsive</p>
<p><span style="font-weight: bold; text-decoration: underline;">Screen1.Initialize</span><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/webviewer-initialize.png" style="display:block; margin:auto; width: 50%;" /></p>
<p>This block sets the <i>WebViewer1.HomeUrl</i> property to either <span style="font-family: Courier;">file:///mnt/sdcard/AppInventor/assets/javascriptWebViewProcessor.html</span> (when <strong>debugMode</strong> is TRUE), or <span style="font-family: Courier;">file:///android_asset/javascriptWebViewProcessor.html</span> (when <strong>debugMode</strong> is FALSE).  It then sets the <i>Clock1.TimerInterval</i> property to the value of <strong>processingIntervalMillis</strong> (50ms), and disables the <i>Clock1</i> component so it does not start triggering events as soon as the app starts.</p>
<p><span style="font-weight: bold; text-decoration: underline;">btnProcess.Click</span><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/webviewer-btnprocess.png" style="display:block; margin:auto; width: 50%;" /></p>
<p>The <span style="font-family: Courier;">javascriptWebViewProcessor.html</span> file processing begins once the user activates the app.  This activation is captured by the <i>btnProcess.Click</i> event handler block, which sets the <i>WebViewer1.WebViewString</i> component to the value of the <i>StringToBeProceesedByJavascriptFile.Text</i>.  Then the <i>WebViewer1.GoHome</i> procedure is called, which causes the WebViewer to load the <span style="font-family: Courier;">javascriptWebViewProcessor.html</span> page, thereby starting the javascript processing.  Once the javascript processing has begun, the app needs to monitor progress, and so the <i>Clock1.TimerEnabled</i> property is set to TRUE.</p>
<p><span style="font-weight: bold; text-decoration: underline;">Clock1.Timer</span><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/webviewer-timer.png" style="display:block; margin:auto; width: 50%;" /></p>
<p>As soon as the <i>Clock1.TimerEnabled property</i> is set to TRUE, the <i>Clock1.Timer</i> event begins to fire at an interval set by the <strong>processingIntervalMillis</strong> value in the <i>Screen1.Initialize</i> event.  Each time the <i>Clock1.Timer</i> event is triggered, the app <u>first</u> checks to see if the value of the <i>WebViewer1.WebViewString</i> is the same as the <i>StringToBeProcessedByJavascriptFile.Text</i>.  If they are the same, this means that the WebViewer component is still processing the javascript, and it increments the <strong>currentProcessingDurationMillis</strong> by the <strong>processingIntervalMillis</strong> and then checks to see if the new <strong>currentProcessingDurationMillis</strong> value is greater than or equal to the <strong>maximumProcessingDurationMillis</strong> value.  If it is, the app changes to value of the <i>WebViewer1.WebViewString</i> property (by concatenating adds the text “ TIMEOUT” to the current value of <i>StringToBeProcessedByJavascriptFile.Text</i> to make it different from the value of the  <i>StringToBeProcessedByJavascriptFile.Text</i>, and thereby ensure that the next time the <i>Clock1.Timer</i> event is triggered, the <span style="text-decoration: underline;">first</span> check will fail.</p>
<p>As soon as the <span style="text-decoration: underline;">first</span> check fails (i.e. <i>WebViewer1.WebViewString</i> differs from <i>StringToBeProcessedByJavascriptFile.Text</i>), the app will reset the <i>StringToBeProcessedByJavascriptFile.Text</i> to an empty string (“”), set <i>Clock1.TimerEnabled</i> to FALSE, and then display a message to the user in a Message Dialog that includes the result of the javascript processing, as well as how long it took to do it.  The output of the processing is available to the app in the <i>WebViewer1.WebViewString</i> property, which is set inside the javascript processing file.  As a final “cleanup” action, the <strong>currentProcessingDurationMillis</strong> is reset to 0, so the next time the user clicks on <i>btnProcess</i>, the app will properly calculate the processing duration.</p>
<h3>Conclusion</h3>
<p>In this article, we have explored how the WebViewer component can be used to process javascript in your App Inventor apps.  Our example was simple, but it demonstrated the fact that App Inventor can communicate with running javascript, and this provides you with a foundation for more advanced and useful javascript processing.  There is a LOT of javascript code available on the web, and some of it can be used immediately by you to implement advanced features in your apps.  In my next blog post, I will explore an advanced application of WebView javascript processing that you can use right away to freely make your apps much more secure.  Until then, keep inventing!</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">WebViewer</li></ul></section>  </div>

  
  
  <article id="article-921" class="node node-tutorial article odd node-lang-en node-full clearfix" about="/ai2/firebase" typeof="sioc:Item foaf:Document" role="article">

  
        <header class="clearfix">

      
<hr>              <h1 class="node-title">
                      Firebase Authentication in App Inventor Using Javascript                  </h1>
      
      
    </header>
    <span property="dc:title" content="Firebase Authentication in App Inventor Using Javascript" class="rdf-meta element-hidden"></span>
  <div class="node-content">
  <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><p><i>This tutorial is written by MIT Master Trainer Rich Interdonato.</i></p>
<p>The Firebase component that is provided by App Inventor is super useful, especially when you need to update any number of apps with fresh data.  In addition to using Firebase as a datastore, you can also leverage its website authentication in your apps to take care of your user management needs.  This means, sign-up, email verification, and login.  What is more, all the user information is stored and maintained on Firebase’s servers, so the most difficult problems of user authentication are solved for you.</p>
<p>Firebase provides the javascript code that handles all the necessary steps to setup, and then log in, new and existing users.  Read more about the details <a href="https://firebase.google.com/docs/auth/web/password-auth" target="_blank">here</a>.  This javascript code can be included in a static HTML file, which you can then add to the apps you create with App Inventor, so long as you also incorporate a WebViewer component to process it for you, AND you make a few simple modifications to it so App Inventor can “look inside” the running javascript.  All of this will be explained in the sections that follow.  But first you must set up a Firebase account and set it to allow users to authenticate using an email and their password.</p>
<h3>Set Up Firebase to use Email/Password Authentication</h3>
<p>Setting up a datastore is really easy once you have a Firebase account.  Once you create one and log in, there are only 4 steps required to use Firebase authentication.</p>
<p><strong>Step 1</strong></p>
<p>The first thing you must do to use Firebase authentication is to create a project.  This can be completed at <a href="https://console.firebase.google.com/" target="_blank">https://console.firebase.google.com/</a>.  Simply click on the <strong>Add project</strong> button and you will be presented with the <strong>Create a project</strong> dialog.  Complete the dialog’s fields and then click on the <strong>CREATE PROJECT</strong> button.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-start.png" style="display:block; margin:auto; width: 80%;" /></p>
<p><strong>Step 2</strong></p>
<p>Second, click on the <strong>Add Firebase to your web app button</strong> that is shown in the image below:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-project.png" style="display:block; margin:auto; width: 80%;" /></p>
<p><strong>Step 3</strong></p>
<p>The <strong>Add Firebase to your web app</strong> dialog shows you all the necessary information that you will need to use Firebase’s website security in your App Inventor apps.  This information includes:</p>
<ul><li>apiKey</li>
<li>databaseURL</li>
<li>storageBucket</li>
<li>messageSenderId</li>
</ul><p>These values are presented as comma delimited, key:”value” pairs, surrounded by curly braces {}.  You will use this information as the value for the <strong>firebaseCredentials</strong> variable in the App Inventor Blocks Editor.</p>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-add-to-project.png" style="display:block; margin:auto; width: 80%;" /></p>
<p>PLEASE NOTE: you can delete the authDomain and projectId key value pairs if you like because they are optional.  However, you must remember the surrounding curly braces and the quotes around all the keys and values, as shown below:</p>
<pre>
	{
		"apiKey":"YOUR_apiKey_HERE",
		"databaseURL":"YOUR_databaseURL_HERE",
		"storageBucket":"YOUR_storageBucket_HERE",
		"messagingSenderId":"YOUR_messagingSenderId_HERE"
	}
</pre><p>Note that all the key/value pairs must have quotes around them. If you copy/paste from the Firebase window, you may have to add quotes. All of this information can be compressed into a single line and it will work just fine:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/apikey.png" style="display:block; margin:auto; width: 80%;" /></p>
<p><strong>Step 4</strong></p>
<p>Lastly you must enable the Email/Password SIGN-IN METHOD on Firebase’s Authentication page.  This simply involves selecting the Authentication menu option (on the left) and then clicking on the pencil icon at the end of the Email/Password row as shown below:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-email.png" style="display:block; margin:auto; width: 80%;" /></p>
<p>Doing so will display the Email/Password dialog as follows:</p>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-email-dialog.png" style="display:block; margin:auto; width: 80%;" /></p>
<p>After enabling the Email/Password Authentication, click SAVE and Firebase will then allow your website – and your App Inventor apps that use the FirebaseAuthenticator.html page (below) – to make use of the features and power of Firebase’s own security.  And that is pretty awesome!</p>
<p>More information about fine tuning Firebase’s authentication can be found here.</p>
<h3>Edit the Firebase Website Authentication HTML file <span style="font-family: Courier;">(FirebaseAuthenticator.html)</span></h3>
<p>This example file is almost an exact copy of the original one that can be found <a href="https://github.com/firebase/quickstart-js/blob/master/auth/email.html" target="_blank">here</a>.  The changes that have been made are highlighted in <span style="background-color:black;">yellow</span> below.  The reason the changes are necessary is that the WebViewer component understands some special, App Inventor only javascript that allows it to communicate with the javascript as it runs inside web pages.  By using Firebase’s website authentication inside a WebViewer, App Inventor apps can show users a login page as if the app were a real website, and once the user is logged in, the WebViewer can tell the app that the user has been authenticated (or not).<br /><span style="font-family: Courier;"></span></p>
<pre>

<!--
Copyright (c) 2016 Google Inc.
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=utf-8 /&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;Email/Password Authentication Example&lt;/title&gt;

  &lt;!-- Material Design Theming --&gt;
  &lt;link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css"&gt;
  &lt;link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"&gt;
  &lt;script defer src="https://code.getmdl.io/1.1.3/material.min.js"&gt;&lt;/script&gt;

  &lt;!-- Firebase --&gt;


&lt;script src="https://www.gstatic.com/firebasejs/3.7.2/firebase.js"&gt;&lt;/script&gt;
&lt;script&gt;<span style="background-color:black;">
  // Initialize Firebase
  
  // Get the Firebase configuration from App Inventor via the WebViewer.WebViewString property
  var config = JSON.parse(window.AppInventor.getWebViewString());
  
  firebase.initializeApp(config);
&lt;/script&gt;

  &lt;script type="text/javascript"&gt;
    function tellAppInventor(message) {
        try {
            window.AppInventor.setWebViewString( message );
        } catch(e) {
            console.log("App Inventor Communication Error",e)
        }
    }
    </span>
    /**
     * Handles the sign in button press.
     */
    function toggleSignIn() {
      if (firebase.auth().currentUser) {
        // [START signout]
        firebase.auth().signOut();
        // [END signout]
      } else {
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        if (email.length &lt; 4) {
          <span style="background-color:black;">tellAppInventor</span>('Please enter an email address.');
          return;
        }
        if (password.length &lt; 4) {
          <span style="background-color:black;">tellAppInventor</span>('Please enter a password.');
          return;
        }
        // Sign in with email and pass.
        // [START authwithemail]
        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          // [START_EXCLUDE]
          if (errorCode === 'auth/wrong-password') {
            <span style="background-color:black;">tellAppInventor</span>('Wrong password.');
          } else {
            <span style="background-color:black;">tellAppInventor</span>(errorMessage);
          }
          console.log(error);
          document.getElementById('quickstart-sign-in').disabled = false;
          // [END_EXCLUDE]
        });
        // [END authwithemail]
      }
      document.getElementById('quickstart-sign-in').disabled = true;
    }
    /**
     * Handles the sign up button press.
     */
    function handleSignUp() {
      var email = document.getElementById('email').value;
      var password = document.getElementById('password').value;
      if (email.length &lt; 4) {
        <span style="background-color:black;">tellAppInventor</span>('Please enter an email address.');
        return;
      }
      if (password.length &lt; 4) {
        <span style="background-color:black;">tellAppInventor</span>('Please enter a password of 4 or more characters.');
        return;
      }
      // Sign in with email and pass.
      // [START createwithemail]
      firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // [START_EXCLUDE]
        if (errorCode == 'auth/weak-password') {
          <span style="background-color:black;">tellAppInventor</span>('The password is too weak.');
        } else {
          <span style="background-color:black;">tellAppInventor</span>(errorMessage);
        }
        console.log(error);
        // [END_EXCLUDE]
      });
      // [END createwithemail]
    }
    /**
     * Sends an email verification to the user.
     */
    function sendEmailVerification() {
      // [START sendemailverification]
      firebase.auth().currentUser.sendEmailVerification().then(function() {
        // Email Verification sent!
        // [START_EXCLUDE]
        <span style="background-color:black;">tellAppInventor</span>('Email Verification Sent!');
        // [END_EXCLUDE]
      });
      // [END sendemailverification]
    }
    function sendPasswordReset() {
      var email = document.getElementById('email').value;
      // [START sendpasswordemail]
      firebase.auth().sendPasswordResetEmail(email).then(function() {
        // Password Reset Email Sent!
        // [START_EXCLUDE]
        <span style="background-color:black;">tellAppInventor</span>('Password Reset Email Sent!');
        // [END_EXCLUDE]
      }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // [START_EXCLUDE]
        if (errorCode == 'auth/invalid-email') {
          <span style="background-color:black;">tellAppInventor</span>(errorMessage);
        } else if (errorCode == 'auth/user-not-found') {
          <span style="background-color:black;">tellAppInventor</span>(errorMessage);
        }
        console.log(error);
        // [END_EXCLUDE]
      });
      // [END sendpasswordemail];
    }
    /**
     * initApp handles setting up UI event listeners and registering Firebase auth listeners:
     *  - firebase.auth().onAuthStateChanged: This listener is called when the user is signed in or
     *    out, and that is where we update the UI.
     */
    function initApp() {
      // Listening for auth state changes.
      // [START authstatelistener]
      firebase.auth().onAuthStateChanged(function(user) {
        // [START_EXCLUDE silent]
        document.getElementById('quickstart-verify-email').disabled = true;
        // [END_EXCLUDE]
        if (user) {
          // User is signed in.
          var displayName = user.displayName;
          var email = user.email;
          var emailVerified = user.emailVerified;
          var photoURL = user.photoURL;
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          var providerData = user.providerData;

          <span style="background-color:black;">if (emailVerified &amp;&amp; !isAnonymous) {
                tellAppInventor( uid + ',' + email + ',' + displayName + ',' + photoURL );
            } else if (!emailVerified) {
                tellAppInventor( 'Please click the Send Email Verification button to confirm your account.' );
            }</span>
          
          // [START_EXCLUDE]
<span style="background-color:black;">//</span>          document.getElementById('quickstart-sign-in-status').textContent = 'Signed in';
<span style="background-color:black;">//</span>          document.getElementById('quickstart-sign-in').textContent = 'Sign out';
<span style="background-color:black;">//</span>          document.getElementById('quickstart-account-details').textContent = JSON.stringify(user, null, '  ');
          if (!emailVerified) {
            document.getElementById('quickstart-verify-email').disabled = false;
          }
          // [END_EXCLUDE]
        } else {
          // User is signed out.
          // [START_EXCLUDE]
<span style="background-color:black;">//</span>          document.getElementById('quickstart-sign-in-status').textContent = 'Signed out';
<span style="background-color:black;">//</span>          document.getElementById('quickstart-sign-in').textContent = 'Sign in';
<span style="background-color:black;">//</span>          document.getElementById('quickstart-account-details').textContent = 'null';
          // [END_EXCLUDE]
        }
        // [START_EXCLUDE silent]
        document.getElementById('quickstart-sign-in').disabled = false;
        // [END_EXCLUDE]
      });
      // [END authstatelistener]
      document.getElementById('quickstart-sign-in').addEventListener('click', toggleSignIn, false);
      document.getElementById('quickstart-sign-up').addEventListener('click', handleSignUp, false);
      document.getElementById('quickstart-verify-email').addEventListener('click', sendEmailVerification, false);
      document.getElementById('quickstart-password-reset').addEventListener('click', sendPasswordReset, false);
    }
    window.onload = function() {
      initApp();
    };
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header"&gt;

  &lt;!-- Header section containing <span style="background-color:black;">title</span> 
  &lt;header class="mdl-layout__header mdl-color-text--white mdl-color--light-blue-700"&gt;
    &lt;div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid"&gt;
      &lt;div class="mdl-layout__header-row mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--8-col-desktop"&gt;
        &lt;a href="/"&gt;&lt;h3&gt;Firebase Authentication&lt;/h3&gt;&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/header&gt;
  <span style="background-color:black;">--&gt;</span>

  &lt;main class="mdl-layout__content mdl-color--grey-100"&gt;
    &lt;div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid"&gt;

      &lt;!-- Container for the demo --&gt;
      &lt;div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop"&gt;
        &lt;div class="mdl-card__title mdl-color--light-blue-600 mdl-color-text--white"&gt;
          <span style="background-color:black;">&lt;h2 class="mdl-card__title-text"&gt;Sign In or Sign Up&lt;/h2&gt;</span>
        &lt;/div&gt;
        &lt;div class="mdl-card__supporting-text mdl-color-text--grey-600"&gt;
          &lt;p&gt;Enter an email and password below and either sign in to an existing account or sign up&lt;/p&gt;

          &lt;input class="mdl-textfield__input" style="display:inline;width:auto;" type="text" id="email" name="email" placeholder="Email"/&gt;
          <span style="background-color:black;">&lt;p/&gt;&lt;p/&gt;</span>
          &lt;input class="mdl-textfield__input" style="display:inline;width:auto;" type="password" id="password" name="password" placeholder="Password"/&gt;
          <span style="background-color:black;">&lt;p/&gt;</span>
          &lt;button disabled class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-sign-in" name="signin"&gt;Sign In&lt;/button&gt;
             
          &lt;button class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-sign-up" name="signup"&gt;Sign Up&lt;/button&gt;
          <span style="background-color:black;">&lt;p/&gt;</span>
          &lt;button class="mdl-button mdl-js-button mdl-button--raised" disabled id="quickstart-verify-email" name="verify-email"&gt;Send Email Verification&lt;/button&gt;
          <span style="background-color:black;">&lt;p/&gt;</span>
          &lt;button class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-password-reset" name="verify-email"&gt;Send Password Reset Email&lt;/button&gt;
          <span style="background-color:black;">&lt;p/&gt;</span>

          &lt;!-- Container where we'll display the user details --&gt;
          <span style="background-color:black;">&lt;div class="quickstart-user-details-container" style="display:none"&gt;
            Sign-in</span> status: &lt;span id="quickstart-sign-in-status"&gt;Unknown&lt;/span&gt;
            <span style="background-color:black;">&lt;div&gt;Authorization</span> &lt;code&gt;currentUser&lt;/code&gt; object value:&lt;/div&gt;
            &lt;pre&gt;&lt;code id="quickstart-account-details"&gt;null&lt;/code&gt;&lt;/pre&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

    &lt;/div&gt;
  &lt;/main&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;

</pre><h3>Create an App Inventor App to Use Firebase Website Authentication</h3>
<h3>Designer</h3>
<p><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-designer.png" style="display:block; margin:auto; width: 80%;" /></p>
<p>The Designer is really quite simple.  There are only three components on Screen1: a WebViewer, a  Notifier, and a Clock.  There is also an included asset file, <span style="font-family: Courier;">FirebaseAuthenticator.html</span>.</p>
<ul><li><strong>WebViewer</strong> – loads the FirebaseAuthenticator.html file, and uses the javascript it contains to access Firebase’s website authentication system.</li>
<li><strong>Notifier</strong> – displays alert messages to the user about the status of the login process, and reports when the user is successfully logged in.</li>
<li><strong>Clock</strong> – periodically checks the status of the WebViewer’s javascript that handles logging in to Firebase. </li>
</ul><p>
You may notice that there are no Buttons or other components needed to start the login process from our App Inventor app.  This is because the web page <span style="font-family: Courier;">(FirebaseAuthenticator.html)</span> has its own buttons to do that as part of Firebase’s ready-made login screen!</p>
<p><srong>Blocks Overview<br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-blocks-overview.png" style="display:block; margin:auto; width: 100%;" /></srong></p>
<p>As you can see, the blocks for this app are also quite simple.  There are only 3 variables, 2 event handlers, and 1 procedure needed to incorporate Firebase’s website authentication into an App Inventor app.  Each will be explained in individual sections below.</p>
<p><strong>Variable</strong><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-variable-blocks.png" style="float:left; width: 80%;" /><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-firsttime.png" style="clear:both; float:left; width: 40%;" /></p>
<p style="clear:both;">The variables needed by the app are as follows:</p>
<ul><li><strong>firebaseCredentials</strong> – contains the information needed to connect to your Firebase database.  Firebase expects these credentials to be submitted as a JSON string composed of your <i>apiKey, authDomain, databaseURL, projectId, storageBucket</i>, and <i>messagingSenderId</i> (see comment in the image above).  All of these values can be found here on Firebase’s website, and the <i>authDomain</i> and <i>projectId</i> values are technically optional, but it doesn’t hurt to include them as well.</li>
<li><strong>debugMode</strong> – used to set the location of the HTML file that is used by the WebViewer because App Inventor apps use different directories for development and running apps.</li>
<li><strong>LIST_userId_email_name_photoUrl</strong> – holds the user credentials obtained after a user successfully logs in via the WebViewer component.</li>
<li><strong>firstTime</strong> – used to test if the Clock timer is firing for the first time, to allow for a time lag when displaying the WebViewer on app start.</li>
</ul><p><i>Screen1.Initialize</i><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-initialize.png" style="float: left; width: 80%;" /></p>
<p style="clear:both;">As soon as the app opens, the Screen1.Initialize event is triggered and the following occurs, in order:</p>
<ol><li>The Clock1.TimerInterval property is set to 5000 milliseconds.  This causes the Clock1.Timer event to fire every 5 seconds.  This value can be adjusted based on your own needs and experience with the app, but the Firebase authentication process seems to work with this setting.</li>
<li>Based on the value of the debugMode variable, the directory that the app looks for the <span style="font-family: Courier;">FirebaseAuthenticator.html</span> is set so the app will work in both debug and run modes.</li>
<li>WebViewer1.WebViewString is set to the value of the <strong>firebaseCredentials</strong> variable, so that the WebViewer will have the necessary configuration to work with your Firebase instance.  This information includes your apiKey, databaseURL, storageBucket, and messagingSenderId.</li>
<li>The WebViewer is instructed to go to its home page, which means load the <span style="font-family: Courier;">FirebaseAuthenticator.html file.</span></li>
<li>The Clock1.TimerEnabled property is set to true, which starts the Clock1.Timer event firing.</li>
</ol><p>
<i>Clock1.Timer</i><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/firebase-timer.png" style="float: left; width: 80%;" /></p>
<p style="clear:both;">The first time the Clock timer goes off, we want to call WebViewer.GoHome to run the javascript code. Due to time lag, we can’t count on Screen1.Initalize to do this, so the 5 second time lag is enough to load the code. We only want this to happen the first time, so we’ll set firstTime to false and continue.</p>
<p>This event is where App Inventor repeatedly checks the state of the javascript code that is running in the WebViewer component.  Each time the event is triggered, it checks to see if the WebViewer1.WebViewString is not empty and that it is different from the text in the <strong>firebaseCredentials</strong> variable.  If so, then it checks to see if the text is “Email Verification Sent!”.  If it is, then the app knows that the user is setting up an account and Firebase is waiting for the user to confirm their email address, so the app tells the WebViewer component to GoHome, where the rest of the login process can occur.</p>
<p>If the WebViewer1.WebViewString contains an “@” symbol, then this means that the login was successful, so the WebViewer.Visible and Clock1.TimerEnabled properties are set to false.  Also, as soon as the user is authenticated by Firebase, the WebViewer1.WebViewString property contains a comma separated value list of the user’s userId, email address, user name, and photo URL, and this text is stored in the variable <strong>LIST_userId_email_name_photoUrl</strong>.  Since the user has been authenticated, another procedure is called: <strong>AuthenticatedInitialize</strong>, and this is where you insert the code you want your app to run immediately after a user logs in.  In short, your app really should START with the <strong>AuthenticatedInitialize</strong> event.</p>
<p>If the WebViewer1.WebViewString does not contain an “@” symbol, then this means that some other message has been sent from the javascript inside the <span style="font-family: Courier;">FirebaseAuthenticator.html</span> file, and it should be shown to the user.  These messages are usually about incorrect passwords or user names.</p>
<p>Finally, if the WebViewer1.WebViewString was not empty and did not match the text in the <strong>firebaseCredentials</strong> variable when the Clock1.Timer event was triggered, it is reset to an empty string ("") so that the next time the Clock1.Timer event is triggered, it will only take action if the javascript running inside the <span style="font-family: Courier;">FirebaseAuthenticator.html</span> file has set it to some non-empty value.</p>
<p><i>AuthenticatedInitialize Procedure</i><br /><img src="http://appinventor.mit.edu/explore/sites/explore.appinventor.mit.edu/files/authenticate-initialize.png" style="float: left; width: 80%;" /></p>
<p style="clear:both;">The <strong>AuthenticatedInitialize</strong> procedure is where the App Inventor app <i>really</i> begins, once a user has been authenticated by Firebase. In our example, this means that the app changes the Screen1.Title property to "AUTHENTICATED USER" to remind you that the user’s credentials have been authenticated.  It also displays a reminder to you in a Notification dialog, so that you remember to add your own blocks.</p>
<h3>Conclusion</h3>
<p>With 3 components, 2 events, and 1 procedure, we have been able to leverage Firebase’s website security infrastructure for an Android app created with App Inventor.  This is enormously powerful, secure, and useful.  Thank you Firebase for doing all the “heavy lifting” for us with your website authentication javascript, and thank you App Inventor for providing the WebViewer component with the ability to “look inside” any javascript that is running on an HTML page!</p>
<p>
*One last pro-tip for all you App Inventors out there: make sure you set the <strong>debugMode</strong> variable correctly.  While you are developing your app using App Inventor, it should be set to true.  When you build your apk file, it should be set to false.  If you set it incorrectly the app will display an error message about how the <span style="font-family: Courier;">FirebaseAuthenticator.html</span> file cannot be found – and nobody likes that. :)</p>
</div></div></div><section class="field field-name-field-version field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Version:&nbsp;</h2><ul class="field-items"><li class="field-item even"><a href="http://appinventor.mit.edu/explore/tutorial-version/app-inventor-2.html" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">App Inventor 2</a></li></ul></section><section class="field field-name-field-tutorial-difficulty field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Difficulty:&nbsp;</h2><ul class="field-items"><li class="field-item even">Advanced</li></ul></section><section class="field field-name-field-tutorial-type field-type-taxonomy-term-reference field-label-above view-mode-full view-mode-full"><h2 class="field-label">Tutorial Type:&nbsp;</h2><ul class="field-items"><li class="field-item even">WebViewer</li></ul></section>  </div>

  
  

<br>
<br>
<br>
<br>

<script>
  $(function() {
    var toc = $('#toc');

    function makeLi(text, href) {
      return $('<a href="' + href + '" target="_self">' + text + '</a><br>');
    }

    $('.node-title').each(function(i) {
      var chapter = $(this), chapterNumber = i + 1;
      toc.append(
        makeLi(chapter.text(), '#chapter-' + chapterNumber)
      );
      chapter.attr('id', 'chapter-' + chapterNumber);
    });

  });
</script>
</body>
</html>
