
<!DOCTYPE html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width"/>
<title>common idioms</title>
<link href="https://fonts.googleapis.com/css?family=Roboto:400" rel="stylesheet" type="text/css">
<link href="..\maincss.css" rel="stylesheet" type="text/css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<style>
html,body { -webkit-text-size-adjust:none; }
body {
  font-family: 'Patrick Hand', sans-serif;
  font-size: 1.5vw;
  background-color: black;
  color: gray;
  justify-content: center;
  align-content: center;
  width: 90%;
  margin: 3vh auto;
}

.questiontitle {
  margin: auto;
  margin-bottom: 2.5rem;
  color: grey;
}

.question, .answer {
  margin: auto;
  padding: 2px 2px;
  font-size: 24px;
  color: #10C030;
}
.answer{color: black}
.answer.appear{color: grey}

button, .jumpButton {
  background-color: black;
  outline: none;
  padding: 5px 10px;
  font-size: 1rem;
  display: inline-block;
  margin: auto;
  margin-top: 2.5rem;
  cursor: pointer;
  border: 1px solid darkgreen;
  border-radius: 8px;
  box-shadow: 2px 2px 4px darkgreen inset;
  text-shadow: 1px 1px 5px grey, -1px -1px 1px grey;
  color: #20A020;
}

</style>

</head>

<body onkeypress="chkKey()">
	<div class="mainFrame">
	<h4 class="questiontitle" onclick=swapList()>common idioms</h4>

	<div class="question"> </div><br>

	<div class="answer"> </div><br>

	<center>
	<button class="jumpButton" onclick=jpButClick()>Cards Left: <span class="questionsLeft"></span></button>
	<button onclick=speak()>speak</button>
	<button onclick=jpback()>back</button>
	</center>
	</div>

<script>
// List of Q & A
var questionList = [
"The best of both worlds",
"Speak of the devil",
"See eye to eye",
"Once in a blue moon",
"When pigs fly",
"To cost an arm and a leg",
"A piece of cake",
"Let the cat out of the bag",
"To feel under the weather",
"To kill two birds with one stone",
"To cut corners",
"To add insult to injury",
"You can't judge a book by its cover",
"Break a leg",
"To hit the nail on the head"
];
var answerList = [
"means you can enjoy two different opportunities at the same time.<br>意味着你可以同时享受两种不同的机会。",
"this means that the person you're just talking about actually turns up at that moment.<br>这意味着你正在谈论的那个人实际上是在那个时候出现的。",
"this means agreeing with someone.<br>这意味着与某人达成一致。",
"an event that happens infrequently.<br>很少发生的事件。",
"something that will never happen.<br>永远不会发生的事。",
"something is very expensive.<br>有些东西很贵。",
"something is very easy.<br>很容易的事。",
"to accidentally reveal a secret.<br>无意中泄露秘密",
"to not feel well.<br>感觉不舒服。",
"to solve two problems at once.<br>马上解决两个问题。",
"to do something badly or cheaply.<br>做得不好或便宜。",
"to make a situation worse.<br>使情况变得更糟。",
"to not judge someone or something based solely on appearance.<br>不以外表来判断某人或某事。",
"means ‘good luck' (often said to actors before they go on stage).<br>祝好运！",
"to describe exactly what is causing a situation or problem<br>一针见血"
];

var remainQueNo = questionList.length;

function shuffle() {
 var listlen = questionList.length, j = 0, temp;

 while (listlen--) {
  j = Math.floor(Math.random() * (listlen+1));

  temp = questionList[listlen];
  questionList[listlen] = questionList[j];
  questionList[j] = temp;

  temp = answerList[listlen];
  answerList[listlen] = answerList[j];
  answerList[j] = temp;

 }
}

function showQues() {
  remainQueNo = remainQueNo - 1;
  var pointer = remainQueNo;
  var topic = questionList[pointer];
  var answerContents = answerList[pointer];

  document.querySelector('.question').innerHTML = topic;
  document.querySelector('.answer').innerHTML = answerContents;
  document.querySelector('.questionsLeft').innerHTML = remainQueNo;
  document.querySelector('.jumpButton').focus();

}
$(".answer").click(function () {
   $(this).toggleClass("appear");
});

$.fn.toggleAnswer = function () {
   $(this).toggleClass("appear");
};

function jpButClick() {
  var jpBut = document.querySelector('.jumpButton');
  if (remainQueNo > 0) {showQues();}
  if (remainQueNo === 0) {
      jpBut.innerHTML = 'Bye!';
      jpBut.classList.add('disabled');
  }
}

function jpButClick() {
  var jpBut = document.querySelector('.jumpButton');
  if (remainQueNo > 0) {showQues();}
  if (remainQueNo === 0) {
      jpBut.innerHTML = 'Bye!';
      jpBut.classList.add('disabled');
  }
}

function swapList() {
	var tmp = questionList;
	questionList = answerList;
	answerList = tmp;
	jpButClick();
}

function jpback() {
  remainQueNo = remainQueNo + 2;
  if (remainQueNo <= questionList.length){
	jpButClick();
  } else {
	remainQueNo = questionList.length -1;
  }
}

function speak() {
  var speech = new SpeechSynthesisUtterance(questionList[remainQueNo]);
  speechSynthesis.speak(speech);
}

function chkKey() {
  var testkey = getChar(event);
  if(testkey == 's'){speak();}
  if(testkey == 'f'){jpButClick();}
  if(testkey == 'b'){jpback();}
  if(testkey == 'a'){$(".answer").toggleAnswer();}
}
function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}

shuffle();
showQues();

</script>
</body>
</html>
