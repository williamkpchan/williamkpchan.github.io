<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width"/>
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script type='text/javascript' src='../mainscript.js'></script>

<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, strong,  div.title').click(function(){
    parent.history.back();
    return false;
    });
});
</script>
<style>
body{width:60%;margin-left: 20%; font-size:22px;}
strong, h1, h2 {color: gold;}
img {width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%;}
</style>
</head>
<body onkeypress="chkKey()">
<center><h1>Cross Tabulation Xtabs exercises</h1>
<div id="toc"></div></center>
<br>
<br>
<br>

The <code>xtabs()</code> function creates contingency tables in frequency-weighted format. Use <code>xtabs()</code> when you want to numerically study the distribution of one categorical variable, or the relationship between two categorical variables. Categorical variables are also called "factor" variables in R.</p>
<p>Using a formula interface, <code>xtabs()</code> can create a contingency table, (also a "sparse matrix"), from cross-classifying factors, usually contained in a data frame.</p>
<p>Answers to the exercises are available <a href="https://www.r-exercises.com/2016/5/12/cross-tabulation-with-xtabs-solutions/">here</a>.</p>
<p><strong>Exercise 1</strong><br />
<code>xtabs()</code> with One Categorical Variable</p>
<p>Input the following required Data Frame:<br />
<code><br />
Data1 &lt;- data.frame(Reference = c("KRXH", "KRPT", "FHRA", "CZKK", "CQTN", "PZXW", "SZRZ", "RMZE", "STNX", "TMDW"), Status = c("Accepted", "Accepted", "Rejected", "Accepted", "Rejected", "Accepted", "Rejected", "Rejected", "Accepted", "Accepted"), Gender = c("Female", "Male", "Male", "Female", "Female", "Female", "Male", "Female", "Female", "Female"), Test = c("Test1", "Test1", "Test2", "Test3", "Test1", "Test4", "Test4", "Test2", "Test3", "Test1"), NewOrFollowUp = c("New", "New", "New", "New", "New", "Follow-up", "New", "New", "New", "New"))<br />
</code></p>
<p>The <code>xtabs()</code> function can display the frequency, or count, of the levels of categorical variables. For the first exercise, use the <code>xtabs()</code> function to find the count of levels in the variable, "<code>Status</code>", within the above dataframe, "<code>Data1</code>".</p>
<p><strong>Exercise 2</strong><br />
Two Categorical Variables &#8211; Discoving relationships within a dataset</p><div class='code-block code-block-3' style='margin: 8px 0 8px 8px; float: right;'>

<p>Next, using the <code>xtabs()</code> function, apply two variables from "<code>Data1</code>", to create a table delineating the relationship between the "<code>Reference</code>" category, and the "<code>Status</code>" category.</p>
<p><strong>Exercise 3</strong><br />
Three Categorical Variables &#8211; Creating a Multi-Dimensional Table</p>
<p>Apply three variables from "<code>Data1</code>" to create a Multi-Dimensional Cross-Tabulation of "<code>Status</code>", "<code>Gender</code>", and "<code>Test</code>".</p>
<p><strong>Exercise 4</strong><br />
Creating Two Dimensional Tables from Multi-Dimensional<br />
Cross-Tabulations</p>
<p>Enclose the <code>xtabs()</code> formula from Exercise 3 within the "<code>ftable()</code>" function, to display a Multi-Dimensional Cross-Tabulation in two dimensions.</p>
<p><strong>Exercise 5</strong><br />
Row Percentages</p>
<p>The R package "<code>tigerstats</code>" is required for the next two exercises.</p>
<p><code>if(!require(tigerstats)) {install.packages("tigerstats"); require(tigerstats)}<br />
library(tigerstats)</code></p>
<p>1) Create an <code>xtabs()</code> formula that cross-tabulates "<code>Status</code>", and "<code>Test</code>".<br />
2) Enclose the <code>xtabs()</code> formula in the tigerstats function, "<code>rowPerc()</code>" to display row percentages for "<code>Status</code>" by "<code>Test</code>".</p>
<p><strong>Exercise 6</strong><br />
Column Percentages</p>
<p>1) Create an <code>xtab()</code> formula that cross-tabulates "<code>Reference</code>", and "<code>Status</code>".<br />
2) Use "<code>colPerc()</code>" to display column percentages for "<code>Reference</code>" by "<code>Status</code>".</p>
<p><strong>Exercise 7</strong><br />
Plotting Cross-Tabulations</p>
<p>Use the "<code>plot()</code>" function, and the "<code>xtabs()</code>" function to plot "<code>Status</code>" by "<code>Gender</code>".</p>
<p><strong>Exercise 8</strong><br />
<code>xtabs()</code> &#8211; Explanatory and Response Variables</p>
<p>In order to examine whether the explanatory variable "<code>Gender</code>" affects the response variable "<code> Status</code>", create a two factor <code>xtabs()</code> formula with the Response variable as the first condition, and the Explanatory variable as the second condition.</p>
<p><strong>Exercise 9</strong><br />
Using <code>cbind()</code> with <code>xtabs()</code></p>

<p>Using the "<code>cbind()</code>" function within an <code>xtabs()</code> formula can define the last two columns of a flat table of your dataset. The variable after ~ (tilde) will display as the row data. For example, <code>ftable(xtabs(cbind(variable1, variable2) ~ variable3, data=" "))</code>.</p>
<p>For this exercise, create a flat table with columns for "<code>Gender</code>" and "<code>Test</code>". The row variables are "<code>Reference</code>".</p>
<p><strong>Exercise 10</strong><br />
Testing Correlation with <code>xtabs()</code></p>
<p>When processed through the "<code>summary()</code>" function, an <code>xtabs()</code> formula can test for independence of variables. Therefore, use <code>summary()</code> and <code>xtabs()</code> to test for a "<code>Gender</code>" affecting "<code>Status</code>" correlation.</p>


<pre>
<strong># Answer to Exercise 1#</strong>

Data1 &lt;- data.frame(
Reference = c("KRXH", "KRPT", "FHRA", "CZKK", "CQTN", "PZXW", "SZRZ", "RMZE", "STNX", "TMDW"), 
Status = c("Accepted", "Accepted", "Rejected", "Accepted", "Rejected", "Accepted", "Rejected", "Rejected", "Accepted", "Accepted"), 
Gender = c("Female", "Male", "Male", "Female", "Female", "Female", "Male", "Female", "Female", "Female"), 
Test = c("Test1", "Test1", "Test2", "Test3", "Test1", "Test4", "Test4", "Test2", "Test3", "Test1"), NewOrFollowUp = c("New", "New", "New", "New", "New", "Follow-up", "New", "New", "New", "New")
)

xtabs(~Status, data=Data1)

## Status
## Accepted Rejected 
##        6        4

<strong># Answer to Exercise 2#</strong>

xtabs(~Reference + Status, data=Data1)

##          Status
## Reference Accepted Rejected
##      CQTN        0        1
##      CZKK        1        0
##      FHRA        0        1
##      KRPT        1        0
##      KRXH        1        0
##      PZXW        1        0
##      RMZE        0        1
##      STNX        1        0
##      SZRZ        0        1
##      TMDW        1        0

<strong># Answer to Exercise 3#</strong>

xtabs(~Status + Gender + Test, data=Data1)

## , , Test = Test1
## 
##           Gender
## Status     Female Male
##   Accepted      2    1
##   Rejected      1    0
## 
## , , Test = Test2
## 
##           Gender
## Status     Female Male
##   Accepted      0    0
##   Rejected      1    1
## 
## , , Test = Test3
## 
##           Gender
## Status     Female Male
##   Accepted      2    0
##   Rejected      0    0
## 
## , , Test = Test4
## 
##           Gender
## Status     Female Male
##   Accepted      1    0
##   Rejected      0    1

<strong># Answer to Exercise 4#</strong>

ftable(xtabs(~Reference + Gender + Test, data=Data1))

##                  Test Test1 Test2 Test3 Test4
## Reference Gender                             
## CQTN      Female          1     0     0     0
##           Male            0     0     0     0
## CZKK      Female          0     0     1     0
##           Male            0     0     0     0
## FHRA      Female          0     0     0     0
##           Male            0     1     0     0
## KRPT      Female          0     0     0     0
##           Male            1     0     0     0
## KRXH      Female          1     0     0     0
##           Male            0     0     0     0
## PZXW      Female          0     0     0     1
##           Male            0     0     0     0
## RMZE      Female          0     1     0     0
##           Male            0     0     0     0
## STNX      Female          0     0     1     0
##           Male            0     0     0     0
## SZRZ      Female          0     0     0     0
##           Male            0     0     0     1
## TMDW      Female          1     0     0     0
##           Male            0     0     0     0

<strong># Answer to Exercise 5#</strong>

if(!require(tigerstats)) {install.packages("tigerstats"); require(tigerstats)}
library(tigerstats)

rowPerc(xtabs(~Status + Test, data=Data1))

##           Test
## Status      Test1  Test2  Test3  Test4  Total
##   Accepted  50.00   0.00  33.33  16.67 100.00
##   Rejected  25.00  50.00   0.00  25.00 100.00

<strong># Answer to Exercise 6#</strong>

colPerc(xtabs(~Reference + Status, data=Data1))

##          Status
## Reference Accepted Rejected
##     CQTN      0.00       25
##     CZKK     16.67        0
##     FHRA      0.00       25
##     KRPT     16.67        0
##     KRXH     16.67        0
##     PZXW     16.67        0
##     RMZE      0.00       25
##     STNX     16.67        0
##     SZRZ      0.00       25
##     TMDW     16.67        0
##     Total   100.00      100

<strong># Answer to Exercise 7#</strong>

plot(xtabs(~Status + Gender, data=Data1))
<img src="https://www.r-exercises.com/wp-content/uploads/2016/05/xtabs-plot-300x300.png">

<strong># Answer to Exercise 8#</strong>

xtabs(~Status + Gender, data=Data1)

##           Gender
## Status     Female Male
##   Accepted      5    1
##   Rejected      2    2

<strong># Answer to Exercise 9#</strong>

ftable(xtabs(cbind(Gender, Test) ~ Reference, data=Data1))

##            Gender Test
## Reference             
## CQTN            1    1
## CZKK            1    3
## FHRA            2    2
## KRPT            2    1
## KRXH            1    1
## PZXW            1    4
## RMZE            1    2
## STNX            1    3
## SZRZ            2    4
## TMDW            1    1

<strong># Answer to Exercise 10#</strong>

summary(xtabs(~Gender + Status, data=Data1))

## Call: xtabs(formula = ~Gender + Status, data = Data1)
## Number of cases in table: 10 
## Number of factors: 2 
## Test for independence of all factors:
## 	Chisq = 1.2698, df = 1, p-value = 0.2598
## 	Chi-squared approximation may be incorrect
</pre>
<br>
<br>
<br>
<br>

<script>
	var toc = $('#toc');
	$('strong').each(function(i) {
		var topic = $(this), topicNumber = i + 1;
		toc.append('<a href="#topic-'+topicNumber+'" target="_self">'+topic.text()+'</a><br>');
		topic.attr('id', 'topic-' + topicNumber);
	});
</script>
</body>
</html>
