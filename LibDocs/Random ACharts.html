<!DOCTYPE html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A尋寶機</title>

<link href="..\maincss.css" rel="stylesheet" type="text/css">
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="..\js\jquery.mobile-1.4.5.min.js"></script>

<style>
html,body { -webkit-text-size-adjust:none; }
body {
  background-color: black  !important;
  color: gray;
  justify-content: center;
  align-content: center;
}
#stkChart {font-size: 18px; font-weight:lighter;}
img{width:100%;}
a:visited { color: #389898;}

</style>

</head>

<body onkeypress="chkKey()">
<center>
	<div id="mainFrame">
	<a href="Hugangtong Random ACharts.html" class="whitebut red" target="_blank">沪港通深港通名单</a>

	<button class="orangeb" onclick=showSmallChart()>A股尋寶</button>
	<button id="jumpButton" onclick=jpButClick()>Stks Left: <span id="stkChartsLeft"></span></button>
	<button onclick=jpback()>back</button>


	<div id="stkChart" style="text-align:center;"> </div><br>
	</div>
</center>

<script>
// List of Q & A
var stkChartList = [
'601138', '601318', '000735', '600519', '000651', '600309', '000858', '000002', '600887', '002049', '000333', '601398', '603259', '300745', '000725', '600048', '300454', '000977', '000001', '300059', '600030', '600036', '601939', '000338', '002024', '603486', '600516', '600276', '300746', '600837', '601166', '600392', '600711', '002913', '601069', '001979', '600585', '603799', '600690', '002930', '601336', '002371', '601668', '002161', '600029', '601288', '600570', '603045', '002460', '600436', '601601', '601899', '600019', '600740', '600104', '600332', '600352', '600031', '600340', '000019', '601225', '002647', '002230', '000932', '603019', '002110', '000860', '002415', '600547', '002237', '000576', '000830', '600569', '600581', '600383', '002008', '000413', '601088', '603993', '002885', '002797', '600487', '600188', '603288', '600460', '002405', '300666', '603336', '601688', '601012', '002304', '002423', '600703', '600196', '601888', '300072', '002146', '600600', '600522', '600111', '002917', '002065', '002903', '000014', '300433', '600596', '000568', '600606', '300139', '600884', '000717', '601155', '601600', '600645', '601988', '300017', '600271', '603648', '300735', '603348', '300168', '601699', '601009', '600028', '300068', '600498', '300689', '600115', '300122', '002264', '002596', '603777', '601186', '300401', '600782', '600900', '002782', '603986', '600741', '600988', '300624', '300107', '600760', '600536', '000636', '600525', '300077', '002813', '600282', '600518', '000789', '600673', '000069', '002410', '002908', '601933', '600808', '002094', '601111', '600068', '000983', '000503', '600682', '002439', '600050', '600810', '603013', '000930', '600009', '601198', '002456', '002829', '600362', '000790', '002622', '300504', '002001', '300070', '300136', '600438', '002027', '600929', '600085', '000732', '300216', '600016', '002236', '002268', '300274', '002340', '300176', '601328', '002128', '600348', '002294', '002023', '601006', '002889', '601003', '600867', '601233', '300224', '300706', '600584', '600090', '600809', '002038', '002886', '600239', '000425', '300144', '300316', '300383', '601636', '300578', '600010', '002422', '300027', '300662', '000963', '002007', '002019', '002142', '603386', '000066', '603369', '300377', '002016', '000709', '603712', '300535', '300522', '601766', '300638', '600588', '603477', '600410', '600756', '000672', '600507', '600598', '000799', '002684', '000776', '603260', '600855', '002366', '603876', '601619', '600325', '002475', '300073', '603589', '600231', '600409', '601628', '300742', '601818', '002229', '600201', '600549', '000538', '600125', '300730', '002451', '603283', '600388', '300688', '600859', '300124', '300003', '000831', '002129', '000418', '300623', '600489', '600038', '002281', '300552', '002507', '002919', '000050', '600660', '002508', '300701', '002673', '002235', '601989', '300104', '300166', '600977', '000155', '002183', '000768', '002273', '002635', '600702', '002153', '300347', '603080', '600801', '002368', '300373', '000895', '601877', '000961', '002396', '300601', '600426', '000960', '300743', '002241', '600079', '600176', '300618', '002168', '300664', '000671', '300300', '000806', '600901', '002925', '000528', '002916', '300663', '000810', '603776', '002864', '300015', '603398', '002681', '300177', '002594', '002465', '601828', '600117', '600230', '300024', '600273', '601882', '000959', '300182', '300490', '000558', '002223', '300037', '002517', '600157', '300686', '601169', '600521', '300142', '300156', '300113', '000661', '002897', '000703', '300333', '600971', '300162', '002384', '300487', '002928', '002910', '603499', '002195', '002806', '600804', '600566', '000786', '603936', '002906', '300731', '300002', '600171', '601229', '300413', '300679', '002092', '601858', '002320', '601238', '603722', '600398', '600298', '300697', '300170', '601360', '000938', '000423', '002044', '000596', '603535', '002176', '300739', '000988', '002179', '002185', '600777', '603598', '002500', '600666', '000807', '600000', '000792', '000517', '603198', '002509', '600718', '600132', '002155', '300721', '603500', '300355', '603829', '600787', '601607', '300682', '300207', '600136', '300038', '600373', '601211', '600260', '601918', '603683', '000507', '300287', '300634', '300014', '002192', '600872', '300431', '002178', '601838', '300514', '300450', '002926', '603067', '002074', '603214', '000613', '300236', '600789', '002353', '600623', '600763', '600018', '002050', '002409', '300451', '000757', '000581', '000488', '300740', '002927', '002861', '300140', '300188', '300409', '601857', '601666', '601108', '603659', '600004', '002010', '600779', '000670', '300644', '600729', '600614', '600535', '603596', '002373', '002821', '600406', '300226', '600056', '600667', '300645', '002896', '300700', '300604', '600999', '600015', '002847', '603970', '600482', '002909', '002497', '300101', '600737', '002680', '300036', '000820', '603895', '300653', '002440', '600160', '002725', '002722', '300565', '000878', '300339', '000016', '002619', '000998', '300720', '000729', '000778', '600903', '603858', '600845', '002915', '600315', '603937', '600919', '603027', '002444', '002156', '000933', '600771', '000513', '603800', '002103', '000898', '300496', '002600', '600559', '300676', '300705', '300155', '002118', '002929', '600141', '002920', '002163', '600256', '603733', '300455', '600476', '300710', '600728', '002399', '000712', '600797', '600150', '002714', '000040', '002151', '300692', '601117', '000034', '601878', '002589', '300159', '002202', '600329', '002905', '300296', '600346', '603773', '300005', '300251', '603103', '002488', '601997', '603113', '002931', '000839', '000681', '002290', '002481', '600216', '601881', '002012', '600062', '600839', '000100', '002382', '300568', '000928', '002586', '603813', '600360', '300456', '002877', '603363', '600195', '002461', '600110', '000917', '000952', '002573', '600755', '300323', '002352', '002828', '300088', '002383', '603156', '603676', '002672', '600446', '002780', '300498', '600206', '002307', '600926', '600183', '002818', '300556', '300091', '002737', '002020', '600637', '300367', '600258', '300693', '300418', '600621', '002088', '000876', '603516', '300115', '601086', '300030', '603897', '300505', '002747', '002289', '600380', '601998', '300208', '000401', '600197', '600802', '002321', '300702', '000951', '600550', '600879', '002308', '000997', '300079', '300270', '600546', '603329', '000062', '601377', '002493', '300619', '300615', '300364', '002921', '603559', '002081', '002245', '000710', '002727', '002795', '002881', '000999', '603301', '002233', '002839', '002427', '300612', '600735', '603181', '002912', '002869', '300538', '603157', '600594', '300199', '002691', '300010', '000886', '000683', '600280', '600060', '300667', '300065', '600720', '600291', '300271', '600826', '300043', '002878', '600203', '600307', '300016', '603885', '300542', '000848', '000158', '300659', '600572', '000547', '000516', '603871', '600123', '002372', '002045', '000151', '002032', '002893', '000752', '300009', '002563', '600685', '002640', '300348', '601231', '600754', '300078', '601678', '300672', '601101', '002271', '603506', '603517', '002637', '002709', '300098', '601788', '600076', '002078', '000970', '000869', '002661', '600886', '000650', '601001', '002707', '002769', '300411', '300727', '601021', '601212', '002582', '300408', '603655', '603818', '600593', '603160', '600466', '601168', '601216', '600330', '600893', '002152', '002506', '600354', '002677', '603711', '300601', '600085', '300122'
];

var remainChtNo = stkChartList.length;

function shuffle() {
 var listlen = stkChartList.length, j = 0, temp;

 while (listlen--) {
  j = Math.floor(Math.random() * (listlen+1));

  temp = stkChartList[listlen];
  stkChartList[listlen] = stkChartList[j];
  stkChartList[j] = temp;
 }
}

function showSTKChart() {
  remainChtNo = remainChtNo - 1;
  var pointer = remainChtNo;
  var thecode = stkChartList[pointer];

  if (thecode[0]=="6"){
    thecode = thecode+".sh"
  } else {
    thecode = thecode+".sz"
  }
  document.querySelector('#stkChartsLeft').innerHTML = remainChtNo;
  sSCt(thecode);
  document.querySelector('#jumpButton').focus();
}


function jpButClick() {
  var jpBut = document.querySelector('#jumpButton');
  if (remainChtNo > 0) {showSTKChart();}
  if (remainChtNo === 0) {
      jpBut.innerHTML = 'Bye!';
      jpBut.classList.add('disabled');
  }
}

function jpback() {
  remainChtNo = remainChtNo + 2;
  if (remainChtNo <= stkChartList.length){
	jpButClick();
  } else {
	remainChtNo = stkChartList.length -1;
  }
}


function chkKey() {
  var testkey = getChar(event);
  if(testkey == 'f'){jpButClick();}
  if(testkey == 'b'){jpback();}
  if(testkey == 'c'){showSmallChart();}
  jQuery("#mainframe").on( "swipeleft", function( event ) {jpback();} );
  jQuery("#mainframe").on( "swiperight", function( event ) {jpButClick();});
}
function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}

function showSmallChart() {
    var thecode = prompt("Code Number:", "");
    if (thecode != null && thecode != "") {
	  if (thecode[0]=="6"){
	    thecode = thecode+".sh"
	  } else {
	    thecode = thecode+".sz"
	  }
	sSCt(thecode);}
}
function AChart(thecode) {
	if (thecode[0]=="6"){ thecode = thecode+".sh" }
	else { thecode = thecode+".sz" }
	sSCt(thecode);
}

function sSCt(stkcode) {
  imgHead = "<img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=2&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1050&chartheight=690&stockid=";
  imgPCode= "&period=";
  imgTail="&type=1&logoStyle=1'><br>";

  intv = [4, 7, 11, 12];
  newshead = "http://www.aastocks.com/tc/stocks/analysis/stock-aafn/"
  newstail = "/0/all/1"
  newsStr = newshead + stkcode + newstail
  imgAdr = "<a href='" + newsStr + "' target = _blank>" + stkcode + "</a><br>" 

  for( var imgPeriod = 0; imgPeriod < intv.length; imgPeriod++){
    imgAdr = imgAdr + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
  };
    document.getElementById("stkChart").innerHTML = imgAdr;
}

$("body").on("swiperight",function(){
	jpButClick();
});
$("body").on("swipeleft",function(){
	jpback();
});


shuffle();
showSTKChart();

</script>
</body>
</html>
