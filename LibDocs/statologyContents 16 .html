<base target="_blank"><html><head><title>statologyContents 16</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="https://williamkpchan.github.io/lazyload.min.js"></script>
<script src='https://williamkpchan.github.io/mainscript.js'></script>
<script src="https://williamkpchan.github.io/commonfunctions.js"></script>
<script>
  var showTopicNumber = true;
  var topicEnd = "<br>";
  var bookid = "statologyContents 16"
  var markerName = "h2, h3"
</script>
<style>
body{width:70%;margin-left: 15%; font-size:20px;}
h1, h2 {color: gold;}
strong {color: orange;}
b {color: brown;}
img {max-width:60%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px;}
</style></head><body onkeypress="chkKey()"><center>
<h1>statologyContents 16</h1>
<a href="#mustWatch" class="red goldbs" target="_self">Must Watch!</a><br><br>
<div id="toc"></div></center><br><br>
<div id="mustWatch"><center><span class="red">MustWatch</span></center><br></div>
<pre><br><br>
<h2><span class="orange">How to Fix: Error in n() : This function should not be called directly</span></h2>
One error you may encounter in R is:
<b>Error in n() : This function should not be called directly
</b>
This error usually occurs when you attempt to use the <b>n()</b> function from the <b>dplyr</b> package, but you happen to have the <b>plyr</b> package loaded <em>after</em> the <b>dplyr</b> package.
This tutorial shares exactly how to fix this error.
<h2>How to Reproduce the Error</h2>
Suppose we have the following data frame in R:
<b>#define data frame
df &lt;- data.frame(team=rep(c('A', 'B'), each=5), points=c(2, 4, 6, 8, 10, 12, 14, 16, 18, 20), assists=c(4, 7, 11, 16, 22, 29, 38, 49, 63, 80))
#view data frame
df
   team points assists
1     A      2       4
2     A      4       7
3     A      6      11
4     A      8      16
5     A     10      22
6     B     12      29
7     B     14      38
8     B     16      49
9     B     18      63
10    B     20      80
</b>
Now suppose we attempt to use the <b>summarize()</b> function from <b>dplyr</b> to count the number of rows, grouped by team:
<b>library(dplyr)
library(plyr)
#attempt to count rows by team
df %>%
  group_by(team) %>%
  summarize(count = n())
Error in n() : This function should not be called directly 
</b>
We receive an error because we loaded the <b>plyr</b> package after the <b>dplyr</b> package, which causes issues.
<h2>How to Fix the Error</h2>
The way to fix this error is to simply use <b>dplyr:summarize</b> so that R knows exactly which package you’d like to use the <b>summarize</b> function from:
<b>library(dplyr)
library(plyr)
#count rows by team
df %>%
  group_by(team) %>%
  dplyr::summarize(count = n())
# A tibble: 2 x 2
  team  count
   
1 A         5
2 B         5
</b>
Notice that we’re able to count the number of rows grouped by team without any error this time since we used <b>dplyr::summarize</b> to perform the summary.
<h2><span class="orange">How to Fix in R: Error: unexpected ‘else’ in “else”</span></h2>
One common error you may encounter in R is:
<b>Error: unexpected 'else' in "else"
</b>
This error usually occurs when you place an <b>else</b> statement at the start of a new line in R.
This tutorial explains how to fix this error in practice.
<h2>How to Reproduce the Error</h2>
Suppose we attempt to use an if else statement to print a specific string based on the value of a variable:
<b>#define x
x &lt;- 5
#use if else statement to print string
if(x &lt; 7) {
  print("x is less than 7")
}
else {
  print("x is not less than 7")
}
Error: unexpected 'else' in "else"
</b>
We receive an error because we placed the <b>else</b> statement at the beginning of a brand new line.
<h2>How to Fix the Error</h2>
To fix this error, we simply need to move the <b>else</b> statement up one line so that it appears immediately after the first closing curly bracket:
<b>#define x
x &lt;- 5
#use if else statement to print string
if(x &lt; 7) {
  print("x is less than 7")
} else {
  print("x is not less than 7")
}
[1] "x is less than 7"
</b>
This time we don’t receive an error and the if else statement prints the string “x is less than 7” since x is indeed less than 7.
<h2>Additional Resources</h2>
The following tutorials explain how to fix other common errors in R:
 How to Fix: (list) object cannot be coerced to type ‘double’ 
 How to Fix in R: invalid model formula in ExtractVars 
 How to Fix in R: replacement has length zero 
<h2><span class="orange">How to Export List to a File in R (With Examples)</span></h2>
You can use the <b>sink()</b> function to quickly export a list to a CSV file or text file in R.
The following examples show how to use this function in practice with the following list:
<b>#create list
my_list &lt;- list(A=c(1, 5, 6, 6, 3),
                B=c('hey', 'hello'),
                C=1:10)
#view list
my_list
$A
[1] 1 5 6 6 3
$B
[1] "hey"   "hello"
$C
 [1]  1  2  3  4  5  6  7  8  9 10
</b>
<b>Related:</b>  A Gentle Introduction to the sink() Function in R 
<h2>Example 1: Export List to Text File</h2>
We can use the following <b>sink()</b> function to export the list to a text file:
<b>#define file name
sink('my_list.txt')
#print my_list to file
print(my_list)
#close external connection to file 
sink()
</b>
We can then navigate to the  current working directory  and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/exportlist1.jpg"512">
The text file contains the list formatted exactly as it was in R.
We can also use multiple <b>print</b> statements within the <b>sink</b> function to export multiple lists to one text file:
<b>#create multiple lists
my_list1 &lt;- list(A=c(1, 5, 6, 6, 3),
                B=c('hey', 'hello'),
                C=1:10)
my_list2 &lt;- list(D=c(2, 2, 4, 6, 7), E=c('one', 'five'))
#define file name
sink('my_lists.txt')
#print multiple lists to file
print(my_list1)
print(my_list2)
#close external connection to file 
sink()</b>
We can then navigate to the  current working directory  and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/exportlist2.jpg"503">
The text file contains both lists.
<h2>Example 2: Export List to CSV File</h2>
We can use the following <b>sink()</b> function to export the list to a CSV file:
<b>#define file name
sink('my_list.csv')
#print my_list to file
print(my_list)
#close external connection to file 
sink()
</b>
We can then navigate to the  current working directory  and open the CSV file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/exportlist3.jpg"530">
The CSV file contains the list formatted exactly as it was in R.
<h2><span class="orange">R: How to Export Data Frames to Multiple Excel Sheets</span></h2>
You can use the following basic syntax to export multiple data frames in R to multiple worksheets in Excel:
<b>library(openxlsx)
dataset_names &lt;- list('Sheet1' = df1, 'Sheet2' = df2, 'Sheet3' = df3)
write.xlsx(dataset_names, file = 'mydata.xlsx')
</b>
The following example shows how to use this syntax in practice.
<h3>Example: Export Multiple Data Frames to Multiple Excel Sheets</h3>
Suppose we have the following three data frames in R:
<b>#define data frames
df1 = data.frame(playerID=c(1, 2, 3, 4), team=c('A', 'B', 'B', 'C'))
df2 = data.frame(playerID=c(1, 2, 3, 4), rebounds=c(7, 8, 8, 14))
df3 = data.frame(playerID=c(1, 2, 3, 4), points=c(19, 22, 25, 29))
</b>
We can use the following syntax to export all three of these data frames to separate sheets within the same Excel file:
<b>library(openxlsx)
#define sheet names for each data frame
dataset_names &lt;- list('Sheet1' = df1, 'Sheet2' = df2, 'Sheet3' = df3)
#export each data frame to separate sheets in same Excel file
openxlsx::write.xlsx(dataset_names, file = 'mydata.xlsx') </b>
Once I navigate to the location on my computer where the Excel sheet was exported, I can view each of the data frames in their own sheets within the same Excel file called <b>mydata.xlsx</b>:
<b>Sheet1:</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/excel1.png">
<b>Sheet2:</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/excel2.png">
<b>Sheet3:</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/excel3.png">
Note that we exported three data frames to three separate sheets in Excel in this example, but we can use the same syntax to export any number of data frames we’d like.
<h2><span class="orange">How to Export a Data Frame to an Excel File in R</span></h2>
The easiest way to export a data frame to an Excel file in R is to use the <b>write_xlsx()</b> function from the  writexl package . 
This function uses the following syntax:
<b>write_xlsx(x, path)</b>
where:
<b>x:</b> Name of the data frame to export
<b>path:</b> A file name to write to
This tutorial provides an example of how to use this function to export a data frame to an Excel file in R.
<h3>Example: Export Data Frame to Excel File in R</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(78, 85, 93, 90, 91), assists=c(12, 20, 23, 8, 14))
#view data frame
df
  team points assists
1    A     78      12
2    B     85      20
3    C     93      23
4    D     90       8
5    E     91      14</b>
The following code shows how to export this data frame to an Excel file in R:
<b>#install and load writexl package
install.packages('writexl')
library(writexl)
write_xlsx(df, 'C:\\Users\\Bob\\Desktop\\data.xlsx')</b>
Note that we used double backslashes (\\) in the file path to avoid the following common error:
<b>Error: '\U' used without hex digits in character string starting ""C:\U"</b>
The data frame is now available as an Excel file on my desktop. Here’s what the file looks like:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/10/importExcel1.png">
<h2><span class="orange">How to Extract Numbers from Strings in R (With Examples)</span></h2>
You can use the following methods to extract numbers from strings in R:
<b>Method 1: Extract Number from String Using Base R</b>
<b>as.numeric(gsub("\\D", "", df$my_column))</b>
<b>Method 2: Extract Number from String Using readr Package</b>
<b>library(readr)
parse_number(df$my_column)
</b>
This tutorial explains how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'B', 'B', 'B'), position=c('Guard23', 'Guard14', '2Forward',            'Guard25', '6Forward', 'Center99'))
#view data frame
df
  team position
1    A  Guard23
2    A  Guard14
3    A 2Forward
4    B  Guard25
5    B 6Forward
6    B Center99
</b>
<h2>Example 1: Extract Number from String Using Base R</h2>
The following code shows how to extract the numbers from each string in the <b>position</b> column of the data frame:
<b>#extract number from each string in 'position' column
as.numeric(gsub("\\D", "", df$position))
[1] 23 14  2 25  6 99
</b>
Notice that the numeric values have been extracted from each string in the <b>position</b> column.
<b>Note</b>: The <b>gsub()</b> function simply replaces all non-numbers ( \\D ) in a string with a blank space. This has the effect of extracting only the numbers from the string.
If you’d like, you can also store these numeric values in a new column in the data frame:
<b>#create new column that contains numbers from each string in 'position' column
df$num &lt;- as.numeric(gsub("\\D", "", df$position))
#view updated data frame
df
  team position num
1    A  Guard23  23
2    A  Guard14  14
3    A 2Forward   2
4    B  Guard25  25
5    B 6Forward   6
6    B Center99  99
</b>
<h2>
<b>Example 2: Extract Number from String Using reader Package</b>
</h2>
The following code shows how to extract the numbers from each string in the <b>position</b> column of the data frame by using the <b>parse_number()</b> function from the  readr  package:
<b>library(readr)
#extract number from each string in 'position' column
parse_number(df$position)
[1] 23 14  2 25  6 99</b>
Notice that the numeric values have been extracted from each string in the <b>position</b> column.
This matches the results from using the <b>gsub()</b> function in base R.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Select Columns Containing a Specific String in R 
 How to Remove Characters from String in R 
 How to Find Location of Character in a String in R 
<h2><span class="orange">How to Use file.choose() in R (With Example)</span></h2>
You can use the <b>file.choose()</b> function in R to bring up a file explorer window that allows you to interactively choose a file path to work with.
To use this function, simply type the following into your R console:
<b>file.choose()</b>
The following example shows how to use this function in practice.
<h2>Example: How to Use file.choose() in R</h2>
Suppose we have some file called <b>df1.csv</b> located in a folder called <b>my_data_files</b> that we’d like to import into our R environment:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/listfiles1.jpg"494">
However, suppose we don’t know the exact file path of this CSV file.
To quickly find it, we can type<b> file.choose()</b> into our R console:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/06/filechoose1.jpg"573">
A file explorer window will appear where we can then navigate to the folder that contains this file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/06/filechoose2.jpg"655">
<b>Note</b>: If you don’t see the file explorer window, check to see if it opened behind RStudio.
When you double click on the file you’d like, the file path will automatically appear in your R console:
<b>[1] "C:\\Users\\bob\\Documents\\my_data_files\\df1.csv"
</b>
You can then use this path to import the file into R:
<b>#import df1.csv file
df &lt;- read.csv("C:\\Users\\bob\\Documents\\my_data_files\\df1.csv")
#view result
df
  points assists
1      4       3
2      5       2
3      5       4
4      6       4
5      8       6
6      9       3
</b>
We’re able to successfully import the CSV file into a data frame in R since we used the correct file path.
<h2><span class="orange">How to Open an .R File in RStudio (With Example)</span></h2>
An R file is a script written in the R programming language.
These files end with an .R extension. For example, an R script might be saved as <b>my_script.R</b>.
These files are typically used within  RStudio , an interactive environment where you can work with R code.
The following example shows how to open an R script in RStudio in practice.
<h3>Example: Open R File in RStudio</h3>
Suppose I have an R script called <b>my_script.R</b> saved on my Desktop.
To open this file in RStudio, I can click <b>File</b> and then click <b>Open File</b>:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/rfile1.jpg">
I can then navigate to Desktop and double click on the <b>my_script.R</b> file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/rfile2.jpg"596">
The R script will automatically open in RStudio:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/rfile3.jpg"624">
You can now edit the R script or run the code that already exists within it.
It’s also worth noting that if the current  working directory  already contains the R script you’re interested in, you can open the R script by typing the following code in RStudio:
<b>#open my_script.R file in RStudio
file.edit('my_script.R')
</b>
The R script will automatically open in RStudio.
<h2><span class="orange">How to Find Location of Character in a String in R</span></h2>
You can use the following methods to find the location of a character in a string in R:
<b>Method 1: Find Location of Every Occurrence</b>
<b>unlist(gregexpr('character', my_string))
</b>
<b>Method 2: Find Location of First Occurrence</b>
<b>unlist(gregexpr('character', my_string))[1]</b>
<b>Method 3: Find Location of Last Occurrence</b>
<b>tail(unlist(gregexpr('character', my_string)), n=1)</b>
<b>Method 4: Find Total Number of Occurrences</b>
<b>length(unlist(gregexpr('character', my_string)))</b>
The following examples show how to use each method in practice.
<h3>Method 1: Find Location of Every Occurrence</h3>
The following code shows how to find every location of the character “a” in a certain string:
<b>#define string
my_string = 'mynameisronalda'
#find position of every occurrence of 'a'
unlist(gregexpr('a', my_string))
[1]  4 12 15
</b>
From the output we can see that the character “a” occurs in position 4, 12, and 15 of the string.
<h3>Method 2: Find Location of First Occurrence</h3>
The following code shows how to find the location of the first occurrence of the character “a” in a certain string:
<b>#define string
my_string = 'mynameisronalda'
#find position of first occurrence of 'a'
unlist(gregexpr('a', my_string))[1]
[1] 4
</b>
From the output we can see that the character “a” first occurs in position 4 of the string.
<h3>Method 3: Find Location of Last Occurrence</h3>
The following code shows how to find the location of the last occurrence of the character “a” in a certain string:
<b>#define string
my_string = 'mynameisronalda'
#find position of last occurrence of 'a'
tail(unlist(gregexpr('a', my_string)), n=1)
[1] 15
</b>
From the output we can see that the last occurrence of the character “a” is in position 15 of the string.
<h3>Method 4: Find Total Number of Occurrences</h3>
The following code shows how to find the total number of occurrences of the character “a” in a certain string:
<b>#define string
my_string = 'mynameisronalda'
#find total occurrences of 'a'
length(unlist(gregexpr('a', my_string)))
[1] 3
</b>
From the output we can see that the character “a” occurs 3 times in the string.
<h2><span class="orange">R: How to Find Closest Value in Vector</span></h2>
You can use the following basic syntax to find the closest value between elements of two vectors in R:
<b>#define cut points
cuts &lt;- c(-Inf, vector2[-1]-diff(vector2)/2, Inf)
#for each value in vector1, find closest value in vector2
cut(vector1, breaks=cuts, labels=vector2)
</b>
The following example shows how to use this syntax in practice.
<h2>Example: Find Closest Value in Vector in R</h2>
Suppose we have the following two vectors in R:
<b>#define vectors
vector1 &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
vector2 &lt;- c(3, 5, 8, 11)
</b>
Now suppose that for each value in the first vector, we would like to find the closest value in the second vector.
We can use the following syntax to do so:
<b>#define cut points
cuts &lt;- c(-Inf, vector2[-1]-diff(vector2)/2, Inf)
#for each value in vector1, find closest value in vector2
cut(vector1, breaks=cuts, labels=vector2)
 [1] 3  3  3  3  5  5  8  8  8  11
</b>
Here’s how to interpret the output:
For the first value in vector1 (1), the closest value in vector2 is <b>3</b>.
For the second value in vector1 (2), the closest value in vector2 is <b>3</b>.
For the third value in vector1 (3), the closest value in vector2 is <b>3</b>.
For the fourth value in vector1 (4), the closest value in vector2 is <b>3</b>.
For the fifth value in vector1 (5), the closest value in vector2 is <b>5</b>.
And so on.
<b>Note</b>: This method assumes that the values in the second vector are strictly increasing. If they aren’t already, you may need to first sort the second vector.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Calculate the Mean by Group in R 
 How to Average Across Columns in R 
 How to Sum Specific Columns in R 
<h2><span class="orange">R: How to Find Columns with All Missing Values</span></h2>
You can use the following methods to find columns in a data frame in R that contain all missing values:
<b>Method 1: Use Base R</b>
<b>#check if each column has all missing values
all_miss &lt;- apply(df, 2, function(x) all(is.na(x)))
#display columns with all missing values
names(all_miss[all_miss>0])   
</b>
<b>Method 2: Use purrr Package</b>
<b>library(purrr)
<b>#display columns with all missing values</b>
df %>% keep(~all(is.na(.x))) %>% names
</b>
Both methods produce the same result, but the purrr approach tends to be quicker for extremely large data frames.
The following examples show how to use each method with the following data frame in R:
<b><b>#create data frame
df &lt;- data.frame(points=c(21, 15, 10, 4, 4, 9, 12, 10), assists=c(NA, NA, NA, NA, NA, NA, NA, NA), rebounds=c(8, 12, 14, 10, 7, 9, 8, 5), steals=c(NA, NA, NA, NA, NA, NA, NA, NA))
#view data frame
df
  points assists rebounds steals
1     21      NA        8     NA
2     15      NA       12     NA
3     10      NA       14     NA
4      4      NA       10     NA
5      4      NA        7     NA
6      9      NA        9     NA
7     12      NA        8     NA
8     10      NA        5     NA</b></b>
<h2>Example 1: Find Columns with All Missing Values Using Base R</h2>
The following code shows how to find the columns in the data frame with all missing values:
<b>#check if each column has all missing values
all_miss &lt;- apply(df, 2, function(x) all(is.na(x)))
#display columns with all missing values
names(all_miss[all_miss>0])   
[1] "assists" "steals" 
</b>
From the output we can see that the <b>assists</b> and <b>steals</b> columns have all missing values.
<h2>Example 2: Find Columns with All Missing Values Using purrr Package</h2>
The following code shows how to find the columns in the data frame with all missing values by using functions from the  purrr  package:
<b>library(purrr)
<b>#display columns with all missing values</b>
df %>% keep(~all(is.na(.x))) %>% names
[1] "assists" "steals" 
</b>
From the output we can see that the <b>assists</b> and <b>steals</b> columns have all missing values.
This matches the output from the base R method.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common operations with missing values in R:
 How to Impute Missing Values in R 
 How to Replace NAs with Strings in R 
 How to Replace NAs with Zero in dplyr 
<h2><span class="orange">How to Find and Count Missing Values in R (With Examples)</span></h2>
You can use the following methods to find and count missing values in R:
<b>Method 1: Find Location of Missing Values</b>
<b>which(is.na(df$column_name))
</b>
<b>Method 2: Count Total Missing Values</b>
<b>sum(is.na(df$column_name))</b>
The following examples show how to use these functions in practice.
<h3>Example 1: Find and Count Missing Values in One Column</h3>
Suppose we have the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', NA, 'E'), points=c(99, 90, 86, 88, 95), assists=c(NA, 28, NA, NA, 34), rebounds=c(30, 28, 24, 24, NA))
#view data frame
df
  team points assists rebounds
1    A     99      NA       30
2    B     90      28       28
3    C     86      NA       24
4   NA     88      NA       24
5    E     95      34       NA
</b>
We can use the following code to identify which positions have missing values in the ‘assists’ column and find the total missing values in the ‘assists’ column:
<b>#identify locations of missing values in 'assists' column
which(is.na(df$assists))
[1] 1 3 4
#count total missing values in 'assists' column
sum(is.na(df$assists))
[1] 3 
</b>
From the output we can see that positions <b>1</b>, <b>3</b>, and <b>4</b> have missing values in the ‘assists’ column and there are a total of <b>3</b> missing values in the column.
<h3>Example 2: Count Missing Values in All Columns</h3>
The following code shows how to count the total missing values in every column of a data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', NA, 'E'), points=c(99, 90, 86, 88, 95), assists=c(NA, 28, NA, NA, 34), rebounds=c(30, 28, 24, 24, NA))
#count total missing values in each column of data frame
sapply(df, function(x) sum(is.na(x)))
    team   points  assists rebounds 
       1        0        3        1 </b>
From the output we can see:
The ‘team’ column has <b>1</b> missing value.
The ‘points’ column has <b>0</b> missing values.
The ‘assists’ column has <b>3</b> missing values.
The ‘rebounds’ column has <b>1</b> missing value.
<h3>Example 3: Count Missing Values in Entire Data Frame</h3>
The following code shows how to count the total missing values in an entire data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', NA, 'E'), points=c(99, 90, 86, 88, 95), assists=c(NA, 28, NA, NA, 34), rebounds=c(30, 28, 24, 24, NA))
#count total missing values in entire data frame
sum(is.na(df))
[1] 5 </b>
From the output we can see that there are <b>5</b> total missing values in the entire data frame.
<h2><span class="orange">R: Select Rows Where Value Appears in Any Column</span></h2>
You can use the following basic syntax to find the rows of a data frame in R in which a certain value appears in any of the columns:
<b>library(dplyr)
df %>% filter_all(any_vars(. %in% c('value1', 'value2', ...)))
</b>
The following examples show how to use this syntax in practice.
<h3>Example 1: Find Value in Any Column</h3>
Suppose we have the following data frame in R:
<b>#define data frame
df = data.frame(points=c(25, 12, 15, 14, 19),
                assists=c(5, 7, 7, 9, 12),
                rebounds=c(11, 8, 10, 6, 6))
#view data frame
df
  points assists rebounds
1     25       5       11
2     12       7        8
3     15       7       10
4     14       9        6
5     19      12        6</b>
The following syntax shows how to select all rows of the data frame that contain the value <b>25</b> in any of the columns:
<b>library(dplyr)
#select rows where 25 appears in any column
df %>% filter_all(any_vars(. %in% c(25)))
  points assists rebounds
1     25       5       11</b>
There is exactly one row where the value <b>25</b> appears in any column.
The following syntax shows how to select all rows of the data frame that contain the values <b>25, 9, or 6</b> in any of the columns:
<b>library(dplyr)
#select rows where 25, 9, or 6 appears in any column
df %>% filter_all(any_vars(. %in% c(25, 9, 6)))
  points assists rebounds
1     25       5       11
2     14       9        6
3     19      12        6</b>
<h3>Example 2: Find Character in Any Column</h3>
Suppose we have the following data frame in R:
<b>#define data frame
df = data.frame(points=c(25, 12, 15, 14, 19),
                assists=c(5, 7, 7, 9, 12),
                position=c('G', 'G', 'F', 'F', 'C'))
#view data frame
df
  points assists position
1     25       5        G
2     12       7        G
3     15       7        F
4     14       9        F
5     19      12        C
</b>
The following syntax shows how to select all rows of the data frame that contain the character <b>G</b> in any of the columns:
<b>library(dplyr)
df %>% filter_all(any_vars(. %in% c('G')))
  points assists position
1     25       5        G
2     12       7        G
</b>
There are two rows where the character ‘G’ appears in any column.
The following syntax shows how to select all rows of the data frame that contain the values <b>G or C</b> in any of the columns:
<b>library(dplyr)
df %>% filter_all(any_vars(. %in% c('G', 'C')))
  points assists position
1     25       5        G
2     12       7        G
3     19      12        C</b>
<h2><span class="orange">How to Use fread() in R to Import Files Faster</span></h2>
You can use the <b>fread()</b> function from the <b>data.table</b> package in R to import files quickly and conveniently.
This function uses the following basic syntax:
<b>library(data.table)
df &lt;- fread("C:\\Users\\Path\\To\\My\\data.csv")</b>
For large files, this function has been shown to be significantly faster than functions like <b>read.csv</b> from base R.
And in most cases, this function can also automatically detect the delimiter and column types for the dataset you’re importing.
The following example shows how to use this function in practice.
<h3>Example: How to Use fread() to Import Files in R</h3>
Suppose I have a CSV file called <b>data.csv</b> saved in the following location:
<b>C:\Users\Bob\Desktop\data.csv</b>
And suppose the CSV file contains the following data:
<b>team, points, assists
'A', 78, 12
'B', 85, 20
'C', 93, 23
'D', 90, 8
'E', 91, 14
</b>
I can use the <b>fread()</b> function from the <b>data.table</b> package to import this file into my current R environment:
<b>library(data.table)
#import data
df &lt;- fread("C:\\Users\\Bob\\Desktop\\data.csv")
#view data
df
  team points assists
1    A     78      12
2    B     85      20
3    C     93      23
4    D     90       8
5    E     91      14</b>
We’re able to successfully import the CSV file using the <b>fread()</b> function.
<b>Note</b>: We used double backslashes (\\) in the file path to avoid a  common import error .
Notice that we didn’t have to specify the delimiter either since the <b>fread()</b> function automatically detected that it was a comma.
If we use the  str()  function to view the structure of the data frame, we can see that the <b>fread()</b> function automatically identified the object type for each column as well:
<b>#view structure of data
str(df)
Classes 'data.table' and 'data.frame':  5 obs. of  3 variables:
 $ team   : chr  "'A'" "'B'" "'C'" "'D'" ...
 $ points : int  78 85 93 90 91
 $ assists: int  12 20 23 8 14
</b>
From the output we can see:
The <b>team</b> variable is a character.
The <b>points</b> variable is an integer.
The <b>assists</b> variable is an integer.
In this example we used a small data frame for simplicity (5 rows x 3 columns) but in practice the <b>fread()</b> function is able to quickly and efficiently import data frames with tens of thousands of rows, which makes it the preferred import method for large-scale datasets.
<h2><span class="orange">How to Create a Frequency Table by Group in R</span></h2>
You can use the following functions from the  dplyr  package to create a frequency table by group in R:
<b>library(dplyr)
df %>%
  group_by(var1, var2) %>%
  summarize(Freq=n())
</b>
The following example shows how to use this syntax in practice.
<h3>Example: Create Frequency Table by Group</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), position=c('G', 'G', 'G', 'F', 'G', 'F', 'F', 'C'))
#view data frame
df
  team position
1    A        G
2    A        G
3    A        G
4    A        F
5    B        G
6    B        F
7    B        F
8    B        C</b>
Suppose we’d like to create a frequency table that shows the frequency of each position, grouped by team.
We can use the following syntax to do so:
<b>library(dplyr)
#calculate frequency of position, grouped by team
df %>%
  group_by(team, position) %>%
  summarize(Freq=n())
# A tibble: 5 x 3
# Groups:   team [2]
  team  position  Freq
       
1 A     F            1
2 A     G            3
3 B     C            1
4 B     F            2
5 B     G            1
</b>
Here’s how to interpret the output:
<b>1</b> player on team A has position ‘F’
<b>3</b> players on team A have position ‘G’
<b>1</b> player on team B has position ‘C’
<b>2</b> players on team B have position ‘F’
<b>1</b> player on team B has position ‘G’
Note that we can rename the column that holds the frequencies by changing the variable name in the <b>summarize()</b> function.
For example, we could rename the column to be named ‘count’ instead:
<b>library(dplyr)
#calculate frequency of position, grouped by team
df %>%
  group_by(team, position) %>%
  summarize(count=n())
# A tibble: 5 x 3
# Groups:   team [2]
  team  position count
       
1 A     F            1
2 A     G            3
3 B     C            1
4 B     F            2
5 B     G            1</b>
<h2><span class="orange">How to Create a Frequency Table of Multiple Variables in R</span></h2>
To calculate a frequency table for multiple variables in a data frame in R you can use the <b>apply()</b> function, which uses the following syntax:
<b>apply(X, MARGIN FUN)</b>
where:
<b>X:</b> An array, matrix, or data frame
<b>MARGIN:</b> Apply a function across rows (1) or columns (2)
<b>FUN:</b> The function to be applied
The following examples show how to use this syntax in practice.
<h3>Example 1: Frequency Table for All Variables in R</h3>
The following code shows how to calculate a frequency table for every variable in a data frame:
<b>#create data frame
df &lt;- data.frame(var1=c(1, 1, 2, 2, 2, 2, 3), var2=c('A', 'A', 'A', 'A', 'B', 'B', 'B'), var3=c(6, 7, 7, 7, 8, 8, 9))
#view first few rows of data frame
head(df)
  var1 var2 var3
1    1    A    6
2    1    A    7
3    2    A    7
4    2    A    7
5    2    B    8
6    2    B    8
#calculate frequency table for every variable in data frame
apply((df), 2, table)
$var1
1 2 3 
2 4 1 
$var2
A B 
4 3 
$var3
6 7 8 9 
1 3 2 1</b>
The result is three frequency tables – one for each variable in the data frame.
Here’s how to interpret the first frequency table:
The value <b>1</b> appears 2 times in the “var1” column
The value <b>2</b> appears 4 times in the “var2” column
The value <b>3</b> appears 1 time in the “var3” column
The other frequency tables can be interpreted in a similar manner.
<h3>Example 2: Frequency Table for Specific Variables in R</h3>
The following code shows how to calculate a frequency table for specific variables in a data frame
<b>#create data frame
df &lt;- data.frame(var1=c(1, 1, 2, 2, 2, 2, 3), var2=c('A', 'A', 'A', 'A', 'B', 'B', 'B'), var3=c(6, 7, 7, 7, 8, 8, 9))
#calculate frequency table for var1 and var3 columns
apply((df[c('var1', 'var3')]), 2, table)
$var1
1 2 3 
2 4 1
$var3
6 7 8 9 
1 3 2 1</b>
<h3>Example 3: Frequency Table for All But One Variable in R</h3>
Suppose we have an index column in a data frame and we would like to calculate a frequency table for every variable in the data frame <em>except</em> the index column.
The following code shows how to do so:
<b>#create data frame
df &lt;- data.frame(index=c(1, 2, 3, 4, 5, 6, 7), var2=c('A', 'A', 'A', 'A', 'B', 'B', 'B'), var3=c(6, 7, 7, 7, 8, 8, 9))
#calculate frequency table for all columns except index column
apply((df[-1]), 2, table)
$var2
A B 
4 3 
$var3
6 7 8 9 
1 3 2 1</b>
<h2><span class="orange">How to Return Value from Function in R (With Examples)</span></h2>
You can use the following methods to return one or more values from a function in R:
<b>Method 1: Return One Value</b>
<b>my_function &lt;- function(A, B) {
  C &lt;- A * B
  return(C)
}
</b>
<b>Method 2: Return Multiple Values</b>
<b>my_function &lt;- function(A, B) {
  C &lt;- A * B
  D &lt;- A + B
  E &lt;- A - B
  return(list(C, D, E))
}</b>
The following examples show how to use each method in practice. 
<h3>Example 1: Return One Value from Function in R</h3>
The following code shows how to create a function that returns one value:
<b>#define function that returns one value
multiply_values &lt;- function(A, B) {
  C &lt;- A * B
  return(C)
}
#use function
multiply_values(10, 3)
[1] 30</b>
Notice that the function returns one value: the product of 10 and 3.
<h3>Example 2: Return Multiple Values from Function in R</h3>
The following code shows how to create a function that returns multiple values:
<b>math_stuff &lt;- function(A, B) {
  C &lt;- A * B
  D &lt;- A + B
  E &lt;- A - B
  return(list(C, D, E))
}
#use function
math_stuff(10, 3)
[[1]]
[1] 30
[[2]]
[1] 13
[[3]]
[1] 7</b>
The function returns three values:
The first value is 10 * 3 = <b>30</b>
The second value is 10 + 3 = <b>13</b>
The third value is 10 – 3 = <b>7</b>
<b>Note</b>: In this particular example, we returned three values but you can use similar syntax to return as many values as you’d like using the<b> return()</b> argument.
<h2><span class="orange">How to Fix: geom_path: Each group consists of only one observation. Do you need to adjust the group aesthetic?</span></h2>
One error you may encounter when using R is:
<b>geom_path: Each group consists of only one observation. Do you need to adjust
the group aesthetic?
</b>
This error usually occurs when you attempt to create a line chart using  ggplot2  but the x-axis variable is a factor, which can cause issues when connecting the points in the plot.
The following example shows how to fix this error in practice.
<h3>How to Reproduce the Error</h3>
Suppose we have the following data frame in R that contains information about the sales of a certain product during various years:
<b>#create data frame
df &lt;- data.frame(year=factor(c(2017, 2018, 2019, 2020, 2021, 2022)), sales=c(23, 30, 35, 41, 48, 44))
#view data frame
df
  year sales
1 2017    23
2 2018    30
3 2019    35
4 2020    41
5 2021    48
6 2022    44</b>
Now suppose we attempt to create a line chart using ggplot2 to visualize the sales by year:
<b>library(ggplot2)
#attempt to create line chart
ggplot(df, aes(year, sales)) +
  geom_point() +
  geom_line()
geom_path: Each group consists of only one observation. Do you need to adjust
the group aesthetic?
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/geompath1.jpg"443">
A scatterplot is produced instead of a line plot because the x-axis variable (year) is a factor.
We also receive the <b>geom_path</b> error message.
<h3>How to Fix the Error</h3>
The easiest way to fix this error is to specify <b>group=1</b> within the <b>aes()</b> function:
<b>library(ggplot2)
#create line chart
ggplot(df, aes(year, sales, group=1)) +
  geom_point() +
  geom_line()</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/geompath2.jpg"442">
Notice that a line chart is created and no error message appears.
The reason that <b>group=1</b> fixes this error is because line graphs require the data points to be grouped so that ggplot2 knows which points to connect.
In this scenario, we want all of the points in the plot to be connected so we specify <b>group=1</b>. 
<h2><span class="orange">How to Get Column Names in R (3 Methods)</span></h2>
You can use the following methods to get the column names of a data frame in R:
<b>Method 1: Get All Column Names</b>
<b>colnames(df)</b>
<b>Method 2: Get Column Names in Alphabetical Order</b>
<b>sort(colnames(df))
</b>
<b>Method 3: Get Column Names with Specific Data Type</b>
<b>colnames(df[,sapply(df,is.numeric)])
</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df = data.frame(team=c('A', 'B', 'C', 'D', 'E', 'F'),
                points=c(18, 22, 19, 14, 14, 11),
                assists=c(5, 7, 7, 9, 12, 9),
                playoffs=c(TRUE, FALSE, FALSE, TRUE, TRUE, TRUE))
#view data frame
df
  team points assists playoffs
1    A     18       5     TRUE
2    B     22       7    FALSE
3    C     19       7    FALSE
4    D     14       9     TRUE
5    E     14      12     TRUE
6    F     11       9     TRUE</b>
<h2>Example 1: Get All Column Names</h2>
The easiest way to get all of the column names in a data frame in R is to use <b>colnames()</b> as follows:
<b>#get all column names
colnames(df)
[1] "team"     "points"   "assists"  "playoffs"</b>
The result is a vector that contains all four column names from the data frame.
<h2>Example 2: Get Column Names in Alphabetical Order</h2>
To get the column names in a data frame in alphabetical order, you can use the <b>sort()</b> function as follows:
<b>#get column names in alphabetical order
sort(colnames(df))
[1] "assists"  "playoffs" "points"   "team"   </b>
The result is a vector that contains all four column names from the data frame listed in alphabetical order.
You can also use the argument <b>decreasing=TRUE</b> to get the column names in reverse alphabetical order:
<b>#get column names in reverse alphabetical order
sort(colnames(df), decreasing=TRUE)
[1] "team"     "points"   "playoffs" "assists" </b>
<h2>Example 3: Get Column Names with Specific Data Type</h2>
You can use the following syntax to view the data type of each column in the DataFrame:
<b>#view data type of each column
str(df)
'data.frame':6 obs. of  4 variables:
 $ team    : chr  "A" "B" "C" "D" ...
 $ points  : num  18 22 19 14 14 11
 $ assists : num  5 7 7 9 12 9
 $ playoffs: logi  TRUE FALSE FALSE TRUE TRUE TRUEt
</b>
You can then use the <b>sapply()</b> function to only get the column names with a specific data type.
For example, we can use the following syntax to only get the column names that have a data type of <b>numeric</b>:
<b>#get all columns that have data type of numeric
colnames(df[,sapply(df,is.numeric)])
[1] "points"  "assists"
</b>
The result is a vector of column names that have a data type of numeric.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common operations in R:
 How to Add Suffix to Column Names in R 
 How to Loop Through Column Names in R 
 How to Merge Data Frames by Column Names in R 
<h2><span class="orange">How to Use the get() Function in R to Retrieve Named Objects</span></h2>
You can use the <b>get()</b> function in R to retrieve named objects.
Here are the three most common <b>get()</b> functions in R:
<b>1.</b> <b>get()</b> – Retrieve one object
<b>get("my_object")</b>
<b>2.</b> <b>get0()</b> – Retrieve one object, using custom error message if not found
<b>get0("my_object", ifnotfound="does not exist")</b>
<b>3.</b> <b>mget()</b> – Retrieve multiple objects
<b>mget(c("my_object1", "my_object2", "my_object3"))</b>
The following examples show how to use each function in practice.
<h3>Example 1: Use get() to Retrieve One Object</h3>
The following code shows how to use the <b>get()</b> function to retrieve one name object:
<b>#define vector of values
data1 &lt;- c(4, 5, 5, 6, 13, 18, 19, 15, 12)
#get vector of values
get("data1")
[1]  4  5  5  6 13 18 19 15 12
</b>
If the named object does not exist, this function returns an error:
<b>#define vector of values
data1 &lt;- c(4, 5, 5, 6, 13, 18, 19, 15, 12)
#attempt to get vector of values
get("data0")
Error in get("data0") : object 'data0' not found
</b>
<h3>Example 2: Use get0() to Retrieve Object, Using Custom Error Message</h3>
We can also use the <b>get0()</b> function to retrieve a named object in R and use a custom error message if the object is not found:
<b>#define vector of values
data1 &lt;- c(4, 5, 5, 6, 13, 18, 19, 15, 12)
#attempt to get vector of values
get0("data0", ifnotfound="does not exist")
[1] "does not exist"
</b>
Since the named object “data0” does not exist, the <b>get0()</b> function returns the custom error message that we created.
<h3>Example 3: Use mget() to Retrieve Multiple Objects</h3>
We can use the <b>mget()</b> function to retrieve multiple named objects in R:
<b>#define three vectors
data1 &lt;- c(4, 5, 5, 6, 13, 18, 19, 15, 12)
data2 &lt;- c("A", "B", "C", "D")
data3 &lt;- c(10, 20, 25, 30, 35)
#get all three vectors
mget(c("data1", "data2", "data3"))
$data1
[1]  4  5  5  6 13 18 19 15 12
$data2
[1] "A" "B" "C" "D"
$data3
[1] 10 20 25 30 35
</b>
Note that if we just tried to use the <b>get()</b> function, only the first named object would be returned:
<b>#define three vectors
data1 &lt;- c(4, 5, 5, 6, 13, 18, 19, 15, 12)
data2 &lt;- c("A", "B", "C", "D")
data3 &lt;- c(10, 20, 25, 30, 35)
#attempt to get all three vectors
mget(c("data1", "data2", "data3"))
[1]  4  5  5  6 13 18 19 15 12
</b>
<h2><span class="orange">How to Extract Last Row in Data Frame in R</span></h2>
You can use the following methods to extract the last row in a data frame in R:
<b>Method 1: Use Base R</b>
<b>last_row &lt;- tail(df, n=1)
</b>
<b>Method 2: Use dplyr</b>
<b>library(dplyr)
last_row &lt;- df %>% slice(n())
</b>
<b>Method 3: Use data.table</b>
<b>library(data.table)
last_row &lt;- setDT(df[nrow(df), ])
</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28))
#view data frame
df
  team points assists rebounds
1    A     99      33       30
2    B     90      28       28
3    C     86      31       24
4    D     88      39       24
5    E     95      34       28</b>
<h2>Example 1: Extract Last Row Using Base R</h2>
The following code shows how to extract the last row of the data frame by using the <b>tail()</b> function from base R:
<b>#extract last row in data frame
last_row &lt;- tail(df, n=1)
#view last row
last_row
  team points assists rebounds
5    E     95      34       28</b>
Using the <b>tail()</b> function, we’re able to extract only the last row in the data frame.
Note that you can change the value for the <b>n</b> argument to instead select the last n rows of the data frame.
<h2>Example 2: Extract Last Row Using dplyr</h2>
The following code shows how to extract the last row of the data frame by using the <b>slice()</b> function from the <b>dplyr</b> package:
<b>library(dplyr)
#extract last row in data frame
last_row &lt;- df %>% slice(n())
#view last row
last_row
  team points assists rebounds
1    E     95      34       28</b>
Using the <b>slice()</b> function, we’re able to extract only the last row in the data frame.
<b>Related:</b>  How to Use the slice() Function in dplyr (With Examples) 
<h2>Example 3: Extract Last Row Using data.table</h2>
The following code shows how to extract the last row of the data frame by using functions from the <b>data.table</b> package:
<b>library(data.table)
#extract last row in data frame
last_row &lt;- setDT(df[nrow(df), ])
#view last row
last_row
   team points assists rebounds
1:    E     95      34       28</b>
Using the <b>nrow()</b> function, we’re able to extract only the last row in the data frame.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common operations in R:
 How to Select Rows Where Value Appears in Any Column in R 
 How to Select Specific Columns in R 
 How to Select Columns by Index in R 
<h2><span class="orange">How to Use the predict function with glm in R (With Examples)</span></h2>
The <b>glm()</b> function in R can be used to fit generalized linear models. This function is particularly useful for fitting  logistic regression models ,  Poisson regression models , and other complex models.
Once we’ve fit a model, we can then use the <b>predict()</b> function to predict the response value of a new observation.
This function uses the following syntax:
<b>predict(object, newdata, type=”response”)</b>
where:
<b>object:</b> The name of the model fit using the glm() function
<b>newdata:</b> The name of the new data frame to make predictions for
<b>type:</b> The type of prediction to make.
The following example shows how to fit a generalized linear model in R and how to then use the model to predict the response value of a new observation it hasn’t seen before.
<h3>Example: Using the predict function with glm in R</h3>
For this example, we’ll use the built-in R dataset called <b>mtcars</b>:
<b>#view first six rows of <em>mtcars</em> data frame
head(mtcars)
   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</b>
We’ll fit the following logistic regression model in which we use the variables <b>disp</b> and <b>hp</b> to predict the response variable <b>am</b> (the transmission type of the car: 0 = automatic, 1 = manual).
<b>#fit logistic regression model
model &lt;- glm(am ~ disp + hp, data=mtcars, family=binomial)
#view model summary
summary(model)
Call:
glm(formula = am ~ disp + hp, family = binomial, data = mtcars)
Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.9665  -0.3090  -0.0017   0.3934   1.3682  
Coefficients:
            Estimate Std. Error z value Pr(>|z|)  
(Intercept)  1.40342    1.36757   1.026   0.3048  
disp        -0.09518    0.04800  -1.983   0.0474 *
hp           0.12170    0.06777   1.796   0.0725 .
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
(Dispersion parameter for binomial family taken to be 1)
    Null deviance: 43.230  on 31  degrees of freedom
Residual deviance: 16.713  on 29  degrees of freedom
AIC: 22.713
Number of Fisher Scoring iterations: 8
</b>
We can then use this model to predict the probability that a new car has an automatic transmission (am=0) or a manual transmission (am=1) by using the following code:
<b>#define new observation
newdata = data.frame(disp=200, hp= 100)
#use model to predict value of am
predict(model, newdata, type="response")
         1 
0.00422564
</b>
The model predicts the probability of the new car having a manual transmission (am=1) to be <b>0.004</b>. This means it’s highly like that this new car has an automatic transmission.
Note that we can also make several predictions at once if we have a data frame that has multiple new cars.
For example, the following code shows how to use the fitted model to predict the probability of a manual transmission for three new cars:
<b>#define new data frame of three cars
newdata = data.frame(disp=c(200, 180, 160),     hp=c(100, 90, 108))
#view data frame
newdata
  disp  hp
1  200 100
2  180  90
3  160 108
#use model to predict value of <em>am</em> for all three cars
predict(model, newdata, type="response")
          1           2           3 
0.004225640 0.008361069 0.335916069 
</b>
Here’s how to interpret the output:
The probability that car 1 has a manual transmission is <b>.004</b>.
The probability that car 2 has a manual transmission is <b>.008</b>.
The probability that car 3 has a manual transmission is <b>.336</b>.
<h3>Notes</h3>
The names of the columns in the new data frame should exactly match the names of the columns in the data frame that were used to build the model.
Notice that in our previous example, the data frame we used to build the model contained the following column names for our predictor variables:
<b>disp</b>
<b>hp</b>
Thus, when we created the new data frame called <b>newdata</b> we made sure to also name the columns:
<b>disp</b>
<b>hp</b>
If the names of the columns do not match, you’ll receive the following error message:
<b>Error in eval(predvars, data, env) </b>
Keep this in mind when using the predict() function.
<h2><span class="orange">R: How to Group By and Count with Condition</span></h2>
You can use the following basic syntax to perform a group by and count with condition in R:
<b>library(dplyr)
df %>%
  group_by(var1) %>%
  summarize(count = sum(var2 == 'val'))
</b>
This particular syntax groups the rows of the data frame based on <b>var1</b> and then counts the number of rows where <b>var2</b> is equal to ‘val.’
The following example shows how to use this syntax in practice.
<h2>Example: Group By and Count with Condition in R</h2>
Suppose we have the following data frame in R that contains information about various basketball players:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), pos=c('Gu', 'Fo', 'Fo', 'Fo', 'Gu', 'Gu', 'Fo', 'Fo'), points=c(18, 22, 19, 14, 14, 11, 20, 28))
#view data frame
df
  team pos points
1    A  Gu     18
2    A  Fo     22
3    A  Fo     19
4    A  Fo     14
5    B  Gu     14
6    B  Gu     11
7    B  Fo     20
8    B  Fo     28
</b>
The following code shows how to group the data frame by the <b>team</b> variable and count the number of rows where the <b>pos</b> variable is equal to ‘Gu’:
<b>library(dplyr)
#group by team and count rows where pos is 'Gu'
df %>%
  group_by(team) %>%
  summarize(count = sum(pos == 'Gu'))
# A tibble: 2 x 2
  team  count
   
1 A         1
2 B         2</b>
From the output we can see:
Team A has <b>1</b> row where the pos column is equal to ‘Gu’
Team B has <b>2</b> rows where the pos column is equal to ‘Gu’
We can use similar syntax to perform a group by and count with some numerical condition.
For example, the following code shows how to group by the <b>team</b> variable and count the number of rows where the <b>points </b>variable is greater than 15:
<b>library(dplyr)
#group by team and count rows where pos is 'Gu'
df %>%
  group_by(team) %>%
  summarize(count = sum(points > 15))
# A tibble: 2 x 2
  team  count
   
1 A         3
2 B         2
</b>
From the output we can see:
Team A has <b>3</b> rows where the points column is greater than 15
Team B has <b>2</b> rows where the points column is greater than 15 
You can use similar syntax to perform a group by and count with any specific condition you’d like.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Count Values in Column with Condition in R 
 How to Select Top N Values by Group in R 
<h2><span class="orange">How to Group Data by Month in R (With Example)</span></h2>
You can use the <b>floor_date()</b> function from the  lubridate  package in R to quickly group data by month.
This function uses the following basic syntax:
<b>library(tidyverse)
df %>% 
    group_by(month = lubridate::floor_date(date_column, 'month')) %>%
    summarize(sum = sum(value_column))</b>
The following example shows how to use this function in practice.
<h3>Example: Group Data by Month in R</h3>
Suppose we have the following data frame in R that shows the total sales of some item on various dates:
<b>#create data frame 
df &lt;- data.frame(date=as.Date(c('1/4/2022', '1/9/2022', '2/10/2022', '2/15/2022',                '3/5/2022', '3/22/2022', '3/27/2022'), '%m/%d/%Y'), sales=c(8, 14, 22, 23, 16, 17, 23))
#view data frame
df
        date sales
1 2022-01-04     8
2 2022-01-09    14
3 2022-02-10    22
4 2022-02-15    23
5 2022-03-05    16
6 2022-03-22    17
7 2022-03-27    23</b>
We can use the following code to calculate the sum of sales, grouped by month:
<b>library(tidyverse)
#group data by month and sum sales
df %>% 
    group_by(month = lubridate::floor_date(date, 'month')) %>%
    summarize(sum_of_sales = sum(sales))
# A tibble: 3 x 2
  month      sum_of_sales
              
1 2022-01-01           22
2 2022-02-01           45
3 2022-03-01           56
</b>
From the output we can see:
A total of <b>22</b> sales were made in January.
A total of <b>45</b> sales were made in February.
A total of <b>56</b> sales were made in March.
We can also aggregate the data using some other metric.
For example, we could calculate the max sales made in one day, grouped by month:
<b>library(tidyverse)
#group data by month and find max sales
df %>% 
    group_by(month = lubridate::floor_date(date, 'month')) %>%
    summarize(max_of_sales = max(sales))
# A tibble: 3 x 2
  month      max_of_sales
              
1 2022-01-01           14
2 2022-02-01           23
3 2022-03-01           23
</b>
From the output we can see:
The max sales made in one day in January was <b>14</b>.
The max sales made in one day in February was <b>23</b>.
The max sales made in one day in March was <b>23</b>.
Feel free to use whatever metric you’d like within the <b>summarize()</b> function.
<h2><span class="orange">How to Group Data by Week in R (With Example)</span></h2>
You can use the <b>strftime()</b> function in base R with the “<b>%V</b>” argument to group data by week in R.
This function uses the following basic syntax:
<b>df$week_num &lt;- strftime(df$date, format = "%V")
</b>
The following example shows how to use this function in practice.
<h2>Example: Group Data by Week in R</h2>
Suppose we have the following data frame in R that shows the total sales of some item on various dates:
<b>#create data frame 
df &lt;- data.frame(date=as.Date(c('1/8/2022', '1/9/2022', '2/10/2022', '2/15/2022',                '3/5/2022', '3/22/2022', '3/27/2022'), '%m/%d/%Y'), sales=c(8, 14, 22, 23, 16, 17, 23))
#view data frame
df
        date sales
1 2022-01-08     8
2 2022-01-09    14
3 2022-02-10    22
4 2022-02-15    23
5 2022-03-05    16
6 2022-03-22    17
7 2022-03-27    23</b>
We can use the following code to add a column that shows the week number of each date:
<b>#add column to show week number
df$week_num &lt;- strftime(df$date, format = "%V")
#view updated data frame
df
        date sales week_num
1 2022-01-08     8       01
2 2022-01-09    14       01
3 2022-02-10    22       06
4 2022-02-15    23       07
5 2022-03-05    16       09
6 2022-03-22    17       12
7 2022-03-27    23       12</b>
<b>Note</b>: From the documentation, here is how <b>%V%</b> calculates date numbers:  <em>“the week number of the year (Monday as the first day of the week) as a decimal number [01,53]. If the week containing 1 January has four or more days in the new year, then it is considered week 1. Otherwise, it is the last week of the previous year, and the next week is week 1.”</em>
Once we’ve created this new column, we can aggregate values based on week number.
For example, we can use the following code to calculate the sum of sales, grouped by week:
<b>library(dplyr)
#calculate sum of sales, grouped by week
df %>%
  group_by(week_num) %>%
  summarize(total_sales = sum(sales))
# A tibble: 6 x 2
  week_num total_sales
            
1 01                22
2 06                22
3 07                23
4 09                16
5 12                40
</b>
From the output we can see:
The sum of sales during week 1 was <b>22</b>.
The sum of sales during week 6 was <b>22</b>.
The sum of sales during week 7 was <b>23</b>.
And so on.
We can also use another metric to aggregate the data.
For example, we can use the following code to calculate the mean of sales, grouped by week:
<b>library(dplyr)
#calculate mean of sales, grouped by week
df %>%
  group_by(week_num) %>%
  summarize(mean_sales = mean(sales))
# A tibble: 5 x 2
  week_num mean_sales
           
1 01               11
2 06               22
3 07               23
4 09               16
5 12               20</b>
From the output we can see:
The mean of sales during week 1 was <b>11</b>.
The mean of sales during week 6 was <b>22</b>.
The mean of sales during week 7 was <b>23</b>.
And so on.
<h2><span class="orange">How to Use gsub() in R to Replace Multiple Patterns</span></h2>
The  gsub()  function in R can be used to replace all occurrences of a certain pattern within a string in R.
To replace multiple patterns at once, you can use a nested <b>gsub()</b> statement:
<b>df$col1 &lt;- gsub('old1', 'new1',
           gsub('old2', 'new2',
           gsub('old3', 'new3', df$col1)))
</b>
However, a much faster method is the <b>stri_replace_all_regex()</b> function from the <b>stringi</b> package, which uses the following syntax:
<b>library(stringi)
df$col1 &lt;- stri_replace_all_regex(df$col1,                  pattern=c('old1', 'old2', 'old3'),                  replacement=c('new1', 'new2', 'new3'),                  vectorize=FALSE)</b>
The following examples show how to use each method in practice.
<h3>Method 1: Replace Multiple Patterns with Nested gsub()</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(name=c('A', 'B', 'B', 'C', 'D', 'D'), points=c(24, 26, 28, 14, 19, 12))
#view data frame
df
  name points
1    A     24
2    B     26
3    B     28
4    C     14
5    D     19
6    D     12 </b>
We can use a nested<b> gsub()</b> statement to replace multiple patterns in the <b>name</b> column:
<b>#replace multiple patterns in name column
df$name &lt;- gsub('A', 'Andy',
           gsub('B', 'Bob',
           gsub('C', 'Chad', df$name)))
#view updated data frame
df
  name points
1 Andy     24
2  Bob     26
3  Bob     28
4 Chad     14
5    D     19
6    D     12</b>
Notice that A, B, and C in the <b>name</b> column have all been replaced with new values.
<h3>Method 2: Replace Multiple Patterns with stringi</h3>
A much faster way to replace multiple patterns is by using the <b>stri_replace_all_regex()</b> function from the <b>stringi</b> package.
The following code shows how to use this function:
<b>library(stringi)
#replace multiple patterns in name column
df$name &lt;- stri_replace_all_regex(df$name,                  pattern=c('A', 'B', 'C'),                  replacement=c('Andy', 'Bob', 'Chad'),                  vectorize=FALSE)
#view updated data frame
df
  name points
1 Andy     24
2  Bob     26
3  Bob     28
4 Chad     14
5    D     19
6    D     12
</b>
Notice that the resulting data frame matches the one from the previous example.
If your data frame is even moderately large, you’ll notice that this function is much faster than the <b>gsub()</b> function.
<h2><span class="orange">How to Fix in R: ‘height’ must be a vector or a matrix</span></h2>
One error you may encounter in R is:
<b>Error in barplot.default(df) : 'height' must be a vector or a matrix
</b>
This error occurs when you attempt to use the <b>barplot()</b> function to create a bar plot in R, yet you provide the name of a data frame instead of the name of a column within the data frame.
This tutorial shares exactly how to fix this error.
<h2>How to Reproduce the Error</h2>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(player=c('A', 'B', 'C', 'D', 'E'), points=c(17, 12, 8, 9, 25))
#view data frame
df
  player points
1      A     17
2      B     12
3      C      8
4      D      9
5      E     25</b>
Now suppose we attempt to use the <b>barplot()</b> function to create a bar plot:
<b>#attempt to create bar plot
barplot(df)
Error in barplot.default(df) : 'height' must be a vector or a matrix
</b>
We receive an error because we provided the name of a data frame in the <b>barplot()</b> function instead of the name of a data frame column.
<h2>How to Fix the Error</h2>
The easiest way to fix this error is to simply provide a name of a data frame column to the <b>barplot()</b> function:
<b>#create bar plot to visualize values in points column
barplot(df$points)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/09/barplot1.jpg"436">
Notice that we don’t receive any error this time since we provided the name of a data frame column to the <b>barplot()</b> function.
Also note that we can use the following syntax to add axis labels to the plot to make it easier to interpret:
<b>#create bar plot with labels
barplot(df$points, names=df$player, xlab='Player', ylab='Points')
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/09/barplot2.jpg"458">
The x-axis displays the player names while the y-axis displays the points values for each player.
<h2>Additional Resources</h2>
The following tutorials explain how to fix other common errors in R:
 How to Fix in R: NAs Introduced by Coercion 
 How to Fix in R: Subscript out of bounds 
 How to Fix in R: longer object length is not a multiple of shorter object length 
 How to Fix in R: number of items to replace is not a multiple of replacement length 
<h2><span class="orange">R: How to Change Number of Bins in Histogram</span></h2>
When you create a histogram in R, a formula known as  Sturges’ Rule  is used to determine the optimal number of bins to use.
However, you can use the following syntax to override this formula and specify an exact number of bins to use in the histogram:
<b>hist(data, breaks = seq(min(data), max(data), length.out = 7))
</b>
Note that the number of bins used in the histogram will be one less than the number specified in the <b>length.out</b> argument.
The following examples show how to use this syntax in practice.
<h3>Example 1: Create a Basic Histogram</h3>
The following code shows how to create a basic histogram in R without specifying the number of bins:
<b>#define vector of data
data &lt;- c(1, 2, 2, 3, 4, 4, 4, 5, 5, 6, 7, 10, 11, 13, 16, 16, 16)
#create histogram of data
hist(data, col = 'lightblue')</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/bins1.png">
Using Sturges’ Rule, R decided to use <b>8</b> total bins in the histogram.
<h3>Example 2: Specify Number of Bins to Use in Histogram</h3>
The following code shows how to create a histogram for the same vector of data and use exactly <b>6</b> bins:
<b>#define vector of data
data &lt;- c(1, 2, 2, 3, 4, 4, 4, 5, 5, 6, 7, 10, 11, 13, 16, 16, 16)
#create histogram with 6 bins
hist(data, col = 'lightblue', breaks = seq(min(data), max(data), length.out = 7))</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/bins2.png">
<h3>Cautions on Choosing a Specific Number of Bins</h3>
The number of bins used in a histogram has a huge impact on how we interpret a dataset.
If we use too few bins, the true underlying pattern in the data can be hidden:
<b>#define vector of data
data &lt;- c(1, 2, 2, 3, 4, 4, 4, 5, 5, 6, 7, 10, 11, 13, 16, 16, 16)
#create histogram with 3 bins
hist(data, col = 'lightblue', breaks = seq(min(data), max(data), length.out = 4))</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/bins3.png">
Conversely, if we use too many bins then we may just be visualizing the noise in a dataset:
<b>#define vector of data
data &lt;- c(1, 2, 2, 3, 4, 4, 4, 5, 5, 6, 7, 10, 11, 13, 16, 16, 16)
#create histogram with 15 bins
hist(data, col = 'lightblue', breaks = seq(min(data), max(data), length.out = 16))</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/bins4.png">
In general, the default Sturges’ Rule used in R tends to produce histograms that have an optimal number of bins.
Feel free to use the code provided here to create a histogram with an exact number of bins, but be careful not to choose too many or too few bins.
<h2><span class="orange">How to Specify Histogram Breaks in R (With Examples)</span></h2>
By default, the <b>hist()</b> function in R uses  Sturges’ Rule  to determine how many bins to use in a histogram.
Sturges’ Rule uses the following formula to determine the optimal number of bins to use in a histogram:
<b>Optimal Bins = <U+2308>log<sub>2</sub>n + 1<U+2309></b>
where:
<b>n: </b>The total number of  observations  in the dataset.
<b><U+2308> <U+2309>:</b> Symbols that mean “ceiling” – i.e. round the answer up to the nearest integer.
For example, if there are 31 observations in a dataset, Sturge’s Rule will use the following formula to determine the optimal number of bins to use in a histogram:
<b>Optimal Bins</b> = <U+2308>log<sub>2</sub>(31) + 1<U+2309> = <U+2308>4.954 + 1<U+2309> = <U+2308>5.954<U+2309> = <b>6</b>.
According to Sturges’ Rule, we should use 6 bins in the histogram to visualize this dataset.
If you use the <b>hist()</b> function in R, Sturges’ Rule will be used to automatically choose the number of bins to display in the histogram.
<b>hist(data)
</b>
Even if you use the <b>breaks</b> argument to specify a different number of bins to use, R will only use this as a “suggestion” for how many bins to use.
<b>hist(data, breaks=7)</b>
However, you can use the following code to force R to use a specific number of bins in a histogram:
<b>#create histogram with 7 bins
hist(data, breaks = seq(min(data), max(data), length.out = 8))
</b>
<b>Note</b>: You must use a length of <b>n+1</b> for length.out where <b>n</b> is your desired number of bins.
The following example shows how to use this code in practice.
<h3>Example: Specify Histogram Breaks in R</h3>
Suppose we have the following dataset in R with 16 values:
<b>#create vector of 16 values
data &lt;- c(2, 3, 3, 3, 4, 4, 5, 6, 8, 10, 12, 14, 15, 18, 20, 21)
</b>
If we use the <b>hist()</b> function, R will create the following histogram with 5 bins:
<b>#create histogram
hist(data)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/11/bins11.png">
<b>Note</b>: R used  Sturges’ Rule  to determine that 5 bins was the optimal number of bins to use to visualize a dataset with 16 observations.
If we attempt to use the <b>breaks</b> argument to specify 7 bins to use in the histogram, R will only take this as a “suggestion” and instead choose to use 10 bins:
<b>#attempt to create histogram with 7 bins
hist(data, breaks=7)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/11/bins12.png">
However, we can use the following code to force R to use 7 bins in the histogram:
<b>#create histogram with 7 bins
hist(data, breaks = seq(min(data), max(data), length.out = 8))
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/11/bins13.png">
Notice that the result is a histogram with 7 equally-spaced bins.
<h2><span class="orange">How to Create a Histogram with Different Colors in R</span></h2>
Often you may want to create a histogram that has several different colors in R.
The following examples show how to do so in base R and in  ggplot2 .
<h3>Example 1: Histogram with Different Colors in Base R</h3>
The following code shows how to create a histogram with just one color in base R:
<b>#create data frame
df &lt;- data.frame(x=c(12, 14, 14, 15, 15, 17, 19, 22, 23, 23, 24))
#create histogram
hist(df$x)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/diffcolor1.jpg"428">
By default, all of the colors of the bars are the same in the histogram.
However, we can use the following code to create a histogram with three different colors:
<b>#create data frame
df &lt;- data.frame(x=c(12, 14, 14, 15, 15, 17, 19, 22, 23, 23, 24))
#define histogram break points
hist_breaks &lt;- hist(df$x)$breaks
#define colors to use in histogram based on break points
color_list &lt;- rep('red', length(hist_breaks))
color_list[hist_breaks &lt; 20] &lt;- 'blue'
color_list[hist_breaks &lt; 16] &lt;- 'purple'
#create histogram with custom colors 
hist(df$x, col=color_list)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/diffcolor2.jpg">
Here’s how the logic worked to create the three colors:
First, we specified every bar to be <b>red</b>.
Then, we changed every bar with a break point less than 20 to be <b>blue</b>.
Then, we changed every bar with a break point less than 16 to be <b>purple</b>.
The end result is a histogram with three colors.
<h3>Example 2: Histogram with Different Colors in ggplot2</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(x=c(12, 14, 14, 15, 15, 17, 19, 22, 23, 23, 24))
#view data frame
df
    x
1  12
2  14
3  14
4  15
5  15
6  17
7  19
8  22
9  23
10 23
11 24
</b>
To create a histogram with different colors for this data frame, we need to first create a grouping variable for the values using a  nested if else statement :
<b>#create grouping variable
df$group = ifelse(df$x &lt; 16, 'C', ifelse(df$x &lt; 20, 'B', 'A'))
#view updated data frame
df
    x group
1  12     C
2  14     C
3  14     C
4  15     C
5  15     C
6  17     B
7  19     B
8  22     A
9  23     A
10 23     A
11 24     A</b>
Now we can create a histogram in ggplot2 and define the colors in the plot using the group variable:
<b>#create histogram with custom colors
ggplot(df, aes(x, fill=group)) +
  geom_histogram(bins=6, color='black') +
   scale_fill_manual(values = c('A' = 'red',                'B' = 'blue',                'C' = 'purple'))
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/diffcolor3.jpg"474">
The end result is a histogram with three colors.
<b>Note</b>: You can find the complete documentation for <b>scale_fill_manual() </b> here .
<h2><span class="orange">R: How to Use If Statement with Multiple Conditions</span></h2>
You can use the following methods to create a new column in R using an IF statement with multiple conditions:
<b>Method 1: If Statement with Multiple Conditions Using OR</b>
<b>df$new_var &lt;- ifelse(df$var1>15 | df$var2>8, "value1", "value2")
</b>
<b>Method 2: If Statement with Multiple Conditions Using AND</b>
<b>df$new_var &lt;- ifelse(df$var1>15 & df$var2>8, "value1", "value2") 
</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(8, 8, 10, 13, 17, 19, 22, 25), assists=c(5, 10, 9, 6, 8, 10, 11, 12))
#view data frame
df
  team points assists
1    A      8       5
2    A      8      10
3    A     10       9
4    A     13       6
5    B     17       8
6    B     19      10
7    B     22      11
8    B     25      12</b>
<h3>Example 1: If Statement with Multiple Conditions Using OR</h3>
The following code shows how to create a new column called <b>rating</b> that assigns a value of “good” if the points column is greater than 15 <b>or</b> the assists column is greater than 8.
Otherwise it assigns a value of “bad”:
<b>#create new "rating" column using if statement with multiple conditions
df$rating &lt;- ifelse(df$points>15 | df$assists>8, "good", "bad")
#view updated data frame
df
  team points assists rating
1    A      8       5    bad
2    A      8      10   good
3    A     10       9   good
4    A     13       6    bad
5    B     17       8   good
6    B     19      10   good
7    B     22      11   good
8    B     25      12   good
</b>
Each player receives a value of “good” or “bad” in the newly created <b>rating</b> column.
Note that the <b>|</b> operator is used as an “or” statement in R.
<h3>Example 2: If Statement with Multiple Conditions Using AND</h3>
The following code shows how to create a new column called <b>rating</b> that assigns a value of “good” if the points column is greater than 15 <b>and </b>the assists column is greater than 8.
Otherwise it assigns a value of “bad”:
<b>#create new "rating" column using if statement with multiple conditions
df$rating &lt;- ifelse(df$points>15 & df$assists>8, "good", "bad")
#view updated data frame
df
  team points assists rating
1    A      8       5    bad
2    A      8      10    bad
3    A     10       9    bad
4    A     13       6    bad
5    B     17       8    bad
6    B     19      10   good
7    B     22      11   good
8    B     25      12   good
</b>
Each player receives a value of “good” or “bad” in the newly created <b>rating</b> column.
Note that the <b>&</b> operator is used as an “and” statement in R.
<h2><span class="orange">R: The Difference Between ifelse() vs. if_else()</span></h2>
There are three advantages that the <b>if_else()</b> function in  dplyr  has over the <b>ifelse()</b> function in base R:
<b>1.</b> The <b>if_else()</b> function verifies that both alternatives in the if else statement have the same data type.
<b>2.</b> The <b>if_else()</b> function does not convert Date objects to numeric.
<b>3.</b> The <b>if_else()</b> function offers a ‘missing’ argument to specify how to handle NA values.
The following examples illustrate these differences in practice.
<h2>Example 1: if_else() Verifies that Both Alternatives Have the Same Type</h2>
Suppose we have the following data frame in R that contains information about various basketball players:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(22, 20, 28, 14, 13, 18, 27, 33))
#view data frame
df
  team points
1    A     22
2    A     20
3    A     28
4    A     14
5    B     13
6    B     18
7    B     27
8    B     33</b>
If we use the <b>ifelse()</b> function from base R to create a new column that assigns a value of ‘Atlanta’ to rows with a team value of ‘A’ and 0 to rows with a different value, we won’t receive any error even though ‘Atlanta’ is a character and 0 is a number:
<b>#create new column based on values in team column
df$city &lt;- ifelse(df$team == 'A', 'Atlanta', 0)
#view updated data frame
df
  team points    city
1    A     22 Atlanta
2    A     20 Atlanta
3    A     28 Atlanta
4    A     14 Atlanta
5    B     13       0
6    B     18       0
7    B     27       0
8    B     33       0
</b>
However, if we use the <b>if_else()</b> function from dplyr to perform this same task, we’ll receive an error that lets us know we used two different data types in the if else statement:
<b>library(dplyr)
#attempt to create new column based on values in team column
df$city &lt;- if_else(df$team == 'A', 'Atlanta', 0)
Error: `false` must be a character vector, not a double vector.
</b>
<h2>Example 2: if_else() Does Not Convert Date Objects to Numeric</h2>
Suppose we have the following data frame in R that shows the sales made on various dates at some store:
<b>#create data frame
df &lt;- data.frame(date=as.Date(c('2022-01-05', '2022-01-17', '2022-01-22',        '2022-01-23', '2022-01-29', '2022-02-13')), sales=c(22, 35, 24, 20, 16, 19))
#view data frame
df
        date sales
1 2022-01-05    22
2 2022-01-17    35
3 2022-01-22    24
4 2022-01-23    20
5 2022-01-29    16
6 2022-02-13    19
</b>
If we use the <b>ifelse()</b> function from base R to modify the values in the date column, the values will automatically get converted to numeric:
<b>#if date is before 2022-01-20 then add 5 days
df$date &lt;- ifelse(df$date &lt; '2022-01-20', df$date+5, df$date)
   date sales
1 19002    22
2 19014    35
3 19014    24
4 19015    20
5 19021    16
6 19036    19
</b>
However, if we use the <b>if_else()</b> function from dplyr, the date objects will remain as dates:
<b>library(dplyr)
#if date is before 2022-01-20 then add 5 days
df$date &lt;- ifelse(df$date &lt; '2022-01-20', df$date+5, df$date)
#view updated data frame
df
        date sales
1 2022-01-10    22
2 2022-01-22    35
3 2022-01-22    24
4 2022-01-23    20
5 2022-01-29    16
6 2022-02-13    19
</b>
<h2>Example 3: if_else() Offers a ‘missing’ Argument to Specify How to Handle NA Values</h2>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', NA, 'B'), points=c(22, 20, 28, 14, 13, 18, 27, 33))
#view data frame
df
  team points
1    A     22
2    A     20
3    A     28
4    A     14
5    B     13
6    B     18
7   &lt;NA>   27
8    B     33</b>
If we use the <b>ifelse()</b> function from base R to create a new column, there is no default option to specify how to handle NA values:
<b>#create new column based on values in team column
df$city &lt;- ifelse(df$team == 'A', 'Atlanta', 'Boston')
#view updated data frame
df
  team points    city
1    A     22 Atlanta
2    A     20 Atlanta
3    A     28 Atlanta
4    A     14 Atlanta
5    B     13  Boston
6    B     18  Boston
7   &lt;NA>   27    &lt;NA>
8    B     33  Boston
</b>
However, if we use the <b>if_else()</b> function from dplyr then we can use the <b>missing</b> argument to specify how to handle NA values:
<b>library(dplyr)
#create new column based on values in team column
df$city &lt;- ifelse(df$team == 'A', 'Atlanta', 'Boston', missing='other')
#view updated data frame
df
  team points    city
1    A     22 Atlanta
2    A     20 Atlanta
3    A     28 Atlanta
4    A     14 Atlanta
5    B     13  Boston
6    B     18  Boston
7   &lt;NA>   27   other
8    B     33  Boston
</b>
Notice that the row with an NA value in the <b>team</b> column receives a value of ‘other’ in the new city <b>column</b>.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Use If Statement with Multiple Conditions in R 
 How to Write a Nested If Else Statement in R 
 How to Write Your First tryCatch() Function in R 
<h2><span class="orange">R: Prevent ifelse() from Converting Date to Numeric</span></h2>
The <b>ifelse()</b> function in base R converts date objects to numeric objects by default.
To prevent this from happening, you can use one of the following methods as an alternative:
<b>Method 1: Use as.character() in Base R</b>
<b>df$date &lt;- as.Date(ifelse(df$date &lt; '2022-01-20',   as.character(df$date+5),   as.character(df$date)))</b>
<b>Method 2: Use if_else() in dplyr</b>
<b>df$date &lt;- if_else(df$date &lt; '2022-01-20', df$date+5, df$date)</b>
<b>Method 3: Use fifelse() in data.table</b>
<b>df$date &lt;- fifelse(df$date &lt; '2022-01-20', df$date+5, df$date)</b>
The following examples show how to use each method in practice with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(date=as.Date(c('2022-01-05', '2022-01-17', '2022-01-22',        '2022-01-23', '2022-01-29', '2022-02-13')), sales=c(22, 35, 24, 20, 16, 19))
#view data frame
df
        date sales
1 2022-01-05    22
2 2022-01-17    35
3 2022-01-22    24
4 2022-01-23    20
5 2022-01-29    16
6 2022-02-13    19
</b>
<h2>Example 1: Use as.character() in Base R</h2>
The following code shows how to use the <b>as.character()</b> function with the <b>ifelse()</b> function from base R to perform an if else statement on the <b>date</b> column in the data frame and produce a date as a result:
<b>#if date is before 2022-01-20 then add 5 days
df$date &lt;- as.Date(ifelse(df$date &lt; '2022-01-20',   as.character(df$date+5),   as.character(df$date)))
#view updated data frame
df
        date sales
1 2022-01-10    22
2 2022-01-22    35
3 2022-01-22    24
4 2022-01-23    20
5 2022-01-29    16
6 2022-02-13    19
</b>
If any value in the <b>date</b> column was before 2022-01-20, we added five days to the date.
Notice that the <b>date</b> column has retained its date format instead of being converted to a numeric format.
<h2>Example 2: Use if_else() in dplyr</h2>
The following code shows how to use the <b>if_else()</b> function from dplyr to perform an if else statement on the <b>date</b> column in the data frame and produce a date as a result:
<b>library(dplyr)
#if date is before 2022-01-20 then add 5 days
df$date &lt;- if_else(df$date &lt; '2022-01-20', df$date+5, df$date)
#view updated data frame
df
        date sales
1 2022-01-10    22
2 2022-01-22    35
3 2022-01-22    24
4 2022-01-23    20
5 2022-01-29    16
6 2022-02-13    19
</b>
If any value in the <b>date</b> column was before 2022-01-20, we added five days to the date.
Notice that the <b>date</b> column has retained its date format instead of being converted to a numeric format.
<h2>Example 3: Use fifelse() in data.table</h2>
The following code shows how to use the <b>fifelse()</b> function from data.table to perform an if else statement on the <b>date</b> column in the data frame and produce a date as a result:
<b>library(data.table)
#if date is before 2022-01-20 then add 5 days
df$date &lt;- fifelse(df$date &lt; '2022-01-20', df$date+5, df$date)
#view updated data frame
df
        date sales
1 2022-01-10    22
2 2022-01-22    35
3 2022-01-22    24
4 2022-01-23    20
5 2022-01-29    16
6 2022-02-13    19
</b>
If any value in the <b>date</b> column was before 2022-01-20, we added five days to the date.
Once again, the <b>date</b> column has retained its date format instead of being converted to a numeric format.
<b>Note</b>: For extremely large data frames, the dplyr and data.table methods will be faster than the base R method.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Write a Nested If Else Statement in R 
 How to Write a Case Statement in R 
 How to Add Multiple Columns to Data Frame in R 
<h2><span class="orange">How to Include NA in ifelse Statement in R</span></h2>
Often you may want to use an <b>ifelse</b> statement in R to create a new column in a data frame whose values are based on the values in an existing column.
To do so, you can use the following basic syntax:
<b>df$new_column&lt;- ifelse(df$col1=='A', 'val_if_true', 'val_if_false') </b>
However, if NA values are present in a column then the values in the new column will automatically be NA.
To avoid this, you can use the <b>!is.na()</b> function as follows:
<b>df$new_column&lt;- ifelse(df$col1=='A' & !is.na(df$col1), 'val_if_true', 'val_if_false') </b>
The following example shows how to use this syntax in practice.
<h2>Example: Include NA in ifelse Statement in R</h2>
Suppose we have the following data frame in R that contains information about various basketball players:
<b>#create data frame
df &lt;- data.frame(player=c('A', 'B', 'C', 'D', 'E', 'F'), conf=c('West', NA, 'West', 'East', 'East', 'East'), points=c(30, 35, 11, 18, 14, NA))
#view data frame
df
  player conf points
1      A West     30
2      B &lt;NA>     35
3      C West     11
4      D East     18
5      E East     14
6      F East     NA
</b>
Now suppose we attempt to create a new column called <b>class</b> that takes on the following values:
‘West_Player’ if <b>conf</b> is equal to ‘West’
‘Other’ if <b>conf</b> is not equal to ‘West’
The following code shows how to do so:
<b>#create new column called 'class'
df$class &lt;- ifelse(df$conf=='West', 'West_Player', 'Other')
#view updated data frame
df
  player conf points       class
1      A West     30 West_Player
2      B &lt;NA>     35        &lt;NA>
3      C West     11 West_Player
4      D East     18       Other
5      E East     14       Other
6      F East     NA       Other</b>
Notice that the value for <b>class</b> in row 2 is equal to NA since the corresponding value in the <b>conf</b> column was equal to NA.
To avoid this, we can use the<b> !is.na()</b> function as follows:
<b>#create new column called 'class'
df$class &lt;- ifelse(df$conf=='West' & !is.na(df$conf), 'West_Player', 'Other')
#view updated data frame
df
  player conf points       class
1      A West     30 West_Player
2      B &lt;NA>     35       Other
3      C West     11 West_Player
4      D East     18       Other
5      E East     14       Other
6      F East     NA       Other
</b>
Notice that the value for <b>class</b> in row 2 is now equal to ‘Other’ instead of NA.
By using the <b>!is.na()</b> function, we specified that the value in the <b>conf</b> column must be equal to ‘West’ <em>and</em> not equal to NA in order for the value in the new <b>class</b> column to be ‘West_Player’.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Write a Nested If Else Statement in R 
 How to Write a Case Statement in R 
 How to Add Multiple Columns to Data Frame in R 
<h2><span class="orange">How to Fix in R: incomplete final line found by readTableHeader</span></h2>
One warning you may encounter in R is:
<b>Warning message:
In read.table(file = file, header = header, sep = sep, quote = quote,  :
  incomplete final line found by readTableHeader on 'my_data.csv' 
</b>
This warning occurs when you attempt to read a CSV file into R but the final line in the file is not blank.
It’s important to note that this is only a <b>warning</b> message and not an error. Even when this message appears, your file will still be imported into R.
This tutorial shares how to avoid this warning altogether.
<h2>How to Reproduce the Warning</h2>
Suppose I have the following CSV file called <b>my_data.csv</b> that I’d like to import into R:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/06/incomp1.jpg"441">
Now suppose I attempt to use the following code to import this CSV file into R:
<b>#import CSV file
df &lt;- read.csv('my_data.csv')
Warning message:
In read.table(file = file, header = header, sep = sep, quote = quote,  :
  incomplete final line found by readTableHeader on 'my_data.csv'</b>
I receive a warning message because the final line in the CSV file is not blank.
However, the file was still imported successfully:
<b>#view imported data frame
df
  team points assists
1    A     20       5
2    B     15       3
3    C     19       9
4    D     20       3.
</b>
<h2>Method 1: How to Avoid the Warning</h2>
One way to avoid this warning is to simply place the<b> read.csv()</b> function inside a <b>suppressWarnings()</b> function:
<b>#import CSV file and suppress any warnings
df &lt;- suppressWarnings(read.csv('my_data.csv'))
#view data frame
df
  team points assists
1    A     20       5
2    B     15       3
3    C     19       9
4    D     20       3
</b>
This time we’re able to import the CSV file without any warnings.
The benefit of this approach is that we don’t have to modify the file directly.
The drawback of this approach is that if there are more serious warnings we need to know about when importing the file, we won’t be able to see them.
<h2>Method 2: How to Avoid the Warning</h2>
Another way to avoid this warning is to modify the CSV file directly.
Specifically, we can go to the last line of the file and press Enter to create a new blank line at the end of the file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/06/incomp2.jpg"464">
Now when we import the CSV file, we don’t receive any warnings:
<b>#import CSV file
df &lt;- read.csv('my_data.csv')
#view data frame
df
  team points assists
1    A     20       5
2    B     15       3
3    C     19       9
4    D     20       3
</b>
The benefit of this approach is that we’ll still be able to see any other warnings when importing the file.
The drawback of this approach is that we have to modify the file directly rather than simply using a programmatic solution.
<h2><span class="orange">How to Fix Error in R: incorrect number of dimensions</span></h2>
One error you may encounter in R is:
<b>Error in x[, 3] : incorrect number of dimensions
</b>
This error occurs when you attempt to subset some object in R by more dimensions than the object has.
This tutorial shares exactly how to fix this error.
<h3>How to Reproduce the Error</h3>
Suppose we have the following vector in R with 10 values:
<b>#define vector
x &lt;- c(3, 4, 7, 7, 14, 19, 22, 28, 29, 30)
</b>
The vector is one-dimensional, but suppose we attempt to subset by two dimensions:
<b>#attempt to access value in first row and third column
x[ , 3]
Error in x[, 3] : incorrect number of dimensions
#attempt to access value in third row and first column
x[3, ]
Error in x[3, ] : incorrect number of dimensions
</b>
We receive an error because we attempted to subset by two dimensions when the vector only has one dimension.
<h3>How to Fix the Error</h3>
The easiest way to fix this error is to simply subset by one dimension. For example, here’s how to access the third value in the vector:
<b>#access third value in vector
x[3]
[1] 7
</b>
We can also access several values in the vector at once. For example, here’s how to access the values in positions 2 through 5 in the vector:
<b>#access values in positions 2 through 5
x[2:5]
[1]  4  7  7 14
</b>
Since we subset by only one dimension, we avoid the <b>incorrect number of dimensions</b> error.
<h2><span class="orange">How to Fix in R: incorrect number of subscripts on matrix</span></h2>
One error you may encounter in R is:
<b>Error in x[i, ] &lt;- 0 : incorrect number of subscripts on matrix
</b>
This error occurs when you attempt to assign some value to a position in a vector, but accidently include a comma as if you were assigning some value to a row and column position in a matrix.
This tutorial shares exactly how to fix this error.
<h3>Example 1: Fix Error for a Single Value</h3>
Suppose we have the following vector in R with 5 values:
<b>#define vector
x &lt;- c(4, 6, 7, 7, 15)
</b>
Now suppose we attempt to assign the value ’22’ to the third element in the vector:
<b>#attempt to assign the value '22' to element in third position
x[3, ] &lt;- 22
Error in x[3, ] &lt;- 22 : incorrect number of subscripts on matrix
</b>
We receive an error because we included a comma when attempting to assign the new value.
Instead, we simply need to remove the comma:
<b>assign the value '22' to element in third position
x[3] &lt;- 22
#display updated vector
x
[1]  4  6 22  7 15
</b>
<h3>Example 2: Fix Error in a for Loop</h3>
This error can also occur when we attempt to replace several values in a vector using a ‘for’ loop.
For example, the following code attempts to replace every value in a vector with a zero:
<b>#define vector
x &lt;- c(4, 6, 7, 7, 15)
#attempt to replace every value in vector with zero
for(i in 1:length(x)) {
    x[i, ]=0
  }
Error in x[i, ] = 0 : incorrect number of subscripts on matrix
</b>
We receive an error because we included a comma when attempting to assign the zeros.
Instead, we simply need to remove the comma:
<b>#define vector
x &lt;- c(4, 6, 7, 7, 15)
#replace every value in vector with zero
for(i in 1:length(x)) {
    x[i]=0
  }
#view updated vector
x
[1] 0 0 0 0 0
</b>
Once we remove the comma, the code runs without errors.
<h2><span class="orange">How to Interpolate Missing Values in R (Including Example)</span></h2>
You can use the following basic syntax to interpolate missing values in a data frame column in R:
<b>library(dplyr)
library(zoo)
df &lt;- df %>%
        mutate(column_name = na.approx(column_name))
</b>
The following example shows how to use this syntax in practice.
<h2>Example: Interpolate Missing Values in R</h2>
Suppose we have the following data frame in R that shows the total sales made by a store during 15 consecutive days:
<b>#create data frame
df &lt;- data.frame(day=1:15, sales=c(3, 6, 8, 10, 14, 17, 20, NA, NA, NA, NA, 35, 39, 44, 49))
#view data frame
df
   day sales
1    1     3
2    2     6
3    3     8
4    4    10
5    5    14
6    6    17
7    7    20
8    8    NA
9    9    NA
10  10    NA
11  11    NA
12  12    35
13  13    39
14  14    44
15  15    49
</b>
Notice that we’re missing sales numbers for four days in the data frame.
If we create a simple line chart to visualize the sales over time, here’s what it would look like:
<b>#create line chart to visualize sales
plot(df$sales, type='o', pch=16, col='steelblue', xlab='Day', ylab='Sales')</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/11/impute1.png">
To fill in the missing values, we can use the  na.approx()  function from the <b>zoo</b> package along with the  mutate()  function from the <b>dplyr</b> package:
<b>library(dplyr)
library(zoo)
#interpolate missing values in 'sales' column
df &lt;- df %>%
        mutate(sales = na.approx(sales))
#view updated data frame
df
   day sales
1    1     3
2    2     6
3    3     8
4    4    10
5    5    14
6    6    17
7    7    20
8    8    23
9    9    26
10  10    29
11  11    32
12  12    35
13  13    39
14  14    44
15  15    49
</b>
Notice that each of the missing values has been replaced.
If we create another line chart to visualize the updated data frame, here’s what it would look like:
<b>#create line chart to visualize sales
plot(df$sales, type='o', pch=16, col='steelblue', xlab='Day', ylab='Sales')</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/11/impute2.png">
Notice that the values chosen by the <b>na.approx()</b> function seem to fit the trend in the data quite well.
<h2>Additional Resources</h2>
The following tutorials provide additional information on how to handle missing values in R:
 How to Find and Count Missing Values in R 
 How to Impute Missing Values in R 
 How to Use is.na Function in R 
<h2><span class="orange">How to Fix in R: invalid (do_set) left-hand side to assignment</span></h2>
One error message you may encounter when using R is:
<b>Error in 5 &lt;- read.table("data.txt") : 
  invalid (do_set) left-hand side to assignment
</b>
This error occurs when you attempt to create a variable in R that starts with a number.
By default, R only allows you to define variable names that start with either a character or a dot.
The following example shows how to resolve this error in practice.
<h3>How to Reproduce the Error</h3>
Suppose I attempt to use the  read.table()  function to read a file into R:
<b>#attempt to read text file into R
5 &lt;- read.table("data.txt")
Error in 5 &lt;- read.table("data.txt") : 
  invalid (do_set) left-hand side to assignment
</b>
I receive an error because I attempted to create a variable name that started with a number.
<h3>How to Avoid the Error</h3>
To avoid the error, I must use a variable name that starts with a character or a dot.
For example, I could use the following variable name that starts with a character:
<b>#read text file into R
data5 &lt;- read.table("data.txt")
#view contents of text file
data5
   V1 V2
1   1  4
2   3  4
3   2  5
4   7  9
5   9  1
6   6  3
7   4  4
</b>
Or I could even use the following variable name that starts with a dot:
<b>#read text file into R
.data5 &lt;- read.table("data.txt")
#view contents of text file
.data5
   V1 V2
1   1  4
2   3  4
3   2  5
4   7  9
5   9  1
6   6  3
7   4  4
</b>
Once again I don’t receive an error because I didn’t start the variable name with a character.
Note that you can type the following into R to read the complete documentation on how to create syntactically valid names:
<b>?make.names</b>
<h2><span class="orange">How to Fix in R: invalid factor level, NA generated</span></h2>
One warning message you may encounter when using R is:
<b>Warning message:
In `[&lt;-.factor`(`*tmp*`, iseq, value = "C") :
  invalid factor level, NA generated
</b>
This warning occurs when you attempt to add a value to a factor variable in R that does not already exist as a defined level.
The following example shows how to address this warning in practice.
<h3>How to Reproduce the Warning</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=factor(c('A', 'A', 'B', 'B', 'B')), points=c(99, 90, 86, 88, 95))
#view data frame
df
  team points
1    A     99
2    A     90
3    B     86
4    B     88
5    B     95
#view structure of data frame
str(df)
'data.frame':5 obs. of  2 variables:
 $ team  : Factor w/ 2 levels "A","B": 1 1 2 2 2
 $ points: num  99 90 86 88 95
</b>
We can see that the <b>team</b> variable is a factor with two levels: “A” and “B”
Now suppose we attempt to  add a new row  to the end of the data frame using a value of “C” for <b>team</b>:
<b>#add new row to end of data frame
df[nrow(df) + 1,] = c('C', 100)
Warning message:
In `[&lt;-.factor`(`*tmp*`, iseq, value = "C") :
  invalid factor level, NA generated</b>
We receive a warning message because the value “C” does not already exist as a factor level for the <b>team</b> variable.
It’s important to note that this is simply a warning message and R will still add the new row to the end of the data frame, but it will use a value of <b>NA</b> instead of “C”:
<b>#view updated data frame
df
  team points
1    A     99
2    A     90
3    B     86
4    B     88
5    B     95
6   NA    100
</b>
<h3>How to Avoid the Warning</h3>
To avoid the <b>invalid factor level</b> warning, we must first convert the factor variable to a character variable and then we can convert it back to a factor variable after adding the new row:
<b>#convert team variable to character
df$team &lt;- as.character(df$team)
#add new row to end of data frame
df[nrow(df) + 1,] = c('C', 100)
#convert team variable back to factor
df$team &lt;- as.factor(df$team)
#view updated data frame
df
  team points
1    A     99
2    A     90
3    B     86
4    B     88
5    B     95
6    C    100
</b>
Notice that we’re able to successfully add a new row to the end of the data frame and we avoid a warning message.
We can also check that the value “C” has been added as a factor level to the <b>team</b> variable:
<b>#view structure of updated data frame
str(df)
'data.frame':6 obs. of  2 variables:
 $ team  : Factor w/ 3 levels "A","B","C": 1 1 2 2 2 3
 $ points: chr  "99" "90" "86" "88" ...</b>
<h2><span class="orange">How to Fix in R: Invalid Graphics State (3 Solutions)</span></h2>
One error you may encounter in R is:
<b>Error in .Call.graphics(C_palette2, .Call(C_palette2, NULL)) : 
  invalid graphics state
</b>
This error may occur for three reasons:
<b>1.</b> You are creating plots in both base R and ggplot2 in the same session.
<b>2.</b> Your version of ggplot2 is not compatible with your version of R.
<b>3.</b> Your graphics settings are preventing new plots from being created. 
This tutorial shares three methods you can use to resolve this error.
<h3>How to Reproduce the Error</h3>
Suppose we attempt to create a scatterplot using the built-in  mtcars  dataset in R:
<b>library(ggplot2)
#attempt to create scatterplot 
ggplot(mtcars, aes(x=mpg, y=hp)) +
  geom_point()
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/invalid1.jpg"675">
We receive the <b>invalid graphics state</b> error, but it’s not clear why.
The following three methods show how to troubleshoot this error.
<h3>Method #1: Fix the Error by Using dev.off()</h3>
The first method you should try (and the easiest method) is to simply use <b>dev.off()</b> to shut down the current plotting device.
<b>dev.off()</b>
You can then run your original code again to create the scatterplot.
In many cases, this can fix the error because it removes any plot settings that were used for previous plots that may be interfering with your current plot.
<h3>Method #2: Fix the Error by Restarting RStudio</h3>
If the previous method didn’t work, you can try restarting your RStudio session.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/invalid2.jpg"638">
In many cases, this can also fix the error because it clears out any previous plot settings that were interfering with your current plot.
<h3>Method #3: Fix the Error by Reinstalling ggplot2</h3>
If the previous two methods didn’t work, you may need to uninstall and then reinstall ggplot2.
You can use the following syntax to uninstall your current version of ggplot2:
<b>#uninstall ggplot2
remove.packages("ggplot2")
</b>
You can then use the following syntax to install the latest version of ggplot2:
<b>#install ggplot2
install.packages("ggplot2")</b>
You can then run the code again to create the scatterplot:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/invalid3.jpg"386">
In most cases, we will now be able to create the plot without any errors.
<h2><span class="orange">How to Fix in R: invalid model formula in ExtractVars</span></h2>
One error you may encounter in R is:
<b>Error in terms.formula(formula, data = data) : 
  invalid model formula in ExtractVars
</b>
This error occurs when you attempt to fit a  decision tree  in R and incorrectly specify one or more of the variables in the formula.
This tutorial shares exactly how to fix this error in practice.
<h3>How to Reproduce the Error</h3>
Suppose we create the following data frame in R:
<b>#create data frame
df &lt;- data.frame(rating=c(88, 94, 99, 90, 76, 78, 81, 88), points=c(14, 17, 22, 24, 25, 22, 29, 31), assists=c(7, 7, 6, 12, 10, 11, 17, 2), rebounds=c(7, 8, 8, 12, 9, 5, 11, 15))
#view data frame
df
  rating points assists rebounds
1     88     14       7        7
2     94     17       7        8
3     99     22       6        8
4     90     24      12       12
5     76     25      10        9
6     78     22      11        5
7     81     29      17       11
8     88     31       2       15</b>
Now suppose we attempt to use the <b>rpart()</b> function to fit a decision tree model to the data:
<b>library(rpart)
#attempt to fit decision tree model to data
model &lt;- rpart(rating ~ "points" + "assists" + "rebounds", data = df)
Error in terms.formula(formula, data = data) : 
  invalid model formula in ExtractVars
</b>
We receive an error because we used quotations around the predictor variable names, which is not allowed in the formula.
<h3>How to Fix the Error</h3>
The way to fix this error is to simply remove the quotations around the variable names and write the formula as follows:
<b>library(rpart)
#fit decision tree model
model &lt;- rpart(rating ~ points + assists + rebounds, data = df)
#view summary of model
summary(model)
Call:
rpart(formula = rating ~ points + assists + rebounds, data = df)
  n= 8 
    CP nsplit rel error xerror xstd
1 0.01      0         1      0    0
Node number 1: 8 observations
  mean=86.75, MSE=55.1875 
</b>
We’re able to successfully fit the model without any errors because we removed the quotations from the predictor variables in the formula.
<h2><span class="orange">How to Fix in R: invalid type (list) for variable</span></h2>
One error you may encounter in R is:
<b>Error in model.frame.default(formula = y ~ x, drop.unused.levels = TRUE) : 
  invalid type (list) for variable 'x' 
</b>
This error usually occurs when you attempt to fit a regression model or an ANOVA model in R and use a <b>list</b> for one of the variables instead of a <b>vector</b>.
This tutorial shares how to fix this error in practice.
<h2>How to Reproduce the Error </h2>
Suppose I attempt to fit a  simple linear regression model  in R:
<b>#define variables
x &lt;- list(1, 4, 4, 5, 7, 8, 9, 10, 13, 14)
y &lt;- c(10, 13, 13, 14, 18, 20, 22, 24, 29, 31)
#attempt to fit regression model
model &lt;- lm(y ~ x)
Error in model.frame.default(formula = y ~ x, drop.unused.levels = TRUE) : 
  invalid type (list) for variable 'x'
</b>
I receive an error because the <b>lm()</b> function can only take vectors as input and the x variable is currently a list.
<h2>How to Avoid the Error</h2>
The easiest way to avoid this error is to simply use the  unlist()  function to convert the list variable to a vector:
<b>#define variables
x &lt;- list(1, 4, 4, 5, 7, 8, 9, 10, 13, 14)
y &lt;- c(10, 13, 13, 14, 18, 20, 22, 24, 29, 31)
#attempt to fit regression model
model &lt;- lm(y ~ unlist(x))
#view the model output
summary(model)
Call:
lm(formula = y ~ unlist(x))
Residuals:
    Min      1Q  Median      3Q     Max 
-1.1282 -0.4194 -0.1087  0.2966  1.7068 
Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  6.58447    0.55413   11.88 2.31e-06 ***
unlist(x)    1.70874    0.06544   26.11 4.97e-09 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
Residual standard error: 0.8134 on 8 degrees of freedom
Multiple R-squared:  0.9884,Adjusted R-squared:  0.987 
F-statistic: 681.8 on 1 and 8 DF,  p-value: 4.97e-09
</b>
Notice that we’re able to fit the simple linear regression model without any errors this time because we used <b>unlist()</b> to convert variable x to a vector.
Note that if you’re fitting a  multiple linear regression model  and you have multiple predictor variables that are currently list objects, you can use <b>unlist()</b> to convert each of them to vectors before fitting the regression model:
<b>#define variables
x1 &lt;- list(1, 4, 4, 5, 7, 8, 9, 10, 13, 14)
x2 &lt;- list(20, 16, 16, 15, 16, 12, 10, 8, 8, 4)
y &lt;- c(10, 13, 13, 14, 18, 20, 22, 24, 29, 31)
#fit multiple linear regression model
model &lt;- lm(y ~ unlist(x1) + unlist(x2))
#view the model output
summary(model)
Call:
lm(formula = y ~ unlist(x1) + unlist(x2))
Residuals:
    Min      1Q  Median      3Q     Max 
-1.1579 -0.4211 -0.1386  0.3108  1.7130 
Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  8.34282    4.44971   1.875 0.102932    
unlist(x1)   1.61339    0.24899   6.480 0.000341 ***
unlist(x2)  -0.08346    0.20937  -0.399 0.702044    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
Residual standard error: 0.8599 on 7 degrees of freedom
Multiple R-squared:  0.9887,Adjusted R-squared:  0.9854 
F-statistic: 305.1 on 2 and 7 DF,  p-value: 1.553e-07</b>
Once again we don’t receive any errors since we converted each of the list objects to vectors.
<h2><span class="orange">How to Use “Is Not NA” in R</span></h2>
You can use the following syntax to return values in R that are not NA values:
<b>#return only values that are not NA
x &lt;- x[!is.na(x)]
</b>
The following examples show how to use this syntax with both vectors and data frames in R.
<h3>Example 1: Return Values that are Not NA in Vector</h3>
The following code shows how to return the values in a vector that are not NA:
<b>#create vector
x &lt;- c(1, 24, NA, 6, NA, 9)
#return only values that are not NA
x &lt;- x[!is.na(x)]
[1]  1 24  6  9
</b>
<h3>Example 2: Return Rows that are Not NA in One Column of Data Frame</h3>
The following code shows how to return the rows in a data frame that do not have an NA value in a specific column:
<b>#create data frame
df &lt;- data.frame(x=c(1, 24, NA, 6, NA, 9), y=c(NA, 3, 4, 8, NA, 12), z=c(NA, 7, 5, 15, 7, 14))
#view data frame
df
   x  y  z
1  1 NA NA
2 24  3  7
3 NA  4  5
4  6  8 15
5 NA NA  7
6  9 12 14
#remove rows with NA in <i>z </i>column
df &lt;- df[!(is.na(df$z)), ]
#view data frame
df
   x  y  z
2 24  3  7
3 NA  4  5
4  6  8 15
5 NA NA  7
6  9 12 14</b>
<h3>Example 3: Return Rows that are Not NA in Several Columns</h3>
The following code shows how to return the rows in a data frame that do not have an NA value in one of several specific columns:
<b>#create data frame
df &lt;- data.frame(x=c(1, 24, NA, 6, NA, 9), y=c(NA, 3, 4, 8, NA, 12), z=c(NA, 7, 5, 15, 7, 14))
#view data frame
df
   x  y  z
1  1 NA NA
2 24  3  7
3 NA  4  5
4  6  8 15
5 NA NA  7
6  9 12 14
#remove rows with NA in x or <em>y </em>column
df &lt;- df[!(is.na(df$x)) & !(is.na(df$y)), ]
#view data frame
df
   x  y  z
2 24  3  7
4  6  8 15
6  9 12 14</b>
<h3>Example 4: Return Rows that are Not NA in Any Column</h3>
The following code shows how to return the rows in a data frame that do not have an NA value in any column:
<b>#create data frame
df &lt;- data.frame(x=c(1, 24, NA, 6, NA, 9), y=c(NA, 3, 4, 8, NA, 12), z=c(NA, 7, 5, 15, 7, 14))
#view data frame
df
   x  y  z
1  1 NA NA
2 24  3  7
3 NA  4  5
4  6  8 15
5 NA NA  7
6  9 12 14
#remove rows with NA in any column
df &lt;- na.omit(df)
#view data frame
df
   x  y  z
2 24  3  7
4  6  8 15
6  9 12 14</b>
<h2><span class="orange">How to Keep Certain Columns in R (With Examples)</span></h2>
You can use the following methods to only keep certain columns in a data frame in R:
<b>Method 1: Specify Columns to Keep</b>
<b>#only keep columns 'col1' and 'col2'
new_df = subset(df, select = c(col1, col2))
</b>
<b>Method 2: Specify Columns to Drop</b>
<b>#drop columns 'col3' and 'col4'
new_df = subset(df, select = c(col3, col4))
</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'B', 'B', 'B'), points=c(19, 14, 14, 29, 25, 30), assists=c(4, 5, 5, 4, 12, 10), rebounds=c(9, 7, 7, 6, 10, 11))
#view data frame
df
  team points assists rebounds
1    A     19       4        9
2    A     14       5        7
3    A     14       5        7
4    B     29       4        6
5    B     25      12       10
6    B     30      10       11</b>
<h2>Method 1: Specify Columns to Keep</h2>
The following code shows how to define a new data frame that only keeps the “team” and “assists” columns:
<b>#keep 'team' and 'assists' columns
new_df = subset(df, select = c(team, assists))
#view new data frame
new_df
  team assists
1    A       4
2    A       5
3    A       5
4    B       4
5    B      12
6    B      10
</b>
The resulting data frame only keeps the two columns that we specified.
<h2>Method 2: Specify Columns to Drop</h2>
The following code shows how to define a new data frame that drops the “team” and “assists” columns from the original data frame:
<b>#drop 'team' and 'assists' columns
new_df = subset(df, select = -c(team, assists))
#view new data frame
new_df
  points rebounds
1     19        9
2     14        7
3     14        7
4     29        6
5     25       10
6     30       11
</b>
The resulting data frame drops the “team” and “assists” columns from the original data frame and keeps the remaining columns.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Select Only Numeric Columns in R 
 How to Delete Multiple Columns in R 
 How to Reorder Columns in R 
<h2><span class="orange">How to Calculate Lagged Values in R (With Examples)</span></h2>
You can use the <b>lag()</b> function from the  dplyr  package in R to calculated lagged values.
This function uses the following basic syntax:
<b>lag(x, n=1, …)</b>
where:
<b>x</b>: vector of values
<b>n</b>: number of positions to lag by
The following example shows how to use this function to calculated lagged values in practice.
<h2>Example: Calculating Lagged Values in R</h2>
Suppose we have the following data frame in R that shows the number of sales made by some store on 10 consecutive days:
<b>#create data frame
df &lt;- data.frame(day=1:10, sales=c(18, 10, 14, 13, 19, 24, 25, 29, 15, 18))
#view data frame
df
   day sales
1    1    18
2    2    10
3    3    14
4    4    13
5    5    19
6    6    24
7    7    25
8    8    29
9    9    15
10  10    18</b>
We can use the <b>lag()</b> function from the dplyr package to create a lag column that displays the sales for the previous day for each row:
<b>library(dplyr)
#add new column that shows sales for previous day
df$previous_day_sales &lt;- dplyr::lag(df$sales, n=1)
#view updated data frame
df
   day sales previous_day_sales
1    1    18                 NA
2    2    10                 18
3    3    14                 10
4    4    13                 14
5    5    19                 13
6    6    24                 19
7    7    25                 24
8    8    29                 25
9    9    15                 29
10  10    18                 15</b>
Here’s how to interpret the output:
The first value in the lag column is <b>NA </b>since there is no prior value in the sales column.
The second value in the lag column is <b>18</b> since this is the prior value in the sales column.
The third value in the lag column is <b>10</b> since this is the prior value in the sales column.
And so on.
We can also modify the value for the <b>n</b> argument in the <b>lag()</b> function to calculate a lagged value for a different number of previous positions:
<b>library(dplyr)
#add new column that shows sales for two days prior
df$previous_day_sales &lt;- dplyr::lag(df$sales, n=2)
#view updated data frame
df
   day sales previous_day_sales
1    1    18                 NA
2    2    10                 NA
3    3    14                 18
4    4    13                 10
5    5    19                 14
6    6    24                 13
7    7    25                 19
8    8    29                 24
9    9    15                 25
10  10    18                 29
</b>
<b>Note</b>: To create a lead column, use the <b>lead()</b> function from the dplyr package instead of the <b>lag()</b> function.
<h2>Additional Resources</h2>
The following tutorials explain how to use other common functions in R:
 How to Use the n() Function in dplyr 
 How to Use the across() Function in dplyr 
 How to Use the relocate() Function in dplyr 
 How to Use the slice() Function in dplyr 
<h2><span class="orange">How to Change Legend Position in Base R Plots</span></h2>
There are two ways to change the legend position in base R plots:
<b>Method 1: Use (x, y) coordinates</b>
<b>legend(4, 12, legend=c('y1', 'y2'), col=c('purple', 'red'), lty=1)
</b>
<b>Method 2: Use keywords</b>
<b>legend('bottomright', legend=c('y1', 'y2'), col=c('purple', 'red'), lty=1)
</b>
Using this method, you can specify the following locations:
“bottomright”
“bottom”
“bottomleft”
“left”
“topleft”
“top”
 “topright”
“right”
“center”
The following examples show how to use each method in practice.
<h3>Example 1: Change Legend Position Using (x, y) Coordinates</h3>
The following code shows how to create a legend for a plot in base R and place it at x=4 and y=12:
<b>#create data
x &lt;- 1:10
y1&lt;- c(3, 6, 8, 7, 8, 9, 13, 12, 10, 10)
y2 &lt;- c(1, 3, 3, 4, 6, 7, 8, 10, 9, 9)
#create plot with multiple lines
plot(x, y1, col='purple', type='l', xlab='x', ylab='y')
lines(x, y2, col='red')
#add legend
legend(4, 12, legend=c('y1', 'y2'), col=c('purple', 'red'), lty=1)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/legendpos1.jpg">
Notice that the legend is placed at the exact (x,y) coordinates that we specified.
<h3>Example 2: Change Legend Position Using Keywords</h3>
The following code shows how to create a legend for a plot in base R and place it in the top left corner:
<b>#create data
x &lt;- 1:10
y1&lt;- c(3, 6, 8, 7, 8, 9, 13, 12, 10, 10)
y2 &lt;- c(1, 3, 3, 4, 6, 7, 8, 10, 9, 9)
#create plot with multiple lines
plot(x, y1, col='purple', type='l', xlab='x', ylab='y')
lines(x, y2, col='red')
#add legend
legend('topleft', legend=c('y1', 'y2'), col=c('purple', 'red'), lty=1)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/legendpos2.jpg"447">
The legend is placed in the top left corner of the plot, just as we specified.
We can easily change it to a different location, such as the bottom right corner, by using a different keyword:
<b>#create data
x &lt;- 1:10
y1&lt;- c(3, 6, 8, 7, 8, 9, 13, 12, 10, 10)
y2 &lt;- c(1, 3, 3, 4, 6, 7, 8, 10, 9, 9)
#create plot with multiple lines
plot(x, y1, col='purple', type='l', xlab='x', ylab='y')
lines(x, y2, col='red')
#add legend
legend('bottomright', legend=c('y1', 'y2'), col=c('purple', 'red'), lty=1)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/legendpos3.jpg"462">
The legend is now placed in the bottom right corner of the plot.
<b>Related:</b>  How to Draw a Legend Outside of a Plot in R 
<h2><span class="orange">How to Perform Linear Regression with Categorical Variables in R</span></h2>
Linear regression is a method we can use to quantify the relationship between one or more predictor variables and a  response variable .
Often you may want to fit a regression model using one or more  categorical variables  as predictor variables.
This tutorial provides a step-by-step example of how to perform linear regression with categorical variables in R.
<h2>Example: Linear Regression with Categorical Variables in R</h2>
Suppose we have the following data frame in R that contains information on three variables for 12 different basketball players:
points scored
hours spent practicing
training program used
<b>#create data frame
df &lt;- data.frame(points=c(7, 7, 9, 10, 13, 14, 12, 10, 16, 19, 22, 18), hours=c(1, 2, 2, 3, 2, 6, 4, 3, 4, 5, 8, 6), program=c(1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3))
#view data frame
df
   points hours program
1       7     1       1
2       7     2       1
3       9     2       1
4      10     3       1
5      13     2       2
6      14     6       2
7      12     4       2
8      10     3       2
9      16     4       3
10     19     5       3
11     22     8       3
12     18     6       3</b>
Suppose we would like to fit the following linear regression model:
<b>points = β<sub>0</sub> + β<sub>1</sub>hours + β<sub>2</sub>program</b>
In this example, hours is a continuous variable but program is a <b>categorical variable</b> that can take on three possible categories: program 1, program 2, or program 3. 
In order to fit this regression model and tell R that the variable “program” is a categorical variable, we must use <b>as.factor()</b> to convert it to a factor and then fit the model:
<b>#convert 'program' to factor
df$program &lt;- as.factor(df$program)
#fit linear regression model
fit &lt;- lm(points ~ hours + program, data = df)
#view model summary
summary(fit)
Call:
lm(formula = points ~ hours + program, data = df)
Residuals:
    Min      1Q  Median      3Q     Max 
-1.5192 -1.0064 -0.3590  0.8269  2.4551 
Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)   6.3013     0.9462   6.660 0.000159 ***
hours         0.9744     0.3176   3.068 0.015401 *  
program2      2.2949     1.1369   2.019 0.078234 .  
program3      6.8462     1.5499   4.417 0.002235 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
Residual standard error: 1.403 on 8 degrees of freedom
Multiple R-squared:  0.9392,Adjusted R-squared:  0.9164 
F-statistic: 41.21 on 3 and 8 DF,  p-value: 3.276e-05</b>
From the values in the <b>Estimate</b> column, we can write the fitted regression model:
<b>points = 6.3013 + .9744(hours) + 2.2949(program 2) + 6.8462(program 3)</b>
Here’s how to interpret the coefficient values in the output:
<b>hours</b>: For each additional hour spent practicing, points scored increases by an average of <b>0.9744,</b> assuming program is held constant.
The p-value is .015, which indicates that hours spent practicing is a statistically significant predictor of points scored at level α = .05.
<b>program2</b>: Players who used program 2 scored an average of <b>2.2949</b> more points than players who used program 1, assuming hours is held constant.
The p-value is .078, which indicates that there is not a statistically significant difference in points scored by players who used program 2 compared to players who used program 1, at level α = .05.
<b>program3</b>: Players who used program 3 scored an average of <b>2.2949</b> more points than players who used program 1, assuming hours is held constant.
The p-value is .002, which indicates that there is a statistically significant difference in points scored by players who used program 3 compared to players who used program 1, at level α = .05.
Using the fitted regression model, we can predict the number of points scored by a player based on their total hours spent practicing and the program they used.
For example, we can use the following code to predict the points scored by a player who practiced for 5 hours and used training program 3:
<b>#define new player
new &lt;- data.frame(hours=c(5), program=as.factor(c(3)))
#use the fitted model to predict the points for the new player
predict(fit, newdata=new)
       1 
18.01923 
</b>
The model predicts that this new player will score <b>18.01923</b> points.
We can confirm this is correct by plugging in the values for the new player into the fitted regression equation:
points = 6.3013 + .9744(hours) + 2.2949(program 2) + 6.8462(program 3)
points = 6.3013 + .9744(5) + 2.2949(0) + 6.8462(1)
points = 18.019
This matches the value we calculated using the <b>predict()</b> function in R.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Perform Simple Linear Regression in R 
 How to Perform Multiple Linear Regression in R 
 How to Create a Residual Plot in R 
<h2><span class="orange">How to Use list.files() Function in R (4 Examples)</span></h2>
You can use the <b>list.files()</b> function in R to list out every file in a specific folder. 
The following examples show how to use this function in different scenarios with a folder called <b>my_data_files</b> that contains three CSV files and two TXT files:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/listfiles1.jpg"494">
<h3>Example 1: List All Files in Directory</h3>
We can use the following syntax to list out every file in this folder:
<b>#display all files in my_data_files folder
list.files('C:/Users/bob/Documents/my_data_files')
[1] "df1.csv"       "df2.csv"       "df3.csv"   "more_data.txt" "some_data.txt"
</b>
We can see the names of all five files in this folder.
We could also use the <b>length()</b> function if we just wanted to know how many files were in the folder:
<b>#display total number of files in my_data_files folder
length(list.files('C:/Users/bob/Documents/my_data_files'))
[1] 5</b>
<h3>Example 2: List First N Files in Directory</h3>
We can use the following syntax to list out just the first three files in this folder:
<b>#display first three files in my_data_files folder
list.files('C:/Users/bob/Documents/my_data_files')[1:3]
[1] "df1.csv"       "df2.csv"       "df3.csv"
</b>
We can see the names of just the first three files in this folder.
<h3>Example 3: List All Files in Directory with Specific Extension</h3>
We can also use the <b>pattern</b> argument to only list the files that have a specific extension:
<b>#display all files with CSV extension in my_data_files folder
list.files('C:/Users/bob/Documents/my_data_files', pattern='csv')
[1] "df1.csv" "df2.csv" "df3.csv"</b>
We can see all three files that have a <b>.csv</b> extension.
<h3>Example 4: List All Files in Directory that Contain String</h3>
We can also use the pattern argument to only list files that contain a certain string:
<b>#display all files that contain 'data' in file name
list.files('C:/Users/bob/Documents/my_data_files', pattern='data')
[1] "more_data.txt" "some_data.txt"
</b>
We can see the two files that both contain ‘data’ in the file name.
<h2><span class="orange">How to Fix: (list) object cannot be coerced to type ‘double’</span></h2>
One common error you may encounter in R is:
<b>Error: (list) object cannot be coerced to type 'double'
</b>
This error occurs when you attempt to convert a list of multiple elements to numeric without first using the <b>unlist()</b> function.
This tutorial shares the exact steps you can use to troubleshoot this error.
<h3>How to Reproduce the Error</h3>
The following code attempts to convert a list of multiple elements to numeric:
<b>#create list
x &lt;- list(1:5, 6:9, 7)
#display list
x
[[1]]
[1] 1 2 3 4 5
[[2]]
[1] 6 7 8 9
[[3]]
[1] 7
#attempt to convert list to numeric
x_num &lt;- as.numeric(x)
Error: (list) object cannot be coerced to type 'double'
</b>
Since we didn’t use the <b>unlist()</b> function, we received the <b>(list) object cannot be coerced to type ‘double’</b> error message.
<h3>How to Fix the Error</h3>
To convert the list to numeric, we need to ensure that we use the <b>unlist()</b> function:
<b>#create list
x &lt;- list(1:5, 6:9, 7)
#convert list to numeric
x_num &lt;- as.numeric(unlist(x))
#display numeric values
x_num
[1] 1 2 3 4 5 6 7 8 9 7
</b>
We can use the <b>class()</b> function to verify that x_num is actually a vector of numeric values:
<b>#verify that x_num is numeric
class(x_num)
[1] "numeric"
</b>
We can also verify that the original list and the numeric list have the same number of elements:
<b>#display total number of elements in original list
sum(lengths(x))
[1] 10
#display total number of elements in numeric list
length(x_num)
[1] 10
</b>
We can see that the two lengths match.
<h2><span class="orange">How to Create a List of Lists in R (With Example)</span></h2>
You can use the following basic syntax to create a list of lists in R:
<b>#define lists
list1 &lt;- list(a=5, b=3)
list2 &lt;- list(c='A', d='B')
#create list of lists
list_of_lists &lt;- list(list1, list2) 
</b>
The following example shows how to use this syntax in practice.
<h2>Example: Create List of Lists in R</h2>
The following code shows how to create a list that contains 3 lists in R:
<b>#define lists
list1 &lt;- list(a=5, b=3)
list2 &lt;- list(c='A', d=c('B', 'C'))
list3 &lt;- list(e=c(20, 5, 8, 16))
#create list of lists
list_of_lists &lt;- list(list1, list2, list3)
#view the list of lists
list_of_lists
[[1]]
[[1]]$a
[1] 5
[[1]]$b
[1] 3
[[2]]
[[2]]$c
[1] "A"
[[2]]$d
[1] "B" "C"
[[3]]
[[3]]$e
[1] 20  5  8 16</b>
We can then use single brackets <b>[ ]</b> to access a specific list.
For example, we can use the following syntax to access the second list:
<b>#access second list
list_of_lists[2]
[[1]]
[[1]]$c
[1] "A"
[[1]]$d
[1] "B" "C"</b>
We can also use double brackets<b> [[ ]]</b> and the dollar sign operator <b>$</b> to access a specific element within a specific list.
For example, we can use the following syntax to access element <b>d</b> within the second list:
<b>#access element 'd' within second list
list_of_lists[[2]]$d
[1] "B" "C"
</b>
You can use similar syntax to access any element within any list.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks with lists in R:
 How to Convert a List to a Data Frame in R 
 How to Append Values to List in R 
<h2><span class="orange">How to Fix: longer object length is not a multiple of shorter object length</span></h2>
One common warning message you may encounter in R is:
<b>Warning message:
In a + b : longer object length is not a multiple of shorter object length
</b>
This warning message occurs when you attempt to perform some operation across two or more vectors that don’t have the same length.
This tutorial shares the exact steps you can use to troubleshoot this warning message.
<h3>How to Reproduce the Warning Message</h3>
Suppose we add the values of the following two vectors in R:
<b>#define two vectors
a &lt;- c(1, 2, 3, 4, 5)
b &lt;- c(6, 7, 8, 9, 10)
#add the two vectors
a + b
[1]  7  9 11 13 15
</b>
The resulting vector shows the sum of the corresponding values in each vector.
We received no warning message because the two vectors are of equal length. 
However, suppose the second vector had one less value than the first value:
<b>#define two vectors
a &lt;- c(1, 2, 3, 4, 5)
b &lt;- c(6, 7, 8, 9)
#add the two vectors
a + b
[1]  7  9 11 13 11
Warning message:
In a + b : longer object length is not a multiple of shorter object length
</b>
Since the two vectors have different lengths, we get the <b>longer object length is not a multiple of shorter object length</b> warning message.
It’s important to note that R still forces the calculation to work by adding the last value of the first vector (5) with the first value of the second vector (6) to come up with the final value of <b>11</b>.
If we’re unaware of the length of each vector, we can use the <b>length()</b> function to find out:
<b>#display length of vector a
length(a)
[1] 5
#display length of vector b
length(b)
[1] 4
</b>
We can see that the first vector has 5 values while the second vector only has 4 values. This is why we receive a warning message.
<h3>How to Fix the Warning Message</h3>
To fix this warning message, we simply need to make sure that both vectors have the same length.
For example, if we know that vector b has one less value than vector a, then we can simply add a zero to the end of vector b<b>:</b>
<b>#define two vectors
a &lt;- c(1, 2, 3, 4, 5)
b &lt;- c(6, 7, 8, 9)
#add zero to the end of vector b
b &lt;- c(b, 0)
#add the two vectors
a + b
[1]  7  9 11 13  5</b>
In most cases, we don’t actually know the difference in lengths between the two vectors so we can use the following <b>for loop</b> to add the correct amount of zeros to the end of the shorter vector:
<b>#define two vectors
a &lt;- c(1, 2, 3, 4, 5)
b &lt;- c(6, 7)
#add zeros to the end of vector b
for(i in ((length(b)+1):length(a)))
  +{b = c(b, 0)}
#add the two vectors
a + b
[1]  7  9 11 13  5</b>
The warning message goes away because we added enough zeros to the end of vector b to ensure that both vectors had the same length.
<h2><span class="orange">How to Loop Through Column Names in R (With Examples)</span></h2>
Often you may want to loop through the column names of a data frame in R and perform some operation on each column. There are two common ways to do this:
<b>Method 1: Use a For Loop</b>
<b>for (i in colnames(df)){
   some operation
}
</b>
<b>Method 2: Use sapply()</b>
<b>sapply(df, some operation)</b>
This tutorial shows an example of how to use each of these methods in practice.
<h3>Method 1: Use a For Loop</h3>
The following code shows how to loop through the column names of a data frame using a <b>for loop</b> and output the mean value of each column:
<b>#create data frame
df &lt;- data.frame(var1=c(1, 3, 3, 4, 5), var2=c(7, 7, 8, 3, 2), var3=c(3, 3, 6, 6, 8), var4=c(1, 1, 2, 8, 9))
#view data frame
df
  var1 var2 var3 var4
1    1    7    3    1
2    3    7    3    1
3    3    8    6    2
4    4    3    6    8
5    5    2    8    9
#loop through each column and print mean of column
for (i in colnames(df)){
    print(mean(df[[i]]))
}
[1] 3.2
[1] 5.4
[1] 5.2
[1] 4.2
</b>
<h3>Method 2: Use sapply()</h3>
The following code shows how to loop through the column names of a data frame using <b>sapply()</b> and output the mean value of each column:
<b>#create data frame
df &lt;- data.frame(var1=c(1, 3, 3, 4, 5), var2=c(7, 7, 8, 3, 2), var3=c(3, 3, 6, 6, 8), var4=c(1, 1, 2, 8, 9))
#view data frame
df
  var1 var2 var3 var4
1    1    7    3    1
2    3    7    3    1
3    3    8    6    2
4    4    3    6    8
5    5    2    8    9
#loop through each column and print mean of column
sapply(df, mean)
var1 var2 var3 var4 
 3.2  5.4  5.2  4.2 </b>
Notice that the two methods return identical results.
<b>Related: </b> A Guide to apply(), lapply(), sapply(), and tapply() in R 
<h2><span class="orange">How to Loop Through List in R (3 Examples)</span></h2>
You can use one of the following methods to loop through a list in R:
<b>Method 1: Loop Through List & Display All Sub-Elements on Same Line</b>
<b>for (i in my_list) {
  print(i)
}
</b>
<b>Method 2: Loop Through List & Display All Sub-Elements on Different Lines</b>
<b>for (i in my_list) {
  for(j in i)
  {print(j)}
}</b>
<b>Method 3: Loop Through List & Only Display Specific Values</b>
<b>#only display first value in each element of list
for(i in 1:length(my_list)) {
  print(my_list[[i]][1])
}</b>
The following examples show how to use each of these methods with the following list in R:
<b>#create list
team_info &lt;- list(team = 'Mavericks',  positions = c('G', 'F', 'C'),  all_stars = 3)
#view list
team_info
$team
[1] "Mavericks"
$positions
[1] "G" "F" "C"
$all_stars
[1] 3
</b>
<h3>Example 1: Loop Through List & Display All Sub-Elements on Same Line</h3>
The following code shows how to loop through the list and display each sub-element on the same line:
<b>#print each sub-element on same line
for (i in team_info) {
  print(i)
}
[1] "Mavericks"
[1] "G" "F" "C"
[1] 3
</b>
Notice that each sub-element is printed on the same line.
<h3>Example 2: Loop Through List & Display All Sub-Elements on Different Lines</h3>
The following code shows how to loop through the list and display each sub-element on different lines:
<b>#print each sub-element on different lines
for (i in team_info) {
  for(j in i)
  {print(j)}
}
[1] "Mavericks"
[1] "G"
[1] "F"
[1] "C"
[1] 3</b>
Notice that each sub-element is printed on its own line.
<h3>Example 3: Loop Through List & Only Display Specific Values</h3>
The following code shows how to loop through the list and display each sub-element on different lines:
<b>#only display first value in each element of list
for(i in 1:length(team_info)) {
  print(team_info[[i]][1])
}
[1] "Mavericks"
[1] "G"
[1] 3
</b>
Notice that only the first value in each element of the list is displayed.
<b>Note</b>: Simply change the <b>[1]</b> to display a different value in each element. For example, you could use<b> [2]</b> to display only the second value in each element.
<h2><span class="orange">How to Generate a Sequence of Dates with lubridate in R</span></h2>
You can use the following basic syntax to generate a sequence of dates using the  lubridate  package in R:
<b>seq(ymd('2022-01-01'), ymd('2022-10-31'), by='1 week')</b>
This particular example will generate a sequence of dates from <b>1/1/2022</b> to <b>10/31/2022</b> at intervals of <b>1 week</b>.
To use a different interval, simply replace <b>week</b> with another unit of time such as day, month, quarter, year, etc.
The following examples show how to use this syntax to generate a sequence of dates in practice.
<h2>Example 1: Generate Sequence of Dates by Days</h2>
The following code shows how to generate a sequence of dates from 1/1/2022 to 2/15/2022 by day:
<b>library(lubridate)
#generate sequence of dates from 1/1/2022 to 2/15/2022 by day
seq(ymd('2022-01-01'), ymd('2022-02-15'), by='1 day')
 [1] "2022-01-01" "2022-01-02" "2022-01-03" "2022-01-04" "2022-01-05"
 [6] "2022-01-06" "2022-01-07" "2022-01-08" "2022-01-09" "2022-01-10"
[11] "2022-01-11" "2022-01-12" "2022-01-13" "2022-01-14" "2022-01-15"
[16] "2022-01-16" "2022-01-17" "2022-01-18" "2022-01-19" "2022-01-20"
[21] "2022-01-21" "2022-01-22" "2022-01-23" "2022-01-24" "2022-01-25"
[26] "2022-01-26" "2022-01-27" "2022-01-28" "2022-01-29" "2022-01-30"
[31] "2022-01-31" "2022-02-01" "2022-02-02" "2022-02-03" "2022-02-04"
[36] "2022-02-05" "2022-02-06" "2022-02-07" "2022-02-08" "2022-02-09"
[41] "2022-02-10" "2022-02-11" "2022-02-12" "2022-02-13" "2022-02-14"
[46] "2022-02-15"</b>
The result is a sequence of 46 dates ranging from 1/1/2022 to 2/25/2022.
<b>Note</b>: Instead of typing <b>1 day</b>, you could also just type <b>day</b>.
<h2>Example 2: Generate Sequence of Dates by Weeks</h2>
The following code shows how to generate a sequence of dates from 1/1/2022 to 2/15/2022 by week:
<b>library(lubridate)
#generate sequence of dates from 1/1/2022 to 2/15/2022 by week
seq(ymd('2022-01-01'), ymd('2022-02-15'), by='1 week')
[1] "2022-01-01" "2022-01-08" "2022-01-15" "2022-01-22" "2022-01-29"
[6] "2022-02-05" "2022-02-12"</b>
The result is a sequence of 7 dates ranging from 1/1/2022 to 2/25/2022 by week.
We could also use the following code to generate a sequence of dates from 1/1/2022 to 2/25/2022 by <b>2 week</b> intervals:
<b>library(lubridate)
#generate sequence of dates from 1/1/2022 to 2/15/2022 by 2 weeks
seq(ymd('2022-01-01'), ymd('2022-02-15'), by='2 week')
[1] "2022-01-01" "2022-01-15" "2022-01-29" "2022-02-12"
</b>
The result is a sequence of 4 dates ranging from 1/1/2022 to 2/25/2022 by 2 week intervals.
<h2>Example 3: Generate Sequence of Dates by Months</h2>
The following code shows how to generate a sequence of dates from 1/1/2022 to 10/31/2022 by month:
<b>library(lubridate)
#generate sequence of dates from 1/1/2022 to 10/31/2022 by month
seq(ymd('2022-01-01'), ymd('2022-02-15'), by='1 month')
 [1] "2022-01-01" "2022-02-01" "2022-03-01" "2022-04-01" "2022-05-01"
 [6] "2022-06-01" "2022-07-01" "2022-08-01" "2022-09-01" "2022-10-01"</b>
The result is a sequence of 10 dates ranging from 1/1/2022 to 2/10/31/2022 by month.
Note that in this tutorial we only shared a few examples of how to generate a sequence of dates using the <b>lubridate</b> package.
Feel free to modify the start date, end date, and interval to create the specific sequence of dates that you’d like.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Convert Date to Numeric in R 
 How to Extract Month from Date in R 
 How to Add and Subtract Months from a Date in R 
<h2><span class="orange">How to Use the mapply() Function in R (With Examples)</span></h2>
The <b>mapply()</b> function in R can be used to apply a function to multiple list or vector arguments.
This function uses the following basic syntax:
<b>mapply(FUN, …, MoreArgs = NULL, SIMPLIFY = TRUE, USE.NAMES = TRUE)</b>
where:
<b>FUN</b>: The function to apply
<b>…</b>: Arguments to vectorize over
<b>MoreArgs</b>: A list of other arguments to FUN
<b>SIMPLIFY</b>: Whether or not to reduce the result to a vector.
<b>USE.NAMES</b>: Whether or not to use names if the first … argument has names
The following examples show how to use this function in different scenarios.
<h3>Example 1 : Use mapply() to Create a Matrix</h3>
The following code shows how to use <b>mapply()</b> to create a matrix by repeating the values c(1, 2, 3) each 5 times:
<b>#create matrix
mapply(rep, 1:3, times=5)
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    1    2    3
[3,]    1    2    3
[4,]    1    2    3
[5,]    1    2    3
</b>
Notice how this is much more efficient than typing out the following:
<b>#create same matrix as previous example
matrix(c(rep(1, 5), rep(2, 5), rep(3, 5)), ncol=3)
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    1    2    3
[3,]    1    2    3
[4,]    1    2    3
[5,]    1    2    3</b>
<h3>Example 2: Use mapply() to Find Max Value of Corresponding Elements in Vectors</h3>
The following code shows how to use <b>mapply()</b> to find the max value for corresponding elements in two vectors:
<b>#create two vectors
vector1 &lt;- c(1, 2, 3, 4, 5)
vector2 &lt;- c(2, 4, 1, 2, 10)
#find max value of each corresponding elements in vectors
mapply(max, vector1, vector2)
[1]  2  4  3  4 10
</b>
Here’s how to interpret the output:
The max value of the elements in position 1 of either vector is <b>2</b>.
The max value of the elements in position 2 of either vector is <b>4</b>.
The max value of the elements in position 3 of either vector is <b>3</b>.
And so on.
<h3>Example 3: Use mapply() to Multiply Corresponding Elements in Vectors</h3>
The following code shows how to use <b>mapply()</b> to find multiply the corresponding elements in several vectors:
<b>#create three vectors
vec1 &lt;- c(1, 2, 3, 4)
vec2 &lt;- c(2, 4, 6, 8)
vec3 &lt;- c(3, 6, 9, 12)
#find max value of each corresponding elements in vectors 
mapply(function(val1, val2, val3) val1*val2*val3, vec1, vec2, vec3)
[1]   6  48 162 384
</b>
Here’s how to interpret the output:
The product of the elements in position 1 of each vector is 1 * 2 * 3 = <b>6</b>.
The product of the elements in position 2 of each vector is 2 * 4 * 6 = <b>48</b>.
The product of the elements in position 3 of each vector is 3 * 6 * 9 = <b>162</b>.
The product of the elements in position 4 of each vector is 4 * 8 * 12 = <b>384</b>.
<h2><span class="orange">How to Perform Matrix Multiplication in R (With Examples)</span></h2>
You can use the following syntax to perform matrix multiplication in R:
<b>#perform element-by-element multiplication
A * B
#perform matrix multiplication
A %*% B
</b>
The following examples show how to use this syntax in practice.
<h3>Example 1: Element-by-Element Multiplication</h3>
The following code shows how to perform element-by-element multiplication between two matrices in R:
<b>#define matrix A
A &lt;- matrix(c(1, 2, 3, 4), ncol=2)
A
     [,1] [,2]
[1,]    1    3
[2,]    2    4
#define matrix B
B &lt;- matrix(c(5, 6, 7, 8), ncol=2)
B
     [,1] [,2]
[1,]    5    7
[2,]    6    8
#perform element-by-element multiplication
A*B
     [,1] [,2]
[1,]    5   21
[2,]   12   32</b>
Using the <b>*</b> operator, R simply multiplied the corresponding elements in each matrix to produce a new matrix.
Here are the exact calculations that were performed:
Position [1, 1]: 1 * 5 = <b>5</b>
Position [1, 2]: 3 * 7 = <b>21</b>
Position [2, 1]: 2 * 6 = <b>12</b>
Position [2, 2]: 4 * 8 = <b>32</b>
<h3>Example 2: Matrix Multiplication</h3>
The following code shows how to perform matrix multiplication between two matrices in R:
<b>#define matrix A
A &lt;- matrix(c(1, 2, 3, 4), ncol=2)
A
     [,1] [,2]
[1,]    1    3
[2,]    2    4
#define matrix B
B &lt;- matrix(c(5, 6, 7, 8), ncol=2)
B
     [,1] [,2]
[1,]    5    7
[2,]    6    8
#perform matrix multiplication
A %*% B
     [,1] [,2]
[1,]   23   31
[2,]   34   46</b>
Here are the exact calculations that were performed:
Position [1, 1]: 1*5 + 3*6 = <b>23</b>
Position [1, 2]: 1*7 + 3*8 = <b>31</b>
Position [2, 1]: 2*5 + 4*6 = <b>34</b>
Position [2, 2]: 2*7 + 4*8 = <b>46</b>
Refer to these tutorials for a quick primer on the formulas to use to perform matrix multiplication between matrices of various sizes:
 Matrix Multiplication: (2×2) by (2×2) 
 Matrix Multiplication: (2×2) by (2×3) 
 Matrix Multiplication: (3×3) by (3×2) 
<h2><span class="orange">How to Find the Max Value Across Multiple Columns in R</span></h2>
We can use the <b>pmax()</b> function to find the max value across multiple columns in R. This function uses the following syntax:
<b>pmax(…, na.rm = FALSE)</b>
where:
<b>…</b> : A list of vectors
<b>na.rm: </b>A logical indicating whether missing values should be removed. Default is FALSE.
This tutorial provides several examples of how to use this function in practice using the following data frame:
<b>#create data frame
df &lt;- data.frame(player=c('A', 'B', 'C', 'D', 'E', 'F', 'G'), points=c(28, 17, 19, 14, 23, 26, 5), rebounds=c(5, 6, 4, 7, 14, 12, 9), assists=c(10, 13, 7, 8, 4, 5, 8))
#view DataFrame
df
  player points rebounds assists
1      A     28        5      10
2      B     17        6      13
3      C     19        4       7
4      D     14        7       8
5      E     23       14       4
6      F     26       12       5
7      G      5        9       8</b>
<h3>Example 1: Find the Max Across Specific Columns</h3>
The following code shows how to find the max value across the points and rebounds columns in a data frame:
<b>#find max values in each row across points and rebounds columns
pmax(df$points, df$rebounds)
[1] 28 17 19 14 23 26  9
</b>
<h3>Example 2: Add A New Column Containing the Max Value</h3>
The following code shows how to add a new column to the data frame that contains the max value across the points and rebounds columns:
<b>#add new column that contains max values across points and rebounds columns
df$max_points_rebs &lt;- pmax(df$points, df$rebounds)
#view data frame
df
  player points rebounds assists max_points_rebs
1      A     28        5      10              28
2      B     17        6      13              17
3      C     19        4       7              19
4      D     14        7       8              14
5      E     23       14       4              23
6      F     26       12       5              26
7      G      5        9       8               9
</b>
<h3>Example 3: Add Several New Columns Containing Max Values</h3>
The following code shows how to add several new columns to the data frame that contain the max values across different groups of columns:
<b>#add new column that contains max values across points and rebounds columns
df$max_p_r &lt;- pmax(df$points, df$rebounds)
#add new column that contains max values across rebounds and assists columns
df$max_r_a &lt;- pmax(df$rebounds, df$assists)
#view data frame
df
  player points rebounds assists max_p_r max_r_a
1      A     28        5      10      28      10
2      B     17        6      13      17      13
3      C     19        4       7      19       7
4      D     14        7       8      14       8
5      E     23       14       4      23      14
6      F     26       12       5      26      12
7      G      5        9       8       9       9
</b>
<h2><span class="orange">Interpreting Errors in R: ‘max’ not meaningful for factors</span></h2>
At one point or another you may encounter the following error in R:
<b>'max' not meaningful for factors</b>
This simply indicates that you are attempting to take the ‘max’ of a variable that is of the class <b>factor</b>.
For example, this error is thrown if we attempt to take the max of the following vector:
<b>#create a vector of class <em>vector
</em>factor_vector &lt;- as.factor(c(1, 7, 12, 14, 15))
#attempt to find max value in the vector
max(factor_vector)
#Error in Summary.factor(1:5, na.rm = FALSE) : 
#  'max' not meaningful for factors</b>
By definition, the values in a factor vector are of nominal class, which means there is no meaningful ordering of the values. Thus, there is no ‘max’ value to be found.
One simple solution to find the max of a factor vector is to simply convert it into a character vector, and then into a numeric vector:
<b>#convert factor vector to numeric vector and find the max value
new_vector &lt;- as.numeric(as.character(factor_vector))
max(new_vector)
#[1] 15</b>
If your factor vector simply contains the names of factors, then it is not possible to find the max value, even after converting the factor vector into a numeric vector, since it doesn’t make since to find the ‘max’ of a list of names.
<b>#create factor vector with names of factors
factor_vector &lt;- as.factor(c("first", "second", "third"))
#attempt to convert factor vector into numeric vector and find max value
new_vector &lt;- as.numeric(as.character(factor_vector))
max(new_vector)
#Warning message:
#NAs introduced by coercion 
#[1] NA</b>
It’s worth noting that R can find the max of numeric vectors, date vectors, and character vectors without running into any issues:
<b>numeric_vector &lt;- c(1, 2, 12, 14)
max(numeric_vector)
#[1] 14
character_vector &lt;- c("a", "b", "f")
max(character_vector)
#[1] "f"
date_vector &lt;- as.Date(c("2019-01-01", "2019-03-05", "2019-03-04"))
max(date_vector)
#[1] "2019-03-05"
</b>
Thus, if you are attempting to find the max value in a vector, simply make sure that your vector is not of the type <b>factor</b>.
<h2><span class="orange">How to Find the Max Value in Each Row in R</span></h2>
You can use the following basic syntax to find the max value in each row of a data frame in R:
<b>df$max &lt;- apply(df, 1, max, na.rm=TRUE)
</b>
This particular syntax creates a new column called <b>max</b> that contains the max value in each row of the data frame.
The following example shows how to use this syntax in practice.
<h2>Example: Find the Max Across Specific Columns</h2>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(points=c(4, NA, 10, 2, 15, NA, 7, 22), rebounds=c(NA, 3, 9, 7, 6, 8, 14, 10), assists=c(10, 9, 4, 4, 3, 7, 10, 11))
#view data frame
df
  points rebounds assists
1      4       NA      10
2     NA        3       9
3     10        9       4
4      2        7       4
5     15        6       3
6     NA        8       7
7      7       14      10
8     22       10      11</b>
We can use the following syntax to create a new column called <b>max</b> that contains the max value in each row:
<b>#add new column that contains max value in each row
df$max &lt;- apply(df, 1, max, na.rm=TRUE)
#view updated data frame
df
  points rebounds assists max
1      4       NA      10  10
2     NA        3       9   9
3     10        9       4  10
4      2        7       4   7
5     15        6       3  15
6     NA        8       7   8
7      7       14      10  14
8     22       10      11  22
</b>
The new column called <b>max</b> contains the max contains the max value in each row.
<b>Note</b>: If you don’t include <b>na.rm=TRUE</b> within the <b>apply()</b> function, then NA values will be returned if they exist anywhere in the row.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Calculate the Mean by Group in R 
 How to Average Across Columns in R 
 How to Sum Specific Columns in R 
<h2><span class="orange">How to Calculate the Mean by Group in R (With Examples)</span></h2>
Often you may want to calculate the mean by group in R. There are three methods you can use to do so:
<b>Method 1: Use base R.</b>
<b>aggregate(df$col_to_aggregate, list(df$col_to_group_by), FUN=mean) </b>
<b>Method 2: Use the dplyr() package.</b>
<b>library(dplyr)
df %>%
  group_by(col_to_group_by) %>%
  summarise_at(vars(col_to_aggregate), list(name = mean))
</b>
<b>Method 3: Use the data.table package.</b>
<b>library(data.table)
dt[ ,list(mean=mean(col_to_aggregate)), by=col_to_group_by]
</b>
The following examples show how to use each of these methods in practice.
<h3>Method 1: Calculate Mean by Group Using Base R</h3>
The following code shows how to use the <b>aggregate() </b>function from base R to calculate the mean points scored by team in the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('a', 'a', 'b', 'b', 'b', 'c', 'c'), pts=c(5, 8, 14, 18, 5, 7, 7), rebs=c(8, 8, 9, 3, 8, 7, 4))
#view data frame
df
  team pts rebs
1    a   5    8
2    a   8    8
3    b  14    9
4    b  18    3
5    b   5    8
6    c   7    7
7    c   7    4
#find mean points scored by team
aggregate(df$pts, list(df$team), FUN=mean)
  Group.1        x
1       a  6.50000
2       b 12.33333
3       c  7.00000
</b>
<h3>Method 2: Calculate Mean by Group Using dplyr</h3>
The following code shows how to use the <b>group_by()</b> and <b>summarise_at()</b> functions from the <b>dplyr</b> package to calculate the mean points scored by team in the following data frame:
<b><b>library(dplyr) </b>
#create data frame
df &lt;- data.frame(team=c('a', 'a', 'b', 'b', 'b', 'c', 'c'), pts=c(5, 8, 14, 18, 5, 7, 7), rebs=c(8, 8, 9, 3, 8, 7, 4))
#find mean points scored by team 
<b>df %>%
  group_by(team) %>%
  summarise_at(vars(pts), list(name = mean))
# A tibble: 3 x 2
  team   name
  &lt;fct> &lt;dbl>
1 a       6.5
2 b      12.3
3 c       7  </b>
</b>
<h3>Method 3: Calculate Mean by Group Using data.table</h3>
 The following code shows how to calculate the mean points scored by team in the following data frame:
<b><b>library(data.table) </b>
#create data frame
df &lt;- data.frame(team=c('a', 'a', 'b', 'b', 'b', 'c', 'c'), pts=c(5, 8, 14, 18, 5, 7, 7), rebs=c(8, 8, 9, 3, 8, 7, 4))
#convert data frame to data table 
setDT(df)
#find mean points scored by team 
<b>df[ ,list(mean=mean(pts)), by=team]
   team     mean
1:    a  6.50000
2:    b 12.33333
3:    c  7.00000</b></b>
Notice that all three methods return identical results.
<b>Related:</b>  A Complete Guide to the mean Function in R 
<h2><span class="orange">How to Calculate the Mean of a Column in R (With Examples)</span></h2>
You can use one of the following methods to calculate the mean of a column in R:
<b>#calculate mean using column name
mean(df$my_column)
#calculate mean using column name (ignore missing values)
mean(df$my_column, na.rm=TRUE)
#calculate mean using column position
mean(df[, 1])
#calculation mean of all numeric columns
colMeans(df[sapply(df, is.numeric)])
</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'B', 'B', 'B'), points=c(99, 90, 93, 86, 88, 82), assists=c(33, 28, 31, 39, NA, 30))
#view data frame
df
  team points assists
1    A     99      33
2    A     90      28
3    A     93      31
4    B     86      39
5    B     88      NA
6    B     82      30
</b>
<h3>Example 1: Calculate Mean Using Column Name</h3>
The following code shows how to calculate the mean of the ‘points’ column using the column name:
<b>#calculate mean of 'points' column
mean(df$points)
[1] 89.66667
</b>
The mean value in the ‘points’ column is <b>89.66667</b>.
<h3>Example 2: Calculate Mean Using Column Name (Ignore Missing Values)</h3>
If we attempt to calculate the mean of a column that has missing values, we’ll receive <b>NA</b> as a result:
<b>#attempt to calculate mean of 'assists' column
mean(df$assists)
[1] NA
</b>
We must use <b>na.rm=TRUE</b> to ignore missing values when calculating the column mean:
<b>#calculate mean of 'assists' column and ignore missing values
mean(df$assists, na.rm=TRUE)
[1] 32.2</b>
The mean value in the ‘assists’ column is <b>32.2</b>.
<h3>Example 3: Calculate Mean Using Column Position</h3>
The following code shows how to calculate the mean of the column in index position 2:
<b>#calculate mean of column in index position 2
mean(df[, 2])
[1] 89.66667
</b>
The mean value of the column in index position 2 (the ‘points’ column) is <b>89.66667</b>.
<h3>Example 4: Calculate Mean of All Numeric Columns</h3>
The following code shows how to calculate the mean of all numeric columns in the data frame:
<b>#calculate mean of all numeric columns
colMeans(df[sapply(df, is.numeric)], na.rm=TRUE)
  points  assists 
89.66667 32.20000
</b>
The output displays the mean value of each numeric column in the data frame.
<h2><span class="orange">How to Merge Data Frames by Row Names in R</span></h2>
You can use the following basic syntax to merge two data frames in R based on their rownames:
<b>#inner join
merge(df1, df2, by=0)
#left join
merge(df1, df2, by=0, all.x=TRUE)
#outer join
merge(df1, df2, by=0, all=TRUE)
</b>
By using the argument <b>by=0</b>, we’re able to tell R that we want to merge using the rownames of the data frames.
The following examples show how to use each method with the following two data frames:
<b>#create first data frame
df1 &lt;- data.frame(points=c(99, 90, 86, 88, 95),  assists=c(33, 28, 31, 39, 34))
rownames(df1) &lt;- c(1, 2, 3, 4, 5)
df1
  points assists
1     99      33
2     90      28
3     86      31
4     88      39
5     95      34
#create second data frame
df2 &lt;- data.frame(rebounds=c(17, 15, 22, 26, 25),  blocks=c(7, 7, 15, 12, 14))
rownames(df2) &lt;- c(3, 4, 5, 6, 7)
df2
  rebounds blocks
3       17      7
4       15      7
5       22     15
6       26     12
7       25     14
</b>
<h3>Example 1: Perform Inner Join Using Row Names</h3>
The following code shows how to perform an inner join on two data frames using the row names:
<b>#perform inner join using row names
merge(df1, df2, by=0)
  Row.names points assists rebounds blocks
1         3     86      31       17      7
2         4     88      39       15      7
3         5     95      34       22     15
</b>
Notice that only the rows whose row names belong in both data frames are kept in the final merged data frame. 
<h3>Example 2: Perform Left Join Using Row Names</h3>
The following code shows how to perform a left join on two data frames using the row names:
<b>#perform left join using row names
merge(df1, df2, by=0, all.x=TRUE)
  Row.names points assists rebounds blocks
1         1     99      33       NA     NA
2         2     90      28       NA     NA
3         3     86      31       17      7
4         4     88      39       15      7
5         5     95      34       22     15
</b>
Notice that all of the rows from the first data frame are kept in the final merged data frame.
<h3>Example 3: Perform Outer Join Using Row Names</h3>
The following code shows how to perform an outer join on two data frames using the row names:
<b>#perform outer join using row names
merge(df1, df2, by=0, all=TRUE)
  Row.names points assists rebounds blocks
1         1     99      33       NA     NA
2         2     90      28       NA     NA
3         3     86      31       17      7
4         4     88      39       15      7
5         5     95      34       22     15
6         6     NA      NA       26     12
7         7     NA      NA       25     14
</b>
Notice that all of the rows from both data frames are kept in the final merged data frame.
<h2><span class="orange">How to Merge Multiple CSV Files in R (Step-by-Step Example)</span></h2>
You can use the following basic syntax to import and merge multiple CSV files located in the same folder into R:
<b>df &lt;- list.files(path='C:/my/path/to/files') %>% 
  lapply(read_csv) %>% 
  bind_rows
</b>
The following step-by-step example shows how to use this syntax in practice.
<h3>Step 1: Create & Export Multiple Data Frames</h3>
First, we’ll use the following code to create and export three data frames to CSV files:
<b>#create three data frames
df1 &lt;- data.frame(points=c(4, 5, 5, 6, 8, 9),  assists=c(3, 2, 4, 4, 6, 3))
df2 &lt;- data.frame(points=c(2, 10, 14, 15),  assists=c(3, 2, 9, 3))
df3 &lt;- data.frame(points=c(6, 8, 9),  assists=c(10, 6, 4))
#export all three data frames to CSV files
write.csv(df1, 'C:/Users/bob/Documents/my_data_files/df1.csv', row.names=FALSE)
write.csv(df2, 'C:/Users/bob/Documents/my_data_files/df2.csv', row.names=FALSE)
write.csv(df3, 'C:/Users/bob/Documents/my_data_files/df3.csv', row.names=FALSE)
</b>
I can navigate to this folder and see that the three CSV files were successfully exported:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/mergecsv1.jpg"574">
<h3>Step 2: Import & Merge Multiple CSV Files</h3>
Next, we’ll use the following code to import and merge all three CSV files into one data frame in R:
<b>library(dplyr)
library(readr)
#import and merge all three CSV files into one data frame
df &lt;- list.files(path='C:/Users/bob/Documents/my_data_files') %>% 
  lapply(read_csv) %>% 
  bind_rows 
#view resulting data frame
df
# A tibble: 13 x 2
   points assists
       
 1      4       3
 2      5       2
 3      5       4
 4      6       4
 5      8       6
 6      9       3
 7      2       3
 8     10       2
 9     14       9
10     15       3
11      6      10
12      8       6
13      9       4</b>
Notice that all three CSV files have been successfully merged into one data frame.
We can see that the resulting data frame has 13 rows and 2 columns.
<b>Note</b>: If the data frames do not have matching column names, R will still merge all of the data frames and simply fill in missing values with <b>NA</b> values.
<h2><span class="orange">R: How to Merge Data Frames by Column Names</span></h2>
You can use the following methods to merge data frames by column names in R:
<b>Method 1: Merge Based on One Matching Column Name</b>
<b>merge(df1, df2, by='var1')
</b>
<b>Method 2: Merge Based on One Unmatched Column Name</b>
<b>merge(df1, df2, by.x='var1', by.y='variable1')</b>
<b>Method 3: Merge Based on Multiple Matching Column Names</b>
<b>merge(df1, df2, by=c('var1', 'var2'))</b>
<b>Method 4: Merge Based on Multiple Unmatched Column Names</b>
<b>merge(df1, df2, by.x=c('var1', 'var2'), by.y=c('variable1', 'variable2'))</b>
The following examples show how to use each method in practice.
<h3>Example 1: Merge Based on One Matching Column Name</h3>
The following code shows how to merge two data frames in R based on one matching column name:
<b>#define data frames
df1 &lt;- data.frame(team=c('A', 'B', 'C', 'D'),  points=c(88, 98, 104, 100))
df2 &lt;- data.frame(team=c('A', 'B', 'C', 'D'),  rebounds=c(22, 31, 29, 20))
#merge based on one column with matching name
merge(df1, df2, by='team')
  team points rebounds
1    A     88       22
2    B     98       31
3    C    104       29
4    D    100       20
</b>
The result is one data frame that matched rows in each data frame using the <b>team</b> column.
<h3>Example 2: Merge Based on One Unmatched Column Name</h3>
The following code shows how to merge two data frames in R based on one unmatched column name:
<b>#define data frames
df1 &lt;- data.frame(team=c('A', 'B', 'C', 'D'),  points=c(88, 98, 104, 100))
df2 &lt;- data.frame(team_name=c('A', 'B', 'C', 'D'),  rebounds=c(22, 31, 29, 20))
#merge based on one column with unmatched name
merge(df1, df2, by.x='team', by.y='team_name')
  team points rebounds
1    A     88       22
2    B     98       31
3    C    104       29
4    D    100       20</b>
The result is one data frame that matched rows using the <b>team</b> column in the first data frame and the <b>team_name</b> column in the second data frame.
<h3>Example 3: Merge Based on Multiple Matching Column Names</h3>
The following code shows how to merge two data frames in R based on multiple matching column names:
<b>#define data frames
df1 &lt;- data.frame(team=c('A', 'A', 'B', 'B'),  position=c('G', 'F', 'G', 'F'),  points=c(88, 98, 104, 100))
df2 &lt;- data.frame(team=c('A', 'A', 'B', 'B'),  position=c('G', 'F', 'G', 'F'),  rebounds=c(22, 31, 29, 20))
#merge based on multiple columns with matching names
merge(df1, df2, by=c('team', 'position'))
  team position points rebounds
1    A        F     98       31
2    A        G     88       22
3    B        F    100       20
4    B        G    104       29
</b>
The result is one data frame that matched rows in each data frame using the <b>team</b> and <b>position</b> column in each data frame.
<h3>Example 4: Merge Based on Multiple Unmatched Column Names</h3>
The following code shows how to merge two data frames in R based on multiple unmatched column names:
<b>#define data frames
df1 &lt;- data.frame(team=c('A', 'A', 'B', 'B'),  position=c('G', 'F', 'G', 'F'),  points=c(88, 98, 104, 100))
df2 &lt;- data.frame(team_name=c('A', 'A', 'B', 'B'),  position_name=c('G', 'F', 'G', 'F'),  rebounds=c(22, 31, 29, 20))
#merge based on multiple columns with matching names
merge(df1, df2, by.x=c('team', 'position'), by.y=c('team_name', 'position_name'))
  team position points rebounds
1    A        F     98       31
2    A        G     88       22
3    B        F    100       20
4    B        G    104       29
</b>
The result is one data frame that matched rows using the <b>team</b> and <b>position</b> columns in the first data frame and the <b>team_name</b> and <b>position_name</b> columns in the second data frame.
<h2><span class="orange">R: How to Merge Data Frames Based on Multiple Columns</span></h2>
You can use the following basic syntax to merge two data frames in R based on multiple columns:
<b>merge(df1, df2, by.x=c('col1', 'col2'), by.y=c('col1', 'col2'))
</b>
The following example shows how to use this syntax in practice.
<h3>Example: Merge Data Frames on Multiple Columns</h3>
Suppose we have the following two data frames in R:
<b>#define data frames
df1 = data.frame(playerID=c(1, 2, 3, 4, 5, 6), team=c('A', 'B', 'B', 'B', 'C', 'C'), points=c(19, 22, 25, 29, 34, 39))
df2 = data.frame(playerID=c(1, 2, 3, 4), tm=c('A', 'B', 'B', 'B'), rebounds=c(7, 8, 8, 14))
#view first data frame
df1
  playerID team points
1        1    A     19
2        2    B     22
3        3    B     25
4        4    B     29
5        5    C     34
6        6    C     39
#view second data frame
df2 
  playerID tm rebounds
1        1  A        7
2        2  B        8
3        3  B        8
4        4  B       14</b>
Notice that the two data frames share the <b>playerID</b> column, but the team columns have different names in each data frame:
The first data frame has column ‘<b>team</b>‘
The second data frame has column ‘<b>tm</b>‘
In order to merge these data frames based on the playerID and the team columns, we need to use the <b>by.x</b> and <b>by.y</b> arguments.
We can use the following code to perform this merge:
<b>#merge two data frames
merged = merge(df1, df2, by.x=c('playerID', 'team'), by.y=c('playerID', 'tm'))
#view merged data frame
merged
  playerID team points rebounds
1        1    A     19        7
2        2    B     22        8
3        3    B     25        8
4        4    B     29       14
</b>
The final merged data frame contains data for the four players that belong to both original data frames.
<h2><span class="orange">R: How to Use microbenchmark Package to Measure Execution Time</span></h2>
You can use the <b>microbenchmark</b> package in R to compare the execution time of different expressions.
You can use the following syntax to do so:
<b>library(microbenchmark)
#compare execution time of two different expressions
microbenchmark(
  expression1,
  expression2)
)
</b>
The following example shows how to use this syntax in practice.
<h2>Example: Using microbenchmark() in R</h2>
Suppose we have the following data frame in R that contains information about points scored by players on various basketball teams:
<b>#make this example reproducible
set.seed(1)
#create data frame
df &lt;- data.frame(team=rep(c('A', 'B'), each=500), points=rnorm(1000, mean=20))
#view data frame
head(df)
  team   points
1    A 19.37355
2    A 20.18364
3    A 19.16437
4    A 21.59528
5    A 20.32951
6    A 19.17953
</b>
Now suppose we would like to calculate the mean points scored by players on each team using two different methods:
<b>Method 1</b>: Use <b>aggregate()</b> from Base R
<b>Method 2</b>: Use <b>group_by()</b> and <b>summarise_at()</b> from dplyr
We can use the <b>microbenchmark()</b> function to measure how long it takes for each of these expressions to execute:
<b>library(microbenchmark)
library(dplyr)
#time how long it takes to calculate mean value of points by team
microbenchmark(
  aggregate(df$points, list(df$team), FUN=mean),
  df %>% group_by(team) %>% summarise_at(vars(points), list(name = mean))
)
Unit: milliseconds                                                    expr         aggregate(df$points, list(df$team), FUN = mean)
 df %>% group_by(team) %>% summarise_at(vars(points), list(name = mean))
      min       lq     mean   median        uq      max neval cld
 1.307908 1.524078 1.852167 1.743568  2.093813  4.67408   100  a 
 6.788584 7.810932 9.946286 8.914692 10.239904 56.20928   100   b
</b>
The <b>microbenchmark()</b> function executes each expression 100 times and measures the following metrics:
<b>min</b>: Minimum time it took to execute
<b>lq</b>: Lower quartile (25th percentile) time it took to execute
<b>mean</b>: Mean time it took to execute
<b>median</b>: Median time it took to execute
<b>uq</b>: Upper quartile (75th percentile) time it took to execute
<b>max</b>: Maximum time it took to execute
<b>neval</b>: Number of times each expression was evaluated
Typically we only look at either the mean or median time it took to execute each expression.
From the output we can see:
It took a mean time of <b>1.852 milliseconds</b> to calculate the mean points by team using the base R method.
It took a mean time of <b>9.946 milliseconds</b> to calculate the mean points by team using the dplyr method.
Based on these results, we would conclude that the base R method is significantly faster.
We can also use the <b>boxplot()</b> function to visualize the distribution of times it took to execute each expression:
<b>library(microbenchmark)
library(dplyr)
#time how long it takes to calculate mean value of points by team
results &lt;- microbenchmark(
  aggregate(df$points, list(df$team), FUN=mean),
  df %>% group_by(team) %>% summarise_at(vars(points), list(name = mean))
)
#create boxplot to visualize results
boxplot(results, names=c('Base R', 'dplyr'))
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/12/micro1.jpg">
From the boxplots we can see that the dplyr method takes longer, on average, to calculate the mean points value by team.
<b>Note</b>: In this example we used the <b>microbenchmark()</b> function to compare the execution time of two different expressions, but you can compare as many expressions as you’d like in practice.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Clear the Environment in R 
 How to Clear All Plots in RStudio 
 How to Load Multiple Packages in R 
<h2><span class="orange">How to Use Min and Max Functions in R (With Examples)</span></h2>
You can use the <b>min()</b> and <b>max()</b> functions in R to quickly calculate the minimum and maximum values in a vector.
<b>#find minimum value
min(x)
#find maximum value
max(x)
</b>
The following examples show how to use these functions in practice.
<h3>Example 1: Max & Min of Vector</h3>
The following code shows how to find the minimum and maximum values of a vector:
<b>#define vector
x &lt;- c(2, 3, 4, 4, 7, 12, 15, 19, 22, 28, 31, 34)
#find minimum value
min(x)
[1] 2
#find maximum value
max(x)
[1] 34
</b>
Note that if you have missing values in the vector, you must specify <b>na.rm=TRUE</b> to ignore missing values when calculating the minimum and maximum:
<b>#define vector with some missing values
x &lt;- c(2, 3, 4, 4, NA, 12, NA, 19, 22, 28, 31, 34)
#find minimum value
min(x, na.rm=TRUE)
[1] 2
#find maximum value
max(x, na.rm=TRUE)
[1] 34
</b>
<h3>Example 2: Max & Min of Entire Data Frame</h3>
The following code shows how to find the minimum and maximum values of an entire data frame:
<b>#define data frame
df &lt;- data.frame(a=c(1, 3, 4, 6, 8, 9), b=c(7, 8, 8, 7, 13, 16), c=c(11, 13, 13, 18, 19, 22), d=c(12, 16, 18, 22, 29, 38))
#find minimum value
min(df)
[1] 1
#find maximum value
max(df)
[1] 38</b>
<h3>Example 3: Max & Min of Column in Data Frame</h3>
The following code shows how to find the minimum and maximum values of a specific column in a data frame:
<b>#define data frame
df &lt;- data.frame(a=c(1, 3, 4, 6, 8, 9), b=c(7, 8, 8, 7, 13, 16), c=c(11, 13, 13, 18, 19, 22), d=c(12, 16, 18, 22, 29, 38))
#find minimum value of column c
min(df$c)
[1] 11
#find maximum value of column c
max(df$c)
[1] 22</b>
<h3>Example 4: Max & Min of Several Columns in Data Frame</h3>
The following code shows how to find the minimum and maximum values of several columns in a data frame:
<b>#define data frame
df &lt;- data.frame(a=c(1, 3, 4, 6, 8, 9), b=c(7, 8, 8, 7, 13, 16), c=c(11, 13, 13, 18, 19, 22), d=c(12, 16, 18, 22, 29, 38))
#find minimum value in columns a, b, and d
apply(df[ , c('a', 'b', 'd')], 2, min)
 a  b  d 
 1  7 12 
#find maximum value in columns a, b, and d
apply(df[ , c('a', 'b', 'd')], 2, max)
 a  b  d 
 9 16 38 </b>
<h2><span class="orange">How to Fix in R: missing value where true/false needed</span></h2>
One error you may encounter in R is:
<b>Error in if (x[i] == NA) { : missing value where TRUE/FALSE needed
</b>
This error occurs when you compare some value to NA in an <b>if</b> statement in R using the syntax <b>x == NA</b>.
An <b>if</b> statement expects either a TRUE or FALSE value, so you need to use <b>is.na(x)</b> instead because this function always returns TRUE or FALSE.
<h3>How to Reproduce the Error</h3>
Suppose we attempt to loop through a list of values in a vector in R and print the word “missing” each time there is an NA value in the vector:
<b>#define vector with some missing values
x &lt;- c(2, NA, 5, 6, NA, 15, 19)
#loop through vector and print "missing" each time an NA value is encountered
for(i in 1:length(x)) {
 
 if (x[i] == NA) {
    print('Missing')
  }
}
Error in if (x[i] == NA) { : missing value where TRUE/FALSE needed
</b>
We receive an error because we used the syntax <b>x[i] == NA</b>. 
<h3>How to Fix the Error</h3>
We need to change the syntax to <b>is.na(x)</b> as follows:
<b>#define vector with some missing values
x &lt;- c(2, NA, 5, 6, NA, 15, 19)
#loop through vector and print "missing" each time an NA value is encountered
for(i in 1:length(x)) {
 
 if (is.na(x[i])) {
    print('Missing')
  }
}
[1] "Missing"
[1] "Missing"
</b>
Notice that we don’t receive an error and we’re able to print the word “missing” each time we encounter an NA value in the vector.
<h2><span class="orange">How to Fix in R: missing values are not allowed in subscripted assignments</span></h2>
One error message you may encounter when using R is:
<b>Error in `[&lt;-.data.frame`(`*tmp*`, df$A == 5, , value = list(A = c(NA,  : 
  missing values are not allowed in subscripted assignments of data frames
</b>
This error usually occurs when you attempt to assign values in one column using values from another column, but there happen to be <b>NA</b> values present.
The following example shows how to resolve this error in practice.
<h2>How to Reproduce the Error</h2>
Suppose we create the following data frame in R:
<b>#create data frame
df &lt;- data.frame(A=c(3, 4, 4, NA, 5, 8, 5, 9), B=c(12, 13, 7, 7, 12, 11, 15, 7))
#view data frame
df
   A  B
1  3 12
2  4 13
3  4  7
4 NA  7
5  5 12
6  8 11
7  5 15
8  9  7
</b>
Now suppose we attempt to assign a value of 10 to each row in column B where the corresponding value in column A is equal to 5:
<b>#attempt to assign column B a value of 10 where A is equal to 5
df[df$A == 5, ]$B &lt;- 10
Error in `[&lt;-.data.frame`(`*tmp*`, df$A == 5, , value = list(A = c(NA,  : 
  missing values are not allowed in subscripted assignments of data frames
</b>
We receive an error because there are NA values in column A and we’re explicitly told in the error message that <b>missing values are not allowed in subscripted assignments of data frames</b>.
<h2>How to Avoid the Error</h2>
There are two ways to avoid this error.
<b>1. Use %in% Operator</b>
One way to avoid this error is to use the  %in%  operator when performing the assignment:
<b>#assign column B a value of 10 where A is equal to 5
df[df$A %in% 5,]$B &lt;- 10
#view updated data frame
df
   A  B
1  3 12
2  4 13
3  4  7
4 NA  7
5  5 10
6  8 11
7  5 10
8  9  7
</b>
Notice that a value of 10 has been assigned to each row in column B where the corresponding value in column A is equal to 5 and we don’t receive any error.
<b>2. Use is.na()</b>
Another way to avoid this error is to use the  is.na()  function when performing the assignment:
<b>#assign column B a value of 10 where A is equal to 5
df[!is.na(df$A) & df$A == 5, ]$B &lt;- 10
#view updated data frame
df
   A  B
1  3 12
2  4 13
3  4  7
4 NA  7
5  5 10
6  8 11
7  5 10
8  9  7
</b>
Once again we’re able to assign a value of 10 to each row in column B where the corresponding value in column A is equal to 5 and we don’t receive any error.
<h2>Additional Resources</h2>
The following tutorials explain how to fix other common errors in R:
 How to Fix in R: Arguments imply differing number of rows 
 How to Fix in R: error in select unused arguments 
 How to Fix in R: replacement has length zero 
<h2><span class="orange">How to Calculate Number of Months Between Dates in R</span></h2>
You can use one of the following two methods to calculate the number of months between two dates in R:
<b>Method 1: Calculate Number of Whole Months Between Dates</b>
<b>library(lubridate)
interval(first_date, second_date) %/% months(1)
</b>
<b>Method 2: Calculate Number of Partial Months (With Decimal Places) Between Dates</b>
<b>library(lubridate)
interval(first_date, second_date) %/% days(1) / (365/12)</b>
The following examples show how to use each method in practice.
<h3>Example 1: Calculate Number of Whole Months Between Dates</h3>
We can use the following code to calculate the number of whole months between two dates in R: 
<b>library(lubridate)
#define dates
first_date &lt;- as.Date('2022-05-01')
second_date &lt;- as.Date('2022-09-04')
#calculate difference between dates in months
diff &lt;- interval(first_date, second_date) %/% months(1)
#view difference
diff
[1] 4
</b>
We can see that there are four <b>whole</b> months between the two dates that we specified.
<h3>Example 2: Calculate Number of Partial Months Between Dates</h3>
We can use the following code to calculate the number of partial months between two dates in R: 
<b>library(lubridate)
#define dates
first_date &lt;- as.Date('2022-05-01')
second_date &lt;- as.Date('2022-09-04')
#calculate difference between dates in partial months
diff &lt;- interval(first_date, second_date) %/% days(1) / (365/12)
#view difference
diff
[1] 4.142466
</b>
We can see that there are <b>4.142466</b> months between the two dates that we specified.
Note how this method is more specific than the previous method because it tells us the number of <b>partial</b> months between the dates as well.
Depending on your situation, you may prefer to use one of these methods over the other.
<b>Note</b>: Both methods use functions from the  lubridate  package in R. If you don’t already have this package installed, you can run the following in your R console:
<b>install.packages('lubridate')
</b>
You can also find the complete documentation for the <b>interval()</b> function we used  here .
<h2><span class="orange">How to Fix in R: more columns than column names</span></h2>
One error you may encounter in R is:
<b>Error in read.table("my_data.csv", header=TRUE) : 
  more columns than column names 
</b>
This error usually occurs when you attempt to read a CSV file into R using the <b>read.table()</b> function and fail to specify that the separator (<b>sep</b>) should be a comma.
This tutorial shares exactly how to fix this error.
<h2>How to Reproduce the Error</h2>
Suppose we have the following CSV file called <b>basketball_data.csv</b>:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/07/morecol1.jpg"489">
Now suppose we attempt to import this file into R using the  read.table()  function:
<b>#attempt to import CSV into data frame
df &lt;- read.table("basketball_data.csv", header=TRUE) 
Error in read.table("basketball_data.csv", header = TRUE) : 
  more columns than column names
</b>
We receive an error because we failed to specify that the values in our file are separated by commas.
Since there are spaces in between the values in the rows of the data frame but not in the header, the <b>read.table()</b> function thinks there is only one column.
Thus, it tells us that there are more columns than column names.
<h2>How to Fix the Error</h2>
The way to fix this error is to simply use <b>sep=”,”</b> when importing the file:
<b>#import CSV file into data frame
df &lt;- read.table("basketball_data.csv", header=TRUE, sep=",")
#view data frame
df
  team points rebounds
1    A     22       10
2    B     14        9
3    C     29        6
4    D     30        2
</b>
We are able to successfully import the CSV file without any errors because we specified that the values in the file are separated by commas.
Alternatively, we could just use <b>read.csv()</b> to import the file if we know that it is a CSV file:
<b>#import CSV file into data frame
df &lt;- read.csv("basketball_data.csv", header=TRUE)
#view data frame
df
  team points rebounds
1  'A'     22       10
2  'B'     14        9
3  'C'     29        6
4  'D'     30        2</b>
Notice that we don’t receive any error when importing the CSV file this time either.
<h2>Additional Resources</h2>
The following tutorials explain how to troubleshoot other common errors in R:
 How to Fix in R: names do not match previous names 
 How to Fix in R: longer object length is not a multiple of shorter object length 
 How to Fix in R: contrasts can be applied only to factors with 2 or more levels 
<h2><span class="orange">How to Calculate a Moving Average by Group in R</span></h2>
In time series analysis, a <b>moving average</b> represents the average value of a certain number of previous periods.
You can use the following basic syntax to calculate a moving average by group in R:
<b>library(dplyr)
library(zoo)
#calculate moving average by group
df %>%
  group_by(variable1)
  mutate(moving_avg = rollmean(variable2, k=3, fill=NA, align='right'))</b>
This particular example calculates a 3-period moving average of <b>variable2</b>, group by <b>variable1</b>.
This code utilizes the<b> group_by()</b> function from the <b>dplyr</b> package and the <b>rollmean()</b> function from the <b>zoo</b> package.
The following example shows how to use this function in practice.
<h2>Example: Calculate Moving Average by Group in R</h2>
Suppose we have the following data frame in R that shows the sales of some product during consecutive days at two different stores:
<b>#create data frame
df &lt;- data.frame(store=rep(c('A', 'B'), each=7), sales=c(4, 4, 3, 5, 6, 5, 7, 4, 8, 7, 2, 5, 4, 6))
#view data frame
df
   store sales
1      A     4
2      A     4
3      A     3
4      A     5
5      A     6
6      A     5
7      A     7
8      B     4
9      B     8
10     B     7
11     B     2
12     B     5
13     B     4
14     B     6
</b>
We can use the following syntax to create a new column called <b>moving_avg3</b> that displays the 3-day moving average value of sales for each store:
<b>library(dplyr)
library(zoo)
#calculate 3-day moving average of sales, grouped by store
df %>%
  group_by(store) %>%
  mutate(moving_avg3 = rollmean(sales, k=3, fill=NA, align='right'))
# A tibble: 14 x 3
# Groups:   store [2]
   store sales moving_avg3
           
 1 A         4       NA   
 2 A         4       NA   
 3 A         3        3.67
 4 A         5        4   
 5 A         6        4.67
 6 A         5        5.33
 7 A         7        6   
 8 B         4       NA   
 9 B         8       NA   
10 B         7        6.33
11 B         2        5.67
12 B         5        4.67
13 B         4        3.67
14 B         6        5
</b>
<b>Note</b>: The value for <b>k</b> in the <b>rollmean()</b> function controls the number of previous periods used to calculate the moving average.
The <b>moving_avg3</b> column shows the moving average value of sales for the previous 3 periods.
For example, the first 3-day moving average of sales for store A is calculated as:
3-Day Moving Average = (4 + 4 + 3) / 3 = <b>3.67</b>
The next 3-day moving average of sales for store A is calculated as:
3-Day Moving Average = (4 + 3 + 5) / 3 = <b>4</b>
And so on.
Note that the first two values for the moving average for each store are <b>NA</b> because there weren’t enough previous periods to use for the moving average.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Plot Multiple Columns in R 
 How to Average Across Columns in R 
 How to Calculate the Mean by Group in R 
<h2><span class="orange">How to Create a Multi-Line Comment in R (With Examples)</span></h2>
The easiest way to create a multi-line comment in RStudio is to highlight the text and press <b>Ctrl</b> + <b>Shift</b> + <b>C</b>.
You can just as easily remove the comment by highlighting the text again and pressing <b>Ctrl</b> + <b>Shift</b> + <b>C</b>.
The following example shows how to do this in practice.
<h3>Example: Create Multi-Line Comment in R</h3>
Suppose we have the following script in RStudio:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/comment1.png">
The first five rows of the script simply describe what the rest of the script does. Thus, we want to turn these rows into comments.
To turn the first five lines into a multi-line comment, we can highlight each of the first five rows and press <b>Ctrl</b> + <b>Shift</b> + <b>C</b>:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/comment2.png">
Notice that the <b>#</b> symbol has been placed in front of each line, which indicates that the entire line is a comment.
We can just as easily uncomment the first five rows by highlighting each row and pressing <b>Ctrl</b> + <b>Shift</b> + <b>C</b> once again:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/comment3.png">
Note that the <b>#</b> symbol has been removed from each of the first five lines, which indicates that each line is no longer a comment.
Note that you can press <b>command </b>+ <b>Shift</b> + <b>C</b> to perform the exact same action in OS-X.
<h2><span class="orange">How to Plot Multiple Plots on Same Graph in R (3 Examples)</span></h2>
You can use the following methods to plot multiple plots on the same graph in R:
<b>Method 1: Plot Multiple Lines on Same Graph</b>
<b>#plot first line
plot(x, y1, type='l')
#add second line to plot
lines(x, y2)</b>
<b>Method 2: Create Multiple Plots Side-by-Side</b>
<b>#define plotting area as one row and two columns
par(mfrow = c(1, 2))
#create first plot
plot(x, y1, type='l')
#create second plot
plot(x, y2, type='l')
</b>
<b>Method 3: Create Multiple Plots Stacked Vertically</b>
<b>#define plotting area as two rows and one column
par(mfrow = c(2, 1))
  
#create first plot
plot(x, y1, type='l')
#create second plot
plot(x, y2, type='l')</b>
The following examples show how to use each method in practice.
<h3>Example 1: Plot Multiple Lines on Same Graph</h3>
The following code shows how to plot two lines on the same graph in R:
<b>#define data to plot
x &lt;- 1:10
y1 &lt;- c(2, 4, 4, 5, 7, 6, 5, 8, 12, 19)
y2 &lt;- c(2, 2, 3, 4, 4, 6, 5, 9, 10, 13)
#plot first line
plot(x, y1, type='l', col='red', xlab='x', ylab='y')
#add second line to plot
lines(x, y2, col='blue')
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/samegraph1.jpg">
<h3>Example 2: Create Multiple Plots Side-by-Side</h3>
The following code shows how to use the <b>par()</b> argument to plot multiple plots side-by-side:
<b>#define data to plot
x &lt;- 1:10
y1 &lt;- c(2, 4, 4, 5, 7, 6, 5, 8, 12, 19)
y2 &lt;- c(2, 2, 3, 4, 4, 6, 5, 9, 10, 13)
#define plotting area as one row and two columns
par(mfrow = c(1, 2))
#create first line plot
plot(x, y1, type='l', col='red')
#create second line plot
plot(x, y2, type='l', col='blue', ylim=c(min(y1), max(y1)))</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/samegraph2.jpg"442">
Note that we used the  ylim()  argument in the second plot to ensure that the two plots had the same y-axis limits.
<h3>Example 3: Create Multiple Plots Stacked Vertically</h3>
The following code shows how to use the <b>par()</b> argument to plot multiple plots stacked vertically:
<b>#define data to plot
x &lt;- 1:10
y1 &lt;- c(2, 4, 4, 5, 7, 6, 5, 8, 12, 19)
y2 &lt;- c(2, 2, 3, 4, 4, 6, 5, 9, 10, 13)
#define plotting area as two rows and one column
par(mfrow = c(2, 1), mar = c(2, 4, 4, 2))
#create first line plot
plot(x, y1, type='l', col='red')
#create second line plot
plot(x, y2, type='l', col='blue', ylim=c(min(y1), max(y1)))</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/samegraph3.jpg"458">
Note that we used the <b>mar</b> argument to specify the (bottom, left, top, right) margins for the plotting area.
<b>Note:</b> The default is mar = c(5.1, 4.1, 4.1, 2.1)
<h2><span class="orange">How to Use ncol Function in R (With Examples)</span></h2>
You can use the <b>ncol()</b> function in R to count the number of columns in a data frame or matrix.
This function uses the following basic syntax:
<b>ncol(x)</b>
where:
<b>x</b>: Name of the data frame or matrix
The following examples show how use this function in different scenarios.
<h3>Example 1: Use ncol to Count Number of Columns in Data Frame</h3>
 Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28))
#view data frame
df
  team points assists rebounds
1    A     99      33       30
2    B     90      28       28
3    C     86      31       24
4    D     88      39       24
5    E     95      34       28
</b>
We can use the <b>ncol()</b> function to display the total number of columns in the data frame:
<b>#display number of columns in data frame
ncol(df)
[1] 4
</b>
From the output we can see that there are <b>4</b> total columns in the data frame.
<h3>Example 2: Use ncol to Count Number of Columns in Matrix</h3>
Suppose we have the following matrix in R:
<b>#create matrix
mat &lt;- matrix(1:21, nrow=3)
#view matrix
mat
     [,1] [,2] [,3] [,4] [,5] [,6] [,7]
[1,]    1    4    7   10   13   16   19
[2,]    2    5    8   11   14   17   20
[3,]    3    6    9   12   15   18   21</b>
We can use the <b>ncol()</b> function to display the total number of columns in the matrix:
<b>#display number of columns in matrix
ncol(mat)
[1] 7
</b>
From the output we can see that there are <b>7</b> total columns in the matrix.
<h3>When to Use ncol Function in Practice</h3>
In practice, we often use the <b>ncol</b> function when we first load a new dataset into R so that we can quickly understand the size of a dataset.
This function is often used with <b>nrow</b>, which tells us the number of rows in a given dataset.
To quickly view the number of columns <em>and</em> rows in a dataset, you can use the <b>dim</b> function, which returns the dimensions of a dataset in terms of number of columns and rows.
The following code shows how to use these functions with a data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28))
#display number of rows
nrow(df)
[1] 5
#display number of columns
ncol(df)
[1] 4
#display dimensions
dim(df)
[1] 5 4
</b>
From the output we can see that this data frame has <b>5</b> rows and <b>4</b> columns.
<h2><span class="orange">How to Fix: no non-missing arguments to min; returning Inf</span></h2>
One warning message you may encounter in R is:
<b>Warning message:
In min(data) : no non-missing arguments to min; returning Inf 
</b>
This warning message appears whenever you attempt to find the minimum or maximum value of a vector that has a length of zero.
It’s important to note that this is only a <b>warning message</b> and it won’t actually prevent your code from running.
However, you can use one of the following methods to avoid this warning message entirely:
<b>Method 1: Suppress the Warning Message</b>
<b>suppressWarnings(min(data))</b>
<b>Method 2: Define a Custom Function to Calculate the Min or Max</b>
<b>#define custom function to calculate min
custom_min &lt;- function(x) {if (length(x)>0) min(x) else Inf}
#use custom function to calculate min of data
custom_min(data)</b>
The following examples show how to use each method in practice.
<h3>Method 1: Suppress the Warning Message</h3>
Suppose we attempt to use the min() function to find the minimum value of a vector with a length of zero:
<b>#define vector with no values
data &lt;- numeric(0)
#attempt to find min value of vector
min(data)
[1] Inf
Warning message:
In min(data) : no non-missing arguments to min; returning Inf
</b>
Notice that we receive a warning message that tells us we attempted to find the minimum value of a vector with no non-missing arguments.
To avoid this warning message, we can use the <b>suppressWarnings()</b> function:
<b>#define vector with no values
data &lt;- numeric(0)
#find minimum value of vector
suppressWarnings(min(data))
[1] Inf
</b>
The minimum value is still calculated to be “<b>Inf</b>” but we receive no warning message this time.
<h3>Method 2: Define a Custom Function</h3>
Another way to avoid the warning message is to define a custom function that only calculates the minimum value if the length of a vector is greater than zero, otherwise a value of “<b>Inf</b>” is returned:
<b>#define vector with no values
data &lt;- numeric(0)
#define custom function to calculate min
custom_min &lt;- function(x) {if (length(x)>0) min(x) else Inf}
#use custom function to calculate min
custom_min(data)
[1] Inf
</b>
Notice that the minimum value is calculated to be “<b>Inf</b>” and we receive no warning message.
<h2><span class="orange">How to Fix in R: not defined because of singularities</span></h2>
One error message you may encounter in R is:
<b>Coefficients: (1 not defined because of singularities) 
</b>
This error message occurs when you fit some model using the <b>glm()</b> function in R and two or more of your predictor variables have an exact linear relationship between them – known as  perfect multicollinearity .
To fix this error, you can use the <b>cor()</b> function to identify which variables in your dataset have a perfect correlation with each other and simply drop one of those variables from the regression model.
This tutorial shares how to address this error message in practice.
<h3>How to Reproduce the Error</h3>
Suppose we fit a  logistic regression model  to the following data frame in R:
<b>#define data
df &lt;- data.frame(y = c(0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1), x1 = c(3, 3, 4, 4, 3, 2, 5, 8, 9, 9, 9, 8, 9, 9, 9), x2 = c(6, 6, 8, 8, 6, 4, 10, 16, 18, 18, 18, 16, 18, 18, 18), x3 = c(4, 7, 7, 3, 8, 9, 9, 8, 7, 8, 9, 4, 9, 10, 13))
#fit logistic regression model
model &lt;- glm(y~x1+x2+x3, data=df, family=binomial)
#view model summary
summary(model)
Call:
glm(formula = y ~ x1 + x2 + x3, family = binomial, data = df)
Deviance Residuals: 
       Min          1Q      Median          3Q         Max  
-1.372e-05  -2.110e-08   2.110e-08   2.110e-08   1.575e-05  
Coefficients: (1 not defined because of singularities)
              Estimate Std. Error z value Pr(>|z|)
(Intercept)    -75.496 176487.031   0.000        1
x1              14.546  24314.459   0.001        1
x2                  NA         NA      NA       NA
x3              -2.258  20119.863   0.000        1
(Dispersion parameter for binomial family taken to be 1)
    Null deviance: 2.0728e+01  on 14  degrees of freedom
Residual deviance: 5.1523e-10  on 12  degrees of freedom
AIC: 6
Number of Fisher Scoring iterations: 24
</b>
Notice that right before the coefficient output, we receive the message: 
<b>Coefficients: (1 not defined because of singularities)
</b>
This indicates that two or more predictor variables in the model have a perfect linear relationship and thus not every regression coefficient in the model can be estimated.
For example, notice that no coefficient estimate can be made for the <b>x<sub>2</sub></b> predictor variable.
<h3>How to Handle the Error</h3>
To identify which predictor variables are causing this error, we can use the <b>cor()</b> function to produce a  correlation matrix  and examine which variables have a correlation of exactly <b>1</b> with each other:
<b>#create correlation matrix
cor(df)
           y        x1        x2        x3
y  1.0000000 0.9675325 0.9675325 0.3610320
x1 0.9675325 1.0000000 1.0000000 0.3872889
x2 0.9675325 1.0000000 1.0000000 0.3872889
x3 0.3610320 0.3872889 0.3872889 1.0000000
</b>
From the correlation matrix we can see that the variables <b>x<sub>1</sub></b> and <b>x<sub>2</sub></b> are perfectly correlated.
To resolve this error, we can simply drop one of those two variables from the model since they don’t actually provide unique or independent information in the regression model.
For example, suppose we drop <b>x<sub>2</sub></b> and fit the following logistic regression model:
<b>#fit logistic regression model
model &lt;- glm(y~x1+x3, data=df, family=binomial)
#view model summary
summary(model)
Call:
glm(formula = y ~ x1 + x3, family = binomial, data = df)
Deviance Residuals: 
       Min          1Q      Median          3Q         Max  
-1.372e-05  -2.110e-08   2.110e-08   2.110e-08   1.575e-05  
Coefficients:
              Estimate Std. Error z value Pr(>|z|)
(Intercept)    -75.496 176487.031   0.000        1
x1              14.546  24314.459   0.001        1
x3              -2.258  20119.863   0.000        1
(Dispersion parameter for binomial family taken to be 1)
    Null deviance: 2.0728e+01  on 14  degrees of freedom
Residual deviance: 5.1523e-10  on 12  degrees of freedom
AIC: 6
Number of Fisher Scoring iterations: 24</b>
Notice that we don’t receive a “not defined because of singularities” error message this time.
<b>Note</b>: It doesn’t matter whether we drop x<sub>1</sub> or x<sub>2</sub>. The final model will contain the same coefficient estimate for whichever variable you decide to keep and the overall goodness of fit of the model will be the same.
<h2><span class="orange">How to Fix: number of items to replace is not a multiple of replacement length</span></h2>
One error you may encounter in R is:
<b>Warning message:
  number of items to replace is not a multiple of replacement length
</b>
This error occurs when you attempt to replace a certain number of items in a vector or data frame column (suppose 3 items) with a different number of items (suppose 6 items).
This tutorial shares exactly how to fix this error.
<h3>How to Reproduce the Error</h3>
Suppose we have the following data frame in R with some missing values in the first column:
<b>#create data frame
df &lt;- data.frame(a=c(3, NA, 7, NA, NA, 14), b=c(4, 4, 5, 12, 13, 18))
#view data frame
df
   a  b
1  3  4
2 NA  4
3  7  5
4 NA 12
5 NA 13
6 14 18</b>
Now suppose we try to replace the missing values in the first column with values in the second column:
<b>#attempt to replace missing values in first column with values in second column
df$a[is.na(df$a)] &lt;- df$b
Warning message:
In df$a[is.na(df$a)] &lt;- df$b :
  number of items to replace is not a multiple of replacement length
</b>
We receive an error because we attempted to replace <b>3</b> missing values in the first column with all <b>6</b> values from the second column.
<h3>How to Fix the Error</h3>
The easiest way to fix this error is to simply use an <b>ifelse()</b> statement:
<b>#replace missing values in column 'a' with corresponding values in column 'b'
df$a &lt;- ifelse(is.na(df$a), df$b, df$a)
#view updated data frame
df
   a  b
1  3  4
2  4  4
3  7  5
4 12 12
5 13 13
6 14 18 </b>
This <b>ifelse()</b> statement checks if the value in column ‘a’ is empty. If it is, then it gets replaced by the corresponding value in column ‘b’, otherwise it is left alone.
Another way to fix this error is to simply replace all missing values with a specific number:
<b>#replace all missing values in column 'a' with zero
df$a[is.na(df$a)] &lt;- 0
#view updated data frame
df
   a  b
1  3  4
2  0  4
3  7  5
4  0 12
5  0 13
6 14 18</b>
Using this method, each missing value in column ‘a’ gets replaced with a zero.
<h2><span class="orange">How to Fix: number of rows of result is not a multiple of vector length (arg 1)</span></h2>
One warning message you may encounter when using R is:
<b>Warning message:
In cbind(A, B, C) :
  number of rows of result is not a multiple of vector length (arg 1)
</b>
This warning usually occurs when you attempt to use the <b>cbind()</b> function to column-bind together vectors of different lengths.
It’s worth noting that this message is simply a <em>warning</em> and your code will still run, but the results you get may be different than you were expecting.
The following example shows how to avoid this warning in practice.
<h2>How to Reproduce the Warning</h2>
Suppose we use the  cbind()  function to column-bind together three vectors into a data frame:
<b>#define three vectors with different lengths
A = c(4, 2, 3, 6)
B = c(9, 1, 8, 7, 0, 7)
C = c(3, 5, 3, 3, 6, 4)
#column bind three vectors into data frame
df &lt;- cbind(A, B, C)
#view data frame
df
Warning message:
In cbind(A, B, C) :
  number of rows of result is not a multiple of vector length (arg 1)
     A B C
[1,] 4 9 3
[2,] 2 1 5
[3,] 3 8 3
[4,] 6 7 3
[5,] 4 0 6
[6,] 2 7 4</b>
The <b>cbind</b> function works with the three vectors, but notice that the values of the first vector simply repeat over and over again.
This is known as “recycling” in R.
<h2>How to Avoid the Warning</h2>
To avoid the warning altogether, we must make sure that the length of each of the vectors we’re using is the same.
One way to accomplish this is to fill in the missing values in the shorter vector with NA values as follows:
<b>#calculate max length of vectors
max_length &lt;- max(length(A), length(B), length(C))
#set length of each vector equal to max length
length(A) &lt;- max_length                      
length(B) &lt;- max_length
length(C) &lt;- max_length 
#cbind the three vectors together into a data frame
df &lt;- cbind(A, B, C)
#view data frame
df
      A B C
[1,]  4 9 3
[2,]  2 1 5
[3,]  3 8 3
[4,]  6 7 3
[5,] NA 0 6
[6,] NA 7 4
</b>
Notice that we don’t receive any warning message this time and the values of the short vector are simply filled in with NA values to ensure that each of the three vectors we used have equal lengths.
<h2>Additional Resources</h2>
The following tutorials explain how to fix other common errors in R:
 How to Fix in R: Arguments imply differing number of rows 
 How to Fix in R: error in select unused arguments 
 How to Fix in R: replacement has length zero 
<h2><span class="orange">How to Fix in R: object not found</span></h2>
One common error you may encounter in R is:
<b>Error: object 'x' not found
</b>
This error usually occurs for one of two reasons:
<b>Reason 1</b>: You are attempting to reference an object you have not created.
<b>Reason 2</b>: You are running a chunk of code where the object has not been defined in that chunk.
The following examples how to resolve this error in each of these scenarios.
<h3>Example #1: Object not found when object does not exist</h3>
Suppose we use the following code to display a data frame that we have not created:
<b>#create data frame
my_df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'),    points=c(99, 90, 86, 88, 95),    assists=c(33, 28, 31, 39, 34),    rebounds=c(30, 28, 24, 24, 28))
#attempt to display data frame
my_data
Error: object 'my_data' not found
</b>
We receive an error because the object <b>my_data</b> does not exist.
Instead, we need to type the correct name of the data frame that we created:
<b>#display data frame
my_df
  team points assists rebounds
1    A     99      33       30
2    B     90      28       28
3    C     86      31       24
4    D     88      39       24
5    E     95      34       28
</b>
This time we’re able to display the data frame without an error because we used the correct name.
Note that we can also use <b>ls()</b> to display all object names in our current environment and <b>exists()</b> to check if a specific object name exists:
<b>#display the names of all objects in environment
ls()
[1] "df"    "my_df" "x"
#check if my_data exists
exists('my_data')
[1] FALSE
</b>
We can see that <b>exists(‘my_data’)</b> returns <b>FALSE</b>, which explains why we received an error when we attempted to display it.
<h3>Example #2: Object not found when incorrect chunk of code is highlighted</h3>
Another reason that we might receive an <b>object not found</b> error is because we have highlighted a chunk of code to run in RStudio that doesn’t contain the name of the object we’re attempting to reference.
For example, consider the following screenshot where we highlight rows 3 through 5 and attempt to calculate the mean of a value named <b>x</b>:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/found1.jpg">
Since we created the vector named <b>x</b> in row 2, we receive an error because we haven’t actually created that vector in the chunk of code that we highlighted.
If we instead make sure that we highlight the whole chunk of code we’re interested in, we won’t receive any error:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/found2.jpg"674">
Notice that RStudio displays the mean of vector <b>x</b> without any errors this time.
<h2><span class="orange">How to Handle in R: object of type ‘closure’ is not subsettable</span></h2>
One error you may encounter in R is:
<b>object of type 'closure' is not subsettable
</b>
This error occurs when you attempt to subset a function.
In R, it’s possible to subset lists, vectors, matrices, and data frames, but a function has the type ‘closure’ which cannot be subsetted.
This tutorial shares exactly how to address this error.
<h3>How to Reproduce the Error</h3>
Suppose we create the following function in R that takes each value in a vector and multiplies it by 5:
<b>#define function
cool_function &lt;- function(x) {
  x &lt;- x*5
  return(x)
}
</b>
Here’s how we might use this function in practice:
<b>#define data
data &lt;- c(2, 3, 3, 4, 5, 5, 6, 9)
#apply function to data
cool_function(data)
[1] 10 15 15 20 25 25 30 45
</b>
Notice that each value in the original vector was multiplied by 5.
Now suppose we attempted to subset the function:
<b>#attempt to get first element of function
cool_function[1]
Error in cool_function[1] : object of type 'closure' is not subsettable
</b>
We receive an error because it’s not possible to subset an object of type ‘closure’ in R.
We can use the following syntax to verify that the function is indeed of the type ‘closure’:
<b>#print object type of function
typeof(cool_function)
[1] "closure"
</b>
<h3>More Examples of ‘Closure’ Objects</h3>
Any function in R is of the type ‘closure’. For example, we would receive this error if we attempted to subset any function in base R:
<b>#attempt to subset mean function
mean[1]
Error in mean[1] : object of type 'closure' is not subsettable
#attempt to subset standard deviation function
sd[1]
Error in sd[1] : object of type 'closure' is not subsettable
#attempt to subset table function
tabld[1]
Error in table[1] : object of type 'closure' is not subsettable
</b>
<h3>How to Address the Error</h3>
The way to address this error is to simply avoid subsetting a function.
For example, if we’d like to apply our <b>cool_function</b> from earlier to only the first element in a vector, we can use the following syntax:
<b>#apply function to just first element in vector
cool_function(data[1])
[1] 10
</b>
We don’t receive an error because we subsetted the vector instead of the function.
Or we could apply the <b>cool_function</b> to the entire vector:
<b>#apply function to every element in vector
cool_function(data)
[1] 10 15 15 20 25 25 30 45</b>
We don’t receive an error because we didn’t attempt to subset the function in any way.
<h2><span class="orange">How to Save R Output to Text File (With Examples)</span></h2>
There are two common ways to save R output to a text file:
<b>Method 1: Use the sink() Function</b>
<b>#define file name
sink("my_data.txt")
#write this string to file
"here is some text"
#close the external connection
sink() </b>
<b>Method 2: Use the cat() Function</b>
<b>#write string to file
cat("here is some text", file = "my_data.txt")</b>
The following examples show how to use each method in practice.
<h2>Example 1: Save R Output to Text File Using sink()</h2>
We can use the following <b>sink()</b> function to export a character string to a text file:
<b>#define file name
sink("my_data.txt")
#write this string to file
"here is some text"
#close the external connection
sink()
</b>
We can then navigate to the  current working directory  and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/sink1.jpg"466">
The file contains the string that we specified.
We can also use the <b>cat()</b> function to export something more complex like a data frame to a text file:
<b>#define file name
sink("my_data.txt")
#define data frame to write to file
df &lt;- data.frame(player=c('A', 'B', 'C', 'D','E'), points=c(12, 29, 24, 30, 19), assists=c(5, 5, 7, 4, 10))
print(df)
#close the external connection
sink()
</b>
We can then navigate to the current working directory and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/sink3.jpg"371">
The file contains the data frame that we created.
<h2>
<b>Example 2: Save R Output to Text File Using cat()</b>
</h2>
We can use the following <b>cat()</b> function to save a string to a text file:
<b>#save string to text file
cat("here is some text", file = "my_data.txt")
</b>
We can then navigate to the current working directory and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/12/cat1.jpg"452">
The text file contains the string that we specified.
Notice that the <b>cat()</b> function doesn’t include any line numbers from the R console in the text file, unlike the <b>sink()</b> function.
Feel free to use whichever function suits your needs.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Export Data Frame to Excel File in R 
 How to Export Data Frame to CSV File in R 
 How to Export List to a File in R 
<h2><span class="orange">How to Overlay Plots in R (With Examples)</span></h2>
You can use the <b>lines()</b> and <b>points()</b> functions to overlay multiple plots in R:
<b>#create scatterplot of x1 vs. y1
plot(x1, y1)
#overlay line plot of x2 vs. y2
lines(x2, y2)
#overlay scatterplot of x3 vs. y3
points(x2, y2)
</b>
The following examples show how to use each of these functions in practice.
<h3>Example 1: How to Overlay Line Plots in R</h3>
The following code shows how to overlay three line plots in a single plot in R:
<b>#define datasets
x1 = c(1, 3, 6, 8, 10)
y1 = c(7, 12, 16, 19, 25)
x2 = c(1, 3, 5, 7, 10)
y2 = c(9, 15, 18, 17, 20)
x3 = c(1, 2, 3, 5, 10)
y3 = c(5, 6, 7, 15, 18)
#create line plot of x1 vs. y1
plot(x1, y1, type='l', col='red')
#overlay line plot of x2 vs. y2
lines(x2, y2, col='blue')
#overlay line plot of x3 vs. y3
lines(x3, y3, col='purple')
#add legend
legend(1, 25, legend=c('Line 1', 'Line 2', 'Line 3'),
       col=c('red', 'blue', 'purple'), lty=1)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/07/overlay1.png">
<h3>Example 2: How to Overlay Scatterplots in R</h3>
The following code shows how to overlay two scatterplots in a single plot in R:
<b>#define datasets
x1 = c(1, 3, 6, 8, 10)
y1 = c(7, 12, 16, 19, 25)
x2 = c(1, 3, 5, 7, 10)
y2 = c(9, 15, 18, 17, 20)
#create scatterplot of x1 vs. y1
plot(x1, y1, col='red', pch=19)
#overlay scatterplot of x2 vs. y2
points(x2, y2, col='blue', pch=19)
#add legend
legend(1, 25, legend=c('Data 1', 'Data 2'), pch=c(19, 19), col=c('red', 'blue'))
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/07/overlay2.png">
Note that the <b>pch</b> argument specifies the shape of the points in the plot. A pch value of 19 specifies a filled-in circle.
You can find a complete list of pch values and their corresponding shapes  here .
<h2><span class="orange">Partial String Matching in R (With Examples)</span></h2>
Often you may want to find the rows in a data frame whose value in a certain column matches some partial string.
Fortunately we can use the  grep()  function to do so, using the following syntax:
<b>df[grep("string", df$column_name), ]
</b>
This tutorial provides several examples of how to use this function in practice on the following data frame:
<b>#create data frame
df &lt;- data.frame(player=c('A', 'B', 'C', 'D', 'E', 'F', 'G'), position=c('S Guard', 'P Guard', 'P Guard', 'S Forward',            'P Forward', 'Center', 'Center'), points=c(28, 17, 19, 14, 23, 26, 5))
#view data frame
df
  player   position  points
1      A    S Guard      28
2      B    P Guard      17
3      C    P Guard      19
4      D  S Forward      14
5      E  P Forward      23
6      F     Center      26
7      G     Center       5
</b>
<h3>Example 1: Find Partial Match in a Specific Column</h3>
The following code shows how to find all rows in the data frame that contain the string ‘Gua’ in the position column:
<b>df[grep("Gua", df$position), ]
  player position points
1      A  S Guard     28
2      B  P Guard     17
3      C  P Guard     19
</b>
And the following code shows how to find all rows in the data frame that contain the string ‘P Gua’ in the position column:
<b>df[grep("P Gua", df$position), ]
  player position points
2      B  P Guard     17
3      C  P Guard     19</b>
<h3>Example 2: Find Several Partial Matches</h3>
The following code shows how to find all rows in the data frame that contain the string ‘S Gua’ or the string ‘Cen’ in the position column by using the <b>|</b> operator to indicate “or” in the grep argument:
<b>df[grep("S Gua|Cen", df$position), ]
  player position points
1      A  S Guard     28
6      F   Center     26
7      G   Center      5</b>
Note that we can use the <b>|</b> operator to search for as many partial strings as we’d like.
The following code shows how to use this operator to return the rows with partial strings ‘A’, ‘C’, ‘D’, ‘F’, or ‘G’ in the player column:
<b>df[grep("A|C|D|F|G", df$player), ]
  player  position points
1      A   S Guard     28
3      C   P Guard     19
4      D S Forward     14
6      F    Center     26
7      G    Center      5</b>
You can find more R tutorials on  this page .
<h2><span class="orange">How to Use paste & paste0 Functions in R to Concatenate Strings</span></h2>
You can use the <b>paste()</b> and <b>paste0()</b> functions in R to concatenate elements of a vector into a single string.
The <b>paste()</b> function concatenates strings using<b> a space</b> as the default separator.
The <b>paste0()</b> function concatenates strings using <b>no space</b> as the default separator.
These functions use the following basic syntax:
<b>paste(x, sep = " ", collapse = NULL)
paste0(x, collapse = NULL)
</b>
where:
<b>x</b>: The vector of elements to concatenate
<b>sep</b>: The separator to use when concatenating
<b>collapse</b>: Value to use when joining elements into single string
The following examples show how to use each function in practice.
<h3>Example 1: Use paste0()</h3>
The following code shows how to use the <b>paste0()</b> function to concatenate several strings into a single string:
<b>#concatenate several elements into one string
paste0("I", "ride", "my", "bike", 25, "times")
[1] "Iridemybike25times"
</b>
Each element is concatenated into one string using no space as the separator.
<h3>Example 2: Use paste()</h3>
The following code shows how to use the <b>paste()</b> function to concatenate several strings into a single string:
<b>#concatenate several elements into one string
paste("I", "ride", "my", "bike", 25, "times")
[1] "I ride my bike 25 times"
</b>
Each element is concatenated into one string using a space as the default separator.
<h3>Example 3: Use paste() with sep</h3>
The following code shows how to use the <b>paste()</b> function with the <b>sep</b> argument to concatenate several strings into one string, using an underscore as the separator:
<b>#concatenate elements using _ as separator
paste("I", "ride", "my", "bike", 25, "times", sep="_")
[1] "I_ride_my_bike_25_times"
</b>
Each element is concatenated into one string using an underscore as the separator.
<h3>Example 4: Use paste() with sep and collapse</h3>
The following code shows how to use the <b>paste()</b> function with the <b>sep</b> and <b>collapse</b> arguments to concatenate several strings into one string:
<b>#concatenate elements using sep and collapse arguments
paste(c("A", "B", "C"), c(1, 2, 3), sep="_", collapse=" and ")
[1] "A_1 and B_2 and C_3"
</b>
The <b>sep</b> argument was used to join together corresponding elements in each vector and the <b>collapse</b> argument was used to join together all of the elements into one string.
<h2><span class="orange">How to Calculate Percentage by Group in R (With Example)</span></h2>
You can use the following syntax to calculate a percentage by group in R:
<b>library(dplyr)
df %>%
  group_by(group_var) %>%
  mutate(percent = value_var/sum(value_var))
</b>
The following example shows how to use this syntax in practice.
<h2>Example: Calculate Percentage by Group in R</h2>
Suppose we have the following data frame that shows the points scored by basketball players on various teams:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'A', 'B', 'B', 'B', 'B', 'B'), points=c(12, 29, 34, 14, 10, 11, 7, 36, 34, 22))
#view data frame
df
   team points
1     A     12
2     A     29
3     A     34
4     A     14
5     A     10
6     B     11
7     B      7
8     B     36
9     B     34
10    B     22</b>
We can use the following code to create a new column in the data frame that shows the percentage of total points scored, grouped by team:
<b>library(dplyr)
#calculate percentage of points scored, grouped by team
df %>%
  group_by(team) %>%
  mutate(percent = points/sum(points))
# A tibble: 10 x 3
# Groups:   team [2]
   team  points percent
        
 1 A         12  0.121 
 2 A         29  0.293 
 3 A         34  0.343 
 4 A         14  0.141 
 5 A         10  0.101 
 6 B         11  0.1   
 7 B          7  0.0636
 8 B         36  0.327 
 9 B         34  0.309 
10 B         22  0.2 
</b>
The <b>percent</b> column shows the percentage of total points scored by that player within their team.
For example, players on team A scored a total of <b>99</b> points.
Thus, the player in the first row of the data frame who scored <b>12</b> points scored a total of 12/99 = <b>12.12%</b> of the total points for team A.
Similarly, the player in the second row of the data frame who scored <b>29</b> points scored a total of 29/99 = <b>29.29%</b> of the total points for team A.
And so on.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Count Unique Values by Group in R 
 How to Calculate Summary Statistics by Group in R 
 How to Calculate the Sum by Group in R 
<h2><span class="orange">How to Change Axis Intervals in R Plots (With Examples)</span></h2>
You can use the following basic syntax to change axis intervals on a plot in base R:
<b>#create plot with no axis intervals
plot(x, y, xaxt='n', yaxt='n')
#specifty x-axis interval
axis(side=1, at=c(1, 5, 10, 15))
#specify y-axis interval
axis(side=2, at=seq(1, 100, by=10))
</b>
The following examples show how to use this syntax in practice.
<h3>Example 1: Specify Axis Intervals Using Individual Values</h3>
The following code shows how to modify the x-axis and y-axis intervals in a plot in base R using the <b>c()</b> function:
<b>#define data
x &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15)
y &lt;- c(1, 3, 3, 4, 6, 7, 8, 14, 17, 15, 14, 13, 19, 22, 25)
#create scatterplot
plot(x, y, col='steelblue', pch=19, xaxt='n', yaxt='n')
#modify x-axis and y-axis intervals
axis(side=1, at=c(1, 5, 10, 15))
axis(side=2, at=c(1, 12.5, 25))
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/09/interval1.png">
Notice that the only values shown along the x-axis and y-axis are the specific values that we specified.
<h3>Example 2: Specify Axis Intervals Using a Sequence of Values</h3>
The following code shows how to modify the x-axis and y-axis intervals in a plot in base R using the <b>seq()</b> function:
<b>#define data
x &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15)
y &lt;- c(1, 3, 3, 4, 6, 7, 8, 14, 17, 15, 14, 13, 19, 22, 25)
#create scatterplot
plot(x, y, col='steelblue', pch=19, xaxt='n', yaxt='n')
#modify x-axis and y-axis intervals
axis(side=1, at=seq(5, 15, by=5))
axis(side=2, at=seq(0, 25, by=5))
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/09/interval2.png">
Notice that the only values shown along the x-axis and y-axis are the values we specified using the <b>seq()</b> function.
<h3>Example 3: Specify Axis Intervals Using a Range of Values</h3>
The following code shows how to modify the x-axis interval in a plot in base R using the <b>:</b> function:
<b>#define data
x &lt;- c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15)
y &lt;- c(1, 3, 3, 4, 6, 7, 8, 14, 17, 15, 14, 13, 19, 22, 25)
#create scatterplot
plot(x, y, col='steelblue', pch=19, xaxt='n')
#modify x-axis interval
axis(side=1, at=1:15)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/09/interval3.png">
Notice that base R automatically produced y-axis interval values and then used the range of x-axis interval values that we specified.
<h2><span class="orange">How to Change Axis Scales in R Plots (With Examples)</span></h2>
Often you may want to change the scale used on an axis in R plots.
This tutorial explains how to change axis scales on plots in both base R and ggplot2.
<h3>Example 1: Change Axis Scales in Base R</h3>
To change the axis scales on a plot in base R, we can use the <b>xlim()</b> and <b>ylim()</b> functions.
The following code shows how to use these functions in practice:
<b>#define data
df &lt;- data.frame(x=c(1, 3, 3, 4, 6, 8, 12, 13, 15, 18, 21, 22), y=c(13, 15, 9, 17, 22, 25, 29, 35, 39, 44, 45, 40))
#create plot with default axis scales
plot(df$x, df$y, pch=19, main='Default Axes')
#create plot with custom axis scales
plot(df$x, df$y, pch=19, xlim=c(0,30), ylim=c(0,150), main='Custom Axes')
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/04/scaleR1.png">
Note that you can also quickly transform one of the axes to a log scale by using the <b>log</b> argument. For example, the following code shows how to transform the y-axis to a log scale:
<b>#define data
df &lt;- data.frame(x=c(1, 3, 3, 4, 6, 8, 12, 13, 15, 18, 21, 22), y=c(13, 15, 9, 17, 22, 25, 29, 35, 39, 44, 45, 40))
#create plot with log y-axis
plot(df$x, df$y, log='y', pch=19)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/04/scaleR2.png">
<h3>Example 2: Change Axis Scales in ggplot2 </h3>
To change the axis scales on a plot in base R, We can also use the <b>xlim()</b> and <b>ylim()</b> functions to change the axis scales
The following code shows how to use these functions in practice:
<b>library(ggplot2)
#define data
df &lt;- data.frame(x=c(1, 3, 3, 4, 6, 8, 12, 13, 15, 18, 21, 22), y=c(13, 15, 9, 17, 22, 25, 29, 35, 39, 44, 45, 40))
#create scatterplot with custom axes
ggplot(data=df, aes(x=x, y=y)) +
  geom_point() +
  xlim(0, 30) +
  ylim(0, 150)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/04/scaleR3.png">
We can also transform either of the axes to a log scale by using the following arguments:
scale_x_continuous(trans=’log10′)
scale_y_continuous(trans=’log10′)
For example, the following code shows how to transform the y-axis to a log scale:
<b>library(ggplot2)
#define data
df &lt;- data.frame(x=c(1, 3, 3, 4, 6, 8, 12, 13, 15, 18, 21, 22), y=c(13, 15, 9, 17, 22, 25, 29, 35, 39, 44, 45, 40))
#create scatterplot with log y-axis
ggplot(data=df, aes(x=x, y=y)) +
  geom_point() +
  scale_y_continuous(trans='log10')</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/04/scaleR4.png">
 
You can find more R data visualization tutorials on  this page .
<h2><span class="orange">The Complete Guide: How to Change Font Size in Base R Plots</span></h2>
You can use the following syntax to change the font size of various elements in base R plots:
<b>plot(df$x, df$y, main='Title', sub='Subtitle',
     cex.main=2, #change font size of title
     cex.sub=2, #change font size of subtitle
     cex.lab=2, #change font size of axis labels
     cex.axis=2) #change font size of axis text   
</b>
The following examples show how to use this syntax with the following scatterplot in base R:
<b>#create data frame
df &lt;- data.frame(x=c(1, 2, 3, 4, 5, 6), y=c(5, 8, 12, 16, 25, 33))
#create scatterplot with all default font sizes
plot(df$x, df$y, main='Title', sub='Subtitle')
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/fontSize1.png">
<h3>Example 1: Change Font Size of Title</h3>
The following code shows how to change the font size of the title of the plot:
<b>#create scatterplot with increased font size of title
plot(df$x, df$y, main='Title', sub='Subtitle'.
     cex.main=2)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/fontSize2.png">
<h3>Example 2: Change Font Size of Subtitle</h3>
The following code shows how to change the font size of the subtitle of the plot:
<b>#create scatterplot with increased font size of subtitle
plot(df$x, df$y, main='Title', sub='Subtitle'.
     cex.sub=2)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/fontSize3.png">
<h3>Example 3: Change Font Size of Axis Labels</h3>
The following code shows how to change the font size of the axis labels of the plot:
<b>#create scatterplot with increased font size of axis labels
plot(df$x, df$y, main='Title', sub='Subtitle'.
     cex.lab=2)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/fontSize4.png">
<h3>Example 4: Change Font Size of Axis Text</h3>
The following code shows how to change the font size of the axis text of the plot:
<b>#create scatterplot with increased font size of axis text
plot(df$x, df$y, main='Title', sub='Subtitle'.
     cex.axis=2)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/fontSize5.png">
<h2><span class="orange">How to Change Legend Size in Base R Plot (With Examples)</span></h2>
The easiest way to change the size of a legend in a base R plot is to use the <b>cex</b> argument:
<b>legend('topright', legend=c('A', 'B'), col=1:2, pch=16, cex=1)
</b>
The default value for cex is 1.
The larger the value that you specify for <b>cex</b>, the larger the legend will be.
The following example shows how to use this argument in practice.
<h3>Example: Change Legend Size in Base R Plot</h3>
Suppose we create the following scatter plot in base R:
<b>#create data frame
df &lt;- data.frame(x=c(1, 2, 3, 4, 5, 6), y=c(4, 6, 7, 12, 6, 8), group=c(1, 1, 1, 2, 2, 2))
#create scatter plot
plot(df$x, df$y, col=df$group, pch=16)
#add legend in top right corner
legend('topright', legend=c('First', 'Second'),
       col=1:2, pch=16)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/05/legendsize1.jpg"543">
To <b>increase</b> the legend size, we can increase the value for <b>cex</b> to some value greater than 1:
<b>#create scatter plot
plot(df$x, df$y, col=df$group, pch=16)
#add legend in top right corner with increased size
legend('topright', legend=c('First', 'Second'),
       col=1:2, pch=16, cex=2)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/05/legendsize2.jpg">
Notice how much larger the legend is in this plot compared to the previous plot.
To <b>decrease</b> the legend size, we can decrease the value for <b>cex</b> to some value less than 1:
<b>#create scatter plot
plot(df$x, df$y, col=df$group, pch=16)
#add legend in top right corner with decreased size
legend('topright', legend=c('First', 'Second'),
       col=1:2, pch=16, cex=.75)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/05/legendsize3.jpg">
Also note that you can change the point size in a legend by changing the value for the <b>pt.cex</b> argument.
The default value for this argument is 1, but you can increase the point size in the legend by increasing this value:
<b>#create scatter plot
plot(df$x, df$y, col=df$group, pch=16)
#add legend in top right corner with increased point size
legend('topright', legend=c('First', 'Second'),
       col=1:2, pch=16, pt.cex=2)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/05/legendsize4.jpg"565">
Notice that the legend size is the same, but the red and black points in the legend are twice as large.
<h2><span class="orange">How to Fix in R: plot.new has not been called yet</span></h2>
One error you may encounter when using R is:
<b>Error in plot.xy(xy.coords(x, y), type = type, ...) : 
  plot.new has not been called yet
</b>
This error occurs when you attempt to perform some action that requires a plot to already exist in R, yet a plot does not exist.
The following examples show how to fix this error in practice.
<h3>Example 1: How to Fix Error with lines()</h3>
Suppose we attempt to plot a fitted regression line in R:
<b>#create data
df &lt;- data.frame(x=c(1, 2, 2, 3, 5, 6, 8, 8, 9, 9, 10, 11, 12, 15, 15), y=c(2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 9, 10, 16, 19, 28))
#fit polynomial regression model
model &lt;- lm(y~poly(x, 2), data=df)
#define new sequence of x-values
new_x &lt;- seq(min(df$x), max(df$y))
#attempt to plot fitted regression line
lines(new_x, predict(model, newdata = data.frame(x=new_x))) 
Error in plot.xy(xy.coords(x, y), type = type, ...) : 
  plot.new has not been called yet</b>
We receive an error because we can’t use the <b>lines()</b> function without first creating a plot in R.
To fix this error, we can first create a scatterplot and then use the <b>lines()</b> function:
<b>#create data
df &lt;- data.frame(x=c(1, 2, 2, 3, 5, 6, 8, 8, 9, 9, 10, 11, 12, 15, 15), y=c(2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 9, 10, 16, 19, 28))
#fit polynomial regression model
model &lt;- lm(y~poly(x, 2), data=df)
#define new sequence of x-values
new_x &lt;- seq(min(df$x), max(df$y))
#create scatterplot of x vs. y values
plot(y~x, data=df)
#attempt to plot fitted regression line
lines(new_x, predict(model, newdata = data.frame(x=new_x))) </b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/lines11.png">
Notice that we don’t receive an error because we first used the <b>plot()</b> function before using the <b>lines()</b> function.
<h3>Example 2: How to Fix Error with abline()</h3>
Suppose we attempt to create a scatterplot with a straight horizontal line in R:
<b>#create data
df &lt;- data.frame(x=c(1, 2, 2, 3, 5, 6, 8, 8, 9, 9, 10, 11, 12, 15, 15), y=c(2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 9, 10, 16, 19, 28))
#attempt to add horizontal line at y=10
abline(a=10, b=0, lwd=2)
Error in plot.xy(xy.coords(x, y), type = type, ...) :
  plot.new has not been called yet
</b>
We receive an error because we can’t use the <b>abline()</b> function without first creating a plot in R.
To fix this error, we can first create a scatterplot and then use the <b>abline()</b> function:
<b>#create data
df &lt;- data.frame(x=c(1, 2, 2, 3, 5, 6, 8, 8, 9, 9, 10, 11, 12, 15, 15), y=c(2, 3, 3, 4, 5, 5, 6, 7, 8, 8, 9, 10, 16, 19, 28))
#create scatterplot of x vs. y
plot(y~x, data=df)
#add horizontal line at y=10
abline(a=10, b=0, lwd=2)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/lines12.png">
Notice that we don’t receive an error because we first used the <b>plot()</b> function before using the <b>abline()</b> function.
<b>Related:</b>  How to Use abline() in R to Add Straight Lines to Plots 
<h2><span class="orange">How to Use pmax & pmin in R (With Examples)</span></h2>
You can use the <b>pmax()</b> and <b>pmin()</b> functions in R to find the parallel maximum and minimum values, respectively, across multiple vectors.
These functions uses the following basic syntax:
<b>pmax(vector1, vector2, vector3, ...)
pmin(vector1, vector2, vector3, ...) 
</b>
The following examples show how to use these functions with both vectors and data frames.
<h3>Example 1: Use pmax and pmin with Vectors</h3>
Suppose we have the following three vectors in R:
<b>#define three vectors
vector1 &lt;- c(2, 2, 3, 4, 5, 6, 9)
vector2 &lt;- c(1, 2, 4, 3, 3, 5, 4)
vector3 &lt;- c(0, 4, 3, 12, 5, 8, 8)
</b>
We can use the <b>pmax</b> and <b>pmin</b> functions to find the maximum and minimum values at corresponding elements across all three vectors:
<b>#find max value across vectors
pmax(vector1, vector2, vector3)
[1]  2  4  4 12  5  8  9
#find min value across vectors
pmin(vector1, vector2, vector3)
[1] 0 2 3 3 3 5 4
</b>
Here’s how to interpret the output:
The max value in the first position across all vectors was <b>2</b>. The minimum value in the first position across all vectors was <b>0</b>.
The max value in the second position across all vectors was <b>4</b>. The minimum value in the second position across all vectors was <b>2</b>.
And so on.
<h3>Example 2: Use pmax and pmin with Data Frame Columns</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), steals=c(24, 22, 36, 33, 30), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 41))
#view data frame
df
  team steals assists rebounds
1    A     24      33       30
2    B     22      28       28
3    C     36      31       24
4    D     33      39       24
5    E     30      34       41</b>
We can use the <b>pmax</b> and <b>pmin</b> functions to find the maximum and minimum values at corresponding elements across all three vectors:
<b>#find max value across steals, assists, and rebounds columns
pmax(df$steals, df$assists, df$rebounds)
[1] 33 28 36 39 41
#find minimum value across steals, assists, and rebounds columns
pmin(df$steals, df$assists, df$rebounds)
[1] 24 22 24 24 30
</b>
Here’s how to interpret the output:
The max value in the first row across the steals, assists, and rebounds columns was <b>33</b> and the minimum value was <b>24</b>.
The max value in the second row across the steals, assists, and rebounds columns was <b>28 </b>and the minimum value was <b>22</b>.
And so on.
<b>Note</b>: If you have missing values in any of the vectors, simply use the following syntax to ignore NA’s when calculating the maximum or minimum:
<b>pmax(vector1, vector2, vector3, na.rm=TRUE)
pmin(vector1, vector2, vector3, na.rm=TRUE)
</b>
<h2><span class="orange">How to Predict a Single Value Using a Regression Model in R</span></h2>
To fit a linear regression model in R, we can use the <b>lm()</b> function, which uses the following syntax:
<b>model &lt;- lm(y ~ x1 + x2, data=df)
</b>
We can then use the following syntax to use the model to predict a single value:
<b>predict(model, newdata = new)</b>
The following examples show how to predict a single value using fitted regression models in R.
<h3>Example 1: Predict Using a Simple Linear Regression Model</h3>
The following code shows how to fit a simple linear regression model in R:
<b>#create data
df &lt;- data.frame(x=c(3, 4, 4, 5, 5, 6, 7, 8, 11, 12), y=c(22, 24, 24, 25, 25, 27, 29, 31, 32, 36))
#fit simple linear regression model
model &lt;- lm(y ~ x, data=df)</b>
And we can use the following code to predict the response value for a new observation:
<b>#define new observation
new &lt;- data.frame(x=c(5))
#use the fitted model to predict the value for the new observation
predict(model, newdata = new)
       1 
25.36364 
</b>
The model predicts that this new observation will have a response value of <b>25.36364</b>.
<h3>Example 2: Predict Using a Multiple Linear Regression Model</h3>
The following code shows how to fit a multiple linear regression model in R:
<b>#create data
df &lt;- data.frame(x1=c(3, 4, 4, 5, 5, 6, 7, 8, 11, 12), x2=c(6, 6, 7, 7, 8, 9, 11, 13, 14, 14), y=c(22, 24, 24, 25, 25, 27, 29, 31, 32, 36))
#fit multiple linear regression model
model &lt;- lm(y ~ x1 + x2, data=df)</b>
And we can use the following code to predict the response value for a new observation:
<b>#define new observation
new &lt;- data.frame(x1=c(5),  x2=c(10))
#use the fitted model to predict the value for the new observation
predict(model, newdata = new)
       1 
26.17073 
</b>
The model predicts that this new observation will have a response value of <b>26.17073</b>.
<h3>Potential Errors with Predicting New Values</h3>
The most common error you may run into when attempting to predict a new value is when <b>the dataset you used to fit the regression model does not have the same column names as the new observation you’re attempting to predict</b>.
For example, suppose we fit the following multiple linear regression model in R:
<b>#create data
df &lt;- data.frame(x1=c(3, 4, 4, 5, 5, 6, 7, 8, 11, 12), x2=c(6, 6, 7, 7, 8, 9, 11, 13, 14, 14), y=c(22, 24, 24, 25, 25, 27, 29, 31, 32, 36))
#fit multiple linear regression model
model &lt;- lm(y ~ x1 + x2, data=df)</b>
Then suppose we attempt to use the model to predict the response value for this new observation:
<b>#define new observation
new &lt;- data.frame(x_1=c(5),  x_2=c(10))
#use the fitted model to predict the value for the new observation
predict(model, newdata = new)
Error in eval(predvars, data, env) : object 'x1' not found
</b>
We received an error because the column names for the new observation (x_1, x_2) do not match the column names of the original data frame (x1, x2) we used to fit the regression model.
<h2><span class="orange">How to Print Multiple Variables on the Same Line in R</span></h2>
You can use the <b>cat()</b> function to easily print multiple variables on the same line in R.
This function uses the following basic syntax:
<b>cat(variable1, variable2, variable3, ...)</b>
The following examples show how to use this syntax in different scenarios.
<h3>Example 1: Print Character String & Variable on Same Line</h3>
The following code shows how to use the <b>cat()</b> function to print a character string and several numeric variables on the same line:
<b>#define character string
my_text &lt;- "The answer is"
#define numeric variables
my_value1 &lt;- 5
my_value2 &lt;- 10
#print character string and numeric variables on the same line
cat(my_text, my_value1, "or", my_value2)
The answer is 5 or 10
</b>
Each of the variables are printed on the same line.
<h3>Example 2: Print Multiple Variables on Same Line with No Text</h3>
The following code shows how print several variables from some function on the same line without any text:
<b>#define function
do_stuff &lt;- function(x) {
    x2 &lt;- x * 2
    x3 &lt;- x * 3
    x4 &lt;- x * 4
    cat(x2, x3, x4)
}
#use function
do_stuff(5)
10 15 20
</b>
The function returns all three numeric variables on the same line without any text explaining which variable names correspond to each value.
<h3>
<b>Example 3: Print Multiple Variables on Same Line with Text</b>
</h3>
The following code shows how print several variables from some function on the same line with text:
<b>#define function
do_stuff &lt;- function(x) {
    x2 &lt;- x * 2
    x3 &lt;- x * 3
    x4 &lt;- x * 4
    cat("x2 =", x2, "x3 =", x3, "x4 =", x4)
}
#use function
do_stuff(5)
x2 = 10 x3 = 15 x4 = 20
</b>
The function returns all three numeric variables on the same line with text explaining which variable names correspond to each value.
<h3>Example 4: Print Multiple Variables on New Lines with Text</h3>
The following code shows how to use the <b>\n</b> operator within the <b>cat()</b> function to print several variables from some function on new lines with text:
<b>#define function
do_stuff &lt;- function(x) {
    x2 &lt;- x * 2
    x3 &lt;- x * 3
    x4 &lt;- x * 4
    cat("x2 =", x2, "\nx3 =", x3, "\nx4 =", x4)
}
#use function
do_stuff(5)
x2 = 10 
x3 = 15 
x4 = 20
</b>
The function returns all three variables on different lines with text explaining which variable names correspond to each value.
<h2><span class="orange">How to Print String and Variable on Same Line in R</span></h2>
Often you may want to print a a string and a variable on the same line in R.
Fortunately this is easy to do using the <b>print()</b> and <b>paste0()</b> functions.
The following example shows how to do so.
<h2>Example: Print String and Variable on Same Line in R</h2>
The following code shows how to print a string and a variable on the same line in R:
<b>#define variable
my_variable &lt;- 540.38
#print string and variable on same line
print(paste0("The value of my variable is ", my_variable))
[1] "The value of my variable is 540.38"
</b>
Note that you can use the <b>paste()</b> and <b>paste0()</b> functions in R to concatenate multiple objects into a single string.
The <b>paste()</b> function concatenates strings using<b> a space</b> as the default separator.
The <b>paste0()</b> function concatenates strings using <b>no space</b> as the default separator.
Thus, if we instead used <b>paste()</b> then there would be an extra space in the final string:
<b>#define variable
my_variable &lt;- 540.38
#print string and variable on same line
print(paste("The value of my variable is ", my_variable))
[1] "The value of my variable is  540.38"
</b>
Notice that there is an extra space in the final string.
Also note that we can use similar syntax to print multiple variables on the same line:
<b>#define variables
var1 &lt;- 540.38
var2 &lt;- 122
#print string and multiple variables on same line
print(paste0("The first variable is ", var1, " and the second is ", var2))
[1] "The first variable is 540.38 and the second is 122"
</b>
Notice that the string and both variables are printed on the same line.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Print Tables in R 
 How to Print All Rows of a Tibble in R 
 How to Use sprintf Function in R to Print Formatted Strings 
<h2><span class="orange">How to Use prop.table() Function in R (With Examples)</span></h2>
The <b>prop.table()</b> function in R can be used to calculate the value of each cell in a table as a proportion of all values.
This function uses the following basic syntax:
<b>prop.table(x, margin = NULL)</b>
where:
<b>x</b>: Name of the table
<b>margin</b>: The margin to divide by (1 = row, 2 = column, default is NULL)
The following examples show how to use this function in practice with the following matrix in R:
<b>#create matrix
x &lt;- matrix(1:6, nrow=2)
#view matrix
x
     [,1] [,2] [,3]
[1,]    1    3    5
[2,]    2    4    6
</b>
<h3>Example 1: Use prop.table with margin = NULL</h3>
The following code shows how to use <b>prop.table()</b> without specifying a margin to divide by:
<b>prop.table(x)
           [,1]      [,2]      [,3]
[1,] 0.04761905 0.1428571 0.2380952
[2,] 0.09523810 0.1904762 0.2857143
</b>
The sum of all of the values in the original table is: 1 + 3 + 5 + 2 + 4 + 6 = 21.
The <b>prop.table()</b> function shows each individual value as a proportion of the whole.
For example:
Cell [1, 1] = 1/21 = <b>.0476</b>
Cell [1, 2] = 3/21 = <b>.1428</b>
Cell [1, 3] = 5/21 = <b>.2380</b>
Cell [2, 1] = 2/21 = <b>.0952</b>
Cell [2, 2] = 4/21 = <b>.1904</b>
Cell [3, 2] = 6/21 = <b>.2857</b>
Note that all of the values in the <b>prop.table()</b> output add up to 1.
<h3>Example 2: Use prop.table with margin = 1</h3>
The following code shows how to use <b>prop.table()</b> with <b>margin=1</b>, which divides each individual value by the row sums: 
<b>prop.table(x, margin = 1)
          [,1]      [,2]      [,3]
[1,] 0.1111111 0.3333333 0.5555556
[2,] 0.1666667 0.3333333 0.5000000
</b>
The sum of all of the values in the first row of the original table is: 1 + 3 + 5 = 9.
The sum of all of the values in the second row of the original table is: 2 + 4 + 6 = 12.
Thus, the output shows each individual value as a proportion of the row sum.
For example:
Cell [1, 1] = 1/9 = <b>.1111</b>
Cell [1, 2] = 3/9 = <b>.3333</b>
Cell [1, 3] = 5/9 = <b>.5555</b>
Cell [2, 1] = 2/12 = <b>.1667</b>
Cell [2, 2] = 4/12 = <b>.3333</b>
Cell [3, 2] = 6/12 = <b>.5000</b>
Note that the values in each row of the <b>prop.table()</b> output add up to 1.
<h3>Example 3: Use prop.table with margin = 2</h3>
The following code shows how to use <b>prop.table()</b> with <b>margin=2</b>, which divides each individual value by the column sums: 
<b>prop.table(x, margin = 2)
          [,1]      [,2]      [,3]
[1,] 0.3333333 0.4285714 0.4545455
[2,] 0.6666667 0.5714286 0.5454545
</b>
The sum of the values in the first column of the original table is: 1 + 2 = 3.
The sum of the values in the second column of the original table is: 3 + 4 = 7.
The sum of the values in the third column of the original table is: 5 + 6 = 11.
Thus, the output shows each individual value as a proportion of the column sum.
For example:
Cell [1, 1] = 1/3 = <b>.3333</b>
Cell [2, 1] = 2/3 = <b>.6667</b>
Cell [1, 2] = 3/7 = <b>.4285</b>
Cell [2, 2] = 4/7 = <b>.5714</b>
Cell [1, 3] = 5/11 = <b>.4545</b>
Cell [3, 3] = 6/11 = <b>.5454</b>
Note that the values in each column of the <b>prop.table()</b> output add up to 1.
<h2><span class="orange">How to Calculate Quantiles by Group in R (With Examples)</span></h2>
In statistics, <b>quantiles</b> are values that divide a ranked dataset into equal groups.
To calculate the quantiles grouped by a certain variable in R, we can use the following functions from the  dplyr  package in R:
<b>library(dplyr)
#define quantiles of interest
q = c(.25, .5, .75)
#calculate quantiles by grouping variable
df %>%
  group_by(grouping_variable) %>%
  summarize(quant25 = quantile(numeric_variable, probs = q[1]), 
            quant50 = quantile(numeric_variable, probs = q[2]),
            quant75 = quantile(numeric_variable, probs = q[3]))
</b>
The following examples show how to use this syntax in practice.
<h3>Examples: Quantiles by Group in R</h3>
The following code shows how to calculate the quantiles for the number of wins grouped by team for a dataset in R:
<b>library(dplyr)
#create data
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'A', 'A', 'A', 'A',        'B', 'B', 'B', 'B', 'B', 'B', 'B', 'B',        'C', 'C', 'C', 'C', 'C', 'C', 'C', 'C'), wins=c(2, 4, 4, 5, 7, 9, 13, 13, 15, 15, 14, 13,        11, 9, 9, 8, 8, 16, 19, 21, 24, 20, 19, 18))
#view first six rows of data
head(df)
  team wins
1    A    2
2    A    4
3    A    4
4    A    5
5    A    7
6    A    9
#define quantiles of interest
q = c(.25, .5, .75)
#calculate quantiles by grouping variable
df %>%
  group_by(team) %>%
  summarize(quant25 = quantile(wins, probs = q[1]), 
            quant50 = quantile(wins, probs = q[2]),
            quant75 = quantile(wins, probs = q[3]))
  team  quant25  quant50  quant75           
1 A         4         6     10  
2 B         9        12     14.2
3 C        17.5      19     20.2
</b>
Note that we can also specify any number of quantiles that we’d like:
<b>#define quantiles of interest
q = c(.2, .4, .6, .8)
#calculate quantiles by grouping variable
df %>%
  group_by(team) %>%
  summarize(quant20 = quantile(wins, probs = q[1]), 
            quant40 = quantile(wins, probs = q[2]),
            quant60 = quantile(wins, probs = q[3]),
            quant80 = quantile(wins, probs = q[4]))
  team  quant20 quant40 quant60 quant80
              
1 A         4       4.8     7.4    11.4
2 B         9      10.6    13.2    14.6
3 C        16.8    18.8    19.2    20.6
</b>
We can also choose to calculate just one quantile by group. For example, here’s how to calculate the 90th percentile of the number of wins for each team:
<b>#calculate 90th percentile of wins by team
df %>%
  group_by(team) %>%
  summarize(quant90 = quantile(wins, probs = 0.9))
   team   quant90
     
1  A        13  
2  B        15  
3  C        21.9
</b>
<h2><span class="orange">How to Avoid R Warning: reached getOption(“max.print”)</span></h2>
One warning message you may encounter in R is:
<b>[ reached getOption("max.print") -- omitted 502 rows ]
</b>
This message appears when you attempt to print more than 1000 values at once in RStudio.
By default, RStudio only lets you print 1000 values at once. However, you can easily increase this limit by using one of the following methods:
<b>Method 1: Increase Limit to Specific Value</b>
<b>#increase print limit to 2000 values
options(max.print=2000)</b>
<b>Method 2: Increase Limit to Max Amount Allowed by Machine</b>
<b>#increase print limit to max allowed by your machine
options(max.print = .Machine$integer.max)
</b>
The following example shows how to use these methods in practice.
<h3>Example: Increase Print Limit in R</h3>
Suppose we create a data frame in R with 1,002 rows and 2 columns:
<b>#make this example reproducible
set.seed(0)
#create data frame
df &lt;- data.frame(x=runif(1002), y=runif(1002))
#view head of data frame
head(df)
          x          y
1 0.8966972 0.68486090
2 0.2655087 0.38328339
3 0.3721239 0.95498800
4 0.5728534 0.11835658
5 0.9082078 0.03910006
6 0.2016819 0.50450503
</b>
Then suppose we attempt to print the entire data frame in RStudio:
<b>#attempt to print entire data frame
df
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/printlimit1.jpg"668">
We’re only able to view the first 500 rows (i.e. the first 1,000 values) and we receive the warning that 502 rows were omitted.
However, if we use the <b>max.print</b> function then we can increase the print limit to 2,500 values:
<b>#increase print limit to 2500 values
options(max.print=2500)
#attempt to print entire data frame again
df
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/printlimit2.jpg"615">
This time we’re able to print all 1,002 rows in the data frame and we receive no warning message since we increased the print limit.
If we’d like to take it to the extreme and set the print limit to the max number of values allowed by our machine, we can use the following syntax:
<b>#increase print limit to max allowed by your machine
options(max.print = .Machine$integer.max)</b>
However, only use this option if you absolutely need to be able to view every line in your data frame because this can take a long time to run if the data that you’re working with is extremely large.
<h2><span class="orange">How to Read a CSV from a URL in R (3 Methods)</span></h2>
There are three methods you can use to read a CSV file from a URL in R:
<b>Method 1: Use Base R</b>
<b>data &lt;- read.csv('https://website.com/data.csv')
</b>
<b>Method 2: Use data.table Package</b>
<b>library(data.table)
data &lt;- fread('https://website.com/data.csv')</b>
<b>Method 3: Use readr Package</b>
<b>library(readr)
data &lt;- read_csv('https://website.com/data.csv')</b>
Each method works the same, but the <b>data.table</b> and <b>readr</b> methods tend to be much quicker if you’re reading a large dataset.
The following examples show how to use each method in practice.
<h3>Method 1: Use Base R</h3>
The following code shows how to import a CSV file from a URL using Base R:
<b>#import data from URL
data &lt;- read.csv('https://raw.githubusercontent.com/Statology/Miscellaneous/main/basketball_data.csv')
#view first five rows
head(data)
  player assists points
1      A       6     12
2      B       7     19
3      C      14      7
4      D       4      6
5      E       5     10
#view class of data
class(data)
[1] "data.frame"
</b>
<h3>Method 2: Use data.table</h3>
The following code shows how to import a CSV file from a URL using the  data.table  package:
<b>library(data.table)
#import data from URL
data2 &lt;- fread('https://raw.githubusercontent.com/Statology/Miscellaneous/main/basketball_data.csv')
#view first five rows
head(data2)
   player assists points
1:      A       6     12
2:      B       7     19
3:      C      14      7
4:      D       4      6
5:      E       5     10
#view class of data
class(data2)
[1] "data.table" "data.frame"
</b>
<h3>Method 3: Use readr</h3>
The following code shows how to import a CSV file from a URL using the  readr  package:
<b>library(readr)
#import data from URL
data3 &lt;- fread('https://raw.githubusercontent.com/Statology/Miscellaneous/main/basketball_data.csv')
#view first five rows
head(data3)
  player assists points
        
1 A            6     12
2 B            7     19
3 C           14      7
4 D            4      6
5 E            5     10
#view class of data
class(data3)
[1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame" 
</b>
<h2><span class="orange">How to Use read.table in R (With Examples)</span></h2>
You can use the <b>read.table</b> function to read in a file that contains tabular data into R.
This function uses the following basic syntax:
<b>df &lt;- read.table(file='C:\\Users\\bob\\Desktop\\data.txt', header=FALSE, sep = "")
</b>
By default, the <b>read.table</b> function assumes there is no header row in the file and that the values are separated by white space.
However, you can use the <b>header</b> and <b>sep</b> arguments to tell R that the file has a header row and uses a different delimiter.
For example, you could choose to use a comma as a delimiter:
<b>df &lt;- read.table(file='C:\\Users\\bob\\Desktop\\data.txt', header=TRUE, sep=',')</b>
The following step-by-step example shows how to use the <b>read.table</b> function in practice.
<h3>Step 1: View the File</h3>
Suppose I have a file called <b>data.txt</b> on my Desktop that I’d like to read into R as a data frame:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/12/read_table1.png">
<h3>Step 2: Use read.table() to Read File into Data Frame</h3>
Next, let’s use <b>read.table()</b> to read the file into a data frame called <b>df</b>:
<b>#read file from Desktop into data frame
df &lt;- read.table(file='C:\\Users\\bob\\Desktop\\data.txt', header=TRUE)</b>
Note that I specified <b>header=TRUE</b> since the first row in the file contains column names.
I also didn’t specify the <b>sep</b> argument since the data in the file is already separated by white space.
<h3>Step 3: View the Data Frame</h3>
Next, we can view the data frame to ensure that the file was read correctly:
<b>#view data frame
print(df)
  var1 var2 var3
1    1    7    3
2    2    3    7
3    3    3    8
4    4    4    3
5    5    5    2
6    6    7    7
7    9    9    4
</b>
We can see that the data frame matches the data in the file.
We can also use the <b>class</b> and <b>dim</b> functions to check the class of the data frame and get the dimensions (number of rows and number of columns):
<b>#check class of data frame
class(df)
[1] "data.frame"
#check dimensions of data frame
dim(df)
[1] 7 3
</b>
We can see that <b>df</b> is indeed a data frame and has 7 rows and 3 columns.
<h2><span class="orange">How to Remove Characters from String in R (3 Examples)</span></h2>
You can use the following methods to remove certain characters from a string in R:
<b>Method 1: Remove One Specific Character from String</b>
<b>gsub('character', '', my_string)
</b>
<b>Method 2: Remove Multiple Characters from String</b>
<b>gsub('[character1character2]', '', my_string)</b>
<b>Method 3: Remove All Special Characters from String</b>
<b>gsub('[^[:alnum:] ]', '', my_string)
</b>
The following examples show how to use each method in practice.
<h3>Method 1: Remove One Specific Character from String</h3>
The following code shows how to remove all instances of ‘<b>WW</b>‘ in a certain string:
<b>#define string
my_string &lt;- 'HeyWW My namWWe is Doug'
#replace 'WW' in string
my_string &lt;- gsub('WW', '', my_string)
#view updated string
my_string
[1] "Hey My name is Doug"
</b>
Notice that all instances of ‘<b>WW</b>‘ have been removed from the string.
<h3>Method 2: Remove Multiple Characters from String</h3>
The following code shows how to remove all instances of ‘<b>STRING1</b>‘ and ‘<b>STRING2</b>‘ in a certain string:
<b>#define some string
my_string &lt;- 'HeySTRING1 My nameSTRING2 is DougSTRING2'
#replace WW in string
my_string &lt;- gsub('[STRING1STRING2]', '', my_string)
#view updated string
my_string
[1] "Hey My name is Doug"
</b>
Notice that all instances of ‘<b>STRING1</b>‘ and ‘<b>STRING2</b>‘ have been removed from the string.
<h3>Method 3: Remove All Special Characters from String</h3>
The following code shows how to remove all special characters from a string.
<b>Note</b>: Special characters are any characters that are not numbers or letters.
<b>#define string
my_string &lt;- 'H*ey My nam%e is D!oug'
#replace all special characters in string
my_string &lt;- gsub('[^[:alnum:] ]', '', my_string)
#view updated string
my_string
[1] "Hey My name is Doug"
</b>
Notice that all special characters have been removed from the string.
<h2><span class="orange">How to Remove Duplicate Rows in R so None are Left</span></h2>
You can use the following methods in R to remove duplicate rows from a data frame so that <b>none</b> are left in the resulting data frame:
<b>Method 1: Use Base R</b>
<b>new_df &lt;- df[!(duplicated(df) | duplicated(df, fromLast=TRUE)), ]
</b>
<b>Method 2: Use dplyr</b>
<b>library(dplyr)
new_df &lt;- df %>%
          group_by(across(everything())) %>%
          filter(n()==1)
</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(20, 20, 28, 14, 13, 18, 27, 13))
#view data frame
df
  team points
1    A     20
2    A     20
3    A     28
4    A     14
5    B     13
6    B     18
7    B     27
8    B     13</b>
<h2>Example 1: Use Base R</h2>
The following code shows how to use functions from base R to remove duplicate rows from the data frame so that none are left:
<b>#create new data frame that removes duplicates so none are left
new_df &lt;- df[!(duplicated(df) | duplicated(df, fromLast=TRUE)), ]
#view new data frame
new_df
  team points
3    A     28
4    A     14
6    B     18
7    B     27
</b>
Notice that each of the duplicate rows have been removed from the data frame and none of the duplicates remain.
<h2>Example 2: Use dplyr</h2>
The following code shows how to use functions from the <b>dplyr</b> package in R to remove duplicate rows from the data frame so that none are left:
<b>library(dplyr)
#create new data frame that removes duplicates so none are left
new_df &lt;- df %>%
          group_by(across(everything())) %>%
          filter(n()==1)
#view new data frame
new_df
# A tibble: 4 x 2
# Groups:   team, points [4]
  team  points
    
1 A         28
2 A         14
3 B         18
4 B         27
</b>
Notice that each of the duplicate rows have been removed from the data frame and none of the duplicates remain.
Also notice that this produces the same result as the previous method.
<b>Note</b>: For extremely large data frames, the dplyr method will be faster than the base R method.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common functions in R:
 How to Remove Rows in R Based on Condition 
 How to Remove Rows with NA in One Specific Column in R 
<h2><span class="orange">How to Remove Last Character from String in R (2 Examples)</span></h2>
You can use the following methods to remove the last character from each string in a vector in R:
<b>Method 1: Remove Last Character Using Base R</b>
<b>substr(df$some_column, 1, nchar(df$some_column)-1)
</b>
<b>Method 2: Remove Last Character Using stringr Package</b>
<b>library(stringr) 
str_sub(df$some_column, end = -2)
</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(name=c('Andy', 'Bert', 'Chad', 'Derrick', 'Eric', 'Fred'), sales=c(18, 22, 19, 14, 14, 11))
#view data frame
df
     name sales
1    Andy    18
2    Bert    22
3    Chad    19
4 Derrick    14
5    Eric    14
6    Fred    11</b>
<h2>Example 1: Remove Last Character Using Base R</h2>
The following code shows how to remove the last character from each string in the <b>name </b>column of the data frame:
<b>#remove last character from each string in 'name' column
df$name = substr(df$name, 1, nchar(df$name)-1)
#view updated data frame
df
    name sales
1    And    18
2    Ber    22
3    Cha    19
4 Derric    14
5    Eri    14
6    Fre    11</b>
Notice that the last character from each string in the <b>name</b> column has been removed.
<h2>Example 2: Remove Last Character Using stringr Package</h2>
The following code shows how to remove the last character from each string in the <b>name </b>column of the data frame by using the  str_sub()  function from the <b>stringr</b> package:
<b>library(stringr)
#remove last character from each string in 'name' column
df$name &lt;- str_sub(df$name, end = -2)
#view updated data frame
df
    name sales
1    And    18
2    Ber    22
3    Cha    19
4 Derric    14
5    Eri    14
6    Fre    11</b>
Notice that the last character from each string in the <b>name</b> column has been removed.
Note that this method produces identical results to the previous method.
However, if you’re working with an extremely large data frame then<b> str_sub()</b> is likely to be faster than the <b>substr()</b> function from base R.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Recode Values Using dplyr 
 How to Replace NA with Zero in dplyr 
 How to Filter Rows that Contain a Certain String Using dplyr 
<h2><span class="orange">How to Remove Quotes from Strings in R (3 Methods)</span></h2>
There are three common ways to remove quotes from strings in R:
<b>Method 1: Use print()</b>
<b>print(some_strings, quote=FALSE)
</b>
<b>Method 2: Use noquote()</b>
<b>noquote(some_strings)
</b>
<b>Method 3: Use cat()</b>
<b>cat(some_strings)
</b>
The following examples show how to use each method with the following vector of strings:
<b>#define vector of strings
some_strings &lt;- c("hey", "these", "are", "some", "strings")
#view vector
some_strings
[1] "hey"     "these"   "are"     "some"    "strings"</b>
Notice that the strings are printed with quotes by default.
<h3>Example 1: Remove Quotes from Strings Using print()</h3>
The following code shows how to use the <b>print()</b> function to print the strings with the quotes removed:
<b>#print vector of strings without quotes
print(some_strings, quote=FALSE)
[1] hey     these   are     some    strings
</b>
<h3>Example 2: Remove Quotes from Strings Using noquote()</h3>
The following code shows how to use the <b>noquote()</b> function to print the strings with the quotes removed:
<b>#print vector of strings without quotes
noquote(some_strings)
[1] hey     these   are     some    strings</b>
<h3>Example 3: Remove Quotes from Strings Using cat()</h3>
The following code shows how to use the <b>cat()</b> function to print the strings with the quotes removed:
<b>#print vector of strings without quotes
cat(some_strings)
hey these are some strings</b>
You can also use the <b>\n</b> argument to print each string without quotes on a new line:
<b>#print vector of strings without quotes each on a new line
cat(paste(some_strings, "\n"))
hey 
these 
are 
some 
strings </b>
Notice that each string in the vector is printed on a new line.
<h2><span class="orange">R: Remove Rows from Data Frame Based on Condition</span></h2>
You can use the <b>subset()</b> function to remove rows with certain values in a data frame in R:
<b>#only keep rows where col1 value is less than 10 and col2 value is less than 8
new_df &lt;- subset(df, col1&lt;10 & col2&lt;8) 
</b>
The following examples show how to use this syntax in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(a=c(1, 3, 4, 6, 8, 9), b=c(7, 8, 8, 7, 13, 16), c=c(11, 13, 13, 18, 19, 22), d=c(12, 16, 18, 22, 29, 38))
#view data frame
df
  a  b  c  d
1 1  7 11 12
2 3  8 13 16
3 4  8 13 18
4 6  7 18 22
5 8 13 19 29
6 9 16 22 38
</b>
<h3>Example 1: Remove Rows Equal to Some Value</h3>
The following code shows how to remove all rows where the value in column ‘c’ is equal to 13:
<b>#remove rows where column 'c' is equal to 13
new_df &lt;- subset(df, c != 13) 
#view updated data frame
new_df
  a  b  c  d
1 1  7 11 12
4 6  7 18 22
5 8 13 19 29
6 9 16 22 38
</b>
<h3>Example 2: Remove Rows Equal to One of Several Values</h3>
The following code shows how to remove all rows where the value in column ‘b’ is equal to 7 or 8:
<b>#remove rows where value in column b is equal to 7 or 8
new_df &lt;- subset(df, !(b %in% c(7, 8)))
#view updated data frame
new_df
  a  b  c  d
5 8 13 19 29
6 9 16 22 38</b>
<h3>Example 3: Remove Rows Based on Multiple Conditions</h3>
The following code shows how to remove all rows where the value in column ‘b’ is equal to 7 or where the value in column ‘d’ is equal to 38:
<b>#remove rows where value in column b is 7 or value in column d is 38
new_df &lt;- subset(df, b != 7 & d != 38)
#view updated data frame
new_df
  a  b  c  d
2 3  8 13 16
3 4  8 13 18
5 8 13 19 29</b>
<h2><span class="orange">How to Remove Rows with Any Zeros in R (With Example)</span></h2>
You can use one of the following methods to remove rows with any zeros in a data frame in R:
<b>Method 1: Remove Rows with Any Zeros Using Base R</b>
<b>df_new &lt;- df[apply(df!=0, 1, all),]
</b>
<b>Method 2: Remove Rows with Any Zeros Using dplyr</b>
<b>library(dplyr)
df_new &lt;- filter_if(df, is.numeric, all_vars((.) != 0))
</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(points=c(5, 7, 8, 0, 12, 14, 0, 10, 8), assists=c(0, 2, 2, 4, 4, 3, 7, 6, 10), rebounds=c(8, 8, 7, 3, 6, 5, 0, 12, 11))
#view data frame
df
  points assists rebounds
1      5       0        8
2      7       2        8
3      8       2        7
4      0       4        3
5     12       4        6
6     14       3        5
7      0       7        0
8     10       6       12
9      8      10       11</b>
<h2>Example 1: Remove Rows with Any Zeros Using Base R</h2>
The following code shows how to remove rows with any zeros by using the  apply()  function from base R:
<b>#create new data frame that removes rows with any zeros from original data frame
df_new &lt;- df[apply(df!=0, 1, all),]
#view new data frame
df_new
  points assists rebounds
2      7       2        8
3      8       2        7
5     12       4        6
6     14       3        5
8     10       6       12
9      8      10       11</b>
Notice that the three rows with zero values in them have been removed.
<h2>Example 2: Remove Rows with Any Zeros Using dplyr</h2>
The following code shows how to remove rows with any zeros by using the <b>filter_if()</b> function from the <b>dplyr</b> package in R:
<b>#create new data frame that removes rows with any zeros from original data frame
df_new &lt;- filter_if(df, is.numeric, all_vars((.) != 0))
#view new data frame
df_new
  points assists rebounds
1      7       2        8
2      8       2        7
3     12       4        6
4     14       3        5
5     10       6       12
6      8      10       11</b>
Notice that the three rows with zero values in them have been removed.
This matches the result that we got using base R.
<b>Note</b>: We used the <b>is.numeric</b> function to specify that all numeric variables in the data frame must be non-zero.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Remove Empty Rows from Data Frame in R 
 How to Remove Columns with NA Values in R 
 How to Remove Duplicate Rows in R 
<h2><span class="orange">How to Remove Rows with NA in One Specific Column in R</span></h2>
You can use one of the following three methods to remove rows with NA in one specific column of a data frame in R:
<b>#use is.na() method
df[!is.na(df$col_name),]
#use subset() method
subset(df, !is.na(col_name))
#use tidyr method
library(tidyr)
df %>% drop_na(col_name)
</b>
Note that each of these methods will produce the same results.
The following examples show how to use each of these methods in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(a = c(NA, 14, 19, 22, 26), b = c(14, NA, 9, NA, 5), c = c(45, 56, 54, 57, 59))
#view data frame</b>
<b>df</b>
<b>   a  b  c
1 NA 14 45
2 14 NA 56
3 19  9 54
4 22 NA 57
5 26  5 59
</b>
<h3>Method 1: Remove Rows with NA Using is.na()</h3>
The following code shows how to remove rows from the data frame with NA values in a certain column using the <b>is.na()</b> method:
<b>#remove rows from data frame with NA values in column 'b'
df[!is.na(df$b),]
   a  b  c
1 NA 14 45
3 19  9 54
5 26  5 59
</b>
<h3>Method 2: Remove Rows with NA Using subset()</h3>
The following code shows how to remove rows from the data frame with NA values in a certain column using the <b>subset()</b> method:
<b>#remove rows from data frame with NA values in column 'b'
subset(df, !is.na(b))
   a  b  c
1 NA 14 45
3 19  9 54
5 26  5 59</b>
<h3>Method 3: Remove Rows with NA Using drop_na()</h3>
The following code shows how to remove rows from the data frame with NA values in a certain column using the <b>drop_na()</b> method:
<b>library(tidyr)
#remove rows from data frame with NA values in column 'b'
df %>% drop_na(b)
   a  b  c
1 NA 14 45
3 19  9 54
5 26  5 59</b>
Notice that each of the three methods produced the same result.
<b>Note:</b> You can find the complete online documentation for the drop_na() method  here .
<h2><span class="orange">How to Remove Spaces from Strings in R (3 Examples)</span></h2>
You can use the following methods to remove white spaces from strings in R:
<b>Method 1: Remove All Whitespaces Using gsub()</b>
<b>updated_string &lt;- gsub(" ", "", my_string)
</b>
<b>Method 2: Remove All Whitespaces Using str_replace_all()</b>
<b>library(stringr)
updated_string &lt;- str_replace_all(my_string, " ", "")</b>
<b>Method 3: Remove Leading & Trailing Whitespaces Using str_trim()</b>
<b>library(stringr)
#remove all trailing whitespace
updated_string &lt;- str_trim(my_string, "right")
#remove all leading whitespace
updated_string &lt;- str_trim(my_string, "left")
</b>
The following examples show how to use each method in practice.
<h3>Example 1: Remove All Whitespaces Using gsub()</h3>
The following code shows how to use the <b>gsub()</b> function from base R to remove all whitespaces from a given string:
<b>#create string
my_string &lt;- "Check out this cool string"
#remove all whitespace from string
updated_string &lt;- gsub(" ", "", my_string)
#view updated string
updated_string
[1] "Checkoutthiscoolstring"
</b>
Notice that all whitespaces have been removed from the string.
<h3>Example 2: Remove All Whitespaces Using str_replace_all()</h3>
The following code shows how to use the <b>str_replace_all()</b> function from the  stringr  package in R to remove all whitespaces from a given string:
<b>library(stringr)
#create string
my_string &lt;- "Check out this cool string"
#remove all whitespace from string
updated_string &lt;- str_replace_all(my_string, " ", "")
#view updated string
updated_string
[1] "Checkoutthiscoolstring"</b>
Notice that all whitespaces have been removed from the string.
<h3>Example 3: Remove Leading & Trailing Whitespaces Using str_trim()</h3>
The following code shows how to use the <b>str_trim()</b> function from the  stringr  package in R to remove all leading whitespace from a given string:
<b>library(stringr)
#create string with leading whitespace
my_string &lt;- "    Check out this cool string"
#remove all leading whitespace from string
updated_string &lt;- str_trim(my_string, "left")
#view updated string
updated_string
[1] "Check out this cool string"
</b>
Notice that all of the leading whitespace has been removed.
The following code shows how to use the <b>str_trim()</b> function to remove all trailing whitespace from a given string:
<b>library(stringr)
#create string with trailing whitespace
my_string &lt;- "Check out this cool string    "
#remove all trailing whitespace from string
updated_string &lt;- str_trim(my_string, "right")
#view updated string
updated_string
[1] "Check out this cool string"</b>
Notice that all of the trailing whitespace has been removed.
<h2><span class="orange">How to Write a Repeat Loop in R (3 Examples)</span></h2>
A <b>repeat-loop</b> in R can be used to repeatedly perform some action until a stop condition is reached.
You can use the following basic syntax to write a repeat-loop in R:
<b>repeat{
  #do something
  if(some condition){
  break
  }
}
</b>
The following examples show how to use a repeat-loop in different scenarios.
<h3>Example 1: Print Values Until Specific Number is Reached</h3>
The following code shows how to use a repeat-loop to print values starting at <b>1</b> until <b>10</b> is reached:
<b>#define starting value
x &lt;- 0
#perform repeat-loop
repeat{
  x &lt;- x+1
  print(x)
  if(x >= 10){
  break
  }
}
[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
[1] 8
[1] 9
[1] 10</b>
Here’s how this code worked:
We defined the starting value as x = 0.
We told R to increment x by 1, then print x.
We told R to <b>break</b> the repeat-loop once x had reached a value of 10 or greater. 
<h3>Example 2: Add Values to Vector Until Specific Number is Reached</h3>
The following code shows how to use a repeat-loop to add values to a vector until a specific number is reached:
<b>#define empty vector and starting value
data &lt;- c()
x &lt;- 0
#perform repeat-loop
repeat{
  x &lt;- x+1
  data[x] &lt;- x
  print(data)
  
  if(x >= 5){
  break
  }
}
[1] 1
[1] 1 2
[1] 1 2 3
[1] 1 2 3 4
[1] 1 2 3 4 5
</b>
Here’s how this code worked:
We created an empty vector and defined the starting value as x = 0.
We told R to increment x by 1, then insert the value of x into the x<sup>th</sup> position of the vector.
We told R to <b>break</b> the repeat-loop once x had reached a value of 5 or greater.
<h3>Example 3: Modify Values in Data Frame Until Specific Number is Reached</h3>
The following code shows how to use a repeat-loop to modify the values in an existing data frame until a specific number is reached:
<b>#define data frame and starting value
df &lt;- data.frame(A=c(6, 7, 2, 8), B=c(2, 4, 5, 5))
x &lt;- 0
#perform repeat-loop
repeat{
  x &lt;- x+1
  df$A[x] &lt;- x
  df$B[x] &lt;- x * 2
  if(x >= nrow(df)){
  break
  }
}
#view resulting data frame
df
  A B
1 1 2
2 2 4
3 3 6
4 4 8</b>
Here’s how this code worked:
We created an empty data frame and defined the starting value as x = 0.
We told R to increment x by 1, then insert the value of x into the x<sup>th</sup> position of column A and insert the value of x*2 into the x<sup>th</sup> position of column B.
We told R to <b>break</b> the repeat-loop once x had reached a value equal to or greater than the number of rows in the data frame.
<h2><span class="orange">How to Replace Blanks with NA in R (With Examples)</span></h2>
You can use the following methods to replace blanks with NA values in R:
<b>Method 1: Replace Blanks with NA in One Column</b>
<b>df$my_col[df$my_col==""] &lt;- NA
</b>
<b>Method 2: Replace Blanks with NA in All Columns</b>
<b>library(dplyr)
df &lt;- df %>% mutate_all(na_if,"")
</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c("A", "B", "", "D", "E"), position=c("G", "", "F", "F", ""), points=c(33, 28, 31, 39, 34))
#view data frame
df
  team position points
1    A        G     33
2    B              28
3             F     31
4    D        F     39
5    E              34</b>
<h2>Example 1: Replace Blanks with NA in One Column</h2>
The following code shows how to replace all blank values in the <b>position</b> column with NA values:
<b>#replace all blanks in position column with NA values
df$position[df$position==""] &lt;- NA
#view updated data frame
df
  team position points
1    A        G     33
2    B     &lt;NA>     28
3             F     31
4    D        F     39
5    E     &lt;NA>     34
</b>
Notice that the blank values in the <b>position</b> column have been replaced with NA values, while all other columns have remained unchanged.
<h2>Example 2: Replace Blanks with NA in All Columns</h2>
The following code shows how to replace the blank values in every column with NA values:
<b>library(dplyr)
#replace blanks in every column with NA values 
df &lt;- df %>% mutate_all(na_if,"")
#view updated data frame
df
  team position points
1    A        G     33
2    B     &lt;NA>     28
3 &lt;NA>        F     31
4    D        F     39
5    E     &lt;NA>     34</b>
Notice that the blank values in every column have been replaced with NA values.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 R: How to Replace NAs with Strings 
 R: How to Replace Values in Data Frame Conditionally 
<h2><span class="orange">How to Replace Inf Values with NA in R</span></h2>
You can use the following methods to replace Inf values with NA values in R:
<b>Method 1: Replace Inf with NA in Vector</b>
<b>x[is.infinite(x)] &lt;- NA
</b>
<b>Method 2: Replace Inf with NA in All Columns of Data Frame</b>
<b>df[sapply(df, is.infinite)] &lt;- NA
</b>
<b>Method 3: Replace Inf with NA in Specific Columns of Data Frame</b>
<b>df[c('col1', 'col2')][sapply(df[c('col1', 'col2')], is.infinite)] &lt;- NA
</b>
This tutorial explains how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), position=c('G', 'G', 'F', 'F', 'G', 'G', 'F', 'F'), points=c(10, 10, 8, 14, 15, 15, 17, 17))
#view data frame
df
  team position points
1    A        G     10
2    A        G     10
3    A        F      8
4    A        F     14
5    B        G     15
6    B        G     15
7    B        F     17
8    B        F     17
</b>
<h2>Example 1: Replace Inf with NA in Vector</h2>
The following code shows how to replace all Inf values with NA values in a vector:
<b>#create vector with some Inf values
x &lt;- c(4, 12, Inf, 8, Inf, 9, 12, 3, 22, Inf)
#replace Inf values with NA
x[is.infinite(x)] &lt;- NA
#view updated vector
x
 [1]  4 12 NA  8 NA  9 12  3 22 NA
</b>
Notice that all Inf values from the original vector have been replaced with NA values.
<h2>Example 2: Replace Inf with NA in All Columns of Data Frame</h2>
The following code shows how to replace Inf values with NA values in every column of a data frame:
<b>#create data frame
df &lt;- data.frame(x=c(4, 5, 5, 4, Inf, 8, Inf), y=c(10, Inf, Inf, 3, 5, 5, 8), z=c(Inf, 5, 5, 6, 3, 12, 14))
#view data frame
df
    x   y   z
1   4  10 Inf
2   5 Inf   5
3   5 Inf   5
4   4   3   6
5 Inf   5   3
6   8   5  12
7 Inf   8  14
#replace Inf values with NA values in all columns
df[sapply(df, is.infinite)] &lt;- NA
#view updated data frame
df
   x  y  z
1  4 10 NA
2  5 NA  5
3  5 NA  5
4  4  3  6
5 NA  5  3
6  8  5 12
7 NA  8 14</b>
Notice that the Inf values in each column of the data frame have been replaced with NA values.
<h2>Example 3: Replace Inf with NA in Specific Columns of Data Frame</h2>
The following code shows how to replace Inf values with NA values in specific columns of a data frame:
<b>#create data frame
df &lt;- data.frame(x=c(4, 5, 5, 4, Inf, 8, Inf), y=c(10, Inf, Inf, 3, 5, 5, 8), z=c(Inf, 5, 5, 6, 3, 12, 14))
#view data frame
df
    x   y   z
1   4  10 Inf
2   5 Inf   5
3   5 Inf   5
4   4   3   6
5 Inf   5   3
6   8   5  12
7 Inf   8  14
#replace Inf values with NA values in columns 'x' and 'z' only
df[c('x', 'z')][sapply(df[c('x', 'z')], is.infinite)] &lt;- NA
#view updated data frame
df
   x   y  z
1  4  10 NA
2  5 Inf  5
3  5 Inf  5
4  4   3  6
5 NA   5  3
6  8   5 12
7 NA   8 14</b>
Notice that the Inf values in the ‘x’ and ‘y’ columns have been replaced with NA values.
However, the Inf values in column ‘y’ have remain untouched.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Use is.na in R 
 How to Use na.omit in R 
 How to Replace Blanks with NA in R 
<h2><span class="orange">How to Replace NA with Median in R</span></h2>
You can use the following methods to replace NA values with the median using functions from the <b>dplyr</b> and <b>tidyr</b> packages in R:
<b>Method 1: Replace NA values with Median in One Column</b>
<b>df %>% mutate(across(col1, ~replace_na(., median(., na.rm=TRUE))))
</b>
<b>Method 2: Replace NA values with Median in Several Columns</b>
<b>df %>% mutate(across(c(col1, col2), ~replace_na(., median(., na.rm=TRUE))))</b>
<b>Method 3: Replace NA values with Median in All Numeric Columns</b>
<b>df %>% mutate(across(where(is.numeric), ~replace_na(., median(., na.rm=TRUE))))</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(player=c('A', 'B', 'C', 'D', 'E'), points=c(17, 13, NA, 9, 25), rebounds=c(3, 4, NA, NA, 8), blocks=c(1, 1, 2, 4, NA))
#view data frame
df
  player points rebounds blocks
1      A     17        3      1
2      B     13        4      1
3      C     NA       NA      2
4      D      9       NA      4
5      E     25        8     NA
</b>
<h2>Example 1: Replace NA Values with Median in One Column</h2>
The following code shows how to replace the NA values in the <b>points</b> column with the median value of the <b>points</b> column:
<b>library(dplyr)
library(tidyr)
#replace NA values in points column with median of points column
df &lt;- df %>% mutate(across(points, ~replace_na(., median(., na.rm=TRUE))))
#view updated data frame
df
  player points rebounds blocks
1      A     17        3      1
2      B     13        4      1
3      C     15       NA      2
4      D      9       NA      4
5      E     25        8     NA</b>
The median value in the <b>points</b> column was 15, so the one NA value in the <b>points</b> column was replaced with 15.
All other columns remained unchanged.
<h2>Example 2: Replace NA Values with Median in Several Columns</h2>
The following code shows how to replace the NA values in the <b>points</b>  and <b>blocks</b> columns with their respective column medians:
<b>library(dplyr)
library(tidyr)
#replace NA values in points and blocks columns with their respective medians
df &lt;- df %>% mutate(across(c(points, blocks), ~replace_na(., median(., na.rm=TRUE))))
#view updated data frame
df
  player points rebounds blocks
1      A     17        3    1.0
2      B     13        4    1.0
3      C     15       NA    2.0
4      D      9       NA    4.0
5      E     25        8    1.5</b>
Notice that the NA values in the <b>points</b> and <b>blocks</b> columns have both been replaced with their respective column medians.
<h2>Example 3: Replace NA Values with Median in All Numeric Columns</h2>
The following code shows how to replace the NA values in every numeric columns with their respective median value:
<b>library(dplyr)
library(tidyr)
#replace NA values in all numeric columns with their respective medians
df &lt;- df %>% mutate(across(where(is.numeric), ~replace_na(., median(., na.rm=TRUE))))
#view updated data frame
df
  player points rebounds blocks
1      A     17        3    1.0
2      B     13        4    1.0
3      C     15        4    2.0
4      D      9        4    4.0
5      E     25        8    1.5</b>
Notice that the NA values in all numeric columns have been replaced with their respective column medians.
The one column that was not numeric <b>(player)</b> has remained unchanged.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in dplyr:
 How to Filter Rows that Contain a Certain String Using dplyr 
 How to Remove Rows Using dplyr 
 How to Use the across() Function in dplyr 
<h2><span class="orange">R: How to Replace Values in Data Frame Conditionally</span></h2>
You can use one of the following methods to replace values in a data frame conditionally:
<b>Method 1: Replace Values in Entire Data Frame</b>
<b>#replace all values in data frame equal to 30 with 0
df[df == 30] &lt;- 0
</b>
<b>Method 2: Replace Values in Specific Column</b>
<b>#replace values equal to 30 in 'col1' with 0
df$col1[df$col1 == 30] &lt;- 0
</b>
<b>Method 3: Replace Values in Specific Column Based on Another Column</b>
<b>#replace values in col2 with 0 based on rows in col1 equal to 30
df$col2[df$col1 == 30] &lt;- 0 
</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'B', 'B', 'B'), points=c(99, 90, 90, 88, 88), assists=c(33, 28, 31, 30, 34), rebounds=c(30, 30, 24, 24, 28))
#view data frame
df
  team points assists rebounds
1    A     99      33       30
2    A     90      28       30
3    B     90      31       24
4    B     88      30       24
5    B     88      34       28
</b>
<h3>Method 1: Replace Values in Entire Data Frame</h3>
The following code shows how to replace all values equal to 30 in the data frame with 0:
<b>#replace all values in data frame equal to 30 with 0
df[df == 30] &lt;- 0
#view updated data frame
df
  team points assists rebounds
1    A     99      33        0
2    A     90      28        0
3    B     90      31       24
4    B     88       0       24
5    B     88      34       28
</b>
<h3>Method 2: Replace Values in Specific Column</h3>
The following code shows how to replace all values equal to 90 in the ‘points’ column with 0:
<b>#replace all values equal to 90 in 'points' column with 0
df$points[df$points == 90] &lt;- 0
#view updated data frame
df
  team points assists rebounds
1    A     99      33       30
2    A      0      28       30
3    B      0      31       24
4    B     88      30       24
5    B     88      34       28
</b>
<h3>Method 3: Replace Values in Specific Column Based on Another Column</h3>
The following code shows how to replace the values in the ‘points’ column with 0 where the value in the ‘team’ column is equal to ‘B.’
<b>#replace all values equal to 90 in 'points' column with 0
df$points[df$team == 'B'] &lt;- 0
#view updated data frame
df
  team points assists rebounds
1    A     99      33       30
2    A     90      28       30
3    B      0      31       24
4    B      0      30       24
5    B      0      34       28</b>
<h2><span class="orange">How to Replace Values in a Matrix in R (With Examples)</span></h2>
You can use the following methods to replace specific values in a matrix in R:
<b>Method 1: Replace Elements Equal to Specific Value</b>
<b>#replace 5 with 100
my_matrix[my_matrix==5] &lt;- 100
</b>
<b>Method 2: Replace Elements Based on One Condition</b>
<b>#replace elements with value less than 15 with 0
my_matrix[my_matrix&lt;15] &lt;- 0</b>
<b>Method 3: Replace Elements Based on Multiple Conditions</b>
<b>#replace elements with value between 10 and 15 with 99
my_matrix[my_matrix>=10 & my_matrix&lt;=15] &lt;- 99
</b>
The following examples show how to use each method in practice with the following matrix in R:
<b>#create matrix
my_matrix &lt;- matrix(1:20, nrow = 5)
#display matrix
my_matrix
     [,1] [,2] [,3] [,4]
[1,]    1    6   11   16
[2,]    2    7   12   17
[3,]    3    8   13   18
[4,]    4    9   14   19
[5,]    5   10   15   20
</b>
<h2>Example 1: Replace Elements Equal to Specific Value</h2>
The following code shows how to replace all elements equal to the value <b>5</b> with the value <b>100</b>:
<b>#replace 5 with 100
my_matrix[my_matrix==5] &lt;- 100
#view updated matrix
my_matrix
     [,1] [,2] [,3] [,4]
[1,]    1    6   11   16
[2,]    2    7   12   17
[3,]    3    8   13   18
[4,]    4    9   14   19
[5,]  100   10   15   20</b>
Notice that the one element equal to the value <b>5</b> has been replaced with a value of <b>100</b>.
All other elements remained unchanged in the matrix.
<h2>Example 2: Replace Elements Based on One Condition</h2>
The following code shows how to replace all elements that have a value less than <b>15</b> with the value <b>0</b>:
<b>#replace elements with value less than 15 with 100
my_matrix[my_matrix&lt;15] &lt;- 0
#view updated matrix
my_matrix
     [,1] [,2] [,3] [,4]
[1,]    0    0    0   16
[2,]    0    0    0   17
[3,]    0    0    0   18
[4,]    0    0    0   19
[5,]    0    0   15   20</b>
Notice that each of the elements that have a value less than <b>15</b> have been replaced with a value of <b>0</b>.
<h2>Example 3: Replace Elements Based on Multiple Conditions</h2>
The following code shows how to replace all elements that have a value between <b>10</b> and <b>15</b> with a value of <b>99</b>:
<b>#replace elements with value between 10 and 15 with 99
my_matrix[my_matrix>=10 & my_matrix&lt;=15] &lt;- 99
#view updated matrix
my_matrix
     [,1] [,2] [,3] [,4]
[1,]    1    6   99   16
[2,]    2    7   99   17
[3,]    3    8   99   18
[4,]    4    9   99   19
[5,]    5   99   99   20
</b>
Notice that each of the elements that have a value between <b>10</b> and <b>15</b> have been replaced with a value of <b>99</b>.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Sort a Matrix in R 
 How to Remove NA from Matrix in R 
 How to Convert Data Frame to Matrix in R 
 How to Convert a Table to a Matrix in R 
<h2><span class="orange">How to Fix in R: replacement has length zero</span></h2>
One error you may encounter in R is:
<b>Error in x[1] = x[0] : replacement has length zero
</b>
This error occurs when you attempt to replace a value in a vector with another value that “has length zero” – which means it does not exist.
This tutorial shares exactly how to fix this error.
<h3>How to Reproduce the Error</h3>
Suppose we create the following vector with 10 values in R:
<b>data = c(1, 4, 5, 5, 7, 9, 12, 14, 15, 17)
</b>
Now suppose we attempt to use the following <b>for()</b> loop to multiply each value in the vector by the value that comes before it:
<b>for (i in 1:length(data)) {
  data[i] = data[i] * data[i-1]
}
Error in data[i] &lt;- data[i] * data[i - 1] : replacement has length zero
</b>
We receive the error “<b>replacement has length zero</b>” because during the first loop we attempt to perform the following multiplication:
data[1] * data[0]
Since R indexes start at 1, the value <b>data[0]</b> simply does not exist.
We can verify this by attempting to print the value located at position 0 in the vector:
<b>print(data[0])
numeric(0)
</b>
The result is a numeric vector of length 0 – in other words, it doesn’t exist.
<h3>How to Fix the Error</h3>
The way to fix this error is to simply use a <b>for()</b> loop that doesn’t attempt to access a value in the vector that doesn’t exist.
In our example, we could fix this error by starting the for loop at index position 2 as opposed to position 1:
<b>for (i in 2:length(data)) {
  data[i] = data[i] * data[i-1]
}
#view updated vector
data
 [1]         1         4        20       100       700      6300     75600
 [8]   1058400  15876000 269892000
</b>
Notice that we don’t receive an error because we never attempted to access an index position in the vector that doesn’t exist.
<h2><span class="orange">The Difference Between require() and library() in R</span></h2>
The <b>require()</b> and <b>library()</b> functions can both be used to load packages in R, but they have one subtle difference:
<b>require()</b> will output a warning if a package is not installed and then continue to execute the code.
<b>library()</b> will output an error and stop the execution of the code.
Because of this difference, <b>require()</b> is usually only used if you are loading packages inside a function so that the function will continue to execute even if a package doesn’t exist.
In practice, most programmers recommend using <b>library()</b> since you’ll want to receive an error message that lets you know a package is not installed.
This is something you want to be aware of as early on as possible when writing code.
The following example illustrates the difference between the <b>require()</b> and <b>library()</b> functions in practice.
<h2>Example: The Difference Between require() and library() in R</h2>
Suppose we would like to load the <b>BostonHousing</b> dataset from the <b>mlbench</b> package, but assume that we don’t have the <b>mlbench</b> package already installed.
The following code shows how to use the <b>library()</b> function to attempt to load this package and perform some data analysis on the <b>BostonHousing</b> dataset:
<b>#attempt to load mlbench library
library(mlbench)
Error in library(mlbench) : there is no package called ‘mlbench’
#load Boston Housing dataset
data(BostonHousing)
#view summary of Boston Housing dataset
summary(BostonHousing)
#view total number of rows in Boston Housing dataset
nrow(BostonHousing)
</b>
Since the <b>mlbench</b> package is not already installed, we receive an error when we use the <b>library()</b> function and the rest of the code is not even executed.
This is helpful since it immediately makes us aware that this package is not installed and that we should install it before proceeding.
However, suppose we instead used <b>require()</b> to load the <b>mlbench</b> package:
<b>#attempt to load mlbench library
require(mlbench)
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE, :
  there is no package called ‘mlbench’
#load Boston Housing dataset
data(BostonHousing)
Warning message:
In data(BostonHousing) : data set ‘BostonHousing’ not found
#view summary of Boston Housing dataset
summary(BostonHousing)
Error in summary(BostonHousing) : object 'BostonHousing' not found
#view total number of rows in Boston Housing dataset
nrow(BostonHousing)
</b>
In this example, we don’t receive an error message until we try to use the <b>summary()</b> function to summarize the <b>BostonHousing</b> dataset.
Instead, we receive a warning after using the <b>require()</b> function and the rest of the code continues to run until we encounter an error.
This example illustrates the difference between<b> library()</b> and <b>require()</b> in R: The <b>library()</b> function produces an error immediately and doesn’t execute the rest of the code since <b>mlbench</b> is not loaded.
This is why, in most scenarios, you’ll want to use the <b>library()</b> function when loading packages.
<h2>Bonus: Check if Particular Package is Installed</h2>
We can use the <b>system.file()</b> function to check if a particular package is installed in our current R environment.
For example, we can use the following syntax to check if the <b>ggplot2</b> package is installed in the current R environment:
<b>#check if ggplot2 is installed
system.file(package='ggplot2')
[1] "C:/Users/bob/Documents/R/win-library/4.0/ggplot2"</b>
Since ggplot2 is installed, the function simply returns the file path where the package is installed.
Now suppose we check if the <b>mlbench</b> package is installed:
<b>#check if mlbench is installed
system.file(package='mlbench')
[1] ""
</b>
The function returns an empty string, which tells us that the <b>mlbench</b> package is not installed in our current environment.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Load Multiple Packages in R 
 How to Clear the Environment in R 
 How to Clear All Plots in RStudio 
<h2><span class="orange">How to Reshape Data Between Wide and Long Format in R</span></h2>
A data frame in R can be displayed in a  wide or long format .
Depending on your goal, you may want the data frame to be in one of these specific formats.
The easiest way to reshape data between these formats is to use the following two functions from the  tidyr  package in R:
<b>pivot_longer()</b>: Reshapes a data frame from wide to long format.
<b>pivot_wider()</b>: Reshapes a data frame from long to wide format.
The following examples show how to use each function in practice.
<h3>Example 1: Reshape Data from Wide to Long</h3>
Suppose we have the following data frame in R that is currently in a wide format:
<b>#create data frame
df &lt;- data.frame(player=c('A', 'B', 'C', 'D'), year1=c(12, 15, 19, 19), year2=c(22, 29, 18, 12))
#view data frame
df
  player year1 year2
1      A    12    22
2      B    15    29
3      C    19    18
4      D    19    12</b>
We can use the<b> pivot_longer()</b> function to pivot this data frame into a long format:
<b>library(tidyr)
#pivot the data frame into a long format
df %>% pivot_longer(cols=c('year1', 'year2'),    names_to='year',    values_to='points')
# A tibble: 8 x 3
  player year  points
      
1 A      year1     12
2 A      year2     22
3 B      year1     15
4 B      year2     29
5 C      year1     19
6 C      year2     18
7 D      year1     19
8 D      year2     12
</b>
Notice that the column names <b>year1</b> and <b>year2</b> are now used as values in a new column called “year” and the values from these original columns are placed into one new column called “points.”
The final result is a long data frame.
<b>Note</b>: You can find the complete documentation for the <b>pivot_longer()</b> function  here .
<h3>Example 2: Reshape Data from Long to Wide</h3>
Suppose we have the following data frame in R that is currently in a long format:
<b>#create data frame
df &lt;- data.frame(player=rep(c('A', 'B'), each=4), year=rep(c(1, 1, 2, 2), times=2), stat=rep(c('points', 'assists'), times=4), amount=c(14, 6, 18, 7, 22, 9, 38, 4))
#view data frame
df
  player year    stat amount
1      A    1  points     14
2      A    1 assists      6
3      A    2  points     18
4      A    2 assists      7
5      B    1  points     22
6      B    1 assists      9
7      B    2  points     38
8      B    2 assists      4</b>
We can use the<b> pivot_wider()</b> function to pivot this data frame into a wide format:
<b>library(tidyr)
#pivot the data frame into a wide format
df %>% pivot_wider(names_from = stat, values_from = amount)
# A tibble: 4 x 4
  player  year points assists
         
1 A          1     14       6
2 A          2     18       7
3 B          1     22       9
4 B          2     38       4
</b>
Notice that the values from the <b>stat</b> column are now used as column names and the values from the <b>amount</b> column are used as cell values in these new columns.
The final result is a wide data frame.
<b>Note</b>: You can find the complete documentation for the <b>pivot_wider()</b> function  here .
<h2><span class="orange">How to Save Multiple Plots to PDF in R</span></h2>
You can use the following basic syntax to save multiple plots to a PDF in R:
<b>#specify path to save PDF to
destination = 'C:\\Users\\Bob\\Documents\\my_plots.pdf'
#open PDF
pdf(file=destination)
#specify to save plots in 2x2 grid
par(mfrow = c(2,2))
#save plots to PDF
for (i in 1:4) {   
  x=rnorm(i)  
  y=rnorm(i)  
  plot(x, y)   
}
#turn off PDF plotting
dev.off() 
</b>
The following examples show how to use this syntax in practice.
<h3>Example 1: Save Multiple Plots to Same Page in PDF</h3>
The following code shows how to save several plots to the same page in a PDF:
<b>#specify path to save PDF to
destination = 'C:\\Users\\Bob\\Documents\\my_plots.pdf'
#open PDF
pdf(file=destination)
#specify to save plots in 2x2 grid
par(mfrow = c(2,2))
#save plots to PDF
for (i in 1:4) {   
  x=rnorm(i)  
  y=rnorm(i)  
  plot(x, y)   
}
#turn off PDF plotting
dev.off() </b>
Once I navigate to the PDF in the specified location on my computer, I find the following one-page PDF with four plots on it:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/07/pdfsave1.png">
<h3>Example 2: Save Multiple Plots to Different Pages in PDF</h3>
To save multiple plots to different pages in a PDF, I can simply remove the <b>par()</b> function:
<b>#specify path to save PDF to
destination = 'C:\\Users\\Bob\\Documents\\my_plots.pdf'
#open PDF
pdf(file=destination)
#save plots to PDF
for (i in 1:4) {   
  x=rnorm(i)  
  y=rnorm(i)  
  plot(x, y)   
}
#turn off PDF plotting
dev.off() </b>
Once I navigate to the PDF in the specified location on my computer, I find the a four-page PDF with one plot on each page.
<h2><span class="orange">How to Scale Only Numeric Columns in R (With Example)</span></h2>
You can use the following syntax from the  dplyr  package to scale only the numeric columns in a data frame in R:
<b>library(dplyr)
df %>% mutate(across(where(is.numeric), scale))
</b>
The following example shows how to use this function in practice.
<h2>Example: Scale Only Numeric Columns Using dplyr</h2>
Suppose we have the following data frame in R that contains information about various basketball players:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(22, 34, 30, 12, 18), assists=c(7, 9, 9, 12, 14), rebounds=c(5, 10, 10, 8, 8))
#view data frame
df
  team points assists rebounds
1    A     22       7        5
2    B     34       9       10
3    C     30       9       10
4    D     12      12        8
5    E     18      14        8
</b>
Suppose we would like to use the  scale  function in R to scale only the numeric columns in the data frame.
We can use the following syntax to do so:
<b>library(dplyr)
#scale only the numeric columns in the data frame
df %>% mutate(across(where(is.numeric), scale))
  team     points   assists    rebounds
1    A -0.1348400 -1.153200 -1.56144012
2    B  1.2135598 -0.432450  0.87831007
3    C  0.7640932 -0.432450  0.87831007
4    D -1.2585064  0.648675 -0.09759001
5    E -0.5843065  1.369425 -0.09759001
</b>
Notice that the values in the three numeric columns (<b>points</b>, <b>assists</b>, and <b>rebounds</b>) have been scaled while the <b>team</b> column has remain unchanged.
<h2>Technical Notes</h2>
The <b>scale()</b> function in R uses the following basic syntax:
<b>scale(x, center = TRUE, scale = TRUE)
</b>
where:
<b>x</b>: Name of the object to scale
<b>center</b>: Whether to subtract the mean when scaling. Default is TRUE.
<b>scale</b>: Whether to divide by the standard deviation when scaling. Default is TRUE.
This function uses the following formula to calculate scaled values:
<b>x<sub>scaled</sub> = (x<sub>original</sub> – x<U+0304>) / s</b>
where:
<b>x<sub>original</sub></b>: The original x-value
<b>x<U+0304></b>: The sample mean
<b>s</b>: The sample standard deviation
This is also known as <em>standardizing</em> data, which simply converts each original value into a  z-score .
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks using dplyr:
 How to Select Columns by Name Using dplyr 
 How to Select Columns by Index Using dplyr 
 How to Use select_if with Multiple Conditions in dplyr 
<h2><span class="orange">How to Create a Scatterplot in R with Multiple Variables</span></h2>
You can use the following basic syntax to create a scatterplot with multiple variables in R:
<b>#create scatterplot of x1 vs. y1
plot(x1, y1, col='red')
#add scatterplot of x2 vs. y2
points(x2, y2, col='blue')
#add legend
legend(1, 25, legend=c('Data 1', 'Data 2'), pch=c(19, 19), col=c('red', 'blue'))</b>
The following examples show how to use this syntax in practice.
<h3>Example 1: Create Scatterplot with Two Variables</h3>
The following code shows how to create a scatterplot with two different variables:
<b>#define datasets
x1 = c(1, 3, 6, 11, 19, 20)
y1 = c(7, 10, 11, 12, 18, 25)
x2 = c(1, 3, 8, 13, 17, 19)
y2 = c(9, 15, 18, 21, 22, 22)
#create scatterplot of x1 vs. y1
plot(x1, y1, col='red', pch=19)
#add scatterplot of x2 vs. y2
points(x2, y2, col='blue', pch=19)
#add legend
legend(1, 25, legend=c('Data 1', 'Data 2'), pch=c(19, 19), col=c('red', 'blue'))</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/07/scatterTwo1.png">
<h3>Example 2: Customize the Scatterplot</h3>
The following code shows how to customize the axes labels, title, and size of the points in the plot:
<b>#define datasets
x1 = c(1, 3, 6, 11, 19, 20)
y1 = c(7, 10, 11, 12, 18, 25)
x2 = c(1, 3, 8, 13, 17, 19)
y2 = c(9, 15, 18, 21, 22, 22)
#create scatterplot of x1 vs. y1
plot(x1, y1, col='red', pch=19, cex=1.3,
     xlab='X', ylab='Y', main='Scatterplot of Two Variables')
#overlay scatterplot of x2 vs. y2
points(x2, y2, col='blue', pch=19, cex=1.3)
#add legend
legend(1, 25, legend=c('Data 1', 'Data 2'), pch=c(19, 19), col=c('red', 'blue'))
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/07/scatterTwo2.png">
Note that the <b>pch</b> argument specifies the shape of the points in the plot. A pch value of 19 specifies a filled-in circle.
You can find a complete list of pch values and their corresponding shapes  here .
<h2><span class="orange">How to Select All But One Column in R (With Examples)</span></h2>
You can use the following methods to select all but one column in a data frame in R:
<b>Method 1: Select All But One Column by Position</b>
<b>#select all but the third column
df[, -3]
</b>
<b>Method 2: Select All But One Column by Name</b>
<b>#select all but column named 'this_column'
df[, colnames(df)[colnames(df) != 'this_column']] 
</b>
The following examples show how to use each method in practice with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28))
#view data frame
df
  team points assists rebounds
1    A     99      33       30
2    B     90      28       28
3    C     86      31       24
4    D     88      39       24
5    E     95      34       28
</b>
<h2>Example 1: Select All But One Column by Position</h2>
The following code shows how to select all but the column in the third position of the data frame:
<b>#select all but the third column
df[, -3]
  team points rebounds
1    A     99       30
2    B     90       28
3    C     86       24
4    D     88       24
5    E     95       28</b>
Notice that all of the columns except the one in the third position of the data frame have been selected.
<h2>Example 2: Select All But One Column by Name</h2>
The following code shows how to select all but the column with the name ‘assists’ in the data frame:
<b>#select all columns except the column with the name 'assists'
df[, colnames(df)[colnames(df) != 'assists']]
  team points rebounds
1    A     99       30
2    B     90       28
3    C     86       24
4    D     88       24
5    E     95       28</b>
Notice that all of the columns except the one with the name ‘assists’ have been selected.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Add Column to Data Frame Based on Other Columns in R 
 How to Sort by Multiple Columns in R 
 How to Reorder Columns in R 
<h2><span class="orange">How to Select Columns by Index in R (With Examples)</span></h2>
You can use the following basic syntax to select columns by index in R:
<b>#select specific columns by index
df[ , c(1, 4)]
#select specific columns in index range
df[ , 1:3]
#exclude specific columns by index
df[ , -c(2, 5)]
</b>
The following examples show how to use this syntax in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28), blocks=c(7, 7, 5, 9, 13))
#view data frame
df
  team points assists rebounds blocks
1    A     99      33       30      7
2    B     90      28       28      7
3    C     86      31       24      5
4    D     88      39       24      9
5    E     95      34       28     13
</b>
<h3>Example 1: Select Columns by Index</h3>
The following code shows how to select specific columns by index:
<b>#select columns in 1st and 4th position
df[ , c(1, 4)]
  team rebounds
1    A       30
2    B       28
3    C       24
4    D       24
5    E       28
</b>
<h3>Example 2: Select Columns in Index Range</h3>
The following code shows how to select specific columns in an index range:
<b>#select columns in positions 1 through 3
df[ , 1:3]
  team points assists
1    A     99      33
2    B     90      28
3    C     86      31
4    D     88      39
5    E     95      34</b>
<h3>Example 3: Exclude Columns by Index</h3>
The following code shows how to exclude specific columns by index:
<b>#select all columns except columns in positions 2 and 5
df[ , -c(2, 5)]
  team assists rebounds
1    A      33       30
2    B      28       28
3    C      31       24
4    D      39       24
5    E      34       28
</b>
Notice that this returns all of the columns in the data frame except for the columns in index positions 2 and 5.
<h2><span class="orange">How to Select Columns Containing a Specific String in R</span></h2>
You can use the following functions from the  dplyr  package in R to select columns that contain a specific string:
<b>Method 1: Select Columns that Contain One Specific String</b>
<b>df %>%
  select(matches("string1"))
</b>
<b>Method 2: Select Columns that Contain One of Several Strings</b>
<b>df %>%
  select(matches("string1|string2|string3"))</b>
The following examples show how to use each of these methods in practice with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(mavs=c(12, 10, 14, 19, 22, 25, 29), cavs=c(22, 41, 14, 15, 15, 19, 22), hornets=c(8, 8, 12, 14, 15, 13, 12), spurs=c(10, 12, 12, 16, 22, 28, 30), nets=c(9, 7, 10, 22, 28, 23, 25))
#view data frame
df
  mavs cavs hornets spurs nets
1   12   22       8    10    9
2   10   41       8    12    7
3   14   14      12    12   10
4   19   15      14    16   22
5   22   15      15    22   28
6   25   19      13    28   23
7   29   22      12    30   25</b>
<h2>Example 1: Select Columns that Contain One Specific String</h2>
The following code shows how to use the <b>matches()</b> function to select only the columns that contain the string “avs” somewhere in their name:
<b>library(dplyr)
#select all columns that contain "avs" in the name
df %>%
  select(matches("avs"))
  mavs cavs
1   12   22
2   10   41
3   14   14
4   19   15
5   22   15
6   25   19
7   29   22</b>
Only the columns that contain “avs” in the name are returned.
In this case, “mavs” and “cavs” are the only columns that are returned.
<h2>Example 2: Select Columns that Contain One of Several Strings</h2>
The following code shows how to use the <b>matches()</b> function to select only the columns that contain “avs” or “ets” somewhere in their name:
<b>library(dplyr)
#select all columns that contain "avs" or "ets" in the name
df %>%
  select(matches("avs|ets"))
  mavs cavs hornets nets
1   12   22       8    9
2   10   41       8    7
3   14   14      12   10
4   19   15      14   22
5   22   15      15   28
6   25   19      13   23
7   29   22      12   25</b>
Only the columns that contain “avs” or “ets” in the name are returned.
Note that the vertical bar ( <b>|</b> ) is the “<b>OR</b>” operator in R.
Feel free to chain together as many of these “OR” operators as you’d like to select columns that contain one of several different strings.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks using dplyr:
 How to Select Columns by Name Using dplyr 
 How to Select Columns by Index Using dplyr 
 How to Use select_if with Multiple Conditions in dplyr 
<h2><span class="orange">How to Select Rows by Condition in R (With Examples)</span></h2>
You can use one of the following methods to select rows by condition in R:
<b>Method 1: Select Rows Based on One Condition</b>
<b>df[df$var1 == 'value', ]
</b>
<b>Method 2: Select Rows Based on Multiple Conditions</b>
<b>df[df$var1 == 'value1' & df$var2 > value2, ]</b>
<b>Method 3: Select Rows Based on Value in List</b>
<b>df[df$var1 %in% c('value1', 'value2', 'value3'), ]</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(points=c(1, 2, 4, 3, 4, 8), assists=c(6, 6, 7, 8, 8, 9), team=c('A', 'A', 'A', 'B', 'C', 'C'))
#view data frame
df
  points assists team
1      1       6    A
2      2       6    A
3      4       7    A
4      3       8    B
5      4       8    C
6      8       9    C
</b>
<h3>Method 1: Select Rows Based on One Condition</h3>
The following code shows how to select rows based on one condition in R:
<b>#select rows where team is equal to 'A'
df[df$team == 'A', ]
  points assists team
1      1       6    A
2      2       6    A
3      4       7    A
</b>
Notice that only the rows where the team is equal to ‘A’ are selected.
We can also use <b>!=</b> to select rows that are not equal to some value:
<b>#select rows where team is not equal to 'A'
df[df$team != 'A', ]
  points assists team
4      3       8    B
5      4       8    C
6      8       9    C</b>
<h3>Method 2: Select Rows Based on Multiple Conditions</h3>
The following code shows how to select rows based on multiple conditions in R:
<b>#select rows where team is equal to 'A' and points is greater than 1
df[df$team == 'A' & df$points > 1, ]
  points assists team
2      2       6    A
3      4       7    A</b>
Notice that only the rows where the team is equal to ‘A’ <em>and</em> where points is greater than 1 are selected.
<h3>Method 3: Select Rows Based on Value in List</h3>
The following code shows how to select rows where the value in a certain column belongs to a list of values:
<b>#select rows where team is equal to 'A' or 'C'
df[df$team %in% c('A', 'C'), ]
</b>
Notice that only the rows where the team is equal to ‘A’ or ‘C’ are selected.
<h2><span class="orange">How to Select Rows by Index in R (With Examples)</span></h2>
You can use the following methods to select rows from a data frame by index in R:
<b>Method 1: Select One Row by Index</b>
<b>#select third row
df[3,]
</b>
<b>Method 2: Select Multiple Rows by Index</b>
<b>#select third, fourth, and sixth rows
df[c(3, 4, 6),]
</b>
<b>Method 3: Select Range of Rows by Index</b>
<b>#select rows 2 through 5
df[2:5,]
</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'B', 'B', 'B'), points=c(19, 14, 14, 29, 25, 30), assists=c(4, 5, 5, 4, 12, 10), rebounds=c(9, 7, 7, 6, 10, 11))
#view data frame
df
  team points assists rebounds
1    A     19       4        9
2    A     14       5        7
3    A     14       5        7
4    B     29       4        6
5    B     25      12       10
6    B     30      10       11</b>
<h2>Example 1: Select One Row by Index</h2>
The following code shows how to select only the third row in the data frame:
<b>#select third row
df[3, ]
  team points assists rebounds
3    A     14       5        7
</b>
Only the values from the third row are returned.
<h2>Example 2: Select Multiple Rows by Index</h2>
The following code shows how to select multiple rows by index in the data frame:
<b>#select third, fourth, and sixth rows
df[c(3, 4, 6), ]
  team points assists rebounds
3    A     14       5        7
4    B     29       4        6
6    B     30      10       11
</b>
Only the values from the third, fourth, and sixth rows are returned.
<h2>Example 3: Select Range of Rows by Index</h2>
The following code shows how to select rows 2 through 5 in the data frame:
<b>#select rows 2 through 5
df[2:5, ]
  team points assists rebounds
2    A     14       5        7
3    A     14       5        7
4    B     29       4        6
5    B     25      12       10
</b>
All values for rows 2 through 5 are returned.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Append Rows to a Data Frame in R 
 How to Remove Duplicate Rows in R 
 How to Sum Specific Rows in R 
<h2><span class="orange">R: How to Select Rows in Data Frame Based on Values in Vector</span></h2>
You can use one of the following methods to select rows from a data frame in R based on values in a vector:
<b>Method 1: Use Base R</b>
<b>new_df &lt;- df[df$column_name %in% values_vector, ]
</b>
<b>Method 2: Use dplyr Package</b>
<b>library(dplyr)
new_df &lt;- df %>% filter(column_name %in% values_vector)
</b>
The following examples show how to use each method in practice with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(division=c('West', 'West', 'East', 'East', 'North'), points=c(120, 100, 104, 98, 105), assists=c(30, 35, 64, 28, 23))
#view data frame
df
  division points assists
1     West    120      30
2     West    100      35
3     East    104      64
4     East     98      28
5    North    105      23
</b>
<h3>Example 1: Use Base R to Select Rows Based on Values in Vector</h3>
We can use the following code to select only the rows from the original data frame where the value in the <b>division</b> column is equal to ‘West’ or ‘North.’
<b>#define values of interest
my_values &lt;- c('West', 'North')
#select rows that contain 'West' or 'North' in division column
new_df &lt;- df[df$division %in% my_values, ]
#view results
new_df
  division points assists
1     West    120      30
2     West    100      35
5    North    105      23
</b>
The new data frame only contains the rows where the value in the <b>division</b> column is equal to ‘West’ or ‘North.’
<h3>Example 2: Use dplyr to Select Rows Based on Values in Vector</h3>
We can also use the <b>filter()</b> function from the  dplyr  package in R select only the rows from the original data frame where the value in the <b>division</b> column is equal to ‘West’ or ‘North.’
<b>library(dplyr)
#define values of interest
my_values &lt;- c('West', 'North')
#select rows that contain 'West' or 'North' in division column
new_df &lt;- df %>% filter(division %in% my_values)
#view results
new_df
  division points assists
1     West    120      30
2     West    100      35
3    North    105      23
</b>
The new data frame only contains the rows where the value in the <b>division</b> column is equal to ‘West’ or ‘North.’
<b>Note</b>: The base R and dplyr methods produce the same results. However, the dplyr method will tend to be faster when working with extremely large data frames.
<h2><span class="orange">How to Select Rows with NA Values in R</span></h2>
You can use the following methods to select rows with NA values in R:
<b>Method 1: Select Rows with NA Values in Any Column</b>
<b>df[!complete.cases(df), ]
</b>
<b>Method 2: Select Rows with NA Values in Specific Column</b>
<b>df[is.na(df$my_column), ]</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(points=c(4, NA, 10, 14, 15, NA, 20, 22), rebounds=c(NA, 3, 3, 7, 6, 8, 14, 10), assists=c(NA, 9, 4, 4, 3, 7, 10, 11))
#view data frame
df
  points rebounds assists
1      4       NA      NA
2     NA        3       9
3     10        3       4
4     14        7       4
5     15        6       3
6     NA        8       7
7     20       14      10
8     22       10      11</b>
<h2>Example 1: Select Rows with NA Values in Any Column</h2>
The following code shows how to select rows with NA values in any column of the data frame in R:
<b>#select rows with NA values in any column
na_rows &lt;- df[!complete.cases(df), ]
#view results
na_rows
  points rebounds assists
1      4       NA      NA
2     NA        3       9
6     NA        8       7
</b>
Notice that the rows with NA values in any column are selected.
<h2>Example 2: Select Rows with NA Values in Specific Column</h2>
The following code shows how to select rows with NA values in a specific column of the data frame in R:
<b>#select rows with NA values in the points column
na_rows &lt;- df[is.na(df$points), ]
#view results
na_rows
  points rebounds assists
2     NA        3       9
6     NA        8       7
</b>
Notice that only the rows with NA values in the <b>points</b> column are selected.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Use complete.cases in R 
 How to Use na.omit in R 
 How to Remove Empty Rows from Data Frame in R 
<h2><span class="orange">How to Select Specific Columns in R (With Examples)</span></h2>
You can use the following syntax to select specific columns in a data frame in base R:
<b>#select columns by name
df[c('col1', 'col2', 'col4')]
#select columns by index
df[c(1, 2, 4)]
</b>
Alternatively, you can use the <b>select()</b> function from the  dplyr  package:
<b>library(dplyr)
#select columns by name
df %>%
  select(col1, col2, col4)
#select columns by index
df %>%
  select(1, 2, 4)
</b>
For extremely large datasets, it’s recommended to use the dplyr method since the <b>select()</b> function tends to be quicker than functions in base R.
The following examples show how to use both of these methods in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(a=c(1, 3, 4, 6, 8, 9), b=c(7, 8, 8, 7, 13, 16), c=c(11, 13, 13, 18, 19, 22), d=c(12, 16, 18, 22, 29, 38))
#view data frame
df
  a  b  c  d
1 1  7 11 12
2 3  8 13 16
3 4  8 13 18
4 6  7 18 22
5 8 13 19 29
6 9 16 22 38
</b>
<h3>Example 1: Select Specific Columns Using Base R (by name)</h3>
The following code shows how to select specific columns by name using base R:
<b>#select columns by name
df[c('a', 'b', 'd')]
  a  b  d
1 1  7 12
2 3  8 16
3 4  8 18
4 6  7 22
5 8 13 29
6 9 16 38
</b>
<h3>Example 2: Select Specific Columns Using Base R (by index)</h3>
The following code shows how to select specific columns by index using base R:
<b>#select columns by index
df[c(1, 2, 4)]
  a  b  d
1 1  7 12
2 3  8 16
3 4  8 18
4 6  7 22
5 8 13 29
6 9 16 38</b>
<h3>Example 3: Select Specific Columns Using dplyr (by name)</h3>
The following code shows how to select specific columns by name using dplyr:
<b>library(dplyr)
#select columns by name
df %>%
  select(a, b, d)
  a  b  d
1 1  7 12
2 3  8 16
3 4  8 18
4 6  7 22
5 8 13 29
6 9 16 38</b>
<h3>Example 4: Select Specific Columns Using dplyr (by index)</h3>
The following code shows how to select specific columns by index using dplyr:
<b>library(dplyr)
#select columns by index
df %>%
  select(1, 2, 4)
  a  b  d
1 1  7 12
2 3  8 16
3 4  8 18
4 6  7 22
5 8 13 29
6 9 16 38</b>
<h2><span class="orange">How to Select Top N Values by Group in R</span></h2>
You can use one of the following methods to select the top N values by group in R:
<b>Method 1: Select Top N Values by Group (Ignore Ties)</b>
<b>library(dplyr)
#select top 5 values by group
df %>% 
  arrange(desc(values_column)) %>% 
  group_by(group_column) %>%
  slice(1:5)
</b>
<b>Method 2: Select Top N Values by Group (Include Ties)</b>
<b>library(dplyr)
#select top 5 values by group
df %>%
  group_by(group_column) %>%
  top_n(5, values_column)</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(19, 22, 15, NA, 14, 25, 25, 25), rebounds=c(10, 6, 3, 7, 11, 13, 9, 12))
#view data frame
df
  team points rebounds
1    A     19       10
2    A     22        6
3    A     15        3
4    A     NA        7
5    B     14       11
6    B     25       13
7    B     25        9
8    B     25       12</b>
<h2>Example 1: Select Top N Values by Group (Ignore Ties)</h2>
The following code shows how to select the top 2 rows with the highest points values, grouped by team:
<b>library(dplyr)
#select top 2 rows with highest points values, grouped by team 
df %>% 
  arrange(desc(points)) %>% 
  group_by(team) %>%
  slice(1:2)
# A tibble: 4 x 3
# Groups:   team [2]
  team  points rebounds
        
1 A         22        6
2 A         19       10
3 B         25       13
4 B         25        9</b>
The output contains the two rows with the highest points values for each team.
Note that for team B, there were actually three rows that were tied for highest points value (<b>25</b>) but only two rows are returned in the output.
This method simply ignores ties.
<h2>Example 2: Select Top N Values by Group (Include Ties)</h2>
The following code shows how to select the top 2 rows with the highest points values, grouped by team:
<b>library(dplyr)
#select top 2 rows with highest points values, grouped by team 
df %>%
  group_by(team) %>%
  top_n(2, points)
# A tibble: 5 x 3
# Groups:   team [2]
  team  points rebounds
        
1 A         19       10
2 A         22        6
3 B         25       13
4 B         25        9
5 B         25       12</b>
The output contains the two rows with the highest points values for each team.
Note that for team B, there were three rows that were tied for highest points value (<b>25</b>) so this method included all three of those rows in the final output.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common operations in R:
 How to Select Rows Where Value Appears in Any Column in R 
 How to Select Specific Columns in R 
 How to Select Columns by Index in R 
<h2><span class="orange">How to Use the sink() Function in R (With Examples)</span></h2>
You can use the <b>sink()</b> function to drive R output to an external connection.
This function is useful because it lets you easily export character strings or data frames to a CSV file or text file.
This function uses the following basic syntax:
<b>#define file name
sink("my_data.txt")
#write this text to file
"here is some text"
#close the external connection
sink() 
</b>
The following examples show three different ways to use this function in practice.
<h3>Example 1: Use sink() to Export String to Text File</h3>
We can use the following <b>sink()</b> function to export a character string to a text file:
<b>#define file name
sink("my_data.txt")
#write this text to file
"here is some text"
#close the external connection
sink()
</b>
We can then navigate to the  current working directory  and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/sink1.jpg"466">
The file contains the string that we specified.
We can also export several character strings to a text file:
<b>#define file name
sink("my_data.txt")
#write several strings to file
"first text"
"second text"
"third text"
#close the external connection
sink()</b>
We can then navigate to the current working directory and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/sink2.jpg"459">
The file contains the three strings that we specified.
<h3>Example 2: Use sink() to Export Data Frame to Text File</h3>
We can use the following <b>sink()</b> function to export a data frame to a text file:
<b>#define file name
sink("my_data.txt")
#define data frame to write to file
df &lt;- data.frame(player=c('A', 'B', 'C', 'D','E'), points=c(12, 29, 24, 30, 19), assists=c(5, 5, 7, 4, 10))
print(df)
#close the external connection
sink()
</b>
We can then navigate to the current working directory and open the text file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/sink3.jpg"371">
The file contains the data frame that we created.
<h3>Example 3: Use sink() to Export Data Frame to CSV File</h3>
We can use the following <b>sink()</b> function to export a data frame to a CSV file:
<b>#define file name
sink("my_data.csv")
#define data frame to write to file
df &lt;- data.frame(player=c('A', 'B', 'C', 'D','E'), points=c(12, 29, 24, 30, 19), assists=c(5, 5, 7, 4, 10))
print(df)
#close the external connection
sink()
</b>
We can then navigate to the current working directory and open the CSV file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/03/sink4.jpg"507">
The CSV file contains the data frame that we created.
<h2><span class="orange">How to Find the Size of a Data Frame in R</span></h2>
You can use the following functions in R to display the size of a given data frame:
<b>nrow</b>: Display number of rows in data frame
<b>ncol</b>: Display number of columns in data frame
<b>dim</b>: Display dimensions (rows and columns) of data frame
The following examples show how to use each of these functions in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E', 'F'), points=c(99, 90, 86, 88, 95, 99), assists=c(33, 28, 31, 39, 34, 25), rebounds=c(12, NA, 24, 24, 28, 33))
#view data frame
df
  team points assists rebounds
1    A     99      33       12
2    B     90      28       NA
3    C     86      31       24
4    D     88      39       24
5    E     95      34       28
6    F     99      25       33</b>
<h2>Example 1: Use nrow() to Display Number of Rows</h2>
The following code shows how to use the <b>nrow()</b> function to display the total number of rows in the data frame:
<b>#display total number of rows in data frame
nrow(df)
[1] 6
</b>
There are <b>6</b> total rows.
Note that we can also use the  complete.cases()  function to display the total number of rows with no NA values:
<b>#display total number of rows in data frame with no NA values
nrow(df[complete.cases(df), ])
[1] 5</b>
There are <b>5</b> total rows that have no NA values.
<h2>Example 2: Use ncol() to Display Number of Columns</h2>
The following code shows how to use the <b>ncol()</b> function to display the total number of columns in the data frame:
<b>#display total number of columns in data frame
ncol(df)
[1] 4
</b>
There are <b>4</b> total columns.
<h2>Example 3: Use dim() to Display Dimensions</h2>
The following code shows how to use the <b>dim()</b> function to display the dimensions (rows and columns) of the data frame:
<b>#display dimensions of data frame
dim(df)
[1] 6 4
</b>
This tells us there are <b>6</b> rows and <b>4</b> columns in the data frame.
You can also use brackets with the <b>dim()</b> function to display only the rows or columns:
<b>#display number of rows of data frame
dim(df)[1]
[1] 6
#display number of columns of data frame
dim(df)[2]
[1] 4
</b>
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Use rowSums() Function in R 
 How to Apply Function to Each Row in Data Frame in R 
 How to Remove Rows from Data Frame in R Based on Condition 
<h2><span class="orange">R: How to Sort Data Frame Using row.names Attribute</span></h2>
You can use the following two methods to sort a data frame in R by using the <b>row.names</b> attribute:
<b>Method 1: Sort Using Character row.names</b>
<b>df[order(row.names(df)), ]
</b>
<b>Method 2: Sort Using Numeric row.names</b>
<b>df[order(as.numeric(row.names(df))), ]</b>
The following examples shows how to use each method in practice.
<h3>Example 1: Sort Data Frame Using Character row.names</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(position=c('G', 'G', 'F', 'F', 'C'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28))
#set row names of data frame
row.names(df) &lt;- c('A', 'C', 'E', 'D', 'B')
#view data frame
df
  position points assists rebounds
A        G     99      33       30
C        G     90      28       28
E        F     86      31       24
D        F     88      39       24
B        C     95      34       28</b>
We can use the following syntax to sort the rows of the data frame alphabetically using the <b>row.names</b> attribute:
<b>#sort rows alphabetically using row.names
df[order(row.names(df)), ]
  position points assists rebounds
A        G     99      33       30
B        C     95      34       28
C        G     90      28       28
D        F     88      39       24
E        F     86      31       24</b>
The rows are sorted from A to Z based on the row name value.
You can also use the <b>decreasing=TRUE</b> argument to sort from Z to A:
<b>#sort rows from Z to A using row.names
df[order(row.names(df), decreasing=TRUE), ]
  position points assists rebounds
E        F     86      31       24
D        F     88      39       24
C        G     90      28       28
B        C     95      34       28
A        G     99      33       30</b>
<h3>Example 2: Sort Data Frame Using Numeric row.names</h3>
Suppose we have the following data frame in R:
<b>#create data frame
df &lt;- data.frame(position=c('G', 'G', 'F', 'F', 'C'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28))
#set row names of data frame
row.names(df) &lt;- c(1, 100, 4, 12, 19)
#view data frame
df
    position points assists rebounds
1          G     99      33       30
100        G     90      28       28
4          F     86      31       24
12         F     88      39       24
19         C     95      34       28</b>
We can use the following syntax to sort the rows of the data frame using the <b>row.names</b> attribute:
<b>#sort by row names from smallest to largest
df[order(as.numeric(row.names(df))), ]
    position points assists rebounds
1          G     99      33       30
4          F     86      31       24
12         F     88      39       24
19         C     95      34       28
100        G     90      28       28</b>
We could also use <b>decreasing=TRUE</b> to sort from largest to smallest:
<b>#sort by row names from largest to smallest
df[order(as.numeric(row.names(df)), decreasing=TRUE), ]
    position points assists rebounds
100        G     90      28       28
19         C     95      34       28
12         F     88      39       24
4          F     86      31       24
1          G     99      33       30</b>
<h2><span class="orange">How to Split a Data Frame in R (With Examples)</span></h2>
You can use one of the following three methods to split a data frame into several smaller data frames in R:
<b>Method 1: Split Data Frame Manually Based on Row Values</b>
<b>#define first n rows to include in first data frame
n &lt;- 4
#split data frame into two smaller data frames
df1 &lt;- df[row.names(df) %in% 1:n, ]
df2 &lt;- df[row.names(df) %in% (n+1):nrow(df), ]
</b>
<b>Method 2: Split Data Frame into n Equal-Sized Data Frames</b>
<b>#define number of data frames to split into
n &lt;- 3
#split data frame into n equal-sized data frames
split(df, factor(sort(rank(row.names(df))%%n)))
</b>
<b>Method 3: Split Data Frame Based on Column Value</b>
<b>#split data frame based on particular column value
df1 &lt;- df[df$column_name == 0, ]
df2 &lt;- df[df$column_name != 0, ]
</b>
The following examples show how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(ID=c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12), sales=c(7, 8, 8, 7, 9, 7, 8, 9, 3, 3, 14, 10), leads=c(0, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0))
#view data frame
df
   ID sales leads
1   1     7     0
2   2     8     0
3   3     8     1
4   4     7     1
5   5     9     0
6   6     7     1
7   7     8     1
8   8     9     0
9   9     3     1
10 10     3     0
11 11    14     1
12 12    10     0</b>
<h3>Method 1: Split Data Frame Manually Based on Row Values</h3>
The following code shows how to split a data frame into two smaller data frames where the first one contains rows 1 through 4 and the second contains rows 5 through the last row:
<b>#define row to split on
n &lt;- 4
#split into two data frames
df1 &lt;- df[row.names(df) %in% 1:n, ]
df2 &lt;- df[row.names(df) %in% (n+1):nrow(df), ]
#view resulting data frames
df1
  ID sales leads
1  1     7     0
2  2     8     0
3  3     8     1
4  4     7     1
df2
   ID sales leads
5   5     9     0
6   6     7     1
7   7     8     1
8   8     9     0
9   9     3     1
10 10     3     0
11 11    14     1
12 12    10     0
</b>
<h3>Method 2: Split Data Frame into n Equal-Sized Data Frames</h3>
The following code shows how to split a data frame into <em>n</em> equal-sized data frames:
<b>#define number of data frames to split into
n &lt;- 3
#split data frame into n equal-sized data frames
split(df, factor(sort(rank(row.names(df))%%n)))
$`0`
  ID sales leads
1  1     7     0
2  2     8     0
3  3     8     1
4  4     7     1
$`1`
  ID sales leads
5  5     9     0
6  6     7     1
7  7     8     1
8  8     9     0
$`2`
   ID sales leads
9   9     3     1
10 10     3     0
11 11    14     1
12 12    10     0
</b>
 The result is three data frames of equal size.
<h3>Method 3: Split Data Frame Based on Column Value</h3>
The following code shows how to split a data frame into two data frames based on the value in one specific column:
<b>#split data frame based on particular column value
df1 &lt;- df[df$leads == 0, ]
df2 &lt;- df[df$leads != 0, ]
#view resulting data frames
df1
   ID sales leads
1   1     7     0
2   2     8     0
5   5     9     0
8   8     9     0
10 10     3     0
12 12    10     0
df2
   ID sales leads
3   3     8     1
4   4     7     1
6   6     7     1
7   7     8     1
9   9     3     1
11 11    14     1</b>
Note that <b>df1</b> contains all rows where ‘leads’ was equal to zero in the original data frame and <b>df2</b> contains all rows where ‘leads’ was equal to one in the original data frame.
<h2><span class="orange">How to Split a Vector into Chunks in R</span></h2>
You can use the following basic syntax to split a vector into chunks in R:
<b>chunks &lt;- split(my_vector, cut(seq_along(my_vector), 4, labels=FALSE))
</b>
This particular example splits the vector called <b>my_vector</b> into <b>4</b> equally sized chunks.
To split the vector into a different number of chunks, simply change the <b>4</b> to a different value.
The following example shows how to use this syntax in practice.
<h2>Example: Splitting a Vector into Chunks in R</h2>
Suppose we have the following vector in R that contains 12 total elements:
<b>#create vector
my_vector &lt;- c(2, 2, 4, 7, 6, 8, 9, 8, 8, 12, 5, 4)
#view length of vector
length(my_vector)
[1] 12</b>
We can use the following syntax to split the vector into four chunks:
<b>#split vector into four chunks
chunks &lt;- split(my_vector, cut(seq_along(my_vector), 4, labels=FALSE))
#view chunks
chunks
$`1`
[1] 2 2 4
$`2`
[1] 7 6 8
$`3`
[1] 9 8 8
$`4`
[1] 12  5  4</b>
From the output we can see:
The first chunk contains the values 2, 2, 4.
The second chunk contains the values 7, 6, 8.
The third chunk contains the values 9, 8, 8.
The fourth chunk contains the values 12, 5, 4.
Note that we can also use brackets to access a specific chunk:
<b>#access second chunk only
chunks[2]
$`2`
[1] 7 6 8
</b>
If we change the value within the <b>split()</b> function, we can split the vector into a different number of chunks.
For example, we could split the vector into six chunks instead:
<b>#split vector into six chunks
chunks &lt;- split(my_vector, cut(seq_along(my_vector), 6, labels=FALSE))
#view chunks
chunks
$`1`
[1] 2 2
$`2`
[1] 4 7
$`3`
[1] 6 8
$`4`
[1] 9
$`5`
[1] 8 8
$`6`
[1] 12  5
</b>
Notice that there are now six chunks and each chunk contains two elements.
<b>Note</b>: If your vector doesn’t contain an even number of elements, this method will still split the vector into as equally-sized groups as possible.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Filter a Vector in R 
 How to Remove NA Values from Vector in R 
 How to Remove Specific Elements from Vector in R 
<h2><span class="orange">How to Calculate R-Squared in Excel (With Examples)</span></h2>
<b>R-squared</b>, often written as r<sup>2</sup>, is a measure of how well a  linear regression model  fits a dataset.
In technical terms, it is the proportion of the variance in the response variable that can be explained by the predictor variable.
The value for r<sup>2</sup> can range from 0 to 1:
A value of 0 indicates that the response variable cannot be explained by the predictor variable at all.
A value of 1 indicates that the response variable can be perfectly explained without error by the predictor variable.
<b>Related: </b> What is a Good R-squared Value? 
This tutorial explains how to calculate r<sup>2</sup> for two variables in Excel.
<h2>Example: Calculating R-Squared in Excel</h2>
Suppose we have the following data for the number of hours studied and the exam score received for 20 students:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/08/rsquared_excel1.png">
Now suppose we are interested in fitting a simple linear regression model to this data, using “hours” as the predictor variable and “score” as the response variable.
To find the r<sup>2</sup> for this data, we can use the RSQ() function in Excel, which uses the following syntax:
<b>=RSQ(known_ys, known_xs)</b>
where:
<b>known_ys:</b> the values for the response variable
<b>known_xs: </b>the values for the predictor variable
Here’s what that formula looks like in our example:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/08/rsquared_excel2.png">
In this example, <b>72.73%</b> of the variation in the exam scores can be explained by the number of hours studied.
Note that if we fit a  simple linear regression model  to this data, the output would look like this:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/03/simpleRegressionExcel5.png">
Notice that the R Square value in the first table is <b>0.7273</b>, which matches the result that we got using the <b>RSQ()</b> function.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in Excel:
 How to Calculate Adjusted R-Squared in Excel 
 How to Calculate SST, SSR, and SSE in Excel 
 How to Create a Residual Plot in Excel 
<h2><span class="orange">How to Calculate R-Squared in Google Sheets</span></h2>
<b>R-squared</b>, often written as r<sup>2</sup>, is a measure of how well a  linear regression model  fits a dataset.
In technical terms, it is the proportion of the variance in the response variable that can be explained by the predictor variable.
The value for r<sup>2</sup> can range from 0 to 1:
A value of <b>0</b> indicates that the response variable cannot be explained by the predictor variable at all.
A value of <b>1</b> indicates that the response variable can be perfectly explained without error by the predictor variable.
The following example shows how to calculate R-squared for two variables in Google Sheets.
<h2>Example: Calculating R-Squared in Google Sheets</h2>
Suppose we have the following data for the number of hours studied and the exam score received for 20 students:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/08/rsquared_excel1.png">
Now suppose we want to fit a  simple linear regression model , using “hours” as the predictor variable and “score” as the response variable.
To find the R-squared for this model, we can use the <b>RSQ()</b> function in Google Sheets, which uses the following syntax:
<b>=RSQ(known_ys, known_xs)</b>
where:
<b>known_ys:</b> the values for the response variable
<b>known_xs: </b>the values for the predictor variable
In our example, we can type the following formula into cell D2:
<b>=RSQ(A2:A21, B2:B21)</b>
The following screenshot shows how to use this formula in practice:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/07/r2sheets.jpg">
The R-squared value turns out to be about <b>0.7273</b>.
This means that <b>72.73%</b> of the variation in the exam scores can be explained by the number of hours studied.
<b>Related: </b> What is a Good R-squared Value? 
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in Google Sheets:
 How to Find A Line of Best Fit in Google Sheets 
 How to Perform Linear Regression in Google Sheets 
 How to Create a Forecast in Google Sheets (With Example) 
<h2><span class="orange">How to Calculate R-Squared in Python (With Example)</span></h2>
<b>R-squared</b>, often written R<sup>2</sup>, is the proportion of the variance in the  response variable  that can be explained by the predictor variables in a  linear regression model .
The value for R-squared can range from 0 to 1 where:
<b>0</b> indicates that the response variable cannot be explained by the predictor variable at all.
<b>1</b> indicates that the response variable can be perfectly explained without error by the predictor variables.
The following example shows how to calculate R<sup>2</sup> for a regression model in Python.
<h3>Example: Calculate R-Squared in Python</h3>
Suppose we have the following pandas DataFrame:
<b>import pandas as pd
#create DataFrame
df = pd.DataFrame({'hours': [1, 2, 2, 4, 2, 1, 5, 4, 2, 4, 4, 3, 6],   'prep_exams': [1, 3, 3, 5, 2, 2, 1, 1, 0, 3, 4, 3, 2],   'score': [76, 78, 85, 88, 72, 69, 94, 94, 88, 92, 90, 75, 96]})
#view DataFrame
print(df)
    hours  prep_exams  score
0       1           1     76
1       2           3     78
2       2           3     85
3       4           5     88
4       2           2     72
5       1           2     69
6       5           1     94
7       4           1     94
8       2           0     88
9       4           3     92
10      4           4     90
11      3           3     75
12      6           2     96
</b>
We can use the <b>LinearRegression()</b> function from  sklearn  to fit a regression model and the <b>score()</b> function to calculate the R-squared value for the model:
<b>from sklearn.linear_model import LinearRegression
#initiate linear regression model
model = LinearRegression()
#define predictor and response variables
X, y = df[["hours", "prep_exams"]], df.score
#fit regression model
model.fit(X, y)
#calculate R-squared of regression model
r_squared = model.score(X, y)
#view R-squared value
print(r_squared)
0.7175541714105901
</b>
The R-squared of the model turns out to be <b>0.7176</b>.
This means that <b>71.76%</b> of the variation in the exam scores can be explained by the number of hours studied and the number of prep exams taken.
If we’d like, we could then compare this R-squared value to another regression model with a different set of predictor variables.
In general, models with higher R-squared values are preferred because it means the set of predictor variables in the model is capable of explaining the variation in the response variable well.
<b>Related:</b>  What is a Good R-squared Value? 
<h2><span class="orange">How to Find Coefficient of Determination (R-Squared) in R</span></h2>
The <b>coefficient of determination </b>(commonly denoted R<sup>2</sup>) is the proportion of the variance in the  response variable  that can be explained by the explanatory variables in a regression model.
This tutorial provides an example of how to find and interpret R<sup>2</sup> in a regression model in R.
<b>Related:</b>  What is a Good R-squared Value? 
<h3>Example: Find & Interpret R-Squared in R</h3>
Suppose we have the following dataset that contains data for the number of hours studied, prep exams taken, and exam score received for 15 students:
<b>#create data frame
df &lt;- data.frame(hours=c(1, 2, 2, 4, 2, 1, 5, 4, 2, 4, 4, 3, 6, 5, 3), prep_exams=c(1, 3, 3, 5, 2, 2, 1, 1, 0, 3, 4, 3, 2, 4, 4), score=c(76, 78, 85, 88, 72, 69, 94, 94, 88, 92, 90, 75, 96, 90, 82))
#view first six rows of data frame
head(df)
  hours prep_exams score
1     1          1    76
2     2          3    78
3     2          3    85
4     4          5    88
5     2          2    72
6     1          2    69
</b>
The following code shows how to fit a  multiple linear regression model  to this dataset and view the model output in R:
<b>#fit regression model
model &lt;- lm(score~hours+prep_exams, data=df)
#view model summary
summary(model)
Call:
lm(formula = score ~ hours + prep_exams, data = df)
Residuals:
    Min      1Q  Median      3Q     Max 
-7.9896 -2.5514  0.3079  3.3370  7.0352 
Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  71.8078     3.5222  20.387 1.12e-10 ***
hours         5.0247     0.8964   5.606 0.000115 ***
prep_exams   -1.2975     0.9689  -1.339 0.205339    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
Residual standard error: 4.944 on 12 degrees of freedom
Multiple R-squared:  0.7237,Adjusted R-squared:  0.6776 
F-statistic: 15.71 on 2 and 12 DF,  p-value: 0.0004454</b>
The R-squared of the model (shown near the very bottom of the output) turns out to be <b>0.7237</b>.
This means that <b>72.37%</b> of the variation in the exam scores can be explained by the number of hours studied and the number of prep exams taken.
Note that you can also access this value by using the following syntax:
<b>summary(model)$r.squared
[1] 0.7236545</b>
<h3>How to Interpret the R-Squared Value</h3>
An R-squared value will always range between 0 and 1.
A value of 1 indicates that the explanatory variables can perfectly explain the variance in the response variable and a value of 0 indicates that the explanatory variables have no ability to explain the variance in the response variable.
In general, the larger the R-squared value of a regression model the better the explanatory variables are able to predict the value of the response variable.
Check out  this article  for details on how to determine whether or not a given R-squared value is considered “good” for a given regression model.
<b>Related:</b>  How to Calculate Adjusted R-Squared in R 
<h2><span class="orange">How to Subset Data Frame by List of Values in R</span></h2>
You can use one of the following methods to subset a data frame by a list of values in R:
<b>Method 1: Use Base R</b>
<b>df_new &lt;- df[df$my_column %in% vals,]</b>
<b>Method 2: Use dplyr</b>
<b>library(dplyr)
df_new &lt;- filter(df, my_column %in% vals)
</b>
<b>Method 3: Use data.table</b>
<b>library(data.table)
df_new &lt;- setDT(df, key='my_column')[J(vals)]
</b>
The following examples show how to use each of these methods in practice with the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'B', 'B', 'C', 'C', 'C', 'D'), points=c(12, 22, 35, 34, 20, 28, 30, 18), assists=c(4, 10, 11, 12, 12, 8, 6, 10))
#view data frame
df
  team points assists
1    A     12       4
2    B     22      10
3    B     35      11
4    B     34      12
5    C     20      12
6    C     28       8
7    C     30       6
8    D     18      10
</b>
<h2>Method 1: Subset Data Frame by List of Values in Base R</h2>
The following code shows how to subset the data frame to only contain rows that have a value of ‘A’ or ‘C’ in the <b>team</b> column:
<b>#define values to subset by
vals &lt;- c('A', 'C')
#subset data frame to only contain rows where team is 'A' or 'C'
df_new &lt;- df[df$team %in% vals,]
#view results
df_new
  team points assists
1    A     12       4
5    C     20      12
6    C     28       8
7    C     30       6
</b>
The resulting data frame only contains rows that have a value of ‘A’ or ‘C’ in the <b>team</b> column.
Note that we used functions from base R in this example so we didn’t have to load any extra packages.
<h2>Method 2: Subset Data Frame by List of Values in dplyr</h2>
The following code shows how to subset the data frame to only contain rows that have a value of ‘A’ or ‘C’ in the <b>team</b> column by using the<b> filter()</b> function from the <b>dplyr</b> package:
<b>library(dplyr)
#define values to subset by
vals &lt;- c('A', 'C')
#subset data frame to only contain rows where team is 'A' or 'C'
df_new &lt;- filter(df, team %in% vals)
#view results
df_new
  team points assists
1    A     12       4
5    C     20      12
6    C     28       8
7    C     30       6
</b>
The resulting data frame only contains rows that have a value of ‘A’ or ‘C’ in the <b>team</b> column.
<h2>Method 3: Subset Data Frame by List of Values in data.table</h2>
The following code shows how to subset the data frame to only contain rows that have a value of ‘A’ or ‘C’ in the <b>team</b> column by using functions from the <b>data.table </b>package:
<b>library(data.table)
#define values to subset by
vals &lt;- c('A', 'C')
#subset data frame to only contain rows where team is 'A' or 'C'
df_new &lt;- setDT(df, key='team')[J(vals)]
#view results
df_new
   team points assists
1:    A     12       4
2:    C     20      12
3:    C     28       8
4:    C     30       6
</b>
The resulting data frame only contains rows that have a value of ‘A’ or ‘C’ in the <b>team</b> column.
<b>Related:</b>  How to Use %in% Operator in R (With Examples) 
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Subset Data Frame by Factor Levels in R 
 How to Subset by a Date Range in R 
 How to Plot Subset of a Data Frame in R 
<h2><span class="orange">How to Subset Data Frame in R by Multiple Conditions</span></h2>
You can use the following methods to subset a data frame by multiple conditions in R:
<b>Method 1: Subset Data Frame Using “OR” Logic</b>
<b>df_sub &lt;- subset(df, team == 'A' | points &lt; 20)</b>
This particular example will subset the data frame for rows where the team column is equal to ‘A’ <b>or</b> the points column is less than 20.
<b>Method 2: Subset Data Frame Using “AND” Logic</b>
<b>df_sub &lt;- subset(df, team == 'A' & points &lt; 20)</b>
This particular example will subset the data frame for rows where the team column is equal to ‘A’ <b>and </b>the points column is less than 20.
This tutorial explains how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'B', 'B', 'B'), position=c('Guard', 'Guard', 'Forward',            'Guard', 'Forward', 'Forward'), points=c(22, 25, 19, 22, 12, 35))
#view data frame
df
  team position points
1    A    Guard     22
2    A    Guard     25
3    A  Forward     19
4    B    Guard     22
5    B  Forward     12
6    B  Forward     35</b>
<h2>Example 1: Subset Data Frame Using “OR” Logic</h2>
The following code shows how to subset the data frame for rows where the team column is equal to ‘A’ <b>or</b> the points column is less than 20:
<b>#subset data frame where team is 'A' or points is less than 20
df_sub &lt;- subset(df, team == 'A' | points &lt; 20)
#view subset
df_sub
  team position points
1    A    Guard     22
2    A    Guard     25
3    A  Forward     19
5    B  Forward     12
</b>
Each of the rows in the subset either have a value of ‘A’ in the team column <b>or</b> have a value in the points column less than 20.
<b>Note</b>: The <b>|</b> symbol represents “OR” in R.
In this example, we only included one “OR” symbol in the <b>subset()</b> function but we could include as many as we like to subset based on even more conditions.
<h2>Example 2: Subset Data Frame Using “AND” Logic</h2>
The following code shows how to subset the data frame for rows where the team column is equal to ‘A’ <b>and </b>the points column is less than 20:
<b>#subset data frame where team is 'A' and points is less than 20
df_sub &lt;- subset(df, team == 'A' & points &lt; 20)
#view subset
df_sub
  team position points
3    A  Forward     19
</b>
Notice that the resulting subset only contains one row.
This is because only one row has a value of ‘A’ in the team column <b>and</b> has a value in the points column less than 20.
<b>Note</b>: The <b>&</b> symbol represents “AND” in R.
In this example, we only included one “AND” symbol in the <b>subset()</b> function but we could include as many as we like to subset based on even more conditions.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Select Unique Rows in a Data Frame in R 
 How to Select Rows with NA Values in R 
 How to Select Rows Based on Values in Vector in R 
<h2><span class="orange">How to Subtract Hours from Time in R (With Examples)</span></h2>
You can use one of the following methods to subtract a certain number of hours from a time in R:
<b>Method 1: Use Base R</b>
<b>#create new column that subtracts 4 hours from time
df$subtract4 &lt;- df$time - (4*3600)
</b>
<b>Method 2: Use lubridate Package</b>
<b>library(lubridate)
#create new column that subtracts 4 hours from time
df$subtract4 &lt;- df$time - hours(4)
</b>
The following examples show how to use each method with the following data frame:
<b>#create data frame
df &lt;- data.frame(time=as.POSIXct(c('2022-01-03 08:04:15', '2022-01-05 14:04:15',                   '2022-01-05 20:03:53', '2022-01-06 03:29:13',                   '2022-01-06 06:15:00', '2022-01-07 10:48:11'),                   format='%Y-%m-%d %H:%M:%OS'), sales=c(130, 98, 240, 244, 174, 193))
#view data frame
df
 time sales
1 2022-01-03 08:04:15   130
2 2022-01-05 14:04:15    98
3 2022-01-05 20:03:53   240
4 2022-01-06 03:29:13   244
5 2022-01-06 06:15:00   174
6 2022-01-07 10:48:11   193
</b>
<b>Note</b>: To add hours to a date, simply change the subtraction sign to an addition sign in either of the formulas above.
<h2>Example 1: Subtract Hours from Time Using Base R</h2>
The following code shows how to create a new column called <b>subtract4 </b>that subtracts four hours from each value in the <b>time</b> column:
<b>#create new column that subtracts 4 hours from time
df$subtract4 &lt;- df$time - (4*3600)
#view updated data frame
df
 time sales           subtract4
1 2022-01-03 08:04:15   130 2022-01-03 04:04:15
2 2022-01-05 14:04:15    98 2022-01-05 10:04:15
3 2022-01-05 20:03:53   240 2022-01-05 16:03:53
4 2022-01-06 03:29:13   244 2022-01-05 23:29:13
5 2022-01-06 06:15:00   174 2022-01-06 02:15:00
6 2022-01-07 10:48:11   193 2022-01-07 06:48:11</b>
Notice that the values in the new <b>subtract4 </b>column are equal to the values in the <b>time </b>column with four hours subtracted from them.
<b>Note</b>: We use (4*3600) in the formula because time values are stored as seconds in R. Since there are 3,600 seconds in one hour, we must multiply 4 by 3,600 to subtract 4 hours.
<h2>Example 2: Subtract Hours from Time Using lubridate Package</h2>
The following code shows how to use the <b>hours()</b> function from the  lubridate  package to create a new column called <b>subtract4 </b>that subtracts four hours from each value in the <b>time</b> column:
<b>library(lubridate)
#create new column that subtracts 4 hours from time
df$subtract4 &lt;- df$time - hours(4)
#view updated data frame
df
 time sales           subtract4
1 2022-01-03 08:04:15   130 2022-01-03 04:04:15
2 2022-01-05 14:04:15    98 2022-01-05 10:04:15
3 2022-01-05 20:03:53   240 2022-01-05 16:03:53
4 2022-01-06 03:29:13   244 2022-01-05 23:29:13
5 2022-01-06 06:15:00   174 2022-01-06 02:15:00
6 2022-01-07 10:48:11   193 2022-01-07 06:48:11</b>
Notice that the values in the new <b>subtract4 </b>column are equal to the values in the <b>time </b>column with four hours subtracted from them.
Note that this method produces the same results as the base R method.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Convert Date to Numeric in R 
 How to Extract Month from Date in R 
 How to Add and Subtract Months from a Date in R 
<h2><span class="orange">How to Sum Columns Based on a Condition in R</span></h2>
You can use the following basic syntax to sum columns based on condition in R:
<b>#sum values in column 3 where col1 is equal to 'A'
sum(df[which(df$col1=='A'), 3])
</b>
The following examples show how to use this syntax in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(conference = c('East', 'East', 'East', 'West', 'West', 'East'), team = c('A', 'A', 'A', 'B', 'B', 'C'), points = c(11, 8, 10, 6, 6, 5), rebounds = c(7, 7, 6, 9, 12, 8))
#view data frame
df
  conference team points rebounds
1       East    A     11        7
2       East    A      8        7
3       East    A     10        6
4       West    B      6        9
5       West    B      6       12
6       East    C      5        8
</b>
<h3>Example 1: Sum One Column Based on One Condition</h3>
The following code shows how to find the sum of the points column for the rows where team is equal to ‘A’:
<b>#sum values in column 3 (points column) where team is equal to 'A'
sum(df[which(df$team=='A'), 3])
[1] 29</b>
The following code shows how to find the sum of the rebounds column for the rows where points is greater than 9:
<b>#sum values in column 4 (rebounds column) where points is greater than 9
sum(df[which(df$points > 9), 4])
[1] 13</b>
<h3>Example 2: Sum One Column Based on Multiple Conditions</h3>
The following code shows how to find the sum of the points column for the rows where team is equal to ‘A’ <em>and</em> conference is equal to ‘East’: 
<b>#sum values in column 3 (points column) where team is 'A' and conference is 'East'
sum(df[which(df$team=='A' & df$conference=='East'), 3])
[1] 29</b>
Note that the <b>&</b> operator stands for “and” in R.
<h3>Example 3: Sum One Column Based on One of Several Conditions</h3>
The following code shows how to find the sum of the points column for the rows where team is equal to ‘A’ <em>or</em> ‘C’:
<b>#sum values in column 3 (points column) where team is 'A' <em>or</em> 'C'
sum(df[which(df$team == 'A' | df$team =='C'), 3])
[1] 34
</b>
Note that the <b>|</b> operator stands for “or” in R.
<h2><span class="orange">How to Calculate Summary Statistics by Group in R</span></h2>
There are two basic ways to calculate summary statistics by group in R:
<b>Method 1: Use tapply() from Base R</b>
<b>tapply(df$value_col, df$group_col, summary)
</b>
<b>Method 2: Use group_by() from dplyr Package</b>
<b>library(dplyr)
df %>%
  group_by(group_col) %>% 
  summarize(min = min(value_col),
            q1 = quantile(value_col, 0.25),
            median = median(value_col),
            mean = mean(value_col),
            q3 = quantile(value_col, 0.75),
            max = max(value_col))</b>
The following examples show how to use each method in practice.
<h3>Method 1: Use tapply() from Base R</h3>
The following code shows how to use the <b>tapply()</b> function from base R to calculate summary statistics by group:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(99, 68, 86, 88, 95, 74, 78, 93), assists=c(22, 28, 31, 35, 34, 45, 28, 31), rebounds=c(30, 28, 24, 24, 30, 36, 30, 29))
#calculate summary statistics of 'points' grouped by 'team'
tapply(df$points, df$team, summary)
$A
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  68.00   81.50   87.00   85.25   90.75   99.00 
$B
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   74.0    77.0    85.5    85.0    93.5    95.0 
</b>
<h3>Method 2: Use group_by() from dplyr Package</h3>
The following code shows how to use the <b>group_by()</b> and <b>summarize()</b> functions from the  dplyr  package to calculate summary statistics by group:
<b>library(dplyr)
#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(99, 68, 86, 88, 95, 74, 78, 93), assists=c(22, 28, 31, 35, 34, 45, 28, 31), rebounds=c(30, 28, 24, 24, 30, 36, 30, 29))
#calculate summary statistics of 'points' grouped by 'team'
df %>%
  group_by(team) %>% 
  summarize(min = min(points),
            q1 = quantile(points, 0.25),
            median = median(points),
            mean = mean(points),
            q3 = quantile(points, 0.75),
            max = max(points))
# A tibble: 2 x 7
  team    min    q1 median  mean    q3   max
         
1 A        68  81.5   87    85.2  90.8    99
2 B        74  77     85.5  85    93.5    95
</b>
Notice that both methods return the exact same results.
It’s worth noting that the dplyr approach will likely be faster for large data frames but both methods will perform similarly on smaller data frames.
<h2><span class="orange">How to Use the sweep Function in R (With Examples)</span></h2>
You can use the <b>sweep() </b>function in R to perform some operation on either the rows or columns of a matrix.
This function uses the following basic syntax:
<b>sweep(x, MARGIN, STATS, FUN)
</b>
where:
<b>x</b>: Name of the matrix
<b>MARGIN</b>: The margin to perform function on (1=rows, 2=columns)
<b>STATS</b>: The value(s) to use in the function
<b>FUN</b>: The function to perform
The following examples show how to use the <b>sweep()</b> function in different scenarios in R.
<h3>Example 1: Use sweep() to Perform Operation on Rows</h3>
The following code shows how to use the <b>sweep()</b> function to add a specific number to the values in each row of the matrix:
<b>#define matrix
mat &lt;- matrix(1:15, nrow=5)
#view matrix
mat
     [,1] [,2] [,3]
[1,]    1    6   11
[2,]    2    7   12
[3,]    3    8   13
[4,]    4    9   14
[5,]    5   10   15
#add specific numbers to each row
sweep(mat, 1, c(5, 10, 15, 20, 25), "+")
     [,1] [,2] [,3]
[1,]    6   11   16
[2,]   12   17   22
[3,]   18   23   28
[4,]   24   29   34
[5,]   30   35   40
</b>
Here’s how the <b>sweep()</b> function worked in this scenario:
<b>5</b> was added to each value in the first row.
<b>10</b> was added to each value in the second row.
<b>15</b> was added to each value in the third row.
<b>20</b> was added to each value in the fourth row.
<b>25</b> was added to each value in the fifth row.
Note that in this example we used addition (+) as the mathematical operation to perform, but we could choose to use a different operation.
For example, the following code shows how to multiply the values in each row by certain numbers:
<b>#define matrix
mat &lt;- matrix(1:15, nrow=5)
#view matrix
mat
     [,1] [,2] [,3]
[1,]    1    6   11
[2,]    2    7   12
[3,]    3    8   13
[4,]    4    9   14
[5,]    5   10   15
#multiply values in each row by certain amount
sweep(mat, 1, c(.5, 1, 2, 4, 6), "*")
     [,1] [,2] [,3]
[1,]  0.5    3  5.5
[2,]  2.0    7 12.0
[3,]  6.0   16 26.0
[4,] 16.0   36 56.0
[5,] 30.0   60 90.0</b>
<h3>
<b>Example 2: Use sweep() to Perform Operation on Columns</b>
</h3>
The following code shows how to use the <b>sweep()</b> function to add a specific number to the values in each column of the matrix:
<b>#define matrix
mat &lt;- matrix(1:15, nrow=5)
#view matrix
mat
     [,1] [,2] [,3]
[1,]    1    6   11
[2,]    2    7   12
[3,]    3    8   13
[4,]    4    9   14
[5,]    5   10   15
#add specific numbers to each column
sweep(mat, 2, c(5, 10, 15), "+")
     [,1] [,2] [,3]
[1,]    6   16   26
[2,]    7   17   27
[3,]    8   18   28
[4,]    9   19   29
[5,]   10   20   30</b>
Here’s how the <b>sweep()</b> function worked in this scenario:
<b>5</b> was added to each value in the first column.
<b>10</b> was added to each value in the second column.
<b>15</b> was added to each value in the third column.
<h2><span class="orange">How to Fix in R: system is exactly singular</span></h2>
One error you may encounter in R is:
<b>Lapack routine dgesv: system is exactly singular: U[2,2] = 0
</b>
This error occurs when you attempt to use the <b>solve()</b> function, but the matrix you’re working with is a singular matrix that does not have a matrix inverse.
This tutorial shares how to resolve this error in practice.
<h3>How to Reproduce the Error</h3>
Suppose we create the following matrix in R:
<b>#create singular matrix
mat &lt;- matrix(c(1, 1, 1, 1), ncol=2, nrow=2)
#view matrix
mat
     [,1] [,2]
[1,]    1    1
[2,]    1    1
</b>
Now suppose we attempt to use the <b>solve()</b> function to calculate the matrix inverse:
<b>#attempt to invert matrix
solve(mat)
Error in solve.default(mat) : 
  Lapack routine dgesv: system is exactly singular: U[2,2] = 0</b>
We receive an error because the matrix that we created does not have an inverse matrix.
<b>Note</b>: Check out  this page  from Wolfram MathWorld that shows 10 different examples of matrices that have no inverse matrix.
By definition, a matrix is singular if it has a determinant of zero.
You can use the <b>det()</b> function to calculate the determinant of a given matrix before you attempt to invert it:
<b>#calculate determinant of matrix
det(mat)
[1] 0
</b>
The determinant of our matrix is zero, which explains why we run into an error.
<h3>How to Fix the Error</h3>
The only way to fix this error is to simply create a matrix that is not singular.
For example, suppose we use the <b>solve()</b> function to invert the following matrix in R:
<b>#create matrix that is not singular
mat &lt;- matrix(c(1, 7, 4, 2), ncol=2, nrow=2)
#view matrix
mat
     [,1] [,2]
[1,]    1    4
[2,]    7    2
#calculate determinant of matrix
det(mat)
[1] -26
#invert matrix
solve(mat)
            [,1]        [,2]
[1,] -0.07692308  0.15384615
[2,]  0.26923077 -0.03846154</b>
We don’t receive any error when inverting the matrix because the matrix is not singular.
<h2><span class="orange">How to Create Table and Include NA Values in R</span></h2>
By default, the <b>table()</b> function in R creates a table of frequency values but does not include the frequency of NA values.
However, you can use the following methods to create a table and include NA values:
<b>Method 1: Create Table and Always Display Number of NA Values</b>
<b>table(df$my_column, useNA = "always")</b>
<b>Method 2: Create Table and Only Display Number of NA Values if there are Some</b>
<b>table(df$my_column, useNA = "ifany")
</b>
The following examples show how to use each method in practice.
<h2>Example 1: Create Table and Always Display Number of NA Values</h2>
Suppose we have the following data frame in R that contains information about various basketball players:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(20, 25, 14, 18, 19, 12, 12, 15))
#view data frame
df
  team points
1    A     20
2    A     25
3    A     14
4    A     18
5    B     19
6    B     12
7    B     12
8    B     15
</b>
We can use the following syntax to create a table for the frequency of values in the <b>team</b> column and display the number of NA values whether or not any exist:
<b>#create frequency table of values in team column, including NA values
table(df$team, useNA = "always")
   A    B  &lt;NA>
   4    4    0 
</b>
Notice that the resulting table shows that there are <b>0</b> NA values in the team column of the data frame.
Since we used the argument <b>useNA = “always”</b>, the table still displayed the number of NA values even though there weren’t any.
<h2>Example 2: Create Table and Only Display Number of NA Values if there are Some</h2>
Once again suppose we have the following data frame in R that contains information about various basketball players:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), points=c(20, 25, 14, 18, 19, 12, 12, 15))
#view data frame
df
  team points
1    A     20
2    A     25
3    A     14
4    A     18
5    B     19
6    B     12
7    B     12
8    B     15
</b>
We can use the following syntax to create a table for the frequency of values in the <b>team</b> column and only display the number of NA values if any exist:
<b>#create frequency table of values in team column, including NA values if any exist
table(df$team, useNA = "ifany")
A B 
4 4 </b>
Notice that the resulting table shows the frequency for the values “A” and “B” in the <b>team</b> column, but does not show the frequency of NA values since there aren’t any.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common operations in R:
 How to Create a Two Way Table in R 
 How to Convert Table to Matrix in R 
 How to Convert Table to Data Frame in R 
<h2><span class="orange">How to Interpret R Message: The following objects are masked</span></h2>
You may sometimes encounter the following message in R:
<b>The following objects are masked from 'package:stats':
    filter, lag
</b>
This message appears when you load some package in R that contains functions that share names with functions that are already loaded from some other package in your current environment.
For example, suppose I load the  dplyr  package in R:
<b>library(dplyr)
Attaching package: 'dplyr'
The following objects are masked from 'package:stats':
    filter, lag
The following objects are masked from 'package:base':
    intersect, setdiff, setequal, union
</b>
From the output we can observe:
1. The functions called <b>filter</b> and <b>lag</b> are masked from the R stats package.
If we use filter() or lag() in our R code, the filter() and lag() functions from <b>dplyr</b> will be used since it was the package loaded most recently that contains these functions.
2. The functions called <b>intersect</b>, <b>setdiff</b>, <b>setequal</b>, and <b>union </b>are masked from the R base package.
If we use intersect(), setdiff(), setequal(), or union() in our R code, these functions from <b>dplyr</b> will be used since it was the package loaded most recently that contains these functions.
<h2>How to Use Masked Functions</h2>
Suppose you would like to use the <b>intersect()</b> function from the <b>base</b> R package, but it is currently masked since there is an <b>intersect()</b> function that exists in the <b>dplyr</b> package we loaded more recently.
To explicitly use the <b>intersect()</b> function from <b>base</b> R, you can use the following syntax with double colons:
<b>base::intersect(x, y)
</b>
In practice, you’ll most likely load several packages in your R environment at once.
To ensure that you’re using the function from some desired package, you can always type the package name with double colons in front of the function name. 
<h2><span class="orange">How to Write Your First tryCatch() Function in R</span></h2>
You can use a <b>tryCatch()</b> function in R to return the value of some expression or produce a custom message if a warning or error is encountered.
This function uses the following basic syntax:
<b>my_function &lt;- function(x, y){
    tryCatch(
        #try to do this
        {
        #some expression
        },
        #if an error occurs, tell me the error
        error=function(e) {
            message('An Error Occurred')
            print(e)
        },
        #if a warning occurs, tell me the warning
        warning=function(w) {
            message('A Warning Occurred')
            print(w)
            return(NA)
        }
    )
}
</b>
The following examples shows how to use a <b>tryCatch()</b> function in practice.
<h3>Example: Create a tryCatch() Function in R</h3>
Suppose we create the following <b>tryCatch()</b> function that attempts to take the log of one value and then divide by a second value.
If an error occurs, we will produce the message “An Error Occurred” and then print the error in R.
If a warning occurs, we will produce the message “A Warning Occurred”, print the warning in R, and then return an NA value.
If neither an error or warning occurs, we’ll simply return the result of the function.
<b>log_and_divide &lt;- function(x, y){
    tryCatch(
        {
        result = log(x) / y
        return(result)
        },
        error=function(e) {
            message('An Error Occurred')
            print(e)
        },
        warning=function(w) {
            message('A Warning Occurred')
            print(w)
            return(NA)
        }
    )
}
</b>
Let’s run this function in different scenarios.
<b>Scenario 1: No error or warning occurs.</b>
The following code shows how to use the function in a scenario where no error or warning occurs.
<b>#run function
log_and_divide(10, 2)
[1] 1.151293
</b>
Since no error or warning occurs, the function simply returns the result of the expression, which turns out to be <b>1.151293</b>.
<b>Scenario 2: An error occurs.</b>
The following code shows how to use the function in a scenario where an error occurs:
<b>#run function
log_and_divide(10)
An Error Occurred
&lt;simpleError in doTryCatch(return(expr), name, parentenv, handler):
  argument "y" is missing, with no default>
</b>
Since we only provided one argument to the function, we receive the message that “<b>An Error Occurred</b>” and we also see the exact error produced by R.
<b>Scenario 3: A warning occurs.</b>
The following code shows how to use the function in a scenario where a warning occurs:
<b>#run function
log_and_divide(-10, 2)
A Warning Occurred
&lt;simpleWarning in log(x): NaNs produced>
[1] NA
</b>
Since we provided a negative value for the first argument, R is unable to calculate the log of a negative value so we receive the message that “<b>A Warning Occurred</b>“, we see the exact warning produced by R, and the function returns <b>NA</b> as a result.
<h2><span class="orange">How to Fix R Error: Unexpected String Constant</span></h2>
One common error you may encounter in R is:
<b>Error: unexpected string constant in...
</b>
This error occurs when you use quotation marks in an incorrect place in R.
The following three examples illustrate when this error can occur in different scenarios.
<h3>Example 1: Unexpected String Constant When Importing File</h3>
Suppose we attempt to import a colon-delimited file as a data frame in R:
<b>#attempt to import colon-delimited file
read.csv("C:\\Users\\Bob\\data.csv", sep";")
Error: unexpected string constant in "read.csv("C:\\Users\\Bob\\data.csv", sep";""
</b>
We receive an error because we forgot to include an equal sign after the <b>sep</b> argument. 
If we add an equal sign, we’ll be able to resolve this error:
<b>#import colon-delimited file
read.csv("C:\\Users\\Bob\\data.csv", sep=";")
  team points
1    A      4
2    B      9
3    C      9
4    D      8
5    E      6</b>
<h3>Example 2: Unexpected String Constant When Viewing Data</h3>
Suppose we attempt to view the values in a vector:
<b>#create numeric vector of values
data &lt;- c(4, 4, 5, 6, 8, 10, 13, 15, 19, 18)
#attempt to view values
data""
Error: unexpected string constant in "data"""
</b>
We receive an error because we accidently included quotations after the vector name.
If we simply remove the quotations we’ll be able to resolve this error:
<b>#create numeric vector of values
data &lt;- c(4, 4, 5, 6, 8, 10, 13, 15, 19, 18)
#view values
data
[1]  4  4  5  6  8 10 13 15 19 18
</b>
<h3>Example 3: Unexpected String Constant When Creating Plots</h3>
Suppose we attempt to view the values in a vector:
<b>#create numeric vector of values
data &lt;- c(3, 3, 4, 5, 5, 7, 8, 12, 15, 16, 17, 19, 22, 25)
#attempt to create boxplot to visualize distribution of values
boxplot(data, col'steelblue') 
Error: unexpected string constant in "boxplot(data, col'steelblue'"
</b>
We receive an error because we forgot to include an equal sign after the <b>col</b> argument.
If we simply add an equal sign, we’ll be able to resolve this error:
<b>#create numeric vector of values
data &lt;- c(3, 3, 4, 5, 5, 7, 8, 12, 15, 16, 17, 19, 22, 25)
#create boxplot to visualize distribution of values
boxplot(data, col='steelblue') </b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/expect1.png">
The <b>unexpected string constant</b> error can occur in many different scenarios, but these three examples illustrate common instances when it can occur.
<h2><span class="orange">How to Find All Unique Combinations of Two Vectors in R</span></h2>
You can use one of the following methods to find all unique combinations of elements from two vectors in R:
<b>Method 1: Use tidyr</b>
<b>library(tidyr)
#find unique combinations of elements from vector1 and vector2
crossing(vector1, vector2)
</b>
<b>Method 2: Use data.table</b>
<b>library(data.table)
#find unique combinations of elements from vector1 and vector2
CJ(vector1, vector2, unique=TRUE) 
</b>
The following examples show how to use each of these methods in practice.
<h2>Example 1: Find Unique Combinations Using tidyr</h2>
The following code shows how to find all unique combinations of elements between two vectors in R by using the <b>crossing()</b> function from the <b>tidyr</b> package:
<b>library(tidyr)
#define vectors
region=c('North', 'South', 'East', 'West')
points=c(0, 5, 10)
#display all unique combinations of region and points
crossing(region, points)
# A tibble: 12 x 2
   region points
      
 1 East        0
 2 East        5
 3 East       10
 4 North       0
 5 North       5
 6 North      10
 7 South       0
 8 South       5
 9 South      10
10 West        0
11 West        5
12 West       10</b>
The result is a data frame that displays all unique combinations of elements between the two vectors.
We can see that there are 12 unique combinations.
If you only want to know the number of unique combinations, you can wrap this function with the <b>nrow()</b> function:
<b>library(tidyr)
#define vectors
region=c('North', 'South', 'East', 'West')
points=c(0, 5, 10)
#display number of unique combinations of region and points
nrow(crossing(region, points))
[1] 12
</b>
Note that the <b>crossing()</b> function can be used with more than two vectors as well.
Simply provide the names of as many vectors as you’d like to the <b>crossing()</b> function to find the total number of unique combinations.
<h2>Example 2: Find Unique Combinations Using data.table</h2>
The following code shows how to find all unique combinations of elements between two vectors in R by using the <b>CJ()</b> function from the <b>data.table </b>package:
<b>library(data.table)
#define vectors
region=c('North', 'South', 'East', 'West')
points=c(0, 5, 10)
#display all unique combinations of region and points
CJ(region, points, unique=TRUE)
    region points
 1:   East      0
 2:   East      5
 3:   East     10
 4:  North      0
 5:  North      5
 6:  North     10
 7:  South      0
 8:  South      5
 9:  South     10
10:   West      0
11:   West      5
12:   West     10</b>
The result is a data frame that displays all unique combinations of elements between the two vectors.
Notice that the results from the<b> CJ()</b> function match the results from the <b>crossing()</b> function.
The <b>CJ()</b> function can also be used with more than two vectors as well.
Simply provide the names of as many vectors as you’d like to the <b>CJ()</b> function to find the total number of unique combinations.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Count Unique Values by Group in R 
 How to Select Unique Rows in a Data Frame in R 
 How to Count Distinct Values Using dplyr 
<h2><span class="orange">R: How to Find Unique Rows Across Multiple Columns</span></h2>
You can use the following methods to find unique rows across multiple columns of a data frame in R:
<b>Method 1: Find Unique Rows Across Multiple Columns (Drop Other Columns)</b>
<b>df_unique &lt;- unique(df[c('col1', 'col2')])
</b>
<b>Method 2: Find Unique Rows Across Multiple Columns (Keep Other Columns)</b>
<b>df_unique &lt;- df[!duplicated(df[c('col1', 'col2')]),]
</b>
The following examples show how to use each of these methods in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(conf=c('East', 'East', 'East', 'West', 'West', 'West'), pos=c('G', 'G', 'F', 'G', 'F', 'F'), points=c(33, 28, 31, 39, 34, 40))
#view data frame
df
  conf pos points
1 East   G     33
2 East   G     28
3 East   F     31
4 West   G     39
5 West   F     34
6 West   F     40
</b>
<h3>Method 1: Find Unique Rows Across Multiple Columns (Drop Other Columns)</h3>
The following code shows how to find unique rows across the <b>conf</b> and <b>pos</b> columns in the data frame:
<b>#find unique rows across conf and pos columns
df_unique &lt;- unique(df[c('conf', 'pos')])
#view results
df_unique 
  conf pos
1 East   G
3 East   F
4 West   G
5 West   F
</b>
The result is four rows that are all unique.
Also notice that the <b>points</b> column was automatically dropped from the results.
<h3>Method 2: Find Unique Rows Across Multiple Columns (Drop Other Columns)</h3>
The following code shows how to find unique rows across the <b>conf</b> and <b>pos</b> columns in the data frame and keep the values in the <b>points</b> column:
<b>#find unique rows across conf and pos columns
df_unique &lt;- df[!duplicated(df[c('conf', 'pos')]),]
#view results
df_unique 
  conf pos points
1 East   G     33
3 East   F     31
4 West   G     39
5 West   F     34
</b>
Notice that only unique rows exist across the <b>conf</b> and <b>pos</b> columns and the values in the <b>points</b> column are kept.
It’s important to note that only the value for the first unique occurrence is kept.
For example, there were two rows that contained “East” and “G” across the first two columns, but only the points value (33) for the first occurrence of this unique combination was kept in the final data frame.
Similarly, there were two rows that contained “West” and “F” across the first two columns, but only the points value (34) for the first occurrence of this unique combination was kept in the final data frame.
<h2><span class="orange">How to Select Unique Rows in a Data Frame in R</span></h2>
You can use the following methods to select unique rows from a data frame in R:
<b>Method 1: Select Unique Rows Across All Columns</b>
<b>library(dplyr)
df %>% distinct()</b>
<b>Method 2: Select Unique Rows Based on One Column</b>
<b>library(dplyr)
df %>% distinct(column1, .keep_all=TRUE)
</b>
<b>Method 3: Select Unique Rows Based on Multiple Columns</b>
<b>library(dplyr)
df %>% distinct(column1, column2, .keep_all=TRUE)</b>
This tutorial explains how to use each method in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'A', 'A', 'B', 'B', 'B', 'B'), position=c('G', 'G', 'F', 'F', 'G', 'G', 'F', 'F'), points=c(10, 10, 8, 14, 15, 15, 17, 17))
#view data frame
df
  team position points
1    A        G     10
2    A        G     10
3    A        F      8
4    A        F     14
5    B        G     15
6    B        G     15
7    B        F     17
8    B        F     17
</b>
<h2>Example 1: Select Unique Rows Across All Columns</h2>
The following code shows how to select rows that have unique values across all columns in the data frame:
<b>library(dplyr)
#select rows with unique values across all columns
df %>% distinct()
  team position points
1    A        G     10
2    A        F      8
3    A        F     14
4    B        G     15
5    B        F     17
</b>
We can see that there are five unique rows in the data frame.
<b>Note</b>: When duplicate rows are encountered, only the first unique row is kept.
<h2>Example 2: Select Unique Rows Based on One Column</h2>
The following code shows how to select unique rows based on the <b>team</b> column only.
<b>library(dplyr)
#select rows with unique values based on team column only
df %>% distinct(team, .keep_all=TRUE)
  team position points
1    A        G     10
2    B        G     15
</b>
Since there are only two unique values in the <b>team</b> column, only the rows with the first occurrence of each value are kept.
<b>Note</b>: The argument <b>.keep_all=TRUE</b> tells R to keep all other columns in the output.
<h2>Example 3: Select Unique Rows Based on Multiple Columns</h2>
The following code shows how to select unique rows based on the <b>team</b> and <b>position</b> columns only.
<b>library(dplyr)
#select rows with unique values based on team and position columns only
df %>% distinct(team, position, .keep_all=TRUE)
  team position points
1    A        G     10
2    A        F      8
3    B        G     15
4    B        F     17
</b>
Four rows are returned, since there are four unique combinations of values across the <b>team</b> and <b>position</b> columns.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Filter for Unique Values Using dplyr 
 How to Filter by Multiple Conditions Using dplyr 
 How to Count Number of Occurrences in Columns in R 
<h2><span class="orange">R: How to Find Unique Values in a Column</span></h2>
You can use the <b>unique()</b> function in R to find unique values in a column of a data frame.
This tutorial provides several examples of how to use this function with the following data frame:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'A', 'B', 'B', 'C', 'C'), points=c(90, 99, 90, 85, 90, 85), assists=c(33, 33, 31, 39, 34, 34), rebounds=c(30, 28, 24, 24, 28, 28))
#view data frame
df
  team points assists rebounds
1    A     90      33       30
2    A     99      33       28
3    B     90      31       24
4    B     85      39       24
5    C     90      34       28
6    C     85      34       28
</b>
<h3>Example 1: Find Unique Values in Column</h3>
The following code shows how to find unique values in the ‘team’ column:
<b>#find unique values in 'team' column
unique(df$team)
[1] "A" "B" "C"
</b>
We can use similar syntax to find unique values in the ‘points’ column:
<b>#find unique values in 'points' column
unique(df$points)
[1] 90 99 85</b>
<h3>Example 2: Find & Sort Unique Values in Column</h3>
The following code shows how to find and sort unique values in the ‘points’ column:
<b>#find and sort unique values in 'points' column
sort(unique(df$points))
[1] 85 90 99
</b>
We can also sort unique values in a descending order:
<b>#find and sort unique values in 'points' column
sort(unique(df$points), decreasing=TRUE)
[1] 99 90 85</b>
<h3>Example 3: Find & Count Unique Values in Column</h3>
The following code shows how to find and count the number of each unique value in the ‘points’ column:
<b>#find and count unique values in 'points' column
table(df$points)
85 90 99 
 2  3  1 </b>
From the output we can see:
The value 85 occurs <b>2</b> times.
The value 90 occurs <b>3</b> times.
The value 99 occurs <b>1</b> time.
<h2><span class="orange">How to Use unlist() Function in R (3 Examples)</span></h2>
You can use the <b>unlist() </b>function in R to quickly convert a list to a vector.
This function uses the following basic syntax:
<b>unlist(x)
</b>
where:
<b>x</b>: The name of an R object
The following examples show how to use this function in different scenarios.
<h3>Example 1: Use unlist() to Convert List to Vector</h3>
Suppose we have the following list in R:
<b>#create list
my_list &lt;- list(A = c(1, 2, 3),
                B = c(4, 5),
                C = 6)
#display list
my_list
$A
[1] 1 2 3
$B
[1] 4 5
$C
[1] 6
</b>
The following code shows how to convert a list to a vector using the <b>unlist()</b> function:
<b>#convert list to vector
new_vector &lt;- unlist(my_list)
#display vector
new_vector
A1 A2 A3 B1 B2  C 
 1  2  3  4  5  6 
</b>
Note that you can specify <b>use.names = FALSE</b> to remove the names from the vector:
<b>#convert list to vector
new_vector &lt;- unlist(my_list, use.names = FALSE)
#display vector
new_vector
[1] 1 2 3 4 5 6</b>
<h3>Example 2: Use unlist() to Convert List to Matrix</h3>
The following code shows how to use <b>unlist()</b> to convert a list to a matrix:
<b>#create list
my_list &lt;- list(1:3, 4:6, 7:9, 10:12, 13:15)
#convert list to matrix
matrix(unlist(my_list), ncol=3, byrow=TRUE)
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
[3,]    7    8    9
[4,]   10   11   12
[5,]   13   14   15
</b>
The result is a matrix with five rows and three columns.
<h3>Example 3: Use unlist() to Sort Values in List</h3>
Suppose we have the following list in R:
<b>#create list
some_list &lt;- list(c(4, 3, 7), 2, c(5, 12, 19)) 
#view list
some_list
[[1]]
[1] 4 3 7
[[2]]
[1] 2
[[3]]
[1]  5 12 19
</b>
Now suppose we attempt to sort the values in the list:
<b>#attempt to sort the values in the list
sort(some_list)
Error in sort.int(x, na.last = na.last, decreasing = decreasing, ...) : 
  'x' must be atomic
</b>
We receive an error because the list must first be converted to a vector for us to sort the values.
We can use the following <b>unlist()</b> function to sort the values:
<b>#sort values in list
sort(unlist(some_list))
[1]  2  3  4  5  7 12 19
</b>
Notice that we’re able to successfully sort the list of values without any error because we first used <b>unlist()</b>, which converted the list to a numeric vector.
<h2><span class="orange">How to Fix: error: ‘\u’ used without hex digits in character string starting “‘c:\u”</span></h2>
One error you may encounter in R is:
<b>Error: '\U' used without hex digits in character string starting "'C:\U"
</b>
This error occurs when you attempt to read a file into R and use backslashes (<b> \</b> ) in the file path.
There are two ways to fix this error:
Use forward slashes (<b> /</b> ) in the file path.
Use double back slashes (<b> \\</b> ) in the file path.
This tutorial shares an example of how to fix this error in practice.
<h3>How to Reproduce the Error</h3>
Suppose we attempt to read in the following CSV file into R:
<b>#attempt to read in CSV file
data &lt;- read.csv('C:\Users\Bob\Desktop\data.csv')
Error: '\U' used without hex digits in character string starting "'C:\U"
</b>
We receive an error because we used backslashes in the file path.
<h3>Method 1: Fix Error by Using Forward Slashes</h3>
One way to fix this error is to use forward slashes (<b> /</b> ) in the file path:
<b>#read in CSV file using forward slashes in file path
data &lt;- read.csv('C:/Users/Bob/Desktop/data.csv')
#view first five rows of data
head(data)
  player assists points
1      A       6     12
2      B       7     19
3      C      14      7
4      D       4      6
5      E       5     10</b>
Notice that we don’t receive an error and we’re able to successfully read in the CSV file.
<h3>Method 2: Fix Error by Using Double Back Slashes</h3>
Another way to fix this error is to use double back slashes (<b> \\</b> ) in the file path:
<b>#read in CSV file using double back slashes in file path
data &lt;- read.csv('C:\\Users\\Bob\\Desktop\\data.csv')
#view first five rows of data
head(data)
  player assists points
1      A       6     12
2      B       7     19
3      C      14      7
4      D       4      6
5      E       5     10</b>
Using this method, we’re also able to successfully read in the CSV file.
<h2><span class="orange">R vs. R-Squared: What’s the Difference?</span></h2>
Two terms that students often get confused in statistics are <b>R</b> and <b>R-squared</b>, often written R<sup>2</sup>.
In the context of  simple linear regression :
<b>R:</b> The correlation between the predictor variable, x, and the response variable, y.
<b>R<sup>2</sup>:</b> The proportion of the variance in the response variable that can be explained by the predictor variable in the regression model.
And in the context of  multiple linear regression :
<b>R:</b> The correlation between the observed values of the response variable and the predicted values of the response variable made by the model.
<b>R<sup>2</sup>:</b> The proportion of the variance in the response variable that can be explained by the predictor variables in the regression model.
Note that the value for R<sup>2</sup> ranges between 0 and 1. The closer the value is to 1, the stronger the relationship between the predictor variable(s) and the response variable.
The following examples show how to interpret the R and R-squared values in both simple linear regression and multiple linear regression models.
<h3>Example 1: Simple Linear Regression</h3>
Suppose we have the following dataset that shows the hours studied and exam score received by 12 students in a certain math class:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/05/r_vs_rsquared1.png">
Using statistical software (like Excel, R, Python, SPSS, etc.), we can fit a simple linear regression model using “study hours” as the predictor variable and “exam score” as the  response variable .
We can find the following output for this model:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/05/r_vs_rsquared3.png">
Here’s how to interpret the R and R-squared values of this model:
<b>R:</b> The correlation between hours studied and exam score is <b>0.959</b>.
<b>R<sup>2</sup></b>: The R-squared for this regression model is <b>0.920</b>. This tells us that 92.0% of the variation in the exam scores can be explained by the number of hours studied.
Also note that the R<sup>2</sup> value is simply equal to the R value, squared:
R<sup>2</sup> = R * R = 0.959 * 0.959 = <b>0.920</b>
<h3>Example 2: Multiple Linear Regression</h3>
Suppose we have the following dataset that shows the hours studied, current student grade, and exam score received by 12 students in a certain math class:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/05/r_vs_rsquared2.png">
Using statistical software, we can fit a multiple linear regression model using “study hours” and “current grade” as the predictor variables and “exam score” as the response variable.
We can find the following output for this model:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/05/r_vs_rsquared4.png">
Here’s how to interpret the R and R-squared values of this model:
<b>R:</b> The correlation between the actual exam scores and the predicted exam scores made by the model is <b>0.978</b>.
<b>R<sup>2</sup></b>: The R-squared for this regression model is <b>0.956</b>. This tells us that 95.6% of the variation in the exam scores can be explained by the number of hours studied and the student’s current grade in the class.
Also note that the R<sup>2</sup> value is simply equal to the R value, squared:
R<sup>2</sup> = R * R = 0.978 * 0.978 = <b>0.956</b>
<h2><span class="orange">How to Handle R Warning: stat_bin() using bins = 30</span></h2>
One common warning you may encounter in R is:
<b>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
</b>
This warning appears when you use <b>geom_histogram()</b> to create a histogram in ggplot2 and fail to specify the number of bins to use in the histogram.
To avoid this warning, you can use the <b>bins</b> argument to specify the number of bins to use:
<b>ggplot(df, aes(x=my_variable)) +
  geom_histogram(bins=10)</b>
The following example shows how to avoid this warning in practice.
<h2>Example: How to Avoid Warning stat_bins() using bins = 30</h2>
Suppose we use the <b>geom_histogram()</b> function from ggplot2 to create a histogram for some variable in a data frame:
<b>library(ggplot2)
#make this example reproducible
set.seed(0)
#create data frame
df &lt;- data.frame(my_values = rnorm(1000))
#view head of data frame
head(df)
   my_values
1  1.2629543
2 -0.3262334
3  1.3297993
4  1.2724293
5  0.4146414
6 -1.5399500
#create histogram
ggplot(df, aes(x=my_values)) +
  geom_histogram(col='black', fill='steelblue')
`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/12/hist30.jpg"487">
Notice that we receive the warning <b>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</b>
It’s worth noting that this is just a warning and the histogram is still created by ggplot2.
However, we can avoid the warning altogether by using the <b>bins</b> argument within <b>geom_histogram()</b> to specify the number of bins to use in the histogram.
For example, we can use the following code to use <b>10</b> bins for the histogram:
<b>#create histogram with 10 bins
ggplot(df, aes(x=my_values)) +
  geom_histogram(col='black', fill='steelblue', bins=10)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/12/hist30_1.jpg"444">
Notice that we don’t receive any warning message this time and the histogram contains exactly 10 bins.
Note that the fewer bins you use, the wider each bin will be.
For example, we could instead use <b>5</b> bins:
<b>#create histogram with 5 bins
ggplot(df, aes(x=my_values)) +
  geom_histogram(col='black', fill='steelblue', bins=5)</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/12/hist30_2.jpg"486">
Notice that there are fewer but wider bins in this histogram.
Feel free to use as many bins as you’d like in your histogram.
<h2>Additional Resources</h2>
The following tutorials explain how to troubleshoot other common errors in R:
 How to Fix in R: names do not match previous names 
 How to Fix in R: NAs Introduced by Coercion 
 How to Fix in R: Subscript out of bounds 
 How to Fix in R: contrasts can be applied only to factors with 2 or more levels 
<h2><span class="orange">How to Get Week Number from Dates in R (With Examples)</span></h2>
You can use the following methods to get the week number from a date in R:
<b>Method 1: Get Week Number Using Base R</b>
<b>strftime(df$date_column, format = '%V')
</b>
<b>Method 2: Get Week Number Using Lubridate Package</b>
<b>library(lubridate)
isoweek(ymd(df$<b>date_column</b>))
</b>
The following examples show how to use each method with the following data frame in R:
<b>#create data frame 
df &lt;- data.frame(date=as.Date(c('1/8/2022', '1/9/2022', '2/10/2022', '2/15/2022',                '3/5/2022', '3/22/2022', '3/27/2022'), '%m/%d/%Y'), sales=c(8, 14, 22, 23, 16, 17, 23))
#view data frame
df
        date sales
1 2022-01-08     8
2 2022-01-09    14
3 2022-02-10    22
4 2022-02-15    23
5 2022-03-05    16
6 2022-03-22    17
7 2022-03-27    23</b>
<h2>Example 1: Get Week Number Using Base R</h2>
The following code shows how to use the <b>strftime()</b> function to get the week number from the <b>date</b> column in the data frame:
<b>#add column to show week number
df$week_num &lt;- strftime(df$date, format = "%V")
#view updated data frame
df
        date sales week_num
1 2022-01-08     8       01
2 2022-01-09    14       01
3 2022-02-10    22       06
4 2022-02-15    23       07
5 2022-03-05    16       09
6 2022-03-22    17       12
7 2022-03-27    23       12</b>
The new column called <b>week_num</b> displays the week number for the value in the <b>date</b> column.
<b>Note</b>: From the documentation, here is how <b>%V%</b> calculates date numbers:  <em>“the week number of the year (Monday as the first day of the week) as a decimal number [01,53]. If the week containing 1 January has four or more days in the new year, then it is considered week 1. Otherwise, it is the last week of the previous year, and the next week is week 1.”</em>
<h2>Example 2: Get Week Number Using Lubridate Package</h2>
The following code shows how to use the <b>isoweek()</b> function from the  lubridate  package to get the week number from the <b>date</b> column in the data frame:
<b>#add column to show week number
df$week_num &lt;- isoweek(ymd(df$date))
#view updated data frame
df
        date sales week_num
1 2022-01-08     8        1
2 2022-01-09    14        1
3 2022-02-10    22        6
4 2022-02-15    23        7
5 2022-03-05    16        9
6 2022-03-22    17       12
7 2022-03-27    23       12</b>
The new column called <b>week_num</b> displays the week number for the value in the <b>date</b> column.
Notice that the week numbers match the ones calculated using the <b>strftime()</b> function in the previous example.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Group Data by Month inR 
 How to Extract Year from Date in R 
 How to Extract Month from Date in R 
 How to Sort a Data Frame by Date in R 
<h2><span class="orange">How to Use with() and within() Functions in R</span></h2>
The <b>with()</b> and <b>within()</b> functions in R can be used to evaluate some expression based on a data frame.
These functions use the following syntax:
<b>with(data, expression)
within(data, expression)</b>
where:
<b>data:</b> The name of the data frame
<b>expression:</b> The expression to evaluate
Here’s the difference between the two functions:
<b>with()</b> evaluates the expression without modifying the original data frame.
<b>within()</b> evaluates the expression and creates a copy of the original data frame.
The following examples show how to use each function in practice with the following data frame:
<b>#create data frame
df &lt;- data.frame(x=c(3, 5, 5, 7, 6, 10), y=c(2, 2, 0, 5, 9, 4))
#view data frame
df
   x y
1  3 2
2  5 2
3  5 0
4  7 5
5  6 9
6 10 4</b>
<h3>Example 1: Use with() Function</h3>
We can use the following <b>with()</b> function to multiply the values between the two columns in the data frame:
<b>#multiply values between x and y
with(df, x*y)
[1]  6 10  0 35 54 40
</b>
The values from column <b>x</b> and column <b>y</b> in the data frame are multiplied together and the result is a vector of length 6.
<h3>Example 2: Use within() Function</h3>
We can use the following <b>within()</b> function to multiply the values between the two columns in the data frame and assign the results to a new column in the data frame:
<b>#multiply values in x and y and assign results to new column z
within(df, z &lt;- x*y)
   x y  z
1  3 2  6
2  5 2 10
3  5 0  0
4  7 5 35
5  6 9 54
6 10 4 40</b>
The results of the multiplication are now stored in a new column named <b>z</b>.
It’s important to note that the <b>within()</b> function creates a copy of the original data frame but does not actually modify the original data frame:
<b>#view original data frame
df
   x y
1  3 2
2  5 2
3  5 0
4  7 5
5  6 9
6 10 4
</b>
To permanently store the results of the multiplication, we must assign the results to a new data frame:
<b>#multiply values in x and y and assign results to new data frame
df_new &lt;- within(df, z &lt;- x*y)
#view new data frame
df_new
   x y  z
1  3 2  6
2  5 2 10
3  5 0  0
4  7 5 35
5  6 9 54
6 10 4 40</b>
<h2><span class="orange">How to Use write.xlsx in R (With Examples)</span></h2>
You can use the <b>write.xlsx</b> function in R to write a data frame to an Excel workbook.
This function uses the following basic syntax:
<b>write.xlsx(x, file, sheetName = "Sheet1", ...)</b>
where:
<b>x</b>: Name of data frame
<b>file</b>: path to output file
<b>sheetName</b>: Sheet name to appear in workbook. Default is “Sheet1”
The following step-by-step example shows how to use the <b>write.xlsx </b>function in practice.
<h3>Step 1: Install & Load xlsx Package</h3>
First, we must install and load the <b>xlsx</b> package in order to use the <b>write.xlsx</b> function:
<b>install.packages('xlsx')     
library(xlsx)        </b>
<h3>Step 2: Create the Data Frame</h3>
Next, let’s create the following data frame in R:
<b>#create data frame
df &lt;- data.frame(team=c('A', 'B', 'C', 'D', 'E'), points=c(99, 90, 86, 88, 95), assists=c(33, 28, 31, 39, 34), rebounds=c(30, 28, 24, 24, 28))
#view data frame
df
  team points assists rebounds
1    A     99      33       30
2    B     90      28       28
3    C     86      31       24
4    D     88      39       24
5    E     95      34       28
</b>
<h3>Step 3: Use write.xlsx to Export Data Frame to Excel File</h3>
Next, let’s use <b>write.xlsx()</b> to write the data frame to a file called <b>my_data.xlsx</b>:
<b>#write data frame to Excel file
write.xlsx(df, 'my_data.xlsx')</b>
The file will automatically be written into the current  working directory .
If I navigate to the current working directory, I can find this Excel file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/xlsx1.jpg">
The values in the Excel workbook match those from the data frame.
<h3>Step 4 (Optional): Use write.xlsx with Custom Arguments</h3>
Note that you can also use the following syntax to change the sheet name in the Excel workbook and suppress the row names:
<b>#write data frame to Excel file
write.xlsx(df, 'my_data.xlsx', sheetName = 'basketball_data', row.names=FALSE)</b>
If I navigate to the current working directory, I can find this Excel file:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/04/xlsx2.jpg"502">
Notice that the sheet name has changed and the first column no longer contains the row numbers.
<h2><span class="orange">How to Create Radar Charts in R (With Examples)</span></h2>
A <b>radar chart</b> (sometimes called a “spider chart”) is a type of chart that offers a unique way to visualize the quantities of several variables.
This tutorial explains how to create the following radar chart in R, using the  fmsb  library:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/10/radarChartR2-1.png">
<h3>Basic Radar Chart in R</h3>
In order to create a radar chart in R, we need our data to meet the following requirements:
Each variable that we’d like to display on the edges of the chart must be its own column.
The first row must contain the max value.
The second row must contain the min value.
The third row must contain the value that you’d like to display on the radar chart.
To illustrate this, we will use the following data frame that contains the number of customers that come into a given shop during each day of the week:
<b>#create data
df &lt;- data.frame(Mon=c(100, 0, 34), Tue=c(100, 0, 48), Wed=c(100, 0, 58), Thu=c(100, 0, 67), Fri=c(100, 0, 55), Sat=c(100, 0, 29), Sun=c(100, 0, 18))  
#view data
df
  Mon Tue Wed Thu Fri Sat Sun
1 100 100 100 100 100 100 100
2   0   0   0   0   0   0   0
3  34  48  58  67  55  29  18</b>
Once the data is in this format, we can use the <b>radarchart() </b>function from the  fmsb  library to create a basic radar chart:
<b>library(fmsb)
radarchart(df)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/10/radarChartR1.png">
<h3>Customizing Radar Charts in R</h3>
We can customize the radar chart by using the following arguments:
<b>pcol: </b>Line color
<b>pfcol: </b>Fill color
<b>plwd: </b>Line width
<b>cglcol: </b>Net color
<b>cglty: </b>Net line type
<b>axislabcol: </b>Axis label color
<b>caxislabels: </b>Vector of axis labels to display
<b>cglwd: </b>Net width
<b>vlcex: </b>Group labels size
The following code shows an example of how to use some of these arguments to create a customized radar chart:
<b>radarchart(df,
    axistype=1, 
    pcol='pink',
    pfcol=rgb(0.9,0.2,0.5,0.3),
    plwd=3, 
    cglcol='grey',
    cglty=1,
    axislabcol='grey',
    cglwd=0.6,
    vlcex=1.1,
    title='Customers per Day'
    )</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/10/radarChartR2-1.png">
You can read more about using rgb() colors in the  R documentation .
<h2><span class="orange">What is the Rand Index? (Definition & Examples)</span></h2>
The <b>Rand index</b> is a way to compare the similarity of results between two different clustering methods.
Often denoted <em>R</em>, the Rand Index is calculated as:
<b><em>R</em> = (a+b) / (<sub>n</sub>C<sub>2</sub>)</b>
where:
<b>a:</b> The number of times a pair of elements belongs to the same cluster across two clustering methods.
<b>b:</b> The number of times a pair of elements belong to difference clusters across two clustering methods.
<b><sub>n</sub>C<sub>2</sub>:</b> The number of unordered pairs in a set of <em>n</em> elements.
The Rand index always takes on a value between 0 and 1 where:
<b>0:</b> Indicates that two clustering methods do not agree on the clustering of any pair of elements.
<b>1:</b> Indicates that two clustering methods perfectly agree on the clustering of every pair of elements.
The following example illustrates how to calculate the Rand index between two clustering methods for a simple dataset.
<h3>Example: How to Calculate the Rand Index</h3>
Suppose we have the following dataset of five elements:
Dataset: {A, B, C, D, E}
And suppose we use two clustering methods that place each element in the following clusters:
Method 1 Clusters: {1, 1, 1, 2, 2}
Method 2 Clusters: {1, 1, 2, 2, 3}
To calculate the Rand index between these clustering methods, we need to first write out every possible unordered pair in the dataset of five elements:
Unordered pairs: {A, B}, {A, C}, {A, D}, {A, E}, {B, C}, {B, D}, {B, E}, {C, D}, {C, E}, {D, E}
There are <b>10</b> unordered pairs.
Next, we need to calculate <b>a</b>, which represents the number of unordered pairs that belong to the same cluster across both clustering methods:
{A, B}
In this case, a = <b>1</b>.
Next, we need to calculate <b>b</b>, which represents the number of unordered pairs that belong to different clusters across both clustering methods:
{A, D}, {A, E}, {B, D}, {B, E}, {C, E}
In this case, b = <b>5</b>.
Lastly, we can calculate the Rand index as:
<em>R</em> = (a+b) / (<sub>n</sub>C<sub>2</sub>)
<em>R</em> = (1+5) / 10
<em>R</em> = 6/10
The Rand index is <b>0.6</b>.
<h3>How to Calculate the Rand Index in R</h3>
We can use the <b>rand.index()</b> function from the <b>fossil</b> package to calculate the Rand index between two clustering methods in R:
<b>library(fossil)
#define clusters
method1 &lt;- c(1, 1, 1, 2, 2)
method2 &lt;- c(1, 1, 2, 2, 3)
#calculate Rand index between clustering methods
rand.index(method1, method2)
[1] 0.6
</b>
The Rand index is <b>0.6</b>. This matches the value that we calculated by hand.
<h3>How to Calculate the Rand Index in Python</h3>
We can define the following function in Python to calculate the Rand index between two clusters:
<b>import numpy as np
from scipy.special import comb
#define Rand index function
def rand_index(actual, pred):
    tp_plus_fp = comb(np.bincount(actual), 2).sum()
    tp_plus_fn = comb(np.bincount(pred), 2).sum()
    A = np.c_[(actual, pred)]
    tp = sum(comb(np.bincount(A[A[:, 0] == i, 1]), 2).sum()
             for i in set(actual))
    fp = tp_plus_fp - tp
    fn = tp_plus_fn - tp
    tn = comb(len(A), 2) - tp - fp - fn
    return (tp + tn) / (tp + fp + fn + tn)
#calculate Rand index
rand_index([1, 1, 1, 2, 2], [1, 1, 2, 2, 3])
0.6</b>
The Rand index turns out to be <b>0.6</b>. This matches the value calculated in the previous examples.
<h2><span class="orange">How to Create a Data Frame with Random Numbers in R</span></h2>
You can use one of the following methods to create a data frame with random numbers in R:
<b>Method 1: Create Data Frame with Random Values in Range</b>
<b>#create data frame of 10 random values between 1 and 20
df &lt;- as.data.frame(matrix(runif(n=10, min=1, max=20), nrow=5))
</b>
<b>Method 2: Create Data Frame with Random Integers in Range</b>
<b>#create data frame of 10 random integers between 1 and 20
df &lt;- as.data.frame(matrix(round(runif(n=10, min=1, max=20), 0), nrow=5))</b>
The following examples show how to use each of these methods in practice.
<h2>Method 1: Create Data Frame with Random Values in Range</h2>
The following code shows how to create a data frame with 5 rows consisting of 10 random values between 1 and 20:
<b>#make this example reproducible
set.seed(1)
#create data frame with 10 random numbers between 1 and 20
df &lt;- as.data.frame(matrix(runif(n=10, min=1, max=20), nrow=5))
#define column names
names(df) &lt;- c('A', 'B')
#view data frame
df
          A         B
1  6.044665 18.069404
2  8.070354 18.948830
3 11.884214 13.555158
4 18.255948 12.953167
5  4.831957  2.173939</b>
The result is a data frame with 5 rows and 2 columns, where each value in the data frame is between 1 and 20.
<h2>Method 2: Create Data Frame with Random Integers in Range</h2>
The following code shows how to create a data frame of 10 random integers between 1 and 50:
<b>#make this example reproducible
set.seed(1)
#create data frame with 10 random integers between 1 and 50
df &lt;- as.data.frame(matrix(round(runif(n=10, min=1, max=50), 0), nrow=5))
#define column names
names(df) &lt;- c('A', 'B')
#view data frame
df
   A  B
1 14 45
2 19 47
3 29 33
4 46 32
5 11  4
</b>
The result is a data frame with 5 rows and 2 columns, where each value in the data frame is an integer between 1 and 50.
Note that the <b>runif()</b> function generates random numbers, <em>including</em> the <b>min</b> and <b>max</b> values.
For example, it’s possible that the data frame above could have included both 1 and 50.
Also note that it’s possible for the same number to appear multiple times in the data frame when using this method.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Create a Vector with Random Numbers in R 
 How to Create a Matrix with Random Numbers in R 
 How to Select Random Samples in R 
<h2><span class="orange">How to Generate Random Dates in Google Sheets</span></h2>
You can use the following basic syntax to generate a random date between two dates in Google Sheets:
<b>=TO_DATE(RANDBETWEEN(DATE(2015,1,1),DATE(2022,12,31))) </b>
This particular formula will generate a random date between 1/1/2015 and 12/13/2022.
The following example shows how to use this formula in practice.
<h2>Example: Generate Random Dates in Google Sheets</h2>
We can type the following formula in cell <b>A2</b> to generate a random date between 1/1/2015 and 12/31/2022:
<b>=TO_DATE(RANDBETWEEN(DATE(2015,1,1),DATE(2022,12,31))) </b>
The following screenshot shows how to use this formula in practice:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/10/randomdate1.jpg"601">
We can see that the formula produced the date 4/30/2018.
If we click and drag this formula down to other cells in column A, the formula will automatically produce a list of random dates between 1/1/2015 and 12/31/2022:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/10/randomdate2.jpg"598">
The result is a list of 20 date that all fall between 1/1/2015 and 12/31/2022.
<b>Note #1</b>: Whenever you update the value of any other cell in the worksheet and press <b>Enter</b>, the value of the random dates will change.
<b>Note #2</b>: If you don’t use the <b>TO_DATE()</b> function in the beginning of the formula, the random date that is generated will be formatted as a numeric value instead of a date.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in Google Sheets:
 How to Add & Subtract Years from Date in Google Sheets 
 How to Sort by Date in Google Sheets 
 How to AutoFill Dates in Google Sheets 
<h2><span class="orange">How to Build Random Forests in R (Step-by-Step)</span></h2>
When the relationship between a set of predictor variables and a  response variable  is highly complex, we often use non-linear methods to model the relationship between them.
One such method is building a  decision tree . However, the downside of using a single decision tree is that it tends to suffer from  high variance . That is, if we split the dataset into two halves and apply the decision tree to both halves, the results could be quite different.
One method that we can use to reduce the variance of a single decision tree is to build a  random forest model , which works as follows:
<b>1.</b> Take <em>b</em> bootstrapped samples from the original dataset.
<b>2.</b> Build a decision tree for each bootstrapped sample.
When building the tree, each time a split is considered, only a random sample of <em>m</em> predictors is considered as split candidates from the full set of <em>p</em> predictors. Typically we choose <em>m</em> to be equal to √<em>p</em>.
<b>3.</b> Average the predictions of each tree to come up with a final model.
It turns out that random forests tend to produce much more accurate models compared to single decision trees and even  bagged models .
This tutorial provides a step-by-step example of how to build a random forest model for a dataset in R.
<h3>Step 1: Load the Necessary Packages</h3>
First, we’ll load the necessary packages for this example. For this bare bones example, we only need one package:
<b>library(randomForest)
</b>
<h3>Step 2: Fit the Random Forest Model</h3>
For this example, we’ll use a built-in R dataset called <b>airquality</b> which contains air quality measurements in New York on 153 individual days.
<b>#view structure of airquality dataset
str(airquality)
'data.frame':153 obs. of  6 variables:
 $ Ozone  : int  41 36 12 18 NA 28 23 19 8 NA ...
 $ Solar.R: int  190 118 149 313 NA NA 299 99 19 194 ...
 $ Wind   : num  7.4 8 12.6 11.5 14.3 14.9 8.6 13.8 20.1 8.6 ...
 $ Temp   : int  67 72 74 62 56 66 65 59 61 69 ...
 $ Month  : int  5 5 5 5 5 5 5 5 5 5 ...
 $ Day    : int  1 2 3 4 5 6 7 8 9 10 ...
#find number of rows with missing values
sum(!complete.cases(airquality))
[1] 42
</b>
This dataset has 42 rows with missing values, so before we fit a random forest model we’ll fill in the missing values in each column with the column medians:
<b>#replace NAs with column medians
for(i in 1:ncol(airquality)) {
  airquality[ , i][is.na(airquality[ , i])] &lt;- median(airquality[ , i], na.rm=TRUE)
}
</b>
<b>Related:</b>  How to Impute Missing Values in R 
The following code shows how to fit a random forest model in R using the <b>randomForest()</b> function from the  randomForest  package.
<b>#make this example reproducible
set.seed(1)
#fit the random forest model
model &lt;- randomForest(
  formula = Ozone ~ .,
  data = airquality
)
#display fitted model
model
Call:
 randomForest(formula = Ozone ~ ., data = airquality) 
               Type of random forest: regression     Number of trees: 500
No. of variables tried at each split: 1
          Mean of squared residuals: 327.0914    % Var explained: 61
#find number of trees that produce lowest test MSE
which.min(model$mse)
[1] 82
#find RMSE of best model
sqrt(model$mse[which.min(model$mse)]) 
[1] 17.64392
</b>
From the output we can see that the model that produced the lowest test mean squared error (MSE) used <b>82</b> trees.
We can also see that the root mean squared error of that model was <b>17.64392</b>. We can think of this as the average difference between the predicted value for Ozone and the actual observed value.
We can also use the following code to produce a plot of the test MSE based on the number of trees used:
<b>#plot the test MSE by number of trees
plot(model)
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomForestR1.png">
And we can use the <b>varImpPlot()</b> function to create a plot that displays the importance of each predictor variable in the final model:
<b>#produce variable importance plot
varImpPlot(model) 
</b>
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomForestR2.png">
The x-axis displays the average increase in node purity of the regression trees based on splitting on the various predictors displayed on the y-axis.
From the plot we can see that <em>Wind</em> is the most important predictor variable, followed closely by <em>Temp</em>.
<h3>Step 3: Tune the Model</h3>
By default, the <b>randomForest()</b> function uses 500 trees and (total predictors/3) randomly selected predictors as potential candidates at each split. We can adjust these parameters by using the <b>tuneRF()</b> function.
The following code shows how to find the optimal model by using the following specifications:
<b>ntreeTry:</b> The number of trees to build.
<b>mtryStart:</b> The starting number of predictor variables to consider at each split.
<b>stepFactor:</b> The factor to increase by until the out-of-bag estimated error stops improving by a certain amount.
<b>improve:</b> The amount that the out-of-bag error needs to improve by to keep increasing the step factor.
<b>model_tuned &lt;- tuneRF(
               x=airquality[,-1], #define predictor variables
               y=airquality$Ozone, #define response variable
               ntreeTry=500,
               mtryStart=4, 
               stepFactor=1.5,
               improve=0.01,
               trace=FALSE #don't show real-time progress
               )
</b>
This function produces the following plot, which displays the number of predictors used at each split when building the trees on the x-axis and the out-of-bag estimated error on the y-axis:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomForestR3.png">
We can see that the lowest OOB error is achieved by using <b>2</b> randomly chosen predictors at each split when building the trees.
This actually matches the default parameter (total predictors/3 = 6/3 = 2) used by the initial <b>randomForest()</b> function.
<h3>Step 4: Use the Final Model to Make Predictions</h3>
Lastly, we can use the fitted random forest model to make predictions on new observations.
<b>#define new observation
new &lt;- data.frame(Solar.R=150, Wind=8, Temp=70, Month=5, Day=5)
#use fitted bagged model to predict Ozone value of new observation
predict(model, newdata=new)
27.19442
</b>
Based on the values of the predictor variables, the fitted random forest model predicts that the Ozone value will be <b>27.19442 </b>on this particular day.
The complete R code used in this example can be found  here .
<h2><span class="orange">A Simple Introduction to Random Forests</span></h2>
When the relationship between a set of predictor variables and a  response variable  is highly complex, we often use non-linear methods to model the relationship between them.
One such method is  classification and regression trees  (often abbreviated CART), which use a set of predictor variables to build <em>decision trees</em> that predict the value of a response variable.
<figure id="attachment_12094" aria-describedby="caption-attachment-12094" style="width: 453px"><img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/tree3.png"><figcaption id="caption-attachment-12094"><b>Example of a regression tree that uses years of experience and average home runs to predict the salary of a professional baseball player.</b></figcaption></figure>The benefit of decision trees is that they’re easy to interpret and visualize. The downsize is that they tend to suffer from  high variance . That is, if we split a dataset into two halves and apply a decision tree to both halves, the results could be quite different.
One way to reduce the variance of decision trees is to use a method known as  bagging , which works as follows:
<b>1.</b> Take <em>b</em> bootstrapped samples from the original dataset.
<b>2.</b> Build a decision tree for each bootstrapped sample.
<b>3.</b> Average the predictions of each tree to come up with a final model.
The benefit of this approach is that a bagged model typically offers an improvement in test error rate compared to a single decision tree.
The downside is that the predictions from the collection of bagged trees can be highly correlated if there happens to be a very strong predictor in the dataset. In this case, most or all of the bagged trees will use this predictor for the first split, which will result in trees that are similar to each other and have highly correlated predictions.
Thus, when we average the predictions of each tree to come up with a final bagged model, it’s possible that this model doesn’t actually reduce the variance by much compared to a single decision tree.
One way to get around this issue is to use a method known as <b>random forests</b>.
<h3>What Are Random Forests?</h3>
Similar to bagging, random forests also take <em>b</em> bootstrapped samples from an original dataset.
However, when building a decision tree for each bootstrapped sample, each time a split in a tree is considered, only a random sample of <em>m</em> predictors is considered as split candidates from the full set of <em>p </em>predictors.
So, here’s the full method that random forests use to build a model:
<b>1.</b> Take <em>b</em> bootstrapped samples from the original dataset.
<b>2.</b> Build a decision tree for each bootstrapped sample.
When building the tree, each time a split is considered, only a random sample of <em>m</em> predictors is considered as split candidates from the full set of <em>p</em> predictors.
<b>3.</b> Average the predictions of each tree to come up with a final model.
By using this method, the collection of trees in a random forest is <b>decorrelated</b> compared to the trees produced by bagging.
Thus, when we take the average predictions of each tree to come up with a final model it tends to have less variability and results in a lower test error rate compared to a bagged model.
When using random forests, we typically consider <em>m </em>= √<em>p</em> predictors as split candidates each time we split a decision tree.
For example, if we have <em>p</em> = 16 total predictors in a dataset then we typically only consider <em>m</em> = √16 = 4 predictors as potential split candidates at each split.
<b>Technical Note:</b>
 
It’s interesting to note that if we choose <em>m</em> = <em>p</em> (i.e. we consider all predictors as split candidates at each split) then this is equivalent to simply using bagging.
<h3>Out-of-Bag Error Estimation</h3>
Similar to bagging, we can calculate the test error of a random forest model by using <b>out-of-bag estimation</b>.
It can be shown that each bootstrapped sample contains about 2/3 of the observations from the original dataset. The remaining 1/3 of the observations not used to fit the tree are referred to as <b>out-of-bag (OOB) observations</b>. 
We can predict the value for the ith observation in the original dataset by taking the average prediction from each of the trees in which that observation was OOB.
We can use this approach to make a prediction for all <em>n</em> observations in the original dataset and thus calculate an error rate, which is a valid estimate of the test error.
The benefit of using this approach to estimate the test error is that it’s much quicker than  k-fold cross-validation , especially when the dataset is large.
<h3>The Pros & Cons of Random Forests</h3>
Random forests offer the following <b>benefits</b>:
In most cases, random forests will offer an improvement in accuracy compared to bagged models and especially compared to single decision trees.
Random forests are robust to outliers.
No pre-processing is required to use random forests.
However, random forests come with the following potential <b>drawbacks:</b>
They’re difficult to interpret.
They can be computationally intensive (i.e. slow) to build on large datasets.
In practice, data scientists typically use random forests to maximize predictive accuracy so the fact that they’re not easily interpretable is usually not an issue.
<h2><span class="orange">How to Create a Matrix with Random Numbers in R</span></h2>
You can use one of the following methods to create a matrix with random numbers in R:
<b>Method 1: Create Matrix with Random Values in Range</b>
<b>#create matrix of 10 random values between 1 and 20
random_matrix &lt;- matrix(runif(n=10, min=1, max=20), nrow=5)
</b>
<b>Method 2: Create Matrix with Random Integers in Range</b>
<b>#create matrix of 10 random integers between 1 and 20
random_matrix &lt;- matrix(round(runif(n=10, min=1, max=20), 0), nrow=5)</b>
The following examples show how to use each of these methods in practice.
<h2>Method 1: Create Matrix with Random Values in Range</h2>
The following code shows how to create a matrix with 5 rows consisting of 10 random values between 1 and 20:
<b>#make this example reproducible
set.seed(1)
#create matrix with 10 random numbers between 1 and 20
random_matrix &lt;- matrix(runif(n=10, min=1, max=20), nrow=5)
#view matrix
random_matrix
          [,1]      [,2]
[1,]  6.044665 18.069404
[2,]  8.070354 18.948830
[3,] 11.884214 13.555158
[4,] 18.255948 12.953167
[5,]  4.831957  2.173939</b>
The result is a matrix with 5 rows and 2 columns, where each value in the matrix is between 1 and 20.
<h2>Method 2: Create Matrix with Random Integers in Range</h2>
The following code shows how to create a matrix of 10 random integers between 1 and 50:
<b>#make this example reproducible
set.seed(1)
#create matrix with 10 random integers between 1 and 50
random_matrix &lt;- matrix(round(runif(n=10, min=1, max=50), 0), nrow=5)
#view matrix
random_matrix
     [,1] [,2]
[1,]   14   45
[2,]   19   47
[3,]   29   33
[4,]   46   32
[5,]   11    4
</b>
The result is a matrix with 5 rows and 2 columns, where each value in the matrix is an integer between 1 and 50.
Note that the <b>runif()</b> function generates random numbers, <em>including</em> the <b>min</b> and <b>max</b> values.
For example, it’s possible that the matrix above could have included both 1 and 50.
Also note that it’s possible for the same number to appear multiple times in the matrix when using this method.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Create a Vector with Random Numbers in R 
 How to Select Random Samples in R 
<h2><span class="orange">How to Select a Random Sample in Excel (Step-by-Step)</span></h2>
Often you may want to select a random sample from a dataset in Excel. Fortunately this is easy to do using the <b>RAND()</b> function, which generates a random number between 0 and 1.
This tutorial provides a step-by-step example of how to use this function to select a random sample in Excel.
<h3>Step 1: Create a Dataset</h3>
First, enter the values of your dataset into a single column. For this example, we’ll enter 20 different values in column A:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomSampleExcel1-1.png">
<h3>Step 2: Create a List of Random Values</h3>
Next, type <b>=RAND()</b> into cell B2. This creates a random value between 0 and 1.
Next, hover over the bottom right corner of cell B2 until a tiny <b>+</b> appears and then double click. This will copy the <b>=RAND()</b> formula down to all of the remaining cells in column B:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomSampleExcel2.png">
<h3>Step 3: Copy & Paste the Random Values</h3>
Next, highlight the values in column B and click <b>Ctrl + C</b>. This will copy all of the values. Next, right click on cell C2 and choose <b>Paste Values</b>.
Note that the values in column B may change once you do this, but don’t worry about this.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomSampleExcel3.png">
Lastly, highlight the values in column C and drag them to replace the values in column B.
A popup box will appear that says “There’s already data here. Do you want to replace it?” Click <b>OK</b>.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomSampleExcel4.png">
<h3>Step 4: Sort by the Random Values</h3>
Next, highlight cells A1:B21. Then click the <b>Data</b> tab along the top ribbon, then click <b>Sort</b> within the <b>Sort & Filter </b>section. Sort the values by <b>Random Number </b>smallest to largest.
The values will be sorted based on the random number, from smallest to largest:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomSampleExcel5.png">
<h3>Step 5: Select the Random Sample</h3>
Lastly, choose the first <em>n </em>rows to be in your random sample. For example, if you want a random sample of size 5, then choose the first 5 raw data values to be included in your sample.
In this example, our random sample would include the first 5 values: 8, 18, 26, 24, 24.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/11/randomSampleExcel.png">
<h2><span class="orange">How to Select a Random Sample in Google Sheets</span></h2>
Often you may want to select a random sample from a dataset in Google Sheets. Fortunately this is easy to do using the <b>RAND()</b> function, which generates a random number between 0 and 1.
The following step-by-step example shows how to use this function to select a random sample in Google Sheets.
<h3>Step 1: Create a Dataset</h3>
First, we’ll enter the values of a dataset into a single column:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/randomSample1.png">
<h3>Step 2: Create a List of Random Values</h3>
Next, type <b>=RAND()</b> into cell B2. This creates a random value between 0 and 1.
Copy and paste this formula into every remaining cell in column B:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/randomSample2.png">
<h3>Step 3: Copy & Paste the Random Values</h3>
Next, highlight the values in column B and click <b>Ctrl + C</b>. This will copy all of the values. Next, right click on cell C2 and choose <b>Paste special > Paste values only</b>.
Note that the values in column B may change once you do this, but don’t worry about this.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/randomSample3.png">
Lastly, highlight the values in column C and drag them to replace the values in column B.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/randomSample4.png">
<h3>Step 4: Sort by the Random Values</h3>
Next, highlight cells A2:B16. Then click the <b>Data</b> tab along the top ribbon, then click <b>Sort range</b>.
Choose to sort by the values of Column B from A to Z, then click <b>Sort</b>:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/randomSample5.png">
The values will be sorted based on the random number, from smallest to largest:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/randomSample6.png">
<h3>Step 5: Select the Random Sample</h3>
Lastly, choose the first <em>n </em>rows to be in your random sample. For example, if you want a random sample of size 5, then choose the first 5 raw data values to be included in your sample.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/10/randomSample7.png">
In this example, our random sample would include the first 5 values: <b>5</b>, <b>20</b>, <b>14</b>, <b>13</b>, <b>8</b>.
<h2><span class="orange">How to Select Random Samples in R (With Examples)</span></h2>
To select a  random sample  in R we can use the <b>sample() </b>function, which uses the following syntax:
<b>sample(x, size, replace = FALSE, prob = NULL)</b>
where:
<b>x:</b> A vector of elements from which to choose.
<b>size: </b>Sample size.
<b>replace: </b>Whether to sample with replacement or not. Default is FALSE.
<b>prob: </b>Vector of probability weights for obtaining elements from vector. Default is NULL.
This tutorial explains how to use this function to select a random sample in R from both a vector and a data frame.
<h3>Example 1: Random Sample from a Vector</h3>
The following code shows how to select a random sample from a vector <b>without replacement</b>:
<b>#create vector of data
data &lt;- c(1, 3, 5, 6, 7, 8, 10, 11, 12, 14)
#select random sample of 5 elements without replacement
sample(x=data, size=5)
[1] 10 12  5 14  7
</b>
The following code shows how to select a random sample from a vector <b>with replacement</b>:
<b>#create vector of data
data &lt;- c(1, 3, 5, 6, 7, 8, 10, 11, 12, 14)
#select random sample of 5 elements with replacement
sample(x=data, size=5, replace=TRUE)
[1] 12  1  1  6 14</b>
<h3>Example 2: Random Sample from a Data Frame</h3>
The following code shows how to select a random sample from a data frame:
<b>#create data frame
df &lt;- data.frame(x=c(3, 5, 6, 6, 8, 12, 14), y=c(12, 6, 4, 23, 25, 8, 9), z=c(2, 7, 8, 8, 15, 17, 29))
#view data frame 
df
   x  y  z
1  3 12  2
2  5  6  7
3  6  4  8
4  6 23  8
5  8 25 15
6 12  8 17
7 14  9 29
#select random sample of three rows from data frame
rand_df &lt;- df[sample(nrow(df), size=3), ]
#display randomly selected rows
rand_df
   x  y  z
4  6 23  8
7 14  9 29
1  3 12  2
</b>
Here’s what’s happening in this bit of code:
<b>1.</b> To select a subset of a data frame in R, we use the following syntax: df[rows, columns]
<b>2.</b> In the code above, we randomly select a sample of 3 rows from the data frame and <em>all </em>columns.
<b>3.</b> The end result is a subset of the data frame with 3 randomly selected rows.
It’s important to note that each time we use the <b>sample()</b> function, R will select a different sample since the function chooses values randomly.
In order to replicate the results of some analysis, be sure to use <b>set.seed(some number)</b> so that the sample() function chooses the same random sample each time. For example:
<b>#make this example reproducible
set.seed(23)
#create data frame
df &lt;- data.frame(x=c(3, 5, 6, 6, 8, 12, 14), y=c(12, 6, 4, 23, 25, 8, 9), z=c(2, 7, 8, 8, 15, 17, 29))
#select random sample of three rows from data frame
rand_df &lt;- df[sample(nrow(df), size=3), ]
#display randomly selected rows
rand_df
   x  y  z
5  8 25 15
2  5  6  7
6 12  8 17</b>
Each time you run the above code, the same 3 rows of the data frame will be selected each time. 
<h2><span class="orange">Random Selection vs. Random Assignment</span></h2>
<b>Random selection</b> and <b>random assignment </b>are two techniques in statistics that are commonly used, but are commonly confused.
<b>Random selection </b>refers to the process of randomly <em>selecting</em> individuals from a population to be involved in a study.
<b>Random assignment </b>refers to the process of randomly <em>assigning </em>the individuals in a study to either a treatment group or a control group.
You can think of random selection as the process you use to “get” the individuals in a study and you can think of random assignment as what you “do” with those individuals once they’re selected to be part of the study.
<h2>The Importance of Random Selection and Random Assignment</h2>
When a study uses <b>random selection</b>, it selects individuals from a population using some random process. For example, if some population has 1,000 individuals then we might use a computer to randomly select 100 of those individuals from a database. This means that each individual is equally likely to be selected to be part of the study, which increases the chances that we will obtain a  representative sample  – a sample that has similar characteristics to the overall population.
By using a representative sample in our study, we’re able to generalize the findings of our study to the population. In statistical terms, this is referred to as having <b>external validity</b> – it’s valid to externalize our findings to the overall population.
When a study uses <b>random assignment</b>, it randomly assigns individuals to either a treatment group or a control group. For example, if we have 100 individuals in a study then we might use a random number generator to randomly assign 50 individuals to a control group and 50 individuals to a treatment group. 
By using random assignment, we increase the chances that the two groups will have roughly similar characteristics, which means that any difference we observe between the two groups can be attributed to the treatment. This means the study has <b>internal validity </b>– it’s valid to attribute any differences between the groups to the treatment itself as opposed to differences between the individuals in the groups.
<h2>Examples of Random Selection and Random Assignment</h2>
It’s possible for a study to use both random selection and random assignment, or just one of these techniques, or neither technique. A strong study is one that uses both techniques.
The following examples show how a study could use both, one, or neither of these techniques, along with the effects of doing so.
<h3>Example 1: Using both Random Selection and Random Assignment</h3>
<b>Study: </b>Researchers want to know whether a new diet leads to more weight loss than a standard diet in a certain community of 10,000 people. They recruit 100 individuals to be in the study by using a computer to randomly select 100 names from a database. Once they have the 100 individuals, they once again use a computer to randomly assign 50 of the individuals to a control group (e.g. stick with their standard diet) and 50 individuals to a treatment group (e.g. follow the new diet). They record the total weight loss of each individual after one month.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/01/randomAssign1.jpg">
<b>Results: </b>The researchers used random selection to obtain their sample and random assignment when putting individuals in either a treatment or control group. By doing so, they’re able to generalize the findings from the study to the overall population <em>and </em>they’re able to attribute any differences in average weight loss between the two groups to the new diet.
<h3>Example 2: Using only Random Selection</h3>
<b>Study: </b>Researchers want to know whether a new diet leads to more weight loss than a standard diet in a certain community of 10,000 people. They recruit 100 individuals to be in the study by using a computer to randomly select 100 names from a database. However, they decide to assign individuals to groups based solely on gender. Females are assigned to the control group and males are assigned to the treatment group. They record the total weight loss of each individual after one month.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/01/randomAssign2.jpg">
<b>Results: </b>The researchers used random selection to obtain their sample, but they did not use random assignment when putting individuals in either a treatment or control group. Instead, they used a specific factor – gender – to decide which group to assign individuals to. By doing this, they’re able to generalize the findings from the study to the overall population but they are <em>not </em>able to attribute any differences in average weight loss between the two groups to the new diet. The internal validity of the study has been compromised because the difference in weight loss could actually just be due to gender, rather than the new diet.
<h3>Example 3: Using only Random Assignment</h3>
<b>Study: </b>Researchers want to know whether a new diet leads to more weight loss than a standard diet in a certain community of 10,000 people. They recruit 100 males athletes to be in the study. Then, they use a computer program to randomly assign 50 of the male athletes to a control group and 50 to the treatment group. They record the total weight loss of each individual after one month.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/01/randomAssign3.jpg">
<b>Results: </b>The researchers did not use random selection to obtain their sample since they specifically chose 100 male athletes. Because of this, their sample is not representative of the overall population so their external validity is compromised – they will not be able to generalize the findings from the study to the overall population. However, they did use random assignment, which means they can attribute any difference in weight loss to the new diet.
<h3>Example 4: Using Neither Technique</h3>
<b>Study: </b>Researchers want to know whether a new diet leads to more weight loss than a standard diet in a certain community of 10,000 people. They recruit 50 males athletes and 50 female athletes to be in the study. Then, they assign all of the female athletes to the control group and all of the male athletes to the treatment group. They record the total weight loss of each individual after one month.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/01/randomAssign4.jpg">
<b>Results: </b>The researchers did not use random selection to obtain their sample since they specifically chose 100 athletes. Because of this, their sample is not representative of the overall population so their external validity is compromised – they will not be able to generalize the findings from the study to the overall population. Also, they split individuals into groups based on gender rather than using random assignment, which means their internal validity is also compromised – differences in weight loss might be due to gender rather than the diet.
<h2><span class="orange">10 Examples of Random Variables in Real Life</span></h2>
A  random variable  is a variable whose possible values are outcomes of a random process.
There are two types of random variables:
<b>Discrete</b>: Can take on only a countable number of distinct values like 0, 1, 2, 3, 50, 100, etc.
<b>Continuous</b>: Can take on an infinite number of possible values like 0.03, 1.2374553, etc.
In this article we share 10 examples of random variables in different real-life situations.
<h3>Example 1: Number of Items Sold (Discrete)</h3>
One example of a discrete random variable is the <b>number of items sold</b> at a store on a certain day.
Using historical sales data, a store could create a probability distribution that shows how likely it is that they sell a certain number of items in a day.
For example:
<table><tbody>
<tr>
<th style="text-align: center;"><b>Number of Items</b></th>
<th style="text-align: center;"><b>Probability</b></th>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">.004</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">.023</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">.065</td>
</tr>
<tr>
<td style="text-align: center;">. . .</td>
<td style="text-align: center;">. . .</td>
</tr>
</tbody></table>
The probability that they sell 0 items is .004, the probability that they sell 1 item is .023, etc.
<h3>Example 2: Number of Customers (Discrete)</h3>
Another example of a discrete random variable is the <b>number of customers</b> that enter a shop on a given day.
Using historical data, a shop could create a probability distribution that shows how likely it is that a certain number of customers enter the store.
For example:
<table><tbody>
<tr>
<th style="text-align: center;"><b>Number of Customers</b></th>
<th style="text-align: center;"><b>Probability</b></th>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">.01</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">.03</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">.04</td>
</tr>
<tr>
<td style="text-align: center;">. . .</td>
<td style="text-align: center;">. . .</td>
</tr>
</tbody></table>
<h3>Example 3: Number of Defective Products (Discrete)</h3>
Another example of a discrete random variable is the <b>number of defective products</b> produced per batch by a certain manufacturing plant.
Using historical data on defective products, a plant could create a probability distribution that shows how likely it is that a certain number of products will be defective in a given batch.
For example:
<table><tbody>
<tr>
<th style="text-align: center;"><b>Number of Defective Products</b></th>
<th style="text-align: center;"><b>Probability</b></th>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">.44</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">.12</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">.02</td>
</tr>
<tr>
<td style="text-align: center;">. . .</td>
<td style="text-align: center;">. . .</td>
</tr>
</tbody></table>
<h3>Example 4: Number of Traffic Accidents (Discrete)</h3>
Another example of a discrete random variable is the <b>number of traffic accidents</b> that occur in a specific city on a given day.
Using historical data, a police department could create a probability distribution that shows how likely it is that a certain number of accidents occur on a given day.
For example:
<table><tbody>
<tr>
<th style="text-align: center;"><b>Number of Traffic Accidents</b></th>
<th style="text-align: center;"><b>Probability</b></th>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">.22</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">.45</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">.11</td>
</tr>
<tr>
<td style="text-align: center;">. . .</td>
<td style="text-align: center;">. . .</td>
</tr>
</tbody></table>
<h3>Example 5: Number of Home Runs (Discrete)</h3>
Another example of a discrete random variable is the <b>number of home runs</b> hit by a certain baseball team in a game.
Using historical data, sports analysts could create a probability distribution that shows how likely it is that the team hits a certain number of home runs in a given game.
For example:
<table><tbody>
<tr>
<th style="text-align: center;"><b>Number of Home Runs</b></th>
<th style="text-align: center;"><b>Probability</b></th>
</tr>
<tr>
<td style="text-align: center;">0</td>
<td style="text-align: center;">.31</td>
</tr>
<tr>
<td style="text-align: center;">1</td>
<td style="text-align: center;">.39</td>
</tr>
<tr>
<td style="text-align: center;">2</td>
<td style="text-align: center;">.12</td>
</tr>
<tr>
<td style="text-align: center;">. . .</td>
<td style="text-align: center;">. . .</td>
</tr>
</tbody></table>
<h3>Example 6: Marathon Time (Continuous)</h3>
One example of a continuous random variable is the <b>marathon time</b> of a given runner.
This is an example of a continuous random variable because it can take on an infinite number of values. 
For example, a runner might complete the marathon in 3 hours 20 minutes 12.0003433 seconds. Or they may complete the marathon in 4 hours 6 minutes 2.28889 seconds, etc.
In this scenario, we could use historical marathon times to create a probability distribution that tells us the probability that a given runner finishes between a certain time interval.
<h3>Example 7: Interest Rate (Continuous)</h3>
Another example of a continuous random variable is the <b>interest rate</b> of loans in a certain country.
This is a continuous random variable because it can take on an infinite number of values. For example, a loan could have an interest rate of 3.5%, 3.765555%, 4.00095%, etc.
In this scenario, we could use historical interest rates to create a probability distribution that tells us the probability that a loan will have an interest rate within a certain interval.
<h3>Example 8: Animal Weight (Continuous)</h3>
Another example of a continuous random variable is the <b>weight</b> of a certain animal like a dog.
This is a continuous random variable because it can take on an infinite number of values. For example, a dog might weigh 30.333 pounds, 50.340999 pounds, 60.5 pounds, etc.
In this case, we could collect data on the weight of dogs and create a probability distribution that tells us the probability that a randomly selected dog weighs between two different amounts.
<h3>Example 9: Plant Height (Continuous)</h3>
Another example of a continuous random variable is the <b>height</b> of a certain species of plant.
This is a continuous random variable because it can take on an infinite number of values. For example, a plant might have a height of 6.5555 inches, 8.95 inches, 12.32426 inches, etc.
In this case, we could collect data on the height of this species of plant and create a probability distribution that tells us the probability that a randomly selected plant has a height between two different values.
<h3>Example 10: Distance Traveled (Continuous)</h3>
Another example of a continuous random variable is the <b>distance traveled </b>by a certain wolf during migration season.
This is a continuous random variable because it can take on an infinite number of values. For example, a wolf may travel 40.335 miles, 80.5322 miles, 105.59 miles, etc.
In this scenario, we could collect data on the distance traveled by wolves and create a probability distribution that tells us the probability that a randomly selected wolf will travel within a certain distance interval.
<h2><span class="orange">What Are Random Variables?</span></h2>
A <b>random</b> <b>variable</b>, typically denoted as X, is a variable whose possible values are outcomes of a random process.
There are two types of random variables: <b>discrete</b> and <b>continuous</b>.
<h3>Discrete Random Variables</h3>
A <b>discrete random variable</b> is a variable which can take on only a countable number of distinct values like 0, 1, 2, 3, 4, 5…100, 1 million, etc. Some examples of discrete random variables include:
The number of times a coin lands on tails after being flipped 20 times.
The number of times a dice lands on the number <em>4 </em>after being rolled 100 times.
The number of defective widgets in a box of 50 widgets.
A <b>probability distribution </b>for a discrete random variable tells us the probability that the random variable takes on certain values.
For example, suppose we roll a fair die one time. If we let X denote the probability that the die lands on a certain number, then the probability distribution can be written as:
<b>P(X=1):</b> 1/6
<b>P(X=2):</b> 1/6
<b>P(X=3):</b> 1/6
<b>P(X=4):</b> 1/6
<b>P(X=5):</b> 1/6
<b>P(X=6):</b> 1/6
<b>Note:</b>
 
For a probability distribution to be valid, it must satisfy the following two criteria:
 
<b>1. </b>The probability for each outcome must be between 0 and 1.
<b>2. </b>The sum of all of the probabilities must add up to 1.
 
Notice that the probability distribution for the die roll satisfies both of these criteria:
 
<b>1.</b> The probability for each outcome is between 0 and 1.
<b>2.</b> The sum of all of the probabilities add up to 1.
We can use a histogram to visualize the probability distribution:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/04/randomVariable1-2.png">
A <b>cumulative probability distribution </b>for a discrete random variable tells us the probability that the variable takes on a value <em>equal to or less than </em>some value.
For example, the cumulative probability distribution for a die roll would look like:
<b>P(X≤1):</b> 1/6
<b>P(X≤2):</b> 2/6
<b>P(X≤3):</b> 3/6
<b>P(X≤4):</b> 4/6
<b>P(X≤5):</b> 5/6
<b>P(X≤6):</b> 6/6
The probability that the die lands on a one or less is simply 1/6, since it can’t land on a number less than one.
The probability that it lands on a two or less is P(X=1) + P(X=2) = 1/6 + 1/6 = 2/6.
Similarly, the probability that it lands on a three or less is P(X=1) + P(X=2) + P(X=3) = 1/6 + 1/6 + 1/6 = 3/6, and so on.
We can also use a histogram to visualize the cumulative probability distribution:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2020/04/randomVariable2.png">
<h3>Continuous Random Variables</h3>
A <b>continuous random variable</b> is a variable which can take on an infinite number of possible values. Some examples of continuous random variables include:
Weight of an animal
Height of a person
Time required to run a marathon
For example, the height of a person could be 60.2 inches, 65.2344 inches, 70.431222 inches, etc. There are an infinite amount of possible values for height.
<b>Rule of Thumb:</b>
 
If you can <i>count </i>the number of outcomes, then you are working with a discrete random variable – e.g. counting the number of times a coin lands on heads.
 
But if you can <i>measure </i>the outcome, you are working with a continuous random variable – e.g. measuring height, weight, time, etc.
A <b>probability distribution </b>for a continuous random variable tells us the probability that the random variable takes on certain values.
However, unlike a probability distribution for discrete random variables, a probability distribution for a continuous random variable can only be used to tell us the probability that the variable takes on a <em>range </em>of values.
For example, suppose we want to know the probability that a burger from a particular restaurant weighs a quarter-pound (0.25 lbs). Since <em>weight </em>is a continuous variable, it can take on an infinite number of values.
For example, a given burger might actually weight 0.250001 pounds, or 0.24 pounds, or 0.2488 pounds. The probability that a given burger weights exactly .25 pounds is essentially zero.
Thus, we could only use a probability distribution to tell us the probability that a burger weighs less than 0.25 lbs, more than 0.25 lbs, or between some range (e.g between .23 lbs and .27 lbs).
<h2><span class="orange">How to Create a Vector with Random Numbers in R</span></h2>
You can use one of the following methods to create a vector with random numbers in R:
<b>Method 1: Create Vector with Random Values in Range</b>
<b>#create vector of 10 random values between 1 and 20
runif(n=10, min=1, max=20)
</b>
<b>Method 2: Create Vector with Random Integers in Range</b>
<b>#create vector of 10 random integers between 1 and 20
round(runif(n=10, min=1, max=20), 0)</b>
The following examples show how to use each of these methods in practice.
<h2>Method 1: Create Vector with Random Values in Range</h2>
The following code shows how to create a vector of 10 random values between 1 and 20:
<b>#make this example reproducible
set.seed(1)
#create vector with 10 random numbers between 1 and 20
random_vec &lt;- runif(n=10, min=1, max=20)
#view vector
random_vec
 [1]  6.044665  8.070354 11.884214 18.255948  4.831957 18.069404 18.948830
 [8] 13.555158 12.953167  2.173939</b>
Note that <b>set.seed()</b> ensures that we will get the same random numbers each time.
If we remove <b>set.seed()</b>, the random numbers will be different each time we run the code.
<h2>Method 2: Create Vector with Random Integers in Range</h2>
The following code shows how to create a vector of 10 random integers between 1 and 50:
<b>#make this example reproducible
set.seed(1)
#create vector with 10 random numbers between 1 and 50
random_vec &lt;- round(runif(n=10, min=1, max=50), 0)
#view vector
random_vec
 [1] 14 19 29 46 11 45 47 33 32  4
</b>
Note that the <b>round()</b> function simply rounds the values created by the <b>runif()</b> function to the nearest whole number.
Also note that the <b>runif()</b> function generates random numbers, <em>including</em> the <b>min</b> and <b>max</b> values.
For example, it’s possible that the vector above could have included both 1 and 50.
Also note that it’s possible for the same number to appear multiple times in the vector when using this method.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Create an Empty Vector in R 
 How to Remove NA Values from Vector in R 
 How to Convert Matrix to Vector in R 
<h2><span class="orange">How to Fix: randomForest.default(m, y, …) : Na/NaN/Inf in foreign function call</span></h2>
One error you may encounter in R is:
<b>Error in randomForest.default(m, y, ...) : 
  NA/NaN/Inf in foreign function call (arg 1)
</b>
There are two reasons for why this error might occur:
There are NA, NaN, or Inf values in the dataset
One of the variables in the dataset is a character
The easiest way to fix this error is to remove rows with missing data and convert character variables to factor variables:
<b>#remove rows with missing values 
df &lt;- na.omit(df)
#convert all character variables to factor variables
library(dplyr)
df %>% mutate_if(is.character, as.factor)</b>
This tutorial shares an example of how to fix this error in practice.
<b>Related:</b>  How to Build Random Forests in R (Step-by-Step) 
<h3>How to Reproduce the Error</h3>
Suppose we attempt to fit a random forest to the following data frame in R:
<b>library(randomForest)
#create data frame
df &lt;- data.frame(y &lt;- c(30, 29, 30, 45, 23, 19, 9, 8, 11, 14), x1 &lt;- c('A', 'A', 'B', 'B', 'B', 'B', 'C', 'C', 'C', 'C'), x2 &lt;- c(4, 4, 5, 7, 8, 7, 9, 6, 13, 15))
#attempt to fit random forest model
model &lt;- randomForest(formula = y ~ ., data = df)
Error in randomForest.default(m, y, ...) :
  NA/NaN/Inf in foreign function call (arg 1)</b>
We receive an error because x1 is a character variable in the data frame.
We can confirm this by using the <b>str()</b> function to view the structure of the data frame:
<b>str(df)
'data.frame':10 obs. of  3 variables:
 $ y....c.30..29..30..45         : num  30 29 30 45 23 19 9 8 11 14
 $ x1....c..A....A....B....B.... : chr  "A" "A" "B" "B"
 $ x2....c.4..4..5..7..          : num  4 4 5 7 8 7 9 6 13 15</b>
<h3>How to Fix the Error</h3>
To fix this error, we can use the <b>mutate_if()</b> function from  dplyr  to convert each character column to a factor column:
<b>library(dplyr)
#convert each character column to factor
df = df %>% mutate_if(is.character, as.factor)
</b>
We can then fit the random forest model to the data frame:
<b>#fit random forest model
model &lt;- randomForest(formula = y ~ ., data = df)
#view summary of model
model
Call:
 randomForest(formula = y ~ ., data = df) 
               Type of random forest: regression     Number of trees: 500
No. of variables tried at each split: 1
          Mean of squared residuals: 65.0047    % Var explained: 48.64
</b>
We don’t receive any error this time because there are no longer any character variables in the data frame.
<h2><span class="orange">Randomization in Statistics: Definition & Example</span></h2>
In the field of statistics, <b>randomization</b> refers to the act of randomly assigning subjects in a study to different treatment groups.
For example, suppose researchers recruit 100 subjects to participate in a study in which they hope to understand whether or not two different pills have different effects on blood pressure.
They may decide to use a random number generator to randomly assign each subject to use either pill #1 or pill #2.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/02/randomization1.png">
<h3>Benefits of Randomization</h3>
The point of randomization is to control for  lurking variables  – variables that are not directly included in an analysis, yet impact the analysis in some way.
For example, if researchers are studying the effects of two different pills on blood pressure then the following lurking variables could affect the analysis:
Smoking habits
Diet
Exercise
By randomly assigning subjects to treatment groups, we maximize the chances that the lurking variables will affect both treatment groups equally.
This means any differences in blood pressure can be attributed to the type of pill, rather than the effect of a lurking variable.
<h3>Block Randomization</h3>
An extension of randomization is known as <b>block randomization</b>. This is the process of first separating subjects into blocks, then using randomization to assign subjects within blocks to different treatments.
For example, if researchers want to know whether or not two different pills affect blood pressure differently then they may first separate all subjects into one of two blocks based on gender: Male or Female.
Then, within each block they can use randomization to randomly assign subjects to use either Pill #1 or Pill #2.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/02/randomization2.png">
The benefit of this approach is that researchers can directly control for any effect that gender may have on blood pressure since we know that males and females are likely to respond to each pill differently.
By using gender as a block, we’re able to eliminate this variable as a potential source of variation. If there are differences in blood pressure between the two pills then we can know that gender is not the underlying cause of these differences.
<h2><span class="orange">How to Find the Range in R (With Examples)</span></h2>
The <b>range</b> is the difference between the largest and the smallest value in a dataset.
We can use the following syntax to find the range of a dataset in R:
<b>data &lt;- c(1, 3, NA, 5, 16, 18, 22, 25, 29)
#calculate range
max(data, na.rm=TRUE) - min(data, na.rm=TRUE)
[1] 28</b>
And we can use the <b>range()</b> function in base R to display the smallest and largest values in the dataset:
<b>data &lt;- c(1, 3, NA, 5, 16, 18, 22, 25, 29)
#calculate range values
range(data, na.rm=TRUE)
[1] 1 29</b>
This tutorial shows several examples of how to calculate the range of datasets in R.
<b>Related:</b>  Measures of Dispersion in Statistics 
<h2>Example 1: Calculate the Range of a Single Variable</h2>
The following code shows how to calculate the range of a single variable in R:
<b>#create data frame
df &lt;- data.frame(x=c(1, 3, NA, 5, 16, 18, 22, 25), y=c(NA, 4, 8, 9, 14, 23, 29, 31), z=c(2, NA, 9, 4, 13, 17, 22, 24))
#find range of variable <em>x </em>in the data frame
max(df$x, na.rm=TRUE) - min(df$x, na.rm=TRUE)
[1] 24</b>
<h2>Example 2: Calculate the Range of Multiple Variables</h2>
The following code shows how to calculate the range of multiple variables in R:
<b>#create data frame
df &lt;- data.frame(x=c(1, 3, NA, 5, 16, 18, 22, 25), y=c(NA, 4, 8, 9, 14, 23, 29, 31), z=c(2, NA, 9, 4, 13, 17, 22, 24))
#find range of variable <em>x </em>and <em>y </em>in the data frame
sapply(df[c('x','y')], function(df) max(df, na.rm=TRUE) - min(df, na.rm=TRUE))
 x  y 
24 27 
#find range of all variables in the data frame
sapply(df, function(df) max(df, na.rm=TRUE) - min(df, na.rm=TRUE))
 x  y  z 
24 27 22 
</b>
<b>Related</b>  A Guide to apply(), lapply(), sapply(), and tapply() in R 
<h2>Example 3: Calculate the Range of Entire Data Frame</h2>
The following code shows how to calculate the range of all values in a data frame:
<b>#create data frame
df &lt;- data.frame(x=c(1, 3, NA, 5, 16, 18, 22, 25), y=c(NA, 4, 8, 9, 14, 23, 29, 31), z=c(2, NA, 9, 4, 13, 17, 22, 24))
#find range of all values in entire data frame
max(df, na.rm=TRUE) - min(df, na.rm=TRUE)
[1] 30</b>
In this example, the range of the entire data frame turned out to be 31 – 1 = <b>30</b>.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Calculate Interquartile Range in R 
 How to Calculate Standard Deviation in R 
 How to Calculate Percentiles in R 
<h2><span class="orange">How to Find the Range of Grouped Data (With Examples)</span></h2>
Often we may want to calculate the range of data that is grouped in some way.
Recall that the <b>range</b> represents the difference between the largest and smallest value in a dataset.
For example, suppose we have the following grouped data:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/02/mean_sd_grouped1.png">
While it’s not possible to calculate the exact range since we don’t know the  raw data values , it is possible to estimate the range using one of the following formulas:
<b>Formula 1: Use Upper and Lower Limits</b>
<b>Range of Grouped Data = U<sub>max</sub> – L<sub>min</sub></b>
where:
<b>U</b>: Upper limit of maximum interval
<b>L</b>: Lower limit of minimum interval
<b>Formula 2: Use Midpoints</b>
<b>Range of Grouped Data = Midpoint<sub>max</sub> – Midpoint<sub>min</sub></b>
where:
<b>Midpoint<sub>max</sub></b>: Midpoint of maximum interval
<b>Midpoint<sub>min</sub></b>: Midpoint of minimum interval
The following examples show how to use each formula in practice.
<h3>Example 1: Calculate the Range of Grouped Data</h3>
Suppose we have the following frequency distribution that shows the exam scored receive by 40 students in a certain class:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/modefreq1.jpg"247">
Here is how to calculate the range of this grouped data using each formula:
<b>Formula 1: Use Upper and Lower Limits</b>
Range of Grouped Data = U<sub>max</sub> – L<sub>min</sub>
Range of Grouped Data = 100 – 51
Range of Grouped Data = 49
Using this formula, we estimate that the range is <b>49</b>.
<b>Formula 2: Use Midpoints</b>
Range of Grouped Data = Midpoint<sub>max</sub> – Midpoint<sub>min</sub>
Range of Grouped Data = (100+91)/2 – (60+51)/2
Range of Grouped Data = 95.5 – 55.5
Range of Grouped Data = 40
Using this formula, we estimate that the range is <b>40</b>.
<h3>Example 2: Calculate the Range of Grouped Data</h3>
Suppose we have the following frequency distribution that shows the number of points scored per game by 60 basketball players:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/modefreq2.jpg"248">
Here is how to calculate the range of this grouped data using each formula:
<b>Formula 1: Use Upper and Lower Limits</b>
Range of Grouped Data = U<sub>max</sub> – L<sub>min</sub>
Range of Grouped Data = 50 – 1
Range of Grouped Data = 49
Using this formula, we estimate that the range is <b>49</b>.
<b>Formula 2: Use Midpoints</b>
Range of Grouped Data = Midpoint<sub>max</sub> – Midpoint<sub>min</sub>
Range of Grouped Data = (50+41)/2 – (1+10)/2
Range of Grouped Data = 45.5 – 5.5
Range of Grouped Data = 40
Using this formula, we estimate that the range is <b>40</b>.
<h2><span class="orange">Range Rule of Thumb Calculator</span></h2>
The <b> range rule of thumb </b> offers a quick and easy way to estimate the standard deviation of a dataset by using the following formula:
<b>Standard deviation = range / 4</b>
To apply the range rule of thumb to a given dataset, simply enter the values of the dataset in the box below and then click the “Calculate” button.
<textarea id="input_data" name="input_data" rows="5" cols="40">4, 5, 5, 8, 13, 14, 16, 18, 22, 24, 26, 28, 30, 31, 31, 34, 36, 38, 39, 39
</textarea>
<input type="button" id="buttonCalc" onclick="calc()" value="Calculate">
<div>
Range = 35.00000
Standard Deviation Estimate = 8.75000
<script>
function calc() {
//get input values
var input_data = document.getElementById('input_data').value.match(/\d+/g).map(Number);
//calculate stuff
var range = jStat.range(input_data);
var est = range/4;
//output results
document.getElementById('range').innerHTML = range.toFixed(5);
document.getElementById('est').innerHTML = est.toFixed(5);
}
</script>
<h2><span class="orange">Range Rule of Thumb: Definition & Example</span></h2>
The <b>range rule of thumb </b>offers a quick and easy way to estimate the standard deviation of a dataset by using the following formula:
<b>Standard deviation = range / 4</b>
This rule of thumb is sometimes used because it allows you to estimate the standard deviation of a dataset by simply using two values (the minimum value and maximum value) instead of every value.
<h3>Example: Range Rule of Thumb</h3>
Suppose we have the following dataset of 20 values:
<b>4, 5, 5, 8, 13, 14, 16, 18, 22, 24, 26, 28, 30, 31, 31, 34, 36, 38, 39, 39</b>
The actual standard deviation of these values is <b>11.681</b>.
Using the range rule of thumb, we would estimate that the standard deviation is (39-4) / 4 = <b>8.75</b>. This value is somewhat close to the actual standard deviation.
<h3>Cautions on Using the Range Rule of Thumb</h3>
The obvious advantage of the range rule of thumb is that it’s incredibly simple and quick to calculate. All we need to know is the minimum value and the maximum value of the dataset.
The drawback of the range rule of thumb is that tends to only work well when the data comes from a  normal distribution  and the sample size is around 30. When these conditions don’t hold, the range rule of thumb doesn’t perform well.
<h3>Alternative to the Range Rule of Thumb</h3>
In a  2012 article  from the <em>Rose-Hulman Undergraduate Mathematics Journal</em>, Ramirez and Cox suggested using the following formula as an improvement over the range rule of thumb:
<b>Standard deviation = range / (3√(ln<em>(n)</em>)-1.5)</b>
where <em>n </em>is the sample size.
Consider the same dataset we used before:
<b>4, 5, 5, 8, 13, 14, 16, 18, 22, 24, 26, 28, 30, 31, 31, 34, 36, 38, 39, 39</b>
Using this formula, we would calculate the standard deviation as <b> 35/ (3√(ln(20))-1.5) </b>= <b>9.479</b>. This value is closer to the actual standard deviation of <b>11.681</b> compared to the range rule of thumb estimate of <b>8.75</b>.
This formula is a bit more complicated to calculate than the range rule of thumb, but it does tend to provide a more accurate estimate of the standard deviation when the data does not come from a normal distribution or when the sample size is not close to 30.
<h2><span class="orange">Range vs. Interquartile Range: What’s the Difference?</span></h2>
In statistics, the <b>range</b> and <b>interquartile range</b> are two ways to measure  the spread  of values in a dataset.
The <b>range</b> measures the difference between the minimum value and the maximum value in a dataset.
The <b>interquartile range</b> measures the difference between the first quartile (25th percentile) and third quartile (75th percentile) in a dataset. This represents the spread of the middle 50% of values.
<h2>Example: How to Calculate Range & Interquartile Range</h2>
Suppose we have the following dataset:
<b>Dataset:</b> 1, 4, 8, 11, 13, 17, 19, 19, 20, 23, 24, 24, 25, 28, 29, 31, 32
We can use the following steps to calculate the <b>range</b>:
Range = Maximum value – Minimum value
Range = 32 – 1
Range = <b>31</b>
We can use the  Interquartile Range Calculator  to help us calculate the <b>interquartile range</b>:
Interquartile Range = 3rd Quartile – 1st Quartile
Interquartile Range = 26.5 – 12
Interquartile Range = <b>14.5</b>
The range tells us the spread of the entire dataset while the interquartile range tells us the spread of the middle half of the dataset.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/06/r_vs_iqr1.jpg">
<h2>Range vs. Interquartile Range: Similarities & Differences</h2>
The range and interquartile range share the following <b>similarity:</b>
Both metrics measure the spread of values in a dataset.
However, the range and interquartile range have the following <b>difference:</b>
The range tells us the difference between the largest and smallest value in the entire dataset. 
The interquartile range tells us the spread of the middle 50% of values in the dataset.
<h2>Range vs. Interquartile Range: When to Use Each</h2>
We should use the <b>range</b> when we’re interested in understanding the difference between the largest and smallest values in a dataset.
For example, suppose a professor administers an exam to 100 students. She can use the range to understand the difference between the highest score and the lowest score received by all of the students in the class.
Conversely, we should use the <b>interquartile range</b> when we’re interested in understanding the spread between the 75th percentile and 25th percentile of a dataset.
For example, if a professor administers an exam to 100 students, she can use the interquartile range to quickly understand the difference in exam score between a student who scored at the 75th percentile of scores and a student who scored at the 25th percentile.
It’s worth noting that we don’t have to choose between using the range or the interquartile range to describe the spread of values in a dataset.
We can use both metrics since they provide us with completely different information.
<h2>The Drawback of Using the Range</h2>
The range suffers from one drawback: <b>It is influenced by outliers</b>.
To illustrate this, consider the following dataset:
<b>Dataset:</b> 1, 4, 8, 11, 13, 17, 19, 19, 20, 23, 24, 24, 25, 28, 29, 31, 32
The range of this dataset is 32 – 1 = <b>31</b>.
However, consider if the dataset had one extreme outlier:
<b>Dataset:</b> 1, 4, 8, 11, 13, 17, 19, 19, 20, 23, 24, 24, 25, 28, 29, 31, 32, <b>378</b>
The range of this dataset would now be 378 – 1 = <b>377</b>.
Notice how the range changes dramatically as a result of one outlier.
Before calculating the range of any dataset, it’s a good idea to first check if there are any outliers that could cause the range to be misleading.
<h2>Additional Resources</h2>
The following tutorials provide additional information about the interquartile range:
 How to Interpret Interquartile Range 
 How to Find Outliers Using the Interquartile Range 
 How to Calculate the Interquartile Range in Excel 
<h2><span class="orange">Range vs. Standard Deviation: When to Use Each</span></h2>
The <b>range</b> and <b>standard deviation</b> are two ways to measure  the spread  of values in a dataset.
The <b>range</b> represents the difference between the minimum value and the maximum value in a dataset.
The <b>standard deviation</b> measures the typical deviation of individual values from the mean value. It is calculated as:
<b>s = √(Σ(x<sub>i</sub> – x)<sup>2</sup> / (n-1))</b>
where:
<b>Σ:</b> A symbol that means “sum”
<b>x<sub>i</sub>:</b> The value of the i<sup>th</sup> observation in the sample
<b>x:</b> The mean of the sample
<b>n:</b> The sample size
For example, suppose we have the following dataset:
<b>Dataset:</b> 1, 4, 8, 11, 13, 17, 19, 19, 20, 23, 24, 24, 25, 28, 29, 31, 32
The <b>range</b> is calculated as: 31 -1 = 32.
We can use a calculator to find that the <b>standard deviation</b> is 9.25.
<h3>Range vs. Standard Deviation: Similarities & Differences</h3>
The range and standard deviation share the following <b>similarity:</b>
Both metrics measure the spread of values in a dataset.
However, the range and standard deviation have the following <b>difference:</b>
The range tells us the difference between the largest and smallest value in the entire dataset. 
The standard deviation tells us the typical deviation of individual values from the mean value in the dataset.
<h3>Range vs. Standard Deviation: When to Use Each</h3>
We should use the <b>range</b> when we’re interested in understanding the difference between the largest and smallest values in a dataset.
For example, suppose a professor administers an exam to 100 students. She can use the range to understand the difference between the highest score and the lowest score received by all of the students in the class.
Conversely, we should use the <b>standard deviation</b> when we’re interested in understanding how far the typical value in a dataset deviates from the  mean value.
For example, if a professor administers an exam to 100 students, she can use the standard deviation to quantify how far the typical exam score deviates from the mean exam score.
It’s worth noting that we don’t have to choose between using the range or the standard deviation to describe the spread of values in a dataset. We can use both metrics since they provide us with completely different information.
<h3>The Drawbacks of the Range & Standard Deviation</h3>
Both the range and the standard deviation suffer from one drawback: <b>They are both influenced by outliers</b>.
To illustrate this, consider the following dataset:
<b>Dataset:</b> 1, 4, 8, 11, 13, 17, 19, 19, 20, 23, 24, 24, 25, 28, 29, 31, 32
We can calculate the following values for the range and the standard deviation of this dataset:
<b>Range:</b> 31
<b>Standard Deviation:</b> 9.25 
However, consider if the dataset had one extreme outlier:
<b>Dataset:</b> 1, 4, 8, 11, 13, 17, 19, 19, 20, 23, 24, 24, 25, 28, 29, 31, 32, <b>378</b>
We could use a calculator to find the following metrics for this dataset:
<b>Range:</b> 377
<b>Standard Deviation:</b> 85.02
Notice how both the range and the standard deviation change dramatically as a result of one outlier.
Although the range and standard deviation can be useful metrics to gain an idea of how spread out values are in a dataset, you need to first make sure that the dataset has no outliers that are influencing these metrics. Otherwise, the range and the standard deviation can be misleading.
<h2><span class="orange">How to Use a RANK IF Formula in Excel</span></h2>
You can use the following methods to create a <b>RANK IF</b> formula in Excel:
<b>Method 1: RANK IF</b>
<b>=COUNTIFS($A$2:$A$11,A2,$B$2:$B$11,">"&B2)+1
</b>
This formula finds the rank of the value in cell <b>B2 </b>among all values in the range <b>B2:B11</b> where the corresponding value in the range <b>A2:A11</b> is equal to the value in cell <b>A2</b>.
Using this method, <b>the largest value is assigned a value of 1.</b>
<b>Method 2: Reverse RANK IF</b>
<b>=COUNTIFS($A$2:$A$11,A2,$B$2:$B$11,"&lt;"&B2)+1
</b>
This formula finds the rank of the value in cell <b>B2 </b>among all values in the range <b>B2:B11</b> where the corresponding value in the range <b>A2:A11</b> is equal to the value in cell <b>A2</b>.
Using this method, <b>the smallest value is assigned a value of 1.</b>
The following examples show how to use each method with the following dataset in Excel:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/07/rankif1.jpg"444">
<h2>Example 1: RANK IF</h2>
We can type the following formula into cell <b>C2</b> to calculate the rank of the points value in cell <b>B2</b> among all players on the “Mavs” team:
<b>=COUNTIFS($A$2:$A$11,A2,$B$2:$B$11,">"&B2)+1</b>
We can then drag this formula down to each remaining cell in column C:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/07/rankif2.jpg"643">
Here’s how to interpret the output:
The first player scored the <b>3rd</b> most points among all players on the Mavs team.
The second player scored the <b>5th</b> most points among all players on the Mavs team.
And so on.
Using this formula, the player with the highest points value on each team receives a rank of 1.
<h2>Example 2: Reverse RANK IF</h2>
We can type the following formula into cell <b>C2</b> to calculate the rank of the points value in cell <b>B2</b> among all players on the “Mavs” team:
<b>=COUNTIFS($A$2:$A$11,A2,$B$2:$B$11,"&lt;"&B2)+1</b>
We can then drag this formula down to each remaining cell in column C:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/07/rankif3.jpg"609">
Here’s how to interpret the output:
The first player scored the <b>3rd</b> lowest points among all players on the Mavs team.
The second player scored the <b>1st </b>lowest points among all players on the Mavs team.
And so on.
Using this formula, the player with the lowest points value on each team receives a rank of 1.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in Excel:
 How to Calculate Percentile Rank in Excel 
 How to Rank Values by Group in Excel 
 How to Rank Items by Multiple Criteria in Excel 
<h2><span class="orange">How to Use a RANK IF Formula in Google Sheets</span></h2>
You can use the following methods to create a <b>RANK IF</b> formula in Google Sheets:
<b>Method 1: RANK IF with One Criteria</b>
<b>=RANK(C1, FILTER(A:C, A:A="string"))
</b>
This formula finds the rank of the value in cell <b>C1</b> among all values in column <b>C</b> where the corresponding value in column <b>A</b> is equal to “string.”
<b>Method 2: RANK IF with Multiple Criteria</b>
<b>=RANK(C1, FILTER(A:C, A:A="string1", B:B="string2"))
</b>
This formula finds the rank of the value in cell <b>C1</b> among all values in column <b>C</b> where the corresponding value in column <b>A</b> is equal to “string1” and the value in column B is equal to “string2.”
The following examples show how to use each method with the following dataset in Google Sheets:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/rankif1.jpg"553">
<h3>Example 1: RANK IF with One Criteria</h3>
We can use the following formula to calculate the rank of the points values for the rows where the team is equal to “Mavs”:
<b>=RANK(C2, FILTER(A:C, A:A="Mavs"))</b>
The following screenshot shows how to use this syntax in practice:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/rankif2.jpg"635">
Note that a rank of 1 indicates the largest value.
So, here’s how to interpret the rank values:
The Guard on the Mavs team with <b>21</b> points has the <b>3rd</b> highest points value among all players on the Mavs.
The Guard on the Mavs team with <b>14</b> points has the <b>5th </b>highest points value among all players on the Mavs.
And so on.
Note that a <b>#N/A</b> value was produced for each of the Spurs players since we specified in the formula that we only want to provide a ranking for players on the Mavs team.
<h3>Example 2: RANK IF with Multiple Criteria</h3>
We can use the following formula to calculate the rank of the points values for the rows where the team is equal to “Mavs” and the position is equal to “Forward”:
<b>=RANK(C2, FILTER(A:C, A:A="Mavs", B:B="Forward"))</b>
The following screenshot shows how to use this syntax in practice:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/rankif3.jpg"679">
Here’s how to interpret the rank values:
The Forward on the Mavs team with <b>19</b> points has the <b>3rd</b> highest points value among all players on the Mavs who are Forwards.
The Forward on the Mavs team with <b>32</b> points has the <b>1st </b>highest points value among all players on the Mavs who are Forwards.
And so on.
Note that a <b>#N/A</b> value was produced for any player who didn’t meet both criteria in our <b>FILTER</b> function.
<b>Note</b>: You can find the complete documentation for the <b>RANK</b> function in Google Sheets  here .
<h2><span class="orange">How to Calculate Ratios in Excel (With Example)</span></h2>
A <b>ratio </b>is used to compare two numbers. Ratios are useful for understanding how large one value is compared to another.
For example, suppose A = 40 and B = 10.
To calculate the ratio of A to B we can use the following two step process:
<b>Step 1</b>: Find the  greatest common divisor  (the largest integer that will divide each value)
The largest value that will divide into both 40 and 10 is <b>10</b>.
<b>Step 2</b>: Divide each value by the greatest common divisor and write the result as A:B.
The ratio of 40 to 10 would be written as<b> 4:1</b>.
To calculate the ratio between any two numbers in Excel, we can use the following formula:
<b>=A2/GCD(A2, B2)&":"&B2/GCD(A2, B2)
</b>
This particular formula calculates the ratio between the value in cell <b>A2</b> to the value in cell <b>B2</b>, using the <b>GCD</b> function in Excel to automatically find the greatest common divisor between the two values.
The following example shows how to use this function in practice.
<h3>Example: Calculate Ratios in Excel</h3>
Suppose we have the following two lists of values in Excel:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/ratioexcel1.jpg"423">
Suppose we would like to calculate the ratio of Value 1 to Value 2 in each row.
We can type the following formula into cell <b>C2</b>:
<b>=A2/GCD(A2, B2)&":"&B2/GCD(A2, B2)</b>
The following screenshot shows how to use this formula in practice:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/ratioexcel2.jpg"537">
It turns out that the greatest common divisor of 12 and 5 is 1. Thus, when we divide each value by 1 we’re simply left with a ratio of <b>12:5</b>.
We can copy and paste this formula in cell <b>C2</b> down to every remaining cell in column C to calculate the ratio for the two values in each row:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2022/02/ratioexcel3.jpg">
Here’s how to interpret the results:
The ratio between 12 and 5 is <b>12:5</b>.
The ratio between 40 and 10 is <b>4:1</b>.
The ratio between 20 and 8 is <b>5:2</b>.
And so on.
<b>Note</b>: You can find the complete documentation for the <b>GCD</b> function in Excel  here .
<h2><span class="orange">How to Calculate Ratios in R (With Examples)</span></h2>
You can use the following methods to calculate the ratio between values in two columns in R:
<b>Method 1: Use Base R</b>
<b>#calculate ratio between variable1 and variable2
df$ratio &lt;- df$variable1/df$variable1
#calculate ratio between variable1 and variable2, rounded to 2 decimal places
df$ratio &lt;- round(df$variable1/df$variable2, 2)
</b>
<b>Method 2: Use dplyr</b>
<b>library(dplyr)
#calculate ratio between variable1 and variable2
df &lt;- df %>%
        mutate(ratio = variable1/variable2)
#calculate ratio between variable1 and variable2, rounded to 2 decimal places
df &lt;- df %>%
        mutate(ratio = round(variable1/variable2, 2))</b>
This tutorial explains how to use each method in practice with the following data frame that shows the total shots made and attempted by various basketball players:
<b>#create data frame
df &lt;- data.frame(players=c('A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'), makes=c(4, 4, 3, 6, 7, 8, 3, 10), attempts=c(12, 7, 5, 6, 10, 12, 5, 19))
#view data frame
df
  players makes attempts
1       A     4       12
2       B     4        7
3       C     3        5
4       D     6        6
5       E     7       10
6       F     8       12
7       G     3        5
8       H    10       19
</b>
<h2>Example 1: Calculate Ratios Using Base R</h2>
The following code shows how to calculate the ratio between the values in the <b>makes</b> and <b>attempts</b> columns using base R:
<b>#calculate ratio between makes and attempts columns
df$ratio &lt;- df$makes/df$attempts
#view updated data frame
df
  players makes attempts      ratio
1       A     4       12  0.3333333
2       B     4        7  0.5714286
3       C     3        5  0.6000000
4       D     6        6  1.0000000
5       E     7       10  0.7000000
6       F     8       12  0.6666667
7       G     3        5  0.6000000
8       H    10       19  0.5263158</b>
The ratio of <b>makes</b> to <b>attempts</b> for the first player is 4 / 12 = <b>0.33</b>.
In other words, the first player made about <b>33%</b> of their shot attempts.
We can interpret the ratio values for every other player in a similar manner.
We can also use the <b>round()</b> function to round the ratio values to a certain number of decimal places:
<b>#calculate ratio between makes and attempts columns, rounded to 2 decimal places
df$ratio &lt;- round(df$makes/df$attempts, 2)
#view updated data frame
df
  players makes attempts ratio
1       A     4       12  0.33
2       B     4        7  0.57
3       C     3        5  0.60
4       D     6        6  1.00
5       E     7       10  0.70
6       F     8       12  0.67
7       G     3        5  0.60
8       H    10       19  0.53
</b>
Each of the values in the <b>ratio</b> column are now rounded to two decimal places.
<h2>Example 2: Calculate Ratios Using dplyr</h2>
The following code shows how to calculate the ratio between the values in the <b>makes</b> and <b>attempts</b> columns using the  dplyr  package:
<b>library(dplyr)
#add new column that shows ratio of makes to attempts
df &lt;- df %>%
        mutate(ratio = makes/attempts)
#view updated data frame
df
  players makes attempts      ratio
1       A     4       12  0.3333333
2       B     4        7  0.5714286
3       C     3        5  0.6000000
4       D     6        6  1.0000000
5       E     7       10  0.7000000
6       F     8       12  0.6666667
7       G     3        5  0.6000000
8       H    10       19  0.5263158
</b>
We can also use the <b>round()</b> function to round the ratio values to a certain number of decimal places:
<b>library(dplyr)
#add new column that shows ratio of makes to attempts, rounded to 2 decimal places
df &lt;- df %>%
        mutate(ratio = round(makes/attempts, 2))
#view updated data frame
df
  players makes attempts ratio
1       A     4       12  0.33
2       B     4        7  0.57
3       C     3        5  0.60
4       D     6        6  1.00
5       E     7       10  0.70
6       F     8       12  0.67
7       G     3        5  0.60
8       H    10       19  0.53
</b>
Each of the values in the <b>ratio</b> column are now rounded to two decimal places.
Notice that the base R method and the dplyr method produce the same results.
<h2>Additional Resources</h2>
The following tutorials explain how to perform other common tasks in R:
 How to Filter for Unique Values Using dplyr 
 How to Filter by Multiple Conditions Using dplyr 
 How to Count Number of Occurrences in Columns in R 
<h2><span class="orange">What is Considered Raw Data? (Definition & Examples)</span></h2>
In statistics, <b>raw data</b> refers to data that has been collected directly from a primary source and has not been processed in any way.
In any type of data analysis project, the first step is gathering raw data. Once this data has been gathered, it can then be cleaned, transformed, summarized, and visualized.
The whole point of gathering raw data is to eventually use it to gain a better understanding of some phenomena or use it to build some type of predictive model.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/rawData1.png">
The following example illustrates how raw data might be collected and used in real life.
<h3>Example: Collecting & Using Raw Data</h3>
One field in which raw data is often collected is sports. For example, raw data might be collected for various statistics for professional basketball players. 
<b>Step 1: Collect Raw Data</b>
Imagine that a basketball scout collects the following raw data for 10 players on a professional basketball team:<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/rawData2.png">
This dataset represents the <b>raw data</b> because it’s collected directly by the scout and it hasn’t been cleaned or processed in any way.
<b>Step 2: Clean Raw Data</b>
Before using this data to create summary tables, charts, or anything else, the scout would first remove any missing values and clean up any “dirty” data values.
For example, we can spot several values in the dataset that need to be transformed or removed:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/rawData3.png">
The scout may decide to remove the last row entirely since it has multiple missing values. He may then clean up the character values in the dataset as well to end up with the following “clean” data:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/rawData4.png">
<b>Step 3: Summarize Data</b>
Once the data has been cleaned, the scout may then summarize each variable in the dataset. For example, he could calculate the following summary statistics for the “Minutes” variable:
<b>Mean</b>: 24 minutes
<b>Median</b>: 22 minutes
<b>Standard deviation</b>: 9.45 minutes
<b>Step 4: Visualize Data</b>
The scout may then visualize the variables in the dataset to gain a better understanding of the data values.
For example, he could create the following bar chart to visualize the total minutes played by each player:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/rawData5.png">
Or he could create the following scatterplot to visualize the relationship between minutes played and points scored:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/rawData6.png">
Each of these types of charts can help him gain an understanding of the data.
<b>Step 5: Use Data to Build a Model</b>
Lastly, once the data has been cleaned the scout may decide to fit some type of predictive model.
For example, he may fit a  simple linear regression model  and use minutes played to predict total points scored by each player.
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/08/rawData7.png">
The fitted regression equation is:
Points = 8.7012 + 0.2717*(minutes)
The scout could then use this equation to predict the number of points a player will score based on the number of minutes played. For example, an athlete that plays 30 minutes is predicted to score <b>16.85</b> points:
Points = 8.7012 + 0.2717*(30) = 16.85
<h2><span class="orange">An Introduction to the Rayleigh Distribution</span></h2>
The <b>Rayleigh distribution</b> is a continuous probability distribution used to model  random variables  that can only take on values equal to or greater than zero.
It has the following probability density function:
f(x; σ) = (x/σ<sup>2</sup>)e<sup>-x<sup>2</sup>/(2σ<sup>2</sup>)</sup>
where σ is the scale parameter of the distribution.
<h3>Properties of the Rayleigh Distribution</h3>
The Rayleigh Distribution has the following properties:
<b>Mean:</b> σ√π/2
<b>Variance:</b> ((4-π)/2)σ<sup>2</sup>
<b>Mode:</b> σ
Since π has a known numerical value, we can simplify the properties as follows:
<b>Mean:</b> 1.253σ
<b>Variance:</b> 0.429σ<sup>2</sup>
<b>Mode:</b> σ
<h3>Visualizing the Rayleigh Distribution</h3>
The following chart shows the shape of the Rayleigh distribution when it takes on different values for the scale parameter:
<img class="lazy" data-src="https://www.statology.org/wp-content/uploads/2021/01/rayleigh1.png">
Note that the larger the value for the scale parameter σ, the wider the distribution becomes.
<em><b>Bonus:</b> For those who are curious, we used the following R code to generate the chart above:</em>
<b>#load VGAM package
library(VGAM)
#create density plots
curve(drayleigh(x, scale = 0.5), from=0, to=10, col='green')
curve(drayleigh(x, scale = 1), from=0, to=10, col='red', add=TRUE)
curve(drayleigh(x, scale = 2), from=0, to=10, col='blue', add=TRUE)
curve(drayleigh(x, scale = 4), from=0, to=10, col='purple', add=TRUE)
#add legend
legend(6, 1, legend=c("σ=0.5", "σ=1", "σ=2", "σ=4"),
       col=c("green", "red", "blue", "purple"), lty=1, cex=1.2)
</b>
<h3>Relation to Other Distributions</h3>
The Rayleigh distribution has the following relationship with other probability distributions:
<b>1. </b>When the scale parameter (σ) is equal to 1, the Rayleigh distribution is equal to a Chi-Square distribution with 2 degrees of freedom.
<b>2.</b> The Rayleigh distribution is a special case of the Weibull distribution with a shape parameter of k = 2.
<b>3. </b>The Rayleigh distribution with scale parameter σ is equal to the Rice distribution with Rice(0, σ).
<h3>Applications</h3>
In practice, the Rayleigh distribution is used in a variety of applications including:
<b>1.</b> The Rayleigh distribution is used to model wave behavior in the ocean, including the time it takes waves to crest and the max height reached by waves.
<b>2. </b>The Rayleigh distribution is used to model the behavior of background data in magnetic resonance imaging, more commonly known as MRI.
<b>3.</b> The Rayleigh distribution is used in the field of nutrition to model the relationship between nutrient levels and nutrient response in both humans and animals.
<h2><span class="orange">How to Fix Error in R: names do not match previous names</span></h2>
One common error you may encounter in R is:
<b>Error in match.names(clabs, names(xi)) : 
  names do not match previous names</b>
This error occurs when you attempt to use the <b>rbind()</b> function to row bind two data frames, but the column names of the two data frames don’t match.
This tutorial shares the exact steps you can use to troubleshoot this error.
<h3>Example: How to Fix ‘names do not match previous names’</h3>
Suppose we have the following two data frames in R:
<b>#create and view first data frame
df1 &lt;- data.frame(var1=c(1, 3, 3, 4, 5),  var2=c(7, 7, 8, 3, 2))
df1
  var1 var2
1    1    7
2    3    7
3    3    8
4    4    3
5    5    2
#create and view first second frame 
df2 &lt;- data.frame(var3=c(3, 3, 6, 6, 8),  var4=c(1, 1, 2, 8, 9))
df2
  var3 var4
1    3    1
2    3    1
3    6    2
4    6    8
5    8    9</b>
If we attempt to use the <b>rbind()</b> function to row bind these two data frames, we’ll get an error:
<b>#attempt to row bind the two data frames
rbind(df1, df2)
Error in match.names(clabs, names(xi)) : 
  names do not match previous names
</b>
We get this error because the column names of the two data frames don’t match.
The first data frame has the following column names:
var1
var2
And the second data frame has the following column names:
var3
var4
We can even use the following code to check whether the column names are identical between the two data frames:
<b>#check if column names are identical between two data frames
identical(names(df1), names(df2))
[1] FALSE
</b>
We can see that the column names are not identical.
To fix this error, we can manually rename the column names of the second data frame to match the column names of the first data frame:
<b>#define two data frames
df1 &lt;- data.frame(var1=c(1, 3, 3, 4, 5),  var2=c(7, 7, 8, 3, 2))
df2 &lt;- data.frame(var3=c(3, 3, 6, 6, 8),  var4=c(1, 1, 2, 8, 9))
#rename second data frame columns
names(df2) &lt;- c('var1', 'var2')
#row bind the two data frames
rbind(df1, df2)
   var1 var2
1     1    7
2     3    7
3     3    8
4     4    3
5     5    2
6     3    1
7     3    1
8     6    2
9     6    8
10    8    9
</b>
We can see that <b>rbind()</b> was able to successfully row bind the two data frames since the column names matched.
Another way to fix this error would be to use the <b>names()</b> function to automatically assign the column names of the first data frame to the second data frame:
<b>#define two data frames
df1 &lt;- data.frame(var1=c(1, 3, 3, 4, 5), var2=c(7, 7, 8, 3, 2))
df2 &lt;- data.frame(var3=c(3, 3, 6, 6, 8),  var4=c(1, 1, 2, 8, 9))
#rename second data frame columns
names(df2) &lt;- names(df1)
#row bind the two data frames
rbind(df1, df2)
   var1 var2
1     1    7
2     3    7
3     3    8
4     4    3
5     5    2
6     3    1
7     3    1
8     6    2
9     6    8
10    8    9</b>
Once again, <b>rbind()</b> is able to row bind the two data frames successfully because they share the same column names.

<script src='https://williamkpchan.github.io/LibDocs/readbook.js'></script>
<script>
var lazyLoadInstance = new LazyLoad({
    elements_selector: ".lazy"
    // ... more custom settings?
});
</script>
