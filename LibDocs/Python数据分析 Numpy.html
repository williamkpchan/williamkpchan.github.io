<base target="_blank">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<style>
body {
 margin: 15%;
 margin-top: 5%;
 font-size: 24px;
 background-color: #000000;
 color: #20C030;
}
a { text-decoration: none; 
	color: #28B8B8; }
a:visited {	color: #389898; }
A:hover {	color: yellow; }
A:focus {	color: red; }
code { color: #28B8B8;  background-color: #002030}
pre { color: gray;  background-color: #001010;  font-size: 16px; }
img { display: inline-block; margin-bottom: 5%; margin-TOP: 2%;}
pre { color: gray; background-color: #001010}
div { width: 45%; display: inline-block; padding: 3px; border-radius: 4px; border: 1px solid DarkSlateGray; margin: 3px; vertical-align:top;}
h1, h2, h3, h4{ color: gold;}
</style>

</head>
<body>
<br><br>
<h2>Python数据分析 Numpy</h2><br><br>
NUMPY（以下简称NP）是Python数据分析必不可少的第三方库，np的出现一定程度上解决了Python运算性能不佳的问题，同时提供了更加精确的数据类型。<br><br>
如今，np被Python其它科学计算包作为基础包，已成为Python 数据分析的基础，可以说，NP是SciPy、Pandas等数据处理或科学计算库最基本的函数功能库。因此，理解np的数据类型对python数据分析十分有帮助。<br><br>
下面，本文将介绍Np的常用操作和基本数据类型。<br><br>
NP提供了以下重点功能。<br><br>
一个强大的N维数组对象ndarray 广功能函数<br><br>
整合C/C++/Fortran代码的工具<br><br>
提供了线性代数、傅里叶变换、随机数生成的相关功能<br><br>
为了更加直观的了解Np的强大与作用，我们先看作用再看方法：<br><br>
使用NUMPY操作数据集<br><br>
在操作数据之前，我们先来理解什么是维度：<br><br>
什么是维度<br><br>
维度是一组数据的组织形式，不同数据维度可能表示不同的含义。一维数据由对等关系的有序或无序数据构成，采用线性方式组织，可以用数组表示。<br><br>
通俗来讲，<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8HvQDgE3h5xkIeEUibx2RAIEown66C0zj6ZnSVc9QUbE6UNVuhFqfsXQ/0?wx_fmt=png"><br><br>
这么一行数据就可以称之为一维数据，但如果我们再对其折叠：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8V98f8XDJu8hDiaXHKqsSZODgP6EFWywqPXj8gWQBibib4jRttUoYqSiaAw/0?wx_fmt=png"><br><br>
那么他就成为了二维数据，又可以称之为矩阵。<br><br>
什么是数据集<br><br>
数据集，顾名思义就是数据的集合，是用以训练程序的数据集合，一般是二维或者多维数表。<br><br>
如果我们想自己手工新建一个数据集，可以直接新建一个文本文件，只要有恰当的数据，都可以称之为数据集：<br><br>
比如这样，我们就可以称上面的文件称之为数据集。我们还注意到，上面数据是使用逗号作为分隔符分隔数据的，它简单描述了数据的内容和含义，并使用半角逗号作为分隔符。像这样，用逗号分隔的数据集就称之为CSV（Comma-Separated Value,逗号分隔值）数据集，它是一种常见的文件格式，用来存储批量的数据。它就像一张excel表，用来存储简单结构的数据。<br><br>
怎么样，数据集的概念是否特别简单呢？<br><br>
生成数据集<br><br>
数据集是一个简单的概念，但每次使用手工的方式去写毕竟不方便，所以，我们可以使用np的内置函数来生成数据集：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8ZR1fnyfm3bwV3LnkzpWCg1QVosAdicj4T0iaOj2gkAdR0c6HDzIxUfZA/0?wx_fmt=png"><br><br>
frame：文件、字符串、或产生器的名字，可以是.gz，.bz2的压缩文件<br><br>
arrray：存入文件的NP的数组<br><br>
fmt(format):写入文件的格式，如%d,%.2f,%.18e(默认，科学计数法保留18位)<br><br>
delemiter:分割字符串，默认是任何空格。<br><br>
我们可以这样写下代码：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8BaV6ic662AfIrSUD9VMZA81kBVfttuFAv3L6gMU8wplfE11mPxdKHkw/0?wx_fmt=png"><br><br>
这样，我们就会在当前的工作目录下发现一个新的demo.csv，用记事本打开，里面是一个4 * 5的矩阵，元素0~19。<br><br>
读取数据集<br><br>
既然生成，那就可以读取，同样使用np：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8FuIIjpqsn3ficvKR4cGl30OQTOfGrNCl6PknMOzVAcj7GS5ibsVJoyIg/0?wx_fmt=png"><br><br>
frame:指定读入的文件来源<br><br>
dtype:数据类型，默认为np.float。<br><br>
delimiter:分割字符串<br><br>
unpack：默认为False读入文件写入一个数组，如果为True，读入属性将分别写入不同变量<br><br>
同样的我们只需要写下代码：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8PJoj4N91lqqQGuFjpJqWHoDQETctGU8OpIZM1DqDibeibXTzet4T9kRw/0?wx_fmt=png"><br><br>
就可以查看到我们先前写入的数组a。<br><br>
CSV文件的局限<br><br>
可以发现，CSV文件只能有效存储和读取一维和二维数组，因为更高的维度无法更直观的文本下显现出来，这时，更加灵活的存取方式就呼之欲出了，但讲之前先卖个关子，再介绍一个不太常用的方法：<br><br>
tofile：对于NP中的ndarray数组，我们可以使用NP中的tofile方法。<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf88Ugun4FuPktIrlW34qfibGNdxefhcfbzqvRYzAc48TiaibN42AD7TSSJg/0?wx_fmt=png"><br><br>
frame:文件，字符串<br><br>
数据分割字符串，如果不写，将使用二进制文件存储<br><br>
format：写入数据的格式<br><br>
同样，我们只需要命令：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8C8NjZricSYicgic0p1QbCP8ibfG6Vrf3ES4PzpEQ0LRrgd5OQFMpFSShKg/0?wx_fmt=png"><br><br>
就可以生成新的CSV数据集。<br><br>
此时，我们如果打开a.dat文件，我们可以看到数组1,2,3……99。但是与CSV不同，这个文件并没有包含数字的维度信息，他只是将数组所有元素逐一的列出。而且如果我们不指定sep，将保存为二进制文件，虽然对人不可读，但将占用更小的空间。<br><br>
既然tofile可以保存文本文件，那么也很容易猜到对应的fromfile可以还原这些信息。<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8GAjwDbPkmzsOxBOh9u4Z5cVibsRJib1fMiaiclqW1UK8PBajkhsrNjdXLA/0?wx_fmt=png"><br><br>
frame：文件<br><br>
dtype：读取元素使用的数据类型，默认为float<br><br>
count：读文件的个数，默认-1，读取全部<br><br>
sep:数据分割字符串，如果是空串，写入文件为二进制。<br><br>
如果我们想要重新恢复数据的维度信息，我们需要重新使用reshape来恢复维度信息：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8kPiaic789ME3Cg5aBBeodIs0XSmVOrMvCQPD1IX6pGdLjqp4bwvdb5qA/0?wx_fmt=png"><br><br>
不得不说，当我看到这个方法时感觉这两个真是蠢爆了，使用savetxt / loadtxt 至少还能保存个二维信息，而使用了tofile / fromfile 方法居然把数被伸展为一维的，然后自己记住维度信息(╯‵□′)╯︵┻━┻。<br><br>
因此，为了保存更复杂的数据类型，二维以上的数据信息，save / load 函数成功解决了这个问题：（为了方便，两个函数就放到一起了）<br><br>
保存 / 读取高维度数据<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8p6AyZys4uiaB86NchiajKlibPuiawed1QTMl0JwVGDNqlzVFdRjibeHwcLA/0?wx_fmt=png"><br><br>
Demo: <br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8rWbNFgdxKXxobicicPnBsYDBmoiciadsaZibPLlOLUfD4jpdZNqkK1xMdBA/0?wx_fmt=png"><br><br>
附录<br><br>
附录中提供NP的常用方法及注释，做查询用。<br><br>
np数组定义<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8ia1HLHk5YqMTjmFTOMdtibybvJWD9azblErha0R0zBNwUTrDTQ5kQmgA/0?wx_fmt=png"><br><br>
初始化数组<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf81At8w7vzTQEfM7JnALibHv5xkzCZcODQqzADqeRMnyDewJeHvaEt0NQ/0?wx_fmt=png"><br><br>
随机序列<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf86Jh1ryk6XAcpaPl8SNEQbNM3OgzcRicpzeiakI1hC1UWq9x4Qib39zA5Q/0?wx_fmt=png"><br><br>
如果想要多个随机整数：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8cqFhcJ1ibC0qWaY9FOWyoRgkh5wxuKyibt0qWjtlyju9y2E0TR7hYrdw/0?wx_fmt=png"><br><br>
多维数组运算<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8COeWmvWicIRibjsu8w9HvEoIVtvHAann8ESejWFSAVICkZdeWeSbuMsA/0?wx_fmt=png"><br><br>
还可以使用reshape函数，对数组结构重定义：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8KmlGPmNzu4IleHtOeC5icMhf0SfGeK0micQM02rCQrPpq4oeWJicVXib8A/0?wx_fmt=png"><br><br>
下面介绍一些常用的运算操作：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8otsHtW3Jk4aicjMOJYZwkYGZibaKkHHqFfp7ic40WSickQP7F2cUvl7jsQ/0?wx_fmt=png"><br><br>
此外，还可以<br><br>
sqrt、log、sin、sum、max 等操作：<br><br>
我们下定义一个三维数组：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf80gZZd7ib5jboicF9tcp4aKxGEMNh3Q6zU8uokic1UKqfVCMfzxD2PApjw/0?wx_fmt=png"><br><br>
我们可以看到sum方法对lst的所有元素都进行了求和，此外我们还可以通过对sum方法增加参数axis的方式来设置求和的深入维度：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8xZockPaabKH6vEajmiargmqO8y5LGltjicOtho8IwMezMibChf7KHsTVA/0?wx_fmt=png"><br><br>
这里的axis取值为数组维数-1，axis可以理解为进行运算操作时的深入程度，axis越大，深入程度越大。同理，不仅sum函数，max等函数也可以一样理解。<br><br>
相加运算<br><br>
numpy.array是np最简单的数据结构。np.array相比与Python原生列表其强大之处在于可以实现对数组数据的运算。我们知道，list只能对元素的追加。而numpy是真正意义上的数据运算。<br><br>
例如<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8LiaFUibz4OUFglSiaxcvmibCNeNGrLABpO9wtFBd4WCHA4PX4DjFoGsLsw/0?wx_fmt=png"><br><br>
但np最强大的地方不在于简单的一维运算，Np对矩阵也能进行基本的运算操作：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8Nh3IJPicPyApqfk3QYsRoWMfs6MpCJfVTZpUsibicib7Gdd1ZJFf6fK5Yg/0?wx_fmt=png"><br><br>
此外，由于原生list没有确定的数据类型，所以维护起来成本较高，而使用C编写的numpy，则可以声明各种常见的数据类型：<br><br>
<img src="http://mmbiz.qpic.cn/mmbiz_png/eDpwXmSEM4FicDIL427VfC64VdL8ibcqf8MRP9SKibW8Kg85WIlaV11vU3bmClnTt0puGBItdB7l8mReCrrsr5wFQ/0?wx_fmt=png"><br><br>
np所支持的数据类型都有bool、int8/16/32/64/128/uint8/16/32/64/128、float16/32/43、complex64/128、string。<br><br>
总结<br><br>
Python作为一门弱类型语言，有其不可避免的缺点。但NP的出现，弥补了这些缺点，使其具备了构造复杂数据类型的能力，为Python数据分析提供了基础。<br><br>
