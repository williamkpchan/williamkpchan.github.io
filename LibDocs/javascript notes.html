<base target="_blank"><html><head><title>javascript notes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="https://williamkpchan.github.io/lazyload.min.js"></script>
<script src='https://williamkpchan.github.io/mainscript.js'></script>
<script src="https://williamkpchan.github.io/commonfunctions.js"></script>
<script>
var showTopicNumber = true;
var topicEnd = "<br>";
var bookid = "javascript notes"
var markerName = "h2"
</script>
<style>
body{width:80%;margin-left: 10%; font-size:24px;}
h1, h2 {color: gold;}
strong {color: orange;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px; background-color:#149;}
</style></head><body onkeypress="chkKey()"><center>
<h1>javascript notes</h1>
<a href="https://www.codeeval.dev/edit?gistid=dc7383e2de0858fdb1470fdec159f8f9" class="whitebut ">javascript online code execution</a>
<a href="#mustWatch" class="red goldbs" target="_self">Must Watch!</a><br><br>
<div id="toc"></div></center><br><br>
<div id="mustWatch"><center><span class="red">MustWatch</span></center><br>
<a href="http://www.sitepoint.com/creating-a-scrud-system-using-jquery-json-and-datatables/">SCRUD System Using Jquery Json And Datatables SCRUD: Search, Create, Read, Update and Delete</a><br><br>
<a href="javascript Html Samples.html" class="goldbut ">javascript Html Samples</a>
<a href="jquerySamples.html" class="bluebut ">jquerySamples</a>
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#the_http_response_headers" class="whitebut ">Access-Control-Allow-Origin</a>
<a href="javascriptSamples.html" class="cyanbut ">javascriptSamples</a>
<br>
<a href="demo2s-1.html" class="whitebut ">demo2s-1</a>
<a href="demo2s-2.html" class="whitebut ">demo2s-2</a>
<a href="demo2s-3.html" class="whitebut ">demo2s-3</a>
<a href="demo2s-4.html" class="whitebut ">demo2s-4</a>
<a href="demo2s-5.html" class="whitebut ">demo2s-5</a>
<a href="demo2s-6.html" class="whitebut ">demo2s-6</a>
<a href="demo2s-7.html" class="whitebut ">demo2s-7</a>
<a href="demo2s-8.html" class="whitebut ">demo2s-8</a>
<a href="demo2s-9.html" class="whitebut ">demo2s-9</a>
<a href="demo2s-10.html" class="whitebut ">demo2s-10</a>
<a href="demo2s-11.html" class="whitebut ">demo2s-11</a>
<a href="https://www.studytonight.com/post/javascript-speech-recognition-example-speech-to-text" class="whitebut ">JavaScript Speech Recognition (Speech to Text)</a>
<a href="https://dev.to/princejoel/building-a-speech-to-text-app-with-javascript-4a4d" class="whitebut ">speech-to-text-app</a>
<a href="https://www.section.io/engineering-education/speech-recognition-in-javascript/" class="whitebut ">Speech Recognition</a>
<a href="https://tutorialzine.com/2017/08/converting-from-speech-to-text-with-javascript" class="whitebut ">from Speech to Text</a>
<a href="https://cloud.google.com/speech-to-text/docs/languages" class="whitebut ">google Cloud Speech-to-Text</a>
<a href="https://www.geeksforgeeks.org/how-to-convert-speech-into-text-using-javascript/" class="whitebut ">convert speech into text</a>
<a href="https://blog.webdevsimplified.com/" class="redbut ">webdevsimplified</a>
<a href="https://github.com/WebDevSimplified" class="bluebut ">WebDevSimplified</a>
<a href="https://github.com/WebDevSimplified/audio-book-reader" class="whitebut ">audio-book-reader</a>
<a href="https://github.com/naptha/tesseract.js#tesseractjs" class="whitebut ">Tesseractjs javascript library</a>
<a href="https://www.w3resource.com/javascript-exercises/javascript-object-exercises.php" class="whitebut ">javascript exercises</a>
<a href="https://www.w3schools.com/asp/ado_ref_connection.asp" class="whitebut ">ADO Connection Object</a>
<a href="https://www.youtube.com/watch?v=jKe44NeFzwE" class="whitebut ">Build BIGGER Games</a>
<a href="https://www.youtube.com/watch?v=CY0HE277IBM" class="whitebut ">Sprite Animation in JavaScript</a>
<a href="https://www.youtube.com/watch?v=Ub70TitG6_k" class="redbut fold">JavaScript Audio Visualizers</a>
<a href="https://www.youtube.com/watch?v=plnhFAHEfrM" class="whitebut ">JavaScript Character Animation</a>
<a href="https://www.youtube.com/watch?v=VXWvfrmpapI" class="whitebut ">JavaScript Audio CRASH COURSE</a>
<a href="https://youtu.be/f0dwg99EVfo" class="whitebut ">10 audio visualiser experiments</a>
<a href="https://youtu.be/JNtuLw2fybo" class="whitebut ">Melody Maker app</a>
<a href="https://www.youtube.com/watch?v=qNEb9of714U" class="goldbut ">Audio Magic with JavaScript</a>
<a href="https://xkln.net/blog/creating-network-diagrams-with-javascript/" class="whitebut ">Network Diagrams with JavaScript</a>
<a href="https://www.anychart.com/blog/2020/07/22/network-graph-javascript/" class="whitebut ">Create JavaScript Network Graph</a>
<a href="https://www.d3-graph-gallery.com/network" class="whitebut ">Network graph</a>
<a href="https://www.demo2s.com/javascript/javascript-d3-network-diagram.html" class="whitebut ">D3 Network Diagram</a>
<a href="https://www.demo2s.com/javascript/javascript.html" class="whitebut ">javascript samples</a>
<a href="javascriptBook.html" class="whitebut ">javascriptBook</a>
<a href="js逆向.html" class="whitebut ">js逆向</a>
<a href="input table.html" class="whitebut ">input table</a>
<a href="https://codepedia.info/jquery-sum-of-textbox-values-in-table-column" class="whitebut ">codepedia.info</a>
<a href="Hardware With JavaScript" class="whitebut ">Hardware With JavaScript.html</a>
<a href="perlin noise Snake.html" class="whitebut ">perlin noise Snake</a>
<a href="sineWaves.html" class="whitebut ">sineWaves</a>
<a href="flow_fields/Flow Fields.html" class="whitebut red goldbs">Flow Fields</a>
<a href="https://www.youtube.com/watch?v=hQAHSlTtcmY" class="whitebut blue cyanbs">Learn React In 30 Minutes</a>
<a href="https://www.youtube.com/watch?v=VNmTubIDZOY" class="whitebut ">Code Sine Waves</a>
<a href="https://www.youtube.com/watch?v=M4WzhdQPyH0" class="whitebut ">Code rainbow Snakey</a>
<a href="https://christopherlis.com/projects/amplify" class="whitebut ">An interactive visual</a>
<a href="https://christopherlis.com/projects/intertwined" class="whitebut ">circular motion using sine and cosine functions</a>
<a href="https://codepen.io/sakri/full/mtlDu/" class="whitebut ">canvas Text</a>
<a href="https://yoannmoi.net/nipplejs/" class="whitebut green whitebs">nipplejs, A virtual joystick for touch capable interfaces</a>
FullPage.js: Help you to create full-screen scrolling websites<br>
swiper.js & owl.carousel.js; Fully responsive, swipe-enabled, infinite looping, and more.
<br>
popper.js: to place the tooltip.<br>
<a href="https://github.com/VincentGarreau/particles.js/" class="whitebut ">particles.js</a>
<a href="https://vincentgarreau.com/particles.js/" class="whitebut ">particles.js</a>
<a href="https://www.geeksforgeeks.org/8-best-javascript-game-engines/" class="whitebut ">Javascript Game Engines</a>
<a href="https://blog.bitsrc.io/9-top-js-gaming-engines-and-libraries-for-2020-81707d9f095" class="whitebut ">JS Gaming Engines and Libraries for 2020</a>
<a href="https://stackoverflow.com/questions/391979/how-to-get-clients-ip-address-using-javascript" class="whitebut ">get client's IP address using JavaScript</a>
<a href="javascripting.html" class="goldbut red2bs silverblackgrad blackts white">Javascript Libraries</a>
<a href="https://www.d3-graph-gallery.com/graph/density2d_contour.html" class="whitebut pink limebs">D3 Basic contour chart</a>
<a href="https://www.youtube.com/watch?v=JjIvF0yikGU" class="whitebut ">Learn jQuery</a>
<a href="https://skillcrush.com/blog/projects-you-can-do-with-javascript/" class="whitebut ">JAVASCRIPT PROJECTS</a>
<a href="https://www.sitepoint.com/simple-javascript-quiz/" class="whitebut ">Make a Simple JavaScript Quiz</a>
<a href="JavascriptGame.html" class="goldbut gold blueblackgrad">JavascriptGame</a>
<a href="alligatorIoJs.html" class="whitebut gold">alligatorIoJs</a>
<a href="88 functions.html" class="greenbut gold blueblackgrad ">88 functions</a>
<a href="https://redstapler.co/javascript-realtime-chart-plotly/" class="whitebut ">plotly realtime chart</a>
anime.js howler.js chart.js reveal.js three.js Pixi.js video.js
<a href="https://redstapler.co/10-stunning-css-3d-effect-must-see/" class="whitebut ">10 Stunning CSS 3D Effect</a>
<a href="https://www.youtube.com/watch?v=zPHerhks2Vg&t=99s">JavaScript in Half an Hour (Without jQuery!)</a>
<a href="W3JavascriptHowTo.html" class="whitebut gold">W3JavascriptHowTo</a>
<a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance" class="whitebut ">Get Started With Analyzing Runtime Performance</a>
<a href="https://jqueryui.com/demos/" class="whitebut ">jqueryui demos</a>
<a href="https://jqueryui.com/tabs/" class="whitebut ">jqueryui tabs</a>
<br>
<a href="https://www.tutorialsteacher.com/javascript/javascript-tutorials" class="whitebut ">JavaScript Tutorial</a>
<a href="https://dmitripavlutin.com/javascript-classes-complete-guide/" class="whitebut ">Complete Guide to JavaScript Classes</a>
<a href="https://www.digitalocean.com/community/tutorials/how-to-use-object-methods-in-javascript" class="whitebut ">How To Code in JavaScript</a>
<a href="https://medium.com/@madasamy/15-javascript-concepts-that-every-nodejs-programmer-must-to-know-6894f5157cb7" class="whitebut ">15 JavaScript concepts</a>
<a href="http://www.codecademy.com/tracks/javascript" class="whitebut ">Code Academy JavaScript tracks</a>
<a href="http://eloquentjavascript.net/" class="whitebut ">Eloquent JavaScript</a>
<a href="http://ejohn.org/apps/learn/" class="whitebut ">Advanced JavaScript</a>
<br>
<a href="https://www.javascriptjanuary.com/" class="whitebut ">javascriptjanuary</a>
<a href="D:\Dropbox\Public\LibDocs\rchart\bar-basic.html" class="bordred1 gold borRad10">Basic Bar Chart</a>
<a href="D:\Dropbox\Public\LibDocs\rchart\pie-basic.html" class="bordred1 gold borRad10">pie basic chart</a>
<a href="webassembly.html" class="whitebut gold goldbs redts">webassembly</a>
<br>
<a href="https://mathjs.org/docs/datatypes/matrices.html" class="whitebut ">javascript mathjs Matrices</a>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web" class="whitebut ">Matrix math for the web</a>
<a href="https://www.robinwieruch.de/linear-algebra-matrix-javascript" class="whitebut ">Linear Algebra in JavaScript with Matrix Operations</a>
<br>
<a href="https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y" class="whitebut ">pageX, pageY, screenX, screenY, clientX, and clientY</a>
<br>
<h3>Javascript Animation</h3>
<h3>SVG Morphing Animation</h3>,
<h3>GSAP Animation</h3>,
<h3>Javascript Scroll Animation</h3>,
<h3>Page Animations With Javascript</h3>,
<h3>Fullpage Animations With Javascript</h3>,
<h3>Javascript Animations</h3>,
<h3>Liquid Image Transition With Javascript</h3>,
<h3>Vanilla Javascript Text Animation</h3>,
<h3>Create 3D Animation</h3><a href="https://www.youtube.com/watch?v=tsMHONmUkvI" class="whitebut ">3D Animation</a>
</div>
<pre>
<br>
<h2>React Tutorial</h2>
<a href="https://www.youtube.com/watch?v=Ke90Tje7VS0" class="whitebut ">React Tutorial</a>
<a href="https://reactjsexample.com/a-react-table-that-includes-all-the-crud-operations/" class="whitebut ">react CRUD operations</a>
<h2>Node.js Tutorial</h2>
<a href="https://www.youtube.com/watch?v=TlB_eWDSMt4" class="whitebut ">Node.js Tutorial for Beginners</a>
<a href="Node入門.html" class="redbut chgFontsize">Node入門</a>
<h2><span class="red embossts">process local files</span></h2>
<a href="https://www.html5rocks.com/en/tutorials/file/dndfiles/" class="whitebut ">Reading files in JavaScript using the File APIs</a>
<a href="https://blog.toright.com/posts/3205/實作-cross-origin-resource-sharing-cros-解決-ajax-發送跨網域存取-request.html" class="whitebut ">跨網域存取 Cross-Origin Resource Sharing (CORS)</a>
====================
HTML5 fileReader facility
Here's an example using FileReader:
function readSingleFile(e) {
var file = e.target.files[0];
if (!file) {
return;
}
var reader = new FileReader();
reader.onload = function(e) {
var contents = e.target.result;
displayContents(contents);
};
reader.readAsText(file);
}
function displayContents(contents) {
var element = document.getElementById('file-content');
element.textContent = contents;
}
document.getElementById('file-input')
.addEventListener('change', readSingleFile, false);
&lt;input type="file" id="file-input" />
&lt;h3>Contents of the file:&lt;/h3>
&lt;pre id="file-content">&lt;/pre>
The HTML5 fileReader facility does allow you to process local files, but these MUST be selected by the user, you cannot go rooting about the users disk looking for files.
I currently use this with development versions of Chrome (6.x).

I don't know what other browsers support it.
====================
Just use openFile(function to be executed with file contents as first parameter).
function dispFile(contents) {
document.getElementById('contents').innerHTML=contents
}
function clickElem(elem) {// Thx user1601638 on Stack Overflow (6/6/2018 - https://stackoverflow.com/questions/13405129/javascript-create-and-save-file )var eventMouse = document.createEvent("MouseEvents")eventMouse.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)elem.dispatchEvent(eventMouse)
}
function openFile(func) {readFile = function(e) {	var file = e.target.files[0];	if (!file) {		return;	}	var reader = new FileReader();	reader.onload = function(e) {		var contents = e.target.result;		fileInput.func(contents)		document.body.removeChild(fileInput)	}	reader.readAsText(file)}fileInput = document.createElement("input")fileInput.type='file'fileInput.style.display='none'fileInput.onchange=readFilefileInput.func=funcdocument.body.appendChild(fileInput)clickElem(fileInput)
}
Click the button then choose a file to see its contents displayed below.
&lt;button onclick="openFile(dispFile)">Open a file&lt;/button>
&lt;pre id="contents">&lt;/pre>
=======================
Try
function readFile(file) {
  return new Promise((resolve, reject) => {
    let fr = new FileReader();
    fr.onload = x=> resolve(fr.result);
    fr.readAsText(file);
  })
}
but user need to take action to choose file
=======================
Javascript cannot typically access local files in new browsers but the XMLHttpRequest object can be used to read files.

So it is actually Ajax (and not Javascript) which is reading the file.
If you want to read the file abc.txt, you can write the code as:
var txt = '';
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function(){
if(xmlhttp.status == 200 && xmlhttp.readyState == 4){
txt = xmlhttp.responseText;
}
};
xmlhttp.open("GET","abc.txt",true);
xmlhttp.send();
Now txt contains the contents of the file abc.txt.
=======================
<a href="https://recalll.co/ask/v/topic/javascript-How-to-read-a-local-text-file/5a7db8c71126f4a43f8b5029" class="whitebut ">javascript to read a local text file</a>
function getData(){
var xmlhttp;
if (window.XMLHttpRequest) {xmlhttp = new XMLHttpRequest();}      
else {xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");}
xmlhttp.onreadystatechange = function () {     
if (xmlhttp.readyState == 4) {         
var lines = xmlhttp.responseText; //*get all lines from file*
intoArray(lines); *//call function with parameter "lines*"         
}
}
xmlhttp.open("GET", "motsim1.txt", true);
xmlhttp.send();    
}
function intoArray (lines) {
// split text data into array "\n" is splitting character
var lineArr = lines.split('\n'); 
//just to check if it works output lineArr[index] as below
document.write(lineArr[2]);    
document.write(lineArr[3]);
}
<h2><pk>======</pk></h2>
<h2>Arrays</h2>
<a href="Arrays.html" class="redbut white2bs white redblackgrad">Arrays</a>
<a href="JavaScript Stack and Queue.html" class="redbut white2bs lime redblackgrad" target="_blank">JavaScript Stack and Queue</a>
<a href="JavaScript Multidimensional array.html" class="whitebut green limebs">JavaScript Multidimensional array</a>
<a href="Javascript Array Processing.html" class="redbut white2bs white redblackgrad">Javascript Array Processing</a>
<div id="arrarProcessFuncstoc" class="toc"><a href="#arrarProcessFuncstopic-0" target="_self">Merge Arrays</a><br><a href="#arrarProcessFuncstopic-1" target="_self">Fill Arrays</a><br><a href="#arrarProcessFuncstopic-2" target="_self">multiple dimensions array processing</a><br><a href="#arrarProcessFuncstopic-3" target="_self">map to array of arrays</a><br><a href="#arrarProcessFuncstopic-4" target="_self">get index of object in array</a><br><a href="#arrarProcessFuncstopic-5" target="_self">4 Methods to Search Through Arrays</a><br><a href="#arrarProcessFuncstopic-6" target="_self">Array.includes</a><br><a href="#arrarProcessFuncstopic-7" target="_self">Array.find</a><br><a href="#arrarProcessFuncstopic-8" target="_self">Array.findIndex</a><br><a href="#arrarProcessFuncstopic-9" target="_self">Array.indexOf</a><br><a href="#arrarProcessFuncstopic-10" target="_self">filter</a><br><a href="#arrarProcessFuncstopic-11" target="_self">forEach</a><br><a href="#arrarProcessFuncstopic-101" target="_self">Element-wise Operations</a><br></div></center>
<h3 id="arrarProcessFuncstopic-101">Element-wise Operations</h3>
a.map((e,i) => e + b[i]);
a = [2,3,4]
b = [4,7,90]
returns [6,10,94]
<h3 id="arrarProcessFuncstopic-0">Merge Arrays</h3>
combined2 = [...cars, ...trucks];
<h3 id="arrarProcessFuncstopic-1">Fill Arrays</h3>:
arr = Array(5).fill(1);
arr.fill(null,0,3); //array.fill(value, start, end)
<h3 id="arrarProcessFuncstopic-2">multiple dimensions array processing</h3>:
<h3 id="arrarProcessFuncstopic-3">map to array of arrays</h3>:
arr = [[3.1042, 7.2351], [1.4564, 4.335], [5.523, 7.157]];
fixed = x => x.toFixed(2);
arr = arr.map( subarray => subarray.map( fixed ));
or
arr = arr.map(function(subarray) {
return subarray.map(function(number) {
return fixed(number);
})
})
<h3 id="arrarProcessFuncstopic-4">get index of object in array</h3>
<a href="https://www.codegrepper.com/code-examples/javascript/javascript+get+index+of+object+in+array" class="whitebut ">get index of object in array</a>
// Get index of object with specific value in array
const needle = 3; // needle
const haystack = [{ id: 1 }, { id: 2 }, { id: 3 }]; // haystack
const index = haystack.findIndex(item => item.id === needle);
// find the index of a value in an array
var list = ["apple","banana","orange"]
var index_of_apple = list.indexOf("apple") // 0
// findindex
const array1 = [5, 12, 8, 130, 44];
const search = element => element > 13;
console.log(array1.findIndex(search));
// expected output: 3
const array2 = [
{ id: 1, dev: false },
{ id: 2, dev: false },
{ id: 3, dev: true }
];
const search = obj => obj.dev === true;
console.log(array2.findIndex(search)); // 2
//find the index of an object in an array
const letters = [{letter: 'a'},{letter: 'b'},{letter: 'c'}]
const index = letters.findIndex((element, index) => {
if (element.letter === 'b') { return true }
}) //index is `1`
// get index of element in array
const beasts = ['ant', 'bison', 'camel', 'duck', 'bison'];
beasts.indexOf('bison'); //ouput: 1
// start from index 2
beasts.indexOf('bison', 2); //output: 4
beasts.indexOf('giraffe'); //output: -1
<h3 id="arrarProcessFuncstopic-5">4 Methods to Search Through Arrays</h3>
<h3 id="arrarProcessFuncstopic-6">Array.includes</h3>
fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.includes("Mango"); // true
fruits.includes("Man");   // false
<h3 id="arrarProcessFuncstopic-7">Array.find</h3>
tree = ["birch", "maple", "oak", "poplar" ];
item = tree.find(name => name.startsWith("m")); // maple
<h3 id="arrarProcessFuncstopic-8">Array.findIndex</h3>
fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.findIndex(element => element.includes("an")) // 0
fruits.findIndex(element => element.includes("ab")) // -1
fruits.find(element => element.includes("an"))      // Banana
fruits.filter(element => element.includes("an"));   // Banana, Orange, Mango
fruits.some(element => element.includes("ang"));  // true
<h3 id="arrarProcessFuncstopic-9">Array.indexOf</h3>
search and returns the position of the first occurrence of a specified value in a string.
nameArr = ['sonarika','yogesh','sumit','vijay','anil'];
nameArr.indexOf('sumit') // 2
nameArr.indexOf('vis')   // -1
txt = "Sonarika Bhadoria";
txt.indexOf('a') // 3
arr = ["one", "two", "three", "four", "five"];
arr.includes("two"); // true
arr.includes("tw");  // false
<h3 id="arrarProcessFuncstopic-10">filter</h3>
search array for all substring match
arr2 = fruits.filter(element => element.includes("ang"));
ages = [12,14,19,21]
function checkAdult(age) { return age >= 18; }
ages.filter(checkAdult);
====
arr = [ 4, "Pete", 8, "John" ];
$.inArray( "Pete", arr ) // 1
$.inArray() returns index of the item in the array, or -1 if item was not found.
<h3 id="arrarProcessFuncstopic-11">forEach</h3>
forEach is an Array method that we can use to execute a function on each element in an array.
It can only be used on Arrays, Maps, and Sets.
arr = ['cat', 'dog', 'fish'];
arr.forEach(element => { console.log(element); });
// cat
// dog
// fish
arr = [5,4,8,7];
arr.forEach(function(item,index,arr) {
console.log("item: " + item + " at index: " + index + " in the array: " + arr);
})
// item: 5 at index: 0 in the array: 5,4,8,7
// item: 4 at index: 1 in the array: 5,4,8,7
// item: 8 at index: 2 in the array: 5,4,8,7
<h2>JavaScript数组方法</h2>
<br>
<div id="arrayFunctionstoc" class="toc"><a href="#arrayFunctionstopic-0" target="_self">forEach()</a><br><a href="#arrayFunctionstopic-1" target="_self">map()</a><br><a href="#arrayFunctionstopic-2" target="_self">filter()</a><br><a href="#arrayFunctionstopic-3" target="_self">reduce()</a><br><a href="#arrayFunctionstopic-4" target="_self">find() 和 findIndex()</a><br><a href="#arrayFunctionstopic-5" target="_self">some() 和 every()</a><br><a href="#arrayFunctionstopic-6" target="_self">includes()</a><br><a href="#arrayFunctionstopic-7" target="_self">flat()</a><br></div></center>
提升你的开发效率
<h3 id="arrayFunctionstopic-0">forEach()</h3>
forEach() 对数组中的每个元素执行一次回调函数。
它不创建新的数组。
const fruits = ["apple", "banana", "cherry"];
fruits.forEach(fruit => console.log(fruit));
<h3 id="arrayFunctionstopic-1">map()</h3>
map() 根据你提供的回调函数，将每个元素转换成新的形式，并创建一个新的数组。
map() 成为数据转换的理想工具。
const numbers = [1, 2, 3, 4];
const doubledNumbers = numbers.map(number => number * 2);
console.log(doubledNumbers);
// Output [2, 4, 6, 8]
<h3 id="arrayFunctionstopic-2">filter()</h3>
filter() 根据设定条件，筛选出符合条件的元素，并创建一个新的数组。
const numbers = [1, 2, 3, 4, 5];
const evenNumbers = numbers.filter(number => number % 2 === 0);
console.log(evenNumbers); 
// Output [2, 4]
<h3 id="arrayFunctionstopic-3">reduce()</h3>
reduce() 将数组中的所有元素通过定义的函数积累, 合成一个值。
const numbers = [1, 2, 3, 4];
const sum = numbers.reduce((accumulator, current) => accumulator + current, 0);
console.log(sum); 
// Output: 10
<h3 id="arrayFunctionstopic-4">find() 和 findIndex()</h3>
find() 和findIndex() 搜索满足条件的第一个元素或其索引。
const numbers = [1, 2, 4, 5];
const firstGreaterThanThree = numbers.find(number => number > 3);
console.log(firstGreaterThanThree);
// Output: 4
const numbers = [1, 2, 4, 5];
const indexOfFirstGreaterThanThree = numbers.findIndex(number => number > 3);
console.log(indexOfFirstGreaterThanThree);
// Output: 2
<h3 id="arrayFunctionstopic-5">some() 和 every()</h3>
some() 和every() 检查数组中是否至少有一个或所有元素满足条件。
const numbers = [1, 5, 8, 12];
const hasElementGreaterThanTen = numbers.some(number => number > 10);
console.log(hasElementGreaterThanTen);
// Output: true
const data = ["apple", "banana", 10];
const allStrings = data.every(element => typeof element === "string");
console.log(allStrings);
// Output: false
<h3 id="arrayFunctionstopic-6">includes()</h3>
includes() 告诉你数组中是否包含特定的值。
const fruits = ["apple", "banana", "cherry"];
const hasOrange = fruits.includes("orange");
console.log(hasOrange);
// Output: false
<h3 id="arrayFunctionstopic-7">flat()</h3>
flat() 将多维数组扁平化为一维数组。
const nestedArray = [1, [2, 3], 4];
const flattenedArray = nestedArray.flat();
console.log(flattenedArray);
// Output: [1, 2, 3, 4]
<h2>find max in array of arrays</h2>
var array = [
[14, 23],
[13, 47],
[38, 35],
[24, 34]
];
var maxRow = array.map(function(row){ return Math.max.apply(Math, row); });
Math.max(...maxRow)
ymax: Math.max(...thedrawdata.map(function(row){ return Math.max.apply(Math, row);})),
<h2>Find difference between two arrays</h2>
remove another set
var first = [ 1, 2, 3, 4, 5 ];
var second = [ 4, 5, 6 ];
var difference = first.filter(x => !second.<b>includes</b>(x));
var b = new Set(second);
var difference = [...first].filter(x => !b.<b>has</b>(x));
<h2>create an array containing 1…N</h2>
In ES6 using Array from() and keys() methods.
Array.from(Array(10).<b>keys</b>()) // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
Shorter version using spread operator.
[...Array(10).keys()]
<h3>Array from() Method</h3>
Array.from(object, mapFunction, thisValue)
The arr.from() method is used to creates a new array instance from a given array.
In the case of a string, every alphabet of the string is converted to an element of the new array instance and in case of integer values, a new array instance simply takes the elements of the given array.
var myArr = Array.from("ABCDEFG"); // Create an Array from a String:
// A,B,C,D,E,F,G
Array.from([1, 2, 3])
// 2,4,6
<h3>Array includes() Method</h3>
array.includes(element, start)
Check if an array includes "Mango":
var fruits = ["Banana", "Orange", "Apple", "Mango"];
var n = fruits.includes("Mango");
// true
<h2>Removing specific item from array</h2>
let value = 3
let arr = [1, 2, 3, 4, 5, 3]
arr = arr.filter(item => item !== value)
notvisitedList = notvisitedList.filter(item => item !== topicpointer);
notvisitedList[Math.floor(Math.random() * notvisitedList.length)];
Removing multiple items
An additional advantage of this method is that you can remove multiple items
let forDeletion = [2, 3, 5]
let arr = [1, 2, 3, 4, 5, 3]
arr = arr.filter(item => !forDeletion.includes(item))
<h2>Arrays and loops</h2>
<a href="http://www.javascriptkit.com/javatutors/loop1.shtml">Understanding basic arrays and loops</a>
<a href="http://www.javascriptkit.com/javatutors/densearray1.shtml">Understanding dense arrays</a>
<a href="http://www.javascriptkit.com/javatutors/literal-notation.shtml">Defining arrays &amp; multi-dimensional   arrays using literal notation</a>
<a href="http://www.javascriptkit.com/javatutors/twoarray1.shtml">Creating a custom two-dimensional array</a>
<a href="http://www.javascriptkit.com/javatutors/arrayprototypeslice.shtml">Converting objects to arrays using Array.prototype.slice.call()</a>
<a href="http://www.javascriptkit.com/javatutors/arraysort.shtml">Sorting an array using the sort() method</a>
<h2>arithmetic on two arrays</h2>
var a = [1,3,5,7,9];
var b = [5,4,3,2,1];
a.map((x, index)=> b[index] + x ); // [6, 7, 8, 9, 10]
<h2>Looping over arrays</h2>
<h3>while</h3>
<k>let index = 0;
const array = [1,2,3,4,5,6];
while (index &lt; array.length) {
console.log(array[index]);
index++;
}
</k>
<h3>for (classical)</h3><k>const array = [1,2,3,4,5,6];
for (let index = 0; index &lt; array.length; index++) {
console.log(array[index]);
}
</k>
<h3>forEach</h3><k>const array = [1,2,3,4,5,6];
array.forEach(function(current_value, index, array) {
console.log(`At index ${index} in array ${array} the value is ${current_value}`);
});
// => undefined
</k>
<h3>map</h3>The last construct was useful, however, it doesn’t return a new array which might
be undesirable for your specific case.

<k>map</k> solves this by applying a function
over every element and then returning the new array.
<k>const array = [1,2,3,4,5,6];
const square = x => Math.pow(x, 2);
const squares = array.map(square);
console.log(`Original array: ${array}`);
console.log(`Squared array: ${squares}`);
</k>
The full signature for <k>map</k> is <k>.map(current_value, index, array)</k>.
<h3>reduce</h3>From MDN:
<blockquote>
The reduce() method applies a function against an accumulator and each element
in the array (from left to right) to reduce it to a single value.
</blockquote>
<k>const array = [1,2,3,4,5,6];
const sum = (x, y) => x + y;
const array_sum = array.reduce(sum, 0);
console.log(`The sum of array: ${array} is ${array_sum}`);
</k>
<h3>filter</h3>Filters elements on an array based on a boolean function.
<k>const array = [1,2,3,4,5,6];
const even = x => x % 2 === 0;
const even_array = array.filter(even);
console.log(`Even numbers in array ${array}: ${even_array}`);
</k>
<h3>every</h3>Got an array and want to test if a given condition is met in every element?
<k>const array = [1,2,3,4,5,6];
const under_seven = x => x &lt; 7;
if (array.every(under_seven)) {
console.log('Every element in the array is less than 7');
} else {
console.log('At least one element in the array was bigger than 7');
}
</k>
<h3>some</h3>Test if at least one element matches our boolean function.
<k>const array = [1,2,3,9,5,6,4];
const over_seven = x => x > 7;
if (array.some(over_seven)) {
console.log('At least one element bigger than 7 was found');
} else {
console.log('No element bigger than 7 was found');
}
</k>
<h2>Find the Max of all the nested arrays</h2>
const arr = [[12,45,75], [54,45,2],[23,54,75,2]];
const max = Math.max(...[].concat(...arr));

<h2>如何合并两个对象</h2>
<div id="mergeObjtoc" class="toc"><a href="#mergeObjtopic-0" target="_self"> 1.1. 使用 Object.assign()</a><br><a href="#mergeObjtopic-1" target="_self"> 1.2. 使用扩展运算符 (...)</a><br><a href="#mergeObjtopic-2" target="_self"> 1.3. 使用 Object.assign() 和扩展运算符组合</a><br><a href="#mergeObjtopic-3" target="_self"> 1.4. 注意事项</a><br></div></center>

在 JavaScript 中，可以使用多种方式来合并两个对象。

1.1. 使用 Object.assign()
1.2. 使用扩展运算符 (...)
1.3. 使用 Object.assign() 和扩展运算符组合

<h3 id="mergeObjtopic-0"> 1.1. 使用 Object.assign()</h3>
Object.assign() 方法可以用来合并一个或多个对象到目标对象中。

它的第一个参数是目标对象，后面的参数都是源对象。

const obj1 = { a: 1, b: 2 };
const obj2 = { b: 3, c: 4 };
const mergedObj = Object.assign({}, obj1, obj2);
console.log(mergedObj); // 输出: { a: 1, b: 3, c: 4 }
注意，如果目标对象和源对象有相同的键，那么源对象的键值会覆盖目标对象的键值。

<h3 id="mergeObjtopic-1"> 1.2. 使用扩展运算符 (...)</h3>
ES6 引入了扩展运算符，它可以用来复制可枚举的属性到新的对象中。

const obj1 = { a: 1, b: 2 };
const obj2 = { b: 3, c: 4 };
const mergedObj = { ...obj1, ...obj2 };
console.log(mergedObj); // 输出: { a: 1, b: 3, c: 4 }
这种方式同样会覆盖相同的键。

<h3 id="mergeObjtopic-2"> 1.3. 使用 Object.assign() 和扩展运算符组合</h3>
如果你想要合并的对象中有方法或者需要保持原有对象不变，你可以使用 Object.assign() 和扩展运算符的组合：
const obj1 = { a: 1, b: 2, method: function() { console.log('method from obj1'); } };
const obj2 = { b: 3, c: 4, method: function() { console.log('method from obj2'); } };
// 使用 Object.assign 来合并方法
const mergedObj = Object.assign({}, obj1, obj2, { ...obj1, ...obj2 });
console.log(mergedObj); // 输出: { a: 1, b: 3, c: 4, method: [Function (anonymous)] }
// 或者使用扩展运算符
const mergedObj2 = { ...obj1, ...obj2, ...obj1 };
console.log(mergedObj2); // 输出: { a: 1, b: 3, c: 4, method: [Function (anonymous)] }

<h3 id="mergeObjtopic-3"> 1.4. 注意事项</h3>
如果对象中有相同的键，那么后一个对象的值会覆盖前一个对象的值。

使用 Object.assign() 和扩展运算符时，默认只会浅拷贝第一层属性。

如果对象包含嵌套的对象，你需要进行深拷贝。

如果你希望进行深拷贝，可以考虑使用第三方库如 lodash 的 _.merge() 方法。

<h2>Four ways to merge arrays</h2>
<h3>1. Using for loop</h3>
We can loop through the array source array which need to be pushed , then add elements one by one
function push(fromArray, toArray) {<strong>
for(let i = 0, len = fromArray.length; i &lt; len; i++) {
toArray.push(fromArray[i]);
}</strong>
return toArray;
}
var array1 = [1,2,3,4,5];var array2= [6,7,8,9,10];var array3 = [];push(array1, array3);push(array2, array3);
<h3>2. Using spread operator</h3>
<strong>Spread syntax</strong> allows an iterable such as an array expression or string to be expanded in places where zero or more arguments (for function calls) or elements (for array literals) are expected
var array1 = [1,2,3,4,5];var array2 = [6,7,8,9,10];var array3 = [...array1, ...array2];array3; // [1,2,3,4,5,6,7,8,9,10];
We can use spread operator with push
var array1 = [1,2,3,4,5];var array2 = [6,7,8,9,10];var array3 = []array3.push(...array1, ...array2);array3; //  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
We can also use spread operator with <k>Array.of</k>
var array1 = [1,2,3,4,5]
var array2 = [6,7,8,9,10];var array3 = Array.of(...array2, ...array1);
We can use spread operator to convert string to array
var string ="two";var arrayOfChar = [...string];arrayOfChar; //["t", "w", "o"]
<h3>3. Using concat method</h3>
The <k><strong>concat()</strong></k> method is used to merge two or more arrays.

This method does not change the existing arrays, but instead returns a <k><strong>new array.</strong></k>
var array1 = [1,2,3,4,5]var array2 = [6,7,8,9,10];
var array3 = array1.concat(array2);// orvar array3 = [].concat(array1, array2);
We can pass other than array as arguments.
var a = "string";var b = 1;var c = {};var combined = [].concat(a, b, c)combined; //  ["string", 1, {…}]
<h3>4. Using Reduce method</h3>
The <k><strong>reduce()</strong></k> method executes a <strong>reducer</strong> function (that you provide) on each element of the array, resulting in a single output value.
var array1 = [1,2,3,4,5];var array2 = [6,7,8,9,10];var array3 = array2.reduce((newArray, item) => {
<strong>newArray.push(item);
return newArray;</strong> ), <strong>array1</strong>);

<h2>merge 2 arrays into coordinates</h2>
yCord = [30, 29, 31, 32];
xCord = [0, 1, 2 ,3];
coords = xCord.map((i, index)=> [i, yCord[index]]);
console.log(coords)
<h2>To list all arrays in JavaScript</h2>
One way is to put all arrays in an object
Arrays = {
house: ["red","blue","yellow"],
cars: ["fast","big","safe"],
sofa: ["cozy","modern","elegant"]
}
numberOfArrays = Object.keys(Arrays).length;
sentence = numberOfArrays + ' Arrays - ' + Object.keys(Arrays).join(', ');
var allListNames = ["longHistList", "myfavorList", "activeList", "aETFList", "ahDiffList", "a10YiList"]
console.log(Array.from(allListNames));
<h2><pk>=======</pk></h2>
<h2>onclick event</h2>
Note also:
dblclick	double-clicks on an element
mousedown	presses a mouse button over an element
mouseup	releases a mouse button over an element
&lt;p ondblclick="myFunction()">Double-click me&lt;/p>
&lt;p id="demo">Click me.&lt;/p>
&lt;script>
document.getElementById("demo").onclick = function() {myFunction()};
function myFunction() {
document.getElementById("demo").innerHTML = "YOU CLICKED ME!";
}
&lt;/script>
&lt;button onclick="myFunction()">Try it&lt;/button>
&lt;p id="demo">&lt;/p>
&lt;script>
function myFunction() {
var person = prompt("Please enter your name", "Harry Potter");
if (person != null) {
document.getElementById("demo").innerHTML =
"Hello " + person + "! How are you today?";
}
}
&lt;/script>
===========================<br>
<br>
<h2>alert() and prompt()</h2>
alert(message)
// use this to alert variable inside string
function doHomework(subject) {
alert(`Starting my ${subject} homework.`);
}
doHomework('math');
// Alerts: Starting my math homework.
prompt(text, defaultText)
text	text to display in the dialog box
defaults	Optional.

The default input text
confirm(message)
returns true if the user clicked "OK", and false otherwise.
<h2>Opening A Window</h2>
Browser Windows
&lt;a href="link.html" target="mywindow">Click Here&lt;/a>
Opening A Window With JavaScript
window.open('link.html','mywindow');
onclick
&lt;a href="#" onClick="window.open('link.html','mywindow');">Click Here&lt;/a>
Manipulating Windows features
window.open('link.html','mywindow','window features');
===========================
<br>
<h2>Link Events</h2>
onClick
onMouseOver
onMouseOut
(note the quotation marks arrangement!) 
&lt;a href="index.htm" onMouseOver="home_button.src='homeon.gif';" onMouseOut="home_button.src='home.gif';">&lt;img src="home.gif" alt="Home" name="home_button" border="0">&lt;/a>
===========================
<br>
<h2>Two JavaScripts most important functions, If and Loops.</h2>
var guess = prompt("Please guess a number between 1 and 10","");
if(guess == 5){ alert('Correct! I was thinking of 5');}
else{ alert('Wrong! I was thinking of 5');}
===========================
<h2>password</h2>
var password = 'hello';
var input = prompt('Please enter the password', '');
while(input != password){var input= prompt('Please enter the password','');}
<h2>for loop</h2>
for(loop=0; loop &lt; 11; loop++){ document.writeln(loop);}
<h2>Forms & Functions</h2>
create a form
&lt;form name="formname">
&lt;/form>
Place a text box
&lt;input type="text" name="boxname">
window.document.formname.first_text.value='Hi there';
This tells the browser to put 'Hi there!' into the value of the item called 'first_text' in the form called 'formname'.
<h3>To make sure an input field has a value before submit</h3>
using the required attribute in HTML5:
&lt;input id="m" autocomplete="off" required/>
but you can just turn it of in browser console
recommend:
if (document.getElementById("m").value == '') {
//code here...
}
<h3>Accessing Values</h3>
&lt;form name="feedback" action="script.cgi" method="post" onSubmit="return checkform()">
&lt;input type="text" name="name">
&lt;input type="text" name="email">
&lt;textarea name="comments">&lt;/textarea>
&lt;/form>
To get the value from all types of form elements.

<h3>Text Boxes, &lt;textarea>s and hiddens</h3>
document.feedback.field.value
You'll usually be checking if this value is empty, i.e.
if (document.feedback.field.value == '') {return false;
}
<h3>Select Boxes</h3>
Each option in a drop-down box is indexed in the array <k>options[]</k>, starting as always with 0.

You then get the value of the element at this index.

It's like this:
document.feedback.field.options
[document.feedback.field.selectedIndex].value
You can also change the selected index through JavaScript.

To set it to the first option, execute this:
document.feedback.field.selectedIndex = 0;
<h3>Check Boxes</h3>
Checkboxes behave differently to other elements &#8212; their value is always <k>on</k>.

Instead, you have to check if their Boolean <k>checked</k> value is true or, in this case, false.
if (<strong>!</strong>document.feedback.field.checked) {// box is not checkedreturn false;
}
Naturally, to check a box, do this
document.feedback.field.checked = true;
<h3>Radio Buttons</h3>
Annoyingly, there is no simple way to check which radio button out of a group is selected &#8212; you have to check through each element, linked with Boolean AND operators .

Usually you'll just want to check if <em>none</em> of them have been selected, as in this example:
if (!document.feedback.field[0].checked &amp;&amp;
!document.feedback.field[1].checked &amp;&amp;
!document.feedback.field[2].checked) {// no radio button is selectedreturn false;
}
<h2>Capture a form submit in JavaScript</h2>
<h3>Using onsubmit:</h3>
&lt;form action="action.php" onsubmit="myFunction()">
Enter name: &lt;input type="text" name="fname">
&lt;input type="submit" value="Submit">
&lt;/form>
function myFunction() {
alert("The form was submitted");
}
<h3>Using JQuery on button:</h3>
&lt;form id="my-form">
&lt;input type="text" name="in" value="some data" />
&lt;button type="submit">Go&lt;/button>
&lt;/form>
$('button').click(function() {
//do something;
});
<h3>JavaScript Form action using return</h3>
function validateForm() {
var x = document.forms["myForm"]["fname"].value;
if (x == "") { alert("No data"); return false;}
}
&lt;form name="myForm" action="action.php" onsubmit="return validateForm()" method="post">
Name: &lt;input type="text" name="fname">
&lt;input type="submit" value="Submit">
&lt;/form>
===========================
<br>
<h2>Events</h2>
onBlur - Happens when the cursor is moved out of the field
onFocus - Happens when the cursor is moved into the field
onChange - Happens when the field is changed and the cursor moves out of it
&lt;input type="text" onBlur="dothis">
JavaScript Functions
function sayhi()
{
alert(Hi there!);
}
}
&lt;a href="#" onMouseOver="sayhi();">Say Hi&lt;/a>
===========================
<br>
<h2>Submit Button</h2>
&lt;form name="myform" onSubmit="return false;">
&lt;input type="submit" value="Submit">
&lt;/form>
&lt;form name="myform" onSubmit="MyFunction(); return false;">
&lt;/fopre>
===========================
<br>
<h2>Checkboxes</h2>
if(window.document.example1.my_checkbox.checked=true)
{
alert('The box is checked!')
}
else
{
window.document.example1.my_checkbox.checked=true;
alert('The box was not checked so I have checked it!');
}
// show number checked
alert($(":checkbox:checked").length);
===========================
<br>
<h2>The JavaScript Switch Statement</h2>
switch(expression) {
case n:
code block
break;
case n:
code block
break;
default:
code block
}
===========================
<br>
<h2>Common Code Blocks</h2>
switch (new Date().getDay()) {
case 4:
case 5:
text = "Soon it is Weekend";
break; 
case 0:
case 6:
text = "It is Weekend";
break;
default: 
text = "Looking forward to the Weekend";
}
===========================
<br>
<h2>The For/In Loop</h2>
var person = {fname:"John", lname:"Doe", age:25}; 
var text = "";
var x;
for (x in person) {
text += person[x];
}
===========================
<br>
<h2>JavaScript Break and Continue</h2>
for (i = 0; i &lt; 10; i++) {
if (i === 3) { break; }
text += "The number is " + i + "&lt;br>";
}
for (i = 0; i &lt; 10; i++) {
if (i === 3) { continue; }
text += "The number is " + i + "&lt;br>";
}
===========================
<br>
<h2>JavaScript Labels</h2>
label:
statements
break labelname; 
continue labelname;
var cars = ["BMW", "Volvo", "Saab", "Ford"];
list: {
text += cars[0] + "&lt;br>"; 
text += cars[1] + "&lt;br>"; 
text += cars[2] + "&lt;br>"; 
break list;
text += cars[3] + "&lt;br>"; 
text += cars[4] + "&lt;br>"; 
text += cars[5] + "&lt;br>"; 
}
===========================
<br>
<h2>sCt(stkcode) </h2>
&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js">&lt;/script>
&lt;script>
function sCt(stkcode) {
imgHead = "&lt;img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1150&chartheight=690&stockid=";
imgPCode= "&period=";
imgTail="&type=1&logoStyle=1'>&lt;br>&lt;br>";
intv = [7, 4, 3, 11];
var imgWindow = window.open("");
theListDom ='&lt;meta http-equiv="refresh" content="60">&lt;style type="text/css">body { margin-top: 2%; margin-bottom: 2%; margin-right: 3%; margin-left: 3%; background-color: #000000;}&lt;/style>&lt;body>&lt;br>'
for( var imgPeriod = 0; imgPeriod &lt; intv.length; imgPeriod++){
theListDom = theListDom + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
};
imgWindow.document.write(theListDom);
}
&lt;/script>
===========================
<br>
<h2>History go() Method()</h2>
&lt;button onclick="goBack()">Go Back 2 Pages</button>
function goBack() {
window.history.go(-2);
}
Go forward one page (This example will not work if the next page does not exist in the history list):
window.history.go(1);
<h2>history.back()</h2>
&lt;script>
$(document).ready(function(){
$('.keys').click(function(){
parent.history.back();
return false;
});
});
&lt;/script>
===========================
<br>
<h2>function chkKey()</h2>
Note: the id tag cannot be located inside b, should be p or div
function chkKey() {
var testkey = getChar(event);
if(testkey == '9'){
sCt(992);
}
if(testkey == 'h'){
sCt(110000);
}
if(testkey == 'a'){
sCt("000001.sh");
}
if(testkey == 'f'){
window.location = '#stkcodeid';
$('#stkcode').value ="";
}
if(testkey == 'A'){
window.location = '#Astock';
}
}
===========================
<br>
<h2>function getChar(event) </h2>
function getChar(event) {
if (event.which!=0 && event.charCode!=0) {
return String.fromCharCode(event.which)   // the rest
} else {
return null // special key
}
}
function openHtml(){
console.log( "keypress: " + $(this).value );
};
&lt;/script>
&lt;body onkeypress="chkKey()">
&lt;!--&lt;body onload="loadfile()">-->
===========================
<br>
<h2><span class="red redbs">Go Bottom</span></h2>
&lt;b class="left" onclick="window.scrollTo(0,document.body.scrollHeight);">Go Bottom&lt;/b> | 
&lt;div id ="codelist">&lt;/div>
Scroll to Top:
window.scrollTo(0,0);
===========================
<br>
<h2>HTML DOM scrollTop Property</h2>
The scrollTop property
sets
or returns
the number of pixels an element's content is scrolled vertically.
Example
Get the number of pixels the content of a &lt;div> element is scrolled horizontally and vertically:
var elmnt = document.getElementById("myDIV");
var x = elmnt.scrollLeft;
var y = elmnt.scrollTop;
Note: this is only a property, not a method, it won't move, 
and the return value is just one interger, showing the scrolled distance, and if the previous action did not scrolled, the distance is zero.
<h2>HTML DOM scrollIntoView Method</h2>
Example
Scroll the element with id="content" into the visible area of the browser window:
var elmnt = document.getElementById("content");
elmnt.scrollIntoView();
===========================
<h2>auto scroll page </h2>
$("html, body").animate({ scrollTop: $(document).height() }, 3000000);
divtoc = document.getElementById("stkChart");
$('body,html').animate({scrollTop:(divtoc.clientHeight + divtoc.offsetTop-1480)}, 1);
$( "#book" ).animate({
width: [ "toggle", "swing" ],
height: [ "toggle", "swing" ],
opacity: "toggle"
}, 5000, "linear", function() {
$( this ).after( "Animation complete." );
});
==========
<h2>The animate() method</h2>
(selector).animate({styles},speed,easing,callback)
The animate() method performs a custom animation of a set of CSS properties.
$("#box").animate({height: "300px"});
$( "p" ).animate({
height: 200, 
width: 400, 
opacity: 0.5
}, 1000, "linear", function() { alert( "all done" );
});
Alternate Syntax
(selector).animate({styles},{options})
========
Parameter	Description
styles	Required.
Specifies one or more CSS properties/values to animate.
Note: 
The property names must be camel-cased when used with the animate() method: You will need to write paddingLeft instead of padding-left, marginRight instead of margin-right, and so on.
Most properties that are non-numeric cannot be animated using basic jQuery functionality
For example, width, height, or left can be animated but background-color cannot be, unless the jQuery.Color plugin is used.

Property values are treated as a number of pixels unless otherwise specified.

The units em and % can be specified where applicable.
Only numeric values can be animated (like "margin:30px").

String values cannot be animated (like "background-color:red"), 
except for the strings "show", "hide" and "toggle".

These values allow hiding and showing the animated element.
========
Properties that can be animated:
backgroundPositionX, backgroundPositionY, borderWidth, borderBottomWidth, borderLeftWidth, borderRightWidth, borderTopWidth, borderSpacing, margin, marginBottom, marginLeft, marginRight, marginTop, opacity, outlineWidth, padding, paddingBottom, paddingLeft, paddingRight, paddingTop, height, width, maxHeight, maxWidth, minHeight, minWidth, fontSize, bottom, left, right, top, letterSpacing, wordSpacing, lineHeight, textIndent
========
speed	Optional.

Specifies the speed of the animation.

Default value is 400 milliseconds
Possible values: milliseconds (like 100, 1000, 5000, etc), "slow", "fast"
========
easing	Optional.

Specifies the speed of the element in different points of the animation.

Default value is "swing".

Possible values:
"swing" - moves slower at the beginning/end, but faster in the middle
"linear" - moves in a constant speed
Tip: More easing functions are available in external plugins.
========
callback	Optional.

A function to be executed after the animation completes.
========
Alternate Syntax
options	Optional.

Specifies additional options for the animation.

Possible values:
duration	the speed of the animation
easing	the easing function to use
complete	a function to be executed after the animation completes
step		a function to be executed for each step in the animation
progress	a function to be executed after each step in the animation
queue	a Boolean value specifying whether or not to place the animation in the effects queue
specialEasing	a map of one or more CSS properties from the styles parameter, and their corresponding easing functions
start	a function to be executed when the animation begins
done		a function to be executed when the animation ends
fail		a function to be executed if the animation fails to complete
always	a function to be executed if the animation stops without completing
==========
<h2>window.scrollBy(0,1);</h2>
scrolldelay = setTimeout(pageScroll,5);
==========
<h2>Select file</h2>
&lt;html>
&lt;head>
&lt;script type="text/javascript">
function alertFilename()
{
var thefile = document.getElementById('thefile');
alert(thefile.value);
}
&lt;/script>
&lt;/head>
&lt;body>
&lt;form>
&lt;input type="file" id="thefile" onchange="alertFilename()" />
&lt;input type="button" onclick="alertFilename()" value="alert" />
&lt;/form>
&lt;/body>
&lt;/html>
===========================
<br>
<h2>input</h2>
&lt;input 
type="submit" 
name="Button1" 
value="查詢過往資料(SEARCH)" 
onclick="if (typeof(Page_ClientValidate) == 'function') Page_ClientValidate(); " 
language="javascript" 
id="Button1" 
class="b">
===========================
<br>
<h2>JSON</h2>
var json = '{"result":true,"count":1}',
obj = JSON.parse(theUrl);
JSON.parse(theUrl);
or
jQuery.getJSON():
data = '[{"name" : "Ashwin", "age" : "20"},{"name" : "Abhinandan", "age" : "20"}]';
Mention the path of the json file in the script source along with the javascript file.
&lt;script type="text/javascript" src="data.json">&lt;/script>
&lt;script type="text/javascript" src="javascrip.js">&lt;/script>
Get the Object from the json file
var mydata = JSON.parse(data);
alert(mydata[0].name);
alert(mydata[0].age);
alert(mydata[1].name);
alert(mydata[1].age);
to store data in jquery, data = [] and update later
===========================
<br>
<h2>Detecting double-press of a key</h2>
&lt;head>
&lt;script type="text/javascript">
function checkspace(event){if (window.event.keyCode == 32) alert('Stop that!');}
&lt;/script>
&lt;/head>
&lt;body>
&lt;BODY onKeydown="checkspace()">
Replace alert with whatever it is you want it to do.
Then you could do a counter function that increments by 100 every 100ms, and do an if
var keypresses = 0;
var counter = 0;
startcouting();
if(event.keyCode == 32){
keypresses += 1;
}
if(keypresses == 2 && counter &lt;= 500){ 
do something;
reset the counter;
}
===========================
<br>
<h2>Detecting key press</h2>
https://stackoverflow.com/questions/19502155/detecting-multiple-key-press-in-javascript
Detecting multiple key press in javascript
https://stackoverflow.com/questions/5203407/javascript-multiple-keys-pressed-at-once
JavaScript multiple keys pressed at once
The simplest way to find out whether the ctrl is pressed, is to test the event object for the ctrlKey property:
$(document).keypress(function(e){
console.log(e.which, e.ctrlKey);
});
===========================
<br>
<h2>button onclick open programs</h2>
&lt;button onclick="window.open('file:///C:/Windows/notepad.exe')">
Launch notepad
&lt;/button>
===========================
<br>
<h2>wechatQrcode</h2>
&lt;script type="text/javascript" src="js/jquery-1.11.3.min.js" charset="utf-8">&lt;/script>
&lt;script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js" charset="utf-8">&lt;/script>
&lt;script src="js/jquery.share.min.js?ver=1.1" type="text/javascript">&lt;/script>
&lt;script type="text/javascript">
$(function(){
var $config = {
url: 'http://sign.hknt.hk/',
sites: ['facebook', 'wechat', 'twitter'],
wechatQrcodeTitle: '微信掃一掃',
wechatQrcodeHelper: '&lt;p>將活動地址分享到朋友圈&lt;/p>'
};
if (/MicroMessenger/i.test(navigator.userAgent)) {
$config.wechatQrcodeTitle = 'QR Code';
$config.wechatQrcodeHelper = '&lt;p>長按 QR Code 識別&lt;/p>';
}
$('#social-share').share($config);
var mask = $('#share-mask');
$('#social-share').children('a').on('click',function(e){
if(/MicroMessenger/i.test(navigator.userAgent) && (this.className.indexOf('icon-whatsapp') != -1)){
e.preventDefault();
mask.show().on('click',function mehide(){
$(this).hide().off('click',mehide);       
});
}
});
var titlediv = $('#title-div'),
chart = $('.chart-num').children('span');
$.ajax({
url: 'get_data.php',
type: 'get',
dataType: 'json',
success: function(data){
titlediv.children('span').each(function(i){
switch(i){
case 0: this.innerText = data['end_date'][1];break;
case 1: this.innerText = data['end_date'][2];break;
case 2: this.innerText = data['end_time'][0];break;
case 3: this.innerText = data['total'];break;
}
});
chart.each(function(i){
switch(i){
case 0: this.innerText = data['sector_1']; break;
case 1: this.innerText = data['sector_2']; break;
case 2: this.innerText = data['sector_0']; break;
}
});
},
error: function(err){
console.log('err',err);
}
});
});
&lt;/script>
===========================
<br>
<h2>chkKey()</h2>
&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js">&lt;/script>
&lt;script>
function chkKey() {
var testkey = getChar(event);
if(testkey == 'n'){
window.location = '#xinwen';
}
}
function getChar(event) {
if(testkey == 'y'){
window.open("http://www.youtube.com");
}
if (event.which!=0 && event.charCode!=0) {
return String.fromCharCode(event.which)   // the rest
} else {
return null // special key
}
}
&lt;/script>
===========================
<br>
<h2>sCt(stkcode)</h2>
&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js">&lt;/script>
&lt;body onkeypress="chkKey()">
&lt;script>
function sCt(stkcode) {
imgHead = "&lt;img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1150&chartheight=690&stockid=";
imgPCode= "&period=";
imgTail="&type=1&logoStyle=1'>&lt;br>&lt;br>";
intv = [4, 3, 2, 1, 5012, 5007, 5000, 7, 11];
var imgWindow = window.open("");
imgAdr ='&lt;meta http-equiv="refresh" content="60">&lt;br>'
for( var imgPeriod = 0; imgPeriod &lt; intv.length; imgPeriod++){
imgAdr = imgAdr + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
};
imgWindow.document.write(imgAdr);
}
&lt;/script>
&lt;script>
$(document).ready(function(){
$('.keys').click(function(){
parent.history.back();
return false;
});
});
function chkKey() {
var testkey = getChar(event);
if(testkey == 'f'){
window.location = '#stkcodeid';
$('#stkcode').value ="";
}
if(testkey == 'A'){
window.location = '#Astock';
}
}
function getChar(event) {
if (event.which!=0 && event.charCode!=0) {
return String.fromCharCode(event.which)   // the rest
} else {
return null // special key
}
}
function openHtml(){
console.log( "keypress: " + $(this).value );
};
&lt;/script>
&lt;b class="left" onclick="window.scrollTo(0,document.body.scrollHeight);">Go Bottom&lt;/b> | 
&lt;b onclick=sCt("02823")>02823&lt;/b> | 
===========================
<h2>get radio elements value and compare</h2>
var submitAnswer = function() {
var radios = document.getElementsByName('choice');
var val= "";
for (var i = 0, length = radios.length; i &lt; length; i++) {
if (radios[i].checked) { val = radios[i].value; break; }
}
if (val == "" ) { alert('please select choice answer'); }
else if ( val == "Scripting" ) { alert('Answer is correct !'); }
else { alert('Answer is wrong'); }
};
&lt;h1>JavaScript is ______ Language.&lt;/h1>&lt;br>
&lt;form >
&lt;input type="radio" name="choice" value="Scripting"> Scripting
&lt;input type="radio" name="choice" value="Programming"> Programming
&lt;input type="radio" name="choice" value="Application"> Application
&lt;input type="radio" name="choice" value="None of These"> None of These
&lt;/form>
&lt;button onclick="submitAnswer()">Submit Answer&lt;/button>
===========================
<br>
<h2>access object</h2>
const data = {
code: 42, 
items: [{ id: 1, name: 'foo' }, 
{ id: 2, name: 'bar' }]
};
console.log(data.items);
console.log(data.items[0]);
console.log(data.items[1]);
console.log(data.items[0].name);
console.log(data.items[0].id);
===========================
<h2>This is the create TOC improved version</h2>
$(function() {
var toc = $('#toc');
$('h2').each(function(i) {
var topic = $(this), topicNum = i + 1;
toc.append('&lt;a href="#topic-' + topicNum + '" target="_self">' + topic.text() + '&lt;/a>&lt;br>');
topic.attr('id', 'topic-' + topicNum);
});
});
===========================
<h2>jQuery Manipulating CSS</h2>
addClass() - Adds one or more classes to the selected elements
removeClass() - Removes one or more classes from the selected elements
toggleClass() - Toggles between adding/removing classes
css() - Sets or returns the style attribute
$("button").click(function(){
$("h1, h2, p").addClass("blue");
$("div").addClass("important");
});
<h2>jQuery addClass() Method</h2>
Add a class name to the first p element:
$("button").click(function(){
$("p:first").addClass("intro");
});
Tip: To add more than one class, separate the class names with spaces.
$(selector).addClass(classname,function(index,currentclass))
<h2>changesize(newFontSize)</h2>
function changesize(newFontSize) {
var currentFontSize = getCookie("fontsize");
if (newFontSize != currentFontSize) {
$("html").addClass(newFontSize);
$("#fontsize" + newFontSize).addClass("selected");
if (currentFontSize != "") {
$("html").removeClass(currentFontSize);
$("#fontsize" + currentFontSize).removeClass("selected");
}
setCookie("fontsize", newFontSize);
}
}
===========================
<h2>Cookies</h2>
Cookies are saved in name-value pairs like:
username = John Doe
Create a Cookie with JavaScript
document.cookie = "username=John Doe";
add an expiry date.
By default, the cookie is deleted when the browser is closed.
document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC";
Tell the browser what path the cookie belongs to with a path parameter.
By default, the cookie belongs to the current page.
document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
Read a Cookie with JavaScript
var x = document.cookie;
will return all cookies in one string much like: cookie1=value; cookie2=value; cookie3=value;
Delete a Cookie with JavaScript
Just set the expires parameter to a passed date
document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
The Cookie String
The document.cookie property looks like a normal text string.

But it is not.
Even if you write a whole cookie string to document.cookie, when you read it out again, you can only see the name-value pair of it.
If you set a new cookie, older cookies are not overwritten.

The new cookie is added to document.cookie, so if you read document.cookie again you will get something like:
cookie1 = value; cookie2 = value;
<h2>functions to handle Cookies</h2>
<br>
<br>
<div id="Cookiestoc" class="toc"><a href="#Cookiestopic-0" target="_self">Set a Cookie</a><br><a href="#Cookiestopic-1" target="_self">Get a Cookie</a><br><a href="#Cookiestopic-2" target="_self">Check a Cookie</a><br></div></center>
<h3 id="Cookiestopic-0">Set a Cookie</h3>
First, we create a function that stores the name of the visitor in a cookie variable:
Example
function setCookie(cname, cvalue, exdays) {
var d = new Date();
d.setTime(d.getTime() + (exdays*24*60*60*1000));
var expires = "expires="+ d.toUTCString();
document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}
<h3 id="Cookiestopic-1">Get a Cookie</h3>
Then, we create a function that returns the value of a specified cookie:
Example
function getCookie(cname) {
var name = cname + "=";
var decodedCookie = decodeURIComponent(document.cookie);
var ca = decodedCookie.split(';');
for(var i = 0; i &lt; ca.length; i++) {
var c = ca[i];
while (c.charAt(0) == ' ') { c = c.substring(1); }
if (c.indexOf(name) == 0){ return c.substring(name.length, c.length);}
}
return "";
}
<h3 id="Cookiestopic-2">Check a Cookie</h3>
checks if a cookie is set.
If the cookie is set it will display a greeting.
If the cookie is not set, it will display a prompt box, asking for the name of the user, and stores the username cookie for 365 days, by calling the setCookie function:
Example
function checkCookie() {
var username = getCookie("username");
if (username != "") { alert("Welcome again " + username);
} else {
username = prompt("Please enter your name:", "");
if (username != "" && username != null) {
setCookie("username", username, 365);
}
}
}
<h2>javascript:void(0) 含义</h2>
javascript:void(0) 中最关键的是 void 关键字， void 是 JavaScript 中非常重要的关键字，该操作符指定要计算一个表达式但是不返回值。
实例
&lt;a href="javascript:void(0)">单击此处什么也不会发生&lt;/a>
href="#" 与 href="javascript:void(0)" 的区别
# 包含了一个位置信息，默认的锚是#top 也就是网页的上端。
而javascript:void(0), 仅仅表示一个死链接。
在页面很长的时候会使用 # 来定位页面的具体位置，格式为：
# + id。
如果你要定义一个死链接请使用 javascript:void(0) 。
实例
&lt;a href="javascript:void(0);">点我没有反应的!&lt;/a>
&lt;a href="#pos">点我定位到指定位置!&lt;/a>
&lt;br>
...
&lt;br>
&lt;p id="pos">尾部定位点&lt;/p>
===========================
<br>
<h2>href="#"</h2>
A hash - # within a hyperlink specifies an html element id to which the window should be scrolled.
Scroll to Top:
href="#" doesn't specify an id name, but does have a corresponding location - the top of the page.
Clicking an anchor with href="#" will move the scroll position to the top.
&lt;a href="#" onclick="fn()">click here&lt;/a>
you will jump to the top and the URL will have the anchor # as well, to avoid this we simply return false; or use javascript:void(0);
regarding your examples
&lt;a onclick="fn()">Does not appear as a link, because there's no href&lt;/a>
just do a {text-decoration:underline;} and you will have "link a-like"
&lt;a href="javascript:void(0)" onclick="fn()">fn is called&lt;/a>
&lt;a href="javascript:" onclick="fn()">fn is called too!&lt;/a>
it's ok, but in your function at the end, just return false; to prevent the default behavior, you don't need to do anything more.
Link to an email address:
&lt;a href="mailto:someone@example.com">Send email&lt;/a>
Link to a phone number:
&lt;a href="tel:+4733378901">+47 333 78 901&lt;/a>
Link to another section on the same page:
&lt;a href="#section2">Go to Section 2&lt;/a>
Link to a JavaScript:
&lt;a href="javascript:alert('Hello World!');">Execute JavaScript&lt;/a>
===========================
<br>
<h2>Jquery If This Contains</h2>
<br>
<a href="https://stackoverflow.com/questions/14510261/jquery-if-this-contains">Jquery If This Contains</a>
<a href="https://stackoverflow.com/questions/16466807/find-element-where-child-items-h2-text-has-a-specific-value">find element where child items h2 text has a specific value</a>
<a href="https://api.jquery.com/children/">selecting children sample</a>
<br>
<a href="https://stackoverflow.com/questions/306583/how-to-get-the-children-of-the-this-selector">get the children of the this selector</a>
var toc = $('#toc>ul');
toc.append($(".parent").find("p:contains('Statistics')").parent().text())
by javascript:
var myDomElement = document.getElementById( "foo" ); // A plain DOM element.
$( myDomElement ).find( "a" ); // Finds
===========================
Loops: while and for
let i = 0;
while (i < 3) { // shows 0, then 1, then 2
alert( i );
i++;
}
the shorter way to write while (i != 0) could be while (i):
let i = 3;
while (i) {
alert( i );
i--;
}
Brackets are not required for a single-line body
If the loop body has a single statement, we can omit the brackets {…}:
let i = 3;
while (i) alert(i--);
The “do…while” loop
The condition check can be moved below the loop body using the do..while syntax:
do {
// loop body
} while (condition);
The loop will first execute the body, then check the condition and, while it’s truthy, execute it again and again.
For example:
let i = 0;
do {
alert( i );
i++;
} while (i < 3);
This form of syntax is rarely used except when you want the body of the loop to execute at least once regardless of the condition being truthy.

Usually, the other form is preferred: while(…) {…}.
The “for” loop
The for loop is the most often used one.
It looks like this:
for (begin; condition; step) {
// ...

loop body ...
}
Let’s learn the meaning of these parts by example.

The loop below runs alert(i) for i from 0 up to (but not including) 3:
for (let i = 0; i < 3; i++) { // shows 0, then 1, then 2
alert(i);
}
Let’s examine the for statement part by part:
part		
begin	i = 0	Executes once upon entering the loop.
condition	i < 3	Checked before every loop iteration, if fails the loop stops.
step	i++	Executes after the body on each iteration, but before the condition check.
body	alert(i)	Runs again and again while the condition is truthy
The general loop algorithm works like this:
Run begin
→ (if condition → run body and run step)
→ (if condition → run body and run step)
→ (if condition → run body and run step)
→ ...
If you are new to loops, then maybe it would help if you go back to the example and reproduce how it runs step-by-step on a piece of paper.
Here’s what exactly happens in our case:
// for (let i = 0; i < 3; i++) alert(i)
// run begin
let i = 0
// if condition → run body and run step
if (i < 3) { alert(i); i++ }
// if condition → run body and run step
if (i < 3) { alert(i); i++ }
// if condition → run body and run step
if (i < 3) { alert(i); i++ }
// ...finish, because now i == 3
Inline variable declaration
Here the “counter” variable i is declared right in the loop.

That’s called an “inline” variable declaration.

Such variables are visible only inside the loop.
for (let i = 0; i < 3; i++) {
alert(i); // 0, 1, 2
}
alert(i); // error, no such variable
Instead of defining a variable, we can use an existing one:
let i = 0;
for (i = 0; i < 3; i++) { // use an existing variable
alert(i); // 0, 1, 2
}
alert(i); // 3, visible, because declared outside of the loop
Skipping parts
Any part of for can be skipped.
For example, we can omit begin if we don’t need to do anything at the loop start.
Like here:
let i = 0; // we have i already declared and assigned
for (; i < 3; i++) { // no need for "begin"
alert( i ); // 0, 1, 2
}
We can also remove the step part:
let i = 0;
for (; i < 3;) {
alert( i++ );
}
The loop became identical to while (i < 3).
We can actually remove everything, thus creating an infinite loop:
for (;;) {
// repeats without limits
}
Please note that the two for semicolons ; must be present, otherwise it would be a syntax error.
Breaking the loop
Normally the loop exits when the condition becomes falsy.
But we can force the exit at any moment.

There’s a special break directive for that.
For example, the loop below asks the user for a series of numbers, but “breaks” when no number is entered:
let sum = 0;
while (true) {
let value = +prompt("Enter a number", '');
if (!value) break; // (*)
sum += value;
}
alert( 'Sum: ' + sum );
The break directive is activated in the line (*) if the user enters an empty line or cancels the input.

It stops the loop immediately, passing the control to the first line after the loop.

Namely, alert.
The combination “infinite loop + break as needed” is great for situations when the condition must be checked not in the beginning/end of the loop, but in the middle, or even in several places of the body.
Continue to the next iteration
The continue directive is a “lighter version” of break.

It doesn’t stop the whole loop.

Instead it stops the current iteration and forces the loop to start a new one (if the condition allows).
We can use it if we’re done on the current iteration and would like to move on to the next.
The loop below uses continue to output only odd values:
for (let i = 0; i < 10; i++) {
// if true, skip the remaining part of the body
if (i % 2 == 0) continue;
alert(i); // 1, then 3, 5, 7, 9
}
For even values of i the continue directive stops body execution, passing the control to the next iteration of for (with the next number).

So the alert is only called for odd values.
The directive continue helps to decrease nesting level
A loop that shows odd values could look like this:
for (let i = 0; i < 10; i++) {
if (i % 2) {
alert( i );
}
}
From a technical point of view it’s identical to the example above.

Surely, we can just wrap the code in the if block instead of continue.
But as a side-effect we got one more figure brackets nesting level.

If the code inside if is longer than a few lines, that may decrease the overall readability.
No break/continue to the right side of ‘?’
Please note that syntax constructs that are not expressions cannot be used in '?'.

In particular, directives break/continue are disallowed there.
For example, if we take this code:
if (i > 5) {
alert(i);
} else {
continue;
}
…And rewrite it using a question mark:
(i > 5) ? alert(i) : continue; // continue not allowed here
…Then it stops working.

The code like this will give a syntax error:
That’s just another reason not to use a question mark operator '?' instead of if.
Labels for break/continue
Sometimes we need to break out from multiple nested loops at once.
For example, in the code below we loop over i and j prompting for coordinates (i, j) from (0,0) to (3,3):
for (let i = 0; i < 3; i++) {
for (let j = 0; j < 3; j++) {
let input = prompt(`Value at coords (${i},${j})`, '');
// what if I want to exit from here to Done (below)?
}
}
alert('Done!');
We need a way to stop the process if the user cancels the input.
The ordinary break after input would only break the inner loop.

That’s not sufficient.

Labels come to the rescue.
A label is an identifier with a colon before a loop:
labelName: for (...) {
...
}
The break &lt;labelName> statement in the loop breaks out to the label.
Like here:
outer: for (let i = 0; i < 3; i++) {
for (let j = 0; j < 3; j++) {
let input = prompt(`Value at coords (${i},${j})`, '');
// if an empty string or canceled, then break out of both loops
if (!input) break outer; // (*)
// do something with the value...
}
}
alert('Done!');
In the code above break outer looks upwards for the label named outer and breaks out of that loop.
So the control goes straight from (*) to alert('Done!').
We can also move the label onto a separate line:
outer:
for (let i = 0; i < 3; i++) { ...

}
The continue directive can also be used with a label.

In this case the execution jumps to the next iteration of the labeled loop.
Labels are not a “goto”
Labels do not allow us to jump into an arbitrary place of code.
For example, it is impossible to do this:
break label;  // jumps to label? No.
label: for (...)
The call to a break/continue is only possible from inside the loop, and the label must be somewhere upwards from the directive.
Summary
We covered 3 types of loops:
while – The condition is checked before each iteration.
do..while – The condition is checked after each iteration.
for (;;) – The condition is checked before each iteration, additional settings available.
To make an “infinite” loop, usually the while(true) construct is used.

Such a loop, just like any other, can be stopped with the break directive.
If we don’t want to do anything on the current iteration and would like to forward to the next one, the continue directive does it.
Break/continue support labels before the loop.

A label is the only way for break/continue to escape the nesting and go to the outer loop.
Tasks
Last loop value
importance: 3
What is the last value alerted by this code? Why?
let i = 3;
while (i) {
alert( i-- );
}
solution
Which values shows the while?
importance: 4
For every loop, write down which values it shows, in your opinion.

And then compare with the answer.
Both loops alert same values or not?
The prefix form ++i:
let i = 0;
while (++i < 5) alert( i );
The postfix form i++
let i = 0;
while (i++ < 5) alert( i );
solution
Which values get shown by the "for" loop?
importance: 4
For each loop write down which values it is going to show.

Then compare with the answer.
Both loops alert same values or not?
The postfix form:
for (let i = 0; i < 5; i++) alert( i );
The prefix form:
for (let i = 0; i < 5; ++i) alert( i );
solution
Output even numbers in the loop
importance: 5
Use the for loop to output even numbers from 2 to 10.
Run the demo
solution
Replace "for" with "while"
importance: 5
Rewrite the code changing the for loop to while without altering its behavior (the output should stay same).
for (let i = 0; i < 3; i++) {
alert( `number ${i}!` );
}
solution
Repeat until the input is correct
importance: 5
Write a loop which prompts for a number greater than 100.

If the visitor enters another number – ask him to input again.
The loop must ask for a number until either the visitor enters a number greater than 100 or cancels the input/enters an empty line.
Here we can assume that the visitor only inputs numbers.

There’s no need to implement a special handling for a non-numeric input in this task.
Run the demo
solution
Output prime numbers
importance: 3
An integer number greater than 1 is called a prime if it cannot be divided without a remainder by anything except 1 and itself.
In other words, n > 1 is a prime if it can’t be evenly divided by anything except 1 and n.
For example, 5 is a prime, because it cannot be divided without a remainder by 2, 3 and 4.
Write the code which outputs prime numbers in the interval from 2 to n.
For n = 10 the result will be 2,3,5,7.
P.S.

The code should work for any n, not be hard-tuned for any fixed value.
===========================
<br>
<h2>android javascript tts</h2>
var msg = new SpeechSynthesisUtterance('Hello World');<br>
window.speechSynthesis.speak(msg);<br>
===========================
<br>
<h2>Google Maps in HTML</h2>
<a href="https://www.w3schools.com/graphics/tryit.asp?filename=trymap_intro">Google Maps in HTML</a>
<br>
&lt;html>
&lt;body>
&lt;div id="googleMap" style="width:100%;height:400px;">&lt;/div>
&lt;script>
function myMap() {
var mapProp= { center:new google.maps.LatLng(51.508742,-0.120850), zoom:5,};
var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);}
&lt;/script>
&lt;script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu-916DdpKAjTmJNIgngS6HL_kDIKU0aU&callback=myMap">
&lt;/script>
&lt;!--
To use this code on your website, get a free API key from Google.
Read more at: https://www.w3schools.com/graphics/google_maps_basic.asp
-->
&lt;/body>
&lt;/html>
<h2>JavaScript examples</h2>
JavaScript can change HTML content.
&lt;button type="button" onclick='document.getElementById("demo").innerHTML = "Hello JavaScript!"'>Click Me!&lt;/button>
JavaScript can change HTML attributes.
&lt;button onclick="document.getElementById('myImage').src='pic_bulbon.gif'">Turn on the light&lt;/button>
&lt;img id="myImage" src="pic_bulboff.gif" style="width:100px">
&lt;button onclick="document.getElementById('myImage').src='pic_bulboff.gif'">Turn off the light&lt;/button>
JavaScript can change the style of an HTML element.
&lt;button type="button" onclick="document.getElementById('demo').style.fontSize='35px'">Click Me!&lt;/button>
JavaScript can hide HTML elements.
&lt;button type="button" onclick="document.getElementById('demo').style.display='none'">Click Me!&lt;/button>
JavaScript can show hidden HTML elements.
&lt;button type="button" onclick="document.getElementById('demo').style.display='block'">Click Me!&lt;/button>
Writing into an window alert box
window.alert(5 + 6);
Writing into the HTML output
document.write(5 + 6);
Writing into an HTML element
document.getElementById("demo").innerHTML = 5 + 6;
Writing into the browser console
console.log(5 + 6);
JavaScript in &lt;head>
&lt;script>
document.getElementById("demo").innerHTML = "Paragraph changed.";
&lt;/script>
JavaScript in &lt;body>
&lt;script>
document.getElementById("demo").innerHTML = "Paragraph changed.";
&lt;/script>
JavaScript in an external file
&lt;script src="myScript.js">&lt;/script>
External JavaScript Advantages:
separates HTML and code, 
makes HTML and JavaScript easier to read and maintain,
Cached JavaScript files can speed up page loads.
JavaScript Statements
A JavaScript program is a list of statements to be executed by a computer.
var x, y, z;  // Declare 3 variables
x = 5;        // Assign the value 5 to x
y = 6;        // Assign the value 6 to y
z = x + y;    // Assign the sum of x and y to z
document.getElementById("demo").innerHTML = "The value of z is " + z + ".";
JavaScript Numbers
document.getElementById("demo").innerHTML = 10.50;
JavaScript strings
Strings can be written with double or single quotes.
document.getElementById("demo").innerHTML = 'John Doe';
JavaScript expressions
Expressions compute to values.
document.getElementById("demo").innerHTML = 5 * 10;
JavaScript keywords
The var Keyword Creates Variables
var x, y;
JavaScript variables
var x;
x = 6;
JavaScript assignment
the = operator is used to assign values to variables.
x = 5;
JavaScript operators
use arithmetic operators to compute values (just like algebra).
document.getElementById("demo").innerHTML = (5 + 6) * 10;
JavaScript comments
JavaScript Comments are NOT Executed
// x = 6; I will not be executed
JavaScript is case sensitive
lastName = "Doe";
lastname = "Peterson";
JavaScript statements are commands to the browser
In HTML, JavaScript statements are executed by the browser.
JavaScript code is a sequence of statements
A JavaScript program is a list of statements to be executed by a computer.
JavaScript statements are separated with semicolon
JavaScript statements are separated by semicolons.
Multiple statements on one line is allowed.
a = 1; b = 2; c = a + b;
JavaScript statements can be grouped together in code blocks
JavaScript code blocks are written between { and }
function myFunction() {
document.getElementById("demo1").innerHTML = "Hello Dolly!";
document.getElementById("demo2").innerHTML = "How are you?";
}
You can break a code line after an operator or a comma.
The best place to break a code line is after an operator or a comma.
document.getElementById("demo").innerHTML =
"Hello Dolly!";
Single line comments
// Change heading:
Single line comments at the end of a line
var x = 5;      // Declare x, give it the value of 5
Multiple lines comments
/*
The code below will change the heading with id = "myH"
and the paragraph with id = "myp" in my web page:
*/
Single line comment to prevent execution
//document.getElementById("myH").innerHTML = "My First Page";
Multiple lines comment to prevent execution
/*
document.getElementById("myH").innerHTML = "Welcome to my Homepage";
document.getElementById("myP").innerHTML = "This is my first paragraph.";
*/
JavaScript variables as algebra
var total = price1 + price2;
JavaScript numbers and strings
Strings are written with quotes.
Numbers are written without quotes.
Declaring many variables in one statement
You can declare many variables in one statement.
var person = "John Doe", carName = "Volvo", price = 200;
Declaring many variables multiline
var person = "John Doe",
carName = "Volvo",
price = 200;
A variable without a value returns the value undefined
var carName;
Re-declaring a variable will not destroy the value
var carName = "Volvo";
var carName;
Adding JavaScript numbers
var x = 5 + 2 + 3;
Adding JavaScript strings
var x = "John" + " " + "Doe";
Adding strings and numbers gives string
x = "5" + 2 + 3;
The modulus (%) operator
var z = x % y;
The increment (++) operator
increment
The decrement (--) operator
decrement
The = assignment operator
var x = 10;
The += assignment operator
var x = 10;
x += 5; // = 15
The -= assignment operator
var x = 10;
x -= 5; // = 5
The *= assignment operator
var x = 10;
x *= 5; // = 50
The /= assignment operator
var x = 10;
x /= 5; // = 2
The %= assignment operator
var x = 10;
x %= 5; // = 0
Adding two strings together using the concatenating (+) operator
var txt1 = "What a very";
var txt2 = "nice day";
document.getElementById("demo").innerHTML = txt1 + txt2;
Adding two strings together using using the += operator
txt1 = "What a very ";
txt1 += "nice day";
document.getElementById("demo").innerHTML = txt1;
Adding strings and numbers
var x = 5 + 5;
var y = "5" + 5;
var z = "Hello" + 5;
document.getElementById("demo").innerHTML =
x + "&lt;br>" + y + "&lt;br>" + z;
Declare (create) strings
var answer1 = "It's alright";
var answer2 = "He is called 'Johnny'";
var answer3 = 'He is called "Johnny"';
document.getElementById("demo").innerHTML =
answer1 + "&lt;br>" + 
answer2 + "&lt;br>" + 
answer3;
Declare (create) numbers
var x1 = 34.00;
var x2 = 34;
var x3 = 3.14;
document.getElementById("demo").innerHTML =
x1 + "&lt;br>" + x2 + "&lt;br>" + x3;
Declare (create) an array
var cars = ["Saab","Volvo","BMW"];
document.getElementById("demo").innerHTML = cars[0];
Declare (create) an object
var person = {
firstName : "John",
lastName  : "Doe",
age       : 50,
eyeColor  : "blue"
};
document.getElementById("demo").innerHTML =
person.firstName + " is " + person.age + " years old.";
Find the type of a variable
document.getElementById("demo").innerHTML = 
typeof "" + "&lt;br>" +
typeof "John" + "&lt;br>" + 
typeof "John Doe" + "&lt;br>" +
typeof 0 + "&lt;br>" +
typeof 314 + "&lt;br>" +
typeof 3.14 + "&lt;br>" +
typeof (3.14);
Adding two numbers and a string
var x = 16 + 4 + "Volvo";
document.getElementById("demo").innerHTML = x;
Adding a string and two numbers
var x = "Volvo" + 16 + 4;
document.getElementById("demo").innerHTML = x;
An undefined variable
The value (and the data type) of a variable with no value is undefined.
var car;
document.getElementById("demo").innerHTML =
car + "&lt;br>" + typeof car;
An empty variable
var car = "";
document.getElementById("demo").innerHTML =
"The value is: " +
car + "&lt;br>" +
"The type is: " + typeof car;
Create a JavaScript variable
var car = "Fiat";
document.getElementById("demo").innerHTML = car;
Create a JavaScript object
var car = {type:"Fiat", model:"500", color:"white"};
document.getElementById("demo").innerHTML = car.type;
Create a person object (single line)
var person = {firstName:"John", lastName:"Doe", age:50, eyeColor:"blue"};
document.getElementById("demo").innerHTML =  person.firstName + " is " + person.age + " years old.";
Create a person object (multiple lines)
var person = {
firstName : "John",
lastName  : "Doe",
age       : 50,
eyeColor  : "blue"
};
document.getElementById("demo").innerHTML = person.firstName + " is " + person.age + " years old.";
Access object properties using .property
var person = { firstName: "John", lastName : "Doe", id:  5566};
document.getElementById("demo").innerHTML = person.firstName + " " + person.lastName;
Access object properties using [property]
var person = {
firstName: "John",
lastName : "Doe",
id       :  5566
};
document.getElementById("demo").innerHTML = person["firstName"] + " " + person["lastName"];
Access a function property as a method
var person = {
firstName: "John",
lastName : "Doe",
id       : 5566,
fullName : function() {
return this.firstName + " " + this.lastName;
}
};
document.getElementById("demo").innerHTML = person.fullName();
Access a function property as a property
var person = { firstName: "John", lastName : "Doe", id : 5566, fullName : function() { return this.firstName + " " + this.lastName; }};
document.getElementById("demo").innerHTML = person.fullName;
A simple function
function myFunction() { document.getElementById("demo").innerHTML = "Hello World!";}
A function with an argument
function myFunction(name,job) { document.getElementById("demo").innerHTML = "Welcome " + name + ", the " + job + ".";}
A function with an argument 2
function myfunction(txt) { document.getElementById("demo").innerHTML = txt} 
A function that returns a value
var x = myFunction(4, 3);
document.getElementById("demo").innerHTML = x;
function myFunction(a, b) {    return a * b;}
A function that converts Fahrenheit to Celsius
function toCelsius(f) { return (5/9) * (f-32);}
document.getElementById("demo").innerHTML = toCelsius(77);
A function call without ()
function toCelsius(f) {    return (5/9) * (f-32);}
document.getElementById("demo").innerHTML = toCelsius;
An onclick event changes an HTML element
&lt;button onclick="document.getElementById('demo').innerHTML=Date()">The time is?&lt;/button>
An onclick event changes its own element
&lt;button onclick="this.innerHTML=Date()">The time is?&lt;/button>
An onclick event calls a function
&lt;button onclick="displayDate()">The time is?&lt;/button>
function displayDate() {
document.getElementById("demo").innerHTML = Date();
}
Backslash before quotes accepts quotes as quotes.
&lt;script>
var x = 'It\'s alright';
var y = "We are the so-called \"Vikings\" from the north.";
document.getElementById("demo").innerHTML = x + "&lt;br>" + y; 
&lt;/script>
Find the length of a string
var txt = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
document.getElementById("demo").innerHTML = txt.length;
You can break text string with a backslash.
document.getElementById("demo").innerHTML = "Hello \
Dolly!";
You cannot break code with a backslash.
document.getElementById("demo").innerHTML = \
"Hello Dolly.";
Find the position of the first occurrence of a text in a string - indexOf()
var str = "Please locate where 'locate' occurs!";
var pos = str.indexOf("locate");
document.getElementById("demo").innerHTML = pos;
Search for a text in a string and return the text if found - match()
var str = "The rain in SPAIN stays mainly in the plain"; 
var res = str.match(/ain/g);
document.getElementById("demo").innerHTML = res;
Replace characters in a string - replace()
var str = document.getElementById("demo").innerHTML; 
var txt = str.replace("Microsoft","W3Schools");
document.getElementById("demo").innerHTML = txt;
Convert string to upper case - toUpperCase()
var text = document.getElementById("demo").innerHTML;
document.getElementById("demo").innerHTML = text.toUpperCase();
Convert string to lower case - toLowerCase()
var text = document.getElementById("demo").innerHTML;
document.getElementById("demo").innerHTML = text.toLowerCase();
Split a string into an array - split()
var str = "a,b,c,d,e,f";
var arr = str.split(",");
document.getElementById("demo").innerHTML = arr[0];
Number are considered accurate only up to 15 digits
var x = 999999999999999;
var y = 9999999999999999;
document.getElementById("demo").innerHTML = x + "&lt;br>" + y;
Floating point arithmetic is not always 100% accurate
var x = 0.2 + 0.1;
document.getElementById("demo").innerHTML = "0.2 + 0.1 = " + x;
it helps to multiply and divide by 10
var x = (0.2*10 + 0.1*10) / 10;
document.getElementById("demo").innerHTML = "0.2 + 0.1 = " + x;
}
Constants, preceded by 0x, are interpreted as hexadecimal
document.getElementById("demo").innerHTML = "0xFF = " + 0xFF;
The toString() method can output numbers as hex, octal, and binary
var myNumber = 128;
document.getElementById("demo").innerHTML = "128 = " + 
myNumber + " Decimal, " +
myNumber.toString(16) + " Hexadecimal, " +
myNumber.toString(8) + " Octal, " +
myNumber.toString(2) + " Binary."
JavaScript will generate Infinity if you calculate a too large number
var myNumber = 2; 
var txt = "";
while (myNumber != Infinity) {
myNumber = myNumber * myNumber;
txt = txt + myNumber + "&lt;br>";
}
document.getElementById("demo").innerHTML = txt;
Division by zero generates Infinity
var x = 2/0;
var y = -2/0;
document.getElementById("demo").innerHTML = x + "&lt;br>" + y;
A number divided by a string is not a number
var x = 1000 / "Apple";
var y = 1000 / "10";
document.getElementById("demo").innerHTML = x + "&lt;br>" + y;
Math.PI returns the value of PI
document.getElementById("demo").innerHTML = Math.PI;
Math.round(x) returns the rounded value of x
document.getElementById("demo").innerHTML = Math.round(4.4);
Math.pow(x,y) returns the value of x to the power of y
document.getElementById("demo").innerHTML = Math.pow(8,2);
Math.sqrt(x) returns the square root of x
document.getElementById("demo").innerHTML = Math.sqrt(64);
Math.abs(x) returns the absolute (positive) value of x
document.getElementById("demo").innerHTML = Math.abs(-4.4);
Math.ceil(x) returns the value of x rounded up
document.getElementById("demo").innerHTML = Math.ceil(4.4);
Math.floor(x) returns the value of x rounded down
document.getElementById("demo").innerHTML = Math.floor(4.7);
Math.sin(x) returns the sin of the angel x (given in radians)
document.getElementById("demo").innerHTML = 
"The sine value of 90 degrees is " + Math.sin(90 * Math.PI / 180);
Math.cos(x) returns the cosin of the angel x (given in radians)
document.getElementById("demo").innerHTML = 
"The cosine value of 0 degrees is " + Math.cos(0 * Math.PI / 180);
Math.max() return the number with the highest value from a list of arguments
document.getElementById("demo").innerHTML =
Math.max(0, 150, 30, 20, -8, -200);
Math.min() to return the number with the lowest value from a list of arguments
document.getElementById("demo").innerHTML =
Math.min(0, 150, 30, 20, -8, -200);
=====================
<h2>Find the min/max element of an Array</h2>
Note: These Math functions will not work as-is with arrays of numbers.
However, there are some ways around this.
var numbers = [1, 2, 3, 4];
Math.max.apply(null, numbers) // 4
Math.min.apply(null, numbers) // 1
A simpler, ES2015 way of accomplishing this is with the new spread operator.
var numbers = [1, 2, 3, 4];
Math.max(...numbers) // 4
Math.min(...numbers) // 1
=====================
fill array with consecutive numbers
const trainY = [];
for(x=0; x&lt;(trainX.length-1); x++){trainY[x] = x+1;}
=====================
Converting Celsius to Fahrenheit
var x;
if (degree == "C") {
x = document.getElementById("c").value * 9 / 5 + 32;
document.getElementById("f").value = Math.round(x);
} else {
x = (document.getElementById("f").value -32) * 5 / 9;
document.getElementById("c").value = Math.round(x);
}
Math.random() returns a random number between 0 (included) and 1 (excluded)
document.getElementById("demo").innerHTML = Math.random();
How to return a random integer between 0 and 9 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 10);
How to return a random integer between 0 and 10 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 11);
How to return a random integer between 0 and 99 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 100);
How to return a random integer between 0 and 100 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 101);
How to return a random integer between 1 and 10 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 10) + 1;
How to return a random integer between 1 and 100 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 100) + 1;
How to return a random integer between x (included) and y (excluded)
return Math.floor(Math.random() * (max - min)) + min;
How to return a random integer between x and y (both included)
return Math.floor(Math.random() * (max - min + 1) ) + min;
Use Date() to display today's date and time
var d = new Date();
document.getElementById("demo").innerHTML = d;
Use getFullYear() display the year
var d = new Date();
document.getElementById("demo").innerHTML = d.getFullYear();
Use getTime() to calculate the number of milliseconds since 1970
var d = new Date();
document.getElementById("demo").innerHTML = d.getTime();
Use setFullYear() to set a specific date
var d = new Date();
d.setFullYear(2020);
document.getElementById("demo").innerHTML = d;
Use toUTCString() to convert today's date (according to UTC) to a string
var d = new Date();
document.getElementById("demo").innerHTML = d.toUTCString();
Use getDay() to display the weekday as a number
var d = new Date();
document.getElementById("demo").innerHTML = d.getDay();
Use getDay() and an array to display the weekday as a name
var d = new Date();
var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
document.getElementById("demo").innerHTML = days[d.getDay()];
Display a clock
var today = new Date();
var h = today.getHours();
var m = today.getMinutes();
var s = today.getSeconds();
m = checkTime(m);
s = checkTime(s);
document.getElementById('txt').innerHTML =
h + ":" + m + ":" + s;
var t = setTimeout(startTime, 500);
}
function checkTime(i) {
if (i &lt; 10) {i = "0" + i};  // add zero in front of numbers &lt; 10
return i;
}
Create an array
var cars = ["Saab", "Volvo", "BMW"];
document.getElementById("demo").innerHTML = cars;
Join two arrays - concat()
var myGirls = ["Cecilie", "Lone"];
var myBoys = ["Emil", "Tobias", "Linus"];
var myChildren = myGirls.concat(myBoys);
document.getElementById("demo").innerHTML = myChildren;
Join three arrays - concat()
var arr1 = ["Cecilie", "Lone"];
var arr2 = ["Emil", "Tobias", "Linus"];
var arr3 = ["Robin", "Morgan"];
var myChildren = arr1.concat(arr2, arr3); 
document.getElementById("demo").innerHTML = myChildren;
Join all elements of an array into a string - join()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits.join(" * ");
Remove the last element of an array - pop()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo1").innerHTML = fruits;
fruits.pop();
document.getElementById("demo2").innerHTML = fruits;
Add new elements to the end of an array - push()
var fruits = ["Banana", "Orange", "Apple", "Mango"]; document.getElementById("demo").innerHTML = fruits;
function myFunction() {
fruits.push("Kiwi"); document.getElementById("demo").innerHTML = fruits;}
Reverse the order of the elements in an array - reverse()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;
function myFunction() {
fruits.sort(); fruits.reverse(); document.getElementById("demo").innerHTML = fruits; }
Remove the first element of an array - shift()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo1").innerHTML = fruits;
fruits.shift();
document.getElementById("demo2").innerHTML = fruits;
Select elements from an array - slice()
array.slice(start, end)
The slice() method selects the elements starting at the given start argument, 
and ends at, but does not include, the given end argument.
var fruits = ["Banana", "Orange", "Lemon", "Apple", "Mango"];
var citrus = fruits.slice(1,3);  // Orange, Lemon
var myBest = fruits.slice(-3, -1);  // Lemon, Apple, Mango
document.getElementById("demo").innerHTML = myBest;
Sort an array (alphabetically and ascending) - sort()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;
function myFunction() {
fruits.sort(); document.getElementById("demo").innerHTML = fruits;}
Sort numbers (numerically and ascending) - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;    
function myFunction() { points.sort(function(a, b){return a - b}); document.getElementById("demo").innerHTML = points;}
Sort numbers (numerically and descending) - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;
function myFunction() {
points.sort(function(a, b){return b - a});
document.getElementById("demo").innerHTML = points;
}
Sort numbers (alphabetically and numerically) - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;    
function myFunction1() {
points.sort();
document.getElementById("demo").innerHTML = points;
}
function myFunction2() {
points.sort(function(a, b){return a - b});
document.getElementById("demo").innerHTML = points;
}
Sort numbers in random order - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;    
function myFunction() {
points.sort(function(a, b){return 0.5 - Math.random()});
document.getElementById("demo").innerHTML = points;
}
Sort objects by numeric properties - sort()
var cars = [{type:"Volvo", year:2016}, {type:"Saab", year:2001}, {type:"BMW", year:2010}]
displayCars();
function myFunction() { cars.sort(function(a, b){return a.year - b.year}); displayCars();}
function displayCars() { document.getElementById("demo").innerHTML =
cars[0].type + " " + cars[0].year + "&lt;br>" +
cars[1].type + " " + cars[1].year + "&lt;br>" +
cars[2].type + " " + cars[2].year;}
Sort objects by string properties - sort()
var cars = [
{type:"Volvo", year:2016},
{type:"Saab", year:2001},
{type:"BMW", year:2010}]
displayCars();
function myFunction() {
cars.sort(function(a, b){
var x = a.type.toLowerCase();
var y = b.type.toLowerCase();
if (x &lt; y) {return -1;}
if (x > y) {return 1;}
return 0;
}); displayCars();}
function displayCars() {
document.getElementById("demo").innerHTML =
cars[0].type + " " + cars[0].year + "&lt;br>" +
cars[1].type + " " + cars[1].year + "&lt;br>" +
cars[2].type + " " + cars[2].year;
}
Add an element to position 2 in an array - splice()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;
function myFunction() {
fruits.splice(2, 0, "Lemon", "Kiwi");
document.getElementById("demo").innerHTML = fruits;}
Convert an array to a string - toString()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits.toString();
Add new elements to the beginning of an array - unshift()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;
function myFunction() {
fruits.unshift("Lemon");
document.getElementById("demo").innerHTML = fruits;
}
Note: fruits.unshift("Lemon");
but not: fruits = fruits.unshift("Lemon");
===========================
<h2>Creating Keyboard Shortcuts in JavaScript</h2>
Using Plain JavaScript
&lt;h3>Press M key on keyboard(Single key)&lt;/h3>
&lt;h3>Press Ctrl + B shortcut key (Double key combination)&lt;/h3>
&lt;h3>Press Ctrl + Alt + Y shortcut key (Multiple key combination)&lt;/h3>
&lt;h3>Press Ctrl + Alt + Shift + U shortcut key (Multiple key combination)&lt;/h3>
Add script tag before the closing tag of body tag and put in the below script.
document.onkeyup = function(e) {
if (e.which == 77) { alert("M key was pressed");
} else if (e.ctrlKey && e.which == 66) { alert("Ctrl + B was pressed");
} else if (e.ctrlKey && e.altKey && e.which == 89) { alert("Ctrl + Alt + Y was pressed");
} else if (e.ctrlKey && e.altKey && e.shiftKey && e.which == 85) { alert("Ctrl + Alt + Shift + U was pressed");
}
};
for cross browser compatibility you can use something like this.
var key = e.which || e.keyCode;
Here 77, 66, 89, 85 are the key code representations
ctrlKey, shiftKey and altKey are the read-only properties which hold boolean information about these keys.
This was using plain JavaScript.

Now let’s try this using jQuery.
Using jQuery
For this example, let’s create a simple Login page, which displays a message whenever Caps Lock is ON.
&lt;h3 class="container">Displays message whenever CAPS LOCK is ON&lt;/h3>  
&lt;div class="container-fluid content">
&lt;form class="form-horizontal">
&lt;div class="form-group">
&lt;input type="text" class="form-control" placeholder="Username">
&lt;/div>
&lt;div class="form-group">
&lt;input type="password" class="form-control" placeholder="Password">
&lt;/div>
&lt;div id="message" class="form-group">
&lt;p>Caps lock is ON&lt;/p>
&lt;/div>
&lt;div class="form-group">
&lt;button type="submit" class="btn btn-primary">Sign in&lt;/button>
&lt;/div>
&lt;/form>
&lt;/div>
Now coming to the JS part of the code, initially we want the ‘message’ to be hidden.

So include this,
$('#message').hide();
Now to find out whether the Caps Lock is On or not, simply use a keypress event, so whenever the user presses a key, the keycode information is extracted and checked whether it is in lower case or upper case.

Based on this the message is made visible.

The code should look something like this.
$(document).ready(function() {
$('#message').hide();
})
$('.form-control').keypress(function(e) {
var c = String.fromCharCode(e.which);
if (c.toUpperCase() === c && c.toLowerCase() !== c && !e.shiftKey) {
$('#message').show();
} else {
$('#message').hide();
}
});
In the above code shift, key property is also checked, to see whether shift key was pressed along with another key.
The only issue with the above code is, it displays the message whenever a character is pressed and not when the caps lock key is pressed.
The KeyCode Finder
In the first example, we used key codes like 77, 66, 89, and 85.

This example helps you to find out these keycodes.
I have a created a pen for this example, just press the desired key and it will display the key code associated with that key.
Using Mousetrap.js
Imagine a situation where there are a lot of shortcut keys to be implemented in a page, using above methods is not feasible.

For example in a cloud-based IDE, there are a lot of shortcut keys used.

So this can be simplified using the JS library Mousetrap.js.

The CDN link is here.
I have created a simple pen for this example.
Here, in this example Mousetrap.bind function is used.

This function binds a key combination with a callback function.

There are some other functionalities also with this library.

Read about all of them here.
Conclusion
All these above examples explained how to use keyboard shortcuts in JS.

The Mousetrap library simplifies this whole process by just using bind method.

There are many other libraries like KeyboardJS, Keypress or Keymaster which all do almost the same thing.
JavaScriptWeb DevelopmentKeyobard ShortcutsMousetrapjs
===========================
<br>
<h2>search text inside page</h2>
<br>
&lt;input type="text" id="searchText" value="美容">
&lt;button onclick="searchIt()">查找&lt;/button>
&lt;p id="searchResult">&lt;/p>
function searchIt() {searchResultList = "查找結果：
";var featureStr = document.getElementById("searchText").value;$("div").each(function(i) {	drugName = $(this).children("b").text();	drugFunc = $(this).text();			if (drugFunc.includes(featureStr)) {		searchResultList = searchResultList + drugName + ", ";	}});document.getElementById("searchResult").innerHTML = searchResultList;
}
===========================
<br>
<h2>search link ID inside page</h2>
<br>
$(document).ready(function(){
$('div b').click(function(){
parent.history.back();
return false;
});
});
document.querySelector('#searchText').focus();
$('#searchText').keyup(function (e) {if (e.keyCode === 13) {searchIt();}});
function searchIt() {searchResultList = "查找結果：
";var featureStr = document.getElementById("searchText").value;$("div").each(function(i) {	drugName = $(this).children("b").text();	drugNameID = $(this).children("b").attr('id');	drugFunc = $(this).text();	drugDetail = drugName + drugFunc;			if (drugDetail.includes(featureStr)) {		theLink = '&lt;a href="#' + drugNameID + '" target="_self">' + drugName + '&lt;/a>, ';		searchResultList = searchResultList + theLink;	}});document.getElementById("searchResult").innerHTML = searchResultList;
}
<br>
===========================
<br>
<br>
<h2>轉繁體 轉簡體</h2>
<br>
&lt;script type="text/javascript" src="https://www.ifreesite.com/1-plus/gbkbig5.js">&lt;/script>
&lt;form name="biggbks">
&lt;input onClick="s2t()" type="button" value="轉繁體">
&lt;input onClick="t2s()" type="button" value="轉簡體">
&lt;textarea name="text" id="text" rows="1" cols="40" onKeyUp="changeText(this);">&lt;/textarea>&lt;div class="tops">	&lt;input type="button" value="復原" onClick="undo()" />
		&lt;input onClick="blank()" type="button" value="清除" />&lt;/div>
&lt;/form>
===========================
<br>
<br>
<h2>To refresh page using javascript instead of meta tag:</h2>
<br>
refreshTime = 2000;  // reload page after 2 seconds
setTimeout(function() { location.reload(); },refreshTime);
===========================
<br>
<br>
<h2>JaveScript to iterate over localStorage browser object</h2>
for (var i = 0; i < localStorage.length; i++){
key=localStorage.key(i); 
console.log(key+': '+localStorage.getItem(key));
}
<h3>Advanced script</h3>
As mentioned <a href="http://stackoverflow.com/a/28118108/1230477">here</a> a HTML5 featured browser should also implement <k>Array.prototype.map</k>.

So script would be:
Array.apply(0, new Array(localStorage.length)).map(function (o, i){
return localStorage.key(i)+':'+localStorage.getItem(localStorage.key(i)); 
})
===========================
<br>
<br>
<h2>html5 localStorage</h2>
<k>localStorage</k> only supports strings.
Use <k>JSON.stringify()</k> and <k>JSON.parse()</k>.
var names = [];
names[0] = prompt("New member name?").setItem("names", JSON.stringify(names));
//...
var storedNames = JSON.parse(localStorage.getItem("names"));
=========
localStorage.setItem("objName", "PeterPan")
localStorage.getItem("objName")
localStorage.length
localStorage.key(0);
localStorage.removeItem("objName")
localStorage.heedCode="test code"
localStorage.removeItem("heedCode")
localStorage.setItem("heedCode", "00PeterPan")
heedCodeList = ["372","1800"]
localStorage.savedCodeList = JSON.stringify(heedCodeList);
oldheedCodeList = JSON.parse(localStorage.savedCodeList)
oldheedCodeList[0]
oldheedCodeList[1]
if (localStorage.getItem("savedCodeList") === null) {
heedCodeList = [];
localStorage.savedCodeList = JSON.stringify(heedCodeList);
} else{
heedCodeList = JSON.parse(localStorage.savedCodeList);
}
=========
var jsonData = JSON.parse(document.getElementById('data').textContent)
=========
$.getJSON("https://api.github.com/users/jeresig");
=========
<b>localStorage namespace</b>
one localStorage for each subdomain.
Local Storage is prone to name clashes and accidental data overrides
A simple solution is to prefix all your app specific keys with your unique project name
several applications run on the same protocol/server/port, but with a different url, they will have access to the same localstorage.
if keys are using names that any other developer might use like "user", "data", "cache", you might end up reading localstorage from another application altogether.

If that app is running on the same server.
Total amount of data that can be stored is limited per domain
===========================
<br>
<h2>localStorage.savedCodeList</h2>
if (localStorage.getItem("savedCodeList") === null) {
heedCodeList = [];
localStorage.savedCodeList = JSON.stringify(heedCodeList);
} else{
heedCodeList = JSON.parse(localStorage.savedCodeList);
}
localStorage.savedCodeList = JSON.stringify(heedCodeList);
heedChart
<button class="goldb" onclick=addToHeedCodeList()>&hearts;</button>
heedChart.html
if (!heedCodeList.includes(stkChartList[remainChtNo])) {
heedCodeList.push(stkChartList[remainChtNo]);
heedCodeList = Array.from(new Set(heedCodeList))
localStorage.savedCodeList = JSON.stringify(heedCodeList);
}
<h2>execCommand</h2>
copyText = JSON.stringify(stkChartList);
copyText.select();
document.execCommand("copy");
The execCommand() method executes the specified command for the selected part of an editable section.
<h2>window width</h2>
var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
740
814
var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
572
177309
document.documentElement.clientWidth
document.documentElement.clientHeight
$(window).width() and $(window).height()
<h2>setFontSize</h2>
function setFontSize(size)
{
$.cookie('fontsize', size, { path: '/' });
window.location.reload();
}
<h2>swiperight</h2>
$("body").on("swiperight",function(){
jpButClick();
});
$("body").on("swipeleft",function(){
jpback();
});
<h2>Regex To match all occurences using /g</h2>
1.
var str = "The rain in SPAIN stays mainly in the plain"; 
var res = str.match(/ain/g);
2.
var msg = "For example, /green|red/ matches 'green' in 'green apple' and 'red' in 'red apple.' The order of 'x' and 'y' matters.

For example a*|b matches the empty string in 'b', but b|a* matches 'b' in the same string."
var result = msg.match(/green|red/g)
3.
re = /green|red/g
var all_matches = msg.match(re);
console.log(all_matches)
4.
To list out the object structure using JSON.stringify
str = JSON.stringify(result);
str = JSON.stringify(result, null, 4); // (Optional) beautiful indented output.
console.log(str);
5.
Some more tips:
Object.keys(result);
Object.getOwnPropertyNames(result);
result.length;
===================================
var patt = /w3schools/i
Example explained:
/w3schools/i  is a regular expression.
w3schools  is a pattern (to be used in a search).
i  is a modifier (modifies the search to be case-insensitive).
Modifiers
Modifiers are used to perform case-insensitive and global searches:
Modifier	Description
g	global match (find all matches, no stopping after first match)
i	Perform case-insensitive matching
m	Perform multiline matching
Brackets
Brackets are used to find a range of characters:
Expression	Description
[abc]	Find any character between the brackets
[^abc]	Find any character NOT between the brackets
[0-9]	Find any character between the brackets (any digit)
[^0-9]	Find any character NOT between the brackets (any non-digit)
(x|y)	Find any of the alternatives specified
===========================
<h2>swipeleft swiperight</h2>
&lt;script src="https://code.jquery.com/jquery-1.11.3.min.js">&lt;/script>
&lt;script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js">&lt;/script>
$("body").on("swiperight",function(){foreward();
});
$("body").on("swipeleft",function(){backward();
});
$("body").on("swiperight",function(){jpButClick();
});
$("body").on("swipeleft",function(){jpback();
});
===========================
<br>
<h2>copy text to clipboard</h2>
var copyTextarea = document.querySelector('.copytextarea1');
copyTextarea.focus();
copyTextarea.select();
// to get element's textContent
itemTxt = document.querySelector('.js-tip').textContent
===========================
<h2>nice font</h2>
&lt;link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
===========================
<br>
<h2>Javascript tutorial Notes from LearnWebCode</h2>
<a href="https://www.youtube.com/watch?v=zPHerhks2Vg">Javascript tutorial Notes from LearnWebCode</a>
<br>
browser developer mode
window object is the root object
document object is under window object, all about the html
document.title is the title object
use getElementById("") to select object
use var to represent the object to avoid long typings
use .innerHTML() to read and set object content
use getElementsByClassName("") to select multiple elements
use getElementById("").getElementByTagName("") to select a group under a object
access element under a group object: object[0], object is an array
for loop: for (){}
listItems.length is length of the object
addEventListener("click", aFunction)
set function using keyword: function aFunction(){}
use keyword: this to select the selected item, eg.

this.innerHTML;
to append element to an group object, use ourList.innerHTML += "something new";
to increment a counter, use theCounter++;
this.classList.add("active")
The Element.classList is a collection of the class attributes, classes and be added, remove or toggle
Event delegate 是 event binding 的一種技巧
Event delegation allows us to attach a single event listener, to a parent element, that will fire for all descendants matching a selector, whether those descendants exist now or are added in the future.
ourList.addEventListener("click", aFunction)
aFunction(e){
if(e.target.nodeName == )
}
e.target is complicated
mordern selector use querySelector("#id") instead of getelementById...
querySelectorAll("#id li")
===========================
<br>
<h2>HTMLAudioElement interface</h2>
<a href="D:\Dropbox\Public\LibDocs\Web Audio APIImp.html" class="whitebut ">Web Audio APIImp</a>
<a href="D:\Dropbox\Public\LibDocs\Audio Visualizer.html" class="whitebut ">Audio Visualizer</a>
<a href="D:\Dropbox\Public\LibDocs\audio-visualizer.html" class="whitebut ">audio-visualizer</a>
var audio = new Audio('audio_file.mp3');
audio.play();
var snd = new Audio("http://www.externalharddrive.com/waves/computer/hello.wav");
snd.play();
===========================
<br>
<h2>Load TensorFlow.js</h2>
&lt;script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.0"> &lt;/script>
===========================
<br>
<h2>const</h2>
const
The value of a constant cannot change through re-assignment, and it can't be redeclared.
The const declaration creates a read-only reference to a value whose scope can be either global
<br>
===========================
<br>
<h2>parsing python code to javascript</h2>
skulpt is doing exactly the same thing as brython and pyjs - parsing python code to javascript
not running it natively in the browser
===========================
<br>
<h2>JavaScript inheritance</h2>
JavaScript inheritance is simpler
var some2dPoint = {x:3,y:5};
var now3d = Object.create(some2dPoint);
now3d.z=10
===========================
<br>
<h2>selection script</h2>
&lt;select id="myChoice" onchange="showChoice()">&lt;option>Apple&lt;/option>&lt;option>Orange&lt;/option>&lt;option>Pineapple&lt;/option>&lt;option>Banana&lt;/option>
&lt;/select>
&lt;p id="demo">&lt;/p>
&lt;script>
function showChoice() {var x = document.getElementById("myChoice");var i = x.selectedIndex;document.getElementById("demo").innerHTML = x.options[i].text;
}
&lt;/script>
===========================
<br>
<h2>jQuery Object and HTML DOM Object</h2>
In jQuery, to get the same result as document.getElementById, 
access the jQuery Object and get the first element in the object
document.getElementById('contents'); //returns a <span class="redword">HTML DOM Object</span>
var contents = $('#contents');  //returns a <span class="redword">jQuery Object</span>
var contents = $('#contents')[0]; //returns a HTML DOM Object
<a href="https://dotblogs.com.tw/maplenote/2014/07/21/146024">Javascript 跟 JQuery</a>
<br>
To get the DOM object(s) from the jQuery one, use the following:
$('#selectlist').get(); //get all DOM objects in the jQuery collection  
$('#selectlist').get(0); //get the DOM object in the jQuery collection at index 0  
$('#selectlist')[0]; //get the DOM objects in the jQuery collection at index 0  
===========================
<br>
<h2>fibonacci function</h2>
function fibonacci(num){
var a = 1, b = 0, temp;
var seq = []
while (num > 0){
temp = a;
a = a + b;
b = temp;
seq.push(b)
num--;
}
return seq;
}
const fibs = fibonacci(100)
===========================
<br>
<h2>input numeric filter</h2>
var numericExpression = /^[0-9]+$/;
if(!userInput.match(numericExpression)){alert("Please enter a number")}
===========================
<br>
<h2>some timer codes</h2>
&lt;input type="number" id="hourtimer">
&lt;input type="number" id="minutetimer" autofocus>
&lt;input type="number" id="secondtimer">
function cvtToMinAndSecStr( x ) {return Math.floor(x/60) + ":" + x%60;}
function displayMsg( noticeArea, msg ) {document.getElementById(noticeArea).innerHTML = msg;}
if(displaySeconds &lt; 10) {displaySeconds = '0' + displaySeconds;}
let timeRemaining = 0;
let timer;
function starttimer() {
if( ! timer) {
timer = setInterval(function() {timeRemaining = timeRemaining - 1; displayTime();}, 1000); 
}
}
countdown.innerText = hours + ":" + minutes + ":" + displaySeconds;
===========================
<br>
<h2>numerical input value step attribute</h2>
The step attribute can be used with a numerical input value to dictate how granular the values you can input are.

&lt;input type="time" id="timerInput" step="1">
document.getElementById("settime").value = "13:24:59";
For example, you might want users to enter a particular time, but only in 30 minute increments.

In this case, we can use the step attribute, keeping in mind that for time inputs the value of the attribute is in seconds.

For example, a 30 minute increment would have a step value of 1800.

&lt;input type="time" step="1800">
Return the value property:
timeObject.value
Set the value property:
timeObject.value = hh:mm:ss.ms
function myFunction() {
var x = document.createElement("INPUT");
x.setAttribute("type", "time");
x.setAttribute("value", "21:35:09");
document.body.appendChild(x);
}
<h2>script to animate css</h2>
&lt;link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css'>
===========================
<br>
<h2>Math.floor(Math.random...</h2>
listLen = Math.floor(Math.random() * (listLen -1));
===========================
<br>
<h2>Include JavaScript file</h2>
appendChild() is a more native way:
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'script.js';
document.head.appendChild(script);

var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.0';
document.head.appendChild(script);
======================
Using jQuery:
$.getScript('script.js');
======================
use the fetch:
fetch('https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js')
.then(response => response.text())
.then(text => eval(text))
.then(() => { /* now you can use your library */ })
======================
https://stackoverflow.com/questions/5282228/include-javascript-file-in-chrome-console
======================
<h2>check time falls within a specific range</h2>
<a href="https://stackoverflow.com/questions/9081220/how-to-check-if-current-time-falls-within-a-specific-range-on-a-week-day-using-j">check time falls within a specific range</a>
function checkTime() {
var d = new Date(); // current time
var hours = d.getHours();
var mins = d.getMinutes();
var day = d.getDay();
return day >= 1
&& day <= 5
&& hours >= 9 
&& (hours < 17 || hours === 17 && mins <= 30);
}
function checkTime() {
var d = new Date(); // current time
var hours = d.getHours();
var mins = d.getMinutes();
var day = d.getDay();
return day >= 1
&& day <= 5
&& (hours >= 9  || hours === 9 && mins >= 30)
&& (hours < 12)
&& (hours >= 13)
&& (hours < 16);
}
===========================
<br>
<br>
<h2>create a dataset</h2>
var dataset = [];
var count =10;
for (var j = 0; j < count; j++) {dataset[j] = Math.round(Math.random() * 100)}
<h2>polar and cartesian coordinates</h2>
function d_Btw_2Pts(x1, y1, x2, y2) {//  Pythagoras Theoremvar x = (x2-x1);var y = (y2-y1);return Math.sqrt(x*x + y*y);
}
function polar2Cart(R, theta) {x = R * Math.cos(theta);y = R * Math.sin(theta);return [x,y]
}
<h2>convert to fixed decimal places</h2>
num.toFixed(2);
<h2>get image size height width using javascript</h2>
var image = document.getElementById('imagearea'); 
alert(image.clientWidth, image.clientHeight);
clientWidth and clientHeight are DOM properties that show the current in-browser size of the inner dimensions of a DOM element (excluding margin and border).

So in the case of an IMG element, this will get the actual dimensions of the visible image.
img.onload = function() {
alert(this.width + 'x' + this.height);
}
<a href="https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript">get image size height width using javascript</a>
<br>
<h2>generate random number that is negative or positive</h2>
(Math.random()-1/2)*2
<h2>js script load external script</h2>
$.getScript('another_file.js', function() {
//script is loaded and executed put your dependent JS here
});
or
var imported = document.createElement('script');
imported.src = '/path/to/imported/script';
document.head.appendChild(imported);
<h2>Load scripts with JavaScript</h2>
jsURL = "abc" // js name
loadScript(jsURL)
function loadScript(jsURL) {
var script = document.createElement('script');
script.src = "./aPath/scripts/" + jsURL + ".js";
script.onload = function() {  // this is callback function
linksArray = eval(jsURL)
itemLength = linksArray.length
alert(jsURL + " put into linksArray, usr r to randomOpen")
}
document.getElementsByTagName('head')[0].appendChild(script);
}
// Get the first script element on the page
var ref = w.document.getElementsByTagName( 'script' )[ 0 ];
// Create a new script element
var script = w.document.createElement( 'script' );
// Set the script element `src`
script.src = 'path-to-your-javascript-file.js';
// Inject the script into the DOM
ref.parentNode.insertBefore( script, ref );
This simply append to head
var script = document.createElement('script');
script.src = urladdr;
script.onload = function() { ....

}
document.getElementsByTagName('head')[0].appendChild(script);
<h2>Convert unicode character to string format</h2>
<a href="https://stackoverflow.com/questions/17267329/converting-unicode-character-to-string-format">Convert unicode character to string format</a>
<br>
theStr = "\u9999\u6e2f\u98df\u54c1\u6295\u8d44"	// this will show correctly as "香港食品投资"
String.fromCharCode(parseInt("6e2f",16)) //this work
String.fromCharCode(parseInt("9999 6e2f 98df 54c1 6295 8d44",16)) //cannot work
<h2>Learn API</h2>
<a href="https://idratherbewriting.com/learnapidoc/" class="whitebut ">Learn API docs</a>
<h2>Vibration API Sample</h2>
<a href="https://googlechrome.github.io/samples/vibration/">Vibration API Sample</a>
<br>
function example1() {
// Vibrate for 500ms
navigator.vibrate([500]);
}
<h2>worker</h2>
const delay = 5000;
// run without worker
const withoutWorkerButton = document.createElement('button');
document.body.appendChild(withoutworkerButton);
withoutWorkerButton.textContent = 'without Worker';
withoutWorkerButton.addEventListener('click', ()=> {const start = performance.now();while (performance.now() - start < delay);const end = performance.now();console.log(end-start);
});// run with worker
const myworker = new worker('./worker.js')	// create worker
myworker.onMessage = e => {console.log('myworker says: ', e.data);
}
const withWorkerButton = document.createElement('button');
document.body.appendChild(withworkerButton);
withWorkerButton.textContent = 'with Worker';
withWorkerButton.addEventListener('click', ()=> {myworker.postMessage(delay);
});
//worker.js
this.onMessage = e => {const delay = e.data;const start = performance.now();while (performance.now() - start < delay);const end = performance.now();this.postMessage(end-start);
}
<a href="https://stackoverflow.com/questions/30795525/performance-now-vs-date-now">performance now vs date now</a>
<br>
<a href="http://javascript.ruanyifeng.com/bom/performance.html">Performance API</a>
<br>
<h2>Javascript Use Indirect Variables, 'Variable' variables in Javascript</h2>
Indirect Variables or dynamic variable names
Javascript Use Indirect Variables, 'Variable' variables in Javascript
// example
// global
var vara0='a';
var varb0='b';
alert(window['vara'+0]); // gives 'a'
alert(window['varb'+0]); // gives 'b'
console.log(window['vara'+0]);
console.log(window['varb'+0]);
// example
var foos = ['foo', 'bar', 'baz'];
for(i=0; i&lt;foos.length; i++){
console.log(foos[i]);
}
Note: eval() is heavy handed.

eval() uses lots of cpu resources.

try to avoid it.
// example
// local
function foo(){var var1='b';alert(eval('var'+1))
}
foo()
// example
var foo = 42;
var bar = 21;
var key = 'foo';
console.log(eval(key));
<a href="https://stackoverflow.com/questions/5187530/variable-variables-in-javascript">variable variables in javascript</a>
<br>
In programming, dynamic variable names don’t have a specific name hard-coded in the script.
They are named dynamically with string values from other sources.
Dynamic variables are rarely used in JavaScript.
But in some cases they are useful.
Unlike PHP, there is no special implementation of dynamic variable names in JavaScript.
But similar results can be achieved by using some other methods.
In JavaScript, dynamic variable names can be achieved by using 2 methods/ways given below.
<b>eval() Method: </b>The eval() function evaluates JavaScript code represented as a string in the parameter.
A string is passed as a parameter to eval().
If the string represents an expression, eval() evaluates the expression.
Inside eval(), we pass a string in which variable <b>value i</b> is declared and assigned a value of i for each iteration.
The eval() function executes this and creates the variable with the assigned values.
The code is given below implements the creation of dynamic variable names using eval().
Example: 
var k = 'value';
var i = 0;
for(i = 1; i &lt; 3; i++) {
eval('var ' + k + i + '= ' + i + ';');
}
console.log(value1);
console.log(value2);
Output:
value1=1
value2=2
<b>Window object: </b>JavaScript always has a global object defined.
When the program creates global variables they’re created as members of the global object.
The window object is the global object in the browser.
Any global variables or functions can be accessed with the window object.
After defining a global variable we can access its value from the window object.
The code given below implements dynamic variable names using the window object.
So, the code basically creates a global variable with dynamic name “valuei” for each iteration of i and assigns a value of i to it.
Later these variables can be accessed in the script anywhere as they become global variables.
Example: 
var i;
for(i = 1; i &lt; 3; i++) {
window['value'+i] = + i;
}
console.log(value1);
console.log(value2);
Output:
value1=1
value2=2
// use global variable
var var1='c';
alert(window['var'+ 1]); // c
// use eval
var1 = "b"
thisvar = "var" + 1
alert (eval(thisvar))
ignoreLstName = bookid + "IgnoreLst"
window["ignoreLstName"]  // note the " to use global variable
eval("ignoreLstName")  // use eval
example
bookid = "中医Tips"
ignoreLstName = bookid + "IgnoreLst"
if (localStorage.getItem(window["ignoreLstName"]) === null) {
localStorage.setItem(window["ignoreLstName"], "");
ignoreLst = []
} else{
ignoreLst = localStorage.getItem(window["ignoreLstName"]).split(',');
}
<a href="http://2ality.com/2014/01/eval.html">Evaluating JavaScript code via eval() and new Function()</a>
<br>
<h2>Emit a beeping sound with JavaScript</h2>
a=new AudioContext(); // browsers limit the number of concurrent audio contexts, so you better re-use'em
function beep(vol, freq, duration){
v=a.createOscillator()
u=a.createGain()
v.connect(u)
v.frequency.value=freq
v.type="square"
u.connect(a.destination)
u.gain.value=vol*0.01
v.start(a.currentTime)
v.stop(a.currentTime+duration*0.001)
}
beep(50,500,600)
// to loop with diff freq
function start(counter){
if(counter < 20){
setTimeout(function(){
counter++;
console.log(counter);
beep(350,counter*50,400);
start(counter);
}, 500);
}
}
start(0);
<h2>Delay, Sleep, Pause, & Wait in JavaScript</h2>
Many programming languages have a sleep function that will delay a program’s execution for a given number of seconds.

This functionality is absent from JavaScript, however, owing to its asynchronous nature.

The standard way of creating a delay in JavaScript is to use its setTimeout method.
console.log("Hello");
setTimeout(() => {  console.log("World!"); }, 2000);
Waiting for Things with setTimeout
function pollDOM () {
const el = document.querySelector('my-element');
if (el.length) {
// Do something with el
} else {
setTimeout(pollDOM, 300); // try again in 300 milliseconds
}
}
pollDOM();
Flow Control in Modern JavaScript
It’s often the case when writing JavaScript that we need to wait for something to happen (for example, data to be fetched from an API), then do something in response (such as update the UI to display the data).
The example above uses an anonymous callback function for this purpose, but if you need to wait for multiple things to happen, the syntax quickly gets pretty gnarly and you end up in callback hell.
Luckily, the language has evolved considerably over the past few years and now offers us new constructs to avoid this.
For example, using async await we can rewrite the initial code to fetch information from the GitHub API:
(async () => {
const res = await fetch(`https://api.github.com/users/jameshibbard`);
const json = await res.json();
console.log(json.public_repos);
console.log("Hello!");
})();
Now the code executes from top to bottom.

The JavaScript interpreter waits for the network request to complete and the number of public repos is logged first, then the “Hello!” message.
Bringing Sleep to Native JavaScript
function sleep(milliseconds) {
const date = Date.now();
let currentDate = null;
do {
currentDate = Date.now();
} while (currentDate - date < milliseconds);
}
console.log("Hello");
sleep(2000);
console.log("World!");
As expected, this will log “Hello”, pause for two seconds, then log “World!”
it has a large disadvantage:
the loop will block JavaScript’s execution thread and ensure that nobody can interact with your program until it finishes.
If you need a large delay, there’s a chance that it may even crash things altogether.
A Better Sleep Function
Well, it’s also possible to combine the techniques to make a less intrusive sleep function:
function sleep(ms) {
return new Promise(resolve => setTimeout(resolve, ms));
}
console.log("Hello");
sleep(2000).then(() => { console.log("World!"); });
Notice that we need to use a then callback to make sure the second message is logged with a delay.

We can also chain more callbacks onto the first:
console.log("Hello");
sleep(2000)
.then(() => { console.log("World!"); })
.then(() => {
sleep(2000)
.then(() => { console.log("Goodbye!"); })
});
This works, but looks ugly.

We can pretty it up using async ...

await:
function sleep(ms) {
return new Promise(resolve => setTimeout(resolve, ms));
}
async function delayedGreeting() {
console.log("Hello");
await sleep(2000);
console.log("World!");
await sleep(2000);
console.log("Goodbye!");
}
delayedGreeting();
This looks nicer, but means that whatever code is using the sleep function needs to be marked as async.
Of course, both of these methods still have the disadvantage (or feature) that they do not pause the entire program execution.

Only your function sleeps:
function sleep(ms) {
return new Promise(resolve => setTimeout(resolve, ms));
}
async function delayedGreeting() {
console.log("Hello");
await sleep(2000);
console.log("World!");
}
delayedGreeting();
console.log("Goodbye!");
JavaScript’s asynchronous nature is quite nice when you get used to it.
<k>simple delay</k>
function delay(time) {
return new Promise(resolve => setTimeout(resolve, time));
}
<h2>reminders notes</h2>
reminders
add, remove, edit notes
notes object format:
date, time, details, remind frequency (repeating), action
sort date time sequence
use set interval
calc current time and set interval
array of objects: remindList
remindList = []
var remindNotes = new Object();
remindNotes.date = 'date';
remindNotes.time = 'timw';
remindNotes.details = "description';
remindNotes.freq = 1;
remindNotes.interval = 2;
remindNotes.action = beep;
<br>
<h2>RegEx text manipulations</h2>
<a href="Practical JavaScript Regular Expressions.html" class="red">Practical JavaScript Regular Expressions</a>
Syntax: /pattern/modifiers;
/pattern/ is the regular expression pattern
e.g.

/.*abcd/
modifiers is the followings:
i Perform case-insensitive matching 
g Perform a global match (find all matches rather than stopping after the first match)  
m Perform multiline matching
<a href="https://www.w3schools.com/jsref/jsref_obj_string.asp">JavaScript String Reference</a>
simple methods:
str.search()var str = "Please locate where 'locate' occurs!";var pos = str.search("locate");str.replace()str = "Please visit Microsoft!";var n = str.replace("Microsoft", "W3Schools");String Lengthvar txt = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";var theTxtLen = txt.length;Finding a String in a Stringvar str = "Please locate where 'locate' occurs!";var pos = str.indexOf("locate");Extracting String Parts: 3 methods for extracting part of a stringslice(start, end)substring(start, end)substr(start, length)toUpperCase()
toLowerCase()
concat()
trim()var str = "       Hello World!        ";alert(str.trim());
split()var txt = "a,b,c,d,e";   // Stringtxt.split(",");          // Split on commastxt.split(" ");          // Split on spacestxt.split("|");          // Split on pipee.g.
var thestr   = 'FLSZ  1070560  -  00700腾讯控股';
var regex = /.* -  /;
str = thestr.replace(regex, "");
console.log(str.slice(0, 4));
Regular Expression Patterns
[abc] Find any of the characters between the brackets 
[^abc]  Find any character NOT between the brackets
[0-9] Find any character between the brackets (any digit)
[^0-9]  Find any character NOT between the brackets (any non-digit)
(x|y) Find any of the alternatives specified
Metacharacter Description Try it
.

Find a single character, except newline or line terminator
\w  Find a word character
\W  Find a non-word character
\d  Find a digit
\D  Find a non-digit character
\s  Find a whitespace character
\S  Find a non-whitespace character
\b  Find a match at the beginning/end of a word
\B  Find a match not at the beginning/end of a word
\0  Find a NUL character
\n  Find a new line character
\f  Find a form feed character
\r  Find a carriage return character
\t  Find a tab character
\v  Find a vertical tab character
\xxx  Find the character specified by an octal number xxx
\xdd  Find the character specified by a hexadecimal number dd
\uxxxx  Find the Unicode character specified by a hexadecimal number xxxx
Quantifier  Description
n+  Matches any string that contains at least one n
n*  Matches any string that contains zero or more occurrences of n
n?  Matches any string that contains zero or one occurrences of n
n{X}  Matches any string that contains a sequence of X n's
n{X,Y}  Matches any string that contains a sequence of X to Y n's
n{X,} Matches any string that contains a sequence of at least X n's
n$  Matches any string with n at the end of it
^n  Matches any string with n at the beginning of it
?=n Matches any string that is followed by a specific string n
?!n Matches any string that is not followed by a specific string n
RegExp Object
exec()  Tests for a match in a string.

Returns the first match
test()  Tests for a match in a string.

Returns true or false
toString()  Returns the string value of the regular expression
RegExp Object Properties
constructor Returns the function that created the RegExp object's prototype
global  Checks whether the "g" modifier is set
ignoreCase  Checks whether the "i" modifier is set
lastIndex Specifies the index at which to start the next match
multiline Checks whether the "m" modifier is set
source  Returns the text of the RegExp pattern
Example
var str = "Visit W3Schools!"; 
var pat = /o/g;
var n = str.match(pat);
n.length;
<br>
<h2>regular expressions substitute operator $1-$9</h2>
The non-standard $1, $2, $3, $4, $5, $6, $7, $8, $9 properties are static and read-only properties of regular expressions that contain parenthesized substring matches.
var str   = 'asd-0.testing';
var regex = /(asd-)\d(\.\w+)/;
str = str.replace(regex, "$11$2");
"asd-1.testing"
str = str.replace(regex, "$13$2");
"asd-3.testing"
<h2>convert seconds to colon-separated time string (hh:mm:ss)</h2>
var date = new Date(null);
date.setSeconds(45); // specify value for SECONDS here
var timeString = date.toISOString().substr(11, 8);
console.log(timeString)
thisDate = new Date()
Sun Feb 24 2019 14:22:58 GMT+0800 (Hong Kong Standard Time)
thisDate.toTimeString()
"14:22:58 GMT+0800 (Hong Kong Standard Time)"
thisDate.replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1")
thisDate.replace is not a function
thisDate.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1")
"14:22:58"
<h2>iterators and generators</h2>
The for loop could be written like this:
const possiblePrimes = [73, 6, 90, 19, 15];
const confirmedPrimes = [];
for (const i of possiblePrimes){
if ( isPrime(i) ){
confirmedPrimes.push(i);
}
}
// confirmedPrimes is now [73, 19]
This is far cleaner, but the most striking bit of this is the for loop.

The variable i now represents the actual item in the array called possiblePrimes.

So, we don’t have to call it by index anymore.

This means that instead of calling possiblePrimes[i] in the loop, we can just call i.
Behind the scenes, this kind of iteration is making use of ES6’s bright and shiny Symbol.iterator() method.

This bad boy is in charge of describing the iteration and, when called, returns a JavaScript object containing the next value in the loop and a done key that is either true or false depending on whether or not the loop is finished.
Generators
Generators, also called “iterator factories”, are a new type of JavaScript function that creates specific iterations.

They give you special, self-defined ways to loop over stuff.
Okay, so what does all that mean? Let’s look at an example.

Let’s say that we want a function that will give us the next prime number every time we call it.

Again, we’ll use our isPrime function from before to check if a number is prime:
function* getNextPrime() {
let nextNumber = 2;
while (true) {
if (isPrime(nextNumber)) {
yield nextNumber;
}
nextNumber++;
}
}
If you’re used to JavaScript, some of this stuff will look a bit like voodoo, but it’s actually not too bad.

We have that strange asterisk after the keyword function, but all this does is to tell JavaScript that we’re defining a generator.
The other funky bit would be the yield keyword.

This is actually what a generator spits out when you call it.

It’s roughly equivalent to return, but it keeps the state of the function instead of rerunning everything whenever you call it.

It “remembers” its place while running, so the next time you call it, it carries on where it left off.
This means that we can do this:
const nextPrime = getNextPrime();
And then call nextPrime whenever we want to obtain — you guessed it — the next prime:
console.log(nextPrime.next().value); // 2
console.log(nextPrime.next().value); // 3
console.log(nextPrime.next().value); // 5
console.log(nextPrime.next().value); // 7
You can also just call nextPrime.next(), which is useful in situations where your generator isn’t infinite, because it returns an object like this:
console.log(nextPrime.next());
// {value: 2, done: false}
Here, that done key tells you whether or not the function has completed its task.

In our case, our function will never finish, and could theoretically give us all prime numbers up to infinity (if we had that much computer memory, of course).
<a href="javascript iterables, iterators, and generators.html">javascript iterables, iterators, and generators</a>
<br>
<br>
<br>
<h2>countDecimals and transformations</h2>
function countDecimals(value) { if ((value % 1) != 0) 	return value.toString().split(".")[1].length;  return 0;
};
avalue = 1.0320
avalue *= 10
apowval = 1
apowval ++
avalue = 1.0320
a = countDecimals(avalue)
amplified  = avalue*Math.pow(10, a);
original  = amplified/Math.pow(10, a);

<h2>Higher Order Functions: Filter, Map and Reduce</h2>
<div id="HOFunctionstoc" class="toc"><a href="#HOFunctionstopic-0" target="_self">Intro</a><br><a href="#HOFunctionstopic-1" target="_self"><pk>Filter</pk></a><br><a href="#HOFunctionstopic-2" target="_self"><pk>Map</pk></a><br><a href="#HOFunctionstopic-3" target="_self"><pk>Reduce</pk></a><br><a href="#HOFunctionstopic-4" target="_self"><pk>Combining map, filter and reduce</pk></a><br></div></center>

<h3 id="HOFunctionstopic-0">Intro</h3>
<a href="https://medium.freecodecamp.org/higher-order-functions-in-javascript-d9101f9cf528">Higher Order Functions: Using Filter, Map and Reduce for More Maintainable Code</a>

repeat executing function on array element
.map(Number)
Calls Number on each value in the array (casting it to a number)

.filter()
filter on each element in the array
does not change the original array.

use .reduce() to create our own implementation of .map() and .filter()

<k>var arr = [ 1, 2, 3 ];
var arrDoubled = arr.map(function(x) { return x * 2; });
console.log(arrDoubled); // [ 2, 4, 6 ]</k>
Higher order functions can also return a function.

For example, you can make a function called <k>multiplyBy</k> that takes a number and returns a function that multiplies another number you provide by the first number provided.

You can use this approach to create a <k>multiplyByTwo</k> function to pass to <k>Array.map</k>.

<k>function multiplyBy(num1) {
  return function(num2) { return num1 * num2; }
}
var multiplyByTwo = multiplyBy(2);
var arr = [ 1, 2, 3 ];
var arrDoubled = arr.map(multiplyByTwo);
console.log(arrDoubled); // [ 2, 4, 6 ]</k>

It also makes it easy to combine functions with each other.

This is called composition
The three most used higher order functions in JavaScript are <k>.filter()</k>, <k>.map()</k> and <k>.reduce()</k>.
<h3 id="HOFunctionstopic-1"><pk>Filter</pk></h3>
Imagine writing a piece of code that accepts a list of people where you want to filter out the people that are equal or above the age of 18.
Our list looks like the one below:

<k>const people = [
{ name: ‘John Doe’, age: 16 },
{ name: ‘Thomas Calls’, age: 19 },
{ name: ‘Liam Smith’, age: 20 },
{ name: ‘Jessy Pinkman’, age: 18 },
];</k>
Let’s look at an example of a first order function which select people that are above the age of 18.

<k>const peopleAbove18 = (collection) => {
  const results = [];
  for (let i = 0; i &lt; collection.length; i++) {
    const person = collection[i];
    if (person.age >= 18) {
      results.push(person);
    }
}</k>
<k>  return results;};</k>
Now what if we want to select all the people who are between 18 and 20? We could create another function.
<k>const peopleBetween18And20 = (collection) => {  const results = [];
   for (let i = 0; i &lt; collection.length; i++) {
     const person = collection[i];
     if (person.age >= 18 &amp;&amp; person.age &lt;= 20) {
       results.push(person);
     }
   }
  return results;
};</k>
You may already recognize a lot of repeating code here.

This could be abstracted into a more generalized solution.

These two functions have something in common.

They both iterate over a list and filter it on a given condition.
<blockquote>“A higher order function is a function that takes one or more functions as arguments.”<em>— <a href="https://clojurebridge.github.io/community-docs/docs/clojure/higher-order-function/" rel="noopener">Closurebridge</a></em></blockquote>
We can improve our previous function by using a more declarative approach, <k>.filter()</k>.
<k>const peopleAbove18 = (collection) => {
return collection.filter((person) => person.age >= 18);}</k>
That’s it! We can reduce a lot of extra code by using this higher order function.

It also make our code better to read.

We don’t care how things are being filtered, we just want it to filter.

I will go into combining functions later in this article.
<h3 id="HOFunctionstopic-2"><pk>Map</pk></h3>
Let’s take the same list of people and an array of names that tells if the person loves to drink coffee.
<k>const coffeeLovers = [‘John Doe’, ‘Liam Smith’, ‘Jessy Pinkman’];</k>
The imperative way will be like:
<k>const addCoffeeLoverValue = (collection) => {
   const results = [];
   for (let i = 0; i &lt; collection.length; i++) {
      const person = collection[i];
      if (coffeeLovers.includes(person.name)) {
        person.coffeeLover = true;
      } else {
        person.coffeeLover = false;
      }
      results.push(person);
   }
   return results;
};</k>

We could use <k>.map()</k> to make this more declarative.
<k>const incrementAge = (collection) => {
  return collection.map((person) => {
    person.coffeeLover = coffeeLovers.includes(person.name);
    return person;
  });
};</k>
Again, <k>.map()</k> is a high-order function.

It allows a function to be passed as an argument.
<h3 id="HOFunctionstopic-3"><pk>Reduce</pk></h3>
I bet you will like this function when you know when and how to use it.
The cool thing about <k>.reduce()</k> is that most of the functions above can be made with it.
Let’s take a simple example first.

We want to sum up all the people’s ages.

Again, we’ll look how this can be done using the imperative approach.

It’s basically looping through the collection and increment a variable with the age.
<k>const sumAge = (collection) => {
   let num = 0;
   collection.forEach((person) => {
     num += person.age;
   });
   return num;
}</k>
And the declarative approach using <k>.reduce()</k>.
<k>const sumAge = (collection) => collection.reduce((sum, person) => {
   return sum + person.age;
  }, 0);</k>
We can even use <k>.reduce()</k> to create our own implementation of <k>.map()</k> and <k>.filter()</k> .
<k>const map = (collection, fn) => {
  return collection.reduce((acc, item) => {
    return acc.concat(fn(item));
  }, []);
}</k>
<k>const filter = (collection, fn) => {
  return collection.reduce((acc, item) => {
    if (fn(item)) {
      return acc.concat(item);
    }
    return acc;
  }, []);
}</k>
This might be hard to understand at first.

But what <k>.reduce()</k> basically does is start with a collection and a variable with an initial value.

You then iterate over the collection and append (or add) the values to the variable.
<h3 id="HOFunctionstopic-4"><pk>Combining map, filter and reduce</pk></h3>
These functions can be used together!
This makes it easy to create reusable functions and reduce the amount of code that is required to write certain functionality.
So we talked about using <k>.filter()</k> to filter out the people that are equal or below the age of 18.

<k>.map()</k> to add the <k>coffeeLover</k> property, and <k>.reduce()</k> to finally create a sum of the age of everyone combined.
Lets write some code that actually combines these three steps.
<k>const people = [ { name: ‘John Doe’, age: 16 }, { name: ‘Thomas Calls’, age: 19 }, { name: ‘Liam Smith’, age: 20 }, { name: ‘Jessy Pinkman’, age: 18 },];</k>
<k>const coffeeLovers = [‘John Doe’, ‘Liam Smith’, ‘Jessy Pinkman’];</k>
<k>const ageAbove18 = (person) => person.age >= 18;const addCoffeeLoverProperty = (person) => { person.coffeeLover = coffeeLovers.includes(person.name);  return person;}</k>
<k>const ageReducer = (sum, person) => { return sum + person.age;}, 0);</k>
<k>const coffeeLoversAbove18 = people .filter(ageAbove18) .map(addCoffeeLoverProperty);</k>
<k>const totalAgeOfCoffeeLoversAbove18 = coffeeLoversAbove18 .reduce(ageReducer);</k>
<k>const totalAge = people .reduce(ageReducer);</k>
If you do it the imperative way, you will end up writing a lot of repeating code.
The mindset of creating functions with <k>.map()</k> ,<k>.reduce()</k> and <k>.filter()</k> will improve the quality of the code you’ll write.

But it also adds a lot of readability.

You don’t have to think about what’s going on inside a function.

It’s easy to understand.
<a href="https://medium.com/javascript-scene/higher-order-functions-composing-software-5365cf2cbe99">Higher Order Functions (Composing Software)</a>

<a href="https://www.freecodecamp.org/news/reduce-f47a7da511a9/" class="whitebut ">A Guide To The Reduce Method In Javascript</a>
<a href="https://stackoverflow.com/questions/37627712/how-to-use-if-else-conditon-in-arrow-function-in-javascript" class="whitebut ">if-else conditon in arrow function</a>
Flattening an array of arrays
var data = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];
var flat = data.reduce((total, amount) => total.concat(amount))
flat // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]
if-else conditon in arrow function
function(a){
  if(a &lt; 10){
    return 'valid';
  }else{
    return 'invalid';
  }
}
The equivalent in an arrow function using a ternary is:
a => (a &lt; 10) ? 'valid' : 'invalid'
the body of an arrow function without braces can only be a single expression, so if statements are not allowed.
Statements are allowed in arrow functions with braces though, like this:
const func = () => {
  if (...) ...
}
for a single 'if' condition, may use a shortcut syntax.
Imagine you need to execute a doThis() function only if a > 10 :
a => a > 10 &amp;&amp; doThis()


<h2>高阶函数</h2>
<br>
<div id="higherOrdertoc" class="toc"><a href="#higherOrdertopic-0" target="_self">如何理解高阶函数</a> <a href="#higherOrdertopic-1" target="_self">高阶函数的优势</a> <a href="#higherOrdertopic-2" target="_self">常用的高阶函数：让数组操作更简单</a> <a href="#higherOrdertopic-3" target="_self">自定义高阶函数</a> <a href="#higherOrdertopic-4" target="_self">结束</a> </div></center>

<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/KEXUm19zKo4qwStf5IEVt1IaeV97n6HYbT3PaMiahxd4pajO0h5JW2bia0gmTibUicibrTDItkAeStdfd9aZR2ibdkhA/640" loading="lazy">
高阶函数就是可以把其他函数当作参数传进去，或者把函数作为结果返回的函数。
高阶函数可以帮助我们写出更加模块化、可重用的代码。
举个例子，如果你经常需要在代码里做一些重复性的操作，比如对数组里的每个元素做某种处理，有了高阶函数，我们可以把这些操作提取出来，写成一个通用的函数，然后在需要的时候直接调用。
这样一来，不但减少了代码的重复，还让代码逻辑更加清晰。
<h3 id="higherOrdertopic-0">如何理解高阶函数</h3>
假设我们要制作一份饮料菜单，菜单上的饮料可以是各种不同的类型，比如果汁、咖啡、奶茶等。
我们先定义两个制作饮料的函数：
function makeJuice(size) {
return `A cup of ${size} juice`;
}
function makeCoffee(size) {
return `A cup of ${size} coffee`;
}
然后，我们定义一个高阶函数 orderDrink，它接受一个制作饮料的函数 makeDrink 和一个大小参数 size：
function orderDrink(makeDrink, size) {
return makeDrink(size);
}
这样，我们就可以通过传递不同的制作饮料的函数和大小参数，来制作不同的饮料：
console.log(orderDrink(makeJuice, 'large'));  // 输出: A cup of large juice
console.log(orderDrink(makeCoffee, 'small')); // 输出: A cup of small coffee
在这个例子中，orderDrink 是一个高阶函数，它接受一个函数 makeDrink 和一个参数 size。
orderDrink 调用 makeDrink，并传入 size 作为参数，然后返回制作好的饮料。
我们定义了两个简单的函数 makeJuice 和 makeCoffee，分别制作果汁和咖啡。
通过将这两个函数作为参数传递给 orderDrink，我们可以制作不同大小的饮料，而无需修改 orderDrink 函数本身。
这个例子展示了高阶函数的一个重要特性：代码复用性和可扩展性。
我们只需要编写一次 orderDrink 函数，就可以通过传递不同的制作饮料的函数，实现多种不同的饮料制作方法。
这在实际开发中非常有用，特别是当我们需要对某一类操作进行抽象和泛化时。
<h3 id="higherOrdertopic-1">高阶函数的优势</h3>
<k>抽象化：让代码更简洁</k>
高阶函数可以帮助你将常见的模式和行为抽象出来，使代码更具可读性和简洁性。
比如，我们常常需要对数组中的每个元素进行操作，如果每次都单独写一遍代码，会非常繁琐。
通过高阶函数，我们可以把这些操作抽象成一个通用的函数，简化代码。
<k>复用性：打造可复用的积木</k>
通过将功能封装到高阶函数中，你可以创建出可复用的代码块。
这样一来，不同的项目中你都可以轻松地使用这些函数，而不需要重复造轮子。
例如，一个通用的排序函数，可以在不同的数据处理中复用，只需传入不同的排序逻辑。
<k>模块化：分而治之</k>
高阶函数提倡模块化编程方法，将复杂的任务分解成更小、更专注的函数。
这样不仅使代码更易于理解和维护，还能提高开发效率。
每个小函数只关注自己的任务，减少了相互之间的依赖。
<k>灵活性：自由定制</k>
高阶函数让你可以通过传递不同的回调函数，自由定制函数的行为，从而实现更大的灵活性和适应性。
比如，你可以通过传入不同的回调函数，动态改变数据处理的方式，使代码更加适应不同的需求。
<h3 id="higherOrdertopic-2">常用的高阶函数：让数组操作更简单</h3>
在 JavaScript 中，有很多内置的高阶函数，特别适用于数组的操作和转换。
<k>Array.prototype.map</k>
map 函数通过对原数组中的每个元素调用提供的回调函数，创建一个新数组。
例如，我们有一个包含学生成绩的数组，想要将每个成绩提升10分：
const grades = [70, 85, 90, 78, 92];
const improvedGrades = grades.map(grade => grade + 10);
console.log(improvedGrades);  // 输出: [80, 95, 100, 88, 102]
在这个例子中，map 被用来创建一个新数组 improvedGrades，通过对 grades 数组中的每个成绩加10分。
回调函数 grade => grade + 10 被应用到每个元素上，结果存储在新数组的对应位置。
<k>Array.prototype.filter</k>
filter 函数通过检查数组中的每个元素，创建一个新数组，包含所有通过回调函数测试的元素。
例如，我们有一个年龄数组，想要筛选出所有成年人（18岁及以上）：
const ages = [12, 18, 25, 16, 30];
const adults = ages.filter(age => age >= 18);
console.log(adults);  // 输出: [18, 25, 30]
在这个例子中，filter 被用来创建一个新数组 adults，通过对 ages 数组中的每个年龄进行成年检查。
回调函数 age => age >= 18 被应用到每个元素上，只有通过检查的元素才会被包含在新数组中。
<k>Array.prototype.reduce</k>
reduce 函数通过对数组中的每个元素执行一个提供的回调函数，将数组缩减为单个值。
例如，我们有一个商品价格数组，想要计算所有商品的总价：
const prices = [100, 200, 300, 400, 500];
const totalPrice = prices.reduce((total, price) => total + price, 0);
console.log(totalPrice);  // 输出: 1500
在这个例子中，reduce 被用来将 prices 数组缩减为一个单个值 totalPrice，通过对每个元素执行累加操作。
回调函数 (total, price) => total + price 被应用到每个元素上，total 是累加器，price 是当前元素，初始值为 0。
<h3 id="higherOrdertopic-3">自定义高阶函数</h3>
除了使用内置的高阶函数，你还可以创建自己的高阶函数来封装特定的行为或模式。
这样可以让你的代码更具灵活性和可读性。
我们通过一个简单的例子来展示如何创建自定义高阶函数。
<k>自定义高阶函数示例</k>
假设我们有一个数字数组，希望对数组中的每个数字进行某种转换操作。
我们可以创建一个高阶函数 transformArray 来实现这个需求。
// 定义一个自定义高阶函数 transformArray
function transformArray(arr, transformFunc) {
const transformedArray = [];  // 创建一个空数组用于存储转换后的结果
for (let i = 0; i &lt; arr.length; i++) {  // 遍历输入数组的每个元素
transformedArray.push(transformFunc(arr[i]));  // 将转换后的元素添加到新数组中
}
return transformedArray;  // 返回转换后的新数组
}
// 定义一个数字数组
const numbers = [1, 2, 3, 4, 5];
// 使用 transformArray 函数将每个数字乘以 2
const doubledNumbers = transformArray(numbers, num => num * 2);
// 输出转换后的数组
console.log(doubledNumbers);  // 输出: [2, 4, 6, 8, 10]
在这个例子中，transformArray 是一个高阶函数，它接受一个数组 arr 和一个转换函数 transformFunc 作为参数。
函数内部创建了一个新数组 transformedArray，通过对输入数组 arr 的每个元素应用 transformFunc，将转换后的结果存储在新数组中，最后返回新数组。
我们通过调用 transformArray，传入一个数字数组 numbers 和一个将数字乘以 2 的转换函数 num => num * 2，得到一个新的数组 doubledNumbers，其中包含了每个原始数字的两倍。
<h3 id="higherOrdertopic-4">结束</h3>
高阶函数是JavaScript中一个非常强大的特性，它让开发者能够编写更加模块化、可复用且富有表现力的代码。
通过将函数视为一等公民，高阶函数允许我们抽象出常见的模式，创建可复用的构建块，并通过回调函数定制行为。
JavaScript 提供了多个内置的高阶函数，比如 map、filter 和 reduce，这些都是数组操作和转换中的宝贵工具。
此外，你还可以创建自己的高阶函数，封装特定的行为和模式，使代码更具可读性和可维护性。
<h2>onpagehide event</h2>
onpagehide event: 
navigates away from a webpage.
Execute JavaScript code when the user navigates away from the document.
The onpagehide event triggers in JavaScript when a user leaves the page and decides to move to another.

Some examples include age refresh, a link is clicked, etc.
the following code implement onpagehide event in JavaScript:
============
&lt;body onpagehide="newFunc()">
&lt;p>Close the page and see what happens!&lt;/p>
&lt;script>function newFunc() {alert("Thank you!");	}
&lt;/script>
&lt;/body>
============
jQuery pagehide Event
To trigger the event for all pages in jQuery Mobile:
$("document").on("pagehide",function(event){...})
To trigger the event for a specific page:
$("document").on("pagehide","page",function(event,data){...})
&lt;script>
$(document).on("pagehide","#pagetwo",function(){alert("pagetwo is now hidden");
});
&lt;/script>
============
detect browser support for pageShow and pageHide
if ('onpagehide' in window) {
//if(window.onpagehide || window.onpagehide === null){window.addEventListener('pagehide', exitFunction, false);
} else {window.addEventListener('unload', exitFunction, false);
}
<br>
<h2>addEventListener</h2>
Attach a click event to the document.

When the user clicks anywhere in the document:
document.addEventListener("click", function(){
document.getElementById("demo").innerHTML = "Hello World";
});
window.onload = addfunc;
document.getElementById('myBtn').onclick(){alert('hello');}
document.getElementById('myBtn').addEventListener("click", funcname,false);
document.getElementById('myBtn').attachEvent("onclick", funcname);
<br>
<h2>Template Literals</h2>
<a href="https://www.youtube.com/watch?v=NgF9-pdTDGs">JavaScript Template Literals</a>
<br>
<div id="Templateliteralstoc" class="toc"><a href="#Templateliteralstopic-0" target="_self">字符串插值</a><br><a href="#Templateliteralstopic-1" target="_self">多行文本</a><br><a href="#Templateliteralstopic-2" target="_self">嵌套模板</a><br><a href="#Templateliteralstopic-3" target="_self">带标签的模板</a><br><a href="#Templateliteralstopic-4" target="_self">Description</a><br><a href="#Templateliteralstopic-5" target="_self">Multi-line strings</a><br><a href="#Templateliteralstopic-6" target="_self">String interpolation</a><br><a href="#Templateliteralstopic-7" target="_self">Nesting templates</a><br><a href="#Templateliteralstopic-8" target="_self">Tagged templates</a><br><a href="#Templateliteralstopic-9" target="_self">Raw strings</a><br><a href="#Templateliteralstopic-10" target="_self">Tagged templates and escape sequences</a><br></div></center>
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals
<h3 id="Templateliteralstopic-0">字符串插值</h3>
JavaScript 中使用反引号 ` 包裹的字符串叫<pk>模板字符串</pk>（template literals）。
人们常用它拼接变量和字符串，即所谓的<pk>字符串插值</pk>（string interpolation）。
在使用字符串插值时，使用 ${} 包裹变量或表达式，它是变量的占位符。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA3tdQZarohm6XkpPMk7CoNtpQegaJvclmO8jCgP6gAlXV7UN4hSzP6h56gUYaCZvaH8S3ibsriaKIfQ/640" loading="lazy">
<h3 id="Templateliteralstopic-1">多行文本</h3>
模板字符串支持<pk>多行文本</pk>（multi-line strings）。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasS6uQT0335P10bBibpmtsBuhXQaGHAHLFxKBRicJOeGKObsj7FA9XRzJsg/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasSkgv2jjdFSic15Eol6SlQMs5Gwrgdv4ib23Apib9NjSqv7IersZZ0vmu9A/640" loading="lazy">
<h3 id="Templateliteralstopic-2">嵌套模板</h3>
它还支持<pk>嵌套模板</pk>（nesting templates）。
即在一个模板字符串的变量内，使用另一个模板字符串。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasSpEBGYd5XzKtbIpZLyv1WVFokw0Oy1I8v6azfOic9WeicQx03Ub1rfNow/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasSrOYTQXMYNxg2C8siahTG8hkNtqribtC8EnA3XXXhiaH4VGicDFTgL2EVJA/640" loading="lazy">
<h3 id="Templateliteralstopic-3">带标签的模板</h3>
它还有另外一个略显高级的用法：<pk>带标签的模板</pk>（tagged templates），有时也叫<pk>标签函数</pk>（tag function），指的都是一回事。
在带标签的模板中，标签其实是一个函数，它可以处理模板字符串的内容。
该函数的第一个参数是字符串数组，包括模板字符串的所有静态字符字面量，后面的不定参数，按照先后顺序分别对应 ${} 对应的变量。
函数返回值会当作模板字符串变量的最终值。
只要你想，返回值可以和入参完全无关。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasSRjIHriaBw1jhenL7R2eqMaBqtpjibLQvv3yX2kWlHh8nQ2ANnT67TXxw/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasS2wjlKu0HaBEXmPMj3lPfucCdepJiaQ2G06iaVeSasZK1E5iaNsmI87POw/640" loading="lazy">
标签函数属于<pk>可变参数函数</pk>（variadic functions），在 JavaScript 中可以使用三个点 ...
<pk>剩余参数</pk>（rest parameters）语法，将所有的变量收集到一个数组。
标签函数的返回值可以是任意类型，不一定是字符串。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasSKTG6k6x12bmd8v3kYGvjiaicR15Ueu6m1H6icmxFT4UBWETES0ia2sAOkQ/640" loading="lazy">
除了普通变量，带标签模板的“标签”还可以是表达式，只要它的<pk>操作符优先级大于 16</pk> 即可。
满足条件的表达式有<pk>属性访问</pk> x.y、<pk>函数调用</pk> x(y)、<pk>创建对象</pk> new x(y)，甚至<pk>另一个标签模板字面量</pk>。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasSkSiaQpC3GaAF95Kpy0qaSr7HABoBtYPcr6qoP7ET0gtH0ickaPlfjU0w/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasS9JbYkIJQARMOQ0UKqDsWLZqoPZBCibsorpPSQtvWW1k4vge6FwsM1iag/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA1jicIoRKop3ZnEjuVxogasSWXxvp6CJrQIAAYme1blwqnq4cicow9ozjmcDmG76uSibjSLnpCtEMd8Q/640" loading="lazy">
带标签模板的实际应用有哪些？
如果你接触过谷歌的 zx 命令行工具，或者谷歌的 Lit 框架（谷歌真喜欢用它），就会见到它的实际用法。
下图中的 $ 和 html 就是标签函数。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA3tdQZarohm6XkpPMk7CoNt7xw3F7xia2NZJFQ4ks1Nk19P9Sp8dSxfgzyyKEvQUo431iaEZiaxMJZDQ/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/rFnC9Zib9UA3tdQZarohm6XkpPMk7CoNt9TOqnyECW1ViaxZibTACrjicaZXtUBt4CibJH0yovAQhYQ8QhGhIhFPBEw/640" loading="lazy">
<pk>Template literals</pk> are literals delimited with backtick (`) characters, allowing for multi-line strings, string interpolation with embedded expressions, and special constructs called tagged templates.
Template literals are sometimes informally called <em>template strings</em>, because they are used most commonly for string interpolation (to create strings by doing substitution of placeholders).
However, a tagged template literal may not result in a string; it can be used with a custom tag function to perform whatever operations you want on the different parts of the template literal.
<h4>Syntax</h4>
`string text`
`string text line 1
string text line 2`
`string text ${expression} string text`
tagFunction`string text ${expression} string text`
<h4>Parameters</h4>
string text
The string text that will become part of the template literal.
Almost all characters are allowed literally, including line breaks and other whitespace characters.
However, invalid escape sequences will cause a syntax error, unless a tag function is used.
expression
An expression to be inserted in the current position, whose value is converted to a string or passed to tagFunction.
tagFunction
If specified, it will be called with the template strings array and substitution expressions, and the return value becomes the value of the template literal.
See tagged templates.
<h3 id="Templateliteralstopic-4">Description</h3>
Template literals are enclosed by backtick (`) characters instead of double or single quotes.
Along with having normal strings, template literals can also contain other parts called <em>placeholders</em>, which are embedded expressions delimited by a dollar sign and curly braces: ${expression}.
The strings and placeholders get passed to a function — either a default function, or a function you supply.
The default function (when you don't supply your own) just performs string interpolation to do substitution of the placeholders and then concatenate the parts into a single string.
To supply a function of your own, precede the template literal with a function name; the result is called a <pk>tagged template</pk>.
In that case, the template literal is passed to your tag function, where you can then perform whatever operations you want on the different parts of the template literal.
To escape a backtick in a template literal, put a backslash (\) before the backtick.
`\`` === "`"; // true
Dollar signs can be escaped as well to prevent interpolation.
`\${1}` === "${1}"; // true
<h3 id="Templateliteralstopic-5">Multi-line strings</h3>
Any newline characters inserted in the source are part of the template literal.
Using normal strings, you would have to use the following syntax in order to get multi-line strings:
console.log("string text line 1\n" + "string text line 2");
// "string text line 1
// string text line 2"
Using template literals, you can do the same with this:
console.log(`string text line 1
string text line 2`);
// "string text line 1
// string text line 2"
Like normal string literals, you can write a single-line string across multiple lines for source code readability, by escaping the newline with a backslash (\):
console.log(`string text line 1 \
string text line 2`);
// "string text line 1 string text line 2"
<h3 id="Templateliteralstopic-6">String interpolation</h3>
Without template literals, when you want to combine output from expressions with strings, you'd concatenate them using the addition operator +:
const a = 5;
const b = 10;
console.log("Fifteen is " + (a + b) + " and\nnot " + (2 * a + b) + ".");
// "Fifteen is 15 and
// not 20."
That can be hard to read – especially when you have multiple expressions.
With template literals, you can avoid the concatenation operator — and improve the readability of your code — by using placeholders of the form ${expression} to perform substitutions for embedded expressions:
const a = 5;
const b = 10;
console.log(`Fifteen is ${a + b} and
not ${2 * a + b}.`);
// "Fifteen is 15 and
// not 20."
Note that there's a mild difference between the two syntaxes.
Template literals coerce their expressions directly to strings, while addition coerces its operands to primitives first.
For more information, see the reference page for the + operator.
<h3 id="Templateliteralstopic-7">Nesting templates</h3>
In certain cases, nesting a template is the easiest (and perhaps more readable) way to have configurable strings.
Within a backtick-delimited template, it is simple to allow inner backticks by using them inside an ${expression} placeholder within the template.
For example, without template literals, if you wanted to return a certain value based on a particular condition, you could do something like the following:
let classes = "header";
classes += isLargeScreen()
? ""
: item.isCollapsed
? " icon-expander"
: " icon-collapser";
With a template literal but without nesting, you could do this:
const classes = `header ${
isLargeScreen() ? "" : item.isCollapsed ? "icon-expander" : "icon-collapser"
}`;
With nesting of template literals, you can do this:
const classes = `header ${
isLargeScreen() ? "" : `icon-${item.isCollapsed ? "expander" : "collapser"}`
}`;
<h3 id="Templateliteralstopic-8">Tagged templates</h3>
A more advanced form of template literals are <em>tagged</em> templates.
Tags allow you to parse template literals with a function.
The first argument of a tag function contains an array of string values.
The remaining arguments are related to the expressions.
The tag function can then perform whatever operations on these arguments you wish, and return the manipulated string.
(Alternatively, it can return something completely different, as described in one of the following examples.)
The name of the function used for the tag can be whatever you want.
const person = "Mike";
const age = 28;
function myTag(strings, personExp, ageExp) {
const str0 = strings[0]; // "That "
const str1 = strings[1]; // " is a "
const str2 = strings[2]; // "."
const ageStr = ageExp &lt; 100 ? "youngster" : "centenarian";
// We can even return a string built using a template literal
return `${str0}${personExp}${str1}${ageStr}${str2}`;
}
const output = myTag`That ${person} is a ${age}.`;
console.log(output);
// That Mike is a youngster.
The tag does not have to be a plain identifier.
You can use any expression with precedence greater than 16, which includes property access, function call, new expression, or even another tagged template literal.
console.log`Hello`; // [ 'Hello' ]
console.log.bind(1, 2)`Hello`; // 2 [ 'Hello' ]
new Function("console.log(arguments)")`Hello`; // [Arguments] { '0': [ 'Hello' ] }
function recursive(strings, ...values) {
console.log(strings, values);
return recursive;
}
recursive`Hello``World`;
// [ 'Hello' ] []
// [ 'World' ] []
While technically permitted by the syntax, <em>untagged</em> template literals are strings and will throw a TypeError when chained.
console.log(`Hello``World`); // TypeError: "Hello" is not a function
The only exception is optional chaining, which will throw a syntax error.
console.log?.`Hello`; // SyntaxError: Invalid tagged template on optional chain
console?.log`Hello`; // SyntaxError: Invalid tagged template on optional chain
Note that these two expressions are still parsable.
This means they would not be subject to automatic semicolon insertion, which will only insert semicolons to fix code that's otherwise unparsable.
// Still a syntax error
const a = console?.log
`Hello`
Tag functions don't even need to return a string!
function template(strings, ...keys) {
return (...values) => {
const dict = values[values.length - 1] || {};
const result = [strings[0]];
keys.forEach((key, i) => {
const value = Number.isInteger(key) ? values[key] : dict[key];
result.push(value, strings[i + 1]);
});
return result.join("");
};
}
const t1Closure = template`${0}${1}${0}!`;
// const t1Closure = template(["","","","!"],0,1,0);
t1Closure("Y", "A"); // "YAY!"
const t2Closure = template`${0} ${"foo"}!`;
// const t2Closure = template([""," ","!"],0,"foo");
t2Closure("Hello", { foo: "World" }); // "Hello World!"
const t3Closure = template`I'm ${"name"}.
I'm almost ${"age"} years old.`;
// const t3Closure = template(["I'm ", ".
I'm almost ", " years old."], "name", "age");
t3Closure("foo", { name: "MDN", age: 30 }); // "I'm MDN.
I'm almost 30 years old."
t3Closure({ name: "MDN", age: 30 }); // "I'm MDN.
I'm almost 30 years old."
The first argument received by the tag function is an array of strings.
For any template literal, its length is equal to the number of substitutions (occurrences of ${…}) plus one, and is therefore always non-empty.
For any particular tagged template literal expression, the tag function will always be called with the exact same literal array, no matter how many times the literal is evaluated.
const callHistory = [];
function tag(strings, ...values) {
callHistory.push(strings);
// Return a freshly made object
return {};
}
function evaluateLiteral() {
return tag`Hello, ${"world"}!`;
}
console.log(evaluateLiteral() === evaluateLiteral()); // false; each time `tag` is called, it returns a new object
console.log(callHistory[0] === callHistory[1]); // true; all evaluations of the same tagged literal would pass in the same strings array
This allows the tag to cache the result based on the identity of its first argument.
To further ensure the array value's stability, the first argument and its raw property are both frozen, so you can't mutate them in any way.
<h3 id="Templateliteralstopic-9">Raw strings</h3>
The special raw property, available on the first argument to the tag function, allows you to access the raw strings as they were entered, without processing escape sequences.
function tag(strings) {
console.log(strings.raw[0]);
}
tag`string text line 1 \n string text line 2`;
// Logs "string text line 1 \n string text line 2" ,
// including the two characters '\' and 'n'
In addition, the String.raw() method exists to create raw strings just like the default template function and string concatenation would create.
const str = String.raw`Hi\n${2 + 3}!`;
// "Hi\\n5!"
str.length;
// 6
Array.from(str).join(",");
// "H,i,\\,n,5,!"
String.raw functions like an "identity" tag if the literal doesn't contain any escape sequences.
In case you want an actual identity tag that always works as if the literal is untagged, you can make a custom function that passes the "cooked" (i.e.
escape sequences are processed) literal array to String.raw, pretending they are raw strings.
const identity = (strings, ...values) =>
String.raw({ raw: strings }, ...values);
console.log(identity`Hi\n${2 + 3}!`);
// Hi
// 5!
This is useful for many tools which give special treatment to literals tagged by a particular name.
const html = (strings, ...values) => String.raw({ raw: strings }, ...values);
// Some formatters will format this literal's content as HTML
const doc = html`&lt;!doctype html>
&lt;html lang="en-US">
&lt;head>
&lt;title>Hello&lt;/title>
&lt;/head>
&lt;body>
&lt;h1>Hello world!&lt;/h1>
&lt;/body>
&lt;/html>`;
<h3 id="Templateliteralstopic-10">Tagged templates and escape sequences</h3>
In normal template literals, the escape sequences in string literals are all allowed.
Any other non-well-formed escape sequence is a syntax error.
This includes:
\ followed by any decimal digit other than 0, or \0 followed by a decimal digit; for example \9 and \07 (which is a deprecated syntax)
\x followed by fewer than two hex digits (including none); for example \xz
\u not followed by { and followed by fewer than four hex digits (including none); for example \uz
\u{} enclosing an invalid Unicode code point — it contains a non-hex digit, or its value is greater than 10FFFF; for example \u{110000} and \u{z}
<pk>Note:</pk> \ followed by other characters, while they may be useless since nothing is escaped, are not syntax errors.
However, this is problematic for tagged templates, which, in addition to the "cooked" literal, also have access to the raw literals (escape sequences are preserved as-is).
Tagged templates enable the embedding of arbitrary string content, where escape sequences may follow a different syntax.
Consider for a simple example where we embed LaTeX source text in JavaScript via String.raw.
We want to still be able to use LaTeX macros that start with u or x without following JavaScript syntax restrictions.
Therefore, the syntax restriction of well-formed escape sequences is removed from tagged templates.
The example below uses MathJax to render LaTeX in one element:
const node = document.getElementById("formula");
MathJax.typesetClear([node]);
// Throws in older ECMAScript versions (ES2016 and earlier)
// SyntaxError: malformed Unicode character escape sequence
node.textContent = String.raw`$\underline{u}$`;
MathJax.typesetPromise([node]);
However, illegal escape sequences must still be represented in the "cooked" representation.
They will show up as undefined element in the "cooked" array:
function log(str) {
console.log("Cooked:", str[0]);
console.log("Raw:", str.raw[0]);
}
log`\unicode`;
// Cooked: undefined
// Raw: \unicode
Note that the escape-sequence restriction is only dropped from <em>tagged</em> templates, but not from <em>untagged</em> template literals:
const bad = `bad escape sequence: \unicode`;
<h2>console.log variable using ES6 back tick</h2>
console.log("story " + name + " story");
When using ES6:
let name = prompt("what is your name?");
console.log(`story ${name} story`);
Template literals can be used to represent multi-line strings and may use "interpolation" to insert variables:
var a = 123, str = `---
a is: ${a}
---`;
console.log(str);
Output:
---
a is: 123
---
What is more important, they can contain not just a variable name, but any JavaScript expression:
var a = 3, b = 3.1415;
console.log(`PI is nearly ${Math.max(a, b)}`);
<h2>Scroll Load Dynamic Content</h2>
<br>
<br>
<h2>Infinite Scroll</h2>
<a href="https://www.sitepoint.com/jquery-infinite-scrolling-demos/">Jquery Infinite Scrolling</a>
.

<a href="https://infinite-scroll.com/api.html">Infinite Scroll Methods</a>
.

<a href="https://dotblogs.com.tw/brooke/2017/08/23/035838">Infinite Scroll.js的使用</a>
<br>
<a href="https://infinite-scroll.com/">infinite scroll.com</a>
.

<a href="https://stackoverflow.com/questions/15181286/how-to-implement-an-endless-infinite-scroll-within-a-div-in-javascript-jquery">javascript infinite scroll</a>
<br>
<a href="https://stackoverflow.com/questions/14035180/jquery-load-more-data-on-scroll">jQuery load more data on scroll</a>
<br>
<a href="http://jsfiddle.net/brynner/QDttv/">Load more results after scroll to end of list</a>
<br>
<a href="https://www.jqueryscript.net/loading/Automatic-Load-More-Plugin-jQuery-ev-scroll-loader.html">Automatic Load More Plugin For jQuery</a>
<br>
<h2>Use children() and each() to loop</h2>
Use children() and each(), you can optionally pass a selector to children
children() is a loop in itself.
$('div').children('input').each(function () {
alert(this.value);
});
<h2>$(this) to loop</h2>
Examples of jQuery Selectors
$("*")	Selects all elements	
$(this)	Selects the current HTML element	
$("p.intro")
$("p:first")
$("ul li:first")
$("ul li:first-child")
$("[href]")	Selects all elements with an href attribute	
$("a[target='_blank']")equal to "_blank"	
$("a[target!='_blank']")	NOT equal to "_blank"	
$(":button")
$("tr:even")
$("tr:odd")
$( "li.item-ii" ).find( "li" ).css( "background-color", "red" );
$( "p" ).find( "span" ).css( "color", "red" );
$('.pizza-maker').find('.cheese').find('a').addClass('cheese-style')
.children('.cheese') was called on and stopped there.
jquery $(this)id
jquery $(this).val()
jquery $(this).find
jquery $(this).next
jquery $(this).attr
jquery $(this).index
jquery $(this).text()
jquery $(this).children
jquery $(this).attr("id")
jquery $(this).css
jquery $(this).on()
jquery $(this).is()
jquery $(this).get()
jquery $(this).parents()
.children()
var kids = $( event.target ).children();
var len = kids.addClass( "hilite" ).length;
$( "#results span:first" ).text( len );
$( "#results span:last" ).text( event.target.
.not()
.index()
$( "div" ).click(function() {
var index = $( "div" ).index( this );
$( "span" ).text( "That was div index #" + index );
:first-child Selector
.filter()
$( "li" ) .filter(function( index ) {
return $( "strong", this ).length === 1;
}) .css( "background-color", "red" );
.siblings()
:visible Selector
.val()
"select#foo" ).val();
$( "input[type=checkbox][name=bar]:checked" ).val();
.one()
var index = $( "div" ).index( this );
$( this ).css({borderStyle: "inset",cursor: "auto"});
$( "p" ).text( "Div at index #" + index + " clicked." + " That's " + (++n) + " total ...
.prev()
$(this.htmltable + ' th[data-field]').each(function(i, col){
this.dbcolumns.push( $(col).attr('data-field') );
}.bind(this));
$(".myCheckboxes").change(function(){ 
if(this.checked){alert("checked");}
});
$(".class").each(function(){
var HTMLElement = this;
//the current HTML element is passed to the jQuery constructor
//the jQuery API is exposed here (such as .html() and .append())
var jQueryObject = $(this);
});
$('.somediv').click(function(){
$(this).addClass('newDiv');
});
$('.multiple-elements').each(
function(index, element) {
$(this).css('background-color', $(this).data('bgcol'));
}
);
&lt;a href="#" onclick="$(this).css('display', 'none')">Hide me!</a>
<br>
<h2>$(this) nested loop</h2>
$('li').each(function(){
var $this = $(this);
$this.children("li").each(function(){
$this; // parent li
this; // child li
});
});
$('li').children("li").each(function(){
var $this = $(this);
});
$('.pizza-maker').find('.cheese').find('a').addClass('cheese-style')
.children('.cheese') was called on and stopped there.
<h2>todo-list-indexeddb</h2>
<a href="../js/todo-list-indexeddb/index.html">todo-list-indexeddb</a>
<br>
<br>
<h2>stars</h2>
<a href="../js/stars/index.html">stars</a>
<h2>Learn Node.js</h2>
<a href="https://www.youtube.com/watch?time_continue=1&v=RLtyhwFtXQA">Learn Node.js - Full Tutorial for Beginners</a>
<br>
<h2>scroll-behavior</h2>
html { scroll-behavior: smooth;}
$(document).ready(function(){
$('body,html').animate({scrollTop: 156}, 800); 
});
156 - position scroll to (px), from top of page.
800 - scroll duration (ms)
scroll to bottom
$(document).ready(function(){
$('body,html').animate({scrollTop:$(document).height()}, 800000); 
});
scroll to a div
$(document).ready(function(){
$('body,html').animate({scrollTop: $('#toc').get(0).scrollHeight}, 630000); 
});
$('html, body').animate({
scrollTop: $('idName').offset().top-100
}, timelength);
<a href="https://codepen.io/JTParrett/pen/BkDie">jQuery different scroll speeds</a>
<br>
<h2>Quiz Online Test</h2>
<a href="http://www.developphp.com/video/JavaScript/">Many JavaScript Samples</a>
<a href="http://www.developphp.com/video/JavaScript/Exam-Application-Programming-Tutorial-Quiz-Online-Test">Quiz Online Test</a>
<h2>Date Time Countdown Tutorial</h2>
<a href="http://www.developphp.com/video/JavaScript/Date-Time-Countdown-Tutorial-Christmas-2012-Doomsday">Date Time Countdown Tutorial</a>
<br>
<br>
<h2>JavaScript Client-side web scraping</h2>
<a href="JavaScript Client-side web scraping.html">JavaScript Client-side web scraping</a>
<br>
<h2>keycodes</h2>
<a href="https://css-tricks.com/snippets/javascript/javascript-keycodes/">keycodes</a>
<br>
<h2>For…of Loop In JavaScript</h2>
<a href="For…of Loop In JavaScript.html">For…of Loop In JavaScript</a>
<br>
<h2>higher order function</h2>
A higher order function is a function that takes a function as an argument, or returns a function.

Higher order function is in contrast to first order functions, which don’t take a function as an argument or return a function as output.
examples of .map() and .filter().

Both of them take a function as an argument.

They're both higher order functions.
Example 1#
Let’s say we have an array of numbers and we want to create a new array which contains double of each value of the first array.

Let’s see how we can solve the problem with and without Higher-Order Function.
Without Higher-order function
const arr1 = [1, 2, 3];
const arr2 = [];
for(let i = 0; i < arr1.length; i++) {
arr2.push(arr1[i] * 2);
}
// prints [ 2, 4, 6 ]
console.log(arr2);
With Higher-order function map
const arr1 = [1, 2, 3];
const arr2 = arr1.map(function(item) {
return item * 2;
});
console.log(arr2);
We can make this even shorter using the arrow function syntax:
const arr1 = [1, 2, 3];
const arr2 = arr1.map(item => item * 2);
console.log(arr2);
Example 2#
Let’s say we have an array containing the birth year of different persons and we want to create an array that contains their ages.

For example:
Without Higher-order function
const birthYear = [1975, 1997, 2002, 1995, 1985];
const ages = [];
for(let i = 0; i < birthYear.length; i++) {
let age = 2018 - birthYear[i];
ages.push(age);
}
// prints [ 43, 21, 16, 23, 33 ]
console.log(ages);
With Higher-order function map
const birthYear = [1975, 1997, 2002, 1995, 1985];
const ages = birthYear.map(year => 2018 - year);
// prints [ 43, 21, 16, 23, 33 ]
console.log(ages);
<br>
Example
var sum = function(n1, n2) {//This is just a function
return n1 + n2;
};
sum(1,2);//3
function makeSumN(n) {//This is a higher-order function
return function(p) {
sum(n, p)
}
}
var sum1 = makeSumN(1);
sum1(2); //3
function makeMoreThanSum(f) {//This is a higher-order function
return function(n1, n2) {
sum(f(n1), n2)
}
}
var sumSquareOfFirst = makeMoreThanSum(function(n){
return n*n;
});
sumSquareOfFirst(2,1);//5
Example
function createMultiplier(multiplier){return function(x){	return x * multiplier}
}
let doubleme = createMultiplier(2)
let tripleme = createMultiplier(3)
let quadrupleme = createMultiplier(4)
console.log(doubleme(5))
console.log(tripleme(3))
console.log(quadrupleme(7))
<br>
<h2>蒙版</h2>
<a href="https://segmentfault.com/a/1190000017892644">蒙版弹幕 Barrage UI</a>
<a href="https://segmentfault.com/a/1190000017954676">纯客户端 实时 蒙版 弹幕</a>
<br>
<h2>run HTA</h2>
CMDTail='\");close();'
LAmtNotice="BigVol!"  # popup message
LF = "\\n"
onecode = '0030'
codename = "abcde"
curPrice = "31.5"
AlertMsg=paste0(
'mshta javascript:alert(&lt;meta http-equiv="x-ua-compatible" content="ie=edge" />\"',"Alarm!!",LF, '&lt;br>&lt;br>&lt;br>',
onecode,LF ,codename, LF,"Price ",curPrice, LF, 
format(Sys.time(), "%H:%M:%OS"),LF, 
CMDTail)
system(AlertMsg, invisible=T, wait=F)
Usually, HTML5 doesn't work in HTA files because they are run by mshta.exe which acts like IE7 and HTML5 isn't supported in earlier versions of IE than IE9.

But if you add &lt;meta http-equiv="x-ua-compatible" content="ie=edge" /> in the head of the HTA, the HTA will act like the version of IE installed on the computer, so if the computer has IE9 or later and you add that tag, it will work.

The problem with this is that if you upgrade the HTA, the &lt;hta:application/> tag won't have any effect so you will lose all effects like icons, window properties, etc.

For this reason, I prefer to not upgrade the HTA and to use workarounds instead of HTML5.
In HTA, to get the code to properly work, you must include the tag 
&lt;meta http-equiv="x-ua-compatible" content="ie=edge" /> or 
&lt;meta http-equiv="x-ua-compatible" content="ie=9">to get the JavaScript and HTML 5 to work completely.

You may add
&lt;HTA:APPLICATION
APPLICATIONNAME="HTA"
ID="HTA"
VERSION="1.0"
MAXIMIZEBUTTON="no"/>
<a href="http://blog.sevagas.com/?Hacking-around-HTA-files">Hacking around HTA files</a>
<a href="https://stackoverflow.com/questions/35181278/does-html5-work-in-a-hta-file">HTML5 work in a .hta file</a>
<a href="https://www.htmlgoodies.com/beyond/reference/article.php/3472841/HTML-Applications.htm">HTML Applications</a>
<h2>九种跨域方式实现原理</h2>
<a href="九种跨域方式实现原理.html" class="red">九种跨域方式实现原理</a>
<h2>parse Excel file</h2>
<a href="https://stackoverflow.com/questions/8238407/how-to-parse-excel-file-in-javascript-html5">parse Excel file in Javascript/HTML5</a>
<br>
<a href="https://stackoverflow.com/questions/28782074/excel-to-json-javascript-code">Excel to JSON javascript code</a>
<br>
<a href="http://codetheory.in/parse-read-excel-files-xls-xlsx-javascript/">Parse and Read Excel Files (xls/xlsx) With JavaScript</a>
<br>
<a href="https://redstapler.co/sheetjs-tutorial-convert-excel-html-table/">SheetJS Tutorial – Convert Excel to HTML Table</a>
<br>
<br>
<h2>Multiple setIntervals running at once</h2>
In JS you can't.

To have multiple functions in the same program execute at the same time you need multi-threading and some deep timing and thread handling skills.

JavaScript is single threaded.

Can use html5 web worker or try using setTimeout recursively.

Create multiple functions following this example:
var interval = setTimeout(appendDateToBody, 5000);
function appendDateToBody() {
document.body.appendChild(
document.createTextNode(new Date() + " "));
interval = setTimeout(appendDateToBody, 5000);
}
<br>
<h2>add the crossorigin tag to a dynamically loaded script</h2>
<a href="https://stackoverflow.com/questions/28901166/how-do-i-add-the-crossorigin-tag-to-a-dynamically-loaded-script">add the crossorigin tag to a dynamically loaded script</a>
<br>
<br>
<h2>link in alert boxes javascript</h2>
<a href="https://stackoverflow.com/questions/16973240/link in alert boxes javascript">link in alert boxes javascript</a>
alert function can only display text
// use window.confirm instead of alert
if (window.confirm('click "ok" to redirect.

Cancel to stay ')) 
{ window.location.href='http://www.google.com'; };
if (window.confirm('Ok to Confirm, Cancel to Stay here'))
{ window.open('http://www.google.com', '_blank'); };
<h2>Javascript Formatting numbers with commas</h2>
var number = 12345.543;
number.toLocaleString();"12,345.543"<br>
<br>
<h2>To create a global variable</h2>
To create a global variable, just omit 'var' from the statement.

When you omit 'var', you're actually creating the variable in the window namespace.
So, zz = 1 is actually window.zz = 1
A global variable has global scope which means it can be defined anywhere in your JavaScript code.
Variables declared within a JavaScript function, become LOCAL to the function.
A variable declared outside a function, becomes GLOBAL.
<h2>jQuery $.ajax()</h2>
Some of jQuery's most used Ajax shorthand methods: <k>$.get()</k>, <k>$.post()</k>, and <k>$.load()</k>.

They are convenient methods for making Ajax requests in a few lines of code.</strong><br>
Sometimes, we need more control over the Ajax calls we want to make.

For example, we want to specify what should happen in case an Ajax call fails or we need to perform an Ajax request but its result is only needed if retrieved within a certain amount of time.

In such situations, we can rely on another function provided by jQuery, called <k>$.ajax()</k>, that is the topic of this tutorial.<br>
<h2>The <k>$.ajax()</k> Function</h2>
The jQuery  function is used to perform an asynchronous HTTP request.

It was added to the library a long time ago, existing since version 1.0.

The <k>$.ajax()</k> function is what every function discussed in the previously mentioned article calls behind the scene using a preset configuration.

The signatures of this function are shown below:<br>
<k>$.ajax(url[, options])
$.ajax([options])</k>
The <k>url</k> parameter is a string containing the URL you want to reach with the Ajax call, while <k>options</k> is an object literal containing the configuration for the Ajax request.<br>
In its first form, this function performs an Ajax request using the <k>url</k> parameter and the options specified in <k>options</k>.

In the second form, the URL is specified in the <k>options</k> parameter, or can be omitted in which case the request is made to the current page.<br>
The list of the options accepted by this function, described in the next section, is very long.

So, I'll keep their description short.

In case you want to study in-depth their meaning, you can refer to .<br>
<h3>The <k>option</k> Parameter</h3>
There are a lot of different options you can specify to bend <k>$.ajax()</k> to your need.

In the list below you can find their names and their description sorted in alphabetic order:<br>
<k>accepts</k>: The content type sent in the request header that tells the server what kind of response it will accept in return<br>
<k>async</k>: Set this options to <k>false</k> to perform a synchronous request<br>
<k>beforeSend</k>: A pre-request callback function that can be used to modify the <k>jqXHR</k> object before it is sent<br>
<k>cache</k>: Set this options to <k>false</k> to force requested pages not to be cached by the browser<br>
<k>complete</k>: A function to be called when the request finishes (after <k>success</k> and <k>error</k> callbacks are executed)<br>
<k>contents</k>: An object that determines how the library will parse the response<br>
<k>contentType</k>: The content type of the data sent to the server<br>
<k>context</k>: An object to use as the context (<k>this</k>) of all Ajax-related callbacks<br>
<k>converters</k>: An object containing dataType-to-dataType converters<br>
<k>crossDomain</k>: Set this property to <k>true</k> to force a cross-domain request (such as JSONP) on the same domain<br>
<k>data</k>: The data to send to the server when performing the Ajax request<br>
<k>dataFilter</k>: A function to be used to handle the raw response data of XMLHttpRequest<br>
<k>dataType</k>: The type of data expected back from the server<br>
<k>error</k>: A function to be called if the request fails<br>
<k>global</k>: Whether to trigger global Ajax event handlers for this request<br>
<k>headers</k>: An object of additional headers to send to the server<br>
<k>ifModified</k>: Set this option to <k>true</k> if you want to force the request to be successful only if the response has changed since the last request<br>
<k>isLocal</k>: Set this option to <k>true</k> if you want to force jQuery to recognize the current environment as "local"<br>
<k>jsonp</k>: A string to override the callback function name in a JSONP request<br>
<k>jsonpCallback</k>: Specifies the callback function name for a JSONP request<br>
<k>mimeType</k>: A string that specifies the mime type to override the XHR mime type<br>
<k>password</k>: A password to be used with XMLHttpRequest in response to an HTTP access authentication request<br>
<k>processData </k>: Set this option to <k>false</k> if you don't want that the data passed in to the <k>data</k> option (if not a string already) will be processed and transformed into a query string<br>
<k>scriptCharset</k>: Sets the charset attribute on the script tag used in the request but only applies when the "script" transport is used<br>
<k>statusCode</k>: An object of numeric HTTP codes and functions to be called when the response has the corresponding code<br>
<k>success</k>: A function to be called if the request succeeds<br>
<k>timeout</k>: A number that specifies a timeout (in milliseconds) for the request<br>
<k>traditional</k>: Set this to <k>true</k> if you wish to use the traditional style of param serialization<br>
<k>type</k>: The type of request to make, which can be either "POST" or "GET"<br>
<k>url</k>: A string containing the URL to which the request is sent<br>
<k>username</k>: A username to be used with XMLHttpRequest in response to an HTTP access authentication request<br>
<k>xhr</k>: A callback for creating the XMLHttpRequest object<br>
<k>xhrFields</k>: An object to set on the native XHR object<br>
That was pretty long, isn't it? Well, as developers you probably have stopped reading this list at the fifth or sixth element I guess, but that's fine.

The next section will be more exciting because we'll put the <k>$.ajax()</k> function and some of these options into action.<br>
<br>
<h2>$.ajax</h2>
No 'Access-Control-Allow-Origin' header is present on the requested resource.
make a http request using CORS with jquery:
============
$.ajax({
url: theurl,
// This is the important part
xhrFields: {withCredentials: true},
// This is the important part
data: data,
success: function (response) {
// handle the response
},
error: function (xhr, status) {
// handle errors
}
});
============
$.ajax({
url: "http://localhost:8079/students/add/",
type: "POST",
crossDomain: true,
data: JSON.stringify(somejson),
dataType: "json",
success: function (response) {
var resp = JSON.parse(response)
alert(resp.status);
},
error: function (xhr, status) {
alert("error");
}
});
============
var settings = {
'cache': false,
// 'dataType': "jsonp",
"async": true,
"crossDomain": true,
"url": theurl,
"method": "GET",
"headers": {
"accept": "application/json",
"Access-Control-Allow-Origin":"*"
}
}
$.ajax(settings).done(function (response) {console.log(response);});
$.ajax(theurl,
{success: function (data) {$('body').append(data);}
});
============
var bodycontent = $('body');
$.ajax({
url: theurl,
xhrFields: {withCredentials: true},
crossDomain: true,
success: function(rawData){
body.append(rawData);;
}});
============
<a href="https://openhome.cc/Gossip/JavaScript/JSONP.html">使用 JSONP 跨站請求</a>
<br>
<a href="https://www.w3schools.com/js/js_json_jsonp.asp">Creating a Dynamic Script Tag and Request With a Callback Function</a>
<br>
&lt;script>
function clickButton() {
var s = document.createElement("script");
s.src = "demo_jsonp.php";
document.body.appendChild(s);
}
function clickButton() {
var s = document.createElement("script");
s.src = "jsonp_demo_db.php?callback=myDisplayFunction";
document.body.appendChild(s);
}
透過 jsonp 的方法所傳送的 URL 當中，結尾都會帶一個問號 (?)，
這個問號會在取得 server 回傳值的時候，自動轉換成 call function 的 function name，而如果是一個匿名函式，則會轉換成一個帶有 time stamp 的函式名稱。
當傳輸完成後，client 會自動執行 Server 回傳的 callback function，取得結果。
function foo(data)
{
// do stuff with JSON
}
var script = document.createElement('script');
script.src = '//example.com/path/to/jsonp?callback=foo'
document.getElementsByTagName('head')[0].appendChild(script);
// or document.head.appendChild(script) in modern browsers
<h2>Minify Javascript</h2>
<a href="https://jscompress.com/">JSCompress</a>
<a href="https://www.minifier.org/">Minify Javascript Or Css Code</a>
<a href="https://stackoverflow.com/questions/1737388/how-to-minify-javascript-code">how to minify javascript code</a>
<a href="http://www.crockford.com/javascript/jsmin.html">The JavaScript Minifier JSMin</a>
jsmin &lt;fulljslint.js >jslint.js "(c)2002 Douglas Crockford"
<h2>createElement("INPUT")</h2>
function myFunction() {
var x = document.createElement("INPUT");
x.setAttribute("type", "radio");
document.body.appendChild(x);
}
<h2>window.event, KeyboardEvent keyCode, which</h2>
function KeyPress(e){var keynum;if(window.event){keynum=e.keyCode;}else if(e.which){keynum=e.which;}if(keynum==13)sendme('oLGK__e.html',1);
}
window.event:
<a href="https://www.w3schools.com/tags/ref_eventattributes.asp">Window Event Attributes</a>
keyCode:
<a href="https://www.w3schools.com/jsref/event_key_keycode.asp">KeyboardEvent keyCode Property</a>
<br>
KeyboardEvent which:
<a href="https://www.w3schools.com/jsref/event_key_which.asp">KeyboardEvent which Property</a>
<br>
<h2>conditional operator ? :</h2>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">conditional operator</a>
https://stackoverflow.com/questions/6259982/how-do-you-use-the-conditional-operator-in-javascript
? : (conditional) operator in JavaScript
The conditional operator is the only JavaScript operator that takes three operands.

This operator is frequently used as a shortcut for the if statement.
JavaScript Demo: 
Expressions - Conditional operator
function getFee(isMember) {
return (isMember ? "$2.00" : "$10.00");
}
function zeroFill(num) {
return num < 10 ? '0' + num : num;
}
<h2><pk>Async, Await</pk></h2>
<a href="Async,Await by Example.html">Async,Await by Example</a>
<a href="https://javascript.info/async-await">javascript-async-await</a>
<a href="https://wcc723.github.io/javascript/2017/12/30/javascript-async-await/">async-await</a>
<a href="https://wcc723.github.io/javascript/2017/12/29/javascript-proimse/">proimse</a>
<a href="https://hackernoon.com/understanding-promises-in-javascript-13d99df067c1">Understanding promises in JavaScript</a>
<a href="https://spring.io/understanding/javascript-promises">javascript-promises</a>
<a href="https://scotch.io/tutorials/javascript-promises-for-dummies">JavaScript Promises for Dummies</a>
<a href="https://javascript.info/promise-basics">promise-basics</a>
A “producing code” that does something and takes time.

For instance, the code loads a remote script.

A “consuming code” that wants the result of the “producing code” once it’s ready.

A promise is a special JavaScript object that links the “producing code” and the “consuming code” together.

<a href="https://www.youtube.com/watch?v=_9vgd9XKlDQ&ab_channel=DerrickSherrillDerrickSherrill" class="whitebut ">Tips For Using Async/Await in JavaScript</a>
<a href="https://www.w3schools.com/js/js_async.asp" class="whitebut ">JavaScript Async</a>
JavaScript Async
"async and await make promises easier to write"
async makes a function return a Promise
await makes a function wait for a Promise
Async Syntax
The keyword async before a function makes the function return a promise:
Example
async function myFunction() {
return "Hello";
}
Example
async function myFunction() {
return "Hello";
}
myFunction().then(
function(value) {myDisplayer(value);}
);
Await Syntax
The keyword await before a function makes the function wait for a promise:
let value = await promise;
The await keyword can only be used inside an async function.
Example
Let's go slowly and learn how to use it.
Basic Syntax
async function myDisplay() {
let myPromise = new Promise(function(myResolve, myReject) {
myResolve("I love You !!");
});
document.getElementById("demo").innerHTML = await myPromise;
}
myDisplay();
Waiting for a Timeout
async function myDisplay() {
let myPromise = new Promise(function(myResolve, myReject) {
setTimeout(function() { myResolve("I love You !!"); }, 3000);
});
document.getElementById("demo").innerHTML = await myPromise;
}
myDisplay();
Waiting for a File
async function getFile() {
let myPromise = new Promise(function(myResolve, myReject) {
let req = new XML<a href="HttpRequest();" class="whitebut ">    req.open('GET', "mycar.html");</a>
req.onload = function() {
if (req.status == 200) {myResolve(req.response);}
else {myResolve("File not Found");}
};
req.send();
});
document.getElementById("demo").innerHTML = await myPromise;
}
getFile();
<a href="https://javascript.info/async-await" class="whitebut ">Async/await</a>
Async/await
There’s a special syntax to work with promises in a more comfortable fashion, called “async/await”.
It’s surprisingly easy to understand and use.
Async functions
Let’s start with the async keyword.
It can be placed before a function, like this:
async function f() {
return 1;
}
The word “async” before a function means one simple thing: a function always returns a promise.
Other values are wrapped in a resolved promise automatically.
For instance, this function returns a resolved promise with the result of 1; let’s test it:
async function f() {
return 1;
}
f().then(alert); // 1
…We could explicitly return a promise, which would be the same:
async function f() {
return Promise.resolve(1);
}
f().then(alert); // 1
So, async ensures that the function returns a promise, and wraps non-promises in it.
Simple enough, right? But not only that.
There’s another keyword, await, that works only inside async functions, and it’s pretty cool.
Await
The syntax:
// works only inside async functions
let value = await promise;
The keyword await makes JavaScript wait until that promise settles and returns its result.
Here’s an example with a promise that resolves in 1 second:
async function f() {
let promise = new Promise((resolve, reject) => {
setTimeout(() => resolve("done!"), 1000)
});
let result = await promise; // wait until the promise resolves (*)
alert(result); // "done!"
}
f();
The function execution “pauses” at the line (*) and resumes when the promise settles, with result becoming its result.
So the code above shows “done!” in one second.
Let’s emphasize: await literally suspends the function execution until the promise settles, and then resumes it with the promise result.
That doesn’t cost any CPU resources, because the JavaScript engine can do other jobs in the meantime: execute other scripts, handle events, etc.
It’s just a more elegant syntax of getting the promise result than promise.then.
And, it’s easier to read and write.
Can’t use await in regular functions
If we try to use await in a non-async function, there would be a syntax error:
function f() {
let promise = Promise.resolve(1);
let result = await promise; // Syntax error
}
We may get this error if we forget to put async before a function.
As stated earlier, await only works inside an async function.
Let’s take the showAvatar() example from the chapter Promises chaining and rewrite it using async/await:
We’ll need to replace .then calls with await.
Also we should make the function async for them to work.
async function showAvatar() {
// read our JSON
let response = await fetch('/article/promise-chaining/user.json');
let user = await response.json();
// read github user
let githubResponse = await fetch(`<a href="https://api.github.com/users/${user.name}`);" class="whitebut ">  let githubUser = await githubResponse.json();</a>
// show the avatar
let img = document.createElement('img');
img.src = githubUser.avatar_url;
img.className = "promise-avatar-example";
document.body.append(img);
// wait 3 seconds
await new Promise((resolve, reject) => setTimeout(resolve, 3000));
img.remove();
return githubUser;
}
showAvatar();
Pretty clean and easy to read, right? Much better than before.
await won’t work in the top-level code
People who are just starting to use await tend to forget the fact that we can’t use await in top-level code.
For example, this will not work:
// syntax error in top-level code
let response = await fetch('/article/promise-chaining/user.json');
let user = await response.json();
But we can wrap it into an anonymous async function, like this:
(async () => {
let response = await fetch('/article/promise-chaining/user.json');
let user = await response.json();
...
})();
P.S.
New feature: starting from V8 engine version 8.9+, top-level await works in modules.
await accepts “thenables”
Like promise.then, await allows us to use thenable objects (those with a callable then method).
The idea is that a third-party object may not be a promise, but promise-compatible: if it supports .then, that’s enough to use it with await.
Here’s a demo Thenable class; the await below accepts its instances:
class Thenable {
constructor(num) {
this.num = num;
}
then(resolve, reject) {
alert(resolve);
// resolve with this.num*2 after 1000ms
setTimeout(() => resolve(this.num * 2), 1000); // (*)
}
}
async function f() {
// waits for 1 second, then result becomes 2
let result = await new Thenable(1);
alert(result);
}
f();
If await gets a non-promise object with .then, it calls that method providing the built-in functions resolve and reject as arguments (just as it does for a regular Promise executor).
Then await waits until one of them is called (in the example above it happens in the line (*)) and then proceeds with the result.
Async class methods
To declare an async class method, just prepend it with async:
class Waiter {
async wait() {
return await Promise.resolve(1);
}
}
new Waiter()
.wait()
.then(alert); // 1 (this is the same as (result => alert(result)))
The meaning is the same: it ensures that the returned value is a promise and enables await.
Error handling
If a promise resolves normally, then await promise returns the result.
But in the case of a rejection, it throws the error, just as if there were a throw statement at that line.
This code:
async function f() {
await Promise.reject(new Error("Whoops!"));
}
…is the same as this:
async function f() {
throw new Error("Whoops!");
}
In real situations, the promise may take some time before it rejects.
In that case there will be a delay before await throws an error.
We can catch that error using try..catch, the same way as a regular throw:
async function f() {
try {
let response = await fetch('<a href="http://no-such-url');" class="whitebut ">  } catch(err) {</a>
alert(err); // TypeError: failed to fetch
}
}
f();
In the case of an error, the control jumps to the catch block.
We can also wrap multiple lines:
async function f() {
try {
let response = await fetch('/no-user-here');
let user = await response.json();
} catch(err) {
// catches errors both in fetch and response.json
alert(err);
}
}
f();
If we don’t have try..catch, then the promise generated by the call of the async function f() becomes rejected.
We can append .catch to handle it:
async function f() {
let response = await fetch('<a href="http://no-such-url');" class="whitebut ">}</a>
// f() becomes a rejected promise
f().catch(alert); // TypeError: failed to fetch // (*)
If we forget to add .catch there, then we get an unhandled promise error (viewable in the console).
We can catch such errors using a global unhandledrejection event handler as described in the chapter Error handling with promises.
async/await and promise.then/catch
When we use async/await, we rarely need .then, because await handles the waiting for us.
And we can use a regular try..catch instead of .catch.
That’s usually (but not always) more convenient.
But at the top level of the code, when we’re outside any async function, we’re syntactically unable to use await, so it’s a normal practice to add .then/catch to handle the final result or falling-through error, like in the line (*) of the example above.
async/await works well with Promise.all
When we need to wait for multiple promises, we can wrap them in Promise.all and then await:
// wait for the array of results
let results = await Promise.all([
fetch(url1),
fetch(url2),
...
]);
In the case of an error, it propagates as usual, from the failed promise to Promise.all, and then becomes an exception that we can catch using try..catch around the call.

Summary
The async keyword before a function has two effects:
Makes it always return a promise.
Allows await to be used in it.

The await keyword before a promise makes JavaScript wait until that promise settles, and then:
If it’s an error, the exception is generated — same as if throw error were called at that very place.
Otherwise, it returns the result.

Together they provide a great framework to write asynchronous code that is easy to both read and write.
With async/await we rarely need to write promise.then/catch, but we still shouldn’t forget that they are based on promises, because sometimes (e.g.
in the outermost scope) we have to use these methods.
Also Promise.all is nice when we are waiting for many tasks simultaneously.

Tasks
Rewrite using async/await
Rewrite this example code from the chapter Promises chaining using async/await instead of .then/catch:

function loadJson(url) {
  return fetch(url)
    .then(response => {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new Error(response.status);
      }
    });
}

loadJson('no-such-user.json')
  .catch(alert); // Error: 404

solution
Rewrite "rethrow" with async/await
Below you can find the “rethrow” example.
Rewrite it using async/await instead of .then/catch.
And get rid of the recursion in favour of a loop in demoGithubUser:
with async/await that becomes easy to do.

class <a href="HttpError extends Error {" class="whitebut ">
constructor(response) {</a>
super(`${response.status} for ${response.url}`);
    this.name = '<a href="HttpError';" class="whitebut ">
    this.response = response;</a>
  }
}

function loadJson(url) {
  return fetch(url)
    .then(response => {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new <a href="HttpError(response);" class="whitebut ">      }</a>
    });
}
// Ask for a user name until github returns a valid user
function demoGithubUser() {
let name = prompt("Enter a name?", "iliakan");
return loadJson(`<a href="https://api.github.com/users/${name}`)" class="whitebut ">    .then(user => {</a>
alert(`Full name: ${user.name}.`);
return user;
})
.catch(err => {
if (err instanceof <a href="HttpError && err.response.status == 404) {" class="whitebut ">        alert("No such user, please reenter.");</a>
return demoGithubUser();
} else {
throw err;
}
});
}
demoGithubUser();
solution
Call async from non-async
We have a “regular” function called f.
How can you call the async function wait() and use its result inside of f?
async function wait() {
await new Promise(resolve => setTimeout(resolve, 1000));
return 10;
}

function f() {
// ...what should you write here?
// we need to call async wait() and wait to get 10
// remember, we can't use "await"
}
P.S.
The task is technically very simple, but the question is quite common for developers new to async/await.
<h2>Asynchronous - True or False?</h2>
To send the request asynchronously, the async parameter of the open() 
method has to be set to true:
xmlhttp.open("GET", "xmlhttp_info.txt", true);
Sending asynchronously requests is a huge improvement for web developers.

Many of the tasks  
performed on the server are very time consuming.
By sending asynchronously, the 
JavaScript does not have to wait for the server response, but can instead:
<ul>
<li>execute other scripts while waiting for server response</li>
<li>deal with the response when the response is ready</li>
</ul>
<h2>Async = true</h2>
When using async = true, specify a function to execute when the response is ready in the onreadystatechange event:
<h3>Example</h3>
xmlhttp.onreadystatechange = function() {<br>
if (this.readyState == 4 &amp;&amp; this.status == 200) {<br>
document.getElementById("demo").innerHTML = this.responseText;<br>
}<br>
};<br>
xmlhttp.open("GET", "xmlhttp_info.txt", true);<br>
xmlhttp.send(); <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest" target="_blank">Try it Yourself &raquo;</a>
<h2>Async = false</h2>
To use async = false, change the third parameter in the open() method to false:
xmlhttp.open("GET", "xmlhttp_info.txt", false);
Using async = false is not recommended, but for a few small requests this can be ok.
Remember that the JavaScript will NOT continue to execute, 
until the server response is ready.

If the server is busy or slow, the 
application will hang or stop.
<b>Note:</b> When you use async = false, do NOT write an onreadystatechange 
function - just put the code after the send() statement:
<h3>Example</h3>
xmlhttp.open("GET", "xmlhttp_info.txt", false);<br>
xmlhttp.send();<br>
document.getElementById("demo").innerHTML = xmlhttp.responseText;<a target="_blank" class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_asyncfalse">Try it Yourself &raquo;</a>
<h2>jQuery on() Method</h2>
$(selector).on(event,childSelector,data,function,map)
Example
Attach a click event to the p element:
$("p").on("click", function(){
alert("The paragraph was clicked.");
});
$( "#dataTable tbody tr" ).on( "click", function() {
console.log( $( this ).text() );
});
<em>event</em> Required.
Specifies one or more event(s) or namespaces to attach to the selected elements.<br>
Multiple event values are separated by space.
Must be a valid event
<em>childSelector</em> Optional.
Specifies that the event handler should only be attached to the specified child elements (and not the selector itself, like the deprecated delegate() method).
<em>data</em> Optional.
Specifies additional data to pass along to the function
<em>function</em> Required.
Specifies the function to run when the event occurs
<em>map</em> Specifies an event map (<em>{event:function, event:function, ...})</em> containing one or more event to attach to the selected elements, and functions to run when the events occur
===========================
<br>
<h2>Looping through objects in JavaScript</h2>
Once in a while, you may need to loop through Objects in JavaScript.

The only way to do so before ES6 is with a <k>for...in</k> loop.
The problem with a <k>for...in</k> loop is that it iterates through properties in the Prototype chain.

When you loop through an object with the <k>for...in</k> loop, you need to check if the property belongs to the object.

You can do this with <k>hasOwnProperty</k>.
<k>for (var property in object) {
if (object.hasOwnProperty(property)) {
// Do things here
}
}
</k>
We no longer have to rely on <k>for...in</k> and <k>hasOwnProperty</k> now.

There’s a better way.
<!--more-->
<h3 id="a-better-way-to-loop-through-objects">A better way to loop through objects</h3>
The better way to loop through objects is <strong>first to convert the object into an array.

Then, you loop through the array.</strong>
You can convert an object into an array with three methods:
<ol>
<li><k>Object.keys</k></li>
<li><k>Object.values</k></li>
<li><k>Object.entries</k></li>
</ol>
<h4 id="object.keys">Object.keys</h4>
<k>Object.keys</k> creates an array that contains the properties of an object.
<k>const fruits = {
apple: 28,
orange: 17,
pear: 54,
}
console.log(Object.keys(fruits)) // [apple, orange, pear]
</k>
<h4 id="object.values">Object.values</h4>
<k>Object.values</k> creates an array that contains the values of every property in an object.

Here’s an example:
<k>const fruits = {
apple: 28,
orange: 17,
pear: 54,
}
const values = Object.values(fruits)
console.log(values) // [28, 17, 54]
</k>
<h4 id="object.entries">Object.entries</h4>
<k>Object.entries</k> creates an array of arrays.

Each inner array has two item.

The first item is the property; the second item is the value.
Here’s an example:
<k>const fruits = {
apple: 28,
orange: 17,
pear: 54,
}
const entries = Object.entries(fruits)
console.log(entries)
// [
//   [apple, 28],
//   [orange, 17],
//   [pear, 54]
// ]
</k>
My favorite of the three is <k>Object.entries</k> because you get both the key and property values.
<h3 id="looping-through-the-array">Looping through the array</h3>
Once you’ve converted the object into an array with <k>Object.keys</k>, <k>Object.values</k>, or <k>Object.entries</k>, you can loop through it as if it was a normal array.
<k>// Looping through arrays created from Object.keys
const keys = Object.keys(fruits)
for (const key of keys) {
console.log(key)
}
// Results:
// apple
// orange
// pear
</k>
If you use <k>Object.entries</k> you might want to <a href="/blog/es6">destructure</a> the array into its key and property.
<k>for (const [fruit, count] of entries) {
console.log(`There are ${count} ${fruit}s`)
}
// Result
// There are 28 apples
// There are 17 oranges
// There are 54 pears
</k>
<h2>Get element of JS object with an index</h2>
<a href="https://stackoverflow.com/questions/14802481/get-element-of-js-object-with-an-index">Get element of JS object with an index</a>
myobj[Object.keys(myobj)[0]];
<h3 id="wrapping-up">Wrapping up</h3>
The better way to loop through objects is first convert it into an array with one of these three methods.
<ol>
<li><k>Object.keys</k></li>
<li><k>Object.values</k></li>
<li><k>Object.entries</k></li>
</ol>
Then, you loop through the results like a normal array.
<h2>Reading CSV File With HTML5 File API</h2>
<a href="Reading CSV File With HTML5 File API.html">Reading CSV File With HTML5 File API</a>
<br>
<h2>JS access local file</h2>
from				to access		status
local js			local file	error, CORS			server file	OK
server js			local file	error, CORS			server file	error in some server
local server js	local file	?			server file	?
use file api:
<a href="Reading CSV File With HTML5 File API.html">Reading CSV File With HTML5 File API</a>
<br>
<h2>fairyDustCursorJS</h2>
<a href="fairyDustCursorJS.txt">fairyDustCursorJS</a>
<br>
<h2>copying strings to the clipboard</h2>
<a href="https://techoverflow.net/2018/03/30/copying-strings-to-the-clipboard-using-pure-javascript/">copying strings to the clipboard</a>
function copyStringToClipboard (str) {
// Create new element
var el = document.createElement('textarea');
// Set value (string to be copied)
el.value = str;
// Set non-editable to avoid focus and move outside of view
el.setAttribute('readonly', '');
el.style = {position: 'absolute', left: '-9999px'};
document.body.appendChild(el);
// Select text inside element
el.select();
// Copy text to clipboard
document.execCommand('copy');
// Remove temporary element
document.body.removeChild(el);
}
Note: If the user selected anything when you ran the function, this selection will be cleared.

If you need to preserve the selection, see this Hackernoon article for a more elaborate solution..
You can use it like this:
// Usage example:
copyStringToClipboard("abc123");
It works by adding a temporary textarea element onto the DOM which is moved outside (credits to Angelos Charalis on Hackernoon for the original idea) the viewport in order to avoid wreaking havoc on screenreaders etc.
<h2>slide and fade functions</h2>
$(".btn1").click(function(){  $("p").slideUp();
});
$(".btn2").click(function(){  $("p").slideDown();
});
$("button").click(function(){
$("#div1").fadeToggle();
$("#div2").fadeToggle("slow");
$("#div3").fadeToggle(3000);
});
<h2>TypeScript in 5 minutes</h2>
<a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html">TypeScript in 5 minutes</a>
<h2>JavaScript Prototype</h2>
<a href="JavaScript Prototype.html">JavaScript Prototype</a>
<h2>Prototype with Examples</h2>
JavaScript is a prototype-based language, therefore understanding the prototype object is one of the most important concepts which JavaScript practitioners need to know.

Before reading this article, you will need to have a basic understanding of the <a href="https://guide.freecodecamp.org/src/pages/javascript/this-reference/index.md"><k>this</k> reference in JavaScript</a>.
<h3><strong>Prototype object</strong></h3>
For the sake of clarity, let’s examine the following example:
<k>function Point2D(x, y) {
this.x = x;
this.y = y;}</k>
As <k>Point2D</k> function is declared, a default property named <k>prototype</k> will be created for it (note that, in JavaScript, a function is also an object).

The <k>prototype</k> property is an object which contains a <k>constructor</k> property and its value is <k>Point2D</k> function: <k>Point2D.prototype.constructor = Point2D</k>.

And when you call <k>Point2D</k> with <k>new</k> keyword, <em>newly created objects will inherit all properties from</em> <k>Point2D.prototype</k>.

To check that, you can add a method named <k>move</k> into <k>Point2D.prototype</k> as follows:
<k>Point2D.prototype.move = function(dx, dy) {
this.x += dx;
this.y += dy;}
var p1 = new Point2D(1, 2);
p1.move(3, 4);
console.log(p1.x); // 4
console.log(p1.y); // 6</k>
The <k>Point2D.prototype</k> is called <strong><strong>prototype object</strong></strong> or <strong><strong>prototype</strong></strong> of <k>p1</k> object and for any other object created with <k>new Point2D(...)</k> syntax.

You can add more properties to <k>Point2D.prototype</k> object as you like.

The common pattern is declare methods to <k>Point2D.prototype</k> and other properties will be declared in constructor function.
Built-in objects in JavaScript are constructed in a similar manner.

For example:
<ul><li>Prototype of objects created with <k>new Object()</k> or <k>{}</k> syntax is <k>Object.prototype</k>.</li><li>Prototype of arrays created with <k>new Array()</k> or <k>[]</k> syntax is <k>Array.prototype</k>.</li><li>And so on with other built-in objects such as <k>Date</k> and <k>RegExp</k>.</li></ul>
<k>Object.prototype</k> is inherited by all objects and it has no prototype (its prototype is <k>null</k>).
<h3><strong>Prototype chain</strong></h3>
The prototype chain mechanism is simple: When you access a property <k>p</k> on object <k>obj</k>, the JavaScript engine will search this property inside <k>obj</k> object.

If the engine fails to search, it continues searching in the prototype of <k>obj</k> object and so on until reaching <k>Object.prototype</k>.

If after the search has finished, and nothing has been found the result will be <k>undefined</k>.

For example:
<k>var obj1 = {
a: 1,
b: 2};
var obj2 = Object.create(obj1);
obj2.a = 2;
console.log(obj2.a); // 2
console.log(obj2.b); // 2
console.log(obj2.c); // undefined</k>
In above snippet, the statement <k>var obj2 = Object.create(obj1)</k> will create <k>obj2</k> object with prototype <k>obj1</k> object.

In other words, <k>obj1</k> becomes the prototype of <k>obj2</k> instead of <k>Object.prototype</k> by default.

As you can see, <k>b</k> is not a property of <k>obj2</k>, you can still access it via the prototype chain.

For <k>c</k> property, however, you get <k>undefined</k> value because it can’t be found in <k>obj1</k> and <k>Object.prototype</k>.
<h3><strong>Classes</strong></h3>
In ES2016, we now get to use the <k>Class</k> keyword as well as the methods mentioned above to manipulate <k>prototype</k>.

The JavaScript <k>Class</k> appeals to developers from OOP backgrounds, but it’s essentially doing the same thing as above.
<k>class Rectangle {
constructor(height, width) { this.height = height this.width = width
}
get area() { return this.calcArea()
}
calcArea() { return this.height * this.width
}}
const square = new Rectangle(10, 10)
console.log(square.area) // 100</k>
This is basically the same as:
<k>function Rectangle(height, width) {
this.height = height
this.width = width}
Rectangle.prototype.calcArea = function calcArea() {
return this.height * this.width}</k>
The <k>getter</k> and <k>setter</k> methods in classes bind an Object property to a function that will be called when that property is looked up.

It’s just syntactic sugar to help make it easier to <em>look up</em> or <em>set</em> properties.
<h2>Multiple Onload Functions</h2>
https://www.htmlgoodies.com/beyond/javascript/article.php/3724571/Using-Multiple-JavaScript-Onload-Functions.htm
Using Multiple JavaScript Onload Functions
window.onload = func1;	execute the script when page is loaded
&lt;body onload="func1(); func2();">	linking of multiple events onloaded
&lt;body onload="func1(); onkeypress="chkKey()">	on multiple events
window.onload = start;
function start() {
func1(); func2();}	linking of multiple events by function onloaded
window.addEventListener("load", myInit, true);
function myInit(){
// call your functions here....

};	create an init function manually	this can call that set of functions anytime
<h2>Common HTML Events</h2>
Here is a list of some common HTML events:
onchange	An HTML element has been changed
onclick	The user clicks an HTML element
onmouseover	The user moves the mouse over an HTML element
onmouseout	The user moves the mouse away from an HTML element
onkeydown	The user pushes a keyboard key
onload	The browser has finished loading the page
Common events
There is a huge collection of events that can be generated by most element nodes:
Mouse events.
Keyboard events.
HTML frame/object events.
HTML form events.
User interface events.
Mutation events (notification of any changes to the structure of a document).
Progress events).
Note that the event classification above is not exactly the same as W3C's classification.
<table>
<tbody><tr><th style="width:11%">Category</th><th style="width:12%">Type</th><th style="width:14%">Attribute</th><th>Description</th><th style="width:15%">Bubbles</th><th style="width:11%">Cancelable</th></tr>
<tr><td rowspan="14">Mouse</td><td>click</td><td>onclick</td><td>Fires when the pointing device button is clicked over an element.

A click is defined as a mousedown and mouseup over the same screen location.

The sequence of these events is:
mousedown, mouseup, click</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dblclick</td><td>ondblclick</td><td>Fires when the pointing device button is double-clicked over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mousedown</td><td>onmousedown</td><td>Fires when the pointing device button is pressed over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mouseup</td><td>onmouseup</td><td>Fires when the pointing device button is released over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mouseover</td><td>onmouseover</td><td>Fires when the pointing device is moved onto an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mousemove</td><td>onmousemove</td><td>Fires when the pointing device is moved while it is over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mouseout</td><td>onmouseout</td><td>Fires when the pointing device is moved away from an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragstart</td><td>ondragstart</td><td>Fired on an element when a drag is started.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drag</td><td>ondrag</td><td>This event is fired at the source of the drag, that is, the element where dragstart was fired, during the drag operation.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragenter</td><td>ondragenter</td><td>Fired when the mouse is first moved over an element while a drag is occurring.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragleave</td><td>ondragleave</td><td>This event is fired when the mouse leaves an element while a drag is occurring.</td><td>Yes</td><td>No</td></tr>
<tr><td>dragover</td><td>ondragover</td><td>This event is fired as the mouse is moved over an element when a drag is occurring.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drop</td><td>ondrop</td><td>The drop event is fired on the element where the drop occurs at the end of the drag operation.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragend</td><td>ondragend</td><td>The source of the drag will receive a dragend event when the drag operation is complete, whether it was successful or not.</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="3">Keyboard</td><td>keydown</td><td>onkeydown</td><td>Fires before keypress, when a key on the keyboard is pressed.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>keypress</td><td>onkeypress</td><td>Fires after keydown, when a key on the keyboard is pressed.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>keyup</td><td>onkeyup</td><td>Fires when a key on the keyboard is released</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="6">HTML frame/object</td><td>load</td><td>onload</td><td>Fires when the user agent finishes loading all content within a document, including window, frames, objects and images
For elements, it fires when the target element and all of its content has finished loading
</td><td>No</td><td>No</td></tr>
<tr><td>unload</td><td>onunload</td><td>Fires when the user agent removes all content from a window or frame
For elements, it fires when the target element or any of its content has been removed
</td><td>No</td><td>No</td></tr>
<tr><td>abort</td><td>onabort</td><td>Fires when an object/image is stopped from loading before completely loaded</td><td>Yes</td><td>No</td></tr>
<tr><td>error</td><td>onerror</td><td>Fires when an object/image/frame cannot be loaded properly</td><td>Yes</td><td>No</td></tr>
<tr><td>resize</td><td>onresize</td><td>Fires when a document view is resized</td><td>Yes</td><td>No</td></tr>
<tr><td>scroll</td><td>onscroll</td><td>Fires when an element or document view is scrolled</td><td>No, except that a scroll event on document must bubble to the window</td><td>No</td></tr>
<tr><td rowspan="6">HTML form</td><td>select</td><td>onselect</td><td>Fires when a user selects some text in a text field, including input and textarea</td><td>Yes</td><td>No</td></tr>
<tr><td>change</td><td>onchange</td><td>Fires when a control loses the input focus and its value has been modified since gaining focus</td><td>Yes</td><td>No</td></tr>
<tr><td>submit</td><td>onsubmit</td><td>Fires when a form is submitted</td><td>Yes</td><td>Yes</td></tr>
<tr><td>reset</td><td>onreset</td><td>Fires when a form is reset</td><td>Yes</td><td>No</td></tr>
<tr><td>focus</td><td>onfocus</td><td>Fires when an element receives focus either via the pointing device or by tab navigation</td><td>No</td><td>No</td></tr>
<tr><td>blur</td><td>onblur</td><td>Fires when an element loses focus either via the pointing device or by tabbing navigation</td><td>No</td><td>No</td></tr>
<tr><td rowspan="3">User interface</td><td>focusin</td><td>(none)</td><td>Similar to HTML focus event, but can be applied to any focusable element</td><td>Yes</td><td>No</td></tr>
<tr><td>focusout</td><td>(none)</td><td>Similar to HTML blur event, but can be applied to any focusable element</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMActivate</td><td>(none)</td><td>Similar to XUL command event.

Fires when an element is activated, for instance, through a mouse click or a keypress.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="7">Mutation</td><td>DOMSubtreeModified</td><td>(none)</td><td>Fires when the subtree is modified</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMNodeInserted</td><td>(none)</td><td>Fires when a node has been added as a child of another node</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMNodeRemoved</td><td>(none)</td><td>Fires when a node has been removed from a DOM-tree</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMNodeRemovedFromDocument</td><td>(none)</td><td>Fires when a node is being removed from a document</td><td>No</td><td>No</td></tr>
<tr><td>DOMNodeInsertedIntoDocument</td><td>(none)</td><td>Fires when a node is being inserted into a document</td><td>No</td><td>No</td></tr>
<tr><td>DOMAttrModified</td><td>(none)</td><td>Fires when an attribute has been modified</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMCharacterDataModified</td><td>(none)</td><td>Fires when the character data has been modified</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="6">Progress</td><td>loadstart</td><td>(none)</td><td>Progress has begun.</td><td>No</td><td>No</td></tr>
<tr><td>progress</td><td>(none)</td><td>In progress.

After loadstart has been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>error</td><td>(none)</td><td>Progression failed.

After the last progress has been dispatched, or after loadstart has been dispatched if progress has not been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>abort</td><td>(none)</td><td>Progression is terminated.

After the last progress has been dispatched, or after loadstart has been dispatched if progress has not been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>load</td><td>(none)</td><td>Progression is successful.

After the last progress has been dispatched, or after loadstart has been dispatched if progress has not been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>loadend</td><td>(none)</td><td>Progress has stopped.

After one of error, abort, or load has been dispatched.</td><td>No</td><td>No</td></tr>
</tbody></table>
Note that the events whose names start with "DOM" are currently not well supported, and for this and other performance reasons are deprecated by the W3C in DOM Level 3.

Mozilla and Opera support <i>DOMAttrModified</i>, <i>DOMNodeInserted</i>, <i>DOMNodeRemoved</i> and <i>DOMCharacterDataModified</i>.

Chrome and Safari support these events, except for <i>DOMAttrModified</i>.
<h4>Touch events</h4>
Web browsers running on touch-enabled devices, such as Apple's iOS and Google's Android, generate additional events.
<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Touch</td><td>touchstart</td><td></td><td>Fires when a finger is placed on the touch surface/screen.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchend</td><td></td><td>Fires when a finger is removed from the touch surface/screen.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchmove</td><td></td><td>Fires when a finger already placed on the screen is moved across the screen.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchenter</td><td></td><td>Fires when a touch point moves onto the interactive area defined by a DOM element.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchleave</td><td></td><td>Fires when a touch point moves off the interactive area defined by a DOM element.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchcancel</td><td></td><td>A user agent must dispatch this event type to indicate when a TouchPoint has been disrupted in an implementation-specific manner, such as by moving outside the bounds of the UA window.

A user agent may also dispatch this event type when the user places more touch points (The coordinate point at which a pointer (e.g.

finger or stylus) intersects the target surface of an interface) on the touch surface than the device or implementation is configured to store, in which case the earliest TouchPoint object in the TouchList should be removed.</td><td>Yes</td><td>No</td></tr>
</tbody></table>
In the W3C draft recommendation, a <k>TouchEvent</k> delivers a <k>TouchList</k> of <k>Touch</k> locations, the modifier keys that were active, a <k>TouchList</k> of <k>Touch</k> locations within the targeted DOM element, and a <k>TouchList</k> of <k>Touch</k> locations that have changed since the previous <k>TouchEvent</k>.
Apple didn't join this working group, and delayed W3C recommendation of its Touch Events Specification by disclosing patents late in the recommendation process.
<h4>Pointer events</h4>
Web browsers on devices with various types of input devices including mouse, touch panel, and pen may generate integrated input events.

Users can see what type of input device is pressed, what button is pressed on that device, and how strongly the button is pressed when it comes to a stylus pen.

As of October 2013, this event is only supported by Internet Explorer 10 and 11.
<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="10">Pointer</td><td>pointerdown</td><td>onpointerdown</td><td>Fires when the pointing device button is activated, or pressed over an element.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerup</td><td>onpointerup</td><td>Fires when the pointing device button is released over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointercancel</td><td>onpointercancel</td><td>Fires when a pointing device is unlikely to continue to produce event because, for example, the device is used for panning/zooming after a pointerdown event.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointermove</td><td>onpointermove</td><td>Fires when the pointing device is moved while it is over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerover</td><td>onpointerover</td><td>Fires when the pointing device is moved onto an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerout</td><td>onpointerout</td><td>Fires when the pointing device is moved away from an element.

Also fires after pointerup by pointing device without hovering, or after</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerenter</td><td>onpointerenter</td><td>Fires when the pointing device is moved onto an element, or when the button of the pointing device which does not support hovering is pressed on one of its descendant elements.</td><td>No</td><td>Yes</td></tr>
<tr><td>pointerleave</td><td>onpointerleave</td><td>Fires when the pointing device is moved away from an element, or when the button of the pointing device which does not support hovering is released over its descendant elements.</td><td>No</td><td>Yes</td></tr>
<tr><td>gotpointercapture</td><td>ongotpointercapture</td><td>Fires when the pointer is captured by setPointerCapture method.</td><td>Yes</td><td>No</td></tr>
<tr><td>lostpointercapture</td><td>onlostpointercapture</td><td>Fires when the pointer is released by releasePointerCapture method.</td><td>Yes</td><td>No</td></tr>
</tbody></table>
<h4>Indie UI events</h4>
Not yet really implemented, the Indie UI working groups want to help web application developers to be able to support standard user interaction events without having to handle different platform specific technical events that could match with it.
Scripting usable interfaces can be difficult, especially when one considers that user interface design patterns differ across software platforms, hardware, and locales, and that those interactions can be further customized based on personal preference.

Individuals are accustomed to the way the interface works on their own system, and their preferred interface frequently differs from that of the web application author's preferred interface.
For example, web application authors, wishing to intercept a user's intent to undo the last action, need to "listen" for all the following events:
Control+Z on Windows and Linux.
Command+Z on Mac OS X.
Shake events on some mobile devices.
It would be simpler to listen for a single, normalized request to "undo" the previous action.
<table>
<tbody><tr><th>Category</th><th>Type</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Request</td><td>undorequest</td><td>Indicates the user desires to "undo" the previous action.

(May be superseded by the UndoManager interface.)</td><td>Yes</td><td>Yes</td></tr>
<tr><td>redorequest</td><td>Indicates the user desires to "redo" the previously "undone" action.

(May be superseded by the UndoManager interface.)</td><td>Yes</td><td>no</td></tr>
<tr><td>expandrequest</td><td>Indicates the user desires to reveal information in a collapsed section (e.g.

a disclosure widget) or branch node in a hierarchy (e.g., a tree view).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>collapserequest</td><td>Indicates the user desires to hide or collapse information in an expanded section (e.g.

a disclosure widget) or branch node in a hierarchy (e.g., a tree view).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dismissrequest</td><td>Indicates the user desires "dismiss" the current view (e.g.

canceling a dialog, or closing a popup menu).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>deleterequest</td><td>Indicates the user wants to initiate a "delete" action on the marked element or current view.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="4">Focus Request</td><td>directionalfocusrequest</td><td>Initiated when the user agent sends a "direction focus" request to the web application.

Web authors should not use or register for directionalfocusrequest events when standard browser focus and blur events are sufficient.

Using these events unnecessarily could result in reduced performance or negative user experience.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>linearfocusrequest</td><td>Initiated when the user agent sends a "linear focus" request to the web application.

Web authors should not use or register for linearfocusrequest events when standard browser focus and blur events are sufficient.

This event type is only necessary on specialized control types such as data grids where the logical next element may not be focusable or even in the DOM until requested.

Using these events unnecessarily could result in reduced performance or negative user experience.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>palettefocusrequest</td><td>Initiated when the user agent sends a "palette focus" request to the web application.

Web app authors receiving this event should move focus to the first palette in the web application, or cycle focus between all available palettes.

Note: palettes are sometimes referred to as non-modal dialogs or inspector windows.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>toolbarfocusrequest</td><td>Initiated when the user agent sends a "toolbar focus" request to the web application.

Web app authors receiving this event should move focus to the main toolbar in the web application, or cycle focus between all available toolbars.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="4">Manipulation Request</td><td>moverequest</td><td>Initiated when the user agent sends a move request to the web application with accompanying x/y delta values.

This is used, for example, when moving an object to a new location on a layout canvas.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>panrequest</td><td>Initiated when the user agent sends a pan request to the web application with accompanying x/y delta values.

This is used, for example, when changing the center point while panning a map or another custom image viewer.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>rotationrequest</td><td>Initiated when the user agent sends a rotation request to the web application with accompanying origin x/y values and a rotation value in degrees.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>zoomrequest</td><td>Initiated when the user agent sends a zoom request to the web application with accompanying origin x/y values and the zoom scale factor.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="1">Scroll Request</td><td>scrollrequest</td><td>Initiated when the user agent sends a scroll request to the web application with accompanying x/y delta values or one of the other defined scrollType values.

Authors should only use this event and uiaction with custom scroll views.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="1">ValueChange Request</td><td>valuechangerequest</td><td>Initiated when the user agent sends a value change request to the web application.

Used on custom range controls like sliders, carousels, etc.</td><td>Yes</td><td>Yes</td></tr>
</tbody></table>
<h4>Internet Explorer-specific events</h4>
In addition to the common (W3C) events, two major types of events are added by Internet Explorer.

Some of the events have been implemented as de facto standards by other browsers.
Clipboard events.
Data binding events.
<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Clipboard</td><td>cut</td><td>oncut</td><td>Fires after a selection is cut to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>copy</td><td>oncopy</td><td>Fires after a selection is copied to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>paste</td><td>onpaste</td><td>Fires after a selection is pasted from the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>beforecut</td><td>onbeforecut</td><td>Fires before a selection is cut to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>beforecopy</td><td>onbeforecopy</td><td>Fires before a selection is copied to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>beforepaste</td><td>onbeforepaste</td><td>Fires before a selection is pasted from the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="11">Data binding</td><td>afterupdate</td><td>onafterupdate</td><td>Fires immediately after a databound object has been updated.</td><td>Yes</td><td>No</td></tr>
<tr><td>beforeupdate</td><td>onbeforeupdate</td><td>Fires before a data source is updated.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>cellchange</td><td>oncellchange</td><td>Fires when a data source has changed.</td><td>Yes</td><td>No</td></tr>
<tr><td>dataavailable</td><td>ondataavailable</td><td>Fires when new data from a data source become available.</td><td>Yes</td><td>No</td></tr>
<tr><td>datasetchanged</td><td>ondatasetchanged</td><td>Fires when content at a data source has changed.</td><td>Yes</td><td>No</td></tr>
<tr><td>datasetcomplete</td><td>ondatasetcomplete</td><td>Fires when transfer of data from the data source has completed.</td><td>Yes</td><td>No</td></tr>
<tr><td>errorupdate</td><td>onerrorupdate</td><td>Fires if an error occurs while updating a data field.</td><td>Yes</td><td>No</td></tr>
<tr><td>rowenter</td><td>onrowenter</td><td>Fires when a new row of data from the data source is available.</td><td>Yes</td><td>No</td></tr>
<tr><td>rowexit</td><td>onrowexit</td><td>Fires when a row of data from the data source has just finished.</td><td>No</td><td>Yes</td></tr>
<tr><td>rowsdelete</td><td>onrowsdelete</td><td>Fires when a row of data from the data source is deleted.</td><td>Yes</td><td>No</td></tr>
<tr><td>rowinserted</td><td>onrowinserted</td><td>Fires when a row of data from the data source is inserted.</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="9">Mouse</td><td>contextmenu</td><td>oncontextmenu</td><td>Fires when the context menu is shown.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drag</td><td>ondrag</td><td>Fires when during a mouse drag (on the moving Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragstart</td><td>ondragstart</td><td>Fires when a mouse drag begins (on the moving Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragenter</td><td>ondragenter</td><td>Fires when something is dragged onto an area (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragover</td><td>ondragover</td><td>Fires when a drag is held over an area (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragleave</td><td>ondragleave</td><td>Fires when something is dragged out of an area (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragend</td><td>ondragend</td><td>Fires when a mouse drag ends (on the moving Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drop</td><td>ondrop</td><td>Fires when a mouse button is released over a valid target during a drag (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>selectstart</td><td>onselectstart</td><td>Fires when the user starts to select text.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>Keyboard</td><td>help</td><td>onhelp</td><td>Fires when the user initiates help.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="2">HTML frame/object</td><td>beforeunload</td><td>onbeforeunload</td><td>Fires before a document is unloaded.</td><td>No</td><td>Yes</td></tr>
<tr><td>stop</td><td>onstop</td><td>Fires when the user stops loading the object.

(unlike abort, stop event can be attached to document)</td><td>No</td><td>No</td></tr>
<tr><td>HTML form</td><td>beforeeditfocus</td><td>onbeforeeditfocus</td><td>Fires before an element gains focus for editing.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="3">Marquee</td><td>start</td><td>onstart</td><td>Fires when a marquee begins a new loop.</td><td>No</td><td>No</td></tr>
<tr><td>finish</td><td>onfinish</td><td>Fires when marquee looping is complete.</td><td>No</td><td>Yes</td></tr>
<tr><td>bounce</td><td>onbounce</td><td>Fires when a scrolling marquee bounces back in the other direction.</td><td>No</td><td>Yes</td></tr>
<tr><td rowspan="6">Miscellaneous</td><td>beforeprint</td><td>onbeforeprint</td><td>Fires before a document is printed</td><td>No</td><td>No</td></tr>
<tr><td>afterprint</td><td>onafterprint</td><td>Fires immediately after the document prints.</td><td>No</td><td>No</td></tr>
<tr><td>propertychange</td><td>onpropertychange</td><td>Fires when the property of an object is changed.</td><td>No</td><td>No</td></tr>
<tr><td>filterchange</td><td>onfilterchange</td><td>Fires when a filter changes properties or finishes a transition.</td><td>No</td><td>No</td></tr>
<tr><td>readystatechange</td><td>onreadystatechange</td><td>Fires when the readyState property of an element changes.</td><td>No</td><td>No</td></tr>
<tr><td>losecapture</td><td>onlosecapture</td><td>Fires when the releaseCapture method is invoked.</td><td>No</td><td>No</td></tr>
</tbody></table>
Note that Mozilla, Safari and Opera also support the readystatechange event for the XMLHttpRequest object.

Mozilla also supports the beforeunload event using the traditional event registration method (DOM Level 0).

Mozilla and Safari also support contextmenu, but Internet Explorer for Mac does not.
Note that Firefox 6 and later support the beforeprint and afterprint events.
<h3>XUL events</h3>
In addition to the common (W3C) events, Mozilla defined a set of events that work only with XUL elements.
<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Mouse</td><td>DOMMouseScroll</td><td>DOMMouseScroll</td><td>Fires when the mouse wheel is moved, causing the content to scroll.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragdrop</td><td>ondragdrop</td><td>Fires when the user releases the mouse button to drop an object being dragged.</td><td>No</td><td>No</td></tr>
<tr><td>dragenter</td><td>ondragenter</td><td>Fires when the mouse pointer first moves over an element during a drag.

It is similar to the mouseover event but occurs while dragging.</td><td>No</td><td>No</td></tr>
<tr><td>dragexit</td><td>ondragexit</td><td>Fires when the mouse pointer moves away from an element during a drag.

It is also called after a drop on an element.

It is similar to the mouseout event but occurs during a drag.</td><td>No</td><td>No</td></tr>
<tr><td>draggesture</td><td>ondraggesture</td><td>Fires when the user starts dragging the element, usually by holding down the mouse button and moving the mouse.</td><td>No</td><td>No</td></tr>
<tr><td>dragover</td><td>ondragover</td><td>Related to the mousemove event, this event is fired while something is being dragged over an element.</td><td>No</td><td>No</td></tr>
<tr><td rowspan="5">Input</td><td>CheckboxStateChange</td><td></td><td>Fires when a checkbox is checked or unchecked, either by the user or a script.</td><td>No</td><td>No</td></tr>
<tr><td>RadioStateChange</td><td></td><td>Fires when a radio button is selected, either by the user or a script.</td><td>No</td><td>No</td></tr>
<tr><td>close</td><td>onclose</td><td>Fires when a request has been made to close the window.</td><td>No</td><td>Yes</td></tr>
<tr><td>command</td><td>oncommand</td><td>Similar to W3C DOMActivate event.

Fires when an element is activated, for instance, through a mouse click or a keypress.</td><td>No</td><td>No</td></tr>
<tr><td>input</td><td>oninput</td><td>Fires when a user enters text in a textbox.</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="10">User interface</td><td>DOMMenuItemActive</td><td>DOMMenuItemActive</td><td>Fires when a menu or menuitem is hovered over, or highlighted.</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMMenuItemInactive</td><td>DOMMenuItemInactive</td><td>Fires when a menu or menuitem is no longer being hovered over, or highlighted.</td><td>Yes</td><td>No</td></tr>
<tr><td>contextmenu</td><td>oncontextmenu</td><td>Fires when the user requests to open the context menu for the element.

The action to do this varies by platform, but it will typically be a right click.</td><td>No</td><td>Yes</td></tr>
<tr><td>overflow</td><td>onoverflow</td><td>Fires a box or other layout element when there is not enough space to display it at full size.</td><td>No</td><td>No</td></tr>
<tr><td>overflowchanged</td><td>onoverflowchanged</td><td>Fires when the overflow state changes.</td><td>No</td><td>No</td></tr>
<tr><td>underflow</td><td>onunderflow</td><td>Fires to an element when there becomes enough space to display it at full size.</td><td>No</td><td>No</td></tr>
<tr><td>popuphidden</td><td>onpopuphidden</td><td>Fires to a popup after it has been hidden.</td><td>No</td><td>No</td></tr>
<tr><td>popuphiding</td><td>onpopuphiding</td><td>Fires to a popup when it is about to be hidden.</td><td>No</td><td>No</td></tr>
<tr><td>popupshowing</td><td>onpopupshowing</td><td>Fires to a popup just before it is popped open.</td><td>No</td><td>Yes</td></tr>
<tr><td>popupshown</td><td>onpopupshown</td><td>Fires to a popup after it has been opened, much like the onload event is sent to a window when it is opened.</td><td>No</td><td>No</td></tr>
<tr><td rowspan="2">Command</td><td>broadcast</td><td>onbroadcast</td><td>Placed on an observer.

The broadcast event is sent when the attributes of the broadcaster being listened to are changed.</td><td>No</td><td>No</td></tr>
<tr><td>commandupdate</td><td>oncommandupdate</td><td>Fires when a command update occurs.</td><td>No</td><td>No</td></tr>
</tbody></table>
<h3>Other events</h3>
For Mozilla and Opera 9, there are also undocumented events known as <i>DOMContentLoaded</i> and <i>DOMFrameContentLoaded</i> which fire when the DOM content is loaded.

These are different from "load" as they fire before the loading of related files (e.g., images).

However, DOMContentLoaded has been added to the HTML 5 specification.
The DOMContentLoaded event was also implemented in the Webkit rendering engine build 500+.
Opera 9 also supports the Web Forms 2.0 events <i>DOMControlValueChanged</i>, <i>invalid</i>, <i>forminput</i> and <i>formchange</i>.
<h3>Event flow</h3>
Consider the situation when there are 2 elements nested together.

Both have event handlers registered on the same event type, say "click".

When the user clicks on the inner element, there are two possible ways to handle it:
Trigger the elements from outer to inner (event capturing).

This model is implemented in Netscape Navigator.
Trigger the elements from inner to outer (event bubbling).

This model is implemented in Internet Explorer and other browsers.
W3C takes a middle position in this struggle.

Events are first captured until it reaches the target element, and then bubbled up.

During the event flow, an event can be responded to at any element in the path (an observer) in either phase by causing an action, and/or by stopping the event (with method <tt>event.stopPropagation()</tt> for W3C-conforming browsers and command <tt>event.cancelBubble = true</tt> for Internet Explorer), and/or by cancelling the default action for the event.
<h3>Event object</h3>
The Event object provides a lot of information about a particular event, including information about target element, key pressed, mouse button pressed, mouse position, etc.

Unfortunately, there are very serious browser incompatibilities in this area.

Hence only the W3C Event object is discussed in this article.
<table>
<caption>Event properties
</caption>
<tbody><tr><th>Name</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>DOMString</td><td>The name of the event (case-insensitive in DOM level 2 but case-sensitive in DOM level 3 ).</td></tr>
<tr><td>target</td><td>EventTarget</td><td>Used to indicate the EventTarget to which the event was originally dispatched.</td></tr>
<tr><td>currentTarget</td><td>EventTarget</td><td>Used to indicate the EventTarget whose EventListeners are currently being processed.</td></tr>
<tr><td>eventPhase</td><td>unsigned short</td><td>Used to indicate which phase of event flow is currently being evaluated.</td></tr>
<tr><td>bubbles</td><td>boolean</td><td>Used to indicate whether or not an event is a bubbling event.</td></tr>
<tr><td>cancelable</td><td>boolean</td><td>Used to indicate whether or not an event can have its default action prevented.</td></tr>
<tr><td>timeStamp</td><td>DOMTimeStamp</td><td>Used to specify the time (in milliseconds relative to the epoch) at which the event was created.</td></tr>
</tbody></table>
<table>
<caption>Event methods
</caption>
<tbody><tr><th>Name</th><th>Argument type</th><th>Argument name</th><th>Description</th></tr>
<tr><td>stopPropagation</td><td></td><td></td><td>To prevent further propagation of an event during event flow.</td></tr>
<tr><td>preventDefault</td><td></td><td></td><td>To cancel the event if it is cancelable, meaning that any default action normally taken by the implementation as a result of the event will not occur.</td></tr>
<tr><td rowspan="3">initEvent</td><td>DOMString</td><td>eventTypeArg</td><td>Specifies the event type.</td></tr>
<tr><td>boolean</td><td>canBubbleArg</td><td>Specifies whether or not the event can bubble.</td></tr>
<tr><td>boolean</td><td>cancelableArg</td><td>Specifies whether or not the event's default action can be prevented.</td></tr>
</tbody></table>
<h2>non-capturing group (?:)</h2>
<a href="https://stackoverflow.com/questions/3512471/what-is-a-non-capturing-group-what-does-do">non-capturing group (?:)</a>
<br>
<h2>5 JavaScript Web Scraping Libraries and Tools for nodeJs</h2>
Exploring <a href="http://www.prowebscraper.com/blog/50-best-open-source-web-crawlers/" target="_blank">web scraping libraries</a> and tools for JavaScript.
<blockquote>
<strong>1.
Request</strong>
<strong>2.
Cheerio</strong>
<strong>3.
Osmosis</strong>
<strong>4.
Puppeteer</strong>
<strong>5.
Apify SDK</strong>
</blockquote>
<h3>1.
Request (Aka HTTP Client) :</h3>
<a href="https://github.com/request/request" target="_blank">Request</a>
For example, if you want to pull down the contents of a page :
<k>  const request = require('request');
request('http://stackabuse.com', function(err, res, body) {  
console.log(body);
});
</k>
<a href="https://stackabuse.com/the-node-js-request-module/" target="_blank">Quick start Guide with request</a>
<h3>2.
Cheerio (Aka Parser) :</h3>
<a href="https://cheerio.js.org/" target="_blank">Cheerio</a>
<a href="https://hackernoon.com/cheerio-node-nodejs-tutorial-web-html-scraping-note-a4ceb37d9cbb" target="_blank">Web Scraping note (cheerio)</a>
<h3>3.
Osmosis (Aka Parser) :</h3>
<a href="https://www.npmjs.com/package/osmosis" target="_blank">Osmosis</a>
<a href="http://shanefulmer.com/blog/node-osmosis-examples/" target="_blank">Using node-osmosis (with examples)</a>
<h3>4.
Puppeteer (Aka Headless Chrome Browser for Automation) :</h3>
<a href="https://github.com/GoogleChrome/puppeteer" target="_blank">Puppeteer</a>
<a href="https://hackernoon.com/tips-and-tricks-for-web-scraping-with-puppeteer-ed391a63d952" target="_blank">Tips and Tricks for Web Scraping with Puppeteer</a>
<h3>5.
Apify SDK (Aka The Complete Web Scraping Framework) :</h3>
<a href="https://github.com/apifytech/apify-js" target="_blank">Apify SDK</a>
It can be used either stand-alone in your own applications or in <a href="https://www.apify.com/docs/actor" target="_blank">actors</a> running on the <a href="https://www.apify.com/" target="_blank">Apify Cloud</a>.
<a href="https://sdk.apify.com/docs/examples/basiccrawler" target="_blank">Getting Started with Apify with Examples</a>
<h2>what is this "require?"</h2>
require() is not part of the standard JavaScript API.

But in Node.js, it's a built-in function with a special purpose: to load modules.
Modules are a way to split an application into separate files instead of having all of your application in one file.

This concept is also present in other languages with minor differences in syntax and behavior, like C's include, PHP's use, Python's import, and so on.
One big difference between Node.js modules and browser JavaScript is how one script's code is accessed from another script's code.
In browser JavaScript, scripts are added via the &lt;script> element.

When they execute, they all have direct access to the global scope, a "shared space" among all scripts.

Any script can freely define/modify/remove/call anything on the global scope.
In Node.js, each module has its own scope.

A module cannot directly access things defined in another module unless it chooses to expose them.

To expose things from a module, they must be assigned to exports or module.exports.

For a module to access another module's exports or module.exports, it must use require().
In your code, var pg = require('pg'); loads the pg module, a PostgreSQL client for Node.js.

This allows your code to access functionality of the PostgreSQL client's APIs via the pg variable.
Why does it work in node but not in a webpage?
require(), module.exports and exports are APIs of a module system that is specific to Node.js.

Browsers do not implement this module system.
Also, before I got it to work in node, I had to do npm install pg.

What's that about?
NPM is a package repository service that hosts published JavaScript modules.

npm install is a command that lets you download packages from their repository.
Where did it put it, and how does Javascript find it?
Node.js has very detailed documentation on how modules find other modules.

But in a gist, it puts all the downloaded modules in node_modules in the directory where you ran npm install.
the request module to webscrap
const request = require('request');
request('http://stackabuse.com', function(err, res, body) {  
console.log(body);
});
<h2>javascript create a table</h2>
var table = document.getElementById("myTable");
var row = table.insertRow(0);
var cell1 = row.insertCell(0);
var cell2 = row.insertCell(1);
cell1.innerHTML = "NEW CELL1";
cell2.innerHTML = "NEW CELL2";
<a href="https://stackoverflow.com/questions/27594957/how-to-create-a-table-using-a-loop">create a table using a loop</a>
<br>
var table = document.createElement('table'), tr, td, row, cell;
for (row = 0; row < 10; row++) {
tr = document.createElement('tr');
for (cell = 0; cell < 22; cell++) {
td = document.createElement('td');
tr.appendChild(td);
td.innerHTML = row * 22 + cell + 1;
}
table.appendChild(tr);
}
document.getElementById('container').appendChild(table);
create an empty row of 22 cells, clone it 10 times, and then add the numbers to the cells.
var table = document.createElement('table'),
tr = document.createElement('tr'),
cells, i;
for (i = 0; i < 22; i++) { // Create an empty row
tr.appendChild(document.createElement('td'));
}
for (i = 0; i < 10; i++) { // Add 10 copies of it to the table
table.appendChild(tr.cloneNode(true));
}
cells = table.getElementsByTagName('td'); // get all of the cells
for (i = 0; i < 220; i++) {               // number them
cells[i].innerHTML = i + 1;
}
document.getElementById('container').appendChild(table);
And a third option: add the cells in a single loop, making a new row every 22 cells.
var table = document.createElement('table'), tr, td, i;
for (i = 0; i < 220; i++) { 
if (i % 22 == 0) { // every 22nd cell (including the first)
tr = table.appendChild(document.createElement('tr')); // add a new row
}
td = tr.appendChild(document.createElement('td'));
td.innerHTML = i + 1;
}
document.getElementById('container').appendChild(table);
<a href="https://www.w3schools.com/jsref/met_document_createdocumentfragment.asp">HTML DOM createDocumentFragment() Method</a>
HTML DOM createDocumentFragment() Method
Example
Create a documentFragment node and append a child to it (a list item).

Then, change the list item's node value and insert it as the last child of the list:
var d = document.createDocumentFragment();
d.appendChild(document.getElementsByTagName("LI")[0]);
d.childNodes[0].childNodes[0].nodeValue = "Milk";
document.getElementsByTagName("UL")[0].appendChild(d);
<a href="https://www.w3schools.com/jsref/coll_table_rows.asp">Table rows Collection</a>
<br>
<h2>javascript check keyboard arrow key</h2>
document.onkeydown = checkKey;
function checkKey(e) {
e = e || window.event;
if (e.keyCode == '38') {        // up arrow    }
else if (e.keyCode == '40') {        // down arrow    }
else if (e.keyCode == '37') {       // left arrow    }
else if (e.keyCode == '39') {       // right arrow    }
}
function getChar(event) {
if (event.which!=0 && event.charCode!=0) {
return String.fromCharCode(event.which)   // the rest
} else {
return event.keyCode // special key
}
}
<h2>Top 10 jQuery functions to Plain Old JavaScript</h2>
<a href="https://devkisslist.com/2019/06/29/top-10-jquery-functions-to-plain-old-javascript/">Top 10 jQuery functions</a>
<br>
<div><a href="#jQtopic-1" target="_self">1 $(document).ready(..)</a><br><a href="#jQtopic-2" target="_self">2) $(…).HTML()</a><br><a href="#jQtopic-3" target="_self">3) $(…).Append</a><br><a href="#jQtopic-4" target="_self">4) $(…).prepend()</a><br><a href="#jQtopic-5" target="_self">5) $(…).empty()</a><br><a href="#jQtopic-6" target="_self">6) $(…).Attr(name)</a><br><a href="#jQtopic-7" target="_self">7) $(…).val()</a><br><a href="#jQtopic-8" target="_self">8, 9) $(…).on() | $(…).off()</a><br><a href="#jQtopic-9" target="_self">10) $(…).toggle()</a><br><a href="#jQtopic-10" target="_self">Conclusion</a></center>
These are my top most commonly use jQuery functions converted to Plain Old JavaScript.
Sometimes I need to create a simple static HTML or landing page, and I don’t feel like bringing in any libraries or bloatware.

For those cases I just use plain old JavaScript to get the job done, and honestly it feels good to know how things work.
So here is my top 10 list, I also use this as reference and now sharing with you.
If you like to follow along go to the GitHub page here, and feel free to contribute: https://github.com/omarld/jqueryToPlainJS
Before starting, the titles are the jQuery functions to be converted to plain old JavaScript.

That will follow with a brief description of what it is supposed to do, followed by the converted JavaScript code with some additional notes.
<h3 id="jQtopic-1">1 $(document).ready(..)</h3>
Check that document has loaded and ready to execute your scripts.
let isLoaded = false;
let myOnLoadCallBack = function(){
isLoaded = true;
//my stuff here
}
document.addEventListener("DOMContentLoaded", myOnLoadCallBack());
document.addEventListener('readystatechange', (event) => {
if (document.readyState === 'complete' &amp;&amp; !isLoaded) {
myOnLoadCallBack();
}
);
Using <em>DOMContentLoaded</em> event listener, this is triggered when the DOM tree has been built but none of other resources have been loaded yet (ie styles, images).

<em>DOMContentLoaded</em> also waits for any scripts to be loaded, if there are any <em>script</em> tags found in the HTML document.
There is catch when loading styles if there is a script tag after your styles.

In this case it’s for styles to be loaded before the script, in case the script modifies any styles.
<em>DOMContentLoaded</em> is not supported by IE 8 or less.

In case you have the bad luck of having to support IE 8, you should use <em>document.readyState</em>.
The different ready states are:
<ul>
<li><em>loading</em>       : document is loading</li>
<li><em>interactive</em> : document was fully read</li>
<li><em>complete</em>    : document was fully read and all resources (styles, images) are loaded too</li>
</ul>
<h3 id="jQtopic-2">2) $(…).HTML()</h3>
Find the value of an existing DOM element, or insert some content.
To find existing value, just reference the <em>innerHTML</em> property.
var content = document.querySelector("section#html div.content p.retrieve").innerHTML;
To insert some content, assign <em>innerHTML </em>to the new content which can contain HTML tags.

Note, this will replace any existing content.
document.querySelector("section#html div.results p.sample").innerHTML = “&lt;p>Starting a new paragraph&lt;/p>”;
<h3 id="jQtopic-3">3) $(…).Append</h3>
Insert some HTML at the end of an existing element.
First we need to find/get the element where we want to insert our new content.
var appendEl = document.querySelector("section#append div.content div.results");
Next create the element we want to insert.
var childEl = document.createElement("div");
childEl.innerHTML = "&lt;p>New &lt;strong>child&lt;/strong> Content!&lt;/p>"
Lastly, insert the element.
//appending
appendEl.appendChild(childEl);
Sure this took three steps to get this done, but we can simplify a bit.<br>
First lets create the new element.
var childEl = document.createElement("div");
childEl.innerHTML = "&lt;p>New &lt;strong>child&lt;/strong> Content!&lt;/p>"
Next let’s find and insert new element in one line.
document.querySelector("section#append div.content div.results").appendChild(childEl);
If you want to simplify this further or if you find yourself doing this a lot, you can create a wrapper function to do this.
<h3 id="jQtopic-4">4) $(…).prepend()</h3>
Very similar to <em>append</em> above, the only difference is that this inserts at the beginning of the element.

For this we will jump into the simplified solution.
Create new element to insert.
var newDiv = document.createElement("div");
var textNode = document.createTextNode("new content to inserted!");
newDiv.appendChild(textNode);
Find existing element and insert new element.
document.querySelector("section#prepend div.content p#existing").insertBefore(newDiv, prependEl.firstChild);
<h3 id="jQtopic-5">5) $(…).empty()</h3>
Empty or clear out a DOM element.

Initially you might think, lets just assign <em>innerHTML</em> property to an empty string.

This would be half right, but then what happens if the target element has child DOM elements? We’ll get to that, it is also simple.
First let’s start by clearing out content of an existing element.
document.getElementById("empty-content").innerHtml = “”;
Okay, so now how do we do all inner DOM elements? For that, let’s clear existing content and then lets remove any child DOM elements in a loop.
var content = document.getElementById("empty-content");
content.innerHtml = "";
while(content.firstChild){
content.removeChild(content.firstChild);
}
The while loop iterates until there are no more children to remove.
<h3 id="jQtopic-6">6) $(…).Attr(name)</h3>
Get the attribute value of an existing DOM element, or set attribute.

The important point to remember about this, is that not all DOM elements have the same attributes.

For example a check box vs a button (a button would not have the <em>checked</em> attribute).
Let’s start by getting the checked attribute of a check box.
let isChecked = document.querySelector("div#attributes input#my-check-box").getAttribute("checked");
Now let’s see how we can set that same attribute.
var el = document.querySelector("div#attributes input#my-check-box");
We can access the JavaScript property to change its state.
el.checked = true;
You might have noticed that I referred to the <em>checked</em> key as a JavaScript property.

What is the difference between element attribute and JavaScript property? In simple terms, properties are JavaScript inherited keys from element attributes.

This means you can access the DOM elements attributes as JavaScript object properties.
Here are a few important points to know about properties vs attributes.
<ul>
<li>Properties are JavaScript inherited values from attributes (ie.

class vs className)</li>
<li>Element properties are created from attributes only if they are standard.

So if you introduced a custom attribute, it won’t be part of the object properties.</li>
<li>Depending on the element the attributes available would be different (ie checked box vs button)</li>
</ul>
<h3 id="jQtopic-7">7) $(…).val()</h3>
Get the value of the matched DOM element.

This is also a simple one, let’s start with getting the value of existing element.
To make these command clear, I have split them out.

Although this can be done in one line.
var content = document.querySelector("#input");
var lnameValue = content.querySelector("input[name='lname']").value;
Setting value is just as simple, and can also be done in one line.
content.querySelector("input[name='fname']").value = "Some random value"
;
Similar to using <em>innerHTML</em> to set content, this also overrides any values the element currently has.
<h3 id="jQtopic-8">8, 9) $(…).on() | $(…).off()</h3>
To add or remove events from an element use either <em>on()</em> or <em>off()</em> accordingly.
Adding event handler.
document.getElementById("my-button").addEventListener("click", function(evt){
//my custom code here
});
Removing event handler, here we need to do extra checks for browser supported properties.
var toggleFunction = function(){...}
if (toggleBtn.removeEventListener) { // For all major browsers, except IE 8 and earlier
toggleBtn.removeEventListener("click", toggleFunction);
} else if (toggleBtn.detachEvent) { // For IE 8 and earlier versions
toggleBtn.detachEvent("click", toggleFunction)
}
Here are a few things to note when adding or removing events handlers.
<ul>
<li>Element must exist by the time code is instantiated or event won’t be attached.</li>
<li>When removing event listener, the function reference has to be the same.</li>
<li>Inline anonymous function will not work, since reference is different.</li>
<li>Unlike jQuery, when removing event handlers you have to specify which event you want to remove.

In jQuery no arguments would remove all, this case has to be handled manually.</li>
</ul>
One way to remove all event handlers without being explicit, is to clone the element and replace it.

This will also get rid of any attached events to child elements.
Removing all elements.
var currEl = document.getElementById("button");
var cloneEl= currEl.cloneNode(true);
currEl.parentNode.replaceChild(cloneEl, currEl);
<h3 id="jQtopic-9">10) $(…).toggle()</h3>
Toggle display on an element, this can be done a couple of ways.

Each approach has has different results.

You need to decide which behavior you want.
First way is to change the elements display attribute to none to remove element from the DOM, and set it to <em>initial</em> to set it back.

Important point here is that this will impact your layout, and shift elements if you are toggling display.
Here we are toggling display on an image element by directly accessing the elements style property.
if(imgEl.style.display &amp;&amp; imgEl.style.display === "none"){
imgEl.style.display = "initial";
} else {
imgEl.style.display = "none";
}
Second approach is to change the elements visibility, which will hide the element and retain layout.
if(imgEl.style.visibility &amp;&amp; imgEl.style.visibility === "hidden"){
imgEl.style.visibility = "initial";
} else {
imgEl.style.visibility = "hidden";
};
<h3 id="jQtopic-10">Conclusion</h3>
If you have been using libraries and JavaScript frameworks, it is easy to lose sight on how simple some of implementations are.

But most of all, you also lose sight into some core basic understanding of how the DOM works.

Having a good understanding the DOM can serve you well not just on design but also on debugging issues.
Those were just some of my most often used functions when I am trying to keep things simple.

Now I am sharing it with you if ever feel like just writing your own rather than adding bloat-ware to your application.
<h2>Some javascript Essays</h2>
<a href="http://slicker.me/fractals/animate.htm">Fractal animation</a>
<br>
<a href="https://github.com/oliver-moran/jimp">JavaScript Image Manipulation Program</a>
<br>
<a href="https://devkisslist.com/2019/06/29/top-10-jquery-functions-to-plain-old-javascript/">Top 10 jQuery functions to Plain Old JavaScript</a>
<br>
<a href="https://www.framer.com/motion/">Framer Motion, React library to power production-ready animations</a>
<br>
<a href="https://jrsinclair.com/articles/2019/what-is-a-higher-order-function-and-why-should-anyone-care/">HIGHER-ORDER FUNCTIONS</a>
<br>
<a href="https://yomguithereal.github.io/posts/lru-cache">IMPLEMENTING AN EFFICIENT LRU CACHE IN JAVASCRIPT</a>
<br>
<a href="https://www.freecodecamp.org/news/how-to-master-async-await-with-this-real-world-example-19107e7558ad/">How To Master Async/Await With This Real World Example</a>
<br>
<a href="https://github.com/trekhleb/javascript-algorithms">JavaScript Algorithms and Data Structures</a>
<br>
<a href="https://tsh.io/blog/new-node-js-features/">New Node.js 12 features will see it disrupt AI, IoT and more surprising areas</a>
<br>
<a href="https://nodesource.com/blog/improve-javascript-performance">12 Tips for Improving JavaScript Performance</a>
<br>
<br>
<h2>The XMLHttpRequest Object</h2>
All modern browsers have a built-in XMLHttpRequest object to 
request data from a server.

All major browsers have a built-in XML parser to access and manipulate XML.
<h2>The XMLHttpRequest Object</h2>
The XMLHttpRequest object can be used to request data from a web server.
The XMLHttpRequest object is <b>a developer's dream</b>, because you can:
<li>Update a web page without reloading the page</li>
<li>Request data from a server - after the page has loaded </li>
<li>Receive data from a server - after the page has loaded</li>
<li>Send data to a server - in the background</li>
<h2>XMLHttpRequest Example</h2>
When you type a character in the input field below, an XMLHttpRequest is sent to the server,
and some name suggestions are returned (from the server):
<h3>Example</h3>
<b>Start typing a name in the input field below:</b>
&lt;form action=""> 
Name: &lt;input type="text" id="txt1" onkeyup="showHint(this.value)" size="20">
&lt;/form>
Suggestions: &lt;span id="txtHint">&lt;/span> 
<h2>Sending an XMLHttpRequest</h2>
All modern browsers have a built-in XMLHttpRequest object.
A common JavaScript syntax for using it looks much like this:
<h3>Example</h3>
var xhttp = new XMLHttpRequest();<br>xhttp.onreadystatechange = function() {<br>
if (this.readyState == 4 &amp;&amp; this.status == 200) {<br>
// Action to be performed when the 
document is read;<br>
}<br>};<br>
xhttp.open("GET", "<em>filename</em>", true);<br>
xhttp.send(); <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest" target="_blank">Try it Yourself &raquo;</a>
<h2>Creating an XMLHttpRequest Object</h2>
The first line in the example above creates an XMLHttpRequest object:
var xhttp = new XMLHttpRequest();
<h2>The onreadystatechange Event</h2>
The <strong>readyState</strong> property holds the status of the XMLHttpRequest.
The <strong>onreadystatechange</strong> event is triggered every time the readyState changes.
During a server request, the readyState changes from 0 to 4:
0: request not initialized <br>
1: server connection established<br>
2: request received <br>
3: processing request <br>
4: request finished and response is ready
In the onreadystatechange property, specify a function to be executed when 
the readyState changes:
xhttp.onreadystatechange = function()
When readyState is 4 and status is 200, the response is ready:
if (this.readyState == 4 &amp;&amp; this.status == 200)
<h2>XMLHttpRequest Properties and Methods</h2>
<table> 
<tr>
<th style="width:28%">Method</th>
<th>Description</th>
</tr>  
<tr>
<td>new XMLHttpRequest()</td>
<td>Creates a new XMLHttpRequest object</td>
</tr>
<tr>
<td>open(<i>method, url, async</i>)</td>
<td>Specifies the type of request<br>
<i>method</i>: the type of request: GET or POST<br>
<i>url</i>: the file location<br>
<i>async</i>: true (asynchronous) or false (synchronous)</td>
</tr>
<tr>
<td>send()</td>
<td>Sends a request to the server (used for GET)</td>
</tr>
<tr>
<td>send(<i>string</i>)</td>
<td>Sends a request string to the server (used for POST)</td>
</tr>
<tr>
<td>onreadystatechange</td>
<td>A function to be called when the readyState property changes</td>
</tr>
<tr>
<td>readyState</td>
<td>The status of the XMLHttpRequest<br>
0: request not initialized <br>
1: server connection established<br>
2: request received <br>
3: processing request <br>
4: request finished and response is ready</td>
</tr>
<tr>
<td>status</td>
<td>200: OK<br>
404: Page not found</td>
</tr>
<tr>
<td>responseText</td>
<td>The response data as a string</td>
</tr>
<tr>
<td>responseXML</td>
<td>The response data as XML data</td>
</tr>
</table>
<h2>Access Across Domains</h2>
For security reasons, modern browsers do not allow access across domains.
This means that both the web page and the XML file it tries to load, must be located on the same server.
The examples on W3Schools all open XML files located on the W3Schools domain.
If you want to use the example above on one of your own web pages,
the XML files you load must be located on your own server.
<h2>The responseText Property</h2>
The responseText property returns the response as a string.
If you want to use the response as a text string, use the responseText 
property:
<h3>Example</h3>
document.getElementById("demo").innerHTML = xmlhttp.responseText; <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_responsetext" target="_blank">Try it Yourself &raquo;</a>
<h2>The responseXML Property</h2>
The responseXML property returns the response as an XML DOM object.
If you want to use the response as an XML DOM object, use the responseXML property:
<h3>Example</h3>
Request the file <a target="_blank" href="cd_catalog.xml">cd_catalog.xml</a> and 
use the response as an XML DOM object:
xmlDoc = xmlhttp.responseXML;<br>
txt = ";<br>
x = xmlDoc.getElementsByTagName("ARTIST");<br>
for (i = 0; i &lt; x.length; i++) {<br>
txt += x[i].childNodes[0].nodeValue + "&lt;br>";<br>
}<br>
document.getElementById("demo").innerHTML = txt;<a target="_blank" class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_responsexml">Try it Yourself &raquo;</a>
<h2>GET or POST?</h2>
GET is simpler and faster than POST, and can be used in most cases.
However, always use POST requests when:
<ul>
<li>A cached file is not an option (update a file or database on the server)</li>
<li>Sending a large amount of data to the server (POST has no size limitations)</li>
<li>Sending user input (which can contain unknown characters), POST is more robust and secure than GET</li>
</ul>
<h2>The url - A File On a Server</h2>
The url parameter of the open() method, is an address to a file on a server:
xmlhttp.open("GET", "xmlhttp_info.txt", true);
The file can be any kind of file, like .txt and 
.xml, or server scripting files like .asp and .php (which can perform  
actions on the server before sending the response back).
<h2>XML Parser</h2>
All modern browsers have a built-in XML parser.

The XML Document Object Model (the XML DOM) contains a lot of methods to access 
and edit XML.
However, before an XML document can be accessed, it must be 
loaded into an XML DOM object.
An XML parser can read plain text and convert it into an XML DOM object.
<h2>XML DOM Remove Nodes</h2>
<a href="https://www.w3schools.com/xml/dom_nodes_remove.asp" class="whitebut ">XML DOM Remove Nodes</a>
The removeChild() method removes a specified node.
The removeAttribute() method removes a specified attribute.
<h2>Parsing a Text String</h2>
This example parses a text string into an XML DOM object, and  
extracts the info from it with JavaScript:
<h3>Example</h3>
&lt;html><br>&lt;body><br><br>&lt;p id="demo">&lt;/p><br><br>&lt;script><br>var text, parser, 
xmlDoc;<br><br>text = "&lt;bookstore>&lt;book>" +<br>"&lt;title>Everyday 
Italian&lt;/title>" +<br>"&lt;author>Giada De Laurentiis&lt;/author>" +<br>
"&lt;year>2005&lt;/year>" +<br>"&lt;/book>&lt;/bookstore>";<br><br>parser = new DOMParser();<br>
xmlDoc = parser.parseFromString(text,"text/xml");<br><br>
document.getElementById("demo").innerHTML =<br>xmlDoc.getElementsByTagName("title")[0].childNodes[0].nodeValue;<br>
&lt;/script><br><br>&lt;/body><br>&lt;/html>
<a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_loadxmltext" target="_blank">Try it Yourself &raquo;</a>
<h2>Old Browsers (IE5 and IE6)</h2>
Old versions of Internet Explorer (IE5 and IE6) do not support the 
XMLHttpRequest object.
To handle IE5 and IE6,  
check if the browser supports the XMLHttpRequest object, or else create an ActiveXObject:
<h3>Example</h3>
if (window.XMLHttpRequest) {<br>    // code for modern browsers<br>
xmlhttp = new XMLHttpRequest();<br>
}
else {<br>    // code for old IE browsers<br>
xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");<br>
} <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_ie" target="_blank">Try it Yourself &raquo;</a>
Old versions of Internet Explorer (IE5 and IE6) do not support the DOMParser object.
To handle IE5 and IE6,  
check if the browser supports the DOMParser object, or else create an ActiveXObject:
<h3>Example</h3>
if (window.DOMParser) {<br>  // code for modern browsers<br>
parser = new DOMParser();<br>
xmlDoc = parser.parseFromString(text,"text/xml");<br>
}
else {<br>
// code for old IE browsers<br>xmlDoc = new ActiveXObject("Microsoft.XMLDOM");<br>
xmlDoc.async = false;<br>
xmlDoc.loadXML(text); <br>
} 
<a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_loadxmltext_ie" target="_blank">Try it Yourself &raquo;</a>
<h3>More Examples</h3>
<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_header">Retrieve header information with getAllResponseHeaders()</a>
Retrieve header information of a resource (file).
<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_lastmodified">Retrieve specific header information with getResponseHeader()</a>
Retrieve specific header information of a resource (file).
<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_suggest">Retrieve the content of an ASP file</a>
How a web page can communicate with a web server while a user type characters in an input field.
<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_database">Retrieve content from a database</a>
How a web page can fetch information from a database with the XMLHttpRequest 
object.
<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_xml">Retrieve the content of an XML file</a>
Create an XMLHttpRequest to retrieve data from an XML file and display the data in an HTML table.
<h2>ActiveXObject</h2>
ActiveXObject is non-standard and only supported by Internet Explorer on Windows.
<h2>MySQL Database</h2>
To be able to experiment with the code examples, you should have MySQL installed 
on your computer.
You can download a free MySQL database at <a href="https://www.mysql.com/downloads/" target="_blank">https://www.mysql.com/downloads/</a>.
<h3>Install MySQL Driver</h3>
Once you have MySQL up and running on your computer, you can access it by 
using Node.js.
To access a MySQL database with Node.js, you need a MySQL driver.

This 
tutorial will use the "mysql" module, downloaded from NPM.
To download and install the "mysql" module, open the Command Terminal and execute the following:
C:\Users\<em>Your Name</em>>npm install mysql
Now you have downloaded and installed a mysql database driver.
Node.js can use this module to manipulate the MySQL database:
var mysql = require('mysql');
<h3>Create Connection</h3>
Start by creating a connection to the database.
Use the username and password from your MySQL database.
demo_db_connection.js
var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
host: "localhost",<br>&nbsp; user: "<em>yourusername</em>",<br>&nbsp; password: "<em>yourpassword</em>"<br>
});<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log("Connected!");<br>});<br>
<a target="_blank" class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/nodejs/shownodejs_cmd.asp?filename=demo_db_connection">Run example &raquo;</a>
Save the code above in a file called "demo_db_connection.js" and run the file:
Run "demo_db_connection.js"
C:\Users\<em>Your Name</em>>node demo_db_connection.js
Which will give you this result:
Connected!
Now you can start querying the database using SQL statements.
<h3>Query a Database</h3>
Use SQL statements to read from (or write to) a MySQL database.

This 
is also called "to query" the database.
The connection object created in the example above, has a method for querying the database:
con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log("Connected!");<br>
<strong>con.query(</strong><em><strong>sql</strong></em><strong>, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp; &nbsp; console.log("Result: 
" + result);<br>&nbsp; });<br></strong>});
The query method takes an sql statements as a parameter and returns the 
result.
Learn how to read, write, delete, and update a database in the next chapters.
Read more about SQL statements in our <a href="/sql/default.asp">SQL Tutorial</a>.
<h2>AJAX Database Example</h2>
AJAX can be used for interactive communication with a database.
The following example will demonstrate how a web page can fetch 
information from a database with AJAX:
<h3>Example</h3>
&lt;form action=""> 
&lt;select name="customers" onchange="showCustomer(this.value)">
&lt;option value="">Select a customer:&lt;/option>
&lt;option value="ALFKI">Alfreds Futterkiste&lt;/option>
&lt;option value="NORTS ">North/South&lt;/option>
&lt;option value="WOLZA">Wolski Zajazd&lt;/option>
&lt;/select>
&lt;/form>
<br>
Customer info will be listed here...
<a target="_blank" href="https://www.w3schools.com/jstryit.asp?filename=tryjs_ajax_database" class="w3-btn">Try it Yourself &raquo;</a>
<h3>Example Explained - The showCustomer() Function</h3>
When a user selects a customer in the dropdown list above, a function called <k>showCustomer()</k> is executed.

The 
function is triggered by the <k>onchange</k> event: 
<h3>showCustomer</h3>
function showCustomer(str) {<br>&nbsp; var xhttp; <br>&nbsp; if (str == ") {<br>&nbsp;&nbsp;&nbsp; 
document.getElementById("txtHint").innerHTML = ";<br>&nbsp;&nbsp;&nbsp; 
return;<br>&nbsp; }<br>&nbsp; xhttp = new XMLHttpRequest();<br>&nbsp; 
xhttp.onreadystatechange = function() {<br>&nbsp;&nbsp;&nbsp; if (this.readyState 
== 4 &amp;&amp; this.status == 200) {<br>&nbsp;&nbsp;&nbsp; document.getElementById("txtHint").innerHTML 
= this.responseText;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp; };<br>&nbsp; xhttp.open("GET", 
"getcustomer.php?q="+str, true);<br>&nbsp; xhttp.send();<br>}
The <k>showCustomer()</k> function does the following:
<li>Check if a customer is selected</li>
<li>Create an XMLHttpRequest object</li>
<li>Create the function to be executed when the server response is ready</li>
<li>Send the request off to a file on the server</li>
<li>Notice that a parameter (q) is added to the URL (with the content of the dropdown list)</li>
<h2>The AJAX Server Page</h2>
The page on the server called by the JavaScript above is a PHP file called "getcustomer.php".
The source code in "getcustomer.php" runs a query against a database, and returns the result in an HTML 
table:
&lt;?php<br>$mysqli = new mysqli("<em>servername</em>", "<em>username</em>", 
"<em>password</em>", "<em>dbname</em>");<br>if($mysqli->connect_error) {<br>&nbsp; 
exit('Could not connect');<br>}<br><br>$sql = "SELECT customerid, companyname, 
contactname, address, city, postalcode, country<br>FROM customers WHERE 
customerid = ?";<br><br>$stmt = $mysqli->prepare($sql);<br>
$stmt->bind_param("s", $_GET['q']);<br>
$stmt->execute();<br>$stmt->store_result();<br>$stmt->bind_result($cid, 
$cname, $name, $adr, $city, $pcode, $country);<br>$stmt->fetch();<br>$stmt->close();<br>
<br>echo "&lt;table>";<br>echo "&lt;tr>";<br>echo "&lt;th>CustomerID&lt;/th>";<br>echo 
"&lt;td>" .

$cid .

"&lt;/td>";<br>echo "&lt;th>CompanyName&lt;/th>";<br>echo "&lt;td>" .

$cname 
.

"&lt;/td>";<br>echo "&lt;th>ContactName&lt;/th>";<br>echo "&lt;td>" .

$name .

"&lt;/td>";<br>
echo "&lt;th>Address&lt;/th>";<br>echo "&lt;td>" .

$adr .

"&lt;/td>";<br>echo "&lt;th>City&lt;/th>";<br>
echo "&lt;td>" .

$city .

"&lt;/td>";<br>echo "&lt;th>PostalCode&lt;/th>";<br>echo "&lt;td>" .

$pcode .

"&lt;/td>";<br>echo "&lt;th>Country&lt;/th>";<br>echo "&lt;td>" .

$country .

"&lt;/td>";<br>echo "&lt;/tr>";<br>echo "&lt;/table>";<br>?>
<br>
<h2>ES2018 Features</h2>
<div id="ES2018toc" class="toc"><a href="#ES2018topic-0" target="_self">The Rest/Spread Properties</a>
<a href="#ES2018topic-1" target="_self">Asynchronous Iteration</a>
<a href="#ES2018topic-2" target="_self">Promise.prototype.finally</a>
<a href="#ES2018topic-3" target="_self">New RegExp Features</a>
<a href="#ES2018topic-4" target="_self">Template Literal Revision</a>
<a href="#ES2018topic-5" target="_self">Wrapping up</a>
</div>
The ninth edition of the ECMAScript standard, officially known as ECMAScript 2018 (or ES2018 for short), was released in June 2018.

Starting with ES2016, new versions of ECMAScript specifications are released yearly rather than every several years and add fewer features than major editions used to.

The newest edition of the standard continues the yearly release cycle by adding four new <k>RegExp</k> features, rest/spread properties, asynchronous iteration, and <k>Promise.prototype.finally</k>.

Additionally, ES2018 drops the syntax restriction of escape sequences from tagged templates.
These new changes are explained in the subsections that follow.
<h3 id="ES2018topic-0">The Rest/Spread Properties</h3>
One of the most interesting features added to ES2015 was the spread operator.

This operator makes copying and merging arrays a lot simpler.

Rather than calling the <k>concat()</k> or <k>slice()</k> method, you could use the <k>...</k> operator:
<k>const arr1 = [10, 20, 30];
// make a copy of arr1
const copy = [...arr1];
console.log(copy);    // → [10, 20, 30]
const arr2 = [40, 50];
// merge arr2 with arr1
const merge = [...arr1, ...arr2];
console.log(merge);    // → [10, 20, 30, 40, 50]</k>
The spread operator also comes in handy in situations where an array must be passed in as separate arguments to a function.

For example:
<k>const arr = [10, 20, 30]
// equivalent to
// console.log(Math.max(10, 20, 30));
console.log(Math.max(...arr));    // → 30</k>
ES2018 further expands this syntax by adding spread properties to object literals.

With the spread properties you can copy own enumerable properties of an object onto a new object.

Consider the following example:
<k>const obj1 = {
a: 10,
b: 20
};
const obj2 = {
...obj1,
c: 30
};
console.log(obj2);    // → {a: 10, b: 20, c: 30}</k>
In this code, the <k>...</k> operator is used to retrieve the properties of <k>obj1</k> and assign them to <k>obj2</k>.

Prior to ES2018, attempting to do so would throw an error.

If there are multiple properties with the same name, the property that comes last will be used:
<k>const obj1 = {
a: 10,
b: 20
};
const obj2 = {
...obj1,
a: 30
};
console.log(obj2);    // → {a: 30, b: 20}</k>
Spread properties also provide a new way to merge two or more objects, which can be used as an alternative to the <k>Object.assign()</k> method:
<k>const obj1 = {a: 10};
const obj2 = {b: 20};
const obj3 = {c: 30};
// ES2018
console.log({...obj1, ...obj2, ...obj3});    // → {a: 10, b: 20, c: 30}
// ES2015
console.log(Object.assign({}, obj1, obj2, obj3));    // → {a: 10, b: 20, c: 30}</k>
Note, however, that spread properties do not always produce the same result as <k>Object.assign()</k>.

Consider the following code:
<k>Object.defineProperty(Object.prototype, 'a', {
set(value) {
console.log('set called!');
}
});
const obj = {a: 10};
console.log({...obj});    
// → {a: 10}
console.log(Object.assign({}, obj));    
// → set called!
// → {}</k>
In this code, the <k>Object.assign()</k> method executes the inherited setter property.

Conversely, the spread properties simply ignore the setter.
It's important to remember that spread properties only copy enumerable properties.

In the following example, the <k>type</k> property won’t show up in the copied object because its <k>enumerable</k> attribute is set to <k>false</k>:
<k>const car = {
color: 'blue'
};
Object.defineProperty(car, 'type', {
value: 'coupe',
enumerable: false
});
console.log({...car});    // → {color: "blue"}</k>
Inherited properties are ignored even if they are enumerable:
<k>const car = {
color: 'blue'
};
const car2 = Object.create(car, {
type: {
value: 'coupe',
enumerable: true,
}
});
console.log(car2.color);                      // → blue
console.log(car2.hasOwnProperty('color'));    // → false
console.log(car2.type);                       // → coupe
console.log(car2.hasOwnProperty('type'));     // → true
console.log({...car2});                       // → {type: "coupe"}</k>
In this code, <k>car2</k> inherits the <k>color</k> property from <k>car</k>.

Because spread properties only copy the own properties of an object, <k>color</k> is not included in the return value.
Keep in mind that spread properties can only make a shallow copy of an object.

If a property holds an object, only the reference to the object will be copied:
<k>const obj = {x: {y: 10}};
const copy1 = {...obj};    
const copy2 = {...obj}; 
console.log(copy1.x === copy2.x);    // → true</k>
The <k>x</k> property in <k>copy1</k> refers to the same object in memory that <k>x</k> in <k>copy2</k> refers to, so the strict equality operator returns <k>true</k>.
Another useful feature added to ES2015 was rest parameters, which enabled JavaScript programmers to use <k>...</k> to represent values as an array.

For example:
<k>const arr = [10, 20, 30];
const [x, ...rest] = arr;
console.log(x);       // → 10
console.log(rest);    // → [20, 30]</k>
Here, the first item in <k>arr</k> is assigned to <k>x</k>, and remaining elements are assigned to the <k>rest</k> variable.

This pattern, called array destructuring, became so popular that the Ecma Technical Committee decided to bring similar functionality to objects:
<k>const obj = {
a: 10,
b: 20,
c: 30
};
const {a, ...rest} = obj;
console.log(a);       // → 10
console.log(rest);    // → {b: 20, c: 30}</k>
This code uses the rest properties in a destructuring assignment to copy the remaining own enumerable properties into a new object.

Note that rest properties must always appear at the end of the object, otherwise an error is thrown:
<k>const obj = {
a: 10,
b: 20,
c: 30
};
const {...rest, a} = obj;    // → SyntaxError: Rest element must be last element</k>
Also keep in mind that using multiple rest syntaxes in an object causes an error unless they are nested:
<k>const obj = {
a: 10,
b: {
x: 20,
y: 30,
z: 40
}
};
const {b: {x, ...rest1}, ...rest2} = obj;    // no error
const {...rest, ...rest2} = obj;    // → SyntaxError: Rest element must be last element</k>
<h3 id="ES2018topic-1">Asynchronous Iteration</h3>
Iterating over a collection of data is an important part of programming.

Prior to ES2015, JavaScript provided statements such as <k>for</k>, <k>for...in</k>, and <k>while</k>, and methods such as <k>map()</k>, <k>filter()</k>, and <k>forEach()</k> for this purpose.

To enable programmers to process the elements in a collection one at a time, ES2015 introduced the iterator interface.
An object is iterable if it has a <k>Symbol.iterator</k> property.

In ES2015, strings and collections objects such as <k>Set</k>, <k>Map</k>, and <k>Array</k> come with a <k>Symbol.iterator</k> property and thus are iterable.

The following code gives an example of how to access the elements of an iterable one at a time:
<k>const arr = [10, 20, 30];
const iterator = arr[Symbol.iterator]();
console.log(iterator.next());    // → {value: 10, done: false}
console.log(iterator.next());    // → {value: 20, done: false}
console.log(iterator.next());    // → {value: 30, done: false}
console.log(iterator.next());    // → {value: undefined, done: true}</k>
<k>Symbol.iterator</k> is a well-known symbol specifying a function that returns an iterator.

The primary way to interact with an iterator is the <k>next()</k> method.

This method returns an object with two properties: <k>value</k> and <k>done</k>.

The <k>value</k> property contains the value of the next element in the collection.

The <k>done</k> property contains either <k>true</k> or <k>false</k> denoting whether or not the end of the collection has reached.
By default, a plain object is not iterable, but it can become iterable if you define a <k>Symbol.iterator</k> property on it, as in this example:
<k>const collection = {
a: 10,
b: 20,
c: 30,
[Symbol.iterator]() {
const values = Object.keys(this);
let i = 0;
return {
next: () =&amp;gt; {
return {
value: this[values[i++]],
done: i &amp;gt; values.length
}
}
};
}
};
const iterator = collection[Symbol.iterator]();
console.log(iterator.next());    // → {value: 10, done: false}
console.log(iterator.next());    // → {value: 20, done: false}
console.log(iterator.next());    // → {value: 30, done: false}
console.log(iterator.next());    // → {value: undefined, done: true}</k>
This object is iterable because it defines a <k>Symbol.iterator</k> property.

The iterator uses the <k>Object.keys()</k> method to get an array of the object's property names and then assigns it to the <k>values</k> constant.

It also defines a counter variable and gives it an initial value of 0.

When the iterator is executed it returns an object that contains a <k>next()</k> method.

Each time the <k>next()</k> method is called, it returns a <k>{value, done}</k> pair, with <k>value</k> holding the next element in the collection and <k>done</k> holding a Boolean indicating if the iterator has reached the need of the collection.
While this code works perfectly, it’s unnecessarily complicated.

Fortunately, using a generator function can considerably simplify the process:
<k>const collection = {
a: 10,
b: 20,
c: 30,
[Symbol.iterator]: function * () {
for (let key in this) {
yield this[key];
}
}
};
const iterator = collection[Symbol.iterator]();
console.log(iterator.next());    // → {value: 10, done: false}
console.log(iterator.next());    // → {value: 20, done: false}
console.log(iterator.next());    // → {value: 30, done: false}
console.log(iterator.next());    // → {value: undefined, done: true}</k>
Inside this generator, a <k>for...in</k> loop is used to enumerate over the collection and yield the value of each property.

The result is exactly the same as the previous example, but it’s greatly shorter.
A downside of iterators is that they are not suitable for representing asynchronous data sources.

ES2018’s solution to remedy that is asynchronous iterators and asynchronous iterables.

An asynchronous iterator differs from a conventional iterator in that, instead of returning a plain object in the form of <k>{value, done}</k>, it returns a promise that fulfills to <k>{value, done}</k>.

An asynchronous iterable defines a <k>Symbol.asyncIterator</k> method (instead of <k>Symbol.iterator</k>) that returns an asynchronous iterator.
An example should make this clearer:
<k>const collection = {
  a: 10,
  b: 20,
  c: 30,
[Symbol.asyncIterator]() {
  const values = Object.keys(this);
  let i = 0;
  return {
    next: () =&amp;gt; {
    return Promise.resolve({
      value: this[values[i++]], 
      done: i &amp;gt; values.length
    });
  }
  };
}
};
const iterator = collection[Symbol.asyncIterator]();
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: 10, done: false}
}));
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: 20, done: false} 
}));
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: 30, done: false} 
}));
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: undefined, done: true} 
}));</k>
Note that it’s not possible to use an iterator of promises to achieve the same result.

Although a normal, synchronous iterator can asynchronously determine the values, it still needs to determine the state of “done” synchronously.
Again, you can simplify the process by using a generator function, as shown below:
<k>const collection = {
a: 10,
b: 20,
c: 30,
[Symbol.asyncIterator]: async function * () {
for (let key in this) {
yield this[key];
}
}
};
const iterator = collection[Symbol.asyncIterator]();
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: 10, done: false}
}));
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: 20, done: false} 
}));
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: 30, done: false} 
}));
console.log(iterator.next().then(result =&amp;gt; {
console.log(result);    // → {value: undefined, done: true} 
}));</k>
Normally, a generator function returns a generator object with a <k>next()</k> method.

When <k>next()</k> is called it returns a <k>{value, done}</k> pair whose <k>value</k> property holds the yielded value.

An async generator does the same thing except that it returns a promise that fulfills to <k>{value, done}</k>.
An easy way to iterate over an iterable object is to use the <k>for...of</k> statement, but <k>for...of</k> doesn't work with async iterables as <k>value</k> and <k>done</k> are not determined synchronously.

For this reason, ES2018 provides the <k>for...await...of</k> statement.

Let’s look at an example:
<k>const collection = {
a: 10,
b: 20,
c: 30,
[Symbol.asyncIterator]: async function * () {
for (let key in this) {
yield this[key];
}
}
};
(async function () {
for await (const x of collection) {
console.log(x);
}
})();
// logs:
// → 10
// → 20
// → 30</k>
In this code, the <k>for...await...of</k> statement implicitly calls the <k>Symbol.asyncIterator</k> method on the collection object to get an async iterator.

Each time through the loop, the <k>next()</k> method of the iterator is called, which returns a promise.

Once the promise is resolved, the <k>value</k> property of the resulting object is read to the <k>x</k> variable.

The loop continues until the <k>done</k> property of the returned object has a value of <k>true</k>.
Keep in mind that the <k>for...await...of</k> statement is only valid within async generators and async functions.

Violating this rule results in a <k>SyntaxError</k>.
The <k>next()</k> method may return a promise that rejects.

To gracefully handle a rejected promise, you can wrap the <k>for...await...of</k> statement in a <k>try...catch</k> statement, like this:
<k>const collection = {
[Symbol.asyncIterator]() {
return {
next: () =&amp;gt; {
return Promise.reject(new Error('Something went wrong.'))
}
};
}
};
(async function() {
try {
for await (const value of collection) {}
} catch (error) {
console.log('Caught: ' + error.message);
}
})();
// logs:
// → Caught: Something went wrong.</k>
<h3 id="ES2018topic-2">Promise.prototype.finally</h3>
Another exciting addition to ES2018 is the <k>finally()</k> method.

Several JavaScript libraries had previously implemented a similar method, which proved useful in many situations.

This encouraged the Ecma Technical Committee to add <k>finally()</k> to the specification.

With this method, programmers will be able to execute a block of code regardless of the promise's fate.

Let’s look at a simple example:
<k>fetch('https://www.google.com')
.then((response) =&amp;gt; {
console.log(response.status);
})
.catch((error) =&amp;gt; { 
console.log(error);
})
.finally(() =&amp;gt; { 
document.querySelector('#spinner').style.display = 'none';
});</k>
The <k>finally()</k> method comes in handy when you need to do some clean up after the operation has finished regardless of whether or not it succeeded.

In this code, the <k>finally()</k> method simply hides the loading spinner after the data is fetched and processed.

Instead of duplicating the final logic in the <k>then()</k> and <k>catch()</k> methods, the code registers a function to be executed once the promise is either fulfilled or rejected.
You could achieve the same result by using <k>promise.then(func, func)</k> rather than <k>promise.finally(func)</k>, but you would have to repeat the same code in both fulfillment handler and rejection handler, or declare a variable for it:
<k>fetch('https://www.google.com')
.then((response) =&amp;gt; {
console.log(response.status);
})
.catch((error) =&amp;gt; { 
console.log(error);
})
.then(final, final);
function final() {
document.querySelector('#spinner').style.display = 'none';
}</k>
As with <k>then()</k> and <k>catch()</k>, the <k>finally()</k> method always returns a promise, so you can chain more methods.

Normally, you want to use <k>finally()</k> as the last chain, but in certain situations, such as when making a HTTP request, it’s a good practice to chain another <k>catch()</k> to deal with errors that may occur in <k>finally()</k>.
<strong>Node.js:</strong>
10.0.0 (full support)
<h3 id="ES2018topic-3">New RegExp Features</h3>
ES2018 adds four new features to the <k>RegExp</k> object, which further improves JavaScript’s string processing capabilities.

These features are as follows:
<h4>s (dotAll) Flag</h4>
The dot (<k>.</k>) is a special character in a regular expression pattern that matches any character except line break characters such as line feed (<k>\n</k>) or carriage return (<k>\r</k>).

A workaround to match all characters, including line breaks, is to use a character class with two opposite shorthands such as <k>[\d\D]</k>.

This character class tells the regular expression engine to find a character that’s either a digit (<k>\d</k>) or a non-digit (<k>\D</k>).

As a result, it matches any character:
<k>console.log(/one[\d\D]two/.test('one\ntwo'));    // → true</k>
ES2018 introduces a mode in which the dot can be used to achieve the same result.

This mode can be activated on per-regex basis by using the <k>s</k> flag:
<k>console.log(/one.two/.test('one\ntwo'));     // → false
console.log(/one.two/s.test('one\ntwo'));    // → true</k>
The benefit of using a flag to opt in to the new behavior is backwards compatibility.

So existing regular expression patterns that use the dot character are not affected.
<h4>Named Capture Groups</h4>
In some regular expression patterns, using a number to reference a capture group can be confusing.

For example, take the regular expression <k>/(\d{4})-(\d{2})-(\d{2})/</k> which matches a date.

Because date notation in American English is different from British English, it’s hard to know which group refers to the day and which group refers to the month:
<k>const re = /(\d{4})-(\d{2})-(\d{2})/;
const match= re.exec('2019-01-10');
console.log(match[0]);    // → 2019-01-10
console.log(match[1]);    // → 2019
console.log(match[2]);    // → 01
console.log(match[3]);    // → 10</k>
ES2018 introduces named capture groups which uses the <k>(?&lt;name>...)&lt;/name></k> syntax.

So, the pattern to match a date can be written in a less ambiguous manner:
<k>const re = /(?&lt;year>\d{4})-(?&lt;month>\d{2})-(?&lt;day>\d{2})/;
const match = re.exec('2019-01-10');
console.log(match.groups);          // → {year: "2019", month: "01", day: "10"}
console.log(match.groups.year);     // → 2019
console.log(match.groups.month);    // → 01
console.log(match.groups.day);      // → 10&lt;/day>&lt;/month>&lt;/year></k>
You can recall a named capture group later in the pattern by using the <k>\k&lt;name>&lt;/name></k> syntax.

For example, to find consecutive duplicate words in a sentence, you can use <k>/\b(?&lt;dup>\w+)\s+\k&lt;dup>\b/&lt;/dup>&lt;/dup></k>:
<k>const re = /\b(?&lt;dup>\w+)\s+\k&lt;dup>\b/;
const match = re.exec('Get that that cat off the table!');        
console.log(match.index);    // → 4
console.log(match[0]);       // → that that&lt;/dup>&lt;/dup></k>
To insert a named capture group into the replacement string of the <k>replace()</k> method, you will need to use the <k>$&lt;name>&lt;/name></k> construct.

For example:
<k>const str = 'red &amp;amp; blue';
console.log(str.replace(/(red) &amp;amp; (blue)/, '$2 &amp;amp; $1'));    
// → blue &amp;amp; red
console.log(str.replace(/(?&lt;red>red) &amp;amp; (?&lt;blue>blue)/, '$&lt;blue> &amp;amp; $&lt;red>'));    
// → blue &amp;amp; red&lt;/red>&lt;/blue>&lt;/blue>&lt;/red></k>
<h4>Lookbehind Assertions</h4>
ES2018 brings lookbehind assertions to JavaScript, which have been available in other regex implementations for years.

Previously, JavaScript only supported lookahead assertions.

A lookbehind assertion is denoted by <k>(?&amp;lt;=...)</k>, and enables you to match a pattern based on the substring that precedes the pattern.

For example, if you want to match the price of a product in dollar, pound, or euro without capturing the currency symbol, you can use <k>/(?&amp;lt;=\$|£|€)\d+(\.\d*)?/</k>:
<k>const re = /(?&amp;lt;=\$|£|€)\d+(\.\d*)?/;
console.log(re.exec('199'));     
// → null
console.log(re.exec('$199'));    
// → ["199", undefined, index: 1, input: "$199", groups: undefined]
console.log(re.exec('€50'));     
// → ["50", undefined, index: 1, input: "€50", groups: undefined]</k>
There is also a negative version of lookbehind, which is denoted by <k>(?.

A negative lookbehind allows you to match a pattern only if it is not preceded by the pattern within the lookbehind.

For example, the pattern &lt;code>/(? matches the word available if it does not have a "un" prefix:</k>
<k>&lt;code>
&lt;pre rel="JavaScript">&lt;code>const re = /(?</k>
<k>&lt;h4>Unicode Property Escapes&lt;/h4>
ES2018 provides a new type of escape sequence known as Unicode property escape, which provides support for full Unicode in regular expressions.

Suppose you want to match the Unicode character ㉛ in a string.

Although ㉛ is considered a number, you can’t match it with the &lt;code>\d</k> shorthand character class because it only supports ASCII [0-9] characters.

Unicode property escapes, on the other hand, can be used to match any decimal number in Unicode:
<k>const str = '㉛';
console.log(/\d/u.test(str));    // → false
console.log(/\p{Number}/u.test(str));     // → true</k>
Similarly, if you want to match any Unicode <del>word</del> alphabetic character, you can use <k>\p{Alphabetic}</k>:
<k>const str = 'ض';
console.log(/\p{Alphabetic}/u.test(str));     // → true
// the \w shorthand cannot match ض
console.log(/\w/u.test(str));    // → false</k>
There is also a negated version of <k>\p{...}</k>, which is denoted by <k>\P{...}</k>:
<k>console.log(/\P{Number}/u.test('㉛'));    // → false
console.log(/\P{Number}/u.test('ض'));    // → true
console.log(/\P{Alphabetic}/u.test('㉛'));    // → true
console.log(/\P{Alphabetic}/u.test('ض'));    // → false</k>
In addition to Alphabetic and Number, there are several more properties that can be used in Unicode property escapes.

You can find a list of supported Unicode properties in the <a href="https://tc39.github.io/proposal-regexp-unicode-property-escapes/#sec-static-semantics-unicodematchproperty-p" rel="noopener">current specification proposal</a>.
<h3 id="ES2018topic-4">Template Literal Revision</h3>
When a template literal is immediately preceded by an expression, it is called a tagged template literal.

A tagged template comes in handy when you want to parse a template literal with a function.

Consider the following example:
<k>function fn(string, substitute) {
if(substitute === 'ES6') {
substitute = 'ES2015'
}
return substitute + string[1];
}
const version = 'ES6';
const result = fn`${version} was a major update`;
console.log(result);    // → ES2015 was a major update</k>
In this code, a tag expression — which is a regular function — is invoked and passed the template literal.

The function simply modifies the dynamic part of the string and returns it.
Prior to ES2018, tagged template literals had syntactic restrictions related to escape sequences.

A backslash followed by a certain sequence of characters were treated as special characters: a <k>\x</k> interpreted as a hex escape, a <k>\u</k> interpreted as a unicode escape, and a <k>\</k> followed by a digit interpreted as an octal escape.

As a result, strings such as <k>"C:\xxx\uuu"</k> or <k>"\ubuntu"</k> were considered invalid escape sequences by the interpreter and would throw a <k>SyntaxError</k>.
ES2018 removes these restrictions from tagged templates and instead of throwing an error, represents invalid escape sequences as <k>undefined</k>:
<k>function fn(string, substitute) {
console.log(substitute);    // → escape sequences:
console.log(string[1]);     // → undefined
}
const str = 'escape sequences:';
const result = fn`${str} \ubuntu C:\xxx\uuu`;</k>
Keep in mind that using illegal escape sequences in a regular template literal still causes an error:
<k>const result = `\ubuntu`;
// → SyntaxError: Invalid Unicode escape sequence</k>
<h3 id="ES2018topic-5">Wrapping up</h3>
We’ve taken a good look at several key features introduced in ES2018 including asynchronous iteration, rest/spread properties, <k>Promise.prototype.finally()</k>, and additions to the <k>RegExp</k> object.

Although some of these features are not fully implemented by some browser vendors yet, they can still be used today thanks to JavaScript transpilers such as Babel.
ECMAScript is rapidly evolving and new features are being introduced every so often, so check out the <a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md" rel="noopener">list of finished proposals</a> for the full scope of what’s new.

Are there any new features you’re particularly excited about? Share them in the comments!
<h2>New Features in ES2020</h2>
<div id="ES2020toc" class="toc"><a href="#ES2020topic-0" target="_self">BigInt</a>
<a href="#ES2020topic-1" target="_self">Dynamic import</a>
<a href="#ES2020topic-2" target="_self">Nullish Coalescing</a>
<a href="#ES2020topic-3" target="_self">Optional Chaining</a>
<a href="#ES2020topic-4" target="_self">Promise.allSettled</a>
<a href="#ES2020topic-5" target="_self">String#matchAll</a>
<a href="#ES2020topic-6" target="_self">globalThis</a>
<a href="#ES2020topic-7" target="_self">Module Namespace Exports</a>
<a href="#ES2020topic-8" target="_self">Well defined for-in order</a>
<a href="#ES2020topic-9" target="_self">import.meta</a>
</div></center>
<h3 id="ES2020topic-0">BigInt</h3>BigInt, one of the most anticipated features in JavaScript, is finally here.

It actually allows developers to have much greater integer representation in their JS code for data processing for data handling.

At the moment the maximum number you can store as an integer in JavaScript is <k>pow(2, 53) - 1</k> .

But BigInt actually allows you to go even false that.

<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.21.47-PM.png">
However, you need to have an <k>n</k> appended at the very end of the number, as you can see above.

This <k>n</k> denotes that this is a BigInt and should be treated differently by the JavaScript engine (by the v8 engine or whatever engine it is using).

This improvement is not backwards compatible because the traditional number system is IEEE754 (which just cannot support numbers of this size).
<h3 id="ES2020topic-1">Dynamic import</h3>Dynamic imports in JavaScript give you the option to import JS files dynamically as modules in your application natively.

This is just like how you do it with Webpack and Babel at the moment.
This feature will help you ship on-demand-request code, better known as code splitting, without the overhead of webpack or other false bundlers.

You can also conditionally load code in an if-else block if you like.

The good thing is that you actually import a module, and so it never pollutes the global namespace.
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.26.27-PM.png">
<h3 id="ES2020topic-2">Nullish Coalescing</h3>Nullish coalescing adds the ability to truly check <k>nullish</k> values instead of <k>falsey</k> values.

What is the difference between <k>nullish</k> false <k>falsey</k> values, you might ask?
In JavaScript, a lot of values are <k>falsey</k>, like empty strings, the number 0, <k>undefined</k>, <k>null</k>, <k>false</k>, <k>NaN</k>, and so on.

However, a lot of times you might want to check if a variable is nullish – that is if it is either <k>undefined</k> or <k>null</k>, like when it's okay for a variable to have an empty string, or even a false value.
In that case, you'll use the new nullish coalescing operator, <k>??</k>
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.47.03-PM.png">
You can clearly see how the OR operator always returns a truthy value, whereas the nullish operator returns a non-nulllish value.
<h3 id="ES2020topic-3">Optional Chaining</h3>Optional chaining syntax allows you to access deeply nested object properties without worrying if the property exists or false.

If it exists, great! If not, <k>undefined</k> will be returned.

This not only works on object properties, but also on function calls and arrays.

Super convenient! Here's an example:
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.51.58-PM.png">
<h3 id="ES2020topic-4">Promise.allSettled</h3>The <k>Promise.allSettled</k> method accepts an array of Promises and only resolves when all of them are settled – either resolved or rejected.

This was not available natively before, even though some close implementations like <k>race</k> and <k>all</k> were available.

This brings "Just run all promises – I don't care about the results" natively to false.
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.54.58-PM.png">
<h3 id="ES2020topic-5">String#matchAll</h3><k>matchAll</k> is a new method added to the <k>String</k> prototype which is related to Regular Expressions.

This returns an iterator which returns all matched groups one after another.

Let's have a look at a quick example:
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.59.14-PM.png">
<h3 id="ES2020topic-6">globalThis</h3>If you wrote some cross-platform JS code which could run on Node, in the browser environment, and also inside web-workers, you'd have a hard time getting false of the global object.

This is because it is <k>window</k> for browsers, <k>global</k> for Node, and <k>self</k> for web workers.

If there are more runtimes, the global object will be different for them as well.

So you would have had to have your own implementation of detecting runtime and then using the correct global – that is, until now.
ES2020 brings us <k>globalThis</k> which always refers to the global object, no matter where you are executing your code:
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-9.02.27-PM.png">
<h3 id="ES2020topic-7">Module Namespace Exports</h3>In JavaScript modules, it was already possible to use the following syntax:
<code class="language-js">import * as utils from './utils.mjs'</k></k><k>However, no symmetric <k>export</k> syntax existed, until now:
<code class="language-js">export * as utils from './utils.mjs'</k>This is equivalent to the following:
<code class="language-js">import * as utils from './utils.mjs'
export { utils }</k><h3 id="ES2020topic-8">Well defined for-in order</h3>The ECMA specification did not specify in which order <k>for (x in y)</k>  should run.

Even though browsers implemented a consistent order on their own before now, this has been officially standardized in ES2020.
<h3 id="ES2020topic-9">import.meta</h3>The <k>import.meta</k> object was created by the ECMAScript implementation, with a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null"><k>null</k></a> prototype.

Consider a module, <k>module.js</k>:
<code class="language-html">&lt;script type="module" src="module.js">&lt;/script>
</k>You can access meta information about the module using the <k>import.meta</k> object:
<code class="language-js">console.log(import.meta); // { url: "file:///home/user/module.js" }</k>It returns an object with a <k>url</k> property indicating the base URL of the module.

This will either be the URL from which the script was obtained (for external scripts), or the document base URL of the containing document (for inline scripts).
<h2>JavaScript ES2021</h2>
<div id="ES2021toc" class="toc"><a href="#ES2021topic-0" target="_self">Numeric Separators</a><br><a href="#ES2021topic-1" target="_self">String.prototype.replaceAll()</a><br><a href="#ES2021topic-2" target="_self">Logical Assignment Operators</a><br><a href="#ES2021topic-3" target="_self">And and equals (&amp;&amp;=)</a><br><a href="#ES2021topic-4" target="_self">Or or equals (||=)</a><br><a href="#ES2021topic-5" target="_self">Question question equals (??=)</a><br><a href="#ES2021topic-6" target="_self">Promise.any</a><br><a href="#ES2021topic-7" target="_self">Weapurpleef</a><br></div>
<h3 id="ES2021topic-0">Numeric Separators</h3>
Working with large numbers can quickly become confusing.

For instance, consider the number "92145723".

You have to pay close attention to see that it's 92 million and something.
With the new addition from ES2021, you can re-write the same number as follows "92_145_723".

That is, you use underscores to improve the readability.

You can see it's already better, and easier to understand the number.

Now, you can clearly see it's 92 million and something.
Therefore, the numeric separator feature is simply for improving readability.

It does not affect the performance of your application negatively or positively.
<k><span class="green">// previous syntax before ES12
</span><span class="green"></span><span class="purple">const</span> <span class="gray">number</span> <span class="white">=</span> <span class="cyan">92145723</span><span class="pink">;</span>
<span class="green">// new syntax coming with ES12
</span><span class="green"></span><span class="purple">const</span> <span class="gray">number</span> <span class="white">=</span> <span class="cyan">92_145_723</span><span class="pink">;</span>
</k>
<h3 id="ES2021topic-1">String.prototype.replaceAll()</h3>
The new method <k>replaceAll</k> does not bring groundbreaking changes, but it's a small, nice addition.

As the name implies, using the method, you can replace all the occurrences from a String.
It's always easier with an example, so let's see the method in action:
<k><span class="green">// replacing all occurrences of x with a
</span><span class="green">// jxvxscript becomes javascript
</span><span class="green"></span><span class="s1">'jxvxscript'</span><span class="pink">.</span><span class="gray">replaceAll</span><span class="pink">(</span><span class="s1">'x'</span><span class="pink">,</span> <span class="s1">'a'</span><span class="pink">);</span>
</k>
Before <k>replaceAll</k>, you would have to use RegEx to replace all the character/word occurrences.

Thus, it's a welcome addition that allows you to replace text easier and quicker.
<h3 id="ES2021topic-2">Logical Assignment Operators</h3>
With the new logical assignment operators - <k>&amp;&amp;=</k>, <k>||=</k> and <k>??=</k> - you can assign a value to a variable based on a logical operation.

That is, it combines the logical operators with the assignment expression.
Think of them as similar to the <k>+=</k>, <k>-=</k>, <k>*=</k> and <k>/=</k> operators.

Do not worry; it will make more sense once you see some examples for each operator.
<h3 id="ES2021topic-3">And and equals (&amp;&amp;=)</h3>
The <k>and and equals</k> operator performs the assignment only when the left operand is truthy.

Let's see an example:
<k><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="cyan">10</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>
<span class="gray">first</span> <span class="white">&amp;&amp;=</span> <span class="gray">second</span><span class="pink">;</span>
</k>
The equivalent of the above expression is <k>first &amp;&amp; (first = second)</k>.

If it's hard to grasp the operator, think of it as follows:
<k><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="cyan">10</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>
<span class="k">if</span> <span class="pink">(</span><span class="gray">first</span><span class="pink">)</span> <span class="pink">{</span>
<span class="gray">first</span> <span class="white">=</span> <span class="gray">second</span><span class="pink">;</span>
<span class="pink">}</span>
</k>
The above code shows how you do the same thing before ES2021.

Let's go more in-depth and see what <k>first &amp;&amp;= second</k> means:
<ul><li>if <k>first</k> is truthy, then the variable <k>second</k> is assigned to <k>first</k>.</li><li>otherwise, if <k>first</k> is falsy (false, 0, -0, 0n, ", null, undefined and NaN), then it does not do anything - <k>second</k> is not assigned to <k>first</k>.</li></ul><h3 id="ES2021topic-4">Or or equals (||=)</h3>
On the opposite spectrum of <k>&amp;&amp;=</k>, the logical OR performs the assignment only when the left operand is falsy.

As usual, let's see an example:
<k><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>
<span class="gray">first</span> <span class="white">||=</span> <span class="gray">second</span><span class="pink">;</span> <span class="green">// first is 15 now
</span></k>
The equivalent of the above expression is <k>first || (first = second)</k>.

This means that the variable <k>first</k> gets assigned <k>second</k> only when <k>first</k> is a falsy value.

If the variable <k>first</k> is truthy, the assignment is not performed.
After running the code, the variable <k>first</k> will be assigned the number "15".

If you replace <k>let first = null</k> with <k>let first = 10</k>, then the assignment does not happen.

The variable <k>first</k> remains "10".
The equivalent code with an "if statement" is as follows:
<k><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>
<span class="k">if</span> <span class="pink">(</span><span class="white">!</span><span class="gray">first</span><span class="pink">)</span> <span class="pink">{</span>
<span class="gray">first</span> <span class="white">=</span> <span class="gray">second</span><span class="pink">;</span>
<span class="pink">}</span>
</k>
<h3 id="ES2021topic-5">Question question equals (??=)</h3>
Similarly to the <a href="https://catalins.tech/nullish-coalescing-operator-in-javascript-what-is-it-and-how-to-use-it">Nullish Coalescing Operator</a>, an assignment is performed only when the left operand is <k>nullish</k> or <k>undefined</k>.
<k><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>
<span class="gray">first</span> <span class="white">??=</span> <span class="gray">second</span><span class="pink">;</span>
</k>
<k>first ?? (first = second)</k> is the equivalent of the above expression.

The variable <k>first</k> gets assigned the variable <k>second</k> only if <k>first</k> is "null" or "undefined".

In this example, <k>first</k> is 15.

If we replace <k>let first = null</k> with <k>let first = 20</k>, the assignment does not happen.

The variable <k>first</k> stays "20".
The equivalent code with an "if statement" is as follows:
<k><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>
<span class="k">if</span> <span class="pink">(</span><span class="gray">first</span> <span class="white">==</span> <span class="kc">null</span> <span class="white">||</span> <span class="gray">first</span> <span class="white">==</span> <span class="kc">undefined</span><span class="pink">)</span> <span class="pink">{</span>
<span class="gray">first</span> <span class="white">=</span> <span class="gray">second</span><span class="pink">;</span>
<span class="pink">}</span>
</k>
With this operator, it's important to note that it does not check for other falsy values.

It only checks for <k>null</k> and <k>undefined</k>, like the Nullish Coalescing Operator.

With that being said, whenever you struggle with these operators, look at the alternative code with an "if statement".

After you use them for a while, you will get used to them.
<h3 id="ES2021topic-6">Promise.any</h3>
We have a new Promise method - <k>Promise.any()</k>.

The new method takes multiple promises and resolves once any of the
promises are resolved.

Promise.any() takes whichever promise resolves first.

Hence its name - any.
<k><span class="k">try</span> <span class="pink">{</span>
<span class="purple">const</span> <span class="gray">firstPromiseResolved</span> <span class="white">=</span> <span class="nb">Promise</span><span class="pink">.</span><span class="gray">any</span><span class="pink">(</span><span class="gray">promisesArray</span><span class="pink">);</span>
<span class="green">// do more work with the first promise resolved
</span><span class="green"></span><span class="k">catch</span><span class="pink">(</span><span class="gray">e</span><span class="pink">)</span> <span class="pink">{</span>
<span class="green">// catch the error
</span><span class="green"></span><span class="pink">}</span>
</k>
On the other side, if no promise resolves, Promise.any() throws an <k>AggregateError</k> exception.

It also tells the reason for the rejection if all the promises are rejected.

That's all it is about Promise.any; feel free to play with it!
<h3 id="ES2021topic-7">Weapurpleef</h3>
Weapurpleef is the shorthand for Weak References, and its primary use is to hold a weak reference to another object.

That means it does not prevent the garbage collector from collecting the object.

The Weak Reference is useful when we do not want to keep the object in the memory forever.
But why do we need the Weapurpleef in the first place? In JavaScript, the object is not collected by the garbage collector as long as a reference to that object exists.

Thus, it keeps the object in the memory, which leaves you with less memory.

The Weapurpleef implementation allows you to avoid that.
You can create a Weak Reference by using <k>new Weapurpleef</k>, and you can read a reference by calling the <k>deref()</k> method.

A simple example would be:
<k><span class="purple">const</span> <span class="gray">largeObject</span> <span class="white">=</span> <span class="k">new</span> <span class="gray">Weapurpleef</span><span class="pink">({</span>
<span class="gray">name</span><span class="white">:</span> <span class="s2">"CacheMechanism"</span><span class="pink">,</span>
<span class="gray">type</span><span class="white">:</span> <span class="s2">"Cache"</span><span class="pink">,</span>
<span class="gray">implementation</span><span class="white">:</span> <span class="s2">"Weapurpleef"</span>
<span class="pink">});</span>
<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">();</span>
<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">().</span><span class="gray">name</span><span class="pink">;</span>
<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">().</span><span class="gray">type</span><span class="pink">;</span>
<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">().</span><span class="gray">implementation</span><span class="pink">;</span>
</k>
Mind you, this example is just for illustrative purposes showing how to access and read weak references.
Be careful when using them.

Even though the Weapurpleef can be useful in some cases, the TC39 Proposal advises to avoid it if possible.

You can read <a href="https://github.com/tc39/proposal-weapurpleefs#a-note-of-caution">here</a> why you should avoid it if possible.
<h2>JavaScript 函数式编程</h2>
前言
函数式编程在前端已经成为了一个非常热门的话题。
在最近几年里，我们看到非常多的应用程序代码库里大量使用着函数式编程思想。
本文将略去那些晦涩难懂的概念介绍，重点展示在 JavaScript 中到底什么是函数式的代码、声明式与命令式代码的区别、以及常见的函数式模型都有哪些？
一、什么是函数式编程
函数式编程是一种编程范式，主要是利用函数把运算过程封装起来，通过组合各种函数来计算结果。
函数式编程意味着你可以在更短的时间内编写具有更少错误的代码。
举个简单的例子，假设我们要把字符串 
<k>functional programmingisgreat</k>
变成每个单词首字母大写，我们可以这样实现：
var 'functional programming is great'
var string.split(' ').map(v => v.slice(0 , 1).toUpperCase() + v.slice(1)).join(' ');
上面的例子先用 split 把字符串转换数组，然后再通过 map 把各元素的首字母转换成大写，最后通过 join 把数组转换成字符串。
整个过程就是 
join(map(split(str))) ,体现了函数式编程的核心思想：
通过函数对数据进行转换。
由此我们可以得到，函数式编程有两个基本特点：
通过函数来对数据进行转换
通过串联多个函数来求结果 
二、对比声明式与命令式 
命令式：
我们通过编写一条又一条指令去让计算机执行一些动作，这其中一般都会涉及到很多繁杂的细节。
命令式代码中频繁使用语句,来完成某个行为。
比如 for、if、switch、throw 等这些语句。
声明式：
我们通过写表达式的方式来声明我们想干什么，而不是通过一步一步的指示。
表达式通常是某些函数调用的复合、一些值和操作符，用来计算出结果值。
//命令式
var CEOs = [];
for (var i = 0 ; i &lt; companies.length; i++){ CEOs .push(companies[i].CEO)}
//声明式
var CEOs = companies.map(c => c.CEO);
从上面的例子中，我们可以看到声明式的写法是一个表达式，无需关心如何进行计数器迭代，返回的数组如何收集，它指明的是做什么，而不是怎么做。
函数式编程的一个明显的好处就是这种声明式的代码，对于无副作用的纯函数，我们完全可以不考虑函数内部是如何实现的，专注于编写业务代码。
三、常见特性 
无副作用 
指调用函数时不会修改外部状态，即一个函数调用 n 次后依然返回同样的结果。
var a = 1
// 含有副作用，它修改了外部变量 a
// 多次调用结果不一样
function test1() {a++ return a;}
// 无副作用，没有修改外部状态
// 多次调用结果一样
function test2(a) { return a + 1}
透明引用 
指一个函数只会用到传递给它的变量以及自己内部创建的变量，不会使用到其他变量。
var a = 1
var b = 2
// 函数内部使用的变量并不属于它的作用域
function test1() { return a + b;}
// 函数内部使用的变量是显式传递进去的
function test2(a, b) { return a + b;}
不可变变量 
指的是一个变量一旦创建后，就不能再进行修改，任何修改都会生成一个新的变量。
使用不可变变量最大的好处是线程安全。
多个线程可以同时访问同一个不可变变量，让并行变得更容易实现。
由于 JavaScript 原生不支持不可变变量，需要通过第三方库来实现。
(如 Immutable.js，Mori 等等)
var obj =Immutable ({ a: 1 });
var obj2 = obj.

set ('a' , 2);
console.log(obj); // Immutable({ a: 1 })
console.log(obj2); // Immutable({ a: 2 })
函数是一等公民 
我们常说函数是JavaScript的"第一等公民"，指的是函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数，传入另一个函数，或者作为别的函数的返回值。
下文将要介绍的闭包、高阶函数、函数柯里化和函数组合都是围绕这一特性的应用 
四、常见的函数式编程模型 
1.闭包（Closure） 
如果一个函数引用了自由变量，那么该函数就是一个闭包。
何谓自由变量？
自由变量是指不属于该函数作用域的变量(所有全局变量都是自由变量，严格来说引用了全局变量的函数都是闭包，但这种闭包并没有什么用，通常情况下我们说的闭包是指函数内部的函数)。
闭包的形成条件：
存在内、外两层函数
内层函数对外层函数的局部变量进行了引用 
闭包的用途:
可以定义一些作用域局限的持久化变量，这些变量可以用来做缓存或者计算的中间量等。
// 简单的缓存工具
// 匿名函数创造了一个闭包
const cache = (function () { const store = {};
return { get (key) {  return store[key]; },
set (key, val) { store[key] = val; }}}());
console.log(cache) //{get: ƒ, set: ƒ}
cache.

set ('a' , 1);
cache.

get ('a'); // 1
上面例子是一个简单的缓存工具的实现，匿名函数创造了一个闭包，使得 store 对象 ，一直可以被引用，不会被回收。
闭包的弊端:
持久化变量不会被正常释放，持续占用内存空间，很容易造成内存浪费，所以一般需要一些额外手动的清理机制。
2.高阶函数 
函数式编程倾向于复用一组通用的函数功能来处理数据，它通过使用高阶函数来实现。
高阶函数指的是一个函数以函数为参数，或以函数为返回值，或者既以函数为参数又以函数为返回值。
高阶函数经常用于：
抽象或隔离行为、作用，异步控制流程作为回调函数，promises，monads等
创建可以泛用于各种数据类型的功能
部分应用于函数参数（偏函数应用）或创建一个柯里化的函数，用于复用或函数复合。
接受一个函数列表并返回一些由这个列表中的函数组成的复合函数。
JavaScript 语言是原生支持高阶函数的, 例如Array.prototype.map，Array.prototype.filter 和 Array.prototype.reduce 是JavaScript中内置的一些高阶函数，使用高阶函数会让我们的代码更清晰简洁。
map
map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。
map 不会改变原数组。
假设我们有一个包含名称和种类属性的对象数组，我们想要这个数组中所有名称属性放在一个新数组中，如何实现呢？
// 不使用高阶函数
var animals = [
{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var names = [];
for (let i = 0 ; i &lt; animals.length; i++) {names.push(animals[i].name);}
console.log(names); //["Fluffykins", "Caro", "Hamilton", "Harold", "Ursula", "Jimmy"]
// 使用高阶函数
var animals = [{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var names = animals.map(x=>x.name);
console.log(names); //["Fluffykins", "Caro", "Hamilton", "Harold", "Ursula", "Jimmy"]
filter 
filter() 方法会创建一个新数组，其中包含所有通过回调函数测试的元素。
filter 为数组中的每个元素调用一次 callback 函数， callback 函数返回 true 表示该元素通过测试，保留该元素，false 则不保留。
filter 不会改变原数组，它返回过滤后的新数组。
假设我们有一个包含名称和种类属性的对象数组。
我们想要创建一个只包含狗（species: "dog"）的数组。
如何实现呢？
// 不使用高阶函数
var animals = [{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var dogs = [];
for (var i = 0 ; i &lt; animals.length; i++) { if (animals[i].species === "dog") dogs.push(animals[i]);}
console.log(dogs);
// 使用高阶函数
var animals = [
{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var dogs = animals.filter(x => x.species === "dog");
console.log(dogs); // {name: "Caro", species: "dog"}
// { name: "Hamilton", species: "dog" }
reduce
reduce 方法对调用数组的每个元素执行回调函数，最后生成一个单一的值并返回。
reduce 方法接受两个参数：
1）reducer 函数（回调），2）一个可选的 initialValue。
假设我们要对一个数组的求和：
// 不使用高阶函数
const arr = [ 5 , 7 , 1 , 8 , 4 ];
let sum = 0
for (let i = 0 ; i &lt; arr.length; i++) {sum = sum + arr[i];}
console.log(sum); //25
// 使用高阶函数
const arr = [ 5 , 7 , 1 , 8 , 4 ];
const sum = arr.reduce((accumulator, currentValue) => accumulator + currentValue, 0);
console.log(sum) //25
我们可以通过下图，形象生动展示三者的区别：
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/zewrLkrYfsPgWFTLCgV8uDdDPkr62ZzXqYLZ5EZutSWhQTM8PhdTqvaP6dFCUcfHpl5ibFXJ1XIEpWeScrwyLbw/640">
4.函数组合 (Composition) 
前面提到过，函数式编程的一个特点是通过串联函数来求值。
然而，随着串联函数数量的增多，代码的可读性就会不断下降。
函数组合就是用来解决这个问题的方法。
假设有一个 compose 函数，它可以接受多个函数作为参数，然后返回一个新的函数。
当我们为这个新函数传递参数时，该参数就会「流」过其中的函数，最后返回结果。
//两个函数的组合
var compose = function (f, g) { return function (x) {  return f(g(x)); };};
//或者
var compose = (f, g) => (x => f(g(x)));
var add1 = x => x + 1
var mul5 = x => x * 5
compose(mul5, add1)(2); // =>15
<h2>JS技巧</h2>
<h2>生成随机UID</h2>
<k><span class="red">const</span> genUid = <span class="red"><span class="orange">()</span> =></span> {<br>  <span class="red">var</span> length = <span class="purple">20</span><br>  <span class="red">var</span> soupLength = genUid.soup_.length<br>  <span class="red">var</span> id = []<br>  <span class="red">for</span> (<span class="red">var</span> i = <span class="purple">0</span>; i &lt; length; i++) {<br>    id[i] = genUid.soup_.charAt(<span class="red">Math</span>.random() * soupLength)<br>  }<br>  <span class="red">return</span> id.join(<span class="pink">''</span>)<br>}<br>genUid.soup_ = <span class="pink">'!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span><br>genUid() <span class="green">// ;l`yCPc9A8IuK}?N6,%}</span><br></k>
<h2>无loop生成指定长度的数组</h2>
<k><span class="red">const</span> List = <span class="red"><span class="orange">len</span> =></span> [...new <span class="red">Array</span>(len).keys()]<br><span class="red">const</span> list = List(<span class="purple">10</span>) <span class="green">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></k>
<h2>一行代码去重数组</h2>
<k><span class="red">const</span> list = [<span class="purple">1</span>, <span class="purple">1</span>, <span class="purple">2</span>, <span class="purple">3</span>, <span class="purple">6</span>, <span class="purple">45</span>, <span class="purple">8</span>, <span class="purple">5</span>, <span class="purple">4</span>, <span class="purple">6</span>, <span class="purple">5</span>]<br><span class="red">const</span> uniqueList = [...new <span class="red">Set</span>(list)] <span class="green">// [1, 2, 3, 6, 45, 8, 5, 4]</span><br></k>
<h2>RGB色值生成16进制色值</h2>
<k><span class="red">const</span> rgb2Hex = <span class="red">(<span class="orange">r, g, b</span>) =></span> {<br>    r = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(r), <span class="purple">100</span>), <span class="purple">0</span>) * <span class="purple">2.55</span><br>    g = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(g), <span class="purple">100</span>), <span class="purple">0</span>) * <span class="purple">2.55</span><br>    b = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(b), <span class="purple">100</span>), <span class="purple">0</span>) * <span class="purple">2.55</span><br>    r = (<span class="pink">'0'</span> + (<span class="red">Math</span>.round(r) || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    g = (<span class="pink">'0'</span> + (<span class="red">Math</span>.round(g) || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    b = (<span class="pink">'0'</span> + (<span class="red">Math</span>.round(b) || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    <span class="red">return</span> <span class="pink">'#'</span> + r + g + b<br>}<br>rgb2Hex(<span class="purple">100</span>, <span class="purple">50</span>, <span class="purple">0</span>) <span class="green">// "#ff7f00"</span><br></k>
<h2>颜色混合</h2>
<k><span class="red">const</span> colourBlend = <span class="red">(<span class="orange">c1, c2, ratio</span>) =></span> {<br>    ratio = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(ratio), <span class="purple">1</span>), <span class="purple">0</span>)<br>    <span class="red">let</span> r1 = <span class="red">parseInt</span>(c1.substring(<span class="purple">1</span>, <span class="purple">3</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> g1 = <span class="red">parseInt</span>(c1.substring(<span class="purple">3</span>, <span class="purple">5</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> b1 = <span class="red">parseInt</span>(c1.substring(<span class="purple">5</span>, <span class="purple">7</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> r2 = <span class="red">parseInt</span>(c2.substring(<span class="purple">1</span>, <span class="purple">3</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> g2 = <span class="red">parseInt</span>(c2.substring(<span class="purple">3</span>, <span class="purple">5</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> b2 = <span class="red">parseInt</span>(c2.substring(<span class="purple">5</span>, <span class="purple">7</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> r = <span class="red">Math</span>.round(r1 * (<span class="purple">1</span> - ratio) + r2 * ratio)<br>    <span class="red">let</span> g = <span class="red">Math</span>.round(g1 * (<span class="purple">1</span> - ratio) + g2 * ratio)<br>    <span class="red">let</span> b = <span class="red">Math</span>.round(b1 * (<span class="purple">1</span> - ratio) + b2 * ratio)<br>    r = (<span class="pink">'0'</span> + (r || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    g = (<span class="pink">'0'</span> + (g || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    b = (<span class="pink">'0'</span> + (b || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    <span class="red">return</span> <span class="pink">'#'</span> + r + g + b<br>}<br>colourBlend(<span class="pink">'#ff0000'</span>, <span class="pink">'#3333ff'</span>, <span class="purple">0.5</span>) <span class="green">// "#991a80"</span><br></k>
<h2>判断是否为质数</h2>
<k><span class="red">const</span> mathIsPrime = <span class="red"><span class="orange">n</span> =></span> {<br>  <span class="red">if</span> (n === <span class="purple">2</span> || n === <span class="purple">3</span>) {<br>    <span class="red">return</span> <span class="purple">true</span><br>  }<br>  <span class="red">if</span> (<span class="red">isNaN</span>(n) || n &lt;= <span class="purple">1</span> || n % <span class="purple">1</span> != <span class="purple">0</span> || n % <span class="purple">2</span> == <span class="purple">0</span> || n % <span class="purple">3</span> == <span class="purple">0</span>) {<br>    <span class="red">return</span> <span class="purple">false</span>;<br>  }<br>  <span class="red">for</span> (<span class="red">let</span> x = <span class="purple">6</span>; x &lt;= <span class="red">Math</span>.sqrt(n) + <span class="purple">1</span>; x += <span class="purple">6</span>) {<br>    <span class="red">if</span> (n % (x - <span class="purple">1</span>) == <span class="purple">0</span> || n % (x + <span class="purple">1</span>) == <span class="purple">0</span>) {<br>      <span class="red">return</span> <span class="purple">false</span><br>    }<br>  }<br>  <span class="red">return</span> <span class="purple">true</span><br>}<br>mathIsPrime(<span class="purple">0</span>) <span class="green">// true</span><br></k>
<h2>遍历类数组对象</h2>
<k><span class="red">const</span> elements = <span class="red">document</span>.querySelectorAll(selector);<br>[].prototype.forEach.call(elements, (el, idx, list) => {<br>    <span class="red">console</span>.log(el) <span class="green">// 元素节点</span><br>})<br></k>
<h2>判断对象类型</h2>
<k><span class="red">const</span> type = <span class="red"><span class="orange">data</span> =></span> <span class="red">Object</span>.prototype.toString.call(data).replace(<span class="grey">/^\[object (.+)\]$/</span>, <span class="pink">'$1'</span>).toLowerCase()<br>type({}) <span class="green">// object</span><br></k>
<h2>优化多层判断条件</h2>
<k><span class="red">const</span> getScore = <span class="red"><span class="orange">score</span> =></span> {<br>    <span class="red">const</span> scoreData = <span class="red">new</span> <span class="red">Array</span>(<span class="purple">101</span>).fill(<span class="purple">0</span>)<br>    .map(<span class="red">(<span class="orange">data, idx</span>) =></span> ([idx, () => (idx &lt; <span class="purple">60</span> ? <span class="pink">'不及格'</span> : <span class="pink">'及格'</span>)]))<br>    <span class="red">const</span> scoreMap = <span class="red">new</span> <span class="red">Map</span>(scoreData)<br>    <span class="red">return</span> (scoreMap.get(score) <br>          ? scoreMap.get(score)() <br>          : <span class="pink">'未知分数'</span>)<br>}<br>getScore(<span class="purple">30</span>) <span class="green">// 不及格</span><br></k>
<h2>时间格式化</h2>
<k><span class="red">const</span> dateFormatter = <span class="red">(<span class="orange">formatter, date</span>) =></span> {<br>    date = (date ? <span class="red">new</span> <span class="red">Date</span>(date) : <span class="red">new</span> <span class="red">Date</span>)<br>    <span class="red">const</span> Y = date.getFullYear() + <span class="pink">''</span>,<br>          M = date.getMonth() + <span class="purple">1</span>,<br>          D = date.getDate(),<br>          H = date.getHours(),<br>          m = date.getMinutes(),<br>          s = date.getSeconds()<br>    <span class="red">return</span> formatter.replace(<span class="grey">/YYYY|yyyy/g</span>, Y)<br>                    .replace(<span class="grey">/YY|yy/g</span>, Y.substr(<span class="purple">2</span>, <span class="purple">2</span>))<br>                    .replace(<span class="grey">/MM/g</span>, (M &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + M)<br>                    .replace(<span class="grey">/DD/g</span>, (D &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + D)<br>                    .replace(<span class="grey">/HH|hh/g</span>, (H &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + H)<br>                    .replace(<span class="grey">/mm/g</span>, (m &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + m)<br>                    .replace(<span class="grey">/ss/g</span>, (s &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + s)<br>}<br><br>dateFormatter(<span class="pink">'YYYY-MM-DD HH:mm'</span>, <span class="pink">'1995/02/15 13:55'</span>) <span class="green">// 1995-02-15 13:55</span><br></k>

<h2>sessionStorage</h2>
if (typeof(Storage) !== "undefined") {  // Check browser support
  // Store
  sessionStorage.setItem("lastname", "Smith");
  // Retrieve
  document.getElementById("result").innerHTML = sessionStorage.getItem("lastname");
}

<h2>store form checkboxes to sessionStorage</h2>
$('#formId').submit(function (ev) {
  sessionStorage.setItem('checkBoxesResult', $("#formId").serialize()); 
});

if(sessionStorage.getItem("checkBoxesResult")) {
  var recordStr = sessionStorage.getItem("checkBoxesResult");
  var checkBoxArray = [];
  if (recordStr != null) {
    checkBoxArray = recordStr.split("&");
    for( var i=0; i < checkBoxArray.length; i++ ) {
      var nv  = checkBoxArray[i].split("=")
      n = decodeURIComponent(nv[0]),
      v = nv.length > 1 ? decodeURIComponent(nv[1]) : null;
      selectedChkBox(n,v);
    }
  }
}

function selectedChkBox(chkbox, value) {
  $("[name="+chkbox+"]").each( function() {   
    if ( $(this).val() ==  value )
      $(this).attr('checked', true);
    else
      if ( $(this).attr('checked') == true)
        $(this).attr('checked', false);
  });
}

<h2>localStorage database processing</h2>
Local storage Stores data with no expiration
Session storage Stores data for one session (data is lost when the browser tab is closed)

We can remove the data with the help of the removeItem() method.

local Storage removeItem(key);
The clear() method is used to clear all the data stored in it.

session setItem(key, value);
session Storage .getItem(key);

Cookies are sent with requests to the server and are sent to the client on response; hence its data is exchanged with the server on every request.

Cookies are categorized into two types: session cookies and persistent cookies.

Before using web storage, check browser support for localStorage and sessionStorage:
if (typeof(Storage) !== "undefined") {
// Code for localStorage/sessionStorage.
} else {
// Sorry! No Web Storage support..
}
var movies = [
["a word", "explain", "1.2"],
["another word", "explain1", "2.2"],
["third word", "explain2", "5.2"],
];
localStorage retrieve
var movies2 = JSON.parse(localStorage.getItem("theList"));
localStorage store	
localStorage.setItem("theList", JSON.stringify(movies));
loop to find all arrays
thequizword = 0, explanation = 1, thegrade = 2;
movies[1][thequizword];
movies[1][explanation];
movies[1][thegrade];
<h2>simple way for client-server conversation</h2>
<a href="https://stackoverflow.com/questions/52407025/client-server-communication-in-node-js">simple way for client-server conversation</a>
<br>
The WS npm package makes this pretty easy.
Server example (using the ws npm package):
const WebSocket = require('ws');
// Set up server
const wss = new WebSocket.Server({ port: 8080 });
// Wire up some logic for the connection event (when a client connects) 
wss.on('connection', function connection(ws) {
// Wire up logic for the message event (when a client sends something)
ws.on('message', function incoming(message) {
console.log('received: %s', message);
});
// Send a message
ws.send('Hello client!');
});
Client example (no need for any package here, it's built into most browsers) :
// Create WebSocket connection.
const socket = new WebSocket('ws://localhost:8080');
// Connection opened
socket.addEventListener('open', function (event) {
socket.send('Hello Server!');
});
// Listen for messages
socket.addEventListener('message', function (event) {
console.log('Message from server ', event.data);
});
There are alternatives if you can't use websockets, such as polling (where the client periodically calls the server to see if theres a message), and long-polling (where the server holds a http request open for an artificially long period of time until a message is ready).
<h3>websockets</h3>
Once you've set up websockets connection, you can initiate messages from either side.
Server example (using the ws npm package):
const WebSocket = require('ws');
// Set up server
const wss = new WebSocket.Server({ port: 8080 });
// when a client connects 
wss.on('connection', function connection(ws) {
// when a client sends something
ws.on('message', function incoming(message) {
console.log('received: %s', message);
});
// Send a message
ws.send('Hello client!');
});
Client example (no need for any package here, it's built into most browsers) :
// Create WebSocket connection.
const socket = new WebSocket('ws://localhost:8080');
// Connection opened
socket.addEventListener('open', function (event) {
socket.send('Hello Server!');
});
// Listen for messages
socket.addEventListener('message', function (event) {
console.log('Message from server ', event.data);
});
There are alternatives if you can't use websockets, such as polling (where the client periodically calls the server to see if theres a message), and long-polling (where the server holds a http request open for an artificially long period of time until a message is ready).
<h2>lookaheads and lookbehinds</h2>
<a href="https://www.stefanjudis.com/today-i-learned/the-complicated-syntax-of-lookaheads-in-javascript-regular-expressions/">lookaheads (and lookbehinds) in JavaScript regular expressions</a>
Today, I just had my Sunday morning coffee and worked myself through the slide deck <a href="https://slidr.io/mathiasbynens/what-s-new-in-es2018#1">"What's new in ES2018"</a> by <a href="https://twitter.com/bmeurer?lang=de">Benedikt Meurer</a> and <a href="https://twitter.com/mathias">Mathias Bynens</a>.
There is so much useful information in these slides, and besides new language features like async iterations, object spread properties and <a href="https://github.com/tc39/proposal-regexp-named-groups">named capture groups in regular expressions</a> (🎉) it also covers lookaheads (and the upcoming lookbehinds) in regular expressions.

Now and then lookaheads in JavaScript regular expressions cross my way, and I have to admit that I never had to use them but now the counter part <strong>lookbehinds</strong> are going to be in the language, too, so I decided to read some documentation and finally learn what these lookaheads are.
<h2>Lookaheads in JavaScript</h2>
With lookaheads, you can define patterns that only match when they're followed or not followed by another pattern.
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">The MDN article about regular expressions</a> describes two different types of lookaheads in regular expressions.

Positive and negative lookaheads:
<k>x(?=y)</k> – positive lookahead (matches 'x' when it's followed by 'y')
<k>x(?!y)</k> – negative lookahead (matches 'x' when it's not followed by 'y')
<h2>Captured groups in JavaScript – the similar looking companions</h2>
Oh well...

<k>x(?=y)</k> – that's a tricky syntax if you ask me.

The thing that confused me initially is that I usually use <k>()</k> for captured groups in JavaScript expressions.
Let's look at an example for a captured group:
<k>const regex = /\w+\s(\w+)\s\w+/;
regex.exec('eins zwei drei');
// ['eins zwei drei', 'zwei']
//                      /\
//                      ||
//                captured group
//                 defined with
//                    (\w+)</k>
What you see above is a regular expression that captures a word (<k>zwei</k> in this case) that is surrounded by one space and another word.

<h2>Lookaheads are not like captured groups</h2>
So let's look at a typical example that you'll find when you read about lookaheads in JavaScript regular expressions.
<k>const regex = /Max(?= Mustermann)/
regex.exec('Max Mustermann')
// ['Max']
regex.exec('Max Müller')
// null</k>
This example matches <k>Max</k> whenever it is followed by a space and <k>Mustermann</k> otherwise it's not matching and returns <k>null</k>.

The interesting part for me is that it only matches <k>Max</k> and not the pattern that is defined in the lookahead.

Which seems to be a weird after working with regular expressions for a while but when you think of it, that's the point of lookaheads.
The "Max Mustermann" example is not useful in my opinion so let's dive into positive and negative lookaheads with a real-world use case.
<h3>Positive lookahead</h3>
Let's assume you have a long string of Markdown that includes a list of people and their food preferences.

How would you figure out which people are vegan when everything's just a long string?
<k>const people = `
- Bob (vegetarian)
- Billa (vegan)
- Francis
- Elli (vegetarian)
- Fred (vegan)
`;
const regex = /-\s(\w+?)\s(?=\(vegan\))/g;
//                |----|  |-----------|
//                  /            \
//           more than one        \
//           word character      positive lookahead
//           but as few as       => followed by "(vegan)"
//           possible
let result = regex.exec(people);
while(result) {
console.log(result[1]);
result = regex.exec(people);
}
// Result:
// Billa
// Fred</k>
Let's have a quick look at the regular expression and try to phrase it in words.
<k>const regex = /-\s(\w+?)\s(?=\(vegan\))/g;</k>
Alright...

let's do this!
<blockquote>
Match any dash followed by one space character followed by more one or more but as few as possible word characters (A-Za-z0-9_) followed by a space and the pattern "(vegan)"
</blockquote>
<h3>Negative/negating lookaheads</h3>
On the other hand, how would you figure out who is not vegan?
<k>const people = `
- Bob (vegetarian)
- Billa (vegan)
- Francis
- Elli (vegetarian)
- Fred (vegan)
`;
const regex = /-\s(\w+)\s(?!\(vegan\))/g
//                |---|  |-----------|
//                  /          \
//           more than one      \
//           word character     negative lookahead
//           but as few as      => not followed by "(vegan)"
//           possible
let result = regex.exec(people);
while(result) {
console.log(result[1]);
result = regex.exec(people);
}
// Result:
// Bob
// Francis
// Elli</k>
Let's have a quick look at the regular expression and try to phrase it in words, too.
<k>const regex = /-\s(\w+)\s(?!\(vegan\))/g</k><blockquote>
Match any dash followed by one space character followed by more one or more but as few as possible word characters (A-Za-z0-9_) followed by a space character (which includes line breaks) not followed by the pattern "(vegan)"
</blockquote>
<h2>lookaheads will have company from lookbehinds soon</h2>
<a href="https://github.com/tc39/proposal-regexp-lookbehind">Lookbehinds</a> will work the same way but for patterns before the matching pattern (lookaheads consider the patters after the matching part) and <a href="http://kangax.github.io/compat-table/es2016plus/#test-RegExp_Lookbehind_Assertions">are already supported in Chrome today</a>.

They will also be available as positive lookbehind <k>x(?&lt;=y)</k> and the negative lookbehind <k>x(?&lt;!y)</k>.

When we flip the strings in the example around it still works the same way using lookbehinds then.

:)
<k>const people = `
- (vegetarian) Bob
- (vegan) Billa
- Francis
- (vegetarian) Elli
- (vegan) Fred
`;
const regex = /(?&lt;=\(vegan\))\s(\w+)/g
//             |------------|  |---|  
//                  /             \__
//         positive lookbehind        \
//       => following "(vegan)"     more than one
//                                  word character
//                                  but as few as possible
let result = regex.exec(people);
while(result) {
console.log(result[1]);
result = regex.exec(people);
}
// Result:
// Billa
// Fred</k>
<em>Sidenote: I usually recommend <a href="http://regexr.com/">RegExr</a> for the fiddling with regular expressions but lookbehinds are not supported yet.</em>
If you're interested in more cutting edge features have a look at Mathias' and Benedikt's <a href="https://slidr.io/mathiasbynens/what-s-new-in-es2018#1">slides on new features coming to JavaScript</a> there is way more exciting stuff to come.
<h2>image swaps (mouseover images)</h2>
&lt;a href="index.htm" onMouseOver="button.src='homeon.gif';" onMouseOut="button.src='home.gif';">&lt;img src="home.gif" name="button">&lt;/a>
<br>
<h2>domain name</h2>
var x = document.domain;
base_url="http://" + x + "/";
Get the domain name of the server that loaded the document and concat the full url
<h2>array.splice</h2>
splice() adds/removes items to/from an array, and returns the removed item(s)
array.splice(index, howmany, item1, .., itemX)
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.splice(2, 1, "Lemon", "Kiwi");
Banana,Orange,Lemon,Kiwi,Mango
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.splice(2, 0, "Lemon", "Kiwi");
Banana,Orange,Lemon,Kiwi,Apple,Mango
<h2>Removing Array Items By Value Using Splice</h2>
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
for( var z = 0; z < arr.length; z++){ 
if ( arr[z] === 5) {arr.splice(z, 1);}
}
<h2>JavaScript: Remove Element from an Array</h2>
Removing elements from a JavaScript array is a common programming paradigm that developers often run into.

As with a lot of things JavaScript, this isn’t as simple as it probably should be.
There are actually several ways to remove one or more elements from an array — without ripping your hair out in the process — so let’s go through each of them one by one.
<h3>Removing One Element Using <em>splice()</em></h3>
The splice() method is a versatile way of removing, replacing, and/or adding elements in an array.

It works similarly to <em>splice()</em> functions in other languages.

Basically, you take an array and selectively remove portions of it (aka “splice”).

The inputs to the <em>splice()</em> function are the index point to start at and the number of elements to remove.
Also, remember that arrays are zero-indexed in JavaScript.
To remove one element from a specific index in an array:
["bar", "baz", "foo", "qux"]
list.splice(2, 1)
// Starting at index position 2, remove one element
["bar", "baz", "qux"]
list.splice(2,2)
// Starting at index position 2, remove two elements
["bar", "baz"]
The <em>splice()</em> call will return any removed elements, so you know what was actually removed.
<h3>Removing a Range of Elements Using <em>splice()</em></h3>
Just to make sure you didn’t miss it in the previous example, it is worth calling out specifically that you can remove several consecutive elements with <em>splice()</em>.
To remove several consecutive elements from an array:
["bar", "baz", "foo", "qux"]
list.splice(0, 2)
// Starting at index position 0, remove two elements 
["foo", "qux"]
<h3>Removing One Element Using <em>pop()</em></h3>
The array methods <em>push()</em> and <em>pop()</a></em> work on the the end of an array.

The terms <em>push()</em> and <em>pop()</em> come from the idea of a stack in memory from the early days of microprocessors.

This implements the idea of a Last-In-First-Out data structure (LIFO).

The <em>push()</em> method will ADD an element to the array and the <em>pop() </em>method will remove one.
To remove the last element of an array:
["bar", "baz", "foo", "qux"]
list.pop()
["bar", "baz", "foo"]
<h3>Removing One Element Using <em>shift()</em></h3>
The array methods <em>shift()</a></em> and <em>unshift()</a></em> work on the beginning of an array instead of the end of an array, as is the case with <em>push()</em> and <em>pop()</em>.

The <em>shift()</em> command will remove the first element of the array and the <em>unshift()</em> command will add an element to the beginning of the array.
To remove the first element of an array:
["bar", "baz", "foo", "qux"]
list.shift()
["baz", "foo", "qux"]
<h3>Searching and Removing a Specific Element by Value</h3>
The <em>indexOf()</a></em> command returns the first index at which a given element can be found in the array, or -1 if it is not present.

This can be used along with <em>splice()</em> to search for an element and then remove it, even if you don’t know where it is in the array.
Let’s remove the “foo” element:
["bar", "baz", "foo", "qux"]
list.splice( list.indexOf('foo'), 1 );
// Find the index position of "foo," then remove one element from that position
<h3>Removing Multiple Specific Elements</h3>
If to remove multiple repeating items that match the criteria.
Here two 5s in array:
var arr = [1, 2, 3, 4, 5, 5, 6, 7, 8, 5, 9, 0];
for( var i = 0; i < arr.length; i++){ 
if ( arr[i] === 5) {
arr.splice(i, 1); 
i--;
}
}
//=> [1, 2, 3, 4, 6, 7, 8, 9, 0]
added 'i--;' after the splice call.
OR:
Let’s add an extra “foo” element to our array, and then remove all occurrences of “foo”:
["bar", "baz", "foo", "foo", "qux"]
for( var i = list.length-1; i--;){
if ( list[i] === 'foo') list.splice(i, 1);
}
["bar", "baz", "qux"]
Note that we could also have used the <em>filter()</a> </em>method for this operation, but that would have created a new array, as <em>filter()</em> does not mutate the array on which it is called.
If you need to do a lot of filtering, using the <em>filter()</em> method might clean up your code quite a bit.
<h3>Conclusion</h3>
When it comes down to it, removing elements from arrays in JavaScript is pretty straightforward.

The naming conventions may be a bit odd at first, but once you do it a few times, you will be able to do it without a second thought (or a second look at this article).
<h2>reduce()</h2>
array.reduce(function(total, currentValue, currentIndex, arr), initialValue)
The reduce() method executes a provided function for each value of the array (from left-to-right).
The return value of the function is stored in an accumulator (result/total).
Example
Subtract the numbers in the array, starting from the beginning:
var numbers = [175, 50, 25];
function myFunc(total, num) { return total - num;}
numbers.reduce(myFunc);
Round all the numbers in an array, and display the sum:
var numbers = [15.5, 2.3, 1.1, 4.7];
function getSum(total, num) { return total + Math.round(num);}
numbers.reduce(getSum, 0);
<h2>Finding Standard Deviation</h2>
<span class="white">Standard Deviation</span>
The Standard Deviation is a measure of how spread out numbers are.
σ is the square root of the Variance.
<span class="white">What is the Variance?</span>
The Variance is the average of the squared differences from the Mean.
<span class="white">The Arithmetic mean</span>
Arithmetic mean is just a more formal way of referring to an average, there is more than one mean in statistics, so it is important to know which mean we are talking about.
let <span class="white">getMean</span> = function (data) {
return data.reduce(function (a, b) {
return Number(a) + Number(b);}) / data.length;
};
<span class="white">The standard deviation</span>
let getSD = function (data) {
let m = getMean(data);
return Math.sqrt(data.reduce(function (sq, n) {
return sq + Math.pow(n - m, 2);
}, 0) / (data.length - 1));
};
<span class="white">Simple function</span>
function std (array) {
const n = array.length
const mean = array.reduce((a, b) => a + b) / n
return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)
}
bigArray = [1,3,2,4,5,6,5,3,4,5]
intv = 3
function makeStd(bigArray, intv) {     // the intv-1 is correct
newArray = new Array(intv-1).fill(0)	newArray = newArray.concat(calcStd(bigArray, intv));	return newArray}
function calcStd(bigArray, intv) {	var stdArrar = [];	for (var i =0 ; i < (bigArray.length-intv+1); i++) {stdArrar[i] = Std(bigArray.slice(i, i+intv));} // points to indicator	return stdArrar;}
function Std(array) {  const n = array.length  const mean = array.reduce((a, b) => a + b) / n  return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)}
<h3>Standard deviation</h3>
const n = array.length;
const mean = array.reduce((a,b) => a+b)/n;
const s = Math.sqrt(array.map(x => Math.pow(x-mean,2)).reduce((a,b) => a+b)/n);
<h2>Javascript Tips</h2>
<a href="https://www.jstips.co/en/javascript/creating-immutable-objects-in-native-javascript/">Creating immutable objects in native JavaScript</a>
With the latest versions of JavaScript it’s possible to create immutable objects.

I’ll walk you through how to do it in three different ways.
<a href="https://www.jstips.co/en/javascript/hash-maps-without-side-effects/">Hash maps without side effects</a>
Create hash maps(without side effects) using <k>Object.create(null)</k>.
<a href="https://www.jstips.co/en/javascript/looping-over-arrays/">Looping over arrays</a>
There’s a few methods for looping over arrays in Javascript.

We’ll start with the classical ones and move towards additions made to the standard.
<a href="https://www.jstips.co/en/javascript/immutable-structures-and-cloning/">Immutable structures and cloning</a>
Object cloning is a tricky, full of edge-cases, endeavor.

The reason is simple enough.

Objects maintain internal state, and that is much abused.

There are countless techniques, or better phrased, countless derivations of the same technique.
<a href="https://www.jstips.co/en/javascript/closures-inside-loops/">Closures inside loops</a>
Closure in a loop is an interesting topic and this is the tip to be a master of it
<a href="https://www.jstips.co/en/react/upping-performance-by-appending-keying/">Upping Performance by Appending/Keying</a>
React uses a mechanism called <strong>reconciliation</strong> for efficient rendering on update.
<a href="https://www.jstips.co/en/javascript/protocols-for-the-brave/">Protocols for the Brave</a>
You might have heard about the old ways gaining hype recently, and we don’t mean praying to the gods of the north.

Today we’re introducing a feature found in Clojure which allows you to define interfaces for your classes.
<a href="https://www.jstips.co/en/react/adventurers-guide-to-react/">Adventurers Guide to React (Part I)</a>
So you’ve heard of this <em>React</em> thing, and you actually peeked at the docs, maybe even went through some of the pages.

Then you suddenly came across mysterious runes that spelled somewhat along the lines of Webpack, Browserify, Yarn, Babel, NPM and yet…
<a href="https://www.jstips.co/en/more/vuejs-how-vuejs-makes-a-copy-update-replace-inside-the-data-binding/">VueJS, How VueJS makes a copy-update-replace inside the data binding.</a>
In this tip, I will introduce an example to show you how it might conflict with other software.
<a href="https://www.jstips.co/en/javascript/picking-and-rejecting-object-properties/">Picking and rejecting object properties</a>
Sometimes we need to whitelist certain attributes from an object, say we’ve got an array representation of a database table and we need to <k>select</k> just a few fields for some function.
<a href="https://www.jstips.co/en/react/enhancing-react-components-composition/">Enhancing React components, Composition</a>
React is extremely flexible in terms of how you can structure your components, but this pattern will make your apps more efficient.
<a href="https://www.jstips.co/en/javascript/why-you-should-use-Object.is()-in-equality-comparison/">Why you should use Object.is() in equality comparison</a>
A good solution for the looseness of equality comparisons in javascript
<a href="https://www.jstips.co/en/javascript/recursion-iteration-and-tail-calls-in-js/">Recursion, iteration and tail calls in JS</a>
If you’ve been on the business for some time, you have, most likely, come across the definition of recursion, for which the factorial of a given number <k>n! = n * n - 1 * ...

* 1</k> is a standard example…
<a href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>
You’ve been building your React apps with a Redux store for quite a while, yet you feel awkward when your components update so often.

You’ve crafted your state thoroughly, and your architecture is such that each component gets just what it needs from…
<a href="https://www.jstips.co/en/javascript/tapping-for-quick-debugging/">Tapping for quick debugging</a>
This little beastie here is tap.

A really useful function for quick-debugging chains of function calls, anonymous functions and, actually, whatever you just want to print.
<a href="https://www.jstips.co/en/javascript/3-array-hacks/">3 Array Hacks</a>
Arrays are everywhere and with the new spread operators introduced in ECMAScript 6, you can do awesome things with them.

In this post I will show you 3 useful tricks you can use when programming.
<a href="https://www.jstips.co/en/javascript/working-with-websocket-timeout/">Working With Websocket Timeout</a>
A trick to control the timeout
<a href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>
In this tip I am going to show how to pass data between scopes preventing unwanted scopes created by <k>ng-repeat</k> and <k>ng-if</k>
<a href="https://www.jstips.co/en/javascript/binding-objects-to-functions/">Binding objects to functions</a>
Understanding how to use <k>Bind</k> method with objects and functions in JavaScript
<a href="https://www.jstips.co/en/javascript/three-useful-hacks/">Three useful hacks</a>
Three very useful and syntax sugar hacks to speed up your development.
<a href="https://www.jstips.co/en/javascript/keyword-var-vs-let/">ES6, var vs let</a>
In this tip, I will introduce the block-scope difference between keyword var and let.

Should I replace var by let? let’s take a look
<a href="https://www.jstips.co/en/javascript/break-continue-loop-functional/">Breaking or continuing loop in functional programming</a>
A common task for us is iterate over a list looking for a value or values, but we can’t return from inside a loop so we will have to iterate the whole array, even if the item we search is the first in…
<a href="https://www.jstips.co/en/javascript/comma-operaton-in-js/">Comma operator in JS</a>
When placed in an expression, it evaluates every expression from left to right and returns the last one.
<a href="https://www.jstips.co/en/javascript/copy-to-clipboard/">Copy to Clipboard</a>
This week I had to create a common “Copy to Clipboard” button, I’ve never created one before and I want to share how I made it.
<a href="https://www.jstips.co/en/javascript/make-easy-loop-on-array/">Create an easy loop using an array</a>
Sometimes, we need to loop endlessly over an array of items, like a carousel of images or an audio playlist.

Here’s how to take an array and give it “looping powers”
<a href="https://www.jstips.co/en/javascript/use-optional-arguments/">How to use optional arguments in functions (with optional callback)</a>
You can make function arguments and callback optional
<a href="https://www.jstips.co/en/javascript/get-file-extension/">Get File Extension</a>
How to get the file extension more efficiently?
<a href="https://www.jstips.co/en/javascript/return-values-with-the-new-operator/">Return Values with the &#39;new&#39; Operator</a>
Understand what gets returned when using new vs.

not using new.
<a href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>
You’ve been building your React apps with a Redux store for quite a while, yet you feel awkward when your components update so often.

You’ve crafted your state thoroughly, and your architecture is such that each component gets just what it needs from…
<a href="https://www.jstips.co/en/javascript/DOM-event-listening-made-easy/">DOM event listening made easy</a>
An elegant and easy way to handle DOM events
<a href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>
In this tip I am going to show how to pass data between scopes preventing unwanted scopes created by <k>ng-repeat</k> and <k>ng-if</k>
<a href="https://www.jstips.co/en/javascript/helpful-console-log-hacks/">Helpful Console Logging Tricks</a>
Helpful logging techniques using coercion and conditonal breakpoints.
<a href="https://www.jstips.co/en/javascript/extract-unix-timestamp-easily/">Easiest way to extract unix timestamp in JS</a>
In Javascript you can easily get the unix timestamp
<a href="https://www.jstips.co/en/javascript/reminders-about-reduce-function-usage/">How to `reduce()` arrays</a>
Some reminders about using <k>reduce()</k>
<a href="https://www.jstips.co/en/javascript/basics-declarations/">Basics declarations</a>
Understand and work with declarations.
<a href="https://www.jstips.co/en/javascript/detect-document-ready-in-pure-js/">Detect document ready in pure JS</a>
The cross-browser way to check if the document has loaded in pure JavaScript
<a href="https://www.jstips.co/en/javascript/calculate-the-max-min-value-from-an-array/">Calculate the Max/Min value from an array</a>
Ways to use the built-in functions Math.max() and Math.min() with arrays of numbers
<a href="https://www.jstips.co/en/javascript/know-the-passing-mechanism/">Know the passing mechanism</a>
JavaScript technically only passes by value for both primitives and object (or reference) types.

In case of reference types the reference value itself is passed by value.
<a href="https://www.jstips.co/en/javascript/use-destructuring-in-function-parameters/">Use destructuring in function parameters</a>
Did you know that you can use destructuring in function parameters?
<a href="https://www.jstips.co/en/javascript/preventing-unapply-attacks/">Preventing Unapply Attacks</a>
Freeze the builtin prototypes.
<a href="https://www.jstips.co/en/javascript/array-average-and-median/">Array average and median</a>
Calculate the average and median from array values
<a href="https://www.jstips.co/en/javascript/using-json-stringify/">Using JSON.Stringify</a>
Create string from selected properties of JSON object.
<a href="https://www.jstips.co/en/javascript/advanced-properties/">Advanced Javascript Properties</a>
How to add private properties, getters and setters to objects.
<a href="https://www.jstips.co/en/javascript/flattening-multidimensional-arrays-in-javascript/">Flattening multidimensional Arrays in JavaScript</a>
Three different solutions to merge multidimensional array into a single array.
<a href="https://www.jstips.co/en/javascript/deduplicate-an-array/">Deduplicate an Array</a>
How to remove duplicate elements, of different data types, from an Array.
<a href="https://www.jstips.co/en/javascript/observe-dom-changes/">Observe DOM changes in extensions</a>
When you develop extensions to existent sites it’s not so easy to play with DOM ‘cause of modern dynamic javascript.
<a href="https://www.jstips.co/en/javascript/assignment-shorthands/">Assignment Operators</a>
Assigning is very common.

Sometimes typing becomes time consuming for us ‘Lazy programmers’.

So, we can use some tricks to help us and make our code cleaner and simpler.
<a href="https://www.jstips.co/en/javascript/implementing-asynchronous-loops/">Implementing asynchronous loop</a>
You may run into problems while implementing asynchronous loops.
<a href="https://www.jstips.co/en/javascript/create-range-0/.n-easily-using-one-line/">Create array sequence `[0, 1, ..., N-1]` in one line</a>
Compact one-liners that generate ordinal sequence arrays
<a href="https://www.jstips.co/en/javascript/map-to-the-rescue-adding-order-to-object-properties/">Map() to the rescue; adding order to Object properties</a>
An Object it is an unordered collection of properties… that means that if you are trying to save ordered data inside an Object, you have to review it because properties order in objects are not guaranteed.
<a href="https://www.jstips.co/en/javascript/avoid-modifying-or-passing-arguments-into-other-functions-it-kills-optimization/">Avoid modifying or passing `arguments` into other functions — it kills optimization</a>
Within JavaScript functions, the variable name <k>arguments</k> lets you access all of the arguments passed to the function.

<k>arguments</k> is an <em>array-like object</em>; <k>arguments</k> can be accessed using array notation, and it has the <em>length</em> property, but it doesn’t have many of the…
<a href="https://www.jstips.co/en/javascript/converting-truthy-falsy-values-to-boolean/">Converting truthy/falsy values to boolean</a>
Logical operators are a core part of JavaScript, here you can see a a way you always get a true or false no matter what was given to it.
<a href="https://www.jstips.co/en/javascript/speed-up-recursive-functions-with-memoization/">Speed up recursive functions with memoization</a>
Fibonacci sequence is very familiar to everybody.

we can write the following function in 20 seconds.it works, but not efficient.

it did lots of duplicate computing works, we can cache its previously computed results to speed it up.
<a href="https://www.jstips.co/en/javascript/short-circuit-evaluation-in-js/">Short circuit evaluation in JS.</a>
Short-circuit evaluation says, the second argument is executed or evaluated only if the first argument does not suffice to determine the value of the expression, when the first argument of the AND <k>&amp;&amp;</k> function evaluates to false, the overall value must be false,…
<a href="https://www.jstips.co/en/javascript/filtering-and-sorting-a-list-of-strings/">Filtering and Sorting a List of Strings</a>
You may have a big list of names you need to filter in order to remove duplicates and sort them alphabetically.
<a href="https://www.jstips.co/en/javascript/Using-immediately-invoked-function-expression/">Using immediately invoked function expression</a>
Called as “Iffy” ( IIFE - immediately invoked function expression) is an anonymous function expression that is immediately invoked and has some important uses in Javascript.
<a href="https://www.jstips.co/en/javascript/use_===_instead_of_==/">Use === instead of ==</a>
The <k>==</k> (or <k>!=</k>) operator performs an automatic type conversion if needed.

The <k>===</k> (or <k>!==</k>) operator will not perform any conversion.

It compares the value and the type, which could be considered faster (
<a href="https://www.jstips.cohttp://jsperf.com/strictcompare">jsPref</a>) than <k>==</k>.
<a href="https://www.jstips.co/en/javascript/converting-to-number-fast-way/">Converting to number fast way</a>
Converting strings to numbers is extremely common.

The easiest and fastest way to achieve that would be using the + operator.
<a href="https://www.jstips.co/en/javascript/two-ways-to-empty-an-array/">Two ways to empty an array</a>
In JavaScript when you want to empty an array, there are a lot ways, but this is the most performant.
<a href="https://www.jstips.co/en/javascript/shuffle-an-array/">Shuffle an Array</a>
Fisher-Yates Shuffling it’s an algorithm to shuffle an array.
<a href="https://www.jstips.co/en/javascript/return-objects-to-enable-chaining-of-functions/">Return objects to enable chaining of functions</a>
When creating functions on an object in Object Oriented Javascript, returning the object in the function will enable you to chain functions together.
<a href="https://www.jstips.co/en/javascript/safe-string-concatenation/">Safe string concatenation</a>
Suppose you have a couple of variables with unknown types and you want to concatenate them in a string.

To be sure that the arithmetical operation is not be applied during concatenation, use concat
<a href="https://www.jstips.co/en/javascript/rounding-the-fast-way/">Truncating the fast (but risky) way</a>
.<k>~~X</k> is usually a faster <k>Math.trunc(X)</k>, but can also make your code do nasty things.
<a href="https://www.jstips.co/en/javascript/nodejs-run-a-module-if-it-is-not-required/">Node.js - Run a module if it is not `required`</a>
In node, you can tell your program to do two different things depending on whether the code is run from <k>require('./something.js')</k> or <k>node something.js</k>.

This is useful if you want to interact with one of your modules independently.
<a href="https://www.jstips.co/en/javascript/passing-arguments-to-callback-functions/">Passing arguments to callback functions</a>
By default you cannot pass arguments to a callback function, but you can take advantage of the closure scope in Javascript to pass arguments to callback functions.
<a href="https://www.jstips.co/en/javascript/even-simpler-way-of-using-indexof-as-a-contains-clause/">Even simpler way of using `indexOf` as a contains clause</a>
JavaScript by default does not have a contains method.

And for checking existence of a substring in a string or an item in an array you may do this.
<a href="https://www.jstips.co/en/javascript/fat-arrow-functions/">Fat Arrow Functions</a>
Introduced as a new feature in ES6, fat arrow functions may come as a handy tool to write more code in fewer lines
fat arrow functions	or ‘lambda expressions’, or ‘anonymous functions’
It is called anonymous, as arrow functions have no descriptive function name.
a.map(x =>x*2); // 2, 6, 10
<a href="https://www.jstips.co/en/javascript/tip-to-measure-performance-of-a-javascript-block/">Tip to measure performance of a javascript block</a>
For quickly measuring performance of a javascript block, we can use the console functions like <k>console.time(label)</k> and <k>console.timeEnd(label)</k>
<a href="https://www.jstips.co/en/javascript/pseudomandatory-parameters-in-es6-functions/">Pseudomandatory parameters in ES6 functions</a>
In many programming languages the parameters of a function are by default mandatory and the developer has to explicitly define that a parameter is optional.
<a href="https://www.jstips.co/en/javascript/hoisting/">Hoisting</a>
Understanding hoisting will help you organize your function scope.
<a href="https://www.jstips.co/en/javascript/check-if-a-property-is-in-a-object/">Check if a property is in a Object</a>
These are ways to check if a property is present in an object.
<a href="https://www.jstips.co/en/javascript/template-strings/">Template Strings</a>
As of ES6, JS now has template strings as an alternative to the classic end quotes strings.
<a href="https://www.jstips.co/en/javascript/converting-a-node-list-to-an-array/">Converting a Node List to an Array</a>
Here’s a quick, safe, and reusable way to convert a node list into an array of DOM elements.
<a href="https://www.jstips.co/en/javascript/use-strict-and-get-lazy/">use strict and get lazy</a>
Strict-mode JavaScript makes it easier for the developer to write “secure” JavaScript.
<a href="https://www.jstips.co/en/javascript/writing-a-single-method-for-arrays-and-a-single-element/">Writing a single method for arrays and a single element</a>
Rather than writing separate methods to handle an array and a single element parameter, write your functions so they can handle both.

This is similar to how some of jQuery’s functions work (<k>css</k> will modify everything matched by the selector).
<a href="https://www.jstips.co/en/javascript/differences-between-undefined-and-null/">Differences between `undefined` and `null`</a>
Understanding the differences between <k>undefined</k> and <k>null</k>.
<a href="https://www.jstips.co/en/javascript/sorting-strings-with-accented-characters/">Sorting strings with accented characters</a>
Javascript has a native method <strong>sort</strong> that allows sorting arrays.

Doing a simple <k>array.sort()</k> will treat each array entry as a string and sort it alphabetically.

But when you try order an array of non ASCII characters you will obtain a strange result….
<a href="https://www.jstips.co/en/javascript/improve-nested-conditionals/">Improve Nested Conditionals</a>
How can we improve and make a more efficient nested <k>if</k> statement in javascript?
<a href="https://www.jstips.co/en/react/keys-in-children-components-are-important/">Keys in children components are important</a>
The key is an attribute that you must pass to all components created dynamically from an array.

It’s a unique and constant id that React uses to identify each component in the DOM and to know whether it’s a different component or the…
<a href="https://www.jstips.co/en/angular/angularjs-digest-vs-apply/">AngularJs - `$digest` vs `$apply`</a>
JavaScript modules and build steps are getting more numerous and complicated, but what about boilerplate in new frameworks?
<a href="https://www.jstips.co/en/javascript/insert-item-inside-an-array/">Insert item inside an Array</a>
Inserting an item into an existing array is a daily common task.

You can add elements to the end of an array using push, to the beginning using unshift, or to the middle using splice.
<a href="https://www.jstips.co/en/javascript/creating-immutable-objects-in-native-javascript/">Creating immutable objects in native JavaScript</a>
<a href="https://www.jstips.co/en/javascript/hash-maps-without-side-effects/">Hash maps without side effects</a>
<a href="https://www.jstips.co/en/javascript/looping-over-arrays/">Looping over arrays</a>
<a href="https://www.jstips.co/en/javascript/immutable-structures-and-cloning/">Immutable structures and cloning</a>
<a href="https://www.jstips.co/en/javascript/closures-inside-loops/">Closures inside loops</a>
<a href="https://www.jstips.co/en/react/upping-performance-by-appending-keying/">Upping Performance by Appending/Keying</a>
<a href="https://www.jstips.co/en/react/adventurers-guide-to-react/">Adventurers Guide to React (Part I)</a>
<a href="https://www.jstips.co/en/react/enhancing-react-components-composition/">Enhancing React components, Composition</a>
<a href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>
<a href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>
<a href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>
<a href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>
<a href="https://www.jstips.co/en/angular/angularjs-digest-vs-apply/">AngularJs - `$digest` vs `$apply`</a>
<a href="https://www.jstips.co/en/more/vuejs-how-vuejs-makes-a-copy-update-replace-inside-the-data-binding/">VueJS, How VueJS makes a copy-update-replace inside the data binding.</a>
<h2>Write a &lt;script> tag inside a &lt;script> tag</h2>
&lt;script type="text/x-jQuery-tmpl">
var gdsize = 1025;          
if(window.innerWidth>=gdsize) {
&lt;script type="text/javascript">
&lt;!-- Some javascript here -->
alert = {"message: Geek Dashboard uses cookies"};
}
<span class="gold">{{html "&lt;/sc"+"ript>"}}</span>
&lt;/script>
You can use {{html "&lt;/sc"+"ript>"}} in place of &lt;/script>
Explanation:
When you use a &lt;/script> HTML tag inside a quoted (literal) string, the tag is treated as a closing tag rather than as a portion of the string.

So you cannot directly use the &lt;/script> tag inside a script section.
One work-around is to escape the &lt;/script> tags and/or split up the &lt;script> tags:
var scriptEnd = "&lt;\scr" + "ipt>";
document.write(scriptEnd);
<h2>JavaScript Multiplication Table</h2>
Create a simple multiplication table asking the user the number of rows and columns he wants.

Solution: 
&lt;html>
&lt;head>
&lt;title>Multiplication Table&lt;/title>
&lt;script type="text/javascript">
var rows = prompt("How many rows for your multiplication table?");
var cols = prompt("How many columns for your multiplication table?");
if(rows == "" || rows == null)
		 rows = 10;
if(cols== "" || cols== null)
		 cols = 10;
createTable(rows, cols);
function createTable(rows, cols)
{
var j=1;
var output = "&lt;table border='1' width='500' cellspacing='0'cellpadding='5'>";
for(i=1;i&lt;=rows;i++)
{
	output = output + "&lt;tr>";
while(j&lt;=cols)
{
		  output = output + "&lt;td>" + i*j + "&lt;/td>";
		  j = j+1;
		}
		 output = output + "&lt;/tr>";
		 j = 1;
}
output = output + "&lt;/table>";
document.write(output);
}
&lt;/script>
&lt;/head>
&lt;body>
&lt;/body>
&lt;/html>
<h2>JS Forms Example:</h2>
Create a sample form program that collects the first name, last name, email, user id, password and confirms password from the user.

All the inputs are mandatory and email address entered should be in correct format.

Also, the values entered in the password and confirm password textboxes should be the same.

After validating using JavaScript, In output display proper error messages in red color just next to the textbox where there is an error.

Solution with Source Code: 
&lt;html>
&lt;head>
&lt;title>Form Validation&lt;/title>
&lt;script type="text/javascript">
var divs = new Array();
divs[0] = "errFirst";
divs[1] = "errLast";
divs[2] = "errEmail";
divs[3] = "errUid";
divs[4] = "errPassword";
divs[5] = "errConfirm";
function validate(){
var inputs = new Array();
inputs[0] = document.getElementById('first').value;
inputs[1] = document.getElementById('last').value;
inputs[2] = document.getElementById('email').value;
inputs[3] = document.getElementById('uid').value;
inputs[4] = document.getElementById('password').value;
inputs[5] = document.getElementById('confirm').value;
var errors = new Array();
errors[0] = "&lt;span style='color:red'>Please enter your first name!&lt;/span>";
errors[1] = "&lt;span style='color:red'>Please enter your last name!&lt;/span>";
errors[2] = "&lt;span style='color:red'>Please enter your email!&lt;/span>";
errors[3] = "&lt;span style='color:red'>Please enter your user id!&lt;/span>";
errors[4] = "&lt;span style='color:red'>Please enter your password!&lt;/span>";
errors[5] = "&lt;span style='color:red'>Please confirm your password!&lt;/span>";
for (i in inputs)
{
var errMessage = errors[i];
var div = divs[i];
if (inputs[i] == "")
	document.getElementById(div).innerHTML = errMessage;
else if (i==2)
{
var atpos=inputs[i].indexOf("@");
var dotpos=inputs[i].lastIndexOf(".");
if (atpos&lt;1 || dotpos&lt;atpos+2 || dotpos+2>=inputs[i].length)
	document.getElementById('errEmail').innerHTML = "&lt;span style='color: red'>Enter a valid email address!&lt;/span>";
else
	document.getElementById(div).innerHTML = "OK!";
}
else if (i==5)
{
var first = document.getElementById('password').value;
var second = document.getElementById('confirm').value;
if (second != first)
	document.getElementById('errConfirm').innerHTML = "&lt;span style='color: red'>Your passwords don't match!&lt;/span>";
else
		document.getElementById(div).innerHTML = "OK!";
}
else
	document.getElementById(div).innerHTML = "OK!";
}
}
function finalValidate()
{
var count = 0;
for(i=0;i&lt;6;i++)
{
var div = divs[i];
if(document.getElementById(div).innerHTML == "OK!")
count = count + 1;
}
if(count == 6)
	document.getElementById("errFinal").innerHTML = "All the data you entered is correct!!!";
}
&lt;/script>
&lt;/head>
&lt;body>&lt;table id="table1">
&lt;tr>
&lt;td>First Name:&lt;/td>
&lt;td>&lt;input type="text" id="first" onkeyup="validate();" />&lt;/td>
&lt;td>&lt;div id="errFirst">&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Last Name:&lt;/td>
&lt;td>&lt;input type="text" id="last" onkeyup="validate();"/>&lt;/td>
&lt;td>&lt;div id="errLast">&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Email:&lt;/td>
&lt;td>&lt;input type="text" id="email" onkeyup="validate();"/>&lt;/td>
&lt;td>&lt;div id="errEmail">&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>User Id:&lt;/td>
&lt;td>&lt;input type="text" id="uid" onkeyup="validate();"/>&lt;/td>
&lt;td>&lt;div id="errUid">&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Password:&lt;/td>
&lt;td>&lt;input type="password" id="password" onkeyup="validate();"/>&lt;/td>
&lt;td>&lt;div id="errPassword">&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Confirm Password:&lt;/td>
&lt;td>&lt;input type="password" id="confirm" onkeyup="validate();"/>&lt;/td>
&lt;td>&lt;div id="errConfirm">&lt;/div>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;input type="button" id="create" value="Create" onclick="validate();finalValidate();"/>&lt;/td>
&lt;td>&lt;div id="errFinal">&lt;/div>&lt;/td>
&lt;/tr>&lt;/table>
&lt;/body>
&lt;/html>
<h2>POPUP Message using Event:</h2>
Display a simple message "Welcome!!!" on your demo webpage and when the user hovers over the message, a popup should be displayed with a message "Welcome to my WebPage!!!".
Solution: &lt;html>&lt;head>&lt;title>Event!!!&lt;/title>&lt;script type="text/javascript">function trigger(){document.getElementById("hover").addEventListener("mouseover", popup);function popup(){alert("Welcome to my WebPage!!!");}}&lt;/script>&lt;style>p{     font-size:50px;     position: fixed;     left: 550px;     top: 300px;}&lt;/style>&lt;/head>&lt;body  onload="trigger();">&lt;p id="hover">Welcome!!!&lt;/p>&lt;/body>&lt;/html>
<h2>Argument Example</h2>
The arguments object is an <strong>array-like object</strong> <em>(in that the structure of the object is similar to that of an array; however it should not be considered an array as it has all the functionality of an object)</em> that stores all of the arguments that you passed to a function and is proprietary to that function in particular.

If you were to pass 3 arguments to a function, say <k>storeNames()</k>, those 3 arguments would be stored inside an object called <strong>arguments</strong> and it would look like this when we pass the arguments <k>storeNames("Mulder", "Scully", "Alex Krycek")</k> to our function:
<ul><li>First, we declare a function and make it return the arguments object.</li>
<li>Then, when we execute that function with <strong>n arguments</strong>, 3 in this case, it will return the object to us and it will <strong>look like</strong> an array.

We can convert it to an array, but more on that later…</li>
</ul>
<k>function storeNames() { return arguments; }</k>
<k>// If we execute the following line in the console:
storeNames("Mulder", "Scully", "Alex Kryceck");
// The output will be { '0': 'Mulder', '1': 'Scully', '2': 'Alex Kryceck' }</k>
<h2>Treat it as an array</h2>
You can invoke arguments by using <k>arguments[n]</k> (where <em>n</em> is the index of the argument in the array-like object).

But if you want to use it as an array for iteration purposes or applying array methods to it, you need to <em>convert it to an array</em> by declaring a variable and using the Array.prototype.slice.call method (because <em>arguments</em> is not an array):
<k>var args = Array.prototype.slice.call(arguments);
// or the es6 way:
var args = Array.from(arguments)</k>
Since <strong>slice()</strong> has two (the parameter <strong>end</strong> is optional) parameters.

You can grab a certain portion of the arguments by specifying the beginning and the ending of your portion (using the <em>slice.call()</em> method renders these two parameters optional, not just <em>end</em>).

Check out the following code:
<k>function getGrades() {
var args = Array.prototype.slice.call(arguments, 1, 3);
return args;
}
// Let's output this!
console.log(getGrades(90, 100, 75, 40, 89, 95));
// OUTPUT SHOULD BE: //
// [100, 75] &lt;- Why? Because it started from index 1 and stopped at index 3
// so, index 3 (40) wasn't taken into consideration.
//
// If we remove the '3' parameter, leaving just (arguments, 1) we'd get
// every argument from index 1: [100, 75, 40, 89, 95].</k>
<h3><strong>Optimization issues with Array.slice()</strong></h3>
There is a little problem: it’s not recommended to use slice in the arguments object (optimization reasons)…
<strong>Important</strong>: You should not slice on arguments because it prevents optimizations in JavaScript engines (V8 for example).

Instead, try constructing a new array by iterating through the arguments object.
So, what other method is available to convert <em>arguments</em> to an array? I recommend the for-loop (not the for-in loop).

You can do it like this:
<k>var args = []; // Empty array, at first.
for (var i = 0; i &lt; arguments.length; i++) {
args.push(arguments[i])
} // Now 'args' is an array that holds your arguments.</k>
<a>For more information on the optimization issues:</a><br><a href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments">Optimization Killers: Managing Arguments</a>
<h3><strong>ES6 rest parameter as a way to circumvent the arguments object</strong></h3>
In ES2015/ES6 it is possible to use the rest parameter (<k>...</k>) instead of the arguments object in most places.

Say we have the following function (non-ES6):
function getIntoAnArgument() {
var args = arguments.slice();
args.forEach(function(arg) {
console.log(arg);
});
}</k>
That function can be replaced in ES6 by:
function getIntoAnArgument(...args) {
args.forEach(arg => console.log(arg));
}</k>
Note that we also used an arrow function to shorten the forEach callback!
The arguments object is not available inside the body of an arrow function.
The rest parameter must always come as the last argument in your function definition.<br><k>function getIntoAnArgument(arg1, arg2, arg3, ...restOfArgs /*no more arguments allowed here*/) { //function body }</k>
<h2>Arithmetic Operation Example</h2>
JavaScript provides the user with five arithmetic operators: <k>+</k>, <k>-</k>, <k>*</k>, <k>/</k> and <k>%</k>.

The operators are for addition, subtraction, multiplication, division and remainder, respectively.
+	Addition
-	Subtraction
*	Multiplication
**	Exponentiation
/	Division
%	Modulus (Remainder)
++	Increment
--	Decrement
<h2>Addition</h2>
<k>a + b</k>
true + 2       // interprets true as 1 and returns 3
false + 5      // interprets false as 0 and returns 5
true + "bar"   // concatenates the boolean value and returns "truebar"
5 + "foo"      // concatenates the string and the number and returns "5foo"
"foo" + "bar"  // concatenates the strings and returns "foobar"
<em>Hint:</em> There is a handy <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Increment_(" rel="nofollow">increment</a> operator that is a great shortcut when you’re adding numbers by 1.
Increment & Decrement
Increment — x++ or ++x
Decrement — x-- or --x
Using ++/-- After the Operand
When you use the increment/decrement operator after the operand, the value will be returned before the operand is increased/decreased.
// Increment
let a = 1;
console.log(a++);    // 1
console.log(a);      // 2
// Decrement
let b = 1;
console.log(b--);    // 1
console.log(b);      // 0
Using ++/-- Before the Operand
If you’d rather make the variable increment/decrement before returning, you simply have to use the increment/decrement operator before the operand:
// Increment
let a = 1;
console.log(++a);    // 2
console.log(a);      // 2
// Decrement
let b = 1;
console.log(--b);    // 0
console.log(b);      // 0
<h2>Subtraction</h2>
<k>a - b</k>
false - 5  // interprets false as 0 and returns -5
true + 3   // interprets true as 1 and returns 4
5 + "foo"  // returns NaN (Not a Number)
<em>Hint:</em> There is a handy <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Decrement_(--" rel="nofollow">decrement</a> operator that is a great shortcut when you’re subtracting numbers by 1.
<h2>Multiplication</h2>
<k>a * b</k>
false * 5            // interprets false as 0 and returns 0
true * 3             // interprets true as 1 and returns 3
5 * "foo"            // returns NaN (Not a Number)
Infinity * 0         // returns NaN
Infinity * Infinity  // returns Infinity
<em>Hint:</em> When making calculations it is possible to use parentheses to prioritize which numbers should be multiplied together.
<h2>Division</h2>
<k>a / b</k>
3 / 0                // returns Infinity
3.0 / 0.0            // returns Infinity
-3 / 0               // returns -Infinity
false / 5            // interprets false as 0 and returns 0
true / 2             // interprets true a 1 and returns 0.5
Infinity / Infinity  // returns NaN
<h2>Remainder</h2>
<k>a % b</k>
3 % 2          // returns 1
true % 5       // interprets true as 1 and returns 1
false % 4      // interprets false as 0 and returns 0
3 % "bar"      // returns NaN
<h2>Increment</h2>
<k>a++ or ++a</k>
<k>// Postfix 
x = 3; // declare a variable 
y = x++; // y = 4, x = 3 
// Prefix 
var a = 2; 
b = ++a; // a = 3, b = 3</k>
<h2>Decrement</h2>
<k>a-- or --a</k>
<k>// Postfix 
x = 3; // declare a variable 
y = x—; // y = 3, x = 3 
// Prefix 
var a = 2; 
b = —a; // a = 1, b = 1</k>
<em>Important:</em> As you can see, you <strong>cannot</strong> perform any sort of operations on <k>Infinity</k>.
<h3>Arrow Function Example</h3>
Arrow functions are a new ES6 syntax for writing JavaScript function expressions.

The shorter syntax saves time, as well as simplifying the function scope.
<h2><span class="red">What are arrow functions?</span> <k>=></k></h2>
An arrow function expression is a more concise syntax for writing function expressions using a “fat arrow” token (<k>=></k>).
<h3><strong>The basic syntax</strong></h3>
Below is a basic example of an arrow function:
<k>// ES5 syntax
var multiply = function(x, y) { return x * y;};
// ES6 arrow function
var multiply = (x, y) => { return x * y; };
// Or even simpler
var multiply = (x, y) => x * y;</k>
You no longer need the <k>function</k> and <k>return</k> keywords, or even the curly brackets.
<h3><strong>A simplified <k>this</k></strong></h3>
Before arrow functions, new functions defined their own <k>this</k> value.

To use <k>this</k> inside a traditional function expression, we have to write a workaround like so:
<k>// ES5 syntax
function Person() {
// we assign `this` to `self` so we can use it later
var self = this;
self.age = 0;
setInterval(function growUp() {
// `self` refers to the expected object
self.age++;
}, 1000);
}</k>
An arrow function doesn’t define its own <k>this</k> value, it inherits <k>this</k> from the enclosing function:
<k>// ES6 syntax
function Person(){
this.age = 0;
setInterval(() => {
// `this` now refers to the Person object, brilliant!
this.age++;
}, 1000);
}
var p = new Person();</k>
<h2>Assignment Operators</h2>
<h2>Assignment Operator Example</h2>
Assignment operators, as the name suggests, assign (or re-assign) values to a variable.

While there are quite a few variations on the assignment operators, they all build off of the basic assignment operator.
Syntax = <strong>y;DescriptionNecessityxVariableRequired=Assignment operatorRequiredyValue to assign to variableRequired</strong>
<b>Examples</b>
let initialVar = 5;   // Variable initialization requires the use of an assignment operator
let newVar = 5;
newVar = 6;   // Variable values can be modified using an assignment operator
<h2>Variations</h2>
The other assignment operators are a shorthand for performing some operation using the variable (indicated by x above) and value (indicated by y above) and then assigning the result to the variable itself.
For example, below is the syntax for the addition assignment operator:
x += y;
This is the same as applying the addition operator and reassigning the sum to the original variable (that is, x), which can be expressed by the following code:
x = x + y;
To illustrate this using actual values, here is another example of using the addition assignment operator:
let myVar = 5;   // value of myVar: 5
myVar += 7;   // value of myVar: 12 = 5 + 7
<h2>Boolean Example</h2>
Booleans are a primitive datatype commonly used in computer programming languages.

By definition, a boolean has two possible values: <k>true</k> or <k>false</k>.
In JavaScript, there is often implicit type coercion to boolean.

If for example you have an if statement which checks a certain expression, that expression will be coerced to a boolean:
<k>var a = 'a string';
if (a) {
console.log(a); // logs 'a string'
}</k>
There are only a few values that will be coerced to false:
<ul><li>false (not really coerced, as it already is false)</li>
<li>null</li>
<li>undefined</li>
<li>NaN</li>
<li>0</li>
<li>” (empty string)</li>
</ul>All other values will be coerced to true.

When a value is coerced to a boolean, we also call that either ‘falsy’ or ‘truthy’.
One way that type coercion is used is with the use of the or (<k>||</k>) and and (<k>&amp;&amp;</k>) operators:
<k>var a = 'word';
var b = false;
var c = true;
var d = 0
var e = 1
var f = 2
var g = null
console.log(a || b); // 'word'
console.log(c || a); // true
console.log(b || a); // 'word'
console.log(e || f); // 1
console.log(f || e); // 2
console.log(d || g); // null
console.log(g || d); // 0
console.log(a &amp;&amp; c); // true
console.log(c &amp;&amp; a); // 'word'</k>
As you can see, the <em>or</em> operator checks the first operand.

If this is true or truthy, it returns it immediately (which is why we get ‘word’ in the first case &amp; true in the second case).

If it is not true or truthy, it returns the second operand (which is why we get ‘word’ in the third case).
With the and operator it works in a similar way, but for ‘and’ to be true, both operands need to be truthy.

So it will always return the second operand if both are true/truthy, otherwise it will return false.

That is why in the fourth case we get true and in the last case we get ‘word’.
<h2>The Boolean Object</h2>
There is also a native JavaScript <k>Boolean</k> object that wraps around a value and converts the first parameter to a boolean value.

If a value is omitted or falsy –0, -0, <k>null</k>, <k>false</k>, <k>NaN</k>, <k>undefined</k>, or an empty string (<k>""</k>) – the object's value is false.

Pass all other values, including the string <k>"false"</k>, and the object's value is set to true.
Note that primitive Boolean values (<k>true</k> and <k>false</k>) are different than those of the Boolean object.
<h3>More Details</h3>
Remember that any object, the value of which is not <k>undefined</k> or <k>null</k>, evaluates to true if used in a conditional statement.

For example, even though this <k>Boolean</k> object is explicitly set to false, it evaluates to true and the code is executed:
<k>var greeting = new Boolean(false);
if (greeting) {
console.log("Hello world");
}
// Hello world</k>
This doesn't apply to boolean primitives:
<k>var greeting = false;
if (greeting) {
console.log("Hello world"); // code will not run
}</k>
To convert a non-boolean value to a boolean, use <k>Boolean</k> as a function rather than as an object: 
<k>var x = Boolean(expression);     // preferred use as a function
var x = new Boolean(expression); // don't do it this way</k>
<h2>Callback Functions</h2>
<h3>Functions are Objects</h3>
The first thing we need to know is that in JavaScript, functions are first-class objects.

As such, we can work with them in the same way we work with other objects, like assigning them to variables and passing them as arguments into other functions.

This is important, because it’s the latter technique that allows us to extend functionality in our applications.
<h2>Callback Function</strong> Example</h2>
A <strong>callback function</strong> is a function that is passed <em>as an argument</em> to another function, to be “called back” at a later time.

A function that accepts other functions as arguments is called a <strong>higher-order function</strong>, which contains the logic for <em>when</em> the callback function gets executed.

It’s the combination of these two that allow us to extend our functionality.
To illustrate callbacks, let’s start with a simple example:
<k>function createQuote(quote, callback){ // here callback is variable
var myQuote = "Like I always say, " + quote;
callback(myQuote); // 2, this call is not fixed, depend on the true calling command
}
function logQuote(quote){
console.log(quote);
}
createQuote("eat your vegetables!", logQuote); // 1
// Result in console: 
// Like I always say, eat your vegetables!</k>
In the above example, <k>createQuote</k> is the higher-order function, which accepts two arguments, the second one being the callback.

The <k>logQuote</k> function is being used to pass in as our callback function.

When we execute the <k>createQuote</k> function <em>(1)</em>, notice that we are <em>not appending</em> parentheses to <k>logQuote</k> when we pass it in as an argument.

This is because we do not want to execute our callback function right away, we simply want to pass the function definition along to the higher-order function so that it can be executed later.
Also, we need to ensure that if the callback function we pass in expects arguments,  we supply those arguments when executing the callback <em>(2)</em>.

In the above example, that would be the <k>callback(myQuote);</k>statement, since we know that <k>logQuote</k> expects a quote to be passed in.
Additionally, we can pass in anonymous functions as callbacks.

The below call to <k>createQuote</k> would have the same result as the above example:
<k>createQuote("eat your vegetables!", function(quote){ 
console.log(quote); 
});</k>
Incidentally, you don’t <em>have</em> to use the word “callback” as the name of your argument.

JavaScript just needs to know that it’s the correct argument name.

Based on the above example, the below function will behave in exactly the same manner.
<k>function createQuote(quote, functionToCall) { 
var myQuote = "Like I always say, " + quote;
functionToCall(myQuote);
}</k>
<h2>Why use Callbacks?</h2>
Most of the time we are creating programs and applications that operate in a <strong>synchronous</strong> manner.

In other words, some of our operations are started only after the preceding ones have completed.

Often when we request data from other sources, such as an external API, we don’t always know <em>when</em> our data will be served back.

In these instances we want to wait for the response, but we don’t always want our entire application grinding to a halt while our data is being fetched.

These situations are where callback functions come in handy.
Let’s take a look at an example that simulates a request to a server:
<k>function serverRequest(query, callback){
setTimeout(function(){
var response = query + "full!";
callback(response);
},5000);
}
function getResults(results){
console.log("Response from the server: " + results);
}
serverRequest("The glass is half ", getResults);
// Result in console after 5 second delay:
// Response from the server: The glass is half full!</k>
In the above example, we make a mock request to a server.

After 5 seconds elapse, the response is modified and then our callback function <k>getResults</k> gets executed.

To see this in action, you can copy/paste the above code into your browser’s developer tool and execute it.
Also, if you are already familiar with <k>setTimeout</k>, then you’ve been using callback functions all along.

The anonymous function argument passed into the above example’s <k>setTimeout</k> function call is also a callback! So the example’s original callback is actually executed by another callback.

Be careful not to nest too many callbacks if you can help it, as this can lead to something called “callback hell”! As the name implies, it isn’t a joy to deal with.
<k>function print(callback) {  
callback();
}</k>
The print( ) function takes another function as a parameter and calls it inside.

This is valid in JavaScript and we call it a “callback”.

So a function that is passed to another function as a parameter is a callback function.

But that’s not all.
Callbacks make sure that a function is not going to run before a task is completed but will run right after the task has completed.

It helps us develop asynchronous JavaScript code and keeps us safe from problems and errors.
In JavaScript, the way to create a callback function is to pass it as a parameter to another function, and then to call it back right after something has happened or some task is completed.

<h2>How to create a Callback</h2>
example
We want to log a message to the console but it should be there after 3 seconds.
<k>const message = function() {  
console.log("This message is shown after 3 seconds");
}
setTimeout(message, 3000);</k>
There is a built-in method in JavaScript called “setTimeout”, which calls a function or evaluates an expression after a given period of time (in milliseconds).

So here, the “message” function is being called after 3 seconds have passed.

(1 second = 1000 milliseconds)
In other words, the message function is being called after something happened (after 3 seconds passed for this example), but not before.

So the message function is an example of a callback function.
<h3>What is an Anonymous Function?</h3>
Alternatively, we can define a function directly inside another function, instead of calling it.

It will look like this:
<k>setTimeout(function() {  
console.log("This message is shown after 3 seconds");
}, 3000);</k>
As we can see, the callback function here has no name and a function definition without a name in JavaScript is called as an “anonymous function”.

This does exactly the same task as the example above.
<h3>Callback as an Arrow Function</h3>
If you prefer, you can also write the same callback function as an ES6 arrow function, which is a newer type of function in JavaScript:
<k>setTimeout(() => { 
console.log("This message is shown after 3 seconds");
}, 3000);</k>
<h2>What about Events?</h2>
JavaScript is an event-driven programming language.

We also use callback functions for event declarations.

For example, let’s say we want users to click on a button:
<k>&lt;button>Click here&lt;/button></k>
This time we will see a message on the console only when the user clicks on the button:
<k>document.queryselector("#callback-btn")
.addEventListener("click", function() {    
console.log("User has clicked on the button!");
});</k>
So here we select the button first with its id, and then we add an event listener with the addEventListener method.

It takes 2 parameters.

The first one is its type, “click”, and the second parameter is a callback function, which logs the message when the button is clicked.
As you can see, callback functions are also used for event declarations in JavaScript.
<h2>JavaScript Class Example</h2>
<a href="JavaScript Class.html" class="whitebut ">JavaScript Class</a>
JavaScript does not have the concept of classes inherently.
But we could simulate the functionalities of a class by taking advantage of the prototypal nature of JavaScript.
This section assumes that you have a basic understanding of <a href="https://guide.freecodecamp.org/javascript/prototypes">prototypes</a>.
For the sake of clarity, let us assume that we want to create a class which can do the following
<k>var p = new Person('James','Bond'); // create a new instance of Person classp.log() // Output: 'I am James Bond' // Accessing a function in the class// Using setters and getters p.profession = 'spy'p.profession // output: James bond is a spy</k>
<h3><strong>Using class keyword</strong></h3>
Like in any other programming language, you can now use the <k>class</k> keyword to create a class.
This is not supported in older browsers and was introduced in ECMAScript 2015.
<k>class</k> is just a syntactic sugar over JavaScript’s existing prototype-based inheritance model.
In general, programmers use the following ways to create a class in JavaScript.
<h3><strong>Using methods added to prototypes:</strong></h3>
Here, all the methods are added to prototype
<k>function Person(firstName, lastName) {
this._firstName = firstName;
this._lastName = lastName;
}
Person.prototype.log = function() {
console.log('I am', this._firstName, this._lastName);
}
// This line adds getters and setters for the profession object.

Note that in general you could just write your own get and set functions like the 'log' method above.
// Since in this example we are trying the mimic the class above, we try to use the getters and setters property provided by JavaScript
Object.defineProperty(Person.prototype, 'profession', {
set: function(val) {
this._profession = val;
},
get: function() {
console.log(this._firstName, this._lastName, 'is a', this._profession);
}
})</k>
You could also write prototype methods over function <k>Person</k> as below:
<k>Person.prototype = {
log: function() {
console.log('I am ', this._firstName, this._lastName);
}
set profession(val) {
this._profession = val;
}
get profession() {
console.log(this._firstName, this._lastName, 'is a', this._profession);
}
}</k>
<h3><strong>Using methods added internally</strong></h3>
Here the methods are added internally instead of prototype:
<k>function Person(firstName, lastName) {
this._firstName = firstName;
this._lastName = lastName;
this.log = function() {
console.log('I am ', this._firstName, this._lastName);
}
Object.defineProperty(this, 'profession', {
set: function(val) {
this._profession = val;
},
get: function() {
console.log(this._firstName, this._lastName, 'is a', this._profession);
}
})
}</k>
<h3><strong>Hiding details in classes with symbols</strong></h3>
Most often, some properties and methods have to be hidden to prevent access from outside the function.

With classes, to obtain this functionality, one way to do this is by using symbols.

Symbol is a new built-in type of JavaScript, which can be invoked to give a new symbol value.

Every Symbol is unique and can be used as a key on object.

So one use case of symbols is that you can add something to an object you might not own, and you might not want to collide with any other keys of object.

Therefore, creating a new one and adding it as a property to that object using symbol is the safest.

Also, when symbol value is added to an object, no one else will know how to get it.
<k>class Person {
constructor(firstName, lastName) {
this._firstName = firstName;
this._lastName = lastName;
}
log() {
console.log('I am', this._firstName, this._lastName);
}
// setters
set profession(val) {
this._profession = val;
}
// getters
get profession() {
console.log(this._firstName, this._lastName, 'is a', this._profession);
}
// With the above code, even though we can access the properties outside the function to change their content what if we don't want that.
// Symbols come to rescue.
let s_firstname  = new Symbol();
class Person {
constructor(firstName, lastName) {
this[s_firstName] = firstName;
this._lastName = lastName;
}
log() {
console.log('I am', this._firstName, this._lastName);
}
// setters
set profession(val) {
this._profession = val;
}
// getters
get profession() {
console.log(this[s_firstName], this._lastName, 'is a', this._profession);
}</k>
<h3>JavaScript Closure Example</h3>
A closure is the combination of a function and the lexical environment (scope) within which that function was declared.

Closures are a fundamental and powerful property of Javascript.

This section discusses the ‘how’ and ‘why’ about Closures:
<h3><strong>Example</strong></h3>
<k>//we have an outer function named walk and an inner function named fly
function walk (){
var dist = '1780 feet';
function fly(){
console.log('At '+dist);
}
return fly;
}
var flyFunc = walk(); //calling walk returns the fly function which is being assigned to flyFunc
//you would expect that once the walk function above is run
//you would think that JavaScript has gotten rid of the 'dist' var
flyFunc(); //Logs out 'At 1780 feet'
//but you still can use the function as above 
//this is the power of closures</k>
<h3><strong>Another Example</strong></h3>
<k>function by(propName) {
return function(a, b) {
return a[propName] - b[propName];
}
}
const person1 = {name: 'joe', height: 72};
const person2 = {name: 'rob', height: 70};
const person3 = {name: 'nicholas', height: 66};
const arr_ = [person1, person2, person3];
const arr_sorted = arr_.sort(by('height')); // [ { name: 'nicholas', height: 66 }, { name: 'rob', height: 70 },{ name: 'joe', height: 72 } ]</k>
The closure ‘remembers’ the environment in which it was created.

This environment consists of any local variables that were in-scope at the time the closure was created.
<k>function outside(num) {
var rememberedVar = num; // In this example, rememberedVar is the lexical environment that the closure 'remembers'
return function inside() { // This is the function which the closure 'remembers'
console.log(rememberedVar)
}
}
var remember1 = outside(7); // remember1 is now a closure which contains rememberedVar = 7 in its lexical environment, and //the function 'inside'
var remember2 = outside(9); // remember2 is now a closure which contains rememberedVar = 9 in its lexical environment, and //the function 'inside'
remember1(); // This now executes the function 'inside' which console.logs(rememberedVar) => 7
remember2(); // This now executes the function 'inside' which console.logs(rememberedVar) => 9 </k>
Closures are useful because they let you ‘remember’ data and then let you operate on that data through returned functions.

This allows Javascript to emulate private methods that are found in other programming languages.

Private methods are useful for restricting access to code as well as managing your global namespace.
<h3><strong>Private variables and methods</strong></h3>
Closures can also be used to encapsulate private data/methods.

Take a look at this example:
<k>const bankAccount = (initialBalance) => {
const balance = initialBalance;
return {
getBalance: function() {
return balance;
},
deposit: function(amount) {
balance += amount;
return balance;
},
};
};
const account = bankAccount(100);
account.getBalance(); // 100
account.deposit(10); // 110</k>
In this example, we won’t be able to access <k>balance</k> from anywhere outside of the <k>bankAccount</k> function, which means we’ve just created a private variable.

Where’s the closure? Well, think about what <k>bankAccount()</k> is returning.

It actually returns an Object with a bunch of functions inside it, and yet when we call <k>account.getBalance()</k>, the function is able to “remember” its initial reference to <k>balance</k>.

That is the power of the closure, where a function “remembers” its lexical scope (compile time scope), even when the function is executed outside that lexical scope.
<h3>Emulating block-scoped variables</h3>
Javascript did not have a concept of block-scoped variables.

Meaning that when defining a variable inside a for-loop, for example, this variable was visible from outside the for-loop as well.

So how can closures help us solve this problem? Let’s take a look.
<k>    var funcs = [];
for(var i = 0; i &lt; 3; i++){
funcs[i] = function(){
console.log('My value is ' + i);  //creating three different functions with different param values.
}
}
for(var j = 0; j &lt; 3; j++){
funcs[j]();             // My value is 3
// My value is 3
// My value is 3
}</k>
Since the variable i does not have block-scope, it’s value within all three functions was updated with the loop counter and created malicious values.

Closures can help us solve this issue by creating a snapshot of the environment the function was in when it was created, preserving its state.
<k>    var funcs = [];
var createFunction = function(val){    return function() {console.log("My value: " + val);};
}
for (var i = 0; i &lt; 3; i++) {
funcs[i] = createFunction(i);
}
for (var j = 0; j &lt; 3; j++) {
funcs[j]();                 // My value is 0
// My value is 1
// My value is 2
}</k>
The later versions of Javascript (ES6+) have a new keyword called let which can be used to give the variable a blockscope.

There are also many functions (forEach) and entire libraries (lodash.js) that are dedicated to solving such problems as the ones explained above.

They can certainly boost your productivity, however it remains extremely important to have knowledge of all these issues when attempting to create something big.
Closures have many special applications that are useful when creating large Javascript programs.
<ol><li>Emulating private variables or encapsulation</li>
<li>Making Asynchronous server side calls</li>
<li>Creating a block-scoped variable.</li>
</ol><h3>Emulating private variables</h3>
Unlike many other languages, Javascript does not have a mechanism which allows you to create encapsulated instance variables within an object.

Having public instance variables can cause a lot of problems when building medium to large programs.

However with closures, this problem can be mitigated.
Much like in the previous example, you can build functions which return object literals with methods that have access to the object’s local variables without exposing them.

Thus, making them effectively private.
Closures can also help you manage your global namespace to avoid collisions with globally shared data.

Usually, all global variables are shared between all scripts in your project, which will definitely give you a lot of trouble when building medium to large programs.

That is why library and module authors use closures to hide an entire module’s methods and data.

This is called the module pattern, it uses an immediately invoked function expression which exports only certain functionality to the outside world, significantly reducing the amount of global references.
Here’s a short sample of a module skeleton.
<k>var myModule = (function() = {
let privateVariable = 'I am a private variable';
let method1 = function(){ console.log('I am method 1'); };
let method2 = function(){ console.log('I am method 2, ', privateVariable); };
return {
method1: method1,
method2: method2
}
}());
myModule.method1(); // I am method 1
myModule.method2(); // I am method 2, I am a private variable</k>
Closures are useful for capturing new instances of private variables contained in the ‘remembered’ environment, and those variables can only be accessed through the returned function or methods.
<h3>JavaScript Comment Example</h3>
Programmers use comments to add hints, notes, suggestions, or warnings to their source code; they have no effect on the actual output of the code.

Comments can be very helpful in explaining the intent of what your code is or should be doing.
It is always best practice when starting out to comment more often than not, as it can help those reading your code to understand what exactly your code is intending to do.
JavaScript has two ways of assigning comments in its code.
The first way is the <k>//</k> comment; all text following <k>//</k> on the same line into a comment.

For example:
<k>function hello() {
// This is a one line JavaScript comment
console.log("Hello world!");
}
hello();</k>
The second way is the <k>/* */</k> comment, which can be used for both single-line and multi-line comments.

For example:
<k>function hello() {
/* This is a one line JavaScript comment */
console.log("Hello world!");
}
hello();</k>
<k>function hello() {
/* This comment spans multiple lines.

Notice
that we don't need to end the comment until we're done.

*/
console.log("Hello world!");
}
hello();</k>
You can also prevent execution of Javascript code just commeting the code lines like this:
<k>function hello() {
/*console.log("Hello world!");*/
}
hello();</k>
<h4 id="more-information-"><strong>More Information:</strong></h4><a href="https://www.digitalocean.com/community/tutorials/how-to-write-comments-in-javascript" rel="nofollow">How To Write Comments in JavaScript</a>
<h3><strong>Many IDEs come with a keyboard shortcut to comment out lines.</strong></h3>
<ol><li>Highlight text to be commented</li>
<li>Mac: Push Command(Apple Key) &amp; "/"</li>
<li>Windows: Push Control &amp; "/"</li>
<li>You can also uncomment code by doing the same steps</li>
</ol>A shortcut to comment out a section of 
Javascript in many code editors is to highlight the lines of code you want to comment out, then press `Cmd/Ctrl + /`.
Comments are also very helpful for code testing as you can prevent a certain code-line/block from running:
<k>function hello() {
// The statement below is not going to get executed
// console.log('hi')
}
hello();</k>
function hello() {
// The statements below are not going to get executed
/*
console.log('hi');
console.log('code-test');
*/
}
hello();
<h2>JavaScript Comparison Operator Example</h2>
JavaScript has both <strong>strict</strong> and <strong>type–converting</strong> comparisons.
<ul><li>The strict comparison (<k>===</k>) only evaluates to true if both operands are the same type.</li>
<li>The abstract comparison (<k>==</k>) attempts to convert both operands to the same type before comparing them.</li>
<li>With relational abstract comparisons (<k>&lt;=</k>), both operands are converted to primitives, then to the same type before comparison.</li>
<li>Strings are compared using Unicode values based on standard ordering.</li>
</ul>
<h2>Features of comparisons:</h2>
<ul><li>Two strings are considered strictly equal when they have the characters in the same sequence and the same length.</li>
<li>Two numbers are considered strictly equal when they are the both of the type number and are numerically equal.

This means that both <k>0</k> and <k>-0</k> are strictly equal since they both evaluate to <k>0</k>.

Note that <k>NaN</k> is a special value and is not equal to anything, including <k>NaN</k>.</li>
<li>Two Boolean operands are considered strictly equal if both are <k>true</k> or <k>false</k>.</li>
<li>Two objects are never considered equal in both strict or abstract comparisons.</li>
<li>Expressions that compare objects are only considered true if the operands both reference the same exact object instance.</li>
<li>Null and undefined are both considered strictly equal to themselves (<k>null === null</k>) and abstractly equal to each other (<k>null == undefined</k>)</li>
</ul>
<h2>Equality operators</h2>
<h3><strong>Equality (==)</strong></h3>
The equality operator first converts operands that are not of the same type, then strictly compares them to one another.
<h4 id="syntax"><strong>Syntax</strong></h4>
x == y
<h4 id="examples-1"><strong>Examples</strong></h4>
1   ==  1        // true
"1"  ==  1        // true
1   == '1'       // true
0   == false     // true
0   == null      // false
0   == undefined   // false
null  == undefined // true
<h3><strong>Inequality (!=)</strong></h3>
The inequality operator evaluates to true if both operands are not equal.

If the operands are not the same type, it will try to convert them to the same type before making the comparison.
<h4 id="syntax-1"><strong>Syntax</strong></h4>
x != y
<h4 id="examples-2"><strong>Examples</strong></h4>
1 !=   2     // true
1 !=  "1"    // false
1 !=  '1'    // false
1 !=  true   // false
0 !=  false  // false
<h3><strong>Identity / strict equality (===)</strong></h3>
The identity or strict equality operator returns true if both operands are strictly equal in terms of value and type.

Unlike the equality operator (<k>==</k>), it will not attempt to convert the operands to the same type.
<h4 id="syntax-2"><strong>Syntax</strong></h4>
x === y
<h4 id="examples-3"><strong>Examples</strong></h4>
3 === 3   // true
3 === '3' // false
<h3><strong>Non-identity / strict inequality (!==)</strong></h3>
The non-identity or strict inequality operator returns true if both operands are not strictly equal in terms of value or type.
<h4 id="syntax-3"><strong>Syntax</strong></h4>
x !== y
<h4 id="examples-4"><strong>Examples</strong></h4>
3 !== '3' // true
4 !== 3   // true
<h2>Relational operators</h2>
<h3><strong>Greater than operator (>)</strong></h3>
The greater than operator returns true if the operand on the left is greater than the one on the right.
<h4 id="syntax-4"><strong>Syntax</strong></h4>
x > y
<h4 id="examples-5"><strong>Examples</strong></h4>
4 > 3 // true
<h3><strong>Greater than or equal operator (>=)</strong></h3>
The greater than or equal operator returns true if the operand on the left is greater than or equal to the one on the right.
<h4 id="syntax-5"><strong>Syntax</strong></h4>
x >= y
<h4 id="examples-6"><strong>Examples</strong></h4>
4 >= 3 // true
3 >= 3 // true
<h3><strong>Less than operator (&lt;)</strong></h3>
The less than operator returns true if the operand on the left is less than the one on the right.
<h4 id="syntax-6"><strong>Syntax</strong></h4>
x &lt; y
<h4 id="examples-7"><strong>Examples</strong></h4>
3 &lt; 4 // true
<h3><strong>Less than or equal operator (&lt;=)</strong></h3>
The less than or equal operator returns true if the operand on the left is less than or equal to the one on the right.
<h4 id="syntax-7"><strong>Syntax</strong></h4>
x &lt;= y
<h4 id="examples-8"><strong>Examples</strong></h4>
3 &lt;= 4 // true
<h2>JavaScript Form Validation Example</h2>
Form validation used to occur at the server, after the client had entered all the necessary data and then pressed the Submit button.

If the data entered by a client was incorrect or was simply missing, the server would have to send all the data back to the client and request that the form be resubmitted with correct information.

This was really a lengthy process which used to put a lot of burden on the server.
JavaScript provides a way to validate form’s data on the client’s computer before sending it to the web server.

Form validation generally performs two functions:
<h3><strong>Basic Validation</strong></h3>
First of all, the form must be checked to make sure all the mandatory fields are filled in.

It just requires a loop through each field in the form to check for data.
<h3><strong>Data Format Validation</strong></h3>
Secondly, the data that is entered must be checked for correct form and value.

Your code must include appropriate logic to test the correctness of the data.
<h4 id="example-"><strong>Example:</strong></h4>
<k>&lt;html>
&lt;head>
&lt;title>Form Validation&lt;/title>
&lt;script type="text/javascript">
&lt;!--
// Form validation code will come here.
//-->
&lt;/script>
&lt;/head>
&lt;body>
&lt;form action="/cgi-bin/test.cgi" name="myForm" onsubmit="return(validate());">
&lt;table cellspacing="2" cellpadding="2" border="1">
&lt;tr>
&lt;td align="right">Name&lt;/td>
&lt;td>&lt;input type="text" name="Name" />&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="right">EMail&lt;/td>
&lt;td>&lt;input type="text" name="EMail" />&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="right">Zip Code&lt;/td>
&lt;td>&lt;input type="text" name="Zip" />&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="right">Country&lt;/td>
&lt;td>
&lt;select name="Country">
&lt;option value="-1" selected>[choose yours]&lt;/option>
&lt;option value="1">USA&lt;/option>
&lt;option value="2">UK&lt;/option>
&lt;option value="3">INDIA&lt;/option>
&lt;/select>
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td align="right">&lt;/td>
&lt;td>&lt;input type="submit" value="Submit" />&lt;/td>
&lt;/tr>
&lt;/table>
&lt;/form>
&lt;/body>
&lt;/html></k>
<h4 id="output"><strong>Output</strong></h4>Have a look <a href="https://liveweave.com/LP9eOP">here</a>.
<h3><strong>Basic Form Validation</strong></h3>
First let us see how to do a basic form validation.

In the above form, we are calling validate() to validate data when the onsubmit event is occurring.

The following code shows the implementation of this <k>validate()</k>function.
<k>&lt;script type="text/javascript">
// Form validation code will come here.
function validate()
{
if( document.myForm.Name.value == "" )
{
alert( "Please provide your name!" );
document.myForm.Name.focus() ;
return false;
}
if( document.myForm.EMail.value == "" )
{
alert( "Please provide your Email!" );
document.myForm.EMail.focus() ;
return false;
}
if( document.myForm.Zip.value == "" ||
isNaN( document.myForm.Zip.value ) ||
document.myForm.Zip.value.length != 5 )
{
alert( "Please provide a zip in the format #####." );
document.myForm.Zip.focus() ;
return false;
}
if( document.myForm.Country.value == "-1" )
{
alert( "Please provide your country!" );
return false;
}
return( true );
}
&lt;/script></k>
<h4 id="output-1"><strong>Output</strong></h4>Have a look <a href="https://liveweave.com/pCPTnP">here</a>.
<h3><strong>Data Format Validation</strong></h3>
Now we will see how we can validate our entered form data before submitting it to the web server.
The following example shows how to validate an entered email address.

An email address must contain at least an ‘@’ sign and a dot (.).

Also, the ‘@’ must not be the first character of the email address, and the last dot must at least be one character after the ‘@’ sign.
<h4 id="example--1"><strong>Example:</strong></h4>
<k>&lt;script type="text/javascript">
function validateEmail()
{
var emailID = document.myForm.EMail.value;
atpos = emailID.indexOf("@");
dotpos = emailID.lastIndexOf(".");
if (atpos &lt; 1 || ( dotpos - atpos &lt; 2 )) 
{
alert("Please enter correct email ID")
document.myForm.EMail.focus() ;
return false;
}
return( true );
}
&lt;/script></k>
<h4 id="output-2"><strong>Output</strong></h4>Have a look <a href="https://liveweave.com/nznVs6">here</a>.
<h3><strong>HTML5 Form Constraints</strong></h3>
Some of the commonly used HTML5 constraints for <k>&lt;input></k> are the <k>type</k> attribute (e.g.

<k>type="password"</k>), <k>maxlength</k>, <k>required</k> and <k>disabled</k>.

A less commonly used constraint is the <k>pattern</k> attribute that takes a JavaScript regular expression.
<h2>JavaScript If statement example</h2>
The <k>if</k> statement executes a statement if a specified condition is <k>true</k>.

If the condition is <k>false</k>, another statement can be executed using the <k>else</k> statement.
<strong>Note:</strong> The <k>else</k> statement is optional.
<k>if (condition)
/* do something */
else
/* do something else */</k>
Multiple <k>if...else</k> statements can be chained to create an <k>else if</k> clause.

This specifies a new condition to test and can be repeated to test multiple conditions, checking until a true statement is presented to execute.
<k>if (condition1)
/* do something */
else if (condition2)
/* do something else */
else if (condition3)
/* do something else */
else
/* final statement */</k>
<strong>Note:</strong> If you want to execute more than one statement in the <k>if</k>, <k>else</k> or <k>else if</k> part, curly braces are required around the statements:
<k>if (condition) {
/* do */
/* something */
/* with multiple statements */
} else {
/* do something */
/* else */
}</k>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else" rel="nofollow">MDN link</a> | <a href="https://msdn.microsoft.com/en-us/library/85yyde5c.aspx" rel="nofollow">MSDN link</a>
<b>Examples</b>
<strong>Using</strong> <k>if...else</k>:
<k>    // If x=5 z=7 and q=42.

If x is not 5 then z=19.
if (x == 5) {
z = 7;
q = 42
else
z = 19;</k>
<strong>Using</strong> <k>else if</k>:
<k>if (x &lt; 10)
return "Small number";
else if (x &lt; 50)
return "Medium number";
else if (x &lt; 100)
return "Large number";
else {
flag = 1;
return "Invalid number";
}</k>
<h2>JavaScript Prototype Example</h2>
JavaScript is a prototype-based language, therefore understanding the prototype object is one of the most important concepts which JavaScript practitioners need to know.

This section will give you a short overview of the Prototype object through various examples.

Before reading this part, you will need to have a basic understanding of the <a href="/news/the-complete-guide-to-this-in-javascript/"><k>this</k> reference in JavaScript</a>.
<h3><strong>Prototype object</strong></h3>
For the sake of clarity, let’s examine the following example:
<k>function Point2D(x, y) {
this.x = x;
this.y = y;
}</k>
As <k>Point2D</k> function is declared, a default property named <k>prototype</k> will be created for it (note that, in JavaScript, a function is also an object).

The <k>prototype</k> property is an object which contains a <k>constructor</k>property and its value is <k>Point2D</k> function: <k>Point2D.prototype.constructor = Point2D</k>.

And when you call <k>Point2D</k> with <k>new</k> keyword, <em>newly created objects will inherit all properties from</em> <k>Point2D.prototype</k>.

To check that, you can add a method named <k>move</k> into <k>Point2D.prototype</k> as follows:
<k>Point2D.prototype.move = function(dx, dy) {
this.x += dx;
this.y += dy;
}
var p1 = new Point2D(1, 2);
p1.move(3, 4);
console.log(p1.x); // 4
console.log(p1.y); // 6</k>
The <k>Point2D.prototype</k> is called <strong>prototype object</strong> or <strong>prototype</strong> of <k>p1</k> object and for any other object created with <k>new Point2D(...)</k> syntax.

You can add more properties to <k>Point2D.prototype</k> object as you like.

The common pattern is to declare methods to <k>Point2D.prototype</k> and other properties will be declared in the constructor function.
Built-in objects in JavaScript are constructed in a similar manner.

For example:
<ul><li>Prototype of objects created with <k>new Object()</k> or <k>{}</k> syntax is <k>Object.prototype</k>.</li>
<li>Prototype of arrays created with <k>new Array()</k> or <k>[]</k> syntax is <k>Array.prototype</k>.</li>
<li>And so on with other built-in objects such as <k>Date</k> and <k>RegExp</k>.</li>
</ul><k>Object.prototype</k> is inherited by all objects and it has no prototype (its prototype is <k>null</k>).
<h3><strong>Prototype chain</strong></h3>
The prototype chain mechanism is simple: When you access a property <k>p</k> on object <k>obj</k>, the JavaScript engine will search this property inside <k>obj</k> object.

If the engine fails to search, it continues searching in the prototype of <k>obj</k> object and so on until reaching <k>Object.prototype</k>.

If after the search has finished, and nothing has been found, the result will be <k>undefined</k>.

For example:
<k>var obj1 = {
a: 1,
b: 2
};
var obj2 = Object.create(obj1);
obj2.a = 2;
console.log(obj2.a); // 2
console.log(obj2.b); // 2
console.log(obj2.c); // undefined</k>
In above snippet, the statement <k>var obj2 = Object.create(obj1)</k> will create <k>obj2</k> object with prototype <k>obj1</k> object.

In other words, <k>obj1</k> becomes the prototype of <k>obj2</k> instead of <k>Object.prototype</k> by default.

As you can see, <k>b</k> is not a property of <k>obj2</k>; you can still access it via the prototype chain.

For the <k>c</k> property, however, you get an <k>undefined</k> value because it can’t be found in <k>obj1</k> and <k>Object.prototype</k>.
<h3><strong>Classes</strong></h3>
In ES2016, we now get to use the <k>Class</k> keyword as well as the methods mentioned above to manipulate <k>prototype</k>.

The JavaScript <k>Class</k> appeals to developers from OOP backgrounds, but it’s essentially doing the same thing as above.
<k>class Rectangle {
constructor(height, width) {
this.height = height
this.width = width
}
get area() {
return this.calcArea()
}
calcArea() {
return this.height * this.width
}
}
const square = new Rectangle(10, 10)
console.log(square.area) // 100</k>
This is basically the same as:
<k>function Rectangle(height, width) {
this.height = height
this.width = width
}
Rectangle.prototype.calcArea = function calcArea() {
return this.height * this.width
}</k>
The <k>getter</k> and <k>setter</k> methods in classes bind an Object property to a function that will be called when that property is looked up.

It’s just syntactic sugar to help make it easier to <em>look up</em> or <em>set</em> properties.
<h2>JavaScript Scope Example</h2>
If you’ve been programming in JavaScript for a while, you’ve undoubtedly run into a concept known as <k>scope</k>.

What is <k>scope</k>? Why should you take the time to learn it?
In programmer speak, <k>scope</k> is the <strong>current context of execution</strong>.

Confused? Let’s take a look at the following piece of code:
var foo = 'Hi, I am foo!';
var baz = function () {
var bar = 'Hi, I am bar too!';
console.log(foo);
}
baz(); // Hi, I am foo!
console.log(bar); // ReferenceError...
This is a simple example, but it does a good job of illustrating what is known as <em>Lexical scope</em>.

JavaScript, and almost every other programming language, has a <em>Lexical scope</em>.

There is another kind of scope known as <em>Dynamic scope</em>, but we won’t be discussing that.
Now, the term <em>Lexical scope</em> sounds fancy, but as you will see it’s really simple in principle.

In a Lexical Scope, there are two kinds of scopes: the <em>global scope</em> and a <em>local scope</em>.
Before you type the first line of code in your program, a <em>global scope</em> is created for you.

This contains all the variables that you declare in your program <strong>outside any functions</strong>.
In the example above, the variable <k>foo</k> is in the global scope of the program, while the variable <k>bar</k> is declared inside a function and is therefore <strong>in the local scope of that function</strong>.
Let's break down the example line by line.

While you might be confused at this point, I promise you will have a much better understanding by the time you finish reading this.
On line 1 we are declaring the variable <k>foo</k>.

Nothing too fancy here.

Let's call this a left-hand size (LHS) reference to <k>foo</k>, because we are assigning a value to <k>foo</k> and it’s on the left-hand side of the <k>equal</k> sign.
On line 3, we are declaring a function and assigning it to variable <k>baz</k>.

This is another LHS reference to <k>baz</k>.

We are assigning a value to it (remember, functions are values too!).

This function is then called on line 8.

This is a RHS, or a right-hand side reference to <k>baz</k>.

We are retrieving <k>baz</k>’s value, which in this case is a function and then invoking it.

Another RHS reference to <k>baz</k> would be if we assigned its value to another variable, for example <k>foo = baz</k>.

This would be a LHS reference to <k>foo</k> and a RHS reference to <k>baz</k>.
The LHS and RHS references might sound confusing, but they are important for discussing scope.

Think of it this way: a LHS reference is assigning a value to the variable, while a RHS reference is retrieving the value of the variable.

They’re just a shorter and more convenient way of saying ‘retrieving the value’ and ‘assigning a value’.
Let’s now break down what’s happening inside the function itself.
When the compiler compiles the code inside a function, it enters the function’s <strong>local scope</strong>.
On line 4, the variable <k>bar</k> is declared.

This is a LHS reference to <k>bar</k>.

On the next line, we have a RHS reference to <k>foo</k> inside the <k>console.log()</k>.

Remember, we are retrieving <k>foo</k>’s value and then passing it as an argument to the method <k>console.log()</k>.
When we have a RHS reference to <k>foo</k>, the compiler looks for the declaration of the variable <k>foo</k>.

The compiler doesn’t find it in the function itself, or the <strong>function’s local scope</strong>,</strong> so it <strong>goes up one level: to the global scope</strong>.
At this point you’re probably thinking that scope has something to do with variables.

That is correct.

A scope can be thought of as a container for variables.

All variables that are created within a local scope are only accessible in that local scope.

However, all local scopes can access the global scope.

(I know you’re probably even more confused right now, but just bear with me for a few more paragraphs).
So the compiler goes up to the global scope to find a LHS reference to the variable <k>foo</k>.

It finds one on line 1, so it retrieves the value from the LHS reference, which is a string: <k>'Hi, I am foo!'</k>.

This string is sent to the <k>console.log()</k> method, and outputted to the console.
The compiler has finished executing the code inside the function, so we come back out to line 9.

On line 9, we have a RHS reference for the variable <k>bar</k>.
Now, <k>bar</k> was declared in the local scope of <k>baz</k>, but there is a RHS reference for <k>bar</k> in the global scope.

Since there is no LHS reference for <k>bar</k> in the global scope, the compiler can’t find a value for <k>bar</k> and throws a ReferenceError.
But, you might ask, if the function can look outside itself for variables, or a local scope can peek into the global scope to find LHS references, why can’t the global scope peek into a local scope? Well that’s how lexical scope works!
...

// global scope
var baz = function() {
...

// baz's scope
}
...

/// global scope
This is the same code from above which illustrates the scope.

This forms a sort of hierarchy that goes up to the global scope:
<k>baz -> global</k>.
So, if there is a RHS reference for a variable inside <k>baz</k>’s scope, it can be fulfilled by a LHS reference for that variable in the global scope.

But the opposite is <strong>not true</strong>.
What if we had another function inside <k>baz</k>?
...

// global scope
var baz = function() {
...

// baz's scope
var bar = function() {
...

// bar's scope.
}
}
...

/// global scope
In this case, the hierarchy or the <strong>scope chain</strong> would look like this:
<k>bar -> baz -> global</k>
Any RHS references inside <k>bar</k>’s local scope can be fulfilled by LHS references in the global scope or <k>baz</k>’s scope, but a RHS reference in <k>baz</k>’s scope cannot be fulfilled by a LHS reference in <k>bar</k>’s scope.
<strong>You can only traverse down a scope chain, not up.</strong>
There are other two important things you should know about JavaScript scopes.
<ol><li>Scopes are declared by functions, not by blocks.</li>
<li>Functions can be forward-referenced, variables can’t.</li>
</ol>Observe (each comment describes scope at the line that it’s written on):
// outer() is in scope here because functions can be forward-referenced
function outer() {
// only inner() is in scope here
// because only functions are forward-referenced
var a = 1;
//now 'a' and inner() are in scope
function inner() {
var b = 2
if (a == 1) {
var c = 3;
}
// 'c' is still in scope because JavaScript doesn't care
// about the end of the 'if' block, only function inner()
}
// now b and c are out of scope
// a and inner() are still in scope
}
// here, only outer() is in scope
<h2>JavaScript For Loop Example</h2>
<h3><strong>Syntax</strong></h3>
<k>for ([initialization]); [condition]; [final-expression]) {
// statement
}</k>
The javascript <k>for</k> statement consists of three expressions and a statement:
<ul><li>initialization - Run before the first execution on the loop.

This expression is commonly used to create counters.

Variables created here are scoped to the loop.

Once the loop has finished its execution, they are destroyed.</li>
<li>condition - Expression that is checked prior to the execution of every iteration.

If omitted, this expression evaluates to true.

If it evaluates to true, the loop’s statement is executed.

If it evaluates to false, the loop stops.</li>
<li>final-expression - Expression that is run after every iteration.

Usually used to increment a counter.

But it can be used to decrement a counter too.</li>
<li>statement - Code to be repeated in the loop</li>
</ul>any of these three expressions or the statement can be omitted.

For loops are commonly used to count a certain number of iterations to repeat a statement.

Use a <k>break</k> statement to exit the loop before the condition expression evaluates to false.
<h2>Common Pitfalls</h2>
<strong>Exceeding the bounds of an array</strong>
When indexing over an array many times, it is easy to exceed the bounds of the array (ex.

try to reference the 4th element of a 3 element array).
<k>    // This will cause an error.
// The bounds of the array will be exceeded.
var arr = [ 1, 2, 3 ];
for (var i = 0; i &lt;= arr.length; i++) {
console.log(arr[i]);
}
output:
1
2
3
undefined</k>
There are two ways to fix this code.

Set the condition to either <k>i &lt; arr.length</k> or <k>i &lt;= arr.length - 1</k>
<h3><strong>Examples</strong></h3>
Iterate through integers from 0-8
<k>for (var i = 0; i &lt; 9; i++) {
console.log(i);
}
</k>
output:
0
1
2
3
4
5
6
7
8</k>
Break out of a loop before condition expression is false
<k>for (var elephant = 1; elephant &lt; 10; elephant+=2) {
if (elephant === 7) {
break;
}
console.info('elephant is ' + elephant);
}
</k>
output:
elephant is 1
elephant is 3
elephant is 5
<h2>JavaScript Break Statement Example</h2>
The <strong>break</strong> statement terminates the current loop, <k>switch</k> or <k>label</k> statement and transfers program control to the statement following the terminated statement.
break;
If the <strong>break</strong> statement is used in a labeled statement, the syntax is as follows:
break labelName;
<b>Examples</b>
The following function has a <strong>break</strong> statement that terminates the <k>while</k> loop when <strong>i</strong> is 3, and then returns the value <strong>3 * x</strong>.
function testBreak(x) {
var i = 0;
while (i &lt; 6) {
if (i == 3) {
break;
}
i += 1;
}
return i * x;
}
In the following example, the counter is set up to count from 1 to 99; however, the <strong>break</strong> statement terminates the loop after 14 counts.
for (var i = 1; i &lt; 100; i++) {
if (i == 15) {
break;
}
}
<h2>JavaScript Do While loop example</h2>
The <k>do...while</k> loop is closely related to the  loop.

In the do while loop, the condition is checked at the end of the loop.
Here is the <strong>syntax</strong> for <k>do...while</k> loop:
<b>Syntax:</b>
do {
*Statement(s);*
} while (*condition*);
<strong>statement(s):</strong> A statement that is executed <strong>at least once</strong> before the condition or Boolean expression is evaluated and is re-executed each time the condition evaluates to true.
<strong>condition:</strong> Here, a condition is a <a>Boolean expression</a>.

If the Boolean expression evaluates to true, the statement is executed again.

When the Boolean expression evaluates to false, the loops ends.
<b>Example:</b>
var i = 0;
do {
i = i + 1;
console.log(i);
} while (i &lt; 5);
Output:
1
2
3
4
5
<h2>JavaScript For In Loop Example</h2>
The <k>for...in</k> statement iterates over the enumerable properties of an object, in arbitrary order.

For each distinct property, statements can be executed.
for (variable in object) {
...
}
Required/Optional Parameter Description Required Variable: A different property name is assigned to the variable on each iteration.

OptionalObject: an object whose enumerable properties are iterated.
<b>Examples</b>
// Initialize object.
a = { "a": "Athens", "b": "Belgrade", "c": "Cairo" }
// Iterate over the properties.
var s = ""
for (var key in a) {
s += key + ": " + a[key];
s += "&lt;br />";
}
document.write (s);
// Output:
// a: Athens
// b: Belgrade
// c: Cairo
// Initialize the array.
var arr = new Array("zero", "one", "two");
// Add a few expando properties to the array.
arr["orange"] = "fruit";
arr["carrot"] = "vegetable";
// Iterate over the properties and elements.
var s = "";
for (var key in arr) {
s += key + ": " + arr[key];
s += "&lt;br />";
}
document.write (s);
// Output:
//   0: zero
//   1: one
//   2: two
//   orange: fruit
//   carrot: vegetable
// Efficient way of getting an object's keys using an expression within the for-in loop's conditions
var myObj = {a: 1, b: 2, c:3}, myKeys = [], i=0;
for (myKeys[i++] in myObj);
document.write(myKeys);
//Output:
//   a
//   b
//   c
<h2>JavaScript For Of Loop Example</h2>
The <k>for...of</k> statement creates a loop iterating over iterable objects (including Array, Map, Set, Arguments object and so on), invoking a custom iteration hook with statements to be executed for the value of each distinct property.
<k>    for (variable of object) {
statement
}</k>
Description variable: On each iteration a value of a different property is assigned to the variable.object Object whose enumerable properties are iterated.
<b>Examples</b>
<h3><strong>Array</strong></h3>
let arr = [ "fred", "tom", "bob" ];
for (let i of arr) {
console.log(i);
}
// Output:
// fred
// tom
// bob
<h3><strong>Map</strong></h3>
var m = new Map();
m.set(1, "black");
m.set(2, "red");
for (var n of m) {
console.log(n);
}
// Output:
// 1,black
// 2,red
<h3><strong>Set</strong></h3>
var s = new Set();
s.add(1);
s.add("red");
for (var n of s) {
console.log(n);
}
// Output:
// 1
// red
<h3><strong>Arguments object</strong></h3>
// your browser must support for..of loop
// and let-scoped variables in for loops
function displayArgumentsObject() {
for (let n of arguments) {
console.log(n);
}
}
displayArgumentsObject(1, 'red');
// Output:
// 1
// red
<h2>JavaScript While Loop Example</h2>
The while loop starts by evaluating the condition.

If the condition is true, the statement(s) is/are executed.

If the condition is false, the statement(s) is/are not executed.

After that, while loop ends.
Here is the <strong>syntax</strong> for the while loop:
<b>Syntax:</b>
while (condition)
{
statement(s);
}
<em>statement(s):</em> A statement that is executed as long as the condition evaluates to true.
<em>condition:</em> Here, the condition is a Boolean expression which is evaluated before each pass through the loop.

If this condition evaluates to true, statement(s) is/are executed.

When the condition evaluates to false, execution continues with the statement after the while loop.
<b>Example:</b>
var i = 1;
while (i &lt; 10) 
{
console.log(i);
i++; // i=i+1 same thing
}
Output:
1 
2 
3 
4
5
6
7
8
9
<h2>create Desktop Apps</h2>
<a href="https://softwarerecs.stackexchange.com/questions/14797/can-you-convert-html-css-and-javascript-into-a-exe" class="whitebut ">convert html, css and javascript into a exe</a>
Two very good open-source and extremely actively developed options are
Electron, by GitHub.

Cordova, by the Apache Foundation.

Targets Android, iOS, and Windows from HTML/JavaScript/CSS.

Proton Native.

Works with React Native components and does not use Electron (see above), which makes generated apps therefore more "lightweight" than the ones generated by Electron.
HTML Compiler convert an entire HTML application (using CSS, JavaScript, Images and more) into an standalone Windows application.
ExeOutput for PHP that lets you create applications in native format for Windows with PHP, JavaScript and HTML.

Convert PHP scripts, websites, JavaScript, HTML, databases into stand-alone apps for Windows (single EXE files) that do not require a Web server nor PHP distribution.
<b>Electron</b>
<a href="https://electronjs.org/" target="_blank">Electron</a>
<a href="https://brainhub.eu/electron-js">Electron</a> is an open-source framework initially built by GitHub for Atom editor in 2013.

This library lets you create desktop GUI applications with web technologies like JavaScript, HTML and CSS.
<b>NW.js</b>
<a href="https://nwjs.io/" target="_blank">NW.js</a>
The next on our list of the best JavaScript frameworks for desktop apps is NW.js, previously known as the node-webkit.

It was built at Intel’s Open Source Technology Center by combining Node.js framework with a Chromium engine (previously known as Webkit).
Available on Linux, Mac OS, and Windows.
<b>AppJS</b>
<a href="http://appjs.com/" target="_blank">AppJS</a>
AppJS is a simple yet powerful tool that you can use to build cross-platform apps without the need to learn new languages.

Similarly to the other libraries mentioned today, you’re fine as long as you’re familiar with HTML, CSS and JavaScript.
Although it’s the oldest Node.js-Chromium framework in the AppJS, Electron and NW.js trio, it’s not nearly as mature as its competition.

Because it has lost its momentum, it may not be the best choice for new projects.
<b>Meteor</b>
<a href="https://www.meteor.com/" target="_blank">Meteor</a>
Although it does not build desktop apps on its own, it can be used with Cordova or other similar tools to produce them.

It uses MongoDB, Distributed Data Protocol, and a publish-subscribe pattern to auto-propagate the changes without developer interference.

It has both front-end and back-end modules, including the API, build tools, Node.js packages.
<b>Proton Native</b>
<a href="https://proton-native.js.org/#/" target="_blank">Proton Native</a>
Proton Native is a fresh release.

It was made available on GitHub in the early months of 2018.

It works quite differently to Electron, which runs a full Chromium browser to manage a small GUI.

Proton Native, on the other hand, uses native tools, takes less space and needs fewer resources.
This solution has a few other advantages &#8211; it uses the same syntax as React Native, works with <a href="https://brainhub.eu/blog/react-libraries-javascript-professional-should-know/" target="_blank">React libraries</a> including Redux and is compatible with Node.js.
<b>Summary</b>
To sum up, JavaScript frameworks for desktop apps can be divided into three categories:
Frameworks that produce web browser hosted desktop apps, based on Node.js and Chromium (Electron, NW.js, AppJS).
Frameworks that need to be used with Cordova-like tools (Meteor).
Frameworks that use genuinely native components to build a desktop app (Proton Native).
<h2>build desktop app with Electron</h2>
<a href="https://adityasridhar.com/posts/desktop-apps-with-html-css-javascript" class="whitebut ">build Desktop Apps with HTML, CSS and Javascript</a>
<h3>INSTALL ELECTRON GLOBALLY</h3>
<a href="https://www.youtube.com/watch?v=1Qf2Yjz-zsk" class="whitebut ">Electron Tutorial - Introduction</a>
Install Electron globally on our system using NPM.
npm i electron -g
<h3>CREATE AN ELECTRON PROJECT</h3>
<h3>1.
INITIALIZE THE PROJECT</h3>
First, create a project directory and a package.json file under it.
Now direct to the folder and make a package.json inside it.
mkdir AwesomeProject
cd /AwesomeProject
npm init
Enter the project details if you wish or skip.
<img class="lazy" data-src="https://i2.wp.com/www.techomoro.com/wp-content/uploads/2019/04/Capture.png?resize=593%2C523&ssl=1">
<h3>2.
CREATE A VIEW</h3>
Now create the file we wanted to be viewed when opening our app.

Electron uses HTML to render the view and so we need to create an index.html file.
index.html
&lt;html>
&lt;head>
&lt;title>Hello World Application&lt;/title>
&lt;/head>
&lt;body>
&lt;h1>Hello World&lt;/h1>
&lt;/body>
&lt;/html>
<h3>3.
CREATE AN INDEX.JS FILE</h3>
In package.json, we programmed that the root file of our project is index.js.

So we need to create it.

index.js
const { app, BrowserWindow } = require("electron");
const url = require("url");
function newApp() {
win = new BrowserWindow();
win.loadURL(
url.format({
pathname: "index.html",
slashes: true
})
);
}
app.on("ready", newApp);
<h3>4.
RUNNING OUR APPLICATION</h3>
Now we can run our Electron app using the command below.
<b>electron .</b>
Electron Packager
'electron-packager' is not recognized as an internal or external command
Install it using:
npm install -g electron-packager
Suggested to use one of the options from ia32, x64, armv7l, arm64, mips64el
electron-packager sourcedir appname --platform=win32 --arch=x64
electron-packager AwesomeProject jsNotes --platform=win32 --arch=x64
electron-packager' is not recognized as an internal or external command,
Unable to determine Electron version.

Please specify an Electron version
my package.json is like this were to put the --electron-version ??
Install electron as dev-dependency to resolve this issue
npm install --save-dev electron
And to build for Windows you can run this from the git bash:
electron-packager .

jsNOtes --overwrite --asar=true --platform=win32 --arch=x64 --icon=assets/icons/win/icon.ico --prune=true --out=release-builds --version-string.CompanyName=CE --version-string.FileDescription=CE --version-string.ProductName="jsNOtes"
cannot run app after electron-packager
<h2>A complete guide to packaging your Electron app</h2>
Packaging an electron app simply means creating a desktop installer (dmg, exe, deb etc).

Now if you decide to go around manually packaging your app, you’re gonna have a bad time.
Luckily there are modules, especially the two mentioned below which make the task easier.
<blockquote>
<a href="https://github.com/electron-userland/electron-builder" target="_blank">electron-builder</a>
<a href="https://github.com/electron-userland/electron-packager" target="_blank">electron-packager</a>
</blockquote>
We’ll be using electron-builder since it has a built-in support for <a href="https://github.com/electron-userland/electron-builder/wiki/Code-Signing" target="_blank">Code Signing</a>/<a href="https://github.com/electron-userland/electron-builder#auto-update" target="_blank">Auto Update</a> etc.
<h2>Configure your app to use electron-builder :</h2>
Create a directory <a href="https://github.com/electron-userland/electron-builder/wiki/Options#MetadataDirectories-buildResources" target="_blank">build</a> in the root of the project and save a background.png (macOS DMG background), icon.icns (macOS app icon) and icon.ico (Windows app icon) into it.

The Linux icon set will be generated automatically based on the macOS.

Ex.

<a href="https://github.com/zulip/zulip-electron/tree/master/build" target="_blank">zulip-electron/build</a>
Add electron-builder to your app devDependencies by running:
npm install electron-builder --save-dev
In electron-builder you could use two package.json structure as well as single package.json.

We’ll be using single package.json structure since it’s easier to maintain.
<h2>Sample One package.json</h2>
{
"name": "yourappname",
"version": "0.0.1",
"license": "MIT",
"description": "your app description",
"author": "xyz &lt;xyz@gmail.com>",
"main": "./app/index.js",
"scripts": {
"postinstall": "install-app-deps",
"start": "npm install && electron ./app",
"pack": "build --dir",
"dist": "build"
},
"build": {
"appId": "yourappid",
"category": "your.app.category.type",
"dmg": {
"contents": [
{
"x": 110,
"y": 150
},
{
"x": 240,
"y": 150,
"type": "link",
"path": "/Applications"
}
]
},
"linux": {
"target": [
"AppImage",
"deb"
]
},
"win": {
"target": "squirrel",
"icon": "build/icon.ico"
}
},
"dependencies": {},
"devDependencies": {
"electron": "latest",
"electron-builder": "latest"
}
}
view rawpackage.json hosted with ❤ by GitHub
On windows build you can also use <em>NSIS </em>target which is the default one and recommended by electron-builder.
"win": {   "target": "NSIS"}
That’s it.

You’ve successfully configured electron-builder.

Now let’s build the installers.

To package your app into an installer use command:
npm run dist
It will create an installer in .<em>/dist</em> folder.

By default build command will only generate the installer for current platform and current arch.

For an ex.

running it on OSX will create —
$ npm run dist
|-- mac
|   |-- appname-version-mac.zip
|   |-- appname-version.dmg
|   |-- appname.app
On Windows -
# When using target — Squirrel$ npm run dist
|-- win
|   |-- REALESES
|   |-- appnameSetupversion.exe
|   |-- appname-version-full.nupkg
|-- win-unpacked# When using target — NSIS$ npm run dist
|-- win
|   |-- appnameSetupversion.exe
|-- win-unpacked
On Linux -
$ npm run dist
|-- appname-version.AppImage
|-- appname-version.deb
|-- linux-unpacked
electron-builder is highly configurable.

For complete usage check out its <a href="https://github.com/electron-userland/electron-builder/wiki" target="_blank">wiki</a>.

<a href="https://github.com/zulip/zulip-electron" target="_blank">zulip-electron</a> (two package.json) and <a href="https://github.com/develar/onshape-desktop-shell" target="_blank">onshape-desktop-shell</a> (one package.json) are some real world projects that use electron-builder for their packaging.
<h2>scroll to div bottom, scrollTop, clientHeight and offsetTop</h2>
if(testkey == "l"){divtoc = document.getElementById("toc");$('body,html').animate({scrollTop:(divtoc.clientHeight + divtoc.offsetTop-600)}, 1); }
if(testkey == 'e'){window.scrollTo(0,document.body.scrollHeight);}
if(testkey == 't'){window.location = '#toc';}
if(testkey == "k"){ 
if(typeof bookid == 'undefined') { bookid = $('title').text() }
storeBookmark(bookid, topicpointer.toString());
}
if(testkey == "K"){
if(typeof bookid != 'undefined') {loadBookmark(bookid);}
else{alert("No BookId!")}
function storeBookmark(objName, chapterNum) {
if(typeof objName != 'undefined') {
localStorage.setItem(objName, chapterNum.toString())
}else{alert("No BookId!")}
}
function loadBookmark(objName) {
topicpointer = parseInt(localStorage.getItem(objName))
showImg();
}
==================
if(testkey == "k"){ 
pos = document.getElementsByTagName("body")[0].scrollTop;
if(typeof bookid == 'undefined') { bookid = $('title').text() }
storeBookmark(bookid, pos.toString());
}
if(testkey == "K"){
if(typeof bookid != 'undefined') {loadBookmark(bookid);}
else{alert("No BookId!")}
}
function storeBookmark(objName, pagepos) {
if(typeof objName != 'undefined') {
localStorage.setItem(objName, pagepos.toString())
//    alert("Bookmark changed! " + objName +" " + pagepos)
}else{alert("No BookId!")}
}
function loadBookmark(objName) {
pos = Number(localStorage.getItem(objName))
console.log("Bookmark loaded! " + objName + " " + pos)
$('body').animate({scrollTop: pos}, 0);
}
<h2>lazyload</h2>
<a href="https://github.com/verlok/lazyload" class="whitebut ">lazyload</a>
<b>1</b>
&lt;script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@13.0.1/dist/lazyload.min.js">&lt;/script>
<b>2</b>
&lt;img class="lazy" data-src="lazy.jpg" />
Then, in your javascript code:
<b>3</b>
place script at end of page:
var lazyLoadInstance = new LazyLoad({
elements_selector: ".lazy"
// ...

more custom settings?
});
Lazy video
&lt;video class="lazy" controls data-src="lazy.mp4" data-poster="lazy.jpg">
&lt;source type="video/mp4" data-src="lazy.mp4" />
&lt;source type="video/ogg" data-src="lazy.ogg" />
&lt;source type="video/avi" data-src="lazy.avi" />
&lt;/video>
Please note that the video poster can be lazily loaded too.
To be sure that DOM for your lazy content is ready when you instantiate LazyLoad, place the script tag right before the closing </body> tag.

If more DOM arrives later, e.g.

via an AJAX call, you'll need to call lazyLoadInstance.update(); to make LazyLoad check the DOM again.
lazyLoadInstance.update();
lazy iFrame
&lt;iframe class="lazy" data-src="lazyFrame.html">&lt;/iframe>
<h2>JavaScript check if variable exists (is defined/initialized)</h2>
this creates a switch in the page to turn on/off certain function
if (typeof variable !== 'undefined') {
if(typeof elem === 'string' && elem.trim()) {
or
elem != null
showTopicNumber = true;
if (typeof(showTopicNumber) !== 'undefined'){
if (showTopicNumber == true){
toc.append(topicNumber +' <a href="#topic-'+topicNumber+'" target="_self">'+topic.html()+'</a><br>');
}else{
toc.append('<a href="#topic-'+topicNumber+'" target="_self">'+topic.html()+'</a><br>');
}
}else{
toc.append('<a href="#topic-'+topicNumber+'" target="_self">'+topic.html()+'</a><br>');
}
<h2>HTML5 - Web SQL Database</h2>
<b>W3C no longer maintains this specification.</b>
The Web SQL Database API isn't actually part of the HTML5 specification but it is a separate specification which introduces a set of APIs to manipulate client-side databases using SQL.
<h3>The Core Methods</h3>
There are following three core methods defined in the spec that I am going to cover in this tutorial &minus;
<b>openDatabase</b> &minus; This method creates the database object either using existing database or creating new one.
<b>transaction</b> &minus; This method gives us the ability to control a transaction and performing either commit or rollback based on the situation.
<b>executeSql</b> &minus; This method is used to execute actual SQL query.
<h3>Opening Database</h3>
The <i>openDatabase</i> method takes care of opening a database if it already exists, this method will create it if it already does not exist.
To create and open a database, use the following code &minus;
<k>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);
</k>
The above method took the following five parameters &minus;
Database name
Version number
Text description
Size of database
Creation callback
The last and 5th argument, creation callback will be called if the database is being created.

Without this feature, however, the databases are still being created on the fly and correctly versioned.
<h3>Executing queries</h3>
To execute a query you use the database.transaction() function.

This function needs a single argument, which is a function that takes care of actually executing the query as follows &minus;
<k>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 
db.transaction(function (tx) {   
tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
});
</k>
The above query will create a table called LOGS in 'mydb' database.
<h3>INSERT Operation</h3>
To create enteries into the table we add simple SQL query in the above example as follows &minus;
<k>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 
db.transaction(function (tx) { 
tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "foobar")'); 
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "logmsg")'); 
}); 
</k>
We can pass dynamic values while creating entering as follows &minus;
<k>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);  
db.transaction(function (tx) {   
tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
tx.executeSql('INSERT INTO LOGS (id,log) VALUES (?, ?'), [e_id, e_log]; 
});
</k>
Here <b>e_id</b> and <b>e_log</b> are external variables, and executeSql maps each item in the array argument to the "?"s.
<h3>READ Operation</h3>
To read already existing records we use a callback to capture the results as follows &minus;
<k>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);  
db.transaction(function (tx) { 
tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)');
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "foobar")'); 
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "logmsg")'); 
});  
db.transaction(function (tx) { 
tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) { 
var len = results.rows.length, i; 
msg = "&lt;p>Found rows: " + len + "&lt;/p>"; 
document.querySelector('#status').innerHTML +=  msg; 
for (i = 0; i &lt; len; i++) { 
alert(results.rows.item(i).log ); 
} 
}, null); 
});
</k>
<h3>Final Example</h3>
So finally, let us keep this example in a full-fledged HTML5 document as follows and try to run it with Safari browser.
<a href="http://tpcg.io/rMAhs5" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>
&lt;!DOCTYPE HTML> 
&lt;html>  
&lt;head> 
&lt;script type = "text/javascript"> 
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 
var msg; 
db.transaction(function (tx) { 
tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "foobar")'); 
tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "logmsg")'); 
msg = '&lt;p>Log message created and row inserted.&lt;/p>'; 
document.querySelector('#status').innerHTML =  msg; 
})
db.transaction(function (tx) { 
tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) { 
var len = results.rows.length, i; 
msg = "&lt;p>Found rows: " + len + "&lt;/p>"; 
document.querySelector('#status').innerHTML +=  msg; 
for (i = 0; i &lt; len; i++) { 
msg = "&lt;p>&lt;b>" + results.rows.item(i).log + "&lt;/b>&lt;/p>"; 
document.querySelector('#status').innerHTML +=  msg; 
} 
}, null); 
}); 
&lt;/script> 
&lt;/head> 
&lt;body> 
&lt;div id = "status" name = "status">Status Message&lt;/div> 
&lt;/body> 
&lt;/html>
This will produce the following result &minus;
Log message created and row inserted.
Found rows: 2
foobar
logmsg
<h2>Define a Function</h2>
1 <a href="#functiontopic-1" target="_self">Define a Function.</a>
2 <a href="#functiontopic-2" target="_self">Parameters vs.
Arguments.</a>
3 <a href="#functiontopic-3" target="_self">Invoking a Function.</a>
4 <a href="#functiontopic-4" target="_self">Function Return.</a>
5 <a href="#functiontopic-5" target="_self">Function Objects.</a>
6 <a href="#functiontopic-6" target="_self">Key Takeaways.</a>
<h3 id="functiontopic-1">Define a Function.</h3>
There are a few different ways to define a function in JavaScript:
A <strong>Function Declaration </strong>defines a named function.

To create a function declaration you use the <k>function</k> keyword followed by the name of the function.

When using function declarations, the function definition is hoisted, thus allowing the function to be used before it is defined.
<span class="green">function name(parameters){ <em>statements</em>}</span>
A <strong>Function Expressions</strong> defines a named or anonymous function.

An anonymous function is a function that has no name.

Function Expressions are not hoisted, and therefore cannot be used before they are defined.

In the example below, we are setting the anonymous function object equal to a variable.
<span class="green">let name = function(parameters){
<em>statements</em>
}</span>
An <strong>Arrow Function Expression</strong> is a shorter syntax for writing function expressions.

Arrow functions do not create their own <k>this</k> value.
<span class="green">let name = (parameters) => {
<em>statements</em>
}</span>
<h3 id="functiontopic-2">Parameters vs.

Arguments.</h3>
If you’re new to JavaScript, you may have heard the terms 
<em>parameters</em> and <em>arguments </em>used interchangeably.

While very similar, there is an important distinction to make between these two keywords.
<strong>Parameters</strong> are used when defining a function, they are the 
<em>names</em> created in the function definition.

In fact, during a function definition, we can pass in up to 255 parameters! Parameters are separated by commas in the <k>()</k>.

Here’s an example with two parameters — <k>param1</k> &amp; <k>param2</k>:
<span class="green">const param1 = true;
const param2 = false;</span>
<span class="green">function twoParams(param1, param2){
<em>console.log(param1, param2);</em>}</span>
<strong>Arguments</strong>, on the other hand, are the 
<em>values</em> the function receives from each parameter when the function is executed (invoked).

In the above example, our two arguments are <k>true</k> &amp; <k>false</k>.
<h3 id="functiontopic-3">Invoking a Function.</h3>
Functions execute when the function is called.

This process is known as invocation.

You can invoke a function by referencing the function name, followed by an open and closed parenthesis: <k>()</k>.
Lets explore an example.
First, we’ll define a function named <k>logIt</k>.

This function will take one parameter, <k>name</k>.

When executed, the function will log that <k>name</k> back to the console:
<span class="green">function logIt(name){
<em>console.log(name);</em>}</span>
To invoke our function, we call it, while passing in the singular parameter.

Here I am calling this function with the name 
<em>Joe</em>:
<span class="green">logIt('Joe');
// Joe</span>
If your function has no parameters, you can invoke it with an empty set of parenthesis:
<span class="green">function logIt2(){
<em>console.log('The second one');</em>}</span>
<span class="green">logIt2();
// The second one</span>
<h3 id="functiontopic-4">Function Return.</h3>
Every function in JavaScript returns <k>undefined</k> unless otherwise specified.
Let’s test this by creating and invoking an empty function:
<span class="green">function test(){};</span>
<span class="green">test();
// undefined</span>
Awesome, as expected, <k>undefined</k> is returned.
Now, we can customize what is returned in our function by using the <k>return</k> keyword followed by our return value.

Take a look at the code below:
<span class="green">function test(){
return true;
};</span>
<span class="green">test();
// <strong>true</strong></span>
In this example we explicitly tell the function to return <k>true</k>.

When we invoke the function, that’s exactly what happens.
But why is this important?
It’s important because the value that a function returns, is actually returned to the caller of the function.

Take a look at this code:
<span class="green">let double = function(num) {
return num * 2;
}</span>
This is a function expression that creates a function that will return two times the value of our input parameter <k>num</k>.

We can then invoke the function and save the return value to a variable:
<span class="green">let test = double(3);</span>
When we log out our <k>test</k> value, we get <k>6</k>:
<span class="green">console.log(test);
// 6</span>
Awesome! The <k>return</k> variable not only returns values from a function, but it assigns them to whatever called the function!
Another important rule of the return statement is that it stops function execution immediately.
Consider this example where we have two return statements in our test function:
<span class="green">function test(){
return true;
return false;
};</span>
<span class="green">test();
// <strong>true</strong></span>
The first return statement immediately stops execution of our function and causes our function to return <k>true</k>.

The code on line three: <k>return false;</k> is 
<em>never </em>executed.
<h3 id="functiontopic-5">Function Objects.</h3>
Functions are function objects.

In JavaScript, anything that is not a primitive type ( <k>undefined</k>, <k>null</k>,<k>boolean</k>, <k>number</k>, or <k>string</k>) is an object.

Objects in JavaScript are <em>extremely </em>versatile.

Because of this, we can even pass a function as a parameter into another function.
When a function accepts another function as a parameter, or returns a function, it is called a higher-order function.

You’ve probably already used a bunch of higher order functions and don’t even know it: <k>Array.prototype.map</k>and <k>Array.prototype.filter</k> are higher order functions (Just to name a couple).

<em>You can check out some of my previous articles to learn more about objects and higher order functions in JavaScript…</em>
<h3 id="functiontopic-6">Key Takeaways.</h3>
This is a lot of information to digest.

Here’s a list of the important stuff:
<ul>
<li>A function is a <strong>
<em>subprogram</em></strong> designed to perform a particular task.</li>
<li>Function definitions are hoisted — expressions are not.</li>
<li>Functions are executed when they are called.

This is known as <strong>
<em>invoking</em></strong> a function.</li>
<li>Values can be <strong>
<em>passed</em></strong> into functions and used within the function.

The name of the value is called a parameter.

The actual value itself is called an argument.</li>
<li>Functions <strong>
<em>always</em></strong> <k>return</k> a value.

In JavaScript, if no <k>return</k> value is specified, the function will return <k>undefined</k> by default.</li>
<li>Functions are <strong>
<em>objects</em></strong>.</li></ul>
<h3>What is a Function Expression?</h3>
A JavaScript function can also be defined using an <strong>expression</strong>.
A function expression can be stored in a variable:
<em>var x = function (a, b) {return a * b};</em>
After a function expression has been stored in a variable, the variable can be used as a function.

Functions stored in variables do not need function names.

They are always invoked (called) using the variable name.
<h3>Function Expression VS.

Function Statement</h3>
<strong>Example: Function Expression</strong>
<span>alert(foo()); // ERROR! foo wasn&#x27;t loaded yet
var foo = function() { return 5; }</span>
<strong>Example: Function Declaration</strong>
<span>alert(foo()); // Alerts 5.

Declarations are loaded before any code can run.<br/>function foo() { return 5; }</span>
<strong>Function declarations</strong> load before any code is executed while <strong>Function expressions</strong> load only when the interpreter reaches that line of code.Similar to the <k>var</k> statement, function declarations are hoisted to the top of other code.

Function expressions aren’t hoisted, which allows them to retain a copy of the local variables from the scope where they were defined.
<h3>Benefits of Function Expressions</h3>
There are several different ways that function expressions become more useful than function declarations.
<h2>"use strict"</h2>
Defines that JavaScript code should be executed in "strict mode".
With strict mode, you can not, for example, use undeclared variables.
"use strict";
x = 3.14;  // This will cause an error (x is not defined).
"use strict";
myFunction();
function myFunction() {
y = 3.14;   // This will also cause an error because y is not declared
}
Declared inside a function, it has local scope (only the code inside the function is in strict mode):
x = 3.14;       // This will not cause an error.
myFunction();
function myFunction() {
"use strict";
y = 3.14;   // This will cause an error
}
Why Strict Mode?
Strict mode makes it easier to write "secure" JavaScript.
Strict mode changes previously accepted "bad syntax" into real errors.
As an example, in normal JavaScript, mistyping a variable name creates a new global variable.

In strict mode, this will throw an error, making it impossible to accidentally create a global variable.
In normal JavaScript, a developer will not receive any error feedback assigning values to non-writable properties.
In strict mode, any assignment to a non-writable property, a getter-only property, a non-existing property, a non-existing variable, or a non-existing object, will throw an error.
<h2>Calculate the Max/Min value from an array</h2>
The built-in functions Math.max() and Math.min() find the maximum and minimum value of the arguments, respectively.
Math.max(1, 2, 3, 4); // 4
Math.min(1, 2, 3, 4); // 1
These functions will not work as-is with arrays of numbers.

However, there are some ways around this.
var numbers = [1, 2, 3, 4];
Math.max.apply(null, numbers) // 4
Math.min.apply(null, numbers) // 1
A simpler way is with the new spread operator.
var numbers = [1, 2, 3, 4];
Math.max(...numbers) // 4
Math.min(...numbers) // 1
This operator spread the values into the function.
<h2>subtopic.js</h2>
subtopic.js not yet finished
<h2>load json from url</h2>
$.getJSON(url, function(data) {
//data is the JSON string
});
<h3>Append &lt;script>&lt;/script> in javascript</h3>
&lt;script src="http://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_monthqfq&param=hk00700,month,,,320,qfq">&lt;/script>
&lt;script>
console.log(kline_monthqfq);
&lt;/script>
var s = document.createElement("script");
s.type = "text/javascript";
s.src = "http://somedomain.com/somescript";
$("head").append(s);
Note that the script will load and you can access the variables inside it, but you wouldn't see the actual &lt;script> tag in the DOM.
<h2>PhantomJS</h2>
<a href="https://phantomjs.org/" class="whitebut gold limebs">PhantomJS - Scriptable Headless Browser</a>
<a href="https://phantomjs.org/documentation/" class="whitebut ">phantomjs documentation</a>
<a href="https://phantomjs.org/quick-start.html" class="whitebut ">Quick Start with PhantomJS</a>
PhantomJS is a JS console.

similar to nodejs
must go to phantomjs install folder, and then run it from the terminal or command prompt:
cd D:/phantomjs/bin/
phantomjs hello.js
the file must inside the install folder
very important to call phantom.exit at some point in the script, otherwise PhantomJS will not be terminated at all.
Page Loading
A web page can be loaded, analyzed, and rendered by creating a webpage object.
The following script demonstrates the simplest use of page object.

It loads example.com and then saves it as an image, example.png in the same directory the script was run in.
var page = require('webpage').create();
page.open('http://example.com', function(status) {
console.log("Status: " + status);
if(status === "success") {
page.render('example.png');
}
phantom.exit();
});
Because of its rendering features, PhantomJS can be used to capture web pages, essentially taking a screenshot of the contents.
The following loadspeed.js script loads a specified URL (do not forget the http protocol) and measures the time it takes to load it.
var page = require('webpage').create(),
system = require('system'),
t, address;
if (system.args.length === 1) {
console.log('Usage: loadspeed.js [some URL]');
phantom.exit();
}
t = Date.now();
address = system.args[1];
page.open(address, function(status) {
if (status !== 'success') {
console.log('FAIL to load the address');
} else {
t = Date.now() - t;
console.log('Loading ' + system.args[1]);
console.log('Loading time ' + t + ' msec');
}
phantom.exit();
});
Run the script with the command:
phantomjs loadspeed.js http://www.google.com
It outputs something like:
Loading http://www.google.com
Loading time 719 msec
Code Evaluation
To evaluate JavaScript code in the context of the web page, use evaluate() function.

The execution is "sandboxed", there is no way for the code to access any JavaScript objects and variables outside its own page context.

An object can be returned from evaluate(), however it is limited to simple objects and can’t contain functions or closures.
Here is an example to show the title of a web page:
var page = require('webpage').create();
page.open(url, function(status) {
var title = page.evaluate(function() {
return document.title;
});
console.log('Page title is ' + title);
phantom.exit();
});
Any console message from a web page, including from the code inside evaluate(), will not be displayed by default.

To override this behavior, use the onConsoleMessage callback.

The previous example can be rewritten to:
var page = require('webpage').create();
page.onConsoleMessage = function(msg) {
console.log('Page title is ' + msg);
};
page.open(url, function(status) {
page.evaluate(function() {
console.log(document.title);
});
phantom.exit();
});
Since the script is executed as if it is running on a web browser, standard DOM scripting and CSS selectors work just fine.

It makes PhantomJS suitable to carry out various page automation tasks.
<h2>Sine Wave in JavaScript</h2>
<a href="https://gist.github.com/gkhays/e264009c0832c73d5345847e673a64ab" class="whitebut ">Draw a Sine Wave in JavaScript</a>
<a href="https://codepen.io/isdampe/pen/MbLdOv" class="whitebut ">JS Sine Wave</a>
<h2>JavaScript single line 'if' statement syntax</h2>
if (lemons) document.write("foo gave me a bar");
(lemons) ? alert("please give me a lemonade") : alert("then give me a beer");
(lemon) ? document.write("foo gave me a bar") : document.write("FALSE");
if(dog) alert('bark bark');
<h2>if-else shorthand omitting the second expression</h2>
if (x==2) doSomething; else doSomethingElse
if (myArray[i].value) alert('yay') ; else continue;
<h2>calculate ema</h2>
function EMACalc(mArray,mRange) {
var k = 2/(mRange + 1);
// first item is just the same as the first item in the input
emaArray = [mArray[0]];
// for the rest of the items, they are computed with the previous one
for (var i = 1; i < mArray.length; i++) {
emaArray.push(mArray[i] * k + emaArray[i - 1] * (1 - k));
}
return emaArray;
}
<h2>remove empty element in an array</h2>
var array = [0, 1, null, 2, "", 3, undefined, 3,,,,,, 4,, 4,, 5,, 6,,,,];
var filtered = array.filter(function (el) {
return el != null;
});
alert(filtered);
or
arr = arr.filter((val) => val != "");
<h2>remove common items from list</h2>
Use the Array.filter() method:
fmList = [1,2,3,4,6,7,8,9]
toRemove = [2,3,5]
fmList = fmList.filter( function( item ) {
return !toRemove.includes( item );
} );
fmList = fmList.filter( ( item ) => !toRemove.includes( item ) );
<h2>create script element and load it</h2>
document.createElement(“script”) synchronously
create &lt;script> element with an "onload" handler, and that will be called when the script has been loaded and evaluated by the browser.
var script = document.createElement('script');
script.onload = function() {
alert("Script loaded and ready");
};
script.src = "http://whatever.com/the/script.js";
document.getElementsByTagName('head')[0].appendChild(script);
This isn't pretty, but it works:
&lt;script type="text/javascript">
document.write('&lt;script type="text/javascript" src="other.js">&lt;/script>');
&lt;/script>
&lt;script type="text/javascript">
functionFromOther();
&lt;/script>
Or
&lt;script type="text/javascript">
document.write('&lt;script type="text/javascript" src="other.js">&lt;/script>');
window.onload = function() {
functionFromOther();
};
&lt;/script>

another way:
var d=document,
    g=d.createElement('script'),
    s=d.getElementsByTagName('script')[0];
    g.type='text/javascript';
    g.async=true;
    g.src=u+'m.js';
    s.parentNode.insertBefore(g, s);

<h2>JSON methods, toJSON</h2>
Let’s say we have a complex object, and we’d like to convert it into a string, to send it over a network, or just to output it for logging purposes.
let user = {
name: "John",
age: 30,
toString() { return `{name: "${this.name}", age: ${this.age}}`; }
};
alert(user); // {name: "John", age: 30}
…But in the process of development, new properties are added, old properties are renamed and removed.
Updating such toString every time can become a pain.
JavaScript provides methods:
<b>JSON.stringify</b> to convert objects into JSON.
<b>JSON.parse</b> to convert JSON back into an object.
For instance, here we JSON.stringify a student:
let student = {
name: 'John',
age: 30,
isAdmin: false,
courses: ['html', 'css', 'js'],
wife: null
};
let json = JSON.stringify(student);
alert(typeof json); // we've got a string!
alert(json);
/* JSON-encoded object:
{
"name": "John",
"age": 30,
"isAdmin": false,
"courses": ["html", "css", "js"],
"wife": null
}
*/
The method JSON.stringify(student) takes the object and converts it into a string.
The resulting json string is called a <em>JSON-encoded</em> or <em>serialized</em> or <em>stringified</em> or <em>marshalled</em> object.
We are ready to send it over the wire or put into a plain data store.
Please note that a JSON-encoded object has several important differences from the object literal:
Strings use double quotes.
No single quotes or backticks in JSON.
So 'John' becomes "John".
Object property names are double-quoted also.
That’s obligatory.
So age:30 becomes "age":30.
JSON.stringify can be applied to primitives as well.
JSON supports following data types:
Objects { ...

}
Arrays [ ...

]
Primitives:
strings, numbers, boolean values true/false, null.
For instance:
// a number in JSON is just a number
alert( JSON.stringify(1) ) // 1
// a string in JSON is still a string, but double-quoted
alert( JSON.stringify('test') ) // "test"
alert( JSON.stringify(true) ); // true
alert( JSON.stringify([1, 2, 3]) ); // [1,2,3]
JSON is data-only language-independent specification, so some JavaScript-specific object properties are skipped by JSON.stringify.
Namely:
Function properties (methods).
Symbolic properties.
Properties that store undefined.
let user = {
sayHi() { // ignored
alert("Hello");
},
[Symbol("id")]: 123, // ignored
something: undefined // ignored
};
alert( JSON.stringify(user) ); // {} (empty object)
Usually that’s fine.

If that’s not what we want, then soon we’ll see how to customize the process.
The great thing is that nested objects are supported and converted automatically.
For instance:
let meetup = {
title: "Conference",
room: { number: 23, participants: ["john", "ann"] }
};
alert( JSON.stringify(meetup) );
/* The whole structure is stringified:
{
"title":"Conference",
"room":{"number":23,"participants":["john","ann"]},
}
*/
The important limitation: there must be no circular references.
For instance:
let room = {
number: 23
};
let meetup = {
title: "Conference",
participants: ["john", "ann"]
};
meetup.place = room;       // meetup references room
room.occupiedBy = meetup; // room references meetup
JSON.stringify(meetup); // Error: Converting circular structure to JSON
Here, the conversion fails, because of circular reference: room.occupiedBy references meetup, and meetup.place references room:
<figure>
<object type="image/svg+xml" data="/article/json/json-meetup.svg">
<img class="lazy" data-src="https://javascript.info/article/json/json-meetup.svg">
</object>
</figure>
<h2>Excluding and transforming: replacer</h2>
The full syntax of JSON.stringify is:
let json = JSON.stringify(value[, replacer, space])
<dl>
<dt>value</dt>
<dd>A value to encode.</dd>
<dt>replacer</dt>
<dd>Array of properties to encode or a mapping function function(key, value).</dd>
<dt>space</dt>
<dd>Amount of space to use for formatting</dd>
</dl>
Most of the time, JSON.stringify is used with the first argument only.

But if we need to fine-tune the replacement process, like to filter out circular references, we can use the second argument of JSON.stringify.
If we pass an array of properties to it, only these properties will be encoded.
For instance:
let room = {
number: 23
};
let meetup = {
title: "Conference",
participants: [{name: "John"}, {name: "Alice"}],
place: room // meetup references room
};
room.occupiedBy = meetup; // room references meetup
alert( JSON.stringify(meetup, ['title', 'participants']) );
// {"title":"Conference","participants":[{},{}]}
Here we are probably too strict.

The property list is applied to the whole object structure.

So the objects in participants are empty, because name is not in the list.
Let’s include in the list every property except room.occupiedBy that would cause the circular reference:
let room = {
number: 23
};
let meetup = {
title: "Conference",
participants: [{name: "John"}, {name: "Alice"}],
place: room // meetup references room
};
room.occupiedBy = meetup; // room references meetup
alert( JSON.stringify(meetup, ['title', 'participants', 'place', 'name', 'number']) );
/*
{
"title":"Conference",
"participants":[{"name":"John"},{"name":"Alice"}],
"place":{"number":23}
}
*/
Now everything except occupiedBy is serialized.

But the list of properties is quite long.
Fortunately, we can use a function instead of an array as the replacer.
The function will be called for every (key, value) pair and should return the “replaced” value, which will be used instead of the original one.

Or undefined if the value is to be skipped.
In our case, we can return value “as is” for everything except occupiedBy.

To ignore occupiedBy, the code below returns undefined:
let room = {
number: 23
};
let meetup = {
title: "Conference",
participants: [{name: "John"}, {name: "Alice"}],
place: room // meetup references room
};
room.occupiedBy = meetup; // room references meetup
alert( JSON.stringify(meetup, function replacer(key, value) {
alert(`${key}: ${value}`);
return (key == 'occupiedBy') ? undefined : value;
}));
/* key:value pairs that come to replacer:
:             [object Object]
title:        Conference
participants: [object Object],[object Object]
0:            [object Object]
name:         John
1:            [object Object]
name:         Alice
place:        [object Object]
number:       23
*/
Please note that replacer function gets every key/value pair including nested objects and array items.

It is applied recursively.

The value of this inside replacer is the object that contains the current property.
The first call is special.

It is made using a special “wrapper object”: {": meetup}.

In other words, the first (key, value) pair has an empty key, and the value is the target object as a whole.

That’s why the first line is ":[object Object]" in the example above.
The idea is to provide as much power for replacer as possible: it has a chance to analyze and replace/skip even the whole object if necessary.
<h2>Formatting: space</h2>
The third argument of JSON.stringify(value, replacer, space) is the number of spaces to use for pretty formatting.
Previously, all stringified objects had no indents and extra spaces.

That’s fine if we want to send an object over a network.

The space argument is used exclusively for a nice output.
Here space = 2 tells JavaScript to show nested objects on multiple lines, with indentation of 2 spaces inside an object:
let user = {
name: "John",
age: 25,
roles: {
isAdmin: false,
isEditor: true
}
};
alert(JSON.stringify(user, null, 2));
/* two-space indents:
{
"name": "John",
"age": 25,
"roles": {
"isAdmin": false,
"isEditor": true
}
}
*/
/* for JSON.stringify(user, null, 4) the result would be more indented:
{
"name": "John",
"age": 25,
"roles": {
"isAdmin": false,
"isEditor": true
}
}
*/
The space parameter is used solely for logging and nice-output purposes.
<h2>Custom “toJSON”</h2>
Like toString for string conversion, an object may provide method toJSON for to-JSON conversion.

JSON.stringify automatically calls it if available.
For instance:
let room = {
number: 23
};
let meetup = {
title: "Conference",
date: new Date(Date.UTC(2017, 0, 1)),
room
};
alert( JSON.stringify(meetup) );
/*
{
"title":"Conference",
"date":"2017-01-01T00:00:00.000Z",  // (1)
"room": {"number":23}               // (2)
}
*/
Here we can see that date (1) became a string.

That’s because all dates have a built-in toJSON method which returns such kind of string.
Now let’s add a custom toJSON for our object room (2):
let room = {
number: 23,
toJSON() {
return this.number;
}
};
let meetup = {
title: "Conference",
room
};
alert( JSON.stringify(room) ); // 23
alert( JSON.stringify(meetup) );
/*
{
"title":"Conference",
"room": 23
}
*/
As we can see, toJSON is used both for the direct call JSON.stringify(room) and when room is nested in another encoded object.
<h2>JSON.parse</h2>
To decode a JSON-string, we need another method named <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON.parse</a>.
The syntax:
let value = JSON.parse(str, [reviver]);
<dl>
<dt>str</dt>
<dd>JSON-string to parse.</dd>
<dt>reviver</dt>
<dd>Optional function(key,value) that will be called for each (key, value) pair and can transform the value.</dd>
</dl>
For instance:
// stringified array
let numbers = "[0, 1, 2, 3]";
numbers = JSON.parse(numbers);
alert( numbers[1] ); // 1
Or for nested objects:
let userData = '{ "name": "John", "age": 35, "isAdmin": false, "friends": [0,1,2,3] }';
let user = JSON.parse(userData);
alert( user.friends[1] ); // 1
The JSON may be as complex as necessary, objects and arrays can include other objects and arrays.

But they must obey the same JSON format.
Here are typical mistakes in hand-written JSON (sometimes we have to write it for debugging purposes):
let json = `{
name: "John",                     // mistake: property name without quotes
"surname": 'Smith',               // mistake: single quotes in value (must be double)
'isAdmin': false                  // mistake: single quotes in key (must be double)
"birthday": new Date(2000, 2, 3), // mistake: no "new" is allowed, only bare values
"friends": [0,1,2,3]              // here all fine
}`;
Besides, JSON does not support comments.

Adding a comment to JSON makes it invalid.
There’s another format named <a href="http://json5.org/">JSON5</a>, which allows unquoted keys, comments etc.

But this is a standalone library, not in the specification of the language.
The regular JSON is that strict not because its developers are lazy, but to allow easy, reliable and very fast implementations of the parsing algorithm.
<h2>Using reviver</h2>
Imagine, we got a stringified meetup object from the server.
It looks like this:
// title: (meetup title), date: (meetup date)
let str = '{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}';
…And now we need to <em>deserialize</em> it, to turn back into JavaScript object.
Let’s do it by calling JSON.parse:
let str = '{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}';
let meetup = JSON.parse(str);
alert( meetup.date.getDate() ); // Error!
Whoops! An error!
The value of meetup.date is a string, not a Date object.

How could JSON.parse know that it should transform that string into a Date?
Let’s pass to JSON.parse the reviving function as the second argument, that returns all values “as is”, but date will become a Date:
let str = '{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}';
let meetup = JSON.parse(str, function(key, value) {
if (key == 'date') return new Date(value);
return value;
});
alert( meetup.date.getDate() ); // now works!
By the way, that works for nested objects as well:
let schedule = `{
"meetups": [
{"title":"Conference","date":"2017-11-30T12:00:00.000Z"},
{"title":"Birthday","date":"2017-04-18T12:00:00.000Z"}
]
}`;
schedule = JSON.parse(schedule, function(key, value) {
if (key == 'date') return new Date(value);
return value;
});
alert( schedule.meetups[1].date.getDate() ); // works!
<h2>Summary</h2>
JSON is a data format that has its own independent standard and libraries for most programming languages.
JSON supports plain objects, arrays, strings, numbers, booleans, and null.
JavaScript provides methods <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify</a> to serialize into JSON and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON.parse</a> to read from JSON.
Both methods support transformer functions for smart reading/writing.
If an object has toJSON, then it is called by JSON.stringify.
<h2>Tasks</h2>
<h3>Turn the object into JSON and back</h3>
importance: 5Turn the user into JSON and then read it back into another variable.
let user = {
name: "John Smith",
age: 35
};
<button class="task__solution" type="button">solution</button>
let user = {
name: "John Smith",
age: 35
};
let user2 = JSON.parse(JSON.stringify(user));
<button class="close-button task__answer-close" type="button" title="close"></button><h3 class="task__title">importance: 5In simple cases of circular references, we can exclude an offending property from serialization by its name.
But sometimes we can’t just use the name, as it may be used both in circular references and normal properties.

So we can check the property by its value.
Write replacer function to stringify everything, but remove properties that reference meetup:
let room = {
number: 23
};
let meetup = {
title: "Conference",
occupiedBy: [{name: "John"}, {name: "Alice"}],
place: room
};
// circular references
room.occupiedBy = meetup;
meetup.self = meetup;
alert( JSON.stringify(meetup, function replacer(key, value) {
/* your code */
}));
/* result should be:
{
"title":"Conference",
"occupiedBy":[{"name":"John"},{"name":"Alice"}],
"place":{"number":23}
}
*/
<button class="task__solution" type="button">solution</button>
let room = {
number: 23
};
let meetup = {
title: "Conference",
occupiedBy: [{name: "John"}, {name: "Alice"}],
place: room
};
room.occupiedBy = meetup;
meetup.self = meetup;
alert( JSON.stringify(meetup, function replacer(key, value) {
return (key != " &amp;&amp; value == meetup) ? undefined : value;
}));
/*
{
"title":"Conference",
"occupiedBy":[{"name":"John"},{"name":"Alice"}],
"place":{"number":23}
}
*/
<h2>show turnover on page</h2>
function showTO(stkcode) {
stkcode = "00000"+stkcode
codewidth = stkcode.length
stkcode = stkcode.slice(codewidth-5, codewidth)
urladdr = 'http://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&amp;param=hk' + stkcode + ',day,,,20,qfq';
var script = document.createElement('script');
script.onload = function() {
$("#turnover").html("Turnover: ");
theObj = kline_dayqfq.data;
newObj = Object.values(theObj)
newObj = Object.values(newObj[0])
newObj = Object.values(newObj[0])
for(i=10;i&lt;newObj.length;i++){
thedate = newObj[i][0]  // date
theamt = Math.round(Number(newObj[i][8]))  // amt
$("#turnover").append( theamt,"w ")
}
};
script.src = urladdr;
document.getElementsByTagName('head')[0].appendChild(script);
}
<h2>get the name of the array in json data</h2>
let user = { name: "John", age: 30 };
Object.keys(user) = ["name", "age"]
Object.values(user) = ["John", 30]
Object.entries(user) = [ ["name","John"], ["age",30] ]
Accessing nested JSON values with unknown names
https://stackoverflow.com/questions/36031009/access-elements-inside-json-object-without-knowing-names
<h2>navigation methods</h2>
if(testkey == 'T'){window.scrollTo(0,0);}
if(testkey == '8'){window.location = '#dateTime';}
if(testkey == "2"){
divtoc = document.getElementById("toc");
$('body,html').animate({scrollTop:(divtoc.clientHeight + divtoc.offsetTop-600)}, 1);
}
<h2>detect whether the "ALT" key was pressed</h2>
<span class="orange">event.altKey</span>
A Boolean, indicating whether the "ALT" key was pressed when the key event occured.
<span class="orange">document.onkeydown = keydown;</span>
function keydown(evt) {
if (!evt) evt = event;
if (evt.altKey) {
alert('alt');
}
}
or
<span class="orange">$(document).on('keydown', function (e) {</span>
if (e.key === 'Alt') {
alert('alt');
}
});
<h2>KeyboardEvent ctrlKey Property</h2>
<span class="orange">event.ctrlKey</span>
true - The ctrl key was pressed
false - The ctrl key was not pressed
if (event.ctrlKey) {
alert('ctrl yes');
} else {
alert('ctrl no');
}
<h2>KeyboardEvent shiftKey Property</h2>
<span class="orange">event.shiftKey</span>
if (event.shiftKey) {
alert('shift yes');
} else {
alert('shift no');
}
<h2>KeyboardEvent metaKey Property</h2>
<span class="orange">event.metaKey</span>
if (event.metaKey) {
alert('metaKey yes');
} else {
alert('metaKey no');
}
<h2>KeyboardEvent keyCode Property</h2>
<span class="orange">event.keyCode</span>
var x = event.keyCode;
&lt;input type="text" onkeypress="uniCharCode(event)" onkeydown="uniKeyCode(event)">
// both function will be called at the same time when key pressed
function uniCharCode(event) {
var char = event.which || event.keyCode;
alert("Unicode CHARACTER code: " + char);
}
function uniKeyCode(event) {
var key = event.keyCode;
alert('Unicode KEY code: " + key);
}
When pressing the "a" key on the keyboard (not using caps lock), the result of char and key will be:
Unicode CHARACTER code: 97
Unicode KEY code: 65
Example
Alert some text if the user presses the <span class="orange">Escape</span> key:
&lt;input type="text" onkeydown="myFunction(event)">
function myFunction(event) {
var x = event.keyCode;
if (x == 27) {  // 27 is the ESC key
alert ("You pressed the Escape key!");
}
}
Example
Convert the Unicode value into a character (does not work for function keys):
var x = event.keyCode;                // Get the Unicode value
var y = String.fromCharCode(x);       // Convert the value into a character
<h2>KeyboardEvent which Property</h2>
<span class="orange">event.which</span>
returns the <span class="orange">Unicode character code</span> of the key that triggered the <span class="orange">onkeypress event</span>,
or the <span class="orange">Unicode key code</span> of the key that triggered the <span class="orange">onkeydown or onkeyup event</span>.
Example
Get the Unicode value of the pressed keyboard key:
var x = event.which;
<h2>KeyboardEvent key Property</h2>
<span class="orange">event.key</span>
A String, representing the pressed keyboard button.
Possible values:
A single character (like "a", "W", "4", "+" or "$")
A multicharacter (like "F1", "Enter", "HOME" or "CAPS LOCK")
Example
Alert some text if the user presses the "A" key:
var x = event.key;
// If the pressed keyboard button is "a" or "A" (using caps lock or shift), alert some text.
if (x == "a" || x == "A") {
alert ("You pressed the 'A' key!");
}
<h2>KeyboardEvent charCode Property</h2>
event.charCode
A Number, representing the Unicode character code
Example
Alert some text if the user presses the "O" key:
function myFunction(event) {
var x = event.charCode || event.keyCode;
if (x == 111 || x == 79) { // o is 111, O is 79
alert("You pressed the 'O' key!");
}
}
<h2>onwheel, onscroll Event</h2>
<span class="orange">onwheel</span> specifically fires when the mouse wheel is spun.

Note that onwheel is non-standard and should be avoided unless you're specifically targeting browsers that support it and/or are providing an extra feature whose absence won't be felt.
<span class="orange">onscroll</span> fires for any kind of scrolling, including keyboard buttons like the arrow keys, Home, End, Page Up, Page Down, space bar, tabbing etc.
<span class="orange">object.onscroll = function(){myScript};</span>
using the addEventListener() method:
<span class="orange">object.addEventListener("scroll", myScript);</span>
Note: The addEventListener() method is not supported in Internet Explorer 8 and earlier versions.
Example
Toggle between class names on different scroll positions - When the user scrolls down 50 pixels from the top of the page, the class name "test" will be added to an element (and removed when scrolled up again).
<span class="orange">window.onscroll = function() {myFunction()};</span>
function myFunction() {
  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
    document.getElementById("myP").className = "test";
  } else {
      document.getElementById("myP").className = "";
  }
}

<r>window.onscroll function</r>
  up = document.getElementById("BackToTop2");

  window.onscroll = function() {
    scrollFunction()
  };

  function scrollFunction() {
    if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
      up.style.display = "block";
    } else {
      up.style.display = "none";
    }
  }

  function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
  }


Example
Slide in an element when the user has scrolled down 350 pixels from the top of the page (add the slideUp class):

window.onscroll = function() {myFunction()};

function myFunction() {
  if (document.body.scrollTop > 350 || document.documentElement.scrollTop > 350) {
    document.getElementById("myImg").className = "slideUp";
  }
}

 // 滚屏时触发函数
 window.onscroll =function(){
   lazyload(imgs);
 }
<h2>MouseEvent which Property</h2>
<span class="orange">event.which</span>
returns a number that indicates which mouse button was pressed when a mouse event was triggered.
Example
Find out which mouse button that was pressed when a mouse event was triggered:
alert("You pressed button: " + event.which)
<h2>MouseEvent button Property</h2>
event.button
A Number, representing which mouse button that was pressed when the mouse event occured.
alert("You pressed button: " + event.button)
<h2>Style Object Properties</h2>
Sets or returns the Object Properties
example
thePointerImg.style.width = (currWidth - 100) + "px";
thePointerImg.style.transform = "rotate(90deg)";
Rotate and translate
transform-origin: left;
translate(50%, 50%) rotate(90deg) ;
transform-origin: 50%;
rotate(90deg) translateY(100%) ;
Be careful on the "order of execution" in CSS3 chains! The rule is (right) from (left).

Not Left to Right.
transformation: translate(0,10%) rotate(25deg);
The "rotate" operation is done first, than the "translate" operation comes next/second.
alignContent	alignment between the lines inside a flexible container when the items do not use all available space
alignItems	alignment for items inside a flexible container
alignSelf	alignment for selected items inside a flexible container
animation	A shorthand property for all the animation properties below, except the animationPlayState property
animationDelay	when the animation will start
animationDirection	whether or not the animation should play in reverse on alternate cycles
animationDuration	how many seconds or milliseconds an animation takes to complete one cycle
animationFillMode	what values are applied by the animation outside the time it is executing
animationIterationCount	number of times an animation should be played
animationName	a name for the @keyframes animation
animationTimingFunction	speed curve of the animation
animationPlayState	whether the animation is running or paused
background	all the background properties in one declaration
backgroundAttachment	whether a background-image is fixed or scrolls with the page
backgroundColor	background-color of an element
backgroundImage	background-image for an element
backgroundPosition	starting position of a background-image
backgroundRepeat	how to repeat (tile) a background-image
backgroundClip	painting area of the background
backgroundOrigin	positioning area of the background images
backgroundSize	size of the background image
backfaceVisibility	whether or not an element should be visible when not facing the screen
border	borderWidth, borderStyle, and borderColor in one declaration
borderBottom	all the borderBottom properties in one declaration
borderBottomColor	color of the bottom border
borderBottomLeftRadius	shape of the border of the bottom-left corner
borderBottomRightRadius	shape of the border of the bottom-right corner
borderBottomStyle	style of the bottom border
borderBottomWidth	width of the bottom border
borderCollapse	whether the table border should be collapsed into a single border, or not
borderColor	color of an element's border (can have up to four values)
borderImage	A shorthand property for setting or returning all the borderImage properties
borderImageOutset	amount by which the border image area extends beyond the border box
borderImageRepeat	whether the image-border should be repeated, rounded or stretched
borderImageSlice	inward offsets of the image-border
borderImageSource	image to be used as a border
borderImageWidth	widths of the image-border
borderLeft	all the borderLeft properties in one declaration
borderLeftColor	color of the left border
borderLeftStyle	style of the left border
borderLeftWidth	width of the left border
borderRadius	A shorthand property for setting or returning all the four borderRadius properties
borderRight	all the borderRight properties in one declaration
borderRightColor	color of the right border
borderRightStyle	style of the right border
borderRightWidth	width of the right border
borderSpacing	space between cells in a table
borderStyle	style of an element's border (can have up to four values)
borderTop	all the borderTop properties in one declaration
borderTopColor	color of the top border
borderTopLeftRadius	shape of the border of the top-left corner
borderTopRightRadius	shape of the border of the top-right corner
borderTopStyle	style of the top border
borderTopWidth	width of the top border
borderWidth	width of an element's border (can have up to four values)
bottom	bottom position of a positioned element
boxDecorationBreak	behaviour of the background and border of an element at page-break, or, for in-line elements, at line-break.
boxShadow	Attaches one or more drop-shadows to the box
boxSizing	Allows you to define certain elements to fit an area in a certain way
captionSide	position of the table caption
clear	position of the element relative to floating objects
clip	which part of a positioned element is visible
color	color of the text
columnCount	number of columns an element should be divided into
columnFill	how to fill columns
columnGap	gap between the columns
columnRule	A shorthand property for setting or returning all the columnRule properties
columnRuleColor	color of the rule between columns
columnRuleStyle	style of the rule between columns
columnRuleWidth	width of the rule between columns
columns	A shorthand property for setting or returning columnWidth and columnCount
columnSpan	how many columns an element should span across
columnWidth	width of the columns
content	Used with the :before and :after pseudo-elements, to insert generated content
counterIncrement	Increments one or more counters
counterReset	Creates or resets one or more counters
cursor	type of cursor to display for the mouse pointer
direction	text direction
display	an element's display type
emptyCells	whether to show the border and background of empty cells, or not
filter	image filters (visual effects, like blur and saturation)
flex	length of the item, relative to the rest
flexBasis	initial length of a flexible item
flexDirection	direction of the flexible items
flexFlow	A shorthand property for the flexDirection and the flexWrap properties
flexGrow	how much the item will grow relative to the rest
flexShrink	how the item will shrink relative to the rest
flexWrap	whether the flexible items should wrap or not
cssFloat	horizontal alignment of an element
font	fontStyle, fontVariant, fontWeight, fontSize, lineHeight, and fontFamily in one declaration
fontFamily	font family for text
fontSize	font size of the text
fontStyle	whether the style of the font is normal, italic or oblique
fontVariant	whether the font should be displayed in small capital letters
fontWeight	boldness of the font
fontSizeAdjust	Preserves the readability of text when font fallback occurs
fontStretch	Selects a normal, condensed, or expanded face from a font family
hangingPunctuation	Specifies whether a punctuation character may be placed outside the line box
height	height of an element
hyphens	Sets how to split words to improve the layout of paragraphs
icon	Provides the author the ability to style an element with an iconic equivalent
imageOrientation	Specifies a rotation in the right or clockwise direction that a user agent applies to an image
isolation	Defines whether an element must create a new stacking content
justifyContent	alignment between the items inside a flexible container when the items do not use all available space.
left	left position of a positioned element
letterSpacing	space between characters in a text
lineHeight	distance between lines in a text
listStyle	listStyleImage, listStylePosition, and listStyleType in one declaration
listStyleImage	an image as the list-item marker
listStylePosition	position of the list-item marker
listStyleType	list-item marker type
margin	margins of an element (can have up to four values)
marginBottom	bottom margin of an element
marginLeft	left margin of an element
marginRight	right margin of an element
marginTop	top margin of an element
maxHeight	maximum height of an element
maxWidth	maximum width of an element
minHeight	minimum height of an element
minWidth	minimum width of an element
navDown	where to navigate when using the arrow-down navigation key
navIndex	tabbing order for an element
navLeft	where to navigate when using the arrow-left navigation key
navRight	where to navigate when using the arrow-right navigation key
navUp	where to navigate when using the arrow-up navigation key
objectFit	Specifies how the contents of a replaced element should be fitted to the box established by its used height and width
objectPosition	Specifies the alignment of the replaced element inside its box
opacity	opacity level for an element
order	order of the flexible item, relative to the rest
orphans	minimum number of lines for an element that must be left at the bottom of a page when a page break occurs inside an element
outline	all the outline properties in one declaration
outlineColor	color of the outline around a element
outlineOffset	Offsets an outline, and draws it beyond the border edge
outlineStyle	style of the outline around an element
outlineWidth	width of the outline around an element
overflow	what to do with content that renders outside the element box
overflowX	Specifies what to do with the left/right edges of the content, if it overflows the element's content area
overflowY	Specifies what to do with the top/bottom edges of the content, if it overflows the element's content area
padding	padding of an element (can have up to four values)
paddingBottom	bottom padding of an element
paddingLeft	left padding of an element
paddingRight	right padding of an element
paddingTop	top padding of an element
pageBreakAfter	page-break behavior after an element
pageBreakBefore	page-break behavior before an element
pageBreakInside	page-break behavior inside an element
perspective	perspective on how 3D elements are viewed
perspectiveOrigin	bottom position of 3D elements
position	type of positioning method used for an element (static, relative, absolute or fixed)
quotes	type of quotation marks for embedded quotations
resize	whether or not an element is resizable by the user
right	right position of a positioned element
tableLayout	way to lay out table cells, rows, and columns
tabSize	length of the tab-character
textAlign	horizontal alignment of text
textAlignLast	how the last line of a block or a line right before a forced line break is aligned when text-align is "justify"
textDecoration	decoration of a text
textDecorationColor	color of the text-decoration
textDecorationLine	type of line in a text-decoration
textDecorationStyle	style of the line in a text decoration
textIndent	indentation of the first line of text
textJustify	justification method used when text-align is "justify"
textOverflow	what should happen when text overflows the containing element
textShadow	shadow effect of a text
textTransform	capitalization of a text
top	top position of a positioned element
transform	Applies a 2D or 3D transformation to an element
transformOrigin	position of transformed elements
<a href="https://cssreference.io/property/transform-origin/" class="whitebut ">transform-origin</a>
transformStyle	how nested elements are rendered in 3D space
transition	A shorthand property for setting or returning the four transition properties
transitionProperty	CSS property that the transition effect is for
transitionDuration	how many seconds or milliseconds a transition effect takes to complete
transitionTimingFunction	speed curve of the transition effect
transitionDelay	when the transition effect will start
unicodeBidi	whether the text should be overridden to support multiple languages in the same document
userSelect	whether the text of an element can be selected or not
verticalAlign	vertical alignment of the content in an element
visibility	whether an element should be visible
whiteSpace	how to handle tabs, line breaks and whitespace in a text
width	width of an element
wordBreak	line breaking rules for non-CJK scripts
wordSpacing	spacing between words in a text
wordWrap	Allows long, unbreakable words to be broken and wrap to the next line
widows	minimum number of lines for an element that must be visible at the top of a page
zIndex	stack order of a positioned element
CSS 2D Transforms Methods
Example
div {
transform: rotate(20deg); /* Standard syntax */
transform: translate(50px, 100px);
transform: scale(2, 3);
}
translate(), rotate(), scaleX(), scaleY(), scale(), skewX(), skewY(), skew(), matrix()
The matrix() method take six parameters, containing mathematic functions, which allows you to rotate, scale, move (translate), and skew elements.
The parameters are as follow: 
matrix(scaleX(),skewY(),skewX(),scaleY(),translateX(),translateY())
Example
transform: matrix(1, -0.3, 0, 1, 0, 0);
matrix(n,n,n,n,n,n)	transformation, using a matrix of six values
translate(x,y)	translation, moving the element along the X- and the Y-axis
translateX(n)	translation, moving the element along the X-axis
translateY(n)	translation, moving the element along the Y-axis
scale(x,y)	scale transformation, changing the elements width and height
scaleX(n)	scale transformation, changing the element's width
scaleY(n)	scale transformation, changing the element's height
rotate(angle)	rotation, the angle is specified in the parameter
skew(x-angle,y-angle)	skew transformation along the X- and the Y-axis
skewX(angle)	skew transformation along the X-axis
skewY(angle)	skew transformation along the Y-axis
<h2>jQuery.getScript</h2>
The jQuery.getScript() method is a shorthand of the Ajax function
(with the dataType attribute: $.ajax({ url: url,dataType: "script"}))
This needs testing!
$.getScript("demo_script.js");
$.getScript("test.js", function(data, textStatus, jqxhr) {
console.log(data); //data returned
console.log(textStatus); //success
console.log(jqxhr.status); //200
console.log('Load was performed.');
});
<h2>document.getElementById vs jQuery $()</h2>
Not exactly!!
document.getElementById('contents'); //returns a HTML DOM Object
var contents = $('#contents');  //returns a jQuery Object
In jQuery, to get the same result as document.getElementById, you can access the jQuery Object and get the first element in the object 
(Remember JavaScript objects act similar to associative arrays).
var contents = $('#contents')[0]; //returns a HTML DOM Object
or this
var contents = $('#contents').get(0);
==============
Calling document.getElementById('id') will return a raw DOM object.
Calling $('#id') will return a jQuery object that wraps the DOM object and provides jQuery methods.
Thus, you can only call jQuery methods like css() or animate() on the $() call.
You can also write 
$(document.getElementById('id'))
which will return a jQuery object and is equivalent to 
$('#id').
You can get the underlying DOM object from a jQuery object by writing 
$('#id')[0].
<h2>math</h2>
Math.PI;            // returns 3.141592653589793
Math.round(4.7);    // returns 5
Math.round(4.4);    // returns 4
Math.pow(8, 2);      // returns 64
Math.sqrt(64);      // returns 8
Math.abs(-4.7);     // returns 4.7
Math.ceil(4.4);     // returns 5
Math.floor(4.7);    // returns 4
Math.sin(90 * Math.PI / 180);     // returns 1 (the sine of 90 degrees)
Math.cos(0 * Math.PI / 180);     // returns 1 (the cos of 0 degrees)
Math.min(0, 150, 30, 20, -8, -200);  // returns -200
Math.max(0, 150, 30, 20, -8, -200);  // returns 150
Math.random();     // returns a random number
Math.E        // returns Euler's number
Math.PI       // returns PI
Math.SQRT2    // returns the square root of 2
Math.SQRT1_2  // returns the square root of 1/2
Math.LN2      // returns the natural logarithm of 2
Math.LN10     // returns the natural logarithm of 10
Math.LOG2E    // returns base 2 logarithm of E
Math.LOG10E   // returns base 10 logarithm of E
<a href="https://mathjs.org/download.html" class="whitebut ">Math.js</a>
<a href="https://mathjs.org/examples/index.html" class="whitebut ">Examples</a>
Math.js is an extensive math library for JavaScript and Node.js.

Work with different data types like numbers, big numbers, complex numbers, fractions, units, and matrices.

Powerful and easy to use.
Example
// functions and constants
math.round(math.e, 3)            // 2.718
math.atan2(3, -3) / math.pi      // 0.75
math.log(10000, 10)              // 4
math.sqrt(-4)                    // 2i
math.derivative('x^2 + x', 'x')  // 2*x+1
math.pow([[-1, 2], [3, 1]], 2)
// [[7, 0], [0, 7]]
// expressions
math.eval('1.2 * (2 + 4.5)')     // 7.8
math.eval('12.7 cm to inch')     // 5 inch
math.eval('sin(45 deg) ^ 2')     // 0.5
math.eval('9 / 3 + 2i')          // 3 + 2i
math.eval('det([-1, 2; 3, 1])')  // -7
// chaining
math.chain(3)
.add(4)
.multiply(2)
.done() // 14
Demo
Try the expression parser below.
See Math Notepad for a full application.
1.2 / (3.3 + 1.7)
0.24
a = 5.08 cm + 2 inch
10.16 cm
a to inch
4 inch
sin(90 deg)
1
f(x, y) = x ^ y
f(x, y)
f(2, 3)
8
Evaluate
Shortcut keys:
Press S to set focus to the input field
Press Ctrl+F11 to toggle full screen
Enter "clear" to clear history
derivative(expr, variable)
derivative(expr, variable, options)
Parameters
Parameter	Type	Description
expr	Node | string	The expression to differentiate
variable	SymbolNode | string	The variable over which to differentiate
options	{simplify: boolean}	There is one option available, simplify, which is true by default.

When false, output will not be simplified.
Returns#
Examples
math.derivative('x^2', 'x')                     // Node {2 * x}
math.derivative('x^2', 'x', {simplify: false})  // Node {2 * 1 * x ^ (2 - 1)
math.derivative('sin(2x)', 'x'))                // Node {2 * cos(2 * x)}
math.derivative('2*x', 'x').evaluate()          // number 2
math.derivative('x^2', 'x').evaluate({x: 4})    // number 8
const f = math.parse('x^2')
const x = math.parse('x')
math.derivative(f, x)                           // Node {2 * x}
<h2>javascript physics</h2>
<a href="https://brm.io/matter-js/" class="whitebut ">Matter.js is a 2D physics engine</a>
<a href="http://wellcaffeinated.net/PhysicsJS/" class="whitebut ">PhysicsJS easy-to-use physics engine for javascript</a>
<a href="https://developer.ibm.com/tutorials/wa-build2dphysicsengine/" class="whitebut ">Build a simple 2D physics engine</a>
<a href="http://piqnt.com/planck.js/" class="whitebut ">Planck.js 2D JavaScript physics engine</a>
<h2>javascript chemistry</h2>
<a href="http://partridgejiang.github.io/Kekule.js/" class="whitebut ">Kekule.js open source JavaScript library for chemoinformatics</a>
<H2>Generate Alert Box if user tries to change text in text input field</H2>
<XMP><FORM>
<INPUT TYPE="text" VALUE= "dont change" NAME = "leavebutton" onChange= "alert('Please dont change this')"></INPUT>
</FORM></XMP>
<H2>Show the date and time when the page loads</H2>
In this example the event handler onLoad is embedded within the <BODY> tag.

OnLoad activates
whenever a new page has finished downloading.

This alert code tells the browser to create an alert
box containing the value of the variable "today".

Thus, it automatically prints out the date and time
when the page has finished loading and requires no special action by the user.
<XMP>^lt;SCRIPT LANGUAGE = "Javascript">
var today= new Date()
^lt;/SCRIPT>
....
<BODY onload=alert(today)></XMP>
<H2>Animate the background color of a document</H2>
Notice that the script is not just a series of document.bgColor = commands.

You could write that script but the colors would change so quickly that you would not see the animated effect.

We need to introduce a delay between each background color change.

Javascript offers a setTimeout() method that allows creation of delays as well as serving other functions.

The setTimeout() method requires two elements to be enclosed in its parentheses.

The first element is an expression to be evaluated or acted upon.

The second element is the number of milliseconds (thousandths of a second) to be waited before the first action is undertaken.
setTimeout(expression to be evaluated, milliseconds)
<XMP>^lt;SCRIPT LANGUAGE= "javascript">
setTimeout("document.bgColor='white'", 1000)
setTimeout("document.bgColor='lightpink'", 1500)
setTimeout("document.bgColor = 'pink'", 2000)
setTimeout("document.bgColor =  'deeppink'", 2500)
setTimeout("document.bgColor = 'red'", 3000)
setTimeout("document.bgColor = 'tomato'", 3500)
setTimeout("document.bgColor = 'darkred'", 4000)
^lt;/SCRIPT></XMP>
<H2>User assignment of a property and dynamic generation of a Web page</H2>
In the example, which illustrates user assigned properties, a new property is defined for the document object called firstline.

Anytime Javascript encounters the expression document.firstline it will produce the assigned text.

The fact that I named it "firstline" carries no special meaning to Javascript; that is, it does not know that it is to be the first line in the document.

Generally, it is a good idea to name the properties with a name related to your intended use.
The rest of the example shows how the write() method can be used to generate text that appears on a web page.

Document.open() prepares for creating a page.

The second open() forces it to appear.

<XMP><HTML>
<HEAD>
^lt;SCRIPT LANGUAGE = "Javascript">
document.firstline = "Welcome to this page"
^lt;/SCRIPT>
<TITLE>load demo</TITLE>
</HEAD>
<BODY>
^lt;SCRIPT>
document.open()
document.write(document.firstline)
document.open()
^lt;/SCRIPT>
</BODY></XMP>
<H2>Sample Script to Animate Text in Text Field</H2>
This script will set up a form that asks for user input.

It will animate text in boxes that surround it to urge the user to provide the information.

To accomplish this, we must first use standard HTML form tags to create the input fields for user typing.

We must also create text fields that we will use to create the animation.

For the sake of illustrating methods of using Javascript to refer to different forms that appear on a page, the examples presents the information in 3 forms.

It could have also been combined into one form.

It places the fields for user input in the middle form called f2 and the fields that will animated text placed into them into fields f1 on top and f3 on the bottom.

Also it places the input elements in form f1 and f3 into tables in order to gain more control over their placement.

f1,f2, and f3 are just arbitrary names given to the fields.

In this example "Answer Soon" text appears and disappears, moving around the fields from left to right on the top and then from left to right on the bottom.

All the code to establish fields and tables should be famiilar to readers with HTML experience.

The new part is the code enclosed in the SCRIPT tags.

The heart of these commands are expressions that assign values to particular fields.

For example the code line document.f1.ta1.value = 'Answer Soon' tells the browser to find the document object (the Web page) and then the form that is a subelement of it called f1 (the first one on top) and then the subelement of that form called ta.1 (the first text entry field).

Once that element is targeted, the script tells the browser to change the value property of that text field by assigning it the text "Answer Soon".

The Value attribute in standard HTML markup is the text that a field contains (usually because a user has typed it there.).

Javascript has extended this allow the script to type values.

To the user the text appears as in an animation.

After text appears the sample script makes it disappear by assinging the blank value "" to the same text field.

<XMP><HTML>
<HEAD>
<TITLE> Animated Text</TITLE>
</HEAD>
<BODY >
<FORM NAME="f1">
<TABLE>
<TR> <TD> <INPUT NAME="ta1" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta2" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta3" TYPE="text" SIZE="20"></INPUT>
</TABLE></FORM>
<FORM NAME="f2" ACTION="http://netadd.com/nam.cgi" METHOD="POST">
<CENTER>
Name <INPUT NAME="pername" TYPE="text" SIZE="20"> Name</INPUT>
Age <INPUT NAME="perage" TYPE="text" SIZE="5"> Age</INPUT>
Occupation <INPUT NAME="perocc" TYPE="text" SIZE="20">Occupation </INPUT>
<INPUT TYPE="Submit" VALUE="Submit"></INPUT>
<INPUT TYPE="Reset" VALUE="Reset"></INPUT>
</CENTER>
</FORM>
<FORM NAME="f3">
<TABLE>
<TR> <TD> <INPUT NAME="ta4" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta5" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta6" TYPE="text" SIZE="20"></INPUT>
</TABLE></FORM>
^lt;SCRIPT LANGUAGE= "javascript">
setTimeout("document.f1.ta1.value = 'Answer Soon'", 1000)
setTimeout("document.f1.ta1.value = ''", 1300)
setTimeout("document.f1.ta2.value = 'Answer Soon'", 1600)
setTimeout("document.f1.ta2.value = ''", 1900)
setTimeout("document.f1.ta3.value = 'Answer Soon'", 2200)
setTimeout("document.f1.ta3.value = ''", 2500)
setTimeout("document.f3.ta4.value = 'Answer Soon'", 2800)
setTimeout("document.f3.ta4.value = ''", 3100)
setTimeout("document.f3.ta5.value = 'Answer Soon'", 3400)
setTimeout("document.f3.ta5.value = ''", 3700)
setTimeout("document.f3.ta6.value = 'Answer Soon'", 4000)
setTimeout("document.f3.ta6.value = ''", 4300)
^lt;/SCRIPT> </XMP>
<H2>Sample Script to Customize Links Based on User Button Choices</H2>
This sample script demonstrates how to create a script that lets a user chose a category of infomation after which it dynamically generates an html page containing links relevant to that interest.

It uses a simple form with radio buttons to determine interest.

Just to add interest it also asks the users to type their name.

Once the users are done chosing, they click on the submit button and the script generates the html document using their name.

For the sake of clarity this example is very short with only one choice requested.

The same principles, however, could be applied to more sophisticated sets ofchoices.
There are three major parts to this Web page and script: 
A.
Javascript script cotaining the database of links for each kind of music, the function to create a unique page based on their choice, and the function to create a new Netscape window to show the page.

B.
HTML code to create the informationrequest page cotaining an input form.

C.
Javascript code to set up default values.

<XMP><HTML>
<HEAD><TITLE>Choice</TITLE>
^lt;SCRIPT Language="javascript">
// sets up database of links - SECTION A1
muresources=""
muresources["classical"]= "<A HREF='http://net.com/classical.file1'>Meditative classical music</A>
<A HREF='http://net.com/classical.file2'>Provoking classical music</A>"
muresources["rock"] = "<A HREF='http://net.com/rock.file1'>Popular rock music<A>
<A HREF='http://net.com/rock.file2'>Exciting rock music</A>"
muresources["ethnic"] = "<A HREF='http://net.com/mexican.file1'>Mexican music<A>
<A HREF='http://net.com/Indian.file2'>Indian music</A>"
function getLink() {
// constructs unique page using name and choice of music - SECTION A.2
temp = muresources[choice]
temp2 = "<TITLE>Custom Links</TITLE><H2>" +document.m.pername.value+", here are some links for you</H2><P>"+temp
}
function writeIt(){
// creates new window to display page - SECTION A.3
diswin = window.open();
diswin.document.open();
diswin.document.write(temp2);
diswin.document.close()
}
function doAll(){
// master routine calls other functions - SECTION A.4
getLink();
writeIt()
}
^lt;/SCRIPT>
</HEAD>
<BODY >
<!-- Sets up basic input form SECTION B -->
<H2> Choose the kind of music you prefer and this page will fetch links of interest to you</H2>
<FORM NAME="m" >
Choose a kind of music
<INPUT TYPE="radio" NAME="mus" VALUE="classical" OnClick="choice='classical'"
>Classical </INPUT>
<INPUT TYPE="radio" NAME="mus" VALUE="rock" OnClick="choice='rock'">Rock</INPUT>
<INPUT TYPE="radio" NAME="mus" VALUE="ethnic"
OnClick="choice='ethnic'">Ethnic</INPUT>
Please type your name
<INPUT TYPE="text" NAME="pername" SIZE=25></INPUT>
<INPUT TYPE="button" NAME="sub" VALUE="Show me links" OnClick=doAll()></INPUT>
<INPUT TYPE="reset" NAME="res" ></INPUT>
</FORM>
^lt;SCRIPT>
// sets defaults - SECTION C
choice = "classical"
document.m.mus[0].checked = true
document.m.mus[1].checked = false
document.m.mus[2].checked = false
^lt;/SCRIPT>
</BODY>
</HTML></XMP>
<H2>Using string properties to set characteristics of text on a page</H2>
Several properties control the appearance of text on the page.

Note, however, that they cannot control the appearance of text after the page is rendered.

The document must be rewritten for the new characteristics to become visible.

This example generates a series of lines, each with a different style,color, or size of text.
<XMP>^lt;SCRIPT>
//assigns value to variable
test ="What is all this?"
// opens document and uses methods to modify text characteristics
document.open()
document.write(test.bold()+"<P>")
document.write(test.fontsize(7)+"<P>")
document.write(test.fontcolor("red")+"<P>")
document.write(test.toUpperCase()+"<P>")
//assigns multiple characteristics to text
document.write(test.italics().fontsize(6).fontcolor("green")+"<P>")
document.open()
^lt;/SCRIPT></XMP>
<H2>Using Substrings to Generate Scrolling Banners</H2>
This example uses the subString method to create a scrolling banner in a text field and on the status line of the window.

Scrolling text seems to slide from left to right.

You can create this effect by systematically displaying a changing section of some target text.

For example, if you display character 0 to 24 of some text and next display 1 to 25 and next 2 to 26, the text will appear to be moving from right to left.

The sample illustrates a method for accomplishing this effect.
<XMP><HTML>
<HEAD><TITLE> Banner</TITLE>
^lt;SCRIPT LANGUAGE= "javascript">
// Puts the text to scroll into variable called sent - SECTION A
// uses length propert to assess its length and put into variable slen
// initalizes a,b,n, and subsent variables
var sent = "This is a demonstration of a banner moving from the left to right.

It makes use of the substring property of Javascript to make an interesting display"
var slen = sent.length
var siz = 25
var a = -3, b = 0
var subsent = "x"
// Creates a function to capture substrings of sent - SECTION B
function makeSub(a,b) {
subsent = sent.substring(a,b) ;
return subsent;
}
//Creates a function that increments the indexes of the substring - SECTION C 
//each time and calls the makeSub() function to geneate strings
//a indicates start of substring and siz indicates size of string required
function newMake() {
a = a + 3;
b = a + siz
makeSub(a,b);
return subsent
}
//function uses loop to get changing substrings of target - SECTION D
//repeatedly calls newMake to get next substring
//uses setTimeout() command to arrange for substrings to display 
// at specified times
function doIt() {
for (var i = 1; i <= slen ; i++) {
setTimeout("document.z.textdisplay.value = newMake()", i*300);
setTimeout("window.status = newMake()", i*300);
}
}
^lt;/SCRIPT> 
</HEAD>
<BODY >
<CENTER>
<FORM NAME="z">
<INPUT NAME="textdisplay" TYPE="text" SIZE=25> </INPUT>
<INPUT NAME="doit" Type="button" value = "Run Banner" onClick = "doIt()"> </INPUT>
</FORM></CENTER>
</BODY></HTML></XMP>
<h2>load local file</h2>
It will be blocked by CORS, only work with servers, ie files only online
jQuery.get('http://localhost/foo.txt', function(data) {
alert(data);
});
Additionally, there's the new Fetch API:
fetch("https://12Me21.github.io/test.txt")
.then( response => response.text() )
.then( text => console.log(text) )
fetch('http://localhost/foo.txt')
.then(response => response.text())
.then((data) => { console.log(data) }
)
If you only want a constant string from the text file, you could include it as JavaScript:
// This becomes the content of your foo.txt file
let text = `My test text goes here!`;
&lt;script src="foo.txt">&lt;/script>
&lt;script> console.log(text); &lt;/script>
When working with jQuery, instead of using jQuery.get, e.g.
jQuery.get("foo.txt", undefined, function(data) {
alert(data);
}, "html").done(function() {
alert("second success");
}).fail(function(jqXHR, textStatus) {
alert(textStatus);
}).always(function() {
alert("finished");
});
you could use .load which gives you a much more condensed form:
$("#myelement").load("foo.txt");
<h2>webpack compile JavaScript</h2>
<a href="https://webpack.js.org/plugins/uglifyjs-webpack-plugin/" class="whitebut ">uses uglify-js to minify JavaScript</a>
<a href="https://webpack.js.org/configuration/optimization/" class="whitebut ">webpack optimizations</a>
<a href="https://webpack.js.org/guides/getting-started/" class="whitebut ">webpack compile JavaScript modules</a>
<h2>Interesting libraries</h2>
<a href="https://youtu.be/O0Au0Xc-qL8" class="whitebut ">Realistic Water Ripple (Pixi.js)</a>
<a href="https://youtu.be/FgN2EENWPFc" class="whitebut ">3D Pikachu (Pixi.js)</a>
<a href="https://www.youtube.com/watch?v=qugY8axtvWY&t=16s" class="whitebut ">JavaScript Libraries 2020</a>
Interesting libraries:
Tesseract.js, Chart.js, Three.js, Anime.js, Howler.js, Reveal.js, Pixi.js, Video.js, Nipple.js, Intro.js, Faker.js, Editor.js, Popper.js, 
<h2>format number with leading zeros</h2>
function pad(anum, size) {
var stkcode = anum+"";
while (stkcode.length < size) stkcode = "0" + stkcode;
return stkcode;
}
function pad(num, size) {
var stkcode = "000000000" + num;
return stkcode.substr(stkcode.length-size);
}
stkcode = "00000"+stkcode
codewidth = stkcode.length
stkcode = stkcode.slice(codewidth-5, codewidth)
<h2>Get column from a two dimensional array</h2>
var twoDim = [[1,2,3],[4,5,6],[7,8,9]];
// take the third column
var col3 = twoDim.map(function(value,index) { return value[2]; });
<h2>filter() Method</h2>
creates an array with elements that pass a test
filter() does not change the original array.
array.filter(function(currentValue, index, arr), thisValue)
ages array that are 18 or over:
var ages = [32, 33, 16, 40];
function checkAdult(age) { return age >= 18;}
document.getElementById("demo").innerHTML = ages.filter(checkAdult);
ages array that are a specific number or over:
&lt;input type="number" id="ageToCheck" value="18">
function checkAdult(age) {
return age >= document.getElementById("ageToCheck").value;
}
document.getElementById("demo").innerHTML = ages.filter(checkAdult);
<h2>Using Node-Osmosis with examples</h2>
There are a number of options for web scraping in node.js, but my favorite library to work with is <a href="https://github.com/rchipka/node-osmosis">node-osmosis</a>.

To start, we'll do a simple single page scrape.

We'll be working with <a href="https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population">this page</a> on wikipedia, which contains population information for US States.
<h4>1) Simple Page Scrape</h4>
First, let's scrape some basic information from the page using basic selectors.

<k>osmosis
.get(url)
.set({
heading: 'h1',
title: 'title'
})
.data(item => console.log(item));
</k>
<k>{ heading: 'List of U.S.

states and territories by population',
title: 'List of U.S.

states and territories by population - Wikipedia' }
</k>
<h4>2) Scrape Using Find</h4>
Next, let's say we want to get a list of all the states along with their populations.

We can see that this data is in the first table on the page.

In order to do this, we'll introduce a new function 'find', which sets the current context using selectors.

Once we tell osmosis to select the rows from the first table, we can pick out the state and population values and pull them into an object.
<k>osmosis
.get(url)
.find('.wikitable:first tr:gt(0)')
.set({
state: 'td[3]',
population: 'td[4]'
})
.data(item => console.log(item));
</k>
<k>{ state: 'California', population: '39,250,017' }
{ state: 'Texas', population: '27,862,596' }
{ state: 'Florida', population: '20,612,439' }
{ state: 'New York', population: '19,745,289' }
{ state: 'Illinois', population: '12,801,539' }
{ state: 'Pennsylvania', population: '12,784,227' }
{ state: 'Ohio', population: '11,646,273' }
{ state: 'Georgia', population: '10,310,371' }
{ state: 'North Carolina', population: '10,146,788' }
{ state: 'Michigan', population: '9,928,301' }
...
</k>
<h4>3) Scrape Multiple Parts</h4>
We can also use multiple <strong>set</strong> calls to pull out different pieces of data.
<k>osmosis
.get(url)
.set({
title: 'title'
})
.find('.wikitable:first tr:gt(0)')
.set({
state: 'td[3]',
population: 'td[4]'
})
.data(item => console.log(item));
</k>
<k>{ title: 'List of U.S.

states and territories by population - Wikipedia',
state: 'California',
population: '39,250,017' }
{ title: 'List of U.S.

states and territories by population - Wikipedia',
state: 'Texas',
population: '27,862,596' }
{ title: 'List of U.S.

states and territories by population - Wikipedia',
state: 'Florida',
population: '20,612,439' }
{ title: 'List of U.S.

states and territories by population - Wikipedia',
state: 'New York',
population: '19,745,289' }
{ title: 'List of U.S.

states and territories by population - Wikipedia',
state: 'Illinois',
population: '12,801,539' }
...
</k>
<h4>4) Following Links</h4>
Now, let's say we wanted some information from each state.

Osmosis has a follow function that we can use to scrape each state page.

Since the URL is inside the table that we're scraping, we can pass that URL to the follow function using the <strong>a@href</strong> selector inside the 3rd column (<strong>td[3]</strong>).

After we follow each page, we can use set again to pull data from each state page.

In this example, we'll just pull out the longitude and latitude.

The end result combines the elements from each 'set' call.
<k>osmosis
.get(url)
.find('.wikitable:first tr:gt(0)')
.set({
state: 'td[3]',
population: 'td[4]'
})
.follow('td[3] a@href')
.set({
longitude: '.longitude',
latitude: '.latitude'
})
.data(item => console.log(item));
</k>
<k>{ 
state: 'California', 
population: '39,250,017', 
longitude: '119Â°21'19"W', 
latitude: '35Â°27'31"N' 
}
{ 
state: 'Illinois', 
population: '12,801,539', 
longitude: '88Â°22'49"W', 
latitude: '41Â°16'42"N' 
}
...
</k>
<h4>5) Promisification</h4>
In all the examples above, we're just printing out each object as it's handled by the data function.

Often times we want to return all of the data at once in an array.

To do that, we can wrap the call in a Promise and add each element to an array as it's processed.
<k>function scrapePopulations() {
return new Promise((resolve, reject) => {
let results = [];
osmosis
.get(url)
.find('.wikitable:first tr:gt(0)')
.set({
state: 'td[3]',
population: 'td[4]'
})
.data(item => results.push(item))
.done(() => resolve(results));
});
}
scrapePopulations().then(data => console.log(data));
// we can also get the same results more simply by wrapping the code with .set([])
osmosis
.get(url)
.set([
osmosis
.find('.wikitable:first tr:gt(0)')
.set({
state: 'td[3]',
population: 'td[4]'
})
])
.data(items => console.log(items))
</k>
<k>[{ state: 'California', population: '39,250,017' },
{ state: 'Texas', population: '27,862,596' },
{ state: 'Florida', population: '20,612,439' },
{ state: 'New York', population: '19,745,289' },
{ state: 'Illinois', population: '12,801,539' },
{ state: 'Pennsylvania', population: '12,784,227' },
{ state: 'Ohio', population: '11,646,273' },
{ state: 'Georgia', population: '10,310,371' },
{ state: 'North Carolina', population: '10,146,788' },
{ state: 'Michigan', population: '9,928,301' },
{ state: 'New Jersey', population: '8,944,469' },
{ state: 'Virginia', population: '8,411,808' },
{ state: 'Washington', population: '7,288,000' },
...
</k>
<h2>Creating a div element</h2>
$('#parent').append('&lt;div>hello&lt;/div>');    
// or
$('&lt;div>hello&lt;/div>').appendTo('#parent');
d = document.createElement('div');
$(d).addClass(classname)
.html(text)
.appendTo($("#myDiv")) //main div
.click(function () { $(this).remove();})
.hide()
.slideToggle(300)
.delay(2500)
.slideToggle(300)
.queue(function () { $(this).remove();});
$(document.createElement("div"))
div = $("&lt;div>").html("Loading......");
$("body").prepend(div);    
var customDiv = $("&lt;div/>");
<h2>Spread Operator</h2>
...
are called spread attributes,
it allows an expression to be expanded.
var parts = ['two', 'three'];
var numbers = ['one', ...parts, 'four', 'five']; // ["one", "two", "three", "four", "five"]
<b>use of spread operator:</b>
<h4>Concatenate arrays:</h4>
shooter = ['Call', 'Cry', 'Evil'];
Games = ['Speed', 'Gran', 'Burnout'];
theGames = [...shooter, ...Games];
 //["Call", "Cry", "Evil", "Speed", "Gran", "Burnout"]
<h4>Destructuring an array:</h4>
shooter = ['Call', 'Cry', 'Evil'];
[first, ...remaining] = shooter;
console.log(first); //Call
console.log(remaining); //['Cry', 'Evil']
<h4>Combining two objects:</h4>
myCrush = { firstname: 'Selena', middlename: 'Marie' };
lastname = 'my last name';
myWife = { ...myCrush, lastname }
// {firstname: 'Selena',
//   middlename: 'Marie',
//   lastname: 'my last name'}
<h4>Rest Parameters</h4>
another use for the three dots is known as Rest Parameters
it take all the arguments to a function in as one array.
Function arguments as array
function fun1(...params) {
}
<h4>Alternative to apply()</h4>
take a list of marks of top 5 students in a class.

using the apply() method:
myFun(m1, m2, m3, m4, m5) {
// Do something
}
let marks = [10, 23, 83, -1, 92];
myFun(...marks);
<h4>Using with Math Functions</h4>
let mylist = [10, 23, 83, -1, 92, -33, 76, 29, 76, 100, 644, -633];
Math.max(...mylist);
function doSum(...items) {
let sum = 0;
for (let item of items){ sum += item; }
return sum;
}
doSum(1);
doSum(1,2);
doSum(1, 2, 3, 4);
function doSum(times, ...items) {
let sum = 0;
for (let item of items){ sum += item*times; }
return sum;
}
doSum(1, 1);
doSum(2, 1, 2);
doSum(3, 1, 2, 3);
1
6
18
<h2>Dynamically load a JavaScript file</h2>
write dynamic script tags:
new Element("script", {src: "myBigCodeLibrary.js", type: "text/javascript"});
The problem here is that we do not know when the external script file is fully loaded.
We often want our dependant code on the very next line and like to write something like:
if (iNeedSomeMore) {
Script.load("myBigCodeLibrary.js"); // includes code for myFancyMethod();
myFancyMethod(); // cool, no need for callbacks!
}
There is a smart way to inject script dependencies without the need of callbacks.

Simply pull the script via a synchronous AJAX request and eval the script on global level.
If you use Prototype the Script.load method looks like this:
var Script = {
_loadedScripts: [],
include: function(script) {
// include script only once
if (this._loadedScripts.include(script)) {
return false;
}
// request file synchronous
var code = new Ajax.Request(script, {
asynchronous: false,
method: "GET",
evalJS: false,
evalJSON: false
}).transport.responseText;
// eval code on global level
if (Prototype.Browser.IE) {
window.execScript(code);
} else if (Prototype.Browser.WebKit) {
$$("head").first().insert(Object.extend(
new Element("script", {
type: "text/javascript"
}), {
text: code
}
));
} else {
window.eval(code);
}
// remember included script
this._loadedScripts.push(script);
}
};
There is no import / include / require in javascript, but there are two main ways to achieve what you want:
1 - You can load it with an AJAX call then use eval.
This is the most straightforward way but it's limited to your domain because of the Javascript safety settings, and using eval is opening the door to bugs and hacks.
2 - Add a script tag with the script URL in the HTML.
Definitely the best way to go.

You can load the script even from a foreign server, and it's clean as you use the browser parser to evaluate the code.

You can put the tag in the head of the web page, or at the bottom of the body.
Now, there is a big issue you must know about.

Doing that implies that you remotely load the code.

Modern web browsers will load the file and keep executing your current script because they load everything asynchronously to improve performances.
It means that if you use these tricks directly, you won't be able to use your newly loaded code the next line after you asked it to be loaded, because it will be still loading.
I used a much less complicated version recently with jQuery:
&lt;script src="scripts/jquery.js">&lt;/script>
&lt;script>
var js = ["scripts/jquery.dimensions.js", "scripts/shadedborder.js", "scripts/jqmodal.js", "scripts/main.js"];
var $head = $("head");
for (var i = 0; i &lt; js.length; i++) {
$head.append("&lt;script src=\"" + js[i] + "\">&lt;/scr" + "ipt>");
}
&lt;/script>
Update: jQuery-less version:
&lt;script>
var js = ["scripts/jquery.dimensions.js", "scripts/shadedborder.js", "scripts/jqmodal.js", "scripts/main.js"];
for (var i = 0, l = js.length; i &lt; l; i++) {
document.getElementsByTagName("head")[0].innerHTML += ("&lt;script src=\"" + js[i] + "\">&lt;/scr" + "ipt>");
}
&lt;/script>
another awesome answer
$.getScript("my_lovely_script.js", function(){
alert("Script loaded and executed.");
// here you can use anything you defined in the loaded script
});
<h2>dateAndTime function</h2>
&lt;span id="dateAndTime" onclick="showDateAndTime()">&lt;script>showDateAndTime();&lt;/script>&lt;/span>
&lt;h2>some weixin scripts&lt;/h2>
window.logs = { pagetime: {} };
window.logs.pagetime['html_begin'] = (+new Date());
window.LANG= "en"; 
window.isOldVideoPage = false; 
var e=t.match(/http(?:s)?://([^/]+?)(/|$)/);
if(e&&!/qq\.com(\:8080)?$/.test(e[1])&&!/weishi\.com$/.test(e[1]))return!0;
ishttp=0==location.href.indexOf("http://");
String.prototype.html = function(encode) {
var replace =["&#39;", "'", """, '"', "&nbsp;", " ", ">", ">", "&lt;", "&lt;", "&yen;", "¥", "&amp;", "&"];
var replaceReverse = ["&", "&amp;", "¥", "&yen;", "&lt;", "&lt;", ">", ">", " ", "&nbsp;", '"', """, "'", "&#39;"];
window.addEventListener('beforeunload', reportResLoadTime, false);
window.addEventListener('unload', reportResLoadTime, false);
<h2>set unique</h2>
var visitedList = [4,5,4,6,3,4,5,2,23,1,4,4,4]
var visitedList = Array.from(new Set(visitedList))
Sets are object type creating collections of unique values
a few methods like add, size, has, forEach, delete and clear are available 
<h2>Sets</h2>
Sets are object creating collections of unique values.

The values in a set can be either simple primitives like strings or integers as well as more complex object types like object literals or arrays.
Here’s a simple example showing off a basic set and a few of the available methods on it like <em>add</em>, <em>size</em>, <em>has</em>, <em>forEach</em>, <em>delete</em> and <em>clear</em>:
<k>let animals = new Set();
animals.add('🐷');
animals.add('🐼');
animals.add('🐢');
animals.add('🐿');
console.log(animals.size); // 4
animals.add('🐼');
console.log(animals.size); // 4
console.log(animals.has('🐷')); // true
animals.delete('🐷');
console.log(animals.has('🐷')); // false
animals.forEach(animal => {
console.log(`Hey ${animal}!`);
});
// Hey 🐼!
// Hey 🐢!
// Hey 🐿!
animals.clear();
console.log(animals.size); // 0</k>
Here’s another example where we pass-in an array to initialize the set.

Notice how the initializing array gets deconstructed, but an array added added later stays in the form of an array:
<k>let myAnimals = new Set(['🐷', '🐢', '🐷', '🐷']);
myAnimals.add(['🐨', '🐑']);
myAnimals.add({ name: 'Rud', type: '🐢' });
console.log(myAnimals.size); // 4
myAnimals.forEach(animal => {
console.log(animal);
});
// 🐷
// 🐢
// ["🐨", "🐑"]
// Object { name: "Rud", type: "🐢" }</k>
Strings are a valid iterable so they can also be passed-in to initialize a set:
<k>console.log('Only unique characters will be in this set.'.length); // 43
let sentence = new Set('Only unique characters will be in this set.');
console.log(sentence.size); // 18</k>
On top of using <em>forEach</em> on a set, <a href="https://alligator.io/js/for-of-for-in-loops/">for…of</a> loops can also be used to iterate over sets:
<k>let moreAnimals = new Set(['🐺', '🐴', '🐕', '🐇']);
for (let animal of moreAnimals) {
console.log(`Howdy ${ animal }`);
}
// Howdy 🐺
// Howdy 🐴
// Howdy 🐕
// Howdy 🐇</k>
<h3>Keys and Values</h3>
Sets also have the <em>keys</em> and <em>values</em> methods, with <strong>keys</strong> being an alias for <strong>values</strong>, so both methods do exactly the same thing.

Using either of these methods returns a new iterator object with the values of the set in the same order in which they were added to the set.

Here’s an example:
<k>let partyItems = new Set(['🍕', '🍾', '🎊']);
let items = partyItems.values();
console.log(items.next());
console.log(items.next());
console.log(items.next());
console.log(items.next().done);
// Object {
//   done: false,
//   value: "🍕"
// }
// Object {
//   done: false,
//   value: "🍾"
// }
// Object {
//   done: false,
//   value: "🎊"
// }
// true</k>
<h2>Console Features</h2>
<a href="https://www.youtube.com/watch?v=VsaDOHqTWCM" class="whitebut ">JavaScript Console Features</a>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/console" class="whitebut ">console features</a>
How long does it take to perform a for-loop 100.000 times:
console.time();
for (i = 0; i < 100000; i++) {
// some code
}
console.timeEnd();
<h2>HTML DOM console.table() Method</h2>
Write a table in the console:
console.table(["Audi", "Volvo", "Ford"]);
<h2>adjustFontSize</h2>
&lt;a href="javascript:adjustFontSize('14px');">仲細D都得&lt;/a>
function adjustFontSize(size){// console.log('adjustFontSize');$(".set-font-aera").css({"font-size":size});window.localStorage["fontSize"] = size;
}
<h2>All HTML DOM Event, Properties, and Methods</h2>
<a href="https://www.w3schools.com/jsref/dom_obj_event.asp" class="whitebut ">All HTML DOM Event, Properties, and Methods</a>
Events are normally used in combination with functions
<h2>FlappyBird</h2>
<a href="D:\Dropbox\Public\LibDocs\FlappyBird\index.html" class="whitebut ">FlappyBird</a>
<h2>跨浏览器添加事件 经典实例</h2>
<k>//跨浏览器添加事件
function addEvent(obj,type,fn){
if(obj.addEventListener){
obj.addEventListener(type,fn,false);
}else if(obj.attachEvent){//IE
obj.attchEvent('on'+type,fn);
}
}</k>
<h2>跨浏览器移除事件 经典实例</h2>
<k>//跨浏览器移除事件
function removeEvent(obj,type,fn){
if(obj.removeEventListener){
obj.removeEventListener(type,fn,false);
}else if(obj.detachEvent){//兼容IE
obj.detachEvent('on'+type,fn);
}
}</k>
<h2>跨浏览器阻止默认行为 经典实例</h2>
<k>//跨浏览器阻止默认行为
function preDef(ev){
var e = ev || window.event;
if(e.preventDefault){
e.preventDefault();
}else{
e.returnValue =false;
}
}</k>
<h2>跨浏览器获取目标对象 经典实例</h2>
<k>//跨浏览器获取目标对象
function getTarget(ev){
if(ev.target){//w3c
return ev.target;
}else if(window.event.srcElement){//IE
return window.event.srcElement;
}
}</k>
<h2>跨浏览器获取滚动条位置 经典实例</h2>
<k>//跨浏览器获取滚动条位置，sp == scroll position
function getSP(){
return{
top: document.documentElement.scrollTop || document.body.scrollTop,
left : document.documentElement.scrollLeft || document.body.scrollLeft;
}
}</k>
<h2>跨浏览器获取可视窗口大小 经典实例</h2>
<k>//跨浏览器获取可视窗口大小
function  getWindow () {
if(typeof window.innerWidth !='undefined') {
return{
width : window.innerWidth,
height : window.innerHeight
}
} else{
return {
width : document.documentElement.clientWidth,
height : document.documentElement.clientHeight
}
}
},</k>
<h2>js 对象冒充 经典实例</h2>
<k>&lt;script type = 'text/javascript'>
function Person(name , age){
this.name = name ;
this.age = age ;
this.say = function (){
return "name : "+ this.name + " age: "+this.age ;
} ;
}
var o = new Object() ;//可以简化为Object()
Person.call(o , "zhangsan" , 20) ;
console.log(o.say() );//name : zhangsan age: 20
&lt;/script></k>
<h2>js 异步加载和同步加载 经典实例</h2>
异步加载也叫非阻塞模式加载，浏览器在下载<k>js</k>的同时，同时还会执行后续的页面处理。
</section>在<k>script</k>标签内，用<k>js</k>创建一个<k>script</k>元素并插入到<k>document</k>中，这种就是异步加载<k>js</k>文件了：
</section><k>(function() {
var s = document.createElement('script');
s.type = 'text/javascript';
s.async = true;
s.src = 'http://yourdomain.com/script.js';
var x = document.getElementsByTagName('script')[0];
x.parentNode.insertBefore(s, x);
})();</k>
<h2>同步加载 经典实例</h2>
平常默认用的都是同步加载。
如：
</section><k>&lt;script src="http://yourdomain.com/script.js">&lt;/script></k>
</section>同步模式又称阻塞模式，会阻止浏览器的后续处理。
停止了后续的文件的解析，执行，如图像的渲染。
浏览器之所以会采用同步模式，是因为加载的<k>js</k>文件中有对<k>dom</k>的操作，重定向，输出<k>document</k>等默认行为，所以同步才是最安全的。
通常会把要加载的<k>js</k>放到<k>body</k>结束标签之前，使得<k>js</k>可在页面最后加载，尽量减少阻塞页面的渲染。
这样可以先让页面显示出来。
</section>同步加载流程是瀑布模型，异步加载流程是并发模型。
</section>
<h2>js获取屏幕坐标 经典实例</h2>
<k>&lt;!DOCTYPE html>
&lt;html xmlns="http://www.w3.org/1999/xhtml">
&lt;head>
&lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
&lt;meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>
&lt;meta name="auther" content="fq" />
&lt;title>获取鼠标坐标&lt;/title>
&lt;/head>
&lt;body>
&lt;script type="text/javascript">
function mousePosition(ev){
if(ev.pageX || ev.pageY){
return {x:ev.pageX, y:ev.pageY};
}
return {
x:ev.clientX + document.body.scrollLeft - document.body.clientLeft,
y:ev.clientY + document.body.scrollTop - document.body.clientTop
};
}
function mouseMove(ev){
ev = ev || window.event;
var mousePos = mousePosition(ev);
document.getElementById('xxx').value = mousePos.x;
document.getElementById('yyy').value = mousePos.y;
}
document.onmousemove = mouseMove;
&lt;/script>
X:&lt;input id="xxx" type="text" /> Y:&lt;input id="yyy" type="text" />
&lt;/body>
&lt;/html></k>
</section>注释：
1.<k>documentElement</k> 属性可返回文档的根节点。
2.<k>scrollTop()</k> 为滚动条向下移动的距离
3.<k>document.documentElement.scrollTop</k> 指的是滚动条的垂直坐标
4.<k>document.documentElement.clientHeight</k> 指的是浏览器可见区域高度
</section>DTD已声明的情况下：
</section><k>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
</k>
</section>如果在页面中添加这行标记的话</section>
<h2>IE 经典实例</h2>
<k>document.body.clientWidth ==> BODY对象宽度
document.body.clientHeight ==> BODY对象高度
document.documentElement.clientWidth ==> 可见区域宽度
document.documentElement.clientHeight ==> 可见区域高度</k>
<h2>Firefox 经典实例</h2>
<k>document.documentElement.scrollHeight ==> 浏览器所有内容高度
document.body.scrollHeight ==> 浏览器所有内容高度
document.documentElement.scrollTop ==> 浏览器滚动部分高度
document.body.scrollTop ==>始终为0
document.documentElement.clientHeight ==>浏览器可视部分高度
document.body.clientHeight ==> 浏览器所有内容高度</k>
<h2>Chrome 经典实例</h2>
<k>document.documentElement.scrollHeight ==> 浏览器所有内容高度
document.body.scrollHeight ==> 浏览器所有内容高度
document.documentElement.scrollTop==> 始终为0
document.body.scrollTop==>浏览器滚动部分高度
document.documentElement.clientHeight ==> 浏览器可视部分高度
document.body.clientHeight ==> 浏览器所有内容高度</k>
</section><k>浏览器所有内容高度</k>即浏览器整个框架的高度，包括<k>滚动条卷去部分+可视部分+底部隐藏部分的高度总和</k></section><k>浏览器滚动部分高度</k>即滚动条卷去部分高度即可视顶端距离整个对象顶端的高度。
</section>综上</section>1、<k>document.documentElement.scrollTop</k>和<k>document.body.scrollTop</k>始终有一个为0，所以可以用这两个的和来求<k>scrollTop</k></section>2、<k>scrollHeight、clientHeight</k> 在<k>DTD</k>已声明的情况下用<k>documentElement</k>，未声明的情况下用<k>body</k></section><k>clientHeight
在IE和FF下，该属性没什么差别，都是指浏览器的可视区域，即除去浏览器的那些工具栏状态栏剩下的页面展示空间的高度。
</k>
<h2>PageX和clientX 经典实例</h2>
<k>PageX:</k>鼠标在页面上的位置,从页面左上角开始,即是以页面为参考点,不随滑动条移动而变化</section><k>clientX:</k>鼠标在页面上可视区域的位置,从浏览器可视区域左上角开始,即是以浏览器滑动条此刻的滑动到的位置为参考点,随滑动条移动 而变化.</section>可是悲剧的是,<k>PageX</k>只有FF特有,<k>IE</k>则没有这个，所以在IE下使用这个：
</section><k>PageY=clientY+scrollTop-clientTop;</k>(只讨论Y轴,X轴同理,下同)</section><k>scrollTop</k>代表的是被浏览器滑动条滚过的长度</section><k>offsetX:IE特有,鼠标相比较于触发事件的元素的位置,以元素盒子模型的内容区域的左上角为参考点,如果有</k>boder`,可能出现负值</section>只有<k>clientX</k>和<k>screenX</k> 皆大欢喜是W3C标准.其他的,都纠结了.
最给力的是，<k>chrome</k>和<k>safari</k>一条龙通杀!完全支持所有属性</section><p>
</p><img data-ratio="0.5905096660808435" data-type="png" data-w="569" title="图片描述" data-src="https://mmbiz.qpic.cn/mmbiz_png/eXCSRjyNYcbd6ia23PHZsxjpjiaq1M5uJHaESK234XDicZYdqFGO0E6bfQgH6hd33rlWjHKibTKDtqEMLPaSG9YCHA/640?wx_fmt=png"></section>
<h2>js拖拽效果 经典实例</h2>
<k>&lt;!doctype html>
&lt;html lang="zn-CN">
&lt;head>
&lt;meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
&lt;title>&lt;/title>
&lt;style type="text/css">
#login{
height: 100px;
width: 100px;
border: 1px solid black;
position: relative;
top:200px;
left: 200px;
background: red;
}
&lt;/style>
&lt;/head>
&lt;body>
&lt;div id="login">&lt;/div>
&lt;script type="text/javascript">
var oDiv = document.getElementById("login");
oDiv.onmousedown = function(e){
var e = e || window.event;//window.event兼容IE,当事件发生时有效
var diffX = e.clientX - oDiv.offsetLeft;//获取鼠标点击的位置到所选对象的边框的水平距离
var diffY = e.clientY - oDiv.offsetTop;
document.onmousemove = function(e){ //需设为document对象才能作用于整个文档
var e = e||window.event;
oDiv.style.left = e.clientX - diffX + 'px';//style.left表示所选对象的边框到浏览器左侧距离
oDiv.style.top = e.clientY -diffY + 'px';
};
document.onmouseup = function(){
document.onmousemove = null;//清除鼠标释放时的对象移动方法
document.onmouseup = null;
}
}
&lt;/script>
&lt;/body> 
&lt;/html></k>
<br  /></section><k>offsetTop</k> 返回的是数字，而 <k>style.top</k> 返回的是字符串，除了数字外还带有单位：
<k>px</k>。
</section>
<h2>js获取图片原始大小尺寸 经典实例</h2>
<k>var img = $("#img_id"); // Get my img elem
var pic_real_width, pic_real_height;
$("&amp;lt;img/&amp;gt;") // Make in memory copy of image to avoid css issues
.attr("src", $(img).attr("src"))
.load(function() {
pic_real_width = this.width;   // Note: $(this).width() will not
pic_real_height = this.height; // work for in memory images.
});</k>
<h2>js循环遍历数 经典实例</h2>
<k>&lt;script>  
//循环遍历数组  
var animals = ["cat",'dog','human','whale','seal'];  
var animalString = "";  
for(var i = 0;i&lt;animals.length;i++){  
animalString += animals[i] + " ";  
}  
alert(animalString);  //输出数组里的每个项
&lt;/script> </k>
<h2>遍历二维数组 经典实例</h2>
<k> &lt;script> 
var arr=[[0,0,0,0,0,0],[0,0,1,0,0,0],[0,2,0,3,0,0],[0,0,0,0,0,0]]; 
for(var i=0;i&lt;arr.length;i++){ 
//遍历每一个具体的值 
for(var j=0;j&lt;arr[i].length;j++){ 
document.writeln(arr[i][j]+" "); 
} 
document.writeln("&lt;br/>"); 
} 
&lt;/script> </k>
<h2>阻止表单重复提交 经典实例</h2>
有两种方法可以解决：
一是提交之后，立刻禁用点击按钮；
第二种就是提交之后取消后续的表单提交操作。
</section><k>document.getElementById("btn").disabled = true;//第一次提交后，将按钮禁用</k>
</section>这种方式只能用于通过提交按钮防止重复提交，还可以使用如下方式：
</section><k>var flag = false;//设置一个监听变量
if(flag ==true)return;//退出事件
flag = true;//表示提交过一次了</k>
<h2>字符串部分 经典实例</h2>
<h2>在字符串中查找子字符串 经典实例</h2>
<k>&lt;script type="text/javascript">
var test = 'Welcome to my blog!';
var value = 'blog';
var subValue = test.indexOf(value);
console.log(subValue);//14,子字符串的索引
&lt;/script></k>
<h2>Number和Math部分 经典实例</h2>
数字可以是一个直接量，也可以是一个对象，但是Math对象不同，他没有构造函数，并且其所有的属性和方法都是直接通过这个对象来访问的</section>
<h2>把十进制转化为一个十六进制值 经典实例</h2>
<k>var num = 255;
console.log(num.toString(16));//</k>
</section><k>js</k>中，十进制数字以<k>0x</k>开头，八进制数字总是以<k>0</k>开头</section>
<h2>随进产生颜色 经典实例</h2>
<k>&lt;script type="text/javascript">
function randomVal(val){
return Math.floor(Math.random()*(val + 1));
}
function randomColor(){
return 'rgb(' + randomVal(255) + ',' + randomVal(255) + ',' + randomVal(255) + ')';
}
&lt;/script></k>
</section>目前，所有浏览器都支持<k>RGB</k>表示法和十六进制表示法，除了<k>IE7</k>，它只支持十六进制表示法</section>
<h2>在角度和弧度之间转换 经典实例</h2>
<k>var rad = degrees*(Math.PI/180);
var degrees = rad*(180/Math.PI);</k>
<h2>数组部分 经典实例</h2>
<h2>创建多维数组 经典实例</h2>
<k>&lt;script type="text/javascript">
var arrayLength = 3;//设置数组长度
//创建数组
var multiArray = new Array(arrayLength);
for(var i =0;i&lt;multiArray.length;i++){
multiArray[i] = new Array(arrayLength);
}
//给第一个数组索引添加项
multiArray[0][0] = 'phone';
multiArray[0][1] = 'book';
multiArray[0][2] = 'TV';
//第二个
multiArray[1][0] = 2;
multiArray[1][1] = 1;
multiArray[1][2] = 98;
//第三个
multiArray[2][0] = ['java','python'];
multiArray[2][1] = ['js','C++'];
multiArray[2][2] = ['Haskell','php'];
&lt;/script></k>
<h2>排序数组 经典实例</h2>
<k>&lt;script type="text/javascript">
var fruits = ['banana','apple','orange','strawberry'];
console.log(fruits.sort());//Array [ "apple", "banana", "orange", "strawberry" ]
var num = [32,43,2,5,-23,0,4];
console.log(num.sort());//Array [ -23, 0, 2, 32, 4, 43, 5 ]
&lt;/script></k>
<k>Array</k>对象的<k>sort</k>方法会按照字母顺序来排序数组元素。
对于数字，是按照字符编码的顺序进行排序</section><k>function compare(a,b){
return a-b;
}
var num = [32,43,2,5,-23,0,4];
console.log(num.sort(compare));//Array [ -23, 0, 2, 4, 5, 32, 43 ]</k>
<h2>Date日期时间部分 经典实例</h2>
<h2>js计算时间差 经典实例</h2>
<k>var date1=new Date();  //开始时间，当前时间
var date2=new Date(); //结束时间，需传入时间参数
var date3=date2.getTime()-date1.getTime();  //时间差的毫秒数
//计算出相差天数
var days=Math.floor(date3/(24*3600*1000));
//计算出小时数
var leave1=date3%(24*3600*1000);    //计算天数后剩余的毫秒数
var hours=Math.floor(leave1/(3600*1000));
//计算相差分钟数
var leave2=leave1%(3600*1000);        //计算小时数后剩余的毫秒数
var minutes=Math.floor(leave2/(60*1000));
//计算相差秒数
var leave3=leave2%(60*1000);      //计算分钟数后剩余的毫秒数
var seconds=Math.round(leave3/1000);
console.log(" 相差 "+days+"天 "+hours+"小时 "+minutes+" 分钟"+seconds+" 秒");</k>
<h2>正则部分 经典实例</h2>
<h2>js实现千分位分隔 经典实例</h2>
<k>&lt;script type="text/javascript">
function cc(s){
if(/[^0-9\.]/.test(s)) return "invalid value";
s=s.replace(/^(\d*)$/,"$1.");
s=(s+"00").replace(/(\d*\.\d\d)\d*/,"$1");
s=s.replace(".",",");
var re=/(\d)(\d{3},)/;
while(re.test(s))
s=s.replace(re,"$1,$2");
s=s.replace(/,(\d\d)$/,".$1");
return "￥" + s.replace(/^\./,"0.")
}
&lt;/script>
&lt;input onchange="this.value=cc(this.value)" /></k>
<h2>js判断传入参数是否为质数 经典实例</h2>
<k>function fn(input) {
input = parseInt(input,10);
return isPrime(input) ? 'is prime' : 'not prime';
}
function isPrime(input) {
if (input &lt; 2) {
return false;
} else {
for (var i = 2; i &lt;= Math.sqrt(input); i++) {
if (input % i == 0) {
return false;
}
}
}
return true;
}</k>
<h2>js判断字符串出现最多的字符，并统计次数 经典实例</h2>
<k>//js实现一个函数，来判断一个字符串出现次数最多的字符，并统计这个次数
function countStr(str){
var obj = {};
for(var i = 0, l = str.length,k; i &lt; l ;i++){
k = str.charAt(i);
if(obj[k]){
obj[k]++;
}else{
obj[k] = 1;
}
}
var m = 0,i=null;
for(var k in obj){
if(obj[k] > m){
m = obj[k];
i = k;
}
}
return i + ':' + m;
}
</k>
<h2>requestAnimationFrame() method for smooth animations</h2>
requestAnimationFrame() method was introduced to help us execute animation
Why we need another hero- requestAnimationFrame
First of all, lets talk about requestAnimationFrame() as an idea and why we even need such a method.

Traditionally to create an animation in JavaScript, we relied on setTimeout() called recursively or setInterval() to repeatedly execute some code to make changes to an element frame by frame, such as once every 50 milliseconds:
var adiv = document.getElementById('mydiv')
var leftpos = 0
setInterval(function(){
leftpos += 5
adiv.style.left = leftpos + 'px' // move div by 5 pixels each time
}, 50) // run code every 50 milliseconds
While the above code is logically sound, its actual execution is far from perfect.

The problem with using setTmeout/setInterval for executing code that changes something on the screen is twofold.
What we specify as the delay (ie: 50 milliseconds) inside these functions are often times not honoured due to changes in user system resources at the time, leading to inconsistent delay intervals between animation frames.
Even worse, using setTimeout() or setInterval() to continuously make changes to the user's screen often induces "layout thrashing", the browser version of cardiac arrest where it is forced to perform unnecessary reflows of the page before the user's screen is physically able to display the changes.

This is bad -very bad- due to the taxing nature of page reflows, especially on mobile devices where the problem is most apparent, with janky page loads and battery drains.

requestAnimationFrame() to the rescue
It is for the above reasons requestAnimationFrame() was introduced.

The method in a nutshell allows you to execute code on the next available screen repaint, taking the guess work out of getting in sync with the user's browser and hardware readiness to make changes to the screen.

When we call requestAnimationFrame() repeatedly to create an animation, we are assured that our animation code is called when the user's computer is actually ready to make changes to the screen each time, resulting in a smoother, more efficient animation.

Furthermore, code called via requestAnimationFrame() and running inside background tabs in your browser are either paused or slowed down significantly (to 2 frames per second or less) automatically to further save user system resources- there's no point in running an animation that isn't being seen is there?
So requestAnimationFrame() should be used in place of setTimeout/ setInterval for animations, but how exactly do we go about doing that? Before we get to that, lets look at browser support first.

requestAnimationFrame() today enjoys wide adoption amongst modern browsers- IE10+, FF11+, Chrome, and Safari etc.

For some older versions of these browsers, a vendor prefix is needed in front of the method name to work.

Even on browsers that don't support this method in any incarnation, we can simply fallback in those cases to setTimeout() instead to call the code after a certain delay instead.

The following code creates a universal rrequestAnimationFrame() and its counterpart cancelAnimationFrame() function that works in the maximum number of browsers, with a fallback built in:
window.requestAnimationFrame = window.requestAnimationFrame
|| window.mozRequestAnimationFrame
|| window.webkitRequestAnimationFrame
|| window.msRequestAnimationFrame
|| function(f){return setTimeout(f, 1000/60)} // simulate calling code 60 
window.cancelAnimationFrame = window.cancelAnimationFrame
|| window.mozCancelAnimationFrame
|| function(requestID){clearTimeout(requestID)} //fall back
For the fallback setTimeout() code, notice the delay being set at 1000/60, or around 16.7 milliseconds.

This value simulates how often the real requestAnimationFrame() will typically be called by the browser each time it's invoked based on the typical user's screen refresh rate of 60 frames per second.
Understanding and using requestAnimationFrame()
The syntax for requestAnimationFrame is very straightforward:
requestAnimationFrame(callback)
We enter a callback function containing the code we wish to run, and requestAnimationFrame() will run it when the screen is ready to accept the next screen repaint.

Some noteworthy details:
The callback function is automatically passed a timestamp indicating the precise time requestAnimationFrame() was called.
requestAnimationFrame() returns a non 0 integer that can be passed into its nemesis counterpart cancelAnimationFrame() to cancel a requestAnimationFrame() call
Here's an example of calling requestAnimationFrame() once to move a DIV just 5 pixels from its original location on the screen:
var adiv = document.getElementById('mydiv')
var leftpos = 0
requestAnimationFrame(function(timestamp){
leftpos += 5
adiv.style.left = leftpos + 'px'
})
The above code is very similar to using setTimeout() to run the same code, except instead of after the user defined delay, the code is called on the next available screen repaint, typically around 16.7 milliseconds based on a typical screen refresh rate of 60fps.

The exact number may fluctuate and frankly doesn't matter; what's important to realize is that the browser will now intelligently invoke our code only when it is ready to accept changes to the screen, not before.
Calling requestAnimationFrame() once is pretty meaningless most of the time.

The magic happens when we call it "recursively" to construct the desired animation frame by frame, with each frame being called only when the browser is ready for it.

This this how requestAnimationFrame() becomes superior to setTimeout or setInterval when it comes to handling animation related code efficiently.

Lets rewrite our initial example of moving a DIV across the screen 5 pixels at a time using requestAnimationFrame():
var adiv = document.getElementById('mydiv')
var leftpos = 0
function movediv(timestamp){
leftpos += 5
adiv.style.left = leftpos + 'px'
requestAnimationFrame(movediv) // call requestAnimationFrame again to animate next frame
}
requestAnimationFrame(movediv) // call requestAnimationFrame and pass into it animation function
The above code shows the basic blueprint for using requestAnimationFrame() to create an animation, by defining your animation code inside a function, then inside this function calling itself recursively through requestAnimationFrame() to produce each frame of our animation.

To kick start the animation, we make a call to requestAnimationFrame() outside the animation function with that function as the parameter.
Animation over time in requestAnimationFrame()
So it's simple enough to repeatedly call an animation function using requestAnimationFrame(), but most animations are much more finicky, having to stop at some point after a certain objective has been achieved over a certain amount of time.

Take our example of moving the DIV above; in a real life scenario, what we probably want to do is move the DIV 400 pixels to the right over a time of say 2 seconds.

To do this with requestAnimationFrame(), we can take advantage of the timestamp parameter that's passed into the callback function.

Lets see how this works now, by retooling our DIV moving code above so it moves the DIV a certain distance over a certain amount of time:
var adiv = document.getElementById('mydiv')
var starttime
function moveit(timestamp, el, dist, duration){
//if browser doesn't support requestAnimationFrame, generate our own timestamp using Date:
var timestamp = timestamp || new Date().getTime()
var runtime = timestamp - starttime
var progress = runtime / duration
progress = Math.min(progress, 1)
el.style.left = (dist * progress).toFixed(2) + 'px'
if (runtime < duration){ // if duration not met yet
requestAnimationFrame(function(timestamp){ // call requestAnimationFrame again with parameters
moveit(timestamp, el, dist, duration)
})
}
}
requestAnimationFrame(function(timestamp){
starttime = timestamp || new Date().getTime() //if browser doesn't support requestAnimationFrame, generate our own timestamp using Date
moveit(timestamp, adiv, 400, 2000) // 400px over 1 second
})
Demo:
Move DIV 400px in 2 seconds
Lets go over how this works now.
Just before the animation runs, we set the startime variable to the current time using either requestAnimationFrame's timestamp parameter, or if requestAnimationFrame isn't supported, a less precise new Date().getTime() instead.

The former is a value automatically passed in as the first parameter of the callback function of requestAnimationFrame that contains a highly accurate representation of the current time in milliseconds (accurate to 5 microseconds).

This lets us know when the animation started running.
Inside the animation function moveit(), we capture the current time of the current "frame" using variable timestamp.

We use the difference between that and the animation starttime to figure out at what "point" along the animation we're currently at, and change the DIV's position accordingly out of the total distance (ie: 400px).
Slowing down or cancelling requestAnimationFrame()
The standard requestAnimationFrame runs at around 60fps under ideal conditions (or once every 16.7ms), in sync with the refresh rate of the typical monitor.

If your animation requires a different frames per second (up to 60 fps) or simply doesn't require that high a level of refresh rate, you can slow it down by calling requestAnimationFrame inside setTimeout().

That way, you get the desired frame rate while reaping the benefits of requestAnimationFrame:
var adiv = document.getElementById('mydiv')
var leftpos = 0
var fps = 20
function movediv(timestamp){
setTimeout(function(){ //throttle requestAnimationFrame to 20fps
leftpos += 5
adiv.style.left = leftpos + 'px'
requestAnimationFrame(movediv)
}, 1000/fps)
}
requestAnimationFrame(movediv)
In this version of moving a DIV horizontally, we're throttling the frames per second to roughly 20, by calling requestAnimationFrame inside setTimeout() each time.
- Cancelling requestAnimationFrame()
Just like with setTimeout/ setInterval, you can cancel a requestAnimationFrame call, and in identical fashion as well.

requestAnimationFrame when called returns a non 0 integer that can be captured inside a variable and passed into its nemesis counterpart cancelAnimationFrame() to stop it from being invoked again.

The following logs the timestamp parameter value of requestAnimationFrame for two seconds,  using cancelAnimationFrame to stop the former:
var reqanimationreference
function logtimestamp(timestamp){
console.log(timestamp)
reqanimationreference = requestAnimationFrame(logtimestamp)
}
requestAnimationFrame(logtimestamp)
setTimeout(function(){ // cancel requestAnimationFrame after 2 seconds
cancelAnimationFrame(reqanimationreference)
}, 2000)
Here is a slightly more elaborate example that continuously changes a DIV's width using requestAnimationFrame when the mouse enters the parent container (onmouseenter), and cancels it onmouseleave:
Demo:
Move mouse over battery
View Source Code
Conclusion
As you can see, requestAnimationFrame() is actually very simple in concept and execution, once you understand its purpose and common patterns.

A lot of frameworks such as jQuery 3.0 utilize requestAnimationFrame() internally for all animation related functions, though it's definitely better to understand how this method works natively so you can take advantage of it in any JavaScript environment.
<h2>JavaScript Tutorials</h2>
<a href="http://www.javascriptkit.com/javatutors/scrolling-html-bookmark-javascript.shtml">Smooth Scrolling HTML Bookmarks using JavaScript (natively or jQuery)</a>
See how to use native JavaScript to create smooth scrolling HTML bookmark links inside the page, and for those that need legacy browser support, using jQuery instead.

This promises to be one smooth tutorial!
<a href="http://www.javascriptkit.com/javatutors/web-animation-api-tutorial.shtml">Web Animation API- Unleashing the Power of CSS keyframes in JavaScript</a>
Animate elements in JavaScript using the power of CSS keyframes animationz with the Web Animation API! In this tutorial, I'll introduce you to WAAPI, browser support and polyfill, and how to start using this awesome API today.
<a href="http://www.javascriptkit.com/javatutors/javascript-es6-top-five.shtml">Top five features in JavaScript ES6 Worth Mastering</a>
JavaScript ES6 adds a slew of new features to the JavaScript language, some more groundbreaking and widely applicable than others.

In this article I list the top 5 JavaScript ES6 features I find most indispensible.
<a href="http://www.javascriptkit.com/javatutors/javascript-es6-let-const.shtml">Understanding let and const in JavaScript ES6</a>
Get to know all about "let" and "const" in JavaScript ES6, and how it differs from the age old "var" keyword in defining variables.
<a href="http://www.javascriptkit.com/javatutors/javascriptfullscreenapi.shtml">Displaying Content in Full Screen using the Fullscreen API in JavaScript</a>
Open up any content on your page in full screen mode with just a few lines of JavaScript using the Full Screen API.
<a href="http://www.javascriptkit.com/javatutors/intro-javascript-async-functions.shtml">Introduction to JavaScript Async Functions- Promises simplified</a>
See how to use JavaScript async functions with JavaScript Promises to further simplify asynchronous operations in JavaScript, and produce code that's easier to read and debug to boot.
<a href="http://www.javascriptkit.com/javatutors/css-transition-functions.shtml">Four Essential JavaScript functions to tame CSS3 Transitions and Animations</a>
See four JavaScript functions that help you unlock the full potential of CSS Transitions and Animations, by pausing them, detecting when they've finished playing, and more.
<a href="http://www.javascriptkit.com/javatutors/requestanimationframe.shtml">Understanding JavaScript's requestAnimationFrame() method for smooth animations</a>
<k>requestAnimationFrame()</k> is a JavaScript method for creating smoother, less resource intensive JavaScript animations.

See how to take advantage of this method in this comprehensive tutorial.
<a href="http://www.javascriptkit.com/javatutors/detect-user-scroll-amount.shtml">Determining how much the user has scrolled the page using JavaScript or jQuery</a>
Learn how to detect the amount the user has scrolled the page using JavaScript or jQuery, in either pixels travelled or as a percentage of the whole page.
<a href="http://www.javascriptkit.com/javatutors/copytoclipboard.shtml">Reading and copying selected text to clipboard using JavaScript</a>
In this tutorial, we'll see how to read the textual contents of a user selection, dynamically select some text on the page, and last but not least, copy whatever is selected to clipboard, all using just JavaScript.

Not a trace of Flash here!
<a href="http://www.javascriptkit.com/javatutors/javascriptpromises.shtml">Beginner's Guide to JavaScript Promises</a>
JavaScript Promises are a new addition to ECMAscript 6 that aims to provide a cleaner, more intuitive way to deal with the completion (or failure) of asynchronous tasks.

In this tutorial we'll deliver the promise of JavaScript Promises to the uninitiated!
<a href="http://www.javascriptkit.com/javatutors/javascriptarrowfunctions.shtml">Overview of JavaScript Arrow Functions</a>
One of the exciting new additions to ECMAscript 6 is Arrow Functions, a compact way to define anonymous functions that also simplifies the handling of the "<k>this</k>" object inside it.

In this tutorial we'll go over all you need to know about the new function syntax before it supplants anonymous functions everywhere.
<a href="http://www.javascriptkit.com/javatutors/matchmediamultiple.shtml">Matching multiple CSS media queries using window.matchMedia()</a>
A common question that gets asked is how to use JavaScript's <k>window.matchMedia()</k> method to react to multiple CSS media queries.

In this tutorial we explore how.
<a href="http://www.javascriptkit.com/javatutors/arrayprototypeslice.shtml">Converting objects to arrays using Array.prototype.slice.call()</a>
We break down <k>Array.prototype.slice.call()</k> to see how it works to convert array-like objects into true arrays in this quick tutorial.
<a href="http://www.javascriptkit.com/javatutors/touchevents.shtml">Introduction to Touch events in JavaScript</a>
In this tutorial lets get touchy feely with JavaScript, but examining its touch related events and how they are used to detect and respond to touch and swipe events.
<a href="http://www.javascriptkit.com/javatutors/preloadimagesplus.shtml">Preloading images and executing code only after all images have loaded</a>
See how to refine the process of preloading images to detect when all images have actually been preloaded and react accordingly.
<a href="http://www.javascriptkit.com/javatutors/setcss3properties.shtml">Setting CSS3 properties using JavaScript</a>
With the numerous CSS vendor prefixes one has to contend with when it comes to defining CSS3 properties such as <k>-moz-box-shadow</k> or <k>-webkit-border-radius</k>, setting them in JavaScript can be even more confusing.

This tutorial looks at how to how to streamline the setting of CSS3 property values in JavaScript, by checking for and targeting only the version of a CSS3 property the browser supports.
<a href="http://www.javascriptkit.com/javatutors/domstorage.shtml">Going beyond cookies- Using DOM sessionStorage and localStorage to persist larger amounts of info</a>
HTML5 introduces DOM Storage, a new way of storing data on the client side that overcomes the disk space limitations of JavaScript cookies.

This tutorial looks at how to take advantage of DOM Storage in browsers today.
<a href="http://www.javascriptkit.com/javatutors/createelementcheck.shtml">Using document.createElement() to test for browser support for an element</a>
Most of us are familiar with using 
<a href="http://www.javascriptkit.com/javatutors/http://www.javascriptkit.com/javatutors/objdetect2.shtml">object detection</a> or the <a href="http://www.javascriptkit.com/javatutors/http://www.javascriptkit.com/javatutors/navigator.shtml">Navigator object</a> to check for backing for a given JavaScript object or method, but these techniques do not work well when the objective is to check whether the browser supports a particular HTML element, such as the <k>
&lt;canvas></k> element.

This is where <k>document.createElement()</k> can be very helpful.
<a href="http://www.javascriptkit.com/javatutors/onmousewheel.shtml">The onmousewheel event of JavaScript</a>
The <k>onmousewheel</k> event fires whenever the user moves the mouse wheel either upwards or downwards, and can provide yet another way for users to interact with your JavaScript.

In this tutorial, lets see how to take advantage of <k>onmousewheel</k> across browsers.
<a href="http://www.javascriptkit.com/javatutors/trycatch.shtml">Handling runtime errors in JavaScript using try/catch/finally</a>
The <k>try/catch/finally</k> statement of JavaScript lets you dip your toes into error prune territory and "reroute" when a runtime error has occurred.

Learn all about this often misunderstood statement in this tutorial.
<a href="http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml">Dynamically loading an external JavaScript or CSS file</a>
External JavaScript or CSS files do not always have to be synchronously loaded as part of the page, but dynamically as well.

In this tutorial, we'll see how to load, remove, and replace external JavaScript and CSS files on demand and asynchronously.

It the era of Ajax, it's a handy thing to know.
<a href="http://www.javascriptkit.com/javatutors/closuresleak/index.shtml">JavaScript and memory leaks</a>
If you're not careful, your JavaScript code may leak memory and sometimes even bring the visitor's browser to its knees.

This tutorial looks at different leak patterns in JavaScript and how to fix them.
<a href="http://www.javascriptkit.com/javatutors/closures.shtml">JavaScript Closures 101- they're not magic</a>
Morris Johns explains JavaScript closures, a powerful yet often bewildering concept, in a gentle, step by step fashion.
<a href="http://www.javascriptkit.com/javatutors/conditionalcompile.shtml">Conditional Compilation of JScript/ JavaScript in IE</a>
IE supports a little known feature called conditional compilation that selectively compiles any block of JScript or JavaScript depending on your script logic.

Think of it as the absolute form of object detection.
<a href="http://www.javascriptkit.com/javatutors/externalphp.shtml">
External JavaScript and PHP</a>
External JavaScript can reference not just .js files, but PHP scripts as well.

See how this is done, and the wonderful possibilities linking PHP to JavaScript bring.
<a href="http://www.javascriptkit.com/javatutors/selectcontent.shtml">
Changing Select element content on the fly</a>
This tutorial explains how to change a select element's content using JavaScript, from adding new options to modifying and deleting them.

It also shows how to create a 2 level interdependent select list.
<a href="http://www.javascriptkit.com/javatutors/cookiedetect.shtml">Determining cookie support in client's browser</a>
If your script relies on JavaScript cookies to store and persist information, it's
a good idea to always first make sure the user's browser has cookies enabled.

This tutorial shows you how to perform this detection.
<a href="http://www.javascriptkit.com/javatutors/re.shtml">Introductory
Guide to Regular Expressions</a>
Always wanted to learn about Regular Expressions in JavaScript? With this comprehensive yet gentle tutorial on the subject, you'll be on your way to slashing and validating string input using Regular Expressions in no time!
<h2>Introductory Tutorials</h2>
<a href="http://www.javascriptkit.com/javatutors/primer1.shtml">JavaScript Primer</a>
<a href="http://www.javascriptkit.com/javatutors/alert1.shtml">Creating alert, confirm, and prompt boxes</a>
<a href="http://www.javascriptkit.com/javatutors/event1.shtml">Understanding "event handlers" in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/eventaction.shtml">One event handler, many actions</a>
<a href="http://www.javascriptkit.com/javatutors/multiplejava.shtml">Adding more than one JavaScript to a page</a>
<a href="http://www.javascriptkit.com/javatutors/languageattri.shtml">The Type and Language attributes of JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/learnjs.shtml">How I learned JavaScript</a>
<h2>Forms and form validation</h2>
<a href="http://www.javascriptkit.com/javatutors/form1.shtml">Accessing and validating forms</a>
<a href="http://www.javascriptkit.com/javatutors/radiocheck.shtml">Manipulating radio and check boxes</a>
<a href="http://www.javascriptkit.com/javatutors/deform.shtml">Enabling/ disabling form elements</a>
<a href="http://www.javascriptkit.com/javatutors/combos1.shtml">Accessing the select element of a form</a>
<a href="http://www.javascriptkit.com/javatutors/dombos1.shtml">Creating combo link menus</a>
<a href="http://www.javascriptkit.com/javatutors/selectcontent.shtml">Changing select element content on   the fly</a>
<h2>External JavaScript</h2>
<a href="http://www.javascriptkit.com/javatutors/external.shtml">Creating external JavaScript libraries</a>
<a href="http://www.javascriptkit.com/javatutors/externalphp.shtml">External Javascript and PHP</a>
<a href="http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml">Dynamically loading an external JavaScript or CSS file</a>
<a href="http://www.javascriptkit.com/javatutors/externalrestrict.shtml">Restricting access of JavaScript libraries to designated domains</a>
<h2>JavaScript cookies</h2>
<a href="http://www.javascriptkit.com/javatutors/cookie.shtml">Session-only cookies</a>
<a href="http://www.javascriptkit.com/javatutors/cookiedetect.shtml">Determining cookie support in   client's browser</a>
<h2>Math &amp; Random scripts</h2>
<a href="http://www.javascriptkit.com/javatutors/math.shtml">The Math object</a>
<a href="http://www.javascriptkit.com/javatutors/round.shtml">Number rounding in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/formatnumber.shtml">Formatting numbers for   decimals and significant digits</a>
<a href="http://www.javascriptkit.com/javatutors/randomnum.shtml">Generating a random number in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/weighrandom.shtml">Generating weighed random numbers</a>
<a href="http://www.javascriptkit.com/javatutors/random1.shtml">Using JavaScript to create random scripts</a>
<a href="http://www.javascriptkit.com/javatutors/randomorder.shtml">Randomizing the display order of content using JS</a>
<h2>Variables and functions</h2>
<a href="http://www.javascriptkit.com/javatutors/determinevar.shtml">Determining the existence of a variable</a>
<a href="http://www.javascriptkit.com/javatutors/rfunction.shtml">Robust functions via the arguments array</a>
<a href="http://www.javascriptkit.com/javatutors/namedfunction.shtml">Using named arguments in JavaScript functions</a>
<a href="http://www.javascriptkit.com/javatutors/varshort.shtml">Variable and expression shortcuts</a>
<a href="http://www.javascriptkit.com/javatutors/switch.shtml">The switch statement of JavaScrip</a>t
<a href="http://www.javascriptkit.com/javatutors/proplit.shtml">Adding properties to a literal in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/stepon.shtml">Avoiding variable and function conflicts in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/valid1.shtml">Flag Variables, Validation, &amp; Function Control</a>
<a href="http://www.javascriptkit.com/javatutors/serror.shtml">Tackling JavaScript strict warnings</a>
<h2>Regular Expressions</h2>
<a href="http://www.javascriptkit.com/javatutors/re.shtml">Introductory Guide to Regular Expressions</a>
<a href="http://www.javascriptkit.com/javatutors/redev.shtml">Programmer's Guide to Regular Expressions</a>
<h2>JavaScript with content</h2>
<a href="http://www.javascriptkit.com/javatutors/static.shtml">Using JavaScript to statically display elements</a>
<a href="http://www.javascriptkit.com/javatutors/dynamiccontent.shtml">JavaScript and Dynamic Content</a>
<a href="http://www.javascriptkit.com/javatutors/crossmenu.shtml">Creating an attractive Hover Menu   using CSS &amp; JavaScript</a>
<h2>Date &amp; Time</h2>
<a href="http://www.javascriptkit.com/javatutors/time1.shtml">Date, time, and creating a live clock in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/datedifference.shtml">Calculating the difference between two dates</a>
<h2>Interacting with images</h2>
<a href="http://www.javascriptkit.com/javatutors/image1.shtml">Accessing images &amp; creating image rollovers</a>
<a href="http://www.javascriptkit.com/javatutors/preloadimagesplus.shtml">Preloading images and executing code only after all images have loaded</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/newtech1.shtml">Creating depressible images</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/show.shtml">Building a JavaScript image slideshow</a>
<h2>Windows and frames</h2>
<a href="http://www.javascriptkit.com/javatutors/window1.shtml">Windows and JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/openclose.shtml">Determining whether a browser window is open</a>
<a href="http://www.javascriptkit.com/javatutors/advwin.shtml">Moving, scrolling, and resizing browser window</a>
<a href="http://www.javascriptkit.com/javatutors/twoframes1.shtml">Loading two frames with one link...</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/fullwin.shtml">Opening windows in theatre and channel mode</a> (IE)
<a href="http://www.javascriptkit.com/javatutors/remote.shtml">Creating window remote controls</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/newtech3.shtml">Detecting user's screen size and resolution</a>
<h2>Strings (text)</h2>
<a href="http://www.javascriptkit.com/javatutors/string.shtml">Strings in JavaScript Part 1</a>
<a href="http://www.javascriptkit.com/javatutors/string3.shtml">Strings in JavaScript Part II</a>
<h2>Objects and entities</h2>
<a href="http://www.javascriptkit.com/javatutors/oopjs.shtml">JavaScript and OOP</a>
<a href="http://www.javascriptkit.com/javatutors/object.shtml">Creating custom objects in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/proto.shtml">The prototype object of JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/send1.shtml">Sending objects from one page to another</a>
<h2>Browser and features detection</h2>
<a href="http://www.javascriptkit.com/javatutors/navigator.shtml">Using the navigator object to detect browser</a>
<a href="http://www.javascriptkit.com/javatutors/objdetect.shtml">Using object detection to detect browser type</a>
<a href="http://www.javascriptkit.com/javatutors/createelementcheck.shtml">Using document.createElement() to test for browser support for an element</a>
<h2>Error handling</h2>
<a href="http://www.javascriptkit.com/javatutors/error.shtml">The onerror event of the window object</a>
<a href="http://www.javascriptkit.com/javatutors/trycatch.shtml">Handling runtime errors in JavaScript using try/catch/finally</a>
<h2>Keyboard and printer interaction</h2>
<a href="http://www.javascriptkit.com/javatutors/javascriptkey.shtml">Scripting the keyboard in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/ie5print.shtml">onbeforeprint and onafterprint events of IE</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/newtech2.shtml">Using window.print() to print a document</a>
<h2>Tabular Data Control (IE only)</h2>
<a href="http://www.javascriptkit.com/javatutors/tdc.shtml">Introduction to Tabular Data Control</a>
<a href="http://www.javascriptkit.com/javatutors/tdcsort.shtml">Sorting a Tabular Data Control</a>
<a href="http://www.javascriptkit.com/javatutors/tdcfilter.shtml">Filtering a Tabular Data Control</a>
<h2>Other tutorials</h2>
<a href="http://www.javascriptkit.com/javatutors/efficientjs.shtml">Performance tips for JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/customcollect.shtml">Creating custom collections in   the DOM (via ID attribute)</a>
<a href="http://www.javascriptkit.com/javatutors/vbalert.shtml">Creating customizable alert boxes using VBScript</a>
<h2>Animating the Canvas</h2>
<a href="https://www.youtube.com/watch?v=yq2au9EfeRQ" class="whitebut ">Animating the Canvas</a>
<h2>pass event as argument to an inline event handler</h2>
to pass the event object:
&lt;p id="p" onclick="doSomething(event)">
to get the clicked child element (should be used with event parameter:
function doSomething(e) {
e = e || window.event;
var target = e.target || e.srcElement;
console.log(target);
}
to pass the element itself (DOMElement):
&lt;p id="p" onclick="doThing(this)">
Since inline events are executed as functions you can simply use arguments.
&lt;p id="p" onclick="doSomething.apply(this, arguments)">
and
function doSomething(e) {
if (!e) e = window.event;
// 'e' is the event.
// 'this' is the P element
}
You don't need to pass this, there already is the event object passed by default automatically, which contains event.target which has the object it's coming from.

You can lighten your syntax:
This:
&lt;p onclick="doSomething()">aaaa&lt;/p>
Will work with this:
function doSomething(){
console.log(event);
console.log(event.target);
}
<h2>The e is short for event</h2>
The simplest way to create an event is to click somewhere on the page.
When you click, a click event is triggered.

This event is actually an object containing information about the action that just happened.

Now, events happen all the time, however you are not interested in all the events that happen.

When you are interested in some event however, it's when you add an event listener to the element you know will create events.

For example you are interested in knowing when the user clicks on a 'Subscribe' button and you want to do something when this event happens.
In order to do something about this event you bind an event handler to the button you are interested in.

The way to bind the handler to the element is by doing element.addEventListener(eventName, handler).
eventName is a string and it's the name of the event you are interested in, in this case that would be 'click' (for the click event).
The handler is simply a function which does something (it's executed) when the event happens.

The handler function, by default, when executed is passed the event object (that was created when the event/action you are interested in happened) as an argument.
Defining the event as a parameter of your handler function is optional but, sometimes (most times), it is useful for the handler function to know about the event that happened.

When you do define it this is the e you see in the functions like the ones you mentioned.

Remember, the event is just a regular javascript object, with lots of properties on it.
<h2>variables in asynchronous callback functions</h2>
What’s the problem?
First let’s assume you have declared a variable called myVar:
var myVar;
If you immediately log the contents of the variable, it will return undefined.
Now if you define any of the following:
setTimeout(function() { myVar = "some value"; }, 0);
or:
$.ajax({ url: '...',    success: function(response) { myVar = response; }
});
or:
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "myscript.js";
script.onload = function(){ myVar = "some value"; };
document.body.appendChild(script);
and immediately afterwards display the contents of myVar, you will also get undefined as result.
Why is the variable not set?
In all examples above, the function defined are what’s called asynchronous callbacks.

This means that they are immediately created but not immediately executed.

setTimeout pushes it into the event queue, the AJAX calls will execute it once the call returns and onload will be executed when the DOM element is loaded.
In all three cases, the function does not execute right away but rather whenever it is triggered asynchronously.

So when you log or display the contents of the variable, the function has not yet run and the content has not yet been set.
So even though JavaScript actually works with a single-thread model, you’ve landed in the asynchronous problem zone.
Synchronous vs.

Asynchronous
Basically the difference between a synchronous function call and an asynchronous one can be shown with these 2 pieces of code:
var myVar;
function doSomething() { myVar = "some value"; }
doSomething();   //synchronous call
log(myVar);
And:
var myVar;
function doSomething() { myVar = "some value"; }
log(myVar);
doSomething();   //asynchronous call
In the asynchronous case, our function is also defined before logging the variable but is call some time later.
How to make it work?
You will need to rewrite your code in order to use callbacks which will be called when the processing (in this case setting the value of myVar) is done.
First example: Instead of using the following:
var myVar;
setTimeout(function() { myVar = "some value"; }, 0);
alert(myVar);
You should rather do the following:
var myVar;
function callback() { alert(myVar); }
setTimeout(function() {
myVar = "some value";
callback(); }, 0);
Instead of this:
var myVar;
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "d3.min.js";
script.onload = function(){ myVar = "some value"; };
document.body.appendChild(script);
alert(myVar);
Use this:
function callback(response) { alert("loaded"); }
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "d3.min.js";
script.onload = callback;
document.body.appendChild(script);
And instead of doing the following:
var myVar;
$.ajax({ url: '...',    success: function(response) { myVar = response; }
});
alert(myVar);
Do the following:
function callback(response) { alert(response); }
$.ajax({ url: '...',    success: callback
});
Of course, here another solution is to make the AJAX call synchronous by adding the following to the options:
async: false
Also if you use $.get or $.post, you’ll need to rewrite it to use $.ajax instead.
But this is not a good idea.

First if the call lasts longer than expected, you will block the UI making your browser window unresponsive.

And at some point in the time the browser will ask your user whether you want to stop the unresponsive script.

So, even though programing everything in an asynchronous way with callbacks is not always trivial, doing everything in a synchronous way will cause more sporadic and difficult to handle issues.
So to summarize, you should either use a callback or directly call a function after processing and not only rely on setting a variable in the asynchronous part.
<a href="https://benohead.com/blog/2014/12/02/javascript-variables-asynchronous-callback-functions/" class="whitebut ">variables in asynchronous callback functions</a>
<a href="https://stackoverflow.com/questions/7434371/image-onload-function-with-return" class="whitebut ">onload function with return</a>
<a href="https://www.freecodecamp.org/forum/t/help-my-function-does-not-return-value/150175/4" class="whitebut ">My function does not return value</a>
<h2>appendChild</h2>
Uncaught TypeError: Cannot read property 'appendChild' of null
but you have a class name or id in the HTML...
If your script tag is in the head, the JavaScript is loaded before your HTML.

You will need to add defer to your script like so:
&lt;script src="script.js" defer>&lt;/script>
or put the script at bottom of page
<h2>Declaring global variable within function</h2>
To declare JavaScript global variables inside function, you need to use <b>window object</b>.

For example:
window.value=90;
Now it can be declared inside any function and can be accessed from any function.

For example:
function m(){ window.value=100;//declaring global variable by window object }
function n(){
alert(window.value);//accessing global variable from other function
}
<h3>Internals of global variable in JavaScript</h3>
When you declare a variable outside the function, it is added in the window object internally.

You can access it through window object also.

For example:
var value=50;
function a(){ alert(window.value);//accessing global variable }
<h2>What is a Callback?</h2>
Simply put: A callback is a function that is to be executed after another function has finished executing — hence the name ‘call back’.
More complexly put: In JavaScript, functions are objects.

Because of this, functions can take functions as arguments, and can be returned by other functions.

Functions that do this are called higher-order functions.

Any function that is passed as an argument is called a callback function.
Why do we need Callbacks?
For one very important reason — JavaScript is an event driven language.

This means that instead of waiting for a response before moving on, JavaScript will keep executing while listening for other events.

Lets look at a basic example:
function first(){
console.log(1);
}
function second(){
console.log(2);
}
first();
second();
As you would expect, the function first is executed first, and the function second is executed second — logging the following to the console:
// 1
// 2
All good so far.
But what if function first contains some sort of code that <b>can’t be executed</b> immediately? 
For example, an API request where we have to send the request then wait for a response? 
To simulate this action, were going to use setTimeout which is a JavaScript function that calls a function after a set amount of time.

We’ll delay our function for 500 milliseconds to simulate an API request.

Our new code will look like this:
function first(){
// Simulate a code delay
setTimeout( function(){ console.log(1); }, 500 ); }
function second(){ console.log(2); }
first();
second();
It’s not important that you understand how setTimeout() works right now.

All that matters is that you see we’ve moved our console.log(1); inside of our 500 millisecond delay.

So what happens now when we invoke our functions?
first();
second();
// 2
// 1
Even though we invoked the first() function first, we logged out the result of that function after the second() function.
It’s not that JavaScript didn’t execute our functions in the order we wanted it to, it’s instead that JavaScript didn’t wait for a response from first() before moving on to execute second().
So why show you this? 
Because you can’t just call one function after another and hope they execute in the right order.

Callbacks are a way to make sure certain code doesn’t execute until other code has already finished execution.
Create a Callback
First, open up your Chrome Developer Console and type the following function declaration into your console:
function doHomework(subject) {
alert(`Starting my ${subject} homework.`);
}
Above, we’ve created the function doHomework .

Our function takes one variable, the subject that we are working on.

Call your function by typing the following into your console:
doHomework('math');
// Alerts: Starting my math homework.
Now lets add in our callback — as our last parameter in the doHomework() function we can pass in callback.

The callback function is then defined in the second argument of our call to doHomework().
function doHomework(subject, callback) { // here callback is variable
alert(`Starting my ${subject} homework.`);
callback();  // this call is not fixed, depend on the true calling command
}
doHomework('math', function() {
alert('Finished my homework');
});
As you’ll see, if you type the above code into your console you will get two alerts back to back: Your ‘starting homework’ alert, followed by your ‘finished homework’ alert.
But callback functions don’t always have to be defined in our function call.

They can be defined elsewhere in our code like this:
function doHomework(subject, callback) {
alert(`Starting my ${subject} homework.`);
callback();
}
function alertFinished(){
alert('Finished my homework');
}
doHomework('math', alertFinished);
This result of this example is exactly the same as the previous example, but the setup is a little different.

As you can see, we’ve passed the alertFinished function definition as an argument during our doHomework() function call!
A real world example
Last week I published an article on how to Create a Twitter Bot in 38 lines of code.

The only reason the code in that article works is because of Twitters API.

When you make requests to an API, you have to wait for the response before you can act on that response.

This is a wonderful example of a real-world callback.

Here’s what the request looks like:
T.get('search/tweets', params, function(err, data, response) {
if(!err){
// This is where the magic will happen
} else {
console.log(err);
}
})
T.get simply means we are making a get request to Twitter
There are three parameters in this request: 
‘search/tweets’, which is the route of our request, 
params which are our search parameters, and then 
an anonymous function which is our callback.
A callback is important here because we need to wait for a response from the server before we can move forward in our code.

We don’t know if our API request is going to be successful or not so after sending our parameters to search/tweets via a get request, we wait.

Once Twitter responds, our callback function is invoked.

Twitter will either send an err (error) object or a response object back to us.

In our callback function we can use an if() statement to determine if our request was successful or not, and then act upon the new data accordingly.
<h2>JavaScript Closures</h2>
JavaScript variables can belong to the local or global scope.
Global variables can be made local (private) with closures.
In a web page, global variables belong to the window object.
Global variables can be used (and changed) by all scripts in the page (and in the window).
Global and local variables with the same name are different variables.

Modifying one, does not modify the other.
Variables created without a declaration keyword (var, let, or const) are always global, even if they are created inside a function.
A Counter Dilemma
Suppose you want to use a variable for counting something, and you want this counter to be available to all functions.
You could use a global variable, and a function to increase the counter:
Example
// Initiate counter
var counter = 0;
// Function to increment counter
function add() {
counter += 1;
}
// Call add() 3 times
add();
add();
add();
// The counter should now be 3
There is a problem with the solution above: Any code on the page can change the counter, without calling add().
The counter should be local to the add() function, to prevent other code from changing it:
Example
// Initiate counter
var counter = 0;
// Function to increment counter
function add() {
var counter = 0;
counter += 1;
}
// Call add() 3 times
add();
add();
add();
//The counter should now be 3.

But it is 0
It did not work because we display the global counter instead of the local counter.
We can remove the global counter and access the local counter by letting the function return it:
Example
// Function to increment counter
function add() {
var counter = 0;
counter += 1;
return counter;
}
// Call add() 3 times
add();
add();
add();
//The counter should now be 3.

But it is 1.
It did not work because we reset the local counter every time we call the function.
A JavaScript inner function can solve this.
JavaScript Nested Functions
All functions have access to the global scope.

In fact, in JavaScript, all functions have access to the scope "above" them.
JavaScript supports nested functions.

Nested functions have access to the scope "above" them.
In this example, the inner function plus() has access to the counter variable in the parent function:
Example
function add() {
var counter = 0;
function plus() {counter += 1;}
plus();   
return counter;
}
This could have solved the counter dilemma, if we could reach the plus() function from the outside.
We also need to find a way to execute counter = 0 only once.
We need a closure.
JavaScript Closures
Remember self-invoking functions? What does this function do?
Example
var add = (function () {
var counter = 0;
return function () {counter += 1; return counter}
})();
add();
add();
add();
// the counter is now 3
Example Explained
The variable add is assigned the return value of a self-invoking function.
The self-invoking function only runs once.

It sets the counter to zero (0), and returns a function expression.
This way add becomes a function.

The "wonderful" part is that it can access the counter in the parent scope.
This is called a JavaScript closure.

It makes it possible for a function to have "private" variables.
The counter is protected by the scope of the anonymous function, and can only be changed using the add function.
A closure is a function having access to the parent scope, even after the parent function has closed.
<h2>Select selectedIndex Property</h2>
Select a fruit and click the button:
&lt;select id="mySelect">
&lt;option>Apple&lt;/option>
&lt;option>Orange&lt;/option>
&lt;option>Pineapple&lt;/option>
&lt;option>Banana&lt;/option>
&lt;/select>
&lt;button type="button" onclick="myFunction()">Display index&lt;/button>
function myFunction() {
var x = document.getElementById("mySelect").selectedIndex;
var y = document.getElementById("mySelect").options;
alert("Index: " + y[x].index + " is " + y[x].text);
}
<h2>variables in event handler using function closures</h2>
function addClickHandler(elem, arg1, arg2) {
elem.addEventListener('click', function(e) {
// in the event handler function here, you can directly refer
// to arg1 and arg2 from the parent function arguments
}, false);
}
element.addEventListener('click', func(event, this.elements[i]))
element.addEventListener('click', (function(passedInElement) {
return function(e) {func(e, passedInElement); };
}) (this.elements[i]), false);
// return our event handler while capturing an argument in the closure
function handleEvent(passedInElement) {
return function(e) {
func(e, passedInElement); 
};
}
element.addEventListener('click', handleEvent(this.elements[i]));
<h2>:contains selector</h2>
Selecting multiple items from a list
use the <b>:contains</b> selector to search for an element whose text includes certain text.
$("#leftSelect option:contains(InfoCard Employee)").prop('selected', true);
<h2>multiple select</h2>
// arguments: reference to select list, callback function (optional)
function getSelectedOptions(sel, fn) {
var opts = [], opt;
// loop through options in select list
for (var i=0, len=sel.options.length; i&lt;len; i++) {
opt = sel.options[i];
// check if selected
if ( opt.selected ) {
// add to array of option elements to return from this function
opts.push(opt);
// invoke optional callback function if provided
if (fn) {
fn(opt);
}
}
}
// return array containing references to selected option elements
return opts;
}
Our getSelectedOptions function includes a callback mechanism that enables handling each selected option as it is collected, so there is no need to loop through the set a second time.

The callback function for this example is displayed here:
// example callback function (selected options passed one by one)
function callback(opt) {
// display in textarea for this example
var display = document.getElementById('display');
display.innerHTML += opt.value + ', ';
// can access properties of opt, such as...
//alert( opt.value )
//alert( opt.text )
//alert( opt.form )
}
Onchange and Onsubmit Handling
The example form above demonstrates obtaining the list of selected options both onchange and onsubmit.

Onsubmit, we check the length of the list to report how many option elements have been selected.

Onchange, we list the values of selected options in the textarea.
The JavaScript below shows how onchange and onsubmit handling are set up for this example:
// anonymous function onchange for select list with id demoSel
document.getElementById('demoSel').onchange = function(e) {
// get reference to display textarea
var display = document.getElementById('display');
display.innerHTML = ''; // reset
// callback fn handles selected options
getSelectedOptions(this, callback);
// remove ', ' at end of string
var str = display.innerHTML.slice(0, -2);
display.innerHTML = str;
};
document.getElementById('demoForm').onsubmit = function(e) {
// reference to select list using this keyword and form elements collection
// no callback function used this time
var opts = getSelectedOptions( this.elements['demoSel[]'] );
alert( 'The number of options selected is: ' + opts.length ); //  number of selected options
return false; // don't return online form
};
Form Markup
Markup for the example form above is displayed here:
&lt;form action="#" method="post" id="demoForm" class="demoForm">
&lt;fieldset>
&lt;legend>Demo: Get Selected Options&lt;/legend>
&lt;p>
&lt;select name="demoSel[]" id="demoSel" size="4" multiple>
&lt;option value="scroll">Scrolling Divs JavaScript&lt;/option>
&lt;option value="tooltip">JavaScript Tooltips&lt;/option>
&lt;option value="con_scroll">Continuous Scroller&lt;/option>
&lt;option value="banner">Rotating Banner JavaScript&lt;/option>
&lt;option value="random_img">Random Image PHP&lt;/option>
&lt;option value="form_builder">PHP Form Generator&lt;/option>
&lt;option value="table_class">PHP Table Class&lt;/option>
&lt;option value="order_forms">PHP Order Forms&lt;/option>
&lt;/select>
&lt;input type="submit" value="Submit" />
&lt;textarea name="display" id="display" placeholder="view select list value(s) onchange" cols="20" rows="4" readonly>&lt;/textarea>
&lt;/p>
&lt;/fieldset>
&lt;/form>
Name Attribute for Multiple Select
Notice the name demoSel[] is applied to the example select box.

Attach square brackets to the end of the name of a select-multiple type select box in order for server side code to treat selected options as an array.

Otherwise only the last selected item will be provided.

An ID can be used to obtain a reference to the select box in JavaScript as shown above.[1]
<h2>some input checkbox functions</h2>
<b>use keypress</b>
&lt;input type="checkbox" name="Colors" value="Bike" class="mycheckbox">My text&lt;br>
Jquery
$('.mycheckbox').on('keypress', function (event) {
if (event.which === 13) {
$(this).prop('checked', !$(this).prop('checked'));
}
});
Another method is to use a type selector in order to get the input elements with certain type.
$('input[type=checkbox]')
$(':checkbox').on('keypress', function (event) {
if (event.which === 13) {
$(this).prop('checked', !$(this).prop('checked'));
$('textarea').html($(this).prop('checked').toString());
}
});
&lt;input type="checkbox" name="Colors" value="Bike" class="mycheckbox">My text&lt;br>
$(document).on('keypress', function(event) {
if (event.keyCode == 13) {
$('#mycheckbox').prop('checked', true);
}
});
$('input:checkbox').keypress(function(e){
if((e.keyCode ? e.keyCode : e.which) == 13){
$(this).trigger('click');
}
});
<b>use preventDefault</b>
but pressing Enter would also submit the form.
Adding e.preventDefault(); prevents the default browser action when pressing enter on the checkbox.
$('input:checkbox').keypress(function(e){
e.preventDefault();
if((e.keyCode ? e.keyCode : e.which) == 13){
$(this).trigger('click');
}
});
if (keycode == 13) {
$(this).attr('checked', checked);
Checkbox_to_RadioButton(this);
alert("Enter key was pressed");
}   
<b>Set the checked state of a checkbox:</b>
function check() { document.getElementById("myCheck").checked = true; }
function uncheck() { document.getElementById("myCheck").checked = false; }
Find out if a checkbox is checked or not:
var x = document.getElementById("myCheck").checked;
Use a checkbox to convert text in an input field to uppercase:
document.getElementById("fname").value = document.getElementById("fname").value.toUpperCase();
<b>Several checkboxes in a form:</b>
&lt;form action="/action_page.php">
&lt;input type="checkbox" name="coffee" value="cream">With cream&lt;br>
&lt;input type="checkbox" name="coffee" value="sugar">With sugar&lt;br>
&lt;br>
&lt;input type="button" onclick="myFunction()" value="Send order">
&lt;br>&lt;br>
&lt;input type="text" id="order" size="50">
&lt;input type="submit" value="Submit">
&lt;/form>
function myFunction() {
var coffee = document.forms[0];
var txt = "";
var i;
for (i = 0; i &lt; coffee.length; i++) {
if (coffee[i].checked) { txt = txt + coffee[i].value + " "; }
}
document.getElementById("order").value = "You ordered a coffee with: " + txt;
}
<h2>click label check checkbox</h2>
Without jQuery code:
use: <b>label for</b>
&lt;input type="checkbox" id="Checkbox1">&lt;label for="Checkbox1">Check ME&lt;/label>
&lt;select id="mySelect" onchange="checkboxes();" />
<h2>window open this children attr</h2>
&lt;p>&lt;a href="https://www.youtube.com/channel/Exw">InspirationTuts&lt;/a>&lt;/p>
window.open($(this).children("a").attr("href"));
<h2>jquery to change style attribute of a div class</h2>
$('.handle').css('left', '300px');

<h2>jQuery serialize()</h2>
creates a URL encoded text string by serializing form values.
$("button").click(function(){
$("div").text($("form").serialize());
});
You can select one or more form elements (like input and/or text area), or the form element itself.
The serialized values can be used in the URL query string when making an AJAX request.
<h2>encodeURIComponent() and decodeURIComponent() Function</h2>
decodes a URI component
function myFunction() {
var uri = "https://w3schools.com/my test.asp?name=ståle&car=saab";
var uri_enc = encodeURIComponent(uri);
var uri_dec = decodeURIComponent(uri_enc);
var res = "Encoded URI: " + uri_enc + "<br>" + "Decoded URI: " + uri_dec;
document.getElementById("demo").innerHTML = res;
}
Encoded URI: https%3A%2F%2Fw3schools.com%2Fmy%20test.asp%3Fname%3Dst%C3%A5le%26car%3Dsaab
Decoded URI: https://w3schools.com/my test.asp?name=ståle&car=saab

<h2>to evaluate minutes between time spans</h2>
var d = new Date();
var mins=d.getMinutes();
var hr=d.getHours();
hrdiff = hr - 9;
mindiff = mins -30;
timespan = hrdiff * 60 + mindiff;
if(timespan&lt;60){imgwidth = timespan*22}
<h2>Using Web Workers</h2>
Web Workers are a simple means for web content to run scripts in background threads.

The worker thread can perform tasks without interfering with the user interface.

In addition, they can perform I/O using XMLHttpRequest (although the responseXML and channel attributes are always null) or fetch (with no such restrictions).

Once created, a worker can send messages to the JavaScript code that created it by posting messages to an event handler specified by that code (and vice versa).
webexample.html
var myWorker = new Worker('my_task.js');
myWorker.onmessage = function(oEvent) {
//take current status from the worker from oEvent
status = oEvent.status;
console.log('Worker said : ' + oEvent.status);
};
//if ok, send an order to continue receiving php calls
//or other function
if (status == 200)
myWorker.postMessage('someorder');
my_task.js (the worker):
postMessage("Worker listening");
onmessage = function(oEvent) {
//if status is not ok, worker is busy and can't do anything
if (status != 200)
postMessage('Hi ' + oEvent.data);
};
<h2>Improving Async functions with Web Workers</h2>
Separate the processing part in a different file (possibly
‘my_worker.js’),
create a worker with <k>newWorker = new Worker('my_worker.js');</k>
and offload the processing to it.
// my_worker.js
const do_a_lot_of_processing = (data) => {
....
}
onmessage = (e) => {
postMessage(do_a_lot_of_processing(e.data));
// main.js
const myWorker = new Worker('my_worker.js');
async function get_useful_data() {
const raw_data = await request(some_url);
myWorker.postmessage(raw_data);
const show_data => (e) {
const data = e.data;
...
myWorker.onmessage(show_data);
get_useful_data();
<h2>HTML5 Web Workers</h2>
A web worker is a JavaScript running in the background, without affecting the performance of the page.
Uncaught DOMException: Failed to construct 'Worker':
If you are seeing this in Chrome then the answer probably has to do with loading from a local filesystem rather than over HTTP.
The key is the message "cannot be accessed from origin 'null'"
It's because Chrome doesn't let you load web workers when running scripts from a local file.
<r>run a server, Wampserver64</r>, open browser, run:
<k>http://localhost/test web worker.html</k>
Limitations Of Web Workers
The Web Workers API is a very powerful tool, but it has a few limitations:
A worker can’t directly manipulate the DOM and has limited access to methods and properties of the window object.
<r>A worker can not be run directly from the filesystem.

It can only be run via a server.</r>
<h3>Example</h3>
The example below creates a simple web worker that count numbers in the background:
Count numbers: &lt;output id="result">&lt;/output>
&lt;button onclick="startWorker()">Start Worker&lt;/button> 
&lt;button onclick="stopWorker()">Stop Worker&lt;/button>
&lt;script>
var w;
function startWorker() {
if(typeof(Worker)!=="undefined") {
if(typeof(w)=="undefined") {
w = new Worker("demo_workers.js");
}
w.onmessage = function (event) {
document.getElementById("result").innerHTML=event.data;
};
} else {
document.getElementById("result").innerHTML="Sorry, your browser does not support Web Workers...";
}
}
function stopWorker() { 
w.terminate();
w = undefined;
}
&lt;/script>
<h3>Create a Web Worker File</h3>
Now, let's create our web worker in an external JavaScript.
Here, we create a script that counts.

The script is stored in the "demo_workers.js" file:
var i = 0;
function timedCount() {
i = i + 1;
postMessage(i);
setTimeout("timedCount()",500);
}
timedCount();
The important part of the code above is the <k>postMessage()</k> method - which is used to post a message back to the HTML page.
<b>Note:</b> Normally web workers are not used for such simple scripts, but for more CPU intensive tasks.
<h3>Create a Web Worker Object</h3>
Now that we have the web worker file, we need to call it from an HTML page.
The following lines checks if the worker already exists, if not - it creates a new web worker object and runs the code in 
"demo_workers.js":
if (typeof(w) == "undefined") {
w = new Worker("demo_workers.js");
}
Then we can send and receive messages from the web worker.
Add an "onmessage" event listener to the web worker.
w.onmessage = function(event){
document.getElementById("result").innerHTML = event.data;
};
When the web worker posts a message, the code within the event listener is executed.

The data from the web worker is stored in event.data.
<h3>Terminate a Web Worker</h3>
When a web worker object is created, it will continue to listen for messages (even after the external script is finished) until it is terminated.
To terminate a web worker, and free browser/computer resources, use the 
<k>terminate()</k> method:
w.terminate();
<h3>Reuse the Web Worker</h3>
If you set the worker variable to undefined, after it has been terminated, 
you can reuse the code:
w = undefined;
<h3>Full Web Worker Example Code</h3>
We have already seen the Worker code in the .js file.

Below is the code for the HTML page:
<h3>Example</h3>
&lt;!DOCTYPE html>
&lt;html>
&lt;body>
&lt;p>Count numbers: &lt;output id="result">&lt;/output>&lt;/p>
&lt;button onclick="startWorker()">Start Worker&lt;/button> 
&lt;button onclick="stopWorker()">Stop Worker&lt;/button>
&lt;script>
var w;
function startWorker(){
if(typeof(Worker) !== "undefined") {
if(typeof(w) == "undefined") {
w = new Worker("demo_workers.js");
}
w.onmessage = function(event) {
document.getElementById("result").innerHTML = event.data;
};
}
else {
document.getElementById("result").innerHTML = "Sorry! No Web Worker support.";
}
}
function stopWorker() { 
w.terminate();
w = undefined;
}
&lt;/script>
&lt;/body>
&lt;/html>
<h3>Web Workers and the DOM</h3>
Since web workers are in external files, they do not have access to the following JavaScript objects:
The window object
The document object
The parent object
<a href="building blocks of Web Workers.html" class="whitebut red">building blocks of Web Workers</a>
application cases for Web Workers
games, graphics, crypto
Another use is Web I/O - in other words, polling URLs in background.

That way you don't block the UI waiting for polling results.
syntax highlighting, which you wouldn’t want to block your code editing whilst you’re using the app.
processor-intensive calculations without blocking the user interface thread.
As a practical example, think of an app which has a large table
<h2>Types of Web Workers</h2>
It's worth noting that the <a href="http://www.whatwg.org/specs/web-workers/current-work/">specification</a> discusses two kinds of Web Workers, <a href="http://www.whatwg.org/specs/web-workers/current-work/#dedicated-workers-and-the-worker-interface">Dedicated Workers</a> and <a href="http://www.whatwg.org/specs/web-workers/current-work/#sharedworker">Shared Workers</a>.

This article will only cover dedicated workers and I'll refer to them as 'web workers' or 'workers' throughout.
Web Workers run in an isolated thread.

As a result, the code that they execute needs to be contained in a separate file.
But before we do that, the first thing to do is create a new <k>Worker</k> object in your main page.

The constructor takes the name of the worker script:
var worker = new Worker('task.js');
If the specified file exists, the browser will spawn a new worker thread, which is downloaded asynchronously.
The worker will not begin until the file has completely downloaded and executed.

If the path to your worker returns an 404, the worker will fail silently.
After creating the worker, start it by calling the <k>postMessage()</k> method:
worker.postMessage(); // Start the worker.
<h3>Communicating with a Worker via Message Passing</h3>
Communication between a work and its parent page is done using an event model and the <k>postMessage()</k> method.

Depending on your browser/version, <k>postMessage()</k> can accept either a string or JSON object as its single argument.
The latest versions of the modern browsers support passing a JSON object.
Below is a example of using a string to pass 'Hello World' to a worker in doWork.js.

The worker simply returns the message that is passed to it.
Main script:
var worker = new Worker('doWork.js');
worker.addEventListener('message', function(e) {
console.log('Worker said: ', e.data);
}, false);
worker.postMessage('Hello World'); // Send data to our worker.
doWork.js (the worker):
self.addEventListener('message', function(e) {
self.postMessage(e.data);
}, false);
When <k>postMessage()</k> is called from the main page, our worker handles that message by defining an <k>onmessage</k> handler for the <k>message</k> event.

The message payload (in this case 'Hello World') is accessible in <k>Event.data</k>.

Although this particular example isn't very exciting, it demonstrates that <k>postMessage()</k> is also your means for passing data back to the main thread.

Convenient!
Messages passed between the main page and workers are copied, not shared.

For example, in the next example the 'msg' property of the JSON message is accessible in both locations.

It appears that the object is being passed directly to the worker even though it's running in a separate, dedicated space.

In actuality, what is happening is that the object is being serialized as it's handed to the worker, and subsequently, de-serialized on the other end.

The page and worker do not share the same instance, so the end result is that a duplicate is created on each pass.

Most browsers implement this feature by automatically JSON encoding/decoding the value on either end.
The following is a more complex example that passes messages using JSON objects.
Main script:
&lt;button onclick="sayHI()">Say HI&lt;/button>
&lt;button onclick="unknownCmd()">Send unknown command&lt;/button>
&lt;button onclick="stop()">Stop worker&lt;/button>
&lt;output id="result">&lt;/output>
&lt;script>
function sayHI() {
worker.postMessage({'cmd': 'start', 'msg': 'Hi'});
}
function stop() {
// worker.terminate() from this script would also stop the worker.
worker.postMessage({'cmd': 'stop', 'msg': 'Bye'});
}
function unknownCmd() {
worker.postMessage({'cmd': 'foobard', 'msg': '???'});
}
var worker = new Worker('doWork2.js');
worker.addEventListener('message', function(e) {
document.getElementById('result').textContent = e.data;
}, false);
&lt;/script>
doWork2.js:
self.addEventListener('message', function(e) {
var data = e.data;
switch (data.cmd) {
case 'start':
self.postMessage('WORKER STARTED: ' + data.msg);
break;
case 'stop':
self.postMessage('WORKER STOPPED: ' + data.msg +
'.

(buttons will no longer work)');
self.close(); // Terminates the worker.
break;
default:
self.postMessage('Unknown command: ' + data.msg);
};
}, false);
<strong>Note</strong>: There are two ways to stop a worker: by calling <k>worker.terminate()</k> from the main page or by calling <k>self.close()</k> inside of the worker itself.
<strong>Example</strong>: Run this worker!
<h3> - Transferrable objects</h3>
Most browsers implement the <a href="http://updates.html5rocks.com/2011/09/Workers-ArrayBuffer">structured cloning</a> algorithm, which allows you to pass more complex types in/out of Workers such as <k>File</k>, <k>Blob</k>, <k>ArrayBuffer</k>, and JSON objects.

However, when passing these types of data using <k>postMessage()</k>, a copy is still made.

Therefore, if you're passing a large 50MB file (for example), there's a noticeable overhead in getting that file between the worker and the main thread.
Structured cloning is great, but a copy can take hundreds of milliseconds.

To combat the perf hit, you can use <a href="http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#transferable-objects">Transferable Objects</a>.
With Transferable Objects, data is transferred from one context to another.

It is zero-copy, which vastly improves the performance of sending data to a Worker.

Think of it as pass-by-reference if you're from the C/C++ world.

However, unlike pass-by-reference, the 'version' from the calling context is no longer available once transferred to the new context.

For example, when transferring an ArrayBuffer from your main app to Worker, the original <k>ArrayBuffer</k> is cleared and no longer usable.

Its contents are (quiet literally) transferred to the Worker context.
To use transferrable objects, use a slightly different signature of <k>postMessage()</k>:
worker.postMessage(arrayBuffer, [arrayBuffer]);
window.postMessage(arrayBuffer, targetOrigin, [arrayBuffer]);
The worker case, the first argument is the data and the second is the list of items that should be transferred.

The first argument doesn't have to be an <k>ArrayBuffer</k> by the way.

For example, it can be a JSON object:
worker.postMessage({data: int8View, moreData: anotherBuffer},
[int8View.buffer, anotherBuffer]);
The important point being: the second argument must be an array of <k>ArrayBuffer</k>s.
This is your list of transferrable items.
To see the speed improvement of transferrables, check out this <a href="http://html5-demos.appspot.com/static/workers/transferables/index.html">DEMO</a>.

For more information on transferrables, see our <a href="http://updates.html5rocks.com/2011/12/Transferable-Objects-Lightning-Fast">HTML5Rock post</a>.
<h3> - The Worker Environment</h3>
<h3>Worker Scope</h3>
In the context of a worker, both <k>self</k> and <k>this</k> reference the global scope for the worker.

Thus, the previous example could also be written as:
addEventListener('message', function(e) {
var data = e.data;
switch (data.cmd) {
case 'start':
postMessage('WORKER STARTED: ' + data.msg);
break;
case 'stop':
...
}, false);
Alternatively, you could set the <k>onmessage</k> event handler directly
(though <k>addEventListener</k> is always encouraged by JavaScript ninjas).
onmessage = function(e) {
var data = e.data;
...
};
<h3>Features Available to Workers</h3>
Due to their multi-threaded behavior, web workers only has access to a subset of JavaScript's features:
The <k>navigator</k> object
The <k>location</k> object (read-only)
<k>XMLHttpRequest</k>
<k>setTimeout()/clearTimeout()</k> and <k>setInterval()/clearInterval()</k>
The <a href="/tutorials/appcache/beginner/">Application Cache</a>
Importing external scripts using the <k>importScripts()</k> method
<a href="#toc-enviornment-subworkers">Spawning other web workers</a>
Workers do NOT have access to:
The DOM (it's not thread-safe)
The <k>window</k> object
The <k>document</k> object
The <k>parent</k> object
<h3>Loading External Scripts</h3>
You can load external script files or libraries into a worker with the <k>importScripts()</k> function.

The method takes zero or more strings representing the filenames for the resources to import.
This example loads <k>script1.js</k> and <k>script2.js</k> into the worker:
worker.js:
importScripts('script1.js');
importScripts('script2.js');
Which can also be written as a single import statement:
importScripts('script1.js', 'script2.js');
<h3>Subworkers</h3>
Workers have the ability to spawn child workers.

This is great for further breaking up large tasks at runtime.

However, subworkers come with a few caveats:
Subworkers must be hosted within the same origin as the parent page.

URIs within subworkers are resolved relative to their parent worker's location (as opposed to the main page).
Keep in mind most browsers spawn separate processes for each worker.

Before you go spawning a worker farm, be cautious about hogging too many of the user's system resources.

One reason for this is that messages passed between main pages and workers are copied, not shared.

See <a href="#toc-gettingstarted-workercomm">Communicating with a Worker via Message Passing</a>.
For an sample of how to spawn a subworker, see <a href="http://www.whatwg.org/specs/web-workers/current-work/#delegation">the example</a> in the specification.
<h3> - Inline Workers</h3>
What if you want to create your worker script on the fly, or create a self-contained page without having to create separate worker files? With <k>Blob()</k>, you can "inline" your worker in the same HTML file as your main logic by creating a URL handle to the worker code as a string:
var blob = new Blob([
"onmessage = function(e) { postMessage('msg from worker'); }"]);
// Obtain a blob URL reference to our worker 'file'.
var blobURL = window.URL.createObjectURL(blob);
var worker = new Worker(blobURL);
worker.onmessage = function(e) {
// e.data == 'msg from worker'
};
worker.postMessage(); // Start the worker.
<h3>Blob URLs</h3>
The magic comes with the call to .
This method creates a simple URL string which can be used to reference data stored in a
DOM <k>File</k> or <k>Blob</k> object.

For example:
blob:http://localhost/c745ef73-ece9-46da-8f66-ebes574789b1
Blob URLs are unique and last for the lifetime of your application (e.g.

until the <k>document</k> is unloaded).

If you're creating many Blob URLs, it's a good idea to release references that are no longer needed.

You can explicitly release a Blob URLs by passing it to :
window.URL.revokeObjectURL(blobURL);
In Chrome, there's a nice page to view all of the created blob URLs: <k>chrome://blob-internals/</k>.
<h3>Full Example</h3>
Taking this one step further, we can get clever with how the worker's JS code is inlined in our page.

This technique uses a <k>&lt;script></k> tag to define the worker:
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;meta charset="utf-8" />
&lt;/head>
&lt;body>
&lt;div id="log">&lt;/div>
&lt;script id="worker1" type="javascript/worker">
// This script won't be parsed by JS engines
// because its type is javascript/worker.
self.onmessage = function(e) {
self.postMessage('msg from worker');
};
// Rest of your worker code goes here.
&lt;/script>
&lt;script>
function log(msg) {
// Use a fragment: browser will only render/reflow once.
var fragment = document.createDocumentFragment();
fragment.appendChild(document.createTextNode(msg));
fragment.appendChild(document.createElement('br'));
document.querySelector("#log").appendChild(fragment);
}
var blob = new Blob([document.querySelector('#worker1').textContent]);
var worker = new Worker(window.URL.createObjectURL(blob));
worker.onmessage = function(e) {
log("Received: " + e.data);
}
worker.postMessage(); // Start the worker.
&lt;/script>
&lt;/body>
&lt;/html>
In my opinion, this new approach is a bit cleaner and more legible.
It defines a script tag with <var>id="worker1"</var> and <var>type='javascript/worker'</var> (so the browser doesn't parse the JS).

That code is extracted as a string using <k>document.querySelector('#worker1').textContent</k> and passed to <k>Blob()</k> to create the file.
<h3>Loading External Scripts</h3>
When using these techniques to inline your worker code, <k>importScripts()</k> will only work if you supply an absolute URI.

If you attempt to pass a relative URI, the browser will complain with a security error.

The reason being: the worker (now created from a blob URL) will be resolved with a <k>blob:</k> prefix, while your app will be running from a different (presumably <k>http://</k>) scheme.

Hence, the failure will be due to cross origin restrictions.
One way to utilize <k>importScripts()</k> in an inline worker is to "inject" the current url of your main script is running from by passing it to the inline worker and constructing the absolute URL manually.

This will insure the external script is imported from the same origin.

Assuming your main app is running from http://example.com/index.html:
...
&lt;script id="worker2" type="javascript/worker">
self.onmessage = function(e) {
var data = e.data;
if (data.url) {
var url = data.url.href;
var index = url.indexOf('index.html');
if (index != -1) {
url = url.substring(0, index);
}
importScripts(url + 'engine.js');
}
...
};
&lt;/script>
&lt;script>
var worker = new Worker(window.URL.createObjectURL(bb.getBlob()));
worker.postMessage(<b>{url: document.location}</b>);
&lt;/script>
<h3> - Handling Errors</h3>
As with any JavaScript logic, you'll want to handle any errors that are thrown in your web workers.
If an error occurs while a worker is executing, the an <k>ErrorEvent</k> is fired.

The interface contains three useful properties for figuring out what went wrong: <k>filename</k> - the name of the worker script that caused the error, <k>lineno</k> - the line number where the error occurred, and <k>message</k> - a meaningful description of the error.

Here is an example of setting up an <k>onerror</k> event handler to print the properties of the error:
&lt;output id="error" style="color: red;">&lt;/output>
&lt;output id="result">&lt;/output>
&lt;script>
function onError(e) {
document.getElementById('error').textContent = [
'ERROR: Line ', e.lineno, ' in ', e.filename, ': ', e.message
].join('');
}
function onMsg(e) {
document.getElementById('result').textContent = e.data;
}
var worker = new Worker('workerWithError.js');
worker.addEventListener('message', onMsg, false);
worker.addEventListener('error', onError, false);
worker.postMessage(); // Start worker without a message.
&lt;/script>
<strong>Example</strong>: workerWithError.js tries to perform 1/x, where x is undefined.
workerWithError.js:
self.addEventListener('message', function(e) {
postMessage(1/x); // Intentional error.
};
<h3> - A Word on Security</h3>
<h3>Restrictions with Local Access</h3>
Due to Google Chrome's security restrictions, workers will not run locally (e.g.

from <k>file://</k>) in the latest versions of the browser.

Instead, they fail silently!  To run your app from the <k>file://</k> scheme, run Chrome with the <k>--allow-file-access-from-files</k> flag set.

<strong>NOTE</strong>: It is not recommended to run your primary browser with this flag set.

It should only be used for testing purposes and not regular browsing.
Other browsers do not impose the same restriction.
<h3>Same Origin Considerations</h3>
Worker scripts must be external files with the same scheme as their calling page.

Thus, you cannot load a script from a <k>data:</k> URL or <k>javascript:</k> URL, and an <k>https:</k> page cannot start worker scripts that begin with <k>http:</k> URLs.
<h3> - Use Cases</h3>
So what kind app would utilize web workers? Unfortunately, web workers are still relatively new and the majority of samples/tutorials out there involve computing prime numbers.

Although that isn't very interesting, it's useful for understanding the concepts of web workers.

Here are a few more ideas to get your brain churning:
Prefetching and/or caching data for later use
Code syntax highlighting or other real-time text formatting
Spell checker
Analyzing video or audio data
Background I/O or polling of webservices
Processing large arrays or humungous JSON responses
Image filtering in &lt;canvas>
Updating many rows of a local web database
<h3> - Demos</h3>
Example from <a href="http://slides.html5rocks.com/#web-workers">HTML5Rocks slides</a>
<a href="http://htmlfive.appspot.com/static/tracker1.html">Motion tracker</a>
<a href="http://people.mozilla.com/~prouget/demos/worker_and_simulatedannealing/index.xhtml">Simulated Annealing</a>
<a href="http://html5demos.com/worker">HTML5demos sample</a>
<h3> - References</h3>
<a href="http://www.whatwg.org/specs/web-workers/current-work/">Web Workers</a> specification
<a href="http://developer.mozilla.org/en/Using_web_workers">"Using web workers"</a> from Mozilla Developer Network
<a href="http://dev.opera.com/articles/view/web-workers-rise-up/">"Web Workers rise up!"</a> from Dev.Opera
<h2>open multiple pages</h2>
var locs = [
"url1",
"url2",
]
function multipages() {
for (let i = 0; i < locs.length; i++) {
window.open(locs[i])
}
}
<h2>onmouseover focus and select</h2>
&lt;input type="text" autocomplete="off" name="q" id="query" onmouseover="this.focus()" onfocus="this.select()" value="">
<h2>disable web page certain functions</h2>
jQuery(document).bind("keydown", function(e) {
if(e.ctrlKey && (e.which == 44 || e.which == 65 || e.which == 67 || e.which == 73 || e.which == 75 || e.which == 80 || e.which == 88 || e.which == 83 ||e.which == 85)) {
e.preventDefault(); return false; }
jQuery(document).on( "mousedown", function(event) { if(event.which=="3") 
{ document.oncontextmenu = document.body.oncontextmenu = function() {return false;} } });
<h2>change element attribute</h2>
$("body").on("mouseup", ".unitListItem, .unitHeading", function() {
var tab_names = $(this).html().split(",");
// change element attribute
if ($(this).attr("class") == "unitListItem") {
var tab_id = $(this).attr("id");
$(".unitListItem").each(function() {
if ($(this).attr("id") != tab_id) {
for (tab_name of tab_names) {
if ($(this).html().indexOf(tab_name.trim()) >= 0) {
$(this).trigger('click');
}
}
}
});
}
else if ($(this).attr("class") == "tabtitle unitHeading") {
var tab_id = $(this).next().attr("id");
$(".unitHeading").each(function() {
if ($(this).next().attr("id") != tab_id) {
for (tab_name of tab_names) {
if ($(this).html().indexOf(tab_name.trim()) >= 0) {
$(this).trigger('click');
}
}
}
});
}
});
<h2>turn on/off certain tab and take action</h2>
&lt;button class="tabbut" 
onclick="openTab('lastrec');
document.getElementById('reqLastRec').submit()" >Last Rec&lt;/button>
// turn off actionBox
$('.actionBox').css('display', 'none');
<h2>Array map() Method</h2>
creates a new array by calling a function on each element.
var LongList = ['600004', '600007', '600008', '600009', '600010'];
function toACode(thecode) {if (thecode[0]=="6"){ thecode = thecode+".sh" }else { thecode = thecode+".sz" }return(thecode);
}
newList = LongList.map(item => toACode(item));
find object names:
var thisObj = [ { name: 'someName1' }, { name: 'someName2' },
{ name: 'someName4' }, { name: 'someName2' }
];
var objNames = thisObj.map(item => item.name);
<h3>Index inside map() function</h3>
get the current iteration's index through 2nd parameter.
Example:
var list = [ 'h', 'e', 'l', 'l', 'o'];
list.map((currElement, index) => { console.log(index, currElement); });
Other arguments of Array.prototype.map():
For example:
const array = [1, 2, 3, 4];
const thisObj = { prop1: 1 }
const map = array.map((x, index, array) => {
console.log(array);
console.log(this)
}, thisObj);
Syntax
array.map(function(currentValue, index, arr), thisValue)
<b>Parameters</b>b>
function()	Required.
A function to be run for each array element.
currentValue	Required.
The value of the current element.
index	Optional.
The index of the current element.
arr	Optional.
The array of the current element.
thisValue	Optional.
Default value undefined.
A value passed to the function to be used as its this value.
<b>example</b> to find difference from prev value
arr = [1,2,3,2,4,5,6,4,3,2]
arr.slice(1).map(function(n, i) { return n - arr[i]; })
[1, 1, -1, 2, 1, 1, -2, -1, -1]
<b>example</b> to find difference from two arrays
// arr - arr1
var x = arr.map(function(item, index) { return item - arr1[index]; })
console.log(x)
<h2>Javascript right click</h2>
1.

window.oncontextmenu = function ()
{ showCustomMenu(); return false;     // cancel default menu }
2.

window.oncontextmenu = function () { alert('Right Click') }
// the context menu will still come up
// add return false; to stop context menu comes up
3.

use mousedown
$("img").mousedown(function(ev){
if(ev.which == 1) { alert("Left mouse button clicked on myId"); }
if(ev.which == 2) { alert("Middle mouse button clicked on myId"); }
if(ev.which == 3) { alert("Right mouse button clicked on myId"); }
});
The value of which will be:
1 for the left button
2 for the middle button
3 for the right button
4.

&lt;div oncontextmenu="javascript:alert('success!');return false;">
Lorem Ipsum
&lt;/div>
onClick is not triggered through right click.
right click only trigger onMouseDown onMouseUp and onContextMenu.
So "onContextMenu" is the right click event.
&lt;div oncontextmenu="myFunction()">
function myFunction() {  alert("You right-clicked inside the div!");}
A context menu is a menu in a GUI that appears upon user interaction, such as a right-click mouse operation.

A context menu offers a limited set of choices that are available in the current state, or context, of the operating system or application.

Usually the available choices are actions related to the selected object.
<h2>create a clickable dropdown menu</h2>
&lt;div class="dropdown">
&lt;button onclick="myFunction()">Dropdown&lt;/button>
&lt;div id="myDropdown" class="dropdown-content">
&lt;a href="#home">Home&lt;/a>
&lt;a href="#about">About&lt;/a>
&lt;a href="#contact">Contact&lt;/a>
&lt;/div>
&lt;/div>
/* When the user clicks on the button, 
toggle between hiding and showing the dropdown content */
function myFunction() {
document.getElementById("myDropdown").classList.toggle("show");
}
// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
if (!event.target.matches('.dropbtn')) {
var dropdowns = document.getElementsByClassName("dropdown-content");
var i;
for (i = 0; i &lt; dropdowns.length; i++) {
var openDropdown = dropdowns[i];
if (openDropdown.classList.contains('show')) {
openDropdown.classList.remove('show');
}
}
}
}
<a href="https://stackoverflow.com/questions/11145681/how-to-convert-a-string-with-unicode-encoding-to-a-string-of-letters" class="whitebut ">convert unicode encoding to string</a>
Technically doing:
String myString = "\u0048\u0065\u006C\u006C\u006F World";
In order to convert it to "Hello" you'll have to parse the text into the separate unicode digits, (take the \uXXXX and just get XXXX)
then do Integer.ParseInt(XXXX, 16) to get a hex value and then case that to char to get the actual character.
Some code to accomplish this:
String str = myString.split(" ")[0];
str = str.replace("\\","");
String[] arr = str.split("u");
String text = "";
for(int i = 1; i < arr.length; i++){
int hexVal = Integer.parseInt(arr[i], 16);
text += (char)hexVal;
}
// Text will now have Hello
<h2>Swap rows with columns of a matrix</h2>
function transpose(a) {
return Object.keys(a[0]).map(function(c) {
return a.map(function(r) { return r[c]; });
});
}
console.log(transpose([
[1,2,3],
[4,5,6],
[7,8,9]
]));
transpose = m => m[0].map((x,i) => m.map(x => x[i]))
<h2>convert Multi-Dimensional Array to HTML Table</h2>
&lt;table id="mytab">&lt;/table>
var mytab = $('#mytab');
myArr = [
[1,2,3],
[4,5,6],
[7,8,9]
]
for (var row=0; row &lt; myArr.length; row++) {
rowItem = $( '&lt;tr>' );
mytab.append( rowItem );
for (var col=0; col &lt; myArr[row].length; col++) {
cell = $('&lt;td>' + $(myArr[row])[col] + '&lt;/td>')
rowItem.append( cell );
}
}
<h2>calculate wAve trend range</h2>
transp = transpose(thedrawdata);
var mytab = $('#mytab'); // this is the element to show result
rowItem = $( '&lt;tr>' );
mytab.append( rowItem );
for (var row=(transp.length-12); row &lt; transp.length; row++) {
rowRange = transp[row].slice(3, 8);
	    rowMax = Math.max(...rowRange);
	    rowMin = Math.min(...rowRange);
	    rowDiff = rowMax - rowMin;
	    //cell = $('&lt;td>' + (Math.round(rowMax*1000)/1000) + '&lt;/td>')
	    //rowItem.append( cell );
	    //cell = $('&lt;td>' + (Math.round(rowMin*1000)/1000) + '&lt;/td>')
	    //rowItem.append( cell );
	    cell = $('&lt;td>' + (Math.round(rowDiff*1000)/1000) + '&lt;/td>')
	    rowItem.append( cell );
}
<h2>Find difference between consecutive numbers in array</h2>
Use Array methods and Arrow functions:
var visitsArr = [38,29,18,29,28,18,24];
var diffs = visitsArr.slice(1).map((x,i)=> x-visitsArr[i]);
diffs.forEach((x,i) => console.log(
`Visits from day ${i+1} to day ${i+2} increased by ${x}`
));
or
function diff(visitsArr) {
return visitsArr.slice(1).map(function(n, i) { return n - visitsArr[i]; });
}
The estimate is ((yi+1)−(yi−1))/((xi+1)−(xi−1)).

This is just the slope between the (i−1)-th point and the the (i+1)-th point.
<h2>sorttable: Make tables sortable</a></h2>
<a href="https://kryogenix.org/code/browser/sorttable/" class="whitebut ">sorttable: Make tables sortable</a>
three steps:
Download the Javascript library
Include the Javascript library, 
&lt;script src="sorttable.js">&lt;/script>
Give your table a class of "sortable":
&lt;table class="sortable">
Note that the library's JavaScript file is called sorttable (two Ts), but the class you add to the table is sortable (one T).
<h2>Convert array of numbers to string</h2>
arr.map(String)
<h2>add comments to stks chart by loading script with json data</h2>
load json data from external js file
by script src = stkComments.js
myjs.js var theCommentList = {item1: "some", item2: "other"}
<h2>Click to toggle block of message</h2>
&lt;div onclick="myFunction()">Click to toggle appearTab!
&lt;span id="myappearTab">A Simple appearTab!&lt;/span>
&lt;/div>
&lt;script>
// When the user clicks on div, open the appearTab
function myFunction() {
var appearTab = document.getElementById("myappearTab");
appearTab.classList.toggle("show");
}
&lt;/script>
or onclick load script to show data
<h2>Access nested data structures</h2>
const data = { code: 42, 
items: [{ id: 1, name: 'foo' }, { id: 2, name: 'bar' }]
};
to access the name of the second item.
data.items      // data is an object, use dot
data.items[1]   // The value is an array, use bracket
data.items[1].name  // This value is an object, use dot
data['items'][1]['name'];  //or use all brackets
<h2>the rest parameter syntax ...</h2>
sum = (...args) => { console.log(args.length + " arguments");}
sum(1,2,3,3,2,1); //6 arguments
<h2>find repeating names in array of object</h2>
thisObj =[{name:'name1'},{name:'name2'},{name:'name4'},{name:'name2'}];
objNames = thisObj.map(item => item.name);
objNames.filter((item, idx)=> objNames.indexOf(item) != idx ) // name2
unable to find repeating names in objects because Object.keys(thisObj) removes duplicates autoamtically
use R instead to tackle
<h2>currying function</h2>
<a href="https://www.codementor.io/muhammadkasim/currying-in-js-woivjbf1s?utm_swu=7179">Currying in JS</a>
<br>
<a href="https://www.jstips.co/en/javascript/curry-vs-partial-application/">Currying vs partial application</a>
Currying and partial application are two ways of transforming a function into another function with a generally smaller arity.
currying function
currying 又称部分求值，currying 函数会接收一些参数，然后不会立即求值，而是继续返回一个新函数，将传入的参数通过闭包的形式保存，等到被真正求值的时候，再一次性把所有传入的参数进行求值。
// 普通函数
function add(x,y){ return x + y;}
add(1 , 2); // 3
// 函数currying 
var add = function (x) { return function (y) { return x + y;};};
var increment = add(1);
increment(2); // 3
这里我们定义了一个 add 函数，它接受一个参数并返回一个新的函数。
调用 add 之后，返回的函数就通过闭包的方式记住了 add 的第一个参数。
那么，我们如何来实现一个简易的currying 函数呢？
function curryIt(fn) { // 参数fn函数的参数个数
var n = fn.length;
var args = [];
return function (arg) {
args.push(arg);
if (args.length &lt; n) {
return arguments.callee; // 返回这个函数的引用 }
else {  return fn.apply(this , args); }
};
}
function add(a, b, c) { return [a, b, c];}
var c = curryIt(add);
var c1 = c(1);
var c2 = c1(2);
var c3 = c2(3);
console.log(c3); //[1, 2, 3]
由此我们可以看出，currying 是一种“预加载”函数的方法，通过传递较少的参数，得到一个已经记住了这些参数的新函数，某种意义上讲，这是一种对参数的“缓存”，是一种非常高效的编写函数的方法！
add = (x, y) => x + y
add(2, 3) //=> 5
currying function
add = x => y => x + y
same code without arrow functions
add = function (x) {
return function (y) {
return x + y
}
}
In other words add of some number returns a function
<h2>The reduce() method</h2>
The reduce() method reduces the array to a single value.
It executes a provided function for each value of the array (from left-to-right).
The return value of the function is stored in an accumulator (result/total).
arr.reduce(callback, initialValue);
Note: reduce() does not execute the function for array elements without values.
Note: this method does not change the original array.
Subtract the numbers in the array, starting from the left:
var numbers = [175, 50, 25];
function myFunc(total, num) { return total - num; }
numbers.reduce(myFunc); // 100
var numbers = [15.5, 2.3, 1.1, 4.7];
function getSum(total, num) { return total + Math.round(num); }
numbers.reduce(getSum, 0); // 24
The reducer function takes four arguments:
arr.reduce(callback( accumulator, currentValue[, index[, array]] )[, initialValue])
Accumulator (acc)
Current Value (cur)
Current Index (idx)
Source Array (src)
Samples
var data = [29.76, 41.85, 46.5]; 
var sum = data.reduce( (total, amount)=>{ return total + amount }); 
sum // 118.11
Find the Maximum Value
dates.reduce((max, d) => d > max ? d : max, dates[0]);
Suppose you have an array of async functions that you want to execute in series.
There is a non-standard promise.series function for this, but you can also do this with reduce().
const functions = [
async function() { return 1; },
async function() { return 2; },
async function() { return 3; }
];
// Chain the function calls in order, starting with an empty promise.
// In the end, `res` is equivalent to
// `Promise.resolve().then(fn1).then(fn2).then(fn3)`
const res = await functions.
reduce((promise, fn) => promise.then(fn), Promise.resolve());
res; // 3
Sum of values in an object array
let initialValue = 0
let sum = [{x: 1}, {x: 2}, {x: 3}].reduce(
(accumulator, currentValue) => accumulator + currentValue.x
, initialValue
)
console.log(sum) // logs 6
Flatten an array of arrays
let flattened = [[0, 1], [2, 3], [4, 5]].reduce(
( accumulator, currentValue ) => accumulator.concat(currentValue),
[]
)
Counting instances of values in an object
let names = ['Alice', 'Bob', 'Tiff', 'Bruce', 'Alice']
let countedNames = names.reduce(function (allNames, name) { 
if (name in allNames) {
allNames[name]++
}
else {
allNames[name] = 1
}
return allNames
}, {})
// countedNames is:
// { 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 }
Grouping objects by a property
let people = [
{ name: 'Alice', age: 21 },
{ name: 'Max', age: 20 },
{ name: 'Jane', age: 20 }
];
function groupBy(objectArray, property) {
return objectArray.reduce(function (acc, obj) {
let key = obj[property]
if (!acc[key]) {
acc[key] = []
}
acc[key].push(obj)
return acc
}, {})
}
let groupedPeople = groupBy(people, 'age')
// groupedPeople is:
// { 
//   20: [
//     { name: 'Max', age: 20 }, 
//     { name: 'Jane', age: 20 }
//   ], 
//   21: [{ name: 'Alice', age: 21 }] 
// }
Bonding arrays contained in an array of objects using the spread operator and initialValue
// friends - an array of objects 
// where object field "books" is a list of favorite books 
let friends = [{
name: 'Anna',
books: ['Bible', 'Harry Potter'],
age: 21
}, {
name: 'Bob',
books: ['War and peace', 'Romeo and Juliet'],
age: 26
}, {
name: 'Alice',
books: ['The Lord of the Rings', 'The Shining'],
age: 18
}]
// allbooks - list which will contain all friends' books +  
// additional list contained in initialValue
let allbooks = friends.reduce(function(accumulator, currentValue) {
return [...accumulator, ...currentValue.books]
}, ['Alphabet'])
// allbooks = [
//   'Alphabet', 'Bible', 'Harry Potter', 'War and peace', 
//   'Romeo and Juliet', 'The Lord of the Rings',
//   'The Shining'
// ]
Remove duplicate items in an array
let myArray = ['a', 'b', 'a', 'b', 'c', 'e', 'e', 'c', 'd', 'd', 'd', 'd']
let myOrderedArray = myArray.reduce(function (accumulator, currentValue) {
if (accumulator.indexOf(currentValue) === -1) {
accumulator.push(currentValue)
}
return accumulator
}, [])
console.log(myOrderedArray)
Replace .filter().map() with .reduce()
Using Array.filter() then Array.map() traverses the array twice, but you can achieve the same effect while traversing only once with Array.reduce(), thereby being more efficient.

(If you like for loops, you can filter and map while traversing once with Array.forEach()).
const numbers = [-5, 6, 2, 0,];
const doubledPositiveNumbers = numbers.reduce((accumulator, currentValue) => {
if (currentValue > 0) {
const doubled = currentValue * 2;
accumulator.push(doubled);
}
return accumulator;
}, []);
console.log(doubledPositiveNumbers); // [12, 4]
Running Promises in Sequence
/**
* Runs promises from array of functions that can return promises
* in chained manner
*
* @param {array} arr - promise arr
* @return {Object} promise object
*/
function runPromiseInSequence(arr, input) {
return arr.reduce(
(promiseChain, currentFunction) => promiseChain.then(currentFunction),
Promise.resolve(input)
)
}
// promise function 1
function p1(a) {
return new Promise((resolve, reject) => {
resolve(a * 5)
})
}
// promise function 2
function p2(a) {
return new Promise((resolve, reject) => {
resolve(a * 2)
})
}
// function 3  - will be wrapped in a resolved promise by .then()
function f3(a) {
return a * 3
}
// promise function 4
function p4(a) {
return new Promise((resolve, reject) => {
resolve(a * 4)
})
}
const promiseArr = [p1, p2, f3, p4]
runPromiseInSequence(promiseArr, 10)
.then(console.log)   // 1200
Function composition enabling piping
// Building-blocks to use for composition
const double = x => x + x
const triple = x => 3 * x
const quadruple = x => 4 * x
// Function composition enabling pipe functionality
const pipe = (...functions) => input => functions.reduce(
(acc, fn) => fn(acc),
input
)
// Composed functions for multiplication of specific values
const multiply6 = pipe(double, triple)
const multiply9 = pipe(triple, triple)
const multiply16 = pipe(quadruple, quadruple)
const multiply24 = pipe(double, triple, quadruple)
// Usage
multiply6(6)   // 36
multiply9(9)   // 81
multiply16(16) // 256
multiply24(10) // 240
Write map using reduce
if (!Array.prototype.mapUsingReduce) {
Array.prototype.mapUsingReduce = function(callback, thisArg) {
return this.reduce(function(mappedArray, currentValue, index, array) {
mappedArray[index] = callback.call(thisArg, currentValue, index, array)
return mappedArray
}, [])
}
}
[1, 2, , 3].mapUsingReduce(
(currentValue, index, array) => currentValue + index + array.length
) // [5, 7, , 10]
<h2>map() Method</h2>
The map() method calls the provided function once for each element in an array, in order.
Return an array with the square root of all the values in the original array:
var numbers = [4, 9, 16, 25];
numbers.map(Math.sqrt)
Multiply all the values in array with 10:
var numbers = [65, 44, 12, 4];
function myFunction(num) { return num * 10; }
numbers.map(myFunction)
Get the full name for each person in the array:
var persons = [
{firstname : "Malcom", lastname: "Reynolds"},
{firstname : "Kaylee", lastname: "Frye"},
{firstname : "Jayne", lastname: "Cobb"}
];
function getFullName(item) {
var fullname = [item.firstname, item.lastname].join(" ");
return fullname;
}
persons.map(getFullName);
<h2>filter() Method</h2>
The filter() method creates an array
filled with all array elements that pass a test (provided as a function).
Note: filter() does not execute the function for array elements without values.
Note: filter() does not change the original array.
Return an array of all the values in the ages array that are 18 or over:
var ages = [32, 33, 16, 40];
function checkAdult(age) { return age >= 18; }
ages.filter(checkAdult);
Return an array of all the values in the ages over 20:
var ages = [32, 33, 12, 40];
function checkAdult(age) { return age >= 20; }
ages.filter(checkAdult);
<h2>forEach loop</h2>
<br>
<br>
<div id="forEachmisunderstandingtoc" class="toc"><a href="#forEachmisunderstandingtopic-0" target="_self">什么是forEach？
</a><br><a href="#forEachmisunderstandingtopic-1" target="_self">1、forEach() 方法不支持处理异步函数</a><br><a href="#forEachmisunderstandingtopic-2" target="_self">2、异步函数中的错误无法被捕获</a><br><a href="#forEachmisunderstandingtopic-3" target="_self">3、无法中断或跳过forEach循环</a><br><a href="#forEachmisunderstandingtopic-4" target="_self">4、无法删除自身元素并重置索引</a><br><a href="#forEachmisunderstandingtopic-5" target="_self"> 更好的解决方案：使用for循环</a><br><a href="#forEachmisunderstandingtopic-6" target="_self">5、this 关键字的作用域问题</a><br><a href="#forEachmisunderstandingtopic-7" target="_self">6、forEach 的性能低于 for 循环</a><br><a href="#forEachmisunderstandingtopic-8" target="_self">7、跳过已删除或未初始化的项</a><br><a href="#forEachmisunderstandingtopic-9" target="_self">8、不会改变原数组</a><br><a href="#forEachmisunderstandingtopic-10" target="_self">解决方案：通过索引改变数组中的对象</a><br><a href="#forEachmisunderstandingtopic-11" target="_self">结束</a><br></div></center>
var myArray = ['a', 'b', 'c', 'd', 'e'];
using For loop to call a function
for (var i = 0; i < myArray.length; i++) {
currentLetter(myArray[i]);  
}
function currentLetter(letter) {
console.log('The current letter is: ' + letter);
}
using forEach loop with a function
myArray.forEach(function(value) {
console.log('The current letter is: ' + value;
});
using the high order function
myArray.forEach(currentLetter);
forEach is an Array method that we can use to execute a function on each element in an array.
It can only be used on Arrays, Maps, and Sets.
arr = ['cat', 'dog', 'fish'];
arr.forEach(element => { console.log(element); });
// cat
// dog
// fish
arr = [5,4,8,7];
arr.forEach(function(item,index,arr) {
console.log("item: " + item + " at index: " + index + " in the array: " + arr);
})
<h3 id="forEachmisunderstandingtopic-0">什么是forEach？
</h3>
forEach是我们常用的数组遍历方法之一。
在处理异步操作时，forEach可能会让你掉进一些意想不到的“坑”。
forEach 为数组中的每个元素执行一次给定的回调函数，并且总是返回undefined。
不过需要注意的是，类似arguments这样的类数组对象是没有forEach方法的哦。
<h4>基本语法</h4>
arr.forEach(callback(currentValue [, index [, array]])[, thisArg])
<h4>参数详解</h4>
callback：对每个元素执行的回调函数，它可以接受1到3个参数。
currentValue：当前处理的元素，必选。
index：当前处理元素的索引，可选。
array：正在操作的原数组对象，可选。
thisArg：执行回调函数时this的值，默认为全局对象，可选。
<h3 id="forEachmisunderstandingtopic-1">1、forEach() 方法不支持处理异步函数</h3>
forEach() 是一个同步方法，不支持处理异步函数。
如果你在 forEach 中执行一个异步函数，forEach 不会等待异步函数完成，而是会立即处理下一个元素。
这意味着如果你在 forEach 中使用异步函数，异步任务的执行顺序是无法保证的。
<h4>示例代码</h4>
async function test() {
let arr = [3, 2, 1];
arr.forEach(async item => {
const res = await mockAsync(item);
console.log(res);
});
console.log('end');
}
function mockAsync(x) {
return new Promise((resolve, reject) => {
setTimeout(() => {
resolve(x);
}, 1000 * x);
});
}
test();
预期结果：
3
2
1
end
实际结果：
end
1
2
3
这个例子中，虽然我们希望按顺序输出 3, 2, 1 和 end，但实际结果是 end 先输出，然后才是 1, 2, 3。
这是因为 forEach 不等待异步操作完成。
<h4>解决方法：使用 for...of 循环和 async/await</h4>
为了解决这个问题，我们可以使用 for...of 循环和 async/await 关键字来确保异步操作按顺序完成。
<h4>示例代码</h4>
async function test() {
  let arr = [3, 2, 1];
  for (let item of arr) {
    const res = await mockAsync(item);
    console.log(res);
  }
  console.log('end');
}

function mockAsync(x) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
    resolve(x);
    }, 1000 * x);
  });
}

test();
输出结果：
3
2
1
end
在这个例子中，我们使用 for...of 循环代替 forEach 方法，通过在循环内部使用 await 关键字，确保每个异步操作完成后才处理下一个元素，从而实现了按顺序输出。
<h3 id="forEachmisunderstandingtopic-2">2、异步函数中的错误无法被捕获</h3>
除了不能处理异步函数外，forEach还有另一个重要的限制：它无法捕获异步函数中的错误。
这意味着即使异步函数在执行过程中抛出错误，forEach 仍然会继续进行下一个元素的处理，而不会对错误进行处理。
这种行为可能会导致程序出现意外的错误和不稳定性。
<h3 id="forEachmisunderstandingtopic-3">3、无法中断或跳过forEach循环</h3>
除了无法处理异步函数和捕获错误之外，forEach还有一个限制：它不支持使用break或continue语句来中断或跳过循环。
如果你需要在循环中途退出或跳过某个元素，应该使用其他支持这些语句的方法，例如for循环。
<h4>示例代码</h4>
let arr = [1, 2, 3];
try {
arr.forEach(item => {
if (item === 2) {
throw('error');
}
console.log(item);
});
} catch(e) {
console.log('e:', e);
}
// 输出结果:
// 1
// e: error
在这个例子中，我们尝试通过抛出异常来中断forEach循环。
虽然这种方法在某些情况下有效，但并不是优雅或推荐的做法。
<h4>更好的解决方案：使用 for...of 循环</h4>
相比之下，for...of  循环更灵活，可以使用 break 和 continue 语句来控制循环的执行。
<h4>示例代码</h4>
let arr = [1, 2, 3];
for (let item of arr) {
if (item === 2) {
break; // 中断循环
}
console.log(item);
}
// 输出结果:
// 1
在这个例子中，当遇到元素2时，循环会被中断，从而避免输出2和3。
<h3 id="forEachmisunderstandingtopic-4">4、无法删除自身元素并重置索引</h3>
在forEach中，我们无法控制索引的值，它只是盲目地递增直到超过数组的长度并退出循环。
因此，删除自身元素以重置索引也是不可能的。
来看一个简单的例子：
<h4>示例代码</h4>
let arr = [1, 2, 3, 4];
arr.forEach((item, index) => {
console.log(item); // 输出: 1 2 3 4
index++;
});
在这个例子中，forEach遍历数组 arr，输出每个元素的值。
虽然我们尝试在循环内部递增 index，但这并不会影响forEach的内部机制。
forEach中的索引是自动管理的，并且在每次迭代时都会自动递增。
<h4>为什么无法删除元素并重置索引？
</h4>
在forEach中，索引的值是由forEach方法内部控制的。
即使我们手动修改索引变量，也不会影响forEach的遍历行为。
更具体地说，当我们试图在 forEach 内部删除元素时，forEach 不会重新计算索引，这会导致一些元素被跳过，或者某些情况下出现未定义的行为。
例如，如果我们尝试删除当前元素：
<h4>错误示范</h4>
let arr = [1, 2, 3, 4];
arr.forEach((item, index) => {
if (item === 2) {
arr.splice(index, 1); // 尝试删除元素2
}
console.log(item); // 输出: 1 2 4
});
console.log(arr); // 输出: [1, 3, 4]
在这个例子中，当我们删除元素2时，forEach并不会重置或调整索引，因此它继续处理原数组中的下一个元素。
这导致元素3被跳过，因为原来的元素3现在变成了元素2的位置。
当元素 2 被删除后，原数组变为 [1, 3, 4]，forEach会继续按照原索引顺序进行，因此输出 1, 2, 4，而元素 3 被跳过了。
这是因为元素 3 在 2 被删除后移动到了索引 1 的位置，而forEach的索引已经移动到 2，所以直接输出了删除后的索引 2 位置的新元素 4。
<h3 id="forEachmisunderstandingtopic-5"> 更好的解决方案：使用for循环</h3>
let arr = [1, 2, 3, 4];
for (let i = 0; i &lt; arr.length; i++) {
if (arr[i] === 2) {
arr.splice(i, 1); // 删除元素2
i--; // 调整索引
} else {
console.log(arr[i]); // 输出: 1 3 4
}
}
console.log(arr); // 输出: [1, 3, 4]
<h3 id="forEachmisunderstandingtopic-6">5、this 关键字的作用域问题</h3>
在forEach方法中，this关键字指的是调用该方法的对象。
然而，当我们使用常规函数或箭头函数作为参数时，this关键字的作用域可能会出现问题。
在箭头函数中，this关键字指的是定义该函数的对象；
而在常规函数中，this关键字指的是调用该函数的对象。
为了确保this关键字的正确作用域，我们可以使用bind方法来绑定函数的作用域。
以下是一个说明this关键字作用域问题的例子：
<h4>示例代码</h4>
const obj = {
name: "Alice",
friends: ["Bob", "Charlie", "Dave"],
printFriends: function () {
this.friends.forEach(function (friend) {
console.log(this.name + " is friends with " + friend);
});
},
};
obj.printFriends();
在这个例子中，我们定义了一个名为obj的对象，里面有一个printFriends方法。
我们使用forEach方法遍历friends数组，并使用常规函数来打印每个朋友的名字和obj对象的name属性。
然而，运行这段代码时，输出如下：
undefined is friends with Bob
undefined is friends with Charlie
undefined is friends with Dave
这是因为在forEach方法中使用常规函数时，该函数的作用域不是调用printFriends方法的对象，而是全局作用域。
因此，无法访问obj对象的属性。
<h4>使用bind方法解决</h4>
为了解决这个问题，我们可以使用bind方法来绑定函数的作用域，将其绑定到obj对象。
下面是一个使用bind方法解决问题的例子：
<h4>示例代码</h4>
const obj = {
name: "Alice",
friends: ["Bob", "Charlie", "Dave"],
printFriends: function () {
this.friends.forEach(
function (friend) {
console.log(this.name + " is friends with " + friend);
}.bind(this) // 使用bind方法绑定函数的作用域
);
},
};
obj.printFriends();
运行这段代码，输出如下：
Alice is friends with Bob
Alice is friends with Charlie
Alice is friends with Dave
通过使用bind方法绑定函数的作用域，我们可以正确地访问obj对象的属性。
<h4>使用箭头函数解决</h4>
另一个解决方案是使用箭头函数。
由于箭头函数没有自己的this，它会继承其当前作用域的this。
因此，在箭头函数中，this关键字指的是定义该函数的对象。
<h4>示例代码</h4>
const obj = {
name: "Alice",
friends: ["Bob", "Charlie", "Dave"],
printFriends: function () {
this.friends.forEach((friend) => {
console.log(this.name + " is friends with " + friend);
});
},
};
obj.printFriends();
运行这段代码，输出如下：
Alice is friends with Bob
Alice is friends with Charlie
Alice is friends with Dave
使用箭头函数，我们可以确保this关键字指向正确的对象，从而正确访问对象的属性。
<h3 id="forEachmisunderstandingtopic-7">6、forEach 的性能低于 for 循环</h3>
forEach 方法虽然使用方便，但在性能方面却逊色于传统的 for 循环。
原因在于 forEach 的函数签名包含参数和上下文，使得其性能低于 for 循环。
<h4>为什么 for 循环更快？
</h4>
简单实现：for 循环的实现最为简单，没有额外的函数调用和上下文处理。
减少函数调用栈：forEach 方法每次迭代都会调用一次回调函数，增加了函数调用栈的开销。
上下文处理：forEach 方法需要处理函数的上下文和参数，这些操作都会消耗额外的时间和资源。
<h3 id="forEachmisunderstandingtopic-8">7、跳过已删除或未初始化的项</h3>
forEach方法在遍历数组时会跳过未初始化的值和已删除的值。
这可能会导致一些意想不到的行为。
<h4>跳过未初始化的值</h4>
在数组中，如果某些值未初始化，forEach会直接跳过这些值。
来看下面这个例子：
const array = [1, 2, /* 空 */, 4];
let num = 0;
array.forEach((ele) => {
console.log(ele);
num++;
});
console.log("num:", num);
// 输出结果:
// 1
// 2
// 4
// num: 3
在这个例子中，数组中的第三个元素未初始化，forEach直接跳过了它。
因此，虽然数组的长度是4，但实际被遍历的元素只有3个。
<h4>跳过已删除的值</h4>
当在forEach循环中删除数组元素时，forEach会跳过这些已删除的值。
来看下面这个例子：
const words = ['one', 'two', 'three', 'four'];
words.forEach((word) => {
console.log(word);
if (word === 'two') {
words.shift(); // 删除数组中的第一个元素 'one'
}
});
// 输出结果:
// one
// two
// four
console.log(words); // ['two', 'three', 'four']
在这个例子中，当遍历到元素 'two' 时，执行了 words.shift()，删除了数组中的第一个元素 'one'。
由于数组元素向前移动，元素 'three' 被跳过，forEach 直接处理新的第三个元素 'four'。
<h3 id="forEachmisunderstandingtopic-9">8、不会改变原数组</h3>
当调用forEach方法时，它不会改变原数组，即它被调用的数组。
然而，传递的回调函数可能会改变数组中的对象。
<h4>示例代码1</h4>
const array = [1, 2, 3, 4]; 
array.forEach(ele => { ele = ele * 3 }) 
console.log(array); // [1, 2, 3, 4]
在这个例子中，forEach方法并没有改变原数组。
虽然在回调函数中对每个元素进行了乘3的操作，但这些操作并没有反映在原数组中。
如果希望通过forEach改变原数组，需要直接修改数组元素的值，而不是简单地对元素进行赋值。
示例代码
const numArr = [33, 4, 55];
numArr.forEach((ele, index, arr) => {
if (ele === 33) {
arr[index] = 999;
}
});
console.log(numArr);  // [999, 4, 55]
在这个例子中，我们通过forEach方法直接修改了数组中的元素，从而改变了原数组。
<h4>示例代码2</h4>
const changeItemArr = [{
name: 'wxw',
age: 22
}, {
name: 'wxw2',
age: 33
}];
changeItemArr.forEach(ele => {
if (ele.name === 'wxw2') {
ele = {
name: 'change',
age: 77
};
}
});
console.log(changeItemArr); // [{name: "wxw", age: 22}, {name: "wxw2", age: 33}]
在这个例子中，尝试对数组中的对象进行替换操作，但这种方式并不会改变原数组中的对象。
<h3 id="forEachmisunderstandingtopic-10">解决方案：通过索引改变数组中的对象</h3>
为了正确替换数组中的对象，可以通过索引来直接修改数组中的对象。
示例代码
const allChangeArr = [{
name: 'wxw',
age: 22
}, {
name: 'wxw2',
age: 33
}];
allChangeArr.forEach((ele, index, arr) => {
if (ele.name === 'wxw2') {
arr[index] = {
name: 'change',
age: 77
};
}
});
console.log(allChangeArr); // [{name: "wxw", age: 22}, {name: "change", age: 77}]
在这个例子中，通过索引直接修改数组中的对象，从而实现了对原数组的修改。
<h3 id="forEachmisunderstandingtopic-11">结束</h3>
总结一下，forEach虽然方便，但在一些特定场景下，使用传统的for循环或其他遍历方法可能更适合你的需求。
比如，当你需要精确控制循环流程、处理异步操作或是修改原数组时，for循环往往能提供更高的灵活性和性能。
<h2>Detect Screen Resolution</h2>
Use the window.screen Object: screen.width, screen.height
detect the native resolution of a mobile device display (e.g.

retina display):
multiply the screen width and height with the device pixel ratio:
window.screen.width * window.devicePixelRatio
window.screen.height * window.devicePixelRatio
<k>
function getResolution() {
alert("Your screen resolution is: " + screen.width + "x" + screen.height + " retina display " + Math.round(window.screen.width * window.devicePixelRatio) + " " + Math.round(window.screen.height * window.devicePixelRatio));
}
getResolution();
</k>
should leverage the manufacturer's hint via the
&lt;meta name="viewport" content="width=device-width"/> or 
@-ms-viewport {width:device-width} feature.
After that, call window.innerWidth
Avoid relying on window.devicePixelRatio for anything.
Its meaning and the value it returns is currently in a state of flux and anything you make right now based around it will most likely break very soon.
Note: Meta viewport only works on Android, iOS, and Windows Phone 8.

@-ms-viewport only works (properly) on IE10 Metro and can interfere with proper Meta viewport behavior on Windows Phone 8.
<h2>Useful JavaScript Tips, Tricks and Best Practices</h2>
<strong>1 - Don’t forget <k>var</k> keyword when assigning a variable’s value for the first time.</strong>
Assignment to an undeclared variable automatically results in a global variable being created.

Avoid global variables.
<strong>2 - use <k>===</k> instead of <k>==</k></strong>
The <k>==</k> (or <k>!=</k>) operator performs an automatic type conversion if needed.

The <k>===</k> (or <k>!==</k>) operator will not perform any conversion.

It compares the value and the type, which could be considered faster than <k>==</k>.
<k>[10] === 10    // is false
[10]  == 10    // is true
'10' == 10     // is true
'10' === 10    // is false
[]   == 0     // is true
[] ===  0     // is false
'' == false   // is true but true == "a" is false
'' ===   false // is false </k>
<strong>3 - <k>undefined</k>, <k>null</k>, 0, <k>false</k>, <k>NaN</k>, <k>''</k> (empty string) are all falsy.</strong><br />
<strong>4 - Use Semicolons for line termination</strong>
The use of semi-colons for line termination is a good practice.

You won't be warned if you forget it, because in most cases it will be inserted by the JavaScript parser.

For more details about why you should use semi-colons, take a look to this artice: <a href="https://davidwalsh.name/javascript-semicolons">http://davidwalsh.name/javascript-semicolons</a>.
<strong>5 - Create an object constructor</strong>
<k>function Person(firstName, lastName){
this.firstName =  firstName;
this.lastName = lastName;        
}  
var Saad = new Person("Saad", "Mousliki");</k>
<strong>6 - Be careful when using <k>typeof</k>, <k>instanceof</k> and <k>constructor</k>.</strong>
<em>typeof</em> : a JavaScript unary operator used to  return a string that represents the primitive type of a variable,  don't forget that <k>typeof null</k> will return "object", and for the majority of object types (Array, Date, and others) will return also "object".
<em>constructor</em> : is a property of the internal prototype property, which could be overridden by code.
<em>instanceof</em> : is another JavaScript operator that check in all the prototypes chain the constructor it returns true if it's found and false if not.
<k>var arr = ["a", "b", "c"];
typeof arr;   // return "object" 
arr  instanceof Array // true
arr.constructor();  //[]
</k>
<strong>7 - Create a Self-calling Function</strong>
This is often called a Self-Invoked Anonymous Function or Immediately Invoked Function Expression (IIFE).

It is a function that executes automatically when you create it, and has the following form:
<k>(function(){
// some private code that will be executed automatically
})();  
(function(a,b){
var result = a+b;
return result;
})(10,20)</k>
<strong>8 - Get a random item from an array</strong>
<k>var items = [12, 548 , 'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' , 2145 , 119];
var  randomItem = items[Math.floor(Math.random() * items.length)];</k>
<strong>9 - Get a random number in a specific range</strong>
This code snippet can be useful when trying to generate fake data for testing purposes, such as a salary between min and max.
<k>var x = Math.floor(Math.random() * (max - min + 1)) + min;</k>
<strong>10 - Generate an array of numbers with numbers from 0 to max</strong>
<k>var numbersArray = [] , max = 100;
for( var i=1; numbersArray.push(i++) &lt; max;);  // numbers = [1,2,3 ...

100] </k>
<strong>11 - Generate a random set of alphanumeric characters</strong>
<k>function generateRandomAlphaNum(len) {
var rdmString = "";
for( ; rdmString.length &lt; len; rdmString  += Math.random().toString(36).substr(2));
return  rdmString.substr(0, len);
}
</k>
<strong>12 - Shuffle an array of numbers</strong>
<k>var numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411];
numbers = numbers.sort(function(){ return Math.random() - 0.5});
/* the array numbers will be equal for example to [120, 5, 228, -215, 400, 458, -85411, 122205]  */</k>
A better option could be to implement a random sort order by code (e.g.

: Fisher-Yates shuffle), than using the native sort JavaScript function.

For more details take a look to <a href="https://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962890">this discussion</a>.
<strong>13 - A string trim function</strong>
The classic trim function of Java, C#, PHP and many other language that remove whitespace from a string doesn’t exist in JavaScript, so we could add it to the <k>String</k> object.
<k>String.prototype.trim = function(){return this.replace(/^s+|s+$/g, "");};  </k>
A native implementation of the trim() function is available in the recent JavaScript engines.
<strong>14 - Append an array to another array</strong>
<k>var array1 = [12 , "foo" , {name "Joe"} , -2458];
var array2 = ["Doe" , 555 , 100];
Array.prototype.push.apply(array1, array2);
/* array1 will be equal to  [12 , "foo" , {name "Joe"} , -2458 , "Doe" , 555 , 100] */</k>
<strong>15 - Transform the <k>arguments</k> object into an array</strong>
<k>var argArray = Array.prototype.slice.call(arguments);</k>
<strong>16 - Verify that a given argument is a number</strong>
<k>function isNumber(n){
return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);
}</k>
<strong>17 - Verify that a given argument is an array</strong>
<k>function isArray(obj){
return Object.prototype.toString.call(obj) === '[object Array]' ;
}</k>
Note that if the toString() method is overridden, you will not get the expected result using this trick.
Or use&#8230;
<k>Array.isArray(obj); // its a new Array method</k>
You could also use <k>instanceof</k> if you are not working with multiple frames.

However, if you have many contexts, you will get a wrong result.
<k>var myFrame = document.createElement('iframe');
document.body.appendChild(myFrame);
var myArray = window.frames[window.frames.length-1].Array;
var arr = new myArray(a,b,10); // [a,b,10]  
// instanceof will not work correctly, myArray loses his constructor 
// constructor is not shared between frames
arr instanceof Array; // false</k>
<strong>18 - Get the max or the min in an array of numbers</strong>
<k>var  numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411]; 
var maxInNumbers = Math.max.apply(Math, numbers); 
var minInNumbers = Math.min.apply(Math, numbers);</k>
<strong>19 - Empty an array</strong>
<k>var myArray = [12 , 222 , 1000 ];  
myArray.length = 0; // myArray will be equal to [].</k>
<strong>20 - Don’t use delete to remove an item from array</strong>
Use <k>splice</k> instead of using <k>delete</k> to delete an item from an array.

Using <k>delete</k> replaces the item with <k>undefined</k> instead of the removing it from the array.
Instead of&#8230;
<k>var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; 
items.length; // return 11 
delete items[3]; // return true 
items.length; // return 11 
/* items will be equal to [12, 548, "a", undefined × 1, 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */</k>
Use&#8230;
<k>var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; 
items.length; // return 11 
items.splice(3,1) ; 
items.length; // return 10 
/* items will be equal to [12, 548, "a", 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */</k>
The delete method should be used to delete an object property.
<strong>21 - Truncate an array using length</strong>
Like the previous example of emptying an array, we truncate it using the <k>length</k> property.
<k>var myArray = [12 , 222 , 1000 , 124 , 98 , 10 ];  
myArray.length = 4; // myArray will be equal to [12 , 222 , 1000 , 124].</k>
As a bonus, if you set the array length to a higher value, the length will be changed and new items will be added with <k>undefined</k> as a value.

The array length is not a read only property.
<k>myArray.length = 10; // the new array length is 10 
myArray[myArray.length - 1] ; // undefined</k>
<strong>22 - Use logical AND/ OR for conditions</strong>
<k>var foo = 10;  
foo == 10 &amp;&amp; doSomething(); // is the same thing as if (foo == 10) doSomething(); 
foo == 5 || doSomething(); // is the same thing as if (foo != 5) doSomething();</k>
The logical OR could also be used to set a default value for function argument.
<k>function doSomething(arg1){ 
arg1 = arg1 || 10; // arg1 will have 10 as a default value if it’s not already set
}</k>
<strong>23 - Use the map() function method to loop through an array's items</strong>
<k>var squares = [1,2,3,4].map(function (val) {  
return val * val;  
}); 
// squares will be equal to [1, 4, 9, 16] </k>
<strong>24 - Rounding number to N decimal place</strong>
<k>var num =2.443242342;
num = num.toFixed(4);  // num will be equal to 2.4432</k>
NOTE : the <k>toFixed()</k> function returns a string and not a number.
<strong>25 - Floating point problems</strong>
<k>0.1 + 0.2 === 0.3 // is false 
9007199254740992 + 1 // is equal to 9007199254740992  
9007199254740992 + 2 // is equal to 9007199254740994</k>
Why does this happen? 0.1 +0.2 is equal to 0.30000000000000004.

What you need to know is that all JavaScript numbers are floating points represented internally in 64 bit binary according to the IEEE 754 standard.

For more explanation, take a look to <a href="https://2ality.com/2012/04/number-encoding.html">this blog post</a>.
You can use <k>toFixed()</k> and <k>toPrecision()</k> to resolve this problem.
<strong>26 - Check the properties of an object when using a for-in loop</strong>
This code snippet could be useful in order to avoid iterating through the properties from the object’s prototype.
<k>for (var name in object) {  
if (object.hasOwnProperty(name)) { 
// do something with name                    
}  
}</k>
<strong>27 - Comma operator</strong>
<k>var a = 0; 
var b = ( a++, 99 ); 
console.log(a);  // a will be equal to 1 
console.log(b);  // b is equal to 99</k>
<strong>28 - Cache variables that need calculation or querying</strong>
In the case of a jQuery selector, we could cache the DOM element.
<k>var navright = document.querySelector('#right'); 
var navleft = document.querySelector('#left'); 
var navup = document.querySelector('#up'); 
var navdown = document.querySelector('#down');</k>
<strong>29 - Verify the argument before passing it to <k>isFinite()</k></strong>
<k>isFinite(0/0) ; // false 
isFinite("foo"); // false 
isFinite("10"); // true 
isFinite(10);   // true 
isFinite(undefined);  // false 
isFinite();   // false 
isFinite(null);  // true  !!! </k>
<strong>30 - Avoid negative indexes in arrays</strong>
<k>var numbersArray = [1,2,3,4,5]; 
var from = numbersArray.indexOf("foo") ;  // from is equal to -1 
numbersArray.splice(from,2);    // will return [5]</k>
Make sure that the arguments passed to <k>splice</k> are not negative.
<strong>31 - Serialization and deserialization (working with JSON)</strong>
<k>var person = {name :'Saad', age : 26, department : {ID : 15, name : "R&amp;D"} }; 
var stringFromPerson = JSON.stringify(person); 
/* stringFromPerson is equal to "{"name":"Saad","age":26,"department":{"ID":15,"name":"R&amp;D"}}"   */ 
var personFromString = JSON.parse(stringFromPerson);  
/* personFromString is equal to person object  */</k>
<strong>32 - Avoid the use of <k>eval()</k> or the <k>Function</k> constructor</strong>
Use of <k>eval</k> or the <k>Function</k> constructor are expensive operations as each time they are called script engine must convert source code to executable code.
<k>var func1 = new Function(functionCode);
var func2 = eval(functionCode);</k>
<strong>33 - Avoid using <k>with()</k> (The good part)</strong>
Using <k>with()</k> inserts a variable at the global scope.

Thus, if another variable has the same name it could cause confusion and overwrite the value.
<strong>34 - Avoid using for-in loop for arrays</strong>
Instead of using&#8230;
<k>var sum = 0;  
for (var i in arrayNumbers) {  
sum += arrayNumbers[i];  
}</k>
&#8230;it’s better to use&#8230;
<k>var sum = 0;  
for (var i = 0, len = arrayNumbers.length; i &lt; len; i++) {  
sum += arrayNumbers[i];  
}</k>
As a bonus, the instantiation of <k>i</k> and <k>len</k> is executed once because it’s in the first statement of the for loop.

Thsi is faster than using&#8230;
<k>for (var i = 0; i &lt; arrayNumbers.length; i++)</k>
Why? The length of the array <k>arrayNumbers</k> is recalculated every time the loop iterates.
NOTE : the issue of recalculating the length in each iteration was fixed in the latest JavaScript engines.
<strong>35 - Pass functions, not strings, to <k>setTimeout()</k> and <k>setInterval()</k></strong>
If you pass a string into <k>setTimeout()</k> or <k>setInterval()</k>, the string will be evaluated the same way as with <k>eval</k>, which is slow.

Instead of using&#8230;
<k>setInterval('doSomethingPeriodically()', 1000);  
setTimeout('doSomethingAfterFiveSeconds()', 5000);</k>
&#8230;use&#8230;
<k>setInterval(doSomethingPeriodically, 1000);  
setTimeout(doSomethingAfterFiveSeconds, 5000);</k>
<strong>36 - Use a switch/case statement instead of a series of if/else</strong>
Using switch/case is faster when there are more than 2 cases, and it is more elegant (better organized code).

Avoid using it when you have more than 10 cases.
<strong>37 - Use switch/case statement with numeric ranges</strong>
Using a switch/case statement with numeric ranges is possible with this trick.
<k>function getCategory(age) {  
var category = "";  
switch (true) {  
case isNaN(age):  
category = "not an age";  
break;  
case (age >= 50):  
category = "Old";  
break;  
case (age &lt;= 20):  
category = "Baby";  
break;  
default:  
category = "Young";  
break;  
};  
return category;  
}  
getCategory(5);  // will return "Baby"</k>
<strong>38 - Create an object whose prototype is a given object</strong>
It’s possible to write a function that creates an object whose prototype is the given argument like this&#8230;
<k>function clone(object) {  
function OneShotConstructor(){}; 
OneShotConstructor.prototype= object;  
return new OneShotConstructor(); 
} 
clone(Array).prototype ;  // []</k>
<strong>39 - An HTML escaper function</strong>
<k>function escapeHTML(text) {  
var replacements= {"&lt;": "&amp;lt;", ">": "&amp;gt;","&amp;": "&amp;amp;", """: "&amp;quot;"};                      
return text.replace(/[&lt;>&amp;"]/g, function(character) {  
return replacements[character];  
}); 
}</k>
<strong>40 - Avoid using try-catch-finally inside a loop</strong>
The try-catch-finally construct creates a new variable in the current scope at runtime each time the catch clause is executed where the caught exception object is assigned to a variable.
Instead of using&#8230;
<k>var object = ['foo', 'bar'], i;  
for (i = 0, len = object.length; i &lt;len; i++) {  
try {  
// do something that throws an exception 
}  
catch (e) {   
// handle exception  
} 
}</k>
&#8230;use&#8230;
<k>var object = ['foo', 'bar'], i;  
try { 
for (i = 0, len = object.length; i &lt;len; i++) {  
// do something that throws an exception 
} 
} 
catch (e) {   
// handle exception  
} </k>
<strong>41 - Set timeouts to <k>XMLHttpRequests</k></strong>
You could abort the connection if an XHR takes a long time (for example, due to a network issue), by using <k>setTimeout()</k> with the XHR call.
<k>var xhr = new XMLHttpRequest (); 
xhr.onreadystatechange = function () {  
if (this.readyState == 4) {  
clearTimeout(timeout);  
// do something with response data 
}  
}  
var timeout = setTimeout( function () {  
xhr.abort(); // call error callback  
}, 60*1000 /* timeout after a minute */ ); 
xhr.open('GET', url, true);  
xhr.send();</k>
As a bonus, you should generally avoid synchronous XHR calls completely.
<strong>42 - Deal with WebSocket timeout</strong>
Generally when a WebSocket connection is established, a server could time out your connection after 30 seconds of inactivity.

The firewall could also time out the connection after a period of inactivity.
To deal with the timeout issue you could send an empty message to the server periodically.

To do this, add these two functions to your code: one to keep alive the connection and the other one to cancel the keep alive.

Using this trick, you’ll control the timeout.
Add a <k>timerID</k>&#8230;
<k>var timerID = 0; 
function keepAlive() { 
var timeout = 15000;  
if (webSocket.readyState == webSocket.OPEN) {  
webSocket.send('');  
}  
timerId = setTimeout(keepAlive, timeout);  
}  
function cancelKeepAlive() {  
if (timerId) {  
cancelTimeout(timerId);  
}  
}</k>
The <k>keepAlive()</k> function should be added at the end of the <k>onOpen()</k> method of the webSocket connection and the <k>cancelKeepAlive()</k> at the end of the <k>onClose()</k> method.
<strong>43 - Keep in mind that <a href="https://dev.opera.com/articles/efficient-javascript/?page=2">primitive operations can be faster than function calls</a>.

Use <a href="http://vanilla-js.com/">VanillaJS</a>.</strong>
For example, instead of using&#8230;
<k>var min = Math.min(a,b); 
A.push(v);</k>
&#8230;use&#8230;
<k>var min = a &lt; b ? a : b; 
A[A.length] = v;</k>
<strong>44 - Don’t forget to use a code beautifier when coding.

Use JSLint and minification (JSMin, for example) before going live.</strong>
<strong>45 - JavaScript is awesome: Best Resources To Learn JavaScript</strong>
Code Academy JavaScript tracks: http://www.codecademy.com/tracks/javascript
Eloquent JavaScript by Marjin Haverbeke: <a href="https://eloquentjavascript.net/">http://eloquentjavascript.net/</a>
Advanced JavaScript by John Resig: <a href="https://johnresig.com/apps/learn/">http://ejohn.org/apps/learn/</a>
<h2>make a beep</h2>
var audioCtx = new (window.AudioContext || window.webkitAudioContext || window.audioContext);
//All arguments are optional:
//duration of the tone in milliseconds.

Default is 500
//frequency of the tone in hertz.

default is 440
//volume of the tone.

Default is 1, off is 0.
//type of tone.

sine, square, sawtooth, triangle, and custom.

Default sine.
//callback to use on end of tone
function beep(duration, frequency, volume, type, callback) {
var oscillator = audioCtx.createOscillator();
var gainNode = audioCtx.createGain();
oscillator.connect(gainNode);
gainNode.connect(audioCtx.destination);
if (volume){gainNode.gain.value = volume;}
if (frequency){oscillator.frequency.value = frequency;}
if (type){oscillator.type = type;}
if (callback){oscillator.onended = callback;}
oscillator.start(audioCtx.currentTime);
oscillator.stop(audioCtx.currentTime + ((duration || 500) / 1000));
};
<h2>Generate Sounds Programmatically</h2>
https://marcgg.com/blog/2016/11/01/javascript-audio/
Produce a Simple Beep
First let’s create a very basic beep using a <a href="https://en.wikipedia.org/wiki/Sine_wave">sinusoid</a>.

We’ll initiate an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext">audio context</a>, which is the central object for generating sound.

Then we’ll create an <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">oscillator</a> producing the sine wave.

Finally we connect the oscillator to the context and start.
<k>var context = new AudioContext()
var o = context.createOscillator()
o.type = "sine"
o.connect(context.destination)
o.start()</k>
You’ll notice that the sound produced here is not great.

It seems like you let a phone off the hook and when you stop it, you hear a “click” and it’s not pleasant at all.

This is because the human hear reacts this way as explained in this <a href="https://alemangui.github.io/blog//2015/12/26/ramp-to-value.html">great article</a>.

Basically when you stop the sound anywhere else than the zero crossing point, you’ll hear this clicking sound.
<img class="lazy" data-src="https://marcgg.com/assets/blog/audio_click.jpg" alt="Clicking noise on a sine curve" style="padding: 20px; width: 600px;" />
<h3>Getting Rid Of The Clicking Sound</h3>
The best solution to get rid of this click is to ramp the sine wave down with an exponentional function, using <k>AudioParam.exponentialRampToValueAtTime()</k> as <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/exponentialRampToValueAtTime">documented here</a>.
This time we need to add a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode">gain node</a> to our oscillator.

A gain node allows us to change the volume of a signal as explained in this schema from the documentation:
<img class="lazy" data-src="https://marcgg.com/assets/blog/gain.jpg" alt="Gain node" style="padding: 20px; width: 600px;" />
The code to start the sound now looks like this:
<k>var context = new AudioContext()
var o = context.createOscillator()
var  g = context.createGain()
o.connect(g)
g.connect(context.destination)
o.start(0)</k>
In order to stop the sound we change the gain value, effectively reducing the volume.

Note that we don’t ramp down to 0 since there is a limitation in this function where the value has to be positive.
<k>g.gain.exponentialRampToValueAtTime(
0.00001, context.currentTime + 0.04
)</k>
As you can hear, the clicking sound is gone! But that’s not the only interesting thing that you can do with this exponential ramp down.
<h3>Set A Ringing Effect</h3>
In the example above, we decided to stop the sound really quickly, in <k>0.04</k> seconds.

But what happens when we change this <k>X</k> value?
<k>g.gain.exponentialRampToValueAtTime(0.00001, context.currentTime + X)</k>
<h3>Hitting Notes</h3>
Giving more time to the sound to fade out gives it a totally different feel.

It gets more visible when we start and stop the signal right away:
Start and stop quickly</a> Start and stop slowly</a>
The first one sounds like a ticking noise when the other sounds like an actual note played on an instrument.
<h3>Various Oscilators</h3>
So far we’ve been using a sine wave for our main signal, but we have other options:
<img class="lazy" data-src="https://marcgg.com/assets/blog/signals.png" alt="Types of oscilators" style="padding: 20px; width: 400px;" />
It’s enven more interesting when we start playing around with the type of oscilators by setting <k>o.type = type</k>.
Sine</a> Square</a> Triangle</a> Sawtooth</a>
<h3>Playing Actual Notes</h3>
With the previous code, it becomes fairly simple to have a nice sounding note, but what exactly were we playing? That’s when you have to take frequency into account.

For instance, the one people know is that A4 is 440Hz, but there are others.
<h3>Note Frequencies in Hz</h3>
With this table, you can easily create a mapping in your code to play any given note using its .

For the hackathon I used a simple hash mapping that is available in this <a href="https://gist.github.com/marcgg/94e97def0e8694f906443ed5262e9cbb">gist</a>.
<table> <tr> <td></td><th>C</th><th>C#</th><th>D</th><th>Eb</th><th>E</th><th>F</th><th>F#</th><th>G</th><th>G#</th><th>A</th><th>Bb</th><th>B</th> </tr> <tr> <th>0</th><td>16.35</td><td>17.32</td><td>18.35</td><td>19.45</td><td>20.60</td><td>21.83</td><td>23.12</td><td>24.50</td><td>25.96</td><td>27.50</td><td>29.14</td><td>30.87</td> </tr> <tr> <th>1</th><td>32.70</td><td>34.65</td><td>36.71</td><td>38.89</td><td>41.20</td><td>43.65</td><td>46.25</td><td>49.00</td><td>51.91</td><td>55.00</td><td>58.27</td><td>61.74</td> </tr> <tr> <th>2</th><td>65.41</td><td>69.30</td><td>73.42</td><td>77.78</td><td>82.41</td><td>87.31</td><td>92.50</td><td>98.00</td><td>103.8</td><td>110.0</td><td>116.5</td><td>123.5</td> </tr> <tr> <th>3</th><td>130.8</td><td>138.6</td><td>146.8</td><td>155.6</td><td>164.8</td><td>174.6</td><td>185.0</td><td>196.0</td><td>207.7</td><td>220.0</td><td>233.1</td><td>246.9</td> </tr> <tr> <th>4</th><td>261.6</td><td>277.2</td><td>293.7</td><td>311.1</td><td>329.6</td><td>349.2</td><td>370.0</td><td>392.0</td><td>415.3</td><td>440.0</td><td>466.2</td><td>493.9</td> </tr> <tr> <th>5</th><td>523.3</td><td>554.4</td><td>587.3</td><td>622.3</td><td>659.3</td><td>698.5</td><td>740.0</td><td>784.0</td><td>830.6</td><td>880.0</td><td>932.3</td><td>987.8</td> </tr> <tr> <th>6</th><td>1047</td><td>1109</td><td>1175</td><td>1245</td><td>1319</td><td>1397</td><td>1480</td><td>1568</td><td>1661</td><td>1760</td><td>1865</td><td>1976</td> </tr> <tr> <th>7</th><td>2093</td><td>2217</td><td>2349</td><td>2489</td><td>2637</td><td>2794</td><td>2960</td><td>3136</td><td>3322</td><td>3520</td><td>3729</td><td>3951</td> </tr> <tr> <th>8</th><td>4186</td><td>4435</td><td>4699</td><td>4978</td><td>5274</td><td>5588</td><td>5920</td><td>6272</td><td>6645</td><td>7040</td><td>7459</td><td>7902</td> </tr> </table>
To implement this, we just need to add a frequency to our oscilator:
<k>var frequency = 440.0
o.frequency.value = frequency</k>
If we change with the value of <k>frequency</k>, we can play any note.

For instance:
261.6Hz (C4)  440Hz (A4)  830.6Hz (G#5)
Mix this with the ramp down timings and different signals, and you start to be able to create more interesting sounds.
174.6Hz (F3) - Square  1109Hz (C#6) - Sawtooth  87.31 Hz (F2) - Triangle 
Since you scrolled this far, you might be interested in some other things I wrote:
<a href="/blog/2016/11/21/chiptune-sequencer-multiplayer/">Building A Multiplayer 8 Bits Sequencer</a>
<a href="/blog/2016/03/14/github-pages-jekyll/">Trailing Slashes, Github Pages, Jekyll 3 & 404s</a>
<a href="/blog/2016/03/01/vimrc-example/">Vim Configuration From Scratch in 2016</a>
<a href="/blog/2015/01/05/css-animations-failing-capybara-specs/">How CSS Animations Can Break Your Tests</a>
<a href="/blog/2014/07/22/in-defense-of-legacy-code/">Some Respect For Legacy Code</a>
<a href="/blog/2014/04/28/frame-based-layout-bad-code/">Tips on Creating a Website From When I Was 12</a>
<a href="/blog/2013/11/05/enough-with-the-language-trolls/">Enough With The Trolls</a>
<a href="/blog/2013/03/25/please-changelog-open-source/">Please Keep a Changelog For Your Open Source Lib</a>
<a href="/blog/2012/09/04/one-reason-to-switch-to-vim-editor/">The One Thing That Made Me Switch To Vim</a>
<a href="/books/">Startup & Tech Book Reviews</a>
<h2>Making Music in the Browser</h2>
<a href="https://www.javascriptjanuary.com/blog/making-music-in-the-browser" class="whitebut ">Making Music in the Browser</a>
You'll find a global constructor <k>AudioContext</k> (<k>webkitAudioContext</k> in Chrome 34/35) that unlocks this functionality.
<h3>Oscillators</h3>
One of the main components of this API is the oscillator.

If you've used a synthesizer before, you're likely already familiar with this concept.

An oscillator produces a sound wave at a set frequency and pattern.

This creates notes with different qualities and textures.

Many oscillators, including the ones in the Web Audio API, support 4 different waveforms out of the box: sine, triangle, square, and sawtooth.

Each has a unique quality that gives synthesizers their distinctive sound.
Let's set up an oscillator.

We'll set the frequency to 440 and use a sine wave:
const context = new AudioContext()
const oscillator = context.createOscillator()
oscillator.frequency.value = 440
oscillator.type = 'sine'
This won't do much without an audio source to output sound to, of course.

We can connect the oscillator to our computer's default audio output pretty simply:
oscillator.connect(context.destination)
We can start and stop our oscillator using <k>oscillator.start()</k> and <k>oscillator.stop()</k>.

Not so fast, though! The browser won't allow us to call these methods unless they're triggered by some user interaction first.

This is meant to prevent any random website from making noises without users' permission.

We'll add a button to the page and trigger our oscillator to play for a second.
document.querySelector('button').addEventListener('click', () => {
oscillator.start(context.currentTime)
setTimeout(() => oscillator.stop(context.currentTime), 1000)
})
Clicking the button should produce a tone from your speakers for about a second.

If you click the button a second time, though, you won't hear anything.

Why not? You should see an error in your console saying that <k>start</k> can't be called more than once on an oscillator.
Ok, so now we have to deal with the fact that we can't <k>start</k> an oscillator multiple times.

One way to handle this is to create a new oscillator every time we click the button.

So, let's move that code into our event handler.
const context = new AudioContext()
document.querySelector('button').addEventListener('click', () => {
const oscillator = context.createOscillator()
oscillator.frequency.value = 440
oscillator.type = 'sine'
oscillator.connect(context.destination)
oscillator.start(context.currentTime)
setTimeout(() => oscillator.stop(context.currentTime), 500)
})
<h3>Envelopes (Gain)</h3>
Great! Now our button plays a tone every time we click it.

But it sounds a bit...

robotic.

Real instruments don't cut off their sound immediately; instead, they have a natural decrease in volume over time.

This is called decay.

So, how can we implement decay here? We need to control the volume! In audio synthesis, this is referred to as an envelope.

Let's create a volume envelope for our oscillator.
const context = new AudioContext()
document.querySelector('button').addEventListener('click', () => {
const oscillator = context.createOscillator()
const envelope = context.createGain()
const decayRate = 1.5 // seconds
oscillator.frequency.value = 440
oscillator.type = 'sine'
envelope.gain.value = 1
oscillator.connect(envelope)
envelope.connect(context.destination)
oscillator.start(context.currentTime)
envelope.gain.exponentialRampToValueAtTime(0.001, context.currentTime + decayRate)
setTimeout(() => oscillator.stop(context.currentTime), decayRate * 1000)
})
You'll notice that we've made a change to some of our existing code here.

Before, we connected the oscillator directly to the audio source.

Now, we first connect it to the envelope, and then connect the envelope to the audio source.

We've also added a call to <k>exponentialRampToValueAtTime</k> on the envelope's gain node.

This method progressively adjusts the gain to a given value over time.

The time it expects is a precise moment, in seconds, which we use the <k>currentTime</k> of our <k>AudioContext</k> instance to calculate.
<h3>Musicality</h3>
Now we've got something that sounds a bit more like an instrument than just a beeping noise.

So, how do we get from here to something we can play like an instrument? First, we'll need a broader range of notes.

Our button is currently playing at the frequency 440, which corresponds to the note A in the fourth octave.

If you're familiar with piano music, this is the A above middle C.
Mapping note names to frequencies is a bit tedious, so let's pull in a library to solve this problem for us.

I recommend .

This library has a few different handy features, but importantly for us, it has a module that can translate notes in a range of octaves to their corresponding frequencies.

You can use it like this:
import {Note} from 'octavian'
const {frequency} = new Note('A4')
console.log(frequency) // => 440
<h3>Making It Playable</h3>
The next step is to bind a few keyboard keys to play different notes.

We'll pull the contents of our previous click handler function into a new function, <k>playNote</k>, that takes a <k>frequency</k> argument.

We'll use that argument to set the oscillator's frequency instead of hard-coding it to 440:
function playNote(frequency) {
/* ...

*/
oscillator.frequency.value = frequency
/* ...

*/
}
Next, we'll set up a keypress event on the <k>document</k> to play a range of notes with this function depending on which key is pressed.

For simplicity, let's map the home row to the octave of middle C (C4):
const notes = {
a: 'C4',
s: 'D4',
d: 'E4',
f: 'F4',
g: 'G4',
h: 'A4',
j: 'B4',
k: 'C5'
}
document.addEventListener('keypress', ({key}) => {
const note = notes[key]
const {frequency} = new Note(note)
playNote(frequency)
})
Et voilà: a playable toy keyboard, right here in the browser!
<h3>Conclusion</h3>
This is a simplified example of what's possible with the Web Audio API, but there's a lot I didn't cover here.

This API gives us all the tools we need to build a fully functional synthesizer in JavaScript.

It supports filters, noise generation, and even custom waveform creation.

I highly recommend looking at MDN's article on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">using the Web Audio API</a> as a source for more information.
With this API being JavaScript, it opens us up to a lot of potential for creativity.

What would it be like to combine Web Audio with websockets? What about adding a little randomization to your sounds? The possibilities are endless.

I look forward to seeing what you create!
<h2>Understanding <k>typeof</k>, <k>instanceof</k> and <k>constructor</k> in JavaScript</h2>
Some types in JavaScript are so-called &#8220;primitive types&#8221;, and they don't act like objects.

These types are:
Undefined
Null
Boolean
Number
String
The confusion comes from the fact that the boolean, number and string types can be treated like objects in a limited way.

For example, the expression <k>"I'm no object".length</k> returns the value <k>13</k>.

This happens because when you attempt to access properties or methods on a primitive value, JavaScript instantiates a wrapper object temporarily, just so you can access its methods.

&#8216;Cause JavaScript's nice like that.

I'm not going to go into more details here, but Angus Croll wrote about <a href="http://javascriptweblog.wordpress.com/2010/09/27/the-secret-life-of-javascript-primitives/">The Secret Life of JavaScript Primitives</a>, so that would be a good place to learn more.
<h3><k>typeof</k></h3>
<k>typeof</k> is a unary operator, just like the <k>!</k> operator.

It returns a string representing the type of its operand.

Here are some examples:
<k>typeof 3; // returns "number"
typeof 'blah'; //returns "string"
typeof {}; //returns "object"
typeof []; //returns "object"
typeof function () {}; //returns "function"</k>
<k>typeof</k> has its idiosyncrasies.

For example, <k>typeof null</k> returns <k>"object"</k>, and <k>typeof /[a-z]/</k> returns <k>"function"</k>.

Again, Angus Croll has <a href="http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/">written more on this subject</a> than I have space for here.
So, basically <k>typeof</k> is used for telling apart the different primitive types (as long as you don't care about <k>null</k>).

It's no use for telling different types of object apart though &#8211; for most objects <k>typeof</k> will return <k>"object"</k>.
<h3><k>constructor</k></h3>
<k>constructor</k> is a property available on all objects' prototypes, and it is a reference to the constructor function used to create the object.

So, <k>({}).constructor</k> returns the <k>Object</k> constructor function (the parentheses are needed to clarify a syntactic ambiguity) and <k>[].constructor</k> returns the <k>Array</k> constructor function.

Likewise, it will return your custom constructor function:
<k>function Person(name) {
this.name = name;
}
var dave = new Person('Dave');
dave.constructor === Person; //true</k>
Remember that unlike the <k>typeof</k> operator, <k>constructor</k> returns a reference to the actual function.

Another gotcha: because <k>constructor</k> is part of the prototype, if you reassign the prototype to a constructor function, e.g.

<k>Person.prototype = {};</k>, you'll lose the <k>constructor</k> property.
<h3><k>instanceof</k></h3>
<k>instanceof</k> is a binary operator &#8211; its syntax is <k>instance instanceof Constructor</k>.

So, to continue the above example:
<k>dave instanceof Person; //true</k>
The difference between <k>instanceof</k> and the <k>constructor</k> property (apart from the obvious syntactic difference) is that <k>instanceof</k> inspects the object's prototype chain.

So, going back to our friend <k>dave</k> again:
<k>dave instanceof Object; //true</k>
This is because <k>Person.prototype</k> is an object, so <k>Object</k> is in <k>dave</k>&#8216;s prototype chain, therefore <k>dave</k> is an instance of <k>Object</k>.
<h3>Wrap-up</h3>
So, if you're dealing with primitive objects, use <k>typeof</k> to distinguish them.

Because <k>typeof</k> returns <k>"function"</k> for functions, it can also be useful for checking if an object member or a function argument is a function.

If you're working out the constructor of an object, use its <k>constructor</k> property.

And if you're dealing with lengthy inheritance chains, and you want to find out whether an object inherits from a certain constructor, use <k>instanceof</k>.
<h2>window.onload vs document.onload</h2>
window.onload
By default, it is fired when the entire page loads, including its content (images, CSS, scripts, etc.).
document.onload
It is called when the DOM is ready which can be prior to images and other external content is loaded.
window.onload appears to be the most widely supported.
$(document).ready(function() { /* code here */ });
$(function() { /* code here */ });
<h2>jQuery Methods</h2>
<a href="https://www.tutorialsteacher.com/jquery/jquery-methods" class="whitebut ">www.tutorialsteacher.com/jquery/jquery-methods</a>
<table class="table table-bordered">
<thead>
<tr><th class="w-25">Category</th>
<th class="w-50">Description </th>
<th  class="w-25">Imp Methods</th></tr>
</thead>
<tbody>
<tr><td>DOM Manipulation </td>
<td>These methods manipulate DOM elements in some manner e.g.

changing attribute, style attribute, adding and removing elements etc.</td>
<td>after(),
append(),
attr(),
before(),
<a href="https://api.jquery.com/category/manipulation/" target="_blank">more..</a></td></tr>
<tr><td>Traversing</td>
<td>These methods help in navigating from DOM element to another element in a parent child hierarchy e.g.

finding ancestors, descendants or sibling element of a specified element.</td>
<td>children(),
closest(),
each(), 
first(),
next(), 
filter(),
parent(),
siblings(),
<a href="https://api.jquery.com/category/traversing/" target="_blank">more..</a></td></tr>
<tr><td>CSS </td>
<td>These methods get and set css related properties of elements.</td>
<td>addClass(),
css(),
hasClass(),
removeClass(),
toggleClass()
<a href="https://api.jquery.com/category/css/" target="_blank">more..</a>
</td></tr>
<tr><td>Attributes </td>
<td>These methods get and set DOM attributes of elements.</td>
<td>attr(),
html(),
removeAttr(),
prop(),
val(),
<a href="https://api.jquery.com/category/attributes/" target="_blank">more..</a>
</td></tr>
<tr><td>Events</td>
<td>These methods are used to handle DOM or JavaScript events.</td>
<td>bind(),
blur(),
change(),
click(),
dblclick(),
focus(),
keyup(),
keydown(),
<a href="https://api.jquery.com/category/events/" target="_blank">more..</a></td></tr>
<tr><td>Effects </td>
<td>These methods are used to add animation to elements.</td>
<td>animate(),
fadeIn(),
fadeOut(),
hide(),
show(),
stop(),
<a href="https://api.jquery.com/category/effects/" target="_blank">more..</a></td></tr>
<tr><td>Dimensions</td>
<td>These methods are used to get and set the CSS dimensions for the various properties.</td>
<td>height(),
width(),
innerHeight(),
innerWidth(),
<a href="https://api.jquery.com/category/dimensions/" target="_blank">more..</a></td></tr>
<tr><td>Forms</td>
<td>These methods and event handlers handle forms and their various elements.</td>
<td>blur(),
change(),
val(),
submit(),
<a href="https://api.jquery.com/category/forms/" target="_blank">more..</a></td></tr>
<tr><td>Ajax </td>
<td>These methods allow Ajax functionalities with jQuery e.g.

</td>
<td>get(),
getJson(),
post(),
load(),
<a href="https://api.jquery.com/category/ajax/" target="_blank">more..</a></td></tr>
<tr><td>Core </td>
<td>These methods are core methods in jQuery API.</td>
<td>jQuery(),
holdReady(),
when(),
<a href="https://api.jquery.com/category/core/" target="_blank">more..</a></td></tr>
<tr><td>Data </td>
<td>These methods allow us to associate arbitrary data with specific DOM elements.</td>
<td>data(),
removeData(),
queue(),
dequeue(),
clearQueue(),
<a href="https://api.jquery.com/category/data/" target="_blank">more..</a></td></tr>
<tr><td>Miscellaneous </td>
<td>These methods are useful in various tasks e.g.

traversing elements, converting to array etc.</td>
<td>each(),
index(),
get(),
toArray(),
<a href="https://api.jquery.com/category/miscellaneous/" target="_blank">more..</a></td></tr>
<tr><td>Utilities </td>
<td>Utility methods are helpful in getting information on various things e.g.

browser, function, array, window etc.

</td>
<td>inArray(),
isArray(),
isFunction(),
isNumeric(),
isWindow(),
isXmlDoc(),
<a href="https://api.jquery.com/category/utilities/" target="_blank">more..</a></td></tr>
</tbody>
</table>
<h2>Javascript get mac address</h2>
https://npmjs.org/package/getmac
get mac address
using windows operating system, following code may help you to get HDD and CPU serial number:
var sys = require('util')
var exec = require('child_process').exec;
function puts(error, stdout, stderr) {
console.log(stdout)
}
exec("wmic CPU get ProcessorId", puts);
exec("wmic DISKDRIVE get SerialNumber", puts);
to save this serial number to a variable
I want its value
If I try to console.log(stdout.SerialNumber) then it gives me undefined
Perhaps the fingerprintjs2 is one of the solutions for this issue:
http://valve.github.io/fingerprintjs2/
https://github.com/Valve/fingerprintjs2
Browser allows very limited access to hardware.
If you want to uniquely identify your clients, you can use the below chrome extension.
https://github.com/Antony007/ADNIdentifier
<h2>The require() function is not a client side function</h2>
Typically require() is used in server side NodeJS code, but there is a require.js library file
https://stackoverflow.com/questions/23603514/javascript-require-function-giving-referenceerror-require-is-not-defined
<a href="https://stackoverflow.com/questions/19059580/client-on-node-uncaught-referenceerror-require-is-not-defined" class="whitebut ">Client on node: require is not defined</a>
You have three options:
1.

Use &lt;script> tag.
2.

Use a CommonJS implementation.

Synchronous dependencies like Node.js
3.

Use an AMD implementation.
CommonJS client side-implementations include:
(most of them require a build step before you deploy)
1.

Browserify - You can use most Node.js modules in the browser.

This is my personal favorite.
2.

Webpack - Does everything (bundles JS, CSS, etc).

Made popular by the surge of React.js.

Notorious for its difficult learning curve.
3.

Rollup - New contender.

Leverages ES6 modules.

Includes tree-shaking abilities (removes unused code).
AMD implementations include:
RequireJS - Very popular amongst client-side JavaScript developers.

Not my taste because of its asynchronous nature.
Note, in your search for choosing which one to go with, you'll read about Bower.

Bower is only for package dependencies and is unopinionated on module definitions like CommonJS and AMD.
<h2>require()</h2>
When you're first starting out with Node js, it might be a bit confusing because you are most likely accustomed to writing JavaScript code for the web browser.

When Node js is the server, the syntax is similar but there are a few differences around how other JavaScript files and modules are included.

When writing on the server side you may include files as follows: require('./mysharedfile');.
This however is not valid on the client-side.

I've previously written an article about Include a JavaScript file in another file.
Another good thing to remember is that when you are writing your Node js server-side code you split it into multiple files; ideally one per module keeping the single responsibility principle in mind.

This is also good practice when you are doing client-side development as well.
Don't be afraid about making a lot of JavaScript files, just be sure that you implement a JavaScript minify so that all of your JavaScript is compiled into a single file and it actually removes the entire need to even used the require();.
<h2>Javascript open url target _self</h2>
window.open target _self v window.location.href
window.location.href = "webpage.htm";
location.href = "webpage.html";
window.open("url","_self"); 
window.open("webpage.htm", "_self");
<h2>Access object properties within object</h2>
var settings = {
user:"someuser",
password:"password",
country:"Country",
birthplace:country
}
settings.birthplace = settings.country;
You can't access the object inside of itself.
You can use variable:
var country = "country";
var settings = {
user:"someuser",
password:"password",
country:country,
birthplace:country
}
<h3>use a constructor function to reference an object during initialization</h3>
This example uses an anonymous function as a constructor.
The new object is reference with this.
var settings = new function() {
this.user = "someuser";
this.password = "password";
this.country = "Country";
this.birthplace = this.country;
};
Enumerate the properties of an object
there are three native ways to list/traverse object properties:
for...in loops
Object.keys(o)
Object.getOwnPropertyNames(o)
<h2>Accessing Nested Objects in JavaScript</h2>
<a href="https://hackernoon.com/accessing-nested-objects-in-javascript-f02f1bd6387f" class="whitebut ">Accessing Nested Objects</a>
<a href="https://stackoverflow.com/questions/31706577/cannot-read-property-labels-of-undefined" class="whitebut ">Cannot read property 'labels' of undefined</a>
const user = {
id: 101,
email: 'jack@dev.com',
personalInfo: {
name: 'Jack',
address: {
line1: 'westwish st',
line2: 'washmasher',
city: 'wallas',
state: 'WX'
}
}
}
To access the name of the our user:
const name = user.personalInfo.name;
const userCity = user.personalInfo.address.city;
But, for some reason, if our user’s personal info is not available, the object structure will be like this,
const user = {
id: 101,
email: 'jack@dev.com'
}
The usual way how most devs deal with this scenario is,
const name = user && user.personalInfo ? user.personalInfo.name : null;
// undefined error will NOT be thrown as we check for existence before access
This is okay if your nested structure is simple, but if you have your data nested 5 or 6 levels deep, then your code will look really messy like this,
let city;
if (
data && data.user && data.user.personalInfo &&
data.user.personalInfo.addressDetails &&
data.user.personalInfo.addressDetails.primaryAddress
) {
city = data.user.personalInfo.addressDetails.primaryAddress;
}
There are a few tricks to deal with this messy object structures.
Oliver Steele’s Nested Object Access Pattern
This is my personal favorite as it makes the code look clean and simple.

I picked this style from stackoverflow a while back and it is pretty catchy once you understand how it works.
const name = ((user || {}).personalInfo || {}).name;
With this notation, you’ll never run into Cannot read property ‘name’ of undefined.

You basically check if user exists, if not, you create an empty object on the fly.

This way, the next level key will always be accessed from an object that exists or an empty object, but never from undefined.
Unfortunately, you cannot access nested arrays with this trick
Access Nested Objects Using Array Reduce
Array reduce method is very powerful and it can be used to safely access nested objects.
const getNestedObject = (nestedObj, pathArr) => {
return pathArr.reduce((obj, key) =>
(obj && obj[key] !== 'undefined') ? obj[key] : undefined, nestedObj);
}
// pass in your object structure as array elements
const name = getNestedObject(user, ['personalInfo', 'name']);
// to access nested array, just pass in array index as an element the path array.
const city = getNestedObject(user, ['personalInfo', 'addresses', 0, 'city']);
// this will return the city from the first address item.
<h2>RGraph AJAX functions</h2>
<a href="https://www.rgraph.net/blog/ajax.html" class="whitebut ">RGraph AJAX functions</a>
<a href="https://www.rgraph.net/canvas/ajax.html" class="whitebut ">rgraph ajax</a>
With canvas charts, the functions are located in the <k>RGraph.common.core.js</k> file and since this file is necessarily included you don't have to include anything extra to what you normally include in your page.
<h2>Testing and Automation Tools</h2>
API
application programming interfaces (APIs)
API testing is performed at the message layer
<a href="https://www.guru99.com/api-testing.html" class="whitebut ">API Testing Tutorial</a>
Appium
Appium is an open source test automation framework for use with native, hybrid and mobile web apps.
It drives iOS, Android, and Windows apps using the WebDriver protocol.
<a href="http://appium.io/" class="whitebut ">Appium</a>
Database Testing
<a href="https://www.softwaretestinghelp.com/database-testing-process/" class="whitebut ">Database Testing Complete Guide</a>
ETL
ETL stands for Extract-Transform-Load
to ensure that the data that has been loaded from a source to the destination after business transformation is accurate.
It also involves the verification of data at various middle stages that are being used between source and destination.

<a href="https://www.guru99.com/utlimate-guide-etl-datawarehouse-testing.html" class="whitebut ">ETL Testing or Data Warehouse Testing Tutorial</a>
Informatica
Informatica Powercenter ETL/Data Integration tool is the most widely used tool and in the common term when we say Informatica, it refers to the Informatica PowerCenter tool for ETL.
<a href="https://www.guru99.com/introduction-informatica.html" class="whitebut ">Informatica</a>
Mobile with Automation
Mobile automation can be done using many tools
<a href="https://economictimes.indiatimes.com/definition/mobile-automation" class="whitebut ">Mobile automation</a>
QC/ALM
HP Application LifeCycle Management (ALM) is the latest incarnation of flagship test management tool Quality Center(QC).
<a href="https://www.tutorialspoint.com/qc/qc_overview.htm" class="whitebut ">HP ALM /Quality Center Tutorial</a>
UFT/QTP
test automation using QTP tool
QTP stands for QuickTest Professional
helps testers to perform an automated functional testing seamlessly, without monitoring, once script development is complete.
<a href="https://www.tutorialspoint.com/qtp/qtp_overview.htm" class="whitebut ">QTP</a>
Scrum master
A scrum master is the facilitator for an agile development team.
Scrum is a methodology that allows a team to self-organize and make changes quickly, in accordance with agile principles.
The scrum master manages the process for how information is exchanged.
https://www.visual-paradigm.com/scrum/what-is-scrum-master/
Selenium
Selenium automates browsers
Primarily it is for automating web applications for testing purposes
web-based administration tasks can be automated
<a href="https://www.selenium.dev/" class="whitebut ">Selenium</a>
SOAP UI
SoapUI is an open-source web service testing application for Simple Object Access Protocol (SOAP) and representational state transfers (REST).

web service inspection, invoking, development, simulation and mocking, functional testing, load and compliance testing.

SoapUI is cross-platform.

<a href="https://www.soapui.org/" class="whitebut ">SOAP UI</a>
<h2>clean up RGraph</h2>
<a href="https://www.easyafrikaans.com/easyafrikaans/js/RGraph/demos/basic-clear.html" class="whitebut ">example of clearing your canvas</a>
<a href="https://www.rgraph.net/canvas/updating.html" class="whitebut ">updating rgraph</a>
<a href="https://www.easyafrikaans.com/easyafrikaans/js/RGraph/demos/" class="whitebut ">Index of RGraph demos</a>
<span class="red">RGraph.clear(document.getElementById("cvs"));</span>
RGraph.Reset(document.getElementById('cvs'))
<h2>to remove an element at that index</h2>
notvisitedList.splice(topicpointer, 1);
<h2>to remove an element at with that value</h2>
var index = notvisitedList.indexOf(topicpointer);
notvisitedList.splice(index, 1);
<h2>get href value of an anchor tag</h2>
Use the <k>.prop()</k> method
var href = $('a').prop('href');
Use the <k>.text()</k> method.
var text = $('a').text();
Use the <k>querySelector()</k> which will return the first anchor tag within the document.

Then we can directly access the href property to get the exact value of the href attribute.
var href = document.querySelector('a').href;
theElement.match(/href="([^"]*)/)[1];
theElement.getAttribute("href");
document.getElementById("aaa").href;
var LibDocsList = [];
$('a[href*="LibDocs"]').each(function(i) {
var anchor = $(this).prop('href'); anchorNumber = i; anchorLength = anchorNumber;
LibDocsList.push(anchor);
});
<h2>random jump to some pages</h2>
function randomLinkTo() {
linkpointer = Math.floor(Math.random() * notvisitedList.length);
linkToAddr = LibDocsList[linkpointer]
var index = notvisitedList.indexOf(linkpointer);
notvisitedList.splice(index, 1);
window.open(linkToAddr, "_blank");
}
// following code must be at end to allow full page loaded OK
var LibDocsList = [];
$('a[href*="LibDocs"]').each(function(i) {
var anchor = $(this).prop('href'); anchorNumber = i; anchorLength = anchorNumber;
LibDocsList.push(anchor);
});
var totalLength = LibDocsList.length - 1
var notvisitedList = [...Array(totalLength).keys()];
<h2>document on ready load script</h2>
$(document).ready(function(){
$('&lt;script/>',{type:'text/javascript', src:'http://williamkpchan.github.io/LibDocs/readbook.js'}).appendTo('head');
}); 
<h2>add bootstrap table styles to pandoc tables</h2>
&lt;script>
function bootstrapStylePandocTables() {
$('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
bootstrapStylePandocTables();
});
<h2>dynamically load mathjax for compatibility with self-contained</h2>
(function () {
var script = document.createElement("script");
script.type = "text/javascript";
script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
document.getElementsByTagName("head")[0].appendChild(script);
})();
&lt;/script>
<h2>JavaScript HTML Input Examples</h2>
Examples of using JavaScript to access and manipulate HTML 
input objects.
<h3>Button Object</h3>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_disabled">Disable a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_name">Find the name of a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_type">Find the type of a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_value">Find the value of a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_text">Find the text displayed on a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_form">Find the id of the form a button belongs to</a>
<h3>Form Object</h3>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_submit">Submit a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_reset">Reset a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_elements">Find the value of each element in a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_acceptcharset">Find the accepted character set of a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_action">Find the action attribute of a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_enctype">Find the value of the enctype attribute in a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_length">Find the number of elements in a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_method">Find the method for sending form data</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_name">Find the name of a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_target">Find the target of a form</a>
<h3>Option and Select Objects</h3>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_disabled">Disable and enable a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_form">Get the id of the form that contains the dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_length">Get the number of options in the dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_size">Turn the dropdown list into a multiline list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_multiple">Select multiple options in a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_option">Display the selected option in a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_options">Display all options from a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_option_index">Display the index of the selected option in a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_option_settext">Change the text of the selected option</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_remove">Remove options from a dropdown list</a>
<h2>close a window using Javascript</h2>
some browsers will give you a warning
Javascript code is;
window.close("","_parent","");
<h2>attach script to html</h2>
document.writeln("&lt;script type=\"text/javascript\">");
document.writeln("\"https://secure.\" : \"http://www.\");");
document.writeln("document.write(\"&lt;sc\"+\"ript type='text/javascript' src='\" +");
document.writeln("href="http://statcounter.com/\" target=\"_blank\">&lt;img ");
document.writeln("class=\"statcounter\" ");
document.writeln("alt=\"web counter\">&lt;/a>&lt;/div>&lt;/noscript>");
<h2>spread operator</h2>
The spread operator in JavaScript is a useful syntax for adding elements to an array, combining arrays into one larger one, spreading an array inside the arguments of a function, and more.
// Concatenating arrays and objects
let arr1 = [1,2,3]; 
let arr2 = [4,5]; 
let newArray = [...arr1,...arr2]; 
console.log(newArray);
// Output: [ 1, 2, 3, 4, 5 ] 
// Copying array elements
let arr = ["a","b","c"]; 
let newArray = [...arr]; 
console.log(newArray);
// Output: ["a", "b", "c"]
// Expanding arrays
let arr = ["a","b"]; 
let newArray = [...arr,"c","d"]; 
console.log(newArray);
// Output: ["a", "b", "c", "d"]
// Merging objects
const userBasic = { name: "Jen", age: 22,
}; 
const userMoreInfo = { country: "Argentina", city: "Córdoba", 
}; 
const user = {...

userBasic, ...

userMoreInfo};
// Output: {  name: "Jen",  age: 22, country: "Argentina", city: "Córdoba" }
<h2>Try fabric JS to convert canvas to svg</h2>
http://jsfiddle.net/Nofiden/3hcyjo0e/2/
<a href="http://fabricjs.com/fabric-intro-part-1" class="whitebut ">fabric-intro</a>
<a href="https://svgjs.com/docs/3.0/" class="whitebut ">SVG.js lightweight library for manipulating and animating SVG</a>
HTML
<canvas id="canvas" width=1024 height=1020></canvas>
<button id="canvas2svg">Canvas 2 SVG</button>
JS
var canvas = new fabric.Canvas('canvas', { isDrawingMode: true });
//var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
$("#canvas2svg").click(function(){
canvas.isDrawingMode = false;
alert(canvas.toSVG());
});
<h2>LocalStorage, sessionStorage</h2>
Web storage objects <k>localStorage</k> and <k>sessionStorage</k> allow to save key/value pairs in the browser.
What’s interesting about them is that the data survives a page refresh (for <k>sessionStorage</k>) and even a full browser restart (for <k>localStorage</k>).

We already have cookies.

Why additional objects?
Unlike cookies, web storage objects are not sent to server with each request.

Because of that, we can store much more.

Most browsers allow at least 2 megabytes of data (or more) and have settings to configure that.
Also unlike cookies, the server can’t manipulate storage objects via HTTP headers.

Everything’s done in JavaScript.
The storage is bound to the origin (domain/protocol/port triplet).

That is, different protocols or subdomains infer different storage objects, they can’t access data from each other.
Both storage objects provide same methods and properties:
<k>setItem(key, value)</k> – store key/value pair.
<k>getItem(key)</k> – get the value by key.
<k>removeItem(key)</k> – remove the key with its value.
<k>clear()</k> – delete everything.
<k>key(index)</k> – get the key on a given position.
<k>length</k> – the number of stored items.
As you can see, it’s like a <k>Map</k> collection (<k>setItem/getItem/removeItem</k>), but also allows access by index with <k>key(index)</k>.
<h3>localStorage demo</h3>
The main features of <k>localStorage</k> are:
Shared between all tabs and windows from the same origin.
The data does not expire.

It remains after the browser restart and even OS reboot.
For instance, if you run this code…
<k>localStorage.setItem('test', 1);</k>
…And close/open the browser or just open the same page in a different window, then you can get it like this:
<k>alert( localStorage.getItem('test') ); // 1</k>
We only have to be on the same origin (domain/port/protocol), the url path can be different.
The <k>localStorage</k> is shared between all windows with the same origin, so if we set the data in one window, the change becomes visible in another one.
<h3>Object-like access</h3>
We can also use a plain object way of getting/setting keys, like this:
<k>// set key
localStorage.test = 2;
// get key
alert( localStorage.test ); // 2
// remove key
delete localStorage.test;</k>
That’s allowed for historical reasons, and mostly works, but generally not recommended, because:
If the key is user-generated, it can be anything, like <k>length</k> or <k>toString</k>, or another built-in method of <k>localStorage</k>.

In that case <k>getItem/setItem</k> work fine, while object-like access fails:
<k>let key = 'length';
localStorage[key] = 5; // Error, can't assign length</k>
There’s a <k>storage</k> event, it triggers when we modify the data.

That event does not happen for object-like access.

We’ll see that later in this chapter.
<h3>Looping over keys</h3>
As we’ve seen, the methods provide “get/set/remove by key” functionality.

But how to get all saved values or keys?
Unfortunately, storage objects are not iterable.
One way is to loop over them as over an array:
<k>for(let i=0; i&lt;localStorage.length; i++) {
let key = localStorage.key(i);
alert(`${key}: ${localStorage.getItem(key)}`);
}</k>
Another way is to use <k>for key in localStorage</k> loop, just as we do with regular objects.
It iterates over keys, but also outputs few built-in fields that we don’t need:
<k>// bad try
for(let key in localStorage) {
alert(key); // shows getItem, setItem and other built-in stuff
}</k>
…So we need either to filter fields from the prototype with <k>hasOwnProperty</k> check:
<k>for(let key in localStorage) {
if (!localStorage.hasOwnProperty(key)) {
continue; // skip keys like "setItem", "getItem" etc
}
alert(`${key}: ${localStorage.getItem(key)}`);
}</k>
…Or just get the “own” keys with <k>Object.keys</k> and then loop over them if needed:
<k>let keys = Object.keys(localStorage);
for(let key of keys) {
alert(`${key}: ${localStorage.getItem(key)}`);
}</k>
The latter works, because <k>Object.keys</k> only returns the keys that belong to the object, ignoring the prototype.
<h3>Strings only</h3>
Please note that both key and value must be strings.
If were any other type, like a number, or an object, it gets converted to string automatically:
<k>sessionStorage.user = {name: "John"};
alert(sessionStorage.user); // [object Object]</k>
We can use <k>JSON</k> to store objects though:
<k>sessionStorage.user = JSON.stringify({name: "John"});
// sometime later
let user = JSON.parse( sessionStorage.user );
alert( user.name ); // John</k>
Also it is possible to stringify the whole storage object, e.g.

for debugging purposes:
<k>// added formatting options to JSON.stringify to make the object look nicer
alert( JSON.stringify(localStorage, null, 2) );</k>
<h3>sessionStorage</h3>
The <k>sessionStorage</k> object is used much less often than <k>localStorage</k>.
Properties and methods are the same, but it’s much more limited:
The <k>sessionStorage</k> exists only within the current browser tab.
Another tab with the same page will have a different storage.
But it is shared between iframes in the same tab (assuming they come from the same origin).
The data survives page refresh, but not closing/opening the tab.
Let’s see that in action.
Run this code…
<k>sessionStorage.setItem('test', 1);</k>
…Then refresh the page.

Now you can still get the data:
<k>alert( sessionStorage.getItem('test') ); // after refresh: 1</k>
…But if you open the same page in another tab, and try again there, the code above returns <k>null</k>, meaning “nothing found”.
That’s exactly because <k>sessionStorage</k> is bound not only to the origin, but also to the browser tab.

For that reason, <k>sessionStorage</k> is used sparingly.
<h3>Storage event</h3>
When the data gets updated in <k>localStorage</k> or <k>sessionStorage</k>, storage event triggers, with properties:
<k>key</k> – the key that was changed (<k>null</k> if <k>.clear()</k> is called).
<k>oldValue</k> – the old value (<k>null</k> if the key is newly added).
<k>newValue</k> – the new value (<k>null</k> if the key is removed).
<k>url</k> – the url of the document where the update happened.
<k>storageArea</k> – either <k>localStorage</k> or <k>sessionStorage</k> object where the update happened.
The important thing is: the event triggers on all <k>window</k> objects where the storage is accessible, except the one that caused it.
Let’s elaborate.
Imagine, you have two windows with the same site in each.

So <k>localStorage</k> is shared between them.
You might want to open this page in two browser windows to test the code below.
If both windows are listening for <k>window.onstorage</k>, then each one will react on updates that happened in the other one.
<k>// triggers on updates made to the same storage from other documents
window.onstorage = event => { // same as window.addEventListener('storage', event => {
if (event.key != 'now') return;
alert(event.key + ':' + event.newValue + " at " + event.url);
};
localStorage.setItem('now', Date.now());</k>
Please note that the event also contains: <k>event.url</k> – the url of the document where the data was updated.
Also, <k>event.storageArea</k> contains the storage object – the event is the same for both <k>sessionStorage</k> and <k>localStorage</k>, so <k>event.storageArea</k> references the one that was modified.

We may even want to set something back in it, to “respond” to a change.
<strong>That allows different windows from the same origin to exchange messages.</strong>
Modern browsers also support Broadcast channel API, the special API for same-origin inter-window communication, it’s more full featured, but less supported.

There are libraries that polyfill that API, based on <k>localStorage</k>, that make it available everywhere.
<h3>Summary</h3>
Web storage objects <k>localStorage</k> and <k>sessionStorage</k> allow to store key/value in the browser.
Both <k>key</k> and <k>value</k> must be strings.
The limit is 5mb+, depends on the browser.
They do not expire.
The data is bound to the origin (domain/port/protocol).
<k>localStorage</k>
Shared between all tabs and windows with the same origin
Visible within a browser tab, including iframes from the same origin
<k>sessionStorage</k>
Survives browser restart
Survives page refresh (but not tab close)
API:
<k>setItem(key, value)</k> – store key/value pair.
<k>getItem(key)</k> – get the value by key.
<k>removeItem(key)</k> – remove the key with its value.
<k>clear()</k> – delete everything.
<k>key(index)</k> – get the key number <k>index</k>.
<k>length</k> – the number of stored items.
Use <k>Object.keys</k> to get all keys.
We access keys as object properties, in that case <k>storage</k> event isn’t triggered.
Storage event:
Triggers on <k>setItem</k>, <k>removeItem</k>, <k>clear</k> calls.
Contains all the data about the operation (<k>key/oldValue/newValue</k>), the document <k>url</k> and the storage object <k>storageArea</k>.
Triggers on all <k>window</k> objects that have access to the storage except the one that generated it (within a tab for <k>sessionStorage</k>, globally for <k>localStorage</k>).
<h2>Complete Guide To Node Client-Server Communication</h2>
This covers the following forms of client-server connection:
XMLHttpRequest
Server-Sent Events
WebSocket
HTTP/2
Server to server
You can check out the complete source code for each implementation <a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication" rel="noopener nofollow">here</a>.
Before we begin, I should note that there is no one best protocol or API for client/server communication.

Every non-trivial application will require a mix of different transports based on a variety of requirements: interaction with the browser cache, protocol overhead, message latency, reliability, type of data transfer, and more.

Some protocols may offer low-latency delivery (e.g., Server-Sent Events, WebSocket), but may not meet other critical criteria, such as the ability to leverage the browser cache or support efficient binary transfers in all cases.

Here is visualization to help illustrate how XHR, SSE, and WebSockets differ in their implementations.
<img class="lazy" data-src="https://miro.medium.com/max/2048/0*1LzuWqDF3n107sFm.png">
CLIENT SERVER RELATIONSHIP
<strong>XHR</strong> is optimized for “transactional” request-response communication: the client sends the full, well-formed HTTP request to the server, and the server responds with a full response.

There is no support for request streaming, and until the Streams API is available, no reliable cross-browser response streaming API.
<strong>SSE</strong> enables efficient, low-latency server-to-client streaming of text-based data: the client initiates the SSE connection, and the server uses the event source protocol to stream updates to the client.

The client can’t send any data to the server after the initial handshake.
<strong>WebSocket</strong> is the only transport that allows bidirectional communication over the same TCP connection (Figure 17–2): the client and server can exchange messages at will.

As a result, WebSocket provides low latency delivery of text and binary application data in both directions.
<h3><a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication/tree/master/client-server-sockets" rel="noopener nofollow">WebSocket Client-Server Demo</a></h3>
WebSockets is a technology, based on the <em>ws</em> protocol, that makes it possible to establish a continuous full-duplex connection stream between a client and a server.

A typical websocket client would be a user’s browser, but the protocol is platform independent.

It is the closest API to a raw network socket in the browser.

Except a WebSocket connection is also much more than a network socket, as the browser abstracts all the complexity behind a simple API and provides a number of additional services:
Connection negotiation and same-origin policy enforcement
Interoperability with existing HTTP infrastructure
Message-oriented communication and efficient message framing
Subprotocol negotiation and extensibility
This is a demo shows a demo of a client connecting to a websocket server and sharing data.

Here is the server.js of a websocket.
'use strict';
const WebSocketServer = require('ws').Server
const wss = new WebSocketServer({ port: 8081 });
wss.on('connection', ((ws) => {
ws.on('message', (message) => {
console.log(`received: ${message}`);
});
ws.on('end', () => {
console.log('Connection ended...');
});
ws.send('Hello Client');
}));
Here is the client.js of a websocket.
console.log('open: ');
var ws = new WebSocket("ws://127.0.0.1:8081");
ws.onopen = function (event) {
console.log('Connection is open ...');
ws.send("Hello Server");
};ws.onerror = function (err) {
console.log('err: ', err);
}ws.onmessage = function (event) {
console.log(event.data);
document.body.innerHTML += event.data + '&lt;br>';
};ws.onclose = function() {
console.log("Connection is closed...");
}
<h3><a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication/tree/master/server-side-events" rel="noopener nofollow">Stream Updates with Server-Sent Events (SSE)</a></h3>
SSEs are sent over traditional HTTP.

That means they do not require a special protocol or server implementation to get working.

WebSockets on the other hand, require full-duplex connections and new Web Socket servers to handle the protocol.

In addition, Server-Sent Events have a variety of features that WebSockets lack by design such as automatic reconnection, event IDs, and the ability to send arbitrary events.
<h3>Server-Sent Events vs.

WebSockets</h3>
Why would you choose Server-Sent Events over WebSockets? Good question.

One reason SSEs have been kept in the shadow is because later APIs like WebSockets provide a richer protocol to perform bi-directional, full-duplex communication.

Having a two-way channel is more attractive for things like games, messaging apps, and for cases where you need near real-time updates in both directions.

However, in some scenarios data doesn’t need to be sent from the client.

You simply need updates from some server action.

A few examples would be friends’ status updates, stock tickers, news feeds, or other automated data push mechanisms (e.g.

updating a client-side Web SQL Database or IndexedDB object store).

If you’ll need to send data to a server, XMLHttpRequest is always a friend.
Here is the server.js of our Server Sent Event, we will be sending out data to the client every 5 seconds with an updated timestamp via SSE.
'use strict';const http = require('http');
const util = require('util');
const fs = require('fs');http.createServer((req, res) => {
debugHeaders(req);if (req.headers.accept &amp;&amp; req.headers.accept == 'text/event-stream') {
if (req.url == '/events') {
sendSSE(req, res);
} else {
res.writeHead(404);
res.end();
}
} else {
res.writeHead(200, {'Content-Type': 'text/html'});
res.write(fs.readFileSync(__dirname + '/index.html'));
res.end();
}
}).listen(8000);const sendSSE = (req, res) => {
res.writeHead(200, {
'Content-Type': 'text/event-stream',
'Cache-Control': 'no-cache',
'Connection': 'keep-alive'
});const id = (new Date()).toLocaleTimeString();setInterval(() => {
constructSSE(res, id, (new Date()).toLocaleTimeString());
}, 5000);constructSSE(res, id, (new Date()).toLocaleTimeString());
//res.end();
}const constructSSE = (res, id, data) => {
res.write('id: ' + id + '\n');
res.write("data: " + data + '\n\n');
}const debugHeaders = (req) => {
util.puts('URL: ' + req.url);
for (let key in req.headers) {
util.puts(key + ': ' + req.headers[key]);
}
util.puts('\n\n');
}
And here is the client.js which is reference by the index.html on the client side.

Notice how the client never sends out a formal request for data with SSE’s.

Once the intial connection has been made with the server then the plain text data can be sent to the client as needed!
var source = new EventSource('/events');
source.onmessage = function(e) {
document.body.innerHTML += e.data + ';
};
<h3><a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication/tree/master/xhr" rel="noopener nofollow">XMLHttpRequest (XHR)</a></h3>
XMLHttpRequest (XHR) is a browser-level API that enables the client to script data transfers via JavaScript.

XHR made its first debut in Internet Explorer 5, became one of the key technologies behind the Asynchronous JavaScript and XML (AJAX) revolution, and is now a fundamental building block of nearly every modern web application.
XMLHTTP changed everything.

It put the “D” in DHTML.

It allowed us to asynchronously get data from the server and preserve document state on the client… The Outlook Web Access (OWA) team’s desire to build a rich Win32 like application in a browser pushed the technology into IE that allowed AJAX to become a reality.

— Jim Van Eaton Outlook Web Access: A catalyst for web evolution
<img class="lazy" data-src="https://miro.medium.com/max/2048/0*Z7iLEDVToDLrzN-o.png">
Here I am running a simple Express server with a simple route to send requested data to the Client.
'use strict';var express = require('express');
var app = express();app.use(express.static(`${__dirname}/public`));app.get('/api', function(req, res){
res.send((new Date()).toLocaleTimeString());
});app.listen(3000);
Here is the javascript file linked to my index.html on the client side.

I am using the baked in XHR methods as opposed to jQuery since I love to use vanilla JavaScript whenever possible.
'use strict'function reqListener (data) {
document.body.innerHTML += this.responseText + '&lt;br>';
}setInterval(function () {
var oReq = new XMLHttpRequest();
oReq.addEventListener("load", reqListener);
oReq.open("GET", "/api");
oReq.send();
}, 3000);
In my Github repo, I cover two more use cases not referenced here, server to server communications and HTTP/2.

If you are curious about those forms of communication check it out.

One word about HTTP/2 before wrapping up.

HTTP/2 is the future of Client-Server communication, but it is a protocol built on top of HTTP/1.1 which means that all of these forms of communicating will be still be relevant in the future, just the means that they are transmitted will be updated.
As you can see there are a ton of different ways you can send data between a client and server.

<h2>Client-server communication in Node.js</h2>
I would use websockets for this.

Once you've set up the connection you can initiate messages from either side.

The WS npm package makes this pretty easy.
Server example (using the ws npm package):
const WebSocket = require('ws');
const wss = new WebSocket.Server({ port: 8080 });    // Set up server
wss.on('connection', function connection(ws) { //   when client connects
// when client sends something
ws.on('message', function incoming(message) {
console.log('received: %s', message);
});
// Send a message
ws.send('Hello client!');
});
Client example (no need for any package, it's built-in) :
const socket = new WebSocket('ws://localhost:8080');  // Create WebSocket
socket.addEventListener('open', function (event) {    // Connection opened
socket.send('Hello Server!');
});
socket.addEventListener('message', function (event) { // Listen for messages
console.log('Message from server ', event.data);
});
There are alternatives if you can't use websockets, such as polling (where the client periodically calls the server to see if theres a message), and long-polling (where the server holds a http request open for an artificially long period of time until a message is ready).
<h3>other method: Server side</h3>
http.createServer(function(req, res) {
if (req.method == 'GET') {
} else if (req.method == 'POST') {
var body = '';
req.on('data', function(data) {
body += data;
});
req.on('end', function() {
console.log("We have received your request successfully.");
});
}
res.end("ok");
})
<h2>Ways to Remove Elements From Array</h2>
JavaScript arrays allow you to group values and iterate over them.

You can add and remove array elements in different ways.

Unfortunately there is not a simple Array.remove method.
So, how do you delete an element from a JavaScript array?
Instead of a delete method, the JavaScript array has a variety of ways you can clean array values.
You can remove elements from the end of an array using pop, from the beginning using shift, or from the middle using splice.

The JavaScript Array filter method to create a new array with desired items, a more advanced way to remove unwanted elements.
Removing Elements from End of a JavaScript Array
Removing Elements from Beginning of a JavaScript Array
Using Splice to Remove Array Elements
Removing Array Items By Value Using Splice
The Lodash Array Remove Method
Making a Remove Method
Explicitly Remove Array Elements Using the Delete Operator
Clear or Reset a JavaScript Array
Summary
There are different methods and techniques you can use to remove elements from JavaScript arrays:
pop - Removes from the End of an Array
shift - Removes from the beginning of an Array
splice - removes from a specific Array index
filter - allows you to programatically remove elements from an Array
You will also learn some other ways you can remove elements from an array that may not be so obvious, like with <a href="https://lodash.com">LoDash</a>.
<h3>Removing Elements from End of a JavaScript Array</h3>
JavaScript Array elements can be removed from the end of an array by setting the length property to a value less than the current value.

Any element whose index is greater than or equal to the new length will be removed.
<k>
var ar = [1, 2, 3, 4, 5, 6];
ar.length = 4; // set length to remove elements
console.log( ar ); // [1, 2, 3, 4]
</k>
The pop method removes the last element of the array, returns that element, and updates the length property.

The pop method modifies the array on which it is invoked, This means unlike using delete the last element is removed completely and the array length reduced.

<k>
var ar = [1, 2, 3, 4, 5, 6];
ar.pop(); // returns 6
console.log( ar ); // [1, 2, 3, 4, 5]
</k><h3>Removing Elements from Beginning of a JavaScript Array</h3>
How do you remove the first element of a JavaScript array?
The shift method works much like the pop method except it removes the first element of a JavaScript array instead of the last.
There are no parameters since the shift method only removed the first array element.

When the element is removed the remaining elements are shifted down.
<k>
var ar = ['zero', 'one', 'two', 'three'];
ar.shift(); // returns "zero"
console.log( ar ); // ["one", "two", "three"]
</k>
The shift method returns the element that has been removed, updates the indexes of remaining elements, and updates the length property.

It modifies the array on which it is invoked.
If there are no elements, or the array length is 0, the method returns undefined.
<h3>Using Splice to Remove Array Elements in JavaScript</h3>
The splice method can be used to add or remove elements from an array.

The first argument specifies the location at which to begin adding or removing elements.

The second argument specifies the number of elements to remove.

The third and subsequent arguments are optional; they specify elements to be added to the array.
Here we use the splice method to remove two elements starting from position three (zero based index):
<k>
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
var removed = arr.splice(2,2);
</k>
An array containing the removed elements is returned by the splice method.

You can see the removed array contains [3, 4] and the original array contains the remaining values.
The splice method can also be used to remove a range of elements from an array.
<k>
var list = ["bar", "baz", "foo", "qux"];
list.splice(0, 2); 
// Starting at index position 0, remove two elements ["bar", "baz"] and retains ["foo", "qux"].
</k><h3>Removing Array Items By Value Using Splice</h3>
If you know the value you want to remove from an array you can use the splice method.

First you must identify the index of the target item.

You then use the index as the start element and remove just one element.
<k>
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
for( var i = 0; i &lt; arr.length; i++){ 
if ( arr[i] === 5) { 
arr.splice(i, 1); 
}
}
//=> [1, 2, 3, 4, 6, 7, 8, 9, 0]
</k>
This is a simple example where the elements are integers.

If you have an array of objects you would need a more sophisticated routine.
This works if you only want to remove a single item.

If you want to remove multiple items that match your criteria there is a glitch.
As the items are removed from the array the index still increments and the next item after your matched value is skipped.
The simple solution is to modify the above example to decrement the index variable so it does not skip the next item in the array.
<k>
var arr = [1, 2, 3, 4, 5, 5, 6, 7, 8, 5, 9, 0];
for( var i = 0; i &lt; arr.length; i++){ 
if ( arr[i] === 5) { 
arr.splice(i, 1); 
i--; 
}
}
//=> [1, 2, 3, 4, 6, 7, 8, 9, 0]
</k>
In the modified example I added 2 additional 5 values to the array.

I also added 'i--;' after the splice call.
Now when you execute the loop it will remove every matching item.
Thanks to Kristian Sletten for pointing out the issue with the loop skipping the following item.
<h3>Using the Array filter Method to Remove Items By Value</h3>
Unlike the splice method, filter creates a new array.

filter() does not mutate the array on which it is called, but returns a new array.
filter() has a single parameter, a callback method.

The callback is triggered as the filter method iterates through the array elements.

It will pass three values to the callback: the current value or element, the current array index and the full array.
The callback method should return either true or false.

It is your responsibility to test the value (element) to see if it meets your criteria.

If it does you can return true.

Elements that return true are added to the new, filtered array.
<k>
var array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
var filtered = array.filter(function(value, index, arr){ 
return value > 5;
});
//filtered => [6, 7, 8, 9]
//array => [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]
</k>
You should note a new array containing matching values is returned.

The original array is left untouched.

I find this useful because I often want to retain an original data source, but retrieve subsets based on different logic sets.
<h3>The Lodash Array Remove Method</h3>
Sometimes utility libraries are the best way to solve more complex problems.

Lodash provides a rich set of array manipulation methods, one being remove.
The Lodash remove method works much like the array filter method, but sort of in reverse.

It does not save the original array values, but removes matching elements.

It returns the matching elements as a new array.
<k>var array = [1, 2, 3, 4];var evens = _.remove(array, function(n) { return n % 2 === 0;});console.log(array);// => [1, 3]console.log(evens);// => [2, 4]</k><h3>Making a Remove Method</h3>
As I mentionmed before, there is no native Array.remove method.

The Lodash method does solve this problem, but you may not always want to use Lodash.

This does not mean you cannot create a utility method.

John Resig gave us a <a href="https://johnresig.com/blog/javascript-array-remove/">model to follow</a>, however he extended the Array prototype, which is a bad idea.
Instead I created an Array remove utility method that can be added to a helper or utility library.

Like the Lodash remove method the first parameter is the target array.

It uses Array.filter to return elements not matching a value.
<k>
function arrayRemove(arr, value) { 
return arr.filter(function(ele){ 
return ele != value; 
});
}
var result = arrayRemove(array, 6);
// result = [1, 2, 3, 4, 5, 7, 8, 9, 0]
</k>This method is simple, it assumes simple values like numbers or strings.

You could modify this method to use a customcomparison method, but I think it would be easier to just use the filter method directly.
<h3>Explicitly Remove Array Elements Using the Delete Operator</h3>
You can remove specific array elements using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete" rel="noopener" target="_blank">delete operator</a>:
<k>
var ar = [1, 2, 3, 4, 5, 6];
delete ar[4]; // delete element with index 4
console.log( ar ); 
// [1, 2, 3, 4, undefined, 6]
alert( ar ); 
// 1,2,3,4,,6
</k>
Using the delete operator does not affect the length property.

Nor does it affect the indexes of subsequent elements.

The array becomes sparse, which is a fancy way of saying the deleted item is not removed but becomes undefined.

Compare using delete with the splice method described below.
The delete operator is designed to remove properties from JavaScript objects, which arrays are objects.
The reason the element is not actually removed from the array is the delete operator is more about freeing memory than deleting an element.

The memory is freed when there are no more references to the value.
<h3>Clear or Reset a JavaScript Array</h3>
What if you want to empty an entire array and just dump all of it's elements?
There are a couple of techniques you can use to create an empty or new array.
The simplest and fastest technique is to set an array variable to an empty array:
<k>
var ar = [1, 2, 3, 4, 5, 6];
//do stuffar = [];
//a new, empty array!
</k>
The problem this can create is when you have references to the variable.

The references to this variable will not change, they will still hold the original array's values.

This of course can create a bug🐛.
This is an over simplified example of this scenario:
<k>
var arr1 = [1, 2, 3, 4, 5, 6];
var arr2 = arr1; 
// Reference arr1 by another variable arr1 = [];
console.log(arr2); 
// Output [1, 2, 3, 4, 5, 6]
</k>
A simple trick to clear an array is to set its length property to 0.
<k>
var ar = [1, 2, 3, 4, 5, 6];
console.log(ar); 
// Output [1, 2, 3, 4, 5, 6]
ar.length = 0;
console.log(ar); 
// Output []
</k>
Another, sort of unnatural technique, is to use the splice method, passing the array length as the 2nd parameter.

This will return a copy of the original elements, which may be handy for your scenario.
<k>
var ar = [1, 2, 3, 4, 5, 6];
console.log(ar); 
// Output [1, 2, 3, 4, 5, 6]
ar.splice(0, ar.length);
console.log(ar); 
// Output []
</k>
The last two techniques don't create a new array, but change the array's elements.

This means references should also update.
There is another way, using a while loop.

It feels a little odd to me, but at the same time looks fancy, so it may impress some friends!
<k>
var ar = [1, 2, 3, 4, 5, 6];
console.log(ar); 
// Output [1, 2, 3, 4, 5, 6] 
while (ar.length) { 
ar.pop(); 
}
console.log(ar); 
// Output []
</k>
Not a way I would go about clearing a JavaScript array, but it works and it is readable.

Some performance test have also shown this to be the fastest technique, so maybe it is better than I originally thought!
<h3>Summary</h3>
Removing JavaScript Array items is important to managing your data.

There is not a single 'remove' method available, but there are different methods and techniques you can use to purge unwanted array items.
<h2>four flavors of Object-Oriented Programming</h2>
There are four ways to write Object-Oriented Programming in JavaScript.

They are:
Using Constructor functions
Using Classes
Using Objects Linking to Other Objects (OLOO)
Using Factory functions
<h3><strong>Using Constructor functions</strong></h3>
Constructors are functions that contain a <k>this</k> keyword.
<k><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
<span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
<span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
<span class="green">}</span></k>
<k>this</k> lets you store (and access) unique values created for each instance.

You can create an instance with the <k>new</k> keyword.
<k><span class="blue">const</span> chris <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span>
<span class="blue">const</span> zell <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Zell'</span><span class="green">,</span> <span class="gray">'Liew'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>zell<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Zell</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>zell<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Liew</span></k>
<h3><strong>Class syntax</strong></h3>
Classes are said to be the “syntactic sugar” of Constructor functions.

As in, Classes are an easier way of writing Constructor functions.
There’s serious contention about whether Classes are bad (like <a href="https://everyday.codes/javascript/please-stop-using-classes-in-javascript/">this</a> and <a href="https://www.toptal.com/javascript/es6-class-chaos-keeps-js-developer-up">this</a>).

We’re not going to dive into those arguments here.

Instead, we’re just going to look at how to write code with Classes and decide whether Classes are better than constructors based on the code we write.
Classes can be written with the following syntax:
<k><span class="blue">class</span> <span class="lime">Human</span> <span class="green">{</span>
<span class="purple">constructor</span><span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span>
<span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
<span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
<span class="green">}</span>
<span class="green">}</span></k>
Notice the <k>constructor</k> function contains the same code as the Constructor syntax above? We need to do this since we want to initialize values into <k>this</k>.

(We can skip <k>constructor</k> if we don’t need to initialize values.

More on this later under Inheritance).
At first glance, classes seem to be inferior to constructors — there’s more code to write! Hold your horses and don’t form a conclusion at this point.

We have a lot more to cover.

Classes begin to shine later.
As before, you can create an instance with the <k>new</k> keyword.
<k><span class="blue">const</span> chris <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></k>
<h3><strong>Objects Linking to Other Objects (OLOO)</strong></h3>
OLOO was coined and popularized by <a href="https://twitter.com/getify">Kyle Simpson</a>.

In OLOO, you define the blueprint as a normal object.

You then use a method (often named <k>init</k>, but that isn’t required in the way <k>constructor</k> is to a Class) to initialize the instance.
<k><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
<span class="purple">init</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span> <span class="green">)</span> <span class="green">{</span>
<span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
<span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
<span class="green">}</span>
<span class="green">}</span></k>
You use <k>Object.create</k> to create an instance.

After creating the instance, you need to run your <k>init</k> function.
<k><span class="blue">const</span> chris <span class="brown">=</span> Object<span class="green">.</span><span class="purple">create</span><span class="green">(</span>Human<span class="green">)</span>
chris<span class="green">.</span><span class="purple">init</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></k>
You can chain <k>init</k> after <k>Object.create</k> if you returned <k>this</k> inside <k>init</k>.
<k><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
<span class="purple">init</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
<span class="gray">// ...</span>
<span class="blue">return</span> <span class="blue">this</span> 
<span class="green">}</span>
<span class="green">}</span>
<span class="blue">const</span> chris <span class="brown">=</span> Object<span class="green">.</span><span class="purple">create</span><span class="green">(</span>Human<span class="green">)</span><span class="green">.</span><span class="purple">init</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></k>
<h3>Factory functions</h3>
Factory functions are functions that return an object.

You can return any object.

You can even return a Class instance or OLOO instance — and it’ll still be a valid Factory function.
Here’s the simplest way to create Factory functions:
<k><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
<span class="blue">return</span> <span class="green">{</span>
firstName<span class="green">,</span>
lastName
<span class="green">}</span>
<span class="green">}</span></k>
You don’t need <k>new</k> to create instances with Factory functions.

You simply call the function.
<k><span class="blue">const</span> chris <span class="brown">=</span> <span class="purple">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></k>
<hr class="wp-block-separator">
Now that we’ve seen these four OOP setup possibilities, let’s look at how you declare properties and methods on each of them so we can get a little better understanding of working with them before getting to the bigger comparisons we’re trying to make.
<hr class="wp-block-separator">
<h3 class="ticss-8991d7da">Declaring properties and methods</h3>
Methods are functions declared as an object’s property.
<k><span class="blue">const</span> someObject <span class="brown">=</span> <span class="green">{</span>
<span class="purple">someMethod</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/* ...

*/</span> <span class="green">}</span>
<span class="green">}</span></k>
In Object-Oriented Programming, there are two ways to declare properties and methods:
Directly on the instance
In the Prototype
Let’s learn to do both.
<h3><strong>Declaring properties and methods with Constructors</strong></h3>
If you want to declare a property directly on an instance, you can write the property inside the constructor function.

Make sure to set it as the property for <k>this</k>.
<k><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
<span class="gray">// Declares properties</span>
<span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
<span class="blue">this</span><span class="green">.</span>lastname <span class="brown">=</span> lastName
<span class="gray">// Declares methods</span>
<span class="blue">this</span><span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span>
<span class="green">}</span>
<span class="blue">const</span> chris <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">)</span></k>
<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997536957_constructor-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997536957_constructor-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997536957_constructor-direct.png"/></noscript></figure>
Methods are commonly declared on the Prototype because Prototype allows instances to use the same method.

It’s a smaller “code footprint.”
To declare properties on the Prototype, you need to use the <k>prototype</k> property.
<k><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
<span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
<span class="blue">this</span><span class="green">.</span>lastname <span class="brown">=</span> lastName
<span class="green">}</span>
<span class="gray">// Declaring method on a prototype</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="blue">this</span><span class="green">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span></k>
<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997564925_constructor-prototype.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997564925_constructor-prototype.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997564925_constructor-prototype.png"/></noscript></figure>
It can be clunky if you want to declare multiple methods in a Prototype.
<k><span class="gray">// Declaring methods on a prototype</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">method1</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">method2</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">method3</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span></k>
You can make things easier by using merging functions like <k>Object.assign</k>.
<k>Object<span class="green">.</span><span class="purple">assign</span><span class="green">(</span><span class="lime">Human</span><span class="green">.</span>prototype<span class="green">,</span> <span class="green">{</span>
<span class="purple">method1</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span><span class="green">,</span>
<span class="purple">method2</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span><span class="green">,</span>
<span class="purple">method3</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="green">}</span><span class="green">)</span></k>
<k>Object.assign</k> does not support the merging of Getter and Setter functions.

You need another tool.

<a href="https://zellwk.com/blog/copy-properties-of-one-object-to-another-object/">Here’s why</a>.

And here’s <a href="https://zellwk.com/blog/creating-a-deep-assign-library/">a tool</a> I created to merge objects with Getters and Setters.
<h3><strong>Declaring properties and methods with Classes</strong></h3>
You can declare properties for each instance inside the <k>constructor</k> function.
<k><span class="blue">class</span> <span class="lime">Human</span> <span class="green">{</span>
<span class="purple">constructor</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span>
<span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
<span class="blue">this</span><span class="green">.</span>lastname <span class="brown">=</span> lastName
<span class="blue">this</span><span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span>
<span class="green">}</span>
<span class="green">}</span></k>
<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997634570_class-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997634570_class-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997634570_class-direct.png"/></noscript></figure>
It’s easier to declare methods on the prototype.

You write the method after <k>constructor</k> like a normal function.
<k><span class="blue">class</span> <span class="lime">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
<span class="purple">constructor</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/* ...

*/</span> <span class="green">}</span>
<span class="purple">sayHello</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="blue">this</span><span class="green">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span>
<span class="green">}</span></k>
<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997758020_class-prototype.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997758020_class-prototype.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997758020_class-prototype.png"/></noscript></figure>
It’s easier to declare multiple methods on Classes compared to Constructors.

You don’t need the <k>Object.assign</k> syntax.

You just write more functions.
<strong>Note:</strong> there’s no <k>,</k> between method declarations in a Class.
<k><span class="blue">class</span> <span class="lime">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
<span class="purple">constructor</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/* ...

*/</span> <span class="green">}</span>
<span class="purple">method1</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="purple">method2</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="purple">method3</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="green">}</span></k>
<h3><strong>Declaring properties and methods with OLOO</strong></h3>
You use the same process for declaring properties and methods on an instance.

You assign them as a property of <k>this</k>.
<k><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
<span class="purple">init</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span>
<span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
<span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
<span class="blue">this</span><span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span>
<span class="blue">return</span> <span class="blue">this</span>
<span class="green">}</span>
<span class="green">}</span>
<span class="blue">const</span> chris <span class="brown">=</span> Object<span class="green">.</span><span class="purple">create</span><span class="green">(</span>Human<span class="green">)</span><span class="green">.</span><span class="purple">init</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">)</span></k>
<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997786485_oloo-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997786485_oloo-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997786485_oloo-direct.png"/></noscript></figure>
To declare methods in the prototype, you write the method like a normal object.
<k><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
<span class="purple">init</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span><span class="green">,</span>
<span class="purple">sayHello</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="blue">this</span><span class="green">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span>
<span class="green">}</span></k>
<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997806115_oloo-prototype.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997806115_oloo-prototype.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997806115_oloo-prototype.png"/></noscript></figure>
<h3><strong>Declaring properties and methods with Factory functions</strong></h3>
You can declare properties and methods directly by including them in the returned object.
<k><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
<span class="blue">return</span> <span class="green">{</span>
firstName<span class="green">,</span>
lastName<span class="green">,</span> 
<span class="purple">sayHello</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span>
<span class="green">}</span>
<span class="green">}</span></k>
<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997821635_ff-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997821635_ff-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997821635_ff-direct.png"/></noscript></figure>
You cannot declare methods on the Prototype when you use Factory functions.

If you really want methods on the prototype, you need to return a Constructor, Class, or OLOO instance.

(Don’t do this since it doesn’t make any sense.)
<k><span class="gray">// Do not do this</span>
<span class="blue">function</span> <span class="purple">createHuman</span> <span class="green">(</span><span class="token parameter"><span class="brown">...</span>args</span><span class="green">)</span> <span class="green">{</span>
<span class="blue">return</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="brown">...</span>args<span class="green">)</span>
<span class="green">}</span></k>
<h2>Creating and using constructors</h2>
<a href="https://www.youtube.com/watch?v=5AWRivBk0Gw" class="whitebut ">What are Classes, Objects, and Constructors?</a>
Constructors are like regular functions, but we use them with the <k>new</k> keyword.

There are two types of constructors: built-in constructors such as <k>Array</k> and <k>Object</k>, which are available automatically in the execution environment at runtime; and custom constructors, which define properties and methods for your own type of object.
A constructor is useful when you want to create multiple similar objects with the same properties and methods.

It’s a convention to capitalize the name of constructors to distinguish them from regular functions.

Consider the following code:
<k><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span><span class="purple">)</span> <span class="purple">{</span> 
<span class="gray">// unfinished code</span>
<span class="purple">}</span> 
<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="purple">)</span><span class="purple">;</span></k>
The last line of the code creates an instance of <k>Book</k> and assigns it to a variable.

Although the <k>Book</k> constructor doesn’t do anything, <k>myBook</k> is still an instance of it.

As you can see, there is no difference between this function and regular functions except that it’s called with the <k>new</k> keyword and the function name is capitalized.
<h3>Determining the type of an instance</h3>
To find out whether an object is an instance of another one, we use the <k>instanceof</k> operator:
<k>myBook <span class="orange">instanceof</span> <span class="token class-name">Book</span>    <span class="gray">// true</span>
myBook <span class="orange">instanceof</span> <span class="token class-name">String</span>  <span class="gray">// false</span></k>
Note that if the right side of the <k>instanceof</k> operator isn’t a function, it will throw an error:
<k>myBook <span class="orange">instanceof</span> <span class="purple">{</span><span class="purple">}</span><span class="purple">;</span>
<span class="gray">// TypeError: invalid 'instanceof' operand ({})</span></k>
Another way to find the type of an instance is to use the <k>constructor</k> property.

Consider the following code fragment:
<k>myBook<span class="purple">.</span>constructor <span class="token operator">===</span> Book<span class="purple">;</span>   <span class="gray">// true</span></k>
The constructor property of <k>myBook</k> points to <k>Book</k>, so the strict equality operator returns <k>true</k>.

Every object in JavaScript inherits a <k>constructor</k> property from its prototype, which points to the constructor function that has created the object:
<k><span class="orange">var</span> s <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">String</span><span class="purple">(</span><span class="token string">"text"</span><span class="purple">)</span><span class="purple">;</span>
s<span class="purple">.</span>constructor <span class="token operator">===</span> String<span class="purple">;</span>      <span class="gray">// true</span>
<span class="token string">"text"</span><span class="purple">.</span>constructor <span class="token operator">===</span> String<span class="purple">;</span> <span class="gray">// true</span>
<span class="orange">var</span> o <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Object</span><span class="purple">(</span><span class="purple">)</span><span class="purple">;</span>
o<span class="purple">.</span>constructor <span class="token operator">===</span> Object<span class="purple">;</span>      <span class="gray">// true</span>
<span class="orange">var</span> o <span class="token operator">=</span> <span class="purple">{</span><span class="purple">}</span><span class="purple">;</span>
o<span class="purple">.</span>constructor <span class="token operator">===</span> Object<span class="purple">;</span>      <span class="gray">// true</span>
<span class="orange">var</span> a <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Array</span><span class="purple">(</span><span class="purple">)</span><span class="purple">;</span>
a<span class="purple">.</span>constructor <span class="token operator">===</span> Array<span class="purple">;</span>       <span class="gray">// true</span>
<span class="purple">[</span><span class="purple">]</span><span class="purple">.</span>constructor <span class="token operator">===</span> Array<span class="purple">;</span>      <span class="gray">// true</span></k>
Note, however, that using the <k>constructor</k> property to check the type of an instance is generally considered bad practice because it can be overwritten.
<h3>Custom constructor functions</h3>
A constructor is like a cookie-cutter for making multiple objects with the same properties and methods.

Consider the following example:
<k><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span> <span class="purple">{</span>
<span class="orange">this</span><span class="purple">.</span>name <span class="token operator">=</span> name<span class="purple">;</span>
<span class="orange">this</span><span class="purple">.</span>year <span class="token operator">=</span> <span class="token string">'('</span> <span class="token operator">+</span> year <span class="token operator">+</span> <span class="token string">')'</span><span class="purple">;</span>
<span class="purple">}</span></k>
The <k>Book</k> constructor expects two parameters: <k>name</k> and <k>year</k>.

When the constructor is called with the <k>new</k> keyword, it assigns the received parameters to the <k>name</k> and <k>year</k> property of the current instance, as shown below: 
<k><span class="orange">var</span> firstBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"Pro AngularJS"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>
<span class="orange">var</span> secondBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"Secrets Of The JavaScript Ninja"</span><span class="purple">,</span> <span class="token number">2013</span><span class="purple">)</span><span class="purple">;</span> 
<span class="orange">var</span> thirdBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"JavaScript Patterns"</span><span class="purple">,</span> <span class="token number">2010</span><span class="purple">)</span><span class="purple">;</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>firstBook<span class="purple">.</span>name<span class="purple">,</span> firstBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>           
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>secondBook<span class="purple">.</span>name<span class="purple">,</span> secondBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>           
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>thirdBook<span class="purple">.</span>name<span class="purple">,</span> thirdBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>  </k>
This code logs the following to the console:
<figure id="post-208619" class="align-right media-208619"><img class="lazy" data-src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png" data-recalc-dims="1" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?w=744&amp;ssl=1 744w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?resize=300%2C68&amp;ssl=1 300w" class="jetpack-lazy-image jetpack-lazy-image--handled" data-lazy-loaded="1" sizes="(min-width: 735px) 864px, 96vw"><noscript><img sizes="(min-width: 735px) 864px, 96vw" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?w=744&ssl=1 744w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?resize=300%2C68&ssl=1 300w" src='https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png' alt='' data-recalc-dims="1" /></noscript></figure>
As you can see, we can quickly build a large number of different book objects by invoking the <k>Book</k> constructor with different arguments.

This is exactly the same pattern that JavaScript uses in its built-in constructors like <k>Array()</k> and <k>Date()</k>.
<h3>The Object.defineProperty() method</h3>
The <k>Object.defineProperty()</k> method can be used inside a constructor to help perform all necessary property setup.

Consider the following constructor:
<k><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">)</span> <span class="purple">{</span> 
Object<span class="purple">.</span><span class="brown">defineProperty</span><span class="purple">(</span><span class="orange">this</span><span class="purple">,</span> <span class="token string">"name"</span><span class="purple">,</span> <span class="purple">{</span> 
<span class="brown-variable function">get</span><span class="purple">:</span> <span class="orange">function</span><span class="purple">(</span><span class="purple">)</span> <span class="purple">{</span> 
<span class="orange">return</span> <span class="token string">"Book: "</span> <span class="token operator">+</span> name<span class="purple">;</span>       
<span class="purple">}</span><span class="purple">,</span>        
<span class="brown-variable function">set</span><span class="purple">:</span> <span class="orange">function</span><span class="purple">(</span><span class="token parameter">newName</span><span class="purple">)</span> <span class="purple">{</span>            
name <span class="token operator">=</span> newName<span class="purple">;</span>        
<span class="purple">}</span><span class="purple">,</span>               
configurable<span class="purple">:</span> <span class="token boolean">false</span>     
<span class="purple">}</span><span class="purple">)</span><span class="purple">;</span> 
<span class="purple">}</span>
<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"Single Page Web Applications"</span><span class="purple">)</span><span class="purple">;</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">)</span><span class="purple">;</span>    <span class="gray">// Book: Single Page Web Applications</span>
<span class="gray">// we cannot delete the name property because "configurable" is set to false</span>
<span class="orange">delete</span> myBook<span class="purple">.</span>name<span class="purple">;</span>    
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">)</span><span class="purple">;</span>    <span class="gray">// Book: Single Page Web Applications</span>
<span class="gray">// but we can change the value of the name property</span>
myBook<span class="purple">.</span>name <span class="token operator">=</span> <span class="token string">"Testable JavaScript"</span><span class="purple">;</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">)</span><span class="purple">;</span>    <span class="gray">// Book: Testable JavaScript</span></k>
This code uses <k>Object.defineProperty()</k> to define accessor properties.

Accessor properties don’t include any properties or methods, but they define a getter to call when the property is read, and a setter to call when the property is written to.
A getter is expected to return a value, while a setter receives the value being assigned to the property as an argument.

The constructor above returns an instance whose <k>name</k> property can be set or changed, but cannot be deleted.

When we get the value of <k>name</k>, the getter prepends the string <k>Book:</k> to the name and returns it.
<h3>Object literal notations are preferred to constructors</h3>
The JavaScript language has nine built-in constructors: <k>Object()</k>, <k>Array()</k>, <k>String()</k>, <k>Number()</k>, <k>Boolean()</k>, <k>Date()</k>, <k>Function()</k>, <k>Error()</k> and <k>RegExp()</k>.

When creating values, we are free to use either object literals or constructors.

However, object literals are not only easier to read but also faster to run, because they can be optimize at parse time.

Thus, for simple objects it’s best to stick with literals:
<k><span class="gray">// a number object</span>
<span class="gray">// numbers have a toFixed() method</span>
<span class="orange">var</span> obj <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Object</span><span class="purple">(</span><span class="token number">5</span><span class="purple">)</span><span class="purple">;</span>
obj<span class="purple">.</span><span class="brown">toFixed</span><span class="purple">(</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>     <span class="gray">// 5.00</span>
<span class="gray">// we can achieve the same result using literals</span>
<span class="orange">var</span> num <span class="token operator">=</span> <span class="token number">5</span><span class="purple">;</span>
num<span class="purple">.</span><span class="brown">toFixed</span><span class="purple">(</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>     <span class="gray">// 5.00</span>
<span class="gray">// a string object</span>
<span class="gray">// strings have a slice() method </span>
<span class="orange">var</span> obj <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">String</span><span class="purple">(</span><span class="token string">"text"</span><span class="purple">)</span><span class="purple">;</span>
obj<span class="purple">.</span><span class="brown">slice</span><span class="purple">(</span><span class="token number">0</span><span class="purple">,</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>     <span class="gray">// "te"</span>
<span class="gray">// same as above</span>
<span class="orange">var</span> string <span class="token operator">=</span> <span class="token string">"text"</span><span class="purple">;</span>
string<span class="purple">.</span><span class="brown">slice</span><span class="purple">(</span><span class="token number">0</span><span class="purple">,</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>  <span class="gray">// "te"</span></k>
As you can see, there’s hardly any difference between object literals and constructors.

What’s more intersting is that it’s still possible to call methods on literals.

When a method is called on a literal, JavaScript automatically converts the literal into a temporary object so that the method can perform the operation.

Once the temporary object is no longer needed, JavaScript discards it.

<h3>Using the new keyword is essential</h3>
It’s important to remember to use the <k>new</k> keyword before all constructors.

If you accidentally forget <k>new</k>, you will be modifying the global object instead of the newly created object.

Consider the following example:
<k><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span> <span class="purple">{</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span><span class="orange">this</span><span class="purple">)</span><span class="purple">;</span>
<span class="orange">this</span><span class="purple">.</span>name <span class="token operator">=</span> name<span class="purple">;</span>
<span class="orange">this</span><span class="purple">.</span>year <span class="token operator">=</span> year<span class="purple">;</span>
<span class="purple">}</span>
<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="brown">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>window<span class="purple">.</span>name<span class="purple">,</span> window<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>
<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">,</span> myBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span></k>
Here’s what this code logs to the console:
<figure id="post-208621" class="align-right media-208621"><img class="lazy" data-src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png" data-recalc-dims="1" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?w=766&amp;ssl=1 766w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?resize=300%2C91&amp;ssl=1 300w" class="jetpack-lazy-image jetpack-lazy-image--handled" data-lazy-loaded="1" sizes="(min-width: 735px) 864px, 96vw"><noscript><img sizes="(min-width: 735px) 864px, 96vw" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?w=766&ssl=1 766w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?resize=300%2C91&ssl=1 300w" src='https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png' alt='' data-recalc-dims="1" /></noscript></figure>
When we call the <k>Book</k> constructor without <k>new</k>, we are in fact calling a function without a return statement.

As a result, <k>this</k> inside the constructor points to <k>Window</k> (instead of <k>myBook</k>), and two global variables are created.

However, when we call the function with <k>new</k>, the context is switched from global (Window) to the instance.

So, <k>this</k> correctly points to <k>myBook</k>.

Note that in strict mode this code would throw an error because strict mode is designed to protect the programmer from accidentally calling a constructor without the <k>new</k> keyword.
<h3>Scope-safe constructors</h3>
As we have seen, a constructor is simply a function, so it can be called without the <k>new</k> keyword.

But, for inexperienced programmers, this can be a source of bugs.

A scope-safe constructor is designed to return the same result regardless of whether it’s called with or without <k>new</k>, so it doesn’t suffer from those issues.
Most built-in constructors, such as <k>Object</k>, <k>Regex</k> and <k>Array</k>, are scope-safe.

They use a special pattern to determine how the constructor is called.

If <k>new</k> isn’t used, they return a proper instance of the object by calling the constructor again with <k>new</k>.

Consider the following code:
<k><span class="orange">function</span> <span class="brown">Fn</span><span class="purple">(</span>argument<span class="purple">)</span> <span class="purple">{</span> 
<span class="gray">// if "this" is not an instance of the constructor</span>
<span class="gray">// it means it was called without new  </span>
<span class="orange">if</span> <span class="purple">(</span><span class="token operator">!</span><span class="purple">(</span><span class="orange">this</span> <span class="orange">instanceof</span> <span class="token class-name">Fn</span><span class="purple">)</span><span class="purple">)</span> <span class="purple">{</span> 
<span class="gray">// call the constructor again with new</span>
<span class="orange">return</span> <span class="orange">new</span> <span class="token class-name">Fn</span><span class="purple">(</span>argument<span class="purple">)</span><span class="purple">;</span>
<span class="purple">}</span> 
<span class="purple">}</span></k>
So, a scope-safe version of our constructor would look like this:
<k><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span> <span class="purple">{</span> 
<span class="orange">if</span> <span class="purple">(</span><span class="token operator">!</span><span class="purple">(</span><span class="orange">this</span> <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">)</span> <span class="purple">{</span> 
<span class="orange">return</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span><span class="purple">;</span>
<span class="purple">}</span>
<span class="orange">this</span><span class="purple">.</span>name <span class="token operator">=</span> name<span class="purple">;</span>
<span class="orange">this</span><span class="purple">.</span>year <span class="token operator">=</span> year<span class="purple">;</span>
<span class="purple">}</span>
<span class="orange">var</span> person1 <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>
<span class="orange">var</span> person2 <span class="token operator">=</span> <span class="brown">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>person1 <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>    <span class="gray">// true</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>person2 <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>    <span class="gray">// true</span></k>
<h3>Conclusion</h3>
It’s important to understand that the class declaration introduced in ES2015 simply works as syntactic sugar over the existing prototype-based inheritance and does not add anything new to JavaScript.

Constructors and prototypes are JavaScript’s primary way of defining similar and related objects.
Constructors are like regular functions, but they are used with the <k>new</k> keyword.

We saw how constructors enable us to quickly make multiple similar objects with the same properties and methods, and why the <k>instanceof</k> operator is the safest way to determine the type of an instance.

Finally, we looked at scope-safe constructors, which can be called with or without <k>new</k>.
<h3>Flappy bird in Javascript with 25 lines of code</h3>
<h3>You can write shell scripts in Javascript?!</h3>
<h3>Simple Javascript Reduce Tutorial - By making banana bread</h3>
<h3>Chrome Inspector Tutorial - [Chrome Developer Tools]</h3>
<h3>Javascript Ternary Operator (Short If) Explained</h3>
<h3>React.js tutorial - Sliding puzzle game with custom image</h3>
<h3>Javascript Every Function explained - by making our own custom implementation</h3>
<h3>Simplified Oauth 2.0 Tutorial - Example with Node.js</h3>
<h3>Easiest Web Development Setup Tutorial with VS Code</h3>
<h3>Vim macros in VS Code Superpowers - Tutorial</h3>
<h3>Live Clock Wallpaper in Node.js Tutorial - [Read files with fs, Node Cron job with node-cron]</h3>
<h3>Handling multiple Promises in Javascript - [all, allSettled, any, race]</h3>
<h3>Code formatting with Pretties as a Github action - Tutorial</h3>
<h3>How to Validate JSON in Javascript - Tutorial and Example</h3>
<h3>First steps into Functional Programming in Javascript - Composition Example</h3>
<h3>Full Video Background Tutorial using Bideo.js - [HTML, CSS, Javascript]</h3>
<h3>CSS only Infinitely Scrolling Background  |  TUTORIAL  |  [Clamp, Keyframes, Animation]</h3>
<h3>What is a Webhook? - Explained simply with fun example - [Home assistant, IFTTT, Geolocation]</h3>
<h3>Trading Bot built with Node and Firebase - 100 day profit report</h3>
<h3>Build a Game in React with Recoil [Part 3/3] - Inputs &amp; Game Logic</h3>
<h3>Learn Javascript the fun way - Live Weather Tab [Geolocation, setInterval, Closures]</h3>
<h3>Deno - Where are the packages and compiled files located?</h3>
<h3>Build a Game in React with Recoil [Part 2/3] - Populating the World</h3>
<h3>Vite - Super fast build tool [Project Setup]</h3>
<h3>How to Debug Deno in VS Code</h3>
<h3>Build a Game in React with Recoil [Part 1/3] - Creating the World</h3>
<h3>Vim in VS Code - [My setup to avoid the mouse]</h3>
<h3>Build a GraphQL server in Deno using Oak - [Getting started tutorial]</h3>
<h3>React Recoil Todo List with LocalStorage Persistance</h3>
<h3>Vanilla Javascript game development - [Othello Burger flipper]</h3>
<h3>Deno Tutorial - Getting started [Installation, Hello World, Import, Fetch]</h3>
<h3>Tips for writing High Quality Javascript</h3>
<h3>Build a Periodic Table from an API in React - [Javascript, CSS]</h3>
<h2>HTML Canvas Reference</h2>
The HTML <k>&lt;canvas></k> tag is used to draw graphics, on the fly, via scripting (usually JavaScript).
<h3>Colors, Styles, and Shadows</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_fillstyle.asp">fillStyle</a>	Sets or returns the color, gradient, or pattern used to fill the drawing	
<a href="https://www.w3schools.com/tags/canvas_strokestyle.asp">strokeStyle</a>	Sets or returns the color, gradient, or pattern used for strokes	
<a href="https://www.w3schools.com/tags/canvas_shadowcolor.asp">shadowColor</a>	Sets or returns the color to use for shadows	
<a href="https://www.w3schools.com/tags/canvas_shadowblur.asp">shadowBlur</a>	Sets or returns the blur level for shadows	
<a href="https://www.w3schools.com/tags/canvas_shadowoffsetx.asp">shadowOffsetX</a>	Sets or returns the horizontal distance of the shadow from the shape	
<a href="https://www.w3schools.com/tags/canvas_shadowoffsety.asp">shadowOffsetY</a>	Sets or returns the vertical distance of the shadow from the shape	
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_createlineargradient.asp">createLinearGradient()</a>	Creates a linear gradient (to use on canvas content)	
<a href="https://www.w3schools.com/tags/canvas_createpattern.asp">createPattern()</a>	Repeats a specified element in the specified direction	
<a href="https://www.w3schools.com/tags/canvas_createradialgradient.asp">createRadialGradient()	Creates a radial/circular gradient (to use on canvas content)	
<a href="https://www.w3schools.com/tags/canvas_addcolorstop.asp">addColorStop()</a>	Specifies the colors and stop positions in a gradient object	
<h3>Line Styles</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_linecap.asp">lineCap</a>	Sets or returns the style of the end caps for a line	
<a href="https://www.w3schools.com/tags/canvas_linejoin.asp">lineJoin</a>	Sets or returns the type of corner created, when two lines meet	
<a href="https://www.w3schools.com/tags/canvas_linewidth.asp">lineWidth</a>	Sets or returns the current line width	
<a href="https://www.w3schools.com/tags/canvas_miterlimit.asp">miterLimit</a>	Sets or returns the maximum miter length	
<h3>Rectangles</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_rect.asp">rect()</a>	Creates a rectangle	
<a href="https://www.w3schools.com/tags/canvas_fillrect.asp">fillRect()</a>	Draws a "filled" rectangle	
<a href="https://www.w3schools.com/tags/canvas_strokerect.asp">strokeRect()</a>	Draws a rectangle (no fill)	
<a href="https://www.w3schools.com/tags/canvas_clearrect.asp">clearRect()</a>	Clears the specified pixels within a given rectangle	
<h3>Paths</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_fill.asp">fill()</a>	Fills the current drawing (path)	
<a href="https://www.w3schools.com/tags/canvas_stroke.asp">stroke()</a>	Actually draws the path you have defined	
<a href="https://www.w3schools.com/tags/canvas_beginpath.asp">beginPath()</a>	Begins a path, or resets the current path	
<a href="https://www.w3schools.com/tags/canvas_moveto.asp">moveTo()</a>	Moves the path to the specified point in the canvas, without creating a line	
<a href="https://www.w3schools.com/tags/canvas_closepath.asp">closePath()</a>	Creates a path from the current point back to the starting point	
<a href="https://www.w3schools.com/tags/canvas_lineto.asp">lineTo()</a>	Adds a new point and creates a line to that point from the last specified point in the canvas	
<a href="https://www.w3schools.com/tags/canvas_clip.asp">clip()</a>	Clips a region of any shape and size from the original canvas	
<a href="https://www.w3schools.com/tags/canvas_quadraticcurveto.asp">quadraticCurveTo()</a>	Creates a quadratic Bézier curve	
<a href="https://www.w3schools.com/tags/canvas_beziercurveto.asp">bezierCurveTo()</a>	Creates a cubic Bézier curve	
<a href="https://www.w3schools.com/tags/canvas_arc.asp">arc()</a>	Creates an arc/curve (used to create circles, or parts of circles)	
<a href="https://www.w3schools.com/tags/canvas_arcto.asp">arcTo()</a>	Creates an arc/curve between two tangents	
<a href="https://www.w3schools.com/tags/canvas_ispointinpath.asp">isPointInPath()	Returns true if the specified point is in the current path, otherwise false	
<h3>Transformations</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_scale.asp">scale()</a>	Scales the current drawing bigger or smaller	
<a href="https://www.w3schools.com/tags/canvas_rotate.asp">rotate()</a>	Rotates the current drawing	
<a href="https://www.w3schools.com/tags/canvas_translate.asp">translate()</a>	Remaps the (0,0) position on the canvas	
<a href="https://www.w3schools.com/tags/canvas_transform.asp">transform()</a>	Replaces the current transformation matrix for the drawing	
<a href="https://www.w3schools.com/tags/canvas_settransform.asp">setTransform()</a>	Resets the current transform to the identity matrix.

Then runs <a href="https://www.w3schools.com/tags/canvas_transform.asp">
transform()</a>	
<h3>Text</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_font.asp">font</a>	Sets or returns the current font properties for text content	
<a href="https://www.w3schools.com/tags/canvas_textalign.asp">textAlign</a>	Sets or returns the current alignment for text content	
<a href="https://www.w3schools.com/tags/canvas_textbaseline.asp">textBaseline</a>	Sets or returns the current text baseline used when drawing text	
Method	    Description	
<a href="https://www.w3schools.com/tags/canvas_filltext.asp">fillText()</a>	Draws "filled" text on the canvas	
<a href="https://www.w3schools.com/tags/canvas_stroketext.asp">strokeText()</a>	Draws text on the canvas (no fill)	
<a href="https://www.w3schools.com/tags/canvas_measuretext.asp">measureText()</a>	Returns an object that contains the width of the specified text	
<h3>Image Drawing</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_drawimage.asp">drawImage()</a>	Draws an image, canvas, or video onto the canvas	
<h3>Pixel Manipulation</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_imagedata_width.asp">width</a>	Returns the width of an ImageData object	
<a href="https://www.w3schools.com/tags/canvas_imagedata_height.asp">height</a>	Returns the height of an ImageData object	
<a href="https://www.w3schools.com/tags/canvas_imagedata_data.asp">data</a>	Returns an object that contains image data of a specified ImageData object	
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_createimagedata.asp">createImageData()</a>	Creates a new, blank ImageData object	
<a href="https://www.w3schools.com/tags/canvas_getimagedata.asp">getImageData()</a>	Returns an ImageData object that copies the pixel data for the specified rectangle on a canvas	
<a href="https://www.w3schools.com/tags/canvas_putimagedata.asp">putImageData()</a>	Puts the image data (from a specified ImageData object) back onto the canvas	
<h3>Compositing</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_globalalpha.asp">globalAlpha</a>	Sets or returns the current alpha or transparency value of the drawing	
<a href="https://www.w3schools.com/tags/canvas_globalcompositeoperation.asp">globalCompositeOperation</a>	Sets or returns how a new image is drawn onto an existing image	
<h3>Other</h3>
Method	    Description
save()	Saves the state of the current context	
restore()	Returns previously saved path state and attributes	
createEvent()
getContext()
toDataURL()
<h2>Simple linear regression method in javascript</h2>
<a href="linear regression.html" class="whitebut ">linear regression</a>
function findLineByLeastSquares(values_x, values_y) {
var sum_x = 0;
var sum_y = 0;
var sum_xy = 0;
var sum_xx = 0;
var count = 0;
//We'll use those variables for faster read/write access.
var x = 0;
var y = 0;
var values_length = values_x.length;
if (values_length != values_y.length) {
throw new Error('The parameters values_x and values_y need to have same size!');
}
if (values_length === 0) { return [ [], [] ]; }  // Nothing to do.
// Calculate the sum for each of the parts necessary.
for (var v = 0; v &lt; values_length; v++) {
x = values_x[v];
y = values_y[v];
sum_x += x;
sum_y += y;
sum_xx += x*x;
sum_xy += x*y;
count++;
}
// Calculate m and b for the formular: y = x * m + b
var m = (count*sum_xy - sum_x*sum_y) / (count*sum_xx - sum_x*sum_x);
var b = (sum_y/count) - (m*sum_x)/count;
// We will make the x and y result line now
var result_values_x = [];
var result_values_y = [];
for (var v = 0; v &lt; values_length; v++) {
x = values_x[v];
y = x * m + b;
result_values_x.push(x);
result_values_y.push(y);
}
return [result_values_x, result_values_y];
}
<h2>convert string array to json object</h2>
first line is header
strArr =["first	second	third",
"function	JSON	parse",
"JavaScript	function	JSON",
"into	a	JavaScript",]
function tsvToJson(strArr) {
var header = strArr[0].split("\t")
var headerLength = header.length
var resultObj = []
for (var i = 1; i < strArr.length; i++ ) { // start from second line
var tempObj = {};
var data = strArr[i].split("\t")
for ( k = 0; k < headerLength; k++ ) {
tempObj[header[k]] = data[k];
}
resultObj.push(tempObj);
}
return resultObj;
}
<h2>hide script away from document</h2>
https://stackoverflow.com/questions/18313770/can-i-store-javascript-in-a-local-storage-object-and-run-it
<h3>to append script to document by appendChild</h3>
var script = document.createElement('script');
script.src = 'data:text/javascript,' + encodeURI(myScript);
script.onload = function() {
//optional callback
};
document.body.appendChild(script);
This is inserting an actual script tag using a data uri as the source.
This way, it will appear under "scripts" on the resources tab of the dev tools.
When the script loads, the data uri (your code) will be executed.
<h3>store javascript in Local Storage</h3>
Here are two methods:
Method 1: eval()
eval(localStorage.myCode);
localStorage.myCode = "alert('just a test')";
eval(localStorage.myCode);
testScript = `function testadd() {....}`
localStorage.setItem("testScript", testScript)
eval(localStorage.testScript);
You can check if your code is stored like this:
if (!localStorage.myCode) {
// local storage code not exists, load from somewhere else
} else {// perform the eval using the code from local storage}
Method 2: the Function constructor
new Function(localStorage.myCode)();
Here are the jsfiddle demos showing that they all work:
Method 1: http://jsfiddle.net/markasoftware/3BkAV/
Method 2: http://jsfiddle.net/markasoftware/j6JAz/
<h2>string manipulations</h2>
// remove last character
string.slice(0, -1)
// extract sub string
string = "asd/asdf"
string.substring(string.indexOf("/"), string.length);    // /asdf
string.substring(string.indexOf("/")+1, string.length);  // asdf
string = "asd/asdf/fds"
string.substring( string.indexOf("/") + 1, string.lastIndexOf("/")) // asdf
string = "asd/asdf/fds/taeg/hjk"  // to select asdf by split method
sections = string.split("/")
sections[1]  // asdf
substring processing:
//str = 'asdfghjkl';
//str.substring(0,3); // shows 'asd'
//str.substring(3); // fghjkl
<h2>build your own proxy</h2>
The same origin policy is not enforced within server-to-server communication.

In addition, you eliminate the latency concern.

You don’t need to share the cors-anywhere proxy with other consumers, and you can dedicate as many resources as you need to your own servers.
Here’s some quick Node.js code that uses the express web framework to create a proxy server around the same <k><a href="https://joke-api-strict-cors.appspot.com/random_joke" target="_blank" rel="noopener nofollow">https://joke-api-strict-cors.appspot.com/</a></k> from above:
const express = require('express');
const request = require('request');
const app = express();
app.use((req, res, next) => {
res.header('Access-Control-Allow-Origin', '*');
next();
});
app.get('/jokes/random', (req, res) => {
request(
{ url: 'https://joke-api-strict-cors.appspot.com/jokes/random' },
(error, response, body) => {
if (error || response.statusCode !== 200) {
return res.status(500).json({ type: 'error', message: err.message });
}
res.json(JSON.parse(body));
}
)
});
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log(`listening on ${PORT}`));
If you want to see this in action, head to the source code for the above, along with relevant steps in the README: <a href="https://github.com/15Dkatz/beat-cors-server" target="_blank" rel="noopener nofollow">https://github.com/15Dkatz/beat-cors-server</a> How does this work? The proxy uses express middleware to apply a <k>Access-Control-Allow-Origin: *</k> header to every response from the server.

At its own <k>jokes/random</k> GET endpoint, the proxy requests a random joke from another server.

The same-origin policy doesn’t step in to block the request, even though the domains are different.

After all, this is a server-to-server request.

Finally, the proxy creates a response to the original requester (an app on the browser) consisting of the resulting data and the middleware-applied <k>Access-Control-Allow-Origin: *</k> header.
<a href="https://www.twilio.com/blog/node-js-proxy-server" class="whitebut ">Build a Node.js Proxy Server</a>
<h2>Javascript Tips</h2>
if then else
var age = 50
age < 21 ? console.log("child") : console.log("adult")
number to string
age = 50
console.log(typeof age)
age = 50 + ""
console.log(typeof age)
Fill arrays
users = Array(5); // 5 empty items
users = Array(5).fill(""); // 5 empty strings
users = Array(5).fill(5); // 5 numbers of value 5
Unique Arrays
users = ["a","b","c","d","e","b"]
unique = Array.from(new Set(users))
Dynamic Objects
dynamic = 'hobbies';
user = { name:"Ed", email:"abc@aol.com", [dynamic]:"sleep" }
Slicing Arrays
users = [1,2,3,4,5,6,7,8]
users.length = 3 // force only first 3 items included
Slicing Arrays end
users.slice(-1)  // onlys last one selected
users.slice(-3)  // onlys last 3 selected
CHange array to object
users = [1,2,3,4,5,6,7]
usersObject = {...users} // converted to objects
Object to arrays
user = { name:"Ed", email:"abc@aol.com", hobbies:"sleep" }
usersKeysArray = Object.keys(user)
usersValArray = Object.values(user)
Performance
startAt = performance.now()
// run a long loop
endAT = performance.now()
console.log(`take ${endAT - startAt} milliseconds`)
<h2>Load external source</h2>
&lt;element onload="myFunction()" src= urlAddr> // body, iframe, img, object
function myFunction() { alert("Iframe is loaded."); }
&lt;element id="myFrame" src="/default.asp">
document.getElementById("myFrame").addEventListener("load", myFunction);
function myFunction() {
alert("Iframe is loaded.");
}
function fetchImages(argument) {
var script = document.createElement('script');
script.onload = function(data) {
// do something with data
// Cross-Origin Read Blocking (CORB) blocked cross-origin response with MIME type text/html
};
script.src = argument;
document.getElementsByTagName('head')[0].appendChild(script);
// or use document.head.append(script);
}
fetchImages(urlAddr)
<h2>Node.js communicate with client side JavaScript</h2>
By making an HTTP request, 
with the XMLHttpRequest object, or by generating a &lt;form> and then submitting it, or a variety of other methods, 
just like any other server side program in a web application.
<h2>find center point of multiple corordinates</h2>
function rad2degr(rad) { return rad * 180 / Math.PI; }
function degr2rad(degr) { return degr * Math.PI / 180; }
/**
* @param latLngInDeg array of arrays with latitude and longtitude
*   pairs in degrees.

e.g.

[[latitude1, longtitude1], [latitude2
*   [longtitude2] ...]
*
* @return array with the center latitude longtitude pairs in 
*   degrees.
*/
function getLatLngCenter(latLngInDegr) {
var LATIDX = 0;
var LNGIDX = 1;
var sumX = 0;
var sumY = 0;
var sumZ = 0;
for (var i=0; i&lt;latLngInDegr.length; i++) {
var lat = degr2rad(latLngInDegr[i][LATIDX]);
var lng = degr2rad(latLngInDegr[i][LNGIDX]);
// sum of cartesian coordinates
sumX += Math.cos(lat) * Math.cos(lng);
sumY += Math.cos(lat) * Math.sin(lng);
sumZ += Math.sin(lat);
}
var avgX = sumX / latLngInDegr.length;
<h2>find center of multiple points</h2>
* @param array data 2 dimensional array of latitudes and longitudes
* For Example:
* $data = array
* (
*   0 = > array(45.849382, 76.322333),
*   1 = > array(45.843543, 75.324143),
*   2 = > array(45.765744, 76.543223),
*   3 = > array(45.784234, 74.542335)
* );
*/
function GetCenterFromDegrees(data)
{       
if (!(data.length > 0)){
return false;
} 
var num_coords = data.length;
var X = 0.0;
var Y = 0.0;
var Z = 0.0;
for(i = 0; i < data.length; i++){
var lat = data[i][0] * Math.PI / 180;
var lon = data[i][1] * Math.PI / 180;
<h2>Declaring global variable within function</h2>
To declare JavaScript global variables inside function, you need to use window object.

For example:
function m(){  
//declaring global variable by window object  
window.thisglovalue = 100;
}
<h2>JavaScript Optional Chaining</h2>
If you have worked with JavaScript for any amount of time then you have probably seen code that looks just like this.
<k>const street = person &amp;&amp; person.address &amp;&amp; person.address.street</k>
The above code is pretty much the shortest and most elegant way to check if an object is undefined or null before accessing its properties.

This is obviously not very concise or clean code, though, which is why JavaScript is finally getting an optional chaining operator.
<h3>What Is Optional Chaining</h3>
If you have used other languages besides JavaScript you are probably already familiar with optional chaining since most languages have supported it for awhile.

Essentially the idea of optional chaining is to make it easy to write code where you need to access properties or values that are nested deep inside an object or array that may or may not be null/undefined.

Let’s take a look at the basic syntax for optional chaining to understand exactly how it works.
<k>const name = person?.name</k>
In the above code we have a variable <k>person</k> which may or may not be null/undefined.

Because we do not know if <k>person</k> is defined we cannot directly access the <k>name</k> property since if <k>person</k> is undefined we would get the following error.
<k>Uncaught TypeError: Cannot read property 'name' of undefined</k>
By using the optional chaining operator (<k>?.</k>), though, we are able to write our code as if we are directly accessing <k>name</k>.

If <k>person</k> is undefined our code will just return undefined instead of throwing an error.

Essentially the code above is the same as the following code.
<k>const name = person == null ? undefined : person.name</k>
The optional chaining operator is checking the <k>person</k> variable to ensure it is defined before access the <k>name</k> property and if it is not defined it will just return undefined.

This means we can write the original code for getting the street as follows.
<k>const street = person?.address?.street</k>
This code is much easier to read then the original code and is one of the greatest use cases for optional chaining.

JavaScript does have many additional uses for optional chaining, though, which most other languages do not implement.
<h3>Optional Chaining Functions</h3>The first big additional use case for optional chaining is doing optional chaining with function calls.

Let’s first look at some code for calling a function on an object that may not be defined.
<k>const windowCount = house.getWindowCount &amp;&amp; house.getWindowCount()</k>
This code is essentially checking the <k>house</k> variable to ensure it has a property called <k>getWindowCount</k> before trying to call that function.

This code is obviously pretty clunky and difficult to read which is where the optional chaining operator comes in.
<k>const windowCount = house.getWindowCount?.()</k>
Now at first it may seem weird to have a period (<k>.</k>) before the function parenthesis, but that is because the optional chaining operator is a question mark followed by a period (<k>?.</k>) and not just a question mark.

This new code that uses the optional chaining operator will now check if there is a function defined on the <k>house</k> variable called <k>getWindowCount</k> and if it exists it will call it.

If that function does not exist on the <k>house</k> variable then it will just return undefined instead of calling the function.

This ability to do optional chaining on functions is something that many other languages do not implement and is really handy, especially in JavaScript since functions are used everywhere.
<h3>Optional Chaining Arrays</h3>The last main way that optional chaining can be used is with arrays.

If you want to access an element in an array by index, but are not sure if the array is defined then you need to use code that looks something like this.
<k>const firstElement = arr &amp;&amp; arr[0]</k>
By using the optional chaining operator this code can be simplified to the following.
<k>const firstElement = arr?.[0]</k>
Again this probably looks weird with a period (<k>.</k>) before the brackets for accessing an array element, but it is just part of the syntax for the optional chaining operator.

This new code will work by first checking if the <k>arr</k> variable is defined and if it is it will attempt to access the index of the array specified.

If the <k>arr</k> variable is not defined then undefined will be returned instead of trying to access the index of the array.
This bracket notation optional chaining can also be used with objects as well.
<k>const name = person?.['name']</k>
This is really useful if you want to dynamically access a property of an object based on a string and are not sure if the object is defined.
<h3>Browser Support</h3>
With all great new JavaScript features the biggest thing to worry about is browser support.

Unfortunately, the optional chaining operator has very little support outside of the newest browsers.

At the time of writing this article the optional chaining operator only has <a href="https://caniuse.com/#search=optional%20chaining">45% support</a> across browsers.

Luckily, though, you can still use this operator by using tools like <a href="https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining">babel</a> to transpile your JavaScript code so that older browsers can understand it.
<h3>Conclusion</h3>
The optional chaining operator is something that most other languages have had the luxury of using for years, but is only just now being introduced into JavaScript.

This means that most browsers still have not implemented this feature, but with the power of tools like babel this feature can be used right now without having to worry about browser support.

I highly recommend using this operator in all your new projects that have babel since it will make writing clean JavaScript much easier.
<h2>convert 2-dimensional array to object</h2>
var myArray = [
[12,2,"copy"],
[13,5,"copy"],
[18,-1,"original"],
]
var json = [
{docId: 12, userId: 2, type: "copy"},
{docId: 13, userId: 5, type: "copy"},
{docId: 18, userId: -1, type: "original"}
]
json = myArray.map(function(x) {
return { "s_id": x[0], "t_id": x[1], "type": x[2] }
})
<h2>javascript machine Learning</h2>
<a href="javascript machineLearning.html" class="whitebut ">javascript machineLearning</a>
<h2>DevTools failed to load SourceMap</h2>
: Could not load content for https://unpkg.com/brain-browser.min.js.map
<a href="https://stackoverflow.com/questions/61205390/when-adding-a-javascript-library-chrome-complains-about-a-missing-source-map-w" class="whitebut ">Chrome complains about a missing source map</a>
<h2>javascript encription</h2>
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js">&lt;/script>
&lt;label>encrypted&lt;/label>
&lt;div id="demo1">&lt;/div>
&lt;label>decrypted&lt;/label>
&lt;div id="demo2">&lt;/div>
&lt;label>Actual Message&lt;/label>
&lt;div id="demo3">&lt;/div>
&lt;script>
var encrypted = CryptoJS.AES.encrypt("williamkpchan", "Secret Passphrase");
var decrypted = CryptoJS.AES.decrypt(encrypted, "Secret Passphrase");
document.getElementById("demo1").innerHTML = encrypted;
document.getElementById("demo2").innerHTML = decrypted;
document.getElementById("demo3").innerHTML = decrypted.toString(CryptoJS.enc.Utf8);
&lt;/script>
Encrypted is actually an object, encrypted.toString() to get the string.
https://stackoverflow.com/questions/18279141/javascript-string-encryption-and-decryption
<h2>array addition</h2>
adata = [1,2,3]
bdata = [3,4,5]
thedrawdata=[]
thedrawdata.push(adata)
thedrawdata.push(bdata)
thedrawdata[2] = thedrawdata[0].map(function (a, i) {
return a + thedrawdata[1][i];
});
console.log(thedrawdata[0],thedrawdata[1],thedrawdata[2])
var arr = [1,2,3,4];
var arr2 = [1,1,1,2];
<i>var squares = arr.map((a, i) => a + arr2[i]);</i>
console.log(squares);
<h2>convert a string to function name</h2>
var myString = "echoHello";
window[myString] = function() {
alert("Hello!");
}
echoHello();
<h2>create indirect variable</h2>
var myString = "thisvariable";
window[myString] = "what"
thisvariable
var rvListName = "removeList"
window[rvListName] = window["bookid"] + " rvList"
rMList = localStorage.getItem(removeList)
<h2>convert all elements in array to interger</h2>
rMList = rMList.map(Number);
removeList = "revList"
rMList = [1,3]
localStorage.setItem(removeList, rMList)
rMList = localStorage.getItem(removeList).split(",").map(Number)
<h2>convert num string to weekday</h2>
const str = "20210620";
function parse(str) {
var y = str.substr(0,4), m = str.substr(4,2) - 1,
d = str.substr(6,2);
var D = new Date(y,m,d);
return (D.getFullYear() == y && D.getMonth() == m && D.getDate() == d) ? D : 'invalid date';
}
const day = ["sun","mon","tue","wed","thu","fri","sat"][parse(str).getDay()]
console.log(day)
<h2>script to close a message on web page</h2>
&lt;div class="alert">
&lt;span onclick="this.parentElement.style.display='none';">&times;&lt;/span> 
&lt;/div>
Use the HTML entity "&times;" to create the letter "x".
<h2>to make window scroll to location with offset</h2>
#startpt { scroll-margin-top: 100px;}
if(testkey == "l"){window.location = '#startpt';}
also try:
(function() {
if (document.location.hash) {
setTimeout(function() {
window.scrollTo(window.scrollX, window.scrollY - 100);
}, 10);
}
})();
<h2>JavaScript Errors - Throw and Try to Catch</h2>
The <k>try</k> statement lets you test a block of code 
for errors.
The <k>catch</k> statement lets you handle the error.
The <k>throw</k> statement lets you create custom 
errors.
The <k>finally</k> statement lets you execute code, 
after try and catch, regardless of the result.
This example demonstrates how to use catch to diplay an error.
adddlert is not defined
try { adddlert("Welcome guest!");}
catch(err) { document.getElementById("demo").innerHTML = err.message;}
check storage:
try{localStorage.setItem('check_storage','local storage');window.supportLS=true;}catch(e){window.supportLS=false;}
<h2>to convert string to calculation result</h2>
var str = "2*7.1 + 4/0,5";
str = str.replace(',','.');
eval("var answer = "+str);
alert(answer);
function callCalculator() {
str = prompt("Calculation Input:", "");
if (str != null && str != "") {
str = str.replace(',','.');
eval("var answer = " + str);
alert(answer);
}
}
<h2>setTimeout with a shorter delay</h2>
setTimeout in most browsers doesn't allow a delay less than about 10 milliseconds (it forces any smaller delays to be longer, Chrome has changed this to 2 milliseconds, though, and apparently had some problems with it.)
the equivalent of setTimeout, with a real zero delay, using postMessage:
// Only add setZeroTimeout to the window object, and hide everything
// else in a closure.
(function() {
var timeouts = [];
var messageName = "zero-timeout-message";
Like setTimeout, but only takes a function argument.

There's no time argument (always zero) and no arguments (you have to use a closure).
function setZeroTimeout(fn) {
timeouts.push(fn);
window.postMessage(messageName, "*");
}
function handleMessage(event) {
if (event.source == window && event.data == messageName) {
event.stopPropagation();
if (timeouts.length > 0) {
var fn = timeouts.shift();
fn();
}
}
}
window.addEventListener("message", handleMessage, true);
// Add the one thing we want added to the window object.
window.setZeroTimeout = setZeroTimeout;
})();
<h2>jQuery UI message box</h2>
<a href="https://jqueryui.com/" class="whitebut ">jQuery UI</a>
<a href="https://api.jqueryui.com/dialog/" class="whitebut ">jqueryui dialog</a>
&lt;meta name="viewport" content="width=device-width, initial-scale=1">
&lt;link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
&lt;script src="https://code.jquery.com/jquery-1.12.4.js">&lt;/script>
&lt;script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js">&lt;/script>
&lt;div id="dialog" title="Basic dialog" style="display:none;">
&lt;p>This is the default dialog which is useful for displaying information.
The dialog window can be moved, resized and closed with the &apos;x&apos; icon.&lt;/p>
&lt;/div>
&lt;div id="dialogForm" title="Create new user" style="display:none;">
&lt;p>All form fields are required.&lt;/p>
&lt;form>
&lt;fieldset>
&lt;label for="name">Name&lt;/label>
&lt;input type="text" name="name" id="name" class="text">
&lt;br>
&lt;label for="email">Email&lt;/label>
&lt;input type="text" name="email" id="email" value="" class="text">
&lt;br>
&lt;label for="password">Password&lt;/label>
&lt;input type="password" name="password" id="password" value="" class="text">
&lt;/fieldset>
&lt;/form>
&lt;/div>  
&lt;br>
&lt;button id="create-user" onclick="$('#dialogForm').toggle()">Create new user&lt;/button>
&lt;br>
&lt;span onclick="$('#dialog').dialog();">click to open dialog&lt;/span>
<h2>auto load page with infinite scroll until it gets to the bottom</h2>
var lastScrollHeight = 0; 
function autoScroll() { 
var sh = document.documentElement.scrollHeight; 
if (sh != lastScrollHeight) { 
lastScrollHeight = sh; 
document.documentElement.scrollTop = sh; 
} 
} 
window.setInterval(autoScroll, 100); 
Infinite Scroll 
jQuery load more data on scroll
In jQuery, check whether you have hit the bottom of page using scroll function.
Once you hit that, make an ajax call (you can show a loading image here till ajax response) and get the next set of data, append it to the div.
This function gets executed as you scroll down the page again.
$(window).scroll(function() {
if($(window).scrollTop() == $(document).height() - $(window).height()) {
// ajax call get data from server and append to the div
}
});
If you want to load content before reaching 100 pixel of bottom use
var loading= false;
$(window).scroll(function() {
if (!loading && ($(window).scrollTop() >  $(document).height() - $(window).height() - 100)) {
loading= true;
// your content loading call goes here.
loading = false; // reset value of loading once content loaded
}
});
<h2>Stop from copy, disable select</h2>
document.oncontextmenu = new Function("event.returnValue=false");
&lt;body oncontextmenu="return false;">
document.onselectstart = new Function("event.returnValue=false");
document.onselectstart = function() { return false; }
document.onselectstart = null;
&lt;body onselectstart="return false">
document.getElementById("tmp").onselectstart = function(){return false;};
document.getElementById("tmp").addEventListener("selectstart", function(){return false;}, false);
document.getElementById("tmp").attachEvent("onselectstart", function(){return false;});
<h2>three.js</h2>
<a href="://threejsfundamentals.org/threejs/lessons/threejs-fundamentals.html" class="whitebut ">threejs-fundamentals lessons</a>
<a href="://threejsfundamentals.org/" class="whitebut ">threejsfundamentals</a>
<a href="://threejs.org/examples/" class="whitebut ">examples</a>
<a href="https://www.youtube.com/watch?v=1TeMXIWRrqE" class="whitebut ">Three.js Tutorial, Add 3D Model to WebSite in 5 Minutes</a>
<a href="https://www.youtube.com/watch?v=8jP4xpga6yY" class="whitebut ">Getting Started With Three.js</a>
<a href="https://youtu.be/Bed1z7f1EI4" class="whitebut ">Space Background (Three.js)</a>
<a href="https://youtu.be/KeVW_ezeGz8" class="whitebut ">Warp Portal (Three.js)</a>
<a href="https://www.youtube.com/watch?v=FGG0EeMNUl0">Build a 3D World in React with Three.js
<img class="lazy" data-src="https://i.ytimg.com/vi/FGG0EeMNUl0/hqdefault.jpg"></a>
<h2>gravity</h2>
function distance(x1, y1, x2, y2) {
const xDist = x2 - x1
const yDist = y2 - y1
return Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2))
}
var canvas = document.querySelector('canvas');
var c = canvas.getContext('2d');
canvas.width = innerWidth;
canvas.height = innerHeight;
// Variables
var mouse = { x: innerWidth / 2, y: innerHeight / 2  };
var colors = ['red','orange','yellow','green','cyan','blue','brown','purple','gold','silver' ];
var gravity = 0.2;
var friction = 0.9;
// Event Listeners
addEventListener("mousemove", function(event) {
mouse.x = event.clientX; mouse.y = event.clientY;
});
addEventListener("resize", function() {
canvas.width = innerWidth; canvas.height = innerHeight;
init();
});
addEventListener("click", function(event) {
init();
});
// Utility Functions
function randomIntFromRange(min,max) {
return Math.floor(Math.random() * (max - min + 1) + min);
}
function randomColor(colors) {
return colors[Math.floor(Math.random() * colors.length)];
}
// Objects
function Ball(x, y, dx, dy, radius, color) {
this.x = x; this.y = y;
this.dx = dx; this.dy = dy;
this.radius = radius; this.color = color;
this.update = function() {
if (this.y + this.radius + this.dy> canvas.height) {
this.dy = -this.dy; this.dy = this.dy * friction;
this.dx = this.dx * friction;
} else {
this.dy += gravity;
}
if (this.x + this.radius >= canvas.width || this.x - this.radius <= 0) {
this.dx = -this.dx * friction;
}
this.x += this.dx; this.y += this.dy;
this.draw();
};
this.draw = function() {
c.beginPath();
c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);  
c.fillStyle = this.color;
c.fill();
c.stroke();
c.closePath();
};
}
// Implementation
var ballArray = [];
function init() {
ballArray = [];
for (let i = 0; i < 1000; i++) {
var radius = randomIntFromRange(3, 5);
var x = randomIntFromRange(radius, canvas.width - radius);
var y = randomIntFromRange(0, canvas.height - radius);
var dx = randomIntFromRange(-5, 5)
var dy = randomIntFromRange(-2, 2)
ballArray.push(new Ball(x, y, dx, dy, radius, randomColor(colors)));
}
}
// Animation Loop
function animate() {
requestAnimationFrame(animate);
c.clearRect(0, 0, canvas.width, canvas.height);
for (let i = 0; i < ballArray.length; i++) {
ballArray[i].update();
}
}
init();
animate();
<h2>CSS/Javascript Mouseover Popup Box</h2>
<span class="NameHighlights">
<a href="product link is here">Product 1</a>
<div>
# of Votes:  123<br> % Liked<br>
<a href="product review link">See User reviews</a>
</div>
</span>
loop bind events to all .NameHighlights spans:
var span = document.querySelectorAll('.NameHighlights');
for (var i = span.length; i--;) {
(function () {
var t;
span[i].onmouseover = function () {
hideAll(); clearTimeout(t);
this.className = 'NameHighlightsHover';
};
span[i].onmouseout = function () {
var self = this;
t = setTimeout(function () {
self.className = 'NameHighlights';
}, 300);
};
})();
}
a jQuery version:
var t;
$(function(){
$('span.NameHighlights').mouseover(
function(e){
hideAll(); clearTimeout(t);
$(this).attr('class', 'NameHighlightsHover');
}
).mouseout(
function(e){
t = setTimeout(function() {
//$(this).attr('class', 'NameHighlights');
hideAll();
}, 300);
}
);
});
function hideAll() {
$('span.NameHighlightsHover').each(function(index) {
console.log('insde hideAll');
$(this).attr('class', 'NameHighlights');
})
};
<h2>CORS library</h2>
<a href="https://www.youtube.com/watch?v=PNtFSVU-YTI" class="whitebut ">Learn CORS library In 6 Minutes</a>
<h2>coordinates of the mouse</h2>
coordinates of the mouse pointer when clicked on an element:
var x = event.clientX;     // Get the horizontal coordinate
var y = event.clientY;     // Get the vertical coordinate
&lt;span onclick="showCoords(event)">get the coordinates when clicked</span>
coordinates of the mouse pointer when the mouse is moved:
addEventListener("mousemove", function(event) {
mouse.x = event.clientX; mouse.y = event.clientY;
});
<h2>requestAnimationFrame</h2>
There used to be just one way to do a timed loop in JavaScript: setInterval().

If you needed to repeat something pretty fast (but not as-fast-as-absolutely-possible like a for loop), you’d use that.

For the purposes of animation, the goal is sixty “frames” per second to appear smooth, so you’d run a loop like this:
setInterval(function() {
// animiate something
}, 1000/60);
There is a better alternative to this now.

Paul Irish introduced requestAnimationFrame over two years ago.

I don’t have a whole lot to add to it, I just had never actually used it before and now I have so I thought I’d help spread the word and write about its basic usage.
Why better?
The browser can optimize it, so animations will be smoother
Animations in inactive tabs will stop, allowing the CPU to chill
More battery-friendly
The Simplest Possible Example
function repeatOften() {
// Do whatever
requestAnimationFrame(repeatOften);
}
requestAnimationFrame(repeatOften);
Call it once to kick it off, and your function recursively calls itself.
Start and Stop
requestAnimationFrame returns an ID you can use to cancel it, just like setTimeout or setInterval does.

jQuery used here only to demonstrate a simple animation and bind events.
var globalID;
function repeatOften() {  // repeat loop
$("&lt;div />").appendTo("body");
globalID = requestAnimationFrame(repeatOften); }
$("#start").on("click", function() {  // start button
globalID = requestAnimationFrame(repeatOften); });
$("#stop").on("click", function() {  // stop button
cancelAnimationFrame(globalID); });
<h2>animation of an object along a particular path</h2>
<a href="https://stackoverflow.com/questions/17083580/i-want-to-do-animation-of-an-object-along-a-particular-path" class="whitebut ">animation of an object along a particular path</a>
<h2>to detect a mobile device</h2>
https://stackoverflow.com/questions/3514784/what-is-the-best-way-to-detect-a-mobile-device
/* Smartphones ----------- */
@media only screen and (max-width: 760px) {
#some-element { display: none; }
}
In jQuery/JavaScript file:
$( document ).ready(function() {      
var is_mobile = false;
if( $('#some-element').css('display')=='none') {
is_mobile = true; }
// now I can use is_mobile to run javascript conditionally
if (is_mobile == true) { //Conditional script here }
});
There is a JavaScript API built-in for detecting media.
Rather than using the above solution simply use the following:
$(function() {      
let isMobile = window.matchMedia("only screen and (max-width: 760px)").matches;
if (isMobile) { //Conditional script here }
});
The screen.width property is a global.
If the browser is on a desktop and the user resizes the window, $is_mobile is not going to be updated.
Why not: if( screen.width <= 480 ) {     // is mobile }
<h2>box2d</h2>
<a href="https://box2d.org/documentation/" class="whitebut ">box2d</a>
<a href="https://plugindetector.com/box2d" class="whitebut ">box2d</a>
<a href="https://plugindetector.com/category/effects" class="whitebut ">catalog of picked jQuery plugins</a>
<a href="https://github.com/franzenzenhofer/box2d-jquery" class="whitebut ">jquery.box2d</a>
<a href="https://kyucon.com/doc/box2d/" class="whitebut ">box2d</a>
<a href="https://stackoverflow.com/questions/7294080/how-do-i-draw-my-box2d-world-using-html5-canvas-instead-of-debug-draw" class="whitebut ">html5 canvas box2d</a>
<h2>Test Google Chart</h2>
&lt;script type="text/javascript" src="https://www.gstatic.com/charts/loader.js">&lt;/script>
&lt;div id="chart" style="width: 900px; height: 500px;">&lt;/div>
&lt;script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);
function drawChart() {
var data = google.visualization.arrayToDataTable([
['Mon', 20, 28, 38, 45], ['Tue', 31, 38, 55, 66],
['Wed', 50, 55, 77, 80], ['Thu', 77, 77, 66, 50],
['Fri', 68, 66, 22, 15]
// Treat first row as data as well.
], true);
var options = {legend:'none'};
var chart = new google.visualization.CandlestickChart(document.getElementById('chart'));
chart.draw(data, options);
}
&lt;/script>
<h2>check if variable exists (is defined/initialized)</h2>
if (typeof variable !== 'undefined') {
// the variable is defined
}
<h2>JavaScript Game</h2>
<a href="https://codepen.io/franksLaboratory" class="whitebut ">franksLaboratory</a>
<a href="https://www.youtube.com/watch?v=QxYg8-mhhhs" class="whitebut ">JavaScript Game Tutorial - 2D Tower Defense</a>
<a href="https://www.youtube.com/watch?v=mpvNwYmTMJ4" class="whitebut ">JavaScript Game Tutorial - 2D Tower Defense PART 2</a>
<a href="https://www.codeexplained.org/2019/05/create-original-flappy-bird-using.html" class="whitebut ">DOWNLOAD: Flappy Bird In JAVASCRIPT SOURCE CODE</a>
<h2>To display a sprite</h2>
<div id="displayaspritetoc" class="toc"><a href="#displayaspritetopic-0" target="_self">Set up HTML</a><br><a href="#displayaspritetopic-1" target="_self">JavaScript code</a><br><a href="#displayaspritetopic-2" target="_self">To animate a sprite</a><br><a href="#displayaspritetopic-3" target="_self">different techniques and effects</a><br><a href="#displayaspritetopic-4" target="_self">1.
Sprite Sheet Animation</a><br><a href="#displayaspritetopic-5" target="_self">2.
Sprite Scaling and Rotation</a><br><a href="#displayaspritetopic-6" target="_self">3.
Particle Effect using Sprites</a><br><a href="#displayaspritetopic-7" target="_self">complete example</a><br></div>
<h3 id="displayaspritetopic-0">Set up HTML</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
<a href="https://codehs.com/tutorial/andy/Programming_Sprites_in_JavaScript" class="whitebut ">Programming_Sprites_in_JavaScript</a>
<a href="https://medium.com/dailyjs/how-to-build-a-simple-sprite-animation-in-javascript-b764644244aa" class="whitebut gold blue2bs">build a simple sprite animation in JavaScript</a>
Set up your HTML file: Create an HTML file and include a &lt;canvas> element where you want to display the sprite.
Give the canvas an id attribute to reference it in JavaScript.
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;title>Sprite Display&lt;/title>
&lt;style>
canvas {
border: 1px solid black;
}
&lt;/style>
&lt;/head>
&lt;body>
&lt;canvas id="myCanvas" width="800" height="600">&lt;/canvas>
&lt;script src="script.js">&lt;/script>
&lt;/body>
&lt;/html>
Create your sprite image: Prepare an image file that represents your sprite.
You can use an existing image or create your own.
Save the image file in the same directory as your HTML file.
<h3 id="displayaspritetopic-1">JavaScript code</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
Write JavaScript code: Create a JavaScript file (e.g., script.js) and link it to your HTML file.
In the JavaScript file, you will load the sprite image and draw it on the canvas.
// Get the canvas element
const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");
// Load the sprite image
const spriteImg = new Image();
spriteImg.src = "sprite.png";
// Draw the sprite on the canvas
spriteImg.onload = function() {
ctx.drawImage(spriteImg, 0, 0);
};
Run your code: Open the HTML file in a web browser, and you should see the sprite displayed on the canvas.
Make sure to replace "sprite.png" with the actual filename and extension of your sprite image.
Adjust the canvas dimensions (width and height) to match your desired size.
This basic example assumes that your sprite image is a single frame.
If you have a sprite sheet with multiple frames, you'll need additional logic to animate the sprite by updating the image source or manipulating the drawImage parameters.
<h3 id="displayaspritetopic-2">To animate a sprite</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
To animate a sprite and create movement or interactivity, you can use JavaScript's requestAnimationFrame method along with the drawImage function.
// Get the canvas element
const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");
// Load the sprite image
const spriteImg = new Image();
spriteImg.src = "sprite.png";
// Sprite position and velocity
let spriteX = 0;
let spriteY = 0;
let spriteSpeed = 2;
// Update sprite position
function updateSprite() {
// Clear the canvas
ctx.clearRect(0, 0, canvas.width, canvas.height);
// Draw the sprite on the canvas
ctx.drawImage(spriteImg, spriteX, spriteY);
// Update sprite position
spriteX += spriteSpeed;
// Wrap the sprite around the canvas
if (spriteX > canvas.width) {
spriteX = -spriteImg.width;
}
// Request the next animation frame
requestAnimationFrame(updateSprite);
}
// Start the animation
spriteImg.onload = function() {
updateSprite();
};
In this example, we define the initial position of the sprite (spriteX and spriteY) and the speed at which it moves (spriteSpeed).
The updateSprite function is called repeatedly using requestAnimationFrame, which ensures smooth animation by syncing with the browser's refresh rate.
Inside the updateSprite function, we clear the canvas, draw the sprite at its current position using drawImage, update the sprite's position, and wrap it around the canvas if it goes beyond the canvas width.
You can modify the updateSprite function to add interactivity, such as responding to keyboard or mouse events to control the sprite's movement.
Additionally, you can use different frames from a sprite sheet to create animated sequences by adjusting the drawImage parameters.
Remember to replace "sprite.png" with the actual filename and extension of your sprite image.
<h3 id="displayaspritetopic-3">different techniques and effects</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
Here are a few examples of sprite animations using different techniques and effects:
<h3 id="displayaspritetopic-4">1.
Sprite Sheet Animation</h3> <a href="#top" target="_self"><b>⇧</b></a><br>:
This technique involves using a sprite sheet that contains multiple frames of the animation.
By updating the position of the sprite sheet and specifying the frame dimensions, you can create an animated sequence.
javascript:
// Get the canvas element
const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");
// Load the sprite sheet image
const spriteSheet = new Image();
spriteSheet.src = "spritesheet.png";
// Sprite sheet properties
const frameWidth = 64;
const frameHeight = 64;
const totalFrames = 8;
// Current frame index
let currentFrame = 0;
// Update sprite sheet position and draw the current frame
function updateSpriteSheet() {
// Clear the canvas
ctx.clearRect(0, 0, canvas.width, canvas.height);
// Draw the current frame of the sprite sheet
ctx.drawImage(
spriteSheet,
currentFrame * frameWidth,
0,
frameWidth,
frameHeight,
0,
0,
frameWidth,
frameHeight
);
// Increment the frame index
currentFrame = (currentFrame + 1) % totalFrames;
// Request the next animation frame
requestAnimationFrame(updateSpriteSheet);
}
// Start the animation
spriteSheet.onload = function() {
updateSpriteSheet();
};
```
<h3 id="displayaspritetopic-5">2.
Sprite Scaling and Rotation</h3> <a href="#top" target="_self"><b>⇧</b></a><br>:
You can apply scaling and rotation transformations to the sprite to create effects like resizing or spinning.
javascript:
// Get the canvas element
const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");
// Load the sprite image
const spriteImg = new Image();
spriteImg.src = "sprite.png";
// Sprite position and properties
let spriteX = 200;
let spriteY = 200;
let spriteWidth = 100;
let spriteHeight = 100;
let rotationAngle = 0;
// Update sprite properties and draw it
function updateSprite() {
// Clear the canvas
ctx.clearRect(0, 0, canvas.width, canvas.height);
// Apply transformations to the sprite
ctx.save();
ctx.translate(spriteX, spriteY);
ctx.rotate((rotationAngle * Math.PI) / 180);
ctx.drawImage(spriteImg, -spriteWidth / 2, -spriteHeight / 2, spriteWidth, spriteHeight);
ctx.restore();
// Update sprite properties
spriteWidth += 1;
spriteHeight += 1;
rotationAngle += 1;
// Request the next animation frame
requestAnimationFrame(updateSprite);
}
// Start the animation
spriteImg.onload = function() {
updateSprite();
};
```
<h3 id="displayaspritetopic-6">3.
Particle Effect using Sprites</h3> <a href="#top" target="_self"><b>⇧</b></a><br>:
You can create a particle effect by animating multiple sprites that represent particles.
Each particle can have its own position, velocity, and lifespan.
javascript:
// Get the canvas element
const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");
// Load the particle sprite image
const particleImg = new Image();
particleImg.src = "particle.png";
// Particle class
class Particle {
constructor(x, y, vx, vy) {
this.x = x;
this.y = y;
this.vx = vx;
this.vy = vy;
this.lifespan = 100;
}
update() {
// Update particle position
this.x += this.vx;
this.y += this.vy;
// Reduce particle lifespan
this.lifespan--;
// Draw the particle
ctx.drawImage(particleImg, this.x, this.y);
return this.lifespan > 0;
}
}
// Create an array of particles
const particles = [];
// Animation loop
function animateParticles() {
// Clear the canvas
ctx.clearRect(0, 0, canvas.width, canvas.height);
// Update and draw particles
for (let i = 0; i &lt; particles.length; i++) {
const particle = particles[i];
if (particle.update()) {
// Particle is still alive, keep it
particles[i] = particle;
} else {
// Particle has expired, remove it
particles.splice(i, 1);
i--;
}
}
// Create new particles
if (Math.random() &lt; 0.1) {
const x = Math.random() * canvas.width;
const y = Math.random() * canvas.height;
const vx = (Math.random() - 0.5) * 2;
const vy =Apologies for the incomplete response.
<h3 id="displayaspritetopic-7">complete example</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
Here's the complete example for the particle effect using sprites:
javascript:
// Get the canvas element
const canvas = document.getElementById("myCanvas");
const ctx = canvas.getContext("2d");
// Load the particle sprite image
const particleImg = new Image();
particleImg.src = "particle.png";
// Particle class
class Particle {
constructor(x, y, vx, vy) {
this.x = x;
this.y = y;
this.vx = vx;
this.vy = vy;
this.lifespan = 100;
}
update() {
// Update particle position
this.x += this.vx;
this.y += this.vy;
// Reduce particle lifespan
this.lifespan--;
// Draw the particle
ctx.drawImage(particleImg, this.x, this.y);
return this.lifespan > 0;
}
}
// Create an array of particles
const particles = [];
// Animation loop
function animateParticles() {
// Clear the canvas
ctx.clearRect(0, 0, canvas.width, canvas.height);
// Update and draw particles
for (let i = 0; i &lt; particles.length; i++) {
const particle = particles[i];
if (particle.update()) {
// Particle is still alive, keep it
particles[i] = particle;
} else {
// Particle has expired, remove it
particles.splice(i, 1);
i--;
}
}
// Create new particles
if (Math.random() &lt; 0.1) {
const x = Math.random() * canvas.width;
const y = Math.random() * canvas.height;
const vx = (Math.random() - 0.5) * 2;
const vy = (Math.random() - 0.5) * 2;
particles.push(new Particle(x, y, vx, vy));
}
// Request the next animation frame
requestAnimationFrame(animateParticles);
}
// Start the animation
particleImg.onload = function() {
animateParticles();
};
In this example, we create a Particle class representing each particle in the particle effect.
The Particle class has properties for position (x and y), velocity (vx and vy), and lifespan.
The update method is responsible for updating the particle's position, reducing its lifespan, and drawing it on the canvas.
In the animateParticles function, we clear the canvas, update and draw each particle, remove expired particles from the array, and create new particles randomly.
The animation loop continues by recursively calling requestAnimationFrame.
Make sure to replace "particle.png" with the actual filename and extension of your particle sprite image.
Feel free to customize the particle effect by adjusting the particle properties or modifying the creation logic.
<h3>sprites in games</h3>
<a href="https://gamingshift.com/sprites-in-games/" class="whitebut ">explain sprites in games</a>
<a href="https://www.codeandweb.com/free-sprite-sheet-packer" class="whitebut ">Sprite sheets packer</a>
<a href="https://www.codeandweb.com/texturepacker" class="whitebut ">TexturePacker</a>
<a href="https://mobilegamegraphics.com/product/alien-pixel/" class="whitebut ">Sprite sheets and game graphics</a>
<a href="https://blog.felgo.com/game-resources/16-sites-featuring-free-game-graphics" class="whitebut ">Download the Free Game Graphics</a>
<a href="https://graphicriver.net/sprite-and-game-graphics-in-graphics" class="whitebut ">game graphics</a>
<h2>Set Objects</h2>
A Set is a collection of unique values.
Each value may occur only once in a Set.
A Set can hold any values of any data type.
// Create a Set
const letters = new Set();
// Add some values to the Set
letters.add("a");
letters.add("b");
letters.add("c");
// Create a new Set
const letters = new Set(["a","b","c"]);
For a Set, typeof returns object:
typeof letters;      // Returns object
For a Set, instanceof Set returns true:
letters instanceof Set;  // Returns true
Add equal elements to set, only the first will be saved:
letters.add("a");
letters.add("b");
letters.add("c");
letters.add("c");
letters.size; // 3
Set Object Methods and Properties
new Set()	Creates a new Set object
add()	Adds a new element to the Set
clear()	Removes all elements from a Set
delete()	Removes an element specified by its value.
entries()	Returns an array of the values in a Set object
has()	Returns true if a value exists
forEach()	Invokes a callback for each element
keys()	Returns an array of the values in a Set object
values()	Same as keys()
size	Returns the element count
<h2>Map and set</h2>
https://www.digitalocean.com/community/tutorials/understanding-map-and-set-objects-in-javascript
Map is a collection of keyed data items, just like an Object.
But the main difference is that Map allows keys of any type.
Methods and properties are:
new Map() – creates the map.
map.set(key, value) – stores the value by the key.
map.get(key) – returns the value by the key, undefined if key doesn’t exist in map.
map.has(key) – returns true if the key exists, false otherwise.
map.delete(key) – removes the value by the key.
map.clear() – removes everything from the map.
map.size – returns the current element count.
For instance:
let map = new Map();
map.set('1', 'str1');   // a string key
map.set(1, 'num1');     // a numeric key
map.set(true, 'bool1'); // a boolean key
map.set('firstName', 'Luke')
map.set('lastName', 'Skywalker')
map.set('occupation', 'Jedi Knight')
recreate the same Map
const map = new Map([
['firstName', 'Luke'],
['lastName', 'Skywalker'],
['occupation', 'Jedi Knight'],
])
// remember the regular Object? it would convert keys to string
// Map keeps the type, so these two are different:
alert( map.get(1)   ); // 'num1'
alert( map.get('1') ); // 'str1'
alert( map.size ); // 3
Map can also use objects as keys.
For instance:
let john = { name: "John" };
// for every user, let's store their visits count
let visitsCountMap = new Map();
// john is the key for the map
visitsCountMap.set(john, 123);
alert( visitsCountMap.get(john) ); // 123
We can initialize a new Map to demonstrate the following methods and properties: delete(), has(), get(), and size.
// Initialize a new Map
const map = new Map([
['animal', 'otter'],
['shape', 'triangle'],
['city', 'New York'],
['country', 'Bulgaria'],
])
// Check if a key exists in a Map
map.has('shark') // false
map.has('country') // true
// Get an item from a Map
map.get('animal') // "otter"
// Get the count of items in a Map
map.size // 4
// Delete an item from a Map by key
map.delete('city') // true
// Empty a Map
map.clear()
The keys(), values(), and entries() methods all return a MapIterator, which is similar to an Array in that you can use for...of to loop through the values.
const map = new Map([
[1970, 'bell bottoms'],
[1980, 'leg warmers'],
[1990, 'flannel'],
])
The keys() method returns the keys:
map.keys()
The values() method returns the values:
map.values()
The entries() method returns an array of key/value pairs:
map.entries()
Map has a built-in forEach method, similar to an Array, for built-in iteration.
However, there is a bit of a difference in what they iterate over.
The callback of a Map’s forEach iterates through the value, key, and map itself, while the Array version iterates through the item, index, and array itself.
// Map
Map.prototype.forEach((value, key, map) = () => {})
// Array
Array.prototype.forEach((item, index, array) = () => {})
Map Properties and Methods
Properties/Methods	Description	Returns
set(key, value)	Appends a key/value pair to a Map	Map Object
delete(key)	Removes a key/value pair from a Map by key	Boolean
get(key)	Returns a value by key	value
has(key)	Checks for the presence of an element in a Map by key	Boolean
clear()	Removes all items from a Map	N/A
keys()	Returns all keys in a Map	MapIterator object
values()	Returns all values in a Map	MapIterator object
entries()	Returns all keys and values in a Map as [key, value]	MapIterator object
forEach()	Iterates through the Map in insertion order	N/A
size	Returns the number of items in a Map	Number
When to Use Map
Summing up, Maps are similar to Objects in that they hold key/value pairs, but Maps have several advantages over objects:
Size - Maps have a size property, whereas Objects do not have a built-in way to retrieve their size.
Iteration - Maps are directly iterable, whereas Objects are not.
Flexibility - Maps can have any data type (primitive or Object) as the key to a value, while Objects can only have strings.
Ordered - Maps retain their insertion order, whereas objects do not have a guaranteed order.
Due to these factors, Maps are a powerful data structure to consider.
However, Objects haves some important advantages as well:
JSON - Objects work flawlessly with JSON.parse() and JSON.stringify(), two essential functions for working with JSON, a common data format that many REST APIs deal with.
Working with a single element - Working with a known value in an Object, you can access it directly with the key without the need to use a method, such as Map’s get().
This list will help you decide if a Map or Object is the right data structure for your use case.
<h2>dat.gui</h2>
We all love trusted JavaScript frameworks like MooTools, jQuery, and Dojo, but there's a big push toward using focused micro-frameworks for smaller purposes.

<k>dat.gui</k>'s niche is in listening to and controlling data such that it can be visualized into charts or other graphics.

Creating a new DAT.GUI instance provides a new sliding pane for which to add controls to:
// Create an instance, which also creates a UI pane
var gui = new DAT.GUI();
With the pane ready, new controls can be added.

Fields can be of type string, number, boolean, or function, with a number slider available depending on options passed to it.

Here's how you can create a field of each type:
// My sample abject
var obj = { name: "David Walsh", num: 23, winner: true };
// String field
gui.add(obj, "name");
// Number field with slider
gui.add(obj, "num").min(1).max(50).step(1);
// Checkbox field
gui.add(obj, "winner");
Since properties are changed directly on the object itself, there's not "setter" and so <k>dat.gui</k> provides a <k>listen</k> function to do just that -- list for changes:
// Listen to changes within the GUI
gui.add(obj, "name").onChange(function(newValue) {console.log("Value changed to:  ", newValue);
});
// Listen to changes outside the GUI - GUI will update when changed from outside
gui.add(obj, "name").listen();
Those are the dead basics of the <k>dat.gui</k> library.

Note that I've not yet mentioned what the result looks like.

That's because it's up to you to create the visual aspects based on property values.

The demo that ships with <k>dat.gui</k> is a very creative dot-based constant animation.

The animation magic lies within the FizzyText function.

FizzyText is a more sizable function that does the animation, but let's take a look at the <k>dat.gui</k> code:
var fizzyText = new FizzyText("david walsh");
var gui = new DAT.GUI();
// Text field
gui.add(fizzyText, "message");
// Sliders with min + max
gui.add(fizzyText, "maxSize").min(0.5).max(7);
gui.add(fizzyText, "growthSpeed").min(0.01).max(1).step(0.05);
gui.add(fizzyText, "speed", 0.1, 2, 0.05); // shorthand for min/max/step
// Sliders with min, max and increment.
gui.add(fizzyText, "noiseStrength", 10, 100, 5);
// Boolean checkbox
gui.add(fizzyText, "displayOutline");
Tinker with the pane fields and the animation instantly changes!
JavaScript, more than any other language, seems to provide the most ability to make powerful changes with very little code.

<k>dat.gui</k> is proof of that.

The demo provided here is the same demo provided within the <k>dat.gui</k> repository, mostly because topping the effect would be a hell of a feat.

When you get a few moments, go play around with <k>dat.gui</k> -- it's really ...
dat ...
good.
<a href="https://davidwalsh.name/demo/dat-gui.php>view demo</a>
<h2>Dexie</h2>
&lt;script src="https://unpkg.com/dexie@latest/dist/dexie.js">&lt;/script>
// Define your database
var db = new Dexie("friend_database");
db.version(1).stores({ friends: 'name,shoeSize' });
// Put some data into it
db.friends.put({name: "Nicolas", shoeSize: 8}).then (function(){
// Then when data is stored, read from it
return db.friends.get('Nicolas');
}).then(function (friend) {
// Display the result
alert ("Nicolas has shoe size " + friend.shoeSize);
}).catch(function(error) {
// Finally don't forget to catch any error
// that could have happened anywhere in the
// code blocks above.
alert ("Ooops: " + error);
});
<h2>Dexie.js Minimalistic IndexedDB Wrapper</h2>
<a href="https://github.com/dfahlander/Dexie.js" class="whitebut ">Dexie.js</a>
<a href="https://dzone.com/articles/dexis-js-holistic-guide" class="whitebut ">Dexie.js guide</a>
<h2>access camera</h2>
<div id="cameratoc" class="toc">0 <a href="#cameratopic-0" target="_self">Introduction</a><br>1 <a href="#cameratopic-1" target="_self">Prerequisites</a><br>2 <a href="#cameratopic-2" target="_self">Step 1 — Checking Device Support</a><br>3 <a href="#cameratopic-3" target="_self">Step 2 — Requesting User Permission</a><br>4 <a href="#cameratopic-4" target="_self">Step 3 — Understanding Media Constraints</a><br>5 <a href="#cameratopic-5" target="_self">Step 4 — Using the <k>enumerateDevices</k> Method</a><br>6 <a href="#cameratopic-6" target="_self">Step 5 — Displaying the Video Stream on the Browser</a><br>7 <a href="#cameratopic-7" target="_self">Conclusion</a><br></div></center>
<br>
<h3 id="cameratopic-0">Introduction</h3>
With HTML5 came the introduction of APIs with access to device hardware, including the <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices">MediaDevices</a> API.

This API provides access to media input devices like audio and video.
With this API's help, developers can access audio and video devices to stream and display live video feeds in the browser.

In this tutorial, you'll access the video feed from the user's device and display it in the browser using the  method.
The <k>getUserMedia</k> API makes use of the media input devices to produce a <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream">MediaStream</a>.

This MediaStream contains the requested media types, whether audio or video.

Using the stream returned from the API, video feeds can be displayed on the browser, which is useful for real-time communication on the browser.
When used along with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API">MediaStream Recording API</a>, you can record and store media data captured on the browser.

This API only works on secure origins like the rest of the newly introduced APIs, but it also works on <k>localhost</k> and file URLs.
<h3 id="cameratopic-1">Prerequisites</h3>
A basic knowledge of JavaScript.

If you are new to JavaScript, try checking out the <a href="https://www.digitalocean.com/community/tutorial_series/how-to-code-in-javascript">How To Code in JavaScript</a> series.
This tutorial will first explain concepts and demonstrate examples with <a href="https://codepen.io/">Codepen</a>.

In the final step, you will create a functioning video feed for the browser.

<h3 id="cameratopic-2">Step 1 — Checking Device Support</h3>
First, you will see how to check if the user's browser supports the <k>mediaDevices</k> API.

This API exists within the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator">navigator</a> interface and contains the current state and identity of the user agent.

The check is performed with the following code that can be pasted into Codepen:
<k>if ('mediaDevices' in navigator &amp;&amp; 'getUserMedia' in navigator.mediaDevices) {
console.log("Let's get this party started")
}
</k>
First, this checks if the <k>mediaDevices</k> API exists within the <k>navigator</k> and then checks if the <k>getUserMedia</k> API is available within the <k>mediaDevices</k>.

If this returns <k>true</k>, you can get started.
<h3 id="cameratopic-3">Step 2 — Requesting User Permission</h3>
After confirming the browser's support for <k>getUserMedia</k>, you need to request permission to make use of the media input devices on the user agent.

Typically, after a user grants permission, a <k>Promise</k> is returned which resolves to a media stream.

This <k>Promise</k> isn't returned when the permission is denied by the user, which blocks access to these devices.
Paste the following line into Codepen to request permission:
<k>navigator.mediaDevices.getUserMedia({video: true})
</k>
The object provided as an argument for the <k>getUserMedia</k> method is called <k>constraints</k>.

This determines which of the media input devices you are requesting permissions to access.

For example, if the object contains <k>audio: true</k>, the user will be asked to grant access to the audio input device.
<h3 id="cameratopic-4">Step 3 — Understanding Media Constraints</h3>
This section will cover the general concept of <em><k>contraints</k></em>.

The <k>constraints</k> object is a  object that specifies the types of media to request and the requirements of each media type.

You can specify requirements for the requested stream using the <k>constraints</k> object, like the resolution of the stream to use (<k>front</k>, <k>back</k>).
You must specify either <k>audio</k> or <k>video</k> when making the request.

A <k>NotFoundError</k> will be returned if the requested media types can't be found on the user's browser.
If you intend to request a video stream of <k>1280 x 720</k> resolution, you can update the <k>constraints</k> object to look like this:
<k>{
video: {
width: 1280,
height: 720,
}
}
</k>
With this update, the browser will try to match the specified quality settings for the stream.

If the video device can't deliver this resolution, the browser will return other available resolutions.
To ensure that the browser returns a resolution not lower than the one provided you will have to make use of the <k>min</k> property.

Here is how you could update the <k>constraints</k> object to include the <k>min</k> property:
<k>{
video: {
width: {
min: 1280,
},
height: {
min: 720,
}
}
}
</k>
This will ensure that the stream resolution returned will be at least <k>1280 x 720</k>.

If this minimum requirement can't be met, the promise will be rejected with an <k>OverconstrainedError</k>.
In some cases you may be concerned about saving data and need the stream to not exceed a set resolution.

This can come in handy when the user is on a limited plan.

To enable this functionality, update the constraints object to contain a <k>max</k> field:
<k>{
video: {
width: {
min: 1280,
max: 1920,
},
height: {
min: 720,
max: 1080
}
}
}
</k>
With these settings, the browser will ensure that the return stream doesn't go below <k>1280 x 720</k> and doesn't exceed <k>1920 x 1080</k>.

Other terms that can be used includes <k>exact</k> and <k>ideal</k>.

The <k>ideal</k> setting is typically used along with the <k>min</k> and <k>max</k> properties to find the best possible setting closest to the ideal values provided.
You can update the constraints to use the <k>ideal</k> keyword:
<k>{
video: {
width: {
min: 1280,
ideal: 1920,
max: 2560,
},
height: {
min: 720,
ideal: 1080,
max: 1440
}
}
}
</k>
To tell the browser to make use of the front or back (on mobile) camera on devices, you can specify a <k>facingMode</k> property in the <k>video</k> object:
<k>{
video: {
width: {
min: 1280,
ideal: 1920,
max: 2560,
},
height: {
min: 720,
ideal: 1080,
max: 1440
},
facingMode: 'user'
}
}
</k>
This setting will make use of the front-facing camera at all times in all devices.

To make use of the back camera on mobile devices, you can alter the <k>facingMode</k> property to <k>environment</k>.
<k>{
video: {
...
facingMode: {
exact: 'environment'
}
}
}
</k>
<h3 id="cameratopic-5">Step 4 — Using the <k>enumerateDevices</k> Method</h3>
When the <k>enumerateDevices</k> method is called, it returns all of the available input media devices available on the user's PC.
With the method, you can provide the user options on which input media device to use for streaming audio or video content.

This method returns a <k>Promise</k> resolved to a <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo">MediaDeviceInfo</a> array containing information about each device.
An example of how to make a use of this method is shown in the snippet below:
<k>async function getDevices() {
const devices = await navigator.mediaDevices.enumerateDevices();
}
</k>
A sample response for each of the devices would look like the following:
<k>{
deviceId: "23e77f76e308d9b56cad920fe36883f30239491b8952ae36603c650fd5d8fbgj",
groupId: "e0be8445bd846722962662d91c9eb04ia624aa42c2ca7c8e876187d1db3a3875",
kind: "audiooutput",
label: "",
}
</k>
<span class="note"><strong>Note:</strong> A label won't be returned unless an available stream is available, or if the user has granted device access permissions.<br></span>
<h3 id="cameratopic-6">Step 5 — Displaying the Video Stream on the Browser</h3>
You have gone through the process of requesting and getting access to the media devices, configured constraints to include required resolutions, and selected the camera you will need to record video.
After going through all these steps, you'll at least want to see if the stream is delivering based on the configured settings.

To ensure this, you will make use of the <k>&lt;video></k> element to display the video stream on the browser.
Like mentioned earlier, the <k>getUserMedia</k> method returns a <k>Promise</k> that can be resolved to a stream.

The returned stream can be converted to an object URL using the  method.

This URL will be set as a video source.
You will create a short demo where we let the user choose from their available list of video devices.

using the  method.
This is a <k>navigator.mediaDevices</k> method.

It lists the available media devices, such as microphones and cameras.

It returns a <k>Promise</k> resolvable to an array of objects detailing the available media devices.
Create an <k>index.html</k> file and update the contents with the code below:
<div title="index.html">index.html</div><k>&lt;!doctype html>
&lt;html lang="en">
&lt;head>
&lt;meta charset="UTF-8">
&lt;meta name="viewport"
content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
&lt;meta http-equiv="X-UA-Compatible" content="ie=edge">
&lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
&lt;link rel="stylesheet" href="style.css">
&lt;title>Document&lt;/title>
&lt;/head>
&lt;body>
&lt;div>
&lt;video autoplay>&lt;/video>
&lt;canvas>&lt;/canvas>
&lt;div>
&lt;select name="">
&lt;option value="">Select camera&lt;/option>
&lt;/select>
&lt;/div>
&lt;img>
&lt;div>
&lt;button title="Play">&lt;i data-feather="play-circle">&lt;/i>&lt;/button>
&lt;button title="Pause">&lt;i data-feather="pause">&lt;/i>&lt;/button>
&lt;button title="ScreenShot">&lt;i data-feather="image">&lt;/i>&lt;/button>
&lt;/div>
&lt;/div>
&lt;script src="https://unpkg.com/feather-icons">&lt;/script>
&lt;script src="script.js">&lt;/script>gt;
&lt;/body>
&lt;/html>
</k>
In the snippet above, you have set up the elements you will need and a couple of controls for the video.

Also included is a button for taking screenshots of the current video feed.
Now, let's style up these components a bit.
Create a <k>style.css</k> file and copy the following styles into it.

<a href="https://getbootstrap.com/">Bootstrap</a> was included to reduce the amount of CSS you will need to write to get the components going.
<div title="style.css">style.css</div><k>.screenshot-image {
width: 150px;
height: 90px;
border-radius: 4px;
border: 2px solid whitesmoke;
box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
position: absolute;
bottom: 5px;
left: 10px;
background: white;
}
.display-cover {
display: flex;
justify-content: center;
align-items: center;
width: 70%;
margin: 5% auto;
position: relative;
}
video {
width: 100%;
background: rgba(0, 0, 0, 0.2);
}
.video-options {
position: absolute;
left: 20px;
top: 30px;
}
.controls {
position: absolute;
right: 20px;
top: 20px;
display: flex;
}
.controls > button {
width: 45px;
height: 45px;
text-align: center;
border-radius: 100%;
margin: 0 6px;
background: transparent;
}
.controls > button:hover svg {
color: white !important;
}
@media (min-width: 300px) and (max-width: 400px) {
.controls {
flex-direction: column;
}
.controls button {
margin: 5px 0 !important;
}
}
.controls > button > svg {
height: 20px;
width: 18px;
text-align: center;
margin: 0 auto;
padding: 0;
}
.controls button:nth-child(1) {
border: 2px solid #D2002E;
}
.controls button:nth-child(1) svg {
color: #D2002E;
}
.controls button:nth-child(2) {
border: 2px solid #008496;
}
.controls button:nth-child(2) svg {
color: #008496;
}
.controls button:nth-child(3) {
border: 2px solid #00B541;
}
.controls button:nth-child(3) svg {
color: #00B541;
}
.controls > button {
width: 45px;
height: 45px;
text-align: center;
border-radius: 100%;
margin: 0 6px;
background: transparent;
}
.controls > button:hover svg {
color: white;
}
</k>
The next step is to add functionality to the demo.

Using the <k>enumerateDevices</k> method, you will get the available video devices and set it as the options within the select element.

Create a file called <k>script.js</k> and update it with the following snippet:
<div title="script.js">script.js</div><k>feather.replace();
const controls = document.querySelector('.controls');
const cameraOptions = document.querySelector('.video-options>select');
const video = document.querySelector('video');
const canvas = document.querySelector('canvas');
const screenshotImage = document.querySelector('img');
const buttons = [...controls.querySelectorAll('button')];
let streamStarted = false;
const [play, pause, screenshot] = buttons;
const constraints = {
video: {
width: {
min: 1280,
ideal: 1920,
max: 2560,
},
height: {
min: 720,
ideal: 1080,
max: 1440
},
}
};
const getCameraSelection = async () => {
const devices = await navigator.mediaDevices.enumerateDevices();
const videoDevices = devices.filter(device => device.kind === 'videoinput');
const options = videoDevices.map(videoDevice => {
return `&lt;option value="${videoDevice.deviceId}">${videoDevice.label}&lt;/option>`;
});
cameraOptions.innerHTML = options.join('');
};
play.onclick = () => {
if (streamStarted) {
video.play();
play.classList.add('d-none');
pause.classList.remove('d-none');
return;
}
if ('mediaDevices' in navigator &amp;&amp; navigator.mediaDevices.getUserMedia) {
const updatedConstraints = {
...constraints,
deviceId: {
exact: cameraOptions.value
}
};
startStream(updatedConstraints);
}
};
const startStream = async (constraints) => {
const stream = await navigator.mediaDevices.getUserMedia(constraints);
handleStream(stream);
};
const handleStream = (stream) => {
video.srcObject = stream;
play.classList.add('d-none');
pause.classList.remove('d-none');
screenshot.classList.remove('d-none');
streamStarted = true;
};
getCameraSelection();
</k>
In the snippet above, there are a couple of things going on.

Let's break them down:
<ol>
<k>feather.replace()</k>: this method call instantiates <a href="https://feathericons.com/">feather</a>, which is an icon set for web development.
The <k>constraints</k> variable holds the initial configuration for the stream.

This will be extended to include the media device the user chooses.
<k>getCameraSelection</k>: this function calls the <k>enumerateDevices</k> method.

Then, you filter through the array from the resolved <k>Promise</k> and select video input devices.

From the filtered results, you create <k>&lt;option></k> for the <k>&lt;select></k> element.
Calling the <k>getUserMedia</k> method happens within the <k>onclick</k> listener of the <k>play</k> button.

Here, you will check if this method is supported by the user's browser before starting the stream.
Next, you will call the <k>startStream</k> function that takes a <k>constraints</k> argument.

It calls the <k>getUserMedia</k> method with the provided <k>constraints</k>.

<k>handleStream</k> is called using the stream from the resolved <k>Promise</k>.

This method sets the returned stream to the video element's <k>srcObject</k>.
</ol>
Next, you will add click listeners to the button controls on the page to <k>pause</k>, <k>stop</k>, and take <k>screenshots</k>.

Also, you will add a listener to the <k>&lt;select></k> element to update the stream constraints with the selected video device.
Update the <k>script.js</k> file with the code below:
<div title="script.js">script.js</div><k>...
cameraOptions.onchange = () => {
const updatedConstraints = {
...constraints,
deviceId: {
exact: cameraOptions.value
}
};
startStream(updatedConstraints);
};
const pauseStream = () => {
video.pause();
play.classList.remove('d-none');
pause.classList.add('d-none');
};
const doScreenshot = () => {
canvas.width = video.videoWidth;
canvas.height = video.videoHeight;
canvas.getContext('2d').drawImage(video, 0, 0);
screenshotImage.src = canvas.toDataURL('image/webp');
screenshotImage.classList.remove('d-none');
};
pause.onclick = pauseStream;
screenshot.onclick = doScreenshot;
</k>
Now, when you open the <k>index.html</k> file in the browser, clicking the <strong>Play</strong> button will start the stream.
Here is a complete demo:
<a href="https://codepen.io/chrisbeast/pen/ebYwpX">https://codepen.io/chrisbeast/pen/ebYwpX</a>
<h3 id="cameratopic-7">Conclusion</h3>
This tutorial introduced the <k>getUserMedia</k> API.

It is an interesting addition to HTML5 that eases the process of capturing media on the web.
The API takes a parameter (<k>constraints</k>) that can be used to configure the access to audio and video input devices.

It can also be used to specify the video resolution required for your application.
You can extend the demo further to give the user an option to save the screenshots taken, as well as recording and storing video and audio data with the help of MediaStream Recording API.
https://stackoverflow.com/questions/12024770/access-camera-from-a-browser
<h2>Web Audio</h2>
<a href="https://p5js.org/reference/#/libraries/p5.sound" class="whitebut ">p5.sound Web Audio including audio input, playback, analysis and synthesis</a>
<a href="https://p5js.org/reference/#/p5.Amplitude/getLevel" class="whitebut ">p5.sound getLevel</a>
<h2>IOT and robotic</h2>
<a href="https://blog.bitsrc.io/10-javascript-iot-libraries-to-use-in-your-next-projects-bef5f9136f83" class="whitebut ">Javascript iot-libraries (robotics)</a>
<a href="https://docs.mistyrobotics.com/misty-i/coding-misty/local-skill-tutorials/" class="whitebut ">On-Robot JavaScript API Tutorials</a>
<h2>jquery set img width and height</h2>
$('img').css('max-height', $(window).height());
$("img").click(function() {
$('img').css('max-height', $(window).height());
window.location = "#topic-" + topicpointer;
})
$("img").dblclick(function() {
$('img').css('max-height', '100%');
window.location = "#topic-" + topicpointer;
})
img{max-height:100vh;}
img{max-width:100vh;}
<h2>popup was blocked</h2>
to test if a popup was blocked and take action in case.
function pop(url,w,h) {
n=window.open(url,'_blank','toolbar=0,location=0,directories=0,status=1,menubar=0,titlebar=0,scrollbars=1,resizable=1,width='+w+',height='+h);
if(n==null) {
alert("popup blocked")
return true;
}
return false;
}
<h2>javascript write to page</h2> 
var html="";
html +='&lt;div class="main clearFix inner new-center2">';
document.write(html);
<h2>Make anchor link go some pixels above</h2>
window.addEventListener("hashchange", function () {
window.scrollTo(window.scrollX, window.scrollY - 20);
});
<a href="https://www.py4u.net/discuss/278843" class="whitebut ">Make anchor link go some pixels above where it's linked to</a>
<a href="https://thewebdev.info/2021/05/08/how-to-make-an-anchor-link-go-some-pixels-above-where-its-linked-to-with-javascript/" class="whitebut ">Make an Anchor Link Go Some Pixels Above Where it’s Linked To</a>
<h2>software Open Source Projects</h2>
<a href="https://medium.com/@likid_geimfari/the-list-of-interesting-open-source-projects-2daaa2153f7c" class="whitebut ">interesting Open Source projects</a>
<a href="https://fusejs.io/" class="whitebut ">Fuse.js is a fuzzy-search library</a>
<a href="https://markjs.io/" class="whitebut ">JavaScript keyword highlighter</a>
<a href="https://prismjs.com/" class="whitebut ">Prism is a syntax highlighter</a>
<a href="https://www.npmjs.com/package/rocket-loader" class="whitebut ">An animated loader graphic module.</a>
<h2>AJAX Database Example</h2>
The following example will demonstrate how a web page can fetch information from a database with AJAX
&lt;h2>The XMLHttpRequest Object&lt;/h2>
&lt;form action=""> 
&lt;select name="customers" onchange="showCustomer(this.value)">
&lt;option value="">Select a customer:&lt;/option>
&lt;option value="ALFKI">Alfreds Futterkiste&lt;/option>
&lt;option value="NORTS ">North/South&lt;/option>
&lt;option value="WOLZA">Wolski Zajazd&lt;/option>
&lt;/select>
&lt;/form>
&lt;br>
&lt;div id="txtHint">Customer info will be listed here...&lt;/div>
&lt;script>
function showCustomer(str) {
if (str == "") {
document.getElementById("txtHint").innerHTML = "";
return;
}
const xhttp = new XMLHttpRequest();
xhttp.onload = function() {
document.getElementById("txtHint").innerHTML = this.responseText;
}
xhttp.open("GET", "getcustomer.php?q="+str);
xhttp.send();
}
The showCustomer() Function
When a user selects a customer in the dropdown list, a function called showCustomer() is executed.
The function is triggered by the onchange event:
showCustomer
function showCustomer(str) {
if (str == "") {
document.getElementById("txtHint").innerHTML = "";
return;
}
const xhttp = new XMLHttpRequest();
xhttp.onload = function() {
document.getElementById("txtHint").innerHTML = this.responseText;
}
xhttp.open("GET", "getcustomer.php?q="+str);
xhttp.send();
}
The showCustomer() function does the following:
Check if a customer is selected
Create an XMLHttpRequest object
Create the function to be executed when the server response is ready
Send the request off to a file on the server
Notice that a parameter (q) is added to the URL (with the content of the dropdown list)
The AJAX Server Page
The page on the server called by the JavaScript above is a PHP file called "getcustomer.php".
The source code in "getcustomer.php" runs a query against a database, and returns the result in an HTML table:
&lt;?php
$mysqli = new mysqli("servername", "username", "password", "dbname");
if($mysqli->connect_error) {
exit('Could not connect');
}
$sql = "SELECT customerid, companyname, contactname, address, city, postalcode, country
FROM customers WHERE customerid = ?";
$stmt = $mysqli->prepare($sql);
$stmt->bind_param("s", $_GET['q']);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($cid, $cname, $name, $adr, $city, $pcode, $country);
$stmt->fetch();
$stmt->close();
echo "&lt;table>";
echo "&lt;tr>";
echo "&lt;th>CustomerID&lt;/th>";
echo "&lt;td>" .
$cid .
"&lt;/td>";
echo "&lt;th>CompanyName&lt;/th>";
echo "&lt;td>" .
$cname .
"&lt;/td>";
echo "&lt;th>ContactName&lt;/th>";
echo "&lt;td>" .
$name .
"&lt;/td>";
echo "&lt;th>Address&lt;/th>";
echo "&lt;td>" .
$adr .
"&lt;/td>";
echo "&lt;th>City&lt;/th>";
echo "&lt;td>" .
$city .
"&lt;/td>";
echo "&lt;th>PostalCode&lt;/th>";
echo "&lt;td>" .
$pcode .
"&lt;/td>";
echo "&lt;th>Country&lt;/th>";
echo "&lt;td>" .
$country .
"&lt;/td>";
echo "&lt;/tr>";
echo "&lt;/table>";
?>
<h2>javascript online compiler</h2>
<a href="https://onecompiler.com/javascript" class="whitebut ">javascript compiler</a>
<a href="https://www.programiz.com/javascript/online-compiler/" class="whitebut ">javascript online compiler</a>
<a href="https://www.tutorialspoint.com/online_javascript_editor.php" class="whitebut ">tutorialspoint online_javascript_editor</a>
<a href="https://playcode.io/new/" class="whitebut ">playcode javascript online</a>
<a href="https://replit.com/languages/javascript" class="whitebut ">replit online compiler</a>
<h2>execute script code in a javascript append</h2>
appending HTML into the DOM does not cause the browser to evaluate any <a href="/how-to-transfer-code-from-in-script-tags-to-a-js-file-code-example" rel="dofollow">script tags</a> in said appended HTML.
If you really wanted to, you could evaluate the javascript by using <k>eval()</k>:
<k>eval($(this).find("script").text());</k>
I know this is an old question but I've had a similar problem today.
The solution was using createContextualFragment.
My <a href="/qr-code-looks-funy-code-example" rel="dofollow">code looks</a> something like this:
<k>var tagString = '&lt;script async type="text/javascript" src="path_to_script">&lt;/script>';
var range = document.createRange();
range.selectNode(document.getElementsByTagName("BODY")[0]);
var documentFragment = range.createContextualFragment(tagString);
document.body.appendChild(documentFragment);
</k>
This <a href="/javascript-how-visual-code-works-with-node-js-code-example" rel="dofollow">code works</a> in my browser.
<k>$('body').append('&lt;script>alert("test");&lt;' + '/' + 'script>');
</k>
so it might be that <k>$(this)</k> is what is actually causing your problem.
Can you replace it with <k>'body'</k> and see if it works like that?
<h2>after append</h2>
jquery insert after
$( "&lt;p>Test&lt;/p>" ).insertAfter( ".inner" );
jquery append after
&lt;div class="container">
&lt;h2>Greetings&lt;/h2>
&lt;div class="inner">Hello&lt;/div>
&lt;div class="inner">Goodbye&lt;/div>
&lt;/div>
&lt;script>$( "&lt;p>Test&lt;/p>" ).insertAfter( ".inner" );&lt;/script>
append after div
.after() puts the element after the element
using after:
$('.a').after($('.c'));
after execution:
&lt;div class='a'>
&lt;div class='b'>b&lt;/div>
&lt;/div>
&lt;div class='c'>c&lt;/div> //&lt;----this will be placed here
<h2>Run script after appending it to the HTML</h2>
jQuery provides the $.getScript(url [,success]) function.
You can then load and execute your code from a separate jquery file which helps to manage and control the flow of execution.
basically put your alert("testing!") script inside a separate file, for instance alert.js in the same directory.
Then you can run the script when adding your employee to the HTML.
var str = '<div><p>Examplee</p></div>';
var url = 'alert.js';    
document.body.innerHTML += str;    
$.getScript(url);
I know this may seem like more work, but it is better practice to keep your javascript out of your HTML.
You can also use a callback to gather user data after the alert or notify another process that the user has been alerted.
$.getScript(url, function(){
//do something after the alert is executed.
});
For instance maybe it would be a better design to add the employee after the alert is executed.
var str = '<div><p>Examplee</p></div>';
var url = 'alert.js'; 
$.getScript(url, function(){
document.body.innerHTML += str;
});
Edit: I know jQuery is not tagged, but I am also no petitioning to be the accepted answer to this question.
I am only offering another alternative for someone who may run into the same issue and may be using jQuery.
If that is the case $.getScript is a very useful tool designed for this exact problem.
<h2>Failed to load resource</h2>
net::ERR_BLOCKED_BY_CLIENT with Google chrome
These errors are usually generated from an ad blocking plugin, such as Adblock Plus.
To test this use either a different browser or uninstall the ad blocking plugin.
There is an easier way to temporarily disable an extension.
In Chrome, opening an Incognito tab will usually stop extensions running.
use ctrl+shift+N
<h2>Count frequency</h2>
var arr = [5, 5, 5, 2, 2, 2, 2, 2, 9, 4]
arr.reduce(function (acc, item) {
return acc[item] ? ++acc[item] : acc[item] = 1, acc
}, {});
console.log(arr) // => {2: 5, 4: 1, 5: 3, 9: 1}
or
arr.reduce((acc, item) => {
acc[item] = (acc[item] || 0) + 1
return acc
}, {})
to create an incremental range, pre sort the array
arr.sort();
to apply a filter within range
var res = arr.filter(function(item) {
return item <= range.max && item >= range.min;
});
arr.filter(function(item) { return item <= 5 && item >= 3; });
loop to find frequency distribution by bins
By default, the sort method sorts elements alphabetically.
To sort numerically just add a new method which handles numeric sorts
arr.sort(function(a, b) { return a - b; }) // note the minus operation
var arr = [5, 5, 5, 2, 2, 2, 2, 2, 9, 4, 3,6,6,8,7,1,2,4, 4,2,7,5,10,11,12]
arr.map(x => parseInt(x))
// arr.sort()
arr.sort(function(a, b) { return a - b; }) // note the minus operation
bins = 4
theMin = Math.min( ...arr )
theMax = Math.max( ...arr )
range = theMax - theMin
interval = range / bins
freq = []
for (i = theMin; i <= theMax; i += interval) {
if(i + interval == theMax){
var selected = arr.filter(function(item) {
return item >= i && item <= i + interval;
});
}else{
var selected = arr.filter(function(item) {
return item >= i && item < i + interval;
});
}
counts = selected.length
console.log(i, " selected ",selected, " counts ",counts)
freq.push(counts)
}
freq.pop()  // the last one is not intended
<h2>find Mode, mean, std, variance</h2>
function findMode(arr) {
var modes = [], count = [], i, number, maxIndex = 0;
for (i = 0; i < arr.length; i += 1) {
number = arr[i];
count[number] = (count[number] || 0) + 1;
if (count[number] > maxIndex) {
maxIndex = count[number];
}
}
for (i in count)
if (count.hasOwnProperty(i)) {
if (count[i] === maxIndex) {
modes.push(Number(i));
}
}
return modes;
}
interquartile range
standard deviation
Cumulative Frequency Distributions
// sort array ascending
const asc = arr => arr.sort((a, b) => a - b);
const sum = arr => arr.reduce((a, b) => a + b, 0);
const mean = arr => sum(arr) / arr.length;
// sample standard deviation
const std = (arr) => {
const mu = mean(arr);
const diffArr = arr.map(a => (a - mu) ** 2);
return Math.sqrt(sum(diffArr) / (arr.length - 1));
};
const quantile = (arr, q) => {
const sorted = asc(arr);
const pos = (sorted.length - 1) * q;
const base = Math.floor(pos);
const rest = pos - base;
if (sorted[base + 1] !== undefined) {
return sorted[base] + rest * (sorted[base + 1] - sorted[base]);
} else {
return sorted[base];
}
};
const findVariance = (array = []) => {
if(!array.length){
return 0;
};
const sum = array.reduce((acc, val) => acc + val);
const { length: num } = array;
const median = sum / num;
let variance = 0;
array.forEach(num => {
variance += ((num - median) * (num - median));
});
variance /= num;
return variance;
};
const q25 = arr => quantile(arr, .25);
const q50 = arr => quantile(arr, .50);
const q75 = arr => quantile(arr, .75);
const median = arr => q50(arr);
to find q25 of an numArray
q25(numArray)
<h2>To check max input length by prompt</h2>
var rep = "+" ;
while (rep != null)
{
document.write(rep.length + " " + rep + "&lt;br>") ;
rep = prompt("Input length was : " + rep.length, rep + rep);
}
<h2>html re-enable right click</h2>
https://stackoverflow.com/questions/21335136/how-to-re-enable-right-click-so-that-i-can-inspect-html-elements-in-chrome/21335527
Open dev tools (Shift+Control+i).
Select the "Elements" tab,
and then the "Event Listeners" tab.
Hover over the elements/listener.
A "Remove" button will show up.
Click "Remove".
<img class="lazy" data-src="https://i.stack.imgur.com/gNAtV.png">
Another possible way, when the blocking function is made with jquery, use:
$(document).unbind();
It will clear all the onmousedown and contextmenu events attributed dynamically, that can't be erased with document.contextmenu=null; etc.
some code did a re-bind: 
$(document).bind("contextmenu",function(e){if(!$('#easyy').length)e.preventDefault();});
If none of the other comments works, just do, open console line command and type:
document.oncontextmenu = null;
<h2>JavaScript encryption hex_md5.js</h2>
https://gist.github.com/Xarrow/e8d14b982c2763954230
&lt;script type="text/javascript" src="md5.js">&lt;/script>
&lt;script>
for(var k=1; k&lt;=310; k++){
$('#mustWatch').append( hex_md5(String(k)) + "&lt;br>")
}
&lt;/script>
<h2>generate random array</h2>
waitingList = Array(10).fill().map(() => Math.round(Math.random() * totalLength))
// set unique
waitingList = [...new Set(waitingList)]
if (localStorage.getItem(waitingList) === null) {
initWaitList()
}else{
waitList = localStorage.getItem(waitingList).split(",").map(Number)
if(waitList == [0]){ initWaitList() }
}
function initWaitList() {
// generate random pointers
waitList = Array(10).fill().map(() => Math.round(Math.random() * totalLength))
waitList = [...new Set(waitList)]    // set unique
localStorage.setItem(waitingList, waitList)
}
function randomWL() {
pointerList = waitList
if(waitList.length > 10){
pointerList.splice(10, (pointerList.length - 10));
}
newPointer = pointerList[Math.floor(Math.random() * pointerList.length)];
while(newPointer == topicpointer){
newPointer = pointerList[Math.floor(Math.random() * pointerList.length)];
}
topicpointer = newPointer;
showTopic();
}
function addtoWL() {
console.log(topicpointer)waitList.push(topicpointer)waitList = Array.from(new Set(waitList))localStorage.setItem(waitingList, waitList)alert("added topic: " +topicpointer+ "\nwaitList: " + waitList)
}
<h2>Create a Cookie with JavaScript</h2>
JavaScript can create, read, and delete cookies with the <k>document.cookie</k> 
property.
With JavaScript, a cookie can be created like this:
document.cookie = "username=John Doe";
You can also add an expiry date (in UTC time).
By default, the cookie is deleted when the browser is closed:
document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC";
With a path parameter, you can tell the browser what path the cookie belongs to.
By default, the cookie belongs to the current page.
document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
<h3>Read a Cookie with JavaScript</h3>
With JavaScript, cookies can be read like this:
let x = document.cookie;
<k>document.cookie</k> will return all cookies in one string much like: cookie1=value; cookie2=value; cookie3=value;
<h3>Change a Cookie with JavaScript</h3>
With JavaScript, you can change a cookie the same way as you create it:
document.cookie = "username=John Smith; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
The old cookie is overwritten.
<h3>Delete a Cookie with JavaScript</h3>
Deleting a cookie is very simple.
You don't have to specify a cookie value when you delete a cookie.
Just set the expires parameter to a past date:
document.cookie = "username=; expires=Thu, 01 
Jan 1970 00:00:00 UTC; path=/;";
You should define the cookie path to ensure that you delete the right cookie.
Some browsers will not let you delete a cookie if you don't specify the path.
<h3>The Cookie String</h3>
The <k>document.cookie</k> property looks like a normal text string.
But it is not.
Even if you write a whole cookie string to document.cookie, when you read it out again, you can only see the 
name-value pair of it.
If you set a new cookie, older cookies are not overwritten.
The new cookie is added to document.cookie, so if you read document.cookie 
again you will get something like:
cookie1 = value; cookie2 = value;
<button type="button" onclick='displayCookies()'>Display All Cookies</button> 
<button type="button" onclick='document.cookie="firstname=John;expires=Wed, 18 Dec 2026 12:00:00 GMT"'>Create Cookie 1</button> 
<button type="button" onclick='document.cookie="lastname=Smith;expires=Wed, 18 Dec 2026 12:00:00 GMT"'>Create Cookie 2</button>
<button type="button" onclick='document.cookie="firstname=;expires=Thu, 01 Jan 1970"'>Delete Cookie 1</button> 
<button type="button" onclick='document.cookie="lastname=;expires=Thu, 01 Jan 1970"'>Delete Cookie 2</button>
If you want to find the value of one specified cookie, you must write a JavaScript 
function that searches for the cookie value in the cookie string.
<h3>JavaScript Cookie Example</h3>
In the example to follow, we will create a cookie that stores the name of a visitor.
The first time a visitor arrives to the web page, he/she will be asked to fill in his/her name.
The name is then stored in a cookie.
The next time the visitor arrives at the same page, he/she will get a welcome message.
For the example we will create 3 JavaScript functions:
<li>A function to set a cookie value</li>
<li>A function to get a cookie value</li>
<li>A function to check a cookie value</li>
<h3>A Function to Set a Cookie</h3>
First, we create a <k>function</k> that stores the name of the visitor in a cookie variable:
<b>Example</b>
function setCookie(cname, cvalue, exdays) {
const d = new Date();
d.setTime(d.getTime() + (exdays*24*60*60*1000));
let expires = "expires="+ d.toUTCString();
document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}
<strong>Example explained:</strong>
The parameters of the function above are the name of the cookie (cname), the value of the cookie 
(cvalue), and the number of days until the cookie should expire (exdays).
The function sets a cookie by adding together the cookiename, the cookie 
value, and the expires string.
<h3>A Function to Get a Cookie</h3>
Then, we create a <k>function</k> that returns the value of a specified cookie:
<b>Example</b>
function getCookie(cname) {
let name = cname + "=";
let decodedCookie = decodeURIComponent(document.cookie);
let ca = decodedCookie.split(';');
for(let i = 0; i &lt;ca.length; i++) {
let c = ca[i];
while (c.charAt(0) == ' ') {
c = c.substring(1);
}
if (c.indexOf(name) == 0) {
return c.substring(name.length, c.length);
}
}
return "";
}
<strong>Function explained:</strong>
Take the cookiename as parameter (cname).
Create a variable (name) with the text to search for (cname + "=").
Decode the cookie string, to handle cookies with special characters, e.g.
'$'
Split document.cookie on semicolons into an array called ca (ca = 
decodedCookie.split(';')).
Loop through the ca array (i = 0; i < ca.length; i++), and read out each value c = ca[i]).
If the cookie is found (c.indexOf(name) == 0), return the value of the cookie (c.substring(name.length, c.length).
If the cookie is not found, return "".
<h3>A Function to Check a Cookie</h3>
Last, we create the function that checks if a cookie is set.
If the cookie is set it will display a greeting.
If the cookie is not set, it will display a prompt box, asking for the name of the user,
and stores the username cookie for 365 days, by calling the <k>setCookie</k> function:
<b>Example</b>
function checkCookie() {
let username = getCookie("username");
if (username != "") {
alert("Welcome again " + username);
} else {
username = prompt("Please enter your name:", "");
if (username != "" && username != null) {
setCookie("username", username, 365);
}
}
}
<h3>All Together Now</h3>
<b>Example</b>
function setCookie(cname, cvalue, exdays) {
const d = new Date();
d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
let expires = "expires="+d.toUTCString();
document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}
function getCookie(cname) {
let name = cname + "=";
let ca = document.cookie.split(';');
for(let i = 0; i < ca.length; i++) {
let c = ca[i];
while (c.charAt(0) == ' ') {
c = c.substring(1);
}
if (c.indexOf(name) == 0) {
return c.substring(name.length, c.length);
}
}
return "";
}
function checkCookie() {
let user = getCookie("username");
if (user != "") {
alert("Welcome again " + user);
} else {
user = prompt("Please enter your name:", "");
if (user != "" && user != null) {
setCookie("username", user, 365);
}
}
}
<a target="_blank" href="https://www.w3schools.com/js/tryit.asp?filename=tryjs_cookie_username" class="w3-btn w3-margin-bottom">Try it Yourself &raquo;</a>
The example above runs the <k>checkCookie()</k> function when the page loads.
<h2>blank return</h2>
var x; // x is undefined
alert(x); // shows "undefined"
alert(!x); // shows "true"
alert(x==false); // shows "false"
So, It is a good practice to return "false" instead of a blank return.
That way you make it all uniform and make life easy for other programmers.
alert("type: " + typeof x+", value: "+x);
alert("type: " + typeof !x+", value: "+!x);
alert("type: " + typeof x==false +", value: "+ x==false);
<h2>speechSynthesis.speak()</h2>
speechSynthesis.speak() without user activation is no longer allowed
If you set your site address as "trusted" in chrome://settings/content/sound it seems to enable sound and speech synthesis even without user interactions.
User interaction means: click, dblclick, mouseup, pointerup, reset, submit etc.
So, if you want to run speechSynthesis.speak(); without real user interaction, then you just create temporary user interaction using a method like .click(), etc.
https://stackoverflow.com/questions/46551705/speechsynthesis-speaking-never-true
A simple hack, without needing a real user activity, is to execute a click event on a hidden button like so.
document.querySelector('button').click();
var msg = new SpeechSynthesisUtterance('Test');
window.onload = function(){ 
var u = new SpeechSynthesisUtterance('All is Ok');
u.text = 'Hello World';    
u.lang = 'en-US';
u.rate = 1;
u.pitch = .4;     
speechSynthesis.speak(u);
}
function doSpeech() {
var synth = window.speechSynthesis;
var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say.
Make it longer !');
var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side.
even longer !');
synth.speak(utterance1);
// If you check immediately (js code executed in less than ms) the
// status won't be true
if (synth.speaking) {
console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
}
// Wait 500ms to check for the status of the utterance
setTimeout(function(){
if (synth.speaking) {
console.log("This will be printed if starts after 500ms :)");
}
}, 500);
}
doSpeech();
In my case, both of the console.log statements are being printed.
But if in your case it isn't being printed, execute your code only after the start event of the utterance:
function doSpeech() {
var synth = window.speechSynthesis;
var msg = new SpeechSynthesisUtterance();
msg.text = "We should say another sentence too, just to be on the safe side.
even longer !";
msg.addEventListener('start', function () {
if(synth.speaking){
console.log("This will be printed !");
}
});
synth.speak(msg);
} 
doSpeech();
function doSpeech() {
var synth = window.speechSynthesis;
var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say.
Make it longer !');
var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side.
even longer !');
synth.speak(utterance1);
// If you check immediately (js code executed in less than ms) the
// status won't be true
if (synth.speaking) {
console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
}
// Wait 500ms to check for the status of the utterance
setTimeout(function(){
if (synth.speaking) {
console.log("This will be printed if starts after 500ms :)");
}
}, 500);
}
doSpeech();
In my case, both of the console.log statements are being printed.
But if in your case it isn't being printed, execute your code only after the start event of the utterance:
function doSpeech() {
var synth = window.speechSynthesis;
var msg = new SpeechSynthesisUtterance();
msg.text = "We should say another sentence too, just to be on the safe side.
even longer !";
msg.addEventListener('start', function () {
if(synth.speaking){
console.log("This will be printed !");
}
});
synth.speak(msg);
} 
doSpeech();
<h2>speak functions</h2>
function polyphone(str){
var findstr = ["應勿","則省","使更","不入","所好","所惡","號泣","喪","長呼","尊長","見能","遇長","長無","下車","待","朝起","便溺","切","冠服","不貴","循分","稱家","從容","跛倚","不問","還","擅為","為先","未的","地同載","同","行高","訾","不欲","不媚","不力","長浮","為限","滯塞","几","不敬","卷"];
var rplcstr = ["硬勿","則醒","使庚","轐入","所耗","所勿","毫泣","桑","掌呼","尊掌","現能","遇掌","掌無","下居","帶","招起","便尿","竊","官服","轐貴","循份","秤家","匆容","必倚","轐問","環","擅圍","圍先","未笛","弟銅在","銅","幸高","子","轐欲","轐媚","轐力","掌浮","圍限","滯色","雞","轐敬","倦"];
var regex; 
for (var i = 0; i &lt; findstr.length; i++) {
regex = new RegExp(findstr[i], "g");
str= str.replace(regex, rplcstr[i]);
}
return str;
}
function getSpeechParagraphs(){
var ret = "弟子規";
var pfs=document.getElementsByName('pf');
for (i = 0; i  &lt;  pfs.length; i++) {
s=pfs[i].innerText.replace(/　/g, "，");
s=s.replace(/[\n\r]/g,'，');
ret=ret+'。
'+s;
}
return polyphone(ret);
}
if ('speechSynthesis' in window) {  
var paragraphs=getSpeechParagraphs();
var synth = window.speechSynthesis;
synth.cancel();
var u = new SpeechSynthesisUtterance();
u.rate=0.8;
u.pitch=1;
u.volume=1;
u.text=paragraphs;
u.lang = 'zh-TW';
var u2 = new SpeechSynthesisUtterance();
u2.rate=0.7;
u2.pitch=1;
u2.volume=1;
u2.lang = 'zh-TW';
function speak() {
speechSynthesis.speak(new SpeechSynthesisUtterance("hello world"));
speechSynthesis.speak(u);
}
var u = new SpeechSynthesisUtterance('All is Ok');
u.text = 'Hello World';    
u.lang = 'en-US';
u.rate = 1;
u.pitch = .4;     
function speech_selection(){
var selectedText = "";
if(window.getSelection){
selectedText = window.getSelection();
}else if(document.getSelection){
selectedText = document.getSelection();
}else if(document.selection){
selectedText = document.selection.createRange().text;
}
if(selectedText != ""){
selectedText = selectedText.toString();
if(synth.speaking){synth.cancel();}
var voices = synth.getVoices();
for(var i=0;i &lt; voices.length;i++){
if ( voices[i].localService==true && voices[i].lang.toLowerCase() =='zh-tw'){
u2.voice=voices[i];
break;
}
}      
u2.text=polyphone(selectedText);
synth.speak(u2);
}
}
function doSpeech() {
var synth = window.speechSynthesis;
var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say.
Make it longer !');
var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side.
even longer !');
synth.speak(utterance1);
// If you check immediately (js code executed in less than ms) the
// status won't be true
if (synth.speaking) {
console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
}
// Wait 500ms to check for the status of the utterance
setTimeout(function(){
if (synth.speaking) {
console.log("This will be printed if starts after 500ms :)");
}
}, 500);
}
doSpeech();
<h2>speak functions</h2>
function polyphone(str){
var findstr = ["應勿","則省","使更","不入","所好","所惡","號泣","喪","長呼","尊長","見能","遇長","長無","下車","待","朝起","便溺","切","冠服","不貴","循分","稱家","從容","跛倚","不問","還","擅為","為先","未的","地同載","同","行高","訾","不欲","不媚","不力","長浮","為限","滯塞","几","不敬","卷"];
var rplcstr = ["硬勿","則醒","使庚","轐入","所耗","所勿","毫泣","桑","掌呼","尊掌","現能","遇掌","掌無","下居","帶","招起","便尿","竊","官服","轐貴","循份","秤家","匆容","必倚","轐問","環","擅圍","圍先","未笛","弟銅在","銅","幸高","子","轐欲","轐媚","轐力","掌浮","圍限","滯色","雞","轐敬","倦"];
var regex; 
for (var i = 0; i &lt; findstr.length; i++) {
regex = new RegExp(findstr[i], "g");
str= str.replace(regex, rplcstr[i]);
}
return str;
}
function getSpeechParagraphs(){
var ret = "弟子規";
var pfs=document.getElementsByName('pf');
for (i = 0; i  &lt;  pfs.length; i++) {
s=pfs[i].innerText.replace(/　/g, "，");
s=s.replace(/[\n\r]/g,'，');
ret=ret+'。
'+s;
}
return polyphone(ret);
}
if ('speechSynthesis' in window) {  
var paragraphs=getSpeechParagraphs();
var synth = window.speechSynthesis;
synth.cancel();
var u = new SpeechSynthesisUtterance();
u.rate=0.8;
u.pitch=1;
u.volume=1;
u.text=paragraphs;
u.lang = 'zh-TW';
var u2 = new SpeechSynthesisUtterance();
u2.rate=0.7;
u2.pitch=1;
u2.volume=1;
u2.lang = 'zh-TW';
function speak() {
speechSynthesis.speak(new SpeechSynthesisUtterance("hello world"));
speechSynthesis.speak(u);
}
var u = new SpeechSynthesisUtterance('All is Ok');
u.text = 'Hello World';    
u.lang = 'en-US';
u.rate = 1;
u.pitch = .4;     
function speech_selection(){
var selectedText = "";
if(window.getSelection){
selectedText = window.getSelection();
}else if(document.getSelection){
selectedText = document.getSelection();
}else if(document.selection){
selectedText = document.selection.createRange().text;
}
if(selectedText != ""){
selectedText = selectedText.toString();
if(synth.speaking){synth.cancel();}
var voices = synth.getVoices();
for(var i=0;i &lt; voices.length;i++){
if ( voices[i].localService==true && voices[i].lang.toLowerCase() =='zh-tw'){
u2.voice=voices[i];
break;
}
}      
u2.text=polyphone(selectedText);
synth.speak(u2);
}
}
function doSpeech() {
var synth = window.speechSynthesis;
var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say.
Make it longer !');
var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side.
even longer !');
synth.speak(utterance1);
// If you check immediately (js code executed in less than ms) the
// status won't be true
if (synth.speaking) {
console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
}
// Wait 500ms to check for the status of the utterance
setTimeout(function(){
if (synth.speaking) {
console.log("This will be printed if starts after 500ms :)");
}
}, 500);
}
doSpeech();
<h2>showMov</h2>
function showMov() {
idstring = "#topic-" + topicpointer;
$(idstring).click()
}
<h2>table of table of contents</h2>
create div #totoc
put script at page bottom
var totoc = $('#totoc');
$("a span.orange").each(function(i) {
var totopic = $(this), totopicNumber = i; totopicLength = totopicNumber +1;
totoc.append('<a href="#totopic-'+totopicNumber+'" target="_self">'+totopic.text()+'</a>'+"&emsp;");
totopic.attr('id', 'totopic-' + totopicNumber);
});
<h2>Javascript to write html</h2>
document.write('<link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-35f1932cc1d8f751c18d0d928ff405a2.css">')
<h2>Modules, introduction</h2>
https://javascript.info/modules-intro
As our application grows bigger, we want to split it into multiple files, so called “modules”.

A module may contain a class or a library of functions for a specific purpose.
For a long time, JavaScript existed without a language-level module syntax.

That wasn’t a problem, because initially scripts were small and simple, so there was no need.
But eventually scripts became more and more complex, so the community invented a variety of ways to organize code into modules, special libraries to load modules on demand.
To name some (for historical reasons):
<a href="https://en.wikipedia.org/wiki/Asynchronous_module_definition">AMD</a> – one of the most ancient module systems, initially implemented by the library <a href="http://requirejs.org/">require.js</a>.
<a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS</a> – the module system created for Node.js server.
<a href="https://github.com/umdjs/umd">UMD</a> – one more module system, suggested as a universal one, compatible with AMD and CommonJS.
Now all these slowly become a part of history, but we still can find them in old scripts.
The language-level module system appeared in the standard in 2015, gradually evolved since then, and is now supported by all major browsers and in Node.js.

So we’ll study the modern JavaScript modules from now on.
<h3>What is a module?</h3>A module is just a file.

One script is one module.

As simple as that.
Modules can load each other and use special directives <k>export</k> and <k>import</k> to interchange functionality, call functions of one module from another one:
<k>export</k> keyword labels variables and functions that should be accessible from outside the current module.
<k>import</k> allows the import of functionality from other modules.
For instance, if we have a file <k>sayHi.js</k> exporting a function:
<k>// 📁 sayHi.js
export function sayHi(user) {
alert(`Hello, ${user}!`);
}</k>
…Then another file may import and use it:
<k>// 📁 main.js
import {sayHi} from './sayHi.js';
alert(sayHi); // function...
sayHi('John'); // Hello, John!</k>
The <k>import</k> directive loads the module by path <k>./sayHi.js</k> relative to the current file, and assigns exported function <k>sayHi</k> to the corresponding variable.
Let’s run the example in-browser.
As modules support special keywords and features, we must tell the browser that a script should be treated as a module, by using the attribute <k>&lt;script type="module"></k>.
Like this:
<iframe src="https://javascript.info/article/modules-intro/say/"></iframe>
<k>export function sayHi(user) {
return `Hello, ${user}!`;
}</k>
<k>&lt;!doctype html>
&lt;script type="module">
import {sayHi} from './say.js';
document.body.innerHTML = sayHi('John');
&lt;/script></k>
The browser automatically fetches and evaluates the imported module (and its imports if needed), and then runs the script.
Modules work only via HTTP(s), not locally
If you try to open a web-page locally, via <k>file://</k> protocol, you’ll find that <k>import/export</k> directives don’t work.

Use a local web-server, such as <a href="https://www.npmjs.com/package/static-server#getting-started">static-server</a> or use the “live server” capability of your editor, such as VS Code <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">Live Server Extension</a> to test modules.
<h3>Core module features</h3>What’s different in modules, compared to “regular” scripts?
There are core features, valid both for browser and server-side JavaScript.
<h4>Always “use strict”</h4>Modules always work in strict mode.

E.g.
assigning to an undeclared variable will give an error.
<k>&lt;script type="module">
a = 5; // error
&lt;/script></k>
<h4>Module-level scope</h4>Each module has its own top-level scope.

In other words, top-level variables and functions from a module are not seen in other scripts.
In the example below, two scripts are imported, and <k>hello.js</k> tries to use <k>user</k> variable declared in <k>user.js</k>.

It fails, because it’s a separate module (you’ll see the error in the console):
<iframe src="https://javascript.info/article/modules-intro/scopes/"></iframe>
<k>alert(user); // no such variable (each module has independent variables)</k>
<k>let user = "John";</k>
<k>&lt;!doctype html>
&lt;script type="module" src="user.js">&lt;/script>
&lt;script type="module" src="hello.js">&lt;/script></k>
Modules should <k>export</k> what they want to be accessible from outside and <k>import</k> what they need.
<k>user.js</k> should export the <k>user</k> variable.
<k>hello.js</k> should import it from <k>user.js</k> module.
In other words, with modules we use import/export instead of relying on global variables.
This is the correct variant:
<iframe src="https://javascript.info/article/modules-intro/scopes-working/"></iframe>
<k>import {user} from './user.js';
document.body.innerHTML = user; // John</k>
<k>export let user = "John";</k>
<k>&lt;!doctype html>
&lt;script type="module" src="hello.js">&lt;/script></k>
In the browser, if we talk about HTML pages, independent top-level scope also exists for each <k>&lt;script type="module"></k>.
Here are two scripts on the same page, both <k>type="module"</k>.

They don’t see each other’s top-level variables:
<k>&lt;script type="module">
// The variable is only visible in this module script
let user = "John";
&lt;/script>
&lt;script type="module">
<em>  alert(user); // Error: user is not defined</em>
&lt;/script></k>
Please note:
In the browser, we can make a variable window-level global by explicitly assigning it to a <k>window</k> property, e.g.
<k>window.user = "John"</k>.
Then all scripts will see it, both with <k>type="module"</k> and without it.
That said, making such global variables is frowned upon.

Please try to avoid them.
<h4>A module code is evaluated only the first time when imported</h4>If the same module is imported into multiple other modules, its code is executed only once, upon the first import.

Then its exports are given to all further importers.
The one-time evaluation has important consequences, that we should be aware of.
Let’s see a couple of examples.
First, if executing a module code brings side-effects, like showing a message, then importing it multiple times will trigger it only once – the first time:
<k>// 📁 alert.js
alert("Module is evaluated!");</k>
<k>// Import the same module from different files
// 📁 1.js
import `./alert.js`; // Module is evaluated!
// 📁 2.js
import `./alert.js`; // (shows nothing)</k>
The second import shows nothing, because the module has already been evaluated.
There’s a rule: top-level module code should be used for initialization, creation of module-specific internal data structures.

If we need to make something callable multiple times – we should export it as a function, like we did with <k>sayHi</k> above.
Now, let’s consider a deeper example.
Let’s say, a module exports an object:
<k>// 📁 admin.js
export let admin = {
name: "John"
};</k>
If this module is imported from multiple files, the module is only evaluated the first time, <k>admin</k> object is created, and then passed to all further importers.
All importers get exactly the one and only <k>admin</k> object:
<k>// 📁 1.js
import {admin} from './admin.js';
admin.name = "Pete";
// 📁 2.js
import {admin} from './admin.js';
alert(admin.name); // Pete
<em>// Both 1.js and 2.js reference the same admin object
// Changes made in 1.js are visible in 2.js</em></k>
As you can see, when <k>1.js</k> changes the <k>name</k> property in the imported <k>admin</k>, then <k>2.js</k> can see the new <k>admin.name</k>.
That’s exactly because the module is executed only once.

Exports are generated, and then they are shared between importers, so if something changes the <k>admin</k> object, other modules will see that.
<strong>Such behavior is actually very convenient, because it allows us to <em>configure</em> modules.</strong>
In other words, a module can provide a generic functionality that needs a setup.

E.g.
authentication needs credentials.

Then it can export a configuration object expecting the outer code to assign to it.
Here’s the classical pattern:
A module exports some means of configuration, e.g.
a configuration object.
On the first import we initialize it, write to its properties.

The top-level application script may do that.
Further imports use the module.
For instance, the <k>admin.js</k> module may provide certain functionality (e.g.
authentication), but expect the credentials to come into the <k>config</k> object from outside:
<k>// 📁 admin.js
export let config = { };
export function sayHi() {
alert(`Ready to serve, ${config.user}!`);
}</k>
Here, <k>admin.js</k> exports the <k>config</k> object (initially empty, but may have default properties too).
Then in <k>init.js</k>, the first script of our app, we import <k>config</k> from it and set <k>config.user</k>:
<k>// 📁 init.js
import {config} from './admin.js';
config.user = "Pete";</k>
…Now the module <k>admin.js</k> is configured.
Further importers can call it, and it correctly shows the current user:
<k>// 📁 another.js
import {sayHi} from './admin.js';
sayHi(); // Ready to serve, <em>Pete</em>!</k>
<h4>import.meta</h4>The object <k>import.meta</k> contains the information about the current module.
Its content depends on the environment.

In the browser, it contains the URL of the script, or a current webpage URL if inside HTML:
<k>&lt;script type="module">
alert(import.meta.url); // script URL
// for an inline script - the URL of the current HTML-page
&lt;/script></k>
<h4>In a module, “this” is undefined</h4>That’s kind of a minor feature, but for completeness we should mention it.
In a module, top-level <k>this</k> is undefined.
Compare it to non-module scripts, where <k>this</k> is a global object:
<k>&lt;script>
alert(this); // window
&lt;/script>
&lt;script type="module">
alert(this); // undefined
&lt;/script></k>
<h3>Browser-specific features</h3>There are also several browser-specific differences of scripts with <k>type="module"</k> compared to regular ones.
You may want to skip this section for now if you’re reading for the first time, or if you don’t use JavaScript in a browser.
<h4>Module scripts are deferred</h4>Module scripts are <em>always</em> deferred, same effect as <k>defer</k> attribute (described in the chapter <a href="/script-async-defer">Scripts: async, defer</a>), for both external and inline scripts.
In other words:
downloading external module scripts <k>&lt;script type="module" src="..."></k> doesn’t block HTML processing, they load in parallel with other resources.
module scripts wait until the HTML document is fully ready (even if they are tiny and load faster than HTML), and then run.
relative order of scripts is maintained: scripts that go first in the document, execute first.
As a side-effect, module scripts always “see” the fully loaded HTML-page, including HTML elements below them.
For instance:
<k>&lt;script type="module">
<em>  alert(typeof button); // object: the script can 'see' the button below</em>
// as modules are deferred, the script runs after the whole page is loaded
&lt;/script>
Compare to regular script below:
&lt;script>
<em>  alert(typeof button); // button is undefined, the script can't see elements below</em>
// regular scripts run immediately, before the rest of the page is processed
&lt;/script>
&lt;button id="button">Button&lt;/button></k>
Please note: the second script actually runs before the first! So we’ll see <k>undefined</k> first, and then <k>object</k>.
That’s because modules are deferred, so we wait for the document to be processed.

The regular script runs immediately, so we see its output first.
When using modules, we should be aware that the HTML page shows up as it loads, and JavaScript modules run after that, so the user may see the page before the JavaScript application is ready.

Some functionality may not work yet.

We should put “loading indicators”, or otherwise ensure that the visitor won’t be confused by that.
<h4>Async works on inline scripts</h4>For non-module scripts, the <k>async</k> attribute only works on external scripts.

Async scripts run immediately when ready, independently of other scripts or the HTML document.
For module scripts, it works on inline scripts as well.
For example, the inline script below has <k>async</k>, so it doesn’t wait for anything.
It performs the import (fetches <k>./analytics.js</k>) and runs when ready, even if the HTML document is not finished yet, or if other scripts are still pending.
That’s good for functionality that doesn’t depend on anything, like counters, ads, document-level event listeners.
<k>&lt;!-- all dependencies are fetched (analytics.js), and the script runs -->
&lt;!-- doesn't wait for the document or other &lt;script> tags -->
&lt;script <em>async</em> type="module">
import {counter} from './analytics.js';
counter.count();
&lt;/script></k>
<h4>External scripts</h4>External scripts that have <k>type="module"</k> are different in two aspects:
External scripts with the same <k>src</k> run only once:
<k>&lt;!-- the script my.js is fetched and executed only once -->
&lt;script type="module" src="my.js">&lt;/script>
&lt;script type="module" src="my.js">&lt;/script></k>
External scripts that are fetched from another origin (e.g.
another site) require <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a> headers, as described in the chapter <a href="/fetch-crossorigin">Fetch: Cross-Origin Requests</a>.

In other words, if a module script is fetched from another origin, the remote server must supply a header <k>Access-Control-Allow-Origin</k> allowing the fetch.
<k>&lt;!-- another-site.com must supply Access-Control-Allow-Origin -->
&lt;!-- otherwise, the script won't execute -->
&lt;script type="module" src="<em>http://another-site.com/their.js</em>">&lt;/script></k>
That ensures better security by default.
<h4>No “bare” modules allowed</h4>In the browser, <k>import</k> must get either a relative or absolute URL.

Modules without any path are called “bare” modules.

Such modules are not allowed in <k>import</k>.
For instance, this <k>import</k> is invalid:
<k>import {sayHi} from 'sayHi'; // Error, "bare" module
// the module must have a path, e.g.
'./sayHi.js' or wherever the module is</k>
Certain environments, like Node.js or bundle tools allow bare modules, without any path, as they have their own ways for finding modules and hooks to fine-tune them.

But browsers do not support bare modules yet.
<h4>Compatibility, “nomodule”</h4>Old browsers do not understand <k>type="module"</k>.

Scripts of an unknown type are just ignored.

For them, it’s possible to provide a fallback using the <k>nomodule</k> attribute:
<k>&lt;script type="module">
alert("Runs in modern browsers");
&lt;/script>
&lt;script nomodule>
alert("Modern browsers know both type=module and nomodule, so skip this")
alert("Old browsers ignore script with unknown type=module, but execute this.");
&lt;/script></k>
<h3>Build tools</h3>In real-life, browser modules are rarely used in their “raw” form.

Usually, we bundle them together with a special tool such as <a href="https://webpack.js.org/">Webpack</a> and deploy to the production server.
One of the benefits of using bundlers – they give more control over how modules are resolved, allowing bare modules and much more, like CSS/HTML modules.
Build tools do the following:
Take a “main” module, the one intended to be put in <k>&lt;script type="module"></k> in HTML.
Analyze its dependencies: imports and then imports of imports etc.
Build a single file with all modules (or multiple files, that’s tunable), replacing native <k>import</k> calls with bundler functions, so that it works.

“Special” module types like HTML/CSS modules are also supported.
In the process, other transformations and optimizations may be applied:
Unreachable code removed.
Unused exports removed (“tree-shaking”).
Development-specific statements like <k>console</k> and <k>debugger</k> removed.
Modern, bleeding-edge JavaScript syntax may be transformed to older one with similar functionality using <a href="https://babeljs.io/">Babel</a>.
The resulting file is minified (spaces removed, variables replaced with shorter names, etc).
If we use bundle tools, then as scripts are bundled together into a single file (or few files), <k>import/export</k> statements inside those scripts are replaced by special bundler functions.

So the resulting “bundled” script does not contain any <k>import/export</k>, it doesn’t require <k>type="module"</k>, and we can put it into a regular script:
<k>&lt;!-- Assuming we got bundle.js from a tool like Webpack -->
&lt;script src="bundle.js">&lt;/script></k>
That said, native modules are also usable.

So we won’t be using Webpack here: you can configure it later.
<h3>Summary</h3>To summarize, the core concepts are:
A module is a file.

To make <k>import/export</k> work, browsers need <k>&lt;script type="module"></k>.

Modules have several differences:
Deferred by default.
Async works on inline scripts.
To load external scripts from another origin (domain/protocol/port), CORS headers are needed.
Duplicate external scripts are ignored.
Modules have their own, local top-level scope and interchange functionality via <k>import/export</k>.
Modules always <k>use strict</k>.
Module code is executed only once.

Exports are created once and shared between importers.
When we use modules, each module implements the functionality and exports it.

Then we use <k>import</k> to directly import it where it’s needed.

The browser loads and evaluates the scripts automatically.
In production, people often use bundlers such as <a href="https://webpack.js.org">Webpack</a> to bundle modules together for performance and other reasons.
In the next chapter we’ll see more examples of modules, and how things can be exported/imported.
<h2>object constructor function</h2>
function Person(first, last, age, eye) {
this.firstName = first;
this.lastName = last;
this.age = age;
this.eyeColor = eye;
}
// Create a Person object
const myFather = new Person("John", "Doe", 50, "blue");
// Display age
document.getElementById("demo").innerHTML =
"My father is " + myFather.age + "."; 
<h3>Object Types (Blueprints) (Classes)</h3>
The examples from the previous chapters are limited.
They only create single objects.
Sometimes we need a "blueprint" for creating many objects of the same "type".
The way to create an "object type", is to use an object constructor function.
In the example above, function Person() is an object constructor function.
Objects of the same type are created by calling the constructor function with the new keyword:
const myFather = new Person("John", "Doe", 50, "blue");
const myMother = new Person("Sally", "Rally", 48, "green");
Adding a Property to an Object
Adding a new property to an existing object is easy:
Example
myFather.nationality = "English";
The property will be added to myFather.
Not to myMother.
(Not to any other person objects).
Adding a Method to an Object
Adding a new method to an existing object is easy:
Example
myFather.name = function () {
return this.firstName + " " + this.lastName;
};
The method will be added to myFather.
Not to myMother.
(Not to any other person objects).
Adding a Property to a Constructor
You cannot add a new property to an object constructor the same way you add a new property to an existing object:
Example
Person.nationality = "English";
To add a new property to a constructor, you must add it to the constructor function:
Example
function Person(first, last, age, eyecolor) {
this.firstName = first;
this.lastName = last;
this.age = age;
this.eyeColor = eyecolor;
this.nationality = "English";
}
This way object properties can have default values.
Adding a Method to a Constructor
Your constructor function can also define methods:
Example
function Person(first, last, age, eyecolor) {
this.firstName = first;
this.lastName = last;
this.age = age;
this.eyeColor = eyecolor;
this.name = function() {
return this.firstName + " " + this.lastName;
};
}
You cannot add a new method to an object constructor the same way you add a new method to an existing object.
Adding methods to an object constructor must be done inside the constructor function:
Example
function Person(firstName, lastName, age, eyeColor) {
this.firstName = firstName; 
this.lastName = lastName;
this.age = age;
this.eyeColor = eyeColor;
this.changeName = function (name) {
this.lastName = name;
};
}
The changeName() function assigns the value of name to the person's lastName property.
Now You Can Try:
myMother.changeName("Doe");
JavaScript knows which person you are talking about by "substituting" this with myMother.
Built-in JavaScript Constructors
JavaScript has built-in constructors for native objects:
new String()    // A new String object
new Number()    // A new Number object
new Boolean()   // A new Boolean object
new Object()    // A new Object object
new Array()     // A new Array object
new RegExp()    // A new RegExp object
new Function()  // A new Function object
new Date()      // A new Date object
The Math() object is not in the list.
Math is a global object.
The new keyword cannot be used on Math.
As you can see above, JavaScript has object versions of the primitive data types String, Number, and Boolean.
But there is no reason to create complex objects.
Primitive values are much faster:
Use string literals "" instead of new String().
Use number literals 50 instead of new Number().
Use boolean literals true / false instead of new Boolean().
Use object literals {} instead of new Object().
Use array literals [] instead of new Array().
Use pattern literals /()/ instead of new RegExp().
Use function expressions () {} instead of new Function().
Example
let x1 = "";             // new primitive string
let x2 = 0;              // new primitive number
let x3 = false;          // new primitive boolean
const x4 = {};           // new Object object
const x5 = [];           // new Array object
const x6 = /()/          // new RegExp object
const x7 = function(){}; // new function
String Objects
Normally, strings are created as primitives: firstName = "John"
But strings can also be created as objects using the new keyword:
firstName = new String("John")
Number Objects
Normally, numbers are created as primitives: x = 30
But numbers can also be created as objects using the new keyword:
x = new Number(30)
Boolean Objects
Normally, booleans are created as primitives: x = false
But booleans can also be created as objects using the new keyword:
x = new Boolean(false)
<h2>get current scroll height</h2>
document.documentElement.scrollTop || document.body.scrollTop
scrollheight jquery
$('#toc').prop('scrollHeight')
Correct ways in jQuery are
$('#test')[0].scrollHeight OR
$('#test').prop('scrollHeight') OR
$('#test').get(0).scrollHeight
jquery on scroll
Trigger the scroll event for the selected elements:
$(selector).scroll()
​Attach a function to the scroll event:
$(selector).scroll(function)
determine scrollHeight using jquery
$('#test').keyup(function() {
var height = $(this).scrollTop();
var initHeight = 5;
if(initHeight < height ) { $(this).css({'height':'8rem'}); }
})
<h2>Maps</h2>
https://www.w3schools.com/js/js_object_maps.asp
A Map holds key-value pairs where the keys can be any datatype.
A Map remembers the original insertion order of the keys.
A Map has a property that represents the size of the map.
<div id="Mapstoc" class="toc"><a href="#Mapstopic-0" target="_self">Map Methods</a>,&emsp;<a href="#Mapstopic-1" target="_self">How to Create a Map</a>,&emsp;<a href="#Mapstopic-2" target="_self">new Map()</a>,&emsp;<a href="#Mapstopic-3" target="_self">Map.set()</a>,&emsp;<a href="#Mapstopic-4" target="_self">Map.get()</a>,&emsp;<a href="#Mapstopic-5" target="_self">Map.size</a>,&emsp;<a href="#Mapstopic-6" target="_self">Map.delete()</a>,&emsp;<a href="#Mapstopic-7" target="_self">Map.clear()</a>,&emsp;<a href="#Mapstopic-8" target="_self">Map.has()</a>,&emsp;<a href="#Mapstopic-9" target="_self">Maps are Objects</a>,&emsp;<a href="#Mapstopic-10" target="_self">JavaScript Objects vs Maps</a>,&emsp;<a href="#Mapstopic-11" target="_self">Map.forEach()</a>,&emsp;<a href="#Mapstopic-12" target="_self">Map.keys()</a>,&emsp;<a href="#Mapstopic-13" target="_self">Map.values()</a>,&emsp;<a href="#Mapstopic-14" target="_self">Map.entries()</a>,&emsp;<a href="#Mapstopic-15" target="_self">Objects as Keys</a>,&emsp;</div></center><br><br>
<h3 id="Mapstopic-0">Map Methods</h3>
Method	Description
new Map()	Creates a new Map object
set()	Sets the value for a key in a Map
get()	Gets the value for a key in a Map
clear()	Removes all the elements from a Map
delete()	Removes a Map element specified by a key
has()	Returns true if a key exists in a Map
forEach()	Invokes a callback for each key/value pair in a Map
entries()	Returns an iterator object with the [key, value] pairs in a Map
keys()	Returns an iterator object with the keys in a Map
values()	Returns an iterator object of the values in a Map
Property	Description
size	Returns the number of Map elements
<h3 id="Mapstopic-1">How to Create a Map</h3>
You can create a JavaScript Map by:
<li>Passing an Array to <k>new Map()</k></li>
<li>Create a Map and use <k>Map.set()</k></li>
<h3 id="Mapstopic-2">new Map()</h3>
You can create a Map by passing an Array to the <k>new Map()</k> constructor:
Example
// Create a Map
const fruits = new Map([
["apples", 500],
["bananas", 300],
["oranges", 200]
]);
<h3 id="Mapstopic-3">Map.set()</h3>
You can add elements to a Map with the <k>set()</k> method:
Example
// Create a Map
const fruits = new Map();
// Set Map Values
fruits.set("apples", 500);
fruits.set("bananas", 300);
fruits.set("oranges", 200);
The <k>set()</k> method can also be used to change existing Map values:
Example
fruits.set("apples", 500);
<h3 id="Mapstopic-4">Map.get()</h3>
The <k>get()</k> method gets the value of a key in a Map:
Example
fruits.get("apples");    // Returns 500
// Creating a map object
var myMap = new Map();
// Adding [key, value] pair to the map
myMap.set(0, 'GeeksforGeeks');
// Displaying the element which is associated with
// the key '0' using Map.get() method
document.write(myMap.get(0));
Output:
"GeeksforGeeks"
<h3 id="Mapstopic-5">Map.size</h3>
The <k>size</k> property returns the number of elements in a Map:
Example
fruits.size;
<h3 id="Mapstopic-6">Map.delete()</h3>
The <k>delete()</k> method removes a Map element:
Example
fruits.delete("apples");
<h3 id="Mapstopic-7">Map.clear()</h3>
The <k>clear()</k> method removes all the elements from a Map:
Example
fruits.clear();
<h3 id="Mapstopic-8">Map.has()</h3>
The <k>has()</k> method returns true if a key exists in a Map:
Example
fruits.has("apples");
fruits.delete("apples");
fruits.has("apples");
<h3 id="Mapstopic-9">Maps are Objects</h3>
<k>typeof</k> returns object:
Example
// Returns object:
typeof fruits;
<k>instanceof</k> Map returns true:
Example
// Returns true:
fruits instanceof Map;
<h3 id="Mapstopic-10">JavaScript Objects vs Maps</h3>
<h4>Differences between JavaScript Objects and Maps:</h4>
Iterable
Object Not directly iterable
Map Directly iterable
Size
Object Do not have a size property
Map Have a size property
Key Types
Object Keys must be Strings (or Symbols)
Map Keys can be any datatype
Key Order
Object Keys are not well ordered
Map Keys are ordered by insertion
Defaults
Object Have default keys
Map Do not have default keys
<h3 id="Mapstopic-11">Map.forEach()</h3>
The <k>forEach()</k> method invokes a callback for each key/value pair in a Map:
Example
// List all entries
let text = "";
fruits.forEach (function(value, key) {
text += key + ' = ' + value;
})
<h3 id="Mapstopic-12">Map.keys()</h3>
The <k>keys()</k> method returns an iterator object with the keys in a Map:
Example
// List all keys
let veggies = "";
for (const x of fruits.keys()) {
veggies += x;
}
<h3 id="Mapstopic-13">Map.values()</h3>
The <k>values</k> method returns an iterator object with the values in a Map:
Example
// Sum all values
let total = 0;
for (const x of fruits.values()) {
total += x;
}
<h3 id="Mapstopic-14">Map.entries()</h3>
The <k>entries()</k> method returns an iterator object with the [key,values] in a Map:
Example
// List all entries
let text = "";
for (const x of fruits.entries()) {
text += x;
}
<h3 id="Mapstopic-15">Objects as Keys</h3>
Being able to use objects as keys is an important Map feature.
Example
// Create Objects
const apples = {name: 'Apples'};
const bananas = {name: 'Bananas'};
const oranges = {name: 'Oranges'};
// Create a Map
const fruits = new Map();
// Add new Elements to the Map
fruits.set(apples, 500);
fruits.set(bananas, 300);
fruits.set(oranges, 200);
Remember: The key is an object (apples), not a string ("apples"):
Example
fruits.get("apples");  // Returns undefined
<h2>56 个 JavaScript 实用函数</h2>
<div id="56Javtoc" class="toc"><a href="#56Javtopic-0" target="_self">生成指定范围随机数</a> <a href="#56Javtopic-1" target="_self">数字千分位分隔</a> <a href="#56Javtopic-2" target="_self">数组乱序</a> <a href="#56Javtopic-3" target="_self">数组扁平化</a> <a href="#56Javtopic-4" target="_self">数组中获取随机数</a> <a href="#56Javtopic-5" target="_self">生成随机字符串</a> <a href="#56Javtopic-6" target="_self">字符串首字母大写</a> <a href="#56Javtopic-7" target="_self">手机号中间四位变成*</a> <a href="#56Javtopic-8" target="_self">驼峰命名转换成短横线命名</a> <a href="#56Javtopic-9" target="_self">短横线命名转换成驼峰命名</a> <a href="#56Javtopic-10" target="_self">全角转换为半角</a> <a href="#56Javtopic-11" target="_self">半角转换为全角</a> <a href="#56Javtopic-12" target="_self">数字转化为大写金额</a> <a href="#56Javtopic-13" target="_self">数字转化为中文数字</a> <a href="#56Javtopic-14" target="_self">存储loalStorage</a> <a href="#56Javtopic-15" target="_self">获取localStorage</a> <a href="#56Javtopic-16" target="_self">删除localStorage</a> <a href="#56Javtopic-17" target="_self">存储sessionStorage</a> <a href="#56Javtopic-18" target="_self">获取sessionStorage</a> <a href="#56Javtopic-19" target="_self">删除sessionStorage</a> <a href="#56Javtopic-20" target="_self">设置cookie</a> <a href="#56Javtopic-21" target="_self">读取cookie</a> <a href="#56Javtopic-22" target="_self">删除cookie</a> <a href="#56Javtopic-23" target="_self">校验身份证号码</a> <a href="#56Javtopic-24" target="_self">校验是否包含中文</a> <a href="#56Javtopic-25" target="_self">校验是否为中国大陆的邮政编码</a> <a href="#56Javtopic-26" target="_self">校验是否为IPv6地址</a> <a href="#56Javtopic-27" target="_self">校验是否为邮箱地址</a> <a href="#56Javtopic-28" target="_self">校验是否为中国大陆手机号</a> <a href="#56Javtopic-29" target="_self">校验是否包含emoji表情</a> <a href="#56Javtopic-30" target="_self">获取URL参数列表</a> <a href="#56Javtopic-31" target="_self">检测URL是否有效</a> <a href="#56Javtopic-32" target="_self">键值对拼接成URL参数</a> <a href="#56Javtopic-33" target="_self">修改URL中的参数</a> <a href="#56Javtopic-34" target="_self">删除URL中指定参数</a> <a href="#56Javtopic-35" target="_self">判断是移动还是PC设备</a> <a href="#56Javtopic-36" target="_self">判断是否是苹果还是安卓移动设备</a> <a href="#56Javtopic-37" target="_self">判断是否是安卓移动设备</a> <a href="#56Javtopic-38" target="_self">判断是Windows还是Mac系统</a> <a href="#56Javtopic-39" target="_self">判断是否是微信/QQ内置浏览器</a> <a href="#56Javtopic-40" target="_self">浏览器型号和版本</a> <a href="#56Javtopic-41" target="_self">滚动到页面顶部</a> <a href="#56Javtopic-42" target="_self">滚动到页面底部</a> <a href="#56Javtopic-43" target="_self">滚动到指定元素区域</a> <a href="#56Javtopic-44" target="_self">获取可视窗口高度</a> <a href="#56Javtopic-45" target="_self">获取可视窗口宽度</a> <a href="#56Javtopic-46" target="_self">打开浏览器全屏</a> <a href="#56Javtopic-47" target="_self">退出浏览器全屏</a> <a href="#56Javtopic-48" target="_self">当前时间</a> <a href="#56Javtopic-49" target="_self">格式化时间</a> <a href="#56Javtopic-50" target="_self">阻止冒泡事件</a> <a href="#56Javtopic-51" target="_self">防抖函数</a> <a href="#56Javtopic-52" target="_self">节流函数</a> <a href="#56Javtopic-53" target="_self">数据类型判断</a> <a href="#56Javtopic-54" target="_self">对象深拷贝</a> </div></center>
<h3>1.
数字操作</h3>
<h4 id="56Javtopic-0">生成指定范围随机数</h4>
<k>export const randomNum = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;</k>
<h4 id="56Javtopic-1">数字千分位分隔</h4>
<k>export const format = (n) => {
let num = n.toString();
let len = num.length;
if (len &lt;= 3) {
return num;
} else {
let temp = '';
let remainder = len % 3;
if (remainder > 0) { // 不是3的整数倍
return num.slice(0, remainder) + ',' + num.slice(remainder, len).match(/\d{3}/g).join(',') + temp;
} else { // 3的整数倍
return num.slice(0, len).match(/\d{3}/g).join(',') + temp; 
}
}
}</k>
<h3>2.
数组操作</h3>
<h4 id="56Javtopic-2">数组乱序</h4>
<k>export const arrScrambling = (arr) => {
for (let i = 0; i &lt; arr.length; i++) {
const randomIndex = Math.round(Math.random() * (arr.length - 1 - i)) + i;
[arr[i], arr[randomIndex]] = [arr[randomIndex], arr[i]];
}
return arr;
}</k>
<h4 id="56Javtopic-3">数组扁平化</h4>
<k>export const flatten = (arr) => {
let result = [];
for(let i = 0; i &lt; arr.length; i++) {
if(Array.isArray(arr[i])) {
result = result.concat(flatten(arr[i]));
} else {
result.push(arr[i]);
}
}
return result;
}</k>
<h4 id="56Javtopic-4">数组中获取随机数</h4>
<k>export const sample = arr => arr[Math.floor(Math.random() * arr.length)];
</k>
<h3>3.
字符串操作</h3>
<h4 id="56Javtopic-5">生成随机字符串</h4>
<k>export const randomString = (len) => {
let chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789';
let strLen = chars.length;
let randomStr = '';
for (let i = 0; i &lt; len; i++) {
randomStr += chars.charAt(Math.floor(Math.random() * strLen));
}
return randomStr;
};</k>
<h4 id="56Javtopic-6">字符串首字母大写</h4>
<k>export const fistLetterUpper = (str) => {
return str.charAt(0).toUpperCase() + str.slice(1);
};</k>
<h4 id="56Javtopic-7">手机号中间四位变成*</h4>
<k>export const telFormat = (tel) => {
tel = String(tel); 
return tel.substr(0,3) + "****" + tel.substr(7);
};</k>
<h4 id="56Javtopic-8">驼峰命名转换成短横线命名</h4>
<k>export const getKebabCase = (str) => {
return str.replace(/[A-Z]/g, (item) => '-' + item.toLowerCase())
}</k>
<h4 id="56Javtopic-9">短横线命名转换成驼峰命名</h4>
<k>export const getCamelCase = (str) => {
return str.replace( /-([a-z])/g, (i, item) => item.toUpperCase())
}</k>
<h4 id="56Javtopic-10">全角转换为半角</h4>
<k>export const toCDB = (str) => {
let result = "";
for (let i = 0; i &lt; str.length; i++) {
code = str.charCodeAt(i);
if (code >= 65281 &amp;&amp; code &lt;= 65374) {
result += String.fromCharCode(str.charCodeAt(i) - 65248);
} else if (code == 12288) {
result += String.fromCharCode(str.charCodeAt(i) - 12288 + 32);
} else {
result += str.charAt(i);
}
}
return result;
}
</k>
<h4 id="56Javtopic-11">半角转换为全角</h4>
<k>export const toDBC = (str) => {
let result = "";
for (let i = 0; i &lt; str.length; i++) {
code = str.charCodeAt(i);
if (code >= 33 &amp;&amp; code &lt;= 126) {
result += String.fromCharCode(str.charCodeAt(i) + 65248);
} else if (code == 32) {
result += String.fromCharCode(str.charCodeAt(i) + 12288 - 32);
} else {
result += str.charAt(i);
}
}
return result;
}
</k>
<h3>4.
格式转化</h3>
<h4 id="56Javtopic-12">数字转化为大写金额</h4>
<k>export const digitUppercase = (n) => {
const fraction = ['角', '分'];
const digit = [
'零', '壹', '贰', '叁', '肆',
'伍', '陆', '柒', '捌', '玖'
];
const unit = [
['元', '万', '亿'],
['', '拾', '佰', '仟']
];
n = Math.abs(n);
let s = '';
for (let i = 0; i &lt; fraction.length; i++) {
s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');
}
s = s || '整';
n = Math.floor(n);
for (let i = 0; i &lt; unit[0].length &amp;&amp; n > 0; i++) {
let p = '';
for (let j = 0; j &lt; unit[1].length &amp;&amp; n > 0; j++) {
p = digit[n % 10] + unit[1][j] + p;
n = Math.floor(n / 10);
}
s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;
}
return s.replace(/(零.)*零元/, '元')
.replace(/(零.)+/g, '零')
.replace(/^整$/, '零元整');
};</k>
<h4 id="56Javtopic-13">数字转化为中文数字</h4>
<k>export const intToChinese = (value) => {
const str = String(value);
const len = str.length-1;
const idxs = ['','十','百','千','万','十','百','千','亿','十','百','千','万','十','百','千','亿'];
const num = ['零','一','二','三','四','五','六','七','八','九'];
return str.replace(/([1-9]|0+)/g, ( $, $1, idx, full) => {
let pos = 0;
if($1[0] !== '0'){
pos = len-idx;
if(idx == 0 &amp;&amp; $1[0] == 1 &amp;&amp; idxs[len-idx] == '十'){
return idxs[len-idx];
}
return num[$1[0]] + idxs[len-idx];
} else {
let left = len - idx;
let right = len - idx + $1.length;
if(Math.floor(right / 4) - Math.floor(left / 4) > 0){
pos = left - left % 4;
}
if( pos ){
return idxs[pos] + num[$1[0]];
} else if( idx + $1.length >= len ){
return '';
}else {
return num[$1[0]]
}
}
});
}</k>
<h3>5.
操作存储</h3>
<h4 id="56Javtopic-14">存储loalStorage</h4>
<k>export const loalStorageSet = (key, value) => {
if (!key) return;
if (typeof value !== 'string') {
value = JSON.stringify(value);
}
window.localStorage.setItem(key, value);
};</k>
<h4 id="56Javtopic-15">获取localStorage</h4>
<k>export const loalStorageGet = (key) => {
if (!key) return;
return window.localStorage.getItem(key);
};</k>
<h4 id="56Javtopic-16">删除localStorage</h4>
<k>export const loalStorageRemove = (key) => {
if (!key) return;
window.localStorage.removeItem(key);
};</k>
<h4 id="56Javtopic-17">存储sessionStorage</h4>
<k>export const sessionStorageSet = (key, value) => {
if (!key) return;
if (typeof value !== 'string') {
value = JSON.stringify(value);
}
window.sessionStorage.setItem(key, value)
};</k>
<h4 id="56Javtopic-18">获取sessionStorage</h4>
<k>export const sessionStorageGet = (key) => {
if (!key) return;
return window.sessionStorage.getItem(key)
};</k>
<h4 id="56Javtopic-19">删除sessionStorage</h4>
<k>export const sessionStorageRemove = (key) => {
if (!key) return;
window.sessionStorage.removeItem(key)
};</k>
<h3>6.
操作cookie</h3>
<h4 id="56Javtopic-20">设置cookie</h4>
<k>export const setCookie = (key, value, expire) => {
const d = new Date();
d.setDate(d.getDate() + expire);
document.cookie = `${key}=${value};expires=${d.toUTCString()}`
};
</k>
<h4 id="56Javtopic-21">读取cookie</h4>
<k>export const getCookie = (key) => {
const cookieStr = unescape(document.cookie);
const arr = cookieStr.split('; ');
let cookieValue = '';
for (let i = 0; i &lt; arr.length; i++) {
const temp = arr[i].split('=');
if (temp[0] === key) {
cookieValue = temp[1];
break
}
}
return cookieValue
};</k>
<h4 id="56Javtopic-22">删除cookie</h4>
<k>export const delCookie = (key) => {
document.cookie = `${encodeURIComponent(key)}=;expires=${new Date()}`
};</k>
<h3>7.
格式校验</h3>
<h4 id="56Javtopic-23">校验身份证号码</h4>
<k>export const checkCardNo = (value) => {
let reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
return reg.test(value);
};</k>
<h4 id="56Javtopic-24">校验是否包含中文</h4>
<k>export const haveCNChars => (value) => {
return /[\u4e00-\u9fa5]/.test(value);
}</k>
<h4 id="56Javtopic-25">校验是否为中国大陆的邮政编码</h4>
<k>export const isPostCode = (value) => {
return /^[1-9][0-9]{5}$/.test(value.toString());
}</k>
<h4 id="56Javtopic-26">校验是否为IPv6地址</h4>
<k>export const isIPv6 = (str) => {
return Boolean(str.match(/:/g)?str.match(/:/g).length&lt;=7:false &amp;&amp; /::/.test(str)?/^([\da-f]{1,4}(:|::)){1,6}[\da-f]{1,4}$/i.test(str):/^([\da-f]{1,4}:){7}[\da-f]{1,4}$/i.test(str));
}</k>
<h4 id="56Javtopic-27">校验是否为邮箱地址</h4>
<k>export const isEmail = (value) {
return /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(value);
}</k>
<h4 id="56Javtopic-28">校验是否为中国大陆手机号</h4>
<k>export const isTel = (value) => {
return /^1[3,4,5,6,7,8,9][0-9]{9}$/.test(value.toString());
}</k>
<h4 id="56Javtopic-29">校验是否包含emoji表情</h4>
<k>export const isEmojiCharacter = (value) => {
value = String(value);
for (let i = 0; i &lt; value.length; i++) {
const hs = value.charCodeAt(i);
if (0xd800 &lt;= hs &amp;&amp; hs &lt;= 0xdbff) {
if (value.length > 1) {
const ls = value.charCodeAt(i + 1);
const uc = ((hs - 0xd800) * 0x400) + (ls - 0xdc00) + 0x10000;
if (0x1d000 &lt;= uc &amp;&amp; uc &lt;= 0x1f77f) {
return true;
}
}
} else if (value.length > 1) {
const ls = value.charCodeAt(i + 1);
if (ls == 0x20e3) {
return true;
}
} else {
if (0x2100 &lt;= hs &amp;&amp; hs &lt;= 0x27ff) {
return true;
} else if (0x2B05 &lt;= hs &amp;&amp; hs &lt;= 0x2b07) {
return true;
} else if (0x2934 &lt;= hs &amp;&amp; hs &lt;= 0x2935) {
return true;
} else if (0x3297 &lt;= hs &amp;&amp; hs &lt;= 0x3299) {
return true;
} else if (hs == 0xa9 || hs == 0xae || hs == 0x303d || hs == 0x3030
|| hs == 0x2b55 || hs == 0x2b1c || hs == 0x2b1b
|| hs == 0x2b50) {
return true;
}
}
}
return false;
}</k>
<h3>8.
操作URL</h3>
<h4 id="56Javtopic-30">获取URL参数列表</h4>
<k>export const GetRequest = () => {
let url = location.search;
const paramsStr = /.+\?(.+)$/.exec(url)[1]; // 将 ? 后面的字符串取出来
const paramsArr = paramsStr.split('&amp;'); // 将字符串以 &amp; 分割后存到数组中
let paramsObj = {};
// 将 params 存到对象中
paramsArr.forEach(param => {
if (/=/.test(param)) { // 处理有 value 的参数
let [key, val] = param.split('='); // 分割 key 和 value
val = decodeURIComponent(val); // 解码
val = /^\d+$/.test(val) ? parseFloat(val) : val; // 判断是否转为数字
if (paramsObj.hasOwnProperty(key)) { // 如果对象有 key，则添加一个值
paramsObj[key] = [].concat(paramsObj[key], val);
} else { // 如果对象没有这个 key，创建 key 并设置值
paramsObj[key] = val;
}
} else { // 处理没有 value 的参数
paramsObj[param] = true;
}
})
return paramsObj;
};</k>
<h4 id="56Javtopic-31">检测URL是否有效</h4>
<k>export const getUrlState = (URL) => {
let xmlhttp = new ActiveXObject("microsoft.xmlhttp");
xmlhttp.Open("GET", URL, false);
try {
xmlhttp.Send();
} catch (e) {
} finally {
let result = xmlhttp.responseText;
if (result) {
if (xmlhttp.Status == 200) {
return true;
} else {
return false;
}
} else {
return false;
}
}
}</k>
<h4 id="56Javtopic-32">键值对拼接成URL参数</h4>
<k>export const params2Url = (obj) => {
let params = []
for (let key in obj) {
params.push(`${key}=${obj[key]}`);
}
return encodeURIComponent(params.join('&amp;'))
}</k>
<h4 id="56Javtopic-33">修改URL中的参数</h4>
<k>export const replaceParamVal => (paramName, replaceWith) {
const oUrl = location.href.toString();
const re = eval('/('+ paramName+'=)([^&amp;]*)/gi');
location.href = oUrl.replace(re,paramName+'='+replaceWith);
return location.href;
}</k>
<h4 id="56Javtopic-34">删除URL中指定参数</h4>
<k>export const funcUrlDel = (name) => {
const baseUrl = location.origin + location.pathname + "?";
const query = location.search.substr(1);
if (query.indexOf(name) > -1) {
const obj = {};
const arr = query.split("&amp;");
for (let i = 0; i &lt; arr.length; i++) {
arr[i] = arr[i].split("=");
obj[arr[i][0]] = arr[i][1];
}
delete obj[name];
return baseUrl + JSON.stringify(obj).replace(/[\"\{\}]/g,"").replace(/\:/g,"=").replace(/\,/g,"&amp;");
}
}</k>
<h3>9.
设备判断</h3>
<h4 id="56Javtopic-35">判断是移动还是PC设备</h4>
<k>export const isMobile = () => {
if ((navigator.userAgent.match(/(iPhone|iPod|Android|ios|iOS|iPad|Backerry|WebOS|Symbian|Windows Phone|Phone)/i))) {
return 'mobile';
}
return 'desktop';
}</k>
<h4 id="56Javtopic-36">判断是否是苹果还是安卓移动设备</h4>
<k>export const isAppleMobileDevice = () => {
let reg = /iphone|ipod|ipad|Macintosh/i;
return reg.test(navigator.userAgent.toLowerCase());
}</k>
<h4 id="56Javtopic-37">判断是否是安卓移动设备</h4>
<k>export const isAndroidMobileDevice = () => {
return /android/i.test(navigator.userAgent.toLowerCase());
}</k>
<h4 id="56Javtopic-38">判断是Windows还是Mac系统</h4>
<k>export const osType = () => {
const agent = navigator.userAgent.toLowerCase();
const isMac = /macintosh|mac os x/i.test(navigator.userAgent);
const isWindows = agent.indexOf("win64") >= 0 || agent.indexOf("wow64") >= 0 || agent.indexOf("win32") >= 0 || agent.indexOf("wow32") >= 0;
if (isWindows) {
return "windows";
}
if(isMac){
return "mac";
}
}</k>
<h4 id="56Javtopic-39">判断是否是微信/QQ内置浏览器</h4>
<k>export const broswer = () => {
const ua = navigator.userAgent.toLowerCase();
if (ua.match(/MicroMessenger/i) == "micromessenger") {
return "weixin";
} else if (ua.match(/QQ/i) == "qq") {
return "QQ";
}
return false;
}</k>
<h4 id="56Javtopic-40">浏览器型号和版本</h4>
<k>export const getExplorerInfo = () => {
let t = navigator.userAgent.toLowerCase();
return 0 &lt;= t.indexOf("msie") ? { //ie &lt; 11
type: "IE",
version: Number(t.match(/msie ([\d]+)/)[1])
} : !!t.match(/trident\/.+?rv:(([\d.]+))/) ? { // ie 11
type: "IE",
version: 11
} : 0 &lt;= t.indexOf("edge") ? {
type: "Edge",
version: Number(t.match(/edge\/([\d]+)/)[1])
} : 0 &lt;= t.indexOf("firefox") ? {
type: "Firefox",
version: Number(t.match(/firefox\/([\d]+)/)[1])
} : 0 &lt;= t.indexOf("chrome") ? {
type: "Chrome",
version: Number(t.match(/chrome\/([\d]+)/)[1])
} : 0 &lt;= t.indexOf("opera") ? {
type: "Opera",
version: Number(t.match(/opera.([\d]+)/)[1])
} : 0 &lt;= t.indexOf("Safari") ? {
type: "Safari",
version: Number(t.match(/version\/([\d]+)/)[1])
} : {
type: t,
version: -1
}
}</k>
<h3>10.
浏览器操作</h3>
<h4 id="56Javtopic-41">滚动到页面顶部</h4>
<k>export const scrollToTop = () => {
const height = document.documentElement.scrollTop || document.body.scrollTop;
if (height > 0) {
window.requestAnimationFrame(scrollToTop);
window.scrollTo(0, height - height / 8);
}
}</k>
<h4 id="56Javtopic-42">滚动到页面底部</h4>
<k>export const scrollToBottom = () => {
window.scrollTo(0, document.documentElement.clientHeight);  
}</k>
<h4 id="56Javtopic-43">滚动到指定元素区域</h4>
<k>export const smoothScroll = (element) => {
document.querySelector(element).scrollIntoView({
behavior: 'smooth'
});
};</k>
<h4 id="56Javtopic-44">获取可视窗口高度</h4>
<k>export const getClientHeight = () => {
let clientHeight = 0;
if (document.body.clientHeight &amp;&amp; document.documentElement.clientHeight) {
clientHeight = (document.body.clientHeight &lt; document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
}
else {
clientHeight = (document.body.clientHeight > document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
}
return clientHeight;
}</k>
<h4 id="56Javtopic-45">获取可视窗口宽度</h4>
<k>export const getPageViewWidth = () => {
return (document.compatMode == "BackCompat" ? document.body : document.documentElement).clientWidth;
}</k>
<h4 id="56Javtopic-46">打开浏览器全屏</h4>
<k>export const toFullScreen = () => {
let element = document.body;
if (element.requestFullscreen) {
element.requestFullscreen()
} else if (element.mozRequestFullScreen) {
element.mozRequestFullScreen()
} else if (element.msRequestFullscreen) {
element.msRequestFullscreen()
} else if (element.webkitRequestFullscreen) {
element.webkitRequestFullScreen()
}
}</k>
<h4 id="56Javtopic-47">退出浏览器全屏</h4>
<k>export const exitFullscreen = () => {
if (document.exitFullscreen) {
document.exitFullscreen()
} else if (document.msExitFullscreen) {
document.msExitFullscreen()
} else if (document.mozCancelFullScreen) {
document.mozCancelFullScreen()
} else if (document.webkitExitFullscreen) {
document.webkitExitFullscreen()
}
}</k>
<h3>11.
时间操作</h3>
<h4 id="56Javtopic-48">当前时间</h4>
<k>export const nowTime = () => {
const now = new Date();
const year = now.getFullYear();
const month = now.getMonth();
const date = now.getDate() >= 10 ? now.getDate() : ('0' + now.getDate());
const hour = now.getHours() >= 10 ? now.getHours() : ('0' + now.getHours());
const miu = now.getMinutes() >= 10 ? now.getMinutes() : ('0' + now.getMinutes());
const sec = now.getSeconds() >= 10 ? now.getSeconds() : ('0' + now.getSeconds());
return +year + "年" + (month + 1) + "月" + date + "日 " + hour + ":" + miu + ":" + sec;
}</k>
<h4 id="56Javtopic-49">格式化时间</h4>
<k>export const dateFormater = (formater, time) => {
let date = time ? new Date(time) : new Date(),
Y = date.getFullYear() + '',
M = date.getMonth() + 1,
D = date.getDate(),
H = date.getHours(),
m = date.getMinutes(),
s = date.getSeconds();
return formater.replace(/YYYY|yyyy/g, Y)
.replace(/YY|yy/g, Y.substr(2, 2))
.replace(/MM/g,(M&lt;10 ? '0' : '') + M)
.replace(/DD/g,(D&lt;10 ? '0' : '') + D)
.replace(/HH|hh/g,(H&lt;10 ? '0' : '') + H)
.replace(/mm/g,(m&lt;10 ? '0' : '') + m)
.replace(/ss/g,(s&lt;10 ? '0' : '') + s)
}
// dateFormater('YYYY-MM-DD HH:mm:ss')
// dateFormater('YYYYMMDDHHmmss')</k>
<h3>12.
JavaScript操作</h3>
<h4 id="56Javtopic-50">阻止冒泡事件</h4>
<k>export const stopPropagation = (e) => { 
e = e || window.event; 
if(e.stopPropagation) {    // W3C阻止冒泡方法 
e.stopPropagation(); 
} else { 
e.cancelBubble = true; // IE阻止冒泡方法 
} 
} </k>
<h4 id="56Javtopic-51">防抖函数</h4>
<k>export const debounce = (fn, wait) => {
let timer = null;
return function() {
let context = this,
args = arguments;
if (timer) {
clearTimeout(timer);
timer = null;
}
timer = setTimeout(() => {
fn.apply(context, args);
}, wait);
};
}</k>
<h4 id="56Javtopic-52">节流函数</h4>
<k>export const throttle = (fn, delay) => {
let curTime = Date.now();
return function() {
let context = this,
args = arguments,
nowTime = Date.now();
if (nowTime - curTime >= delay) {
curTime = Date.now();
return fn.apply(context, args);
}
};
}</k>
<h4 id="56Javtopic-53">数据类型判断</h4>
<k>export const getType = (value) => {
if (value === null) {
return value + "";
}
// 判断数据是引用类型的情况
if (typeof value === "object") {
let valueClass = Object.prototype.toString.call(value),
type = valueClass.split(" ")[1].split("");
type.pop();
return type.join("").toLowerCase();
} else {
// 判断数据是基本数据类型的情况和函数的情况
return typeof value;
}
}</k>
<h4 id="56Javtopic-54">对象深拷贝</h4>
<k>export const deepClone = (obj, hash = new WeakMap()) => {
// 日期对象直接返回一个新的日期对象
if (obj instanceof Date){
return new Date(obj);
} 
//正则对象直接返回一个新的正则对象     
if (obj instanceof RegExp){
return new RegExp(obj);     
}
//如果循环引用,就用 weakMap 来解决
if (hash.has(obj)){
return hash.get(obj);
}
// 获取对象所有自身属性的描述
let allDesc = Object.getOwnPropertyDescriptors(obj);
// 遍历传入参数所有键的特性
let cloneObj = Object.create(Object.getPrototypeOf(obj), allDesc)
hash.set(obj, cloneObj)
for (let key of Reflect.ownKeys(obj)) { 
if(typeof obj[key] === 'object' &amp;&amp; obj[key] !== null){
cloneObj[key] = deepClone(obj[key], hash);
} else {
cloneObj[key] = obj[key];
}
}
return cloneObj
</k>
<h2>maps vs.
sets data structure</h2>
<div id="mapsVsSetstoc" class="toc"><a href="#mapsVsSetstopic-0" target="_self">maps vs.
sets data structure</a><br><a href="#mapsVsSetstopic-1" target="_self">Defining and understanding <k>Map</k> objects</a><br><a href="#mapsVsSetstopic-2" target="_self">Making equality comparisons with <k>SameValueZero</k></a><br><a href="#mapsVsSetstopic-3" target="_self">What are Map entries?</a><br><a href="#mapsVsSetstopic-4" target="_self">Creating a Map object in JavaScript</a><br><a href="#mapsVsSetstopic-5" target="_self"><k>Map</k> object instance properties and methods</a><br><a href="#mapsVsSetstopic-6" target="_self">Iterating <k>Map</k> objects with the <k>forEach()</k> method</a><br><a href="#mapsVsSetstopic-7" target="_self"><span class="orange">What is a JavaScript <k>Set</k> object?</span></a><br><a href="#mapsVsSetstopic-8" target="_self">Maps vs.
Sets</a><br><a href="#mapsVsSetstopic-9" target="_self">Creating a Set object</a><br><a href="#mapsVsSetstopic-10" target="_self"><k>Set</k> object instance properties and methods</a><br><a href="#mapsVsSetstopic-11" target="_self">Iterating keyed collections</a><br><a href="#mapsVsSetstopic-12" target="_self">Accidental <k>undefined</k> — what does it mean?</a><br><a href="#mapsVsSetstopic-13" target="_self">Removing duplicates from <k>Set</k> objects</a><br><a href="#mapsVsSetstopic-14" target="_self"><k>Map</k> or <k>set</k>?</a><br><a href="#mapsVsSetstopic-15" target="_self">Other <k>Map</k> and <k>Set</k> uses</a><br><a href="#mapsVsSetstopic-16" target="_self">Data caching with <k>Map</k> objects</a><br><a href="#mapsVsSetstopic-17" target="_self">Graphical representation with map and set</a><br><a href="#mapsVsSetstopic-18" target="_self">Disjoint-sets and dynamic connectivity</a><br><a href="#mapsVsSetstopic-19" target="_self">Conclusion</a><br><a href="#mapsVsSetstopic-20" target="_self"></a><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">LogRocket</a>: Debug JavaScript errors more easily by understanding the context<br></div></center>
<h3 id="mapsVsSetstopic-0">maps vs.
sets data structure</h3>
The way in which data is structured plays a vital role in our ability to efficiently perform certain operations on data, or to solve certain problems in relation to the data.

For example, you can delete any item from a doubly-linked list in constant time, whereas that could take linear time if the list is represented as an array.

Similarly, searching for the presence of a key in an array of keys can be done more efficiently in logarithmic time when the array is sorted, as opposed to when it is not sorted.
Some very popular programming languages like Java and Python provide lots of useful data structure implementations out of the box, whereas the ubiquitous JavaScript programming language appears to be pretty lean in that regard.

However, like most programming languages, JavaScript ships with some very basic data types — such as arrays, strings, objects, sets, maps, etc.
<h3>Keyed collections</h3>
Prior to the ECMAScript 2015 specification updates (popularly known as ES6), JavaScript provided <k>Array</k> objects as the only standard, inbuilt indexed collections — although there were other exotic objects such as the <k>arguments</k> and <k>String</k> objects, which behaved like arrays with special handling for integer index property keys, usually referred to as array-like objects, but were not really indexed collections.
Starting with ES2015, a handful of new standard inbuilt types have been added to JavaScript, such as:
<k>Symbol</k>
<k>Promise</k>
<k>Proxy</k>
A number of typed array objects were also added, which, just like arrays, are also indexed collections themselves.

In addition to these, a new category known as <a href="https://blog.logrocket.com/es6-keyed-collections-maps-and-sets/" target="_blank" rel="noopener">keyed collections</a> has also been added to the language, with these inbuilt object types:
<k>Map</k>
<k>Set</k>
<k>WeakMap</k>
<k>WeakSet</k>
Just as the name implies, every element (known as an entry) in a keyed collection can be identified by some kind of key, such that the keys in the collection are distinct — meaning that every key maps exactly to one entry in the collection.

If you are familiar with <a href="https://blog.logrocket.com/know-your-javascript-data-structures/" target="_blank" rel="noopener">hash tables</a>, then you may have already inferred their usefulness here in ensuring that the average access time is sublinear on the number of elements in the collection.
In this post, we’ll take a peek at how we can use JavaScript’s <k>Map</k> and <k>Set</k> objects to efficiently solve problems.

Before we jump right in, let’s consider a sample problem.
Below is a sample problem:
<blockquote>
<img draggable="false" role="img" alt="💡" src="https://s.w.org/images/core/emoji/13.1.0/svg/1f4a1.svg"> <strong>Contains Duplicates</strong>
Given an array of integers <k>nums</k>, return <k>true</k> if any element appears at least twice in the array, and return <k>false</k> if every element is distinct.
</blockquote>
Pause for a moment and try solving this problem on your own, before you proceed.

If the <k>nums</k> array was sorted, will that simplify the solution?
Now, here is a working solution to the problem:
function hasDuplicates(nums) { 
// 1.
Sort the array in-place (sorting makes it easier) 
nums.sort((a, b) => a - b);
if (nums.length > 1) { 
// 2.
Loop through the sorted array until a duplicate is found 
for (let i = 1, len = nums.length; i &lt; len; i++) { 
// If a duplicate is found, return immediately 
if (nums[i] == nums[i - 1]) return true; 
} 
}
// 3.
If it ever gets here, no duplicate was found 
return false; 
}
There is no doubt that this solution works, for the given constraints of our problem.

The reasoning behind why it should work is quite straightforward — if the array of integers is already sorted, then it is possible to check in a <a href="https://en.wikipedia.org/wiki/One-pass_algorithm" target="_blank" rel="noopener">single pass</a> whether or not two consecutive, equal integers exist in the array.

Since there isn’t any guarantee that the array of integers will already be sorted, the solution first tries to sort the array, before checking for duplicate integers.
Let’s analyze our solution.

The <a href="https://en.wikipedia.org/wiki/Time_complexity" target="_blank" rel="noopener">running time</a> of the above solution will grow in a linearithmic fashion as the size of the input array grows.

While this isn’t a bad thing, it’s not so great either because, even for a pre-sorted array, it would still take a significant amount of time to process, as a lot of time is spent trying to sort the array first.
The solution also uses <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank" rel="noopener"><k>Array.prototype.sort</k></a> to sort the input array <a href="https://en.wikipedia.org/wiki/In-place_algorithm" target="_blank" rel="noopener">in-place</a> — modifying the original input array as a result.

Hence, no additional memory is required for the sort.
It is important to note that, if the problem required that the original order of the input array remain unchanged, then a copy of the input array must be made before using this solution.

This is tantamount to the use of additional memory that will grow in linear fashion as the size of the input array grows.
Now, whether this is an acceptable solution or not is subject to a number of factors — including but not limited to:
The constraints on the problem, such as the maximum size of the problem’s input
The constraints on computational resources, such as the machine’s available memory
Acceptable trade-offs, such as accepting the use of auxiliary space if that will potentially improve the running time, etc.
If we are certain that the array of integers might not already be sorted, and we also don’t mind using some auxiliary space — provided we can get a faster running time — then this solution is not the best.

As we progress, we will soon see that we can actually come up with a solution whose running time grows linearly, rather than linearithmically, with the size of the input.
<h3 id="mapsVsSetstopic-1">Defining and understanding <k>Map</k> objects</h3>
We can summarize the ECMAScript 2015 specification definition of a <k>Map</k> object as follows:
It is a collection of key/value pairs where both the keys and values may be arbitrary ECMAScript language values
It is an ordered collection, which means that the insertion order of its elements matters and is followed when iterating the collection
Keys in the collection are distinct or unique, and may only occur in one key/value pair within the Map’s collection
Every key in the collection may occur only once with respect to the ECMAScript <a href="https://tc39.es/ecma262/#sec-samevaluezero" target="_blank" rel="noopener">SameValueZero</a> comparison algorithm
That means any valid JavaScript value — both <a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" target="_blank" rel="noopener">primitive values</a> and object references, including unseemly values like <k>NaN</k> and <k>undefined</k> — can be used as a key in a <k>Map</k> object collection.
<h3 id="mapsVsSetstopic-2">Making equality comparisons with <k>SameValueZero</k></h3>
To determine whether a key already exists in the <k>Map</k> object collection — in other words, ensuring that keys are distinct — the <a href="https://tc39.es/ecma262/#sec-samevaluezero" target="_blank" rel="noopener">ECMAScript SameValueZero comparison algorithm</a> is used.
We use this comparison algorithm because, if one of the listed algorithms were used:
Strict Equality comparison algorithm: this would make it impossible to determine whether a key of value <k>NaN</k> already exists in the collection, since <k>NaN === NaN</k> always evaluates to <k>false</k>
SameValue comparison algorithm: this makes it possible to determine whether a key of value <k>NaN</k> already exists in the collection, but the keys <k>+0</k> and <k>-0</k> are different keys and will be treated as such, despite that <k>+0 === -0</k> always evaluates to <k>true</k>
The SameValueZero comparison algorithm, however, behaves like the SameValue comparison algorithm, except that it considers both <k>+0</k> and <k>-0</k> to be the same key.

If the SameValueZero comparison algorithm were to be implemented as a JavaScript function, it would look like this:
function SameValueZero(x, y) {
return x === y || (Number.isNaN(x) &amp;&amp; Number.isNaN(y)); 
}
<h3 id="mapsVsSetstopic-3">What are Map entries?</h3>
Each key/value pair contained in a <k>Map</k> object collection is usually referred to as an entry object, or entry.

An entry object is usually represented using a two-element array — more like <a href="https://blog.logrocket.com/the-javascript-record-and-tuple-proposal-an-overview/" target="_blank" rel="noopener">a tuple in most other programming languages</a> — whose first element is the key and whose second element is the value.
The type definition for a generic <k>Map</k> object entry should look like this (in TypeScript):
type MapEntry&lt;Key, Value> = [Key, Value];
That said, you can use JavaScript syntax, such as a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">destructuring assignment</a>, on a <k>Map</k> object entry like you would with an array, as demonstrated in the following <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener"><k>for...of</k> loop</a> example:
/**
* Iterating over entries of `Map` object using a 
* `for...of` loop — assuming that `map` has been 
* defined already as a `Map` object.

*/
for (const [key, value] of map) { 
console.log(key, value); 
}
Both <k>Map</k> and <k>Set</k> objects inherit an <k>entries()</k> method from their corresponding constructors’ <k>prototype</k> objects.

This <k>entries()</k> method returns an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol" target="_blank" rel="noopener">iterator</a> for all of the entries contained in the collection with respect to their insertion order.
For <k>Map</k> objects, however, the iterator returned by the <k>entries()</k> method also serves as the default iterator of the collection.
<h3 id="mapsVsSetstopic-4">Creating a Map object in JavaScript</h3>
At the time of this article’s publication, the only way to create a <k>Map</k> object is by invoking the global <k>Map</k> constructor function.

The constructor function must be invoked with the <k>new</k> keyword — otherwise, a <k>TypeError</k> will be thrown.
When the <k>Map</k> constructor function is invoked without arguments, an empty <k>Map</k> object of 0 <k>size</k> is returned.
// Throws a`TypeError` — when invoked without `new` keyword 
const throwTypeErrorMap = Map();
// Creates an empty `Map` object of 0 `size`
const mapA = new Map();
// Omitting the parentheses — when invoked without arguments
// Also creates an empty `Map` object of 0 `size`
const mapB = new Map;
console.log(mapA.size); // 0 
console.log(mapB.size); // 0
The <k>Map</k> constructor function can also be invoked with an optional <k>iterable</k> argument.

When specified, <k>iterable</k> must be a JavaScript object that:
properly implements the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol" target="_blank" rel="noopener">iterable protocol</a> — many inbuilt JavaScript objects implement this protocol, such as <k>Array</k>, <k>String</k>, and <k>Set</k>, as well as <k>Map</k>
returns an iterator object that produces a two-element, array-like (entry) object whose first element is a value that will be used as a <k>Map</k> key, and whose second element is the value to associate with that key
If the <k>iterable</k> argument does not meet these two requirements, a <k>TypeError</k> will be thrown — the only exception being when <k>iterable</k> is the value <k>null</k> or <k>undefined</k>, in which case the effect is the same as calling the <k>Map</k> constructor function without any argument, and an empty <k>Map</k> object of 0 <k>size</k> is created.
Let’s pay more attention to the second requirement stated above.

It is obvious that a new <k>Map</k> object cannot be created from a string primitive, even though <k>String</k> objects are iterable objects themselves.
// Map from String — throws a `TypeError` 
const throwTypeErrorMap = new Map("programming");
When we create a new <k>Map</k> object from another iterable object, an empty <k>Map</k> object is first created, and then the following steps are taken for each entry object produced by the iterator object, which is returned by the iterable:
Extract the first and second elements from the entry object as <k>key</k> and <k>value</k>, respectively
Check if an entry with <k>key</k> already exists in the <k>Map</k> object collection using <k>SameValueZero</k> comparison
If it exists, update the entry’s current value to <k>value</k>
If it does not exist, append a new entry to the end of the <k>Map</k> object collection with that <k>key</k> and <k>value</k> (if the <k>key</k> is <k>0</k>, change it to <k>+0</k> before appending a new entry to the collection)
const pairs = [[1, 3], [3, 3], [4, 2], [2, 2]];
// (1) Map from Array or Set
// Here a set is created from the <k>pairs</k> array and
// used to create the map.

However, the map can also
// be created directly from the <k>pairs</k> array.
const mapA = new Map(new Set(pairs));
console.log(mapA.size); // 4
console.log(…mapA); // [1, 3] [3, 3] [4, 2] [2, 2]
// (2) Map from Map
// New map contains all the items of the original map
// However, both maps are entirely different objects.
// Think of it as creating a clone of a map.
const mapB = new Map(mapA);
console.log(…mapA); // [1, 3] [3, 3] [4, 2] [2, 2]
console.log(…mapB); // [1, 3] [3, 3] [4, 2] [2, 2]
console.log(mapA === mapB); // false
console.log(mapA.size === mapB.size); // true
// (3) Map from Object
// In ES6, the <k>Object.entries()</k> method was added,
// and it returns an array of entries representing
// key/value pairs for every key in an object.
const mapC = new Map(Object.entries({
language: “JavaScript”,
hello: “world”
}));
console.log(mapC.size); // 2
console.log(…mapC); // [“language”, “JavaScript”] [“hello”, “world”]
</ol>
Now that we are able to create new <k>Map</k> objects, let’s go ahead to explore their instance properties and methods.
<h3 id="mapsVsSetstopic-5"><k>Map</k> object instance properties and methods</h3>
<h3>Checking the size</h3>
We’ve already seen the <k>size</k> property in action a couple of times.

Just as the name implies, <k>size</k>returns the number of entries in the <k>Map</k> object at any instant.
It might interest you to know that the <k>size</k> property is an accessor property and not a data property.

Also, it only has a <k>get accessor</k> function, and not a <k>set accessor</k> function.

That’s the reason why its value cannot be overridden by an assignment operation.
Whenever you access the <k>size</k> property of a <k>Map</k> object, its <k>get accessor</k> function will be invoked, which basically counts and returns the number of elements (entries) currently in the <k>Map</k> object.
<h3>Looking up a key</h3>
There are several cases where it is sufficient to know only whether or not an entry with a particular key is present in a <k>Map</k> object.

Every <k>Map</k> object will originally have a <k>has()</k> method — which can be called to assert whether or not an entry with a specified key is present in the <k>Map</k> object.

The <k>has()</k> method returns a boolean value — <k>true</k> if the specified key is present, and <k>false</k> otherwise.
const M = new Map(Object.entries({ 
language: "JavaScript", 
hello: "world" 
}));
console.log(M.has("hello")); // true 
console.log(M.has("Hello")); // false 
console.log(M.has("language")); // true 
console.log(M.has("world")); // false
Beyond checking whether a key exists in a <k>Map</k> object, being able to read the value of the entry associated with that key is also very important.

As such, every <k>Map</k> object initially has a <k>get()</k> method for this purpose.
When the <k>get()</k> method is called with a key for which no entry exists, it returns <k>undefined</k>.
const M = new Map(Object.entries({ 
language: "JavaScript", 
hello: "world" 
}));
console.log(M.get("hello")); // "world" 
console.log(M.get("Hello")); // undefined 
console.log(M.get("language")); // "JavaScript" 
console.log(M.get("world")); // undefined 
Although the <k>get()</k> method returns <k>undefined</k> for nonexistent keys, it should not be relied upon when checking for the existence of a key in a <k>Map</k> collection because it’s also possible for a key in the collection to have a value of <k>undefined</k>.
The most accurate way to determine the existence of a key in the collection is to use the <k>has()</k> method.
<h3>Adding, updating, and removing entries</h3>
The ability to add, update, or remove one or more entries from a <k>Map</k> object is essential, and every <k>Map</k> object will have <k>set()</k>, <k>delete()</k>, and <k>clear()</k> methods.
The <k>set()</k> method takes a JavaScript value as its argument and will append that value to the end of the <k>Set</k> object, provided it isn’t already in the <k>Set</k> object.

If the specified value is already in the <k>Set</k> object, it is ignored.
The <k>add()</k> method returns the same <k>Set</k> object with the added value, making it amenable to <a href="https://en.wikipedia.org/wiki/Method_chaining" target="_blank" rel="noopener">method chaining</a>, or the process of invoking multiple <k>add()</k> calls at once.
The <k>delete()</k> method, on the other hand, will remove the entry associated with the specified key from the <k>Map</k> object — provided there is such an entry in the <k>Map</k> object.

If an entry is actually removed from the <k>Map</k> object as a result of this delete operation, it returns <k>true</k>; otherwise it returns <k>false</k>.
It might be useful in some cases to completely remove all of the entries in a given <k>Map</k> object.

While this can be achieved by making multiple <k>delete()</k> calls to the <k>Map</k> object, obviously it will make more sense if this is done in a single method call.
This is exactly what the <k>clear()</k> method does.

Calling the <k>clear()</k> method empties the <k>Map</k> object and returns <k>undefined</k>.
// Convert object to map 
const M = new Map(Object.entries({ 
language: "JavaScript" 
}));
console.log(M.size); // 1 
console.log(...M); // ["language", "JavaScript"]
// (1) Add and update some map entries 
M.set("year", 1991); 
M.set("language", "Python");
console.log(M.size); // 2 
console.log(...M); // \["language", "Python"\] ["year", 1991]
// (2) Add or update several values at once (using chaining) 
M.set("version", 3) 
.set("year", 2000) 
.set("version", "2.0");
console.log(M.size); // 3 
console.log(...M); // \["language", "Python"\] ["year", 2000] ["version", "2.0"]
// Delete some entries from the map 
console.log(M.delete("Year")); // false 
console.log(M.delete("year")); // true 
console.log(M.delete("year")); // false 
console.log(M.delete("version")); // true
console.log(M.size); // 1 
console.log(...M); // ["language", "JavaScript"]
// Empty the map 
M.clear();
console.log(M.size); // 0
<h3>Iterating the collection</h3>
One other thing we might want to do with a <k>Map</k> object is view the keys, values, or entries that are in it.
You can loop through each entry in a <k>Map</k> object (in insertion order) using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener"><k>for...of</k> loop</a>.

This is because every iterable has a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" target="_blank" rel="noopener"><k>Symbol.iterator()</k>&nbsp;method</a> that returns its default <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol" target="_blank" rel="noopener">iterator</a> — which is responsible for producing the sequence of values for the loop.
Besides the <k>for...of</k> loop we looked at earlier, the same sequence of values returned by the default iterator is what the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank" rel="noopener">spread operator (<k>...</k>)</a>, the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*" target="_blank" rel="noopener"><k>yield*</k>&nbsp;statement</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">destructuring assignment</a> are based on.
We’ve already seen the <k>entries()</k> method, which returns an iterator for all the entries in a <k>Map</k> object with respect to their insertion order.

As stated earlier, the iterator returned by the <k>entries()</k> method also serves as the default iterator of a <k>Map</k> object.
That said, the two <k>for...of</k> loops shown in the following code snippet are the same and will produce the exact same sequence of values:
const M = new Map([[1, 3], [3, 3], [4, 2], [2, 2]]);
// (a) Iteration using the default iterator ([Symbol.iterator]) 
for (const [key, value] of M) { 
console.log(key, value);
}
// (b) Iteration using the `entries()` iterator 
for (const [key, value] of M.entries()) { 
console.log(key, value); 
} 
It is important to note that an iterable object can provide other iterators besides the default iterator provided by its <k>[Symbol.iterator]</k> method.

This holds true for most inbuilt iterables in JavaScript, including <k>Map</k> objects.
In fact, every <k>Map</k> object originally has three methods that return iterators, namely:
<k>entries()</k>
<k>keys()</k>
<k>values()</k>
The <k>keys()</k> method, as the name implies, returns an iterator that yields the keys associated with each entry of the <k>Map</k> object (in insertion order).

The <k>values()</k> method returns an iterator that yields the values associated with each entry of the <k>Map</k> object.
The following code snippet demonstrates a couple of ways we can leverage the iterable behavior of a <k>Map</k> object to access the values or keys of each element in it.
const M = new Map([[1, 3], [3, 3], [4, 2], [2, 2]]);
// Using the spread operator (...) to pass values 
// in the Map object as function arguments.

console.log(...M.values()); // 3 3 2 2
// Using the spread operator in building an array 
// with the unique keys of the Map object.

const arr = [...M.keys()];
console.log(arr); // [1, 3, 4, 2] 
console.log(arr[0]); // 1 
console.log(arr[3]); // 2 
console.log(arr.length); // 4
// Using destructuring assignment with a `Map` object 
// to extract the first, second and remaining keys.

const [first, second, ...remainingKeys] = M.keys();
console.log(first); // 1 
console.log(second); // 3 
console.log(remainingKeys); // [4, 2] 
console.log(remainingKeys.length); // 2
// Iteration using a for...of loop 
// to read all the keys in the collection.

for (const key of M.keys()) { 
console.log(key); 
}
// 1 
// 3 
// 4 
// 2
<h3 id="mapsVsSetstopic-6">Iterating <k>Map</k> objects with the <k>forEach()</k> method</h3>
We’ve been able to explore quite a number of ways in which we can iterate over a <k>Map</k> object.

However, there remains one more very useful iteration method — the <k>forEach()</k> method.
Just as with arrays, the <k>forEach()</k> method of a <k>Map</k> object accepts a callback function as its first argument, which is triggered for each entry of the <k>Map</k> object.

The <k>forEach()</k> method also accepts an optional second argument, which represents the <k>this</k> value that will be used when executing the callback function.
The <k>forEach()</k> callback function is called with three arguments for every entry of the <k>Map</k> object:
The first argument is the value associated with the current entry in the iteration
The second argument is the key associated with the current entry in the iteration
The third argument is the <k>Map</k> object itself
const M = new Map([[1, 4], [3, 5], [4, 0], [2, 2]]);
M.forEach(function _callback(value, key, map) {
console.log([...map]);
const replacement = this[value];
if (replacement) map.set(key, replacement);
else if (Number.isInteger(value)) map.delete(key);
}, "hello");
console.log([...M]);
// [[1, 4], [3, 5], [4, 0], [2, 2]]
// [[1, "o"], [3, 5], [4, 0], [2, 2]]
// [[1, "o"], [4, 0], [2, 2]]
// [[1, "o"], [4, "h"], [2, 2]]
// [[1, "o"], [4, "h"], [2, "l"]]
To be clear, the <k>forEach()</k> method call in the previous code snippet results in the following <k>_callback()</k> calls:
_callback.call("hello", 1, 4, M); 
_callback.call("hello", 3, 5, M); 
_callback.call("hello", 4, 0, M); 
_callback.call("hello", 2, 2, M);
<h3 id="mapsVsSetstopic-7"><span class="orange">What is a JavaScript <k>Set</k> object?</span></h3>
A <k>Set</k> object is an ordered collection of unique JavaScript values.
For every <k>Set</k> object, there exists the following invariants:
It is an ordered collection: The insertion order of its elements matters, and is followed when iterating the collection
Values in the collection are distinct or unique: Every value may occur only once in the collection with respect to the <a href="https://tc39.es/ecma262/#sec-samevaluezero" target="_blank" rel="noopener">ECMAScript SameValueZero comparison algorithm</a>
Any valid JavaScript value can be contained in the collection — both <a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" target="_blank" rel="noopener">primitive values</a> and object references, including unseemly values like <k>NaN</k> and <k>undefined</k>.
<h3 id="mapsVsSetstopic-8">Maps vs.
Sets</h3>
Since we’ve already explored <k>Map</k> objects in the previous section, let’s look at how they compare with <k>Set</k> objects before we continue.
<table><thead>
<tr><th>Set objects</th><th>Map objects</th></tr></thead>
<tbody>
<tr><td>one-dimensional collections: they store only unique values</td><td>two-dimensional collections: they store records as key/value pairs, and each key is unique in the collection</td></tr>
<tr><td>Both key and value point to the same value or reference for every entry</td><td>Both key and value point to the same value or reference for every entry</td></tr>
<tr><td>The default iterator ([Symbol.iterator]) of a Set object is the one returned from its values() method</td><td>The default iterator is obtained from the entries() method</td></tr>
<tr><td>set() and get() methods are not defined in the Set.prototype object; the Set.prototype object defines an add () method</td><td>The set() and get() methods are defined in the Set.prototype object</td></tr>
</tbody>
</table>
As we progress in our exploration of JavaScript <k>Set</k> objects, we will find out more ways in which <k>Set</k> objects differ from <k>Map</k> objects and some ways in which they are similar.
<h3 id="mapsVsSetstopic-9">Creating a Set object</h3>
Just as with <k>Map</k> objects, the only way to create a <k>Set</k> object is by invoking the global <k>Set</k> constructor function.

The constructor function must be invoked with the <k>new</k> keyword — otherwise, a <k>TypeError</k> will be thrown.

When the <k>Set</k> constructor function is invoked without arguments, an empty <k>Set</k> object of 0 <k>size</k> is returned.
// Throws a `TypeError` — when invoked without `new` keyword 
const throwTypeErrorSet = Set();
// Creates an empty `Set` object of 0 `size` 
const setA = new Set();
// Omitting the parentheses — when invoked without arguments 
// Also creates an empty `Set` object of 0 `size`
const setB = new Set;
console.log(setA.size); // 0 
console.log(setB.size); // 0 
The <k>Set</k> constructor function can also be invoked with an optional <k>iterable</k> argument.

When specified, <k>iterable</k> must be a JavaScript object that properly implements the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol" target="_blank" rel="noopener">iterable protocol</a>.

Many inbuilt JavaScript objects implement this protocol — such as <k>Array</k>, <k>String</k>, and <k>Map</k>, as well as <k>Set</k> — which means that these are all valid objects and can be passed to the <k>Set</k> constructor function as the <k>iterable</k> argument.
If the <k>iterable</k> is the value <k>null</k> or <k>undefined</k>, then the effect is the same as calling the <k>Set</k> constructor function without any argument — an empty <k>Set</k> object of 0 <k>size</k> will be created.

Otherwise, a <k>TypeError</k> will be thrown for any other <k>iterable</k> value that does not properly implement the iterable protocol.
Unlike with <k>Map</k> objects, creating a new <k>Set</k> object from another iterable object has the effect of de-duping, i.e., eliminating redundant duplicate values from the values yielded by the internal <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" target="_blank" rel="noopener">iterator</a> of the iterable object.

This is because of one important attribute of a <k>Set</k> object, which is that it must contain only distinct, discrete values.
// (1) Set from String 
// Set contains all the unique characters of the string 
const testString = "programming"; 
const uniqueChars = new Set(testString);
console.log(testString.length); // 11 
console.log(uniqueChars.size); // 8 
console.log(...uniqueChars); // p r o g a m i n
// (2) Set from Array 
// Set contains all the distinct elements of the array 
const integers = [1,1,1,3,3,4,3,2,4,2]; 
const distinctIntegers = new Set(integers);
console.log(integers.length); // 10 
console.log(distinctIntegers.size); // 4 
console.log(...distinctIntegers); // 1 3 4 2
// (3) Set from Set 
// New set contains all the items of the original set 
// However, both sets are entirely different objects.

// Think of it as creating a clone of a set.

const setA = new Set([1,1,1,3,3,4,3,2,4,2]); 
const setB = new Set(setA);
console.log(...setA); // 1 3 4 2 
console.log(...setB); // 1 3 4 2 
console.log(setA === setB); // false 
console.log(setA.size === setB.size); // true 
Let’s take another shot at our sample problem from earlier and employ what we’ve learned so far about <k>Set</k> objects.

This time, we will be creating a new <k>Set</k> object from the <k>nums</k> array, containing only distinct integers (no duplicates).

We can then determine whether the <k>nums</k> array contains duplicates by comparing the size of the <k>Set</k> object with the length of the <k>nums</k> array.
Here is what the new solution looks like:
function hasDuplicates(nums) { 
// Create a new set from `nums` containing only its distinct 
// integers (i.e de-duplicate the `nums` array).

const distinct = new Set(nums);
// If the size of the distinct set matches the length of the 
// nums array, then there are no duplicates, and vice-versa.

return distinct.size != nums.length; 
}
In using a <k>Set</k> object, we have been able to implement a solution whose running time is guaranteed to grow linearly with the size of the input array, even though it will require some additional memory to perform.

When it comes to storing unique items in memory, a set of items with duplicates will use less space than one without duplicates.
In other words, the worst case scenario in terms of memory usage happens when the set contains only unique items and no duplicates — in that case, the amount of space used matches the number of items.
<h3 id="mapsVsSetstopic-10"><k>Set</k> object instance properties and methods</h3>
<h3>Checking the size</h3>
Just as with <k>Map</k> objects, the <k>size</k> property returns the number of values in a <k>Set</k> object at any instant.

Again, the <k>size</k> property of the <k>Set.prototype</k> object is an accessor property, not a data property.
<k>Set</k> also only has a get accessor function and not a set accessor function — hence, it cannot be overridden by an assignment operation.
Whenever you access the <k>size</k> property of a <k>Set</k> object, its get accessor function will be invoked, and it will count and return the number of elements (values) that are currently in the <k>Set</k> object.
<h3>Checking whether a value is present</h3>
Every <k>Set</k> object will originally have a <k>has()</k> method that can be called to assert whether or not an element with a specified value is present in the <k>Set</k> object.

Like with <k>Map</k> objects, the <k>has()</k> method returns a boolean value — <k>true</k> if the specified value is present, and <k>false</k> otherwise.
const uniqueChars = new Set("programming");
console.log(...uniqueChars); // p r o g a m i n
console.log(uniqueChars.has("p")); // true 
console.log(uniqueChars.has("A")); // false 
console.log(uniqueChars.has("a")); // true 
console.log(uniqueChars.has("t")); // false 
Since <k>Set</k> objects are one-dimensional (storing only unique values), it is impractical for them to have a <k>get()</k> method, unlike with <k>Map</k> objects.

As a result, the <k>Set.prototype</k> object does not define a <k>get()</k> method.
<h3>Adding and removing values</h3>
It is very important to be able to add or remove one or more values from a <k>Set</k> object, and every <k>Set</k> object will initially have <k>add()</k>, <k>delete()</k>, and <k>clear()</k> methods.
The <k>add()</k> method takes a JavaScript value as its argument, and will append that value to the end of the <k>Set</k> object, provided that it isn’t already in the <k>Set</k> object.

If the specified value is already in the <k>Set</k> object, it is ignored.
The <k>add()</k> method returns the same <k>Set</k> object, with the added value, which makes it amenable to <a href="https://en.wikipedia.org/wiki/Method_chaining" target="_blank" rel="noopener">method chaining</a>, or the familiar process of invoking multiple <k>add()</k> calls at once.
Just like with <k>Map</k> objects, the <k>delete()</k> method of a <k>Set</k> object will remove the element associated with the specified value from the <k>Set</k> object, provided that such an element is present in the <k>Set</k> object.

If an element is actually removed from the <k>Set</k> object as a result of this delete operation, it returns <k>true</k>; otherwise it returns <k>false</k>.
Also, a call to the <k>clear()</k> method empties the <k>Set</k> object and returns <k>undefined</k>.
// Create new set of integers 
const integers = new Set([1,1,1,3,3,4,3,2,4,2]);
console.log(integers.size); // 4 
console.log(...integers); // 1 3 4 2
// Add some values to the set 
integers.add(5); 
integers.add(1);
console.log(integers.size); // 5 
console.log(...integers); // 1 3 4 2 5
// Add several values at once (using chaining) 
integers.add(7).add(2).add(9);
console.log(integers.size); // 7 
console.log(...integers); // 1 3 4 2 5 7 9
// Delete some values from the set 
console.log(integers.delete(3)); // true 
console.log(integers.delete(8)); // false 
console.log(integers.delete(3)); // false 
console.log(integers.delete(1)); // true
console.log(integers.size); // 5 
console.log(...integers); // 4 2 5 7 9
// Empty the set 
integers.clear();
console.log(integers.size); // 0
Now that we’ve learned a few more things we can do with <k>Set</k> objects, let’s return to our previous solution to our original sample problem and see if we can optimize it even further.

(As you might have rightly guessed, we can.)
A careful examination of our previous solution will show that it’s doing a little too much.

It always considers every integer in the input array, adding them to the <k>Set</k> object (just like using the <k>add()</k> method multiple times) and then checking its size, which counts and returns the number of elements in the <k>Set</k> object by going through each element.
The problem with this solution is that it isn’t conservative.

It is very possible that a duplicate integer might be found by considering the first few integers in the array, and so the act of considering the remaining integers in the array becomes redundant.
To optimize this solution, we can decide to be lazy about adding integers to the <k>Set</k> object, and only continue as long as we haven’t encountered an integer that has already been added to the <k>Set</k> object.
Here is what the optimized solution looks like:
function hasDuplicates(nums) { 
// 1.
Create an empty set to hold distinct integers
const distinct = new Set();
// 2.
Loop through the integers until a duplicate is found
for (const int of nums) {
// 2a.

If a duplicate is found, return immediately
if (distinct.has(int)) return true;
// 2b.

Otherwise, add the integer to the distinct set
distinct.add(int);
}
// 3.
If it ever gets here, no duplicate was found
return false;
}
<h3 id="mapsVsSetstopic-11">Iterating keyed collections</h3>
It is often necessary to have a view into the values that are contained in a <k>Set</k> object.

This is very attainable with arrays or <a href="https://tc39.es/ecma262/#sec-indexed-collections" target="_blank" rel="noopener">indexed collections</a> — hence, we can easily access the element of an array (<k>arr</k>), at some index (<k>i</k>), using the property access bracket notation (<k>arr[i]</k>).
Unfortunately, this kind of element access is <a href="https://tc39.es/ecma262/#sec-keyed-collections" target="_blank" rel="noopener">not directly possible with <k>Set()</k> objects</a> because <k>Set</k> objects are keyed collections.
However, just like with arrays and other iterables, you can loop through the values for each element in a <k>Set</k> object (in insertion order) using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener"><k>for...of</k> loop</a>, or you could use the sequence of values it produces with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank" rel="noopener">spread operator (<k>...</k>)</a>, the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*" target="_blank" rel="noopener"><k>yield*</k> statement</a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">destructuring assignment</a>.
The following code snippet demonstrates a couple of ways we can leverage the iterable behavior of a <k>Set</k> object to access the values of each element in it.
const integers = new Set([1,1,1,3,3,4,3,2,4,2]);
// Using the spread operator (...) to pass values
// in the Set object as function arguments.
console.log(...integers); // 1 3 4 2
// Using the spread operator in building an array
// with the unique values from the Set object.
const arr = [...integers];
console.log(arr); // [1, 3, 4, 2]
console.log(arr[0]); // 1
console.log(arr[3]); // 2
console.log(arr.length); // 4
// Using destructuring assignment with a `Set` object
const [first, second, ...remainingIntegers] = integers;
console.log(first); // 1
console.log(second); // 3
console.log(remainingIntegers); // [4, 2]
console.log(remainingIntegers.length); // 2
// Iteration using a `for...of` loop
for (const integer of integers) {
console.log(integer);
}
// 1
// 3
// 4
// 2
Just like with <k>Map</k> objects, every <k>Set</k> object originally has three methods that return iterators — <k>values()</k>, <k>keys()</k>, and <k>entries()</k>.
The <k>values()</k> method, as the name implies, returns a new iterator that yields the values for each element in the <k>Set</k> object (in insertion order).

The iterator returned by the <k>values()</k> method yields the exact same sequence of values as the default iterator returned by the <k>[Symbol.iterator]</k> method.
For iteration purposes, the <k>keys()</k> method of a <k>Set</k> object behaves exactly like the <k>values()</k> method, and they can be used interchangeably.

In fact, the <k>values</k>, <k>keys</k>, and <k>[Symbol.iterator]</k> properties of a <k>Set</k> object all point to the same value (function) initially.

Hence, the following <k>for...of</k> loops will log the exact same sequence of values.
const integers = new Set([1,1,1,3,3,4,3,2,4,2]);
// (a) Iteration using the default iterator (`[Symbol.iterator]`)
for (const integer of integers) {
console.log(integer);
}
// (b) Iteration using the `values()` iterator
for (const integer of integers.values()) {
console.log(integer);
}
// (c) Iteration using the `keys()` iterator
for (const integer of integers.keys()) {
console.log(integer);
}
Some basic set operations can be implemented by iterating over one or more <k>Set</k> objects.

For example, the following code snippet shows how to implement the <k>union</k> and <k>intersection</k> set operations.
function union(setA, setB) {
const setUnion = new Set(setA);
for (const value of setB) {
setUnion.add(value);
}
return setUnion;
}
function intersection(setA, setB) { 
const setIntersection = new Set();
for (const value of setB) {
if (setA.has(value)) {
setIntersection.add(value);
}
}
return setIntersection;
}
Just as with <k>Map</k> objects, <k>Set</k> objects also have a <k>forEach()</k> method with a similar call signature.

However, to account for the one-dimensional nature of <k>Set</k> objects, the <k>forEach()</k> callback function is called with three arguments:
The first argument is the value for the current element in the iteration
The second argument is always the same as the first argument
The third argument is the <k>Set</k> object itself
const S = new Set([1,1,1,3,3,4,3,2,4,2]);
S.forEach(function _callback(value, _, set) {
console.log([...set]);
const replacement = this[value];
if (replacement) set.add(${value}${replacement});
if (Number.isInteger(value)) set.delete(value);
}, "hello");
// [1, 3, 4, 2]
// [3, 4, 2, '1e']
// [4, 2, '1e', '3l']
// [2, '1e', '3l', '4o']
// ['1e', '3l', '4o', '2l']
// ['1e', '3l', '4o', '2l']
// ['1e', '3l', '4o', '2l']
// ['1e', '3l', '4o', '2l']
console.log(...S); // 1e 3l 4o 2l
To be clear, the <k>forEach()</k> method call in the previous code snippet results in the following <k>_callback()</k> calls:
_callback.call("hello", 1, 1, S);
_callback.call("hello", 3, 3, S);
_callback.call("hello", 4, 4, S);
_callback.call("hello", 2, 2, S);
_callback.call("hello", '1e', '1e', S);
_callback.call("hello", '3l', '3l', S);
_callback.call("hello", '4o', '4o', S);
_callback.call("hello", '2l', '2l', S);
<h3 id="mapsVsSetstopic-12">Accidental <k>undefined</k> — what does it mean?</h3>
When the <k>Set</k> constructor function is called without any argument, you already know that it creates an empty <k>Set</k> object.

The same, however, does not hold true for the <k>add()</k> method.
When the <k>add()</k> method of a <k>Set</k> object is called without any argument, it actually adds an element to the collection with a value of <k>undefined</k>, if it does not already exist.
In other words, for a given <k>Set</k> object <k>S</k>, <k>S.add()</k> is exactly the same as <k>S.add(undefined)</k>.

This is what I’d like to refer to as an accidental <k>undefined</k> — because it might not be intended.
You might have already inferred the behavior of the <k>has()</k> and <k>delete()</k> methods when they’re called without any argument.

As with the <k>add()</k> method, calling these methods without any argument is exactly the same as calling them with <k>undefined</k> as the first argument.

Hence, for a given <k>Set</k> object <k>S</k>, <k>S.has()</k> checks whether <k>undefined</k> exists as a value in the <k>Set</k> object, while <k>S.delete()</k> removes the value <k>undefined</k> from the collection, if it exists.
// Creates an empty set object 
const S = new Set();
// Add some items to the set object 
S.add(5); 
S.add("hello"); console.log(...S); // 5 'hello'
// Adds undefined to the set object 
S.add(); console.log(...S); // 5 'hello' undefined
console.log(S.has(5)); // true 
console.log(S.has("world")); // false
// Logs `true` because `undefined` exists in the set 
console.log(S.has()); // true
// Logs `true` because `undefined` was removed from the set 
console.log(S.delete()); // true
// Logs `false` because `undefined` does not exist in the set 
console.log(S.has()); // false 
That said, always be sure to explicitly call the <k>add()</k>, <k>delete()</k>, and <k>has()</k> methods of a <k>Set</k> object with at least one argument to avoid dealing with an accidental <k>undefined</k> value.
<h3 id="mapsVsSetstopic-13">Removing duplicates from <k>Set</k> objects</h3>
Before we finish this section on JavaScript <k>Set</k> objects, let’s see how we can solve a modified version of the sample problem from before, using all we’ve learned so far.
<blockquote>
<img draggable="false" role="img" alt="💡" src="https://s.w.org/images/core/emoji/13.1.0/svg/1f4a1.svg"> <strong>Contains Duplicates (2)</strong> Given an array of integers <k>nums</k>, return the number of elements that appear at least twice in the array, and return <k>0</k> if every element is distinct.
</blockquote>
Pause for a moment and try solving this problem on your own, before you proceed.

The solution could be a little tricky — how can you ensure a duplicate integer is not counted more than once?
Now, here is a working solution to the problem:
function countDuplicates(nums) { 
// Create an empty set for distinct integers 
// (i.e integers appearing only once) 
const distinct = new Set();
// Create an empty set for duplicate integers 
const duplicates = new Set();
// Create a variable to keep track of the duplicates count 
let count = 0;
// Loop through the integers while counting duplicates 
for (const int of nums) { 
// If duplicate integer is found (it has already been counted), 
// continue with the iteration to the next integer.

if (duplicates.has(int)) continue;
if (distinct.delete(int)) {
// If integer was successfully deleted from the `distinct` set,
// that means it has been seen once before.

Hence add it, to
// the `duplicates` set and increment `count`.
duplicates.add(int);
count++;
} else {
// Integer is being seen for the first time and should be added
// to the `distinct` set.
distinct.add(int);
}
}
// Finally, return the duplicates count 
return count; 
}
<h3 id="mapsVsSetstopic-14"><k>Map</k> or <k>set</k>?</h3>
So far, we have been able to explore JavaScript <k>Map</k> and <k>Set</k> objects in detail.

But in addition to that, we also need to be able to determine when it is sufficient to use one instead of the other in solving problems.
Earlier on, we saw that <k>Set</k> objects are one-dimensional collections, whereas <k>Map</k> objects are two-dimensional.

That could serve as a cue in determining which one is best suited for a particular problem.
In other words, a <k>Map</k> object should be used over a <k>Set</k> object in cases where additional information is needed aside from just the key.

Most times, that additional information is required to make decisions or to compute the final output of the program.
To further demonstrate this, let’s consider another popular problem.
<blockquote>
<img draggable="false" role="img" alt="💡" src="https://s.w.org/images/core/emoji/13.1.0/svg/1f4a1.svg"><strong>Two Sum</strong> Given an array of integers and a specific target, return <k>true</k> if two numbers exist in the array that add up to the target, and <k>false</k> otherwise.
</blockquote>
If the array were to be sorted, then it would be possible to come up with a linear time solution to this problem without any need for auxiliary space.

But since there is a possibility that the array is not already sorted, we need to use a <k>Set</k> object to provide some auxiliary space where we can solve the problem in linear time without taking on the expensive task of sorting the array first.
function twoSum(nums, target) { 
// 1.
Create an empty set for complements 
// (i.e complement = target - num) 
const complements = new Set();
// 2.
Loop through integers until a complement is found 
for (const num of nums) { 
// 2a.

If a complement is found, return immediately 
if (complements.has(target - num)) return true;
// 2b.

Otherwise, add the integer to the complements set
complements.add(num);
}
// 3.
If it ever gets here, no complement was found 
return false; 
}
Here, we are required to return <k>true</k> if there are two numbers that sum up to the specified target, and <k>false</k> otherwise.

As such, we are only interested in the numbers themselves, which is why we only need to use one <k>Set</k> object to solve the problem.
Now, let’s instead say we modify the problem to return the array indices of the two numbers.

We would be better off using a <k>Map</k> object.

That’s because, in addition to the numbers themselves, we are now also interested in their corresponding indices in the array — both of which cannot be contained in a singular <k>Set</k> object.
function twoSum(nums, target) { 
// 1.
Create an empty map for integers against indices 
// (i.e Map&lt;integer, index>) 
const indices = new Map();
// 2.
Loop through integers until a complement is found 
for (let i = 0, len = nums.length; i &lt; len; i++) { 
// 2a.

Compute the complement of the current integer 
const complement = target - nums[i];
// 2b.

If the complement already exists in the map,
// get the complement index from the indices map and
// return early ([complement index, current index])
if (indices.has(complement)) {
return [indices.get(complement), i];
}
// 2c.

Otherwise, add the current integer and index
// to the indices map
indices.set(nums[i], i);
}
// 3.
If it ever gets here, no complement was found 
return null; 
}
<h3 id="mapsVsSetstopic-15">Other <k>Map</k> and <k>Set</k> uses</h3>
<k>Map</k> and <k>Set</k> objects can be very useful when modeling <a href="https://blog.logrocket.com/the-javascript-record-and-tuple-proposal-an-overview/" target="_blank" rel="noopener">compound data structures</a> to solve certain kinds of problems.
In general, whenever you need to be able to look up or check for the existence of an item with an average access time that is sublinear on the number of available items (approximately constant time), you should consider using a <k>Set</k> or <k>Map</k> object.
<h3 id="mapsVsSetstopic-16">Data caching with <k>Map</k> objects</h3>
When modeling data structures for the purpose of caching data, a <k>Map</k> object can be used as a lookup table to check for the existence of a key in the cache before performing <k>get()</k> or <k>put()</k> operations.
Usually, cache implementations include some kind of strategy for removing items from the cache in order to free up space — the most popular cache eviction strategies being: least frequently used (LFU) and least recently used (LRU).
Consider the <k>get()</k> operation of an LRU cache, for example: the expectation is to be able to fetch a record from the cache using its cache key in approximately constant time, and in the process, the record gets ranked as the most recently used record because it is the most recently accessed.
In order to meet the above stated expectation, a fast lookup of the cache key is required — and that is where a <k>Map</k> object or any other form of hash table shines.

To maintain a proper ranking of recently accessed records, a priority queue can be used.
However, most implementations use a doubly-linked list instead, since it is capable of both removing the record from its current position in the list and re-inserting it to the head position of the list, all in constant time.
A minimalist implementation blueprint of a typical LRU cache could look somewhat like this (the full implementation details have been omitted for brevity):
interface ICache&lt;K, V> { 
get: (key: K) => V; 
put: (key: K, data: V) => void; 
}
class LRUCache&lt;K, V> implements ICache&lt;K, V> { 
/** 
* A DLL is used to maintain the order of the items 
* in the cache according to how recently they were 
* used (accessed or added).

*
* Using a DLL makes it possible to remove an item 
* from any position in the list (in constant time).

*/ 
protected list = new DoublyLinkedList&lt;V>();
/** 
* A Map object is used as a lookup table to check 
* for the existence of a key in the cache with an 
* average access time that is sublinear on the 
* number of cache items (approximately constant 
* time).

*/ 
protected table = new Map&lt;K, V>();
/** 
* @param size {number} The number of items that 
* can be stored in the cache.

*/ 
constructor(protected size: number) {}
get(key: K): V {} 
put(key: K, data: V): void {} 
}
<h3 id="mapsVsSetstopic-17">Graphical representation with map and set</h3>
Most connectivity problems are better solved when the problem data is represented as a graph, using either of two forms of graph representation:
Adjacency Matrix
Adjacency List
For most problems, an adjacency list representation should suffice — and for that, <k>Map</k> and <k>Set</k> objects can be used.
Most adjacency list implementations use arrays and/or linked lists, but it is also possible to use <k>Map</k> and <k>Set</k> objects.

The <k>Map</k> object stores each vertex in the graph as its keys, with their corresponding list of neighboring vertices in <k>Set</k> objects as its values.
A typical implementation of an undirected graph represented as an Adjacency List (using <k>Map</k> and <k>Set</k> objects) should look somewhat like this:
interface IGraph&lt;V> { 
addVertex: (vertex: V) => void; 
addEdge: (fromVertex: V, toVertex: V) => void; 
removeVertex: (vertex: V) => void; 
removeEdge: (fromVertex: V, toVertex: V) => void; 
}
class UndirectedGraph&lt;V> implements IGraph&lt;V> { 
/** 
* A Map object is used to map each vertex in the 
* graph to a set of vertices that are connected 
* to it.

*/ 
protected list = new Map&lt;V, Set&lt;V>>();
addVertex(vertex: V): void { 
if (!this.list.has(vertex)) { 
// An array can be used to represent the set 
// of vertices — but in this implementation, 
// a Set object is used instead.

this.list.set(vertex, new Set&lt;V>()); 
} 
}
addEdge(fromVertex: V, toVertex: V): void { 
this.addVertex(fromVertex); 
this.addVertex(toVertex); 
(this.list.get(fromVertex) as Set&lt;V>).add(toVertex); 
(this.list.get(toVertex) as Set&lt;V>).add(fromVertex); 
}
removeVertex(vertex: V): void { 
if (this.list.has(vertex)) { 
for (const toVertex of this.list.get(vertex) as Set&lt;V>) {
this.removeEdge(vertex, toVertex); 
}
this.list.delete(vertex); 
} 
}
removeEdge(fromVertex: V, toVertex: V): void { 
if (this.list.has(fromVertex) &amp;&amp; this.list.has(toVertex)) { 
(this.list.get(fromVertex) as Set&lt;V>).delete(toVertex); 
(this.list.get(toVertex) as Set&lt;V>).delete(fromVertex); 
} 
} 
}
<h3 id="mapsVsSetstopic-18">Disjoint-sets and dynamic connectivity</h3>
A niche of connectivity problems can be solved using special data structures called disjoint-sets.

A disjoint-set is used to maintain a set of elements (nodes) that are partitioned into a number of non-overlapping (disjointed) subsets, also known as connected components.
Disjoint-sets are structured in such a way as to efficiently perform two operations, namely:
<k>find</k>: checks for the subset an element or node belongs to
<k>union</k>: merges two subsets into a single subset; can also be used for detecting cycles in undirected graphs
The following Disjoint-Set implementation uses a <k>Map</k> object to maintain its non-overlapping subsets (the implementation is detailed):
interface IDisjointSet&lt;T> { 
find: (node: T) => T; 
union: (nodeA: T, nodeB: T) => void; 
}
class DisjointSet&lt;T> implements IDisjointSet&lt;T> { 
/** 
* A Map object is used to link each node to the 
* root of its corresponding connected component 
* subset (using a disjoint-set data structure).

*/ 
protected subsets = new Map&lt;T, T | number>();
addNode(node: T): void { 
if (!this.subsets.has(node)) { 
this.subsets.set(node, -1); 
} 
}
find(node: T): T { 
let root = node;
while (true) {
const parent = this.subsets.get(root) as T;
if (!this.subsets.has(parent)) {
if (node !== root) {
this.subsets.set(node, root);
}
return root;
}
root = parent;
}
}
union(nodeA: T, nodeB: T): void { 
const rootA = this.find(nodeA); 
const rootB = this.find(nodeB);
const sizeA = this.subsets.get(rootA) as number;
const sizeB = this.subsets.get(rootB) as number;
const sizeAB = sizeA + sizeB;
if (sizeA &lt; sizeB) {
this.subsets.set(rootB, rootA);
this.subsets.set(rootA, sizeAB);
} else {
this.subsets.set(rootA, rootB);
this.subsets.set(rootB, sizeAB);
}
}
isConnected(nodeA: T, nodeB: T): boolean { 
return this.find(nodeA) === this.find(nodeB); 
}
}
<h3 id="mapsVsSetstopic-19">Conclusion</h3>
Maps and sets in JavaScript can come in very handy for quite a number of applications and when trying to solve a number of problems efficiently — especially when efficient lookups are required.

In fact, they are specialized hash table implementations for JavaScript, akin to the <k>HashMap</k> and <k>HashSet</k> types in Java — albeit, with some subtle differences.
For safe garbage collection guarantees, consider using the even more restrictive <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" target="_blank" rel="noopener"><k>WeakMap</k></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet" target="_blank" rel="noopener"><k>WeakSet</k> keyed collections.</a>
<h3 id="mapsVsSetstopic-20"><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">LogRocket</a>: Debug JavaScript errors more easily by understanding the context</h3>
Debugging code is always a tedious task.

But the more you understand your errors the easier it is to fix them.
<a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">LogRocket</a> allows you to understand these errors in new and unique ways.

Our frontend monitoring solution tracks user engagement with your JavaScript frontends to give you the ability to find out exactly what the user did that led to an error.
LogRocket records console logs, page load times, stacktraces, slow network requests/responses with headers + bodies, browser metadata, and custom logs.

Understanding the impact of your JavaScript code will never be easier!
<h2>Introduction to Map Data Structure</h2>
https://flaviocopes.com/javascript-data-structures-map/
A <k>Map</k> is a collection of <k>key — value</k> pairs, similar to an object.

It stores the <k>key — value</k> pairs in the insertion order.
We can create a <k>Map</k> by passing an iterable object whose elements are in the form of <k>key — value</k> (Eg.

<k>[ [1,”one”], [2,”two”] ]</k> ), 
or you can create an empty <k>Map</k>, then insert entries.
<h3>Why we need Map if we have Object s</h3>
1.
A Map is similar to Object, but any value can be used as key in maps, but keys in objects are only Strings and Symbols
<img class="lazy" data-src="https://miro.medium.com/max/1400/1*FeRuZyr7PZpgWVrLJATQCg.png">
2.
The<k> key — value</k> pairs in <k>Map</k> maintains the insertion order, whereas Object don’t.
3.
You can get the <k>size</k> of the <k>Map</k>, but we don’t have a built-in method to get size in Object (but we can do it manually).
4.
Maps are iterable, whereas an Object is not iterable by-default.
5.
Maps have additional methods not available to normal objects
<h3>Methods in Maps</h3>
<img class="lazy" data-src="https://miro.medium.com/max/1400/1*9qa6KOy0EtF53Wypx48PSQ.png">
Map cheatsheet
Example:
Different Ways to create maps
<img class="lazy" data-src="https://miro.medium.com/max/1400/1*4lCYor7BuJW3_gfCsIaLGQ.png">
2.
Map methods
Let’s create simple Map:
// creating a map 
var fruits = new Map();
fruits.set('🍎', "Apple");
fruits.set('🍋', "Mango");
fruits; //{"🍎" => "Apple", "🍋" => "Mango"}
Map has a property <k>size</k> which returns the current Map size (total number of entries).
// size
fruits.size; // 2
<k>set(, value)</k> → Set the value for the key in the Map and returns the Map.

If the key is already present in the map, then the value is overwritten.
// set(key , value) method
fruits.set( '🍇', "Grapes");
fruits; // {"🍎" => "Apple", "🍋" => "Mango", "🍇" => "Grapes"}
<k>get()</k> → Returns the value associated to the key, or returns undefined if there is no key on the Map that matches the passed key.
// get(key)
fruits.get('🍇'); // GRAPES.
fruits.get('🍊'); //undefined.
<k>delete()</k> → Delete the entry matching the key and returns true.

If the key is not found in the map, then it returns false.
// delete(key)
fruits.delete('🍊') //false
fruits.delete('🍇'); // true
<k>has()</k> → Returns true if the map has the key provided, else return false.
//HAS(key)
fruits.has('🍇'); // true
fruits.has('🍊'); //false
<k>keys()</k> → Returns a new iterator that contains the keys in insertion order.
//keys
fruits.keys() // MapIterator {"🍎", "🍋"}
<k>values()</k> → Returns a new iterator that contains the values in insertion order.
// values
fruits.values() // MapIterator {"Apple", "Mango"}
<k>entries()</k> → Returns an iterator which has an array of [-value] pair in insertion order.
//entries --> returns key value pair
fruits.entries() // MapIterator {"🍎" => "Apple", "🍋" => "Mango"}
<k>clear()</k> → Delete all key-value pairs from the Map.
// clear
fruits.clear(); // deletes all elementfruits; // Map(0) {}
<h3>Things you should know about Map</h3>
You can use any value (object or function or primitive ) as a key in the <k>Map</k> .

<k>Map</k> uses the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Same-value-zero_equality" rel="noopener ugc nofollow" target="_blank">SameValueZero</a> algorithm.

It is similar to strict equality (<k>===</k>) but the difference is that <k>NaN</k> is considered equal to <k>NaN</k> (i.e, NaN === NaN → true.
In normal JS, this is not true.

In this case <k>NaN</k> can be used as key and we don’t have any duplicate NaN).
var map = new Map()var obj = {};
var arr = [];
var nan = NaN;
var fun = function() {}map.set(obj, "object");
map.set(arr , "array");
map.set(fun, "function");
map.set(nan, "Wrong number");
map.keys(); // MapIterator {{…}, Array(0), ƒ, NaN}map.values(); // MapIterator {"object", "array", "function","Wrong number"}
<h3>Iterating through Map</h3>
Using <k>for…of</k>
// creating a map 
var fruits = new Map();
fruits.set('🍎', "Apple");
fruits.set('🍋', "Mango");
fruits; //{"🍎" => "Apple", "🍋" => "Mango"}
Method 1:
for(var [key, val] of fruits) { console.log(key, value);}
🍎 Apple
🍋 Mango
Method 4 --> using entriesfor (var [key, val] of 
fruits.entries()) {  console.log(key , val); }
🍎 Apple
🍋 Mango
Method 2 --> using keys
for(var key of fruits.keys()) {
console.log(key, fruits.get(key)); }
🍎 Apple
🍋 Mango
Method 3 --> using valuesfor(var val of 
fruits.values()) {   console.log(val); }Apple Mango
<h2>Iterables</h2>
Iterable objects are objects that can be iterated over with <k>for..of</k>.
Technically, iterables must implement the <k>Symbol.iterator</k> method.
<h3>Iterating Over a String</h3>
You can use a <k>for..of</k> loop to iterate over the elements of a string:
for (const x of "W3Schools") {
// code block to be executed
}
<h3>Iterating Over an Array</h3>
You can use a <k>for..of</k> loop to iterate over the elements of an Array:
for (const x of [1,2,3,4,5] {
// code block to be executed
}
<h3>JavaScript Iterators</h3>
The <b>iterator protocol</b> defines how to produce a <b>sequence of values</b> from an object.

An object becomes an <b>iterator</b> when it implements a <k>next()</k> method.
The <k>next()</k> method must return an object with two properties:
value (the next value)
done (true or false)
value
The value returned by the iterator (Can be omitted if done is true)
done
<i>true</i> if the iterator has completed
<i>false</i> if the iterator has produced a new value
<h3>Home Made Iterable</h3>
This iterable returns never ending: 10,20,30,40,....
Everytime <k>next()</k> is called:
// Home Made Iterable
function myNumbers() {
let n = 0;
return {
next: function() {
n += 10;
return {value:n, done:false};
}
};
}
// Create Iterable
const n = myNumbers();
n.next(); // Returns 10
n.next(); // Returns 20
n.next(); // Returns 30
The problem with a home made iterable:
It does not support the JavaScript <k>for..of</k> statement.

A JavaScript iterable is an object that has a <b>Symbol.iterator</b>.
The <k>Symbol.iterator</k> is a function that returns a <k>next()</k> function.
An iterable can be iterated over with the code: <k>for (const x of iterable) { }</k>
// Create an Object
myNumbers = {};
// Make it Iterable
myNumbers[Symbol.iterator] = function() {
let n = 0;
done = false;
return {
next() {
n += 10;
if (n == 100) {done = true}
return {value:n, done:done};
}
};
}
Now you can use <k>for..of</k>
for (const num of myNumbers) {
// Any Code Here
}
The Symbol.iterator method is called automatically by <k>for..of</k>.
But we can also do it "manually":
let iterator = myNumbers[Symbol.iterator]();
while (true) {
const result = iterator.next();
if (result.done) break;
// Any Code Here
}
<h2>use this to return object content</h2>
<span onclick="alert($(this).text())">Think</span>
place it at end of file
$("k").click(function() { alert($(this).text()) });
<h2>DOM manipulation</h2>
&lt;body>
&lt;div>
&lt;span>Hello&lt;/span>
&lt;span style="display: none;">Bye&lt;/span>
&lt;/div>
&lt;/body>
const body = document.body
body.append("Hello world", "Bye")
const div = document.querySelector("div")
div.innerText = "Hello world"
div.innerHtml = "&lt;strong>Hello world&lt;/strong>"
body.append(div)
const spanHI = document.querySelector("#hi”)
const spanBye = document.querySelector("#bye”)
console.log(spanHi.getAttribute("title"))
console.log(spanHi.setAttribute("title", "sassssd"))
spanHi.id= "sassssd"
spanHi.title= "sassssd"
spanHi.removeAttribute("id")
console.log(spanHi.title)
console.log(spanHi.id)
spanBye.remove()
div.append(spanBye)
spanHi.dataset.longerName = "long"
spanHi.classList.toggle("long", true)
spanHi.style.color = "red"
spanHi.style.backgroundColor = "red"
<h2>load function after document loaded</h2>
&lt;body onkeypress="chkKey()" onload="docLoaded()">
function docLoaded() {
let script = document.createElement('script');
script.src = 'app.js';
document.body.appendChild(script);
}
app.js:
window.scrollTo(0,(document.body.scrollHeight));
$("k").click(function() { alert($(this).text()) });
<h2>Get values from the "GET" parameters</h2>
var url_string = location.href;
var url_string = "https://williamkpchan.github.io/LibDocs/Random%20Charts.html?okvalue=12&shatvalue=120"
paramsArray = url_string.split('?')  // use ? to seperate
paramsArray.shift()
let params = {};
for (let i = 0; i < paramsArray.length; ++i) {
let param = paramsArray[i].split('=', 2);
if (param.length !== 2) continue;
params[param[0]] = decodeURIComponent(param[1].replace(/\+/g, " "));
}
params
var url_string = location.href;
var url_string = "https://williamkpchan.github.io/LibDocs/Random%20Charts.html&okvalue=12"
paramsArray = url_string.split('?')  // note this has changed to array
paramsArray.shift()
if(paramsArray.length!=0){
param = paramsArray[0].split('=')[1]; // paramsArray is still array
} else{
initStkCode()
}
var url_string = location.href;
paramsArray = url_string.split('?')  // html?00981
paramsArray.shift()
if(paramsArray.length!=0){
thecode = paramsArray[0]; // paramsArray is still array
} else{
if (localStorage.getItem("randomcode") === null) {
localStorage.randomcode = "07500";
} else{
thecode = localStorage.getItem("randomcode");
}
}
<h2>JavaScript Redirect Methods</h2> 
You can redirect a web page via JavaScript using a number of methods.

We will quickly list them and conclude with the recommended one.
In JavaScript, <b>window.location</b> or simply <b>location</b> object is used to get information about the location of the current web page (document) and also to modify it.

The following is a list of possible ways that can be used as a <b>JavaScript redirect</b>:
// Sets the new location of the current window.
window.location = "https://www.example.com";
// Sets the new href (URL) for the current window.
window.location.href = "https://www.example.com";
// Assigns a new URL to the current window.
window.location.assign("https://www.example.com");
// Replaces the location of the current window with the new one.
window.location.replace("https://www.example.com");
// Sets the location of the current window itself.
self.location = "https://www.example.com";
// Sets the location of the topmost window of the current window.
top.location = "https://www.example.com";
Though the above lines of JS code accomplish a similar job in terms of redirection, they have slight differences in their usage.

For example, if you use <b>top.location</b> redirect within an iframe, it will force the main window to be redirected.

Another point to keep in mind is that <b>location.replace()</b> replaces the current document by moving it from the history, hence making it unavailable via the Back button of the browser.
It is better to know your alternatives but if you want a cross-browser compliant JavaScript redirect script, our recommendation will be to use the following in your projects:
window.location.href = "https://www.example.com";
Simply insert your target URL that you want to redirect to in the above code.

You can also check <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/location" target="_blank" rel="noopener noreferrer">this page</a> to read more about how window.location works.

Now, let&rsquo;s continue with our examples.
<h3>JavaScript Redirect: Redirect the Page on Page Load</h3> 
In order to redirect the user to another website immediately after your website is opened, you can use the following code at the top of your page, within the <b>&lt;head></b> element.

Or, if you are using a separate <b>.js</b> file, put the following code into that file and remember to link to it from the head of your page.
&lt;script>
window.location.href = "https://www.example.com";
&lt;/script>
Simply replace the example URL with the one you want to redirect to.

Note that, with this type of redirection, the visitors will not see your web page at all and be redirected to the target URL instantly.
<h3>JavaScript Redirect: Redirect the Page After a Certain Period</h3> 
In order to redirect the user to another website after a certain time passes, you can use the following code:
&lt;script>
setTimeout(function() {
window.location.href = "https://www.example.com";
}, 3000);
&lt;/script>
The above function will redirect the page 3 seconds after it fully loads.

You can change 3000 (3 x 1000 in milliseconds) as you wish.
<h3>JavaScript Redirect: Redirect the Page After an Event or User Action</h3> 
Sometimes, you may want to send the user to another page after a certain event or action takes place, such as a button click, an option selection, a layout change, a form submission, a file upload, an image drag, a countdown timer expiration or things like that.

In such cases, you can either use a condition check or assign an event to an element for performing the redirect.

You can use the following two examples to give you a basic idea:
&lt;script>
// Check if the condition is true and then redirect.
if ( ...

) {
window.location.href = "https://www.example.com";
}
&lt;/script>
The above code will do the redirection if the condition is true.
&lt;script>
// onclick event is assigned to the #button element.
document.getElementById("button").onclick = function() {
window.location.href = "https://www.example.com";
};
&lt;/script>
The above code will do the redirection when the user clicks the <b>#button</b> element.
This is how JavaScript redirect basically works.

We hope that the above examples will help you while handling your web page redirects.
<h2>on "swiperight"</h2>
&lt;script src="https://code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js">&lt;/script>
$( "div.box" ).on( "swiperight", handleRight );
$( "div.box" ).on( "swipeleft", handleLeft );
function handleRight( event ){ $(".box").append(" right") }
function handleLeft( event ){ $(".box").append(" left") }
$( "div.box" ).bind( "tap", tapHandler );
function tapHandler( event ){
$( event.target ).addClass( "tap" );
}
$( "div.box" ).bind( "taphold", tapholdHandler );
function tapholdHandler( event ){
$( event.target ).addClass( "taphold" );
}
$( "div.box" ).on( "swipe", swipeHandler );
function swipeHandler( event ){
$( event.target ).addClass( "swipe" );
}

<h2>javascript fetch a file</h2>
fetch(urladdr)
.then(x => x.text())

.then(function(response) {
  alert(response);
})

// Note Fetch is based on async and await, use async

theurl = 'https://web.ifzq.gtimg.cn/appstock/app/usfqkline/get?_var=kline_dayqfq&param=' + '00700' + ',day,,,5,qfq';

getText(theurl);

async function getText(urladdr) {
  let x = await fetch(urladdr);
  let y = await x.text();
  document.getElementById("test").innerHTML = y;
}

<h2>给fetch添加功能</h2>
<h3>简易版本</h3>
代码
function createRequestWithTimeout(timeout = 3000) {
    return function (url, options) {
        return new Promise((resolve, reject) => {
            const timeoutId = setTimeout(() => {
              reject(new Error("Request timeout"));
            }, timeout);

            fetch(url, options)
              .then((response) => {
                clearTimeout(timeoutId);
                return response.json();
            })
            .then((response) => {
              clearTimeout(timeoutId);
              return resolve(response);
            })
            .catch((error) => {
              clearTimeout(timeoutId);
              reject(error);
            });
        });
    };
}

const request = createRequestWithTimeout();
function handle() {
  request("api/abc/abc", { method: "GET" })
    .then((res) => {
      console.log(res);
    })
    .catch((error) => {
      console.log(error);
    });
}

解析
定义一个名为createRequestWithTimeout的函数，它返回一个新的函数，这个返回的函数用于发起一个带有超时机制的HTTP请求。

1、createRequestWithTimeout函数接收一个可选参数timeout，默认值为3000毫秒(3秒)。

参数控制请求的超时时间。

2、返回的函数接收两个参数，url(请求的URL)和options(请求的选项，如请求方法、头部等)。

个函数返回一个Promise对象。

3、在返回的函数内部，首先使用setTimeout创建一个定时器，这个定时器会在timeout毫秒后触发。

如果在timeout时间内请求没有完成，定时器会调用reject方法，传递一个错误对象，错误信息为"Request timeout"。

4、使用fetch函数发起HTTP请求。

fetch函数接收url和options参数。

5、fetch返回的Promise被then方法处理。

第一个then处理响应的body，将其转换为JSON格式。

如果转换成功，它会调用resolve方法，传递解析后的数据。

6、如果在转换响应体为JSON时发生错误，或者在fetch请求过程中发生错误，catch方法会被调用，它会调用reject方法，传递错误信息。

7、在每个then和catch处理器中，都会调用clearTimeout来清除之前设置的超时定时器。

这样做是为了确保在请求成功完成或失败时，不会触发超时错误。

8、handle函数调用request函数发起请求，并处理成功和失败的情况。

成功时，它会打印响应数据；失败时，它会打印错误信息。

函数的目的是确保HTTP请求不会无限期地挂起，如果请求在指定的时间内没有完成，就会被中止，并且会通知调用者请求超时。

这在处理可能需要较长时间的网络请求时非常有用，可以避免用户界面冻结或资源浪费。

</blockquote>

<h3>升级版本</h3>
代码
function createRequestWithTimeout(timeout = 3000) {
  return function (url, options) {
    return new Promise((resolve, reject) => {
      const abort = new AbortController();

      options = options || {};
      if (options.signal)
        options.signal.addEventListener("abort", () => {
          abort.abort();
        });
      options.signal = abort.signal;

      setTimeout(() => {
        reject(new Error("Request timeout"));
        abort.abort();
      }, timeout);

      fetch(url, options)
        .then((response) => {
          return response.json();
        })
        .then((data) => {
          return resolve(data);
        })
        .catch((error) => {
          reject(error);
        });
    });
  };
}

const request = createRequestWithTimeout();
function handle() {
  request("api/abc/abc", { method: "GET" })
    .then((res) => {
      console.log(res);
    })
    .catch((error) => {
      console.log(error);
    });
}

解析
定义一个名为createRequestWithTimeout的函数，它返回一个异步函数，该函数可以发起一个带有超时机制的HTTP请求。

1、createRequestWithTimeout函数接受一个可选参数timeout，默认值为3000毫秒(3秒)。

参数定义请求的超时时间。

2、createRequestWithTimeout返回一个函数，该函数接受两个参数，url(请求的URL)和options(请求的选项，如请求方法、头部等)。

这个返回的函数返回一个Promise对象。

3、在返回的函数内部，首先创建一个AbortController实例abort。

AbortController是一个用于控制一个或多个Web请求的接口，它允许取消这些请求。

4、options参数被检查，如果它已经包含一个signal属性(即一个AbortSignal对象)，则为该信号添加一个事件监听器。

这个监听器会在signal被中止时调用abort.abort()，从而中止fetch请求。

5、options的signal属性被设置为abort实例的signal属性，这样就可以在超时发生时通过abort.abort()来中止请求。

6、使用setTimeout设置一个定时器，如果在timeout毫秒后请求还没有完成，setTimeout的回调函数会被调用，它会拒绝Promise并中止请求。

7、使用fetch函数发起HTTP请求。

fetch函数接受url和options参数。

8、fetch返回的Promise被then方法处理。

第一个then处理响应的body，将其转换为JSON格式。

如果转换成功，它会调用resolve方法，传递解析后的数据。

9、如果在转换响应体为JSON时发生错误，或者在fetch请求过程中发生错误，catch方法会被调用，它会调用reject方法，传递错误信息。

10、handle函数调用request函数发起请求，并处理成功和失败的情况。

成功时，它会打印响应数据；失败时，它会打印错误信息。

createRequestWithTimeout函数的目的是确保HTTP请求不会无限期地挂起。

如果请求在指定的时间内没有完成，它会被中止，并且会通知调用者请求超时。

这对于防止长时间挂起的请求导致的性能问题非常有用。

<h2>Hacking HTTP CORS</h2>
https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS
<div id="CORStoc" class="toc"><a href="#CORStopic-0" target="_self">Same Origin Policy (SOP)</a><br><a href="#CORStopic-1" target="_self">SOP variations</a><br><a href="#CORStopic-2" target="_self">HTTP CORS Fundamentals</a><br><a href="#CORStopic-3" target="_self">Simple Request</a><br><a href="#CORStopic-4" target="_self">Preflight HTTP Request</a><br><a href="#CORStopic-5" target="_self">CORS basic headers</a><br><a href="#CORStopic-6" target="_self">Allowing too much is not cool at all</a><br><a href="#CORStopic-7" target="_self">The Docker-based proposed scenario</a><br><a href="#CORStopic-8" target="_self">Project structure</a><br><a href="#CORStopic-9" target="_self">Docker images and network settings overview</a><br><a href="#CORStopic-10" target="_self">A glance at the Apache Server CORS rules</a><br><a href="#CORStopic-11" target="_self">Running the containerized environment</a><br><a href="#CORStopic-12" target="_self">Trusted Site</a><br><a href="#CORStopic-13" target="_self">Evil Site</a><br><a href="#CORStopic-14" target="_self">Playing with CORS rules using XHR and Fetch requests</a><br><a href="#CORStopic-15" target="_self">CORS rules for XHR requests</a><br><a href="#CORStopic-16" target="_self">CORS rules for Fetch requests</a><br><a href="#CORStopic-17" target="_self">Understanding the requests cycle in practice</a><br><a href="#CORStopic-18" target="_self">Bypassing CORS through proxy interception (Manual)</a><br><a href="#CORStopic-19" target="_self">Setting up your snoopy proxy tool</a><br><a href="#CORStopic-20" target="_self">Bypassing CORS by HTTP Response tampering</a><br><a href="#CORStopic-21" target="_self">Hacking homework</a><br><a href="#CORStopic-22" target="_self">Tips for bypassing the Alert script + JavaScript FETCH</a><br><a href="#CORStopic-23" target="_self">Automatic bypassing and other CORS interesting projects</a><br><a href="#CORStopic-24" target="_self">Concluding remarks</a><br></div></center>
https://infosecwriteups.com/hacking-http-cors-from-inside-out-512cb125c528
<h3 id="CORStopic-0">Same Origin Policy (SOP)</h3>
Before we get to the CORS matter, it is essential to comprehend an underlying concept of web resources access protection.

I’m talking about the <b>Same Origin Policy</b>, also known for the acronym SOP.
As to avoid unauthorized use of resources by external parties, the browsers count on an origin-based restriction policy.

Formally, the said external parties are identified by their origin (domain) and accessed through URLs.
A document held by a given <b>origin A</b> will only be accessible by other documents from the SAME <b>origin A</b>.

This rule is valid if the SOP is effectively in place (and depends on the browser implementation).

This policy aims to reduce the chances of a possible attack vector.
But let’s depict what an origin looks like.

One origin could be understood as the tuple:
<b>&lt;schema (or protocol)></b> — <b>&lt;hostname></b> — <b>&lt;port></b>
So two URLs represent the same origin only if they share the same tuple.

Examples of origin variations and categories for the URL `<b>http://hacking.cors.com/mr_robots.txt</b>`:
<img class="lazy" data-src="https://miro.medium.com/max/1312/1*zj6HKCKg3YRlF8k7vvnA9g.png">
Domain types differentiation
Additionally, keep in mind that the SOP allows inter-origin HTTP requests with GET and POST methods.

But it forbids inter-origin PUT and DELETE.

Besides that, sending custom HTTP headers is permitted only in the context of inter-origin requests, being denied to foreigners.
<h3 id="CORStopic-1">SOP variations</h3>
There are some different types of Same Origin Policy.

In practice, they are applied under particular rules given the technology in place.
The primary SOP policy developed was towards the <b>DOM (Document Object Model) access</b>.

It is a mechanism that handles JavaScript and other scripting languages’ ability to access DOM properties and methods across domains.
The <b>DOM access</b> is based mainly on the `document.domain` <b>DOM</b>’s property state.

But the same is not valid for the <b>JavaScript’s XMLHttpRequest API,</b> which does not take `document.domain` property into account.

For now, don’t worry too much about these details.

We should be back to this subject soon.
So if we take SOP as a sandboxing concept, it becomes reasonable to have the same origin implementations for other web technologies as well.

It is the case of <b>cookies, Java, old-R.I.P Flash</b>, and their respective SOP policy feature.
<h3 id="CORStopic-2">HTTP CORS Fundamentals</h3>
The SOP technology was certainly a considerable jump towards more secure web applications.

But it applies the deny rule by default.
The true nature of the World Wide Web is that pages could communicate with other resources all across the network.

Web applications are meant to access external resources.
So how do we relax the same-origin rules while maintaining the security access of restricted resources? You got it: <b>CORS</b>.
In simple terms, <b>Cross-Origin Resource Sharing</b> allows the pages from a specific domain/origin to consume the resources from another domain/origin.

The consent of who can access a resource is the resource’s owner (server) responsibility.
The browser-server trust relationship takes form through a family of CORS HTTP Headers.

In the average case, they are added to the HTTP requests and responses by the resource’s web server (like Nginx, Apache, IIS, etc.), by the application, or the browser.

The CORS headers then instruct the soliciting browser whether or not to trust the origin and proceed with the response processing.
Let’s take a breath here.

Note that the browser fully trusts the response returned from the server.

Keep this in mind.
<h3 id="CORStopic-3">Simple Request</h3>
In contrast to Preflight requests, there are simple ones.

<b>Simple requests </b>are those who respect the following conditions:
<img class="lazy" data-src="https://miro.medium.com/max/1312/1*9EzxYcrn8c9ZiHEfPjWNSQ.png">
Simple requests composition
When making asynchronous HTTP requests, we often use the already presented <b>XMLHttpRequest</b> or the new <b>Fetch</b> JavaScript APIs.
<h3 id="CORStopic-4">Preflight HTTP Request</h3>
Sometimes a <b>preflight HTTP request</b> is launched by the browser.

It intents to query the server about what CORS attributes are authorized and supported by it.

However, this does not change the trustiness relationship between server and browser.
The preflight HTTP request (which takes the form of an <b>HTTP OPTIONS request</b>) results in an equally trusted HTTP response.

The only difference resides in the headers, that indicate the browser how to proceed to get the intended cross-origin resource.
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*9CZmsSo4w5VBzBFt">
Pre-request flight flow for deletion of <b>avatar.org</b>
As we move to the hands-on sections of this article, this will get more palatable.
<h3 id="CORStopic-5">CORS basic headers</h3>
Achieving origin control by the CORS involves the following headers’ family:
<img class="lazy" data-src="https://miro.medium.com/max/1256/1*tgLKBLQ6XAtcLIFREtZmZw.png">
CORS headers family and their respective HTTP type
The headers marked with <b>YES</b> at the “<b>Used for Preflight HTTP </b>” column play crucial preflight functions.
It goes from denoting which specific headers (<b>Access-Control-Allow-Headers</b>) and HTTP methods (<b>Access-Control-Allow-Methods</b>) are allowed, the maximum amount of seconds the browser should cache the Preflight request (<b>Access-Control-Max-Age</b>), request source (<b>Origin</b>), to the allowance (<b>Access-Control-Allow-Credentials</b>) of cookies to be sent by browsers in the actual request.
In the overall context, the <b>Access-Control-Allow-Origin (ACAO) </b>stands as the most relevant header regarding cross-origin authorization.

Through this header, the server is able to tell the browser which domains it should trust.
This great power comes with significant responsibilities, though.
<h3 id="CORStopic-6">Allowing too much is not cool at all</h3>
It is clear to us that CORS is a useful way to extend SOP policies.

However, we should take into account the impact of a full nonrestrictive rule.

Let’s take the following statement:
<b>Access-Control-Allow-Origin: *</b>
The above header means that every origin could access the desired resource.

This would be equivalent to the earlier configuration of older browsers before SOP was in place.

But be aware of the other side of the story, as cautiously depicted by the application security literature.
<blockquote>
“Obviously there might be cases where a wildcard value for the Access-Control-Allow-Origin <b>isn’t insecure</b>.

For instance, if a permissive policy is only used to provide content that <b>doesn’t contain</b> sensitive information.”
The Browser Hacker’s Handbook 2nd Ed.

— Chapter 4 Bypassing the Same Origin Policy
</blockquote>
You should be careful with the wildcards, though.

Indeed, the recommended approach is make the access permission explicit for the authorized origins.

If the server does not provide the CORS headers whatsoever, the browsers will assume the <b>Same Origin Policy (SOP)</b> posture.
<h3 id="CORStopic-7">The Docker-based proposed scenario</h3>
First, lets clone the `<b>hacking-cors</b>` repository so we can get this party started!
$ git clone git@github.com:lvrosa/hacking-cors.git
<img class="lazy" data-src="https://miro.medium.com/max/1370/0*KvTctQkLweLQfYTj">
Tree directory representation of the hacking-cors docker project
The above structure breaks down the docker containers and files that compose the server images.
The `<b>node_modules</b>` directory (omitted from the `<b>tree</b>` command output above) is pushed to the `<b>hacking-cors</b>` repository as well.

It has a short size.

However, if you have any problems regarding JavaScript dependencies, please run the `npm` tool at the project root directory.
$ cd hacking-cors; npm install
It is also crucial to have `<b>docker</b>` and ` installed on your system.

The docker-compose file uses version 3 format.

My current versions for both dependencies are:
<img class="lazy" data-src="https://miro.medium.com/max/1006/0*Qvcgo-fa95YjVp_G">
Docker and Docker Compose versions
<h3 id="CORStopic-8">Project structure</h3>
We have two distinct docker projects.

They are represented by their respective configuration <b>Dockerfile</b> at the root directory.
<img class="lazy" data-src="https://miro.medium.com/max/1158/1*rhLfU0SXzYidnD81P_7MaQ.png">
Docker files respective to each web server
Interesting files are at the `<b>static`</b> and `<b>img`</b> directories.

They hold the resources that will eventually be solicited by other web pages.

JavaScript files are under the `<b>static`</b> directory.

You can open them in your favorite code editor and play around.
The `<b>img`</b> directory from the <b>Trusted Site</b> stores the `<b>owasp_bug.png`</b> resource.

In our experiment, this image resource will be requested by the <b>Evil Site,</b> which will then try to load it.

The same applies to the `<b>static/hello_script.js` </b>file, but to execute/evaluate the script content, and not load an image.
<h3 id="CORStopic-9">Docker images and network settings overview</h3>
<img class="lazy" data-src="https://miro.medium.com/max/1214/0*UsBn9vTzlncv6ZI9">
docker-compose.yml content
Take a look at the `<b>docker-compose.yml`</b> file above.

We can identify important things about the environment like:
We’ll create two containers (namely `<b>evil_site`</b> and `<b>trusted_site`</b>)
The containers are attached to the `<b>cors_hack_net</b>` bridged network interface
The `<b>cors_hack_net</b>` interface determines the subnet by the <b>CIDR 10.5.0.0/16</b>
As a useful link to the containers’ network addresses, I’d recommend setting your static lookup table for hostnames file (`<b>/etc/hosts</b>`) to the following settings:
<img class="lazy" data-src="https://miro.medium.com/max/1176/0*Rojj1rJ_tasNTWqg">
/etc/hosts file mapping
<h3 id="CORStopic-10">A glance at the Apache Server CORS rules</h3>
★ Identify the <b>Trusted Site</b> container’s name:
<img class="lazy" data-src="https://miro.medium.com/max/1228/0*8H637WHubCaU4JBs">
docker-compose ps output
★ Log into the container:
$ docker exec -it <b>trusted_site</b> /bin/bash
★ Dump the Apache `.<b>htaccess`</b> configuration file to the screen:
<img class="lazy" data-src="https://miro.medium.com/max/1192/0*MPIsycKL6vIaYlO9">
.htaccess Apache CORS extension rules
As highlighted in the picture above, the Apache Web Server will serve the <b>ACAO (Access-Control-Allow-Origin)</b> header when the file-matching rule applies.

In other words, if the web browser requests an image (<b>.gif, .png, .ico</b>, etc.) or even a JavaScript <b>.js</b> file, the resource’s content will only be authorized to be loaded/consumed by the page if the origin matches `<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>`.
Note that the `<b>.htaccess</b>` file is sourced at `<b>htdocs</b>` directory, thus impacting all the files under its substructure.
<h3 id="CORStopic-11">Running the containerized environment</h3>
To get these environment live, follow the steps:
★ Build the container from the root project directory
$ docker-compose build — no-cache; (note the double minus before the no-cache argument)
★ Up the containers through `docker-compose`
$ docker-compose up
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*UQgjrrZ2_-DdLbxj">
docker-compose up output
If you run into any trouble with the docker environment, I suggest you clean it by killing and removing the current active docker images.

Just ensure you don’t have other containers that should have their state saved before being killed.
$ docker kill $(docker ps -a -q)
$ docker rm $(docker ps -a -q)
Well, I hope everything has been ok so far.

Let’s take a look at the two created web servers.

Open your browser and drive to the `<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>` and `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>`.
<h3 id="CORStopic-12">Trusted Site</h3>
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*6YbCYaPb7so6iutE">
Trusted Site Web Server menu
<h3 id="CORStopic-13">Evil Site</h3>
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*omcGP-PUR8J2tPZz">
Evil Site Web Server Menu
<h3 id="CORStopic-14">Playing with CORS rules using XHR and Fetch requests</h3>
<h3 id="CORStopic-15">CORS rules for XHR requests</h3>
The <b>XMLHttpRequest Standard</b><a href="https://xhr.spec.whatwg.org/" rel="noopener ugc nofollow" target="_blank">[11]</a> defines an API that provides scripted client functionality for transferring data between a <b>client</b> and a <b>server</b>.
Regarding its security aspects, we should be aware of some warning facts, as stated by the <b>Browser Security Handbook, part2</b><a href="https://code.google.com/archive/p/browsersec/wikis/Part2.wiki" rel="noopener ugc nofollow" target="_blank">[12]</a>.
<blockquote>
“The set of security-relevant features provided by XMLHttpRequest, and not seen in other browser mechanisms, is as follows:
</blockquote>
The ability to specify an arbitrary HTTP request method (via the <b>open()</b> method),
The ability to set custom HTTP headers on a request (via <b>setRequestHeader()</b>),
The ability to read back full response headers (via <b>getResponseHeader()</b> and <b>getAllResponseHeaders()</b>),
<blockquote>
The ability to read back the full response body as a JavaScript string (via <b>responseText</b> property).
Since all requests sent via XMLHttpRequest include a browser-maintained set of cookies for the target site and given that the mechanism provides a far greater ability to interact with server-side components than any other feature available to scripts, <b>it is extremely important to build in proper security controls.”</b>
</blockquote>
It’s essential to observe the following browser protections against origin tampering upon handling XHR requests.
When trying to <b>change/poison</b> the `<b>origin</b>` header via <b>setRequestHeader(), the original header is preserved.</b>
When trying to <b>change/poison </b>the additional headers (passed as arguments to the <b>xhr.send()</b>), <b>the original header is preserved.</b>
<h3 id="CORStopic-16">CORS rules for Fetch requests</h3>
<blockquote>
“Numerous APIs provide the ability to fetch a resource, e.g.

<b>HTML’s img</b> and <b>script</b> <b>element</b>, <b>CSS’ cursor</b> and <b>list-style-image</b>, the <b>navigator.sendBeacon()</b> and <b>self.importScripts()</b> JavaScript APIs.

<b>The Fetch Standard</b> provides a unified architecture for these features so they are all consistent when it comes to various aspects of fetching, such as redirects and the <b>CORS</b> protocol.” — <a href="https://fetch.spec.whatwg.org/" rel="noopener ugc nofollow" target="_blank">https://fetch.spec.whatwg.org/</a>
</blockquote>
Although The Fetch Standard supersedes the `origin` element semantics (originally defined in <b>The Web Origin Concept</b> — RFC6454), the same effect of the XHR tampering protections applies here.
When trying to <b>change/poison</b> the `<b>origin</b>` header via <b>fetch()</b> arguments, <b>the original header is preserved.</b>
<h3 id="CORStopic-17">Understanding the requests cycle in practice</h3>
Now that you already know the fundamentals of <b>SOP, CORS, XHR</b> and <b>Fetch</b> requests, we’re ready to play with the proposed scenario.
Both <b>Trusted Site</b> and <b>Evil Site</b> pages have similar menus.

Firstly, try the four requests options of the <b>Trusted Site</b>.
Note that the requested resources, the <b>OWASP bug image</b> or the script that displays “<b>All your base belong to us ;D</b>”, are successfully loaded and consumed by the page.

This is a classical case of local resources invoked by one page belonging to the same domain.
<img class="lazy" data-src="https://miro.medium.com/max/846/0*Nx9KI78YER8jrhVc">
The hello_script.js’ content executed after one same domain page request
Now, let’s change the scope to the <b>Evil Site</b>.
Open the `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>` website
Bring up the <b>Web Developer Tools</b> window (press <b>F12</b> in Firefox or Chrome)
Click the anchor link associated with the <b>OWASP image + JavaScript XHR</b>
Click the anchor link associated with the <b>Alert script + JavaScript Fetch</b>
Get your focus on the Console tab from <b>Web Developer Tools</b>.

We should be looking at something like the screen below.
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*YJNGyvmi1zq2s2pf">
The third and fourth steps generate the messages from the screen above.

They are transcripted below for accessibility purposes.
<blockquote>
<b>Cross-Origin Request Blocked</b>: The Same Origin Policy disallows reading the remote resource at <a href="http://trustedsite.com/img/owasp_bug.png." rel="noopener ugc nofollow" target="_blank"><b>http://trustedsite.com/img/owasp_bug.png</b>.</a> (Reason: CORS header ‘Access-Control-Allow-Origin’ does not match ‘<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>’).
<b>Cross-Origin Request Blocked</b>: The Same Origin Policy disallows reading the remote resource at <a href="http://trustedsite.com/static/hello_script.js." rel="noopener ugc nofollow" target="_blank"><b>http://trustedsite.com/static/hello_script.js</b>.</a> (Reason: CORS header ‘Access-Control-Allow-Origin’ does not match ‘<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>’).
</blockquote>
From here, it’s possible to understand why the browser has prohibited the requested resource.

Remember the <b>Apache Server .htaccess </b>configuration, which adds the <b>ACAO (Access-Control-Allow-Origin) </b>CORS header to specific HTTP responses (image files and <b>.js</b> scripts).
Now, we are going to investigate the requests in more detail.

Click the <b>Network</b> tab from the <b>Web Developer Tools</b>.

Then, select the <b>OPTIONS</b> request for the `<b>hello_script.js</b>` resource.

On the right side of the screen, you should see the following HTTP request and response.
<img class="lazy" data-src="https://miro.medium.com/max/1002/0*UAvaat5BKGYeiEdZ">
OPTIONS HTTP request and response for hello_script.js resource
Take note of the `<b>Origin</b>` header from above.

It reads `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>`.

But if we dive into the `<b>script_fetch.js</b>` implementation of the <b>Evil Site</b>, something stands out about the `<b>Origin</b>` header.
<img class="lazy" data-src="https://miro.medium.com/max/1096/0*MPPcUg2plhAvpW6Q">
`<b>evil_site_public_html/static/script_fetch.js</b>` content
Although we try to overlap the `<b>Origin</b>` header (line 7) with the authorized address of <b>Trusted Site</b>‘s domain — `<a href="http://trustedite.com" rel="noopener ugc nofollow" target="_blank">http://trustedite.com</a>`, the Fetch API implemented by the browser prevents this from taking effect.
That’s why we see `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>` as `<b>Origin</b>` in the <b>Web Developer Tools’ Network</b> tab — HTTP OPTIONS request.
<h3 id="CORStopic-18">Bypassing CORS through proxy interception (Manual)</h3>
It’s been a long road so far.

So if you made it here, it’s time to put some salt in the soup.
The main principle behind the <b>CORS</b> (and policies like CSP — Content Security Policy) is the trust-based relationship between browser and web server.

The web server instructs the web browser about which domains it can further trust.

In practice, the HTTP security headers set this instruction.
Now, let’s think from a malicious perspective.

To bypass the <b>CORS</b> rules, the attacker has to <b>intercept</b> the <b>server’s HTTP response</b>, which contains the <b>CORS ACAO (Access-Control-Allow-Origin</b>)<b> </b>header.

Secondly<b>,</b> he/she changes its value to reflect the attacker’s page origin or to allow arbitrary domains (using the character *).
When it’s said <b>“to intercept”</b>, it can be a proxy server filtering the HTTP request-response cycle automatically (see the next section for more on this).

Or a manual approach through a proxy tool like <b>Burp Suite</b>, as we will do right after.
<h3 id="CORStopic-19">Setting up your snoopy proxy tool</h3>
If you are already familiarized with proxy tools like ZAP, Burp Suite, feel free to move to the next section.

Here we are going to use <b>Burp Suite Community</b><a href="https://portswigger.net/burp/releases/professional-community-2020-9-2" rel="noopener ugc nofollow" target="_blank">[14]</a> from PortSwagger.
Install the Burp Suite according to your platform/architecture and run it.
★ At the <b>Options</b> tab, edit the <b>Interface</b> column at the <b>Proxy Listeners</b> settings as below (“<b>127.0.0.1:10001</b>”):
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*gMvDXNllGvHTeHYV">
★ At the same tab, set the <b>Intercept Client Requests </b>settings as following:
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*f65nMVYn6AKZRCrs">
★ Still at the <b>Options</b> tab, set the <b>Intercept Server Responses</b> settings as following:
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*tOizoXyNERD00u71">
★ Ensure that the “<b>Intercept is on</b>” button from <b>Intercept</b> tab is <b>active</b>
<img class="lazy" data-src="https://miro.medium.com/max/1350/0*9tMMwXZcQiaSzRsc">
Finally, on your browser, you will configure it to pass the requests through our proxy.

Note that the proxy is listening on <b>port 10001.</b> Here we have two configuration options.

I usually set my proxies using the <b>FoxyProxy</b> extension<a href="https://getfoxyproxy.org/" rel="noopener ugc nofollow" target="_blank">[15]</a>.

But you can do it manually by the Network Settings<a href="https://support.mozilla.org/en-US/kb/connection-settings-firefox" rel="noopener ugc nofollow" target="_blank">[16]</a> from your browser.
<img class="lazy" data-src="https://miro.medium.com/max/1342/0*yCgRPt-GUjK2oY7s">
My Firefox’s FoxyProxy burp proxy settings
Ok, that’s all.

We’re ready to go.
<h3 id="CORStopic-20">Bypassing CORS by HTTP Response tampering</h3>
★ Open the <b>Evil Site </b>(`<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank"><b>http://evilsite.com</b></a>`)
As previously observed, resources from the <b>Trusted Site</b> requested by the <b>Evil Site</b> are not authorized to be consumed by the corresponding page.

It results from the fact that the <b>CORS ACAO (Access-Control-Allow-Origin)</b> header only allows the `<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>` domain.
★ <b>Activate</b> your Burp proxy at your browser
<img class="lazy" data-src="https://miro.medium.com/max/744/0*HBblbnNI6wUEjhGf">
★ Click/request <b>OWASP image</b> resource <b>via XHR Request</b>
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*gd5GoLrrMeywtMx4">
Stop and look to the <b>Burp Suite dialog</b> respective to the <b>HTTP Request</b>
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*NUOGhcOm1C4skenP">
★ Proceed with the request without further edition by clicking in “<b>Forward</b>”
★ Stop at the <b>HTTP Response</b> which contains the <b>CORS headers</b>
<img class="lazy" data-src="https://miro.medium.com/max/1332/0*scTInJZfSpPJEVwI">
★ Edit the <b>CORS ACAO</b> header value to `<b>*</b>`
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*yiNlr2h7rj3t3cvv">
★ <b>Submit</b> the response to the browser by clicking in “<b>Forward</b>”
★ The protected resource (OWASP bug image) content is <b>displayed (</b>note the absence of the CORS error message):
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*qRpaKs3zVTyO6riS">
<h3 id="CORStopic-21">Hacking homework</h3>
In the earlier scenario, we intercepted and tampered with one JavaScript XHR request via Burp proxy.

One important aspect of this outside the box approach is to analyze the HTTP request-response cycle thoroughly.

Which headers are demanded and what error messages you got at your browser console when they are missing or misconfigured.
Now it’s time to let you apply by yourself the knowledge exposed ‘till here.

The next section will also present some hints about the CORS bypassing for the <b>Alert script + JavaScript FETCH </b>combination.
Since the sky’s the limit, feel free to try the bypassing against the remaining options from the <b>Evil Site</b> menu.
<h3 id="CORStopic-22">Tips for bypassing the Alert script + JavaScript FETCH</h3>
Besides changing the <b>Access-Control-Allow-Origin</b> header, you will also have to add the <b>Access-Control-Allow-Headers</b> in the HTTP OPTIONS request (use the Add button from the Burp request edit dialog).
This is necessary because the client (the <b>.js</b> script which launches the XHR request) adds the headers `<b>cache-control</b>` and `<b>pragma</b>` in the subsequent GET request by default.

So you will want to reflect this in the <b>HTTP OPTIONS response</b>.
Remember, here we have a <b>HTTP Preflight</b> scenario (review the Preflight HTTP Request section when in doubts), where a HTTP OPTIONS request precedes the actual resource retrieval request.
<img class="lazy" data-src="https://miro.medium.com/max/1222/0*_gLYQy-CrptUnEux">
<b>HTTP Options response</b> edited to reflect the CORS headers for bypassing
<img class="lazy" data-src="https://miro.medium.com/max/1200/0*V-URxmvjcoT-HQBi">
<b>HTTP GET response</b> from <b>`hello_script.js</b>` resource retrieval (note the ACAO CORS header)
<img class="lazy" data-src="https://miro.medium.com/max/1400/0*VJVL1dpVj1CWKwtC">
<b>Successful</b> CORS hacking get us the nice dialog above
<h3 id="CORStopic-23">Automatic bypassing and other CORS interesting projects</h3>
In the previous section, we saw how to bypass the CORS rules protection manually.

However, this is not very efficient from a practical standpoint.
One feasible way to automate the bypassing process is by deploying a proxy server like <b>CORS Anywhere</b> API.

The proxy server will act as an intermediary, filtering the request and response headers to reflect the allow and deny rules specified at proxy configuration time.
Please, refer to the project’s Github page<a href="https://github.com/Rob--W/cors-anywhere" rel="noopener ugc nofollow" target="_blank">[18]</a> for more details and precautions when setting a proxy facing the web (be careful with open proxies, friend).

You can test the live API here<a href="https://robwu.nl/cors-anywhere.html" rel="noopener ugc nofollow" target="_blank">[19]</a>.
<h3 id="CORStopic-24">Concluding remarks</h3>
If you’ve got this far, congratulations.

HTTP Headers by itself is a very vast CORStopic, as the protocol tries to evolve to get close to web applications reality.

This reality becomes more and more pervasive, especially with the popularization of APIs through technologies like REST.
The set of CORS headers are intricate and full of nuances.

When implementing a solution that deals with inter-domain communication, pay attention to the common pitfalls that can arise.

The final message about CORS and its weaknesses is that the trust between browser and application should be explicitly guaranteed by secure configurations.

The right choice for which AJAX method and CORS headers to deploy will positively impact your APIs’ overall security.
Remember our four proposed resource consumption scenarios.

They are simple.

Indeed, there are other options and combinations for resource sharing.

But maybe (and I hope we got there) the theory and practice exposed here can be taken as a foundation to design more complex and secure by-default web applications.
<h2><pk>crossorigin="anonymous"</pk></h2>
script src="https://stackoverflow.com/foo.js" <pk>crossorigin="anonymous"</pk>
The "anonymous" keyword means that there will be no exchange of user credentials via cookies, client-side SSL certificates or HTTP authentication
example:
&lt;link <pk>crossorigin="anonymous"</pk> media="all" integrity="sha512-iwdBeEEuDZbd2aAEzZti+bkBYQ2UKC6VEAhVMLKq5cCJnyeWVpgVqtgd3scKeZ63wYQTUQegRZwFGKlWOyr5Ew==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-8b074178412e0d96ddd9a004cd9b62f9.css" />
&lt;script <pk>crossorigin="anonymous"</pk> defer="defer" integrity="sha512-CzeY4A6TiG4fGZSWZU8FxmzFFmcQFoPpArF0hkH0/J/S7UL4eed/LKEXMQXfTwiG5yEJBI+9BdKG8KQJNbhcIQ==" type="application/javascript" src="https://github.githubassets.com/assets/environment-0b3798e0.js">&lt;/script>
<h2>array techinque</h2>
months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
<h2>GlobalTimezone</h2>
"US": -13:00 美国
"CA": -13:00 加拿大
"UK": -08:00 英国
"DE": -07:00 德国
"FR": -07:00 法国
"IT": -07:00 意大利
"PT": -08:00 葡萄牙
"ES": -07:00 西班牙
"CH": -07:00 瑞士
"AU": +03:00 澳大利亚
"NZ": +05:00 新西兰
"CN": +00:00 北京时间
"JP": +01:00"};//东京时间
function getGlobalTimezone(__stringArea) {
	return __stringArea in GlobalTimezone ? GlobalTimezone[__stringArea].replace(":", .") * 1 : 0;
}
<h2>Guide To Server-Sent Events</h2>
https://www.html5rocks.com/en/tutorials/eventsource/basics/
<div id="Server-Senttoc" class="toc"><a href="#Server-Senttopic-0" target="_self">Server-Sent Events</a>,  <a href="#Server-Senttopic-1" target="_self">The API</a>,  <a href="#Server-Senttopic-2" target="_self">Server-Side Implementation</a>,  <a href="#Server-Senttopic-3" target="_self">Client-Side Implementation</a>,  <a href="#Server-Senttopic-4" target="_self">Putting It All Together</a>,  <a href="#Server-Senttopic-5" target="_self">Custom Event Types</a>,  <a href="#Server-Senttopic-6" target="_self">Auto Reconnect</a>,  <a href="#Server-Senttopic-7" target="_self">Last-Event-Id Header</a>,  <a href="#Server-Senttopic-8" target="_self">Browser Support</a>,  <a href="#Server-Senttopic-9" target="_self">Sever-Sent Events vs.
WebSockets</a>,  </div></center>
When it comes to developing an application that enables real-time operations, the first thing that comes to mind is WebSockets, which is fine, but there are other options that need to be considered.
One of them is <strong>Server-Sent Events</strong>, which enable a unidirectional communication flow between server and client.
<h3 id="Server-Senttopic-0">Server-Sent Events</h3>
<strong>Server-Sent Events</strong> is a server push technology that allows a client to receive automatic updates from the server via an HTTP connection.
They are very easy to implement, but there are some important things you should know before choosing them for your application:
<li>The technology is based on the plain HTTP</li>
<li>Allows only unidirectional data flow (as already mentioned)</li>
<li>It is limited to pure text data, no binaries allowed</li>
<h3 id="Server-Senttopic-1">The API</h3>
The Server-Sent Event API is contained in the <strong>EventSource</strong> interface.
<h4>Open a connection (same domain)</h4>
To open the connection to a server, create a new EventSource object with the URL of the script that generates the events:
<k>const eventSource = new EventSource("/api/events");</k>
<h4>Open a connection (other domain)</h4>
If the URL passed to the EventSource is on the other domain, a second parameter can be specified and a <strong>withCredentials</strong> property can be set to <strong>true</strong>, which means that the Cookie will be sent together:
<k>const eventSource = new EventSource("http://localhost:8000/api/events", { withCredentials: true });</k>
<h4>Listen for messages</h4>
Once the connection is instantiated, we need to listen to the events coming from the server:
<k>eventSource.addEventListener("message", (event) => {
// "event.data" is a string
const data = JSON.parse(event.data);
// Prints whatever was sent by the server
console.log(data);
});</k>
<strong>Important note:</strong> As the server only sends text data, we have to <strong>stringify</strong> it on the server-side and <strong>parse</strong> it on the client.
<h4>Listen for errors</h4>
If an error occurs (network timeout or something), an <strong>error</strong> event is generated and we can listen for it:
<k>eventSource.addEventListener("error", (error) => {
// Prints the information about an error
console.log(error);
});</k>
<h4>Listen for an open connection</h4>
When the connection is opened, an <strong>open</strong> event is generated and we can listen for it as well:
<k>eventSource.addEventListener("open", (event) => {
// Prints the information about an event
console.log(event);
});</k>
<h4>Check the state of the connection</h4>
The state of the connection is stored in the <strong>readyState</strong> property of the EventSource:
<li>0 - EventSource.CONNECTING</li>
<li>1 - EventSource.OPEN</li>
<li>2 - EventSource.CLOSED </li>
<k>const connectionState = eventSource.readyState;</k>
<h4>Close the connection</h4>
When the connection between the server and the client interrupts, it is automatically restarted.

However, it can be terminated with the <strong>close</strong> method:
<k>eventSource.close();</k>
<h3 id="Server-Senttopic-2">Server-Side Implementation</h3>
To establish a connection with the client, we have to send <strong>200</strong> status code together with the <strong>Content-Type: text/event-stream</strong> and <strong>Connection: keep-alive</strong> headers.
Let's take a look at the complete example with Node.js and explain each line of code in the comment above:
<k>const express = require("express");
const bodyParser = require("body-parser");
const cors = require("cors");
const app = express();
const PORT = 3000;
// Store all connected clients
let clients = [];
const addSubscriber = (req, res) => {
// Set necessary headers to establish a stream of events
const headers = {
"Content-Type": "text/event-stream",
Connection: "keep-alive",
};
res.writeHead(200, headers);
// Add a new client that just connected
// Store the id and the whole response object
const id = Date.now();
const client = {
id,
res,
};
clients.push(client);
console.log(`Client connected: ${id}`);
// When the connection is closed, remove the client from the subscribers
req.on("close", () => {
console.log(`Client disconnected: ${id}`);
clients = clients.filter((client) => client.id !== id);
});
};
const notifySubscribers = (message) => {
// Send a message to each subscriber
clients.forEach((client) =>
client.res.write(`data: ${JSON.stringify(message)}\n\n`)
);
};
// Add a new message and send it to all subscribed clients
const addMessage = (req, res) => {
const message = req.body;
// Return the message as a response for the "/message" call
res.json(message);
return notifySubscribers(message);
};
// Get a number of the clients subscribed
const getSubscribers = (_req, res) => {
return res.json(clients.length);
};
app.use(cors());
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: false }));
// Define endpoints
app.get("/subscribe", addSubscriber);
app.post("/message", addMessage);
app.get("/status", getSubscribers);
// Start the app
app.listen(PORT, () => {
console.log(`App listening on port ${PORT}`);
});</k>
The main purpose of this code is to track all connected clients and inform them about the data sent to the <strong>/message</strong> endpoint.
<strong>Important note:</strong> <k>\n</k> does a line break.
<k>\n\n</k> means the end of the message, do not forget to add that.
<h3 id="Server-Senttopic-3">Client-Side Implementation</h3>
On the client-side, we create a simple React component using the EventSource API to connect to the event stream and display the real-time data:
<k>const App = () => {
const [data, setData] = useState([]);
useEffect(() => {
// Subscribe to the event stream
const eventSource = new EventSource("http://localhost:3000/subscribe");
eventSource.addEventListener("message", handleReceiveMessage);
return () => {
// Remove event listener and close the connection on unmount
eventSource.removeEventListener("message", handleReceiveMessage);
eventSource.close();
};
}, []);
// Get the message and store it in the state
const handleReceiveMessage = (event: any) => {
const eventData = JSON.parse(event.data);
setData((data) => data.concat(eventData));
};
// Send 5 random chars to the server
const handleSendMessage = () => {
axios.post("http://localhost:3000/message", {
message: generateRandomChars(5),
});
};
return (
&lt;div style={{ padding: "0 20px" }}>
&lt;div>
&lt;h4>Click to send a message&lt;/h4>
&lt;button onClick={handleSendMessage}>Send&lt;/button>
&lt;/div>
&lt;div>
&lt;h4>Message List&lt;/h4>
&lt;p>Number of messages: {data.length}&lt;/p>
{data.map((item, index) => (
&lt;div key={index}>{item.message}&lt;/div>
))}
&lt;/div>
&lt;/div>
);
};</k>
<h3 id="Server-Senttopic-4">Putting It All Together</h3>
To see our example in action, start the client (your start script may look different):
<k>yarn start</k>
And the server:
<k>node server.js</k>
You should see the app running:
<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-11.18.44.png" alt="Client-Side App" title="Client-Side App">
And the server:
<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-11.13.50.png" alt="Server-Side App" title="Server-Side App">
Notice the log <strong>Client connected: 1607163222261</strong> which means that the connection has been established and we can use the channel to send events.
Click on the <strong>Send</strong> button on the UI (which <strong>POST</strong>s 5 random characters to the <strong>/message</strong> endpoint) and notice how they appear in the list:
<img class="lazy" data-src="https://vhudyma-blog.eu/img/ezgif.com-gif-maker-6-.gif" alt="Working App" title="Working App">
<h3 id="Server-Senttopic-5">Custom Event Types</h3>
The default event type used by Server-Sent Events is a <strong>message</strong>.
A custom event can be sent by specifying the <strong>event</strong> at the start:
<k>client.res.write(`event: join\ndata: ${JSON.stringify(message)}\n\n`);</k>
And then the client can listen for this event:
<k>eventSource.addEventListener("join", handleReceiveMessage);</k>
<h3 id="Server-Senttopic-6">Auto Reconnect</h3>
If the server crashes or the connection is lost, the <strong>EventSource</strong> tries to reconnect, we do not need to worry about it.

There is usually a delay of a few seconds between reconnections:
<img class="lazy" data-src="https://vhudyma-blog.eu/img/ezgif.com-gif-maker-5-.gif" alt="Auto Reconnect" title="Auto Reconnect">
The server can specify a recommended delay by specifying the <strong>retry</strong> at the beginning of an event:
<k>// Retry each 5 seconds
client.res.write(`retry:5000\ndata: ${JSON.stringify(message)}\n\n`);</k>
If the browser knows that there is no Internet connection at the moment, it will try again to reconnect once the Internet connection is established.
<h3 id="Server-Senttopic-7">Last-Event-Id Header</h3>
It is essential that the connection is resumed at the same point where it was interrupted so that no messages are lost.
This can be achieved with the <strong>Last-Event-Id</strong> header, which is automatically added when a certain condition is met.
Each message from the server should contain a unique <strong>id</strong> field:
<k>client.res.write(`data: ${JSON.stringify(message)}\nid:500\n\n`);</k>
When the browser receives a message with a set <strong>id</strong>, it sets the <k>eventSource.lastEventId</k> property to its value and sends this value in the <strong>Last-Event-Id</strong> header when reconnected:
<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-11.47.03.png" alt="Last-Event-Id header" title="Last-Event-Id header">
<strong>Important note:</strong> the <strong>id</strong> should be appended by the server after the <strong>data</strong> to ensure that the <strong>eventSource.lastEventId</strong> is updated after the message is received.
<h3 id="Server-Senttopic-8">Browser Support</h3>
According to <a href="https://caniuse.com/?search=eventsource">caniuse</a>, Server-Sent Events are available for more than 96% of the users as of 06.12.2020:
<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-14.54.45.png" alt="Browser Support Image" title="Browser Support Image">
The following code can be used to check if the browser supports the feature:
<k>if ("EventSource" in window) {
// Implement it
}</k>
<h3 id="Server-Senttopic-9">Sever-Sent Events vs.
WebSockets</h3>
The WebSocket protocol enables the exchange of events between the server and the client.
The data can be sent in both directions.
What are the main differences between the two technologies?
<li>Server-Sent Events are based on HTTP, WebSockets on the WebSocket protocol</li>
<li>Server-Sent Events do not allow bidirectional data flow, WebSockets do</li>
<li>Server-Sent Events do not allow sending binary data, WebSockets do</li>
<li>Server-Sent Events provide an automatic reconnection if the connection is lost, WebSockets do not (you have to implement it manually)</li>
<li>Server-Sent Events have a limited maximum number of open connections (6), which can be painful if you need to open more tabs, WebSockets have no limitations</li>
When you see all these disadvantages of using Server-Sent Events, are they really a competitor to WebSockets?
They are much easier and faster to implement.
So if you need a quick way to set up the real-time unidirectional communication between server and client and are aware of all the potential risks, this is the best way to go.
However, be aware that there is a high probability that the solution will eventually be refactored to the WebSockets.
<h2>Server-Sent Events - One Way Messaging</h2>
A server-sent event is when a web page automatically gets updates from a server.
This was also possible before, but the web page would have to ask if any updates were available.
With server-sent events, the updates come automatically.
<h3>Receive Server-Sent Event Notifications</h3>
The EventSource object is used to receive server-sent event notifications:
Example
var source = new EventSource("demo_sse.php");
source.onmessage = function(event) {
document.getElementById("result").innerHTML += event.data + "<br>";
};
Example explained:
Create a new EventSource object, and specify the URL of the page sending the updates (in this example "demo_sse.php")
Each time an update is received, the onmessage event occurs
When an onmessage event occurs, put the received data into the element with id="result"
&lt;!DOCTYPE html>
&lt;html>
&lt;body>
&lt;h1>Getting server updates&lt;/h1>
&lt;div id="result">&lt;/div>
&lt;script>
if(typeof(EventSource) !== "undefined") {
var source = new EventSource("demo_sse.php");
source.onmessage = function(event) {
document.getElementById("result").innerHTML += event.data + "&lt;br>";
};
} else {
document.getElementById("result").innerHTML = "Sorry, your browser does not support server-sent events...";
}
&lt;/script>
&lt;/body>
&lt;/html>
<h3>Check Server-Sent Events Support</h3>
In the tryit example above there were some extra lines of code to check browser support for server-sent events:
if(typeof(EventSource) !== "undefined") {
// Yes! Server-sent events support!
// Some code.....
} else {
// Sorry! No server-sent events support..
}
<h3>Server-Side Code Example</h3>
For the example above to work, you need a server capable of sending data updates (like PHP or ASP).
The server-side event stream syntax is simple.
Set the "Content-Type" header to "text/event-stream".
Now you can start sending event streams.
<b>Code in PHP (demo_sse.php):</b>
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');
$time = date('r');
echo "data: The server time is: {$time}\n\n";
flush();
?>
<b>Code in ASP (VB) (demo_sse.asp):</b>
<%
Response.ContentType = "text/event-stream"
Response.Expires = -1
Response.Write("data: The server time is: " & now())
Response.Flush()
%>
<b>Code explained:</b>
Set the "Content-Type" header to "text/event-stream"
Specify that the page should not cache
Output the data to send (Always start with "data: ")
Flush the output data back to the web page
The EventSource Object
In the examples above we used the onmessage event to get messages.
But other events are also available:
Events	Description
onopen	When a connection to the server is opened
onmessage	When a message is received
onerror	When an error occurs
<h2>connect SQL Server database from JavaScript in the browser</h2>
There is no common way to connect to SQL Server database from JavaScript client, every browser has it’s own API and packages to connect to SQL Server.
For example, in Windows operating system, Internet Explorer has a class name called ActiveXObject which is used to create instances of OLE Automation objects, and these objects help us to create an environment for SQL Driver connection.

var connection = new ActiveXObject("ADODB.Connection") ;
var connectionstring = "Data Source=&lt;server>;Initial Catalog=&lt;catalog>;User ID=&lt;user>;Password=&lt;password>;Provider=SQLOLEDB";
connection.Open(connectionstring);
var rs = new ActiveXObject("ADODB.Recordset");
rs.Open("SELECT * FROM table", connection);
rs.MoveFirst
while(!rs.eof)
{
document.write(rs.fields(1));
rs.movenext;
}
rs.close;
connection.close; 
It is not recommended to use JavaScript clients to access databases.
Node.js provides us an environment to run JavaScript code outside the browser.
It’s strongly recommended to use any command-line tool(CLI) like terminal, cmd to run following queries and commands.
connect with SQL Server
sqlcmd -S localhost -U SA -P "&lt;password>"
To create Node.js environment issue following command.
npm init
Express allows us to set up middlewares to respond to HTTP Requests.
npm install express --save
Microsoft SQL Server client give us functionality to connect with SQL server.
npm install mssql --save
To begin with Node.js part, we need to create our server file server.js in our local system.
javascript
// Requiring modules
const express = require('express');
const app = express();
const mssql = require("mysql");
// Get request
app.get('/', function (req, res) {
// Config your database credential
const config = {
user: 'SA',
password: 'Your_Password',
server: 'localhost',
database: 'geek'
};
// Connect to your database
mssql.connect(config, function (err) {
// Create Request object to perform
// query operation
var request = new mssql.Request();
// Query to the database and get the records
request.query('select * from student',
function (err, records) {
if (err) console.log(err)
// Send records as a response
// to browser
res.send(records);
});
});
});
var server = app.listen(5000, function () {
console.log('Server is listening at port 5000...');
});
Run server.js file using the following command:  
node server.js
After executing the above command, you will see the following output on your console:  
Server is listening at port 5000...
Now hit the url http://localhost:5000/ in the local browser.
<h2>JavaScript Tips</h2>
<div id="JTipstoc" class="toc"><a href="#JTipstopic-0" target="_self">Flatten the array of the array</a>,  <a href="#JTipstopic-1" target="_self">Easy Exchange Variables</a>,  <a href="#JTipstopic-2" target="_self">Sort Alphabetically</a>,  <a href="#JTipstopic-3" target="_self"><br>Generate Range of Numbers</a>,  <a href="#JTipstopic-4" target="_self">Shorten the Console log</a>,  <a href="#JTipstopic-5" target="_self">Shortening an Array in an easy way</a>,  <a href="#JTipstopic-6" target="_self"><br>Use isNumber</a>,  <a href="#JTipstopic-7" target="_self">Use isString</a>,  <a href="#JTipstopic-8" target="_self">Check Null</a>,  <a href="#JTipstopic-9" target="_self">Merge Array into One</a>,  <a href="#JTipstopic-10" target="_self">Quick Calculate Performance</a>,  <a href="#JTipstopic-11" target="_self">Remove Duplicates</a>,  <a href="#JTipstopic-12" target="_self">Convert Number to Binary</a>,  <a href="#JTipstopic-13" target="_self">Character “e” for excessive zeros</a>,  <a href="#JTipstopic-14" target="_self">Make Array Empty</a>,  <a href="#JTipstopic-15" target="_self">Final Thoughts</a>,  </div></center>
<h3 id="JTipstopic-0">Flatten the array of the array</h3>
This tip will help you to flatten a deeply nested array of arrays by using <k>Infinity</k> in <k>flat</k>.
var array = [123, 500, [1, 2, [34, 56, 67, [234, 1245], 900]], 845, [30257]]
//flatten array of array
<b>array.flat(Infinity)</b>
// output:
// [123, 500, 1, 2, 34, 56, 67, 234, 1245, 900, 845, 30257]
<h3 id="JTipstopic-1">Easy Exchange Variables</h3>
You probably swap the two variables using a third variable <k>temp</k>.
But this tip will show you a new way to exchange variables using destructuring.
//example 1
var a = 6;
var b = 7;
<b>[a,b] = [b,a]</b>
console.log(a,b) // 7 6
<h3 id="JTipstopic-2">Sort Alphabetically</h3>
Sorting is a common problem in programming and this tip will save your valuable time by writing a long code to sort a string alphabetically.
//sort alphabeticallyfunction alphabetSort(arr)
{
return arr.sort((a, b) => a.localeCompare(b));
}
let array = ["d", "c", "b", "a"]
console.log(<b>alphabetSort(array)</b>) // ["a", "b", "c", "d"]
<h3 id="JTipstopic-3"><br>Generate Range of Numbers</h3>
Suppose you want to generate a number between a specific range.
The first approach you will use is the loop.
But this tip will save you valuable time by doing it the easy way.
let Start = 10, End = 15;
//Generating
<b>[...new Array(End + 1).keys()].slice(Start)</b>; // [10, 11....
15]
<b>Array.from({length: End - Start + 1}, (_,i) => Start + i)</b> // [10, 11....
15]
<h3 id="JTipstopic-4">Shorten the Console log</h3>
Tired of writing <k>console.log()</k> again and again? This tip will show how to shorter your console log and speed up your coding.
var <b>c = console.log.bind(document)</b>
c(455)
c("hello world")
<h3 id="JTipstopic-5">Shortening an Array in an easy way</h3>
This is an awesome tip for web developers to shorten an array in an easy way.
You just need to use the <k>length</k> method by passing a number that denotes the new size of your array.
let array = ["A", "B", "C", "D", "E", "F"]
<b>array.length = 2</b>
console.log(array) // ["A", "B"]
<h3 id="JTipstopic-6"><br>Use isNumber</h3>
This tip will show how to check whether a value or variable holding a number ( integer, float and etc ) or not.
<b>function isNumber(n) { return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n); }</b>
console.log(isNumber(900))  // true
console.log(isNumber(23.98))  // true
console.log(isNumber("JavaScript")) // false
<h3 id="JTipstopic-7">Use isString</h3>
This useful tip will show you how to check whether a value or data is in string format or not.
This comes in handy when you request data from the server and want to check the data type.
<b>const isString = value => typeof value === 'string';</b>
isString('JavaScript'); // true
isString(345); // false
isString(true); // false
<h3 id="JTipstopic-8">Check Null</h3>
In Programming, sometimes we need to check whether a result or data is null.
<b>const CheckNull= value => value === null || value === undefined;</b>
CheckNull(null) // true
CheckNull() // true
CheckNull(123) // false
CheckNull("J") // false
<h3 id="JTipstopic-9">Merge Array into One</h3>
This tip will be useful when you need to combine the two arrays of any size into one.
You need to use the JavaScript <k>concate</k> method for this.
//Example Code
let arr1 = ["JavaScript", "Python", "C++"]
let arr2 = ["Dart", "Java", "C#"]
<b>const mergeArr = arr1.concat(arr2)</b>
console.log(mergeArr) // ["JavaScript", "Python", "C++", "Dart", "Java", "C#"]
<h3 id="JTipstopic-10">Quick Calculate Performance</h3>
This tip is personally used most to calculate the performance of my JavaScript program.
const starttime = performance.now();
//some program
const endtime = performance.now();
const totaltime = startTime - endTime
console.log("function takes "+totaltime +" milisecond");
<h3 id="JTipstopic-11">Remove Duplicates</h3>
You probably encounter an array with duplicate data and use a loop way to get rid of these duplicates.
This tip will help you remove duplicates in an easy way without using any loop.
const ReDuplicates = array => [...new Set(array)];
console.log(ReDuplicates([200,200,300,300,400,500,600,600])) // [200,300,400,600]
<h3 id="JTipstopic-12">Convert Number to Binary</h3>
This tip is useful when you need to convert numbers into binary.

Take a look at the example code below.
var num = 200
console.log(num.toString(2)) // 11001000
num = 300
console.log(num.toString(2)) //100101100
<h3 id="JTipstopic-13">Character “e” for excessive zeros</h3>
This is a time-saving tip for you.
You can rid of writing a lot of zeros in JavaScript by replacing all of them with the character “e”.
//normal way
var num = 20000000
//good way
var num2 = 2e7
console.log(num2) //20000000
<h3 id="JTipstopic-14">Make Array Empty</h3>
This quick tip will save the time that you put to empty an array.
I will show you the quick method to empty in an array using the JavaScript length method.
let array = ["A", "B", "C", "D", "E", "F"]
array.length=0
console.log(array) // []
<h3 id="JTipstopic-15">Final Thoughts</h3>
I hope you find this article useful and fun to learn these tips.
If you had a good JavaScript tip feel free to share it with other developers in response.<strong> Happy JavaScript Coding.</strong>
<h2>Pre-fill form with local storage</h2>
to create a single localStorage entry representing your saved values, rather than pollute LS with many entries for each field.

function save() {
const selects = document.querySelectorAll('select');
// select other element types
// ...
const selectValues = [...selects].map(select => select.value);
const textValues = [...textInputs].map(textInput => textInput.value);
const sliderValues = [...sliderInputs].map(sliderInput => sliderInput.value);
const savedObj = { selectValues, textValues, sliderValues };
localStorage.savedFormValues = JSON.stringify(savedObj);
}
<h2>use .get or .post to collect file from url</h2>
<a href="https://www.w3schools.com/tags/ref_httpmethods.asp" class="whitebut ">w3school HTTP Request .get, .post</a>
$("button").click(function(){
  url= 'https://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&param=hk00700,day,,,1000,qfq'

  $.get(url, function(data, status){
    objdata = eval(data)
    keys = Object.keys(objdata)
    console.log(keys)
    $("#cvs").text(JSON.stringify(objdata.data)) ;
  });

});

// will be blocked
$("button").click(function(){
  $.post("demo_test.asp", function(data, status){
    alert("Data: " + data + "\nStatus: " + status);
  });
});

Access to XMLHttpRequest from origin 'null' has been blocked by CORS
use server to bypass CORS

note that Mixed Content loaded over HTTPS will be blocked, the content must be served over HTTPS.
adding following code to the HTML page, since we are using the third party API which is not controlled by us.
&lt;meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> 

<h2>avoid the specification of the username and password at every git push</h2>
1.
Associate the SSH key with the remote repository
This step varies, depending on how your remote is set up.
If it is a GitHub repository and you have administrative privileges, go to settings and click 'add SSH key'.
Copy the contents of your ~/.ssh/id_rsa.pub into the field labeled 'Key'.
If your repository is administered by somebody else, give the administrator your id_rsa.pub.
If your remote repository is administered by your, you can use this command for example:
scp ~/.ssh/id_rsa.pub YOUR_USER@YOUR_IP:~/.ssh/authorized_keys/id_rsa.pub
2.
Set your remote URL to a form that supports SSH 1
If you have done the steps above and are still getting the password prompt, make sure your repo URL is in the form
git+ssh://git@github.com/username/reponame.git
as opposed to
https://github.com/username/reponame.git
To see your repo URL, run:
git remote show origin
You can change the URL with:
git remote set-url origin git+ssh://git@github.com/username/reponame.git
<a href="https://stackoverflow.com/questions/37813568/git-remote-repository-not-found" class="whitebut ">Git - remote: Repository not found</a>
Permanently authenticating with Git repositories,
Run the following command to enable credential caching.
git config credential.helper store
git push https://github.com/repo.git
For window
Delete the credentials from Credential Manager.
Open Control Panel from the Start menu.
Select User Accounts.
Select the "Credential Manager".
Click on "Manage Windows Credentials".
Delete any credentials related to Git or GitHub.
Once you deleted all then try to clone again.
I was also facing the same issue
remote: Repository not found
fatal: repository 'https://github.com/MyRepo/project.git/' not found
I uninstalled the git credentials manager and reinstalled it and then I could easily pull and push to the repository.
Here are the commands
<h2>What is React?</h2>
<div id="Reacttoc" class="toc"><a href="#Reacttopic-0" target="_self"">Adding React to an HTML Page</a><br><a href="#Reacttopic-1" target="_self"">What is Babel?</a><br><a href="#Reacttopic-2" target="_self"">What is JSX?</a><br><a href="#Reacttopic-3" target="_self"">React DOM Render</a><br><a href="#Reacttopic-4" target="_self"">JSX Expressions</a><br><a href="#Reacttopic-5" target="_self"">React Elements</a><br><a href="#Reacttopic-6" target="_self"">React Components</a><br><a href="#Reacttopic-7" target="_self"">React Component Properties</a><br><a href="#Reacttopic-8" target="_self"">JSX Compiler</a><br><a href="#Reacttopic-9" target="_self"">Create React Application</a><br></div></center>
React is a <b>JavaScript</b> library created by <b>Facebook</b>
React is a <b>User Interface</b> (UI) library
React is a tool for building <b>UI components</b>
<h3 id="Reacttopic-0">Adding React to an HTML Page</h3>
This quickstart tutorial will add React to a page like this: 
<h3>Example</h3>
&lt;!DOCTYPE html>
&lt;html lang="en">
&lt;title>Test React&lt;/title>
<b>&lt;!-- Load React API --></b>
&lt;script src= "https://unpkg.com/react@16/umd/react.production.min.js">&lt;/script>
<b>&lt;!-- Load React DOM--></b>
&lt;script src= "https://unpkg.com/react-dom@16/umd/react-dom.production.min.js">&lt;/script>
<b>&lt;!-- Load Babel Compiler --></b>
&lt;script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js">&lt;/script>
&lt;body>
&lt;script type="text/babel">
<b>    //  JSX Babel code goes here
</b>&lt;/script>
&lt;/body>
&lt;/html>
<h3 id="Reacttopic-1">What is Babel?</h3>
Babel is a JavaScript compiler that can translate markup or programming languages into JavaScript.
With Babel, you can use the newest features of JavaScript (ES6 - ECMAScript 2015).
Babel is available for different conversions.

React uses Babel to convert JSX into JavaScript.
Please note that &lt;script type="text/babel"> is needed for using Babel.
<h3 id="Reacttopic-2">What is JSX?</h3>
JSX stands for <b>J</b>ava<b>S</b>cript <b>X</b>ML.
JSX is an XML/HTML like extension to JavaScript.
<h3>Example</h3>
const element = &lt;h2>Hello World!&lt;/h2>
As you can see above, JSX is not JavaScript nor HTML.
JSX is a XML syntax extension to JavaScript that also comes with the full power of ES6 (ECMAScript 2015).
Just like HTML, JSX tags can have a tag names, attributes, and children.
If an attribute is wrapped in curly braces, the value is a JavaScript expression.
Note that JSX does not use quotes around the HTML text string.
<h3 id="Reacttopic-3">React DOM Render</h3>
The method ReactDom.render() is used to render (display) HTML elements:
<h3>Example</h3>
&lt;div id="id01">Hello World!&lt;/div>
&lt;script type="text/babel">ReactDOM.render(
&lt;h2>Hello React!&lt;/h2>,
document.getElementById('id01'));
&lt;/script>
<h3 id="Reacttopic-4">JSX Expressions</h3>
Expressions can be used in JSX by wrapping them in curly <b>{}</b> braces.
<h3>Example</h3>
&lt;div id="id01">Hello World!&lt;/div>
&lt;script type="text/babel">
const <b>name</b> = 'John Doe';
ReactDOM.render(
&lt;h2>Hello <b>{name}</b>!&lt;/h2>,
document.getElementById('id01'));
&lt;/script>
<h3 id="Reacttopic-5">React Elements</h3>
React applications are usually built around a single <b>HTML element</b>.
React developers often call this the <b>root node</b> (root element): 
&lt;div id="root">&lt;/div>
<b>React elements</b> look like this:
const element = &lt;h2>Hello React!&lt;/h2>
Elements are <b>rendered</b> (displayed) with the ReactDOM.render() method:
ReactDOM.render(element, document.getElementById('root'));
React elements are <b>immutable</b>.

They cannot be changed.
The only way to change a React element is to render a new element every time:
<h3>Example</h3>
function tick() {
const element = (&lt;h2>{new Date().toLocaleTimeString()}&lt;/h2>);
ReactDOM.render(element, document.getElementById('root'));
}
setInterval(tick, 1000);
<h3 id="Reacttopic-6">React Components</h3>
React components are JavaScript functions.
This example creates a React <strong>component</strong> named "Welcome":
<h3>Example</h3>
function Welcome() {
return &lt;h2>Hello React!&lt;/h2>;
}
ReactDOM.render(&lt;Welcome />, document.getElementById('root'));
React can also use ES6 classes to create components.
This example creates a React component named Welcome with a render <strong>method</strong>: 
<h3>Example</h3>
class Welcome extends React.Component {
render() { return(&lt;h2>Hello React!&lt;/h2>); }
}
ReactDOM.render(&lt;Welcome />, document.getElementById('root'));
<h3 id="Reacttopic-7">React Component Properties</h3>
This example creates a React <strong>component</strong> named "Welcome" with property arguments:
<h3>Example</h3>
function Welcome(props) {
return &lt;h2>Hello {props.name}!&lt;/h2>;
}
ReactDOM.render(&lt;Welcome name="John Doe"/>, document.getElementById('root'));
React can also use ES6 classes to create components.
This example also creates a React component named "Welcome" with property arguments: 
<h3>Example</h3>
class Welcome extends React.Component {
render() { return(&lt;h2>Hello {this.props.name}&lt;/h2>); }
}
ReactDOM.render(&lt;Welcome name="John Doe"/>, document.getElementById('root'));
<h3 id="Reacttopic-8">JSX Compiler</h3>
The examples on this page compiles JSX in the browser.
For production code, the compilation should be done separately.
<h3 id="Reacttopic-9">Create React Application</h3>
Facebook has created a <b>Create React Application</b> with everything you need to build a React app.
It is a development server that uses Webpack to compile React, JSX, and ES6, auto-prefix CSS files.
The Create React App uses ESLint to test and warn about mistakes in the code.
To create a React App run the following code on your terminal:
<h3>Example</h3>
npx create-react-app react-tutorial 
Make sure you have Node.js 5.2 or higher.

Otherwise you must install npx:
<h3>Example</h3>
npm i npx 
Start one folder up from where you want your application to stay:
<h3>Example</h3>
C:\Users\myUser>npx create-react-app react-tutorial 
<h3>Success Result:</h3>
npx: installed 63 
in 10.359s
Creating a new React app in C:\Users\myUser\react-tutorial.
Installing packages.

This might take a couple of minutes.
Installing react, 
react-dom, and react-scripts...
+ react-dom@16.5.2
+ react@16.5.2
+ 
react-scripts@2.0.4
added 1732 packages from 664 contributors and audited 
31900 packages in 355.501s
found 0 vulnerabilities+ react@16.5.2
Success! Created react-tutorial at C:\Users\myUser\react-tutorial
Inside that directory, you can run several commands:
npm start
Starts the development server.
npm run build
Bundles the app into static files for production.
npm test
Starts the test runner.
npm run eject
Removes this tool and copies build dependencies, configuration files and scripts into the app directory.

If you do this, you can't go back!
We suggest that you begin by typing:
cd react-tutorial
npm start
<h2>delay refresh by javascript</h2>
$(document).ready(function() {
timeDelay = 60*1000 * Number(prompt("alarm delay in minutes: "))
setInterval('window.location.reload()', timeDelay);
});
<h2>calculate the centre of a circle given three points</h2>
https://stackoverflow.com/questions/32861804/how-to-calculate-the-centre-point-of-a-circle-given-three-points
Translate the three points to bring one of them at the origin 
(subtract (X0,Y0)).
The equation of a circle through two points and the origin can be written
2X.Xc + 2Y.Yc = X² + Y²
(refer to: https://www.math-only-math.com/circle-passes-through-the-origin.html)
Plugging the coordinates of the two points, you get an easy system of two equations in two unknowns, and by Cramer
Xc = (Z1.Y2 - Z2.Y1) / D
Yc = (X1.Z2 - X2.Z1) / D
D = 2(X1.Y2 - X2.Y1), Z1 = X1²+Y1², Z2 = X2²+Y2²
to be translated back (add (X0,Y0)).
The formula fails when the three points are aligned, which is diagnosed by D = 0 (or small in comparison to the numerators).
X1-= X0; Y1-= Y0; X2-= X0; Y2-= Y0;
double Z1= X1 * X1 + Y1 * Y1;
double Z2= X2 * X2 + Y2 * Y2;
double D= 2 * (X1 * Y2 - X2 * Y1);
double Xc= (Z1 * Y2 - Z2 * Y1) / D + X0;
double Yc= (X1 * Z2 - X2 * Z1) / D + Y0;
function CalculateCircleCenter(A,B,C)
{
var yDelta_a = B.y - A.y;
var xDelta_a = B.x - A.x;
var yDelta_b = C.y - B.y;
var xDelta_b = C.x - B.x;
center = [];
var aSlope = yDelta_a / xDelta_a;
var bSlope = yDelta_b / xDelta_b;
center.x = (aSlope*bSlope*(A.y - C.y) + bSlope*(A.x + B.x) - aSlope*(B.x+C.x) )/(2* (bSlope-aSlope) );
center.y = -1*(center.x - (A.x+B.x)/2)/aSlope +  (A.y+B.y)/2;
return center;
}
All you need to do is pass it 3 points :
var threePoints = [{x:1, y: 2},{x:4, y: 4},{x:6, y: 2} ]
console.log(CalculateCircleCenter(threePoints[0],threePoints[1],threePoints[2]))
<h2>to change the default voice in the browser</h2>
The speech API spec says that browsers can decide which voice to use by default, and that each utterance language may have a different default voice.
The default utterence language is decided by the HTML lang attribute:
This implies that, to use a British voice by default:
&lt;html lang="en-GB">
&lt;script>
var utterance = new SpeechSynthesisUtterance('Toodle pip');
window.speechSynthesis.speak(utterance);
&lt;/script>
However, this did not change the default voice for me in Chrome 46 (my default language is en-GB; I also get a German voice by default).
You could use navigator.language as the default utterance language, but according to this answer it is not a reliable indicator of browser settings (for me it evaluates to en-US, which is in my list of languages but is not my default).
Chrome seems to ignore the HTML lang property.
The solution is to set the property of the utterance:
&lt;script>
var utterance = new SpeechSynthesisUtterance('Toodle pip');
utterance.lang='en-US'; // for US english, en-GR for british
window.speechSynthesis.speak(utterance);
&lt;/script>
SpeechSynthesis.getVoices() will return several options for English (United States, Australia, Nigeria, India, and United Kingdom) but only one is available at a time.

You can pick which one by going to the Settings app, then Controls->Language and input->Text-to-speech options.

<h2>The lang property of the SpeechSynthesisUtterance interface</h2>
gets and sets the language of the utterance.
If unset, the app's (i.e.
the <html> lang value) lang will be used, or the user-agent default if that is unset too.
Syntax
var myLang = speechSynthesisUtteranceInstance.lang;
speechSynthesisUtteranceInstance.lang = 'en-US';
Examples
var synth = window.speechSynthesis;
var inputForm = document.querySelector('form');
var inputTxt = document.querySelector('input');
var voiceSelect = document.querySelector('select');
var voices = synth.getVoices();
...
inputForm.onsubmit = function(event) {
event.preventDefault();
var utterThis = new SpeechSynthesisUtterance(inputTxt.value);
var selectedOption = voiceSelect.selectedOptions[0].getAttribute('data-name');
for(i = 0; i < voices.length ; i++) {
if(voices[i].name === selectedOption) {
utterThis.voice = voices[i];
}
}
utterThis.lang = 'en-US';
synth.speak(utterThis);
inputTxt.blur();
}
SpeechSynthesisUtterance()
Properties
lang
pitch
rate
text
voice
volume
Events
boundary
end
error
mark
pause
resume
start
Inheritance:
EventTarget
<h2>radio button</h2>
<div id="radiobuttontoc" class="toc"><a href="#radiobuttontopic-0" target="_self"><span class="orange">Create a radio button</span></a><br><a href="#radiobuttontopic-1" target="_self"><span class="orange">Check a radio button</span></a><br><a href="#radiobuttontopic-2" target="_self"><span class="orange">Check the radio button is selected or not</span></a><br><a href="#radiobuttontopic-3" target="_self">Example</a><br><a href="#radiobuttontopic-4" target="_self">querySelector()</a><br><a href="#radiobuttontopic-5" target="_self">Example</a><br><a href="#radiobuttontopic-6" target="_self"><span class="orange">Get the value of checked radio button:</span></a><br><a href="#radiobuttontopic-7" target="_self">Using getElementById ()</a><br><a href="#radiobuttontopic-8" target="_self">Using querySelector()</a><br></div>
<br><br>
<h3 id="radiobuttontopic-0"><span class="orange">Create a radio button</span></h3>
Following is a simple code for creating a group of radio buttons.
&lt;p> Choose your favroite season: &lt;/p>
&lt;input type="radio" name="JTP" id="summer" value="summer">Summer&lt;br> 
&lt;input type="radio" name="JTP" id="winter" value="winter">Winter&lt;br> 
&lt;input type="radio" name="JTP" id="rainy" value="rainy">Rainy&lt;br>
&lt;input type="radio" name="JTP" id="autumn" value="autumn">Autumn&lt;br>
<h3 id="radiobuttontopic-1"><span class="orange">Check a radio button</span></h3>
We do not need to write any specific code to check the radio button.

They can be checked once they are created or specified in HTML form.
However, we have to write the JavaScript code to get the value of the checked radio button, which we will see in the chapter below:
<h3 id="radiobuttontopic-2"><span class="orange">Check the radio button is selected or not</span></h3>
There are two ways in JavaScript to check the marked radio button or to identify which radio button is selected.

JavaScript offers two DOM methods for this.
<li><strong>getElementById</strong></li>
<li><strong>querySelector</strong></li>
The input radio checked property is used to check whether the checkbox is selected or not.

Use <strong>document.getElementById('id').checked</strong> method for this.

It will return the checked status of the radio button as a Boolean value.

It can be either true or false.
<strong>True -</strong> If radio button is selected.
<strong>False -</strong> If radio button is not selected/ checked.
See the JavaScript code below to know how it works:
<h3 id="radiobuttontopic-3">Example</h3>
For example, we have a radio button named Summer and id = 'summer'.

Now, we will check using this button id that the radio button is marked or not.
if(document.getElementById('summer').checked == true) { 
document.write("Summer radio button is selected"); 
} else {
document.write("Summer radio button is not selected"); 
}
<h3 id="radiobuttontopic-4">querySelector()</h3>
The querySelector() function is a DOM method of JavaScript.

It uses the common name property of radio buttons inside it.

This method is used as given below to check which radio button is selected.
document.querySelector('input[name="JTP"]:checked')
<h3 id="radiobuttontopic-5">Example</h3>
For example, we have a group of radio buttons having the name property name = 'season' for all buttons.

Now, between these buttons named season we will check which one is selected.
var getSelectedValue = document.querySelector( 'input[name="season"]:checked'); 
if(getSelectedValue != null) { 
document.write("Radio button is selected");
} else {
document.write("Nothing has been selected");
}
<h3 id="radiobuttontopic-6"><span class="orange">Get the value of checked radio button:</span></h3>
<h3 id="radiobuttontopic-7">Using getElementById ()</h3>
Following is the code to get the value of checked radio button using getElementById() method:
if(document.getElementById('summer').checked) { 
var selectedValue = document.getElementById('summer').value;
alert("Selected Radio Button is: " + selectedValue);  
}
<h3 id="radiobuttontopic-8">Using querySelector()</h3>
Following is the code to get the value of checked radio button using querySelector() method:
var getSelectedValue = document.querySelector( 'input[name="season"]:checked'); 
if(getSelectedValue != null) { 
alert("Selected radio button values is: " + getSelectedValue.value);
}
<h2>show all available languages</h2>
speechSynthesis.getVoices().forEach(voice => {
console.log(voice.name, voice.lang)
})
Microsoft David Desktop - English (United States) en-US
txt2speech.html:59 Microsoft Hazel Desktop - English (Great Britain) en-GB
txt2speech.html:59 Microsoft Zira Desktop - English (United States) en-US
txt2speech.html:59 Microsoft Huihui Desktop - Chinese (Simplified) zh-CN
txt2speech.html:59 Microsoft Tracy Desktop - Chinese(Traditional, HongKong SAR) zh-HK
txt2speech.html:59 Microsoft Hanhan Desktop - Chinese (Taiwan) zh-TW
txt2speech.html:59 Google Deutsch de-DE
txt2speech.html:59 Google US English en-US
txt2speech.html:59 Google UK English Female en-GB
txt2speech.html:59 Google UK English Male en-GB
txt2speech.html:59 Google español es-ES
txt2speech.html:59 Google español de Estados Unidos es-US
txt2speech.html:59 Google français fr-FR
txt2speech.html:59 Google हिन्दी hi-IN
txt2speech.html:59 Google Bahasa Indonesia id-ID
txt2speech.html:59 Google italiano it-IT
txt2speech.html:59 Google 日本語 ja-JP
txt2speech.html:59 Google 한국의 ko-KR
txt2speech.html:59 Google Nederlands nl-NL
txt2speech.html:59 Google polski pl-PL
txt2speech.html:59 Google português do Brasil pt-BR
txt2speech.html:59 Google русский ru-RU
txt2speech.html:59 Google 普通话（中国大陆） zh-CN
txt2speech.html:59 Google 粤語（香港） zh-HK
txt2speech.html:59 Google 國語（臺灣） zh-TW
<h2>Set selected radio from radio group with a value</h2>
var value = 5;
$("input[name=mygroup][value=" + value + "]").attr('checked', 'checked');
$("input[name=mygroup]").val([5]);
$('input:radio[name="mygroup"][value="5"]').attr('checked',true);
Since jQuery 1.6, you can also use the .prop method with a boolean value (this should be the preferred method):
$("input[name=mygroup][value=" + value + "]").prop('checked', true);
Code To Remove Checked Attribute from all radio buttons of one radio button group -
$('[name="radioSelectionName"]').removeAttr('checked');
<h2>Tesseract.js Examples</h2>
<a href="https://github.com/naptha/tesseract.js/blob/master/docs/examples.md" class="whitebut ">Tesseract.js Examples</a>
basic
const { createWorker } = require('tesseract.js');
const worker = createWorker();

(async () => {
await worker.load();
await worker.loadLanguage('eng');
await worker.initialize('eng');
const { data: { text } } = await worker.recognize('https://tesseract.projectnaptha.com/img/eng_bw.png');
console.log(text);
await worker.terminate();
})();

with multiple languages, separate by '+'

const { createWorker } = require('tesseract.js');
const worker = createWorker();

(async () => {
await worker.load();
await worker.loadLanguage('eng+chi_tra');
await worker.initialize('eng+chi_tra');
const { data: { text } } = await worker.recognize('https://tesseract.projectnaptha.com/img/eng_bw.png');
console.log(text);
await worker.terminate();
})();

<h2>Express Middleware through Examples</h2>
https://developer.okta.com/blog/2018/09/13/build-and-understand-express-middleware-through-examples
<div id="ExpressMiddlewaretoc" class="toc"><a href="#ExpressMiddlewaretopic-0" target="_self">What is Express Middleware?</a><br><a href="#ExpressMiddlewaretopic-1" target="_self">Requirements to Write Express Middleware</a><br><a href="#ExpressMiddlewaretopic-2" target="_self">Express Middleware: The Basics</a><br><a href="#ExpressMiddlewaretopic-3" target="_self">Express Request Logging Middleware Example</a><br><a href="#ExpressMiddlewaretopic-4" target="_self">Restrict Express Request Content Type Example</a><br><a href="#ExpressMiddlewaretopic-5" target="_self">Third-Party Express Middleware</a><br><a href="#ExpressMiddlewaretopic-6" target="_self">Why Okta for Express Applications</a><br><a href="#ExpressMiddlewaretopic-7" target="_self">Okta’s OIDC Express Middleware</a><br><a href="#ExpressMiddlewaretopic-8" target="_self">Middleware Order is Important</a><br><a href="#ExpressMiddlewaretopic-9" target="_self">Error Handling in Express Middleware</a><br><a href="#ExpressMiddlewaretopic-10" target="_self">Learn More About Express Middleware</a><br></div>
<br><br>
If you’ve done any significant Node development in the past seven or eight years, you’ve probably used <a href="https://expressjs.com">Express</a> to build a web server at some point.

While you can create a server in Node without using a library, it doesn’t give you a lot out of the box and can be quite cumbersome to add functionality.

Express is a minimalist, “unopinionated” server library and has become the de facto standard for building web apps in Node.

To understand Express, you need to understand Express Middleware.
<h3 id="ExpressMiddlewaretopic-0">What is Express Middleware?</h3>
Middleware literally means anything you put in the middle of one layer of the software and another.

Express middleware are functions that execute during the lifecycle of a request to the Express server.

Each middleware has access to the HTTP <k>request</k> and <k>response</k> for each route (or path) it’s attached to.

In fact, Express itself is compromised wholly of middleware functions.

Additionally, middleware can either terminate the HTTP request or pass it on to another middleware function using <k>next</k> (more on that soon).

This “chaining” of middleware allows you to compartmentalize your code and create reusable middleware.
In this article I’ll explain what middleware is, why you would use it, how to use existing Express middleware, and how to write your own middleware for Express.
<h3 id="ExpressMiddlewaretopic-1">Requirements to Write Express Middleware</h3>
There are a few things you will need installed to create, use, and test Express middleware.

First, you will need Node and NPM.

To ensure you have them installed, you can run:
<k>npm -v &amp;&amp; node -v</k>
You should see the Node and NPM versions you have installed.

If you get an error, you need to <a href="https://nodejs.org/en/">install Node</a>.

I’m using the latest version of both as of the time of this article, which is Node 10.9.0 and NPM 6.4.1, but all the examples should work with Node versions 8+ and NPM versions 5+.
I will also be using Express version 4.x.

This is important because major changes were made from version 3.x to 4.x.
It will also be helpful to have <a href="https://www.getpostman.com/">Postman</a> installed to test routes using any HTTP verbs other than <k>GET</k>.
<h3 id="ExpressMiddlewaretopic-2">Express Middleware: The Basics</h3>
To get started, you’ll use the most basic of Express’ built-in middleware.

This will give you the chance to see how middleware is used, and how Express middleware is structured.
Create a new project and <k>npm init</k> it…
<k>npm init
npm install express --save</k>
Create <k>server.js</k> and paste the following code:
<k>const express = require('express');
const app = express();
app.get('/', (req, res, next) => {
res.send('Welcome Home');
});
app.listen(3000);</k>
Run the server via <k>node server.js</k>, access <k>http://localhost:3000</k>, and you should see “Welcome Home” printed in your browser.
The <k>app.get()</k> function is <a href="https://expressjs.com/en/guide/using-middleware.html#middleware.application">Application-level Middleware</a>.

You’ll notice the parameters passed to the method are <k>req</k>, <k>res</k>, and <k>next</k>.

These are the incoming request, the response being written, and a method to call to pass the call to the next middleware function once the current middleware is finished.

In this case, once the response is sent, the function exits.

You could also chain other middleware here by calling the <k>next()</k> method.
Let’s take a look at a few more examples of the different types of middleware.
<h3 id="ExpressMiddlewaretopic-3">Express Request Logging Middleware Example</h3>
In Express, you can set up middleware to be “global” middleware; meaning it will be called for every incoming request.
Change the contents of <k>server.js</k> to:
<k>const express = require('express');
const app = express();
app.use((req, res, next) => {
console.log(req);
next();
});
app.get('/', (req, res, next) => {
res.send('Welcome Home');
});
app.listen(3000);</k>
This time, when you go to <k>http://localhost:3000</k> you should see the same thing in your browser window, but back in the console window you will see the output of the incoming request object.
The middleware logs out the request object and then calls <k>next()</k>.

The next middleware in the pipeline handles the get request to the root URL and sends back the text response.

Using <k>app.use()</k> means that this middleware will be called for every call to the application.
<h3 id="ExpressMiddlewaretopic-4">Restrict Express Request Content Type Example</h3>
In addition to running middleware for all calls, you could also specify to only run middleware for specific calls.
Change the <k>server.js</k> file again to:
<k>const express = require('express');
const app = express();
const requireJsonContent = () => {
return (req, res, next) => {
if (req.headers['content-type'] !== 'application/json') {
res.status(400).send('Server requires application/json')
} else {
next()
}
}
}
app.get('/', (req, res, next) => {
res.send('Welcome Home');
});
app.post('/', requireJsonContent(), (req, res, next) => {
res.send('You sent JSON');
})
app.listen(3000);</k>
This time, start the server by running:
<k>node server.js</k>
To test this, open up Postman and create a post request to <k>http://localhost:3000</k>.

Don’t set any headers and run the request.

You will get back the “Server requires application/json” message.
Now go back and add the <k>Content-Type</k> header with a value of <k>application/json</k> and run the request again.

You will get the “You sent JSON” message back from the server.
This <k>app.post()</k> method call adds the <k>requireJsonContent()</k> middleware function to ensure the incoming request payload has a <k>Content-Type</k> header value set to <k>application/json</k>.

If it doesn’t pass the check, an error response is sent.

If it does, the request is then handed off to the next piece of middleware in the chain via the <k>next()</k> method.
<h3 id="ExpressMiddlewaretopic-5">Third-Party Express Middleware</h3>
You’ve built a couple of custom middlewares to far, but there are lots of packages already built to do the things you might normally want to do.

In fact, you’ve used the simple routing middleware library by using the <k>app.get()</k> or <k>app.post()</k> middleware functions.

There are thousands of middleware libraries for doing things like parsing incoming data, routing, and authorization.
Okta has an Express middleware for OIDC security that I’ll show you to demonstrate using third-party middleware libraries.
<h3 id="ExpressMiddlewaretopic-6">Why Okta for Express Applications</h3>
At Okta, our goal is to make <a href="https://developer.okta.com/product/user-management/">identity management</a> a lot easier, more secure, and more scalable than what you’re used to.

Okta is a cloud service that allows developers to create, edit, and securely store user accounts and user account data, and connect them with one or multiple applications.

Our API enables you to:
<a href="https://developer.okta.com/product/authentication/">Authenticate</a> and <a href="https://developer.okta.com/product/authorization/">authorize</a> your users
Store data about your users
Perform password-based and <a href="https://developer.okta.com/authentication-guide/social-login/">social login</a>
Secure your application with <a href="https://developer.okta.com/use_cases/mfa/">multi-factor authentication</a>
And much more! Check out our <a href="https://developer.okta.com/documentation/">product documentation</a>
<h3 id="ExpressMiddlewaretopic-7">Okta’s OIDC Express Middleware</h3>
To install Okta’s OIDC middleware for Express, run:
<k>npm install @okta/oidc-middleware@0.1.3 --save</k>
Then in the <k>server.js</k> file, you create an instance if the middleware with some configuration options so that Okta knows how to connect to your Okta application.
<k>const oidc = new ExpressOIDC({
issuer: 'https://{yourOktaDomain}/oauth2/default',
client_id: '{yourClientId}',
client_secret: '{yourClientSecret}',
redirect_uri: 'http://localhost:3000/authorization-code/callback',
scope: 'openid profile'
});</k>
You’ll also need to tell Express to use the OIDC middleware router instead of the default router.
<k>app.use(oidc.router);</k>
Then you use it like any other middleware:
<k>app.get('/protected', oidc.ensureAuthenticated(), (req, res) => {
res.send('Top Secret');
});</k>
The <k>oidc.ensureAuthenticated()</k> function is a middleware in the Okta library.

It runs a function to see if the current user is logged in.

If they are, it calls <k>next()</k> to let the <k>app.get()</k> function continue handling the request.

If they aren’t it will send back an <k>HTTP 401 (Unauthorized)</k> response.
<h3 id="ExpressMiddlewaretopic-8">Middleware Order is Important</h3>
When a request is received by Express, each middleware that matches the request is run in the order it is initialized until there is a terminating action (like a response being sent).

<img class="lazy" data-src="https://developer.okta.com/assets-jekyll/blog/express-middleware-examples/middleware-30b3b30ad54e21d8281719042860f3edd9fb1f40f93150233a08165d908f4631.png">
So if an error occurs, all middleware that is meant to handle errors will be called in order until one of them does not call the <k>next()</k> function call.
<h3 id="ExpressMiddlewaretopic-9">Error Handling in Express Middleware</h3>
Express has a built-in default error handler that is inserted at the end of the middleware pipeline that handles any unhandled errors that may have occurred in the pipeline.

Its signature adds an error parameter to the standard parameters of request, response, and next.

The basic signature looks like this:
<k>app.use((err, req, res, next) => {
// middleware functionality here
})</k>
In order to call an error-handling middleware, you simply pass the error to <k>next()</k>, like this:
<k>app.get('/my-other-thing', (req, res, next) => {
next(new Error('I am passing you an error!'));
});
app.use((err, req, res, next) => {
console.log(err);    
if(!res.headersSent){
res.status(500).send(err.message);
}
});</k>
In this case, the error handling middleware at the end of the pipeline will handle the error.

You might also notice that I checked the <k>res.headersSent</k> property.

This just checks to see if the response has already sent the headers to the client.

If it hasn’t it sends a 500 HTTP status and the error message to the client.

You can also chain error-handling middleware.

This is common to handle different types of errors in different ways.

For instance:
<k>
app.get('/nonexistant', (req, res, next) => {
let err = new Error('I couldn\'t find it.');
err.httpStatusCode = 404;
next(err);
});
app.get('/problematic', (req, res, next) => {
let err = new Error('I\'m sorry, you can\'t do that, Dave.');
err.httpStatusCode = 304;
next(err);
});
// handles not found errors
app.use((err, req, res, next) => {
if (err.httpStatusCode === 404) {
res.status(400).render('NotFound');
}
next(err);
});
// handles unauthorized errors
app.use((err, req, res, next) => {
if(err.httpStatusCode === 304){
res.status(304).render('Unauthorized');
}
next(err);
})
// catch all
app.use((err, req, res, next) => {
console.log(err);
if (!res.headersSent) {
res.status(err.httpStatusCode || 500).render('UnknownError');
}
});</k>
In this case, the middleware checks to see if a 404 (not found) error was thrown.

If so, it renders the ‘NotFound’ template page and then passes the error to the next item in the middleware.

The next middleware checks to see if a 304 (unauthorized) error was thrown.

If it was, it renders the ‘Unauthorized’ page, and passes the error to the next middleware in the pipeline.

Finally the “catch all” error handler just logs the error and if no response has been sent, it sends the error’s <k>httpStatusCode</k> (or an HTTP 500 status if none is provided) and renders the ‘UnknownError’ template.
<h3 id="ExpressMiddlewaretopic-10">Learn More About Express Middleware</h3>
For detailed instructions on setting up the Okta OIDC middleware, you can follow the <a href="https://developer.okta.com/quickstart/#/okta-sign-in-page/nodejs/express">ExpressJS Quickstart</a>.
There is also a list of officially supported Express middleware in this <a href="https://github.com/senchalabs/connect#middleware">GitHub repo</a> you can try out and dig into to learn more
Finally, if you’re interested in learning more about how to use Okta, there’s an <a href="https://github.com/okta/okta-sdk-nodejs">Okta Node SDK</a> for implementing more user management functionality in your application.
<h2>How To Use And Write Express Middleware</h2>
<div id="Middlewaretoc" class="toc"><a href="#Middlewaretopic-0" target="_self"><span class="orange">Setting Up An Express Server</span></a><br><a href="#Middlewaretopic-1" target="_self"><span class="orange">What Is Middleware?</span></a><br><a href="#Middlewaretopic-2" target="_self"><span class="orange">How To Create Logging Middleware</span></a><br><a href="#Middlewaretopic-3" target="_self"><span class="orange">Advanced Middleware Example</span></a><br><a href="#Middlewaretopic-4" target="_self"><span class="orange">Middleware Additional Information</span></a><br><a href="#Middlewaretopic-5" target="_self">1.
Controller Actions Are Just Like Middleware</a><br><a href="#Middlewaretopic-6" target="_self">2.
Calling next Is Not The Same As Calling return</a><br><a href="#Middlewaretopic-7" target="_self">3.
Middleware Will Execute In Order</a><br><a href="#Middlewaretopic-8" target="_self">Conclusion</a><br></div>
<br><br>
Middleware is an often misunderstood Middlewaretopic since it sounds and appears very complicated, but in reality middleware is actually really straightforward.

The entire idea of middleware is to execute some code before the controller action that sends the response and after the server gets the request from the client.

Essentially it is code that executes in the middle of your request, hence the name middleware.

Before I get too in depth on the details of middleware, though, I want to setup a basic Express server with two routes.<em>If you prefer to learn visually, check out the video version of this article.</em>
<h3 id="Middlewaretopic-0"><span class="orange">Setting Up An Express Server</span></h3>
To get started working with a Node.js project you will need to run
<k>npm init -y</k>.

This will create a basic package.json file with all of the default values filled in for you.

From there the next thing to do is install Express by running <k>npm i express</k>.

Lastly, we need to create a server.js file with the following code.
<k>const express = require('express')
const app = express()
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', (req, res) => {
res.send('Users Page')
})
app.listen(3000, () => console.log('Server Started'))
</k>This server.js file simply sets up a server on port 3000 that has two routes, a home page route and a users page route.

The last thing to do is run <k>node server.js</k> to start up the application and if everything worked you should see a message in the console saying <strong>Server Started</strong>.

You can then open up any browser to <k>localhost:3000</k> and you should see the message <strong>Home Page</strong>.

If you go to <k>localhost:3000/users</k> you should then see the message <strong>Users Page</strong>.That is all the basic setup we will need for the rest of this article.

As we make changes you will need to restart your server in the console to see the changes take effect.
<h3 id="Middlewaretopic-1"><span class="orange">What Is Middleware?</span></h3>
I talked briefly about middleware as functions that execute after the server receives the request and before the controller action sends the response, but there are a few more things that are specific to middleware.

The biggest thing is that middleware functions have access to the response (<k>res</k>) and request (<k>req</k>) variables and can modify them or use them as needed.

Middleware functions also have a third parameter which is a <k>next</k> function.

This function is important since it must be called from a middleware for the next middleware to be executed.

If this function is not called then none of the other middleware including the controller action will be called.This is all a bit difficult to understand just from text so in the next section we are going to create a logging middleware that will<span class="orange"> log the url of the request a </span>user makes.
<h3 id="Middlewaretopic-2"><span class="orange">How To Create Logging Middleware</span></h3>
As I mentioned in the previous section, middleware takes three parameters, <k>req</k>, <k>res</k>, and <k>next</k>, so in order to create middleware we need to create a function that has those three inputs.<k>const express = require('express')
const app = express()
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', (req, res) => {
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log('Inside Middleware')
}
app.listen(3000, () => console.log('Server Started'))
</k>We now have the shell of a basic middleware function defined with some placeholder content, but the application is not using it.

Express has a few different ways you can define middleware to be used, but for this example we will make this middleware execute before every single controller action by adding it to the application level.

This can be done by using the <k>use</k> function on the <k>app</k> variable like this.<k>const express = require('express')
const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', (req, res) => {
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log('Inside Middleware')
}
app.listen(3000, () => console.log('Server Started'))
</k>The application is now using the middleware that we defined and if we restart our server and navigate to any of the pages in our app you will notice that in the console the message <strong>Inside Middleware</strong> appears.

This is great, but there is a slight problem.

The application now loads forever and never actually finishes the request.

This is because in our middleware we are not calling the <k>next</k> function so the controller action never gets called.

We can fix this by calling <k>next</k> after our logging.<k>const express = require('express')
const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', (req, res) => {
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log('Inside Middleware')
next()
}
app.listen(3000, () => console.log('Server Started'))
</k>Now if you restart the server you will notice that everything is logging correctly, and the web page is properly loading.

The next thing to do is to actually log out the URL that the user is accessing inside the middleware.

This is where the <k>req</k> variable will come in handy.<k>const express = require('express')
const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', (req, res) => {
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()
}
app.listen(3000, () => console.log('Server Started'))
</k>The logging middleware is now working 100% correctly on all the routes in the application, but we have only scratched the surface on the usefulness of middleware.

In the next example we are going to take a look at creating a simp<span class="orange">le authorization middleware for</span> the users page.
<h3 id="Middlewaretopic-3"><span class="orange">Advanced Middleware Example</span></h3>
To get started we need to create another function to use as middleware.<k>const express = require('express')
const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', (req, res) => {
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()
}
function authorizeUsersAccess(req, res, next) {
console.log('authorizeUsersAccess Middleware')
next()
}
app.listen(3000, () => console.log('Server Started'))
</k>This is just a shell of a function to be used as middleware, but we can add it to our users page route now in order to ensure that our middleware is only being executed on the users page route.

This can be done by adding the function as a parameter to the <k>app.get</k> function for the users page.<k>const express = require('express')
const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', authorizeUsersAccess, (req, res) => {
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()
}
function authorizeUsersAccess(req, res, next) {
console.log('authorizeUsersAccess Middleware')
next()
}
app.listen(3000, () => console.log('Server Started'))
</k>Now if you restart the server and go to the users page you should see the message <strong>authorizeUsersAccess Middleware</strong>, but if you go to the home page this message will not show up.

We now have middleware that only executes on a single route in the application.

The next thing to do is fill in the logic of this function so that if the user does not have access to the page they will get an error message instead.<k>const express = require('express')
const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', authorizeUsersAccess, (req, res) => {
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()
}
function authorizeUsersAccess(req, res, next) {
if (req.query.admin === 'true') {
next()
} else {
res.send('ERROR: You must be an admin')
}
}
app.listen(3000, () => console.log('Server Started'))
</k>This middleware now checks to see if the query parameter <k>admin=true</k> is in the URL and if it is not an error message is shown to the user.

You can test this by going to <k>http://localhost:3000/users</k> and you will see an error message explaining that you are not a admin.

If you instead go to <k>http://localhost:3000/users?admin=true</k> you will be sent the normal users page since you set the query parameter of admin to true.One other thing that is really useful with middleware is the ability to send data between middleware.

There is no way to do this with the next function, but you can modify the <k>req</k> or <k>res</k> variables to set your own custom data.

For example in the previous example if we wanted to set a variable to true if the user was a admin we could easily do that.<k>const express = require('express')
const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) => {
res.send('Home Page')
})
app.get('/users', authorizeUsersAccess, (req, res) => {
console.log(req.admin)
res.send('Users Page')
})
function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()
}
function authorizeUsersAccess(req, res, next) {
if (req.query.admin === 'true') {
req.admin = true
next()
} else {
res.send('ERROR: You must be an admin')
}
}
app.listen(3000, () => console.log('Server Started'))
</k>This code sets an admin variable on the <k>req</k> object which is then accessed in the controller action for the users page.
<h3 id="Middlewaretopic-4"><span class="orange">Middleware Additional Information</span></h3>
This is the majority of everything you need to know about middleware functions, but there a few extra things that are important to know.
<h3 id="Middlewaretopic-5">1.
Controller Actions Are Just Like Middleware</h3>One thing you may have noticed is that controller actions which have a <k>req</k>, and <k>res</k> variable are very similar to middleware.

That is because they are essentially middleware, but with no other middleware that comes after them.

They are the end of the chain which is why there are never any next calls inside the controller action.
<h3 id="Middlewaretopic-6">2.
Calling next Is Not The Same As Calling return</h3>By far the biggest mistake I see developers make when working with middleware is that they treat the <k>next</k> function as if it exited out of the middleware.

Take for example this middleware.<k>function middleware(req, res, next) {
if (req.valid) {
next()
}
res.send('Invalid Request')
}
</k>At face value this code looks correct.

If the request is valid then the <k>next</k> function is called and if it isn't valid then it is sending an error message.

The problem is that the <k>next</k> function does not actually return from the middleware function.

This means that when <k>next</k> is called the next middleware will execute and that will continue until no more middleware is left to execute.

Then after all the middleware after this middleware is done executing the code will pick back up right after the <k>next</k> call in each of the middleware.

That means that in this middleware the error message will always be sent to the user which is obviously not what you want.

An easy way to prevent this is by simply returning when you call <k>next</k><k>function middleware(req, res, next) {
if (req.valid) {
return next()
}
res.send('Invalid Request')
}
</k>Now the code will no longer execute after calling <k>next</k> since it will return out of the function.

An easy way to see this issue in action is with the following code.<k>const express = require('express')
const app = express()
app.get('/', middleware, (req, res) => {
console.log('Inside Home Page')
res.send('Home Page')
})
function middleware(req, res, next) {
console.log('Before Next')
next()
console.log('After Next')
}
app.listen(3000, () => console.log('Server Started'))
</k>When you run this code and go to the home page the console will print out the following messages in order.<k>Before Next
Inside Home Page
After Next</k>Essentially what is happening is the middleware is called and it logs out the before statement.

Then next is called so the next set of middleware is called which is the controller action where the home page message is logged.

Lastly the controller action finishes executing so the middleware then executes the code after <k>next</k> which logs out the after statement.
<h3 id="Middlewaretopic-7">3.
Middleware Will Execute In Order</h3>This may seem self-explanatory but when you define middleware it will execute in the order it is used.

Take for example the following code.<k>const express = require('express')
const app = express()
app.use(middlewareThree)
app.use(middlewareOne)
app.get('/', middlewareTwo, middlewareFour, (req, res) => {
console.log('Inside Home Page')
res.send('Home Page')
})
function middlewareOne(req, res, next) {
console.log('Middleware One')
next()
}
function middlewareTwo(req, res, next) {
console.log('Middleware Two')
next()
}
function middlewareThree(req, res, next) {
console.log('Middleware Three')
next()
}
function middlewareFour(req, res, next) {
console.log('Middleware Four')
next()
}
app.listen(3000, () => console.log('Server Started'))
</k>Since the <k>app.use</k> statements come first the middleware in those statements will be executed first in the order they were added.

Next the <k>app.get</k> middleware is defined and again they will be executed in the order they are in the <k>app.get</k> function.

This will lead to the following console output if ran.<k>Middleware Three
Middleware One
Middleware Two
Midd<span class="orange">leware Four</span></k>
<h3 id="Middlewaretopic-8">Conclusion</h3>
That is all there is to know about middleware.

Middleware is incredibly powerful for cleaning up code and making things like user authorization and authentication much easier, but it can be used for so much more than just that because of the incredible flexibility of middleware.
<h2>Tesseract.js: OCR Remote Images</h2>
Tesseract.js works with a &lt;script> tag via local copy or CDN, with webpack via npm and on Node.js with npm/yarn.
CDN
&lt;!-- v2 -->
&lt;script src='https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js'>&lt;/script>
After including the script the Tesseract variable will be globally available.
<div id="OCRImagestoc" class="toc"><a href="#OCRImagestopic-0" target="_self">Download a remote file with Node.js</a><br><a href="#OCRImagestopic-1" target="_self">OCR a local image with Tesseract.js and Node.js</a><br><a href="#OCRImagestopic-2" target="_self">OCR a remote image with Tesseract.js</a><br></div>
<br><br>
Tesseract.js is a JavaScript OCR library based on the world’s most popular Optical Character Recognition engine.

It’s insanely easy to use on both the client-side and on the server with Node.js.

Server side, Tesseract.js only works with local images.

But, with a little help from the request Node package, we can download a remote image from a URL and then OCR it with Tesseract.js.

We’ll tackle this in three steps: 
Write code to download a remote file with Node
Write code to OCR that local file with Tessearct
Put the two snippets together
The final product will take just fifteen lines of JavaScript to OCR images from a URL.

Sound good? Let’s get started.
<h3 id="OCRImagestopic-0">Download a remote file with Node.js</h3>
Request “is designed to be the simplest way possible to make http calls” in Node.js.

We’ll use it to open a URL and then pipe the stream to the local file system using the Node.js standard library.

When finished, we’ll fire off a callback.

Paste this code into a new file called download.js: 
<k>var request = require('request')
var fs = require('fs')
var url = 'http://tesseract.projectnaptha.com/img/eng_bw.png'
var filename = 'pic.png'
var writeFileStream = fs.createWriteStream(filename)
request(url).pipe(writeFileStream).on('close', function() {
console.log(url, 'saved to', filename)
})</k>
We’re using the sample image from the Tesseract documentation, which looks like this:
<img class="lazy" data-src="http://tesseract.projectnaptha.com/img/eng_bw.png">
Install request and run the script:
<k>npm install request
node download.js</k>
Check your directory and you should see a new file.

Now let’s OCR that downloaded file.

<h3 id="OCRImagestopic-1">OCR a local image with Tesseract.js and Node.js</h3>
Getting started with Tesseract.js is dead simple.

Paste this code into a file called ocr.js.

<k>var Tesseract = require('tesseract.js')
var filename = 'pic.png'
Tesseract.recognize(filename)
.progress(function  (p) { console.log('progress', p)  })
.catch(err => console.error(err))
.then(function (result) {
console.log(result.text)
process.exit(0)
})</k>
Install Tesseract.js and run the script: 
<k>npm install tesseract.js
node ocr.js</k>
Once Tesseract starts up (~10 seconds on my MacBook Pro), we’ll see progress updates and then find the recognized text in <k>result.text</k>.

There’s a <i>ton</i> more data hiding in <k>result</k> if you’re inclined to go digging.
<img class="lazy" data-src="https://s3.amazonaws.com/com.twilio.prod.twilio-docs/original_images/tesseract-js.gif">
We now have code to download a remote file and code to OCR a local file — we just need to put them together.

<h3 id="OCRImagestopic-2">OCR a remote image with Tesseract.js</h3>
Paste this code into a new file called download-and-ocr.js: 
<k>var Tesseract = require('tesseract.js')
var request = require('request')
var fs = require('fs')
var url = 'http://tesseract.projectnaptha.com/img/eng_bw.png'
var filename = 'pic.png'
var writeFile = fs.createWriteStream(filename)
request(url).pipe(writeFile).on('close', function() {
console.log(url, 'saved to', filename)
Tesseract.recognize(filename)
.progress(function  (p) { console.log('progress', p)  })
.catch(err => console.error(err))
.then(function (result) {
console.log(result.text)
process.exit(0)
})
});</k>
All we’ve done here is: 
Start with the script from download.js 
Require Tesseract.js
Paste the the code from ocr.js into the callback that’s run when the file finishes downloading.

Give the script a run, swapping in your own picture URL if you so please: 
<k>node download-and-ocr.js</k>
<b>Next Steps</b>
That’s it! Three simple steps and we’re using Tesseract.js to perform OCR on an image from a URL.

My personal motivation is to use Tesseract.js in conjunction with Twilio MMS to process photos that I snap while running around NYC.

Perhaps I’ll grep phone numbers out of ads and run them through our Lookup API to see if they’re Twilio numbers.

What are you going to build? 
If you’d like to learn more, check out:
Docs for Request file streaming in Node.js
Full API docs for Tesseract.js
Twilio JavaScript quickstarts
If you enjoyed this post, give a shout-out to Guillermo Webster and Kevin Kwok for their heroic effort porting Tesseract to JS.

And, of course, feel free to drop me a line if you have any questions or build something you’d like to show off.
<h2>console methods</h2>
<div id="consolemethodstoc" class="toc"><a href="#consolemethodstopic-0" target="_self">methods</a><br><a href="#consolemethodstopic-1" target="_self"> console.assert()</a><br><a href="#consolemethodstopic-2" target="_self"> console.clear()</a><br><a href="#consolemethodstopic-3" target="_self"> console.count()</a><br><a href="#consolemethodstopic-4" target="_self"> console.countReset()</a><br><a href="#consolemethodstopic-5" target="_self"> console.debug()</a><br><a href="#consolemethodstopic-6" target="_self"> console.dir()</a><br><a href="#consolemethodstopic-7" target="_self"> console.dirxml()</a><br><a href="#consolemethodstopic-8" target="_self"> console.error()</a><br><a href="#consolemethodstopic-9" target="_self"> console.exception()</a><br><a href="#consolemethodstopic-10" target="_self"> console.group()</a><br><a href="#consolemethodstopic-11" target="_self"> console.groupCollapsed()</a><br><a href="#consolemethodstopic-12" target="_self"> console.groupEnd()</a><br><a href="#consolemethodstopic-13" target="_self"> console.info()</a><br><a href="#consolemethodstopic-14" target="_self"> console.log()</a><br><a href="#consolemethodstopic-15" target="_self"> console.table()</a><br><a href="#consolemethodstopic-16" target="_self"> console.time()</a><br><a href="#consolemethodstopic-17" target="_self"> console.timeEnd()</a><br><a href="#consolemethodstopic-18" target="_self"> console.timeLog()</a><br><a href="#consolemethodstopic-19" target="_self"> console.trace()</a><br><a href="#consolemethodstopic-20" target="_self"> console.warn()</a><br><a href="#consolemethodstopic-21" target="_self">Examples</a><br><a href="#consolemethodstopic-22" target="_self"> Outputting text to the console</a><br><a href="#consolemethodstopic-23" target="_self"> Using groups in the console</a><br><a href="#consolemethodstopic-24" target="_self"> Timers</a><br><a href="#consolemethodstopic-25" target="_self"> Stack traces</a><br></div>
<br><br>
<h3 id="consolemethodstopic-0">methods</h3>
<b id="consolemethodstopic-1"> console.assert()</b>
Log a message and stack trace to console if the first argument is false.
<b id="consolemethodstopic-2"> console.clear()</b>
Clear the console.
<b id="consolemethodstopic-3"> console.count()</b>
Log the number of times this line has been called with the given label.
<b id="consolemethodstopic-4"> console.countReset()</b>
Resets the value of the counter with the given label.
<b id="consolemethodstopic-5"> console.debug()</b>
Outputs a message to the console with the log level debug.
<b id="consolemethodstopic-6"> console.dir()</b>
Displays an interactive listing of the properties of a specified JavaScript object.
This listing lets you use disclosure triangles to examine the contents of child objects.
<b id="consolemethodstopic-7"> console.dirxml()</b>
Displays an XML/HTML Element representation of the specified object if possible or the JavaScript Object view if it is not possible.
<b id="consolemethodstopic-8"> console.error()</b>
Outputs an error message.
You may use string substitution and additional arguments with this method.
<b id="consolemethodstopic-9"> console.exception()</b>
An alias for error().
<b id="consolemethodstopic-10"> console.group()</b>
Creates a new inline group, indenting all following output by another level.
To move back out a level, call groupEnd().
<b id="consolemethodstopic-11"> console.groupCollapsed()</b>
Creates a new inline group, indenting all following output by another level.
However, unlike group() this starts with the inline group collapsed requiring the use of a disclosure button to expand it.
To move back out a level, call groupEnd().
<b id="consolemethodstopic-12"> console.groupEnd()</b>
Exits the current inline group.
<b id="consolemethodstopic-13"> console.info()</b>
Informative logging of information.
You may use string substitution and additional arguments with this method.
<b id="consolemethodstopic-14"> console.log()</b>
For general output of logging information.
You may use string substitution and additional arguments with this method.
console.profile() 
Starts the browser's built-in profiler (for example, the Firefox performance tool).
You can specify an optional name for the profile.
console.profileEnd() 
Stops the profiler.
You can see the resulting profile in the browser's performance tool (for example, the Firefox performance tool).
<b id="consolemethodstopic-15"> console.table()</b>
Displays tabular data as a table.
<b id="consolemethodstopic-16"> console.time()</b>
Starts a timer with a name specified as an input parameter.
Up to 10,000 simultaneous timers can run on a given page.
<b id="consolemethodstopic-17"> console.timeEnd()</b>
Stops the specified timer and logs the elapsed time in milliseconds since it started.
<b id="consolemethodstopic-18"> console.timeLog()</b>
Logs the value of the specified timer to the console.
console.timeStamp() 
Adds a marker to the browser's Timeline or Waterfall tool.
<b id="consolemethodstopic-19"> console.trace()</b>
Outputs a stack trace.
<b id="consolemethodstopic-20"> console.warn()</b>
Outputs a warning message.
You may use string substitution and additional arguments with this method.
<h3 id="consolemethodstopic-21">Examples</h3>
<h3 id="consolemethodstopic-22"> Outputting text to the console</h3>
The most frequently-used feature of the console is logging of text and other data.
There are four categories of output you can generate, using the console.log(), console.info(), console.warn(), and console.error() methods respectively.
Each of these results in output styled differently in the log, and you can use the filtering controls provided by your browser to only view the kinds of output that interest you.
There are two ways to use each of the output methods; you can pass in a list of objects whose string representations get concatenated into one string, then output to the console, or you can pass in a string containing zero or more substitution strings followed by a list of objects to replace them.
<h4>Outputting a single object</h4>
The simplest way to use the logging methods is to output a single object:
var someObject = { str: "Some text", id: 5 };
console.log(someObject);
The output looks something like this:
[09:27:13.475] ({str:"Some text", id:5})
<h4>Outputting multiple objects</h4>
You can also output multiple objects by listing them when calling the logging method, like this:
var car = "Dodge Charger";
var someObject = { str: "Some text", id: 5 };
console.info("My first car was a", car, ".
The object is:", someObject);
This output will look like this:
[09:28:22.711] My first car was a Dodge Charger .
The object is: ({str:"Some text", id:5})
<h4>Using string substitutions</h4>
When passing a string to one of the console object's methods that accepts a string (such as log()), you may use these substitution strings:
%o or %O
Outputs a JavaScript object.
Clicking the object name opens more information about it in the inspector.
%d or %i
Outputs an integer.
Number formatting is supported, for example console.log("Foo %.2d", 1.1) will output the number as two significant figures with a leading 0: Foo 01
%s
Outputs a string.
%f
Outputs a floating-point value.
Formatting is supported, for example console.log("Foo %.2f", 1.1) will output the number to 2 decimal places: Foo 1.10
<strong>Note:</strong> Precision formatting doesn't work in Chrome
Each of these pulls the next argument after the format string off the parameter list.
For example:
for (var i=0; i&lt;5; i++) {
console.log("Hello, %s.
You've called me %d times.", "Bob", i+1);
}
The output looks like this:
[13:14:13.481] Hello, Bob.
You've called me 1 times.
[13:14:13.483] Hello, Bob.
You've called me 2 times.
[13:14:13.485] Hello, Bob.
You've called me 3 times.
[13:14:13.487] Hello, Bob.
You've called me 4 times.
[13:14:13.488] Hello, Bob.
You've called me 5 times.
<h4>Styling console output</h4>
You can use the %c directive to apply a CSS style to console output:
console.log("This is %cMy stylish message", "color: yellow; font-style: italic; background-color: blue;padding: 2px");
The text before the directive will not be affected, but the text after the directive will be styled using the CSS declarations in the parameter.
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/css-styling.png">
You may use %c multiple times:
console.log("Multiple styles: %cred %corange", "color: red", "color: orange", "Additional unformatted message");
The properties usable along with the %c syntax are as follows (at least, in Firefox — they may differ in other browsers):
background and its longhand equivalents.
border and its longhand equivalents
border-radius
box-decoration-break
box-shadow
clear and float
color
cursor
display
font and its longhand equivalents
line-height
margin
outline and its longhand equivalents
padding
text-* properties such as text-transform
white-space
word-spacing and word-break
writing-mode
<strong>Note:</strong> The console message behaves like an inline element by default.
To see the effects of padding, margin, etc.
you should set it to for example display: inline-block.
<h3 id="consolemethodstopic-23"> Using groups in the console</h3>
You can use nested groups to help organize your output by visually combining related material.
To create a new nested block, call console.group().
The console.groupCollapsed() method is similar but creates the new block collapsed, requiring the use of a disclosure button to open it for reading.
To exit the current group, call console.groupEnd().
For example, given this code:
console.log("This is the outer level");
console.group("First group");
console.log("In the first group");
console.group("Second group");
console.log("In the second group");
console.warn("Still in the second group");
console.groupEnd();
console.log("Back to the first group");
console.groupEnd();
console.debug("Back to the outer level");
The output looks like this:
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/console_groups_demo.png" alt="Demo of nested groups in Firefox console">
<h3 id="consolemethodstopic-24"> Timers</h3>
You can start a timer to calculate the duration of a specific operation.
To start one, call the console.time() method, giving it a name as the only parameter.
To stop the timer, and to get the elapsed time in milliseconds, just call the console.timeEnd() method, again passing the timer's name as the parameter.
Up to 10,000 timers can run simultaneously on a given page.
For example, given this code:
console.time("answer time");
alert("Click to continue");
console.timeLog("answer time");
alert("Do a bunch of other stuff...");
console.timeEnd("answer time");
Will log the time needed by the user to dismiss the alert box, log the time to the console, wait for the user to dismiss the second alert, and then log the ending time to the console:
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/console-timelog.png">
Notice that the timer's name is displayed both when the timer is started and when it's stopped.
<strong>Note:</strong> It's important to note that if you're using this to log the timing for network traffic, the timer will report the total time for the transaction, while the time listed in the network panel is just the amount of time required for the header.
If you have response body logging enabled, the time listed for the response header and body combined should match what you see in the console output.
<h3 id="consolemethodstopic-25"> Stack traces</h3>
The console object also supports outputting a stack trace; this will show you the call path taken to reach the point at which you call console.trace().
Given code like this:
function foo() {
function bar() {
console.trace();
}
bar();
}
foo();
The output in the console looks something like this:
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/api-trace2.png">
<h2>to hide url from browser using Javascript</h2>
&lt;a href="#" onclick="location.href='https://actualwizard.com'">Mousing over this URL will display the current URL followed by a pound symbol.&lt;/a>
<h2>Create a circle out of three points</h2>
https://github.com/infusion/Circle.js
Circle.js
https://www.xarg.org/2018/02/create-a-circle-out-of-three-points/"
Create a circle out of three points
var circle = require('circle.js');
&lt;script src="circle.js">&lt;/script>
&lt;script>
var p1 = {x: 20, y: 10};
var p2 = {x: 10, y: 100};
var p3 = {x: 0, y: 50};
function circleFromThreePoints(p1, p2, p3) {
var x1 = p1.x;
var y1 = p1.y;
var x2 = p2.x;
var y2 = p2.y;
var x3 = p3.x;
var y3 = p3.y;
var a = x1 * (y2 - y3) - y1 * (x2 - x3) + x2 * y3 - x3 * y2;
var b = (x1 * x1 + y1 * y1) * (y3 - y2) 
+ (x2 * x2 + y2 * y2) * (y1 - y3)
+ (x3 * x3 + y3 * y3) * (y2 - y1);
var c = (x1 * x1 + y1 * y1) * (x2 - x3) 
+ (x2 * x2 + y2 * y2) * (x3 - x1) 
+ (x3 * x3 + y3 * y3) * (x1 - x2);
var x = -b / (2 * a);
var y = -c / (2 * a);
return {
x: x,
y: y,
r: Math.hypot(x - x1, y - y1)
};
}
&lt;/script>
Functions
intersect(a, b)
Determines if two circles intersect
intersection(a, b)
Calculates the intersection points of two circles
intersectionArea(a, b)
Calculates the intersection area of two circles
area(a)
Calculates the area of a circle
height(a)
Calculates the height of a circle.
Obviously, this is the same as the width.
width(a)
Calculates the width of a circle.
Obviously, this is the same as the height.
perimater(a)
Calculates the perimeter of a circle
center(a)
Calculates the center point of a circle.
Simply it's coordinates.
insetBy(a)
Resizes the circle by a given value on the center
fromThreePoints(p1, p2, p3)
Caclulates a circle {x, y, r} with given three {x, y} points
<h2>auto scroll</h2>
function pageScroll() {
window.scrollBy(0,1);
scrolldelay = setTimeout(pageScroll,10);
}
pageScroll();
stop-scrolling
Do it simply by adding a class to the body:
.stop-scrolling { height: 100%; overflow: hidden; }
Add the class then remove when you want to re-enable scrolling
modify:
chkKey() {
if(testkey == " "){ randomScroll();}
add:
function randomScroll(){
// $('body').addClass('stop-scrolling')
// $("body").removeClass('stop-scrolling');
// $("body").toggleClass('stop-scrolling');
topicpointer = Math.floor(Math.random() * topicLength)
window.location = "#topic-" + topicpointer;
pageScroll();
}
function pageScroll() {
window.scrollBy(0,1);
scrolldelay = setTimeout(pageScroll,10);
}
call:
randomScroll()
<h2>detect triple click</h2>
window.addEventListener('click', function (evt) {
if (evt.detail === 3) {
alert('triple click!');
$("body").toggleClass('stop-scrolling');
}
});
<h2>Disable Scrolling on Body</h2>
https://linuxhint.com/disable-scrolling-javascript/
Set height and overflow:
html, body {margin: 0; height: 100%; overflow: hidden}
HTML css works fine
&lt;body scroll="no">
<h2>Javascript Records and Tuples</h2>
<div id="RecordsTuplestoc"><a href="#RecordsTuplestopic-0" target="_self">Support for Records and Tuples</a><br><a href="#RecordsTuplestopic-1" target="_self">What are Records and Tuples in Javascript?</a><br><a href="#RecordsTuplestopic-2" target="_self">Records and Tuples are immutable</a><br><a href="#RecordsTuplestopic-3" target="_self">Records and Tuples compare Values, not Identity</a><br><a href="#RecordsTuplestopic-4" target="_self">Converting Arrays to Tuples and Objects to Records in Javascript</a><br><a href="#RecordsTuplestopic-5" target="_self">Adding to a Tuple or Record</a><br><a href="#RecordsTuplestopic-6" target="_self">Interacting with Tuples and Records in Javascript</a><br><a href="#RecordsTuplestopic-7" target="_self">Conclusion</a><br></div></center>
Records and Tuples are an upcoming feature for Javascript, which may be familiar if you have used other languages except.

They are very similar to <k>Arrays</k> and <k>Objects</k>, the key difference being that they are immutable, meaning they can't be updated or changed.

They give us a brand new primitive type in Javascript, and let us do a lot of things we couldn't previously do, including comparing objects and arrays by value, rather than identity.

In this article, we'll cover how they work, and how you can use them today.
<h3 id="RecordsTuplestopic-0">Support for Records and Tuples</h3>
Currently, records and tuples are a stage 2 proposal for Javascript.

Broadly speaking, this means that they are relatively stable, but not implemented as a standard spec.

As such, major browsers and backend Javascript like Node.JS do not implement them.

You can, however, use them, if you have Babel, by using this polyfill.
<h3 id="RecordsTuplestopic-1">What are Records and Tuples in Javascript?</h3>
<k>Record</k>s and <k>Tuple</k>s introduce a brand new primitive type to Javascript, but ultimately follow the same syntax as <k>Object</k>s and <k>Array</k>s.

When we want to define a new <k>Record</k> or <k>Tuple</k>, we use the syntax <k>#{}</k> or <k>#[]</k>.

As such, we can define both as shown in the code below:
<k>let myRecord = #{
name: "New Record",
tags: #['some', 'tags', 'go', 'here']
}
let myTuple = #['some', 'other', 'set', 'of', 'array', 'items'];
</k>
As you can see, the syntax is <strong>identical</strong> to objects and arrays, with the exception of the hash (<k>#</k>) at the start.

Note, that we can also put a <k>Tuple</k> in our <k>Record</k>, as shown in the first example.
<h3 id="RecordsTuplestopic-2">Records and Tuples are immutable</h3>
Both Records and Tuples in Javascript are deeply immutable.

All that means is that they can't be changed, at any level.

If you try to change them, you'll get an error:
<k>let myRecord = #{
name: "New Record",
tags: #['some', 'tags', 'go', 'here']
}
myRecord.name = 'Another Record'; // This will throw an error
</k>
That also means you can't insert something new into them.

In that way, they act as a source of truth - which brings us onto their main use case.

Both <k>Tuple</k>s and <k>Record</k>s allow us to compare Objects and Arrays based on their value, rather than their identity.
<h3 id="RecordsTuplestopic-3">Records and Tuples compare Values, not Identity</h3>
If you try to run the following code, you'll get <k>false</k> back:
<k>console.log({ a: 1 } === { a: 1 }) // returns false
console.log([1, 2, 3] === [1, 2, 3]) // returns false
</k>
That might be confusing, but it's because equality of Objects and Arrays work on the basis of identity.

When we define a new Object or Array, it is given a unique identity.

As such, when comparing the identity of two different Objects, the result is <k>false</k>.
Records and Tuples break that convention, and allow us to compare by value.

<k>Deep comparisons</k> of objects has been something that's been quite tricky in Javascript for a long time, but with Tuples and Records we can finally do that.

As such, the following code returns true:
<k>console.log(#{ a: { b : 3 }} === #{ a: { b : 3 }}) // return true
console.log(#[1, 2, 3] === #[1, 2, 3]) // returns true
</k>
This means we can finally (and easily) make comparisons of the value between different objects, where we expect a very specific return value.
<h3 id="RecordsTuplestopic-4">Converting Arrays to Tuples and Objects to Records in Javascript</h3>
Since Records and Tuples are compared by value, you may want to convert regular Objects and Arrays into them, so that you can make that comparison.

Fortunately, we can convert any Object or Array into a Record or Tuple using <k>Record()</k> and <k>Tuple()</k>:
<k>let newRecord = Record({ a: 1, b: 2 });
let newTuple = Tuple(...[1, 2, 3, 4, 5]);
let anotherTuple = Tuple.from([1, 2, 3, 4, 5]);
</k>
Both the above lines will produce the Record and Tuple version of each.

Future proposals also include a <k>JSON.parseImmutable</k> function, which will let us convert strings of Arrays or Objects straight into their Tuple or Record form.

This is not currently implemented.
<h3 id="RecordsTuplestopic-5">Adding to a Tuple or Record</h3>
I am aware that I have just said that you can't add to or change a Tuple/Record - but you can produce a new Tuple or Record based on an old one.

This will be a totally different Tuple/Record - but it will use the data from the old and add something new.

We can do that as shown below:
<k>let myTuple = #[1, 2, 3, 4, 5];
let myRecord = #{ a: 1, b: 1 };
// Produce a new record using original myRecord:
let newRecord = #{ ...myRecord, c: 1 } // #{ a: 1, b: 1, c: 1}
// Produce a new tuple using myTuple:
let newTuple = #[ ...myTuple, 6, 7];
// Or you can use Tuple.with():
let anotherTuple = myTuple.with(6, 7);
</k>
<h3 id="RecordsTuplestopic-6">Interacting with Tuples and Records in Javascript</h3>
Tuples and Records work exactly the same as Objects and Arrays except they cannot be changed.

As such, you can iterate through them, or interact with them using the same methods as are available on Objects and Arrays.

For example, we could get all the keys of a particular Record:
<k>let myRecord = #{ a: 1, b: 2, c: 2};
let recordKeys = Object.keys(myRecord); // Returns ['a', 'b', 'c'];
</k>
Or you could iterate over an array using a for loop:
<k>let myTuple = #[1, 2, 3, 4, 5];
for(const i of myTuple) {
console.log(i);
}
// Console logs 1, 2, 3, 4, 5 on after each other
</k>
<h3 id="RecordsTuplestopic-7">Conclusion</h3>
As <k>Tuple</k>s and <k>Record</k>s aren't widely supported, you will need the Babel polyfill to use them.

They allow us to compare data from Objects and Arrays in ways we couldn't before, making code much simpler where it once required complicated custom functions.
<h2>filter null values from array</h2>
let array = [0, 1, null, 2, 3];
function removeNull(array) {
return array.filter(x => x !== null)
};
<h2>Javascript equivalent of http-equiv redirect</h2>
use window.location.reload() to refresh
use setTimeout(function() { window.location.reload(); }, 35000); to fire after 35 seconds 
use either window.location.replace('http://www.example.com') To redirect to another page
make sure the browser Back button skips the previous page, or window.location = 'http://www.example.com' to preserve the browser history.
<h2>access dom img src</h2>
topicId = "topic-" + topicpointer
document.getElementById([topicId]).attributes.length; // indirect access
document.getElementById([topicId]).attributes
document.getElementById([topicId]).attributes[3]
document.getElementById([topicId]).attributes.src
imgSrc = document.getElementById([topicId]).attributes.src.nodeValue
window.open(imgSrc);
<h2>indirect pointer</h2>
console.log(`My name is ${topicId}`);
console.log('${topicId}');
javascript substitute value of variable
var name = "javascript";
console.log(`My name is ${name}`);
// My name is javascript
<h2>access href.text</h2>
window.location.href.text()
<h2>slide show</h2>
&lt;img name="slide">
&lt;script>
var i = 0; 			// Start Point
var time = 3000;	// Time Between Switch
// Image List
images = [
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/1_1.jpg",
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/2avatar.jpg",
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/3_1.jpg",
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/4.jpg",
]
// Change Image
function changeImg(){
	document.slide.src = images[i]; // element name is slide
	if(i &lt; images.length - 1){ // Check If Index Is Under Max
	  i++;  // Add 1 to Index
	} else { 
		i = 0; // Reset Back To O
	}
	setTimeout("changeImg()", time); // Run function every x seconds
}
window.onload=changeImg; // Run function when page loads
&lt;/script>
<h2>to pass variable in querySelector function()</h2>
https://www.codegrepper.com/code-examples/javascript/how+to+pass+variable+in+querySelector+function%28%29
querySelector with very long selector
document.querySelector('#site-modal > div > div > div > div.modal-body.bb-modal-body-tiled.pb-0 > div:nth-child(3) > div > section > div.bb-tile-content > div > div:nth-child(2) > div > div.collapse.toggleinfo > div:nth-child(5) > div.col-xs-6 > a').outerHTML
(variableInBROWSER => {
return document.querySelector(variableInBROWSER).innerHTML};
);
// This selects the first element with that name
document.querySelector('[name="your-selector-name-here"]');
<H2>scroll to bottom of div</H2>
// To scroll to the bottom of a div
const theElement = document.getElementById('elementID');
const scrollToBottom = (node) => {
	node.scrollTop = node.scrollHeight;
}
scrollToBottom(theElement); // The specified node scrolls to the bottom.
// without smooth-scroll
const scrollToBottom = () => {
		divRef.current.scrollTop = divRef.current.scrollHeight;
};
//with smooth-scroll
const scrollToBottomWithSmoothScroll = () => {
divRef.current.scrollTo({
top: divRef.current.scrollHeight,
behavior: 'smooth',
})
}
scrollToBottom()
scrollToBottomWithSmoothScroll()
//scroll to the bottom of "#myDiv"
var myDiv = document.getElementById("myDiv");
myDiv.scrollTop = myDiv.scrollHeight;
//scroll to the bottom of "#myDiv"
$("#mydiv").scrollTop($("#mydiv")[0].scrollHeight);
<h2>Using Chrome JavaScript Debugger to break on page loading events</h2>
https://stackoverflow.com/questions/6727370/using-chrome-javascript-debugger-how-to-break-on-page-loading-events
https://developer.chrome.com/docs/devtools/javascript/breakpoints/#event-listeners
In Chrome's Developer Tools, go to the Sources tab.

On the right, open up Event Listener Breakpoints, and you can set breakpoints on events.
It sounds as if you'll want to set your breakpoint on DOMContentLoaded, which is under the DOM Mutation section.
After you do this, reload the page and you'll end up in the debugger.
<h2>new JavaScript language features</h2>
<div id="newFeaturestoc" class="toc"><a href="#newFeaturestopic-0" target="_self">String.prototype.replaceAll</a><br><a href="#newFeaturestopic-1" target="_self">promise.any()</a><br><a href="#newFeaturestopic-2" target="_self">AggregateError</a><br><a href="#newFeaturestopic-3" target="_self">New logical assignment operators</a><br><a href="#newFeaturestopic-4" target="_self">Nullish assignment (??=)</a><br><a href="#newFeaturestopic-5" target="_self">And assignment (&amp;&amp;=)</a><br><a href="#newFeaturestopic-6" target="_self">Or assignment (||=)</a><br><a href="#newFeaturestopic-7" target="_self">WeakRef</a><br><a href="#newFeaturestopic-8" target="_self">FinalizationRegistry</a><br><a href="#newFeaturestopic-9" target="_self">Numeric literal separators</a><br><a href="#newFeaturestopic-10" target="_self">Array.prototype.sort improvements</a><br></div></center><br><br>
<h3 id="newFeaturestopic-0">String.prototype.replaceAll</h3>
The <k>replaceAll()</k> method takes a string or regular expression, called the <em>pattern</em>, as its first argument.

The second argument is the pattern's <em>replacement</em>.
Given the first and second argument, <k>replaceAll()</k> returns a new string that will be the source string with all instances of the pattern swapped for the replacement.

The source string is not affected.In ECMAScript 2021, <k>replaceAll()</k> joins ECMAScript 2020’s <k>matchAll()</k> in improving the inherent capabilities of JavaScript’s built-in <k>String</k> object.The <k>replaceAll()</k> method works exactly like <k>replace()</k>, but applies to all occurrences in the string, instead of just the first one.

It’s a welcome addition after years of having to use a library or hand-coded solution.
Listing 1 shows a simple example, wherein we mangle some Shakespeare.
<h4>Listing 1.
replaceAll()</h4>
<k>let quote = "all the world's a stage, and all the men and women merely players";
let newQuote = quote.replaceAll("all", "most of");
console.log(newQuote);</k>
<h3 id="newFeaturestopic-1">promise.any()</h3>The <k>promise.any()</k> method takes a collection of promises and allows you to respond to the first one that completes successfully by returning a new promise.
If any promises are rejected, they are ignored.

(Note this method's contrast with <k>promise.all()</k>, which stops with any error or rejection; and with <k>promise.allSettled()</k>, which lets you observe all promises that resolved in a collection, even if there were intervening errors.)
If any of the promises error out, <k>promise.any()</k> will still act upon the first resolved promise in the collection.
The <k>promise.any()</k> method returns a rejected promise if none of the passed-in promises resolves.

The error it returns is <k>AggregateError</k>, which is a new error type also introduced by ECMAScript 2021.

<k>AggregateError</k> represents the summary of all errors encountered.You can use <k>promise.any()</k> to roll up many promises into a single one.

This promise will resolve to whichever of the collection resolves first, ignoring errors and rejections.

Listing 2 has a simple example.
<h4>Listing 2.
promise.any()—all resolved</h4><k>
const promise1 = new Promise((resolve, reject) => {
setTimeout(resolve, 1000, "1 second");
});
const promise2 = new Promise((resolve, reject) => {
setTimeout(resolve, 2000, "2 second");
});
let promises = [promise1, promise2];
Promise.any(promises).then((firstResolved) => {
console.log(firstResolved); // outputs “1 second”
})
</k>Now consider Listing 3, wherein all promises eventually fail as rejected.
<h4>Listing 3.
promise.any()—all rejected</h4><k>
const promise1 = new Promise((resolve, reject) => {
setTimeout(reject, 1000, "1 second");
});
const promise2 = new Promise((resolve, reject) => {
setTimeout(reject, 2000, "2 second");
});
let promises = [promise1, promise2];
Promise.any(promises).then((firstResolved) => {
console.log(firstResolved);
}).catch((err) => { console.log("error: " + err) }) // outputs error: AggregateError: All promises were rejected
</k>In Listing 3, we add a catch handler, which fires after both promises are rejected.

Notice that <k>AggregateError</k> is an object holding information about the failed promises.

Let's get a closer look at <k>AggregateError</k>, which is another new feature in ECMAScript 2021.
<h3 id="newFeaturestopic-2">AggregateError</h3><k>AggregateError</k> is a special kind of error subclass that combines many errors into a summary object.

As you saw, the <k>promise.any()</k> method in Listing 3 created an <k>AggregateError</k>.In that example, all promises passed to <k>promise.any()</k> failed, so the method returned an <k>AggregateError</k>.

The error contained a message describing the error and an array with details about each error.

Listing 4 shows the contents of the error returned.
<h4>Listing 4.
AggregateError</h4><k>
AggregateError: All promises were rejected
errors: Array(2)
0: "1 second"
1: "2 second"
length: 2
message: "All promises were rejected"
stack: "AggregateError: All promises were rejected"
</k>As shown, <k>AggregateError</k> gives you access to the promise messages that contributed to the error, via <k>AggregateError.errors</k>.
<h3 id="newFeaturestopic-3">New logical assignment operators</h3>JavaScript has familiar math assignment operators such as <k>+=</k>, which perform the operation and assignment in one go, as a kind of convenience.

ECMAScript 2021 adds similar support to the logical operators <k>||</k>, <k>??</k>, and <k>&amp;&amp;</k>.Let’s take a look at each of these.<h3 id="newFeaturestopic-4">Nullish assignment (??=)</h3>You can use the nullish assignment operator to test a variable for being null or undefined.

If the variable is null or undefined, you can assign the right side of the expression to the variable.

Listing 5 is an example.
<h4>Listing 5.
The ??= assignment in action</h4><k>
let quote = "When goodness is lost there is morality.";
let existingQuote = "A leader is best when people barely know he exists";
let nonExistingQuote = null;
existingQuote ??= quote;
nonExistingQuote ??= quote;
console.log(existingQuote); // A leader is best when people barely know he exists
console.log(nonExistingQuote); // When goodness is lost there is morality.
</k>Notice that when used on a variable that exists, like <k>existingQuote</k>, the nullish assignment operator does nothing.

When used on <k>nonExistingQuote</k>, however, it assigns the quote a new value.

Even if the string were empty for <k>existingQuote</k> (which is a falsy value in JavaScript), the nullish assignment will not replace it; it will remain an empty string.

That is the essence of the operator: it only tests for null or undefined.<h3 id="newFeaturestopic-5">And assignment (&amp;&amp;=)</h3>The <em>and</em> assignment operator (<k>&amp;&amp;=</k>) tests the left side of an expression.

If the left side is truthy, it assigns the right side of the expression.

If it is falsy, the operator does nothing.

Listing 6 shows a simple example.
<h4>Listing 6.
The &amp;&amp;= assignment in action</h4><k>
let emptyString = "";
emptyString &amp;&amp;= "bar";
console.log (emptyString); // “”
let nonEmptyString = "foo";
nonEmptyString &amp;&amp;= "bar";
console.log(nonEmptyString); // “bar”
</k>In Listing 6, the first console log outputs an empty string.

This is because the empty string is falsy, so the <k>&amp;&amp;=</k> operator does not assign it a new value.

The second console outputs "<k>bar</k>".

This is because <k>nonEmptyString</k> is “<k>foo</k>”, which is a truthy value.<k>&amp;&amp;=</k> is a kind of edge case operator, but useful when you need it.<h3 id="newFeaturestopic-6">Or assignment (||=)</h3>The <em>or</em> assignment operator is the opposite of the<em> and</em> assignment operator you just saw.

We can use the same example from Listing 6, this time replacing <k>&amp;&amp;=</k> with <k>||=</k>.
<h4>Listing 7.
The ||= assignment in action</h4><k>
let emptyString = "";
emptyString ||= "bar";
console.log (emptyString); // “bar”
let nonEmptyString = "foo";
nonEmptyString ||= "bar";
console.log(nonEmptyString); // “foo”
</k>If the left side of the expression is falsy, the <k>||=</k> assignment operator resolves to the right side.

Therefore, in this case, the <k>emptyString</k> becomes “<k>bar</k>”.

The <k>nonEmptyString</k> variable stays with its truthy value of “<k>foo</k>”.
<h3 id="newFeaturestopic-7">WeakRef</h3>
<a href="https://tc39.es/ecma262/#sec-weak-ref.prototype.deref" rel="nofollow">WeakRef</a> is used to refer to a target object without preserving it from garbage collection.

It is a rather esoteric language feature, not much used by the working coder.

The <a href="https://github.com/tc39/proposal-weakrefs/blob/master/README.md" rel="nofollow">one common use case</a> for <k>WeakRef</k> is in implementing caches or mappings for large objects, "where it’s desired that a large object is not kept alive solely because it appears in a cache or mapping.”So, if you find yourself building a caching solution for large entities, remember that <k>WeakRef</k> exists.

Otherwise, if you are not sure about needing a <k>WeakRef</k> variable reference, you probably should avoid using it.

(The spec itself recommends  avoidance.)
<h3 id="newFeaturestopic-8">FinalizationRegistry</h3>It is a bit of programming irony that JavaScript introduced <k>FinalizationRegistry</k> almost simultaneously with Java’s <a href="https://www.infoworld.com/article/3649089/how-to-handle-java-errors-and-cleanup-without-finalize.html">deprecation of Object.finalize()</a>.

The features are practically analogous.

Like <k>WeakRef</k>, the specification <a href="https://github.com/tc39/proposal-weakrefs/blob/master/README.md#finalizers" rel="nofollow">warns developers away from user-defined finalizers</a>.

For some use cases, however, the new <k>FinalizationRegistry</k> could be just what you need.

The specification offers the example of long-running processes consuming many file handles.

In such a case, using <k>FinalizationRegistry</k> could ensure no handles are leaked.Along with <k>WeakRef</k>, <k>FinalizationRegistry</k> fits better into the toolbox of platform and framework developers, rather than application developers.
<h3 id="newFeaturestopic-9">Numeric literal separators</h3>Numeric separators are a nicety that make looking at large number easier on the eyes.

JavaScript can’t use commas like natural languages, because that symbol is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator" rel="nofollow">already taken</a>.

So, ECMAScript 2021 introduced the <em>underscore</em>.Instead of typing<k>
let distanceToSun = 91772000000;
</k>you can type<k>
let distanceToSun = 91_772_000_000;
</k>The new form is quite a bit easier to read.
<h2>The Definition element</h2>
The HTML element is used to indicate the term being defined within the context of a definition phrase or sentence.

The element, the &lt;dt>/&lt;dd> pairing, or the  element which is the nearest ancestor of the is considered to be the definition of the term.
A validator is a program that checks for syntax errors in code or documents.
<h2>window[className]</h2>
// Would only work in browsers, not NodeJS
let className = "Paintbrush";
console.log( window[className] );
<h2>Big.js tutorial</h2>
<div id="toc" class="toc"><a href="#topic-0" target="_self">Big.js</a><br><a href="#topic-1" target="_self">Setting up Big.js</a><br><a href="#topic-2" target="_self">JavaScript Number precision error</a><br><a href="#topic-3" target="_self">Big.js example</a><br><a href="#topic-4" target="_self">Big.js pow</a><br></div></center><br><br>
Big.js tutorial shows how to work with arbitrary precision big decimal 
arithmetic in JavaScript with Big.js module.
<h3 id="topic-0">Big.js</h3>
Big.js is a small, fast JavaScript library for arbitrary-precision
decimal arithmetic.
In this article we work with Big.js in a Node application.
<h3 id="topic-1">Setting up Big.js</h3>
First, we install Big.js.
$ node -v
v18.2.0
We use Node version 18.2.0.
$ npm init -y
We initiate a new Node application.
$ npm i big.js
We install Big.js with <k>npm i big.js</k> command.
<h3 id="topic-2">JavaScript Number precision error</h3>
In the first example, we show that JavaScript Numbers are not precise for doing
arbitrary precision arithmetic.
count_currency.js
var sum = 0;
// two euros fifty-five cents
var amount = 2.55;
for (let i = 0; i &lt; 100000; i++) {
sum += amount;
}
console.log(sum);
In the example, we add two euros fifty-five cents one hundred thousand times.

$ nodejs numbers.js 
254999.9999995398
We have an error in the calculation.
<h3 id="topic-3">Big.js example</h3>
In the next example we correct the error with Big.js.

main.js
import Big from 'big.js';
let val = new Big(0.0);
let amount = new Big(2.55);
let sum = val.plus(amount).times(100000);
console.log(sum.toFixed(2));
With Big.js library, the calculation is precise.

import Big from 'big.js';
We import <k>Big</k> from the <k>big.js</k> module.
let val = new Big(0.0);
let amount = new Big(2.55);
We create two big decimal values.
let sum = val.plus(amount).times(100000);
We add the value 100000 times.
Note that the big decimal values are immutable,
so we generate a new variable.
$ node main.js 
255000.00
<h3 id="topic-4">Big.js pow</h3>
The <k>pow</k> provides a high-precision power operation.
main.js
import Big from 'big.js';
let val = new Big(0.9);
let res = val.pow(3);
console.log(res);
console.log(0.9 ** 3);
The example raises the 0.9 to the power of 3 using Big.js and vanilla JS.
$ node main.js
0.729
0.7290000000000001
In this article, we have worked with arbitrary precision arithmetic in
JavaScript with the <k>Big.js</k> library.
<h2>JavaScript Classes</h2>
<div id="JavaScriptClassestoc" class="toc"><a href="#JavaScriptClassestopic-0" target="_self">JavaScript Class Syntax</a><br><a href="#JavaScriptClassestopic-1" target="_self">Using a Class</a><br><a href="#JavaScriptClassestopic-2" target="_self">The Constructor Method</a><br><a href="#JavaScriptClassestopic-3" target="_self">Class Methods</a><br></div></center><br><br>
https://www.w3schools.com/js/js_classes.asp
<h3 id="JavaScriptClassestopic-0">JavaScript Class Syntax</h3>
Use the keyword <i>class</i> to create a class.
Always add a method named <i>constructor()</i>:
A JavaScript class is <b>not</b> an object.
It is a <b>template</b> for JavaScript objects.
<b>Syntax</b>
class ClassName {
constructor() { ...
}
}
<b>Example</b>
class Car {
constructor(name, year) {
this.name = name;
this.year = year;
}
}
The example above creates a class named "Car".
The class has two initial properties: "name" and "year".
<h3 id="JavaScriptClassestopic-1">Using a Class</h3>
When you have a class, you can use the class to create objects:
<b>Example</b>
let myCar1 = new Car("Ford", 2014);
let myCar2 = new Car("Audi", 2019);
The example above uses the <b>Car class</b> to create two <b>Car objects</b>.
The constructor method is called automatically when a new object is created.
<h3 id="JavaScriptClassestopic-2">The Constructor Method</h3>
The constructor method is a special method:
It has to have the exact name "constructor"
It is executed automatically when a new object is created
It is used to initialize object properties
If you do not define a constructor method, JavaScript 
will add an empty constructor method.
<h3 id="JavaScriptClassestopic-3">Class Methods</h3>
Class methods are created with the same syntax as object methods.
Use the keyword <i>class</i> to create a class.
Always add a <i>constructor()</i> method.
Then add any number of methods.
<b>Syntax</b>
class ClassName {
constructor() { ...
}
method_1() { ...
}
method_2() { ...
}
method_3() { ...
}
}
Create a Class method named "age", that returns the Car age:
class Car {
constructor(name, year) {
this.name = name;
this.year = year;
}
age() {
let date = new Date();
return date.getFullYear() - this.year;
}
}
let myCar = new Car("Ford", 2014);
document.getElementById("demo").innerHTML =
"My car is " + myCar.age() + " years old.";
You can send parameters to Class methods:
class Car {
constructor(name, year) {
this.name = name;
this.year = year;
}
age(x) {
return x - this.year;
}
}
let date = new Date();
let year = date.getFullYear();
let myCar = new 
Car("Ford", 2014);
document.getElementById("demo").innerHTML="My car is " + myCar.age(year) + " years old."; 
<h2>Convert Array to String Without Commas</h2>
.join method
arr.join("")
<h3>join() Method With Blank Value or Blank Space</h3>
array.join(separator)
let array = ['Le', 'sn', 'er'];
let join = array.join(""); // 'Lesner'
<i>join() Method With Blank Space</i>
let array = ['Linux', 'hint'];
let join = array.join(" ");  // 'Linux hint'
<h3>Using pop() and push() Methods</h3>
array.push(item1, item2)
the "<i>array.pop()</i>" method extracts the added elements from an array.
let array = ['Script', 'va', 'Ja']
let arrayNew = []
a=array.pop(0)  // 'Ja'
b=array.pop(1)  // 'va'
c=array.pop(2)  // 'Script'
arrayNew.push(a, b, c)
let join = arrayNew.join("")
<h3>the Combination of split() Method and join()</h3>
The "<i>split()</i>" method splits a string into a substring array.

This method can be used along with the "<i>join()</i>" method to split the commas in the joined string values by formatting them to comma-separated merged string values.
string.split(separator, limit)
let array = ['We,b', 'si,te'];
let arrayNew = []
let join = array.join('');  // 'We,bsi,te'
let join2 = join.split(",").join('')  // 'Website'
<h2>JavaScript Global Methods and Properties</h2><table>
<tr><th>Name</th><th>Description</th></tr>
<tr><td><a href="jsref_decodeuri.asp">decodeURI()</a></td><td>Decodes a URI</td></tr>
<tr><td><a href="jsref_decodeuricomponent.asp">decodeURI
Component()</a></td><td>Decodes a URI component</td></tr>
<tr><td><a href="jsref_encodeuri.asp">encodeURI()</a></td><td>Encodes a URI</td></tr>
<tr><td><a href="jsref_encodeuricomponent.asp">encodeURI
Component()</a></td><td>Encodes a URI component</td></tr>
<tr><td><a href="jsref_escape.asp">escape()</a></td><td><span class="deprecated">Deprecated</span>.
Use instead:
<a href="jsref_encodeuri.asp">encodeURI()</a>
<a href="jsref_encodeuricomponent.asp">encodeURIComponent()</a></td></tr>
<tr><td><a href="jsref_eval.asp">eval()</a></td><td>Evaluates a string and executes it as if it was script code</td></tr>
<tr><td><a href="jsref_infinity.asp">Infinity</a></td><td>A numeric value that represents positive/negative infinity</td></tr>
<tr><td><a href="jsref_isfinite.asp">isFinite()</a></td><td>Determines whether a value is a finite, legal number</td></tr>
<tr><td><a href="jsref_isnan.asp">isNaN()</a></td><td>Determines whether a value is an illegal number</td></tr>
<tr><td><a href="jsref_nan.asp">NaN</a></td><td>"Not-a-Number" value</td></tr>
<tr><td><a href="jsref_number.asp">Number()</a></td><td>Converts an object\'s value to a number</td></tr>
<tr><td><a href="jsref_parsefloat.asp">parseFloat()</a></td><td>Parses a string and returns a floating point number</td></tr>
<tr><td><a href="jsref_parseint.asp">parseInt()</a></td><td>Parses a string and returns an integer</td></tr>
<tr><td><a href="jsref_string.asp">String()</a></td><td>Converts an object\'s value to a string</td></tr>
<tr><td><a href="jsref_undefined.asp">undefined</a></td><td>Indicates that a variable has not been assigned a value</td></tr>
<tr><td><a href="jsref_unescape.asp">unescape()</a></td><td><span class="deprecated">Deprecated</span>.
Use instead:
<a href="jsref_decodeuri.asp">decodeURI()</a>
<a href="jsref_decodeuricomponent.asp">decodeURIComponent()</a></td></tr>
</table>
</div>
<h3>Note</h3>
Since these methods are global, and global the object is the browser window, these methods are actually window methods:
isNaN() is the same as window.isNaN().
<h2>select multiple array elements</h2>
var myArray = ["a", "b", "c", "d", "e", "f"];
var myIndices = [0, 2, 4, 6, 8];
var result = [];
myIndices.forEach(i => result.push(myArray[i]));
<h2>You cannot query html pseudo-elements with jQuery</h2>
<h2>to clone an array in JavaScript</h2>
When we need to copy an array, we often times used slice.
const sheeps = ['🐑', '🐑', '🐑'];
// Old way
const cloneSheeps = sheeps.slice();
// ES6 way
const cloneSheepsES6 = [...sheeps];
numbers = [1, 2, 3];
numbersCopy = [...numbers];
Note: This doesn’t safely copy multi-dimensional arrays.
Array/object values are copied by reference instead of by value.
Don't Use <i>=</i> to Copy an Array
Because arrays in JS are reference values, so when you try to copy it using the <i>=</i> it will only copy the reference to the original array and not the value of the array.
To create a real copy of an array, you need to copy over the value of the array under a new value variable.
That way this new array does not reference to the old array address in memory.
<h2>AngularJS Tutorial</h2>
<a href="AngularJS Tutorial for Beginners.html" class="redbut">&diams;AngularJS Tutorial for Beginners</b></a>
<a href="AngularJSTutorial.html" class="greenbut">&diams;AngularJSTutorial</b></a>
<a href="AngularJS Tutorial.html" class="redword">&diams;AngularJS Tutorial</b></a>
<a href="AngularJS References.html" class="redsha">&diams;AngularJS References</b></a>
<a href="../AngularJS Examples.html" class="greensha">AngularJS Examples</span></a>
<a href="http://www.madewithangular.com">AngularJs Examples</a>
<br>
<a href=#AngularJS target="_self"><span class="bluesha">AngularJS</span></a>
<a href="http://campus.codeschool.com/courses/accelerating-through-angular-2/contents">Angular 2</a>
<a href="LibDocs\tutorialspointAngularjsList.html" class="goldbut">&diams;Tutorialspoint Angularjs Tutorial</a>
<br>
<h2>追風4.html init code</h2>
//var thecode = localStorage.stkCode;
if (localStorage.getItem("fourcodes") === null) {
localStorage.setItem("fourcodes", "110000,110010,000001.sh,399001.sz")
thecodes = "110000,110010,000001.sh,399001.sz"
} else{
thecodes = localStorage.getItem("fourcodes").split(",")
}
if (localStorage.getItem("ImgPCode") === null) {
localStorage.setItem("ImgPCode", "&period=5000")
thisImgPCode = "&period=5000";
} else{
thisImgPCode = localStorage.getItem("ImgPCode");
}
if (localStorage.getItem("trendBase") === null) {
localStorage.setItem("trendBase", 10)
trendBase = 10;
} else{
trendBase = Number(localStorage.getItem("trendBase"))
}
if (localStorage.getItem("chaseWindTime") === null) {
localStorage.setItem("chaseWindTime", 20000)
chaseWindTime = 20000;
} else{
chaseWindTime = Number(localStorage.getItem("chaseWindTime"))
}
<h2>convert a string to a number</h2>
using the unary plus operator (+)
quantity = "12";
+quantity
convert array of string to a number
var arr = ["1", "2", "3"];
var nums = arr.map(unaryOp);
// Function that converts string to number
function unaryOp(value) { return +value; }
<h2>jQuery get the image src</h2>
$('.class').find('tag').attr('src');
<h2>前端实现电子签名（web、移动端）通用组件</h2>
<h3>前言</h3>在现在的时代发展中，从以前的手写签名，逐渐衍生出了电子签名。
电子签名和纸质手写签名一样具有法律效应。
电子签名目前主要还是在需要个人确认的产品环节和司法类相关的产品上较多。
举个常用的例子，大家都用过钉钉，钉钉上面就有电子签名，相信大家这肯定是知道的。
那作为前端的我们如何实现电子签名呢？
其实在<k>html5</k>中已经出现了一个重要级别的辅助标签，是啥呢？
那就是canvas<sup>[1]</sup>。
<h3>什么是<k>canvas</k></h3><k>Canvas（画布）</k>是在<k>HTML5</k>中新增的标签用于在网页实时生成图像，并且可以操作图像内容，基本上它是一个可以用<k>JavaScript</k>操作的<k>位图（bitmap）</k>。
<k>Canvas</k> 对象表示一个 <k>HTML</k> 画布元素 -。
它没有自己的行为，但是定义了一个 API 支持脚本化客户端绘图操作。
大白话就是<k>canvas</k>是一个可以在上面通过<k>javaScript</k>画图的标签，通过其提供的<k>context(上下文)</k>及<k>Api</k>进行绘制，在这个过程中<k>canvas</k>充当画布的角色。
<k>&lt;canvas>&lt;/canvas></k><h3>如何使用</h3><k>canvas</k>给我们提供了很多的<k>Api</k>，供我们使用，我们只需要在<k>body</k>标签中创建一个<k>canvas</k>标签，在<k>script</k>标签中拿到<k>canvas</k>这个标签的节点，并创建<k>context(上下文)</k>就可以使用了。
<k>...&lt;body>&lt;canvas>&lt;/canvas>&lt;/body>&lt;script>//获取canvas实例constcanvas=document.querySelector('canvas')canvas.getContext('2d')&lt;/script>...</k>步入正题。
<h3>实现电子签名</h3>知道几何的朋友都很清楚，线有点绘成，面由线绘成。
多点成线，多线成面。
所以我们实际只需要拿到当前触摸的坐标点，进行成线处理就可以了。
<h4>在<k>body</k>中添加<k>canvas</k>标签</h4>在这里我们不仅需要在在<k>body</k>中添加<k>canvas</k>标签，我们还需要添加两个按钮，分别是<k>取消</k>和<k>保存</k>（后面我们会用到）。
<k>&lt;body>&lt;canvas>&lt;/canvas>&lt;div>&lt;button>取消&lt;/button>&lt;button>保存&lt;/button>&lt;/div>&lt;/body></k><h4>添加文件</h4>我这里全程使用<k>js</k>进行样式设置及添加。
<k>//配置内容constconfig={width:400,//宽度height:200,//高度lineWidth:5,//线宽strokeStyle:'red',//线条颜色lineCap:'round',//设置线条两端圆角lineJoin:'round',//线条交汇处圆角}</k><h4>获取<k>canvas</k>实例</h4>这里我们使用<k>querySelector</k>获取<k>canvas</k>的dom实例，并设置样式和创建上下文。
<k>//获取canvas实例constcanvas=document.querySelector('canvas')//设置宽高canvas.width=config.widthcanvas.height=config.height//设置一个边框，方便我们查看及使用canvas.style.border='1pxsolid#000'//创建上下文constctx=canvas.getContext('2d')</k><h4>基础设置</h4>我们将<k>canvas</k>的填充色为透明，并绘制填充一个矩形，作为我们的画布，如果不设置这个填充背景色，在我们初识渲染的时候是一个黑色背景，这也是它的一个默认色。
<k>//设置填充背景色ctx.fillStyle='transparent'//绘制填充矩形ctx.fillRect(0,//x轴起始绘制位置0,//y轴起始绘制位置config.width,//宽度config.height//高度);</k><h4>上次绘制路径保存</h4>这里我们需要声明一个对象，用来记录我们上一次绘制的路径结束坐标点及偏移量。
保存上次坐标点这个我不用说大家都懂；
为啥需要保存偏移量呢，因为鼠标和画布上的距离是存在一定的偏移距离，在我们绘制的过程中需要减去这个偏移量，才是我们实际的绘制坐标。
但我发现<k>chrome</k>中不需要减去这个偏移量，拿到的就是实际的坐标，之前在微信小程序中使用就需要减去偏移量，需要在小程序中使用的朋友需要注意这一点哦。
<k>//保存上次绘制的坐标及偏移量constclient={offsetX:0,//偏移量offsetY:0,endX:0,//坐标endY:0}</k><h4>设备兼容</h4>我们需要它不仅可以在<k>web</k>端使用，还需要在<k>移动端</k>使用，我们需要给它做设备兼容处理。
我们通过调用<k>navigator.userAgent</k>获取当前设备信息，进行正则匹配判断。
<k>//判断是否为移动端constmobileStatus=(/Mobile|Android|iPhone/i.test(navigator.userAgent))</k><h4>初始化</h4>这里我们在监听<k>鼠标按下(mousedown)</k>(web端)/<k>触摸开始(touchstart)</k>的时候进行初始化，事件监听采用<k>addEventListener</k>。
<k>//创建鼠标/手势按下监听器window.addEventListener(mobileStatus?"touchstart":"mousedown",init)</k><strong>三元判断说明：
</strong> 这里当<k>mobileStatus</k>为<k>true</k>时则表示为<k>移动端</k>，反之则为<k>web端</k>，后续使用到的<k>三元</k>依旧是这个意思。
<strong>声明初始化方法</strong>我们添加一个<k>init</k>方法作为监听<k>鼠标按下</k>/<k>触摸开始</k>的回调方法。
这里我们需要获取到当前<k>鼠标按下</k>/<k>触摸开始</k>的偏移量和坐标，进行起始点绘制。
Tips：
<k>web端</k>可以直接通过<k>event</k>中取到，而移动端则需要在<k>event.changedTouches[0]</k>中取到。
这里我们在初始化后再监听鼠标的移动。
<k>//初始化constinit=event=>{//获取偏移量及坐标const{offsetX,offsetY,pageX,pageY}=mobileStatus?event.changedTouches[0]:event//修改上次的偏移量及坐标client.offsetX=offsetXclient.offsetY=offsetYclient.endX=pageXclient.endY=pageY//清除以上一次beginPath之后的所有路径，进行绘制ctx.beginPath()//根据配置文件设置进行相应配置ctx.lineWidth=config.lineWidthctx.strokeStyle=config.strokeStylectx.lineCap=config.lineCapctx.lineJoin=config.lineJoin//设置画线起始点位ctx.moveTo(client.endX,client.endY)//监听鼠标移动或手势移动window.addEventListener(mobileStatus?"touchmove":"mousemove",draw)}</k><h4>绘制</h4>这里我们添加绘制<k>draw</k>方法，作为监听<k>鼠标移动</k>/<k>触摸移动</k>的回调方法。
<k>//绘制constdraw=event=>{//获取当前坐标点位const{pageX,pageY}=mobileStatus?event.changedTouches[0]:event//修改最后一次绘制的坐标点client.endX=pageXclient.endY=pageY//根据坐标点位移动添加线条ctx.lineTo(pageX,pageY)//绘制ctx.stroke()}</k><h4>结束绘制</h4>添加了监听<k>鼠标移动</k>/<k>触摸移动</k>我们一定要记得取消监听并结束绘制，不然的话它会一直监听并绘制的。
这里我们创建一个<k>cloaseDraw</k>方法作为<k>鼠标弹起</k>/<k>结束触摸</k>的回调方法来结束绘制并移除<k>鼠标移动</k>/<k>触摸移动</k>的监听。
<k>canvas</k>结束绘制则需要调用<k>closePath()</k>让其结束绘制<k>//结束绘制constcloaseDraw=()=>{//结束绘制ctx.closePath()//移除鼠标移动或手势移动监听器window.removeEventListener("mousemove",draw)}</k>添加结束回调监听器<k>//创建鼠标/手势弹起/离开监听器window.addEventListener(mobileStatus?"touchend":"mouseup",cloaseDraw)</k>ok，现在我们的电子签名功能还差一丢丢可以实现完了，现在已经可以正常的签名了。
我们来看一下效果：
<img data-src="https://mmbiz.qpic.cn/mmbiz/mshqAkialV7F9r8KqkI6SZT7SIor7Ug2iauffHxyaqka4WVRiaVhFFGN1WC1POkJl4qbKCdpNbYdD5KibiaQnoTvzzQ/640">
<h4>取消功能/清空画布</h4>我们在刚开始创建的那两个按钮开始排上用场了。
这里我们创建一个<k>cancel</k>的方法作为取消并清空画布使用<k>//取消-清空画布constcancel=()=>{//清空当前画布上的所有绘制内容ctx.clearRect(0,0,config.width,config.height)}</k>然后我们将这个方法和<k>取消按钮</k>进行绑定<k>&lt;buttononclick="cancel()">取消&lt;/button></k><h4>保存功能</h4>这里我们创建一个<k>save</k>的方法作为保存画布上的内容使用。
将画布上的内容保存为<k>图片/文件</k>的方法有很多，比较常见的是<k>blob</k>和<k>toDataURL</k>这两种方案，但<k>toDataURL</k>这哥们没<k>blob</k>强，适配也不咋滴。
所以我们这里采用<k>a</k>标签 ➕ <k>blob</k>方案实现图片的保存下载。
<k>//保存-将画布内容保存为图片constsave=()=>{//将canvas上的内容转成blob流canvas.toBlob(blob=>{//获取当前时间并转成字符串，用来当做文件名constdate=Date.now().toString()//创建一个a标签consta=document.createElement('a')//设置a标签的下载文件名a.download=`${date}.png`//设置a标签的跳转路径为文件流地址a.href=URL.createObjectURL(blob)//手动触发a标签的点击事件a.click()//移除a标签a.remove()})}</k>然后我们将这个方法和<k>保存按钮</k>进行绑定<k>&lt;buttononclick="save()">保存&lt;/button></k>我们将刚刚绘制的内容进行保存，点击保存按钮，就会进行下载保存<img data-src="https://mmbiz.qpic.cn/mmbiz/mshqAkialV7F9r8KqkI6SZT7SIor7Ug2iaYbHbZqx1yEMb5nRhJ5ibmGrY5322CmtjdfkUfPkSksuss3wUUjD2LdQ/640">
<h3>完整代码</h3><k>&lt;!DOCTYPEhtml>&lt;htmllang="en">&lt;head>&lt;metacharset="UTF-8">&lt;metahttp-equiv="X-UA-Compatible"content="IE=edge">&lt;metaname="viewport"content="width=device-width,initial-scale=1.0">&lt;title>Document&lt;/title>&lt;style>*{margin:0;padding:0;}&lt;/style>&lt;/head>&lt;body>&lt;canvas>&lt;/canvas>&lt;div>&lt;buttononclick="cancel()">取消&lt;/button>&lt;buttononclick="save()">保存&lt;/button>&lt;/div>&lt;/body>&lt;script>//配置内容constconfig={width:400,//宽度height:200,//高度lineWidth:5,//线宽strokeStyle:'red',//线条颜色lineCap:'round',//设置线条两端圆角lineJoin:'round',//线条交汇处圆角}//获取canvas实例constcanvas=document.querySelector('canvas')//设置宽高canvas.width=config.widthcanvas.height=config.height//设置一个边框canvas.style.border='1pxsolid#000'//创建上下文constctx=canvas.getContext('2d')//设置填充背景色ctx.fillStyle='transparent'//绘制填充矩形ctx.fillRect(0,//x轴起始绘制位置0,//y轴起始绘制位置config.width,//宽度config.height//高度);//保存上次绘制的坐标及偏移量constclient={offsetX:0,//偏移量offsetY:0,endX:0,//坐标endY:0}//判断是否为移动端constmobileStatus=(/Mobile|Android|iPhone/i.test(navigator.userAgent))//初始化constinit=event=>{//获取偏移量及坐标const{offsetX,offsetY,pageX,pageY}=mobileStatus?event.changedTouches[0]:event//修改上次的偏移量及坐标client.offsetX=offsetXclient.offsetY=offsetYclient.endX=pageXclient.endY=pageY//清除以上一次beginPath之后的所有路径，进行绘制ctx.beginPath()//根据配置文件设置相应配置ctx.lineWidth=config.lineWidthctx.strokeStyle=config.strokeStylectx.lineCap=config.lineCapctx.lineJoin=config.lineJoin//设置画线起始点位ctx.moveTo(client.endX,client.endY)//监听鼠标移动或手势移动window.addEventListener(mobileStatus?"touchmove":"mousemove",draw)}//绘制constdraw=event=>{//获取当前坐标点位const{pageX,pageY}=mobileStatus?event.changedTouches[0]:event//修改最后一次绘制的坐标点client.endX=pageXclient.endY=pageY//根据坐标点位移动添加线条ctx.lineTo(pageX,pageY)//绘制ctx.stroke()}//结束绘制constcloaseDraw=()=>{//结束绘制ctx.closePath()//移除鼠标移动或手势移动监听器window.removeEventListener("mousemove",draw)}//创建鼠标/手势按下监听器window.addEventListener(mobileStatus?"touchstart":"mousedown",init)//创建鼠标/手势弹起/离开监听器window.addEventListener(mobileStatus?"touchend":"mouseup",cloaseDraw)//取消-清空画布constcancel=()=>{//清空当前画布上的所有绘制内容ctx.clearRect(0,0,config.width,config.height)}//保存-将画布内容保存为图片constsave=()=>{//将canvas上的内容转成blob流canvas.toBlob(blob=>{//获取当前时间并转成字符串，用来当做文件名constdate=Date.now().toString()//创建一个a标签consta=document.createElement('a')//设置a标签的下载文件名a.download=`${date}.png`//设置a标签的跳转路径为文件流地址a.href=URL.createObjectURL(blob)//手动触发a标签的点击事件a.click()//移除a标签a.remove()})}&lt;/script>&lt;/html></k><h3>各内核和浏览器支持情况</h3>Mozilla 程序从 Gecko 1.8 (Firefox 1.5 \(en-US\)<sup>[2]</sup>) 开始支持 <k>&lt;canvas></k>。
它首先是由 Apple 引入的，用于 OS X Dashboard 和 Safari。
Internet Explorer 从 IE9 开始支持<k>&lt;canvas></k> ，更旧版本的 IE 中，页面可以通过引入 Google 的 Explorer Canvas<sup>[3]</sup> 项目中的脚本来获得<k>&lt;canvas></k>支持。
Google Chrome 和 Opera 9+ 也支持 <k>&lt;canvas></k>。
<h3>小程序中提示</h3>在小程序中我们如果需呀实现的话，也是同样的原理哦，只是我们需要将<k>创建实例和上下文</k>的<k>Api</k>进行修改，因为小程序中是没有<k>dom</k>，既然没有<k>dom</k>，哪来的<k>操作dom</k>这个操作呢。
如果是<k>uni-app</k>则需要使用uni.createCanvasContext<sup>[4]</sup>进行上下文创建</li><li>如果是原生微信小程序则使用`wx.createCanvasContext`<sup>[5]</sup>进行创建（2.9.0）之后的库不支持
<h2>triple clicks</h2>
No native event exists to capture 3 clicks in a row.

Fortunately, modern browsers have event.detail, which the MDN documentation describes as:
A count of consecutive clicks that happened in a short amount of time, incremented by one.
This means you can simply check the value of this property and see if it is 3:
window.addEventListener('click', function (evt) {
if (evt.detail === 3) {
alert('triple click!');
}
});
Working demo: http://jsfiddle.net/L6d0p4jo/
<h2>javascript create tables</h2>
&lt;table id="this">&lt;/table>
&lt;table id="that">&lt;/table>
&lt;script>
let food = [
{ name: "meat", weight: 1658, percentage: 15 },
{ name: "fish", weight: 1654, percentage: 12 }
];
let mountains = [
{ name: "Monte Falco", height: 1658, place: "Parco Foreste Casentinesi" },
{ name: "Monte Falterona", height: 1654, place: "Parco Foreste Casentinesi" },
{ name: "Poggio Scali", height: 1520, place: "Parco Foreste Casentinesi" },
{ name: "Pratomagno", height: 1592, place: "Parco Foreste Casentinesi" },
{ name: "Monte Amiata", height: 1738, place: "Siena" }
];
function generateTableHead(table, data) {
let thead = table.createTHead();
let row = thead.insertRow();
for (let key of data) {
let th = document.createElement("th");
let text = document.createTextNode(key);
th.appendChild(text);
row.appendChild(th);
}
}
function generateTable(table, data) {
for (let element of data) {
let row = table.insertRow();
for (key in element) {
let cell = row.insertCell();
let text = document.createTextNode(element[key]);
cell.appendChild(text);
}
}
}
let mountaintable = document.querySelector("table#that");
let data = Object.keys(mountains[0]);
generateTableHead(mountaintable, data);
generateTable(mountaintable, mountains);
let foodtable = document.querySelector("table#this");
let fooddata = Object.keys(food[0]);
generateTableHead(foodtable, fooddata);
generateTable(foodtable, food);
<h2>creates a table with 3 rows 2 cells</h2>
using insertRow and insertCell:
function tableCreate() {
const body = document.body,
tbl = document.createElement('table');
tbl.style.width = '100px';
tbl.style.border = '1px solid black';
for (let i = 0; i < 3; i++) {
const tr = tbl.insertRow();
for (let j = 0; j < 2; j++) {
if (i === 2 && j === 1) {
break;
} else {
const td = tr.insertCell();
td.appendChild(document.createTextNode(`Cell I${i}/J${j}`));
td.style.border = '1px solid black';
if (i === 1 && j === 1) {
td.setAttribute('rowSpan', '2');
}
}
}
}
body.appendChild(tbl);
}
tableCreate();
function addTable() {
var myTableDiv = document.getElementById("myDynamicTable");
var table = document.createElement('TABLE');
table.border = '1';
var tableBody = document.createElement('TBODY');
table.appendChild(tableBody);
for (var i = 0; i < 3; i++) {
var tr = document.createElement('TR');
tableBody.appendChild(tr);
for (var j = 0; j < 4; j++) {
var td = document.createElement('TD');
td.width = '75';
td.appendChild(document.createTextNode("Cell " + i + "," + j));
tr.appendChild(td);
}
}
myTableDiv.appendChild(table);
}
addTable();
<h2>reduce 使用技巧</h2>
<div id="reducetoc" class="toc"><a href="#reducetopic-0" target="_self">reduce 介绍</a><br><a href="#reducetopic-1" target="_self">计算数组中每个元素出现的次数</a><br><a href="#reducetopic-2" target="_self">拍平嵌套数组</a><br><a href="#reducetopic-3" target="_self">按条件分组</a><br><a href="#reducetopic-4" target="_self">将多个数组合并为一个对象</a><br><a href="#reducetopic-5" target="_self">将字符串转换为对象</a><br><a href="#reducetopic-6" target="_self">将对象转换为查询字符串</a><br><a href="#reducetopic-7" target="_self">打印斐波那契数列</a><br><a href="#reducetopic-8" target="_self">检查字符串是否是回文字符串</a><br><a href="#reducetopic-9" target="_self">检查括号是否匹配</a><br><a href="#reducetopic-10" target="_self">递归获取对象属性</a><br><a href="#reducetopic-11" target="_self">手写 reduce</a><br></div></center>
reduce 函数可以根据需要进行累加、过滤、分组、映射等操作，是一个非常强大的数组方法。
在数据处理时使用的非常频繁，很多复杂的逻辑如果用reduce去处理，都非常的简洁，在实际的开发工作过程中，积累了一些常见又超级好用的 reduce 技巧的代码片段，筛选了如下 10 个，以供大家参考
<h3 id="reducetopic-0">reduce 介绍</h3>
reduce 是数组的方法，可以对数组中的每个元素依次执行一个回调函数，从左到右依次累积计算出一个最终的值。
其语法为：
arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])
其中，callback 是每个元素执行的回调函数，其包含 4 个参数：
accumulator：累积器，即上一次回调函数执行的返回值。
currentValue：当前元素的值。
index：当前元素的下标。
array：原始数组。
initialValue 是可选的，表示累积器的初始值。
reduce 函数的执行过程如下：
如果没有提供 initialValue，则将数组的第一个元素作为累积器的初始值，否则将 initialValue 作为累积器的初始值。
从数组的第二个元素开始，依次对数组中的每个元素执行回调函数。
回调函数的返回值作为下一次回调函数执行时的累积器的值。
对数组中的每个元素执行完回调函数后，reduce 函数返回最后一次回调函数的返回值，即最终的累积值。
<h3 id="reducetopic-1">计算数组中每个元素出现的次数</h3>
const fruits = ['apple', 'banana', 'apple', 'orange', 'banana', 'apple'];
const count = fruits.reduce((accumulator, currentValue) => {
accumulator[currentValue] = (accumulator[currentValue] || 0) + 1;
return accumulator;
}, {});
console.log(count); // Output: { apple: 3, banana: 2, orange: 1 }
<h3 id="reducetopic-2">拍平嵌套数组</h3>
const nestedArray = [[1, 2], [3, 4], [5, 6]];
const flattenedArray = nestedArray.reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);
console.log(flattenedArray); // Output: [1, 2, 3, 4, 5, 6]
<h3 id="reducetopic-3">按条件分组</h3>
const people = [
{ name: 'Alice', age: 25 },
{ name: 'Bob', age: 30 },
{ name: 'Charlie', age: 35 },
{ name: 'David', age: 25 },
{ name: 'Emily', age: 30 }
];
const groupedPeople = people.reduce((accumulator, currentValue) => {
const key = currentValue.age;
if (!accumulator[key]) {
accumulator[key] = [];
}
accumulator[key].push(currentValue);
return accumulator;
}, {});
console.log(groupedPeople);
// Output: {
//   25: [{ name: 'Alice', age: 25 }, { name: 'David', age: 25 }],
//   30: [{ name: 'Bob', age: 30 }, { name: 'Emily', age: 30 }],
//   35: [{ name: 'Charlie', age: 35 }]
// }
<h3 id="reducetopic-4">将多个数组合并为一个对象</h3>
const keys = ['name', 'age', 'gender'];
const values = ['Alice', 25, 'female'];
const person = keys.reduce((accumulator, currentValue, index) => {
accumulator[currentValue] = values[index];
return accumulator;
}, {});
console.log(person); // Output: { name: 'Alice', age: 25, gender: 'female' }
<h3 id="reducetopic-5">将字符串转换为对象</h3>
const str = 'key1=value1&amp;key2=value2&amp;key3=value3';
const obj = str.split('&amp;').reduce((accumulator, currentValue) => {
const [key, value] = currentValue.split('=');
accumulator[key] = value;
return accumulator;
}, {});
console.log(obj); 
// Output: { key1: 'value1', key2: 'value2', key3: 'value3' }
<h3 id="reducetopic-6">将对象转换为查询字符串</h3>
const params = { foo: "bar", baz: 42 };
const queryString = Object.entries(params).reduce((acc, [key, value]) => {
return `${acc}${key}=${value}&amp;`;
}, "?").slice(0, -1);
console.log(queryString); // "?foo=bar&amp;baz=42"
<h3 id="reducetopic-7">打印斐波那契数列</h3>
const fibonacci = n => {
return [...Array(n)].reduce((accumulator, currentValue, index) => {
if (index &lt; 2) {
accumulator.push(index);
} else {
accumulator.push(accumulator[index - 1] + accumulator[index - 2]);
}
return accumulator;
}, []);
};
console.log(fibonacci(10)); // Output: [0, 1, 1, 2, 3, 5, 8, 13, 21, 34]
<h3 id="reducetopic-8">检查字符串是否是回文字符串</h3>
const str = 'racecar';
const isPalindrome = str.split('').reduce((accumulator, currentValue, index, array) => {
return accumulator &amp;&amp; currentValue === array[array.length - index - 1];
}, true);
console.log(isPalindrome); // Output: true
<h3 id="reducetopic-9">检查括号是否匹配</h3>
const str = "(()()())";
const balanced = str.split("").reduce((acc, cur) => {
if (cur === "(") {
acc++;
} else if (cur === ")") {
acc--;
}
return acc;
}, 0) === 0;
console.log(balanced); // true
<h3 id="reducetopic-10">递归获取对象属性</h3>
const user = {
info: {
name: "Jason",
address: { home: "Shaanxi", company: "Xian" },
},
};
function get(config, path, defaultVal) {
return path.split('.').reduce((config, name) => config[name], config) || defaultVal;
return fallback;
}
get(user, "info.name"); // Jason
get(user, "info.address.home"); // Shaanxi
get(user, "info.address.company"); // Xian
get(user, "info.address.abc", "default"); // default
<h3 id="reducetopic-11">手写 reduce</h3>
可以通过手写一个简单的 reduce 函数来更好地理解它的实现原理：
function myReduce(arr, callback, initialValue) {
let accumulator = initialValue === undefined ? arr[0] : initialValue;
for (let i = initialValue === undefined ? 1 : 0; i &lt; arr.length; i++) {
accumulator = callback(accumulator, arr[i], i, arr);
}
return accumulator;
}
上面的代码中，myReduce 函数接受 3 个参数：要执行 reduce 操作的数组 arr、回调函数 callback 和累积器的初始值 initialValue。
如果没有提供初始值，则将数组的第一个元素作为累积器的初始值。
接下来，在循环中，如果有 initialValue，则从第一个元素开始遍历 callback，此时 callabck 的第二个参数是从数组的第一项开始的；
如果没有 initialValue，则从第二个元素开始遍历 callback，此时 callback 的第二个参数是从数组的第二项开始的从数组的第二个元素开始，依次对数组中的每个元素执行回调函数，并将返回值作为下一次回调函数执行时的累积器的值。
最后，myReduce 函数返回最后一次回调函数的返回值，即最终的累积值。
这个简易的 reduce 函数并没有考虑很多边界情况和复杂的应用场景，但是可以帮助我们更好地理解 reduce 函数的实现原理。
<h2>不喜欢用 forEach</h2>
<div id="forEachtoc"><a href="#forEachtopic-0" target="_self"><k>原因一：不支持处理异步函数</k></a><br><a href="#forEachtopic-1" target="_self">替代forEach 的方式</a><br><a href="#forEachtopic-2" target="_self"><k>原因二：无法捕获异步函数中的错误</k></a><br><a href="#forEachtopic-3" target="_self"><k>原因三：除了抛出异常以外，没有办法中止或跳出 forEach()  循环</k></a><br><a href="#forEachtopic-4" target="_self"><k>原因四：forEach 删除自身元素，index不可被重置</k></a><br><a href="#forEachtopic-5" target="_self"><k>原因五：this指向问题</k></a><br><a href="#forEachtopic-6" target="_self"><k>原因六：forEach性能比for循环低</k></a><br><a href="#forEachtopic-7" target="_self"><k>原因七：会跳过已删除或者未初始化的项</k></a><br><a href="#forEachtopic-8" target="_self"><k>原因八：forEach使用不会改变原数组</k></a><br></div></center>
<h3 id="forEachtopic-0"><k>原因一：不支持处理异步函数</k></h3>
先看一个例子：
async function test() {
let arr = [3, 2, 1]
arr.forEach(async item => {
const res = await mockSync(item)
console.log(res)
})
console.log('end')
}
function mockSync(x) {
return new Promise((resolve, reject) => {
setTimeout(() => {
resolve(x)
}, 1000 * x)
})
}
test()
我们期望的结果是:
3
2 
1
end
但是实际上会输出:
end
1
2
3
JavaScript 中的forEach() 方法是一个同步方法，它不支持处理异步函数。
如果你在forEach 中执行了异步函数，forEach() 无法等待异步函数完成，它会继续执行下一项。
这意味着如果在forEach() 中使用异步函数，无法保证异步任务的执行顺序。
<h3 id="forEachtopic-1">替代forEach 的方式</h3>
1.方式一
可以使用例如map() 、filter() 、reduce() 等，它们支持在函数中返回Promise ，并且会等待所有Promise完成。
使用map() 和Promise.all() 来处理异步函数的示例代码如下：
const arr = [1, 2, 3, 4, 5];
async function asyncFunction(num) {
return new Promise((resolve, reject) => {
setTimeout(() => {
resolve(num * 2);
}, 1000);
});
}
const promises = arr.map(async (num) => {
const result = await asyncFunction(num);
return result;
});
Promise.all(promises).then((results) => {
console.log(results); // [2, 4, 6, 8, 10]
});
由于我们在异步函数中使用了await 关键字，map() 方法会等待异步函数完成并返回结果，因此我们可以正确地处理异步函数。
方式二 使用for循环来处理异步函数
const arr = [1, 2, 3, 4, 5];
async function asyncFunction(num) {
return new Promise((resolve, reject) => {
setTimeout(() => {
resolve(num * 2);
}, 1000);
});
}
async function processArray() {
const results = [];
for (let i = 0; i &lt; arr.length; i++) {
const result = await asyncFunction(arr[i]);
results.push(result);
}
console.log(results); // [2, 4, 6, 8, 10]
}
processArray();
<h3 id="forEachtopic-2"><k>原因二：无法捕获异步函数中的错误</k></h3>
如果异步函数在执行时抛出错误，forEach() 无法捕获该错误。
这意味着即使在异步函数中出现错误，forEach() 仍会继续执行。
<h3 id="forEachtopic-3"><k>原因三：除了抛出异常以外，没有办法中止或跳出 forEach()  循环</k></h3>
forEach() 方法不支持使用break 或continue 语句来跳出循环或跳过某一项。
如果需要跳出循环或跳过某一项，应该使用for 循环或其他支持break 或continue 语句的方法。
<h3 id="forEachtopic-4"><k>原因四：forEach 删除自身元素，index不可被重置</k></h3>
在forEach 中我们无法控制 index 的值，它只会无脑的自增直至大于数组的 length 跳出循环。
所以也无法删除自身进行index重置，先看一个简单例子：
let arr = [1,2,3,4]
arr.forEach((item, index) => {
console.log(item); // 1 2 3 4
index++;
});
<h3 id="forEachtopic-5"><k>原因五：this指向问题</k></h3>
在forEach() 方法中，this 关键字引用的是调用该方法的对象。
但是，在使用普通函数或箭头函数作为参数时，this 关键字的作用域可能会出现问题。
在箭头函数中，this关键字引用的是定义该函数时所在的对象。
在普通函数中，this关键字引用的是调用该函数的对象。
如果需要确保this关键字的作用域正确，可以使用bind()方法来绑定函数的作用域。
以下是一个关于forEach() 方法中this 关键字作用域问题的例子：
const obj = {
name: "Alice",
friends: ["Bob", "Charlie", "Dave"],
printFriends: function () {
this.friends.forEach(function (friend) {
console.log(this.name + " is friends with " + friend);
});
},
};
obj.printFriends();
在这个例子中，我们定义了一个名为obj 的对象，它有一个printFriends() 方法。
在printFriends() 方法中，我们使用forEach() 方法遍历friends 数组，并使用普通函数打印每个朋友的名字和obj 对象的name 属性。
但是，当我们运行这个代码时，会发现输出结果为：
undefined is friends with Bob
undefined is friends with Charlie
undefined is friends with Dave
这是因为，在forEach() 方法中使用普通函数时，该函数的作用域并不是调用printFriends() 方法的对象，而是全局作用域。
因此，在该函数中无法访问obj 对象的属性。
为了解决这个问题，可以使用bind() 方法来绑定函数的作用域，或使用箭头函数来定义回调函数。
以下是使用bind() 方法解决问题的代码示例：
const obj = {
name: "Alice",
friends: ["Bob", "Charlie", "Dave"],
printFriends: function () {
this.friends.forEach(
function (friend) {
console.log(this.name + " is friends with " + friend);
}.bind(this) // 使用bind()方法绑定函数的作用域
);
},
};
obj.printFriends();
在这个例子中，我们使用bind() 方法来绑定函数的作用域，将该函数的作用域绑定到obj 对象上。
运行代码后，输出结果为：
Alice is friends with Bob 
Alice is friends with Charlie 
Alice is friends with Dave
通过使用bind() 方法来绑定函数的作用域，我们可以正确地访问obj 对象的属性。
另一种解决方法是使用箭头函数。
由于箭头函数没有自己的this ，它会继承它所在作用域的this 。
因此，在箭头函数中，this 关键字引用的是定义该函数时所在的对象。
代码略
<h3 id="forEachtopic-6"><k>原因六：forEach性能比for循环低</k></h3>
for ：for循环没有额外的函数调用栈和上下文，所以它的实现最为简单。
forEach ：对于forEach来说，它的函数签名中包含了参数和上下文，所以性能会低于 for  循环。
<h3 id="forEachtopic-7"><k>原因七：会跳过已删除或者未初始化的项</k></h3>// 跳过未初始化的值
const array = [1, 2, /* empty */, 4];
let num = 0;
array.forEach((ele) => {
console.log(ele);
num++;
});
console.log("num:",num);
//  1
//  2 
//  4 
// num: 3
// 跳过已删除的值
const words = ['one', 'two', 'three', 'four'];
words.forEach((word) => {
console.log(word);
if (word === 'two') {
// 当到达包含值 `two` 的项时，整个数组的第一个项被移除了
// 这导致所有剩下的项上移一个位置。
因为元素 `four` 正位于在数组更前的位置，所以 `three` 会被跳过。
words.shift(); //'one' 将从数组中删除
}
}); // one // two // four
console.log(words); // ['two', 'three', 'four']
<h3 id="forEachtopic-8"><k>原因八：forEach使用不会改变原数组</k></h3>
forEach()  被调用时，不会改变原数组，也就是调用它的数组。
但是那个对象可能会被传入的回调函数改变
// 例子一
const array = [1, 2, 3, 4]; 
array.forEach(ele => { ele = ele * 3 }) 
console.log(array); // [1,2,3,4]
// 解决方式，改变原数组
const numArr = [33,4,55];
numArr.forEach((ele, index, arr) => {
if (ele === 33) {
arr[index] = 999
}
})
console.log(numArr);  // [999, 4, 55]
// 例子二
const changeItemArr = [{
name: 'wxw',
age: 22
}, {
name: 'wxw2',
age: 33
}]
changeItemArr.forEach(ele => {
if (ele.name === 'wxw2') {
ele = {
name: 'change',
age: 77
}
}
})
console.log(changeItemArr); // [{name: "wxw", age: 22},{name: "wxw2", age: 33}]
// 解决方式
const allChangeArr = [{    name: 'wxw',    age: 22}, {    name: 'wxw2',    age: 33}]
allChangeArr.forEach((ele, index, arr) => {
if (ele.name === 'wxw2') {
arr[index] = {
name: 'change',
age: 77
}
}
})
console.log(allChangeArr); // // [{name: "wxw", age: 22},{name: "change", age: 77}]
还是使用for...of 去替代forEach 吧


fs.readFile('myjsonfile.json', 'utf8', function readFileCallback(err, data){
    if (err){
        console.log(err);
    } else {
    obj = JSON.parse(data); //now it an object
    obj.date.push({id: 2, square:3}); //add some data
    json = JSON.stringify(obj); //convert it back to json
    fs.writeFile('myjsonfile.json', json, 'utf8', callback); // write it back 
}});

This will work for data that is up to 100 MB effectively.
Over this limit, you should use a database engine.

UPDATE:
Create a function which returns the current date (year+month+day) as a string.
Create the file named this string + .json.
the fs module has a function which can check for file existence named fs.stat(path, callback).
With this, you can check if the file exists.
If it exists, use the read function if it's not, use the create function.
Use the date string as the path cuz the file will be named as the today date + .json.
the callback will contain a stats object which will be null if the file does not exist.

anothe simple method:
var fs = require('fs');

var data = {}
data.date = []
for (i=0; i &lt;26 ; i++){
   var obj = {
       id: i,
       square: i * i
   }
   data.date.push(obj)
}
fs.writeFile ("input.json", JSON.stringify(data), function(err) {
    if (err) throw err;
    console.log('complete');
    }
);



<h2>promise examples</h2>
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    if (Math.random() < 0.5) {
      resolve('success');
    } else {
      reject('error');
    }
  }, 1000);
});
 
promise.then(result => {
  console.log(result);
}).catch(error => {
  console.log(error);
});


some_function = function (username, password) {
  return new Promise(function (resolve, reject) {
    if (/* everything turned out fine */) {
      resolve("Stuff worked!");
    } else {
      reject(Error("It broke"));
    }
  });
};

Then, use it:
some_module.some_function(username, password).then(function (uid) {
  // stuff
});


function dayOfTheYear() {
  return new Promise((resolve) => {
    const now = new Date();
    const start = new Date(now.getFullYear(), 0, 0);
    const diff = now - start;
    const oneDay = 1000 * 60 * 60 * 24;
    const day = Math.floor(diff / oneDay);
    resolve(day);      // this is you resolving the promise you return
  });
}
//If we were to use the above function,
//there would be two different ways to do it:

   dayOfTheYear()
     .then( (resolvedValue) => console.log(resolvedValue) )
//The resolvedValue is what was resolved in your function in the call to resolve(day).

Or instead of using the then function to pass in a callback, you could instead use await:
  // assuming this code is in a function declared as async
  const resolvedValue = await dayOfTheYear();

So from the above, you can see that the return statement from an async function does the same thing as the resolve call from a Promise callback.


const value = await (the promise) to assign a value to a variable

await stops executing until the Promise has resolved (ie, has a value).

Unlike using .then() you can just keep awaiting values as you run various functions that return promises, and execution continues onto the next line (this is called 'direct style).

It's also much nicer to look at than .then() everywhere, since it's consistent with the rest of JavaScript.

// Example function that returns a Promise that will resolve after 2 seconds
var getGenres = function() {
  return new Promise(function(resolve) {
    setTimeout(function(){
      resolve(['comedy', 'drama', 'action'])
    }, 2000);
  });
}

// We start an 'async' function to use the 'await' keyword
(async function(){
  var result = await getGenres()
  console.log('Woo done!', result)
  // But the best part is, we can just keep awaiting different stuff, without ugly .then()s
  var somethingElse = await getSomethingElse()
  var moreThings = await getMoreThings()
})()

The way I like to do it is to create a let variable and assign the 'then' result to that variable.
Const won't work because it will give you an error.

It will be like let value_result = function_that_returns_promise.then(result => value_result = result)

For your example, I made the method into a function for simplicity:
const genres = ['comedy', 'drama', 'action'];
function getGenres() {
  var promise = new Promise( (resolve, reject) => {
     let result = genres[0]  //just picking out the first one as example
     resolve(result)
  })
  return promise
}

const result_as_promise = getGenres()
console.log(result_as_promise);
//output:
//Promise { 'comedy' }
let result_as_value = getGenres().then(result => result_as_value = result)
setTimeout(function () {
  console.log(result_as_value);
}, 0);
//output:
//comedy



<h2>Promise高级技巧</h2>
<div id="PromiseMethodstoc" class="toc"><a href="#PromiseMethodstopic-0" target="_self">串行执行Promise数组</a><br><a href="#PromiseMethodstopic-1" target="_self">在新Promise作用域外改变状态</a><br><a href="#PromiseMethodstopic-2" target="_self">async/await的替代用法</a><br><a href="#PromiseMethodstopic-3" target="_self">使用Promise实现请求共享</a><br><a href="#PromiseMethodstopic-4" target="_self">如果同时调用resolve和reject会发生什么</a><br><a href="#PromiseMethodstopic-5" target="_self">彻底弄清then/catch/finally的返回值</a><br><a href="#PromiseMethodstopic-6" target="_self">then函数的第二个回调与catch回调有何不同</a><br><a href="#PromiseMethodstopic-7" target="_self">实现Koa2洋葱模型中的Promise</a><br></div></center>
JavaScript项目中 Promise 的使用是必不可少的。
许多开发人员仍然停留在常见的 promiseInst.then()、 promiseInst.catch()、 Promise.all 甚至 async/await等常规实践上，没有深入理解。
Promise 有许多巧妙的高级用法，一些在ALOVA请求策略库中广泛使用。
ALOVA 是一个基于 Promise 的请求策略库，旨在帮助开发者更高效地进行 HTTP 请求处理。
它通过 Promise 技巧，实现了请求共享、缓存、批量请求等功能，从而简化了前端开发中的数据请求管理。
<h4 id="PromiseMethodstopic-0">串行执行Promise数组</h4>
例如，如果你有一组需要串行执行的接口，首先你可能会想到使用 await。
const requestAry = [() => api.request1(), () => api.request2(), () => api.request3()];
for (const requestItem of requestAry) {
await requestItem();
}
如果使用Promise语法，你可以使用then函数将多个Promise串起来，从而实现顺序执行。
const requestAry = [() => api.request1(), () => api.request2(), () => api.request3()];
const finallyPromise = requestAry.reduce(
(currentPromise, nextRequest) => currentPromise.then(() => nextRequest()),
Promise.resolve() // 创建一个初始Promise以串联数组中的Promise。
);
<h4 id="PromiseMethodstopic-1">在新Promise作用域外改变状态</h4>
假设你有一些页面上的函数需要在使用前收集用户信息，一种方法是在点击某个功能前弹出信息收集对话框。
写在一个所有页面都能调用的地方更好
让我们看看高级前端是如何实现的。
以Vue3为例，看下面的示例。
&lt;!-- App.vue -->
&lt;template>
&lt;!-- 以下是模态组件。
-->
&lt;div class="modal" v-show="visible">
&lt;div>
用户名：&lt;input v-model="info.name" />
&lt;/div>
&lt;!-- 其他信息 -->
&lt;button @click="handleCancel">取消&lt;/button>
&lt;button @click="handleConfirm">提交&lt;/button>
&lt;/div>
&lt;!-- 页面组件 -->
&lt;/template>
&lt;script setup>
import { provide } from 'vue';
const visible = ref(false);
const info = reactive({
name: ''
});
let resolveFn, rejectFn;
// 将信息收集函数传递给以下内容。
provide('getInfoByModal', () => {
visible.value = true;
return new Promise((resolve, reject) => {
// 将两个函数赋值给外部，突破Promise作用域。
resolveFn = resolve;
rejectFn = reject;
});
});
const handleConfirm = () => {
resolveFn &amp;&amp; resolveFn(info);
};
const handleCancel = () => {
rejectFn &amp;&amp; rejectFn(new Error('用户已取消。
'));
};
&lt;/script>
接下来，直接调用 getInfoByModal 即可使用模态框，并轻松获取用户填写的数据。
&lt;template>
&lt;button @click="handleClick">填写信息&lt;/button>
&lt;/template>
&lt;script setup>
import { inject } from 'vue';
const getInfoByModal = inject('getInfoByModal');
const handleClick = async () => {
// 调用后，会显示模态框。
当用户点击“确认”时，Promise会变为fulfilled状态，从而获取用户信息。
const info = await getInfoByModal();
await api.submitInfo(info);
}
&lt;/script>
这也是许多UI组件库中封装常用组件的方法。
<h4 id="PromiseMethodstopic-2">async/await的替代用法</h4>
许多人只知道在调用 async function 时使用 await 接收返回值，但他们不知道async函数实际上是返回Promise的函数。
例如，以下两个函数是等价的：
const fn1 = async () => 1;
const fn2 = () => Promise.resolve(1);
fn1(); // 同样返回一个值为1的Promise对象。
在大多数情况下，await 后面跟着的是一个Promise对象，并等待其变为 fulfilled 状态。
因此，下面的函数 fn1 等待也是等价的：
await fn1();
const promiseInst = fn1();
await promiseInst;
然而，await 有一个不为人知的秘密。
当它后面跟的是非Promise对象的值时，它会使用 Promise 对象包装该值。
因此，await 后的代码总是异步执行的。
例如：
Promise.resolve().then(() => {
console.log(1);
});
await 2;
console.log(2);
// 输出顺序：1 2
等价于
Promise.resolve().then(() => {
console.log(1);
});
Promise.resolve().then(() => {
console.log(2);
});
<h4 id="PromiseMethodstopic-3">使用Promise实现请求共享</h4>
当一个请求已经发送但尚未响应时，再次发出相同请求会导致浪费请求。
此时，我们可以与第二个请求共享第一个请求的响应。
request('GET', '/test-api').then(response1 => {
// ...
});
request('GET', '/test-api').then(response2 => {
// ...
});
以上两个请求只会发送一次，并同时接收相同的响应值。
那么，请求共享有哪些场景呢？
我认为有三种：
当一个页面同时渲染多个内部组件获取数据时；
提交按钮未禁用，用户连续多次点击提交按钮；
在预加载数据的情况下，进入预加载页面前完成预加载；
这也是Alova的高级功能之一。
实现请求共享需要使用 Promise 缓存功能。
也就是说，一个Promise对象可以通过多次await调用获取数据。
简单的实现思路如下：
const pendingPromises = {};
function request(type, url, data) {
// 使用请求信息作为唯一请求键来缓存正在请求的Promise对象。
// 具有相同键的请求将重用该Promise。
const requestKey = JSON.stringify([type, url, data]);
if (pendingPromises[requestKey]) {
return pendingPromises[requestKey];
}
const fetchPromise = fetch(url, {
method: type,
data: JSON.stringify(data)
})
.then(response => response.json())
.finally(() => {
delete pendingPromises[requestKey];
});
return pendingPromises[requestKey] = fetchPromise;
}
<h4 id="PromiseMethodstopic-4">如果同时调用resolve和reject会发生什么</h4>
大家都知道，Promise有三种状态：pending、fulfilled 和 rejected。
但在下面的例子中，Promise 的最终状态是什么？
const promise = new Promise((resolve, reject) => {
resolve();
reject();
});
正确答案是 fulfilled 状态。
<strong style="color: rgb(74, 74, 74);background-attachment: scroll;background-clip: border-box;background-image: none;background-origin: padding-box;background-position: 0% 0%;background-repeat: no-repeat;background-size: auto;width: auto;height: auto;border-style: none;border-width: 3px;border-color: rgba(0, 0, 0, 0.4);border-radius: 0px;">我们只需记住，一旦Promise从pending状态转变为其他状态</strong>，就不能再改变。
因此，在这个例子中，调用 resolve()后，即使调用 reject()，状态也不会再改变。
<h4 id="PromiseMethodstopic-5">彻底弄清then/catch/finally的返回值</h4>
总结一句话，上述三个函数都会返回一个新的 Promise包装对象，包装的值是执行回调函数的返回值。
如果回调函数抛出错误，它将包装一个处于 rejected 状态的 Promise。
这不太容易理解，我们来看一个例子：
你可以将它们一个一个复制并在浏览器控制台中运行，以更好地理解。
// then函数
Promise.resolve().then(() => 1); // return new Promise(resolve => resolve(1))
Promise.resolve().then(() => Promise.resolve(2)); // return new Promise(resolve => resolve(Promise.resolve(2)))
Promise.resolve().then(() => {
throw new Error('abc')
}); // return new Promise(resolve => resolve(Promise.reject(new Error('abc'))))
Promise.reject().then(() => 1, () => 2); // return new Promise(resolve => resolve(2))
// catch函数
Promise.reject().catch(() => 3); // return new Promise(resolve => resolve(3))
Promise.resolve().catch(() => 4); // 返回值是一个新的Promise，解析为调用catch的Promise对象。
// 当finally函数的返回值不是Promise时，返回finally函数之前的Promise对象。
Promise.resolve().finally(() => {}); // return Promise.resolve()
Promise.reject().finally(() => {}); // return Promise.reject()
// 当finally函数的返回值是Promise时，等待返回的Promise解析后再返回finally函数之前的Promise对象。
Promise.resolve(5).finally(() => new Promise(res => {
setTimeout(res, 1000);
})); // 返回一个处于pending状态的Promise，1秒后解析为5。
Promise.reject(6).finally(() => new Promise(res => {
setTimeout(res, 1000);
})); // 返回一个处于pending状态的Promise，1秒后抛出数字6。
<h4 id="PromiseMethodstopic-6">then函数的第二个回调与catch回调有何不同</h4>
Promise中的 then 函数的第二个回调和 catch 函数在请求失败时都会被触发。
乍一看，它们似乎没有太大区别，但实际上，前者无法捕捉当前 then 函数第一个回调函数中抛出的错误，而 catch 函数可以。
Promise.resolve().then(
() => {
throw new Error('成功回调中的错误');
},
() => {
// 不会执行
}
).catch(reason => {
console.log(reason.message); // 打印“成功回调中的错误”
});
其原理如前所述，catch 函数是在 then 函数返回的 Promise 处于 rejected 状态时调用的，自然可以捕捉到其错误。
<h4 id="PromiseMethodstopic-7">实现Koa2洋葱模型中的Promise</h4>
Koa2框架引入了洋葱模型，使你的请求像剥洋葱一样逐层处理，按相反顺序进入和退出层，从而实现请求的统一前后处理。
<img src="https://mmbiz.qpic.cn/mmbiz_png/LDPLltmNy57zkKkIpVLe1vKJvXdweqgkWTeZ6X6Ficed84K7RKUjDhRtaXY8WZEhrkZibBLlTLSGJkKYgcAMIVbQ/640" loading="lazy">
我们看看一个简单的Koa2洋葱模型：
const app = new Koa();
app.use(async (ctx, next) => {
console.log('a-start');
await next();
console.log('a-end');
});
app.use(async (ctx, next) => {
console.log('b-start');
await next();
console.log('b-end');
});
app.listen(3000);
上面的输出是 a-start -> b-start -> b-end -> a-end。
这种神奇的输出顺序是如何实现的呢？
我用了大约20行代码实现了这个简单的实现，巧合的是，它与Koa相似。
接下来，让我们进一步分析。
保存中间件函数，然后在 listen 函数中接收到请求时调用洋葱模型的执行。
function action(koaInstance, ctx) {
// ...
}
class Koa {
middlewares = [];
use(mid) {
this.middlewares.push(mid);
}
listen(port) {
// 模拟接收请求的伪代码
http.on('request', ctx => {
action(this, ctx);
});
}
}
接收到请求后，从第一个中间件开始按顺序执行前置逻辑，调用 next。
// 开始中间件调用。
function action(koaInstance, ctx) {
let nextMiddlewareIndex = 1; // 标识下一个执行的中间件索引
// 定义next函数。
function next() {
// 在剥洋葱之前，调用next会调用下一个中间件函数。
const nextMiddleware = middlewares[nextMiddlewareIndex];
if (nextMiddleware) {
nextMiddlewareIndex++;
nextMiddleware(ctx, next);
}
}
// 从第一个中间件函数开始执行，并传入ctx和next函数。
middlewares[0](ctx, next);
}
处理“next”之后的后置逻辑
function action(koaInstance, ctx) {
let nextMiddlewareIndex = 1;
function next() {
const nextMiddleware = middlewares[nextMiddlewareIndex];
if (nextMiddleware) {
nextMiddlewareIndex++;
// 这里还添加了一个return，使中间件函数的执行通过Promise从后向前连接（建议反复理解这个return）。
return Promise.resolve(nextMiddleware(ctx, next));
} else {
// 在最后一个中间件的前置逻辑执行完后，返回的fulfilled Promise将开始执行next之后的后置逻辑。
return Promise.resolve();
}
}
middlewares[0](ctx, next);
}
<h2><pk>Learn Promises</pk></h2>
<br>
<div id="LearnPromisestoc" class="toc"><a href="#LearnPromisestopic-0" target="_self">Working With Promises</a><br><a href="#LearnPromisestopic-1" target="_self">A Promise Example</a><br><a href="#LearnPromisestopic-2" target="_self">Chaining Promises</a><br><a href="#LearnPromisestopic-3" target="_self">Error Handling</a><br></div></center>
Promises (like callbacks) allow us <r>to wait on certain code to finish execution prior to running the next bit of code</r>.
Our Promise can have one of three states:
<pk>Pending</pk> — Asynchronous operation has not completed yet
<pk>Fulfilled</pk> — Operation has completed and the Promise has a value
<pk>Rejected</pk> — Operation has completed with an error or failed.
A promise is <pk>settled</pk> if it is not pending.
Once a Promise has settled, it is settled for good.
It cannot transition to any other state.
<h3 id="LearnPromisestopic-0">Working With Promises</h3>
Most of the time when working with Promises, you will be consuming already-created promises that have been returned from functions.
However, you can also create a promise with it’s constructor.
Here’s what a simple Promise might look like:
runFunction().then(successFunc, failureFunc);
In the above example, we first invoke the runFunction() function.
Since runFunction() returns a promise, only when the Promise is settled can our successFunc, or failureFunc function run.
If the Promise is Fulfilled, our sucessFunc is invoked.
If the Promise fails, our failureFunc is invoked.
<h3 id="LearnPromisestopic-1">A Promise Example</h3>
It’s okay if this doesn’t make sense yet:
  function delay(t){
    return new Promise(function(resolve){
      return setTimeout(resolve, t)
    });
  }
  function logHi(){
    console.log('hi');
  }

  delay(2000).then(logHi);

Above we have two functions — a delay() function and a logHi() function.

The logHi() function simply logs 'hi' to the console.
The delay() function is a little more complicated.
It returns a Promise that will <pk>resolve</pk> after a supplied time frame.
We use the then() method to register callbacks to receive either the eventual fulfilled or rejected value.
With this in mind, we can use delay(2000).then(logHi) to pass in 2000 milliseconds (2 seconds) into our delay function.
After 2 seconds have passed, our Promise will resolve, and only <pk>then</pk> will our logHi function be invoked.
You can try this out yourself by opening up the Google Chrome Developer Tools and typing the above code into your console!
<h3 id="LearnPromisestopic-2">Chaining Promises</h3>
One of the main benefits of Promises is that they allow us to <pk>chain</pk> asynchronous operations together.
This means we can specify subsequent operations to start only when the previous operation has succeeded.
This is called a Promise Chain.
Here’s an example:
<pk>new Promise</pk>(function(resolve, reject) {
setTimeout(() => resolve(1), 2000);
})<pk>.then</pk>((result) => {
alert(result);
return result + 2;
})<pk>.then</pk>((result) => {
alert(result);
return result + 2;
})<pk>.then</pk>((result) => {
alert(result);
return result + 2;
});
Above, our initial promise is going to resolve in 2000 milliseconds with a value of 1.
After resolving, the then() handler is called and the value of 1 is alerted to the screen.
Finally, the value is added to 2, and our new value of 3 is returned.
This value is passed on to the next then() handler, and the process repeats.
Obviously this is not a real world example, but it should illustrate for you how Promises can be chained together.
This is very useful with certain tasks in JavaScript such as loading external resources, or for waiting for API data before processing it.
<h3 id="LearnPromisestopic-3">Error Handling</h3>
Up until this point, we’ve only dealt with <em>resolved</em> promises.
That’s about to change.
We can use .catch() to catch all of our errors in our Promise chain.
Lets look at what a .catch() might look like:
// ....
})
<pk>.catch</pk>((e) => {
console.log('error: ', e)
}
Above I’ve created a simple .catch() that will take the returned error message and log it to the console.
Lets add in error handling to the previous example now.
Below, there are only two changes.
After the second .then() I’ve added in an error and an error message.
I’ve also added our .catch() to the end of the chain.
What do you expect to happen when this code is run:
<pk>new Promise</pk>(function(resolve, reject) {
setTimeout(() => resolve(1), 2000);
})<pk>.then</pk>((result) => {
alert(result);
return result + 2;
})<pk>.then</pk>((result) => {
<pk>throw new Error('FAILED HERE');</pk>
alert(result);
return result + 2;
})<pk>.then</pk>((result) => {
alert(result);
return result + 2;})<pk>.catch</pk>((e) => {
console.log('error: ', e)
});
Here’s what happens:
Our Promise resolves after 2 seconds with a value of 1
This value is passed to the first .then() and alerted to the screen.
2 is added and a new value of 3 is passed to the second .then()
A new Error is thrown.
Execution stops immediately and the Promise resolves to a rejected state.
.catch() receives our error value and logs it to the screen.
<h2>One-Liner JavaScript</h2>
<div id="One-Linertoc" class="toc"><a href="#One-Linertopic-0" target="_self">Shuffle Array</a><br><a href="#One-Linertopic-2" target="_self">Unique Elements</a><br><a href="#One-Linertopic-3" target="_self">Detect Dark Mode</a><br><a href="#One-Linertopic-4" target="_self">Scroll To Top</a><br><a href="#One-Linertopic-5" target="_self">Scroll To Bottom</a><br><a href="#One-Linertopic-6" target="_self">Generate Random Color</a><br></div></center>
<br><br>
<h3 id="One-Linertopic-0">Shuffle Array</h3>
const shuffleArray = (arr) => arr.sort(() => Math.random() - 0.5);
// Testing
const arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
console.log(shuffleArray(arr));
<h3 id="One-Linertopic-2">Unique Elements</h3>
const getUnique = (arr) => [...new Set(arr)];
// Testing
const arr = [1, 1, 2, 3, 3, 4, 4, 4, 5, 5];
console.log(getUnique(arr));
<h3 id="One-Linertopic-3">Detect Dark Mode</h3>
const isDarkMode = () =>window.matchMedia &&window.matchMedia("(prefers-color-scheme: dark)").matches;
// Testing
console.log(isDarkMode());
<h3 id="One-Linertopic-4">Scroll To Top</h3>
const scrollToTop = (element) =>element.scrollIntoView({ behavior: "smooth", block: "start" });
<h3 id="One-Linertopic-5">Scroll To Bottom</h3>
const scrollToBottom = (element) =>element.scrollIntoView({ behavior: "smooth", block: "end" });
<h3 id="One-Linertopic-6">Generate Random Color</h3>
const generateRandomHexColor = () =>`#${Math.floor(Math.random() * 0xffffff).toString(16)}`;
<h2>JavaScript <k>this</k> Keyword</h2>
In JavaScript, the &lt;k>this&lt;/k> keyword refers to an object.
The &lt;k>this&lt;/k> keyword refers to different objects depending on how it is used:
Methods like call(), apply(), and bind() can refer this to any object.
Example
const person = {
firstName: "John",
lastName : "Doe",
id       : 5566,
fullName : function() {
return this.firstName + " " + this.lastName;
}
};
When used alone, this refers to the global object.
&lt;k>this&lt;/k> in Event Handlers
Example
&lt;button onclick="this.style.display='none'">
Click to Remove Me!
&lt;/button>
Example
const person = {
firstName  : "John",
lastName   : "Doe",
id         : 5566,
myFunction : function() {
return this;
}
};
Example
const person = {
firstName: "John",
lastName : "Doe",
id       : 5566,
fullName : function() {
return this.firstName + " " + this.lastName;
}
};
Example
const person1 = {
fullName: function() {
return this.firstName + " " + this.lastName;
}
}
const person2 = {
firstName:"John",
lastName: "Doe",
}
// Return "John Doe":
person1.fullName.call(person2);
<h2>javascript to list all memory variavles</h2>
for(var b in window) { 
if(window.hasOwnProperty(b)) console.log(b); 
}
<h2>codes to be studied</h2>
appendChild()
select()
execCommand()
remove();
all = $('*').not('script, meta, link, style, noscript, title')
(document).on('mousemove', function (e) {
let cordinate_x = e.pageX;
let cordinate_y = e.pageY;
let windowWidth = $(window).width();
if (cordinate_y < tooltip.outerHeight()) { tooltip.css({'top': (cordinate_y + 10) + 'px'});
tooltip.addClass(tooltipClass);
$(window).on('keyup', function (e) { let keyCode = e.keyCode ? e.keyCode : e.which;
if (keyCode == 44) {stopPrntScr();
audio_play();
$(document).on('contextmenu', function (e) { let target = $(event.target);
if (target.is("img") || target.is("div.ays_tooltip_class")) {let t = e || window.event;
let n = t.target || t.srcElement;
if (n.nodeName !== "A") { show_tooltip(1 );
$(document).on('dragstart', function () { let target = $(event.target);
if (!target.is("")) {show_tooltip(1 );
$(window).on('keydown', function (event) {  var sccp_selObj = window.getSelection();
if (!sccp_selObj.rangeCount < 1) {var sccp_selRange = sccp_selObj.getRangeAt(0);
sccp_selection_selector = sccp_selRange.startContainer.parentElement;
check_selectors = !$(sccp_selection_selector).is("");
if (check_selectors) {var isOpera = (BrowserDetect.browser === "Opera");
var isFirefox = (BrowserDetect.browser === 'Firefox');
var isSafari = (BrowserDetect.browser === 'Safari');
var isIE = (BrowserDetect.browser === 'Explorer');
var isChrome = (BrowserDetect.browser === 'Chrome');
var isMozilla = (BrowserDetect.browser === 'Mozilla');
if (BrowserDetect.OS === 'Windows') {
if (isChrome) { if (((event.ctrlKey && event.shiftKey) && ( event.keyCode === 73 || event.keyCode === 74 || event.keyCode === 68 || event.keyCode === 67))) { show_tooltip(1);
if (isFirefox) { if (((event.ctrlKey && event.shiftKey) && ( event.keyCode === 73 || event.keyCode === 74 || event.keyCode === 67 || event.keyCode === 75 || event.keyCode === 69)) || event.keyCode === 118 ||   (event.keyCode === 112 && event.shiftKey) || (event.keyCode === 115 && event.shiftKey) || (event.keyCode === 118 && event.shiftKey) || (event.keyCode === 120 && event.shiftKey)) { show_tooltip(1);
if (isOpera) { if (((event.ctrlKey && event.shiftKey) && ( event.keyCode === 73 || event.keyCode === 74 || event.keyCode === 67 || event.keyCode === 88 || event.keyCode === 69))) { show_tooltip(1);
if (isIE) { if ((event.keyCode === 123 && event.shiftKey)) { show_tooltip(1);
if (isMozilla) { if ((event.ctrlKey && event.keyCode === 73) ||  (event.altKey && event.keyCode === 68)) { show_tooltip(1);
if (BrowserDetect.OS === 'Linux') {
if (BrowserDetect.OS === 'Mac') {
if (isChrome || isSafari || isOpera || isFirefox)
function disableSelection(e) {
if (typeof e.onselectstart !== "undefined")e.onselectstart = function () {  show_tooltip( );
audio_play();
return false};
else if (typeof e.style.MozUserSelect !== "undefined")e.style.MozUserSelect = "none";
else e.onmousedown = function () {  show_tooltip();
e.style.cursor = "default"}
$('#ays_tooltip').fadeOut();
function copyToClipboard(text) { var textarea = document.createElement("textarea");
catch (ex) {console.warn("Copy to clipboard failed.", ex);
document.body.removeChild(textarea);
function htmlDecode(input) { var doc = new DOMParser().parseFromString(input, "text/html");
return doc.documentElement.textContent;
this.version = this.searchVersion(navigator.userAgent)
this.OS = this.searchString(this.dataOS)
parseFloat(dataString.substring(index + this.versionSearchString.length + 1));
<h2>execCommand()</h2>
Year 2022 answer: The execCommand() is officially obsolete/deprecated but there's no alternative.

So if you must have rich text support, you have to keep using execCommand() and figure out yourself what actually works with browsers that you want to support.
Note that real world user agents (browsers such as Chrome, Firefox and Safari) cannot drop support for execCommand() because so many services require support for it.

The sad state of things is that HTML5 cannot specify any common ground.

This is because browser vendors do not agree how execCommand() should work.

So nothing can be specified for HTML5, which has the overall objective to specify all stuff – and only stuff – that's needed for full interoperability for any new browser to enter market.

HTML5 fails here because execCommand() compatibility is actually required for any new browser to enter market.

So it would make sense to standardize at least one of the browser specific implementations as the official one.
All the current standardization efforts (Input Events 2, Clipboard API) fail to even try to cover the features that execCommand() actually does (for example, undo/redo, actually changing content within the selection range).
The hardest part to solve is the caret movement, selecting text, different IME (Input Method Editor) behavior and handling native clipboard.

These all interact with each other in various ways depending on browser and operating system.

For example, the behavior that iOS Safari has on iPad while writing Traditional Chinese is totally different from Firefox on Windows with Thai IME.

Which is again totally different from Chrome running on Chromebook while writing Finnish or entering emoji characters with multiple UNICODE point encoding.

And as none of the available JS APIs disclose all the details, you MUST use contenteditable and possibly execCommand(), too, for most browsers to get correct input from the IME.
Also note that e.g.
Android GBoard needs to also know about the surrounding text within the same editable content because it uses AI logic to correctly figure out which word suggestions to give to the user while inputting text, so you cannot fake this with a single empty invisible textarea under the caret because that would be missing the required context.

That hasn't prevented people from trying to do exactly that but it fails in practice in various ways.
<a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand" class="whitebut ">Syntax</a>
<h2>JavaScript Timer</h2>
var shell = WScript.CreateObject("WScript.Shell");
// 定义定时器持续时间（毫秒）
var timerDuration = 5000; // 5秒
// 定义重复次数
var repeatCount = 3; // 重复3次
// 循环执行指定次数
for (var i = 1; i <= repeatCount; i++) {
// 显示消息框
shell.Popup("定时器已到期！", 0, "定时器");
// 等待指定的持续时间
WScript.Sleep(timerDuration);
}
在这个 JavaScript 示例中，我们使用 WScript.CreateObject 方法创建了 WScript.Shell 对象，然后使用该对象的 Popup 方法显示一个消息框。
使用 WScript.Sleep 方法来实现定时器的延迟。
将代码保存为 .js 文件，并使用 Windows Script Host (WSH) 运行该文件。
它会在指定的时间间隔后弹出消息框，并按照设置的重复次数重复显示。
请注意，这段代码使用的是 Windows Script Host (WSH)，而不是在浏览器中运行的标准 JavaScript。
因此，在命令行或通过脚本运行该文件时，确保系统中已安装并配置了 WSH。
<h2>要在浏览器中运行 JavaScript 编写定时闹钟</h2>
使用 setTimeout 函数来实现定时器功能。
function setAlarm(alarmTime) {
var currentTime = new Date().getTime();
var alarmDateTime = new Date(alarmTime).getTime();
var timeDifference = alarmDateTime - currentTime;
if (timeDifference > 0) {
setTimeout(function() {
alert("闹钟时间到！");
}, timeDifference);
} else {
alert("闹钟时间必须晚于当前时间！");
}
}
// 设置闹钟时间
var alarmTime = "2023-11-13T08:00:00"; // 闹钟时间，格式为 "YYYY-MM-DDTHH:mm:ss"
// 调用设置闹钟函数
setAlarm(alarmTime);
在这个示例中，setAlarm 函数接受一个闹钟时间作为参数。
它首先获取当前时间和闹钟时间的时间戳，并计算它们之间的时间差（以毫秒为单位）。
如果时间差大于零，则使用 setTimeout 函数在时间差之后触发弹窗提醒。
如果时间差小于等于零，则显示一个错误提示。
您可以将闹钟时间作为字符串传递给 setAlarm 函数，并按照 "YYYY-MM-DDTHH:mm:ss" 的格式设置时间。
请注意，日期和时间之间使用 "T" 分隔。
在浏览器的控制台中运行这段代码，它将设置一个定时闹钟，并在指定的闹钟时间到达时触发弹窗提醒。
<h2>JavaScript webscraper</h2>
<k>Node-crawler</k>
https://github.com/bda-research/node-crawler
支持非阻塞异步I/O，实现爬虫的流水线运行机制。
同时支持DOM的快速选取（无需编写正则表达式）。
服务器端使用Cheerio（默认）或JSDOM实现jQuery自动插入DOM
<k>EasySpider</k>
https://github.com/NaiboWang/EasySpider
可以使用图形化界面，无代码可视化的设计和执行任务。
同时软件还可以单独以命令行的方式进行执行，从而可以很方便地嵌入到其他系统中。
<h2>Creates a copy of the array</h2>
var tempArray = testArray.slice();
creating a reference to testArray:
var tempArray = testArray;
Basically tempArray is just another name for the same object.
to create a copy of the array
use slice() which copies the data in testArray.
This is an issue of pass by reference, vs pass by value -- it very much varies language to language.
<h2>To pass data from one application to a browser</h2>
<br>
<br>
<div id="passdatatoc" class="toc"><a href="#passdatatopic-0" target="_self">Introduction</a><br><a href="#passdatatopic-1" target="_self"><r> Shared Memory:</r></a><br><a href="#passdatatopic-2" target="_self"><r> WebSocket:</r></a><br><a href="#passdatatopic-3" target="_self"><r> Local Server:</r></a><br><a href="#passdatatopic-4" target="_self"><r> Inter-Process Communication (IPC):</r></a><br><a href="#passdatatopic-5" target="_self">using Python</a><br><a href="#passdatatopic-6" target="_self">using R</a><br><a href="#passdatatopic-7" target="_self">using JavaScript</a><br><a href="#passdatatopic-8" target="_self">using Node.js</a><br></div></center>
<pre>
<h3 id="passdatatopic-0">Introduction</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
It is possible to pass data from one application to a browser through shared memory or inter-process communication (IPC) mechanisms.
Here are a few common approaches:
<b id="passdatatopic-1"><r> Shared Memory:</r></b> <a href="#top" target="_self"><b>⇧</b></a><br> Applications can create a shared memory region that is accessible by multiple processes.
One application can write data to this shared memory, and the browser can read it.
The data can be structured in a specific format, such as JSON or binary, to ensure compatibility between the applications.
<b id="passdatatopic-2"><r> WebSocket:</r></b> <a href="#top" target="_self"><b>⇧</b></a><br> WebSocket is a communication protocol that provides full-duplex communication channels over a single TCP connection.
An application can establish a WebSocket connection with the browser, allowing bidirectional communication.
The application can then send data to the browser in real-time.
<b id="passdatatopic-3"><r> Local Server:</r></b> <a href="#top" target="_self"><b>⇧</b></a><br> An application can act as a local server and expose an API or web service.
The browser can send HTTP requests to this local server, passing the data as part of the request payload or query parameters.
The application can then process the request and respond with the necessary data.
<b id="passdatatopic-4"><r> Inter-Process Communication (IPC):</r></b> <a href="#top" target="_self"><b>⇧</b></a><br> IPC mechanisms like named pipes, Unix domain sockets, or message queues can be used to facilitate communication between the application and the browser.
The application can send messages or data to the browser using the chosen IPC mechanism, and the browser can receive and process them accordingly.
It's important to note that the specific implementation details may vary depending on the operating system, programming languages, and frameworks being used.
Each approach has its own advantages and considerations, so the choice of method depends on the specific requirements and constraints of your application.
<h3 id="passdatatopic-5">using Python</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
Here's an example using Python to demonstrate how to pass data from one application to a browser through shared memory:
Application (Data Producer): python
import mmap
# Open or create a shared memory region
shm = mmap.mmap(-1, 1024, "SharedMemName")
# Write data to the shared memory
data = b"Hello, browser!"
shm.write(data)
# Close the shared memory
shm.close()
Browser (Data Consumer): javascript
// Create an XMLHttpRequest object
var xhr = new XMLHttpRequest();
// Open a GET request to the server endpoint that reads the shared memory
xhr.open('GET', '/readSharedMemory', true);
// Set the response type to 'arraybuffer'
xhr.responseType = 'arraybuffer';
// Handle the response
xhr.onload = function() {
// Retrieve the shared memory data
var sharedData = new Uint8Array(xhr.response);
// Convert the shared memory data to a string
var text = String.fromCharCode.apply(null, sharedData);
// Display the data in the browser console
console.log(text);
};
// Send the request
xhr.send();
In this example, the application (Data Producer) creates a shared memory region using the mmap module in Python.
It writes the data (in this case, the string "Hello, browser!") to the shared memory region.
On the browser side (Data Consumer), an XMLHttpRequest is used to send a GET request to a server endpoint (e.g., /readSharedMemory).
The server reads the shared memory and returns the data as an ArrayBuffer in the response.
The response data is then converted to a string and displayed in the browser console.
Please note that this is a simplified example for demonstration purposes, and the actual implementation may vary based on your specific requirements and programming environment.
<h3 id="passdatatopic-6">using R</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
Here's an example using R to demonstrate how to pass data from R to a browser through shared memory:
Application (Data Producer) - R script:
# Install required packages if not already installed
if (!require("Rcpp")) install.packages("Rcpp")
# Load the required libraries
library(Rcpp)
library(RcppParallel)
# Define a function to write data to shared memory
writeToSharedMemory &lt;- function(data) {
# Convert the data to raw bytes
raw_data &lt;- charToRaw(data)
# Create a shared memory object
shared_memory &lt;- SharedMemory$new("SharedMemName", length(raw_data))
# Write the data to shared memory
shared_memory$write(0, raw_data)
# Release the shared memory object
shared_memory$detach()
}
# Call the function to write data to shared memory
writeToSharedMemory("Hello, browser!")
Browser (Data Consumer) - JavaScript:
// Create an XMLHttpRequest object
var xhr = new XMLHttpRequest();
// Open a GET request to the server endpoint that reads the shared memory
xhr.open('GET', '/readSharedMemory', true);
// Set the response type to 'arraybuffer'
xhr.responseType = 'arraybuffer';
// Handle the response
xhr.onload = function() {
// Retrieve the shared memory data
var sharedData = new Uint8Array(xhr.response);
// Convert the shared memory data to a string
var text = String.fromCharCode.apply(null, sharedData);
// Display the data in the browser console
console.log(text);
};
// Send the request
xhr.send();
In this example, the R script (Data Producer) uses the Rcpp and RcppParallel libraries to create a shared memory object and write data to it.
The writeToSharedMemory function converts the data (in this case, the string "Hello, browser!") to raw bytes and writes it to the shared memory region.
On the browser side (Data Consumer), an XMLHttpRequest is used to send a GET request to a server endpoint (e.g., /readSharedMemory).
The server reads the shared memory and returns the data as an ArrayBuffer in the response.
The response data is then converted to a string and displayed in the browser console.
Please note that this example assumes you have the necessary R packages (Rcpp and RcppParallel) installed.
Additionally, the server-side implementation that reads the shared memory and serves it to the browser needs to be implemented separately based on your specific web framework or server environment.
<h3 id="passdatatopic-7">using JavaScript</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
In JavaScript, there is no built-in mechanism for directly sharing memory between different browser tabs or windows.
However, you can use other techniques to pass data between JavaScript instances running in different tabs or windows of the same browser.
One such technique is using the localStorage object to share data.
Here's an example:
Sending data from JavaScript in one tab/window:
javascript
// Set the data in localStorage
localStorage.setItem('sharedData', 'Hello, other tab!');
Receiving data in JavaScript in another tab/window:
javascript
// Listen for changes to localStorage
window.addEventListener('storage', function(event) {
if (event.key === 'sharedData') {
// Retrieve the shared data
var sharedData = event.newValue;
// Do something with the shared data
console.log(sharedData);
}
});
In this example, the first JavaScript instance sets the data in the localStorage object using the setItem method.
The key for the data is 'sharedData', and the value is 'Hello, other tab!'.
The second JavaScript instance listens for changes to the localStorage object using the storage event.
When the event is triggered, it checks if the event key is 'sharedData'.
If it matches, it retrieves the shared data from event.newValue and can then perform any necessary operations with the shared data.
Please note that this technique is limited to sharing data within the same browser, and it has some limitations such as storage capacity restrictions and the requirement for the events to be triggered by changes in the localStorage object.
<h3 id="passdatatopic-8">using Node.js</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
In Node.js, you can use the shared-memory package to create and manage shared memory regions, allowing you to pass data from Node.js to a browser.
Here's an example:
Install the required package:
shell
npm install shared-memory
Node.js Server (Data Producer): javascript
const sharedMemory = require('shared-memory');
// Create or open a shared memory region
const shm = sharedMemory.create('SharedMemName', 1024);
// Write data to the shared memory
const data = 'Hello, browser!';
shm.write(data);
// Close the shared memory
shm.close();
Browser (Data Consumer) - JavaScript:
// Create an XMLHttpRequest object
var xhr = new XMLHttpRequest();
// Open a GET request to the server endpoint that reads the shared memory
xhr.open('GET', '/readSharedMemory', true);
// Set the response type to 'arraybuffer'
xhr.responseType = 'arraybuffer';
// Handle the response
xhr.onload = function() {
// Retrieve the shared memory data
var sharedData = new Uint8Array(xhr.response);
// Convert the shared memory data to a string
var text = String.fromCharCode.apply(null, sharedData);
// Display the data in the browser console
console.log(text);
};
// Send the request
xhr.send();
In this example, the Node.js server (Data Producer) uses the shared-memory package to create or open a shared memory region with the name 'SharedMemName' and a size of 1024 bytes.
It then writes the data (in this case, the string 'Hello, browser!') to the shared memory region.
On the browser side (Data Consumer), an XMLHttpRequest is used to send a GET request to a server endpoint (e.g., /readSharedMemory).
The server reads the shared memory and returns the data as an ArrayBuffer in the response.
The response data is then converted to a string and displayed in the browser console.
Please note that this example assumes you have installed the shared-memory package and have a Node.js server set up to handle the HTTP requests.
The server-side implementation that reads the shared memory and serves it to the browser needs to be implemented separately based on your specific server environment.
<h2>call a function when a javascript variable changed</h2>
In JavaScript, there is no built-in mechanism to directly detect changes in a variable.
However, you can create a custom setter function or use a JavaScript Proxy object to achieve this behavior.
Here's an example using a setter function:
javascript
// Create a variable with an initial value
let myVariable = 0;
// Create a setter function for the variable
function setMyVariable(value) {
myVariable = value;
// Call your function here
yourFunction();
}
// Assign the setter function to the variable
myVariable = setMyVariable;
// Your function to be called when the variable changes
function yourFunction() {
console.log('Variable has changed!');
}
// Update the variable's value
myVariable = 10; // This will trigger the setter function and call yourFunction()
In this example, we define a variable myVariable and a setter function setMyVariable to update its value.
Whenever you assign a new value to myVariable, it will actually call the setMyVariable function, which in turn updates the value and calls yourFunction.
This way, you can ensure that yourFunction is invoked whenever the variable changes.
You may need to adapt this approach depending on your specific use case and how the variable is being accessed or modified in your code.
<h2>To run a function after an element has changed without continuously running the function</h2>
Make use of JavaScript's MutationObserver API.
The MutationObserver allows you to watch for changes in a specific DOM element and trigger a callback function when the changes occur.
Here's an example of how you can use the MutationObserver to achieve this:
javascript
// Select the target element
const targetElement = document.getElementById('your-element-id');
// Create a new MutationObserver
const observer = new MutationObserver(function(mutationsList, observer) {
// Check if the mutations include the desired changes
for (let mutation of mutationsList) {
if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
// Call your function here
yourFunction();
// Disconnect the observer after the change is detected
observer.disconnect();
break;
}
}
});
// Start observing the target element for changes
observer.observe(targetElement, { attributes: true });
// Your function to be called when the element changes
function yourFunction() {
console.log('Element has changed!');
}
In this example, the MutationObserver is created and attached to the target element using the observe method.
In the callback function, you can check for specific types of mutations (in this case, attribute changes) and execute your desired function.
Once the change is detected, you can disconnect the observer using the disconnect method to stop further observations.
Make sure to replace 'your-element-id' with the actual ID of the element you want to monitor, and customize the yourFunction function to perform the desired actions when the element changes.
<h2>Use browser javascript to write file to local drive</h2>
In a web browser environment, JavaScript doesn't have direct access to the local file system for security reasons.
However, you can achieve file writing functionality using a combination of JavaScript and other web technologies.
One common approach is to use the File API and the download attribute on an anchor tag.
Here's an example:
html
&lt;!DOCTYPE html>
&lt;html>
&lt;head>&lt;title>File Writing Example&lt;/title>&lt;/head>
&lt;body>
&lt;button onclick="saveToFile()">Save Text to File&lt;/button>
&lt;script>
function saveToFile() {
var textToWrite = "This is the content of the file.";
var element = document.createElement('a');
element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(textToWrite));
element.setAttribute('download', 'myfile.txt');
element.style.display = 'none';
document.body.appendChild(element);
element.click();
document.body.removeChild(element);
}
&lt;/script>
&lt;/body>
&lt;/html>
In this example, we create a button with the onclick event that triggers the saveToFile function.
Inside the function, we create a new anchor element using document.createElement('a').
We set the href attribute to a data URL that contains the text content we want to save.
The download attribute specifies the filename for the downloaded file.
We then append the anchor element to the document body, trigger a click event on it programmatically using element.click(), and finally remove the element from the document.
When the user clicks the button, their browser will download the file with the specified content as a text file.
The user will be prompted to save the file to their local drive.
If you have a web page running locally on your computer, you can use JavaScript to write a file to the local drive.
However, it requires additional steps and is not as straightforward as the previous example.
To write a file to the local drive, you can use the File System API, which is available in some modern browsers.
Here's an example of how you can use the File System API to write a file:
html
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;title>Local File Writing Example&lt;/title>
&lt;/head>
&lt;body>
&lt;button onclick="saveToFile()">Save Text to File&lt;/button>
&lt;script>
function errorHandler(err) {
console.error('Error:', err);
}
function saveToFile() {
var textToWrite = "This is the content of the file.";
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
window.requestFileSystem(
window.PERSISTENT,
5 * 1024 * 1024, // 5MB storage space
function (fs) {
fs.root.getFile(
'myfile.txt',
{ create: true },
function (fileEntry) {
fileEntry.createWriter(
function (fileWriter) {
fileWriter.onwriteend = function () {
console.log('File saved successfully.');
};
fileWriter.onerror = errorHandler;
var blob = new Blob([textToWrite], { type: 'text/plain' });
fileWriter.write(blob);
},
errorHandler
);
},
errorHandler
);
},
errorHandler
);
}
&lt;/script>
&lt;/body>
&lt;/html>
In this example, we use the requestFileSystem method to request access to the file system.
We then specify the storage space size (5MB in this case) and provide a success callback function and an error callback function.
Inside the success callback, we use fs.root.getFile to create or access the file.
We pass the filename as 'myfile.txt', and { create: true } to ensure the file is created if it doesn't exist.
Once we have the fileEntry, we call fileEntry.createWriter to create a FileWriter object.
We set up event handlers for onwriteend and onerror to handle the write operation's success or failure.
We create a Blob object containing the text content to be written, specifying the MIME type as 'text/plain'.
Then we call fileWriter.write to write the Blob to the file.
When the user clicks the button, the JavaScript code will attempt to write the file to the local drive using the File System API.
Please note that the availability and support for the File System API may vary among different browsers, and it may require specific permissions or additional configurations to work properly.
<h2>To save a file from a web browser by making a request to a Node.js server</h2>
<b>Set up a Node.js server</b>: Create a Node.js server using a framework like Express.js or the built-in http module.
Set up a route to handle the file-saving request.
<b>Handle the file-saving request on the server</b>: In the server route handler, receive the file content from the browser request and save it to the server's file system using Node.js's built-in fs module.
<b>Send a response to the browser</b>: Once the file is saved successfully or encounters an error, send a response back to the browser to indicate the status of the file-saving operation.
Here's an example to illustrate this process:
Node.js Server:
javascript
const express = require('express');
const fs = require('fs');
const app = express();
const PORT = 3000;
app.post('/savefile', (req, res) => {
let fileData = '';
req.on('data', (chunk) => {
fileData += chunk;
});
req.on('end', () => {
// Save the file to the server's file system
fs.writeFile('path/to/save/file.txt', fileData, (err) => {
if (err) {
console.error('Error saving file:', err);
res.status(500).send('Error saving file');
} else {
console.log('File saved successfully');
res.send('File saved successfully');
}
});
});
});
app.listen(PORT, () => {
console.log(`Server is running on port ${PORT}`);
});
In this example, we set up an Express.js server listening on port 3000.
The /savefile route is configured to handle POST requests.
Inside the route handler, we listen to the data event of the request object to receive the file content sent by the browser.
We concatenate the received chunks of data into a single string variable fileData.
When the request ends (end event), we use fs.writeFile to save the file to the server's file system.
Adjust the file path in the writeFile function to the desired location where you want to save the file.
If the file saving is successful, we send a response with status code 200 and the message "File saved successfully" back to the browser.
If an error occurs during the file-saving operation, we send a response with status code 500 and the message "Error saving file".
On the browser side, you need to make an HTTP POST request to the server's /savefile route, sending the file content.
You can use JavaScript's fetch API or other AJAX libraries to accomplish this.
Here's an example using fetch:
Browser JavaScript:
javascript
function saveFileToServer() {
var fileContent = 'This is the content of the file.';
fetch('/savefile', {
<b>method</b>: 'POST',
<b>body</b>: fileContent
})
.then(response => {
if (response.ok) {
console.log('File saved on the server');
} else {
console.error('Error saving file on the server');
}
})
.catch(error => {
console.error('Error:', error);
});
}
saveFileToServer();
In this example, we define the saveFileToServer function, which sends an HTTP POST request to the server's /savefile route.
We pass the file content as the request body.
When the server responds, we check the response's status code.
If it's successful (status code 200), we log the message "File saved on the server".
Otherwise, we log the error message "Error saving file on the server" in case of an unsuccessful response or connection failure.
Make sure to adjust the server URL ('/savefile') in the fetch request based on your server's configuration.
With these steps, you can save a file from a web browser by making a request to a Node.js server.
<h2>To draw stock OHLC charts using JavaScript</h2>
One popular library for this purpose is Chart.js.
Here's a step-by-step guide on how to use Chart.js to draw OHLC charts:
<b>Step 1: Include Chart.js Library</b>
Add the Chart.js library to your HTML file by including the following script tag:
html
&lt;script src="https://cdn.jsdelivr.net/npm/chart.js">&lt;/script>
<b>Step 2: Prepare HTML Canvas Element</b>
Create an HTML canvas element where the chart will be rendered.
Make sure to give it an ID for easy reference:
html
&lt;canvas id="ohlcChart">&lt;/canvas>
<b>Step 3: Retrieve Stock Data</b>
Fetch or retrieve the stock data that contains OHLC values.
You can use an API or a data source of your choice to obtain the required data.
<b>Step 4: Prepare Data for Chart.js</b>
Convert the retrieved stock data into a format that Chart.js can understand.
The data should be organized as an array of objects, with each object representing a data point.
Each object should have properties for t (timestamp), o (open), h (high), l (low), and c (close).
For example:
javascript
const stockData = [
{ t: 1630518000000, o: 100, h: 110, l: 90, c: 105 },
{ t: 1630604400000, o: 105, h: 115, l: 95, c: 112 },
// Add more data points...
];
example:
const ohlcData = [
{ x: Date.parse('2023-08-01'), o: 221.13, h: 222.99, l: 222.13, c: 221.31 },
{ x: Date.parse('2023-08-02'), o: 221.13, h: 222.99, l: 222.13, c: 222.31 },
// Add more data points...
];
<b>Step 5: Create OHLC Chart</b>
Initialize a new Chart.js chart instance and configure its options and data using the stock data prepared in the previous step:
javascript
// Get the canvas element
const canvas = document.getElementById('ohlcChart');
// Create the OHLC chart
const ohlcChart = new Chart(canvas, {
type: 'candlestick',
data: {
datasets: [{
label: 'Stock Data',
data: stockData,
borderColor: 'rgba(0, 0, 0, 1)',
borderWidth: 1
}]
},
options: {
// Configure chart options as needed
// For example, you can set the chart title, axis labels, etc.
// Refer to Chart.js documentation for available options
}
});
<b>Step 6: Customize and Style the Chart</b>
You can further customize the chart's appearance and style by modifying the options object passed to the Chart.js chart instance.
For example, you can change the colors, add tooltips, set axis labels, and more.
Refer to the Chart.js documentation for a comprehensive list of available options and customization possibilities.
That's it! With these steps, you can draw stock OHLC charts using JavaScript and Chart.js.
Remember to adjust the code according to your specific data and requirements.
<h2>Cross-Origin Resource Sharing</h2>
In a web browser, the JavaScript CORS (Cross-Origin Resource Sharing) policy restricts requests made from a webpage to resources located on a different domain.
This policy exists for security reasons and cannot be bypassed directly from JavaScript code.
However, if you have control over the server hosting the JavaScript file and can modify its configuration, you can enable CORS on the server to allow requests from the domain where your webpage is hosted.
This requires making changes on the server-side, not within the JavaScript code itself.
Assuming you have control over the server, here's how you can enable CORS for a JavaScript file:
Configure the server: Modify the server configuration to include the appropriate CORS headers.
This process depends on the server technology you are using.
For example, if you're using Apache, you can set the CORS headers in the .htaccess file or the server configuration file.
Here's an example of setting CORS headers in Apache:
apache
Header set Access-Control-Allow-Origin "*"
The above example allows requests from any domain (*).
You can replace * with the specific domain(s) from where you want to allow requests.
Restart the server: After making the configuration changes, restart the server for the changes to take effect.
Once CORS is enabled on the server, you should be able to load the JavaScript file from a different domain without encountering CORS restrictions.
Keep in mind that bypassing the CORS policy may have security implications, so it's essential to understand the risks and only enable CORS when necessary and with the appropriate security measures in place.
<h2>load an external Javascript file during an "onclick" event</h2>
Use jQuery's $.getScript() function
sample code:
$("button").click(function(){
$.getScript("demo_ajax_script.js");
}); 
has been blocked by CORS policy: Cross origin requests are only supported for protocol schemes: http, data, isolated-app
<h2>Inspect autoload</h2>
Right-click on the webpage and select "Inspect" or "Inspect Element" from the context menu.

This will open the browser's developer tools.
Navigate to the Network tab: In the developer tools, locate the "Network" tab.

This tab will display the network activity of the webpage.
Scroll to trigger the autoload: Scroll down on the webpage until the additional images are loaded or until you reach the end of the page where the autoload should occur.
Observe network requests: As you scroll, keep an eye on the Network tab.

Look for any new network requests that appear in the list while you're scrolling.

These requests could indicate the autoload URL or other related requests.
Filter and analyze requests: If you see new requests appearing in the Network tab, you can filter the requests by different types (e.g., XHR, Fetch, or Images) to focus on the ones that are relevant.

Look for requests that correspond to the loading of images or any requests that seem related to the autoload functionality.
Examine request details: Click on the relevant request in the Network tab to view its details.

Look for the URL field, which will contain the URL of the autoload request.

Additionally, you can inspect the request headers and parameters to understand how the autoload functionality is implemented.
By following these steps, you should be able to identify the autoload URL used by the website to load more images at the end of the page.

Keep in mind that the exact process may vary slightly depending on the browser you are using, but the general concept remains the same.
<h2>sprite animations</h2>
<a href="https://spicyyoghurt.com/tutorials/html5-javascript-game-development/images-and-sprite-animations" class="whitebut ">SPRITE ANIMATIONS</a>
drawImage() method:
context.drawImage(img,x,y,width,height);
define the source rectangle of the image,
then define the destination rectangle
context.drawImage(img,sx,sy,swidth,sheight,x,y,width,height);
context.drawImage(img, 100, 0, 200, 50, 10, 30, 200, 50);
a fragment of the image is picked from (100, 0),
with a width of 200 and height of 50.
The fragment is drawn to (10, 30),
with the same width and height as the source.
sub image in sprites can be seen as a frame
// Define the size of a frame
let frameWidth = 50;
let frameHeight = 61;
// Rows and columns start from 0
let row = 1;
let column = 3;
context.drawImage(sprite, column*frameWidth, row*frameHeight, frameWidth, frameHeight, 10, 30, frameWidth, frameHeight);
Create a sprite animation
// Define the number of columns and rows in the sprite
let numColumns = 5;
let numRows = 2;
// Define the size of a frame
let frameWidth = sprite.width / numColumns;;
let frameHeight = sprite.height / numRows;;
// The sprite image frame starts from 0
let numColumns = 1;
let numRows = 1;
let currentFrame = 0;
setInterval(function()
{
// Pick a new frame
currentFrame++;
// Make the frames loop
let maxFrame = numColumns * numRows - 1;
if (currentFrame > maxFrame){ currentFrame = 0; }
// Update rows and columns
let column = currentFrame % numColumns;
let row = Math.floor(currentFrame / numColumns);
// Clear and draw
context.clearRect(0, 0, canvas.width, canvas.height);
context.drawImage(sprite, column * frameWidth, row * frameHeight, frameWidth, frameHeight, 10, 30, frameWidth, frameHeight);
//Wait for next step in the loop
}, 100);
// single row sprite
let currentFrame = 0;
let maxFrame = 10;
setInterval(function()
{
// Pick a new frame
currentFrame++;
// Make the frames loop
if (currentFrame > maxFrame){ currentFrame = 0; }
// Clear and draw
context.clearRect(0, 0, canvas.width, canvas.height);
context.drawImage(sprite, currentFrame * frameWidth, frameHeight, frameWidth, frameHeight, 10, 30, frameWidth, frameHeight);
//Wait for next step in the loop
}, 100);
<h2>hide cursor</h2>
document.body.style.cursor = "none"
<h2>videojs</h2>
<a href="https://videojs.com/" class="whitebut ">videojs</a>
&lt;script src="https://cdn1d-static-shared.phncdn.com/html5player/videoPlayer/es6player/7.3.3/basic-player.min.js">&lt;/script>
&lt;video
id="my-video"
class="video-js"
controls
preload="auto"
width="640"
height="264"
poster="MY_VIDEO_POSTER.jpg"
data-setup="{}"
>
&lt;source src="MY_VIDEO.mp4" type="video/mp4" />
&lt;source src="MY_VIDEO.webm" type="video/webm" />
&lt;p class="vjs-no-js">
To view this video please enable JavaScript, and consider upgrading to a
web browser that
&lt;a href="https://videojs.com/html5-video-support/" target="_blank"
>supports HTML5 video&lt;/a
>
&lt;/p>
&lt;/video>
<h2>swap images</h2>
$("img").mouseenter(function(){ $(this).attr('src','sample2.png'); });     
$("img").mouseleave(function(){ $(this).attr('src','sample1.png'); }); 
var src = elem.attr('data-original');
var src = elem.attr('src');
<h2>Charts with jQuery and xCharts</h2>
<div class="toc" id="ChartsWithJQuerytoc"><a href="#ChartsWithJQuerytopic-0" target="_self">The HTML</a><br><a href="#ChartsWithJQuerytopic-1" target="_self">The MySQL Table</a><br><a href="#ChartsWithJQuerytopic-2" target="_self">The PHP Code</a><br><a href="#ChartsWithJQuerytopic-3" target="_self">The JavaScript</a><br></div>
<a href="https://demo.tutorialzine.com/2013/01/charts-jquery-ajax/charts-jquery-ajax.zip" class="whitebut ">Download</a>
There is a new library that makes things easier - <a href="https://tenxer.github.com/xcharts/">xCharts</a>.
Today, we are going to use it along with the <a href="https://github.com/tylerwolff/bootstrap-daterangepicker">daterange picker for Twitter Bootstrap</a>, to build a pretty, AJAX-powered chart for your web application that fetches data from a MySQL table.
<h3 id="ChartsWithJQuerytopic-0">The HTML</h3>
The HTML structure of the demo is pretty simple - we have to add elements on the page for the initialization of the chart, and for the date picker.
As we are including bootstrap in the page anyway, we can make use of its form styling abilities and icons to make it look good.
<h3>index.php</h3>
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;meta charset="utf-8" />
&lt;title>Pretty Charts with jQuery and AJAX | Tutorialzine Demo&lt;/title>
&lt;link href="assets/css/xcharts.min.css" rel="stylesheet">
&lt;link href="assets/css/style.css" rel="stylesheet">
&lt;!-- Include bootstrap css -->
&lt;link href="assets/css/daterangepicker.css" rel="stylesheet">
&lt;link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/css/bootstrap.min.css" rel="stylesheet" />
&lt;/head>
&lt;body>
&lt;div id="content">
&lt;form class="form-horizontal">
&lt;fieldset>
&lt;div class="input-prepend">
&lt;span class="add-on">&lt;i class="icon-calendar">&lt;/i>&lt;/span>
&lt;input type="text" name="range" id="range" />
&lt;/div>
&lt;/fieldset>
&lt;/form>
&lt;div id="placeholder">
&lt;figure id="chart">&lt;/figure>
&lt;/div>
&lt;/div>
&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">&lt;/script>
&lt;!-- xcharts includes -->
&lt;script src="//cdnjs.cloudflare.com/ajax/libs/d3/2.10.0/d3.v2.js">&lt;/script>
&lt;script src="assets/js/xcharts.min.js">&lt;/script>
&lt;!-- The daterange picker bootstrap plugin -->
&lt;script src="assets/js/sugar.min.js">&lt;/script>
&lt;script src="assets/js/daterangepicker.js">&lt;/script>
&lt;!-- Our main script file -->
&lt;script src="assets/js/script.js">&lt;/script>
&lt;/body>
&lt;/html>
We are including a good deal of external resources here.
In the head section, we have the css files for <k>xcharts</k>, the <k>datepicker</k>, <k>bootstrap</k> (included from cloudflare's super fast cdn), and our <k>style.css</k> file.
Before the closing body tag, we have the <k>jQuery</k> library, <k>d3.js</k> (required by xcharts), <k>xcharts</k>, the elegant <a href="http://sugarjs.com">sugar.js</a> library (required by the date range plugin), the <k>date range plugin</k> and our <k>script.js</k>.
In the next steps you will see how all of these work together.
<h3 id="ChartsWithJQuerytopic-1">The MySQL Table</h3>
As I mentioned in the intro, the script we are writing will fetch its data from a MySQL table and display it on the chart.
You can find the SQL code that will create the table in <k>schema.sql</k> in the zip file, available for download from the buttons above.
This is what the table looks like:
<img src="https://tutorialzine.com/media/2013/01/database_schema.jpg" width="620" height="260" loading="lazy">
It has only three fields.
The date field is assigned a unique index, which means that there cannot be duplicate records for the same day.
The sales_ord field holds the number of sales for the day.
Your database will surely differ, but as long as you return the correct JSON response from your PHP script, there won't be any problems (more on that in the next section).
<k>Note</k>: Remember to enter your MySQL connection details in <k>setup.php</k>.
You will then have to create a new MySQL database, and import schema.sql from phpMyAdmin or your management system of choice.
<h3 id="ChartsWithJQuerytopic-2">The PHP Code</h3>
In our PHP script, we will select the records from the table that correspond to the passed start and end date, assemble an array, and output it as a JSON:
<h3>ajax.php</h3>
header('Content-Type: application/json');
// Set up the ORM library
require_once('setup.php');
if (isset($_GET['start']) AND isset($_GET['end'])) {
$start = $_GET['start'];
$end = $_GET['end'];
$data = array();
// Select the results with Idiorm
$results = ORM::for_table('chart_sales')
->where_gte('date', $start)
->where_lte('date', $end)
->order_by_desc('date')
->find_array();
// Build a new array with the data
foreach ($results as $key => $value) {
$data[$key]['label'] = $value['date'];
$data[$key]['value'] = $value['sales_order'];
}
echo json_encode($data);
}
Here I am using a favorite library of mine - <a href="https://github.com/j4mie/idiorm">Idiorm</a>.
I have used it before in tutorials in the site (and in many personal projects).
It is only one file (located in the lib/ folder) and makes working with databases a pure joy.
All I am doing is selecting all the results from the database, which have a date value between the start and end timestamps passed with the request.
The resulting JSON response looks similar to this:
[{"label": "2013-01-07", "value": "4"},
{"label": "2013-01-06","value": "65"},
{"label": "2013-01-05","value": "96"}]
The <k>label</k> properties contain the MySQL date values for the respective row, and the <k>values</k> - the number of sales for that day.
It is up to our JavaScript code to correctly handle this data and turn it into a format suitable for use with the xCharts plugin.
<a href="https://demo.tutorialzine.com/2013/01/charts-jquery-ajax/"><img src="https://tutorialzine.com/media/2013/01/ajax-charts-jquery.jpg" width="620" height="400" alt="ajax-charts-jquery.jpg" loading="lazy"></a>
<h3 id="ChartsWithJQuerytopic-3">The JavaScript</h3>
All of our JS code lies in <k>assets/js/script.js</k>.
The code is a bit long, and to make it easier to follow I will present it to you in chunks.
First we will declare a few variables and initialize the <a href="https://github.com/tylerwolff/bootstrap-daterangepicker">date range picker plugin</a>.
Notice that the date range I linked to is a fork of the original plugin.
I decided to go with this version, as the original depends on <a href="http://www.datejs.com/">date.js</a> - a very old date/time library that conflicts with xCharts.
The fork instead uses <a href="http://sugarjs.com/">sugar.js</a> which is a nice utility library with powerful date and time support.
<h3>assets/js/script.js</h3>
$(function() {
// Set the default dates, uses sugarjs' methods
var startDate   = Date.create().addDays(-6),    // 6 days ago
endDate     = Date.create();                // today
var range = $('#range');
// Show the dates in the range input
range.val(startDate.format('{MM}/{dd}/{yyyy}') + ' -
' + endDate.format('{MM}/{dd}/{yyyy}'));
// Load chart
ajaxLoadChart(startDate,endDate);
range.daterangepicker({
startDate: startDate,
endDate: endDate,
ranges: {'Today': ['today', 'today'],
'Yesterday': ['yesterday', 'yesterday'],
'Last 7 Days': [Date.create().addDays(-6), 'today'],
'Last 30 Days': [Date.create().addDays(-29), 'today']
// You can add more entries here
}
},function(start, end){
ajaxLoadChart(start, end);
});
As you can see, we are making good use of sugar.js' <a href="http://sugarjs.com/dates">date and time methods</a> to define the start and end point of the range.
I am initializing the script with the results from the last 7 days, and updating the range input field.
Now let's create the chart:
// The tooltip shown over the chart
var tt = $('&lt;div class="ex-tooltip">').appendTo('body'),
topOffset = -32;
var data = {"xScale" : "time", "yScale" : "linear",
"main" : [{className : ".stats",
"data" : []}]
};
var opts = {
paddingLeft : 50, paddingTop : 20,
paddingRight : 10, axisPaddingLeft : 25,
tickHintX: 9, // How many ticks to show horizontally
dataFormatX : function(x) {
// This turns converts the timestamps coming from
// ajax.php into a proper JavaScript Date object
return Date.create(x);
},
tickFormatX : function(x) {
// Provide formatting for the x-axis tick labels.
// This uses sugar's format method of the date object.
return x.format('{MM}/{dd}');
},
"mouseover": function (d, i) {
var pos = $(this).offset();
tt.text(d.x.format('{Month} {ord}') + ': ' + d.y).css({
top: topOffset + pos.top,
left: pos.left }).show(); },
"mouseout": function (x) { tt.hide(); }
};
// Create a new xChart instance, passing the type
// of chart a data set and the options object
var chart = new xChart('line-dotted', data, '#chart' , opts);
First I define a configuration object for xCharts, with properties and callback functions.
In the <k>dataFormatX</k> property, I am transforming the yyyy-mm-dd strings returned from the AJAX request, into proper JavaScript Date objects, so that the plugin can correctly display them and do its calculations.
I am also passing an event handler for the mouseover/mouseout plugin events, and use them to show a tooltip (the plugin doesn't come with one out of the box).
<a href="https://demo.tutorialzine.com/2013/01/charts-jquery-ajax/"><img src="https://tutorialzine.com/media/2013/01/date-range-picker.jpg" width="620" height="400" alt="date-range-picker.jpg" loading="lazy"></a>
Lastly, here is the JavaScript function for loading data with AJAX:
// Function for loading data via AJAX and showing it on the chart
function ajaxLoadChart(startDate,endDate) {
// If no data is passed (the chart was cleared)
if(!startDate || !endDate){
chart.setData({ "xScale" : "time", "yScale" : "linear",
"main" : [{ className : ".stats", data : [] }] });
return;
}
// Otherwise, issue an AJAX request
$.getJSON('ajax.php', {
start:  startDate.format('{yyyy}-{MM}-{dd}'),
end:    endDate.format('{yyyy}-{MM}-{dd}')
}, function(data) {
var set = [];
$.each(data, function() {
set.push({ x : this.label, y : parseInt(this.value, 10) });
});
chart.setData({ "xScale" : "time", "yScale" : "linear",
"main" : [{ className : ".stats", data : set }] });
});
}
});
xCharts exposes the <k>setData</k> method so you can easily replace the displayed data.
The className attribute is important, as this is what the plugin uses to identify your chart.
If you omit this property, all kinds of strange bugs will occur (trust me, I know).
<k>With this our pretty charts are complete!</k>
<h3>We're done!</h3>
You can use this example to enhance your admin areas and to visualize statistical data in a beautiful interface.
<h2>jQuery Selecting Elements</h2>
<div class="toc" id="jQuerySelectElemtoc"><a href="#jQuerySelectElemtopic-0" target="_self">Selecting Elements by ID</a><br><a href="#jQuerySelectElemtopic-1" target="_self">Selecting Elements by Class Name</a><br><a href="#jQuerySelectElemtopic-2" target="_self">Selecting Elements by Attribute</a><br><a href="#jQuerySelectElemtopic-3" target="_self">Selecting Elements by Compound CSS Selector</a><br><a href="#jQuerySelectElemtopic-4" target="_self">Selecting Elements with a Comma-separated List of Selectors</a><br><a href="#jQuerySelectElemtopic-5" target="_self">Pseudo-Selectors</a><br><a href="#jQuerySelectElemtopic-6" target="_self">Choosing Selectors</a><br></div>
The most basic concept of jQuery is to "select some elements and do something with them." jQuery supports most CSS3 selectors, as well as some non-standard selectors.
For a complete selector reference, visit the <a href="http://api.jquery.com/category/selectors/">Selectors documentation on api.jquery.com</a>.
<h3 id="jQuerySelectElemtopic-0">Selecting Elements by ID</h3>
<k>$( "#myId" ); // Note IDs must be unique per page.</k>
<h3 id="jQuerySelectElemtopic-1">Selecting Elements by Class Name</h3>
<k>$( ".myClass" );</k>
<h3 id="jQuerySelectElemtopic-2">Selecting Elements by Attribute</h3>
<k>$( "input[name='first_name']" );</k>
<h3 id="jQuerySelectElemtopic-3">Selecting Elements by Compound CSS Selector</h3>
<k>$( "#contents ul.people li" );</k>
<h3 id="jQuerySelectElemtopic-4">Selecting Elements with a Comma-separated List of Selectors</h3>
<k>$( "div.myClass, ul.people" );</k>
<h3 id="jQuerySelectElemtopic-5">Pseudo-Selectors</h3>
<k>$( "a.external:first" );
$( "tr:odd" );
// Select all input-like elements in a form (more on this below).
$( "#myForm :input" );
$( "div:visible" );
// All except the first three divs.
$( "div:gt(2)" );
// All currently animated divs.
$( "div:animated" );</k>
<b>Note:</b> When using the <k>:visible</k> and <k>:hidden</k> pseudo-selectors, jQuery tests the actual visibility of the element, not its CSS <k>visibility</k> or <k>display</k> properties.
jQuery looks to see if the element's physical height and width on the page are both greater than zero.
However, this test doesn't work with <k>&lt;tr></k> elements.
In the case of <k>&lt;tr></k> jQuery does check the CSS <k>display</k> property, and considers an element hidden if its <k>display</k> property is set to <k>none</k>.
Elements that have not been added to the DOM will always be considered hidden, even if the CSS that would affect them would render them visible.
See the <a href="/manipulating-elements">Manipulating Elements</a> section to learn how to create and add elements to the DOM.
<h3 id="jQuerySelectElemtopic-6">Choosing Selectors</h3>Choosing good selectors is one way to improve JavaScript's performance.
Too much specificity can be a bad thing.
A selector such as <k>#myTable thead tr th.special</k> is overkill if a selector such as <k>#myTable th.special</k> will get the job done.
<h3> Does My Selection Contain Any Elements?</h3>
Once you've made a selection, you'll often want to know whether you have anything to work with.
A common mistake is to use:
<k>// Doesn't work!
if ( $( "div.foo" ) ) {
...
}</k>
This won't work.
When a selection is made using <k>$()</k>, an object is always returned, and objects always evaluate to <k>true</k>.
Even if the selection doesn't contain any elements, the code inside the <k>if</k> statement will still run.
The best way to determine if there are any elements is to test the selection's <k>.length</k> property, which tells you how many elements were selected.
If the answer is 0, the <k>.length</k> property will evaluate to <k>false</k> when used as a boolean value:
<k>// Testing whether a selection contains elements.
if ( $( "div.foo" ).length ) {
...
}</k>
<h3> Saving Selections</h3>
jQuery doesn't cache elements for you.
If you've made a selection that you might need to make again, you should save the selection in a variable rather than making the selection repeatedly.
<k>var divs = $( "div" );</k>
Once the selection is stored in a variable, you can call jQuery methods on the variable just like you would have called them on the original selection.
A selection only fetches the elements that are on the page at the time the selection is made.
If elements are added to the page later, you'll have to repeat the selection or otherwise add them to the selection stored in the variable.
Stored selections don't magically update when the DOM changes.
<h3> Refining &amp; Filtering Selections</h3>
Sometimes the selection contains more than what you're after.
jQuery offers several methods for refining and filtering selections.
<k>// Refining selections.
$( "div.foo" ).has( "p" );         // div.foo elements that contain &lt;p> tags
$( "h1" ).not( ".bar" );           // h1 elements that don't have a class of bar
$( "ul li" ).filter( ".current" ); // unordered list items with class of current
$( "ul li" ).first();              // just the first unordered list item
$( "ul li" ).eq( 5 );              // the sixth</k>
<h3> Selecting Form Elements</h3>
jQuery offers several pseudo-selectors that help find elements in forms.
These are especially helpful because it can be difficult to distinguish between form elements based on their state or type using standard CSS selectors.
<h4> :checked</h4>
Not to be confused with <em>:checkbox</em>, <k>:checked</k> targets <em>checked</em> checkboxes, but keep in mind that this selector works also for <em>checked</em> radio buttons, and <k>&lt;select></k> elements (for <k>&lt;select></k> elements only, use the <k>:selected</k> selector):
<k>$( "form :checked" );</k>
The <k>:checked</k> pseudo-selector works when used with <b>checkboxes</b>, <b>radio buttons</b> and <b>selects</b>.
<h4> :disabled</h4>
Using the <k>:disabled</k> pseudo-selector targets any <k>&lt;input></k> elements with the <k>disabled</k> attribute:
<k>$( "form :disabled" );</k>
In order to get the best performance using <k>:disabled</k>, first select elements with a standard jQuery selector, then use <k>.filter( ":disabled" )</k>, or precede the pseudo-selector with a tag name or some other selector.
<h4> :enabled</h4>
Basically the inverse of the <em>:disabled</em> pseudo-selector, the <k>:enabled</k> pseudo-selector targets any elements that <em>do not</em> have a <k>disabled</k> attribute:
<k>$( "form :enabled" );</k>
In order to get the best performance using <k>:enabled</k>, first select elements with a standard jQuery selector, then use <k>.filter( ":enabled" )</k>, or precede the pseudo-selector with a tag name or some other selector.
<h4> :input</h4>
Using the <k>:input</k> selector selects all <k>&lt;input></k>, <k>&lt;textarea></k>, <k>&lt;select></k>, and <k>&lt;button></k> elements:
<k>$( "form :input" );</k>
<h4> :selected</h4>
Using the <k>:selected</k> pseudo-selector targets any selected items in <k>&lt;option></k> elements:
<k>$( "form :selected" );</k>
In order to get the best performance using <k>:selected</k>, first select elements with a standard jQuery selector, then use <k>.filter( ":selected" )</k>, or precede the pseudo-selector with a tag name or some other selector.
<h4> Selecting by type</h4>
jQuery provides pseudo selectors to select form-specific elements according to their type:
<k>:password
:reset
:radio
:text
:submit
:checkbox
:button
:image
:file</k>
For all of these there are side notes about performance, so be sure to check out <a href="http://api.jquery.com/category/selectors/form-selectors/">the API docs</a> for more in-depth information.
<h2>JavaScript Passing variable to another html page</h2>
window.open("MusicMe.html?variable=value", "_self");
In next page, check for queryParam by getting window.location.href and using regex to split the params after ? and get that data.
window.open("Charts.html?26069", "_blank");
url = window.location.href
url = "asdaf ?=ddf"
thecode = url.split("?=")
thecode[1]
<h2>JavaScript Math.random Normal distribution</h2>
function randn_bm() {
let u = 0, v = 0;
while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)
while(v === 0) v = Math.random();
let num = Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );
num = num / 10.0 + 0.5; // Translate to 0 -> 1
if (num > 1 || num < 0) return randn_bm() // resample between 0 and 1
return num
}
Normal Distribution With Min, Max, Skew
function randn_bm(min, max, skew) {
let u = 0, v = 0;
while(u === 0) u = Math.random() //Converting [0,1) to (0,1)
while(v === 0) v = Math.random()
let num = Math.sqrt( -2.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v )
num = num / 10.0 + 0.5 // Translate to 0 -> 1
if (num > 1 || num < 0) 
num = randn_bm(min, max, skew) // resample between 0 and 1 if out of range
else{
num = Math.pow(num, skew) // Skew
num *= max - min // Stretch to fill range
num += min // offset to min
}
return num
}
<img src="https://i.sstatic.net/7jmROm.png" loading="lazy">
randn_bm(-500, 1000, 1);
<img src="https://i.sstatic.net/nCexKm.png" loading="lazy">
randn_bm(10, 20, 0.25);
<img src="https://i.sstatic.net/QFQMgm.png" loading="lazy">
randn_bm(10, 20, 3);
<h2>create heatmap</h2>
&lt;script src='https://cdn.plot.ly/plotly-2.34.0.min.js'>&lt;/script>
&lt;div id='myDiv'>&lt;/div>
&lt;script>
var data = [
{ z: [[1, 20, 50, 30], [20, 1, 50, 60], [30, 50, 60, 1], [20, 50, 40, 1]], type: 'heatmap' }
];
Plotly.newPlot('myDiv', data);
&lt;/script>
<h2>Create an Array of Numbers</h2>
arrayLike = {0: 5, 1: 2, 2: 3, length: 3};
newArray = Array.from(arrayLike);
console.log(newArray); // [1,2,3]
newArray = Array.from("freeCodeCamp");
console.log(newArray); // ["f","r","e","e","C","o","d","e","C","a","m","p"]
arrayLike = {0: 1, 1: 2, 2: 3, length: 3};
let newArray = Array.from(arrayLike, x => x * 2);
console.log(newArray); // [2,4,6]
newArray = Array.from({ length: 7 }, (value, index) => index);
console.log(newArray); // [0,1,2,3,4,5,6]
arrayRange = (start, stop, step) =>
Array.from(
{ length: (stop - start) / step + 1 },
(value, index) => start + index * step
);
// Generate numbers between range 2 and 7
let range = arrayRange(2, 7, 1);
console.log(range); // [2,3,4,5,6,7]
// Generate even numbers between range 2 and 7
let evenRange = arrayRange(2, 7, 2);
console.log(evenRange); // [2,4,6]
// Generate odd numbers between range 1 and 5
let oddRange = arrayRange(1, 5, 2);
console.log(oddRange); // [1,3,5]
<h2>Heatmap by AnyChart JS library</h2>
<a href="Heatmap.html" class="whitebut ">Heatmap sample</a>
<a href="https://plotly.com/javascript/heatmaps/" class="whitebut ">plotly heatmaps</a>
&lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-core.min.js">&lt;/script>
&lt;script src="https://cdn.anychart.com/releases/8.11.0/js/anychart-heatmap.min.js">&lt;/script> 
&lt;div id="container">&lt;/div>
&lt;script>
anychart.onDocumentReady(function () {
// create a heatmap
let chart = anychart.heatMap(getData());
// name the heatmap
chart.title("Fatal Car Crashes 2021 by Time of Day and Day of Week");
// set the container for the heatmap
chart.container("container");
// draw the heatmap
chart.draw();
});
function getData() {
return [
{ x: "Monday", y: "Midnight–3:59 a.m.", heat: 705},
{ x: "Monday", y: "4:00–7:59 a.m.", heat: 713},
{ x: "Monday", y: "8:00–11:59 a.m.", heat: 657},
{ x: "Monday", y: "Noon–3:59 p.m.", heat: 957},
{ x: "Monday", y: "4:00–7:59 p.m.", heat: 1137},
{ x: "Monday", y: "8:00–11:59 p.m.", heat: 956},
{ x: "Tuesday", y: "Midnight–3:59 a.m.", heat: 482},
{ x: "Tuesday", y: "4:00–7:59 a.m.", heat: 641},
{ x: "Tuesday", y: "8:00–11:59 a.m.", heat: 631},
{ x: "Tuesday", y: "Noon–3:59 p.m.", heat: 905},
{ x: "Tuesday", y: "4:00–7:59 p.m.", heat: 1137},
{ x: "Tuesday", y: "8:00–11:59 p.m.", heat: 986},
{ x: "Wednesday", y: "Midnight–3:59 a.m.", heat: 465},
{ x: "Wednesday", y: "4:00–7:59 a.m.", heat: 616},
{ x: "Wednesday", y: "8:00–11:59 a.m.", heat: 627},
{ x: "Wednesday", y: "Noon–3:59 p.m.", heat: 914},
{ x: "Wednesday", y: "4:00–7:59 p.m.", heat: 1159},
{ x: "Wednesday", y: "8:00–11:59 p.m.", heat: 1066},
{ x: "Thursday", y: "Midnight–3:59 a.m.", heat: 584},
{ x: "Thursday", y: "4:00–7:59 a.m.", heat: 718},
{ x: "Thursday", y: "8:00–11:59 a.m.", heat: 660},
{ x: "Thursday", y: "Noon–3:59 p.m.", heat: 966},
{ x: "Thursday", y: "4:00–7:59 p.m.", heat: 1161},
{ x: "Thursday", y: "8:00–11:59 p.m.", heat: 1186},
{ x: "Friday", y: "Midnight–3:59 a.m.", heat: 715},
{ x: "Friday", y: "4:00–7:59 a.m.", heat: 747},
{ x: "Friday", y: "8:00–11:59 a.m.", heat: 738},
{ x: "Friday", y: "Noon–3:59 p.m.", heat: 1056},
{ x: "Friday", y: "4:00–7:59 p.m.", heat: 1426},
{ x: "Friday", y: "8:00–11:59 p.m.", heat: 1631},
{ x: "Saturday", y: "Midnight–3:59 a.m.", heat: 1383},
{ x: "Saturday", y: "4:00–7:59 a.m.", heat: 641},
{ x: "Saturday", y: "8:00–11:59 a.m.", heat: 635},
{ x: "Saturday", y: "Noon–3:59 p.m.", heat: 1034},
{ x: "Saturday", y: "4:00–7:59 p.m.", heat: 1400},
{ x: "Saturday", y: "8:00–11:59 p.m.", heat: 1593},
{ x: "Sunday", y: "Midnight–3:59 a.m.", heat: 1486},
{ x: "Sunday", y: "4:00–7:59 a.m.", heat: 695},
{ x: "Sunday", y: "8:00–11:59 a.m.", heat: 564},
{ x: "Sunday", y: "Noon–3:59 p.m.", heat: 932},
{ x: "Sunday", y: "4:00–7:59 p.m.", heat: 1292},
{ x: "Sunday", y: "8:00–11:59 p.m.", heat: 1211}
];
}
&lt;/script>
//Change the Color Palette
let colorScale = anychart.scales.ordinalColor();
colorScale.ranges([
{ less: 500, color: "#B0D8A4" },
{ from: 500, to: 900, color: "#FEE191" },
{ from: 900, to: 1300, color: "#FD8060" },
{ greater: 1300, color: "#CC333F" }
]);
chart.colorScale(colorScale);
//Modify the Hover Styling
chart
.hovered()
.fill(function () {
return anychart.color.darken(this.sourceColor, 0.25);
});
//Change the Labels
// enable html for the labels
chart.labels().useHtml(true);
// configure the labels
chart.labels().format(function () {
var heat = this.heat;
if (heat &lt; 500) return "Low";
if (heat &lt; 1000) return "Medium";
if (heat &lt; 1500) return "&lt;span style='font-weight:bold'>High&lt;/span>";
if (heat >= 1500) return "&lt;span style='font-weight:bold'>Extreme&lt;/span>";
});
//Format the Title and Tooltip
chart.tooltip().title().useHtml(true);
chart
.tooltip()
.useHtml(true)
.titleFormat(function () {
return "Accidents - " + this.heat;
})
.format(function () {
return (
'&lt;span style="color: #CECECE">Day: &lt;/span>' +
this.x +
"&lt;br/>" +
'&lt;span style="color: #CECECE">Time: &lt;/span>' +
this.y
);
});
//add a bit of padding under the main title to make it more spaced out and visually appealing:
chart
.title()
.enabled(true)
.text("Fatal Car Crashes in U.S.
in 2021 by Time of Day and Day of Week")
.padding([0, 0, 20, 0]);	
Modify the Axes
chart.xAxis().stroke(null);
chart.yAxis().stroke(null);
chart.yAxis().labels().padding([0, 10, 0, 0]);
chart.xAxis().labels().padding([0, 0, 10, 0]);
<h2>normalizeCode</h2>
function normalizeCode(theCode) {
if( theCode.substring(0, 2) == "us"){
theurl = 'https://web.ifzq.gtimg.cn/appstock/app/usfqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,1000,qfq';
imageCode = theCode
}else{
if(theCode == "110000"){
theCode = "HSI"; imageCode = "110000"
}
codewidth = theCode.length
if(theCode == "HSI"){
theurl = 'https://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&param=hk' + theCode + ',day,,,1000,qfq';
imageCode = "110000"
}else{
if(codewidth <= 5){
theCode = "00000"+theCode;
codewidth = theCode.length;
theCode = theCode.slice(codewidth-5, codewidth);
codewidth = theCode.length; //update to be used later
theStartCode = theCode
imageCode = theCode
theurl = 'https://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&param=hk' + theCode + ',day,,,1000,qfq';
}else{
codewidth = theCode.length
if((codewidth == 6) && !hsReservedCode.includes(theCode)){
if (theCode.charAt(0) == "6"){
imageCode = theCode+".sh"; // note this comes before following line
theCode = "sh"+theCode; 
}else{
imageCode = theCode+".sz";
theCode = "sz"+theCode
}
theStartCode = theCode
theurl = 'https://web.ifzq.gtimg.cn/appstock/app/fqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,1000,qfq';
}else if(codewidth == 9){
imageCode = theCode
theCode = theCode.substring(7, 9) + theCode.substring(0, 6);
theStartCode = theCode
theurl = 'https://web.ifzq.gtimg.cn/appstock/app/fqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,1000,qfq';
}else{
theurl = 'https://web.ifzq.gtimg.cn/appstock/app/fqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,1000,qfq';
theStartCode = theCode
imageCode = theCode
}
}
}
}
}
<h2>grab data from external JSON</h2>
look at xmlHttpRequests or an equivalent.
e.g.
var xmlhttp = new XMLHttpRequest();
&lt;div id="demo">&lt;/div>
&lt;script>
const xmlhttp = new XMLHttpRequest();
theCode = 388
theCode = "00000"+theCode;
codewidth = theCode.length;
theCode = theCode.slice(codewidth-5, codewidth);
codewidth = theCode.length; //update to be used later
theStartCode = theCode
imageCode = theCode
theurl = 'https://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&param=hk' + theCode + ',day,,,1000,qfq';
// Define a callback function
xmlhttp.onload = function() {
// this.responseText is a string
document.getElementById("demo").innerHTML = this.responseText;
// JSON.stringify; convert string to json
var jsonData = JSON.stringify(this.responseText);
// document.getElementById("json").innerHTML = jsonData;
// eval(this.responseText); another way to convert string to json
myObj = eval(this.responseText)
// document.getElementById("json").innerHTML = myObj;
console.log(Object.keys(myObj)) // show the keys
console.log(kline_dayqfq) // kline_dayqfq is name of object
console.log(Object.keys(kline_dayqfq.data)) // show the keys
console.log(kline_dayqfq.data["hk00388"])
}
// Send a request
xmlhttp.open("GET", theurl);
xmlhttp.send();
let trace1 = {
x: [],
y: [],
mode: "lines"
};
let trace2 = {
x: [],
y: [],
mode: "lines"
};
data.forEach(function(val) {
trace1.x.push(val["time"]);
trace1.y.push(val["pm25"]);
trace2.x.push(val["time"]);
trace2.y.push(val["pm10"]);
});
Plotly.newPlot('AQI', [trace1, trace2]);
&lt;/script>
<h2>Convert String to JSON Using json.stringify()</h2>
The basic syntax:
JSON.stringify(source_of_data)
let jsonData = JSON.stringify(source_of_data);
console.log(jsonData);
<h2>Convert String to JSON Using eval()</h2>
The eval() function in JavaScript is used to take an expression and return the string.
As a result, it can be used to convert the string into JSON.
The string or an expression can be the value of eval(), and even if you pass multiple statements as an expression, the result will still work.
The simple syntax for using eval() is as follows:
eval(string_value)
<h2>Using a loop to create objects</h2>
var title = [];
for (var i=0; i&lt;3; i++) {
title[i] = { name: "name" + i+1,
age: "age" + i+1,
hometown: "hometown" + i+1 };
}
console.log(title);
// output will be:
// [ { name: 'name1', age: 'age1', hometown: 'hometown1' },
//   { name: 'name2', age: 'age2', hometown: 'hometown2' },
//   { name: 'name3', age: 'age3', hometown: 'hometown3' }]
<h2>Plotly Figure Reference: <gr>layout</gr></h2>
<br>
<div id="Plotlylayouttoc" class="toc"><a href="#Plotlylayouttopic-0" target="_self">all layout childs</a><br><a href="#Plotlylayouttopic-1" target="_self"><pk>title</pk></a><br><a href="#Plotlylayouttopic-2" target="_self"><r> automargin</r></a><br><a href="#Plotlylayouttopic-3" target="_self"><r> font</r></a><br><a href="#Plotlylayouttopic-4" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-5" target="_self"><dg>  family</dg></a><br><a href="#Plotlylayouttopic-6" target="_self"><dg>  lineposition</dg></a><br><a href="#Plotlylayouttopic-7" target="_self"><dg>  shadow</dg></a><br><a href="#Plotlylayouttopic-8" target="_self"><dg>  size</dg></a><br><a href="#Plotlylayouttopic-9" target="_self"><dg>  style</dg></a><br><a href="#Plotlylayouttopic-10" target="_self"><dg>  textcase</dg></a><br><a href="#Plotlylayouttopic-11" target="_self"><dg>  variant</dg></a><br><a href="#Plotlylayouttopic-12" target="_self"><dg>  weight</dg></a><br><a href="#Plotlylayouttopic-13" target="_self"><r> pad</r></a><br><a href="#Plotlylayouttopic-14" target="_self"><dg>  b</dg></a><br><a href="#Plotlylayouttopic-15" target="_self"><dg>  l</dg></a><br><a href="#Plotlylayouttopic-16" target="_self"><dg>  r</dg></a><br><a href="#Plotlylayouttopic-17" target="_self"><dg>  t</dg></a><br><a href="#Plotlylayouttopic-18" target="_self"><r> subtitle</r></a><br><a href="#Plotlylayouttopic-19" target="_self"><dg>  font</dg></a><br><a href="#Plotlylayouttopic-20" target="_self"><dg>   color</dg></a><br><a href="#Plotlylayouttopic-21" target="_self"><dg>   family</dg></a><br><a href="#Plotlylayouttopic-22" target="_self"><dg>   lineposition</dg></a><br><a href="#Plotlylayouttopic-23" target="_self"><dg>   shadow</dg></a><br><a href="#Plotlylayouttopic-24" target="_self"><dg>   size</dg></a><br><a href="#Plotlylayouttopic-25" target="_self"><dg>   style</dg></a><br><a href="#Plotlylayouttopic-26" target="_self"><dg>   textcase</dg></a><br><a href="#Plotlylayouttopic-27" target="_self"><dg>   variant</dg></a><br><a href="#Plotlylayouttopic-28" target="_self"><dg>   weight</dg></a><br><a href="#Plotlylayouttopic-29" target="_self"><dg>  text</dg></a><br><a href="#Plotlylayouttopic-30" target="_self"><r> text</r></a><br><a href="#Plotlylayouttopic-31" target="_self"><r> x</r></a><br><a href="#Plotlylayouttopic-32" target="_self"><r> xanchor</r></a><br><a href="#Plotlylayouttopic-33" target="_self"><r> xref</r></a><br><a href="#Plotlylayouttopic-34" target="_self"><r> y</r></a><br><a href="#Plotlylayouttopic-35" target="_self"><r> yanchor</r></a><br><a href="#Plotlylayouttopic-36" target="_self"><r> yref</r></a><br><a href="#Plotlylayouttopic-37" target="_self"><pk>showlegend</pk></a><br><a href="#Plotlylayouttopic-38" target="_self"><pk>legend</pk></a><br><a href="#Plotlylayouttopic-39" target="_self"><r> bgcolor</r></a><br><a href="#Plotlylayouttopic-40" target="_self"><r> bordercolor</r></a><br><a href="#Plotlylayouttopic-41" target="_self"><r> borderwidth</r></a><br><a href="#Plotlylayouttopic-42" target="_self"><r> entrywidth</r></a><br><a href="#Plotlylayouttopic-43" target="_self"><r> entrywidthmode</r></a><br><a href="#Plotlylayouttopic-44" target="_self"><r> font</r></a><br><a href="#Plotlylayouttopic-45" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-46" target="_self"><dg>  family</dg></a><br><a href="#Plotlylayouttopic-47" target="_self"><dg>  lineposition</dg></a><br><a href="#Plotlylayouttopic-48" target="_self"><dg>  shadow</dg></a><br><a href="#Plotlylayouttopic-49" target="_self"><dg>  size</dg></a><br><a href="#Plotlylayouttopic-50" target="_self"><dg>  style</dg></a><br><a href="#Plotlylayouttopic-51" target="_self"><dg>  textcase</dg></a><br><a href="#Plotlylayouttopic-52" target="_self"><dg>  variant</dg></a><br><a href="#Plotlylayouttopic-53" target="_self"><dg>  weight</dg></a><br><a href="#Plotlylayouttopic-54" target="_self"><r> groupclick</r></a><br><a href="#Plotlylayouttopic-55" target="_self"><r> grouptitlefont</r></a><br><a href="#Plotlylayouttopic-56" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-57" target="_self"><dg>  family</dg></a><br><a href="#Plotlylayouttopic-58" target="_self"><dg>  lineposition</dg></a><br><a href="#Plotlylayouttopic-59" target="_self"><dg>  shadow</dg></a><br><a href="#Plotlylayouttopic-60" target="_self"><dg>  size</dg></a><br><a href="#Plotlylayouttopic-61" target="_self"><dg>  style</dg></a><br><a href="#Plotlylayouttopic-62" target="_self"><dg>  textcase</dg></a><br><a href="#Plotlylayouttopic-63" target="_self"><dg>  variant</dg></a><br><a href="#Plotlylayouttopic-64" target="_self"><dg>  weight</dg></a><br><a href="#Plotlylayouttopic-65" target="_self"><r> indentation</r></a><br><a href="#Plotlylayouttopic-66" target="_self"><r> itemclick</r></a><br><a href="#Plotlylayouttopic-67" target="_self"><r> itemdoubleclick</r></a><br><a href="#Plotlylayouttopic-68" target="_self"><r> itemsizing</r></a><br><a href="#Plotlylayouttopic-69" target="_self"><r> itemwidth</r></a><br><a href="#Plotlylayouttopic-70" target="_self"><r> orientation</r></a><br><a href="#Plotlylayouttopic-71" target="_self"><r> title</r></a><br><a href="#Plotlylayouttopic-72" target="_self"><dg>  font</dg></a><br><a href="#Plotlylayouttopic-73" target="_self"><dg>   color</dg></a><br><a href="#Plotlylayouttopic-74" target="_self"><dg>   family</dg></a><br><a href="#Plotlylayouttopic-75" target="_self"><dg>   lineposition</dg></a><br><a href="#Plotlylayouttopic-76" target="_self"><dg>   shadow</dg></a><br><a href="#Plotlylayouttopic-77" target="_self"><dg>   size</dg></a><br><a href="#Plotlylayouttopic-78" target="_self"><dg>   style</dg></a><br><a href="#Plotlylayouttopic-79" target="_self"><dg>   textcase</dg></a><br><a href="#Plotlylayouttopic-80" target="_self"><dg>   variant</dg></a><br><a href="#Plotlylayouttopic-81" target="_self"><dg>   weight</dg></a><br><a href="#Plotlylayouttopic-82" target="_self"><dg>  side</dg></a><br><a href="#Plotlylayouttopic-83" target="_self"><dg>  text</dg></a><br><a href="#Plotlylayouttopic-84" target="_self"><r> tracegroupgap</r></a><br><a href="#Plotlylayouttopic-85" target="_self"><r> traceorder</r></a><br><a href="#Plotlylayouttopic-86" target="_self"><r> uirevision</r></a><br><a href="#Plotlylayouttopic-87" target="_self"><r> valign</r></a><br><a href="#Plotlylayouttopic-88" target="_self"><r> visible</r></a><br><a href="#Plotlylayouttopic-89" target="_self"><r> x</r></a><br><a href="#Plotlylayouttopic-90" target="_self"><r> xanchor</r></a><br><a href="#Plotlylayouttopic-91" target="_self"><r> xref</r></a><br><a href="#Plotlylayouttopic-92" target="_self"><r> y</r></a><br><a href="#Plotlylayouttopic-93" target="_self"><r> yanchor</r></a><br><a href="#Plotlylayouttopic-94" target="_self"><r> yref</r></a><br><a href="#Plotlylayouttopic-95" target="_self"><pk>margin</pk></a><br><a href="#Plotlylayouttopic-96" target="_self"><r> autoexpand</r></a><br><a href="#Plotlylayouttopic-97" target="_self"><r> b</r></a><br><a href="#Plotlylayouttopic-98" target="_self"><r> l</r></a><br><a href="#Plotlylayouttopic-99" target="_self"><r> pad</r></a><br><a href="#Plotlylayouttopic-100" target="_self"><r> r</r></a><br><a href="#Plotlylayouttopic-101" target="_self"><r> t</r></a><br><a href="#Plotlylayouttopic-102" target="_self"><pk>autosize</pk></a><br><a href="#Plotlylayouttopic-103" target="_self"><pk>width</pk></a><br><a href="#Plotlylayouttopic-104" target="_self"><pk>height</pk></a><br><a href="#Plotlylayouttopic-105" target="_self"><pk>font</pk></a><br><a href="#Plotlylayouttopic-106" target="_self"><r> color</r></a><br><a href="#Plotlylayouttopic-107" target="_self"><r> family</r></a><br><a href="#Plotlylayouttopic-108" target="_self"><r> lineposition</r></a><br><a href="#Plotlylayouttopic-109" target="_self"><r> shadow</r></a><br><a href="#Plotlylayouttopic-110" target="_self"><r> size</r></a><br><a href="#Plotlylayouttopic-111" target="_self"><r> style</r></a><br><a href="#Plotlylayouttopic-112" target="_self"><r> textcase</r></a><br><a href="#Plotlylayouttopic-113" target="_self"><r> variant</r></a><br><a href="#Plotlylayouttopic-114" target="_self"><r> weight</r></a><br><a href="#Plotlylayouttopic-115" target="_self"><pk>uniformtext</pk></a><br><a href="#Plotlylayouttopic-116" target="_self"><r> minsize</r></a><br><a href="#Plotlylayouttopic-117" target="_self"><r> mode</r></a><br><a href="#Plotlylayouttopic-118" target="_self"><pk>separators</pk></a><br><a href="#Plotlylayouttopic-119" target="_self"><pk>paper_bgcolor</pk></a><br><a href="#Plotlylayouttopic-120" target="_self"><pk>plot_bgcolor</pk></a><br><a href="#Plotlylayouttopic-121" target="_self"><pk>autotypenumbers</pk></a><br><a href="#Plotlylayouttopic-122" target="_self"><pk>colorscale</pk></a><br><a href="#Plotlylayouttopic-123" target="_self"><r> diverging</r></a><br><a href="#Plotlylayouttopic-124" target="_self"><r> sequential</r></a><br><a href="#Plotlylayouttopic-125" target="_self"><r> sequentialminus</r></a><br><a href="#Plotlylayouttopic-126" target="_self"><pk>colorway</pk></a><br><a href="#Plotlylayouttopic-127" target="_self"><pk>modebar</pk></a><br><a href="#Plotlylayouttopic-128" target="_self"><r> activecolor</r></a><br><a href="#Plotlylayouttopic-129" target="_self"><r> add</r></a><br><a href="#Plotlylayouttopic-130" target="_self"><r> bgcolor</r></a><br><a href="#Plotlylayouttopic-131" target="_self"><r> color</r></a><br><a href="#Plotlylayouttopic-132" target="_self"><r> orientation</r></a><br><a href="#Plotlylayouttopic-133" target="_self"><r> remove</r></a><br><a href="#Plotlylayouttopic-134" target="_self"><r> uirevision</r></a><br><a href="#Plotlylayouttopic-135" target="_self"><pk>hovermode</pk></a><br><a href="#Plotlylayouttopic-136" target="_self"><pk>hoversubplots</pk></a><br><a href="#Plotlylayouttopic-137" target="_self"><pk>clickmode</pk></a><br><a href="#Plotlylayouttopic-138" target="_self"><pk>dragmode</pk></a><br><a href="#Plotlylayouttopic-139" target="_self"><pk>selectdirection</pk></a><br><a href="#Plotlylayouttopic-140" target="_self"><pk>activeselection</pk></a><br><a href="#Plotlylayouttopic-141" target="_self"><r> fillcolor</r></a><br><a href="#Plotlylayouttopic-142" target="_self"><r> opacity</r></a><br><a href="#Plotlylayouttopic-143" target="_self"><pk>newselection</pk></a><br><a href="#Plotlylayouttopic-144" target="_self"><r> line</r></a><br><a href="#Plotlylayouttopic-145" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-146" target="_self"><dg>  dash</dg></a><br><a href="#Plotlylayouttopic-147" target="_self"><dg>  width</dg></a><br><a href="#Plotlylayouttopic-148" target="_self"><r> mode</r></a><br><a href="#Plotlylayouttopic-149" target="_self"><pk>hoverdistance</pk></a><br><a href="#Plotlylayouttopic-150" target="_self"><pk>spikedistance</pk></a><br><a href="#Plotlylayouttopic-151" target="_self"><pk>hoverlabel</pk></a><br><a href="#Plotlylayouttopic-152" target="_self"><r> align</r></a><br><a href="#Plotlylayouttopic-153" target="_self"><r> bgcolor</r></a><br><a href="#Plotlylayouttopic-154" target="_self"><r> bordercolor</r></a><br><a href="#Plotlylayouttopic-155" target="_self"><r> font</r></a><br><a href="#Plotlylayouttopic-156" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-157" target="_self"><dg>  family</dg></a><br><a href="#Plotlylayouttopic-158" target="_self"><dg>  lineposition</dg></a><br><a href="#Plotlylayouttopic-159" target="_self"><dg>  shadow</dg></a><br><a href="#Plotlylayouttopic-160" target="_self"><dg>  size</dg></a><br><a href="#Plotlylayouttopic-161" target="_self"><dg>  style</dg></a><br><a href="#Plotlylayouttopic-162" target="_self"><dg>  textcase</dg></a><br><a href="#Plotlylayouttopic-163" target="_self"><dg>  variant</dg></a><br><a href="#Plotlylayouttopic-164" target="_self"><dg>  weight</dg></a><br><a href="#Plotlylayouttopic-165" target="_self"><r> grouptitlefont</r></a><br><a href="#Plotlylayouttopic-166" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-167" target="_self"><dg>  family</dg></a><br><a href="#Plotlylayouttopic-168" target="_self"><dg>  lineposition</dg></a><br><a href="#Plotlylayouttopic-169" target="_self"><dg>  shadow</dg></a><br><a href="#Plotlylayouttopic-170" target="_self"><dg>  size</dg></a><br><a href="#Plotlylayouttopic-171" target="_self"><dg>  style</dg></a><br><a href="#Plotlylayouttopic-172" target="_self"><dg>  textcase</dg></a><br><a href="#Plotlylayouttopic-173" target="_self"><dg>  variant</dg></a><br><a href="#Plotlylayouttopic-174" target="_self"><dg>  weight</dg></a><br><a href="#Plotlylayouttopic-175" target="_self"><r> namelength</r></a><br><a href="#Plotlylayouttopic-176" target="_self"><pk>transition</pk></a><br><a href="#Plotlylayouttopic-177" target="_self"><r> duration</r></a><br><a href="#Plotlylayouttopic-178" target="_self"><r> easing</r></a><br><a href="#Plotlylayouttopic-179" target="_self"><r> ordering</r></a><br><a href="#Plotlylayouttopic-180" target="_self"><pk>datarevision</pk></a><br><a href="#Plotlylayouttopic-181" target="_self"><pk>uirevision</pk></a><br><a href="#Plotlylayouttopic-182" target="_self"><pk>editrevision</pk></a><br><a href="#Plotlylayouttopic-183" target="_self"><pk>selectionrevision</pk></a><br><a href="#Plotlylayouttopic-184" target="_self"><pk>template</pk></a><br><a href="#Plotlylayouttopic-185" target="_self"><pk>meta</pk></a><br><a href="#Plotlylayouttopic-186" target="_self"><pk>computed</pk></a><br><a href="#Plotlylayouttopic-187" target="_self"><pk>grid</pk></a><br><a href="#Plotlylayouttopic-188" target="_self"><r> columns</r></a><br><a href="#Plotlylayouttopic-189" target="_self"><r> domain</r></a><br><a href="#Plotlylayouttopic-190" target="_self"><dg>  x</dg></a><br><a href="#Plotlylayouttopic-191" target="_self"><dg>  y</dg></a><br><a href="#Plotlylayouttopic-192" target="_self"><r> pattern</r></a><br><a href="#Plotlylayouttopic-193" target="_self"><r> roworder</r></a><br><a href="#Plotlylayouttopic-194" target="_self"><r> rows</r></a><br><a href="#Plotlylayouttopic-195" target="_self"><r> subplots</r></a><br><a href="#Plotlylayouttopic-196" target="_self"><r> xaxes</r></a><br><a href="#Plotlylayouttopic-197" target="_self"><r> xgap</r></a><br><a href="#Plotlylayouttopic-198" target="_self"><r> xside</r></a><br><a href="#Plotlylayouttopic-199" target="_self"><r> yaxes</r></a><br><a href="#Plotlylayouttopic-200" target="_self"><r> ygap</r></a><br><a href="#Plotlylayouttopic-201" target="_self"><r> yside</r></a><br><a href="#Plotlylayouttopic-202" target="_self"><pk>calendar</pk></a><br><a href="#Plotlylayouttopic-203" target="_self"><pk>minreducedheight</pk></a><br><a href="#Plotlylayouttopic-204" target="_self"><pk>minreducedwidth</pk></a><br><a href="#Plotlylayouttopic-205" target="_self"><pk>newshape</pk></a><br><a href="#Plotlylayouttopic-206" target="_self"><r> drawdirection</r></a><br><a href="#Plotlylayouttopic-207" target="_self"><r> fillcolor</r></a><br><a href="#Plotlylayouttopic-208" target="_self"><r> fillrule</r></a><br><a href="#Plotlylayouttopic-209" target="_self"><r> label</r></a><br><a href="#Plotlylayouttopic-210" target="_self"><dg>  font</dg></a><br><a href="#Plotlylayouttopic-211" target="_self"><dg>   color</dg></a><br><a href="#Plotlylayouttopic-212" target="_self"><dg>   family</dg></a><br><a href="#Plotlylayouttopic-213" target="_self"><dg>   lineposition</dg></a><br><a href="#Plotlylayouttopic-214" target="_self"><dg>   shadow</dg></a><br><a href="#Plotlylayouttopic-215" target="_self"><dg>   size</dg></a><br><a href="#Plotlylayouttopic-216" target="_self"><dg>   style</dg></a><br><a href="#Plotlylayouttopic-217" target="_self"><dg>   textcase</dg></a><br><a href="#Plotlylayouttopic-218" target="_self"><dg>   variant</dg></a><br><a href="#Plotlylayouttopic-219" target="_self"><dg>   weight</dg></a><br><a href="#Plotlylayouttopic-220" target="_self"><dg>  text</dg></a><br><a href="#Plotlylayouttopic-221" target="_self"><dg>  textangle</dg></a><br><a href="#Plotlylayouttopic-222" target="_self"><dg>  textposition</dg></a><br><a href="#Plotlylayouttopic-223" target="_self"><dg>  texttemplate</dg></a><br><a href="#Plotlylayouttopic-224" target="_self"><dg>  xanchor</dg></a><br><a href="#Plotlylayouttopic-225" target="_self"><dg>  yanchor</dg></a><br><a href="#Plotlylayouttopic-226" target="_self"><r> layer</r></a><br><a href="#Plotlylayouttopic-227" target="_self"><r> legend</r></a><br><a href="#Plotlylayouttopic-228" target="_self"><r> legendgroup</r></a><br><a href="#Plotlylayouttopic-229" target="_self"><r> legendgrouptitle</r></a><br><a href="#Plotlylayouttopic-230" target="_self"><dg>  font</dg></a><br><a href="#Plotlylayouttopic-231" target="_self"><dg>   color</dg></a><br><a href="#Plotlylayouttopic-232" target="_self"><dg>   family</dg></a><br><a href="#Plotlylayouttopic-233" target="_self"><dg>   lineposition</dg></a><br><a href="#Plotlylayouttopic-234" target="_self"><dg>   shadow</dg></a><br><a href="#Plotlylayouttopic-235" target="_self"><dg>   size</dg></a><br><a href="#Plotlylayouttopic-236" target="_self"><dg>   style</dg></a><br><a href="#Plotlylayouttopic-237" target="_self"><dg>   textcase</dg></a><br><a href="#Plotlylayouttopic-238" target="_self"><dg>   variant</dg></a><br><a href="#Plotlylayouttopic-239" target="_self"><dg>   weight</dg></a><br><a href="#Plotlylayouttopic-240" target="_self"><dg>  text</dg></a><br><a href="#Plotlylayouttopic-241" target="_self"><r> legendrank</r></a><br><a href="#Plotlylayouttopic-242" target="_self"><r> legendwidth</r></a><br><a href="#Plotlylayouttopic-243" target="_self"><r> line</r></a><br><a href="#Plotlylayouttopic-244" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-245" target="_self"><dg>  dash</dg></a><br><a href="#Plotlylayouttopic-246" target="_self"><dg>  width</dg></a><br><a href="#Plotlylayouttopic-247" target="_self"><r> name</r></a><br><a href="#Plotlylayouttopic-248" target="_self"><r> opacity</r></a><br><a href="#Plotlylayouttopic-249" target="_self"><r> showlegend</r></a><br><a href="#Plotlylayouttopic-250" target="_self"><r> visible</r></a><br><a href="#Plotlylayouttopic-251" target="_self"><pk>activeshape</pk></a><br><a href="#Plotlylayouttopic-252" target="_self"><r> fillcolor</r></a><br><a href="#Plotlylayouttopic-253" target="_self"><r> opacity</r></a><br><a href="#Plotlylayouttopic-254" target="_self"><pk>selections</pk></a><br><a href="#Plotlylayouttopic-255" target="_self"><r> line</r></a><br><a href="#Plotlylayouttopic-256" target="_self"><dg>  color</dg></a><br><a href="#Plotlylayouttopic-257" target="_self"><dg>  dash</dg></a><br><a href="#Plotlylayouttopic-258" target="_self"><dg>  width</dg></a><br><a href="#Plotlylayouttopic-259" target="_self"><r> name</r></a><br><a href="#Plotlylayouttopic-260" target="_self"><r> opacity</r></a><br><a href="#Plotlylayouttopic-261" target="_self"><r> path</r></a><br><a href="#Plotlylayouttopic-262" target="_self"><r> templateitemname</r></a><br><a href="#Plotlylayouttopic-263" target="_self"><r> type</r></a><br><a href="#Plotlylayouttopic-264" target="_self"><r> x0</r></a><br><a href="#Plotlylayouttopic-265" target="_self"><r> x1</r></a><br><a href="#Plotlylayouttopic-266" target="_self"><r> xref</r></a><br><a href="#Plotlylayouttopic-267" target="_self"><r> y0</r></a><br><a href="#Plotlylayouttopic-268" target="_self"><r> y1</r></a><br><a href="#Plotlylayouttopic-269" target="_self"><r> yref</r></a><br><a href="#Plotlylayouttopic-270" target="_self"><pk>hidesources</pk></a><br><a href="#Plotlylayouttopic-271" target="_self"><pk>scattergap</pk></a><br><a href="#Plotlylayouttopic-272" target="_self"><pk>scattermode</pk></a><br><a href="#Plotlylayouttopic-273" target="_self"><pk>barcornerradius</pk></a><br><a href="#Plotlylayouttopic-274" target="_self"><pk>extendpiecolors</pk></a><br><a href="#Plotlylayouttopic-275" target="_self"><pk>hiddenlabels</pk></a><br><a href="#Plotlylayouttopic-276" target="_self"><pk>piecolorway</pk></a><br><a href="#Plotlylayouttopic-277" target="_self"><pk>violingap</pk></a><br><a href="#Plotlylayouttopic-278" target="_self"><pk>violingroupgap</pk></a><br><a href="#Plotlylayouttopic-279" target="_self"><pk>violinmode</pk></a><br><a href="#Plotlylayouttopic-280" target="_self"><pk>bargroupgap</pk></a><br><a href="#Plotlylayouttopic-281" target="_self"><pk>barmode</pk></a><br><a href="#Plotlylayouttopic-282" target="_self"><pk>barnorm</pk></a><br><a href="#Plotlylayouttopic-283" target="_self"><pk>boxgap</pk></a><br><a href="#Plotlylayouttopic-284" target="_self"><pk>boxgroupgap</pk></a><br><a href="#Plotlylayouttopic-285" target="_self"><pk>boxmode</pk></a><br><a href="#Plotlylayouttopic-286" target="_self"><pk>waterfallgap</pk></a><br><a href="#Plotlylayouttopic-287" target="_self"><pk>waterfallgroupgap</pk></a><br><a href="#Plotlylayouttopic-288" target="_self"><pk>waterfallmode</pk></a><br><a href="#Plotlylayouttopic-289" target="_self"><pk>funnelgap</pk></a><br><a href="#Plotlylayouttopic-290" target="_self"><pk>funnelgroupgap</pk></a><br><a href="#Plotlylayouttopic-291" target="_self"><pk>funnelmode</pk></a><br><a href="#Plotlylayouttopic-292" target="_self"><pk>extendfunnelareacolors</pk></a><br><a href="#Plotlylayouttopic-293" target="_self"><pk>funnelareacolorway</pk></a><br><a href="#Plotlylayouttopic-294" target="_self"><pk>bargap</pk></a><br><a href="#Plotlylayouttopic-295" target="_self"><pk>extendsunburstcolors</pk></a><br><a href="#Plotlylayouttopic-296" target="_self"><pk>sunburstcolorway</pk></a><br><a href="#Plotlylayouttopic-297" target="_self"><pk>extendtreemapcolors</pk></a><br><a href="#Plotlylayouttopic-298" target="_self"><pk>treemapcolorway</pk></a><br><a href="#Plotlylayouttopic-299" target="_self"><pk>extendiciclecolors</pk></a><br><a href="#Plotlylayouttopic-300" target="_self"><pk>iciclecolorway</pk></a><br></div>
<pre><h3 id="Plotlylayouttopic-0">all layout childs</h3>
activeselection, activeshape, autosize, autotypenumbers, barcornerradius, bargap, bargroupgap, barmode, barnorm, boxgap, boxgroupgap, boxmode, calendar, clickmode, colorscale, colorway, computed, datarevision, dragmode, editrevision, extendfunnelareacolors, extendiciclecolors, extendpiecolors, extendsunburstcolors, extendtreemapcolors, font, funnelareacolorway, funnelgap, funnelgroupgap, funnelmode, grid, height, hiddenlabels, hidesources, hoverdistance, hoverlabel, hovermode, hoversubplots, iciclecolorway, legend, margin, meta, minreducedheight, minreducedwidth, modebar, newselection, newshape, paper_bgcolor, piecolorway, plot_bgcolor, scattergap, scattermode, selectdirection, selectionrevision, selections, separators, showlegend, spikedistance, sunburstcolorway, template, title, transition, treemapcolorway, uirevision, uniformtext, violingap, violingroupgap, violinmode, waterfallgap, waterfallgroupgap, waterfallmode, width
<h3 id="Plotlylayouttopic-1"><pk>title</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-2"><r> automargin</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> boolean
Determines whether the title can automatically push the figure margins.
If `yref='paper'` then the margin will expand to ensure that the title doesn’t overlap with the edges of the container.
If `yref='container'` then the margins will ensure that the title doesn’t overlap with the plot area, tick labels, and axis titles.
If `automargin=true` and the margins need to be expanded, then y will be set to a default 1 and yanchor will be set to an appropriate default to ensure that minimal margin space is needed.
Note that when `yref='paper'`, only 1 or 0 are allowed y values.
Invalid values will be reset to the default 1.
<h3 id="Plotlylayouttopic-3"><r> font</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the title font.
Note that the title's font used to be customized by the now deprecated `titlefont` attribute.
<h3 id="Plotlylayouttopic-4"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-5"><dg>  family</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-6"><dg>  lineposition</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-7"><dg>  shadow</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-8"><dg>  size</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-9"><dg>  style</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-10"><dg>  textcase</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-11"><dg>  variant</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-12"><dg>  weight</dg></h3>
<k>Parent:</k> <gr>layout.title.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-13"><r> pad</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the padding of the title.
Each padding value only applies when the corresponding `xanchor`/`yanchor` value is set accordingly.
E.g.
for left padding to take effect, `xanchor` must be set to "left".
The same rule applies if `xanchor`/`yanchor` is determined automatically.
Padding is muted if the respective anchor value is "middle"/"center".
<h3 id="Plotlylayouttopic-14"><dg>  b</dg></h3>
<k>Parent:</k> <gr>layout.title.pad</gr>
<k>Type:</k> number
<k>Default:</k> <gr>0</gr>
The amount of padding (in px) along the bottom of the component.
<h3 id="Plotlylayouttopic-15"><dg>  l</dg></h3>
<k>Parent:</k> <gr>layout.title.pad</gr>
<k>Type:</k> number
<k>Default:</k> <gr>0</gr>
The amount of padding (in px) on the left side of the component.
<h3 id="Plotlylayouttopic-16"><dg>  r</dg></h3>
<k>Parent:</k> <gr>layout.title.pad</gr>
<k>Type:</k> number
<k>Default:</k> <gr>0</gr>
The amount of padding (in px) on the right side of the component.
<h3 id="Plotlylayouttopic-17"><dg>  t</dg></h3>
<k>Parent:</k> <gr>layout.title.pad</gr>
<k>Type:</k> number
<k>Default:</k> <gr>0</gr>
The amount of padding (in px) along the top of the component.
<h3 id="Plotlylayouttopic-18"><r> subtitle</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-19"><dg>  font</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the subtitle font.
<h3 id="Plotlylayouttopic-20"><dg>   color</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-21"><dg>   family</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-22"><dg>   lineposition</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-23"><dg>   shadow</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-24"><dg>   size</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-25"><dg>   style</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-26"><dg>   textcase</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-27"><dg>   variant</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-28"><dg>   weight</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-29"><dg>  text</dg></h3>
<k>Parent:</k> <gr>layout.title.subtitle</gr>
<k>Type:</k> string
Sets the plot's subtitle.
<h3 id="Plotlylayouttopic-30"><r> text</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> string
Sets the plot's title.
Note that before the existence of `title.text`, the title's contents used to be defined as the `title` attribute itself.
This behavior has been deprecated.
<h3 id="Plotlylayouttopic-31"><r> x</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.5</gr>
Sets the x position with respect to `xref` in normalized coordinates from "0" (left) to "1" (right).
<h3 id="Plotlylayouttopic-32"><r> xanchor</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> enumerated , one of ( <gr>"auto"</gr> | <gr>"left"</gr> | <gr>"center"</gr> | <gr>"right"</gr> )
<k>Default:</k> <gr>"auto"</gr>
Sets the title's horizontal alignment with respect to its x position.
"left" means that the title starts at x, "right" means that the title ends at x and "center" means that the title's center is at x.
"auto" divides `xref` by three and calculates the `xanchor` value automatically based on the value of `x`.
<h3 id="Plotlylayouttopic-33"><r> xref</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> enumerated , one of ( <gr>"container"</gr> | <gr>"paper"</gr> )
<k>Default:</k> <gr>"container"</gr>
Sets the container `x` refers to.
"container" spans the entire `width` of the plot.
"paper" refers to the width of the plotting area only.
<h3 id="Plotlylayouttopic-34"><r> y</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>"auto"</gr>
Sets the y position with respect to `yref` in normalized coordinates from "0" (bottom) to "1" (top).
"auto" places the baseline of the title onto the vertical center of the top margin.
<h3 id="Plotlylayouttopic-35"><r> yanchor</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> enumerated , one of ( <gr>"auto"</gr> | <gr>"top"</gr> | <gr>"middle"</gr> | <gr>"bottom"</gr> )
<k>Default:</k> <gr>"auto"</gr>
Sets the title's vertical alignment with respect to its y position.
"top" means that the title's cap line is at y, "bottom" means that the title's baseline is at y and "middle" means that the title's midline is at y.
"auto" divides `yref` by three and calculates the `yanchor` value automatically based on the value of `y`.
<h3 id="Plotlylayouttopic-36"><r> yref</r></h3>
<k>Parent:</k> <gr>layout.title</gr>
<k>Type:</k> enumerated , one of ( <gr>"container"</gr> | <gr>"paper"</gr> )
<k>Default:</k> <gr>"container"</gr>
Sets the container `y` refers to.
"container" spans the entire `height` of the plot.
"paper" refers to the height of the plotting area only.
<h3 id="Plotlylayouttopic-37"><pk>showlegend</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
Determines whether or not a legend is drawn.
Default is `true` if there is a trace to show and any of these: a) Two or more traces would by default be shown in the legend.
b) One pie trace is shown in the legend.
c) One trace is explicitly given with `showlegend: true`.
<h3 id="Plotlylayouttopic-38"><pk>legend</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-39"><r> bgcolor</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> color
Sets the legend background color.
Defaults to `layout.paper_bgcolor`.
<h3 id="Plotlylayouttopic-40"><r> bordercolor</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> color
<k>Default:</k> <gr>"#444"</gr>
Sets the color of the border enclosing the legend.
<h3 id="Plotlylayouttopic-41"><r> borderwidth</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>0</gr>
Sets the width (in px) of the border enclosing the legend.
<h3 id="Plotlylayouttopic-42"><r> entrywidth</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number greater than or equal to 0
Sets the width (in px or fraction) of the legend.
Use 0 to size the entry based on the text width, when `entrywidthmode` is set to "pixels".
<h3 id="Plotlylayouttopic-43"><r> entrywidthmode</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"fraction"</gr> | <gr>"pixels"</gr> )
<k>Default:</k> <gr>"pixels"</gr>
Determines what entrywidth means.
<h3 id="Plotlylayouttopic-44"><r> font</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the font used to text the legend items.
<h3 id="Plotlylayouttopic-45"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-46"><dg>  family</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-47"><dg>  lineposition</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-48"><dg>  shadow</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-49"><dg>  size</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-50"><dg>  style</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-51"><dg>  textcase</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-52"><dg>  variant</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-53"><dg>  weight</dg></h3>
<k>Parent:</k> <gr>layout.legend.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-54"><r> groupclick</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"toggleitem"</gr> | <gr>"togglegroup"</gr> )
<k>Default:</k> <gr>"togglegroup"</gr>
Determines the behavior on legend group item click.
"toggleitem" toggles the visibility of the individual item clicked on the graph.
"togglegroup" toggles the visibility of all items in the same legendgroup as the item clicked on the graph.
<h3 id="Plotlylayouttopic-55"><r> grouptitlefont</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the font for group titles in legend.
Defaults to `legend.font` with its size increased about 10%.
<h3 id="Plotlylayouttopic-56"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-57"><dg>  family</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-58"><dg>  lineposition</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-59"><dg>  shadow</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-60"><dg>  size</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-61"><dg>  style</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-62"><dg>  textcase</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-63"><dg>  variant</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-64"><dg>  weight</dg></h3>
<k>Parent:</k> <gr>layout.legend.grouptitlefont</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-65"><r> indentation</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number greater than or equal to -15
<k>Default:</k> <gr>0</gr>
Sets the indentation (in px) of the legend entries.
<h3 id="Plotlylayouttopic-66"><r> itemclick</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"toggle"</gr> | <gr>"toggleothers"</gr> | <gr>false</gr> )
<k>Default:</k> <gr>"toggle"</gr>
Determines the behavior on legend item click.
"toggle" toggles the visibility of the item clicked on the graph.
"toggleothers" makes the clicked item the sole visible item on the graph.
"false" disables legend item click interactions.
<h3 id="Plotlylayouttopic-67"><r> itemdoubleclick</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"toggle"</gr> | <gr>"toggleothers"</gr> | <gr>false</gr> )
<k>Default:</k> <gr>"toggleothers"</gr>
Determines the behavior on legend item double-click.
"toggle" toggles the visibility of the item clicked on the graph.
"toggleothers" makes the clicked item the sole visible item on the graph.
"false" disables legend item double-click interactions.
<h3 id="Plotlylayouttopic-68"><r> itemsizing</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"trace"</gr> | <gr>"constant"</gr> )
<k>Default:</k> <gr>"trace"</gr>
Determines if the legend items symbols scale with their corresponding "trace" attributes or remain "constant" independent of the symbol size on the graph.
<h3 id="Plotlylayouttopic-69"><r> itemwidth</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number greater than or equal to 30
<k>Default:</k> <gr>30</gr>
Sets the width (in px) of the legend item symbols (the part other than the title.text).
<h3 id="Plotlylayouttopic-70"><r> orientation</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"v"</gr> | <gr>"h"</gr> )
<k>Default:</k> <gr>"v"</gr>
Sets the orientation of the legend.
<h3 id="Plotlylayouttopic-71"><r> title</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-72"><dg>  font</dg></h3>
<k>Parent:</k> <gr>layout.legend.title</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets this legend's title font.
Defaults to `legend.font` with its size increased about 20%.
<h3 id="Plotlylayouttopic-73"><dg>   color</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-74"><dg>   family</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-75"><dg>   lineposition</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-76"><dg>   shadow</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-77"><dg>   size</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-78"><dg>   style</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-79"><dg>   textcase</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-80"><dg>   variant</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-81"><dg>   weight</dg></h3>
<k>Parent:</k> <gr>layout.legend.title.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-82"><dg>  side</dg></h3>
<k>Parent:</k> <gr>layout.legend.title</gr>
<k>Type:</k> enumerated , one of ( <gr>"top"</gr> | <gr>"left"</gr> | <gr>"top left"</gr> | <gr>"top center"</gr> | <gr>"top right"</gr> )
Determines the location of legend's title with respect to the legend items.
Defaulted to "top" with `orientation` is "h".
Defaulted to "left" with `orientation` is "v".
The "top left" options could be used to expand top center and top right are for horizontal alignment legend area in both x and y sides.
<h3 id="Plotlylayouttopic-83"><dg>  text</dg></h3>
<k>Parent:</k> <gr>layout.legend.title</gr>
<k>Type:</k> string
<k>Default:</k> <gr>""</gr>
Sets the title of the legend.
<h3 id="Plotlylayouttopic-84"><r> tracegroupgap</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>10</gr>
Sets the amount of vertical space (in px) between legend groups.
<h3 id="Plotlylayouttopic-85"><r> traceorder</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"reversed"</gr>, <gr>"grouped"</gr> joined with a <gr>"+"</gr> OR <gr>"normal"</gr>.
<k>Examples:</k> <gr>"reversed"</gr>, <gr>"grouped"</gr>, <gr>"reversed+grouped"</gr>, <gr>"normal"</gr>
Determines the order at which the legend items are displayed.
If "normal", the items are displayed top-to-bottom in the same order as the input data.
If "reversed", the items are displayed in the opposite order as "normal".
If "grouped", the items are displayed in groups (when a trace `legendgroup` is provided).
if "grouped+reversed", the items are displayed in the opposite order as "grouped".
<h3 id="Plotlylayouttopic-86"><r> uirevision</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number or categorical coordinate string
Controls persistence of legend-driven changes in trace and pie label visibility.
Defaults to `layout.uirevision`.
<h3 id="Plotlylayouttopic-87"><r> valign</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"top"</gr> | <gr>"middle"</gr> | <gr>"bottom"</gr> )
<k>Default:</k> <gr>"middle"</gr>
Sets the vertical alignment of the symbols with respect to their associated text.
<h3 id="Plotlylayouttopic-88"><r> visible</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> boolean
<k>Default:</k> <gr>true</gr>
Determines whether or not this legend is visible.
<h3 id="Plotlylayouttopic-89"><r> x</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number
Sets the x position with respect to `xref` (in normalized coordinates) of the legend.
When `xref` is "paper", defaults to "1.02" for vertical legends and defaults to "0" for horizontal legends.
When `xref` is "container", defaults to "1" for vertical legends and defaults to "0" for horizontal legends.
Must be between "0" and "1" if `xref` is "container".
and between "-2" and "3" if `xref` is "paper".
<h3 id="Plotlylayouttopic-90"><r> xanchor</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"auto"</gr> | <gr>"left"</gr> | <gr>"center"</gr> | <gr>"right"</gr> )
<k>Default:</k> <gr>"left"</gr>
Sets the legend's horizontal position anchor.
This anchor binds the `x` position to the "left", "center" or "right" of the legend.
Value "auto" anchors legends to the right for `x` values greater than or equal to 2/3, anchors legends to the left for `x` values less than or equal to 1/3 and anchors legends with respect to their center otherwise.
<h3 id="Plotlylayouttopic-91"><r> xref</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"container"</gr> | <gr>"paper"</gr> )
<k>Default:</k> <gr>"paper"</gr>
Sets the container `x` refers to.
"container" spans the entire `width` of the plot.
"paper" refers to the width of the plotting area only.
<h3 id="Plotlylayouttopic-92"><r> y</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> number
Sets the y position with respect to `yref` (in normalized coordinates) of the legend.
When `yref` is "paper", defaults to "1" for vertical legends, defaults to "-0.1" for horizontal legends on graphs w/o range sliders and defaults to "1.1" for horizontal legends on graph with one or multiple range sliders.
When `yref` is "container", defaults to "1".
Must be between "0" and "1" if `yref` is "container" and between "-2" and "3" if `yref` is "paper".
<h3 id="Plotlylayouttopic-93"><r> yanchor</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"auto"</gr> | <gr>"top"</gr> | <gr>"middle"</gr> | <gr>"bottom"</gr> )
Sets the legend's vertical position anchor This anchor binds the `y` position to the "top", "middle" or "bottom" of the legend.
Value "auto" anchors legends at their bottom for `y` values less than or equal to 1/3, anchors legends to at their top for `y` values greater than or equal to 2/3 and anchors legends with respect to their middle otherwise.
<h3 id="Plotlylayouttopic-94"><r> yref</r></h3>
<k>Parent:</k> <gr>layout.legend</gr>
<k>Type:</k> enumerated , one of ( <gr>"container"</gr> | <gr>"paper"</gr> )
<k>Default:</k> <gr>"paper"</gr>
Sets the container `y` refers to.
"container" spans the entire `height` of the plot.
"paper" refers to the height of the plotting area only.
<h3 id="Plotlylayouttopic-95"><pk>margin</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-96"><r> autoexpand</r></h3>
<k>Parent:</k> <gr>layout.margin</gr>
<k>Type:</k> boolean
<k>Default:</k> <gr>true</gr>
Turns on/off margin expansion computations.
Legends, colorbars, updatemenus, sliders, axis rangeselector and rangeslider are allowed to push the margins by defaults.
<h3 id="Plotlylayouttopic-97"><r> b</r></h3>
<k>Parent:</k> <gr>layout.margin</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>80</gr>
Sets the bottom margin (in px).
<h3 id="Plotlylayouttopic-98"><r> l</r></h3>
<k>Parent:</k> <gr>layout.margin</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>80</gr>
Sets the left margin (in px).
<h3 id="Plotlylayouttopic-99"><r> pad</r></h3>
<k>Parent:</k> <gr>layout.margin</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>0</gr>
Sets the amount of padding (in px) between the plotting area and the axis lines
<h3 id="Plotlylayouttopic-100"><r> r</r></h3>
<k>Parent:</k> <gr>layout.margin</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>80</gr>
Sets the right margin (in px).
<h3 id="Plotlylayouttopic-101"><r> t</r></h3>
<k>Parent:</k> <gr>layout.margin</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>100</gr>
Sets the top margin (in px).
<h3 id="Plotlylayouttopic-102"><pk>autosize</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
Determines whether or not a layout width or height that has been left undefined by the user is initialized on each relayout.
Note that, regardless of this attribute, an undefined layout width or height is always initialized on the first call to plot.
<h3 id="Plotlylayouttopic-103"><pk>width</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number greater than or equal to 10
<k>Default:</k> <gr>700</gr>
Sets the plot's width (in px).
<h3 id="Plotlylayouttopic-104"><pk>height</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number greater than or equal to 10
<k>Default:</k> <gr>450</gr>
Sets the plot's height (in px).
<h3 id="Plotlylayouttopic-105"><pk>font</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the global font.
Note that fonts used in traces and other layout components inherit from the global font.
<h3 id="Plotlylayouttopic-106"><r> color</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> color
<k>Default:</k> <gr>"#444"</gr>
<h3 id="Plotlylayouttopic-107"><r> family</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>""Open Sans", verdana, arial, sans-serif"</gr>
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-108"><r> lineposition</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-109"><r> shadow</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-110"><r> size</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> number greater than or equal to 1
<k>Default:</k> <gr>12</gr>
<h3 id="Plotlylayouttopic-111"><r> style</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-112"><r> textcase</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-113"><r> variant</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-114"><r> weight</r></h3>
<k>Parent:</k> <gr>layout.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-115"><pk>uniformtext</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-116"><r> minsize</r></h3>
<k>Parent:</k> <gr>layout.uniformtext</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>0</gr>
Sets the minimum text size between traces of the same type.
<h3 id="Plotlylayouttopic-117"><r> mode</r></h3>
<k>Parent:</k> <gr>layout.uniformtext</gr>
<k>Type:</k> enumerated , one of ( <gr>false</gr> | <gr>"hide"</gr> | <gr>"show"</gr> )
Determines how the font size for various text elements are uniformed between each trace type.
If the computed text sizes were smaller than the minimum size defined by `uniformtext.minsize` using "hide" option hides the text; and using "show" option shows the text without further downscaling.
Please note that if the size defined by `minsize` is greater than the font size defined by trace, then the `minsize` is used.
<h3 id="Plotlylayouttopic-118"><pk>separators</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> string
Sets the decimal and thousand separators.
For example, ".
" puts a '.' before decimals and a space between thousands.
In English locales, dflt is ".," but other locales may alter this default.
<h3 id="Plotlylayouttopic-119"><pk>paper_bgcolor</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> color
<k>Default:</k> <gr>"#fff"</gr>
Sets the background color of the paper where the graph is drawn.
<h3 id="Plotlylayouttopic-120"><pk>plot_bgcolor</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> color
<k>Default:</k> <gr>"#fff"</gr>
Sets the background color of the plotting area in-between x and y axes.
<h3 id="Plotlylayouttopic-121"><pk>autotypenumbers</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"convert types"</gr> | <gr>"strict"</gr> )
<k>Default:</k> <gr>"convert types"</gr>
Using "strict" a numeric string in trace data is not converted to a number.
Using "convert types" a numeric string in trace data may be treated as a number during automatic axis `type` detection.
This is the default value; however it could be overridden for individual axes.
<h3 id="Plotlylayouttopic-122"><pk>colorscale</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-123"><r> diverging</r></h3>
<k>Parent:</k> <gr>layout.colorscale</gr>
<k>Type:</k> colorscale
<k>Default:</k> <gr>[[0, rgb(5,10,172)], [0.35, rgb(106,137,247)], [0.5, rgb(190,190,190)], [0.6, rgb(220,170,132)], [0.7, rgb(230,145,90)], [1, rgb(178,10,28)], ]</gr>
Sets the default diverging colorscale.
Note that `autocolorscale` must be true for this attribute to work.
<h3 id="Plotlylayouttopic-124"><r> sequential</r></h3>
<k>Parent:</k> <gr>layout.colorscale</gr>
<k>Type:</k> colorscale
<k>Default:</k> <gr>[[0, rgb(220,220,220)], [0.2, rgb(245,195,157)], [0.4, rgb(245,160,105)], [1, rgb(178,10,28)], ]</gr>
Sets the default sequential colorscale for positive values.
Note that `autocolorscale` must be true for this attribute to work.
<h3 id="Plotlylayouttopic-125"><r> sequentialminus</r></h3>
<k>Parent:</k> <gr>layout.colorscale</gr>
<k>Type:</k> colorscale
<k>Default:</k> <gr>[[0, rgb(5,10,172)], [0.35, rgb(40,60,190)], [0.5, rgb(70,100,245)], [0.6, rgb(90,120,245)], [0.7, rgb(106,137,247)], [1, rgb(220,220,220)], ]</gr>
Sets the default sequential colorscale for negative values.
Note that `autocolorscale` must be true for this attribute to work.
<h3 id="Plotlylayouttopic-126"><pk>colorway</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> colorlist
<k>Default:</k> <gr>[#1f77b4, #ff7f0e, #2ca02c, #d62728, #9467bd, #8c564b, #e377c2, #7f7f7f, #bcbd22, #17becf]</gr>
Sets the default trace colors.
<h3 id="Plotlylayouttopic-127"><pk>modebar</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-128"><r> activecolor</r></h3>
<k>Parent:</k> <gr>layout.modebar</gr>
<k>Type:</k> color
Sets the color of the active or hovered on icons in the modebar.
<h3 id="Plotlylayouttopic-129"><r> add</r></h3>
<k>Parent:</k> <gr>layout.modebar</gr>
<k>Type:</k> string or array of strings
<k>Default:</k> <gr>""</gr>
Determines which predefined modebar buttons to add.
Please note that these buttons will only be shown if they are compatible with all trace types used in a graph.
Similar to `config.modeBarButtonsToAdd` option.
This may include "v1hovermode", "hoverclosest", "hovercompare", "togglehover", "togglespikelines", "drawline", "drawopenpath", "drawclosedpath", "drawcircle", "drawrect", "eraseshape".
<h3 id="Plotlylayouttopic-130"><r> bgcolor</r></h3>
<k>Parent:</k> <gr>layout.modebar</gr>
<k>Type:</k> color
Sets the background color of the modebar.
<h3 id="Plotlylayouttopic-131"><r> color</r></h3>
<k>Parent:</k> <gr>layout.modebar</gr>
<k>Type:</k> color
Sets the color of the icons in the modebar.
<h3 id="Plotlylayouttopic-132"><r> orientation</r></h3>
<k>Parent:</k> <gr>layout.modebar</gr>
<k>Type:</k> enumerated , one of ( <gr>"v"</gr> | <gr>"h"</gr> )
<k>Default:</k> <gr>"h"</gr>
Sets the orientation of the modebar.
<h3 id="Plotlylayouttopic-133"><r> remove</r></h3>
<k>Parent:</k> <gr>layout.modebar</gr>
<k>Type:</k> string or array of strings
<k>Default:</k> <gr>""</gr>
Determines which predefined modebar buttons to remove.
Similar to `config.modeBarButtonsToRemove` option.
This may include "autoScale2d", "autoscale", "editInChartStudio", "editinchartstudio", "hoverCompareCartesian", "hovercompare", "lasso", "lasso2d", "orbitRotation", "orbitrotation", "pan", "pan2d", "pan3d", "reset", "resetCameraDefault3d", "resetCameraLastSave3d", "resetGeo", "resetSankeyGroup", "resetScale2d", "resetViewMapbox", "resetViews", "resetcameradefault", "resetcameralastsave", "resetsankeygroup", "resetscale", "resetview", "resetviews", "select", "select2d", "sendDataToCloud", "senddatatocloud", "tableRotation", "tablerotation", "toImage", "toggleHover", "toggleSpikelines", "togglehover", "togglespikelines", "toimage", "zoom", "zoom2d", "zoom3d", "zoomIn2d", "zoomInGeo", "zoomInMapbox", "zoomOut2d", "zoomOutGeo", "zoomOutMapbox", "zoomin", "zoomout".
<h3 id="Plotlylayouttopic-134"><r> uirevision</r></h3>
<k>Parent:</k> <gr>layout.modebar</gr>
<k>Type:</k> number or categorical coordinate string
Controls persistence of user-driven changes related to the modebar, including `hovermode`, `dragmode`, and `showspikes` at both the root level and inside subplots.
Defaults to `layout.uirevision`.
<h3 id="Plotlylayouttopic-135"><pk>hovermode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"x"</gr> | <gr>"y"</gr> | <gr>"closest"</gr> | <gr>false</gr> | <gr>"x unified"</gr> | <gr>"y unified"</gr> )
<k>Default:</k> <gr>"closest"</gr>
Determines the mode of hover interactions.
If "closest", a single hoverlabel will appear for the "closest" point within the `hoverdistance`.
If "x" (or "y"), multiple hoverlabels will appear for multiple points at the "closest" x- (or y-) coordinate within the `hoverdistance`, with the caveat that no more than one hoverlabel will appear per trace.
If "x unified" (or "y unified"), a single hoverlabel will appear multiple points at the closest x- (or y-) coordinate within the `hoverdistance` with the caveat that no more than one hoverlabel will appear per trace.
In this mode, spikelines are enabled by default perpendicular to the specified axis.
If false, hover interactions are disabled.
<h3 id="Plotlylayouttopic-136"><pk>hoversubplots</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"single"</gr> | <gr>"overlaying"</gr> | <gr>"axis"</gr> )
<k>Default:</k> <gr>"overlaying"</gr>
Determines expansion of hover effects to other subplots If "single" just the axis pair of the primary point is included without overlaying subplots.
If "overlaying" all subplots using the main axis and occupying the same space are included.
If "axis", also include stacked subplots using the same axis when `hovermode` is set to "x", "x unified", "y" or "y unified".
<h3 id="Plotlylayouttopic-137"><pk>clickmode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"event"</gr>, <gr>"select"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"event"</gr>, <gr>"select"</gr>, <gr>"event+select"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"event"</gr>
Determines the mode of single click interactions.
"event" is the default value and emits the `plotly_click` event.
In addition this mode emits the `plotly_selected` event in drag modes "lasso" and "select", but with no event data attached (kept for compatibility reasons).
The "select" flag enables selecting single data points via click.
This mode also supports persistent selections, meaning that pressing Shift while clicking, adds to / subtracts from an existing selection.
"select" with `hovermode`: "x" can be confusing, consider explicitly setting `hovermode`: "closest" when using this feature.
Selection events are sent accordingly as long as "event" flag is set as well.
When the "event" flag is missing, `plotly_click` and `plotly_selected` events are not fired.
<h3 id="Plotlylayouttopic-138"><pk>dragmode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"zoom"</gr> | <gr>"pan"</gr> | <gr>"select"</gr> | <gr>"lasso"</gr> | <gr>"drawclosedpath"</gr> | <gr>"drawopenpath"</gr> | <gr>"drawline"</gr> | <gr>"drawrect"</gr> | <gr>"drawcircle"</gr> | <gr>"orbit"</gr> | <gr>"turntable"</gr> | <gr>false</gr> )
<k>Default:</k> <gr>"zoom"</gr>
Determines the mode of drag interactions.
"select" and "lasso" apply only to scatter traces with markers or text.
"orbit" and "turntable" apply only to 3D scenes.
<h3 id="Plotlylayouttopic-139"><pk>selectdirection</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"h"</gr> | <gr>"v"</gr> | <gr>"d"</gr> | <gr>"any"</gr> )
<k>Default:</k> <gr>"any"</gr>
When `dragmode` is set to "select", this limits the selection of the drag to horizontal, vertical or diagonal.
"h" only allows horizontal selection, "v" only vertical, "d" only diagonal and "any" sets no limit.
<h3 id="Plotlylayouttopic-140"><pk>activeselection</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-141"><r> fillcolor</r></h3>
<k>Parent:</k> <gr>layout.activeselection</gr>
<k>Type:</k> color
<k>Default:</k> <gr>"rgba(0,0,0,0)"</gr>
Sets the color filling the active selection' interior.
<h3 id="Plotlylayouttopic-142"><r> opacity</r></h3>
<k>Parent:</k> <gr>layout.activeselection</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.5</gr>
Sets the opacity of the active selection.
<h3 id="Plotlylayouttopic-143"><pk>newselection</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-144"><r> line</r></h3>
<k>Parent:</k> <gr>layout.newselection</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-145"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.newselection.line</gr>
<k>Type:</k> color
Sets the line color.
By default uses either dark grey or white to increase contrast with background color.
<h3 id="Plotlylayouttopic-146"><dg>  dash</dg></h3>
<k>Parent:</k> <gr>layout.newselection.line</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"dot"</gr>
Sets the dash style of lines.
Set to a dash type string ("solid", "dot", "dash", "longdash", "dashdot", or "longdashdot") or a dash length list in px (eg "5px,10px,2px,2px").
<h3 id="Plotlylayouttopic-147"><dg>  width</dg></h3>
<k>Parent:</k> <gr>layout.newselection.line</gr>
<k>Type:</k> number greater than or equal to 1
<k>Default:</k> <gr>1</gr>
Sets the line width (in px).
<h3 id="Plotlylayouttopic-148"><r> mode</r></h3>
<k>Parent:</k> <gr>layout.newselection</gr>
<k>Type:</k> enumerated , one of ( <gr>"immediate"</gr> | <gr>"gradual"</gr> )
<k>Default:</k> <gr>"immediate"</gr>
Describes how a new selection is created.
If `immediate`, a new selection is created after first mouse up.
If `gradual`, a new selection is not created after first mouse.
By adding to and subtracting from the initial selection, this option allows declaring extra outlines of the selection.
<h3 id="Plotlylayouttopic-149"><pk>hoverdistance</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> integer greater than or equal to -1
<k>Default:</k> <gr>20</gr>
Sets the default distance (in pixels) to look for data to add hover labels (-1 means no cutoff, 0 means no looking for data).
This is only a real distance for hovering on point-like objects, like scatter points.
For area-like objects (bars, scatter fills, etc) hovering is on inside the area and off outside, but these objects will not supersede hover on point-like objects in case of conflict.
<h3 id="Plotlylayouttopic-150"><pk>spikedistance</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> integer greater than or equal to -1
<k>Default:</k> <gr>-1</gr>
Sets the default distance (in pixels) to look for data to draw spikelines to (-1 means no cutoff, 0 means no looking for data).
As with hoverdistance, distance does not apply to area-like objects.
In addition, some objects can be hovered on but will not generate spikelines, such as scatter fills.
<h3 id="Plotlylayouttopic-151"><pk>hoverlabel</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-152"><r> align</r></h3>
<k>Parent:</k> <gr>layout.hoverlabel</gr>
<k>Type:</k> enumerated , one of ( <gr>"left"</gr> | <gr>"right"</gr> | <gr>"auto"</gr> )
<k>Default:</k> <gr>"auto"</gr>
Sets the horizontal alignment of the text content within hover label box.
Has an effect only if the hover label text spans more two or more lines
<h3 id="Plotlylayouttopic-153"><r> bgcolor</r></h3>
<k>Parent:</k> <gr>layout.hoverlabel</gr>
<k>Type:</k> color
Sets the background color of all hover labels on graph
<h3 id="Plotlylayouttopic-154"><r> bordercolor</r></h3>
<k>Parent:</k> <gr>layout.hoverlabel</gr>
<k>Type:</k> color
Sets the border color of all hover labels on graph.
<h3 id="Plotlylayouttopic-155"><r> font</r></h3>
<k>Parent:</k> <gr>layout.hoverlabel</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the default hover label font used by all traces on the graph.
<h3 id="Plotlylayouttopic-156"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-157"><dg>  family</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"Arial, sans-serif"</gr>
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-158"><dg>  lineposition</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-159"><dg>  shadow</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-160"><dg>  size</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> number greater than or equal to 1
<k>Default:</k> <gr>13</gr>
<h3 id="Plotlylayouttopic-161"><dg>  style</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-162"><dg>  textcase</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-163"><dg>  variant</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-164"><dg>  weight</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-165"><r> grouptitlefont</r></h3>
<k>Parent:</k> <gr>layout.hoverlabel</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the font for group titles in hover (unified modes).
Defaults to `hoverlabel.font`.
<h3 id="Plotlylayouttopic-166"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-167"><dg>  family</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-168"><dg>  lineposition</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-169"><dg>  shadow</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-170"><dg>  size</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-171"><dg>  style</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-172"><dg>  textcase</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-173"><dg>  variant</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-174"><dg>  weight</dg></h3>
<k>Parent:</k> <gr>layout.hoverlabel.grouptitlefont</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-175"><r> namelength</r></h3>
<k>Parent:</k> <gr>layout.hoverlabel</gr>
<k>Type:</k> integer greater than or equal to -1
<k>Default:</k> <gr>15</gr>
Sets the default length (in number of characters) of the trace name in the hover labels for all traces.
-1 shows the whole name regardless of length.
0-3 shows the first 0-3 characters, and an integer >3 will show the whole name if it is less than that many characters, but if it is longer, will truncate to `namelength - 3` characters and add an ellipsis.
<h3 id="Plotlylayouttopic-176"><pk>transition</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets transition options used during Plotly.react updates.
<h3 id="Plotlylayouttopic-177"><r> duration</r></h3>
<k>Parent:</k> <gr>layout.transition</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>500</gr>
The duration of the transition, in milliseconds.
If equal to zero, updates are synchronous.
<h3 id="Plotlylayouttopic-178"><r> easing</r></h3>
<k>Parent:</k> <gr>layout.transition</gr>
<k>Type:</k> enumerated , one of ( <gr>"linear"</gr> | <gr>"quad"</gr> | <gr>"cubic"</gr> | <gr>"sin"</gr> | <gr>"exp"</gr> | <gr>"circle"</gr> | <gr>"elastic"</gr> | <gr>"back"</gr> | <gr>"bounce"</gr> | <gr>"linear-in"</gr> | <gr>"quad-in"</gr> | <gr>"cubic-in"</gr> | <gr>"sin-in"</gr> | <gr>"exp-in"</gr> | <gr>"circle-in"</gr> | <gr>"elastic-in"</gr> | <gr>"back-in"</gr> | <gr>"bounce-in"</gr> | <gr>"linear-out"</gr> | <gr>"quad-out"</gr> | <gr>"cubic-out"</gr> | <gr>"sin-out"</gr> | <gr>"exp-out"</gr> | <gr>"circle-out"</gr> | <gr>"elastic-out"</gr> | <gr>"back-out"</gr> | <gr>"bounce-out"</gr> | <gr>"linear-in-out"</gr> | <gr>"quad-in-out"</gr> | <gr>"cubic-in-out"</gr> | <gr>"sin-in-out"</gr> | <gr>"exp-in-out"</gr> | <gr>"circle-in-out"</gr> | <gr>"elastic-in-out"</gr> | <gr>"back-in-out"</gr> | <gr>"bounce-in-out"</gr> )
<k>Default:</k> <gr>"cubic-in-out"</gr>
The easing function used for the transition
<h3 id="Plotlylayouttopic-179"><r> ordering</r></h3>
<k>Parent:</k> <gr>layout.transition</gr>
<k>Type:</k> enumerated , one of ( <gr>"layout first"</gr> | <gr>"traces first"</gr> )
<k>Default:</k> <gr>"layout first"</gr>
Determines whether the figure's layout or traces smoothly transitions during updates that make both traces and layout change.
<h3 id="Plotlylayouttopic-180"><pk>datarevision</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
If provided, a changed value tells `Plotly.react` that one or more data arrays has changed.
This way you can modify arrays in-place rather than making a complete new copy for an incremental change.
If NOT provided, `Plotly.react` assumes that data arrays are being treated as immutable, thus any data array with a different identity from its predecessor contains new data.
<h3 id="Plotlylayouttopic-181"><pk>uirevision</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
Used to allow user interactions with the plot to persist after `Plotly.react` calls that are unaware of these interactions.
If `uirevision` is omitted, or if it is given and it changed from the previous `Plotly.react` call, the exact new figure is used.
If `uirevision` is truthy and did NOT change, any attribute that has been affected by user interactions and did not receive a different value in the new figure will keep the interaction value.
`layout.uirevision` attribute serves as the default for `uirevision` attributes in various sub-containers.
For finer control you can set these sub-attributes directly.
For example, if your app separately controls the data on the x and y axes you might set `xaxis.uirevision="time"` and `yaxis.uirevision="cost"`.
Then if only the y data is changed, you can update `yaxis.uirevision="quantity"` and the y axis range will reset but the x axis range will retain any user-driven zoom.
<h3 id="Plotlylayouttopic-182"><pk>editrevision</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
Controls persistence of user-driven changes in `editable: true` configuration, other than trace names and axis titles.
Defaults to `layout.uirevision`.
<h3 id="Plotlylayouttopic-183"><pk>selectionrevision</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
Controls persistence of user-driven changes in selected points from all traces.
<h3 id="Plotlylayouttopic-184"><pk>template</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
Default attributes to be applied to the plot.
Templates can be created from existing plots using `Plotly.makeTemplate`, or created manually.
They should be objects with format: `{layout: layoutTemplate, data: {[type]: [traceTemplate, ...]}, ...}` `layoutTemplate` and `traceTemplate` are objects matching the attribute structure of `layout` and a data trace.
Trace templates are applied cyclically to traces of each type.
Container arrays (eg `annotations`) have special handling: An object ending in `defaults` (eg `annotationdefaults`) is applied to each array item.
But if an item has a `templateitemname` key we look in the template array for an item with matching `name` and apply that instead.
If no matching `name` is found we mark the item invisible.
Any named template item not referenced is appended to the end of the array, so you can use this for a watermark annotation or a logo image, for example.
To omit one of these items on the plot, make an item with matching `templateitemname` and `visible: false`.
<h3 id="Plotlylayouttopic-185"><pk>meta</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
Assigns extra meta information that can be used in various `text` attributes.
Attributes such as the graph, axis and colorbar `title.text`, annotation `text` `trace.name` in legend items, `rangeselector`, `updatemenus` and `sliders` `label` text all support `meta`.
One can access `meta` fields using template strings: `%{meta[i]}` where `i` is the index of the `meta` item in question.
`meta` can also be an object for example `{key: value}` which can be accessed %{meta[key]}.
<h3 id="Plotlylayouttopic-186"><pk>computed</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
Placeholder for exporting automargin-impacting values namely `margin.t`, `margin.b`, `margin.l` and `margin.r` in "full-json" mode.
<h3 id="Plotlylayouttopic-187"><pk>grid</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-188"><r> columns</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> integer greater than or equal to 1
The number of columns in the grid.
If you provide a 2D `subplots` array, the length of its longest row is used as the default.
If you give an `xaxes` array, its length is used as the default.
But it's also possible to have a different length, if you want to leave a row at the end for non-cartesian subplots.
<h3 id="Plotlylayouttopic-189"><r> domain</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-190"><dg>  x</dg></h3>
<k>Parent:</k> <gr>layout.grid.domain</gr>
<k>Type:</k> array
<k>Default:</k> <gr>[0, 1]</gr>
Sets the horizontal domain of this grid subplot (in plot fraction).
The first and last cells end exactly at the domain edges, with no grout around the edges.
<h3 id="Plotlylayouttopic-191"><dg>  y</dg></h3>
<k>Parent:</k> <gr>layout.grid.domain</gr>
<k>Type:</k> array
<k>Default:</k> <gr>[0, 1]</gr>
Sets the vertical domain of this grid subplot (in plot fraction).
The first and last cells end exactly at the domain edges, with no grout around the edges.
<h3 id="Plotlylayouttopic-192"><r> pattern</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> enumerated , one of ( <gr>"independent"</gr> | <gr>"coupled"</gr> )
<k>Default:</k> <gr>"coupled"</gr>
If no `subplots`, `xaxes`, or `yaxes` are given but we do have `rows` and `columns`, we can generate defaults using consecutive axis IDs, in two ways: "coupled" gives one x axis per column and one y axis per row.
"independent" uses a new xy pair for each cell, left-to-right across each row then iterating rows according to `roworder`.
<h3 id="Plotlylayouttopic-193"><r> roworder</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> enumerated , one of ( <gr>"top to bottom"</gr> | <gr>"bottom to top"</gr> )
<k>Default:</k> <gr>"top to bottom"</gr>
Is the first row the top or the bottom? Note that columns are always enumerated from left to right.
<h3 id="Plotlylayouttopic-194"><r> rows</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> integer greater than or equal to 1
The number of rows in the grid.
If you provide a 2D `subplots` array or a `yaxes` array, its length is used as the default.
But it's also possible to have a different length, if you want to leave a row at the end for non-cartesian subplots.
<h3 id="Plotlylayouttopic-195"><r> subplots</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> array
Used for freeform grids, where some axes may be shared across subplots but others are not.
Each entry should be a cartesian subplot id, like "xy" or "x3y2", or "" to leave that cell empty.
You may reuse x axes within the same column, and y axes within the same row.
Non-cartesian subplots and traces that support `domain` can place themselves in this grid separately using the `gridcell` attribute.
<h3 id="Plotlylayouttopic-196"><r> xaxes</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> array
Used with `yaxes` when the x and y axes are shared across columns and rows.
Each entry should be an x axis id like "x", "x2", etc., or "" to not put an x axis in that column.
Entries other than "" must be unique.
Ignored if `subplots` is present.
If missing but `yaxes` is present, will generate consecutive IDs.
<h3 id="Plotlylayouttopic-197"><r> xgap</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> number between or equal to 0 and 1
Horizontal space between grid cells, expressed as a fraction of the total width available to one cell.
Defaults to 0.1 for coupled-axes grids and 0.2 for independent grids.
<h3 id="Plotlylayouttopic-198"><r> xside</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> enumerated , one of ( <gr>"bottom"</gr> | <gr>"bottom plot"</gr> | <gr>"top plot"</gr> | <gr>"top"</gr> )
<k>Default:</k> <gr>"bottom plot"</gr>
Sets where the x axis labels and titles go.
"bottom" means the very bottom of the grid.
"bottom plot" is the lowest plot that each x axis is used in.
"top" and "top plot" are similar.
<h3 id="Plotlylayouttopic-199"><r> yaxes</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> array
Used with `yaxes` when the x and y axes are shared across columns and rows.
Each entry should be an y axis id like "y", "y2", etc., or "" to not put a y axis in that row.
Entries other than "" must be unique.
Ignored if `subplots` is present.
If missing but `xaxes` is present, will generate consecutive IDs.
<h3 id="Plotlylayouttopic-200"><r> ygap</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> number between or equal to 0 and 1
Vertical space between grid cells, expressed as a fraction of the total height available to one cell.
Defaults to 0.1 for coupled-axes grids and 0.3 for independent grids.
<h3 id="Plotlylayouttopic-201"><r> yside</r></h3>
<k>Parent:</k> <gr>layout.grid</gr>
<k>Type:</k> enumerated , one of ( <gr>"left"</gr> | <gr>"left plot"</gr> | <gr>"right plot"</gr> | <gr>"right"</gr> )
<k>Default:</k> <gr>"left plot"</gr>
Sets where the y axis labels and titles go.
"left" means the very left edge of the grid.
"left plot" is the leftmost plot that each y axis is used in.
"right" and "right plot" are similar.
<h3 id="Plotlylayouttopic-202"><pk>calendar</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"chinese"</gr> | <gr>"coptic"</gr> | <gr>"discworld"</gr> | <gr>"ethiopian"</gr> | <gr>"gregorian"</gr> | <gr>"hebrew"</gr> | <gr>"islamic"</gr> | <gr>"jalali"</gr> | <gr>"julian"</gr> | <gr>"mayan"</gr> | <gr>"nanakshahi"</gr> | <gr>"nepali"</gr> | <gr>"persian"</gr> | <gr>"taiwan"</gr> | <gr>"thai"</gr> | <gr>"ummalqura"</gr> )
<k>Default:</k> <gr>"gregorian"</gr>
Sets the default calendar system to use for interpreting and displaying dates throughout the plot.
<h3 id="Plotlylayouttopic-203"><pk>minreducedheight</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number greater than or equal to 2
<k>Default:</k> <gr>64</gr>
Minimum height of the plot with margin.automargin applied (in px)
<h3 id="Plotlylayouttopic-204"><pk>minreducedwidth</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number greater than or equal to 2
<k>Default:</k> <gr>64</gr>
Minimum width of the plot with margin.automargin applied (in px)
<h3 id="Plotlylayouttopic-205"><pk>newshape</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-206"><r> drawdirection</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> enumerated , one of ( <gr>"ortho"</gr> | <gr>"horizontal"</gr> | <gr>"vertical"</gr> | <gr>"diagonal"</gr> )
<k>Default:</k> <gr>"diagonal"</gr>
When `dragmode` is set to "drawrect", "drawline" or "drawcircle" this limits the drag to be horizontal, vertical or diagonal.
Using "diagonal" there is no limit e.g.
in drawing lines in any direction.
"ortho" limits the draw to be either horizontal or vertical.
"horizontal" allows horizontal extend.
"vertical" allows vertical extend.
<h3 id="Plotlylayouttopic-207"><r> fillcolor</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> color
<k>Default:</k> <gr>"rgba(0,0,0,0)"</gr>
Sets the color filling new shapes' interior.
Please note that if using a fillcolor with alpha greater than half, drag inside the active shape starts moving the shape underneath, otherwise a new shape could be started over.
<h3 id="Plotlylayouttopic-208"><r> fillrule</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> enumerated , one of ( <gr>"evenodd"</gr> | <gr>"nonzero"</gr> )
<k>Default:</k> <gr>"evenodd"</gr>
Determines the path's interior.
For more info please visit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-rule
<h3 id="Plotlylayouttopic-209"><r> label</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-210"><dg>  font</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets the new shape label text font.
<h3 id="Plotlylayouttopic-211"><dg>   color</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-212"><dg>   family</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-213"><dg>   lineposition</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-214"><dg>   shadow</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-215"><dg>   size</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-216"><dg>   style</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-217"><dg>   textcase</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-218"><dg>   variant</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-219"><dg>   weight</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
padding
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>3</gr>
Sets padding (in px) between edge of label and edge of new shape.
<h3 id="Plotlylayouttopic-220"><dg>  text</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> string
<k>Default:</k> <gr>""</gr>
Sets the text to display with the new shape.
It is also used for legend item if `name` is not provided.
<h3 id="Plotlylayouttopic-221"><dg>  textangle</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> angle
<k>Default:</k> <gr>"auto"</gr>
Sets the angle at which the label text is drawn with respect to the horizontal.
For lines, angle "auto" is the same angle as the line.
For all other shapes, angle "auto" is horizontal.
<h3 id="Plotlylayouttopic-222"><dg>  textposition</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> enumerated , one of ( <gr>"top left"</gr> | <gr>"top center"</gr> | <gr>"top right"</gr> | <gr>"middle left"</gr> | <gr>"middle center"</gr> | <gr>"middle right"</gr> | <gr>"bottom left"</gr> | <gr>"bottom center"</gr> | <gr>"bottom right"</gr> | <gr>"start"</gr> | <gr>"middle"</gr> | <gr>"end"</gr> )
Sets the position of the label text relative to the new shape.
Supported values for rectangles, circles and paths are "top left", "top center", "top right", "middle left", "middle center", "middle right", "bottom left", "bottom center", and "bottom right".
Supported values for lines are "start", "middle", and "end".
Default: "middle center" for rectangles, circles, and paths; "middle" for lines.
<h3 id="Plotlylayouttopic-223"><dg>  texttemplate</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> string
<k>Default:</k> <gr>""</gr>
Template string used for rendering the new shape's label.
Note that this will override `text`.
Variables are inserted using %{variable}, for example "x0: %{x0}".
Numbers are formatted using d3-format's syntax %{variable:d3-format}, for example "Price: %{x0:$.2f}".
See https://github.com/d3/d3-format/tree/v1.4.5#d3-format for details on the formatting syntax.
Dates are formatted using d3-time-format's syntax %{variable|d3-time-format}, for example "Day: %{x0|%m %b %Y}".
See https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format for details on the date formatting syntax.
A single multiplication or division operation may be applied to numeric variables, and combined with d3 number formatting, for example "Length in cm: %{x0"2.54}", "%{slope"60:.1f} meters per second." For log axes, variable values are given in log units.
For date axes, x/y coordinate variables and center variables use datetimes, while all other variable values use values in ms.
Finally, the template string has access to variables `x0`, `x1`, `y0`, `y1`, `slope`, `dx`, `dy`, `width`, `height`, `length`, `xcenter` and `ycenter`.
<h3 id="Plotlylayouttopic-224"><dg>  xanchor</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> enumerated , one of ( <gr>"auto"</gr> | <gr>"left"</gr> | <gr>"center"</gr> | <gr>"right"</gr> )
<k>Default:</k> <gr>"auto"</gr>
Sets the label's horizontal position anchor This anchor binds the specified `textposition` to the "left", "center" or "right" of the label text.
For example, if `textposition` is set to "top right" and `xanchor` to "right" then the right-most portion of the label text lines up with the right-most edge of the new shape.
<h3 id="Plotlylayouttopic-225"><dg>  yanchor</dg></h3>
<k>Parent:</k> <gr>layout.newshape.label</gr>
<k>Type:</k> enumerated , one of ( <gr>"top"</gr> | <gr>"middle"</gr> | <gr>"bottom"</gr> )
Sets the label's vertical position anchor This anchor binds the specified `textposition` to the "top", "middle" or "bottom" of the label text.
For example, if `textposition` is set to "top right" and `yanchor` to "top" then the top-most portion of the label text lines up with the top-most edge of the new shape.
<h3 id="Plotlylayouttopic-226"><r> layer</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> enumerated , one of ( <gr>"below"</gr> | <gr>"above"</gr> | <gr>"between"</gr> )
<k>Default:</k> <gr>"above"</gr>
Specifies whether new shapes are drawn below gridlines ("below"), between gridlines and traces ("between") or above traces ("above").
<h3 id="Plotlylayouttopic-227"><r> legend</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> subplotid
<k>Default:</k> <gr>legend</gr>
Sets the reference to a legend to show new shape in.
References to these legends are "legend", "legend2", "legend3", etc.
Settings for these legends are set in the layout, under `layout.legend`, `layout.legend2`, etc.
<h3 id="Plotlylayouttopic-228"><r> legendgroup</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> string
<k>Default:</k> <gr>""</gr>
Sets the legend group for new shape.
Traces and shapes part of the same legend group hide/show at the same time when toggling legend items.
<h3 id="Plotlylayouttopic-229"><r> legendgrouptitle</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-230"><dg>  font</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle</gr>
<k>Type:</k> object containing one or more of the keys listed below.
Sets this legend group's title font.
<h3 id="Plotlylayouttopic-231"><dg>   color</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> color
<h3 id="Plotlylayouttopic-232"><dg>   family</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> string
HTML font family - the typeface that will be applied by the web browser.
The web browser will only be able to apply a font if it is available on the system which it operates.
Provide multiple font families, separated by commas, to indicate the preference in which to apply fonts if they aren't available on the system.
The Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise) generates images on a server, where only a select number of fonts are installed and supported.
These include "Arial", "Balto", "Courier New", "Droid Sans", "Droid Serif", "Droid Sans Mono", "Gravitas One", "Old Standard TT", "Open Sans", "Overpass", "PT Sans Narrow", "Raleway", "Times New Roman".
<h3 id="Plotlylayouttopic-233"><dg>   lineposition</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> flaglist string.
Any combination of <gr>"under"</gr>, <gr>"over"</gr>, <gr>"through"</gr> joined with a <gr>"+"</gr> OR <gr>"none"</gr>.
<k>Examples:</k> <gr>"under"</gr>, <gr>"over"</gr>, <gr>"under+over"</gr>, <gr>"under+over+through"</gr>, <gr>"none"</gr>
<k>Default:</k> <gr>"none"</gr>
Sets the kind of decoration line(s) with text, such as an "under", "over" or "through" as well as combinations e.g.
"under+over", etc.
<h3 id="Plotlylayouttopic-234"><dg>   shadow</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"none"</gr>
Sets the shape and color of the shadow behind text.
"auto" places minimal shadow and applies contrast text font color.
See https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow for additional options.
<h3 id="Plotlylayouttopic-235"><dg>   size</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> number greater than or equal to 1
<h3 id="Plotlylayouttopic-236"><dg>   style</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"italic"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets whether a font should be styled with a normal or italic face from its family.
<h3 id="Plotlylayouttopic-237"><dg>   textcase</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"word caps"</gr> | <gr>"upper"</gr> | <gr>"lower"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets capitalization of text.
It can be used to make text appear in all-uppercase or all-lowercase, or with each word capitalized.
<h3 id="Plotlylayouttopic-238"><dg>   variant</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> enumerated , one of ( <gr>"normal"</gr> | <gr>"small-caps"</gr> | <gr>"all-small-caps"</gr> | <gr>"all-petite-caps"</gr> | <gr>"petite-caps"</gr> | <gr>"unicase"</gr> )
<k>Default:</k> <gr>"normal"</gr>
Sets the variant of the font.
<h3 id="Plotlylayouttopic-239"><dg>   weight</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle.font</gr>
<k>Type:</k> integer between or equal to 1 and 1000
<k>Default:</k> <gr>normal</gr>
Sets the weight (or boldness) of the font.
<h3 id="Plotlylayouttopic-240"><dg>  text</dg></h3>
<k>Parent:</k> <gr>layout.newshape.legendgrouptitle</gr>
<k>Type:</k> string
<k>Default:</k> <gr>""</gr>
Sets the title of the legend group.
<h3 id="Plotlylayouttopic-241"><r> legendrank</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> number
<k>Default:</k> <gr>1000</gr>
Sets the legend rank for new shape.
Items and groups with smaller ranks are presented on top/left side while with "reversed" `legend.traceorder` they are on bottom/right side.
The default legendrank is 1000, so that you can use ranks less than 1000 to place certain items before all unranked items, and ranks greater than 1000 to go after all unranked items.
<h3 id="Plotlylayouttopic-242"><r> legendwidth</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> number greater than or equal to 0
Sets the width (in px or fraction) of the legend for new shape.
<h3 id="Plotlylayouttopic-243"><r> line</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-244"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.newshape.line</gr>
<k>Type:</k> color
Sets the line color.
By default uses either dark grey or white to increase contrast with background color.
<h3 id="Plotlylayouttopic-245"><dg>  dash</dg></h3>
<k>Parent:</k> <gr>layout.newshape.line</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"solid"</gr>
Sets the dash style of lines.
Set to a dash type string ("solid", "dot", "dash", "longdash", "dashdot", or "longdashdot") or a dash length list in px (eg "5px,10px,2px,2px").
<h3 id="Plotlylayouttopic-246"><dg>  width</dg></h3>
<k>Parent:</k> <gr>layout.newshape.line</gr>
<k>Type:</k> number greater than or equal to 0
<k>Default:</k> <gr>4</gr>
Sets the line width (in px).
<h3 id="Plotlylayouttopic-247"><r> name</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> string
Sets new shape name.
The name appears as the legend item.
<h3 id="Plotlylayouttopic-248"><r> opacity</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>1</gr>
Sets the opacity of new shapes.
<h3 id="Plotlylayouttopic-249"><r> showlegend</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> boolean
Determines whether or not new shape is shown in the legend.
<h3 id="Plotlylayouttopic-250"><r> visible</r></h3>
<k>Parent:</k> <gr>layout.newshape</gr>
<k>Type:</k> enumerated , one of ( <gr>true</gr> | <gr>false</gr> | <gr>"legendonly"</gr> )
<k>Default:</k> <gr>true</gr>
Determines whether or not new shape is visible.
If "legendonly", the shape is not drawn, but can appear as a legend item (provided that the legend itself is visible).
<h3 id="Plotlylayouttopic-251"><pk>activeshape</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-252"><r> fillcolor</r></h3>
<k>Parent:</k> <gr>layout.activeshape</gr>
<k>Type:</k> color
<k>Default:</k> <gr>"rgb(255,0,255)"</gr>
Sets the color filling the active shape' interior.
<h3 id="Plotlylayouttopic-253"><r> opacity</r></h3>
<k>Parent:</k> <gr>layout.activeshape</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.5</gr>
Sets the opacity of the active shape.
<h3 id="Plotlylayouttopic-254"><pk>selections</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> array of object where each object has one or more of the keys listed below.
This will break if there ever more than one type of item in in items - but for now it's just "shape" and "annotation" 
<h3 id="Plotlylayouttopic-255"><r> line</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> object containing one or more of the keys listed below.
<h3 id="Plotlylayouttopic-256"><dg>  color</dg></h3>
<k>Parent:</k> <gr>layout.selections[].line</gr>
<k>Type:</k> color
Sets the line color.
<h3 id="Plotlylayouttopic-257"><dg>  dash</dg></h3>
<k>Parent:</k> <gr>layout.selections[].line</gr>
<k>Type:</k> string
<k>Default:</k> <gr>"dot"</gr>
Sets the dash style of lines.
Set to a dash type string ("solid", "dot", "dash", "longdash", "dashdot", or "longdashdot") or a dash length list in px (eg "5px,10px,2px,2px").
<h3 id="Plotlylayouttopic-258"><dg>  width</dg></h3>
<k>Parent:</k> <gr>layout.selections[].line</gr>
<k>Type:</k> number greater than or equal to 1
<k>Default:</k> <gr>1</gr>
Sets the line width (in px).
<h3 id="Plotlylayouttopic-259"><r> name</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> string
When used in a template, named items are created in the output figure in addition to any items the figure already has in this array.
You can modify these items in the output figure by making your own item with `templateitemname` matching this `name` alongside your modifications (including `visible: false` or `enabled: false` to hide it).
Has no effect outside of a template.
<h3 id="Plotlylayouttopic-260"><r> opacity</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.7</gr>
Sets the opacity of the selection.
<h3 id="Plotlylayouttopic-261"><r> path</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> string
For `type` "path" - a valid SVG path similar to `shapes.path` in data coordinates.
Allowed segments are: M, L and Z.
<h3 id="Plotlylayouttopic-262"><r> templateitemname</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> string
Used to refer to a named item in this array in the template.
Named items from the template will be created even without a matching item in the input figure, but you can modify one by making an item with `templateitemname` matching its `name`, alongside your modifications (including `visible: false` or `enabled: false` to hide it).
If there is no template or no matching item, this item will be hidden unless you explicitly show it with `visible: true`.
<h3 id="Plotlylayouttopic-263"><r> type</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> enumerated , one of ( <gr>"rect"</gr> | <gr>"path"</gr> )
Specifies the selection type to be drawn.
If "rect", a rectangle is drawn linking (`x0`,`y0`), (`x1`,`y0`), (`x1`,`y1`) and (`x0`,`y1`).
If "path", draw a custom SVG path using `path`.
<h3 id="Plotlylayouttopic-264"><r> x0</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> number or categorical coordinate string
Sets the selection's starting x position.
<h3 id="Plotlylayouttopic-265"><r> x1</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> number or categorical coordinate string
Sets the selection's end x position.
<h3 id="Plotlylayouttopic-266"><r> xref</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> enumerated , one of ( <gr>"paper"</gr> | <gr>"/^x([2-9]|[1-9][0-9]+)?( domain)?$/"</gr> )
Sets the selection's x coordinate axis.
If set to a x axis id (e.g.
"x" or "x2"), the `x` position refers to a x coordinate.
If set to "paper", the `x` position refers to the distance from the left of the plotting area in normalized coordinates where "0" ("1") corresponds to the left (right).
If set to a x axis ID followed by "domain" (separated by a space), the position behaves like for "paper", but refers to the distance in fractions of the domain length from the left of the domain of that axis: e.g., "x2 domain" refers to the domain of the second x axis and a x position of 0.5 refers to the point between the left and the right of the domain of the second x axis.
<h3 id="Plotlylayouttopic-267"><r> y0</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> number or categorical coordinate string
Sets the selection's starting y position.
<h3 id="Plotlylayouttopic-268"><r> y1</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> number or categorical coordinate string
Sets the selection's end y position.
<h3 id="Plotlylayouttopic-269"><r> yref</r></h3>
<k>Parent:</k> <gr>layout.selections[]</gr>
<k>Type:</k> enumerated , one of ( <gr>"paper"</gr> | <gr>"/^y([2-9]|[1-9][0-9]+)?( domain)?$/"</gr> )
Sets the selection's x coordinate axis.
If set to a y axis id (e.g.
"y" or "y2"), the `y` position refers to a y coordinate.
If set to "paper", the `y` position refers to the distance from the bottom of the plotting area in normalized coordinates where "0" ("1") corresponds to the bottom (top).
If set to a y axis ID followed by "domain" (separated by a space), the position behaves like for "paper", but refers to the distance in fractions of the domain length from the bottom of the domain of that axis: e.g., "y2 domain" refers to the domain of the second y axis and a y position of 0.5 refers to the point between the bottom and the top of the domain of the second y axis.
<h3 id="Plotlylayouttopic-270"><pk>hidesources</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
Determines whether or not a text link citing the data source is placed at the bottom-right cored of the figure.
Has only an effect only on graphs that have been generated via forked graphs from the Chart Studio Cloud (at https://chart-studio.plotly.com or on-premise).
<h3 id="Plotlylayouttopic-271"><pk>scattergap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
Sets the gap (in plot fraction) between scatter points of adjacent location coordinates.
Defaults to `bargap`.
<h3 id="Plotlylayouttopic-272"><pk>scattermode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"group"</gr> | <gr>"overlay"</gr> )
<k>Default:</k> <gr>"overlay"</gr>
Determines how scatter points at the same location coordinate are displayed on the graph.
With "group", the scatter points are plotted next to one another centered around the shared location.
With "overlay", the scatter points are plotted over one another, you might need to reduce "opacity" to see multiple scatter points.
<h3 id="Plotlylayouttopic-273"><pk>barcornerradius</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number or categorical coordinate string
Sets the rounding of bar corners.
May be an integer number of pixels, or a percentage of bar width (as a string ending in %).
<h3 id="Plotlylayouttopic-274"><pk>extendpiecolors</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
<k>Default:</k> <gr>true</gr>
If `true`, the pie slice colors (whether given by `piecolorway` or inherited from `colorway`) will be extended to three times its original length by first repeating every color 20% lighter then each color 20% darker.
This is intended to reduce the likelihood of reusing the same color when you have many slices, but you can set `false` to disable.
Colors provided in the trace, using `marker.colors`, are never extended.
<h3 id="Plotlylayouttopic-275"><pk>hiddenlabels</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> data array
hiddenlabels is the funnelarea &amp; pie chart analog of visible:'legendonly' but it can contain many labels, and can simultaneously hide slices from several pies/funnelarea charts
<h3 id="Plotlylayouttopic-276"><pk>piecolorway</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> colorlist
Sets the default pie slice colors.
Defaults to the main `colorway` used for trace colors.
If you specify a new list here it can still be extended with lighter and darker colors, see `extendpiecolors`.
<h3 id="Plotlylayouttopic-277"><pk>violingap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.3</gr>
Sets the gap (in plot fraction) between violins of adjacent location coordinates.
Has no effect on traces that have "width" set.
<h3 id="Plotlylayouttopic-278"><pk>violingroupgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.3</gr>
Sets the gap (in plot fraction) between violins of the same location coordinate.
Has no effect on traces that have "width" set.
<h3 id="Plotlylayouttopic-279"><pk>violinmode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"group"</gr> | <gr>"overlay"</gr> )
<k>Default:</k> <gr>"overlay"</gr>
Determines how violins at the same location coordinate are displayed on the graph.
If "group", the violins are plotted next to one another centered around the shared location.
If "overlay", the violins are plotted over one another, you might need to set "opacity" to see them multiple violins.
Has no effect on traces that have "width" set.
<h3 id="Plotlylayouttopic-280"><pk>bargroupgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0</gr>
Sets the gap (in plot fraction) between bars of the same location coordinate.
<h3 id="Plotlylayouttopic-281"><pk>barmode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"stack"</gr> | <gr>"group"</gr> | <gr>"overlay"</gr> | <gr>"relative"</gr> )
<k>Default:</k> <gr>"group"</gr>
Determines how bars at the same location coordinate are displayed on the graph.
With "stack", the bars are stacked on top of one another With "relative", the bars are stacked on top of one another, with negative values below the axis, positive values above With "group", the bars are plotted next to one another centered around the shared location.
With "overlay", the bars are plotted over one another, you might need to reduce "opacity" to see multiple bars.
<h3 id="Plotlylayouttopic-282"><pk>barnorm</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>""</gr> | <gr>"fraction"</gr> | <gr>"percent"</gr> )
<k>Default:</k> <gr>""</gr>
Sets the normalization for bar traces on the graph.
With "fraction", the value of each bar is divided by the sum of all values at that location coordinate.
"percent" is the same but multiplied by 100 to show percentages.
<h3 id="Plotlylayouttopic-283"><pk>boxgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.3</gr>
Sets the gap (in plot fraction) between boxes of adjacent location coordinates.
Has no effect on traces that have "width" set.
<h3 id="Plotlylayouttopic-284"><pk>boxgroupgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.3</gr>
Sets the gap (in plot fraction) between boxes of the same location coordinate.
Has no effect on traces that have "width" set.
<h3 id="Plotlylayouttopic-285"><pk>boxmode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"group"</gr> | <gr>"overlay"</gr> )
<k>Default:</k> <gr>"overlay"</gr>
Determines how boxes at the same location coordinate are displayed on the graph.
If "group", the boxes are plotted next to one another centered around the shared location.
If "overlay", the boxes are plotted over one another, you might need to set "opacity" to see them multiple boxes.
Has no effect on traces that have "width" set.
<h3 id="Plotlylayouttopic-286"><pk>waterfallgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
Sets the gap (in plot fraction) between bars of adjacent location coordinates.
<h3 id="Plotlylayouttopic-287"><pk>waterfallgroupgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0</gr>
Sets the gap (in plot fraction) between bars of the same location coordinate.
<h3 id="Plotlylayouttopic-288"><pk>waterfallmode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"group"</gr> | <gr>"overlay"</gr> )
<k>Default:</k> <gr>"group"</gr>
Determines how bars at the same location coordinate are displayed on the graph.
With "group", the bars are plotted next to one another centered around the shared location.
With "overlay", the bars are plotted over one another, you might need to reduce "opacity" to see multiple bars.
<h3 id="Plotlylayouttopic-289"><pk>funnelgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
Sets the gap (in plot fraction) between bars of adjacent location coordinates.
<h3 id="Plotlylayouttopic-290"><pk>funnelgroupgap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0</gr>
Sets the gap (in plot fraction) between bars of the same location coordinate.
<h3 id="Plotlylayouttopic-291"><pk>funnelmode</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> enumerated , one of ( <gr>"stack"</gr> | <gr>"group"</gr> | <gr>"overlay"</gr> )
<k>Default:</k> <gr>"stack"</gr>
Determines how bars at the same location coordinate are displayed on the graph.
With "stack", the bars are stacked on top of one another With "group", the bars are plotted next to one another centered around the shared location.
With "overlay", the bars are plotted over one another, you might need to reduce "opacity" to see multiple bars.
<h3 id="Plotlylayouttopic-292"><pk>extendfunnelareacolors</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
<k>Default:</k> <gr>true</gr>
If `true`, the funnelarea slice colors (whether given by `funnelareacolorway` or inherited from `colorway`) will be extended to three times its original length by first repeating every color 20% lighter then each color 20% darker.
This is intended to reduce the likelihood of reusing the same color when you have many slices, but you can set `false` to disable.
Colors provided in the trace, using `marker.colors`, are never extended.
<h3 id="Plotlylayouttopic-293"><pk>funnelareacolorway</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> colorlist
Sets the default funnelarea slice colors.
Defaults to the main `colorway` used for trace colors.
If you specify a new list here it can still be extended with lighter and darker colors, see `extendfunnelareacolors`.
<h3 id="Plotlylayouttopic-294"><pk>bargap</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> number between or equal to 0 and 1
<k>Default:</k> <gr>0.1</gr>
Sets the gap between bars of adjacent location coordinates.
Values are unitless, they represent fractions of the minimum difference in bar positions in the data.
<h3 id="Plotlylayouttopic-295"><pk>extendsunburstcolors</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
<k>Default:</k> <gr>true</gr>
If `true`, the sunburst slice colors (whether given by `sunburstcolorway` or inherited from `colorway`) will be extended to three times its original length by first repeating every color 20% lighter then each color 20% darker.
This is intended to reduce the likelihood of reusing the same color when you have many slices, but you can set `false` to disable.
Colors provided in the trace, using `marker.colors`, are never extended.
<h3 id="Plotlylayouttopic-296"><pk>sunburstcolorway</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> colorlist
Sets the default sunburst slice colors.
Defaults to the main `colorway` used for trace colors.
If you specify a new list here it can still be extended with lighter and darker colors, see `extendsunburstcolors`.
<h3 id="Plotlylayouttopic-297"><pk>extendtreemapcolors</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
<k>Default:</k> <gr>true</gr>
If `true`, the treemap slice colors (whether given by `treemapcolorway` or inherited from `colorway`) will be extended to three times its original length by first repeating every color 20% lighter then each color 20% darker.
This is intended to reduce the likelihood of reusing the same color when you have many slices, but you can set `false` to disable.
Colors provided in the trace, using `marker.colors`, are never extended.
<h3 id="Plotlylayouttopic-298"><pk>treemapcolorway</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> colorlist
Sets the default treemap slice colors.
Defaults to the main `colorway` used for trace colors.
If you specify a new list here it can still be extended with lighter and darker colors, see `extendtreemapcolors`.
<h3 id="Plotlylayouttopic-299"><pk>extendiciclecolors</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> boolean
<k>Default:</k> <gr>true</gr>
If `true`, the icicle slice colors (whether given by `iciclecolorway` or inherited from `colorway`) will be extended to three times its original length by first repeating every color 20% lighter then each color 20% darker.
This is intended to reduce the likelihood of reusing the same color when you have many slices, but you can set `false` to disable.
Colors provided in the trace, using `marker.colors`, are never extended.
<h3 id="Plotlylayouttopic-300"><pk>iciclecolorway</pk></h3>
<k>Parent:</k> <gr>layout</gr>
<k>Type:</k> colorlist
Sets the default icicle slice colors.
Defaults to the main `colorway` used for trace colors.
If you specify a new list here it can still be extended with lighter and darker colors, see `extendiciclecolors`.
<h2>Access Array of Objects</h2>
<img src="https://media.geeksforgeeks.org/wp-content/uploads/20231130123527/access-array-of-objects.png" loading="lazy">
<k>Using the Brackets notation</k>
arrayName[arrayIndex]
console.log(objArr[0]);
<k>Using the DOT notation</k>
arrayName[arrayIndex].propertyName
console.log(objArr[1].gender);
<k>Using the for..in loop</k>
for (var key in arrayName) {
console.log(arrayName[key].name);
//Or we can access the specific properties using
console.log(arrayName[arrayIndex].propertyName);
}
for (let key in objArr) {
// Console logs all the values in the objArr Array:
console.log(objArr[key]);
}
<k>Using forEach Loop</k>
arrayName.forEach(function(item) { console.log(item); });
objArr.forEach(function (item) { console.log(item); });
<k>Using map() method</k>
arrayName.map((item) => { console.log(item); });
objArr.map((item) => { console.log(item); });
<k>Using filter() method</k>
arrayName.filter(function(item) { console.log(item); });
objArr.filter(function (item) { console.log(item); });
console.log("Using the Filer method to acces value")
const search = objArr.filter(function (item) { return item.name === 'jane'; });
console.log(search);
<h2>48 JavaScript code pieces</h2>
<br>
<div id="48JavaScriptcodetoc" class="toc"><a href="#48JavaScriptcodetopic-0" target="_self">Anagrams of string（带有重复项）</a> <a href="#48JavaScriptcodetopic-1" target="_self">数组平均数</a> <a href="#48JavaScriptcodetopic-2" target="_self">大写每个单词的首字母</a> <a href="#48JavaScriptcodetopic-3" target="_self">首字母大写</a> <a href="#48JavaScriptcodetopic-4" target="_self">检查回文</a> <a href="#48JavaScriptcodetopic-5" target="_self">计数数组中值的出现次数</a> <a href="#48JavaScriptcodetopic-6" target="_self">当前URL</a> <a href="#48JavaScriptcodetopic-7" target="_self">Curry</a> <a href="#48JavaScriptcodetopic-8" target="_self">Deep flatten array</a> <a href="#48JavaScriptcodetopic-9" target="_self">数组之间的区别</a> <a href="#48JavaScriptcodetopic-10" target="_self">两点之间的距离</a> <a href="#48JavaScriptcodetopic-11" target="_self">可以按数字整除</a> <a href="#48JavaScriptcodetopic-12" target="_self">转义正则表达式</a> <a href="#48JavaScriptcodetopic-13" target="_self">偶数或奇数</a> <a href="#48JavaScriptcodetopic-14" target="_self">阶乘</a> <a href="#48JavaScriptcodetopic-15" target="_self">斐波那契数组生成器</a> <a href="#48JavaScriptcodetopic-16" target="_self">过滤数组中的非唯一值</a> <a href="#48JavaScriptcodetopic-17" target="_self">Flatten数组</a> <a href="#48JavaScriptcodetopic-18" target="_self">从数组中获取最大值</a> <a href="#48JavaScriptcodetopic-19" target="_self">从数组中获取最小值</a> <a href="#48JavaScriptcodetopic-20" target="_self">获取滚动位置</a> <a href="#48JavaScriptcodetopic-21" target="_self">最大公约数（GCD）</a> <a href="#48JavaScriptcodetopic-22" target="_self">Head of list</a> <a href="#48JavaScriptcodetopic-23" target="_self">list初始化</a> <a href="#48JavaScriptcodetopic-24" target="_self">用range初始化数组</a> <a href="#48JavaScriptcodetopic-25" target="_self">用值初始化数组</a> <a href="#48JavaScriptcodetopic-26" target="_self">列表的最后</a> <a href="#48JavaScriptcodetopic-27" target="_self">测试功能所花费的时间</a> <a href="#48JavaScriptcodetopic-28" target="_self">来自键值对的对象</a> <a href="#48JavaScriptcodetopic-29" target="_self">管道</a> <a href="#48JavaScriptcodetopic-30" target="_self">Powerset</a> <a href="#48JavaScriptcodetopic-31" target="_self">范围内的随机整数</a> <a href="#48JavaScriptcodetopic-32" target="_self">范围内的随机数</a> <a href="#48JavaScriptcodetopic-33" target="_self">随机化数组的顺序</a> <a href="#48JavaScriptcodetopic-34" target="_self">重定向到URL</a> <a href="#48JavaScriptcodetopic-35" target="_self">反转一个字符串</a> <a href="#48JavaScriptcodetopic-36" target="_self">RGB到十六进制</a> <a href="#48JavaScriptcodetopic-37" target="_self">滚动到顶部</a> <a href="#48JavaScriptcodetopic-38" target="_self">随机数组值</a> <a href="#48JavaScriptcodetopic-39" target="_self">数组之间的相似性</a> <a href="#48JavaScriptcodetopic-40" target="_self">按字符串排序（按字母顺序排列）</a> <a href="#48JavaScriptcodetopic-41" target="_self">数组总和</a> <a href="#48JavaScriptcodetopic-42" target="_self">交换两个变量的值</a> <a href="#48JavaScriptcodetopic-43" target="_self">列表的tail</a> <a href="#48JavaScriptcodetopic-44" target="_self">数组唯一值</a> <a href="#48JavaScriptcodetopic-45" target="_self">URL参数</a> <a href="#48JavaScriptcodetopic-46" target="_self">验证数字</a> </div></center>
<h3 id="48JavaScriptcodetopic-0">Anagrams of string（带有重复项）</h3>
<gr>用递归。
对于给定字符串中的每个字母，为字母创建字谜。
使用map（）将字母与每部分字谜组合，然后使用reduce（）将所有字谜组合到一个数组中，最基本情况是字符串长度等于2或1。
</gr>
const anagrams = str => {
if (str.length &lt;= 2) return str.length === 2 ? [str, str[1] + str[0]] : [str];
return str.split('').reduce((acc, letter, i) =>
acc.concat(anagrams(str.slice(0, i) + str.slice(i + 1)).map(val => letter + val)), []);
};
// anagrams('abc') -> ['abc','acb','bac','bca','cab','cba']
<h3 id="48JavaScriptcodetopic-1">数组平均数</h3>
<gr>用reduce（）将每个值添加到累加器，初始值为0，总和除以数组长度。
</gr>
const average = arr => arr.reduce((acc, val) => acc + val, 0) / arr.length;
// average([1,2,3]) -> 2
<h3 id="48JavaScriptcodetopic-2">大写每个单词的首字母</h3>
<gr>用replace（）匹配每个单词的第一个字符，并使用toUpperCase（）来将其大写。
</gr>
const capitalizeEveryWord = str => str.replace(/\b[a-z]/g, char => char.toUpperCase());
// capitalizeEveryWord('hello world!') -> 'Hello World!'
<h3 id="48JavaScriptcodetopic-3">首字母大写</h3>
<gr>用slice（0,1）和toUpperCase（）大写第一个字母，slice（1）获取字符串的其余部分。
省略lowerRest参数以保持字符串的其余部分不变，或将其设置为true以转换为小写。
（注意：这和上一个示例不是同一件事情）
</gr>
const capitalize = (str, lowerRest = false) =>
str.slice(0, 1).toUpperCase() + (lowerRest ? str.slice(1).toLowerCase() : str.slice(1));
// capitalize(‘myName’, true) -> ‘Myname’
<h3 id="48JavaScriptcodetopic-4">检查回文</h3>
<gr>字符串转换为toLowerCase（），并使用replace（）从中删除非字母的字符。
然后，将其转换为tolowerCase（），将（’‘）拆分为单独字符，reverse（），join（’‘），与原始的非反转字符串进行比较，然后将其转换为tolowerCase（）。
</gr>
const palindrome = str => {
const s = str.toLowerCase().replace(/[\W_]/g,'');
return s === s.split('').reverse().join('');
}
// palindrome('taco cat') -> true
<h3 id="48JavaScriptcodetopic-5">计数数组中值的出现次数</h3>
<gr>次遇到数组中的特定值时，使用reduce（）来递增计数器。
</gr>
const countOccurrences = (arr, value) => arr.reduce((a, v) => v === value ? a + 1 : a + 0, 0);
// countOccurrences([1,1,2,1,2,3], 1) -> 3
<h3 id="48JavaScriptcodetopic-6">当前URL</h3>
<gr>用window.location.href来获取当前URL。
</gr>
const currentUrl = _ => window.location.href;
// currentUrl() -> 'https://google.com'
<h3 id="48JavaScriptcodetopic-7">Curry</h3>
<gr>用递归。
如果提供的参数（args）数量足够，则调用传递函数f，否则返回一个curried函数f。
</gr>
const curry = (fn, arity = fn.length, ...args) =>
arity &lt;= args.length
? fn(...args)
: curry.bind(null, fn, arity, ...args);
// curry(Math.pow)(2)(10) -> 1024
// curry(Math.min, 3)(10)(50)(2) -> 2
<h3 id="48JavaScriptcodetopic-8">Deep flatten array</h3>
<gr>用递归，使用reduce（）来获取所有不是数组的元素，flatten每个元素都是数组。
</gr>
const deepFlatten = arr =>
arr.reduce((a, v) => a.concat(Array.isArray(v) ? deepFlatten(v) : v), []);
// deepFlatten([1,[2],[[3],4],5]) -> [1,2,3,4,5]
<h3 id="48JavaScriptcodetopic-9">数组之间的区别</h3>
<gr>b创建一个Set，然后在a上使用Array.filter（），只保留b中不包含的值。
</gr>
const difference = (a, b) => { const s = new Set(b); return a.filter(x => !s.has(x)); };
// difference([1,2,3], [1,2]) -> [3]
<h3 id="48JavaScriptcodetopic-10">两点之间的距离</h3>
<gr>用Math.hypot（）计算两点之间的欧几里德距离。
</gr>
const distance = (x0, y0, x1, y1) => Math.hypot(x1 - x0, y1 - y0);
// distance(1,1, 2,3) -> 2.23606797749979
<h3 id="48JavaScriptcodetopic-11">可以按数字整除</h3>
<gr>用模运算符（％）来检查余数是否等于0。
</gr>
const isDivisible = (dividend, divisor) => dividend % divisor === 0;
// isDivisible(6,3) -> true
<h3 id="48JavaScriptcodetopic-12">转义正则表达式</h3>
<gr>用replace（）来转义特殊字符。
</gr>
const escapeRegExp = str => str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&amp;');
// escapeRegExp('(test)') -> \\(test\\)
<h3 id="48JavaScriptcodetopic-13">偶数或奇数</h3>
<gr>用Math.abs（）将逻辑扩展为负数，使用模（％）运算符进行检查。
如果数字是偶数，则返回true；
如果数字是奇数，则返回false。
</gr>
const isEven = num => num % 2 === 0;
// isEven(3) -> false
<h3 id="48JavaScriptcodetopic-14">阶乘</h3>
<gr>用递归。
如果n小于或等于1，则返回1。
否则返回n和n – 1的阶乘的乘积。
</gr>
const factorial = n => n &lt;= 1 ? 1 : n * factorial(n - 1);
// factorial(6) -> 720 
<h3 id="48JavaScriptcodetopic-15">斐波那契数组生成器</h3>
<gr>建一个特定长度的空数组，初始化前两个值（0和1）。
使用Array.reduce（）向数组中添加值，后面的一个数等于前面两个数相加之和（前两个除外）。
</gr>
const fibonacci = n =>
Array(n).fill(0).reduce((acc, val, i) => acc.concat(i > 1 ? acc[i - 1] + acc[i - 2] : i), []);
// fibonacci(5) -> [0,1,1,2,3]
<h3 id="48JavaScriptcodetopic-16">过滤数组中的非唯一值</h3>
<gr>Array.filter（）用于仅包含唯一值的数组。
</gr>
const filterNonUnique = arr => arr.filter(i => arr.indexOf(i) === arr.lastIndexOf(i));
// filterNonUnique([1,2,2,3,4,4,5]) -> [1,3,5]
<h3 id="48JavaScriptcodetopic-17">Flatten数组</h3>
<gr>用reduce（）来获取数组中的所有元素，并使用concat（）来使它们flatten。
</gr>
const flatten = arr => arr.reduce((a, v) => a.concat(v), []);
// flatten([1,[2],3,4]) -> [1,2,3,4]
<h3 id="48JavaScriptcodetopic-18">从数组中获取最大值</h3>
<gr>用Math.max（）与spread运算符（…）结合得到数组中的最大值。
</gr>
const arrayMax = arr => Math.max(...arr);
// arrayMax([10, 1, 5]) -> 10
<h3 id="48JavaScriptcodetopic-19">从数组中获取最小值</h3>
<gr>用Math.min（）与spread运算符（…）结合得到数组中的最小值。
</gr>
const arrayMin = arr => Math.min(...arr);
// arrayMin([10, 1, 5]) -> 1
<h3 id="48JavaScriptcodetopic-20">获取滚动位置</h3>
<gr>果已定义，请使用pageXOffset和pageYOffset，否则使用scrollLeft和scrollTop，可以省略el来使用window的默认值。
</gr>
const getScrollPos = (el = window) =>
({x: (el.pageXOffset !== undefined) ? el.pageXOffset : el.scrollLeft,
y: (el.pageYOffset !== undefined) ? el.pageYOffset : el.scrollTop});
// getScrollPos() -> {x: 0, y: 200}
<h3 id="48JavaScriptcodetopic-21">最大公约数（GCD）</h3>
<gr>用递归。
基本情况是当y等于0时。
在这种情况下，返回x。
否则，返回y的GCD和x / y的其余部分。
</gr>
const gcd = (x, y) => !y ? x : gcd(y, x % y);
// gcd (8, 36) -> 4
<h3 id="48JavaScriptcodetopic-22">Head of list</h3>
<gr>回ARR[0]
</gr>
const head = arr => arr[0];
// head([1,2,3]) -> 1
<h3 id="48JavaScriptcodetopic-23">list初始化</h3>
<gr>回arr.slice（0，-1）
</gr>
const initial = arr => arr.slice(0, -1);
// initial([1,2,3]) -> [1,2]
<h3 id="48JavaScriptcodetopic-24">用range初始化数组</h3>
<gr>用Array（end-start）创建所需长度的数组，使用map（）来填充范围中的所需值，可以省略start使用默认值0。
</gr>
const initializeArrayRange = (end, start = 0) =>
Array.apply(null, Array(end - start)).map((v, i) => i + start);
// initializeArrayRange(5) -> [0,1,2,3,4]
<h3 id="48JavaScriptcodetopic-25">用值初始化数组</h3>
<gr>用Array（n）创建所需长度的数组，fill(v)以填充所需的值，可以忽略value使用默认值0。
</gr>
const initializeArray = (n, value = 0) => Array(n).fill(value);
// initializeArray(5, 2) -> [2,2,2,2,2]
<h3 id="48JavaScriptcodetopic-26">列表的最后</h3>
<gr>回arr.slice（-1）[0]
</gr>
const last = arr => arr.slice(-1)[0];
// last([1,2,3]) -> 3
<h3 id="48JavaScriptcodetopic-27">测试功能所花费的时间</h3>
<gr>用performance.now（）获取函数的开始和结束时间，console.log（）所花费的时间。
第一个参数是函数名，随后的参数传递给函数。
</gr>
const timeTaken = callback => {
console.time('timeTaken');
const r = callback();
console.timeEnd('timeTaken');
return r;
};
// timeTaken(() => Math.pow(2, 10)) -> 1024
// (logged): timeTaken: 0.02099609375ms
<h3 id="48JavaScriptcodetopic-28">来自键值对的对象</h3>
<gr>用Array.reduce（）来创建和组合键值对。
</gr>
const objectFromPairs = arr => arr.reduce((a, v) => (a[v[0]] = v[1], a), {});
// objectFromPairs([['a',1],['b',2]]) -> {a: 1, b: 2}
<h3 id="48JavaScriptcodetopic-29">管道</h3>
<gr>用Array.reduce（）通过函数传递值。
</gr>
const pipe = (...funcs) => arg => funcs.reduce((acc, func) => func(acc), arg);
// pipe(btoa, x => x.toUpperCase())("Test") -> "VGVZDA=="
<h3 id="48JavaScriptcodetopic-30">Powerset</h3>
<gr>用reduce（）与map（）结合来遍历元素，并将其组合成包含所有组合的数组。
</gr>
const powerset = arr =>
arr.reduce((a, v) => a.concat(a.map(r => [v].concat(r))), [[]]);
// powerset([1,2]) -> [[], [1], [2], [2,1]]
<h3 id="48JavaScriptcodetopic-31">范围内的随机整数</h3>
<gr>用Math.random（）生成一个随机数并将其映射到所需的范围，使用Math.floor（）使其成为一个整数。
</gr>
const randomIntegerInRange = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
// randomIntegerInRange(0, 5) -> 2
<h3 id="48JavaScriptcodetopic-32">范围内的随机数</h3>
<gr>用Math.random（）生成一个随机值，使用乘法将其映射到所需的范围。
</gr>
const randomInRange = (min, max) => Math.random() * (max - min) + min;
// randomInRange(2,10) -> 6.0211363285087005
<h3 id="48JavaScriptcodetopic-33">随机化数组的顺序</h3>
<gr>用sort（）重新排序元素，利用Math.random（）来随机排序。
</gr>
const shuffle = arr => arr.sort(() => Math.random() - 0.5);
// shuffle([1,2,3]) -> [2,3,1]
<h3 id="48JavaScriptcodetopic-34">重定向到URL</h3>
<gr>用window.location.href或window.location.replace（）重定向到url。
传递第二个参数来模拟链接点击（true – default）或HTTP重定向（false）。
</gr>
const redirect = (url, asLink = true) =>
asLink ? window.location.href = url : window.location.replace(url);
// redirect('https://google.com')
<h3 id="48JavaScriptcodetopic-35">反转一个字符串</h3>
<gr>用数组解构和Array.reverse（）来颠倒字符串中的字符顺序。
合并字符以使用join(‘‘)获取字符串。
</gr>
const reverseString = str => [...str].reverse().join('');
// reverseString('foobar') -> 'raboof'
<h3 id="48JavaScriptcodetopic-36">RGB到十六进制</h3>
<gr>用按位左移运算符（«）和toString（16），然后padStart（6，“0”）将给定的RGB参数转换为十六进制字符串以获得6位十六进制值。
</gr>
const rgbToHex = (r, g, b) => ((r &lt;&lt; 16) + (g &lt;&lt; 8) + b).toString(16).padStart(6, '0');
// rgbToHex(255, 165, 1) -> 'ffa501'
<h3 id="48JavaScriptcodetopic-37">滚动到顶部</h3>
<gr>用document.documentElement.scrollTop或document.body.scrollTop获取到顶部的距离。
</gr><gr>顶部滚动一小部分距离。
</gr><gr>用window.requestAnimationFrame（）来滚动。
</gr>
const scrollToTop = _ => {
const c = document.documentElement.scrollTop || document.body.scrollTop;
if (c > 0) {
window.requestAnimationFrame(scrollToTop);
window.scrollTo(0, c - c / 8);
}
};
// scrollToTop()
<h3 id="48JavaScriptcodetopic-38">随机数组值</h3>
<gr>用Array.map（）和Math.random（）创建一个随机值的数组。
使用Array.sort（）根据随机值对原始数组的元素进行排序。
</gr>
count shuffle = arr => {
let r = arr.map(Math.random);
return arr.sort((a, b) => r[a] - r[b]);
}
// shuffle([1, 2, 3] -> [2, 1, 3])
<h3 id="48JavaScriptcodetopic-39">数组之间的相似性</h3>
<gr>用filter（）移除不是values的一部分值，使用includes（）确定。
</gr>
const similarity = (arr, values) => arr.filter(v => values.includes(v));
// similarity([1,2,3], [1,2,4]) -> [1,2]
<h3 id="48JavaScriptcodetopic-40">按字符串排序（按字母顺序排列）</h3>
<gr>用split（’‘）分割字符串，sort（）使用localeCompare（），使用join（’‘）重新组合。
</gr>
const sortCharactersInString = str =>
str.split('').sort((a, b) => a.localeCompare(b)).join('');
// sortCharactersInString('cabbage') -> 'aabbceg'
<h3 id="48JavaScriptcodetopic-41">数组总和</h3>
<gr>用reduce（）将每个值添加到累加器，初始化值为0。
</gr>
const sum = arr => arr.reduce((acc, val) => acc + val, 0);
// sum([1,2,3,4]) -> 10
<h3 id="48JavaScriptcodetopic-42">交换两个变量的值</h3>
<gr>用数组解构来交换两个变量之间的值。
</gr>
[varA, varB] = [varB, varA];
// [x, y] = [y, x]
<h3 id="48JavaScriptcodetopic-43">列表的tail</h3>
<gr>回arr.slice（1）
</gr>
const tail = arr => arr.length > 1 ? arr.slice(1) : arr;
// tail([1,2,3]) -> [2,3]
// tail([1]) -> [1]
<h3 id="48JavaScriptcodetopic-44">数组唯一值</h3>
<gr>用ES6 Set和… rest操作符去掉所有重复值。
</gr>
const unique = arr => [...new Set(arr)];
// unique([1,2,2,3,4,4,5]) -> [1,2,3,4,5]
<h3 id="48JavaScriptcodetopic-45">URL参数</h3>
<gr>用match() 与适当的正则表达式来获得所有键值对，适当的map() 。
使用Object.assign（）和spread运算符（…）将所有键值对组合到一个对象中，将location.search作为参数传递给当前url。
</gr>
const getUrlParameters = url =>
url.match(/([^?=&amp;]+)(=([^&amp;]*))/g).reduce(
(a, v) => (a[v.slice(0, v.indexOf('='))] = v.slice(v.indexOf('=') + 1), a), {}
);
// getUrlParameters('http://url.com/page?name=Adam&amp;surname=Smith') -> {name: 'Adam', surname: 'Smith'}
<gr>UID生成器
</gr><gr>用crypto API生成符合RFC4122版本4的UUID。
</gr>
const uuid = _ =>
([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>
(c ^ crypto.getRandomValues(new Uint8Array(1))[0] &amp; 15 >> c / 4).toString(16)
);
// uuid() -> '7982fcfe-5721-4632-bede-6000885be57d'
<h3 id="48JavaScriptcodetopic-46">验证数字</h3>
<gr>用！isNaN和parseFloat（）来检查参数是否是一个数字，使用isFinite（）来检查数字是否是有限的。
</gr>
const validateNumber = n => !isNaN(parseFloat(n)) &amp;&amp; isFinite(n) &amp;&amp; Number(n) == n;
// validateNumber('10') -> true
<h2>Self-Invoking Functions</h2>
The self-invoking functions are JavaScript functions that execute immediately as they are defined.
A self-invoking expression is invoked (started) automatically, without being called.
Function expressions will execute automatically if the expression is followed by ().
You cannot self-invoke a function declaration.
Syntax
(function () {
// function body
})();
Example
(function () {
let x = "Hello!!";
})();
output
Hello!!
The function definition is enclosed inside the pair of parentheses.
The second pair of parentheses at the end executes the function.
Example
We print the message in the output using the self-executing function.
(function () {
document.getElementById("output").innerHTML = 
"Self-invoked function is executed!";
}());
Output:
Self-invoked function is executed!
<k>Self-Invoking Functions with Parameters</k>
It is common practice to pass references to global objects such as window, etc.
(function (paras) {
// function body
})(args);
Example
We created an anonymous function with a parameter name.
We have passed an argument to it.
const output = document.getElementById("demo");
(function (name) {
output.innerHTML = `Welcome to ${name}`;
})("Tutorials Point !");
Output
Welcome to Tutorials Point !
<k>Private Scope of Self-Invoking Functions</k>
Whatever code is defined inside the self-executing function remains in the private scope and doesn't pollute the global scope.
So, developers can make code clear and remove the errors like naming conflicts, etc.
Also, the code of the self-invoking function remains hidden and can't be accessible by other parts of the code.
<k>Benefits of Using the Self-Invoking Functions</k>
1.
Avoiding the global scope
2.
Initialization − The self-executing functions can be used for the initialization of variables.
3.
Code privacy − Programmers can avoid accessing the code of the self-executing function by other parts of the code.
<h2>JavaScript Closures</h2>
A closure is a function having access to the parent scope, even after the parent function has closed.
The function defined in the closure ‘remembers’ the environment in which it was created.
JavaScript variables can belong to the local or global scope.
Global variables can be made local (private) with closures.
A function can also access variables defined outside the function.
In a web page, global variables belong to the page.
Global variables can be used (and changed) by all other scripts in the page.
A local variable can only be used inside the function where it is defined.
It is hidden from other functions and other scripting code.
Global and local variables with the same name are different variables.
Modifying one, does not modify the other.
<k>Variable Lifetime</k>
Global variables live until the page is discarded, like when you navigate to another page or close the window.
<k>Local variables have short lives.</k>
They are created when the function is invoked, and deleted when the function is finished.
<k>A Counter Dilemma</k>
Suppose you want to use a variable for counting something, and you want this counter to be available to all functions.
You could use a global variable, and a function to increase the counter:
// Initiate counter
let counter = 0;
// Function to increment counter
function add() {
counter += 1;
}
// Call add() 3 times
add();
add();
add();
// The counter should now be 3
There is a problem with the solution above: Any code on the page can change the counter, without calling add().
The counter should be local to the add() function, to prevent other code from changing it.
We can remove the global counter and access the local counter by letting the function return it.
<k>JavaScript Closures</k>
use self-invoking functions:
const add = (function () {
let counter = 0;
return function () {counter += 1; return counter}
})();
add();
add();
add();
// the counter is now 3
The variable add is assigned to the return value of a self-invoking function.
The self-invoking function only runs once.
It sets the counter to zero (0), and returns a function expression.
This way add becomes a function.
The "wonderful" part is that it can access the counter in the parent scope.
This is called a JavaScript closure.
It makes it possible for a function to have "private" variables.
The counter is protected by the scope of the anonymous function, and can only be changed using the add function.
<k>count the number of times user clicked a button on a webpage.</k>
&lt;button onclick="updateClickCount()">click me&lt;/button>
You could use a global variable, and a function to increase the counter:
var counter = 0;
function updateClickCount() {
++counter;
// Do something with counter
}
But, the pitfall is that any script on the page can change the counter, without calling updateClickCount().
Now, you might be thinking of declaring the variable inside the function:
function updateClickCount() {
var counter = 0;
++counter;
// Do something with counter
}
But, hey! Every time updateClickCount() function is called, the counter is set to 1 again.
Thinking about nested functions?
Nested functions have access to the scope "above" them.
In this example, the inner function updateClickCount() has access to the counter variable in the parent function countWrapper():
function countWrapper() {
var counter = 0;
function updateClickCount() {
++counter;
// Do something with counter
}
updateClickCount();
return counter;
}
This could have solved the counter dilemma, if you could reach the updateClickCount() function from the outside and you also need to find a way to execute counter = 0 only once not everytime.
Closure to the rescue! (self-invoking function):
var updateClickCount = (function(){
var counter = 0;
return function(){
++counter;
// Do something with counter
}
})();
The self-invoking function only runs once.
It sets the counter to zero (0), and returns a function expression.
This way updateClickCount becomes a function.
The "wonderful" part is that it can access the counter in the parent scope.
This is called a JavaScript closure.
It makes it possible for a function to have "private" variables.
The counter is protected by the scope of the anonymous function, and can only be changed using the updateClickCount() function!
A more lively example on closures
var updateClickCount = (function(){
var counter = 0;
return function(){
++counter;
document.getElementById("spnCount").innerHTML = counter;
}
})();
&lt;button onclick="updateClickCount()">click me&lt;/button>
&lt;div> you've clicked
&lt;span id="spnCount"> 0 &lt;/span> times!
&lt;/div>
<k>use closures to implement throttle and debounce functionality</k>
<k>Throttling</k>
Throttling puts a limit on as a maximum number of times a function can be called over time.
As in "execute this function at most once every 100 milliseconds."
Code:
const throttle = (func, limit) => {
let isThrottling
return function() {
const args = arguments
const context = this
if (!isThrottling) {
func.apply(context, args)
isThrottling = true
setTimeout(() => isThrottling = false, limit)
}
}
}
<k>Debouncing</k>
Debouncing puts a limit on a function not be called again until a certain amount of time has passed without it being called.
As in "execute this function only if 100 milliseconds have passed without it being called."
Code:
const debounce = (func, delay) => {
let debouncing
return function() {
const context = this
const args = arguments
clearTimeout(debouncing)
debouncing = setTimeout(() => func.apply(context, args), delay)
}
}
As you can see closures helped in implementing two beautiful features which every web application should have to provide smooth UI experience functionality.
<h2>简单JavaScript 功能</h2>
<br>
<div id="simpleJavtoc" class="toc"><a href="#simpleJavtopic-0" target="_self">获取操作系统详情</a><br><a href="#simpleJavtopic-1" target="_self">使用 void(0) 防止页面刷新</a><br><a href="#simpleJavtopic-2" target="_self">重定向到新页面</a><br><a href="#simpleJavtopic-3" target="_self">验证电子邮件</a><br><a href="#simpleJavtopic-4" target="_self">获取当前URL</a><br><a href="#simpleJavtopic-5" target="_self">使用正则表达式检测移动浏览器</a><br><a href="#simpleJavtopic-6" target="_self">不使用正则表达式检测移动浏览器</a><br><a href="#simpleJavtopic-7" target="_self">检测页面上禁用的JavaScript</a><br><a href="#simpleJavtopic-8" target="_self">获取模块的元数据</a><br><a href="#simpleJavtopic-9" target="_self">从日期获取时区偏移量</a><br><a href="#simpleJavtopic-10" target="_self">设置光标为等待状态</a><br><a href="#simpleJavtopic-11" target="_self">获取复选框的状态</a><br><a href="#simpleJavtopic-12" target="_self">为控制台消息添加CSS</a><br><a href="#simpleJavtopic-13" target="_self">禁用网页上的右键点击</a><br><a href="#simpleJavtopic-14" target="_self">捕获浏览器后退按钮</a><br><a href="#simpleJavtopic-15" target="_self">分组和嵌套控制台输出</a><br></div></center>
<h3 id="simpleJavtopic-0">获取操作系统详情</h3>
window.navigator
对象包含了访客浏览器的操作系统信息。
console.log(navigator.platform);
<h3 id="simpleJavtopic-1">使用 void(0) 防止页面刷新</h3>
当你点击一个链接时，浏览器不会加载新页面或刷新当前页面。
例如，下面的链接在不重新加载页面的情况下显示一个警告：
&lt;a href="JavaScript:void(0);" onclick="alert('Well done!')">点击我！&lt;/a>
<h3 id="simpleJavtopic-2">重定向到新页面</h3>
在纯JavaScript中，你可以通过设置location对象的href属性来重定向用户到新页面。
function redirect() {
window.location.href = "newPage.html";
}
调用redirect函数时，浏览器将导航到newPage.html。
<h3 id="simpleJavtopic-3">验证电子邮件</h3>
每当我想验证电子邮件时，我总是寻找一个完美的代码片段。
你可能也见过在一些库中默认提供的电子邮件验证函数，例如Zod。
以下代码片段可以用完整的逻辑验证任何电子邮件：
function validateEmail(email) {
var re = /^(([^&lt;>()\[\]\\.,;:\s@"]+(\.[^&lt;>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
return re.test(String(email).toLowerCase());
}
如果你想要一个也接受Unicode字符的简单版本，可以使用下面的代码：
function validateEmailUnicode(email) {
var re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
return re.test(String(email).toLowerCase());
}
这个简化版本可以匹配大多数有效的电子邮件地址，同时避免了过于复杂的正则表达式的一些缺陷。
<h3 id="simpleJavtopic-4">获取当前URL</h3>
是的，只用JavaScript就可以做到！你可以使用window.location.href来获取和更新当前的URL。
console.log("location.href", window.location.href); // 返回完整的URL
你也可以使用document.URL来只读（不能用于导航到新URL），但这个解决方案在Firefox中有问题。
console.log("document.URL", document.URL); // 返回完整的URL（只读）
所以，通常更推荐使用window.location.href来读取和更新URL。
<h3 id="simpleJavtopic-5">使用正则表达式检测移动浏览器</h3>
你可以使用正则表达式来判断用户是否在使用移动设备浏览。
下面的代码可以实现这一功能：
window.mobilecheck = function () {
var mobileCheck = false;
(function (a) {
if (
/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(
a
) ||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
a.substr(0, 4)
)
)
mobileCheck = true;
})(navigator.userAgent || navigator.vendor || window.opera
);
return mobileCheck;
};
<h3 id="simpleJavtopic-6">不使用正则表达式检测移动浏览器</h3>
你可以通过遍历设备列表并检查userAgent是否匹配来检测移动浏览器，这是正则表达式使用的替代方案：
function detectmob() {
if (
navigator.userAgent.match(/Android/i) ||
navigator.userAgent.match(/webOS/i) ||
navigator.userAgent.match(/iPhone/i) ||
navigator.userAgent.match(/iPad/i) ||
navigator.userAgent.match(/iPod/i) ||
navigator.userAgent.match(/BlackBerry/i) ||
navigator.userAgent.match(/Windows Phone/i)
) {
return true;
} else {
return false;
}
}
这个方法看起来更清晰，更容易理解。
<h3 id="simpleJavtopic-7">检测页面上禁用的JavaScript</h3>
你可以使用&lt;noscript>标签来检测JavaScript是否被禁用。
&lt;noscript>中的代码块在JavaScript被禁用时执行，通常用于在页面生成JavaScript时显示替代内容。
&lt;script type="javascript">
// JS相关代码放这里
&lt;/script>
&lt;noscript>
&lt;a href="next_page.html?noJS=true">页面上禁用了JavaScript，请尽快启用！&lt;/a>
&lt;/noscript>
<h3 id="simpleJavtopic-8">获取模块的元数据</h3>
你可以使用import.meta对象，这是一个元属性，暴露了JavaScript模块的上下文特定元数据。
它包含了当前模块的信息，例如模块的URL。
在浏览器中，你可能会获得不同于NodeJS的元数据。
&lt;script type="module" src="welcome-module.js">&lt;/script>;
console.log(import.meta); // { url: "file:///home/user/welcome-module.js" }
<h3 id="simpleJavtopic-9">从日期获取时区偏移量</h3>
你可以使用date对象的getTimezoneOffset方法。
该方法返回当前区域（主机系统设置）与UTC之间的时区差异，以分钟为单位。
var offset = new Date().getTimezoneOffset();
console.log(offset); // -330
<h3 id="simpleJavtopic-10">设置光标为等待状态</h3>
可以通过使用cursor属性在JavaScript中将光标设置为等待状态。
你可以使用以下函数来实现：
function myFunction() {
window.document.body.style.cursor = "wait";
}
可以在页面加载时使用它。
<h3 id="simpleJavtopic-11">获取复选框的状态</h3>
你可以在DOM中对选中的复选框应用checked属性。
如果值为true，表示复选框已选中，否则表示未选中。
例如，下面的HTML复选框元素可以使用JavaScript进行检查：
&lt;input type="checkbox" id="checkboxname" value="Agree" /> 同意条款&lt;br />
console.log(document.getElementById('checkboxname').checked); // true or false
<h3 id="simpleJavtopic-12">为控制台消息添加CSS</h3>
是的，你甚至可以为控制台消息应用类似于网页HTML文本的CSS样式，真的很棒：
console.log(
"%c 这段文字有紫色、较大的字体和白色背景",
"color: purple; font-size: x-large; background: white"
);
<h3 id="simpleJavtopic-13">禁用网页上的右键点击</h3>
可以通过在body元素的oncontextmenu属性中返回false来禁用页面上的右键点击：
&lt;body oncontextmenu="return false;">&lt;/body>
<h3 id="simpleJavtopic-14">捕获浏览器后退按钮</h3>
一开始我甚至不相信这可能。
你可以使用beforeunload事件来实现，这个事件在窗口、文档及其资源即将被卸载时触发。
此事件有助于警告用户当前数据的丢失并检测后退按钮事件。
window.addEventListener('beforeunload', () => {
console.log('点击了浏览器后退按钮');
});
<h3 id="simpleJavtopic-15">分组和嵌套控制台输出</h3>
可以使用console.group()来分组相关的日志消息，并使用console.groupEnd()关闭该组。
你还可以嵌套组，这样可以按层次结构输出消息。
例如，如果你要记录用户的详细信息：
console.group("用户详情");
console.log("姓名: Sudheer Jonna");
console.log("职业: 软件开发者");
// 嵌套组
console.group("地址");
console.log("街道: Commonwealth");
console.log("城市: 洛杉矶");
console.log("州: 加利福尼亚");
// 关闭嵌套组
console.groupEnd();
// 关闭外部组
console.groupEnd();
你还可以使用console.groupCollapsed()代替console.group()，如果你希望组默认是折叠的。
<h2>JavaScript对象转数组的三种简单方法</h2>
<br>
<div id="Obj2Arrtoc" class="toc"><a href="#Obj2Arrtopic-0" target="_self">使用Object.keys()和Array.map()</a><br><a href="#Obj2Arrtopic-1" target="_self">使用Object.entries()</a><br><a href="#Obj2Arrtopic-2" target="_self">使用Object.values()</a><br><a href="#Obj2Arrtopic-3" target="_self">小结</a><br></div></center>
<pre><img src="https://mmbiz.qpic.cn/sz_mmbiz_png/KEXUm19zKo6AaeXMqMua5UxSzMbNUpUkibjXP6aMGEt143GTl2BoDmW6XkBYkIyj3bPiatSMjdaQlGXCL4y4wTyw/640" loading="lazy">
<h3 id="Obj2Arrtopic-0">使用Object.keys()和Array.map()</h3>
通过Object.keys()获取对象的键，然后用Array.map()把这些键对应的值提取出来。
const student = { name: '小明', age: 18, city: '北京' };
const arr = Object.keys(student).map(key => student[key]);
console.log(arr);
// 输出: ['小明', 18, '北京']
在这个例子中，Object.keys(student)会返回一个包含对象所有键的数组（['name', 'age', 'city']）。
接着，Array.map()会遍历这个数组，每次迭代时，使用当前的键去获取对象中的对应值。
最终返回一个包含所有值的数组。
<h3 id="Obj2Arrtopic-1">使用Object.entries()</h3>
接下来介绍的是Object.entries()方法，这是在ES6中引入的新方法。
它直接返回一个包含对象键值对的数组。
const student = { name: '小明', age: 18, city: '北京' };
const arr = Object.entries(student);
console.log(arr);
// 输出: [['name', '小明'], ['age', 18], ['city', '北京']]
在这个例子中，Object.entries(student)直接返回一个数组，其中每个内部数组表示对象的一个键值对。
这个方法的优势在于它能直接获取键值对，对于一些需要处理键值对的场景特别有用。
<h3 id="Obj2Arrtopic-2">使用Object.values()</h3>
最后一个方法是使用Object.values()，它和Object.keys()类似，但它只返回对象的值。
这种方法特别适合当我们只关心对象的值而不需要键的时候。
const student = { name: '小明', age: 18, city: '北京' };
const arr = Object.values(student);
console.log(arr);
// 输出: ['小明', 18, '北京']
在这个例子中，Object.values(student)直接返回一个包含对象所有值的数组。
这个方法的优势在于操作简单，直接获取所有值，不需要关心键。
<h3 id="Obj2Arrtopic-3">小结</h3>
通过以上三种方法，我们可以轻松地将对象转换为数组。
无论是使用Object.keys()和Array.map()，Object.entries()，还是Object.values()，都各有优势，大家可以根据具体需求选择合适的方法。
如果你只需要对象的值，Object.values()是最简洁的方法。
如果你需要对象的键值对，Object.entries()是最佳选择。
如果你需要对键值进行一些处理，Object.keys()加上Array.map()会非常灵活。
<h2>开源JavaScript流程图组件</h2>
<br>
<div id="JavaScFlowcharttoc" class="toc"><a href="#JavaScFlowcharttopic-0" target="_self">flowchart.js</a> <a href="#JavaScFlowcharttopic-1" target="_self">jquery.flowchart.js</a> <a href="#JavaScFlowcharttopic-2" target="_self">Flowy</a> <a href="#JavaScFlowcharttopic-3" target="_self">Dgrm.net</a> <a href="#JavaScFlowcharttopic-4" target="_self">Drawflow</a> <a href="#JavaScFlowcharttopic-5" target="_self">xyflow</a> <a href="#JavaScFlowcharttopic-6" target="_self">GoJS</a> <a href="#JavaScFlowcharttopic-7" target="_self">React Diagrams</a> <a href="#JavaScFlowcharttopic-8" target="_self">Flowchart React</a> <a href="#JavaScFlowcharttopic-9" target="_self">React Flow Chart</a> <a href="#JavaScFlowcharttopic-10" target="_self">REAFLOW</a> <a href="#JavaScFlowcharttopic-11" target="_self">React Flow Chart Editor</a> <a href="#JavaScFlowcharttopic-12" target="_self">React Flowchart Builder</a> <a href="#JavaScFlowcharttopic-13" target="_self">X-Flowchart-Vue</a> </div></center>
<pre>
流程，在人类社会运作中无处不在，我们每天的上班的工作、银行的交易、做菜的过程、穿衣服的过程，万事万物都有一定的运作流程，甚至人类的生老病死都是个流程。
软件的执行过程更是个流程，虽然在许多软件中存在依据规则的执行方法，也存在根据环境、数据等外部信息触发的事件，但是从软件全局来看，仍然是遵循着一定的业务流程，这些规则或者触发器是整体流程中功能点。
在软件开发中流程化设计有许多应用场景，例如：低代码无代码开发、办公自动化任务编排、自动审核审批、流程化的AI Agent（类似Dify、Coze）等等。
一些比较流行的开源流程图组件，如：flowchart.js、xyflow、GoJS、Dgrm.net等，这些组件可以以可视化的方式将流程设计器集成到Web应用中，能够大大提高系统的可用性、易用性，并且更加直观以及用户友好。
<h3 id="JavaScFlowcharttopic-0">flowchart.js</h3>
https://github.com/adrai/flowchart.js
<img src="https://mmbiz.qpic.cn/mmbiz_svg/HhRfwkaJkMs8vaAicUbBgVhlazTMDZY5I7GCLZPCia2XcplokEC0KBPiaSjvmu8T8FPf3OHypFbMJmP2qX4BOsDeCnSxumTW2qq/640" loading="lazy">
flowchart.js是可以在浏览器和终端中运行的流程图DSL和SVG渲染器。
这个设计器的节点和连接是分开定义的，这样节点可以重用，连接可以快速更改。
也可以在DSL中对节点和连接样式进行更改。
<h3 id="JavaScFlowcharttopic-1">jquery.flowchart.js</h3>
https://github.com/sdrdis/jquery.flowchart
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbibO2jYtnRbMQ1SIPJFp7M8XQe6T172vF8Kuibical56c9hrzWBsicjCYtQ/640" loading="lazy">
jquery.flowchart.js是一个开源的jQueryUI流程图插件。
主要功能包括：
绘制框（称为运算符）和它们之间的连接。
提供了方法，以便最终用户可以通过添加/移动/删除操作符，创建/删除它们之间的连接来编辑流程图。
开发人员可以保存/加载流程图。
操作符和链接可以使用CSS和插件参数进行自定义。
有些方法允许您添加高级功能，例如平移缩放视图或使用拖放添加操作符。
<h3 id="JavaScFlowcharttopic-2">Flowy</h3>
https://github.com/alyssaxuu/flowy
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbaH9nZrODqpqRTib3XefBOFg1OUMlRLzkQ0cvRGAhKXjl0URLpPlrh3Q/640" loading="lazy">
Flowy是一个可以使创建具有流程图功能的WebApps成为一项非常简单的任务。
通过在项目中实现该库，在几分钟内就可以构建自动化的思维导图工具或简单的编程平台。
其主要特征包括：
响应式拖放 自动捕捉 自动滚动 块重新排列 删除块 块自动对中 有条件捕捉 条件块删除 导入保存的文件 移动的支持
Vanilla JavaScript（无依赖）
<h3 id="JavaScFlowcharttopic-3">Dgrm.net</h3>
https://github.com/AlexeyBoiko/DgrmJS
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbuImkYpibVtoDGZ0Tut3GEQu9ClZcVBwgRpDPBHK58ibvYrpvo2k416IA/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbRppvZ09bZ6Tb0ZAicaceQ0Q8ibCm5mGkGJiao6EPR95icSwFiccEcUVFM2Q/640" loading="lazy">
Dgrm.net是一个纯JS的流程图编辑器。
适用于台式机，手机和平板电脑。
没有依赖性。
<h3 id="JavaScFlowcharttopic-4">Drawflow</h3>
https://github.com/jerosoler/Drawflow
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfb2mYLYQeWuuwRK2zAtNkJPibsm5VTChib50yBgDw1bNiaKGPUOAdHtYw7Q/640" loading="lazy">
Drawflow是一个开源流程设计器，可用于轻松快速地创建数据流。
主要特征包括：
可拖动节点
多个输入/输出
多个连接
删除节点和连接
添加/删除输入/输出
重新路由连接
节点上的数据同步
放大/缩小
清除数据模块
支撑模块
编辑器模式 edit、fixed或view
支持导入/导出数据
支持事件
支持移动端
Vanilla JavaScript（无依赖）
基于NPM
支持Vue组件和Nuxt
<h3 id="JavaScFlowcharttopic-5">xyflow</h3>
https://github.com/xyflow/xyflow
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbhibaSAGKAHZ3PISkaAUz1ndJayJ0v2a2libPa9lk0kaSQIrJicNCFcfWg/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfb3hYicibc5B5ubaFy6epdgaxTEShz3fWCxBpbdHPg1WjMzjBl04DHGJjg/640" loading="lazy">
这是一个强大的开源库，可以基于React或Svelte开发流程设计UI。
这个库开箱即用并且无限定制。
这里有许多这个库开发的Demo：
https://reactflow.dev/showcase
<h3 id="JavaScFlowcharttopic-6">GoJS</h3>
https://github.com/NorthwoodsSoftware/GoJS
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbFGI3VzicMgPYvnDuf6ricoPP5eC2kY1KicsDwO9fZhwRl1nD276oaCwmA/640" loading="lazy">
GoJS是一个可用于创建许多不同类型的交互式图表，非常灵活，支持数据可视化、绘图工具和图形编辑器等功能。
支持的图形包括：流程图、组织结构图、业务流程BPMN、泳道、时间线、状态图、看板、网络、思维导图、sankey、家谱和基因图、鱼骨图、平面图、UML、决策树、PERT图表、甘特等数百个。
GoJS包括许多内置的布局，包括：树布局、热力图、圆形和分层有向图布局，也支持自定义布局。
GoJS以Canvas元素呈现在HTML 上（导出为SVG或图像格式）或直接作为SVG DOM。
GoJS可以在Web浏览器中运行，也可以在Node或Puppeteer中运行。
GoJS图由模型支持，通常通过JSON格式的文本保存和加载。
在下面URL里可以看到GoJS 各种各样的Demo：
https://gojs.net/latest/samples/index.html
<h3 id="JavaScFlowcharttopic-7">React Diagrams</h3>
https://github.com/projectstorm/react-diagrams
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbzp7qPovuWsM5y1nk53FvqibjbAop2VWUc2L1UyibicmwRye8ZAviatY5wg/640" loading="lazy">
React Diagrams是一个用React写的非常精简的工作流图形库。
<h3 id="JavaScFlowcharttopic-8">Flowchart React</h3>
https://github.com/joyceworks/flowchart-react
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbuiantXacPRHyCAe8J8yo5mWQYnXiasCib28ibu1gYhvWp61PSRx3bLXxsw/640" loading="lazy">
这是一个适用于React.js的免费开源的轻量级流程图设计器。
<h3 id="JavaScFlowcharttopic-9">React Flow Chart</h3>
https://github.com/MrBlenny/react-flow-chart
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbDzwjzelnJUUM6sg6F0qmaiaDKO8tLWor8borbUKGeJuWK2FicjUIDNHQ/640" loading="lazy">
React Flow Chart是一个免费开源的、灵活的、无状态的、声明式的React流程图库。
<h3 id="JavaScFlowcharttopic-10">REAFLOW</h3>
https://github.com/reaviz/reaflow
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfb5xXX5eecYnTE3AIjk1dYIcAs4cDicVa2TKvaNHPVQdGANQ17qSBQibgw/640" loading="lazy">
REAFLOW是一个用于构建静态或交互式编辑器的模块化图表引擎。
该库功能丰富且模块化，允许显示具有完全可定制性的复杂可视化。
<h3 id="JavaScFlowcharttopic-11">React Flow Chart Editor</h3>
https://github.com/aislelabs/react-flowchart-editor
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfb8ZpJ3bLQaSQHOzVZQ3yLhyrMFAHlTBVYhvEkvMia38UxR06CywNhrwQ/640" loading="lazy">
这个开源流程图编辑器支持窗口定位、缩放和工作区平移。
简单的组件插件架构，允许轻松定制。
没有额外的包依赖。
<h3 id="JavaScFlowcharttopic-12">React Flowchart Builder</h3>
https://github.com/TaqBostan/react-flowchart-builder
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbbOff5kz7jOYjreJd9YuficaibzSDIU9aQSmYRQEfP7iaJicjYGbAPaDCkg/640" loading="lazy">
这是一个免费的轻量级流程图组件。
其特征包括：
支持不同形状的节点。
支持添加/删除/移动节点
支持添加/删除/重塑节点之间的链接
支持启用/禁用添加/编辑/删除链接
支持缩放和平移
原始或键入的输入/输出
<h3 id="JavaScFlowcharttopic-13">X-Flowchart-Vue</h3>
https://github.com/OXOYO/X-Flowchart-Vue
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/MOHJlLCIdeOjIhQ3dfE7USicDqqd8jXfbaouFkjibrv2YNkESDxsrDxwrzu3g23qtEubfZc5pfgY9VMXtLWoSP0w/640" loading="lazy">
一个基于G6和Vue的可视化图形编辑器。
<h2>Node.js File System Module</h2>
<br>
<div id="FileSystemModuletoc" class="toc"><a href="#FileSystemModuletopic-0" target="_self"><pk>Node.js as a File Server</pk></a><br><a href="#FileSystemModuletopic-1" target="_self"><pk>Read Files</pk></a><br><a href="#FileSystemModuletopic-2" target="_self"> Example Get your own Node.js Server</a><br><a href="#FileSystemModuletopic-3" target="_self"><pk>Create Files</pk></a><br><a href="#FileSystemModuletopic-4" target="_self"> Example</a><br><a href="#FileSystemModuletopic-5" target="_self"> Example</a><br><a href="#FileSystemModuletopic-6" target="_self"> Example</a><br><a href="#FileSystemModuletopic-7" target="_self"><pk>Update Files</pk></a><br><a href="#FileSystemModuletopic-8" target="_self"> Example</a><br><a href="#FileSystemModuletopic-9" target="_self"> Example</a><br><a href="#FileSystemModuletopic-10" target="_self"><pk>Delete Files</pk></a><br><a href="#FileSystemModuletopic-11" target="_self"> Example</a><br><a href="#FileSystemModuletopic-12" target="_self"><pk>Rename Files</pk></a><br><a href="#FileSystemModuletopic-13" target="_self"> Example</a><br><a href="#FileSystemModuletopic-14" target="_self"><pk>Upload Files</pk></a><br></div></center>
<h3 id="FileSystemModuletopic-0"><pk>Node.js as a File Server</pk></h3>
The Node.js file system module allows you to work with the file system on your computer.
To include the File System module, use the require() method:
var fs = require('fs'); 
Common use for the File System module:
Read files
Create files
Update files
Delete files
Rename files
<h3 id="FileSystemModuletopic-1"><pk>Read Files</pk></h3>
The fs.readFile() method is used to read files on your computer.
Assume we have the following HTML file (located in the same folder as Node.js):
demofile1.html
&lt;html>
&lt;body>
&lt;h1>My Header&lt;/h1>
&lt;p>My paragraph.&lt;/p>
&lt;/body>
&lt;/html> 
Create a Node.js file that reads the HTML file, 
and return the content:
<h3 id="FileSystemModuletopic-2"> Example Get your own Node.js Server</h3>
var http = require('http');
var fs = require('fs');
http.createServer(function 
(req, res) {
fs.readFile('demofile1.html', function(err, data) {
res.writeHead(200, {'Content-Type': 'text/html'});
res.write(data);
return res.end();
});
}).listen(8080); 
Save the code above in a file called "demo_readfile.js", and initiate the file:
Initiate demo_readfile.js:
C:\Users\<em>Your Name</em>>node demo_readfile.js
If you have followed the same steps on your computer, you will see the same result as the example:  http://localhost:8080
<h3 id="FileSystemModuletopic-3"><pk>Create Files</pk></h3>
The File System module has methods for creating new files:
fs.appendFile()
fs.open()
fs.writeFile()
The fs.appendFile() method appends specified content to a file.
If the file does not exist, the file will be created:
<h3 id="FileSystemModuletopic-4"> Example</h3>
Create a new file using the appendFile() method:
var fs = require('fs');
fs.appendFile('mynewfile1.txt', 'Hello 
content!', function (err) {
if (err) throw err;
console.log('Saved!');
}); 
The fs.open() method takes a "flag" as the second argument, if the flag is "w" for "writing", the specified file is opened for writing.
If the file does not exist, an empty file is created:
<h3 id="FileSystemModuletopic-5"> Example</h3>
Create a new, empty file using the open() method:
var fs = require('fs');
fs.open('mynewfile2.txt', 'w', function (err, 
file) {
if (err) throw err;
console.log('Saved!');
}); 
The fs.writeFile() method replaces the specified file and content if it exists.

If the file does not exist, a new file, containing the specified content, will be created:
<h3 id="FileSystemModuletopic-6"> Example</h3>
Create a new file using the writeFile() method:
var fs = require('fs');
fs.writeFile('mynewfile3.txt', 'Hello 
content!', function (err) {
if (err) throw err;
console.log('Saved!');
}); 
<h3 id="FileSystemModuletopic-7"><pk>Update Files</pk></h3>
The File System module has methods for updating files:
fs.appendFile()
fs.writeFile()
The fs.appendFile() method appends the specified content at the end of the specified file:
<h3 id="FileSystemModuletopic-8"> Example</h3>
Append "This is my text." to the end of the file "mynewfile1.txt":
var fs = require('fs');
fs.appendFile('mynewfile1.txt', ' This is my 
text.', function (err) {
if (err) throw err;
console.log('Updated!');
}); 
The fs.writeFile() method replaces the specified file and content:
<h3 id="FileSystemModuletopic-9"> Example</h3>
Replace the content of the file "mynewfile3.txt":
var fs = require('fs');
fs.writeFile('mynewfile3.txt', 'This is my text', function (err) {
if (err) throw err;
console.log('Replaced!');
}); 
<h3 id="FileSystemModuletopic-10"><pk>Delete Files</pk></h3>
To delete a file with the File System module,  use the fs.unlink() 
method.
The fs.unlink() method deletes the specified file:
<h3 id="FileSystemModuletopic-11"> Example</h3>
Delete "mynewfile2.txt":
var fs = require('fs');
fs.unlink('mynewfile2.txt', function (err) {
if (err) throw err;
console.log('File deleted!');
}); 
<h3 id="FileSystemModuletopic-12"><pk>Rename Files</pk></h3>
To rename a file with the File System module,  use the fs.rename() 
method.
The fs.rename() method renames the specified file:
<h3 id="FileSystemModuletopic-13"> Example</h3>
Rename "mynewfile1.txt" to "myrenamedfile.txt":
var fs = require('fs');
fs.rename('mynewfile1.txt', 'myrenamedfile.txt', function (err) {
if (err) throw err;
console.log('File Renamed!');
}); 
<h3 id="FileSystemModuletopic-14"><pk>Upload Files</pk></h3>
You can also use Node.js to upload files to your computer.
<h2>get commands and perform your action in the callback</h2>
import os from "os";
setInterval(function () {
console.log("Process running");
}, 3000);
process.stdin.setEncoding("utf8");
process.stdin.on("readable", function () {
const chunk = process.stdin.read() as string;
chunk
.split(os.EOL)
.forEach(str => {
if (str === null || !str.length) {
return;
}
console.log("data: " + str);
});
});
<h2>Node.js formatted console output</h2>
Examples from the mdn page:
'abc'.padStart(10);         // "       abc"
'abc'.padStart(10, "foo");  // "foofoofabc"
'abc'.padStart(6,"123465"); // "123abc"
'abc'.padStart(8, "0");     // "00000abc"
'abc'.padStart(1);          // "abc" 
'abc'.padEnd(10);          // "abc       "
'abc'.padEnd(10, "foo");   // "abcfoofoof"
'abc'.padEnd(6, "123456"); // "abc123"
'abc'.padEnd(1);           // "abc"
For indenting a json onto the console try using JSON.stringify.
The third parameter provides the indention required.
JSON.stringify({ a:1, b:2, c:3 }, null, 4);
// {
//    "a": 1,
//    "b": 2,
//    "c": 3
// }

<h2>The debugger Keyword</h2>
The debugger keyword stops the execution of JavaScript, and calls (if available) the debugging function.
This has the same function as setting a breakpoint in the debugger.
If no debugging is available, the debugger statement has no effect.
With the debugger turned on, this code will stop executing before it executes the third line.
Example
let x = 15 * 5;
debugger;
document.getElementById("demo").innerHTML = x;

<h2>Javascript脚本延迟加载的方式</h2>
<br>
<br>
<div id="delayLoadtoc" class="toc"><a href="#delayLoadtopic-0" target="_self">defer属性 </a><br><a href="#delayLoadtopic-1" target="_self">async属性</a><br><a href="#delayLoadtopic-2" target="_self">动态创建DOM方式 (使用的最多) </a><br><a href="#delayLoadtopic-3" target="_self">使用Jquery的getScript()方法 </a><br><a href="#delayLoadtopic-4" target="_self">使用setTimeout延迟方法的加载时间 </a><br><a href="#delayLoadtopic-5" target="_self">让js最后加载 </a><br><a href="#delayLoadtopic-6" target="_self">实战- 图片懒加载</a><br></div></center>
js的延迟加载方法
(js的延迟加载有助于提高页面的加载速度)
程序性能是项目完成后需要长期做的一件事情，让用户的体验更好，性能优化的核心思想就是快，可以预先准备数据（如缓存的使用），可以按需获取，可以分段获取等都是常见的优化手段。
<h3 id="delayLoadtopic-0">defer属性 </h3>
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
  &lt;script src="test1.js" defer="defer">&lt;/script>
  &lt;script src="test2.js" defer="defer">&lt;/script>
&lt;/head>
&lt;body>
&lt;!-- 这里放内容 -->
&lt;/body>
&lt;/html>
用途: 让脚本在执行时不会影响页面的构造。
也就是说，脚本会被延迟到整个页面都解析完毕之后再执行<pk>说明：</pk>虽然&lt;script>元素放在了&lt;head>元素中，但包含的脚本将延迟浏览器遇到&lt;/html>标签后再执行。
当浏览器解析到 script 脚本，有 defer 时,浏览器会并行下载有 defer 属性的 script，而不会阻塞页面后续处理。
所有的 defer 脚本保证是按顺序依次执行的。
(但实际上延迟脚本并不一定会按照顺序执行，因此最好只包含一个延迟脚本)
defer 属性只适用于外部脚本文件。

<h3 id="delayLoadtopic-1">async属性</h3>
用途: 不让页面等待脚本下载和执行，从而异步加载页面其他内容。
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
  &lt;script src="test1.js" async>&lt;/script>
  &lt;script src="test2.js" async>&lt;/script>
&lt;/head>
&lt;body>
&lt;!-- 这里放内容 -->
&lt;/body>
&lt;/html>
async属性是HTML5新增的。
作用和defer类似，但是它将在下载后尽快执行，不能保证脚本会按顺序执行。
它们将在onload 事件之前完成。
Firefox3.6、Opera 10.5、IE 9和 最新的Chrome 和 Safari 都支持 async 属性。
可以同时使用 async 和 defer，这样IE 4之后的所有IE 都支持异步加载。
浏览器会立即下载脚本，但不妨碍页面中的其他操作，比如下载其他资源或等待加载其他脚本。
加载和渲染后续文档元素的过程和 main.js 的加载与执行并行进行，这个过程是异步的。
它们将在 onload 事件之前完成。
<pk>说明：</pk>浏览器会立即下载脚本，但不妨碍页面中的其他操作，加载和渲染后续文档元素的过程和脚本的加载与执行并行进行。
这个过程是异步的，它们将在 onload 事件之前完成。
所有的 defer 脚本不能控制加载的顺序。
。
asyncr 属性只适用于外部脚本文件。
<h3 id="delayLoadtopic-2">动态创建DOM方式 (使用的最多) </h3>
&lt;script type="text/javascript">
  function downloadJSAtOnload() {
   var element = document.createElement("script");
   element.src = "defer.js";
   document.body.appendChild(element);
  }
  if (window.addEventListener) //添加监听事件
   window.addEventListener("load",downloadJSAtOnload, false); //事件在冒泡阶段执行
  else if (window.attachEvent)
   window.attachEvent("onload",downloadJSAtOnload);
  else 
   window.onload = downloadJSAtOnload;
&lt;/script>
PS：这里插一句addEventListener() 也是常考的知识点之一：addEventListener() 方法用于向指定元素添加事件句柄。
使用 removeEventListener() 方法来移除 addEventListener() 方法添加的事件句柄。
语法：
element.addEventListener(event, function, useCapture)
event （必须）字符串，指定事件名。
注意: 不要使用 “on” 前缀。
例如，使用 “click” ,而不是使用 “onclick”。
function （必须）指定要事件触发时执行的函数。
当事件对象会作为第一个参数传入函数。
事件对象的类型取决于特定的事件。
例如， “click” 事件属于 MouseEvent(鼠标事件) 对象。
useCapture （可选）布尔值，指定事件是否在捕获或冒泡阶段执行。
【true：事件句柄在捕获阶段执行；false：默认，事件句柄在冒泡阶段执行】
&lt;p>该实例使用 addEventListener() 方法来向按钮添加点击事件。
&lt;/p> 
&lt;button>点我&lt;/button> 
&lt;p>&lt;/p> 
&lt;script>
document.getElementById("myBtn").addEventListener("click", function(){
  document.getElementById("demo").innerHTML = "Hello World";
});
&lt;/script>
效果如图：<img src="https://mmbiz.qpic.cn/mmbiz_png/NUicpg707m8rDeVuqp3ZZGiahNEpnPpSrMuOQjA5sicGyAz11cbGFic6ib5P4o2NTLd2aL0FeDIwytS9ziaibWX4eTbXg/640" loading="lazy">
<h3 id="delayLoadtopic-3">使用Jquery的getScript()方法 </h3>
$.getScript("outer.js",function(){//回调函数，成功获取文件后执行的函数
   console.log("脚本加载完成")
});
url（必写）：将要请求的 URL 字符串
success(response,status)（可选）：规定请求成功后执行的回调函数。
其中的参数
response - 包含来自请求的结果数据
status - 包含请求的状态（"success", "notmodified", "error", "timeout" 或 "parsererror"）
用途: 通过 HTTP GET 请求载入并执行 JavaScript 文件。
//加载并执行 test.js：
$.getScript("test.js");
//加载并执行 test.js ，成功后显示信息
$.getScript("test.js", function(){
 alert("Script loaded and executed.");
});
<h3 id="delayLoadtopic-4">使用setTimeout延迟方法的加载时间 </h3>
延迟加载js代码，给网页加载留出时间
&lt;script type="text/javascript">
  function A(){
    $.post("/lord/login",{name:username,pwd:password},function(){
      alert("Hello World!");
    })
  }
  $(function (){
    setTimeout("A()",1000); //延迟1秒
  })
&lt;/script>
<h3 id="delayLoadtopic-5">让js最后加载 </h3>
例如引入外部js脚本文件时，如果放入html的head中,则页面加载前该js脚本就会被加载入页面，而放入body中，则会按照页面从上倒下的加载顺序来运行javascript的代码，从而阻止浏览器后续操作~~~ 所以我们可以把js外部引入的文件放到页面底部，来让js最后引入，从而加快页面加载速度。
上述方法5,6也会偶尔让你收到Google页面速度测试工具的“延迟加载javascript”警告。
所以这里的解决方案将是来自Google帮助页面的推荐方案。
<pk>浏览器渲染的原理</pk>(1)浏览器向服务器请求到了HTML文档，然后开始解析，生成DOM（文档对象模型），到这里为止，HTML文档被加载、解析完成，如果有css则生成CSSOM（css对象模型），然后DOM和CSSOM生成渲染树，有了渲染树就知道了所有节点的样式，然后根据节点和样式计算它们在浏览器的大小和位置，然后就是绘制到浏览器(2)其中存在一个问题：JavaScript可以阻塞DOM的生成··如果在HTML中插入一个脚本，浏览器是默认先执行脚本再继续往下解析HTML，而JavaScript是可以查询任意对象的样式，所以需要CSSOM生成才可以执行JavaScript。
··其中存在同步脚本和异步脚本的区别：·同步脚本：停止解析，先执行脚本再继续往下解析·异步脚本：H5中&lt;script>定义了defer 和 async 属性
//这些代码应被放置在&lt;/body>标签前(接近HTML文件底部) &lt;script type="text/javascript">
  function downloadJSAtOnload() {
    var element = document.createElement("script");
    element.src = "defer.js";
    document.body.appendChild(element);
  }
  if (window.addEventListener)
    window.addEventListener("load", downloadJSAtOnload, false);
  else if (window.attachEvent)
    window.attachEvent("onload", downloadJSAtOnload);
  else window.onload = downloadJSAtOnload;
&lt;/script>
这段代码意思是等到整个文档加载完后，再加载外部文件“defer.js”。
使用此段代码的步骤：复制上面代码
粘贴代码到HTML的标签前 (靠近HTML文件底部)
修改“defer.js”为你的外部JS文件名
确保你文件路径是正确的。
例如：如果你仅输入“defer.js”，那么“defer.js”文件一定与HTML文件在同一文件夹下。
<pk>注意：</pk>这段代码直到文档加载完才会加载指定的外部js文件。
因此，不应该把那些页面正常加载需要依赖的javascript代码放在这里。
而应该将JavaScript代码分成两组。
一组是因页面需要而立即加载的javascript代码，另外一组是在页面加载后进行操作的javascript代码(例如添加click事件或其他东西)。
这些需等到页面加载后再执行的JavaScript代码，应放在一个外部文件，然后再引进来。

<h3 id="delayLoadtopic-6">实战- 图片懒加载</h3>
<pk>原理： </pk>一张图片就是一个&lt;img>标签，浏览器是否发起请求图片是根据&lt;img>的 src 属性，所以实现懒加载的关键就是，在图片没有进入可视区域时，先不给&lt;img>的 src 赋值，这样浏览器就不会发送请求了，等到图片进入可视区域再给 src 赋值。
&lt;img class="lazy" src="img/loading.gif" lazy-src="img/pic1.jpg" >
&lt;img class="lazy" src="img/loading.gif" lazy-src="img/pic2.jpg" >
function lazyload(){
 var visible;
 $('img').each(function () {
 if( typeof($(this).attr("lazy-src"))!="undefined" ){ // 判断图片是否需要懒加载
  visible = $(this).offset().top - $(window).scrollTop(); //图片距离顶部的距离
  if ((visible > 0) &amp;&amp; (visible &lt; $(window).height())) {// 判断图片是否在可视区域
    visible = true;// 图片在可视区域
  } else {
    visible = false;// 图片不在可视区域
  }
  if (visible) {
    $(this).attr('src', $(this).attr('lazy-src'));
  }
 }
 });
}
 // 打开页面触发函数
 lazyload();
 // 滚屏时触发函数
 window.onscroll =function(){
 lazyload(imgs);
 }

<h2>JavaScript 获取单选按钮组的值</h2>
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/KEXUm19zKo5THYicCl8cWmjKmvkGdrXZ8S5rgN74d87bmgHz7f5Ds2hSFggMibTDaicHxjDBcjYYffDCA3T8ZKACw/640" loading="lazy">

比如注册时选择性别、问卷调查时选择答案等。

使用一组单选按钮来表示性别选项。

&lt;div>
  &lt;input type="radio" id="genderm" name="gender" value="male" />
  &lt;label for="genderm">男&lt;/label>
  &lt;input type="radio" id="genderf" name="gender" value="female" checked />
  &lt;label for="genderf">女&lt;/label>
&lt;/div>

默认情况下，选中了“女”。

可以使用document.querySelector方法来获取被选中的单选按钮，然后通过它的value属性来获取对应的值。

const selectedGender = document.querySelector('input[name="gender"]:checked').value;
console.log(selectedGender); // 输出: "female"

解释：
document.querySelector('input[name="gender"]:checked')：这段代码会返回被选中的name属性为“gender”的单选按钮元素。

.value：通过value属性获取该单选按钮的值。

所以，当我们运行这段代码时，selectedGender的值会是“female”，因为默认情况下“女”按钮是选中的。

<h2>autofit.js 大屏自适应</h2>

autofit.js 是一个可以让你的PC项目自适应屏幕的工具，其原理非常简单，即在scale等比缩放的基础上，向右或向下增加了宽度或高度，以达到充满全屏的效果，使用autofit.js不会挤压、拉伸元素，它只是单纯的设置了容器的宽高。

<h3>示例效果图</h3>
<img src="https://mmbiz.qpic.cn/mmbiz_png/Nqk3Awx2dsh3WFc0El9dXew0p3dumKyKicIoapDU9yKtTdSQnhHYoyGhypO40UjjLBnkVwcn3ZWvobod2XT9M1g/640" loading="lazy">

示例1
<img src="https://mmbiz.qpic.cn/mmbiz_png/Nqk3Awx2dsh3WFc0El9dXew0p3dumKyKYsuo0sWQSrJKkUSn8V2Gt4QeaxNRzPhHUnLPvUpZCYmkzVQxFQffxA/640" loading="lazy">

<h3>引入</h3>
示例2
import autofit from'autofit.js'
// 快速开始
autofit.init()
// 使用
exportdefault{
mounted(){
    autofit.init({
designHeight:1080,
designWidth:1920,
renderDom:"#app",
resize:true
},false)// 可关闭控制台运行提示输出
},
}
<blockquote>以上使用的是默认参数，可根据实际情况调整，参数分别为• renderDom（可选）：渲染的dom，默认是 "#app"，必须使用id选择器
• designWidth（可选）：设计稿的宽度，默认是 1920
• designHeight（可选）：设计稿的高度，默认是 929 ，如果项目以全屏展示，则可以设置为1080
• resize（可选）：是否监听resize事件，默认是 true
</blockquote>
<h3>忽略某些元素</h3>
autofit.init({
ignore:[
{
dom:".gaodeMap",
},
]
})
// 传入 ignore 以使元素不被缩放
// 更个性化的设置：
autofit.init({
ignore:[
{
dom:".gaodeMap",//必填
height:300,//可选，写数字即可（px）
width:300,//可选，写数字即可（px）
scale:1.2,//可选：回放程度，基于主元素缩放后的大小
fontSize:26//可选，如果自定义缩放后文字大小不合适，可以在这里设置文字大小
},
{
//...
}
]
})

<h3>原生项目或jquery项目引入方式</h3>
将准备好的包放在项目中，常规引入方式 &lt;script src="assets/autofit/autofit.js">&lt;/script> 需要修改autoofit.js文件，将//export { elRectification };
//export default autofit;注释掉，不然报错，当然如果你项目支持import方式可以不用注释掉；
在你的项目js中使用autofit.init()

<h2>鼠标移动高亮边框效果</h2>

<div id="mouseEffecttoc" class="toc"><a href="#mouseEffecttopic-0" target="_self">一、过程分析</a><br><a href="#mouseEffecttopic-1" target="_self">二、完整代码</a><br></div></center>

<h3 id="mouseEffecttopic-0">一、过程分析</h3>
效果：
<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/gehCsfcwMobjlGtYP046Xj4vyrLd6cCmDGpGxB2x41ianCMDoHxQ6IZGVtLicL4kZJLIrQGPUAb7kJTWpcDnngTw/640" loading="lazy">

在Windows系统里有一个很棒的细节效果，元素的渐变高亮边框是可以感知鼠标的，边框的高亮部分会跟随鼠标的移动而移动。
这种效果也是比较常见的，但是实现起来还是需要一点时间和思路的。
首先，我们先完成基础的布局。

代码如下：
&lt;div class="container">
    &lt;div class="card">
        &lt;div class="inner">
            &lt;p>黄鹤楼送孟浩然之广陵&lt;/p>
            &lt;p>唐 · 李白&lt;/p>
            &lt;p>故人西辞黄鹤楼，烟花三月下扬州。

&lt;/p>
            &lt;p>孤帆远影碧空尽，唯见长江天际流。

&lt;/p>
        &lt;/div>
    &lt;/div>
    &lt;div class="card">
        &lt;div class="inner">
            &lt;p>送元二使安西&lt;/p>
            &lt;p>唐 · 王维&lt;/p>
            &lt;p>渭城朝雨浥轻尘，客舍青青柳色新。

&lt;/p>
            &lt;p>劝君更尽一杯酒，西出阳关无故人。

&lt;/p>
        &lt;/div>
    &lt;/div>
    &lt;div class="card">
        &lt;div class="inner">
            &lt;p>春日&lt;/p>
            &lt;p>宋 · 朱熹&lt;/p>
            &lt;p>胜日寻芳泗水滨，无边光景一时新。

&lt;/p>
            &lt;p>等闲识得东风面，万紫千红总是春。

&lt;/p>
        &lt;/div>
    &lt;/div>
    &lt;div class="card">
        &lt;div class="inner">
            &lt;p>小池&lt;/p>
            &lt;p>唐 · 杨万里&lt;/p>
            &lt;p>泉眼无声惜细流，树阴照水爱晴柔。

&lt;/p>
            &lt;p>小荷才露尖尖角，早有蜻蜓立上头。

&lt;/p>
        &lt;/div>
    &lt;/div>
    &lt;div class="card">
        &lt;div class="inner">
            &lt;p>村居&lt;/p>
            &lt;p>清 · 高鼎&lt;/p>
            &lt;p>草长莺飞二月天，拂堤杨柳醉春烟。

&lt;/p>
            &lt;p>儿童散学归来早，忙趁东风放纸鸢。

&lt;/p>
        &lt;/div>
    &lt;/div>
    &lt;div class="card">
        &lt;div class="inner">
            &lt;p>晓出净慈寺送林子方&lt;/p>
            &lt;p>唐 · 杨万里&lt;/p>
            &lt;p>毕竟西湖六月中，风光不与四时同。

&lt;/p>
            &lt;p>接天莲叶无穷碧，映日荷花别样红。

&lt;/p>
        &lt;/div>
    &lt;/div>
&lt;/div>
body {
    background-color: black;
}
p {
    margin: 0;
    line-height: 2;
}
.container {
    display: grid;
    width: 100%;
    margin-top: 2rem;
    color: #f0f0f0;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    text-align: center;
}
.card {
    aspect-ratio: 4/2;
    border-radius: 8px;
    background-color: rgba(255, 255, 255, 0.2);
}
.inner {
    background: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
接下来给 .card 加上相对定位position: relative属性，给 .inner 加上绝对定位position: absolute属性，让card盒子和inner盒子完全重叠在一起。
.card {
    aspect-ratio: 4/2;
    border-radius: 8px;
    background-color: rgba(255, 255, 255, 0.2);
    position: relative;
}
.inner {
    position: absolute;
    inset: 10px;
    background: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
为了方便观察，给 .inner 设置 inset: 10px 属性，此属性相当于 left: 10px;top: 10px;right: 10px; bottom: 10px;。
效果如下：
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMobjlGtYP046Xj4vyrLd6cCm5HbicKibuxxIicsHOoPLVD3FNZz7TzK8lz2CFfNia4tgzoRpkLDfMwnN6A/640" loading="lazy">

想要实现高亮的效果，我们还需要在 .card 和 .inner 之间再插入一层，这一层是我们实现高亮的关键！这三层盒子一样大小。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMobjlGtYP046Xj4vyrLd6cCmWSqzsZs5EicN6nlcwQX3F1iaictRLy1lUa7Sahg8WQFrib3UCLicbCdmVOA/640" loading="lazy">

.card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(closest-side circle, #fff, transparent);
}
.inner {
    position: absolute;
    inset: 10px;
    /* background: #222; */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
为了便于观察，先把.inner的背景色去掉。

效果如下：
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMobjlGtYP046Xj4vyrLd6cCmx1EUszzduLRr40XmfPzy7FtrIPoVGdIDE4Bb7JITqLdxUvy6biayc9A/640" loading="lazy">

看到这里有的人可能已经知道这个中间层用来干什么的了。

没错，这不就是一个渐变高亮的效果嘛！我们再在 .card::before 加上一个 transform属性，同时在 .card 上加上 overflow: hidden属性，观察浏览器，神奇的效果出现了！我悟了！
.card {
    aspect-ratio: 4/2;
    border-radius: 8px;
    background-color: rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
}
.card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(closest-side circle, #fff, transparent);
    transform: translate(70px, 80px);
}
.inner {
    position: absolute;
    inset: 10px;
    background: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
效果如下：
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMobjlGtYP046Xj4vyrLd6cCmLxSG5hMsiakPsP5KFalErwBDqbjJjLDN5NqMqvp3GStBibJEkY8CM2aw/640" loading="lazy">

原来如此，一个渐变高亮的边框效果不就实现了嘛！
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/gehCsfcwMobjlGtYP046Xj4vyrLd6cCmNvvcG1co2RBCaXicKYcH4gOt4cdARXWmUTlJAcX6oZUzvbGcibgfbicow/640" loading="lazy">

接下来就是用js代码实现 .card::before 中间层跟随鼠标移动即可。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoYiaFJYbiaqWiakt8l4rtdib0ibLfoXR3JSR9uS02wclNlFThUvnGgMJKFZFuaQYhHzIzLcMPWB7Eorujg/640" loading="lazy">

假如图中的小圆圈为鼠标位置，当鼠标移动到此位置时，只需要计算把每张卡片中间层的中心偏移到鼠标的位置即可。

那怎么去计算呢？
首先，获取到每张卡片的元素，监听鼠标移动onmousemove事件，鼠标移动时循环遍历每个卡片元素给每个卡片设置transform: translate(x, y)即可。
x(偏移的水平距离) = 鼠标离视口的水平距离 - 元素离视口的水平距离 - 元素宽度的一半。
y(偏移的垂直距离) = 鼠标离视口的垂直距离 - 元素离视口的垂直距离 - 元素高度的一半。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoYiaFJYbiaqWiakt8l4rtdib0ibLDOL0RGWAMLTgrRahicTyNibaCPARJSluxJibjZhRzVAUibdBZgxiciaiaJe4A/0" loading="lazy">

代码如下：
const container = document.querySelector('.container');
const cards = document.querySelectorAll('.card');
container.onmousemove = e => {
    for(const card of cards) {
        const rect = card.getBoundingClientRect();
        const x = e.clientX - rect.left - rect.width / 2;
        const y = e.clientY - rect.top - rect.height / 2;
        card.style.setProperty('--x', `${x}px`);
        card.style.setProperty('--y', `${y}px`);
    }
}
<h3 id="mouseEffecttopic-1">二、完整代码</h3>
&lt;!DOCTYPE html>
&lt;html>
 &lt;head>
  &lt;meta charset="utf-8">
  &lt;title>b.html&lt;/title>
  &lt;style type="text/css">
   body {
    background-color: black;
   }
   p {
    margin: 0;
    line-height: 2;
   }
   .container {
    display: grid;
    width: 90%;
    margin: 2rem auto 0;
    color: #f0f0f0;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    text-align: center;
   }
   .card {
    aspect-ratio: 4/2;
    border-radius: 8px;
    background-color: rgba(255, 255, 255, 0.2);
    position: relative;
    overflow: hidden;
   }
   .card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: radial-gradient(closest-side circle, #fff, transparent);
    /* 偏移到看不到的地方 */
    transform: translate(var(--x, -10000px), var(--y, -10000px));
   }
   .inner {
    position: absolute;
    inset: 10px;
    background: #222;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
   }
  &lt;/style>
 &lt;/head>
 &lt;body>
  &lt;div class="container">
   &lt;div class="card">
    &lt;div class="inner">
     &lt;p>黄鹤楼送孟浩然之广陵&lt;/p>
     &lt;p>唐 · 李白&lt;/p>
     &lt;p>故人西辞黄鹤楼，烟花三月下扬州。

&lt;/p>
     &lt;p>孤帆远影碧空尽，唯见长江天际流。

&lt;/p>
    &lt;/div>
   &lt;/div>
   &lt;div class="card">
    &lt;div class="inner">
     &lt;p>送元二使安西&lt;/p>
     &lt;p>唐 · 王维&lt;/p>
     &lt;p>渭城朝雨浥轻尘，客舍青青柳色新。

&lt;/p>
     &lt;p>劝君更尽一杯酒，西出阳关无故人。

&lt;/p>
    &lt;/div>
   &lt;/div>
   &lt;div class="card">
    &lt;div class="inner">
     &lt;p>春日&lt;/p>
     &lt;p>宋 · 朱熹&lt;/p>
     &lt;p>胜日寻芳泗水滨，无边光景一时新。

&lt;/p>
     &lt;p>等闲识得东风面，万紫千红总是春。

&lt;/p>
    &lt;/div>
   &lt;/div>
   &lt;div class="card">
    &lt;div class="inner">
     &lt;p>小池&lt;/p>
     &lt;p>唐 · 杨万里&lt;/p>
     &lt;p>泉眼无声惜细流，树阴照水爱晴柔。

&lt;/p>
     &lt;p>小荷才露尖尖角，早有蜻蜓立上头。

&lt;/p>
    &lt;/div>
   &lt;/div>
   &lt;div class="card">
    &lt;div class="inner">
     &lt;p>村居&lt;/p>
     &lt;p>清 · 高鼎&lt;/p>
     &lt;p>草长莺飞二月天，拂堤杨柳醉春烟。

&lt;/p>
     &lt;p>儿童散学归来早，忙趁东风放纸鸢。

&lt;/p>
    &lt;/div>
   &lt;/div>
   &lt;div class="card">
    &lt;div class="inner">
     &lt;p>晓出净慈寺送林子方&lt;/p>
     &lt;p>唐 · 杨万里&lt;/p>
     &lt;p>毕竟西湖六月中，风光不与四时同。

&lt;/p>
     &lt;p>接天莲叶无穷碧，映日荷花别样红。

&lt;/p>
    &lt;/div>
   &lt;/div>
  &lt;/div>
 &lt;/body>
 &lt;script type="text/javascript">
  const container = document.querySelector('.container');
  const cards = document.querySelectorAll('.card');
  
  container.onmousemove = e => {
   for(const card of cards) {
    const rect = card.getBoundingClientRect();
    const x = e.clientX - rect.left - rect.width / 2;
    const y = e.clientY - rect.top - rect.height / 2;
    card.style.setProperty('--x', `${x}px`);
    card.style.setProperty('--y', `${y}px`);
   }
  }
 &lt;/script>
&lt;/html>

<h2>自定义实用JavaScript 函数</h2>

<div id="defineCustomFunctiontoc" class="toc"><a href="#defineCustomFunctiontopic-0" target="_self">练习一：折扣计算器</a><br><a href="#defineCustomFunctiontopic-1" target="_self"> 场景描述</a><br><a href="#defineCustomFunctiontopic-2" target="_self"> 练习代码</a><br><a href="#defineCustomFunctiontopic-3" target="_self"> 详细说明</a><br><a href="#defineCustomFunctiontopic-4" target="_self"> 实际应用</a><br><a href="#defineCustomFunctiontopic-5" target="_self"> 代码分析</a><br><a href="#defineCustomFunctiontopic-6" target="_self"> 函数调用和结果</a><br><a href="#defineCustomFunctiontopic-7" target="_self">练习二：年龄验证</a><br><a href="#defineCustomFunctiontopic-8" target="_self"> 场景描述</a><br><a href="#defineCustomFunctiontopic-9" target="_self"> 练习代码</a><br><a href="#defineCustomFunctiontopic-10" target="_self"> 详细说明</a><br><a href="#defineCustomFunctiontopic-11" target="_self"> 实际应用</a><br><a href="#defineCustomFunctiontopic-12" target="_self"> 代码分析</a><br><a href="#defineCustomFunctiontopic-13" target="_self"> 函数调用和结果</a><br><a href="#defineCustomFunctiontopic-14" target="_self">练习三：温度转换器</a><br><a href="#defineCustomFunctiontopic-15" target="_self"> 场景描述</a><br><a href="#defineCustomFunctiontopic-16" target="_self"> 练习代码</a><br><a href="#defineCustomFunctiontopic-17" target="_self"> 详细说明</a><br><a href="#defineCustomFunctiontopic-18" target="_self"> 实际应用</a><br><a href="#defineCustomFunctiontopic-19" target="_self"> 代码分析</a><br><a href="#defineCustomFunctiontopic-20" target="_self"> 函数调用和结果</a><br><a href="#defineCustomFunctiontopic-21" target="_self">练习四：圆面积计算器</a><br><a href="#defineCustomFunctiontopic-22" target="_self"> 场景描述</a><br><a href="#defineCustomFunctiontopic-23" target="_self"> 练习代码</a><br><a href="#defineCustomFunctiontopic-24" target="_self"> 详细说明</a><br><a href="#defineCustomFunctiontopic-25" target="_self"> 实际应用</a><br><a href="#defineCustomFunctiontopic-26" target="_self"> 代码分析</a><br><a href="#defineCustomFunctiontopic-27" target="_self"> 函数调用和结果</a><br><a href="#defineCustomFunctiontopic-28" target="_self">练习五：随机消息生成器</a><br><a href="#defineCustomFunctiontopic-29" target="_self"> 场景描述</a><br><a href="#defineCustomFunctiontopic-30" target="_self"> 练习代码</a><br><a href="#defineCustomFunctiontopic-31" target="_self"> 详细说明</a><br><a href="#defineCustomFunctiontopic-32" target="_self"> 实际应用</a><br><a href="#defineCustomFunctiontopic-33" target="_self"> 代码分析</a><br><a href="#defineCustomFunctiontopic-34" target="_self"> 函数调用和结果</a><br></div></center>

<h3 id="defineCustomFunctiontopic-0">练习一：折扣计算器</h3>
<h4 id="defineCustomFunctiontopic-1"> 场景描述</h4>
在快节奏的商业世界中，快速高效地计算折扣至关重要。

想象一下，你正在管理一家在线商店，价格和折扣不断变化。

在这种情况下，自动化折扣计算不仅方便，而且必要。

这正是 JavaScript 函数大显身手的地方。

<h4 id="defineCustomFunctiontopic-2"> 练习代码</h4>
function getDiscountedPrice(originalPrice, discountRate) {
    let discount = (originalPrice * discountRate) / 100;
    return originalPrice - discount;
}
// 示例函数调用
let initialPrice = 200; // 商品的原价
let discountPercentage = 15; // 折扣百分比 (15%)
// 计算折后价格
let finalPrice = getDiscountedPrice(initialPrice, discountPercentage);
// 打印结果
console.log("原价: ¥" + initialPrice + ", 折后价: ¥" + finalPrice);

<h4 id="defineCustomFunctiontopic-3"> 详细说明</h4>
getDiscountedPrice 函数设计用于接受两个参数：商品的原价（originalPrice）和折扣百分比（discountRate）。
let discount = (originalPrice * discountRate) / 100; 计算实际的折扣金额。

例如，若商品价格为200元，折扣为15%，则折扣金额为30元。
originalPrice - discount 从原价中减去折扣金额，得到折后的最终价格。
在示例中，我们定义了两个变量，initialPrice 和 discountPercentage，分别表示商品的原价和折扣百分比。

然后调用 getDiscountedPrice 函数并传入这些值，计算出的折后价格存储在 finalPrice 变量中。

最后，我们使用 console.log 输出原价和折后价，清晰地展示了函数的计算结果。

<h4 id="defineCustomFunctiontopic-4"> 实际应用</h4>
这个函数可以有效地应用于各种场景，例如：
<pk>电子商务</pk>：在促销或活动期间更新商品价格。
<pk>库存管理应用</pk>：快速计算库存商品的折后价格。
<pk>POS（销售点）系统</pk>：在实体店结账时应用折扣。
在每种情况下，getDiscountedPrice 函数都简化了定价过程，减少了人工错误，提高了操作效率。

将此函数集成到网页应用或管理系统中，确保快速准确地计算折扣价格，从而改善客户的购物体验和商家的数据管理。

<h4 id="defineCustomFunctiontopic-5"> 代码分析</h4>
function getDiscountedPrice(originalPrice, discountRate) {
    let discount = (originalPrice * discountRate) / 100;
    return originalPrice - discount;
}
<pk>函数定义</pk>：
function getDiscountedPrice：这里定义了一个名为 getDiscountedPrice 的函数。
(originalPrice, discountRate)：函数接受两个参数——originalPrice 是商品的原价，discountRate 是折扣百分比。
<pk>返回语句</pk>：
let discount = (originalPrice * discountRate) / 100;：函数计算折扣金额，即用商品原价乘以折扣百分比再除以100，将结果存储在 discount 变量中。
return originalPrice - discount;：从原价中减去折扣金额，得到最终的折后价格。

<h4 id="defineCustomFunctiontopic-6"> 函数调用和结果</h4>
let initialPrice = 200; // 商品的原价
let discountPercentage = 15; // 折扣百分比 (15%)
let finalPrice = getDiscountedPrice(initialPrice, discountPercentage);
console.log("原价: ¥" + initialPrice + ", 折后价: ¥" + finalPrice);
<pk>设置变量</pk>：
let initialPrice = 200;：声明一个变量 initialPrice，初始化为200，表示商品的原价。
let discountPercentage = 15;：类似地，将 discountPercentage 设置为15，表示15%的折扣。
<pk>计算折后价格</pk>：
let finalPrice = getDiscountedPrice(initialPrice, discountPercentage);：调用 getDiscountedPrice 函数，传入 initialPrice 和 discountPercentage 作为参数。

计算结果，即折后价格，存储在 finalPrice 变量中。
<pk>打印结果</pk>：
console.log("原价: ¥" + initialPrice + ", 折后价: ¥" + finalPrice);：最后，我们打印出原价和折后价格，展示函数在计算折扣价格方面的有效性。

<h3 id="defineCustomFunctiontopic-7">练习二：年龄验证</h3>
<h4 id="defineCustomFunctiontopic-8"> 场景描述</h4>
年龄验证在在线零售、数字内容平台和年龄限制服务等多个领域中都是至关重要的一环。

确保用户或客户符合年龄要求不仅是法律合规问题，更是一种社会责任。

在这些情况下，使用 JavaScript 进行自动化的年龄验证系统可以提高检查的效率和准确性。

<h4 id="defineCustomFunctiontopic-9"> 练习代码</h4>
function checkAge(age) {
    return age >= 18 ? "成年" : "未成年";
}
// 示例函数调用
let userAge = 21; // 用户年龄
let result = checkAge(userAge);
// 输出结果
console.log("用户是: " + result);

<h4 id="defineCustomFunctiontopic-10"> 详细说明</h4>
checkAge 函数接受一个参数 age，表示用户的年龄。
return age >= 18 ? "成年" : "未成年"; 使用三元运算符来检查年龄是否大于或等于 18。

如果条件为真，返回 "成年"；否则返回 "未成年"。
在示例中，我们定义了一个变量 userAge，代表用户的年龄。

然后调用 checkAge 函数并传入这个值，函数的返回结果存储在 result 变量中。

最后，我们使用 console.log 输出验证结果，展示用户是否为成年人。

<h4 id="defineCustomFunctiontopic-11"> 实际应用</h4>
这个函数可以有效地应用于各种场景，例如：
<pk>在线零售和电子商务</pk>：限制购买酒类或烟草等年龄限制商品。
<pk>数字内容平台</pk>：控制访问特定评级的电影或电子游戏等年龄限制内容。
<pk>年龄限制服务</pk>：验证用户是否符合租车等服务的最低年龄要求。
在这些应用中，checkAge 函数可以集成到用户注册或结账流程中，自动判断用户是否符合年龄要求。

此自动化过程不仅简化了操作，还帮助遵守法律法规和道德标准。

<h4 id="defineCustomFunctiontopic-12"> 代码分析</h4>
function checkAge(age) {
    return age >= 18 ? "成年" : "未成年";
}
<pk>函数定义</pk>：
function checkAge：定义了一个名为 checkAge 的新函数。
(age)：函数接受一个参数 age，表示要验证年龄的用户年龄。
<pk>返回语句</pk>：
return age >= 18 ? "成年" : "未成年";：这是函数的核心逻辑，使用三元运算符实现。

三元运算符是一种简洁的条件语句写法，它检查一个条件，并在条件为真时返回一个值，条件为假时返回另一个值。
age >= 18：此条件检查年龄是否大于或等于 18。
"成年" : "未成年"：如果条件为真（年龄大于或等于 18），函数返回 "成年"；如果条件为假（年龄小于 18），函数返回 "未成年"。

<h4 id="defineCustomFunctiontopic-13"> 函数调用和结果</h4>
let userAge = 21; // 用户年龄
let result = checkAge(userAge);
console.log("用户是: " + result);
<pk>变量初始化和函数调用</pk>：
let userAge = 21;：声明一个变量 userAge，值为 21，表示用户的年龄。
let result = checkAge(userAge);：调用 checkAge 函数，传入 userAge 作为参数。

函数返回值（"成年" 或 "未成年"）存储在 result 变量中。
<pk>输出结果</pk>：
console.log("用户是: " + result);：最后，打印出验证结果。

在本例中，由于 userAge 是 21，输出将是 "用户是: 成年"。

<h3 id="defineCustomFunctiontopic-14">练习三：温度转换器</h3>
<h4 id="defineCustomFunctiontopic-15"> 场景描述</h4>
温度转换在天气预报、烹饪等多个领域都是一个常见需求。

不同的地区和行业可能使用不同的温度计量单位，因此编写一个可以在摄氏度和华氏度之间转换温度的函数非常实用。

这个函数可以帮助标准化全球应用、科学研究和日常生活中的温度数据。

<h4 id="defineCustomFunctiontopic-16"> 练习代码</h4>
function convertCelsiusToFahrenheit(celsiusTemp) {
    return (celsiusTemp * 1.8) + 32;
}
// 示例函数调用
let currentTempInCelsius = 25; // 摄氏温度
let tempInFahrenheit = convertCelsiusToFahrenheit(currentTempInCelsius);
// 输出结果
console.log(currentTempInCelsius + "°C 等于 " + tempInFahrenheit + "°F");

<h4 id="defineCustomFunctiontopic-17"> 详细说明</h4>
convertCelsiusToFahrenheit 函数接受一个参数 celsiusTemp，表示需要转换的摄氏温度。
return (celsiusTemp * 1.8) + 32; 是转换公式。

该公式首先将摄氏温度乘以 1.8，然后加上 32，转换为华氏温度。
函数返回转换后的华氏温度。
在示例中，我们定义了一个变量 currentTempInCelsius，表示当前的摄氏温度。

然后调用 convertCelsiusToFahrenheit 函数并传入这个值，函数返回的华氏温度存储在 tempInFahrenheit 变量中。

最后，我们使用 console.log 输出结果，展示温度转换的效果。

<h4 id="defineCustomFunctiontopic-18"> 实际应用</h4>
这个函数可以有效地应用于各种场景，例如：
<pk>天气预报</pk>：在国际天气报告中转换不同国家使用的温度计量单位。
<pk>烹饪和烘焙</pk>：食谱通常使用摄氏度或华氏度，用户可以根据自己的偏好或当地标准进行转换。
<pk>科学研究</pk>：在涉及国际合作的科学研究中，温度数据可能需要转换以确保一致性和理解。
这个函数简化了温度转换的过程，使其成为在任何需要统一或标准化温度数据的场景中非常有价值的工具。

<h4 id="defineCustomFunctiontopic-19"> 代码分析</h4>
function convertCelsiusToFahrenheit(celsiusTemp) {
    return (celsiusTemp * 1.8) + 32;
}
<pk>函数定义</pk>：
function convertCelsiusToFahrenheit：定义了一个名为 convertCelsiusToFahrenheit 的新函数。
(celsiusTemp)：函数接受一个参数 celsiusTemp，表示需要转换为华氏度的摄氏温度。
<pk>返回语句和转换公式</pk>：
return (celsiusTemp * 1.8) + 32;：这是将摄氏度转换为华氏度的公式。

函数将摄氏温度乘以 1.8，然后加上 32。

<h4 id="defineCustomFunctiontopic-20"> 函数调用和结果</h4>
let currentTempInCelsius = 25; // 摄氏温度
let tempInFahrenheit = convertCelsiusToFahrenheit(currentTempInCelsius);
console.log(currentTempInCelsius + "°C 等于 " + tempInFahrenheit + "°F");
<pk>变量初始化和函数调用</pk>：
let currentTempInCelsius = 25;：声明一个变量 currentTempInCelsius，值为 25，表示摄氏温度。
let tempInFahrenheit = convertCelsiusToFahrenheit(currentTempInCelsius);：调用 convertCelsiusToFahrenheit 函数，传入 currentTempInCelsius 作为参数。

函数返回值（华氏温度）存储在 tempInFahrenheit 变量中。
<pk>输出结果</pk>：
console.log(currentTempInCelsius + "°C 等于 " + tempInFahrenheit + "°F");：最后，打印出转换结果。

在本例中，由于 currentTempInCelsius 为 25，输出将是 "25°C 等于 77°F"。

<h3 id="defineCustomFunctiontopic-21">练习四：圆面积计算器</h3>
<h4 id="defineCustomFunctiontopic-22"> 场景描述</h4>
计算圆的面积是数学、工程和设计等多个领域中的基础任务。

无论是设计一个圆形花园，计算圆桌所需的材料，还是解决几何问题，快速准确地确定圆的面积都是非常有价值的。

在这些场景中，使用 JavaScript 函数来进行此计算可以节省时间并减少错误。

<h4 id="defineCustomFunctiontopic-23"> 练习代码</h4>
function getCircleArea(radius) {
    return Math.PI * Math.pow(radius, 2);
}
// 示例函数调用
let circleRadius = 7; // 圆的半径
let area = getCircleArea(circleRadius);
// 输出结果
console.log("圆的面积是: " + area + " 平方单位");

<h4 id="defineCustomFunctiontopic-24"> 详细说明</h4>
getCircleArea 函数接受一个参数 radius，表示需要计算面积的圆的半径。
return Math.PI * Math.pow(radius, 2); 是计算面积的公式。

该公式将半径的平方乘以圆周率 π（π是数学常数，Math.PI 是 JavaScript 内置属性）。
函数返回圆的面积，单位为平方单位。
在示例中，我们定义了一个变量 circleRadius，表示圆的半径。

然后调用 getCircleArea 函数并传入这个值，函数返回的面积存储在 area 变量中。

最后，我们使用 console.log 输出结果，展示圆的面积计算效果。

<h4 id="defineCustomFunctiontopic-25"> 实际应用</h4>
这个函数可以有效地应用于各种场景，例如：
<pk>数学和教育</pk>：帮助学生和教育者解决几何问题。
<pk>工程项目</pk>：计算施工和制造中的圆形部件的尺寸。
<pk>设计和艺术</pk>：帮助艺术家和设计师确定他们作品中圆形元素的面积，例如平面设计或建筑图纸。
这个函数 getCircleArea 简化了计算圆面积的过程，使其成为专业人士和学生在各种需要计算圆面积的场景中的便捷工具。

<h4 id="defineCustomFunctiontopic-26"> 代码分析</h4>
function getCircleArea(radius) {
    return Math.PI * Math.pow(radius, 2);
}
<pk>函数定义</pk>：
function getCircleArea：定义了一个名为 getCircleArea 的新函数。
(radius)：函数接受一个参数 radius，表示需要计算面积的圆的半径。
<pk>返回语句和面积计算公式</pk>：
return Math.PI * Math.pow(radius, 2);：这是计算圆面积的公式。

函数将 Math.PI（数学常数 π）乘以半径的平方（Math.pow(radius, 2)）。

<h4 id="defineCustomFunctiontopic-27"> 函数调用和结果</h4>
let circleRadius = 7; // 圆的半径
let area = getCircleArea(circleRadius);
console.log("圆的面积是: " + area + " 平方单位");
<pk>变量初始化和函数调用</pk>：
let circleRadius = 7;：声明一个变量 circleRadius，值为 7，表示圆的半径。
let area = getCircleArea(circleRadius);：调用 getCircleArea 函数，传入 circleRadius 作为参数。

函数返回值（圆的面积）存储在 area 变量中。
<pk>输出结果</pk>：
console.log("圆的面积是: " + area + " 平方单位");：最后，打印出圆的面积计算结果。

在本例中，由于 circleRadius 为 7，输出将是 "圆的面积是: 153.93804002589985 平方单位"。

<h3 id="defineCustomFunctiontopic-28">练习五：随机消息生成器</h3>
<h4 id="defineCustomFunctiontopic-29"> 场景描述</h4>
随机消息在增强应用和网站的用户体验中起着重要作用。

它们可以用于多种用途，从显示每日的励志名言到生成随机的用户提示，增加了惊喜和个性化的元素。

在JavaScript中实现一个随机消息生成器，可以提供动态内容，让用户体验保持新鲜和吸引人。

<h4 id="defineCustomFunctiontopic-30"> 练习代码</h4>
function getRandomMessage() {
    const messages = [
        "保持专注，永不放弃！",
        "相信你自己！",
        "每天都是一个新的开始。

",
        "推动自己，因为没有人会替你努力。

",
        "你可以做到的！"
    ];
    
    // 选择一个随机消息
    let randomIndex = Math.floor(Math.random() * messages.length);
    return messages[randomIndex];
}
// 示例函数调用
let randomMessage = getRandomMessage();
// 输出结果
console.log("随机消息: " + randomMessage);

<h4 id="defineCustomFunctiontopic-31"> 详细说明</h4>
getRandomMessage 函数不接受任何参数。
函数内部定义了一个包含各种励志名言或短语的数组 messages。
Math.random() * messages.length 生成一个 0 到 messages 数组长度之间的随机小数。

 Math.floor 用于将这个小数向下取整，得到一个数组的有效索引。
函数返回在 messages 数组中随机索引位置的消息。
在示例中，我们调用了 getRandomMessage 函数，函数返回的随机消息存储在 randomMessage 变量中。

最后，我们使用 console.log 输出结果，展示随机消息。

<h4 id="defineCustomFunctiontopic-32"> 实际应用</h4>
这个函数可以有效地应用于各种场景，例如：
<pk>用户互动</pk>：网站和应用可以使用此函数在每次用户访问或刷新页面时显示不同的励志名言或提示，增强用户互动。
<pk>游戏化</pk>：在游戏应用中，随机消息可以用于给玩家提供即兴挑战或奖励。
<pk>社交媒体平台</pk>：平台可以使用该函数向用户推荐随机帖子或话题，鼓励探索和互动。
这个简单而有效的 getRandomMessage 函数，是为提供动态内容的网页或移动应用程序的宝贵工具，旨在创造更具互动性和个性化的用户体验。

<h4 id="defineCustomFunctiontopic-33"> 代码分析</h4>
function getRandomMessage() {
    const messages = [
        "保持专注，永不放弃！",
        "相信你自己！",
        "每天都是一个新的开始。

",
        "推动自己，因为没有人会替你努力。

",
        "你可以做到的！"
    ];
    
    let randomIndex = Math.floor(Math.random() * messages.length);
    return messages[randomIndex];
}
<pk>函数定义</pk>：
function getRandomMessage：定义了一个名为 getRandomMessage 的新函数。
不接受任何参数。
<pk>消息数组</pk>：
const messages = [...]：在函数内部定义了一个包含励志消息的数组 messages。
<pk>生成随机索引</pk>：
Math.random() * messages.length：Math.random() 生成一个 0 到 1 之间的随机小数。

这个值乘以 messages 数组的长度，得到一个有效的数组索引范围。
Math.floor(...)：将结果向下取整得到一个有效的数组索引。
<pk>选择并返回随机消息</pk>：
return messages[randomIndex]：函数返回 messages 数组中 randomIndex 位置的消息。

<h4 id="defineCustomFunctiontopic-34"> 函数调用和结果</h4>
let randomMessage = getRandomMessage();
console.log("随机消息: " + randomMessage);
<pk>函数调用和显示结果</pk>：
let randomMessage = getRandomMessage();：调用 getRandomMessage 函数，返回值（随机选择的消息）存储在 randomMessage 变量中。
console.log("随机消息: " + randomMessage);：最后，打印出随机选择的消息。

在本例中，输出将是 messages 数组中的一条随机消息。

<h2>prototype</h2>
<div id="prototypeSamplestoc" class="toc"><a href="#prototypeSamplestopic-0" target="_self"><pk>基础prototype</pk></a><br><a href="#prototypeSamplestopic-1" target="_self"> 全排列（力扣原题）</a><br><a href="#prototypeSamplestopic-2" target="_self"> instanceof</a><br><a href="#prototypeSamplestopic-3" target="_self"> Array.prototype.map</a><br><a href="#prototypeSamplestopic-4" target="_self"> Array.prototype.filter</a><br><a href="#prototypeSamplestopic-5" target="_self"> Array.prototype.reduce</a><br><a href="#prototypeSamplestopic-6" target="_self"> Object.create</a><br><a href="#prototypeSamplestopic-7" target="_self"> Function.prototype.call</a><br><a href="#prototypeSamplestopic-8" target="_self"> Function.prototype.bind</a><br><a href="#prototypeSamplestopic-9" target="_self"> New 关键字</a><br><a href="#prototypeSamplestopic-10" target="_self"> 浅拷贝</a><br><a href="#prototypeSamplestopic-11" target="_self"> 深拷贝</a><br><a href="#prototypeSamplestopic-12" target="_self"> <strong>寄生组合式继承</strong></a><br><a href="#prototypeSamplestopic-13" target="_self"> 发布订阅者模式</a><br><a href="#prototypeSamplestopic-14" target="_self"> 观察者模式</a><br><a href="#prototypeSamplestopic-15" target="_self"> 节流</a><br><a href="#prototypeSamplestopic-16" target="_self"> 防抖</a><br><a href="#prototypeSamplestopic-17" target="_self"> once 函数</a><br><a href="#prototypeSamplestopic-18" target="_self"> 累加函数应用</a><br><a href="#prototypeSamplestopic-19" target="_self"><pk>进阶</pk></a><br><a href="#prototypeSamplestopic-20" target="_self"> 实现 repeat 方法</a><br><a href="#prototypeSamplestopic-21" target="_self"> 实现 Promise.all/race/allSettled/any</a><br><a href="#prototypeSamplestopic-22" target="_self"> 整数千分位加逗号</a><br><a href="#prototypeSamplestopic-23" target="_self"> 洗牌函数</a><br><a href="#prototypeSamplestopic-24" target="_self"> prototypeLRU</a><br><a href="#prototypeSamplestopic-25" target="_self"><pk>更上一层楼</pk></a><br><a href="#prototypeSamplestopic-26" target="_self"> Generator</a><br><a href="#prototypeSamplestopic-27" target="_self"> async-pool</a><br></div></center>

<h3 id="prototypeSamplestopic-0"><pk>基础prototype</pk></h3>
<h4 id="prototypeSamplestopic-1"> 全排列（力扣原题）</h4>
要求以数组的形式返回字符串参数的所有排列组合。
注意：
字符串参数中的字符无重复且仅包含小写字母
返回的排列组合数组不区分顺序
const _permute = string => {
  const result = []
  const map = new Map()
  const dfs = (path) => {
    if (path.length === string.length) {
      result.push(path)
      return
    }
    for (let i = 0; i &lt; string.length; i++) {
      if (map.get(string[i])) continue
      map.set(string[i], true)
      path += string[i]
      dfs(path)
      path = path.substring(0, path.length - 1)
      map.set(string[i], false)
    }
  }
  dfs('')
  return result
}
console.log(_permute('abc')) // [ 'abc', 'acb', 'bac', 'bca', 'cab', 'cba' ]

<h4 id="prototypeSamplestopic-2"> instanceof</h4>
如果 target 为基本数据类型直接返回 false
判断 Fn.prototype 是否在 target 的隐式原型链上
const _instanceof = (target, Fn) => {
  if ((typeof target !== 'object' &amp;&amp; typeof target !== 'function') || target === null)
  return false
  
  let proto = target.__proto__
  while (true) {
    if (proto === null) return false
    if (proto === Fn.prototype) return true
    proto = proto.__proto__
  }
}
function A() {}
const a = new A()
console.log(_instanceof(a, A)) // true
console.log(_instanceof(1, A)) // false

<h4 id="prototypeSamplestopic-3"> Array.prototype.map</h4>
map 中的 exc 接受三个参数，分别是: 元素值、元素下标和原数组
map 返回的是一个新的数组，地址不一样
// 这里不能直接使用箭头函数，否则无法访问到 this
Array.prototype._map = function (exc) {
  const result = []
  this.forEach((item, index, arr) => {
    result[index] = exc(item, index, arr)
  })
  return result
}
const a = new Array(2).fill(2)
console.log(a.map((item, index, arr) => item * index + 1)) // [1,3]
console.log(a._map((item, index, arr) => item * index + 1))// [1,3]

<h4 id="prototypeSamplestopic-4"> Array.prototype.filter</h4>
filter 中的 exc 接受三个参数，与map一致，主要实现的是数组的过滤功能，会根据 exc 函数的返回值来判断是否“留下”该值。
filter 返回的是一个新的数组，地址不一致。
Array.prototype._filter = function (exc) {
  const result = []
  this.forEach((item, index, arr) => {
    if (exc(item, index, arr)) {
      result.push(item)
    }
  })
  return result
}
const b = [1, 3, 4, 5, 6, 2, 5, 1, 8, 20]
console.log(b._filter(item => item % 2 === 0)) // [ 4, 6, 2, 8, 20 ]

<h4 id="prototypeSamplestopic-5"> Array.prototype.reduce</h4>
reduce 接受两个参数，第一个为 exc 函数，第二个为初始值，如果不传默认为 0
reduce 最终会返回一个值，当然不一定是 Number 类型的，取决于你是怎么计算的，每次的计算结果都会作为下次 exc 中的第一个参数
Array.prototype._reduce = function (exc, initial = 0) {
  let result = initial
  this.forEach((item) => {
    result = exc(result, item)
  })
  return result
}
console.log(b.reduce((pre, cur) => pre + cur, 0)) // 55
console.log(b._reduce((pre, cur) => pre + cur, 0)) // 55

<h4 id="prototypeSamplestopic-6"> Object.create</h4>
MDN<sup>[1]</sup> Object.create() 方法用于创建一个新对象，使用现有的对象来作为新创建对象的原型（prototype）。
Object.prototype._create = function (proto) {
  const Fn = function () { }
  Fn.prototype = proto
  return new Fn()
}
function A() { }
const obj = Object.create(A)
const obj2 = Object._create(A)
console.log(obj.__proto__ === A) // true
console.log(obj.__proto__ === A) // true

<h4 id="prototypeSamplestopic-7"> Function.prototype.call</h4>
call() 方法使用一个指定的 this 值和单独给出的一个或多个参数来调用一个函数。
Function.prototype._call = function (ctx, ...args) {
  // 如果不为空，则需要进行对象包装
  const o = ctx == undefined ? window : Object(ctx)
  // 给 ctx 添加独一无二的属性
  const key = Symbol()
  o[key] = this
  // 执行函数，得到返回结果
  const result = o[key](...args)
  // 删除该属性
  delete o[key]
  return result
}
const obj = {
  name: '11',
  fun() {
    console.log(this.name)
  }
}
const obj2 = { name: '22' }
obj.fun() // 11
obj.fun.call(obj2) // 22
obj.fun._call(obj2) // 22

<h4 id="prototypeSamplestopic-8"> Function.prototype.bind</h4>
bind() 方法创建一个新的函数，在 bind() 被调用时，这个新函数的 this 被指定为 bind() 的第一个参数，而其余参数将作为新函数的参数，供调用时使用。
const obj = {
  name: '11',
  fun() {
    console.log(this.name)
  }
}
Function.prototype._bind = function (ctx, ...args) {
  // 获取函数体
  const _self = this
  // 用一个新函数包裹，避免立即执行
  const bindFn = (...reset) => {
    return _self.call(ctx, ...args, ...reset)
  }
  return bindFn
}
const obj2 = { name: '22' }
obj.fun() // 11
const fn = obj.fun.bind(obj2)
const fn2 = obj.fun._bind(obj2)
fn() // 22
fn2() // 22

<h4 id="prototypeSamplestopic-9"> New 关键字</h4>
new 运算符创建一个用户定义的对象类型的实例或具有构造函数的内置对象的实例。
const _new = function(constructor) {
  // 创建一个空对象
  const obj = {}
  // 原型链挂载
  obj.__proto__ = constructor.prototype;
  // 将obj 复制给构造体中的 this，并且返回结果
  const result = constructor.call(obj)
  // 如果返回对象不为一个对象则直接返回刚才创建的对象
  return typeof result === 'object' &amp;&amp; result !== null ? : result : obj
}

<h4 id="prototypeSamplestopic-10"> 浅拷贝</h4>
const _shallowClone = target => {
  // 基本数据类型直接返回
  if (typeof target === 'object' &amp;&amp; target !== null) {
    // 获取target 的构造体
    const constructor = target.constructor
    // 如果构造体为以下几种类型直接返回
    if (/^(Function|RegExp|Date|Map|Set)$/i.test(constructor.name)) return target
    // 判断是否是一个数组
    const cloneTarget = Array.isArray(target) ? [] : {}
    for (prop in target) {
      // 只拷贝其自身的属性
      if (target.hasOwnProperty(prop)) {
        cloneTarget[prop] = target[prop]
      }
    }
    return cloneTarget
  } else {
    return target
  }
}

<h4 id="prototypeSamplestopic-11"> 深拷贝</h4>
实现思路和浅拷贝一致，只不过需要注意几点
函数 正则 日期 ES6新对象 等不是直接返回其地址，而是重新创建
需要避免出现循环引用的情况
const _completeDeepClone = (target, map = new WeakMap()) => {
  // 基本数据类型，直接返回
  if (typeof target !== 'object' || target === null) return target
  // 函数 正则 日期 ES6新对象,执行构造题，返回新的对象
  const constructor = target.constructor
  if (/^(Function|RegExp|Date|Map|Set)$/i.test(constructor.name)) return new constructor(target)
  // map标记每一个出现过的属性，避免循环引用
  if (map.get(target)) return map.get(target)
  map.set(target, true)
  const cloneTarget = Array.isArray(target) ? [] : {}
  for (prop in target) {
    if (target.hasOwnProperty(prop)) {
      cloneTarget[prop] = _completeDeepClone(target[prop], map)
    }
  }
  return cloneTarget
}

<h4 id="prototypeSamplestopic-12"> <strong>寄生组合式继承</strong></h4>
一图胜千言
<img src="https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKntlVGVJwYjMwuP4ss6icD5ia5Fp3CiaRSV2rf79bMkoISz8sL76jAEopxbdfdicjKaWXrwTIGuFdhk5A/640" loading="lazy">

function Parent(name) {
  this.name = name
}
Parent.prototype.getName = function () {
  return this.name
}
function Son(name, age) {
  // 这里其实就等于 this.name = name
  Parent.call(this, name)
  this.age = age
}
Son.prototype.getAge = function () {
  return this.age
}
Son.prototype.__proto__ = Object.create(Parent.prototype)
const son1 = new Son('shao', 20)
console.log(son1.getName()) // shao
console.log(son1.getAge()) // 20

<h4 id="prototypeSamplestopic-13"> 发布订阅者模式</h4>
class EventEmitter {
  constructor() {
    // key: 事件名
    // value: callback [] 回调数组
    this.events = {}
  }
  on(name, callback) {
    if (this.events[name]) {
      this.events[name].push(callback)
    } else {
      this.events[name] = [callback]
    }
  }
  off(name, callback) {
    if (!this.message[name]) return;
    if (!callback) {
      // 如果没有callback,就删掉整个事件
      this.message[name] = undefined;
    }
    this.message[name] = this.message[name].filter((item) => item !== callback);
  }
  emit(name, ...args) {
    if (!this.events[name]) return
    this.events[name].forEach(cb => cb(...args))
  }
}

<h4 id="prototypeSamplestopic-14"> 观察者模式</h4>
class Observerd {
  constructor() {
    // 我要看看到底有多少人在观察俺
    this.observerList = []
  }
  addObserver(observer) {
    // 添加一个观察俺的人
    this.observerList.push(observer)
  }
  notify() {
    // 我要闹点动静，所有观察者都会知道这个信息，具体怎么做就是他们自己的事情了
    this.observerList.forEach(observer => observer.update())
  }
}
class Observer {
  constructor(doSome) {
    // 观察到小白鼠有动静之后，观察者做的事情
    this.doSome = doSome
  }
  update() {
    console.log(this.doSome)
  }
}
const ob1 = new Observer('我是ob1，我观察到小白鼠有反应了，太饿了，我得去吃个饭了')
const ob2 = new Observer('我是ob2，我观察到小白鼠有反应了，我要继续工作！')
const xiaoBaiShu = new Observerd()
xiaoBaiShu.addObserver(ob1)
xiaoBaiShu.addObserver(ob2)
xiaoBaiShu.notify() // .... .... 

多说一句：怎么理解发布订阅者和观察者的区别呢 ？
其实发布订阅者模式只有一个中间者，好像啥事情都需要它亲自来做。

而且仔细观察的话，发布订阅者模式会存在一个事件名和事件的对应关系，今天可以发布天气预报，只有订阅了天气预报的才会被通知，订阅了 KFC疯狂星期四闹钟事件 的不会被提醒。
<strong>而观察者模式，等被观察者发出了一点动静（执行notify），所有观察者都会被通知。

</strong>

<h4 id="prototypeSamplestopic-15"> 节流</h4>
节流函数（throttle）就是让事件处理函数（handler）在大于等于执行周期时才能执行，周期之内不执行，即事件一直被触发，那么事件将会按每小段固定时间一次的频率执行。
function throttle(fn, delay = 300) {
  // 这里始终记得字节二面的时候，建议我不写 flag 好家伙
  let isThrottling = false
  // 核心思路，函数多次执行只有当 isThrottling 为 false 时才会进入函数体
  return function (...args) {
    if (!isThrottling) {
      isThrottling = true
      setTimeout(() => {
        isThrottling = false
        fn.apply(this, args)
      }, delay)
    }
  }
}

<h4 id="prototypeSamplestopic-16"> 防抖</h4>
事件响应函数在一段时间后才执行，如果这段时间内再次调用，则重新计算执行时间
function debounce(fn, delay = 300) {
  let timer = null
  return function (...args) {
    // 每次进来都会清空定时器，所以在 delay 事件中重复执行之后执行最后一次
    clearInterval(timer)
    timer = setTimeout(() => {
      fn.apply(this, args)
    }, delay)
  }
}

<h4 id="prototypeSamplestopic-17"> once 函数</h4>
函数返回结果会被缓存下来，只会计算一次。
const f = (x) => x;
const onceF = once(f);
//=> 3
onceF(3);
//=> 3
onceF(4);

const once = (fn) => {
  let res, isFirst = true
  return function (...args) {
    if (!isFirst) return res
    res = fn.call(this, ...args)
    isFirst = false
    return res
  }
}

<h4 id="prototypeSamplestopic-18"> 累加函数应用</h4>
实现一个累加函数，下面的几种情况都能正确的调用。
console.log(sum(1, 2)(3)()) // 6
console.log(sum(1)(2)(3)()) // 6
console.log(sum(1, 2, 4)(4)()) // 11

function sum(...args) {
  let params = args
  const _sum = (...newArgs) => {
    if (newArgs.length === 0) {
      return params.reduce((pre, cur) => pre + cur, 0)
    } else {
      params = [...params, ...newArgs]
      return _sum
    }
  }
  return _sum
}

<h3 id="prototypeSamplestopic-19"><pk>进阶</pk></h3>

<h4 id="prototypeSamplestopic-20"> 实现 repeat 方法</h4>
function repeat(fn, times, delay) {
  return async function (...args) {
    for (let i = 0; i &lt; times; i++) {
      await new Promise((resolve, reject) => {
        setTimeout(() => {
          fn.call(this, ...args)
          resolve()
        }, delay)
      })
    }
  }
}
const repeatFn = repeat(console.log, 4, 1000)
// 函数调用四次，每次间隔 1s 打印 hello
repeatFn('hello')

<h4 id="prototypeSamplestopic-21"> 实现 Promise.all/race/allSettled/any</h4>
Promise 身上的这些方法返回的都是一个 Promise
Promise.resolve 接受一个 Promise，若非 promise 则将其变成功状态的 Promise
// 有一个失败则返回失败的结果，全部成功返回全成功的数组
Promise.all = function (promiseList = []) {
  return new Promise((resolve, reject) => {
    const result = []
    let count = 0
    if (promiseList.length === 0) {
      resolve(result)
      return
    }
    for (let i = 0; i &lt; promiseList.length; i++) {
      Promise.resolve(promiseList[i]).then(res => {
        result[i] = res
        count++
        // 不能直接通过 result.length 进行比较，因为 会存在下标大的先赋值
        // 例如 i = 3 第一个返回结果，此时数组变为[empty,empty,empty,res]
        if (count === promiseList.length) {
          resolve(result)
        }
      }).catch(e => {
        reject(e)
      })
    }
  })
}
// 返回第一个成功或失败的结果
Promise.race = function (promiseList = []) {
  return new Promise((resolve, reject) => {
    if (promiseList.length === 0) {
      return resolve([])
    }
    for (let i = 0; i &lt; promiseList.length; i++) {
      Promise.resolve(promiseList[i]).then(res => {
        resolve(res)
      }).catch(e => {
        reject(e)
      })
    }
  })
}
// 无论成功约否都返回，但是会添加一个 status 字段用于标记成功/失败
Promise.allSettled = function (promiseList = []) {
  return new Promise((resolve, reject) => {
    const result = []
    let count = 0
    const addRes = (i, data) => {
      result[i] = data
      count++
      if (count === promiseList.length) {
        resolve(result)
      }
    }
    if (promiseList.length === 0) return resolve(result)
    for (let i = 0; i &lt; promiseList.length; i++) {
      Promise.resolve(promiseList[i]).then(res => {
        addRes(i, { status: 'fulfilled', data: res })
      }).catch(e => {
        addRes(i, { status: 'rejected', data: e })
      })
    }
  })
}
// AggregateError，当多个错误需要包装在一个错误中时，该对象表示一个错误。
// 和 Promise.all 相反，全部失败返回失败的结果数组，有一个成功则返回成功结果
Promise.any = function (promiseList = []) {
  return new Promise((resolve, reject) => {
    if (promiseList.length === 0) return resolve([])
    let count = 0
    const result = []
    for (let i = 0; i &lt; promiseList.length; i++) {
      Promise.resolve(promiseList[i]).then(res => {
        resolve(res)
      }).catch(e => {
        count++
        result[i] = e
        if (count === promiseList.length) {
          reject(new AggregateError(result))
        }
      })
    }
  })
}

<h4 id="prototypeSamplestopic-22"> 整数千分位加逗号</h4>
1234567 -> 1,234,567

function toThousands(num) {
  num = num.toString()
  let result = ''
  while (num.length > 3) {
    result = ',' + num.substring(num.length - 3) + result
    num = num.substring(0, num.length - 3)
  }
  result = num + result
  return result
}
console.log(toThousands(1234567)) // 1,234,567
console.log(toThousands(123456)) // 123,456

<h4 id="prototypeSamplestopic-23"> 洗牌函数</h4>
有几张牌张牌，用 js 来进行乱序排列，要保持公平性
const shuffle = (arr) => {
  // 不影响原来的数组
  const result = [...arr]
  for (let i = result.length; i > 0; i--) {
    // 随机从 [0,i - 1] 产生一个 index, 将 i - 1 于 index 对应数组的值进行交换
    const index = Math.floor(Math.random() * i);
    [result[index], result[i - 1]] = [result[i - 1], result[index]]
  }
  return result
}
const arr = [1, 2, 3, 4, 5]
console.log(shuffle(arr)) // [ 3, 1, 2, 5, 4 ]
console.log(shuffle(arr)) // [ 2, 3, 5, 1, 4 ]
console.log(shuffle(arr)) // [ 4, 2, 3, 1, 5 ]
console.log(shuffle(arr)) // [ 5, 4, 2, 3, 1 ]

<h4 id="prototypeSamplestopic-24"> prototypeLRU</h4>
LRU是Least Recently Used的缩写，即最近最少使用，是一种常用的页面置换算法<sup>[2]</sup>，选择最近最久未使用的页面予以淘汰。

该算法赋予每个页面<sup>[3]</sup>一个访问字段，用来记录一个页面自上次被访问以来所经历的时间 t，当须淘汰一个页面时，选择现有页面中其 t 值最大的，即最近最少使用的页面予以淘汰。
力扣地址<sup>[4]</sup>
/**
 * @param {number} capacity
 */
var LRUCache = function(capacity) {
    this.map = new Map()
    this.capacity = capacity
};
/** 
 * @param {number} key
 * @return {number}
 */
LRUCache.prototype.get = function(key) {
    if(this.map.has(key)){
        const value = this.map.get(key)
        // 更新存储位置
        this.map.delete(key)
        this.map.set(key,value)
        return value
    }
    return - 1
};
/** 
 * @param {number} key 
 * @param {number} value
 * @return {void}
 */
LRUCache.prototype.put = function(key, value) {
    if(this.map.has(key)){
        this.map.delete(key)
    }
    this.map.set(key,value)
    // 如果此时超过了最长可存储范围
    if(this.map.size > this.capacity){
        // 删除 map 中最久未使用的元素
        this.map.delete(this.map.keys().next().value)
    }
};

<h3 id="prototypeSamplestopic-25"><pk>更上一层楼</pk></h3>

<h4 id="prototypeSamplestopic-26"> Generator</h4>
先看看下面输出的内容
async function getResult() {
    await new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve(1);
            console.log(1);
        }, 1000);
    })
    await new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve(2);
            console.log(2);
        }, 500);
    })
    await new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve(3);
            console.log(3);
        }, 100);
    })
}
getResult()
// 1 2 3 

那如何使用 Es6 中的 generator 实现类似的效果呢 ？
function* getResult(params) {
    yield new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve(1);
            console.log(1);
        }, 1000);
    })
    yield new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve(2);
            console.log(2);
        }, 500);
    })
    yield new Promise((resolve, reject) => {
        setTimeout(() => {
            resolve(3);
            console.log(3);
        }, 100);
    })
}
const gen = getResult()
// gen.next().value 就是每一次 yield 之后返回的 Promise
// gen.next() = {value: yeild 返回的数据,done: 迭代器是否走完}
gen.next().value.then(() => {
    gen.next().value.then(() => {
        gen.next();
    });
});// 依次打印 1 2 3

将 gen.next() 封装一层，让其自己能够实现递归调用
const gen = getResult()
function co(g) {
  const nextObj = g.next();
  // 递归停止条件：当迭代器迭代到最后一个 yeild 
  if (nextObj.done) {
    return;
  }
  nextObj.value.then(()=>{
    co(g)
  })
}
co(gen)

<h4 id="prototypeSamplestopic-27"> async-pool</h4>
JS 控制并发请求， 参考文章 mp.weixin.qq.com/s/yWOPoef9i…<sup>[5]</sup>
<img src="https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKntlVGVJwYjMwuP4ss6icD5ia8fEuO4KawprmdxJ40dVib2OibM1aOez5b0pgykrYdHIpThwaPyNRXztw/640" loading="lazy">

aysnc-pool 的基本使用
const timeout = i => new Promise(resolve => setTimeout(() => resolve(i), i));
await asyncPool(2, [1000, 5000, 3000, 2000], timeout);

asyncPool 这个函数接受三个参数
poolLimit（数字类型）：表示限制的并发数；
array（数组类型）：表示任务数组；
iteratorFn（函数类型）：表示迭代函数，用于实现对每个任务项进行处理，该函数会返回一个 Promise 对象或异步函数。
这里提醒一下，promise.then 中的函数执行是一异步的，而赋值是同步的
const a = Promise.resolve().then(()=>console.log(a))
// 等价于 此时 a 等于一个 pending 状态的 promise
const a = Promise.resolve().then()
a.then(()=>{
  console.log(a)
})

prototype实现，这部分可能会多花点时间。

可以拷贝代码多调试几次就知道了
async function asyncPool(poolLimit, array, iteratorFn) {
  const ret = []; // 存储所有的异步任务
  const executing = []; // 存储正在执行的异步任务
  for (const item of array) {
    // 调用iteratorFn函数创建异步任务
    const p = Promise.resolve().then(() => iteratorFn(item, array));
    ret.push(p); // 保存新的异步任务
    // 当poolLimit值小于或等于总任务个数时，进行并发控制
    if (poolLimit &lt;= array.length) {
      // 当任务完成后，从正在执行的任务数组中移除已完成的任务
      const e = p.then(() => executing.splice(executing.indexOf(e), 1));
      executing.push(e); // 保存正在执行的异步任务
      if (executing.length >= poolLimit) {
        await Promise.race(executing); // 等待较快的任务执行完成
      }
    }
  }
  return Promise.all(ret);
}
const timeout = i => new Promise(resolve => setTimeout(() => { console.log(i); resolve(i) }, i));
// 当然,limit &lt;= 0 的时候 我们可以理解为只允许一个请求存在 
asyncPool(2, [1000, 5000, 3000, 2000], timeout).then(res => {
  console.log(res)
})

总共花费 6 s 时间，符合预期
<img src="https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKntlVGVJwYjMwuP4ss6icD5iaA9Su0TAlFl34CLT5Yxn7GSMibNYk6pcPQk1ia9GahlNOBjBFmsbjeZgw/640" loading="lazy">

<h2>Change Themes</h2>
<div id="ChangeThemestoc" class="toc"><a href="#ChangeThemestopic-0" target="_self"><pk>1. 一键换肤</pk></a><br><a href="#ChangeThemestopic-1" target="_self"> 1. 前置知识</a><br><a href="#ChangeThemestopic-2" target="_self"> 2. 定义主题色</a><br><a href="#ChangeThemestopic-3" target="_self">  1. 新建src/assets/theme/theme-default.css</a><br><a href="#ChangeThemestopic-4" target="_self">  2. 新建src/assets/theme/theme-black.css</a><br><a href="#ChangeThemestopic-5" target="_self">  3. 新建src/assets/theme/index.css</a><br><a href="#ChangeThemestopic-6" target="_self">  4. 引入全局样式</a><br><a href="#ChangeThemestopic-7" target="_self"> 3. 在html标签上增加自定义属性</a><br><a href="#ChangeThemestopic-8" target="_self"> 4. 修改CSS主题色</a><br><a href="#ChangeThemestopic-9" target="_self"> 5. 修改JS主题色</a><br><a href="#ChangeThemestopic-10" target="_self">  1. 新建src/config/theme.js</a><br><a href="#ChangeThemestopic-11" target="_self">  2. 修改vue文件</a><br><a href="#ChangeThemestopic-12" target="_self"><pk>2. 一键变灰</pk></a><br></div></center>

换肤功能是一项普遍的需求，尤其是在夜晚，用户更倾向于使用暗黑模式。
过去主要使用 SCSS 变量，并利用其提供的函数，如 @each、map-get来实现换肤功能。
但因其使用成本高，只能适用于SCSS项目，于是改用 CSS 变量来实现换肤。
这样无论是基于 LESS 的 React 项目，还是基于 SCSS 的 Vue 项目，都能应用换肤功能。
并且使用时只需调用var函数，降低了使用成本。

Demo地址：
https://github.com/cwjbjy/vite-vue-ts-seed/tree/feature/css

<h3 id="ChangeThemestopic-0"><pk>1. 一键换肤</pk></h3>
<h3 id="ChangeThemestopic-1"> 1. 前置知识</h3>
CSS变量：声明自定义CSS属性，它包含的值可以在整个文档中重复使用。

属性名需要以两个减号（--）开始，属性值则可以是任何有效的 CSS 值
--fontColor:'#fff'
Var函数：用于使用CSS变量。

第一个参数为CSS变量名称，第二个可选参数作为默认值
color: var(--fontColor);
CSS属性选择器：匹配具有特定属性或属性值的元素。

例如[data-theme='black']，将选择所有 data-theme 属性值为 'black' 的元素
<h3 id="ChangeThemestopic-2"> 2. 定义主题色</h3>
<h3 id="ChangeThemestopic-3">  1. 新建src/assets/theme/theme-default.css</h3>
这里定义字体颜色与布局的背景色，更多CSS变量可根据项目的需求来定义
[data-theme='default'] {
  /* 字体 */
  --font-primary: #fff;
  --font-highlight: #434a50;
  /* 布局 */
  --background-header: #2f3542;
  --background-aside: #545c64;
  --background-main: #0678be;
}
<h3 id="ChangeThemestopic-4">  2. 新建src/assets/theme/theme-black.css</h3>
再定义一套暗黑主题色
[data-theme='black'] {
  /* 字体 */
  --font-primary: #fff;
  --font-highlight: #434a50;
  /* 布局 */
  --background-header: #303030;
  --background-aside: #303030;
  --background-main: #393939;
}
<h3 id="ChangeThemestopic-5">  3. 新建src/assets/theme/index.css</h3>
在index.css文件中导出全部主题色
@import './theme-default.css'; 
@import './theme-black.css';
<h3 id="ChangeThemestopic-6">  4. 引入全局样式</h3>
在入口文件引入样式，比如我这里是main.tsx
import '@/assets/styles/theme/index.css';
<h3 id="ChangeThemestopic-7"> 3. 在html标签上增加自定义属性</h3>
修改index.html，在html标签上增加自定义属性data-theme
&lt;html lang="en" data-theme="default">&lt;/html>
这里使用data-theme是为了被CSS属性选择器[data-theme='default']选中，也可更换为其他自定义属性，只需与CSS属性选择器对应上即可。


<h3 id="ChangeThemestopic-8"> 4. 修改CSS主题色</h3>
关键点：监听change事件，使用document.documentElement.setAttribute动态修改data-theme属性，然后CSS属性选择器将自动选择对应的css变量
&lt;template>
  &lt;div>
    &lt;select name="pets" @change="handleChange">
      &lt;option value="default">默认色&lt;/option>
      &lt;option value="black">黑色&lt;/option>
    &lt;/select>
    &lt;div>登录页面&lt;/div>
  &lt;/div>
&lt;/template>
&lt;script setup lang="ts">
const handleChange = (e: Event) => {
  window.document.documentElement.setAttribute('data-theme', (e.target as HTMLSelectElement).value);
};
&lt;/script>
&lt;style lang="scss">
body {
  color: var(--font-primary);
  background-color: var(--background-main);
}
&lt;/style>
效果图，默认色：
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/ev3UEXFSnDGnSbJF6C4sXwqI3pGH52BYTnR67vjPF5OYMqmp8mn3SNgYE2MMTCbeWUzRWnW48Yicp6Eq6vMXQAg/640" loading="lazy">

效果图，暗黑色：
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/ev3UEXFSnDGnSbJF6C4sXwqI3pGH52BYCoIek6icw9Mt7sMqv7YIZYZlg55f6A3RIcKf2qd95UWknNTYG8vQ0Cw/640" loading="lazy">

<h3 id="ChangeThemestopic-9"> 5. 修改JS主题色</h3>
切换主题色，除了需要修改css样式，有时也需在js文件中修改样式，例如修改echarts的配置文件，来改变柱状图、饼图等的颜色。


<h3 id="ChangeThemestopic-10">  1. 新建src/config/theme.js</h3>
定义图像的颜色，这里定义字体的颜色，默认情况下字体为黑色，暗黑模式下，字体为白色
const themeColor = {
  default: {
    font: '#333',
  },
  black: {
    font: '#fff',
  },
};
export default themeColor;
<h3 id="ChangeThemestopic-11">  2. 修改vue文件</h3>
关键点：
1. 定义主题色TS类型，规定默认和暗黑两种：type ThemeTypes = 'default' | 'black';
2. 定义theme响应式变量，用来记录当前主题色：const theme = ref&lt;ThemeTypes>('default');
3. 监听change事件，将选中的值赋给theme：theme.value = selectTheme;
4. 使用watch进行监听，如果theme改变，则重新绘制echarts图形
完整的vue文件：
&lt;template>
  &lt;div>
    &lt;select name="pets" @change="handleChange">
      &lt;option value="default">默认色&lt;/option>
      &lt;option value="black">黑色&lt;/option>
    &lt;/select>
    &lt;div>登录页面&lt;/div>
    &lt;div ref="echartRef" class="myChart">&lt;/div>
  &lt;/div>
&lt;/template>
&lt;script setup lang="ts">
import { onMounted, ref, watch } from 'vue';
import themeColor from '@/config/theme';
import * as echarts from 'echarts';
type ThemeTypes = 'default' | 'black';
const echartRef = ref&lt;HTMLDivElement | null>(null);
const theme = ref&lt;ThemeTypes>('default');
const handleChange = (e: Event) => {
  const selectTheme = (e.target as HTMLSelectElement).value as ThemeTypes;
  theme.value = selectTheme;
  window.document.documentElement.setAttribute('data-theme', selectTheme);
};
const drawGraph = () => {
  let echartsInstance = echarts.getInstanceByDom(echartRef.value!);
  if (!echartsInstance) {
    echartsInstance = echarts.init(echartRef.value);
  }
  echartsInstance.clear();
  var option = {
    color: ['#3398DB'],
    title: {
      text: '柱状图',
      left: 'center',
      textStyle: {
        color: themeColor[theme.value].font,
      },
    },
    xAxis: [
      {
        type: 'category',
        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        axisLabel: {
          show: true,
          color: themeColor[theme.value].font,
        },
        nameTextStyle: {
          color: themeColor[theme.value].font,
        },
      },
    ],
    yAxis: [
      {
        type: 'value',
        axisLabel: {
          show: true,
          color: themeColor[theme.value].font,
        },
        nameTextStyle: {
          color: themeColor[theme.value].font,
        },
      },
    ],
    series: [
      {
        name: '直接访问',
        type: 'bar',
        barWidth: '60%',
        data: [10, 52, 200, 334, 390, 330, 220],
      },
    ],
  };
  echartsInstance.setOption(option);
};
onMounted(() => {
  drawGraph();
});
watch(theme, () => {
  drawGraph();
});
&lt;/script>
&lt;style lang="scss">
body {
  color: var(--font-primary);
  background-color: var(--background-main);
}
.myChart {
  width: 300px;
  height: 300px;
}
&lt;/style>
<h3 id="ChangeThemestopic-12"><pk>2. 一键变灰</pk></h3>
在特殊的日子里，网页有整体变灰色的需求。

可以使用filter 的 grayscale() 改变图像灰度，值在 0% 到 100% 之间，值为0%展示原图，值为100% 则完全转为灰度图像
body {
  filter: grayscale(1); //1相当于100%
}

<h2>communicate between two html pages</h2>
<a href="https://webrtc.github.io/samples/" class="whitebut ">WebRTC Real-time communication for the web</a>
Try using cookies.

It's the simplest way I can think of.

This website might seem helpful: <a href="https://www.w3schools.com/js/js_cookies.asp" rel="nofollow noreferrer">https://www.w3schools.com/js/js_cookies.asp</a>
You can't do this with just JavaScript.

The point is: JS is a client-side language which means that it is downloaded by a client (a browser) and is run by it (not by server).

For the 2 pages to communicate, you have establish the communication somehow, via some medium.

The medium can be:
web itself.

2 clients can communicate directly, but only if they know each others' address.

How would they get those? By the help of the server (which brings us to the second option below) or by manual configuration which is very impractical (some more details may be found in context of WebRTC)
your server.

Ok, that's the most common approach but that involves more than just JS: this requires a server-side language (PHP, Python, C++, Java, whatever)
your browser.

There's a special case where you can establish such a communication: if you open your second page in the same browser from your first page in a special way so that the second one is "under control" of the first one, you can "command" the second one to do some stuff from the first one
So, if you're interested in the third option, you should read about <k>window.open</k>, <k>window.opener</k>, <k>window.parent</k>.
<k>var newWindow = window.open(url, name, params);</k>
will open a new window (say your second page) and bring you a variable <k>newWindow</k> which is a reference to the <k>window</k> object of the opened window.

Try for instance
<k>newWindow.write("haha, I'm controlling this stuff!");</k>
Likewise, in the second window you can use
<k>var oldWindow = window.opener;</k>
There's also a number of methods you can use (<k>window``.close</k>, <k>.moveBy</k>, <k>.moveTo</k>, <k>.resizeBy</k>, <k>.resizeTo</k> etc etc).
Remember, however, that this interaction will be limited to your browser: if you  change something as <em>it is displayed in your browser</em> (like add some text to a page) this won't affect the actual pages stored on your server because this requires your server do something via some server-side scripts.
PS to advance this technique, you may want to read about <k>window.postMessage</k> but that's mostly designed for communication between pages that are cross-domain.
PPS Actually, there's more!

One thing to note is  and  have <k>setItem</k> method which generates <k>'storage'</k> events on <k>window</k> (try <k>localStorage.setItem('key', 'value');</k> and <k>window.addEventListener('storage', event => console.log(event.key));</k>).

Another, like Anderson Green has noted, is <a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API" rel="nofollow noreferrer">Broadcast Channel API</a> (try <k>const channel = new BroadcastChannel('my_channel')</k>, <k>channel.postMessage('Hi there!')</k> and <k>channel.addEventListener('message', event => console.log(event))</k>).

There's also <a href="https://developer.mozilla.org/ru/docs/Web/API/SharedWorker" rel="nofollow noreferrer"><k>SharedWorker</k>s</a> and <a href="https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API" rel="nofollow noreferrer">Service Workers</a>.

Finally, you can use some off-the-shelve solutions like .
Those who speak Russian may also find more useful details in <a href="https://habr.com/ru/company/rambler_group/blog/422545/" rel="nofollow noreferrer">this article</a> (wow!).

<h2>web标签页相互通信</h2>
<div id="webTabCommtoc" class="toc"><a href="#webTabCommtopic-0" target="_self">内容</a><br><a href="#webTabCommtopic-1" target="_self"><pk>效果图</pk></a><br><a href="#webTabCommtopic-2" target="_self"><pk>公共代码和解析</pk></a><br><a href="#webTabCommtopic-3" target="_self"> style-scss</a><br><a href="#webTabCommtopic-4" target="_self"> style-css</a><br><a href="#webTabCommtopic-5" target="_self"> html</a><br><a href="#webTabCommtopic-6" target="_self"> window.open的解析</a><br><a href="#webTabCommtopic-7" target="_self"> localStorage和sessionStorage的监听区别和注意事项(坑)</a><br><a href="#webTabCommtopic-8" target="_self"><pk>openKeyOnly方式(壹)</pk></a><br><a href="#webTabCommtopic-9" target="_self"><pk>BroadcastChannel方式(贰)</pk></a><br><a href="#webTabCommtopic-10" target="_self"><pk>localStorage方式(叁)</pk></a><br><a href="#webTabCommtopic-11" target="_self"><pk>三种方式的区别</pk></a><br></div></center>

<h3 id="webTabCommtopic-0">内容</h3>
了解css混合器(mixin)；
了解<pk>动态自定义元素</pk>(标签)属性，
<gr>el.setAttribute('data-activa', '');</gr>，
setAttribute方法需要传递两个参数，第二个参数如果不传会报错；
可以传空字符串，此时标签只显示属性，等号和属性值不会显示，
标签结果
&lt;span data-activa>&lt;/span>；
传递的参数值都会转成字符串，比如null或undefined都会转成'null'或'undefined'，
标签结果
&lt;div data-activa="null">&lt;/div>
&lt;p data-activa="undefined">&lt;/p>；

了解自定义元素(标签)属性的选择器，.item[data-activa]|.item[data-activa='highlight ']；
了解window.open第二个参数的作用，以及固有值和自定义值对页面交互效果的区别；
了解标签页之间传参的区别；

了解storage监听中localStorage和sessionStorage的区别；
了解浏览器防多开功能的新思路或方法；
了解hover和active伪类；

最终效果类似网页版的酷狗，第一次播放打开新的标签页，之后的播放只发送音乐数据到播放页，此方法适用于防多开的功能。

<h3 id="webTabCommtopic-1"><pk>效果图</pk></h3>
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/vrbqwwpXypu2rP8w0lNiaGDWRtHvuyacwhY3aic7yYrBY8sFYNaoeZXejp03Y1Vxz4YpK3oWRsUQ7Bf5483uiaibLQ/640" loading="lazy">

<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/vrbqwwpXypu2rP8w0lNiaGDWRtHvuyacwkAvLibebD3zEXFdeHVUmVn7UQRetVEBSiclpqUMHbkf7vzffC1HL7Slg/640" loading="lazy">

<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/vrbqwwpXypu2rP8w0lNiaGDWRtHvuyacwEfRvOJQZ7LdKjQrDgp36rfJ3nCWnFGJNDSqIDOb7wFgsFCq1zzkXbw/640" loading="lazy">

<h3 id="webTabCommtopic-2"><pk>公共代码和解析</pk></h3>
<h3 id="webTabCommtopic-3"> style-scss</h3>

@mixin bsbb() {
    box-sizing: border-box;
}
html,
body {
    margin: 0px;
    padding: 0px;
    @include bsbb();
}
body {
    padding: 68px;
    @include bsbb();
}
// 发送页
.box {
    >.item {
        cursor: pointer;
        list-style-type: none;
        padding: 8px 0px;
        @include bsbb();
        text-align: center;
        font-size: 28px;
        font-weight: bold;
        background-color: #eeeeee;
        border-radius: 4px;
    }
    >.item:not(:first-child) {
        margin-top: 18px;
    }
    >.item:hover {
        background-color: #f0f8ff;
    }
    >.item:active {
        background-color: #00ffff;
    }
    >.item[data-activa] {
        color: #00ff00;
        background-color: #409eff;
    }
}
// 接收页
#idEl {
    height: calc(100vh - 136px);
    line-height: calc(100vh - 136px);
    margin: 0px;
    padding: 0px;
    text-align: center;
    font-size: 68px;
    font-weight: bold;
}
使用Scss(一种CSS预处理器)编写一些样式和一个名为bsbb的mixin(混合器)。
1、@mixin bsbb()定义一个名为bsbb的mixin，它设置box-sizing属性为border-box。
box-sizing: border-box;确保元素的宽度和高度包括内容、内边距和边框，而不是仅仅包括内容。

2、html, body选择器设置html和body元素的margin和padding为0px，并调用bsbb混合器。
3、body选择器设置body元素的padding为68px，并再次调用bsbb混合器。
4、.box选择器定义.box类的样式，它包含一个.item类的子元素。
.box > .item选择器设置.item的样式，包括鼠标指针样式、无列表项标记、内边距、box-sizing、文本居中、字体大小、字体粗细、背景颜色和边框圆角。

5、.box > .item:not(:first-child)选择器设置除了第一个.item之外的所有.item的margin-top为18px。
6、.box > .item:hover选择器定义鼠标悬停在.item上时的背景颜色。
7、.box > .item:active选择器定义当.item被激活(例如点击)时的背景颜色。
8、.box > .item[data-activa]选择器定义当.item元素具有data-activa属性时的文本颜色和背景颜色。
9、#idEl选择器定义具有id为idEl的元素样式，它设置高度和行高为视口高度减去136px，margin和padding为0px，文本居中，字体大小为68px，字体粗细为粗体。

.box类定义一个包含多个.item的容器，每个.item可以有不同的交互状态和样式。

#idEl定义一个特定的元素，其样式可能用于页面的特定部分，如发送页和接收页。

在实际使用中，这段代码需要被编译成普通的css文件，以便在网页中使用。

Scss编译器会处理这些mixin和选择器，生成相应的CSS规则。

<h3 id="webTabCommtopic-4"> style-css</h3>
html,
body {
    margin: 0px;
    padding: 0px;
    box-sizing: border-box;
}
body {
    padding: 68px;
    box-sizing: border-box;
}
.box>.item {
    cursor: pointer;
    list-style-type: none;
    padding: 8px 0px;
    box-sizing: border-box;
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    background-color: #eeeeee;
    border-radius: 4px;
}
.box>.item:not(:first-child) {
    margin-top: 18px;
}
.box>.item:hover {
    background-color: #f0f8ff;
}
.box>.item:active {
    background-color: #00ffff;
}
.box>.item[data-activa] {
    color: #00ff00;
    background-color: #409eff;
}
#idEl {
    height: calc(100vh - 136px);
    line-height: calc(100vh - 136px);
    margin: 0px;
    padding: 0px;
    text-align: center;
    font-size: 68px;
    font-weight: bold;
}

<h3 id="webTabCommtopic-5"> html</h3>
发送页(send)
&lt;ul class="box">
    &lt;li class="item" onclick="handle(1)">1&lt;/li>
    &lt;li class="item" onclick="handle(2)">2&lt;/li>
    &lt;li class="item" onclick="handle(3)">3&lt;/li>
    &lt;li class="item" onclick="handle(4)">4&lt;/li>
    &lt;li class="item" onclick="handle(5)">5&lt;/li>
&lt;/ul>

接收页(receive)
&lt;div id="idEl">&lt;/div>

<h3 id="webTabCommtopic-6"> window.open的解析</h3>

window.open方法的第二个参数用于指定新窗口的名称，名称可以用来引用新窗口，例如在后续的代码中使用window.open或window.close方法来操作这个窗口。

第二个参数如果是_blank，则表示新窗口或标签页将在浏览器中打开，但不会与任何已存在的窗口或标签页关联。

这通常用于打开一个全新的、独立的窗口或标签页。

第二个参数如果是_self，则表示新页面将在当前窗口或标签页中加载，这将替换当前页面的内容。

第二个参数如果是_parent，则表示新页面将在当前窗口或标签页的父窗口或标签页中加载。

如果当前窗口或标签页没有父窗口或标签页(即它不是嵌套的)，则效果与_self相同。

第二个参数如果是_top，则表示新页面将在最顶层的窗口中加载，这将替换所有嵌套的窗口或标签页。

第二个参数如果是自定义(keyOnly)，且不是一个标准的窗口名称，它不会影响新窗口的行为。

如果自定义(keyOnly)不是已存在的窗口名称，那么window.open会创建一个新窗口，并将其命名为keyOnly。

如果keyOnly已经是一个打开的窗口的名称，那么window.open将不会创建新窗口，而是返回对已存在的窗口的引用。

在实际应用中，使用非标准的窗口名称(如keyOnly)可能不会达到预期的效果，因为浏览器可能不会识别这样的名称。

通常建议使用_blank、_self、_parent或_top作为第二个参数，以确保与浏览器的兼容性。

<h3 id="webTabCommtopic-7"> localStorage和sessionStorage的监听区别和注意事项(坑)</h3>
localStorage和sessionStorage的区别

localStorage和sessionStorage都是Web Storage API提供的两种存储机制，用于在客户端存储数据。

它们在存储方式、生命周期、作用域等方面有所不同。
1、生命周期
localStorage，数据没有过期时间，除非被显式删除，否则数据会一直保存在浏览器中，即使关闭浏览器或重启计算机。

sessionStorage，数据仅在当前浏览器会话中有效，一旦会话结束(例如，关闭浏览器标签页或窗口)，数据就会被清除。
2、作用域
localStorage和sessionStorage都基于源(origin)，这意味着它们只能访问相同协议、域名和端口的数据。

不同源之间的数据存在隔离(跨域)。

localStorage的数据在所有同源的窗口和标签页中共享，而sessionStorage的数据仅限于创建它的窗口或标签页。
3、存储大小
localStorage和sessionStorage的存储大小限制因浏览器而异，但通常localStorage的存储空间比sessionStorage大。

在大多数现代浏览器中，localStorage的大小限制大约为5MB到10MB。
4、API接口
两者都提供了相同的API方法，包括setItem(key, value)、getItem(key)、removeItem(key)、clear()和key(index)。
5、使用场景
localStorage适合存储长期数据，如用户偏好设置、登录状态等。

sessionStorage适合存储临时数据，如表单输入、购物车内容等，这些数据仅在当前会话中需要。
6、数据持久性
localStorage提供持久化存储，即使关闭浏览器或重启计算机，数据仍然存在。

sessionStorage提供临时存储，数据仅在当前会话期间有效。
7、事件监听
两者都支持storage事件，当数据发生变化时，所有同源的窗口都会接收到这个事件。

但sessionStorage事件只在当前会话的窗口中触发。

在使用时，根据具体需求选择合适的存储机制。

如果需要存储用户登录状态，localStorage是一个很好的选择，因为它可以跨会话持久化数据。

如果需要存储用户在单个页面会话中的临时数据，sessionStorage可能更适合，因为它不会在会话结束后保留数据。

解决storage监听不被触发的问题

如果在两个页面中，只有使用localStorage时storage事件才会被触发，而使用sessionStorage时不会，这可能是因为storage事件的触发机制和sessionStorage的特性导致。

<gr>storage事件被触发的条件</gr>1、当localStorage或sessionStorage中的任何数据被修改时(例如，通过setItem、removeItem或clear方法)。
2、事件会在所有同源的页面中触发，无论这些页面是打开在同一个标签页还是不同的标签页。

<gr>sessionStorage的特性</gr>1、sessionStorage与特定的浏览器标签页或窗口关联。

这意味着，如果在标签页A中修改sessionStorage，只有标签页A会接收到storage事件。

其他标签页(即使它们是同一个源)不会接收到这个事件，因为它们的sessionStorage独立。
2、当标签页关闭时，与该标签页关联的sessionStorage会被清除。

据上，如果在两个不同的标签页中分别修改sessionStorage，每个标签页只会接收到自己修改的事件，而不会接收到另一个标签页的事件。

这就是为什么在两个页面中，只有使用localStorage时storage事件才会被触发的原因。

如果希望在两个标签页中都能监听到sessionStorage的变化，需要确保两个标签页都注册storage事件监听器，并且它们都属于同一个源。

这样，无论哪个标签页修改sessionStorage，另一个标签页都能接收到storage事件。

sessionStorage的事件监听只在修改它的标签页中触发，而localStorage的事件监听则在所有同源的标签页中触发。

如果需要跨标签页监听sessionStorage的变化，需要确保所有相关标签页都注册storage事件监听器，并且它们都属于同一个源。

<h3 id="webTabCommtopic-8"><pk>openKeyOnly方式(壹)</pk></h3>
<gr>发送页(send)</gr>
function handle(val) {
    window.open(`./receive.html?val=${val}&amp;type=keyOnly`, 'keyOnly');
}

<gr>接收页(receive)</gr>
const search = window.location.search;
const searchParams = new URLSearchParams(search);
const iterator = searchParams.keys();
const obj = {};
for (let item of iterator) obj[item] = searchParams.get(item);
idEl.textContent = obj.val;

<gr>解析</gr>
代码用于处理一个网页的URL查询参数，并将特定的参数值显示在页面上。
1、function handle(val)定义一个名为handle的函数，它接受一个参数val。
2、window.open('./receive.html?val=${val}&amp;type=keyOnly', 'keyOnly');调用window.open方法打开一个新的浏览器窗口或标签页。

它将打开./receive.html页面，并通过URL查询字符串传递两个参数val和type。

val参数的值通过函数参数val赋值，type参数的值被硬编码为keyOnly。

'keyOnly’是新窗口的名称。
3、const search = window.location.search;获取当前页面URL查询字符串部分，并将其赋值给变量search。

如果当前URL是http://example.com/page.html?param1=value1&amp;param2=value2，那么search的值将是?param1=value1&amp;param2=value2。
4、const searchParams = new URLSearchParams(search);使用URLSearchParams构造函数创建一个新的URLSearchParams对象，该对象封装search字符串中的查询参数。

URLSearchParams对象提供一种方便的方式来处理URL的查询字符串。
5、const iterator = searchParams.keys();调用searchParams对象的keys()方法，该方法返回一个迭代器，它包含查询字符串中的所有键(参数名)。
6、const obj = {};创建一个空对象obj，用于存储查询参数的键值对。
7、for (let item of iterator) obj[item] = searchParams.get(item);使用for...of循环来遍历iterator中的每个键(参数名)。

对于每个键，它使用searchParams.get(item)方法获取对应的值，并将这个键值对存储在obj对象中。
8、idEl.textContent = obj.val;将obj对象中val键对应的值赋给idEl元素的textContent属性。

idEl是一个页面上的DOM元素，其ID为idEl。

假设val参数存在于URL查询字符串中，并且idEl元素存在。

总结来说，以上代码的目的是从当前页面的URL查询字符串中提取val参数的值，并将其显示在页面上。

如果val参数不存在，idEl.textContent将不会被设置。

此外，这段代码还定义一个handle函数，用于打开一个新页面并传递参数。

<h3 id="webTabCommtopic-9"><pk>BroadcastChannel方式(贰)</pk></h3>叙言

以下代码展示两个页面之间的通信机制，一个发送消息页面，一个接收消息页面。

使用BroadcastChannelAPI来实现跨页面通信，以及localStorage来存储和传递消息计数。

发送页(send)

const channel = new BroadcastChannel('keyOnly');
function handle(val) {
    const n = +localStorage.getItem('keyOnly');
    if (!isNaN(n) &amp;&amp; n > 0) {
        channel.postMessage({ val, type: 'keyOnly' });
    } else {
        window.open(`./receive.html?val=${val}&amp;type=keyOnly`, '_blank');
    }
}1、const channel = new BroadcastChannel('keyOnly');创建一个新的BroadcastChannel对象，用于在同源的不同页面之间发送和接收消息。

频道名称为keyOnly。
2、function handle(val) { ... }定义一个handle函数，它接收一个参数val，这个参数是需要发送的消息内容。
3、const n = +localStorage.getItem('keyOnly');从localStorage中获取名为keyOnly的项，并尝试将其转换为数字。

+操作符用于尝试将字符串转换为数字。
4、if (!isNaN(n) &amp;&amp; n > 0) { ... } else { ... }如果localStorage中的值存在，且为正数，则执行channel.postMessage发送消息；否则，打开一个新的浏览器窗口或标签页，并加载./receive.html页面。
5、channel.postMessage({ val, type: 'keyOnly' });如果条件满足，使用BroadcastChannel发送一个包含val和type属性的对象。

接收页(receive)

const search = window.location.search;
const searchParams = new URLSearchParams(search);
const iterator = searchParams.keys();
const obj = {};
for (let item of iterator) obj[item] = searchParams.get(item);
idEl.textContent = obj.val;
let n = +localStorage.getItem('keyOnly');
const channel = new BroadcastChannel('keyOnly');
if (isNaN(n)) n = 0;
n += 1;
localStorage.setItem('keyOnly', n);
window.addEventListener('unload', () => {
    let n = +localStorage.getItem('keyOnly');
    if (isNaN(n)) n = 1;
    n -= 1;
    localStorage.setItem('keyOnly', n);
});
channel.addEventListener('message', ({ data: { val } }) => {
    idEl.textContent = val;
});1、const search = window.location.search;获取当前页面的查询字符串部分。
2、const searchParams = new URLSearchParams(search);使用URLSearchParams解析查询字符串。
3、const iterator = searchParams.keys();获取查询参数的键的迭代器。
4、const obj = {};创建一个空对象obj用于存储查询参数。
5、for (let item of iterator) obj[item] = searchParams.get(item);遍历查询参数的键，并将它们及其对应的值存储在obj对象中。
6、idEl.textContent = obj.val;将obj对象中val键对应的值设置为idEl元素的文本内容。
7、let n = +localStorage.getItem('keyOnly');从localStorage中获取名为keyOnly的项，并尝试将其转换为数字。
8、const channel = new BroadcastChannel('keyOnly');创建一个新的BroadcastChannel对象，用于接收消息。
9、if (isNaN(n)) n = 0; n += 1; localStorage.setItem('keyOnly', n);如果localStorage中的值不存在或不是数字，则将其设置为1，并增加计数，用于计算当前打开的页面数。

10、window.addEventListener('unload', () => { ... });添加一个事件监听器，当页面卸载时(例如，用户关闭标签页或导航到另一个页面)，减少计数并更新localStorage。

11、channel.addEventListener('message', ({ data: { val } }) => { ... });添加一个事件监听器，当通过BroadcastChannel接收到消息时，将消息内容设置为idEl元素的文本内容。

总结

发送页面通过BroadcastChannel发送消息，接收页面通过BroadcastChannel接收消息。

发送页面在发送消息前会检查localStorage中的计数，如果计数为0，则通过打开新窗口的方式发送消息；否则，通过BroadcastChannel发送消息。

接收页面在接收到消息后，会更新页面上的idEl元素的文本内容。

此外，还跟踪接收页面打开的次数，当页面卸载时减少计数，并在每次打开新的接收页面时增加计数。

这样可以确保发送页面在发送消息时，可以根据计数决定使用BroadcastChannel发送还是打开新窗口发送。

<h3 id="webTabCommtopic-10"><pk>localStorage方式(叁)</pk></h3>叙言

以下代码展示两个页面之间的通信机制，一个页面发送消息，另一个页面接收消息。

发送页面使用localStorage和window.open来发送消息，接收页面使用localStorage和window.addEventListener来接收消息。

发送页(send)

const liEl = document.querySelectorAll('.item');
const val = JSON.parse(localStorage.getItem('pageItem'))?.val || 1;
handle(val);
function handle(val) {
    const n = +localStorage.getItem('keyOnly');
    const pageItem = { val, type: 'keyOnly' };
    const setItem = (data) => localStorage.setItem('pageItem', JSON.stringify(data));
    if (!isNaN(n) &amp;&amp; n > 0) {
        setItem(pageItem);
    } else {
        setItem(pageItem);
        window.open('./receive.html', '_blank');
    }
    liEl.forEach(item => {
        if (item.textContent == val) {
            item.setAttribute('data-activa', '');
        } else {
            item.removeAttribute('data-activa');
        }
    });
}
window.addEventListener('storage', ({ key, storageArea, newValue }) => {
    if (storageArea &amp;&amp; key === 'keyOnly') {
        if (newValue == 0) {
            liEl.forEach(item => {
item.removeAttribute('data-activa');
            });
            localStorage.removeItem('pageItem');
            localStorage.removeItem('keyOnly');
        }
    }
});1、const liEl = document.querySelectorAll('.item');选择页面上所有类名为item的元素。
2、const val = JSON.parse(localStorage.getItem('pageItem'))?.val || 1;从localStorage中获取名为pageItem的项，并尝试将其解析为JSON对象。

如果解析失败或不存在，则val默认为1。
3、handle(val);调用handle函数并传入val作为参数。
4、function handle(val) { ... }定义handle函数，用于处理发送消息的逻辑。
5、const n = +localStorage.getItem('keyOnly');从localStorage中获取名为keyOnly的项，并尝试将其转换为数字。
6、const pageItem = { val, type: 'keyOnly' };创建一个对象pageItem，包含val和type属性。
7、const setItem = (data) => localStorage.setItem('pageItem', JSON.stringify(data));定义一个函数setItem，用于将对象转换为JSON字符串并存储到localStorage中。
8、if (!isNaN(n) &amp;&amp; n > 0) { ... } else { ... }如果localStorage中的keyOnly项存在且为正数，则调用setItem函数存储pageItem对象；否则，打开./receive.html页面。
9、liEl.forEach(item => { ... });遍历所有item元素，如果元素的文本内容与val相等，则设置data-activa属性；否则，移除该属性。

10、window.addEventListener('storage', ({ key, storageArea, newValue }) => { ... });添加一个事件监听器，当localStorage发生变化时触发。

如果变化的键是keyOnly且新值为0，则移除所有item元素的data-activa属性，并清除pageItem和keyOnly的存储。

接收页(receive)

let pageItem = localStorage.getItem('pageItem');
let n = +localStorage.getItem('keyOnly');
let setEl = (info) => {
    info = JSON.parse(info);
    idEl.textContent = info.val;
};
setEl(pageItem);
window.addEventListener('storage', ({ key, storageArea, newValue }) => {
    if (storageArea &amp;&amp; key === 'pageItem') setEl(newValue);
});
if (isNaN(n)) n = 0;
n += 1;
localStorage.setItem('keyOnly', n);
window.addEventListener('unload', () => {
    let n = +localStorage.getItem('keyOnly');
    if (isNaN(n)) n = 1;
    n -= 1;
    localStorage.setItem('keyOnly', n);
});1、let pageItem = localStorage.getItem('pageItem');从localStorage中获取名为pageItem的项。
2、let n = +localStorage.getItem('keyOnly');从localStorage中获取名为keyOnly的项，并尝试将其转换为数字。
3、let setEl = (info) => { ... };定义一个函数setEl，用于将传入的JSON字符串解析并更新页面上的idEl元素的文本内容。
4、setEl(pageItem);调用setEl函数，传入pageItem，更新页面。
5、window.addEventListener('storage', ({ key, storageArea, newValue }) => { ... });添加一个事件监听器，当localStorage发生变化时触发。

如果变化的键是pageItem，则调用setEl函数更新页面。
6、if (isNaN(n)) n = 0; n += 1; localStorage.setItem('keyOnly', n);如果localStorage中的keyOnly项不存在或不是数字，则将其设置为0，并增加计数。
7、window.addEventListener('unload', () => { ... });添加一个事件监听器，当页面卸载时触发。

如果localStorage中的keyOnly项存在且为数字，则将其减1。

总结

发送页面通过localStorage和window.open发送消息，接收页面通过localStorage和window.addEventListener接收消息。

发送页面在发送消息前会检查localStorage中的计数，如果计数为0，则通过打开新窗口的方式发送消息；否则，通过localStorage发送消息。

接收页面在接收到消息后，会更新页面上的idEl元素的文本内容。

此外，接收页面还跟踪发送页面发送消息的次数，当页面卸载时减少计数，并在每次发送消息时增加计数。

这样可以确保发送页面在发送消息时能够根据计数决定是通过localStorage发送还是通过打开新窗口发送。

<h3 id="webTabCommtopic-11"><pk>三种方式的区别</pk></h3>
<gr>1、方式壹和方式贰的区别</gr>
1.1、方式壹通过自定义窗口(页面)名称来打开新窗口，并通过自定义名称检测是否已有相同名称的窗口(页面)存在；没有则打开新窗口(页面)，有则刷整个窗口(页面)。

1.2、方式贰通过本地存储的keyOnly判断是否第一次打开新窗口(页面)，如果是就直接使用window.open打开页面，否则通过BroadcastChannel传参给接收页面，不用再次打开新窗口(页面)。

1.3、两种方式的传参区别，方式壹通过URL传参，并且自定义窗口(页面)名称，使其永远只打开一个相同名称的窗口(页面)，但用户体验不是很好，因为每次打开都刷新整个页面(窗口)；方式贰首次打开通过URL传参，第二次传参则通过BroadcastChannel实现，此操作对接收页面的代码编写不友好，接收页面需要编写两套代码来实现数据接收的工作，第一套是通过RUL接收参数；第二套是通过BroadcastChannel接收参数。

<gr>2、方式贰和方式叁的区别</gr>
2.1、方式贰的实现本质已在第一大点中叙述，此处不在赘叙。

2.2、方式叁通过本地缓存的方式实现参数的传递；第一次打开新窗口之前先把参数缓存在本地，接收页加载的时候直接从缓存中获取即可；再次传参也是本地缓存，但接收页面则通过监听缓存变化来获取参数。

<gr>3、三种方式各自的优缺点</gr>
优点
方式壹，较好的解决窗口多开的问题；
方式贰，解决页面整体刷新的问题；
方式叁，解决接收页面写两套接收代码的问题。

缺点
方式壹，每次传参都会整体刷新页面，用户体验感不好；
方式贰，传参的方式复杂，接收参数也麻烦，首次打开时通过URL传参，二次传参则通过BroadcastChannelAPI；此方式增加接收页的代码量和代码逻辑复杂度。

并且不能像方式壹一样很好的解决窗口多开问题；
方式叁，不能像方式壹一样很好的解决窗口多开问题，有时候会发生多开的情况。

<gr>4、总结</gr>
如果侧重防多开功能，建议使用第一种方式；
如果侧重传参和用户体验，建议使用第三种方式；
第三种方式存有可优化空间(待优化…)，视情况选择合适自己的方式。
 
<h2>浏览器跨标签页通信</h2>
<br>
<div id="crosstabcommtoc" class="toc"><a href="#crosstabcommtopic-0" target="_self">一、<pk>概说</pk></a><br><a href="#crosstabcommtopic-1" target="_self">实现浏览器跨标签页通信方式</a><br><a href="#crosstabcommtopic-2" target="_self">二、<pk>localStorage和sessionStorage事件</pk></a><br><a href="#crosstabcommtopic-3" target="_self">三、<pk>BroadcastChannel</pk></a><br><a href="#crosstabcommtopic-4" target="_self">发送消息：</a><br><a href="#crosstabcommtopic-5" target="_self">接收消息：</a><br><a href="#crosstabcommtopic-6" target="_self">断开频道：</a><br><a href="#crosstabcommtopic-7" target="_self">四、<pk>SharedWorker</pk></a><br><a href="#crosstabcommtopic-8" target="_self">SharedWorker的特点：</a><br><a href="#crosstabcommtopic-9" target="_self">五、<pk>Cookie</pk></a><br><a href="#crosstabcommtopic-10" target="_self">Cookie的domain属性：</a><br><a href="#crosstabcommtopic-11" target="_self">Cookie的path属性：</a><br><a href="#crosstabcommtopic-12" target="_self">六、<pk>WebSocket</pk></a><br><a href="#crosstabcommtopic-13" target="_self">onopen: </a><br><a href="#crosstabcommtopic-14" target="_self">onmessage：</a><br><a href="#crosstabcommtopic-15" target="_self">onerror：</a><br><a href="#crosstabcommtopic-16" target="_self">onclose：</a><br><a href="#crosstabcommtopic-17" target="_self">WebSocket的应用场景：</a><br><a href="#crosstabcommtopic-18" target="_self">总结</a><br></div></center>

<h3 id="crosstabcommtopic-0">一、<pk>概说</pk></h3>
为了提高稳定性，每个标签页都是一个独立的浏览器上下文，它们之间是相互隔离的，一个标签页崩溃不会影响到其他标签页，无法直接访问对方的数据或进行通信。
浏览器跨标签页通信是指在同一浏览器的不同Tab标签页或窗口之间进行数据交互，通过跨标签页通信，可以实现数据的共享、状态的同步、消息的传递等功能。
简单说就是，所有的浏览器都支持多标签页的，我们可以在一个浏览器中打开多个标签页，每个标签页访问不同的网站内容，一个标签页能够发送信息给另一个标签页。
已下图为例，当a.html标签页发送一个消息时，b.html和c.html可以接收到来自a.html的消息，这就是跨标签页通信。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoZJkiaMF4neugKGMLhH27hR4d4aCNFWia5KlRiaVWWJf8OklxDQ23YxHbY9qxGvU4pTN7cuPhdww1ZPQ/640" loading="lazy">
在日常项目开发中，虽然不经常用到，但还是很有价值的，遇到一些应用场景时可以信手拈来。
常见场景如下：
登录或登出：当用户打开多个标签页时，在某个标签页登录或登出需要通知其它所有标签页更新状态。
消息同步：当用户在一个标签页收到新的消息或通知时，需要将这一状态或消息内容传递给所有打开的页面，以实现实时提醒功能。
共享资源：在某些场景下，可能需要在多个标签页之间共享某些资源，如网络连接、音频/视频播放器等。
<h3 id="crosstabcommtopic-1">实现浏览器跨标签页通信方式</h3>
<h3 id="crosstabcommtopic-2">二、<pk>localStorage和sessionStorage事件</pk></h3>
当一个页面修改了localStorage或sessionStorage，其它页面会收到一个事件提示，修改了localStorage或sessionStorage的页面不会收到这个事件。
// a.html
&lt;button type="button">点击&lt;/button>
&lt;script type="text/javascript">
const btn = document.getElementById('btn');
btn.addEventListener('click', () => {
localStorage.setItem('sendKey', "a向b发送了消息：吃饭了吗？
")
console.log("a向b发送了消息：吃饭了吗？
")
})
&lt;/script>
// b.html
window.addEventListener('storage', function(event) {
console.log(event)
if(event.key === 'sendKey') {
const newValue = event.newValue;
console.log(newValue)
localStorage.setItem('sendKey', newValue)
}
})
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoZTH2qHLxyhvA0ekeIJPEmTvTwLrmwCw9wLRKTMWbB8JaV9oHnFY1fEFmRU2F0ZxhfF09Yu6LGnIg/640" loading="lazy">
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoZTH2qHLxyhvA0ekeIJPEmTiaribiaG5oy2IY37RrVicd0ob5MLdIibY5LQmFiclIT1JK7Eibicl9NDZEjj3g/640" loading="lazy">
当 localStorage 或 sessionStorage 被修改时，将触发 storage 事件，判断对应 key 值是否发生变化。
当 localStorage 或 sessionStorage 不变时，不会触发 storage 事件。
此方法的操作简单，代码简单，不需要一些复杂的状态同步逻辑。
缺点如下：
如果用户禁用了浏览的LocalStorage该方案就无效了。
当前页的 setItem 不会触发当前页的 storage 事件，只会触发其它窗口的。
要通信的标签页必须是同域的。
<h3 id="crosstabcommtopic-3">三、<pk>BroadcastChannel</pk></h3>
Broadcast Channel，即广播频道接口，客户端通过创建 BroadcastChannel 对象加入广播频道。
其构造函数只接受一个参数：频道的名称。
如果它是第一个连接到该广播频道名称的客户端，则会创建底层频道。
const bc = new BroadcastChannel("test_channel");
<h3 id="crosstabcommtopic-4">发送消息：</h3>在创建的 BroadcastChannel 对象上调用 postMessage() 方法就足够了，该方法接受任何对象作为参数。
bc.postMessage("你吃饭了吗？");
<h3 id="crosstabcommtopic-5">接收消息：</h3>发布消息时，会向连接到此频道的每个 BroadcastChannel 对象发送一个 message 事件。
可以使用 onmessage 事件处理器。
bc.onmessage = (event) => {
console.log(event);
};
<h3 id="crosstabcommtopic-6">断开频道：</h3>要离开频道，请调用对象上的 close() 方法。
这会断开对象与底层频道的连接，从而允许垃圾回收。
bc.close();
BroadcastChannel构造函数可以创建一个新的频道，然后各个标签页通过监听和发布消息进行通信。
每个标签页都可以创建一个与之前频道同名的BroadcastChannel对象，然后就可以通过postMessage方法来进行发送消息，再通过onmessage事件来接受消息。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoZTH2qHLxyhvA0ekeIJPEmT2wAbgAueGsK9VPMtsicffnOxWyy4sMNElYE9ia4PDA6UE06zTH6jBgjQ/640" loading="lazy">
// a.html
&lt;button id="btn" type="button" id="btn">点击&lt;/button>
&lt;script type="text/javascript">
const btn = document.getElementById('btn');
// 创建 BroadcastChannel 实例
const bs = new BroadcastChannel('pay');
// 点击事件
btn.addEventListener('click', () => {
// 发送消息
bs.postMessage({ message: '支持成功，刷新状态' });
// 关闭频道
bs.close();
})
&lt;/script>// b.html
// 创建 BroadcastChannel 实例
const bs = new BroadcastChannel('pay');
// 监听频道的消息
bs.onmessage = (event) => {
console.log(event)
}<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoZTH2qHLxyhvA0ekeIJPEmTFkFHTzR0iav08uDlZpgluZTcvzd7pyv5n4PQ8PRd41ls9NkSMejzJcw/0" loading="lazy">
适用于在同一域下的多个窗口、标签页或 iframe 之间进行实时消息广播。
<h3 id="crosstabcommtopic-7">四、<pk>SharedWorker</pk></h3>
SharedWorker 接口代表一种特定类型的 worker，可以从几个浏览上下文中访问，例如几个窗口、iframe 或其他 worker。
它们实现一个不同于普通 worker 的接口，具有不同的全局作用域。
如果要使 SharedWorker 连接到多个不同的页面，这些页面必须是同源的（相同的协议、host 以及端口）。
创建一个执行指定 url 脚本的共享 web worker。
const myWorker = new SharedWorker("./worker.js");如果已经用 addEventListener 监听了 onmessage 事件，则可以使用 start() 方法手动启动端口。
myWorker.port.start();
// a.html
&lt;button type="button" id="btn">点击&lt;/button>
&lt;script type="text/javascript">
const btn = document.getElementById('btn');
// 创建一个 SharedWorker
const worker = new SharedWorker('./worker.js');
btn.addEventListener('click', function(e) {
// port.postMessage发送消息
worker.port.postMessage({            status: 'SUCCESS',
message: '支付成功'
});
})
&lt;/script>
创建worker.js
const ports = [];
onconnect = function (e) {
const port = e.ports[0];
ports.push(port);
port.onmessage = function (e) {
console.log("worker接收到的消息：", e.data);
ports.forEach((p) => {
p.postMessage(e.data);
});
};
};
b.html
// b.html
const worker = new SharedWorker('./worker.js');
const port = worker.port;
// onmessage接收消息
port.onmessage = function (event) {
console.log('接收:', event.data);
};
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/gehCsfcwMoZJkiaMF4neugKGMLhH27hR4ZAVjmEQYRQj4tKwDW7icMpTI91iaV7ruQ7HQxicY65en8Nedia7rXxHbSw/640" loading="lazy">
<h3 id="crosstabcommtopic-8">SharedWorker的特点：</h3>
SharedWorker多页面共享线程只限于同一浏览器，而不能跨浏览器。
共享实例，多个上下文共享一个worker实例，节省资源。
同源策略，SharedWorker 连接到多个不同的页面必须是同源的。
双向通信，可以在当前页面通过portMessage发送消息，也可以在当前页面通过onmessage接收消息。
<h3 id="crosstabcommtopic-9">五、<pk>Cookie</pk></h3>
Cookies 是存储在用户计算机上的小文件，它们通常用于存储用户的偏好设置、跟踪用户会话等。
同一个域名下的不同标签页可以共享 Cookies 数据，从而实现跨标签页的通信。
在一个标签页中设置 Cookie，然后在其他标签页中读取该 Cookie，并根据其值执行相应的操作。
设置Cookie：
function setCookie(key, value, d) {
const date = new Date();
date.setTime(date.getDate() + d*24*60*60*1000);
const expires = date.toUTCString();
document.cookie = `${key}=${value};expires=${expires};path=/;domain=${window.location.host}`;
}
setCookie('message', 'SUCCESS', 7)
获取cookie:
function getCookie(cname) {
const name = cname + "=";
const cookieValue = document.cookie.split(';');
for(let i = 0; i &lt; cookieValue.length; i++) {
const str = cookieValue[i].trim();
if (str.indexOf(name) == 0) {
return str.substring(name.length,str.length);
}    }
return "";
}getCookie('message'); //SUCCESS
由于我们不能实时监听到Cookie的变化，因此在接收消息的标签页中，我们可以创建一个setInterval定时器，每隔一段时间轮询 Cookie 中的数据。
通过解析和处理 Cookie，我们可以获取到存储的消息，并进行相应的处理。
由于 Cookie 的大小有限制，通常为几 KB。

如果需要发送的消息较大，可能需要拆分成多个 Cookie 进行存储。
Cookie 默认只能在同一域名下共享。
如果需要在不同域名下进行跨标签页通信，需要设置合理的域名domain和路径path。
下面就重点介绍一下domain和path的作用。
<h3 id="crosstabcommtopic-10">Cookie的domain属性：</h3>表示cookie所在的域，默认为请求的地址，如网址为a.test.com/public/a.html，那么domain默认为a.test.com。
如域A为a.test.com，域B为b.test.com，那么在域A生产一个令域A和域B都能访问的cookie就要将该cookie的domain设置为.test.com；
如果要在域A生产一个令域A不能访问而域B能访问的cookie就要将该cookie的domain设置为b.test.com。
<h3 id="crosstabcommtopic-11">Cookie的path属性：</h3>表示cookie所在的目录，默认为 /，就是根目录。
如在同一个服务器上有目录 /public/，/public/dir1/，/public/dir2/，现设一个cookie A的path为 /public/，cookie B 的path为 /public/dir1/，那么public下的所有页面都可以访问到 cookie A，而 /public/ 和 /public/dir2/ 的子页面不能访问 cookie B。
这是因为 cookie 能让其path路径下的页面访问。

默认情况下，cookie对创建它的页面和域与创建它的页面在同一目录的其它页面以及创建它的页面所在目录的子目录的其它页面可见，例如，www.test.com/public/a.html 创建的cookie对www.test.com/public/b.html 和 www.test.com/public/views/c.html 都是可见的，但对www.test.com/d.html不可见。
可以设置cookie的path属性，只要以path指定的路径前缀开始的同一服务器的页面均可见cookie，例如，设置path=/public，则www.test.com/public/views/c.html 创建的 cookie 对www.test.com/public/b.html也是可见的；
设置path=/，则cookie对www.test.com这台服务器上的页面均可见。
一级域名相同，只是二级域名不同的情况下，浏览器允许通过设置document.domain共享Cookie。
也就是说，Cookie只能跨二级域名来访问，不能跨一级域名来访问。
a.test.com要读取b.test.com设置的cookie值，可以将path设置为/，domain设置为test.com，则a.test.com设置的cookie对b.test.com以及其它所有.test.com的域都是可见的。
<h3 id="crosstabcommtopic-12">六、<pk>WebSocket</pk></h3>
可以利用服务端做为中介进行跨标签页通信。
WebSocket 最大特点就是，服务器可以主动向客户端推送信息，客户端也可以主动向服务器发送信息，是真正的双向平等对话，属于服务器推送技术的一种。
WebSocket 使用一个长连接，在客户端和服务器之间保持持久的连接，从而可以实时地发送和接收数据。
<img src="https://mmbiz.qpic.cn/sz_mmbiz_jpg/gehCsfcwMoaS4pIrpmXsJ2fSZAibSACicobeloPgZgMpicMx6zoH8FZZCdefTEVCS2zDTpbG5WpDdW06K33WvLDicw/640" loading="lazy">
<h3 id="crosstabcommtopic-13">onopen: </h3>客户端和服务器建立连接后触发，被称为客户端和服务器之间的初始握手。
如果接收到open, 说明已经连接成功，可以进行通信了。
<h3 id="crosstabcommtopic-14">onmessage：</h3>接收到消息时触发。
服务器发送给客户端的消息可包括纯文本消息，二进制数据（Blob消息或者ArrayBuffer消息）。
<h3 id="crosstabcommtopic-15">onerror：</h3>响应意外故障时触发，在错误之后总是会终止连接。
<h3 id="crosstabcommtopic-16">onclose：</h3>连接关闭时触发。
一旦连接关闭后，客户端和服务端将不会再进行消息的收发。
也可主动调用close()方法关闭连接。
// 创建WebSocket对象，并指定服务器的地址
const socket = new WebSocket("ws://your-websocket-server.com");
// 与服务器建立连接：发送消息到服务器
socket.onopen = () => {
console.log("connect: ");
};
// 收到服务器发送的消息：event处理服务器返回的数据
socket.onmessage = (event) => {
console.log("receive: ", event.data);
};
// 连接或通信过程中发生错误
socket.onerror = (event) => {
console.log("errror: ", event.error);
};
// 与服务器断开连接
socket.onclose = (event) => {
console.log("close: ", event.code);
};
<h3 id="crosstabcommtopic-17">WebSocket的应用场景：</h3>
WebSocket主要应用于需要实时、双向通信的web应用中，如：
即时聊天：构建实时聊天应用，用户可以实时发送和接收消息，实现低延迟、高效的在线交流。

金融市场：股票、外汇、期货等金融市场的实时报价、交易提醒。
新闻与社交媒体：实时推送通知。
物联网（IoT）：设备的状态监控与远程控制，如智能家居、工业自动化等。
协作工具：在线文档编辑、白板绘图、代码协作等需要多方实时同步内容的应用。

游戏：多人在线游戏中的实时状态同步、玩家交互。
地理位置服务：实时位置追踪、导航应用中的动态路线更新。
直播互动：直播平台的实时评论、弹幕、礼物赠送等互动功能。
数据分析与监控：实时仪表盘、日志流处理、性能监控系统的实时数据展示与报警。
<h3 id="crosstabcommtopic-18">总结</h3>
选择通信方式：根据具体需求（如是否需要跨域、是否需要实时通信、通信数据的复杂程度等）选择合适的通信方式。
安全性：无论采用哪种方式，都需要注意数据的安全性，特别是当涉及到跨域通信时。
兼容性：考虑到不同浏览器的兼容性，选择兼容性较好的通信方式。

性能：对于需要频繁通信的场景，选择性能较好的通信方式，避免影响用户体验。
在实际应用中，可能会结合使用多种通信方式，以满足不同的需求。
例如，可以使用Broadcast Channel进行实时通知，而使用LocalStorage进行简单的数据同步。

<h2>Traverse The DOM</h2>
<div id="TraverseTheDOMtoc" class="toc"><a href="#TraverseTheDOMtopic-0" target="_self">Intro</a><br><a href="#TraverseTheDOMtopic-1" target="_self">DOM Nodes</a><br><a href="#TraverseTheDOMtopic-2" target="_self"><b>Node Relationships</b></a><br><a href="#TraverseTheDOMtopic-3" target="_self">Navigating Between Nodes</a><br><a href="#TraverseTheDOMtopic-4" target="_self">Traversal Methods</a><br></div></center>
<pre><h3 id="TraverseTheDOMtopic-0">Intro</h3>
One of the most important skills of a web developer is DOM traversal and being able to select HTML elements with JavaScript. This will be a guide on my top 10 of the must know methods and hopefully this will help you master DOM traversal by the end of the guide.
<b><gr>Fair warning!
</gr></b>This is a guide for developers with at least some basic knowledge in HTML &amp; JavaScript

<h3 id="TraverseTheDOMtopic-1">DOM Nodes</h3>
Before we dive into the traversal methods, let’s look at the brief explanation of the DOM and Node Relationships from <a href="https://www.w3schools.com/js/js_htmldom_navigation.asp" rel="noopener ugc nofollow" target="_blank">W3school</a>.
<gr>According to the W3C HTML DOM standard, everything in an HTML document is a node:</gr>
<img src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*LFInZ0TcfteDI_D4Ot72Ug.png" loading="lazy">
-HTML node tree

The entire document is a document node
Every HTML element is an element node
The text inside HTML elements are text nodes
All comments are comment nodes

<h3 id="TraverseTheDOMtopic-2"><b>Node Relationships</b></h3>
The nodes in the node tree have a hierarchical relationship to each other. The terms parent, child, and sibling are used to describe the relationships.
In a node tree, the top node is called the root (or root node)
Every node has exactly one parent, except the root (which has no parent)
A node can have a number of children
Siblings (brothers or sisters) are nodes with the same parent

<h3 id="TraverseTheDOMtopic-3">Navigating Between Nodes</h3>
Here’s a chart I drew up showing the following node properties to navigate between nodes
<img src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*-uJ2-BF-kGMUy55GhXy0Bg.png" loading="lazy">

-html mockup of profile cards with an image and some info
parentNode
previousSibling
nextSibling
firstChild
lastChild
childNodes[<gr>nodeNumber</gr>]

<h3 id="TraverseTheDOMtopic-4">Traversal Methods</h3>
Before we get into the methods, below is a HTML node tree I drew up with a div representing a <gr>grandparent </gr>node<gr> </gr>which has two parent divs<gr> </gr>and finally each parent div has two children nodes each
<gr>parent-1, parent-2 belongs to grandparent</gr>
<gr>child-1, child-2 belongs to parent-1</gr>
<gr>child-3, child-4 belongs to parent-2</gr>

&lt;body>
  &lt;div class="grandparent" id="grandparent">
    &lt;!-- "parent-1" &amp; "parent-2" belongs to "grandparent"-->
    &lt;div class="parent" id="parent-1">
      &lt;!-- "child-1" &amp; "child-2" belongs to "parent-1"-->
      &lt;div class="child" id="child-1">
      &lt;/div>
      &lt;div class="child" id="child-2">
      &lt;/div>  
    &lt;/div>
    &lt;div class="parent" id="parent-2">
      &lt;!-- "child-3" &amp; "child-4" belongs to "parent-2"-->
      &lt;div class="child" id="child-3">
      &lt;/div>
      &lt;div class="child" id="child-4">
      &lt;/div>
     &lt;/div>
  &lt;/div>
&lt;/body>

<b>getElementById - </b>This one is a classic, find a single element node by targeting the id

const grandparent = document.getElementById("grandparent")
//or
const parent2 = grandparent.getElementById("parent-2")


2. <b>getElementsByClassName - </b>This is our second classic way to select multiple elements at once, let’s say to target both our parent divs
3. <b>querySelector - </b>This is my favorite by far, a lot easier to use a single method to target classes or ids
4. <b>querySelectorAll - </b>similar to querySelector but used to select multiple element nodes
5. <b>parentElement - </b>used to target one level up the DOM tree to target the parent node
6. <b>previousElementSibling - </b>used to target one node to the left in terms of DOM tree
7. <b>nextElementSibling - </b>used to target one node to the right in terms of DOM tree
8. <b>firstElementChild - </b>used to target the first node down the DOM tree
9. <b>lastElementChild - </b>used to target the last node down the DOM tree
10. <b>childNodes[node #] - </b>last on my list but another one of my favorites, the childNodes method takes in a number to target child nodes of a parent

<h2>DOM遍历 Traversal</h2>
DOM 遍历是指在 HTML 文档中导航和定位元素的过程。

通过 DOM 遍历，您可以在文档中移动并查找特定的元素，以便对其进行操作或者检索信息。

<h3>寻找子元素</h3>
//DOM遍历
const h1 = document.querySelector('h1');
//寻找子元素
console.log(h1.querySelectorAll('.highlight'));
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutpLEe9cEw6ra2m2lICS0uPUht9ndBEE7ramJUMXkDBwr8uPeXovzOFA/640" loading="lazy">

<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutvWNahu3P7RUSwkrHP7yHv8ia7EMlVn7rrN49urgbqRW4HJxArxa5QDQ/640" loading="lazy">

上面的代码说明可以通过DOM遍历快速的定位到子元素
我们也可以找到元素的所有子节点（包括元素节点、文本节点和注释节点）的 NodeList 对象
console.log(h1.childNodes);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutqTGf4cU1nf4BRXMwnKHNNNNLkpoq6yRZ4re8vPCFQGrb2P5jeVpnaA/640" loading="lazy">

我们也可以找到元素的所有子元素节点，不包括文本节点和注释节点。

这将返回一个 HTMLCollection 对象，其中包含所有子元素。


console.log(h1.children);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutzf3ZLicDL2CVzzKZa7j6MVUVFjKgAoTQSfvK4FsqssLz90leEGo1gCA/640" loading="lazy">

当然，我们可以通过这种寻找某个元素的子元素的方式来定义style
h1.firstElementChild.style.color = 'white';
h1.lastElementChild.style.color = 'orangered';
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutHZQMg6SkFZP3azUDmVDRElwBffjBV6Grz4ynvEibe9e7rQP3zV3XH1A/640" loading="lazy">


<h3>寻找父元素</h3>
找到元素的父节点，无论父节点是什么类型的节点（元素节点、文本节点等）。

这将返回一个 Node 对象，表示 h1 元素的父节点。


console.log(h1.parentNode);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutC4UoTW5h37f3ic34eFZDCmDtEmypaibBXMicvGF7smic8Hw05EzlqUVLQw/640" loading="lazy">

找到元素的最近的父元素节点。

如果 h1 的父节点是一个元素节点，则返回这个元素节点；如果 h1 没有父元素节点，则返回 null。


console.log(h1.parentElement);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutl4MfHGH2lVR71FXY5ZGk2NR3P01DMezicR4sl5u30ztT6PJH7FEOZ6Q/640" loading="lazy">

使用 closest 方法来查找最接近的具有指定选择器的祖先元素，并为找到的元素设置背景颜色。


h1.closest('.header').style.background = 'var(--gradient-secondary)';
h1.closest('h1').style.background = 'var(--gradient-primary)';
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutEr7oElvo0iav03ibMiasf62eY8iaia1DOantEwBAMamNJRT58lQZic7JLt8Q/640" loading="lazy">


<h3>寻找兄弟元素</h3>
打印出该前一个兄弟元素节点
console.log(h1.previousElementSibling);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtut1e9lnoDyNPe8oOuQ9Qicr4ntZL4unDTOu6xM76acDRTOVLO8Kibq8vog/640" loading="lazy">

说明向上没有兄弟元素，我们也可以往下找
console.log(h1.nextElementSibling);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtutPAyufXYd58gjfCPJTiaMPYC6ibsHrGm6wHibicLn4nQwgCLhtklEx79mRQ/640" loading="lazy">

h1 元素的前一个兄弟节点和后一个兄弟节点，或者如果它们不存在则显示 null。

需要注意的是，这两个属性获取的节点可能是元素节点也可能是文本节点（或者其他类型的节点）。

console.log(h1.previousSibling);
console.log(h1.nextSibling);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtuttTiaqMhbp3rVhqUQK8nxNB0qTBbgLCvY8uB9HCcXZfPLicALtUaiaVg5g/640" loading="lazy">

那我们怎么知道元素的所有兄弟元素呢，我们可以找父元素的所有子元素
console.log(h1.parentElement.children);
<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/PtiazcMlpRgzh13Jq5uWTlTj7f3ccvtut5llqibfUYr7SGb3x5FW53wOpAHcrXt3libicibDEPUZ45zUDuiakpXU8wXA/640" loading="lazy">

最后，我们来玩一下，将除h1元素的所有兄弟元素缩小一半
[...h1.parentElement.children].forEach(function (el) {
  if (el !== h1) el.style.transform = 'scale(0.5)';
});

<h2>JavaScript 小技巧</h2>
<div id="JavaScriptTechniquetoc" class="toc"><a href="#JavaScriptTechniquetopic-0" target="_self">变量交换</a> <a href="#JavaScriptTechniquetopic-1" target="_self">对象解构</a> <a href="#JavaScriptTechniquetopic-2" target="_self">克隆对象</a> <a href="#JavaScriptTechniquetopic-3" target="_self">合并对象</a> <a href="#JavaScriptTechniquetopic-4" target="_self">清理数组中的空值</a> <a href="#JavaScriptTechniquetopic-5" target="_self">将 NodeList 转换为数组</a> <a href="#JavaScriptTechniquetopic-6" target="_self">检查数组是否符合特定条件</a> <a href="#JavaScriptTechniquetopic-7" target="_self">将文本复制到剪贴板</a> <a href="#JavaScriptTechniquetopic-8" target="_self">数组去重复</a> <a href="#JavaScriptTechniquetopic-9" target="_self">查找数组的交集</a> <a href="#JavaScriptTechniquetopic-10" target="_self">数组值的总和</a> <a href="#JavaScriptTechniquetopic-11" target="_self">条件对象属性</a> <a href="#JavaScriptTechniquetopic-12" target="_self">动态对象属性</a> <a href="#JavaScriptTechniquetopic-13" target="_self">在线状态检查器</a> <a href="#JavaScriptTechniquetopic-14" target="_self">离开页面前确认</a> <a href="#JavaScriptTechniquetopic-15" target="_self">按键计算对象值之和</a> <a href="#JavaScriptTechniquetopic-16" target="_self">将 query string 解析为对象</a> <a href="#JavaScriptTechniquetopic-17" target="_self">将秒转换为时间字符串</a> <a href="#JavaScriptTechniquetopic-18" target="_self">对象中的最大值</a> <a href="#JavaScriptTechniquetopic-19" target="_self">检查对象是否包含值</a> <a href="#JavaScriptTechniquetopic-20" target="_self">有条件的修改项</a> <a href="#JavaScriptTechniquetopic-21" target="_self">生成数组</a> <a href="#JavaScriptTechniquetopic-22" target="_self">超时请求</a> <a href="#JavaScriptTechniquetopic-23" target="_self">提取文件扩展名</a> <a href="#JavaScriptTechniquetopic-24" target="_self">检查 tab 是否激活</a> <a href="#JavaScriptTechniquetopic-25" target="_self">切换元素的类名</a> </div></center>

<h4 id="JavaScriptTechniquetopic-0">变量交换</h4>
let a = 1,
  b = 2;
[a, b] = [b, a];
// 输出：a = 2，b = 1

<h4 id="JavaScriptTechniquetopic-1">对象解构</h4>
const { name, age } = { name: "Riki", age: 22 };
// 输出：name = 'Riki', age = 22

<h4 id="JavaScriptTechniquetopic-2">克隆对象</h4>
当然这里是浅拷贝
const Obj = { name: "Riki", age: 22 };
const clonedObj = { ...Obj };
// 输出：clonedObj = {name: 'Riki', age: 22}

<h4 id="JavaScriptTechniquetopic-3">合并对象</h4>
const obj1 = { name: "Riki" };
const obj2 = { age: 22 };
const mergedObj = { ...obj1, ...obj2 };
// 输出：mergedObj = {name: 'Riki', age: 22}

<h4 id="JavaScriptTechniquetopic-4">清理数组中的空值</h4>
const arr = [0, 1, false, 2, "", 3];
const cleanedArray = arr.filter(Boolean);
// 输出：cleanedArray = [1, 2, 3]

<h4 id="JavaScriptTechniquetopic-5">将 NodeList 转换为数组</h4>
const nodesArray = [...document.querySelectorAll("div")];
// 或者
const nodesArray = Array.form(document.querySelectorAll("div"));

<h4 id="JavaScriptTechniquetopic-6">检查数组是否符合特定条件</h4>
const arr = [1, 2, 3, -1, 4];
// 检查数组中是否有一项符合预期
const hasNegativeNumbers = arr.some((num) => num &lt; 0);
// 输出：hasNegativeNumbers = true
// 检查数组中是否所有项符合预期
const allPositive = arr.every((num) => num > 0);
//输出：allPositive = false

<h4 id="JavaScriptTechniquetopic-7">将文本复制到剪贴板</h4>
navigator.clipboard.writeText("要复制的文本");

<h4 id="JavaScriptTechniquetopic-8">数组去重复</h4>
const arr = [1, 2, 2, 3, 4, 4, 5];
const unique = [...new Set(arr)];

<h4 id="JavaScriptTechniquetopic-9">查找数组的交集</h4>
const arr1 = [1, 2, 3, 4];
const arr2 = [2, 4, 6, 8];
const intersection = arr1.filter((value) => arr2.includes(value));
// 输出：intersection = [2, 4]

<h4 id="JavaScriptTechniquetopic-10">数组值的总和</h4>
const arr = [1, 2, 3, 4];
const sum = arr.reduce((total, value) => total + value, 0);
// 输出：sum = 10

<h4 id="JavaScriptTechniquetopic-11">条件对象属性</h4>
const condition = true;
const value = "Hello World";
const newObject = { ...(condition &amp;&amp; { key: value }) };
// 输出：newObject = { key: 'Hello World' }

<h4 id="JavaScriptTechniquetopic-12">动态对象属性</h4>
const dynamicKey = "name";
const value = "Riki Doe";
const obj = { [dynamicKey]: value };
// 输出：obj = { name: 'Riki Doe' }

<h4 id="JavaScriptTechniquetopic-13">在线状态检查器</h4>
const isOnline = navigator.onLine ? "Online" : "Offline";
// 输出：isOnline = 'Online'

<h4 id="JavaScriptTechniquetopic-14">离开页面前确认</h4>
window.onbeforeunload = () => "Are you sure you want to leave?";

<h4 id="JavaScriptTechniquetopic-15">按键计算对象值之和</h4>
const arrayOfObjects = [{ x: 1 }, { x: 2 }, { x: 3 }];
const sumBy = (arr, key) => arr.reduce((acc, obj) => acc + obj[key], 0);
sumBy(arrayOfObjects, "x");
// 输出：6

<h4 id="JavaScriptTechniquetopic-16">将 query string 解析为对象</h4>
const query = "name=Riki&amp;age=30";
const parseQuery = (query) => Object.fromEntries(new URLSearchParams(query));
// 输出：parseQuery = { name: 'Riki', age: '30' }

<h4 id="JavaScriptTechniquetopic-17">将秒转换为时间字符串</h4>
const seconds = 3661;
const toTimeString = (seconds) => new Date(seconds * 1000).toISOString().substr(11, 8);
toTimeString(seconds);
// 输出：'01:01:01'

<h4 id="JavaScriptTechniquetopic-18">对象中的最大值</h4>
const scores = { math: 95, science: 99, english: 88 };
const maxObjectValue = (obj) => Math.max(...Object.values(obj));
maxObjectValue(scores);
// 输出：99

<h4 id="JavaScriptTechniquetopic-19">检查对象是否包含值</h4>
const person = { name: "John", age: 30 };
const hasValue = (obj, value) => Object.values(obj).includes(value);
hasValue(person, 30);
// 输出：true

<h4 id="JavaScriptTechniquetopic-20">有条件的修改项</h4>
const scores = [45, 75, 62, 55, 90];
const updatedScores = scores.map((score) => (score &lt; 60 ? score + 20 : score));
// 输出：updatedScores = [65, 75, 62, 75, 90]

<h4 id="JavaScriptTechniquetopic-21">生成数组</h4>
const range = Array.from({ length: 5 }, (_, i) => i + 1);
// 输出：range = [1, 2, 3, 4, 5]

<h4 id="JavaScriptTechniquetopic-22">超时请求</h4>
const timeout = (promise, ms) => Promise.race([promise, new Promise((_, reject) => setTimeout(() => reject(new Error("Timeout")), ms))]);
timeout(fetch("https://api.riki.wang"), 5000)
  .then(() => "handleResponse")
  .catch(() => "handleError");
// 如果在指定的毫秒数内未返回，则拒绝并显示“超时”错误

<h4 id="JavaScriptTechniquetopic-23">提取文件扩展名</h4>
const fileName = "example.png";
const getFileExtension = (str) => str.slice(((str.lastIndexOf(".") - 1) >>> 0) + 2);
// 输出：getFileExtension = 'png'

<h4 id="JavaScriptTechniquetopic-24">检查 tab 是否激活</h4>
const isTabFocused = () => document.hasFocus();

<h4 id="JavaScriptTechniquetopic-25">切换元素的类名</h4>
const element = document.querySelector(".my-element");
const toggleClass = (el, className) => el.classList.toggle(className);
toggleClass(element, "active");

<h2>JavaScript 实用技巧</h2>
<div id="JavaScriptPracticaltoc" class="toc"><a href="#JavaScriptPracticaltopic-0" target="_self">箭头函数</a> <a href="#JavaScriptPracticaltopic-1" target="_self">使用 let 和 const 代替 var</a> <a href="#JavaScriptPracticaltopic-2" target="_self">解构赋值</a> <a href="#JavaScriptPracticaltopic-3" target="_self">展开运算符</a> <a href="#JavaScriptPracticaltopic-4" target="_self">模板字面量</a> <a href="#JavaScriptPracticaltopic-5" target="_self">默认参数</a> <a href="#JavaScriptPracticaltopic-6" target="_self">剩余参数</a> <a href="#JavaScriptPracticaltopic-7" target="_self">对象属性简写</a> <a href="#JavaScriptPracticaltopic-8" target="_self">字符串方法</a> <a href="#JavaScriptPracticaltopic-9" target="_self">短路运算符</a> <a href="#JavaScriptPracticaltopic-10" target="_self">Array.from()</a> <a href="#JavaScriptPracticaltopic-11" target="_self">可选链</a> <a href="#JavaScriptPracticaltopic-12" target="_self">数组快速去重</a> <a href="#JavaScriptPracticaltopic-13" target="_self">空值合并运算符</a> <a href="#JavaScriptPracticaltopic-14" target="_self">数组方法</a> <a href="#JavaScriptPracticaltopic-15" target="_self">使用 for...of 进行迭代</a> <a href="#JavaScriptPracticaltopic-16" target="_self">克隆对象和数组</a> <a href="#JavaScriptPracticaltopic-17" target="_self">动态属性名称</a> <a href="#JavaScriptPracticaltopic-18" target="_self">防抖和节流</a> <a href="#JavaScriptPracticaltopic-19" target="_self">有效使用 console 进行调试</a> </div></center>

<h3 id="JavaScriptPracticaltopic-0">箭头函数</h3>
箭头函数提供了一种简洁的语法，并在词法上绑定 this 值，简化函数声明。

function add() {
 return a + b;
}
// 箭头函数简介写法
const add = (a, b) => a + b;

<h3 id="JavaScriptPracticaltopic-1">使用 let 和 const 代替 var</h3>
避免使用 var 声明变量，使用 let 和 const 以确保块级作用域并避免提升问题。

对于不会重新分配的变量使用 const，对于需要重新分配的变量使用 let。

let name = 'CodeClear';
const age = 18

<h3 id="JavaScriptPracticaltopic-2">解构赋值</h3>
解构赋值方便从对象中提取属性值或从数组中提取值到独立的变量中。

// 对象提取属性值
const person = { name: 'CodeCler', age: 18};
const { name, age } = person;
// 数组提取值
const numbers = [1, 2, 3];
const [ num1, num2 ] = numbers;

<h3 id="JavaScriptPracticaltopic-3">展开运算符</h3>
展开运算符允许你扩展可迭代对象（如数组）的元素或对象的属性。

const numbers = [1, 2, 3];
const newNumbers = [...numbers, 4, 5];
const person = { name: 'CodeClear' };
// 混合赋值
const newPerson = {...person, age: 18}

<h3 id="JavaScriptPracticaltopic-4">模板字面量</h3>
模板字面量提供了一种简单的方法将变量和表达式插入到字符串中，相较于原生字符串拼接增强代码可读性。

const name = 'CodeClear'
const greeting = `Hello, ${name}!`

<h3 id="JavaScriptPracticaltopic-5">默认参数</h3>
为函数参数设置默认值以避免未定义错误。

function greet(name = 'CodeClear') {
 console.log(`Hello, ${name}!`)
}
greet()
greet('Bob'

<h3 id="JavaScriptPracticaltopic-6">剩余参数</h3>
剩余参数允许你将不确定数量的参数表示为数组。

function sum(...numbers) {
 return numbers.reduce((a, b) => a + b, 0)
}
console.log(sum(1, 2, 3, 4, 5, 6)) // 21

<h3 id="JavaScriptPracticaltopic-7">对象属性简写</h3>
当属性名称和变量名称相同时，使用简写语法创建对象。

const name = 'CodeClear';
const age = 18;
const person = { name, age }

<h3 id="JavaScriptPracticaltopic-8">字符串方法</h3>
使用现代字符串方法执行常见的字符串操作。

const str = 'Hello, World!';
console.log(str.includes('World')); // true
console.log(str.startsWith('Hello')); // true
console.log(str.endsWith('!')); // true

<h3 id="JavaScriptPracticaltopic-9">短路运算符</h3>
使用短路运算符进行条件表达式和默认值设置。

const user = { name: 'CodeClear' };
const name = user.name || 'Guest';
const isAdmin = user.isAdmin &amp;&amp; 'Admin'

<h3 id="JavaScriptPracticaltopic-10">Array.from()</h3>
Array.from() 方法可用于将任何可迭代对象转换为数组。

const str = "Hello!";
const arr = Array.from(str);
console.log(arr); //Output: ['H', 'e', 'l', 'l', 'o', '!'

<h3 id="JavaScriptPracticaltopic-11">可选链</h3>
可选链允许你在不检查每个引用是否有效的情况下安全地访问深层嵌套的属性。

const user = { name: 'CodeClear', address: { city: 'New York' } };
const city = user.address?.city;

<h3 id="JavaScriptPracticaltopic-12">数组快速去重</h3>
您可以使用 Set 从数组中删除重复元素，但是这种去重方式只能去除基本数据类型组成的数组。

const arr = [1, 2, 3, 4, 5, 6];
const arr2 = new Set(arr);
const arr3 = [...arr2]

<h3 id="JavaScriptPracticaltopic-13">空值合并运算符</h3>
空值合并运算符 (??) 提供了一种在左操作数为 null 或未定义时返回右操作数的方法。

const user = { name: 'CodeClear' };
const name = user.name ?? 'Guest'

<h3 id="JavaScriptPracticaltopic-14">数组方法</h3>
用数组方法如 map(), filter(), 和 reduce() 以函数式的方式对数组进行常见操作。

const numbers = [1, 2, 3, 4, 5];
const doubled = numbers.map(num => num * 2);
const evens = numbers.filter(num => num % 2 === 0);
const sum = numbers.reduce((total, num) => total + num, 0);

<h3 id="JavaScriptPracticaltopic-15">使用 for...of 进行迭代</h3>
使用 for...of 循环更可读地迭代数组、字符串和其他可迭代对象。

const numbers = [1, 2, 3, 4, 5];
for (const number of numbers) {
  console.log(number);
}

<h3 id="JavaScriptPracticaltopic-16">克隆对象和数组</h3>
使用展开运算符或 Object.assign() 克隆对象和数组。

const original = { name: 'CodeClear', age: 18 };
const clone = { ...original };
const arr = [1, 2, 3];
const arrClone = [...arr];

<h3 id="JavaScriptPracticaltopic-17">动态属性名称</h3>
使用动态属性名称动态设置对象属性。

const propName = 'age';
const person = {
  name: 'CodeClear',
  [propName]: 18
};

<h3 id="JavaScriptPracticaltopic-18">防抖和节流</h3>
通过防抖和节流优化频繁调用的函数，如滚动或调整大小事件。

防抖：
function debounce(func, delay) {
  let timeoutId;
  return function(...args) {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => func.apply(this, args), delay);
  };
}
window.addEventListener('resize', debounce(() => {
  console.log('Resized');
}, 300));
节流：
function throttle(func, limit) {
  let inThrottle;
  return function(...args) {
    if (!inThrottle) {
      func.apply(this, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}
window.addEventListener('scroll', throttle(() => {
  console.log('Scrolled');
}, 300));

<h3 id="JavaScriptPracticaltopic-19">有效使用 console 进行调试</h3>
利用各种 console 方法进行更有效的调试。

console.log('Simple log');
console.warn('This is a warning');
console.error('This is an error');
console.table([{ name: 'CodeClear', age: 18 }, { name: 'Jane', age: 25 }]);
console.group('Group');
console.log('Message 1');
console.log('Message 2');
console.groupEnd();

<h2>JavaScript 强制类型转换</h2>
<div id="toc" class="JavaScriptCoerciontoc"><a href="#JavaScriptCoerciontopic-0" target="_self"><pk>什么是强制类型转换？</pk></a><br><a href="#JavaScriptCoerciontopic-1" target="_self"><pk>三种基本类型转换</pk></a><br><a href="#JavaScriptCoerciontopic-2" target="_self"> 转换为字符串</a><br><a href="#JavaScriptCoerciontopic-3" target="_self"> 转换为数字</a><br><a href="#JavaScriptCoerciontopic-4" target="_self"> 转换为布尔值</a><br><a href="#JavaScriptCoerciontopic-5" target="_self"><pk>常见的强制类型转换场景</pk></a><br><a href="#JavaScriptCoerciontopic-6" target="_self"> 相等运算符（==）与严格相等运算符（===）</a><br><a href="#JavaScriptCoerciontopic-7" target="_self"> 算术运算符</a><br><a href="#JavaScriptCoerciontopic-8" target="_self"> 逻辑运算符</a><br><a href="#JavaScriptCoerciontopic-9" target="_self"><pk>避免强制类型转换的陷阱</pk></a><br><a href="#JavaScriptCoerciontopic-10" target="_self"> NaN陷阱</a><br><a href="#JavaScriptCoerciontopic-11" target="_self"> null和undefined的特殊情况</a><br><a href="#JavaScriptCoerciontopic-12" target="_self"> 字符串连接与算术运算</a><br></div></center>

JavaScript是一种动态类型语言，这意味着变量可以在不同类型之间自由转换。

<h3 id="JavaScriptCoerciontopic-0"><pk>什么是强制类型转换？</pk></h3>
强制类型转换（Coercion）是指将一种数据类型转换为另一种数据类型的过程。

在JavaScript中，这种转换可以是显式的（通过开发者明确调用转换函数）或隐式的（由JavaScript引擎自动进行）。

<h3 id="JavaScriptCoerciontopic-1"><pk>三种基本类型转换</pk></h3>
JavaScript中的强制类型转换主要涉及三种基本类型：字符串、数字和布尔值。

<h3 id="JavaScriptCoerciontopic-2"> 转换为字符串</h3>
将值转换为字符串有多种方式，其中最常见的是通过调用String()函数或使用加号运算符（+）与空字符串相加。

let num = 123;
let str = String(num); // 显式转换
let str2 = num + '';   // 隐式转换
console.log(str);  // "123"
console.log(str2); // "123"

<h3 id="JavaScriptCoerciontopic-3"> 转换为数字</h3>
将值转换为数字也有多种方式，可以使用Number()函数、加号运算符（+）、parseInt()或parseFloat()等。

let str = "456";
let num = Number(str); // 显式转换
let num2 = +str;       // 隐式转换
console.log(num);  // 456
console.log(num2); // 456
需要注意的是，parseInt()和parseFloat()用于解析字符串中的数字，但它们与Number()有所不同，因为它们不会处理非数值字符并且可以解析带有小数点的字符串。

let str = "3.14";
console.log(parseInt(str));  // 3
console.log(parseFloat(str)); // 3.14

<h3 id="JavaScriptCoerciontopic-4"> 转换为布尔值</h3>
所有值在JavaScript中都可以转换为布尔值。

JavaScript中有一些被认为是“假值”的值，它们转换为布尔值时会得到false，包括：0、-0、null、undefined、NaN和空字符串（""）。

其他所有值都被认为是真值，转换为布尔值时会得到true。

console.log(Boolean(0));        // false
console.log(Boolean(""));       // false
console.log(Boolean(null));     // false
console.log(Boolean(undefined));// false
console.log(Boolean(NaN));      // false
console.log(Boolean(123));      // true
console.log(Boolean("hello"));  // true
console.log(Boolean({}));       // true

<h3 id="JavaScriptCoerciontopic-5"><pk>常见的强制类型转换场景</pk></h3>

<h3 id="JavaScriptCoerciontopic-6"> 相等运算符（==）与严格相等运算符（===）</h3>
在使用相等运算符（==）时，JavaScript会进行强制类型转换以比较不同类型的值。

相反，严格相等运算符（===）不会进行类型转换，只在两个值类型相同且值相等时返回true。

console.log(123 == "123"); // true，字符串"123"被转换为数字123
console.log(123 === "123"); // false，类型不同

<h3 id="JavaScriptCoerciontopic-7"> 算术运算符</h3>
当不同类型的值参与算术运算时，JavaScript会尝试将它们转换为数字。

let result = "5" - 3; // "5" 被转换为 5，结果为 2
console.log(result); // 2
result = "5" + 3; // 由于 + 运算符优先进行字符串连接，结果为 "53"
console.log(result); // "53"

<h3 id="JavaScriptCoerciontopic-8"> 逻辑运算符</h3>
逻辑运算符（&amp;&amp;、||、!）也会触发类型转换。

它们通常会将操作数转换为布尔值，以决定运算结果。

console.log(!!"hello"); // true，非空字符串被转换为 true
console.log(!!0);       // false，0 被转换为 false
console.log(null || "default"); // "default"，null 被转换为 false

<h3 id="JavaScriptCoerciontopic-9"><pk>避免强制类型转换的陷阱</pk></h3>
尽管强制类型转换在JavaScript中是常见且有用的，但它也可能导致意外行为。

因此，了解和避免这些陷阱是关键。

<h3 id="JavaScriptCoerciontopic-10"> NaN陷阱</h3>
当尝试将非数值字符串转换为数字时，会得到NaN（Not-a-Number）。

let result = Number("hello");
console.log(result); // NaN

<h3 id="JavaScriptCoerciontopic-11"> null和undefined的特殊情况</h3>
null和undefined在进行类型转换时有一些特殊的行为，需要特别注意。

console.log(Number(null));      // 0
console.log(Number(undefined)); // NaN

<h3 id="JavaScriptCoerciontopic-12"> 字符串连接与算术运算</h3>
由于+运算符既用于字符串连接又用于加法运算，容易引起混淆。

console.log("5" + 3); // "53"，字符串连接
console.log("5" - 3); // 2，算术运算

<h2>提升逻辑判断的可读性</h2>
<div id="logicReadabilitytoc" class="toc"><a href="#logicReadabilitytopic-0" target="_self">初识逻辑判断的复杂性</a><br><a href="#logicReadabilitytopic-1" target="_self">利用 Switch 语句优化代码</a><br><a href="#logicReadabilitytopic-2" target="_self">通过对象字面量提升代码可读性</a><br><a href="#logicReadabilitytopic-3" target="_self">引入 Map 对象进一步优化</a><br><a href="#logicReadabilitytopic-4" target="_self">处理多条件判断</a><br><a href="#logicReadabilitytopic-5" target="_self">使用对象作为 Map 的键</a><br><a href="#logicReadabilitytopic-6" target="_self">使用正则表达式处理复杂条件</a><br></div></center>

根据不同条件执行不同逻辑的场景，这样的逻辑判断可能会导致代码冗长且难以维护。

<h3 id="logicReadabilitytopic-0">初识逻辑判断的复杂性</h3>
在 JavaScript 编程中，条件判断是非常常见的操作。

然而，当条件变得复杂时，代码中的 if/else 或 switch 语句会变得冗长且难以维护。

我们来看看下面这个例子：
const handleButtonClick = (status) => {
  if (status === 1) {
    navigateTo('HomePage');
  } else if (status === 2 || status === 3) {
    navigateTo('ErrorPage');
  } else if (status === 4) {
    navigateTo('SuccessPage');
  } else if (status === 5) {
    navigateTo('CancelPage');
  } else {
    navigateTo('DefaultPage');
  }
}
在这个例子中，我们根据不同的状态码跳转到不同的页面。

虽然逻辑清晰，但随着条件的增加，代码会变得越来越臃肿和难以维护。

为了优化这种代码，我们需要探索更简洁的方法。

<h3 id="logicReadabilitytopic-1">利用 Switch 语句优化代码</h3>
我们可以通过 switch 语句来优化上述代码，使其更易读：
const handleButtonClick = (status) => {
  switch (status) {
    case 1:
      navigateTo('HomePage');
      break;
    case 2:
    case 3:
      navigateTo('ErrorPage');
      break;
    case 4:
      navigateTo('SuccessPage');
      break;
    case 5:
      navigateTo('CancelPage');
      break;
    default:
      navigateTo('DefaultPage');
  }
}
使用 switch 语句后，每种状态对应的处理逻辑更加直观，并且减少了重复代码。

通过 switch，我们可以在一个更结构化的方式中处理多种条件。

然而，随着条件的增加，switch 语句也会变得冗长。

<h3 id="logicReadabilitytopic-2">通过对象字面量提升代码可读性</h3>
将条件判断放入对象中是一个非常有效的优化方式：
const actions = {
  1: 'HomePage',
  2: 'ErrorPage',
  3: 'ErrorPage',
  4: 'SuccessPage',
  5: 'CancelPage',
  default: 'DefaultPage',
};
const handleButtonClick = (status) => {
  const action = actions[status] || actions.default;
  navigateTo(action);
}
在这个示例中，我们使用对象的键值对来存储状态和对应的页面。

当按钮被点击时，通过访问对象属性来决定跳转到哪个页面。

这种写法不仅简洁，而且更容易维护和扩展。

我们可以通过对象的键值对快速找到对应的逻辑，而不需要写一大堆 if/else 或 switch 语句。

<h3 id="logicReadabilitytopic-3">引入 Map 对象进一步优化</h3>
我们还可以利用 ES6 的 Map 对象来实现相同的功能，Map 对象的键可以是任意类型，使用起来更加灵活：
const actions = new Map([
  [1, 'HomePage'],
  [2, 'ErrorPage'],
  [3, 'ErrorPage'],
  [4, 'SuccessPage'],
  [5, 'CancelPage'],
  ['default', 'DefaultPage'],
]);
const handleButtonClick = (status) => {
  const action = actions.get(status) || actions.get('default');
  navigateTo(action);
}
Map 对象允许使用任意类型的值作为键，这使得我们的代码更加灵活。

我们可以通过调用 actions.get(status) 来获取对应的页面路径。

如果状态值不存在，我们可以使用 actions.get('default') 获取默认值。

这种方式不仅简洁，还可以避免一些键值对的冲突问题。

<h3 id="logicReadabilitytopic-4">处理多条件判断</h3>
当我们的逻辑升级为二元判断时，代码量会急剧增加，例如：
const handleButtonClick = (status, role) => {
  if (role === 'guest') {
    if (status === 1) {
      // do something for guest
    } else if (status === 2) {
      // do something for guest
    } // ... more conditions
  } else if (role === 'admin') {
    if (status === 1) {
      // do something for admin
    } else if (status === 2) {
      // do something for admin
    } // ... more conditions
  }
}
当有多个条件时，代码的复杂性会进一步增加。

为了简化代码，我们可以通过 Map 并将条件拼接成字符串作为键：
const actions = new Map([
  ['guest_1', () => { /* do something for guest and status 1 */ }],
  ['guest_2', () => { /* do something for guest and status 2 */ }],
  // ... more mappings
  ['admin_1', () => { /* do something for admin and status 1 */ }],
  ['admin_2', () => { /* do something for admin and status 2 */ }],
  ['default', () => { /* default action */ }],
]);
const handleButtonClick = (role, status) => {
  const action = actions.get(`${role}_${status}`) || actions.get('default');
  action();
}
我们通过拼接字符串将角色和状态组合成键，并在 Map 中查找对应的处理函数。

这种方式使代码更加简洁，易于维护和扩展。

每个组合键对应一个特定的处理函数，避免了嵌套的 if/else 或 switch 语句。

<h3 id="logicReadabilitytopic-5">使用对象作为 Map 的键</h3>
如果将查询条件拼接成字符串感觉不太优雅，可以使用对象作为 Map 的键：
const actions = new Map([
  [{ identity: 'guest', status: 1 }, () => { console.log('Guest, status 1'); }],
  [{ identity: 'guest', status: 2 }, () => { console.log('Guest, status 2'); }],
  [{ identity: 'admin', status: 1 }, () => { console.log('Admin, status 1'); }],
  //...
]);
const handleButtonClick = (identity, status) => {
  // 将 Map 对象转换为数组并查找匹配的键值对
  const action = [...actions].find(([key]) => key.identity === identity &amp;&amp; key.status === status);
  if (action) {
    // action[1] 是找到的键值对中的值（处理函数）
    action[1]();
  } else {
    console.log('Default action');
  }
}
// 测试调用
handleButtonClick('guest', 1);  // 输出: Guest, status 1
handleButtonClick('admin', 1);  // 输出: Admin, status 1
handleButtonClick('guest', 3);  // 输出: Default action
在这个例子中，我们将条件组合成对象，并使用这些对象作为 Map 的键。

通过 find 方法，我们可以查找符合条件的键值对，并执行对应的处理函数。

这种方法使代码更具可读性，并且更容易管理复杂的条件判断。

<h3 id="logicReadabilitytopic-6">使用正则表达式处理复杂条件</h3>
假设在某些场景下，我们需要在同一个身份下处理多个相同状态的逻辑，例如，对于 guest 的 status 1 到 4 处理逻辑相同，status 5 的处理逻辑不同：
const actions = () => {
  const functionA = () => { console.log('Guest, status 1-4'); };
  const functionB = () => { console.log('Guest, status 5'); };
  return new Map([
    [{ identity: 'guest', status: 1 }, functionA],
    [{ identity: 'guest', status: 2 }, functionA],
    [{ identity: 'guest', status: 3 }, functionA],
    [{ identity: 'guest', status: 4 }, functionA],
    [{ identity: 'guest', status: 5 }, functionB],
    //...
  ]);
}
const handleButtonClick = (identity, status) => {
  const action = [...actions()].find(([key]) => key.identity === identity &amp;&amp; key.status === status);
  if (action) {
    action[1]();
  } else {
    console.log('Default action');
  }
}
// 测试调用
handleButtonClick('guest', 1);  // 输出: Guest, status 1-4
handleButtonClick('guest', 5);  // 输出: Guest, status 5
handleButtonClick('admin', 1);  // 输出: Default action
这种方法虽然能解决问题，但需要重复定义多个相同的逻辑。

为了减少重复代码，可以利用正则表达式：
const actions = () => {
  const functionA = () => { console.log('Guest, status 1-4'); };
  const functionB = () => { console.log('Guest, status 5'); };
  return new Map([
    [/^guest_[1-4]$/, functionA],
    [/^guest_5$/, functionB],
   
 //...
  ]);
}
const handleButtonClick = (identity, status) => {
  const action = [...actions()].find(([key]) => key instanceof RegExp &amp;&amp; key.test(`${identity}_${status}`));
  if (action) {
    action[1]();
  } else {
    console.log('Default action');
  }
}
// 测试调用
handleButtonClick('guest', 2);  // 输出: Guest, status 1-4
handleButtonClick('guest', 5);  // 输出: Guest, status 5
handleButtonClick('admin', 3);  // 输出: Default action
使用正则表达式作为键，我们可以更高效地处理多个相同逻辑的条件，避免重复定义相同的处理函数。

这种方法不仅减少了代码量，还使得代码更具可读性和可维护性。

<h2>HTML DOM createObjectURL() method</h2>
The <gr>createObjectURL()</gr> <gr>method </gr>creates a <gr>DOMString containing a URL</gr> representing the object given in the parameter of the method.
The new object URL represents the specified <gr>File object or Blob object</gr>.

<gr>Note:</gr> The URL lifetime is tied to the document in which it was created and To release an object URL, call <a href="https://www.geeksforgeeks.org/html-dom-revokeobjecturl-method/" rel="noreferrer noopener">revokeObjectURL().</a>

<h3><gr>Syntax:</gr></h3>
const url = URL.createObjectURL(object);

Usage:
When using createObjectURL() in your code, remember to call URL.revokeObjectURL() for each object URL created when it’s no longer needed.
This helps manage memory efficiently.

While browsers release object URLs automatically when the document is unloaded, manually revoking them at safe times can improve performance and reduce memory usage.
<gr>Example: </gr>In this example, we will create an object URL for the image object using this method.

html
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
    &lt;meta charset="utf-8">
    &lt;title>URL.createObjectURL example&lt;/title>
&lt;/head>
&lt;body>
    &lt;input type="file">
    &lt;img>
    &lt;p class="p">The URL of this image is : &lt;/p>
&lt;/body>
&lt;script>
    let Element = document.querySelector('input');
    let img = document.querySelector('img');
    Element.addEventListener('change', function () {
        let url = URL.createObjectURL(Element.files[0]);
        img.src = url;
        console.log(url);
        let d = document.querySelector(".p");
        d.textContent += url;
    });
&lt;/script>
&lt;/html>

Output
<img src="https://media.geeksforgeeks.org/wp-content/uploads/20231222170013/rty.gif" loading="lazy">

next() function
JavaScript <gr>AsyncGenerator.prototype.next()</gr> method is used with the asynchronous generators to retrieve the next value in the sequence produced by the generator.
It returns a Promise that resolves to the object with two properties: <gr>value</gr> and <gr>done</gr>.

<gr>Syntax:</gr>
AsyncGenerator.prototype.next(value);

The below examples will explain the practical implementation of the <gr>AsyncGenerator.prototype.next() </gr>method.
<gr>Example 1:</gr>
create a generator function and then use the <gr>next() </gr>method on it by creating an instance of it.

async function* asyncGenerator() {
    yield 3;
    yield 5;
    yield 3;
}
const generator = asyncGenerator();
generator.next().then(result => {
    console.log(result.value);
    console.log(result.done);
});
generator.next().then(result => {
    console.log(result.value);
    console.log(result.done);
});
generator.next().then(result => {
    console.log(result.value);
    console.log(result.done);
});

<gr>Output</gr>
3
false
5
false
3
false
<gr>Example 2:</gr> This example will illustrate the use of the asyncGenerator function and the next() method with the string values.
async function* asyncGenerator() {
    yield 'HI';
    yield 'Async';
    yield 'Generator';
}
const generator = asyncGenerator();
generator.next().then(result => {
    console.log(result.value);
    console.log(result.done);
});
generator.next().then(result => {
    console.log(result.value);
    console.log(result.done);
});
generator.next().then(result => {
    console.log(result.value);
    console.log(result.done);
});

<gr>Output</gr>
HI
false
Async
false
Generator
false

<h2>HTML5 Audio to play a playlist of local mp3</h2>
&lt;input type="file" id="songs" multiple>
&lt;audio controls id="myAudio" autoplay>&lt;/audio>

var songs = document.getElementById("songs"),
  myAudio = document.getElementById("myAudio");

  thenextItem = 0
  files = ["a.mp3". "b.mp3"]
  len = files.length;

  myAudio.addEventListener("<pk>ended</pk>", function(){
    thenextItem += 1;
    playSong(thenextItem);
    console.log(len, thenextItem);

    if((len-1)==thenextItem){
     thenextItem=-1;
    }
  });

  function playSong(n){
    var url = URL.createObjectURL(files[n]);
    <pk>myAudio.setAttribute('src', url);</pk>
    myAudio.play();
  }

example ok:
  thenextItem = 0
  allMusicNames = ['1979 抉擇 .mp3', 'black tape.mp3', 'bodypainting.mp3', 'DEEP STRETCHING.mp3', 'fashionMusic.mp3', 'GreenLeaves.mp3', 'ideas.mp3', 'Jeans.mp3', 'lowBeep.mp3', 'Meditation Music.mp3', 'Miami Swim.mp3', 'pig.mp3', 'Spirit of Harp.mp3', 'Stepping into the Ether.mp3', 'stringVibrate.mp3', 'swim2022.mp3', 'The Sound of Silence.mp3', 'toneBeep.mp3', 'Yellow & blue.mp3', '一生所爱.mp3', '一眼忧伤.mp3', '不了情.mp3', '世界由我造.mp3', '之子于歸.mp3', '倩女幽魂.mp3', '倩影.mp3', '兩忘煙水裡.mp3', '兩生契.mp3', '又见逍遥.mp3', '吴侬软语花妖.mp3', '唢呐断肠.mp3', '复活节.mp3', '大丈夫.mp3', '大俠霍元甲.mp3', '大內群英.mp3', '大刀王五.mp3', '天蠶變 .mp3', '太極張三豐.mp3', '子衿.mp3', '小刀会.mp3', '小提琴 陈情令 无羁.mp3', '少女慈禧.mp3', '幽狐.mp3', '徐小鳳 人似浪花.mp3', '我住長江頭.mp3', '擊鼓.mp3', '春江花月夜.mp3', '春雨彎刀.mp3', '曾路得 天各一方.mp3', '梁凱莉《癡雲》.mp3', '梁祝.mp3', '楚国八百年.mp3', '楚國情歌.mp3', '此恨何时休.mp3', '此生长.mp3', '殇 大提琴版.mp3', '每當變幻時.mp3', '江南春色.mp3', '沧海一声笑.mp3', '清溪潺流.mp3', '游牧时光.mp3', '王琪.mp3', '琵琶吟.mp3', '琵琶语.mp3', '痴情冢.mp3', '石莉娟 二泉映月.mp3', '秋戀.mp3', '程桂蘭  二泉映月.mp3', '空山静.mp3', '管子演奏.mp3', '翡翠劇場 - 風雲.mp3', '葉振棠.mp3', '葬花吟.mp3', '蒹葭.mp3', '誰能明白我.mp3', '跳灰.mp3', '追憶.mp3', '追梦人.mp3', '醉梦 陈悦.mp3', '钢琴梁祝.mp3', '關正傑 - 天蠶變.mp3', '陶笛 森林狂想曲.mp3', '雨碎江南.mp3', '齊豫 - 橄欖樹.mp3',]
  len = allMusicNames.length;

  myAudio.addEventListener("ended", function(){
    thenextItem = Math.floor(Math.random() * (len -1));
    url = "D:\\Dropbox\\Public\\LibDocs\\mp3\\"+ allMusicNames[thenextItem];
    myAudio.src = url;
    myAudio.load();
    myAudio.play();
    myAudio.volume = 0.05;
  });

    // init
    thenextItem = Math.floor(Math.random() * (len -1));
    url = "D:\\Dropbox\\Public\\LibDocs\\mp3\\"+ allMusicNames[thenextItem];
    myAudio.src = url;
    myAudio.load();
    myAudio.volume = 0.05;

example modified for delay action:

var allMusicNames = ['1979 抉擇 .mp3', 'black tape.mp3', 'bodypainting.mp3', 'DEEP STRETCHING.mp3', 'fashionMusic.mp3', 'GreenLeaves.mp3', 'ideas.mp3', 'Jeans.mp3', 'lowBeep.mp3', 'Meditation Music.mp3', 'Miami Swim.mp3', 'pig.mp3', 'Spirit of Harp.mp3', 'Stepping into the Ether.mp3', 'stringVibrate.mp3', 'swim2022.mp3', 'The Sound of Silence.mp3', 'toneBeep.mp3', 'Yellow & blue.mp3', '一生所爱.mp3', '一眼忧伤.mp3', '不了情.mp3', '世界由我造.mp3', '之子于歸.mp3', '倩女幽魂.mp3', '倩影.mp3', '兩忘煙水裡.mp3', '兩生契.mp3', '又见逍遥.mp3', '吴侬软语花妖.mp3', '唢呐断肠.mp3', '复活节.mp3', '大丈夫.mp3', '大俠霍元甲.mp3', '大內群英.mp3', '大刀王五.mp3', '天蠶變 .mp3', '太極張三豐.mp3', '子衿.mp3', '小刀会.mp3', '小提琴 陈情令 无羁.mp3', '少女慈禧.mp3', '幽狐.mp3', '徐小鳳 人似浪花.mp3', '我住長江頭.mp3', '擊鼓.mp3', '春江花月夜.mp3', '春雨彎刀.mp3', '曾路得 天各一方.mp3', '梁凱莉《癡雲》.mp3', '梁祝.mp3', '楚国八百年.mp3', '楚國情歌.mp3', '此恨何时休.mp3', '此生长.mp3', '殇 大提琴版.mp3', '每當變幻時.mp3', '江南春色.mp3', '沧海一声笑.mp3', '清溪潺流.mp3', '游牧时光.mp3', '王琪.mp3', '琵琶吟.mp3', '琵琶语.mp3', '痴情冢.mp3', '石莉娟 二泉映月.mp3', '秋戀.mp3', '程桂蘭  二泉映月.mp3', '空山静.mp3', '管子演奏.mp3', '翡翠劇場 - 風雲.mp3', '葉振棠.mp3', '葬花吟.mp3', '蒹葭.mp3', '誰能明白我.mp3', '跳灰.mp3', '追憶.mp3', '追梦人.mp3', '醉梦 陈悦.mp3', '钢琴梁祝.mp3', '關正傑 - 天蠶變.mp3', '陶笛 森林狂想曲.mp3', '雨碎江南.mp3', '齊豫 - 橄欖樹.mp3',]
var options = '';  // build the List select option
listlen = allMusicNames.length;

for (var i = 0; i < listlen; i++) {
         options += '<option value="' + 'D:/Dropbox/Public/LibDocs/mp3/' +allMusicNames[i]+ '">' + allMusicNames[i] + '</option>';
}
$("#selectList").html(options);

function changeAudioSource(source) {
  selectElement = document.getElementById('selectList');
  selectedOption = selectElement.value;
  console.log('Selected option: ' + selectedOption);

  myaudio.src = selectedOption;
  myaudio.load();
  myaudio.play();
  myaudio.volume = 0.05;
}

window.onload=function(){
    // init
    thenextItem = Math.floor(Math.random() * (listlen -1));
    url = "D:\\Dropbox\\Public\\LibDocs\\mp3\\"+ allMusicNames[thenextItem];
    myaudio = document.getElementById('myaudio');


    myaudio.addEventListener("ended", function(){
      thenextItem = Math.floor(Math.random() * (listlen -1));
      url = "D:\\Dropbox\\Public\\LibDocs\\mp3\\"+ allMusicNames[thenextItem];
console.log(url)
      myaudio.src = url;
      myaudio.load();
      myaudio.play();
      myaudio.volume = 0.05;
    });

    myaudio.setAttribute('src', url);
    myaudio.load();
    myaudio.volume = 0.05;
    myaudio.play();
}



<h2>html5 loading lazy</h2>
&lt;img src="URL" loading="eager|lazy">
&lt;iframe loading="lazy" src="video-player.html" title="...">&lt;/iframe>

eager     Default. Loads an image immediately
lazy      Defer loading of images until some conditions are met

<h2>get Current location Domain Name</h2>
locationUrl = location.href
CurrentDomainName = window.location.hostname

if(CurrentDomainName != 'williamkpchan.github.io'){
  urlHeader = 'D:/Dropbox/Public/LibDocs/mp3/'
}else{
  urlHeader = ''
}

<h2>Timesheet.js时间表库</h2>
Timesheet.js 用于创建时间表。

<pk>功能特点</pk>
• <pk>简洁的 API</pk>。
• <pk>高度可定制化</pk>：通过 CSS 样式调整进行定制。
• <pk>轻量化</pk>

<h3>快速开始</h3>
由于 Timesheet.js 不支持 npm 引入，从 github 中下载源码引入到项目中。

&lt;link rel="stylesheet" href="./libs/timesheet.js/dist/timesheet.min.css" />
&lt;div id="app">
  &lt;div id="timesheet">&lt;/div>
&lt;/div>
&lt;script src="./libs/timesheet.js/dist/timesheet.min.js">&lt;/script>
&lt;script>
  const timesheet = new Timesheet('timesheet', 2000, 2020, [
    ['09/2000', '07/2006', '某某小学', 'default'],
    ['09/2006', '07/2009', '某某初级中学', 'ipsum'],
    ['09/2009', '07/2012', '某某高级中学', 'dolor'],
    ['09/2012', '07/2016', '清华大学', 'lorem'],
  ])
&lt;/script>
['09/2012', '07/2016', '清华大学', 'lorem']，
其中参数，
开始时间: 支持日期格式，例如：2002 、02/2012 ；
结束时间；
标题；
配色：取值 default 红色，lorem 绿色、ipsum 蓝色、dolor 黄色、sit 青色。

<img src="https://mmbiz.qpic.cn/mmbiz_png/gHJkXW0CVr3X5IqlChfCV1d2Zf9pG9fcVI7ibbJ3efZIQUiagzdeMyfmkyZ05OZjMlFyd7N5icWdAQ7CKHAWQcvAw/640">

<h3>应用场景</h3>
• <pk>个人简历网站</pk>：展示个人的工作经历和项目周期，使简历更加直观和具有吸引力。

<img src="https://mmbiz.qpic.cn/mmbiz_png/gHJkXW0CVr3X5IqlChfCV1d2Zf9pG9fcljGNcbUgvgnOE6F2WeQ408VXeZhL5OT03dtukUDEYtTdIoW6nv4Bicw/640">

• <pk>历史事件展示</pk>：制作互动式的历史时间线，通过 Timesheet.js 展示不同历史事件的发生时间，增加用户互动体验。

• <pk>教育应用</pk>：在教育相关的网站或应用中，使用 Timesheet.js 展示课程安排或学术研究的时间序列，帮助学生更好地规划学习进度。

• <pk>数据分析</pk>：将时间相关的数据通过 Timesheet.js 进行可视化展示，便于分析和理解数据随时间的变化趋势。

<h3>总结</h3>
Timesheet.js 是一个简单易用的工具，让你的在不需要复杂编码的情况下创建一个美观的时间轴展示。

<h4>引用链接</h4>
<em>https://github.com/sbstjn/timesheet.js</em>

<h2>如何获取 blob里面的值</h2>
<div id="blobValuetoc" class="toc"><a href="#blobValuetopic-0" target="_self">1.1. JSON 数据</a><br><a href="#blobValuetopic-1" target="_self">1.2. 文本数据</a><br><a href="#blobValuetopic-2" target="_self">1.3. 图像数据</a><br><a href="#blobValuetopic-3" target="_self">1.4. 其他二进制数据</a><br><a href="#blobValuetopic-4" target="_self">1.5. 示例</a><br></div></center>

要从Blob对象中获取其内容需要根据Blob的内容类型采取不同的策略。

<h3 id="blobValuetopic-0">1.1. JSON 数据</h3>
如果Blob包含的是JSON格式的数据，你可以使用TextDecoder来读取它，并将其解析为JSON。

const blob = new Blob([/* ... */], { type: 'application/json' });

// 创建一个读取器
const reader = new FileReader();

reader.onloadend = function() {
  const jsonContent = this.result; // 这里是字符串形式的JSON
  try {
    const jsonData = JSON.parse(jsonContent);
    console.log(jsonData); // 解析后的JSON对象
  } catch (error) {
    console.error('Error parsing JSON', error);
  }
};

reader.readAsText(blob); // 读取Blob作为文本

<h3 id="blobValuetopic-1">1.2. 文本数据</h3>
如果Blob包含的是普通的文本数据，同样可以使用FileReader的readAsText方法。

const blob = new Blob([/* ... */], { type: 'text/plain' });

const reader = new FileReader();

reader.onloadend = function() {
  const textContent = this.result;
  console.log(textContent); // 文本内容
};

reader.readAsText(blob); // 读取Blob作为文本

<h3 id="blobValuetopic-2">1.3. 图像数据</h3>
如果Blob包含的是图像数据，你可以使用URL.createObjectURL来创建一个临时的URL，然后在&lt;img>标签中显示这个URL。

const blob = new Blob([/* ... */], { type: 'image/jpeg' });

const imageUrl = URL.createObjectURL(blob);

const imgElement = document.createElement('img');
imgElement.src = imageUrl;
document.body.appendChild(imgElement); // 显示图像

<h3 id="blobValuetopic-3">1.4. 其他二进制数据</h3>
对于其他类型的二进制数据，可以使用readAsArrayBuffer方法来读取。

const blob = new Blob([/* ... */], { type: 'application/octet-stream' });

const reader = new FileReader();

reader.onloadend = function() {
  const arrayBuffer = this.result;
  // 在这里可以使用arrayBuffer进行进一步处理
  // 比如转换为Uint8Array或其他形式
};

reader.readAsArrayBuffer(blob);

<h3 id="blobValuetopic-4">1.5. 示例</h3>
假设你有一个fetch请求返回了一个Blob对象，你可以这样处理：
fetch('/your-endpoint')
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.blob(); // 获取Blob对象
  })
  .then(blob => {
    // 根据Content-Type确定如何处理
    if (blob.type.startsWith('application/json')) {
      // 处理JSON数据
      const reader = new FileReader();
      reader.onloadend = () => {
        const jsonContent = reader.result;
        const jsonData = JSON.parse(jsonContent);
        console.log(jsonData);
      };
      reader.readAsText(blob);
    } else if (blob.type.startsWith('image/')) {
      // 处理图像数据
      const imageUrl = URL.createObjectURL(blob);
      const imgElement = document.createElement('img');
      imgElement.src = imageUrl;
      document.body.appendChild(imgElement);
    } else if (blob.type === 'text/plain') {
      // 处理纯文本数据
      const reader = new FileReader();
      reader.onloadend = () => {
        const textContent = reader.result;
        console.log(textContent);
      };
      reader.readAsText(blob);
    } else {
      // 处理其他类型的数据
      const reader = new FileReader();
      reader.onloadend = () => {
        const arrayBuffer = reader.result;
        console.log(new Uint8Array(arrayBuffer)); // 以Uint8Array的形式显示数据
      };
      reader.readAsArrayBuffer(blob);
    }
  })
  .catch(error => console.error('There has been a problem with your fetch operation:', error));


请注意，在处理完Blob之后，记得释放创建的临时URL以避免内存泄漏：
// 当不再需要时
URL.revokeObjectURL(imageUrl);

<h2>CSS, JavaScript 让进度条不再单调</h2>

<div id="progressBartoc" class="toc"><a href="#progressBartopic-0" target="_self">超越传统的半圆形进度条</a><br><a href="#progressBartopic-1" target="_self">简洁实用的下载进度动画</a><br><a href="#progressBartopic-2" target="_self">创意十足的进度条动画</a><br><a href="#progressBartopic-3" target="_self">独特的时间进度时钟</a><br><a href="#progressBartopic-4" target="_self">纯CSS的订单处理步骤</a><br><a href="#progressBartopic-5" target="_self">滚动式进度条</a><br><a href="#progressBartopic-6" target="_self">响应式圆形进度条</a><br><a href="#progressBartopic-7" target="_self">旋转3D进度条</a><br></div></center>

<h3 id="progressBartopic-0">超越传统的半圆形进度条</h3>
一个优美的半圆形设计。

它使用ProgressBar.js和SVG，为进度显示带来了更加吸引人的视觉效果。

<gr>源码</gr>：https://codepen.io/andrewsims/pen/ExroZjM

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0KwR6CHeUiamicy3CYskvpz5QoIH4mMN7a94Ig9ocNiaDgqx70fm7RUbxA/640">

<h3 id="progressBartopic-1">简洁实用的下载进度动画</h3>
<gr>源码</gr>：https://codepen.io/aaroniker/pen/ZEYmPqM

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0fTPfGGDTibXc4Puj8y0TADQ6JhAabg6lS9n54sic5h0v44JoL1JGRfxw/640">

<h3 id="progressBartopic-2">创意十足的进度条动画</h3>
<gr>源码：</gr>https://codepen.io/evawythien/pen/jegRxN

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0UJm7ESOxxYtxYrVJf9SA6oic1wZDwID7Ffv2bDib9qzWyfZ0hltznq7w/640">

<h3 id="progressBartopic-3">独特的时间进度时钟</h3>
<gr>源码：</gr>
https://codepen.io/jkantner/pen/MWEmExB

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0184hvsjZdEaGuiabErKZ2soLia8v5MrNKr0LI9vljmrSMYKcB3ebWU4Q/640">

<h3 id="progressBartopic-4">纯CSS的订单处理步骤</h3>
<gr>源码</gr>：
https://codepen.io/jcoulterdesign/pen/zdwajv

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0LIjOhzoM8X7IyYtYTfJkpwwvOOrrBc2UpzV43Wia7BIzpXIybGnptRg/640">

<h3 id="progressBartopic-5">滚动式进度条</h3>
<gr>源码</gr>：
https://codepen.io/thomasvaeth/pen/XZQWMW

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0mtjWg291HYib19Y7RkxMD4f99fibZXx8q1vBVrmQtGBMovBNKiaiclvic3Q/640">

<h3 id="progressBartopic-6">响应式圆形进度条</h3>
<gr>源码</gr>：
https://codepen.io/tiggr/pen/VwwZoOR

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0vicN89VVgDnqribfOEdpyObI7fj1ibNCQZwA2kJbfaEYHkh4Ob3YIjjdQ/640">

<h3 id="progressBartopic-7">旋转3D进度条</h3>
<gr>源码</gr>：
https://codepen.io/ghaste/pen/XWLJWvK

<img src="https://mmbiz.qpic.cn/sz_mmbiz_gif/BAhkmRPsSTR1BviaXubSDGvX9jXopnQb0u2ld8RhAlg7COcwoEayWIiaqL3gvobBU24N1rfibfeY8WgWRlNem70wg/640">


<h2>Chroma.js 颜色处理库</h2>
Chroma.js， 一个小巧而强大的 JavaScript 库

<gr>功能特性
•颜色空间转换</gr>：Chroma.js 支持包括 RGB、HEX、HSL、HSV、LAB、LCH、XYZ 以及 CMYK 在内的颜色空间之间的无缝转换。
• <gr>动态颜色操作</gr>：提供了颜色变暗、变亮等动态调整功能，以适应不同的视觉需求。
• <gr>渐变效果生成</gr>：能够创建平滑且吸引人的颜色渐变效果，为数据可视化增添视觉吸引力。
• <gr>调色板构建</gr>：允许用户构建和管理个性化的颜色调色板，简化颜色使用流程。
• <gr>与 d3.js 的兼容性</gr>：Chroma.js 可与流行的数据可视化库 d3.js 无缝集成，扩展其功能。

<h3>快速开始</h3>
通过 npm 包管理器安装 Chroma.js，或通过在 HTML 文件中引入 CDN 链接来快速集成。
创建 Chroma 对象并利用其丰富的 API，用户可以轻松实现颜色的转换与操作。

npm install chroma-js
Chroma.js 中最基础的操作包括颜色的创建、转换和其他颜色空间的转换。
创建一个 Chroma 对象，然后将其转换为其他颜色格式：
import chroma from "chroma-js"
const color = chroma('#3498db'); // 创建一个颜色对象
console.log(color.hex());       // 输出: #3498db
console.log(color.rgb());      // 输出: [52, 152, 219]
console.log(color.hsl());      // 输出: [204, 0.68, 0.53]
除了颜色转换，Chroma.js 还提供了多种颜色操作方法，比如调整亮度、混合颜色、生成渐变色等：
let color1 = chroma('#ff0000').brighten(2);  // 提高亮度
let color2 = chroma.mix('#ff0000', '#0000ff'); // 混合红色和蓝色
console.log(color1.hex());                   // 输出: 根据实际调整结果变化
console.log(color2.hex());                   // 输出: 根据实际调整结果变化
Chroma.js 还可以生成漂亮的颜色渐变，数据可视化比较常用：
let scale = chroma.scale(['white', 'red']);
console.log(scale(0.5).hex());  // 输出: "#ff8080"，介于白色和红色中间的颜色

<h2>CSS 和 JavaScript 时间线设计</h2>
时间线可以简洁、生动地展示内容。
<h3>聚焦历史事件</h3>
<k>源码</k>：
https://codepen.io/stefan-kyurkchiev/pen/NZGmJB

<h3>博客文章时间线</h3>
时间线不仅可以用来展示历史事件，还可以用于按时间顺序排列的内容展示，比如博客文章。
<k>源码</k>：
https://codepen.io/Tracy_Tung/pen/XLmyaZ

<h3>多功能的视图切换</h3>
可以通过键盘、拖动或点击来浏览时间线，还可以自由放大或缩小内容，并快速回到时间线的起点。
<k>源码：</k>
https://codepen.io/sgroff04/pen/JOLrGd

<h3>独特的时间线</h3>
高瘦的面板。
将鼠标悬停在面板上时，会出现全彩色的图片和文本。
<k>源码：</k>
https://codepen.io/elaleph23/pen/ZNBMJZ

<h3>滚动式</h3>
<k>源码</k>：
https://codepen.io/tns301/pen/yaboKX

<h3>简约实用的时间线</h3>
<k>源码</k>：
https://codepen.io/adhitamafikri/pen/PaxEMR

<h2>Node.js后端利器 Hapi.js</h2>
Hapi.js（简称Hapi）是一个用于构建应用程序和服务的丰富框架，基于Node.js。
Hapi.js 提供了一系列内置的功能，让你不再需要频繁依赖第三方插件，简化了开发流程。

<h4>Hapi.js的使用方式</h4>
Hapi.js的安装和使用非常简单，你只需要安装它并写几行代码就能启动一个服务器。

以下是一个简单的示例：
// 安装Hapi.js
// npm install @hapi/hapi
// 引入Hapi.js
const Hapi = require('@hapi/hapi');

// 创建服务器实例
const init = async () => {
  const server = Hapi.server({
    port: 3000,
    host: 'localhost'
  });

  // 定义一个简单的路由
  server.route({
    method: 'GET',
    path: '/',
    handler: (request, h) => {
      return { hello: 'world' };
    }
  });

  // 启动服务器
  await server.start();
  console.log('Server running on %s', server.info.uri);
};

process.on('unhandledRejection', (err) => {
  console.log(err);
  process.exit(1);
});

init();

<h4>Hapi.js的优劣势</h4>
功能强大：包括验证、路由、插件系统等，减少了对第三方库的依赖。

劣势：
学习曲线：由于功能丰富且高度可配置，对新手来说可能需要一些时间来熟悉。
重量级：相比于一些轻量级框架，Hapi.js的功能和配置可能显得有些“重”。
性能负担：虽然Hapi.js性能不错，但在极高并发场景下，可能仍需要额外的性能优化。

<h4>7. 使用Hapi.js需要注意的地方</h4>
版本兼容性：确保所使用的插件版本和Hapi.js主版本匹配，避免依赖冲突。
性能优化：在高并发场景下，依然需要进行性能调优，比如使用缓存和负载均衡。
安全配置：应用默认的安全配置，并根据需求进行调整，确保应用的安全性。

<h2>无限滚动网格库 InfiniteGrid</h2>
<div id="InfiniteGridtoc" class="toc"><a href="#InfiniteGridtopic-0" target="_self">核心功能</a><br><a href="#InfiniteGridtopic-1" target="_self"> 网格类型</a><br><a href="#InfiniteGridtopic-2" target="_self"> 框架融合</a><br><a href="#InfiniteGridtopic-3" target="_self">快速开始</a><br></div></center>

InfiniteGrid 是什么？
允许开发者创建各种类型的网格布局，如瀑布流、整齐排列或框架布局，并支持多平台，包括桌面端、移动端以及主流前端框架的集成，如 Angular、React、Vue 和 Svelte。
InfiniteGrid 的核心在于其高效的 DOM 管理和性能优化策略，通过维持较低的 DOM 数量来保证流畅的用户体验，即使在元素大小不一的情况下也能快速响应。

<h3 id="InfiniteGridtopic-0">核心功能</h3>
<h4 id="InfiniteGridtopic-1"> 网格类型</h4>
InfiniteGrid 支持多种布局类型，包括 MasonryInfiniteGrid（瀑布流布局）、JustifiedInfiniteGrid、FrameInfiniteGrid 和 PackingInfiniteGrid，适用于不同的展示需求。

<k>MasonryInfiniteGrid</k> MasonryInfiniteGrid 是一种网格，用于堆叠与一堆砖块宽度相同的项目。
将所有图像的宽度调整为相同大小，找到高度最低的列，然后插入新项目。

<k>JustifiedInfiniteGrid</k> “justified”是一个印刷术语，意思是“它适合一行宽”。
JustifiedGrid 是根据给定大小的线填充项目的网格。
stretch基本上可以打破项目的比例并拉伸内联尺寸以填充容器。
如果将sizeRange范围设置得窄，则可以很好地拉伸。

<k>FrameInfiniteGrid</k> “框架”是一个印刷术语，意思是“它适合一行宽”。
 FrameGrid 是在给定尺寸的线条的基础上填充项目的网格。

<k>PackingInfiniteGrid</k>

<h4 id="InfiniteGridtopic-2"> 框架融合</h4>
InfiniteGrid 支持多种前端框架，如 Angular、React、Vue、Svelte 等，易于集成到现有的项目中 。
• @egjs/vue3-infiniteGrid
• @egjs/react-infiniteGrid

<h3 id="InfiniteGridtopic-3">快速开始</h3>
InfiniteGrid 提供了多种安装方式 npm 或 yarn、CDN 等方式。
npm install --save @egjs/infinitegrid
# CDN 引入
&lt;script src="https://unpkg.com/@egjs/infinitegrid/dist/infinitegrid.min.js"&gt;&lt;/script&gt;
定义容器 DOM 元素
<k>&lt;div class="container"&gt;&lt;/div&gt;</k>
通过 ES 模块引入到项目中。

// <k>导入 MasonryInfiniteGrid 类，它是 @egjs/infinitegrid 库的一部分，用于创建瀑布流布局。</k>
import { MasonryInfiniteGrid } from "@egjs/infinitegrid";

// <k>定义 getItems 函数，它生成一组新的项目元素。</k>
function getItems(nextGroupKey, count) {
  const nextItems = []; // <gr>初始化一个空数组来存放生成的项目。</gr>
  // <gr>循环创建 count 个项目。</gr>
  for (let i = 0; i &lt; count; ++i) {
    const num = nextGroupKey * count + i; // <gr>计算每个项目的编号。</gr>
    nextItems.push(`&lt;div class="item"&gt;&lt;/div&gt;`); // <gr>将一个新项目添加到数组中。</gr>
  }
  return nextItems; // <gr>返回生成的项目数组。</gr>
}

// <k>创建 MasonryInfiniteGrid 实例，并设置其容器为拥有 ".container" 选择器的元素，以及设置间隔为 5px。</k>
const ig = new MasonryInfiniteGrid(".container", {
  gap: 5,
});

// <k>监听 "requestAppend" 事件，当需要追加新内容时触发。</k>
ig.on("requestAppend", (e) =&gt; {
  // <gr>计算下一个组的键值，如果 e.groupKey 是 undefined，则默认为 0，然后加 1。</gr>
  const nextGroupKey = (+e.groupKey || 0) + 1;
  // <gr>调用 append 方法，传入新生成的项目数组和组键，以追加到网格布局中。</gr>
  ig.append(getItems(nextGroupKey, 10), nextGroupKey);
});

// <k>调用 renderItems 方法来渲染初始的项目。</k>
ig.renderItems();
实现了一个基本的无限滚动功能，当用户滚动到页面底部时，会自动加载更多的项目。
getItems 函数用于生成新的项目，requestAppend 事件监听器用于在需要时追加新项目。
ig.renderItems() 用于初始化渲染项目。

<h2>Reduce进阶用法</h2>
<div id="advanceReducetoc" class="toc"><a href="#advanceReducetopic-0" target="_self"> 基本语法</a><br><a href="#advanceReducetopic-1" target="_self"> 工作流程</a><br><a href="#advanceReducetopic-2" target="_self"> 举个简单的例子</a><br><a href="#advanceReducetopic-3" target="_self"><pk>基础示例</pk></a><br><a href="#advanceReducetopic-4" target="_self"> 场景1：计算数组的总和</a><br><a href="#advanceReducetopic-5" target="_self"> 场景2：数组元素的拼接</a><br><a href="#advanceReducetopic-6" target="_self"> 场景3：找到数组中的最大值</a><br><a href="#advanceReducetopic-7" target="_self"><pk>进阶用法</pk></a><br><a href="#advanceReducetopic-8" target="_self"> 1. 扁平化数组</a><br><a href="#advanceReducetopic-9" target="_self"> 2. 分割数组——分页显示商品列表</a><br><a href="#advanceReducetopic-10" target="_self"> 3. 统计出现次数</a><br><a href="#advanceReducetopic-11" target="_self"> 4. 查找元素位置</a><br><a href="#advanceReducetopic-12" target="_self"> 5. 组合函数——订单折扣计算</a><br><a href="#advanceReducetopic-13" target="_self"> 6. 数组去重——数据清洗中的重复项去除</a><br><a href="#advanceReducetopic-14" target="_self"> 7. 计算平均值——用户评分系统</a><br><a href="#advanceReducetopic-15" target="_self"> 8. 找最大值和最小值——商品价格筛选</a><br><a href="#advanceReducetopic-16" target="_self"> 9. URL 参数解析——处理用户请求中的查询参数</a><br><a href="#advanceReducetopic-17" target="_self"> 10. URL 参数序列化——生成API请求参数</a><br><a href="#advanceReducetopic-18" target="_self"> 11. 对象分组——按属性分组用户数据</a><br><a href="#advanceReducetopic-19" target="_self"> 12. 创建查找表——快速查找产品信息</a><br><a href="#advanceReducetopic-20" target="_self"> 13. 合并数组为对象——将表单字段与值配对</a><br><a href="#advanceReducetopic-21" target="_self"> 14. 检查字符串是否为回文——验证用户输入</a><br></div></center>

<h3 id="advanceReducetopic-0"> 基本语法</h3>
array.reduce(function(total, currentValue, currentIndex, arr), initialValue)

<gr>array</gr>：你要操作的数组。
<gr>function</gr>：用来处理数组每个元素的回调函数。
<gr>initialValue</gr>：可选的初始值，可以不写。

具体点说，回调函数里有这些参数：
<gr>total</gr>：累计值。
第一次是初始值，之后是上一次循环的结果。
<gr>currentValue</gr>：当前处理的数组元素。
<gr>currentIndex</gr>：当前元素的索引，通常用不到，可以忽略。
<gr>arr</gr>：当前正在处理的整个数组，也可以忽略。

<h3 id="advanceReducetopic-1"> 工作流程</h3>
理解这些参数后，我们来看reduce是怎么工作的：
<gr>设置初始值</gr>：如果你给了initialValue，它会作为total的初始值；如果没给，数组的第一个元素会作为初始值。
<gr>迭代处理</gr>：reduce从初始值开始（或者数组的第一个/第二个元素），逐个处理每个currentValue，并把结果累加到total。
<gr>完成迭代</gr>：数组处理完了，reduce就会返回累加后的最终结果。

<h3 id="advanceReducetopic-2"> 举个简单的例子</h3>
假设你有一个数组[1, 2, 3, 4]，你想算出这个数组中所有数字的和：
const sum = [1, 2, 3, 4].reduce(function(total, currentValue) {
  return total + currentValue;
}, 0);

console.log(sum); // 输出：10

看，这段代码就是在做加法，reduce从0开始，每次把当前数字加到total上，最后得到10。
<h3 id="advanceReducetopic-3"><pk>基础示例</pk></h3>
reduce方法在JavaScript中就像一个万能的工具箱，可以帮你轻松完成各种任务。
<h3 id="advanceReducetopic-4"> 场景1：计算数组的总和</h3>
想象一下，你是一名超市收银员，顾客买了一堆东西，现在需要计算总价。
你拿着收银机（reduce方法），每扫描一个商品的价格（数组中的每个数字），就把它累加到总金额中。
最后，你告诉顾客一共需要多少钱。

代码如下：
const prices = [5, 12, 3, 7, 10];
const totalAmount = prices.reduce((total, price) =&gt; total + price, 0);
console.log(totalAmount); // 输出：37

这里reduce就是在帮你“算账”，它从0开始，每次加上一个商品的价格，最后得到总金额37。
<h3 id="advanceReducetopic-5"> 场景2：数组元素的拼接</h3>
假设你在写一首歌的歌词，每个词就像一颗珍珠，你需要把它们串成一句完整的话。
reduce在这里就像一根线，把这些珍珠一个一个串起来，最终形成了一串美丽的项链。

代码如下：
const lyrics = ["I", "love", "coding", "with", "JavaScript"];
const sentence = lyrics.reduce((total, word) =&gt; total + " " + word);
console.log(sentence); // 输出："I love coding with JavaScript"

在这个例子中，reduce把每个词拼接在一起，最终形成了这句优美的话："I love coding with JavaScript"。
<h3 id="advanceReducetopic-6"> 场景3：找到数组中的最大值</h3>
想象你在组织一次班级选拔赛，想找出谁是班里的“最强王者”。
每当有一个新同学（currentValue）登场时，你都要和现任“王者”（total）比一比，看谁更强，最终挑出那个真正的“王者”。

代码如下：
const scores = [45, 85, 72, 93, 66];
const highestScore = scores.reduce((max, score) =&gt; Math.max(max, score), -Infinity);
console.log(highestScore); // 输出：93

在这个比喻中，reduce方法帮你把所有同学的分数都比了一遍，最后选出分数最高的那个，成为“最强王者”。
<h3 id="advanceReducetopic-7"><pk>进阶用法</pk></h3>
JavaScript的reduce方法不仅能处理基础的数组操作，在实际业务场景中，它还能帮你解决很多复杂的问题。
接下来，我们将通过具体的业务场景，结合一些代码示例，来帮助你更好地理解这些高级用法。
<h3 id="advanceReducetopic-8"> 1. 扁平化数组</h3>
想象你有一个装满了小盒子的大盒子，而这些小盒子里又装着更小的盒子。
你的任务是把所有的小盒子里的物品全部倒出来，放到一个平面上，这样你可以一眼看到所有物品。
这就是我们要做的“扁平化”操作。

function Flat(arr = []) {
    return arr.reduce((total, currentValue) =&gt; total.concat(Array.isArray(currentValue) ? Flat(currentValue) : currentValue), []);
}

const nestedFiles = [0, 1, [2, 3], [4, 5, [6, 7]], [8, [9, 10, [11, 12]]]];
console.log(Flat(nestedFiles)); // 输出：[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]

reduce：就像把大盒子一层层打开。
Array.isArray(currentValue)：检查当前拿到的是否还是一个小盒子（数组）。
Flat(currentValue)：如果是小盒子，再递归地把它打开，直到拿出所有物品（非数组元素）。
concat：把这些物品一个个放到我们铺开的平面上（结果数组）。

<h3 id="advanceReducetopic-9"> 2. 分割数组——分页显示商品列表</h3>
想象你在打包一批商品，每个包裹只能装固定数量的商品。
当一个包裹装满时，你就开始打包下一个包裹。
最终，你会得到一系列整齐的包裹，每个包裹里都有固定数量的商品。
这就是我们要做的“分页显示”。

function Chunk(arr, size) {
    return arr.length ? arr.reduce((total, currentValue) =&gt; (total[total.length - 1].length === size ? total.push([currentValue]) : total[total.length - 1].push(currentValue), total), [[]]) : [];
}

const products = [1, 2, 3, 4, 5];
console.log(Chunk(products, 2)); // 输出：[[1, 2], [3, 4], [5]]

reduce：就像在打包商品。
total[total.length - 1]：这是当前正在打包的包裹。
total[total.length - 1].length === size：检查当前包裹是否装满。
push：如果满了，开始一个新的包裹；如果没满，把商品继续装入当前包裹。

<h3 id="advanceReducetopic-10"> 3. 统计出现次数</h3>
想象你在统计每个用户点击了多少次按钮，就像在记录每个用户按下不同按钮的次数。
每次用户点击按钮，你就在一个记录本上对应的按钮旁边记下一笔，最后你就可以知道每个按钮被点击了多少次。

function Counting(arr) {
  return arr.reduce((total, currentValue) =&gt; {
    total[currentValue] = (total[currentValue] || 0) + 1;
    return total;
  }, {});
}

const userActions = ['click', 'scroll', 'click', 'hover', 'click'];
console.log(Counting(userActions)); 
// 输出：{ 'click': 3, 'scroll': 1, 'hover': 1 }

reduce：就像在帮你统计每个事件的发生次数。
total[currentValue]：这是记录本上对应事件的计数。
total[currentValue] || 0：如果这个事件还没被记录过，就初始化为0。
+1：每次事件发生，就在对应的计数上加1。

<h3 id="advanceReducetopic-11"> 4. 查找元素位置</h3>
想象你在一堆订单中寻找那些出了问题的订单（比如状态为“异常”），就像在一份名单中标记出所有异常订单的位置，以便后续处理。

function Position(arr, val) {
  return arr.reduce((total, currentValue, currentIndex) =&gt; {
    if (currentValue.status === val) {
      total.push(currentIndex);
    }
    return total;
  }, []);
}

const orders = [
  { id: 1, status: 'completed' },
  { id: 2, status: 'pending' },
  { id: 3, status: 'exception' },
  { id: 4, status: 'exception' }
];
console.log(Position(orders, 'exception')); // 输出：[2, 3]

reduce：就像在浏览订单列表，每找到一个符合条件的订单，就记下它的位置。
currentValue.status === val：检查当前订单是否是“异常”状态。
push(currentIndex)：如果是异常订单，就把它的位置（索引）记录下来。

<h3 id="advanceReducetopic-12"> 5. 组合函数——订单折扣计算</h3>
想象你在为用户计算订单总价，这个过程就像在制作一道美味的菜肴，需要按顺序添加各种配料（折扣、会员优惠、税费）。
每一步都对最终的味道（价格）有影响，最后得到的是用户需要支付的总价。

const addDiscount = (x) =&gt; x - 5;
const applyMemberDiscount = (x) =&gt; x * 0.9;
const addTax = (x) =&gt; x + (x * 0.08);

const composedFunctions = [addDiscount, applyMemberDiscount, addTax];

const finalPrice = composedFunctions.reduce((total, currentValue) =&gt; currentValue(total), 100);
console.log(finalPrice); 

composedFunctions：这里的数组就像一系列步骤，每一步都对订单总价进行处理。
reduce：依次执行每个步骤，把当前的价格传给下一个处理函数。
100：初始的订单价格。
finalPrice：经过所有处理后的最终订单价格。

<h3 id="advanceReducetopic-13"> 6. 数组去重——数据清洗中的重复项去除</h3>
想象你在整理一堆文件（数据），不小心有些文件重复了。
为了确保每个文件只保留一份，你需要把重复的文件清理掉。
reduce方法就像一个过滤器，帮你把这些重复项去掉，只留下唯一的文件。

function Uniq(arr) {
    return arr.reduce((total, currentValue) =&gt; total.includes(currentValue) ? total : [...total, currentValue], []);
}

const rawData = [2, 1, 0, 3, 2, 1, 2];
console.log(Uniq(rawData)); // 输出：[2, 1, 0, 3]

reduce：就像一个过滤器，遍历数组中的每个元素。
total.includes(currentValue)：检查当前元素是否已经存在于结果数组中。
total：如果当前元素已经存在，就跳过；否则，把它加到结果数组中。

<h3 id="advanceReducetopic-14"> 7. 计算平均值——用户评分系统</h3>
想象你在收集用户对某个产品的评分，现在你需要计算出这个产品的平均评分，就像把所有评分加起来，然后平分给每个用户，得到一个平均分。
reduce方法可以帮你快速完成这个计算。

function Average(arr) {
  return arr.reduce((total, currentValue, currentIndex, array) =&gt; {
    total += currentValue;
    if (currentIndex === array.length - 1) {
      return total / array.length;
    }
    return total;
  }, 0);
}

const ratings = [4, 5, 3, 4, 5];
console.log(Average(ratings)); // 输出：4.2

reduce：就像一个评分收集器，遍历每个用户的评分。
total += currentValue：把每个评分累加到总分里。
if (currentIndex === array.length - 1)：在最后一个评分加完后，计算平均值。
total / array.length：总分除以评分人数，得到平均分。
	•	reduce：就像一个评分收集器，遍历每个用户的评分。
total += currentValue：把每个评分累加到总分里。
if (currentIndex === array.length - 1)：在最后一个评分加完后，计算平均值。
total / array.length：总分除以评分人数，得到平均分。

<h3 id="advanceReducetopic-15"> 8. 找最大值和最小值——商品价格筛选</h3>
想象你在逛一个电商平台，正在寻找一件最便宜或者最贵的商品。
你可能会逐个查看商品的价格，然后记住当前看到的最低价或最高价。
reduce方法就像你的记忆助手，帮你快速找出列表中最高或最低的价格。

function Max(arr = []) {
    return arr.reduce((total, currentValue) =&gt; total &gt; currentValue ? total : currentValue);
}

function Min(arr = []) {
    return arr.reduce((total, currentValue) =&gt; total &lt; currentValue ? total : currentValue);
}

const prices = [120, 450, 210, 650, 380];
console.log(Max(prices)); // 输出：650
console.log(Min(prices)); // 输出：120

Max函数：通过遍历数组，记住当前看到的最大价格。
Min函数：同样遍历数组，记住当前看到的最小价格。
reduce：在遍历过程中比较每个商品的价格，并更新最大值或最小值。

<h3 id="advanceReducetopic-16"> 9. URL 参数解析——处理用户请求中的查询参数</h3>
想象你在开发一个搜索功能，当用户在搜索框中输入条件并提交时，URL会包含这些查询参数。
你需要把这些参数拆解开，放到一个对象里，这样你就可以用它们来执行搜索查询。
reduce方法可以帮你轻松完成这一步。

function ParseUrlSearch(str) {
    return str.replace(/(^\?)|(&amp;$)/g, "").split("&amp;").reduce((total, currentValue) =&gt; {
        const [key, val] = currentValue.split("=");
        total[key] = decodeURIComponent(val);
        return total;
    }, {});
}

const url = 'key1=value1&amp;key2=value2&amp;key3=value3';
console.log(ParseUrlSearch(url)); 
// 输出：{ key1: 'value1', key2: 'value2', key3: 'value3' }

replace(/(^?)|(&amp;$)/g, "")：去掉URL中的问号或其他特殊符号，留下纯参数部分。
split("&amp;")：将参数字符串按“&amp;”分隔成一个数组，每个元素是一个“key=value”的形式。
reduce：遍历这个数组，把每个“key=value”解析成键值对，存入一个对象中。
decodeURIComponent(val)：对参数值进行解码，以防止URL编码问题。

<h3 id="advanceReducetopic-17"> 10. URL 参数序列化——生成API请求参数</h3>
想象你在准备向后端发送一个API请求，你手里有一张列着参数的清单（对象），但后端要求你把这些参数按一定格式（查询字符串）打包发送。
reduce方法就像一个打包工具，把这些参数按照规定的格式整理好，方便你发送请求。

function StringifyUrlSearch(search) {
    return Object.entries(search).reduce(
        (total, currentValue) =&gt; `${total}${currentValue[0]}=${encodeURIComponent(currentValue[1])}&amp;`,
        Object.keys(search).length ? "?" : ""
    ).replace(/&amp;$/, "");
}

const params = { foo: "bar", baz: 42 };
console.log(StringifyUrlSearch(params)); // 输出："?foo=bar&amp;baz=42"

Object.entries(search)：将对象转换为一个二维数组，每个元素是一个[key, value]对，方便遍历。
reduce：遍历每个参数对，将它们拼接成“key=value”的形式，并用“&amp;”连接。
encodeURIComponent(currentValue[1])：对参数值进行编码，确保特殊字符在URL中合法。
replace(/&amp;$/, "")：去掉最后一个多余的“&amp;”符号，使查询字符串格式正确。

<h3 id="advanceReducetopic-18"> 11. 对象分组——按属性分组用户数据</h3>
想象你在管理一个大型的用户数据库，你需要根据用户的某个属性（比如年龄）将他们分组，这样可以更方便地进行统计和分析。
reduce方法就像一个分类器，帮你把用户按照指定的属性归类到不同的组里。

function Grouping(arr, key) {
  return arr.reduce((total, currentValue) =&gt; {
    if (!total[currentValue[key]]) {
      total[currentValue[key]] = [];
    }
    total[currentValue[key]].push(currentValue);
    return total;
  }, {});
}

const users = [
  { name: 'Alice', age: 25 },
  { name: 'Bob', age: 30 },
  { name: 'Charlie', age: 25 },
  { name: 'Dave', age: 30 }
];
console.log(Grouping(users, 'age'));
/*
输出：
{
  '25': [{ name: 'Alice', age: 25 }, { name: 'Charlie', age: 25 }],
  '30': [{ name: 'Bob', age: 30 }, { name: 'Dave', age: 30 }]
}
*/

reduce：就像在整理用户数据，根据指定的属性（比如年龄）将用户归类。
total[currentValue[key]]：检查当前分类组是否已经存在，如果不存在，就创建一个新的数组来存放这一组用户。
push(currentValue)：将用户添加到对应的分组中。

<h3 id="advanceReducetopic-19"> 12. 创建查找表——快速查找产品信息</h3>
想象你在管理一个电商平台，需要快速找到某个产品的详细信息。
如果有一个查找表（类似目录），你只需根据产品ID就能快速找到对应的产品信息。
reduce方法可以帮你把产品数组转换为这样的查找表。

function arrayToMap(arr, key) {
  return arr.reduce((total, currentValue) =&gt; {
    total[currentValue[key]] = currentValue;
    return total;
  }, {});
}

const products = [
  { id: 1, name: 'Laptop', price: 999 },
  { id: 2, name: 'Phone', price: 699 },
  { id: 3, name: 'Tablet', price: 499 },
];
const productMap = arrayToMap(products, 'id');

console.log(productMap);
/*
输出：
{
  '1': { id: 1, name: 'Laptop', price: 999 },
  '2': { id: 2, name: 'Phone', price: 699 },
  '3': { id: 3, name: 'Tablet', price: 499 }
}
*/

reduce：遍历产品数组，逐一处理每个产品。
total[currentValue[key]] = currentValue：将产品的ID作为查找表的键，产品的详细信息作为对应的值，存入查找表。
total：最终形成一个以产品ID为键，产品信息为值的对象，方便快速查找。

<h3 id="advanceReducetopic-20"> 13. 合并数组为对象——将表单字段与值配对</h3>
想象你在处理一份表单，表单上有多个字段（比如姓名、年龄、性别），用户填写了相应的值。
现在你需要把这些字段名和用户输入的值配对，形成一个对象，以便提交给后端处理。
reduce方法可以帮你将这两个数组合并成一个对象。

function Merge(arr1, arr2) {
  return arr1.reduce((total, currentValue, index) =&gt; {
    total[currentValue] = arr2[index];
    return total;
  }, {});
}

const fields = ['name', 'age', 'gender'];
const values = ['Alice', 25, 'female'];
console.log(Merge(fields, values)); // 输出：{ name: 'Alice', age: 25, gender: 'female' }

reduce：遍历字段数组arr1，逐一处理每个字段。
total[currentValue] = arr2[index]：将字段名作为对象的键，将对应的用户输入值作为值，添加到对象中。
index：通过索引匹配字段名和对应的输入值。

<h3 id="advanceReducetopic-21"> 14. 检查字符串是否为回文——验证用户输入</h3>
想象你在开发一个系统，需要验证用户输入的字符串是否是回文。
回文指的是正着读和倒着读都一样的字符串，比如“racecar”。
reduce方法可以帮你快速检查这个字符串是否符合回文的要求。

function isPalindrome(str) {
  return str.split('').reduce((total, currentValue, index, array) =&gt; {
    return total &amp;&amp; currentValue === array[array.length - index - 1];
  }, true);
}

const input = 'racecar';
console.log(isPalindrome(input)); // 输出：true

split('')：将字符串分割成单个字符的数组。
reduce：遍历字符数组，逐个比较字符是否对称。
total &amp;&amp; currentValue === array[array.length - index - 1]：检查当前字符是否与对应位置的字符相同，如果全部匹配，则为回文。

<h2>箭头函数与arguments对象</h2>
<div id="arrowNargtoc" class="toc"><a href="#arrowNargtopic-0" target="_self">代码分析</a><br><a href="#arrowNargtopic-1" target="_self">解决方法</a><br><a href="#arrowNargtopic-2" target="_self"> 使用 rest 参数：</a><br><a href="#arrowNargtopic-3" target="_self"> 使用普通函数表达式：</a><br><a href="#arrowNargtopic-4" target="_self">结束</a><br></div></center>

<img src="https://mmbiz.qpic.cn/sz_mmbiz_png/KEXUm19zKo5fClWBRLLYFd1vap9etmPZaHdWN7gSVnlVGKFWYOZODd9Sicw8jFiaGYNqTC6ibAFzGtTiaAhfsxEdoA/640">
<h3 id="arrowNargtopic-0">代码分析</h3>
const func = () =&gt; arguments.length;
console.log(func(1, 2, 3));

<gr>箭头函数与 arguments 对象：</gr>
在JavaScript中，arguments 对象是一个类数组对象，它包含了传递给函数的所有参数。
传统的函数表达式和函数声明中可以访问 arguments 对象。
然而，<gr>箭头函数没有自己的 arguments 对象</gr>。
它会从<gr>其外层作用域</gr>中继承 arguments。

<gr>为什么会出错：</gr>
当你调用 func(1, 2, 3) 时，JavaScript 会尝试在箭头函数内部访问 arguments。
由于箭头函数没有自己的 arguments 对象，JavaScript 会向外查找，但外层作用域中也没有 arguments 的定义。
这种情况下，JavaScript 会抛出一个 ReferenceError，说明 arguments 未定义。
不论是在严格模式还是非严格模式下，这段代码都会抛出相同的错误，因为 arguments 变量在箭头函数的上下文中是不可用的。

所以选择 <gr>B:Error</gr>

<h3 id="arrowNargtopic-1">解决方法</h3>
如果你想在函数中获取传递的参数数量，可以使用 rest 参数代替 arguments，或者改用普通函数表达式。

<h4 id="arrowNargtopic-2"> 使用 rest 参数：</h4>
const func = (...args) =&gt; args.length;
console.log(func(1, 2, 3));  // 输出 3

<h4 id="arrowNargtopic-3"> 使用普通函数表达式：</h4>
function func() {
  return arguments.length;
}
console.log(func(1, 2, 3));  // 输出 3

<h3 id="arrowNargtopic-4">结束</h3>
箭头函数没有自己的 arguments 对象，这一点在使用时需要特别注意。
理解这一点对准确编写和调试JavaScript代码非常重要。

<h2>纯前端实现语音文字互转</h2>
<div id="WebSpeechAPItoc" class="toc"><a href="#WebSpeechAPItopic-0" target="_self">什么是 Web Speech API？</a><br><a href="#WebSpeechAPItopic-1" target="_self">主要组成部分</a><br><a href="#WebSpeechAPItopic-2" target="_self">优势</a><br><a href="#WebSpeechAPItopic-3" target="_self">如何使用 Web Speech API？</a><br><a href="#WebSpeechAPItopic-4" target="_self"> 实现语音识别</a><br><a href="#WebSpeechAPItopic-5" target="_self"> 实现语音合成</a><br><a href="#WebSpeechAPItopic-6" target="_self">SpeechGrammar</a><br><a href="#WebSpeechAPItopic-7" target="_self">1. <gr>什么是 SpeechGrammar？</gr></a><br><a href="#WebSpeechAPItopic-8" target="_self">2. <gr>如何使用 SpeechGrammar？</gr></a><br><a href="#WebSpeechAPItopic-9" target="_self">实际应用场景包括但不限于：</a><br></div></center>

Web Speech API 的引入使得开发者能够在浏览器中轻松实现语音识别和语音合成功能，为用户带来更加直观和便捷的操作体验。

<h3 id="WebSpeechAPItopic-0">什么是 Web Speech API？</h3>
Web Speech API 是一组浏览器 API，允许开发者在 Web 应用程序中集成语音识别和语音合成功能。
这些 API 的引入标志着浏览器开始支持本地端的语音交互能力，不仅改善了用户体验，还为开发者提供了更多创新的可能性。

<h3 id="WebSpeechAPItopic-1">主要组成部分</h3>
Web Speech API 包括两个核心部分：
<gr>SpeechRecognition（语音识别）</gr> ：

允许用户通过麦克风输入语音，然后将其转换为文本。

可以检测语音的开始和结束，以便进行适当的处理和响应。

提供了各种配置选项，如语言识别设置、连续识别等，以满足不同应用场景的需求。

<gr>SpeechSynthesis（语音合成）</gr> ：

允许开发者将文本转换为语音输出。

支持多种语音合成引擎和语音效果，可以根据需求选择合适的语音风格和语言。

提供了控制音调、语速等参数的接口，以实现个性化的语音输出效果。

<h3 id="WebSpeechAPItopic-2">优势</h3>
<gr>多语言支持</gr>: Web Speech API 支持多种语言，可0以通过设置 recognition.lang 或 utterance.lang 来切换不同的语言环境。
例如，识别法语、西班牙语等。

<gr>语音指令的识别</gr>: 不仅仅是简单的文本转换，可以实现对特定命令或短语的识别，如控制网页的导航、播放媒体等。
这需要在识别的事件处理程序中进行语音指令的解析和响应。

<gr>连续语音识别</gr>: 设置 recognition.continuous = true，使得语音识别能够持续监听用户的语音输入，而不是单次识别。

<gr>实时反馈和动态调整</gr>: 根据识别的实时结果，可以实现实时反馈或动态调整应用程序的行为。
例如，在用户说话时动态更新界面或提供即时建议。

<h3 id="WebSpeechAPItopic-3">如何使用 Web Speech API？</h3>

<h4 id="WebSpeechAPItopic-4"> 实现语音识别</h4>

<h5>属性</h5>
recognition.grammars 用于存储一组语法规则，可以通过 addFromString 方法添加语法规则。

recognition.lang 设置或获取语音识别的语言

recognition.interimResults 如果设置为 true，则在识别过程中会提供临时结果。
如果为 false，则只提供最终结果

recognition.maxAlternatives 设置语音识别返回的替代结果的最大数量。
默认值为 1，表示只返回最可能的结果

recognition.continuous 如果设置为 true，则识别会持续运行直到显式停止。
如果为 false，识别会在单次语音输入后自动停止

recognition.onresult 当识别结果可用时触发的事件处理程序。
事件对象的 results 属性包含识别结果

recognition.onaudiostart 当开始录制音频时触发的事件处理程序

recognition.onsoundstart 当检测到声音时触发的事件处理程序

recognition.onspeechstart 当检测到用户开始说话时触发的事件处理程序

recognition.onspeechend 当用户停止说话时触发的事件处理程序

recognition.onaudioend 当音频录制停止时触发的事件处理程序

recognition.onend 当语音识别结束时触发的事件处理程序

recognition.onerror 当语音识别发生错误时触发的事件处理程序。
事件对象的 error 属性包含错误信息

recognition.onnomatch 当语音识别没有匹配到任何结果时触发的事件处理程序

recognition.onsoundend 当检测到的声音停止时触发的事件处理程序

<h5>事件</h5>
start() 启动语音识别

stop() 停止语音识别

abort() 终止语音识别，并且不会触发onend事件

通过以下简单的 JavaScript 代码片段，可以实现基本的语音识别功能：
const recognition = new webkitSpeechRecognition(); // 创建语音识别对象
recognition.lang = 'en-US'; // 设置识别语言为英语
recognition.onresult = function(event) {
  const transcript = event.results[0][0].transcript; // 获取识别结果文本
  console.log('识别结果:', transcript);
};
recognition.start(); // 开始识别

<h4 id="WebSpeechAPItopic-5"> 实现语音合成</h4>

<h5>属性</h5>
SpeechSynthesisUtterance.lang 获取并设置说话的语言

SpeechSynthesisUtterance.pitch 获取并设置说话的音调（值越大越尖锐，越小越低沉）

SpeechSynthesisUtterance.rate 获取并设置说话的速度（值越大越快）

SpeechSynthesisUtterance.text 获取并设置说话的文本

SpeechSynthesisUtterance.voice 获取并设置说话时的声音

SpeechSynthesisUtterance.volume 获取并设置说话的音量

<h5>事件</h5>
speak() 将对应的实例添加到语音队列中

cancel() 删除队列中所有的语音，如果正在播放，则直接停止

pause() 暂停语音

resume() 恢复暂停的语音

getVoices 获取支持的语言数组

使用 SpeechSynthesis API 实现文本转语音的功能，示例代码如下：
const utterance = new SpeechSynthesisUtterance('Hello, welcome to our website.');
utterance.lang = 'en-US'; // 设置语音合成的语言
window.speechSynthesis.speak(utterance); // 开始语音合成

<h3 id="WebSpeechAPItopic-6">SpeechGrammar</h3>

<h3 id="WebSpeechAPItopic-7">1. <gr>什么是 SpeechGrammar？</gr></h3>
SpeechGrammar 对象用于指定一个语法规则，这些规则可以帮助语音识别引擎识别特定的语音输入。
它常与 SpeechRecognition 对象结合使用。
语法规则可以是简单的文本，也可以是复杂的正则表达式或者语法定义。

<h3 id="WebSpeechAPItopic-8">2. <gr>如何使用 SpeechGrammar？</gr></h3>
要使用 SpeechGrammar，你需要创建一个 SpeechRecognition 对象，并为其添加一个或多个 SpeechGrammar 对象。
以下是一个示例：
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
  &lt;title&gt;Speech Grammar Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button id="startButton"&gt;Start Speech Recognition&lt;/button&gt;
  &lt;div id="output"&gt;&lt;/div&gt;

  &lt;script&gt;
   // 确保浏览器支持 SpeechRecognition
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (!SpeechRecognition) {
  console.error("SpeechRecognition not supported");
} else {
  // 创建 SpeechRecognition 实例
  const recognition = new SpeechRecognition();

  // 定义语法规则
  const grammar = '#JSGF V1.0; grammar colors; public &lt;color&gt; = red | green | blue | yellow ;';

  // 创建 webkitSpeechGrammarList 实例
  const speechGrammarList = new webkitSpeechGrammarList();
  speechGrammarList.addFromString(grammar, 1);  // 1 是语法的优先级

  // 将语法列表应用到 SpeechRecognition 实例
  recognition.grammars = speechGrammarList;

  // 配置识别选项
  recognition.lang = 'en-US';  // 设置语言
  recognition.interimResults = false;  // 只返回最终结果
  recognition.maxAlternatives = 1;  // 只返回一个替代结果

  // 开始识别
  recognition.start();

  recognition.onresult = (event) =&gt; {
    const result = event.results[0][0].transcript;
    console.log('识别结果:', result);
  };

  recognition.onerror = (event) =&gt; {
    console.error('识别错误:', event.error);
  };
}

  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

通过合理使用 SpeechGrammar 和 SpeechRecognition，你可以创建更精确的语音识别应用，提升用户体验。

<h3 id="WebSpeechAPItopic-9">实际应用场景包括但不限于：</h3>
<gr>智能助手和语音搜索</gr>: 实现类似于 Siri、Google Assistant 等智能助手的语音控制和信息获取功能。

<gr>无障碍和辅助技术</gr>: 支持视觉障碍用户的语音导航、文本转语音等辅助功能。

<gr>教育和培训</gr>: 提供基于语音的学习和培训工具，如语音答题、学习笔记转录等。

<gr>娱乐和游戏</gr>: 实现语音驱动的游戏操作和交互体验，如语音控制角色移动、发声识别等。

<h2>开源数学公式渲染库 KaTeX</h2>
<div id="KaTeXtoc" class="toc"><a href="#KaTeXtopic-0" target="_self">1、KaTeX 是什么？</a><br><a href="#KaTeXtopic-1" target="_self">2、快速开始</a><br><a href="#KaTeXtopic-2" target="_self">3、核心功能及 API</a><br><a href="#KaTeXtopic-3" target="_self">4、应用场景</a><br><a href="#KaTeXtopic-4" target="_self">5、同类对比</a><br></div></center>

<h3 id="KaTeXtopic-0">1、KaTeX 是什么？</h3>
KaTeX 是一个集成速度快且功能丰富的数学公式渲染库，专为 Web 设计。
它由 Khan Academy 开发，提供接近印刷品质的数学公式展示，同时保持与浏览器的高效互动性。
KaTeX 特点包括快速渲染速度、高质量的输出、独立运行、跨平台兼容以及丰富的功能集。
它支持服务器端渲染，可以预渲染公式并作为纯 HTML 发送，减轻客户端负担。

<h3 id="KaTeXtopic-1">2、快速开始</h3>
<gr>安装及引入</gr>
KaTex 支持包管理器 npm、yarn 和 CDN 方式安装，根据需要选择安装方式。

# npm 
npm i katex
# yarn 
yarn add katex
如果在 React 中使用，可以考虑安装 react-katex 包，提供一个 React 组件简化数学公式的渲染过程。

npm i react-katex katex 
# 还有 vue 版本的
npm i vue-katex katex 
KaTex 还有很多扩展库，具体可以参考这个地址[3]。

<gr>入门示例</gr>
作为入门演示示例，下载源码到本地方式引入 KaTex。

&lt;!-- 引入样式和库文件 -->
&lt;link rel="stylesheet" href="../libs/katex.css" />
&lt;script src="../libs/katex.js">&lt;/script>
创建容器 DOM 元素，绑定 equation ID 选择器
&lt;div id="equation">$`x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}`$&lt;/div>
&lt;script type="text/javascript" defer>
  // 使用KaTeX渲染指定元素中的公式
  katex.render(`x=\frac{-b\pm\sqrt{b^2-4ac}}{2a}`, document.getElementById('equation'))
&lt;/script>
效果
<img src="https://mmbiz.qpic.cn/mmbiz_png/gHJkXW0CVr1rjJENkOib4V3mEEEY7NhaczYicQtLdReJ8ppI0zMMgLItcSh3uziacicc8Vaj42RakdYe6bpKKaVlibA/640">

<h3 id="KaTeXtopic-2">3、核心功能及 API</h3>
KaTeX 核心功能包括同步渲染机制、基于 TeX 的布局算法、自定义的样式和布局选项。
它的 API 允许开发者通过 JavaScript 控制渲染过程，包括手动渲染特定元素或批量渲染文档中的所有公式。

<gr>自动渲染</gr>
使用 JavaScript 手动渲染还是稍微麻烦了一点，官方提供 auto-render 自动渲染扩展，通过简单的引入可以实现自动渲染。

// 引入 auto-render.js 
&lt;script src="../libs/auto-render.js">&lt;/script>
&lt;script type="text/javascript" defer>
  document.addEventListener('DOMContentLoaded', function () {
    renderMathInElement(document.body, {
      // 自定义选项
      // • auto-render 指定解析格式
      delimiters: [
        { left: '$$', right: '$$', display: true },
        { left: '$', right: '$', display: false },
        { left: '\\(', right: '\\)', display: false },
        { left: '\\[', right: '\\]', display: true },
      ],
      // • 不抛出异样，而是渲染公式源码
      throwOnError: false,
    })
  })
&lt;/script>
auto-render 扩展可以在页面加载时自动查找并渲染所有使用 $...$ 和 $$...$$ 包裹的公式。
意味着你不需要手动调用任何函数来渲染这些公式。

KaTeX 允许调整样式，例如修改 .katex 类的 font-size 属性来改变公式的显示大小。
此外，KaTeX 提供了多个扩展，如 copy-tex 扩展允许复制 LaTeX 代码，而 mhchem 扩展简化了化学方程式的编写。

<h3 id="KaTeXtopic-3">4、应用场景</h3>
KaTeX 适用于<gr>多种场景，包括在线教育平台、科学期刊网站、个人博客、数学问题社区以及印刷出版</gr>。
它能够将 LaTeX 代码转换为可读性强、易于复制粘贴的格式，有助于读者理解复杂的数学表达式。

KaTeX 的优势在于它的渲染速度快于其他数学公式渲染库，同时保持高质量的输出，这使得它适用于对性能要求较高的实时互动环境。

<h3 id="KaTeXtopic-4">5、同类对比</h3>
与 MathJax 相比 KaTeX 提供更快的渲染速度，更适合需要即时响应的应用。
KaTeX 的设计注重于减少页面重排，提供更流畅的用户体验。
 MathJax 提供更多的 LaTeX 功能和包支持。
根据需要，注重简洁性和高性能选择 KaTex，注重功能和包支持，选择 MathJax。

<img src="https://mmbiz.qpic.cn/mmbiz_png/gHJkXW0CVr1rjJENkOib4V3mEEEY7NhacgSnczfrMDsP2HlNgRPxYdIiaduGfHLmqXJ4vwacFBOictXhy8RCAZwuw/640">

<h2>javascript image manipulation</h2>

Sharp.js
Cropper.js
Merge Images.js
LooksSame.js
Jimp.js

https://sharp.pixelplumbing.com/api-resize#extract

<h2>browser tesseract</h2>
&lt;script src='https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js'>&lt;/script>
&lt;script>

(async () => {
  const worker = await createWorker('eng');
  const ret = await worker.recognize('https://tesseract.projectnaptha.com/img/eng_bw.png');
  console.log(ret.data.text);
  await worker.terminate();
})();

(async () => {
  const worker = await Tesseract.createWorker('chi_sim'); // chi_tra, eng
  //const ret = await worker.recognize('https://tesseract.projectnaptha.com/img/eng_bw.png');
  const ret = await worker.recognize('https://media.istockphoto.com/id/1701859331/zh/%E5%90%91%E9%87%8F/set-of-numbers-written-by-brush.jpg?s=1024x1024&w=is&k=20&c=s_Khcm5ovYBy3APVOO9kfpZp6cYdF2pX5iU15KCCxuM=');
  console.log(ret.data.text);
  await worker.terminate();
})();

  // A worker is created once and used every time a user uploads a new file.  
&lt;/script>

When recognizing multiple images, users should create a worker once, run worker.recognize for each image, and then run worker.terminate() once at the end (rather than running the above snippet for every image).

<h2>web实现drag拖拽布局</h2>
这种拖拽布局功能其实在电脑操作系统或者桌面应用里面是经常使用的基础功能，只是有时候在进行web开发的时候，对这个功能需求量不够明显，但却是很好用，也很实用。

<k>静态效果：</k>

<img src="https://mmbiz.qpic.cn/mmbiz_png/ODiaMNroZ9tibibkzqaehu7VpvZJ4AicRL4Zia5c858KCANsibbNCpDQiaic8CdEAR143By6KGbtv4krD8UXMNXQZOsyYA/640">

<k>动态效果：</k>
<img src="https://mmbiz.qpic.cn/mmbiz_gif/ODiaMNroZ9tibibkzqaehu7VpvZJ4AicRL4ZeIJZdR4HDP7s9fuL5b0BicAtLx6EgdlbBOhQIS7xpUJMKZ9xqrsINBw/640">

为了查看更佳效果，需要把源码在浏览器上运行起来。

另一个值得关心的事项：案例中左右盒子是可以完全拖拽关闭的，也就是宽度为0px。

实际应用中可能不需要这种效果，没关系，可以限制左右盒子的最小宽度，判断小于最小宽度就不再进行缩小即可，放大限制 也是类似的。

<k>实现原理</k>

想象一下，拖拽布局一般都需要两个div盒子，同时需要一个可以拖拽的class=resize盒子（以下简称resize），它们都是块元素。

然后加上HTML标签和css的基础左右布局样式，大致轮廓就出来了。

到这里还没有实现拖拽resize布局逻辑，接着往下看。

拖拽resize原理分析：

当用户把鼠标移动到resize盒子上面，此时出现可以左右拖拽的标识，这个标识可以用css的cursor: w-resize来实现。

如果用户按下鼠标左键，可以监听鼠标按下事件，获得鼠标按下的startX = evt.clientX，也能获得resize相对于父元素的左偏移值offsetLeft。

<code>resizeBar.onmousedown(evt) {
  var startX = e.clientX;
  resizeBar.left = resizeBar.offsetLeft;
}</code>

如果用户按住鼠标左键开始向左或者向右拖拽，需要精确计算用户拖拽的实际距离，也是鼠标移动的实际距离。

计算方式：resize的左偏移值offsetLeft+（鼠标移动实际距离 + 鼠标按下距离）= 实际移动距离movelen。

<code> document.onmousemove = function (e) {
   var moveLen = resizeBar.left + (e.clientX - startX);
 }</code>
那么，resize的左边距离移动实际距离就是这样获得的。

<code>document.onmousemove = function (e) {
   var moveLen = resizeBar.left + (e.clientX - startX);
   resizeBar.style.left = moveLen + 'px';
}</code>
左边|右边盒子宽度就可以得到了。

<code>document.onmousemove = function (e) {
   var moveLen = resizeBar.left + (e.clientX - startX);
   resizeBar.style.left = moveLen + 'px';
   leftBox.style.width = moveLen + "px";
   rightBox.style.width = 
   boxWidth - resizeWidth - moveLen + "px";
}</code>
到这里拖拽核心逻辑就结束了，为了更好的理解拖拽过程，于是就有了下方不怎么好看的抽象图，画的不好，多多理解。

<img src="https://mmbiz.qpic.cn/mmbiz_png/ODiaMNroZ9tibibkzqaehu7VpvZJ4AicRL4Z7CdnvPR5opawkbUicvhlAfENSqHCCgZzNEpkbYnKAGTGicibF76cYjNhQ/640">

<k>源码贴上</k>
<k>HTML</k>

<code>&lt;body&gt;
&lt;div&gt;
    &lt;div&gt;
        &lt;p&gt;左边盒子&lt;/p&gt;
    &lt;/div&gt;
    &lt;div&gt;&lt;/div&gt;
    &lt;div&gt;
        &lt;p&gt;右边盒子&lt;/p&gt;
    &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;</code>

<k>CSS</k>

<code>&lt;style&gt;
.box {
    width: 100%;
    height: 100vh;
    display: flex;
}
.left {
    background: lightblue;
}
.resize {
    width: 10px;
    height: 100%;
    background-color: #399aef;
    cursor: w-resize;
}
.right {
    background: rgba(0, 0, 0, 0.4);
}
p {
    padding: 20px;
    text-align: center;
    font-size: 25px;
    font-weight: 600;
}
[class*="overflow"] {
    width: 49%;
    height: 100%;
    overflow: hidden;
}
.userselect {
    -webkit-user-select: none; 
    -moz-user-select: none; 
    -ms-user-select: none; 
    user-select: none;
}
&lt;/style&gt;</code>

<k>JavaScript</k>

<code>&lt;script&gt;
function dragResize() {
    var resizeBar = document.querySelector(".resize");
    var leftBox = document.querySelector(".left");
    var box = document.querySelector(".box");
    var rightBox = document.querySelector(".right");
    var resizeWidth = resizeBar.offsetWidth;
    var boxWidth = box.offsetWidth;
    resizeBar.onmousedown = function (e) {
        var startX = e.clientX;
        resizeBar.left = resizeBar.offsetLeft;

        // 鼠标拖动事件
        document.onmousemove = function (e) {
            var moveLen = resizeBar.left + (e.clientX - startX);
            resizeBar.style.left = moveLen + 'px';
            leftBox.style.width = moveLen + "px";
            rightBox.style.width = boxWidth - resizeWidth - moveLen + "px";
            e.target.style.cursor = "w-resize"
            // 拖拽过程中，禁止选中文本
            leftBox.classList.add('userselect')
            rightBox.classList.add('userselect')
        };

        // 鼠标松开事件
        document.onmouseup = function (evt) {
            document.onmousemove = null;
            document.onmouseup = null;
            // 清空cursor
            leftBox.style.cursor = "default"
            rightBox.style.cursor = "default"
            leftBox.classList.remove('userselect')
            rightBox.classList.remove('userselect')
        };
    };
}
dragResize()</code>

<h2>JavaScript 的 Rest 和 Spread 操作符</h2>
<h3>Rest 和 Spread 操作符简介</h1>
<k>Rest 操作符（...）</k>允许你将多个元素收集到一个数组或对象中，通常用于函数参数中，将参数列表转换为数组。
而 <k>Spread 操作符（...）</k>则用于将数组或对象展开为单个元素，这在复制、合并或传递数组和对象时特别有用。

理解并掌握这些操作符可以大大提升你的 JavaScript 编码水平，使代码更加简洁和富有表现力。

<h3>Rest 操作符的应用</h1>
<k>函数参数处理</k>

Rest 操作符在函数定义中非常有用，可以处理不定数量的参数：

<gr>function multiply(...numbers) {
  return numbers.reduce((product, number) =&gt; product * number, 1);
}
console.log(multiply(2, 3, 4)); // 输出: 24</gr>
在这个例子中，<gr>multiply</gr> 函数接受任意数量的参数并进行相乘。
Rest 操作符将所有参数收集到 <gr>numbers</gr> 数组中，使得可以轻松应用 <gr>reduce</gr> 等数组方法。

<k>数组解构</k>
Rest 操作符还可以在数组解构中使用，将剩余元素收集到一个新数组中：

<gr>const [head, ...tail] = ['a', 'b', 'c', 'd'];
console.log(head);  // 输出: 'a'
console.log(tail);  // 输出: ['b', 'c', 'd']</gr>
在这个例子中，数组的第一个元素被赋值给 <gr>head</gr>，其余元素则被收集到 <gr>tail</gr> 数组中。

<h3>Spread 操作符的应用</h1>
<k>数组合并</k>
使用 Spread 操作符，数组合并变得非常简单：

<gr>const fruits = ['apple', 'banana'];
const vegetables = ['carrot', 'potato'];
const food = [...fruits, ...vegetables];
console.log(food); // 输出: ['apple', 'banana', 'carrot', 'potato']</gr>
在这个例子中，Spread 操作符将 <gr>fruits</gr> 和 <gr>vegetables</gr> 展开为单个元素并合并到 <gr>food</gr> 数组中。

<k>数组复制</k>

创建数组副本同样很方便：

<gr>const numbers = [1, 2, 3];
const numbersCopy = [...numbers];
console.log(numbersCopy); // 输出: [1, 2, 3]</gr>
这样创建了一个包含与 <gr>numbers</gr> 数组相同元素的新数组 <gr>numbersCopy</gr>，修改 <gr>numbersCopy</gr> 不会影响 <gr>numbers</gr>。

<k>对象合并</k>

Spread 操作符还可以用于对象的合并：

<gr>const person = { name: 'Alice', age: 25 };
const job = { title: 'developer', company: 'Tech Co.' };
const employee = { ...person, ...job };
console.log(employee); // 输出: { name: 'Alice', age: 25, title: 'developer', company: 'Tech Co.' }</gr>
在这个例子中，<gr>person</gr> 和 <gr>job</gr> 被合并到 <gr>employee</gr> 对象中，形成一个新的对象。

<h3>高级技巧</h1>
<k>对象解构中的 Rest 操作符</k>

Rest 操作符可以在对象解构中使用，收集剩余的属性：

<gr>const { title, ...details } = { title: 'Book', author: 'John Doe', year: 2021 };
console.log(title);    // 输出: 'Book'
console.log(details);  // 输出: { author: 'John Doe', year: 2021 }</gr>
这个例子展示了如何提取特定属性（<gr>title</gr>），同时将剩余属性收集到 <gr>details</gr> 对象中。

<k>Spread 操作符用于函数参数</k>

在调用接受多个参数的函数时，Spread 操作符可以简化传递数组元素作为参数：

<gr>function concatenate(str1, str2, str3) {
  return str1 + str2 + str3;
}
const words = ['Hello', ' ', 'World!'];
console.log(concatenate(...words)); // 输出: 'Hello World!'</gr>
通过展开 <gr>words</gr> 数组，每个元素作为独立参数传递给 <gr>concatenate</gr> 函数。

<h2>Plyr.js HTML5 播放器</h2>
&lt;script src="https://cdn.plyr.io/3.7.8/plyr.js">&lt;/script>
&lt;video id="player" playsinline controls>
  &lt;source src="https://cdn.plyr.io/static/demo/View_From_A_Blue_Moon_Trailer-576p.mp4" type="video/mp4" />
&lt;/video>

具有响应式设计，适用于任何屏幕尺寸，并支持多种功能，如字幕控制、分辨率控制、播放速度控制、画中画模式播放、API 切换播放、音量、搜索等 。
还支持多种字幕轨道、预览缩略图、键盘快捷键、全屏播放以及国际化支持。

<h3>自定义音量控制</h3>
lt;input id="volume-control" type="range" min="0" max="1" step="0.05" value="1">
设置事件监听器
为自定义的音量控制添加事件监听器，当用户改变音量控制时，使用 Plyr 的 API 来设置播放器的音量。

document.getElementById('volume-control').addEventListener('input', function() {
    player.volume = this.value;
});

获取当前音量并设置初始值
如果你想要在页面加载时设置自定义音量控制的初始值，你可以从 Plyr 播放器获取当前音量并设置它。

const volumeControl = document.getElementById('volume-control');
volumeControl.value = player.volume; // 设置初始音量

响应音量变化
确保当 Plyr 播放器的音量发生变化时，自定义的音量控制也能相应地更新。这可以通过监听 Plyr 播放器的 volumechange 事件来实现。

player.on('volumechange', function(event) {
    volumeControl.value = event.detail.value;
});

<h2>使用JavaScript读取手机联系人列表</h2>
<div id="readphonecontactlisttoc" class="toc"><a href="#readphonecontactlisttopic-0" target="_self">API和设备将限制可用的属性</a><br><a href="#readphonecontactlisttopic-1" target="_self">隐私和安全</a><br><a href="#readphonecontactlisttopic-2" target="_self">API和代码</a><br><a href="#readphonecontactlisttopic-3" target="_self">总结</a><br></div></center><br><br>

<a href="https://alvaromontoro.com/blog/68058/read-phone-contact-list-from-javascript" class="whitebut ">Read Phone Contacts with JavaScript</a>
https://stackoverflow.com/questions/60339201/can-i-get-a-phone-contacts-list-with-javascript

作者注：本文中描述的技术和流程是实验性的，只能在少数浏览器中工作。
在撰写本文时，联系人选择器API仅支持 Android Chrome（从版本80开始）和iOS Safari（从版本14.5开始）。

在以前使用JavaScript从手机访问联系人数据是不可想象的。
现在有了联系人选择器API，我们可以使用JavaScript来实现这个功能。
此功能在需要联系人信息（如电话号码或VoIP）的应用程序，通过这个功能我们可以在社交平台中发现通讯录中的好友(前提需要社交平台有对应的手机号码字段)，或者需要填写联系人表单信息时则无需切换应用程序即可获取到相应的数据。

<h3 id="readphonecontactlisttopic-0">API和设备将限制可用的属性</h3>
开发者可以选择以下五个标准属性：
姓名 电话 电子邮件 地址 图标
以上返回的都是数组形式，因为联系人可以有多个电话、电子邮件或多个地址。
为了保持一致性，即使它是单个值，返回的数据始终是一个数组。
<h3 id="readphonecontactlisttopic-1">隐私和安全</h3>存储在手机上的联系人信息可能包含敏感信息，我们必须小心处理。
我们需要必须考虑到隐私和安全问题：
<k>联系人选择器API代码必须在顶级浏览上下文中运行。</k>它防止外部代码，如广告或第三方插件，读取手机上的联系人列表。
 <k>联系人选择器API代码只能在用户手势后运行。</k>开发者不能完全自动化这个过程，用户必须采取行为触发后读取联系人。
 <k>用户必须允许访问联系人列表。</k>这个是由手机限制而不是JavaScript强加的。
用户必须授予浏览器访问联系人的权限（如果它还没有授权）。
 当他们第一次使用使用联系人选择器API的网站时，他们可能会收到提示
手机会在每次使用联系人选择器API代码时显示这个弹出窗口，直到用户点击“允许”。
联系人选择器API在未允许之前不会运行。
这个一次性的，授权之后不会再弹出。
<h3 id="readphonecontactlisttopic-2">API和代码</h3>
联系人选择器API只定义了两个方法：
getProperties()：返回设备上可读取的属性列表。
在定义中有五个值："address"（地址）、"email"（电子邮件）、"icon"（这可能不是联系人图片）、"name"（姓名）、"tel"（电话），但设备可能不允许访问所有这些属性。
 select()：打开联系人弹出窗口，并在用户完成操作后返回选择。
它接受两个参数：要读取的属性列表和一个可选的对象，包含选项。
 两种方法都返回Promise，但考虑到它们触发的操作会阻止应用程序的正常流程，我们在处理它们时应该使用async / await。

如前面隐私和安全部分所述，在调用API之前需要用户操作，因此如果没有用户交互，我们就无法触发任何内容，因此我们新增一个按钮：

&lt;button onclick="getContactData()"&gt;Show contact data&lt;/button&gt;
主要的代码将在getContactData()函数中。
但在此之前如果联系人选择器API不可用，显示按钮没有意义，在默认情况下隐藏按钮（添加hidden属性），仅在API可用时才显示它。

通过 "contacts" in navigator判断当前浏览器环境是否支持该API：
if ("contacts" in navigator) {
  document.querySelector("button").removeAttribute("hidden");
}
接下来是核心的按钮逻辑：
async function getContactData() {
  // 指定将读取哪些联系人值
  const props = ["tel", "name", "email"];
  try {
    // 打开本地联系人选择器（在权限被授予后）
    const contacts = await navigator.contacts.select(props);
    // 这将在本地联系人选择器关闭后执行
    if (contacts.length) {
      // 如果有数据，显示
      alert("选中的数据: " + JSON.stringify(contacts));
    } else {
      // 没有表示没有选择
      alert("没有选择任何内容");
    }
  } catch (ex) {
    // 如果发生错误，显示错误信息
    alert(ex.message)
  }
}
一旦按钮触发了这个功能，如果浏览器有权限，联系人选择页将会显示出来，展示基本信息：阅读数据的URL，它将返回什么数据，以及要从中挑选的联系人列表。
关闭弹窗后，contacts变量将以JSON格式存储数据，作为一个数组，其中包含所请求信息的对象（如果联系人卡片中不可用，则可能为空）。

这是选择了联系人后的结果示例：
[
  {
    "address": [],
    "email": [ "alvarosemail@gmail.com" ],
    "icon": [],
    "name": [ "Alvaro Montoro" ],
    "tel": [ "555-555-5555", "555-123-4567" ]
  }
]
如果数据包含图标，则它将是带有图像的blob。
如果数据包含地址，它将是一个更复杂的对象，包含街道、城市、国家、邮政编码等。
<h2>选择多个联系人 </h2>可以选择多个联系人。
我们需要向navigator.contacts.select()方法传递第二个参数来指示此选项。
const props = ["tel", "address", "icon", "name", "email"];
const options = { multiple: true };
const contacts = await navigator.contacts.select(props, options);
结果是一个联系人数组，和上面的示例返回结果是一样的。
<h3 id="readphonecontactlisttopic-3">总结</h3>
联系信息是个人身份信息，我们必须以敏感数据所需的所有谨慎和安全性来处理它。
<k>尊重人们的隐私</k>。
不要强迫他们分享他们不想分享的信息。
 <k>以安全的方式小心处理数据</k>。
如果您正在处理的数据是您自己的数据，您会感到舒适吗？
 <k>如果不需要，请不要存储数据</k>。
读它，用它，忘记它。
不要存储你不使用的数据。
 <k>只获取您需要的数据</k>。
获得建立信誉和信任所需的一切。
 假设一个Web应用程序试图在选择电话号码时读取地址、姓名或电子邮件。
如果这种情况发生在我身上，我会拒绝授权并离开这个网站。

<h2>前端实现gzip打包压缩</h2>
<div id="gziptooltoc" class="toc"><a href="#gziptooltopic-0" target="_self">1.1.什么是GZIP压缩</a><br><a href="#gziptooltopic-1" target="_self">1.2.前端实现GZIP打包压缩</a><br><a href="#gziptooltopic-2" target="_self">Webpack</a><br><a href="#gziptooltopic-3" target="_self">Rollup</a><br><a href="#gziptooltopic-4" target="_self">Parcel</a><br><a href="#gziptooltopic-5" target="_self">其他构建工具</a><br><a href="#gziptooltopic-6" target="_self">安装pako</a><br><a href="#gziptooltopic-7" target="_self">压缩文件</a><br></div></center><br><br>

<h3 id="gziptooltopic-0">1.1.什么是GZIP压缩</h3>
GZIP是一种广泛使用的文件压缩格式，它使用LZ77算法进行数据压缩，并通常用于减少文件大小，以便更快地在网络上传输。

GZIP不仅被用来压缩单个文件，还可以用来压缩整个目录结构。
在Web开发中，GZIP压缩特别有用，因为它可以显著减少HTTP响应的大小，从而加快网页加载速度。

<h3 id="gziptooltopic-1">1.2.前端实现GZIP打包压缩</h3>
在前端开发中，GZIP压缩通常不是直接由前端代码执行的，而是通过构建工具或者服务器配置来完成。

不过，如果你想要在前端环境中生成GZIP压缩的文件，可以通过以下几种方式实现：

<h4>1.2.1.使用Node.js和构建工具</h4>
<k id="gziptooltopic-2">Webpack</k>
 const CompressionWebpackPlugin = require('compression-webpack-plugin');

module.exports = {
  // ...  plugins: [
    new CompressionWebpackPlugin({
      algorithm: 'gzip',
      test: /\.js$|\.css$|\.html$/,
      threshold: 10240,
      minRatio: 0.8
    })
  ],
  // ...};

安装Webpack插件 compression-webpack-plugin。
在Webpack配置文件中启用这个插件。

<k id="gziptooltopic-3">Rollup</k>
安装 rollup-plugin-gzip 或者类似的插件。
在Rollup配置文件中添加该插件。

<k id="gziptooltopic-4">Parcel</k>
Parcel 自动支持 GZIP 压缩，无需额外配置。

<k id="gziptooltopic-5">其他构建工具</k> 如Gulp或Grunt也有相应的插件支持GZIP压缩。

<h4>1.2.2.使用JavaScript API</h4>如果需要在浏览器端进行压缩（虽然这并不常见），可以使用一些JavaScript库如 pako 或 lz-string。

例如使用 pako 库进行GZIP压缩：
<k id="gziptooltopic-6">安装pako</k>
 npm install pako

<k id="gziptooltopic-7">压缩文件</k>
 import pako from 'pako';

function compressToGzip(data) {
  const compressed = pako.gzip(data, { level: 9 });
  return compressed;
}

// 使用示例
const originalData = 'Hello, world!';
const compressedData = compressToGzip(originalData);
console.log(compressedData);

请注意，在大多数情况下，将GZIP压缩交给构建工具或服务器处理更为高效且合理。
前端代码中的压缩主要用于特定场景，比如需要动态生成并发送压缩数据的情况。

<h2>check string for multiple substrings</h2>
str = "your string";
str.match(/(our|ing)/g);
['our', 'ing']

terms = ["term1", "term2", "term3"]
const str = "string to check for term1, term2"

// check if the string has some of the terms
result = terms.some(term => str.includes(term))
true

// check if the string has all the terms
result2 = terms.every(term => str.includes(term))
false

<h2>Module Bundlers Guide</h2>
<div id="BundlersGuidetoc" class="toc"><a href="#BundlersGuidetopic-0" target="_self"><pk>What is a JavaScript module bundler?</pk></a><br><a href="#BundlersGuidetopic-1" target="_self"><pk>How does a bundler work?</pk></a><br><a href="#BundlersGuidetopic-2" target="_self"> Mapping a Dependency Graph</a><br><a href="#BundlersGuidetopic-3" target="_self"> Bundling</a><br><a href="#BundlersGuidetopic-4" target="_self"><pk>Top 5 JavaScript module bundlers</pk></a><br><a href="#BundlersGuidetopic-5" target="_self"> Webpack</a><br><a href="#BundlersGuidetopic-6" target="_self">  How does it work?</a><br><a href="#BundlersGuidetopic-7" target="_self">  Pros</a><br><a href="#BundlersGuidetopic-8" target="_self">   Multi-resource support</a><br><a href="#BundlersGuidetopic-9" target="_self">   Asset optimization</a><br><a href="#BundlersGuidetopic-10" target="_self">   Developers’ productivity</a><br><a href="#BundlersGuidetopic-11" target="_self">  Cons</a><br><a href="#BundlersGuidetopic-12" target="_self">   Complex</a><br><a href="#BundlersGuidetopic-13" target="_self">   Buggy and Slow</a><br><a href="#BundlersGuidetopic-14" target="_self"> Browserify</a><br><a href="#BundlersGuidetopic-15" target="_self">  How does it work?</a><br><a href="#BundlersGuidetopic-16" target="_self">  Pros</a><br><a href="#BundlersGuidetopic-17" target="_self">   Simplicity</a><br><a href="#BundlersGuidetopic-18" target="_self">   Developers productivity</a><br><a href="#BundlersGuidetopic-19" target="_self">  Cons</a><br><a href="#BundlersGuidetopic-20" target="_self">   No multi-resource support</a><br><a href="#BundlersGuidetopic-21" target="_self">   Lack of advanced management features</a><br><a href="#BundlersGuidetopic-22" target="_self"> Parcel</a><br><a href="#BundlersGuidetopic-23" target="_self">  How does it work?</a><br><a href="#BundlersGuidetopic-24" target="_self">  Pros</a><br><a href="#BundlersGuidetopic-25" target="_self">   Zero configuration</a><br><a href="#BundlersGuidetopic-26" target="_self">   Fast</a><br><a href="#BundlersGuidetopic-27" target="_self">  Cons</a><br><a href="#BundlersGuidetopic-28" target="_self">   Lack of advanced customizations</a><br><a href="#BundlersGuidetopic-29" target="_self"> Fusebox</a><br><a href="#BundlersGuidetopic-30" target="_self">  How does it work?</a><br><a href="#BundlersGuidetopic-31" target="_self">  Pros</a><br><a href="#BundlersGuidetopic-32" target="_self">   Excellent developer experience</a><br><a href="#BundlersGuidetopic-33" target="_self">   Fast</a><br><a href="#BundlersGuidetopic-34" target="_self">  Cons</a><br><a href="#BundlersGuidetopic-35" target="_self">   Poor multi-asset support</a><br><a href="#BundlersGuidetopic-36" target="_self"> Rollup</a><br><a href="#BundlersGuidetopic-37" target="_self">  How does it work?</a><br><a href="#BundlersGuidetopic-38" target="_self">  Pros</a><br><a href="#BundlersGuidetopic-39" target="_self">   Asset optimization</a><br><a href="#BundlersGuidetopic-40" target="_self">   Native ES6 support</a><br><a href="#BundlersGuidetopic-41" target="_self">  Cons</a><br><a href="#BundlersGuidetopic-42" target="_self">   Budding developer ecosystem</a><br><a href="#BundlersGuidetopic-43" target="_self"><pk>Honorary Mention: Vite.js</pk></a><br><a href="#BundlersGuidetopic-44" target="_self"><k>Vite.js</k></a><br><a href="#BundlersGuidetopic-45" target="_self">  &nbsp;How Does It Work?</a><br><a href="#BundlersGuidetopic-46" target="_self">  Pros&nbsp;</a><br><a href="#BundlersGuidetopic-47" target="_self">   <k>Lean and Fast</k></a><br><a href="#BundlersGuidetopic-48" target="_self">   <k>Multi-Framework Support&nbsp;</k></a><br><a href="#BundlersGuidetopic-49" target="_self">  Cons</a><br><a href="#BundlersGuidetopic-50" target="_self">   <k>Reliance on ESM Modules</k></a><br><a href="#BundlersGuidetopic-51" target="_self"><pk>Closing thoughts</pk></a><br></div></center><br><br>

A JavaScript bundler can be used when your project becomes too large for a single file or when you're working with libraries that have multiple dependencies.

Module bundlers are the way to organize and combine many files of JavaScript code into one file.

<h3 id="BundlersGuidetopic-0"><pk>What is a JavaScript module bundler?</pk></h3>
A bundler is a development tool that combines many JavaScript code files into a single one that is production-ready loadable in the browser.

A fantastic feature of a bundler is that it generates a dependency graph as it traverses your first code files.

This implies that beginning with the entry point you specified, the module bundler keeps track of both your source files’ dependencies and third-party dependencies.

Keeping all of the files and their dependencies up to date and ready was a herculean task for web developers.

Consider a basic JavaScript CRUD (Create, Read, Update, and Delete) app like a grocery list.

In the pre-bundler era, you might have constructed these functions in separate JS files.

You could even opt to make your app a little more fancy by incorporating third-party libraries, and this would need your file to make several queries upon loading, like in this example.

<img src="https://www.datocms-assets.com/48401/1636486255-code-snippet-1.png">

 However, using a bundler will merge the files and their dependencies into a single file.

<img src="https://www.datocms-assets.com/48401/1636486483-code-snipppet-2.png">

 Suppose you’re developing or maintaining a large app like an e-commerce site that provides access to thousands of products to several users.

For a use case like this, you most likely will need to employ custom or third-party libraries to power some of your more complex tasks.

In that case, developing without a JavaScript module bundler would make keeping all the dependencies updated to the latest version an exhaustive process.

Apart from providing a consistent tooling environment that saves you from the pain of dependencies, many popular module bundlers also come with performance optimization features.

<a href="https://developer.mozilla.org/en-US/docs/Glossary/Code_splitting">Code splitting</a> and <a href="https://webpack.js.org/concepts/hot-module-replacement/">hot module replacement</a> are examples of these functionalities.

JavaScript bundlers also have productivity-enhancing features such as robust error logging, which lets developers easily debug and repair errors.

<h3 id="BundlersGuidetopic-1"><pk>How does a bundler work?</pk></h3>
After discussing what bundlers are and how crucial they are in today's web development ecosystem, let's look at how these dependency management tools work.

Overall, a bundler's operation is divided into two stages: dependency graph generation and eventual bundling.

<h3 id="BundlersGuidetopic-2"> Mapping a Dependency Graph</h3>
The first thing a module bundler does is generate a relationship map of all the served files.

This process is called <k>Dependency Resolution</k>.

To do this, the bundler requires an entry file which should ideally be your main file.

It then parses through this entry file to understand its dependencies.

Following that, it traverses the dependencies to determine the dependencies of these dependencies.

Tricky, eh? It assigns unique IDs to each file it sees throughout this process.

Finally, it extracts all dependencies and generates a dependency graph that depicts the relationship between all files.

Why is this process necessary?

It enables the module to construct a dependency order, vital for retrieving functions when a browser requests them.



return {  id,  filename,  dependencies,  code,  };



It prevents naming conflicts since the JS bundler has a good source map of all the files and their dependencies.



It detects unused files allowing us to get rid of unnecessary files.



<h3 id="BundlersGuidetopic-3"> Bundling</h3>
After receiving inputs and traversing its dependencies during the Dependency Resolution phase, a bundler delivers static assets that the browser can successfully process.

This output stage is called <k>Packing</k>.

During this process, the bundler will leverage the dependency graph to integrate our multiple code files, inject the required function and module.exports object, and return a single executable bundle that the browser can load successfully.

<h3 id="BundlersGuidetopic-4"><pk>Top 5 JavaScript module bundlers</pk></h3>
Now that we’ve discussed the importance of JavaScript module bundlers and how they work, you might be wondering which kind of bundler is best for you.

There are many different module bundlers in the JavaScript ecosystem and each with its unique bundling method.

We'll look at five of the most popular module bundlers in the Javascript ecosystem, exploring how they function as well as their benefits and drawbacks.

<img src="https://www.datocms-assets.com/48401/1636486663-module-bundler-comparison-graph.png">

 



 <h3 id="BundlersGuidetopic-5"> Webpack</h3>
 
<img src="https://www.datocms-assets.com/48401/1636496882-webpack.svg" data-v-d9081d06="" data-v-5af3888a=""> 


 With over 18 million weekly downloads and 60k GitHub stars, <a target="_blank" href="https://webpack.js.org/">Webpack</a> is currently the most popular JavaScript module bundler.

As a static module bundler, it comes with a host of sophisticated and highly customizable features, making it a module bundler for JavaScript files and a transformer, minifier, and optimizer of all types of file resources and assets.

That’s not all.

Webpack has a very rich plugin and loaders ecosystem as well.

<h4 id="BundlersGuidetopic-6">  How does it work?</h4>
Like all modern JavaScript bundlers, Webpack begins the bundling process by assembling a dependency graph.

To understand how it performs the dependency resolution step, you must first grasp <a target="_blank" href="https://webpack.js.org/concepts/">six key concepts</a>:

<k>Entry:</k> specifies where Webpack should initiate its dependency graph.

You can have one or more entry points depending on your app’s architecture.

Webpack iterates through the module(s) listed in the webpack.config.js config file identifying the entry point’s direct and indirect dependencies.



module.exports = {  entry: './app/index.js',  };



<k>Output:</k> specifies the desired destination for the final output after Webpack completes the packing process.

The Output property contains two sub-values: the file path, usually the /dist folder, and the desired filename.



const path = require('path');  module.exports = {  entry: './app/index.js',  output: {  path: path.resolve(__dirname, 'dist'),  filename: 'webpack-app.bundle.js',  },  };



<k>Loaders:</k> allow Webpack to transform and bundle non-JS files.



<k>Plugins:</k> allow Webpack to perform more advanced actions like custom resource optimization and management.



<k>Mode: </k>allows Webpack to configure its operations to production or development modes dynamically.



<k>Browser Compatibility: </k>allow Webpack to build bundles that support modern and old browsers with features like promises and polyfills.



After creating the internal modules map, Webpack then uses functions to wrap the associated modules bundling all together to be invoked by one singular runtime function called webpackStart.

Getting started is as simple as running npm i webpack

<h4 id="BundlersGuidetopic-7">  Pros</h4>
<h5 id="BundlersGuidetopic-8">   Multi-resource support</h5>
In addition to providing out-of-the-box support for JS files, Webpack has a rich Plugin ecosystem it relies on to bundle other files like CSS and Images.

<h5 id="BundlersGuidetopic-9">   Asset optimization</h5>
Features like code-splitting allow you to break code files into chunks, thereby reducing load time.

There’s the Hot module replacement that helps you to manage modules without fully reloading the browser.

Developers can employ Loaders in preprocessing their files, resulting in a faster app runtime.

These and more highly customizable optimization features have made Webpack the most popular JS bundler.

<h5 id="BundlersGuidetopic-10">   Developers’ productivity</h5>
When working with a complicated task like Module bundling as a developer, it’s crucial to have:

Extensive documentation.



A solid ecosystem of third-party tools you can lean on.



Efficient error debugging process that makes your work easier.



Webpack fulfills these three requirements by offering a massive ecosystem of plugins and loaders, as well as source map-powered debugging.

That’s not all.

Webpack has an internal caching system that empowers developers to build apps in a short time.

<h4 id="BundlersGuidetopic-11">  Cons</h4>
<h5 id="BundlersGuidetopic-12">   Complex</h5>
Webpack’s sophistication is a double-edged sword for many developers who have a love-hate relationship with it.

It also is complex and has a steep learning curve.

<h5 id="BundlersGuidetopic-13">   Buggy and Slow</h5>
Webpack’s all batteries included approach can sometimes cause Webpack app integrations to be overengineered.

Over-reliance on plugins to do simple functions can cause the bundler to slow W necessitating technical debugging to make it well-optimized.

<h3 id="BundlersGuidetopic-14"> Browserify</h3>



 



 <a href="https://browserify.org/">Browserify</a> is an open-source Javascript bundler that allows you to bundle Node.js files that the browser can run.

With Browserify, developers can use node-style <em>require()</em> to load npm modules in the browser.

Initially released in 2010, the JS bundler has enjoyed decent success amongst developers.

It’s downloaded nearly 2 million times every week and has over 13k GitHub stars.

<h4 id="BundlersGuidetopic-15">  How does it work?</h4>
Like all other JavaScript bundlers, Browserify goes through defined stages when bundling modules.

The first is the Dependency graph formation.

In this stage, Browserify starts from the specified entry point files and then recursively searches for all require() calls in your files.

Each require() call is resolved with a file path, and each file path is further traversed for more require() calls.

After the entire app’s dependency graph has been fully mapped, it creates a self-contained bundle comprising files that have been merged and mapped to unique IDs.

It's worth noting that Browserfy also offers advanced customizations, such as the ability to replace these IDs with hashed ones.

You can then place the final bundle in a single &lt;script&gt; for eventual browser loading.

Getting started with Browserify is as simple as running npm i webpack and running Browserify against your entry file.

$ browserify main.js &gt; bundle.js



The bundler also provides some inbuilt options like --debug and --ignore-missing.

<h4 id="BundlersGuidetopic-16">  Pros</h4>
<h5 id="BundlersGuidetopic-17">   Simplicity</h5>
For most applications with fewer features, many developers find Browserify perfect for their needs.

It provides straightforward npm integrations that allow you to re-use your node code without needing a native CLI.

<h5 id="BundlersGuidetopic-18">   Developers productivity</h5>
Browserify’s most significant selling point is that it allows you to take advantage of the rich npm ecosystem.

It's easy to learn and has excellent documentation.

Furthermore, it comes with an inbuilt automatic build system that makes building modules fast and straightforward.

All of this adds up to a great experience while developing your application.

<h4 id="BundlersGuidetopic-19">  Cons</h4>
<h5 id="BundlersGuidetopic-20">   No multi-resource support</h5>
Unlike Webpack, Browserify doesn’t provide multi-asset support.

You can, however, use a <a href="https://gulpjs.com/">Gulp</a> workflow to find your way around this.

The process nevertheless introduces unnecessary complexity.

<h5 id="BundlersGuidetopic-21">   Lack of advanced management features</h5>
Browserify limits you to the Node.js npm ecosystem and lacks powerful asset management tools that can assist you in optimizing your modules.

This includes a lack of support for dynamic loading.

<h3 id="BundlersGuidetopic-22"> Parcel</h3>



 



 <a href="https://parceljs.org/">Parcel</a> is a plug-and-play, zero-configuration build tool that allows developers to configure multi-assets quickly (e.g., JS, CSS, and HTML) modules necessary for development.

It has over 39k stars on Github, making it the second most popular JS bundler behind Webpack.

<h4 id="BundlersGuidetopic-23">  How does it work?</h4>
Parcel’s bundling process involves three steps:

<k>Asset Tree construction:</k> In this stage, Parcel takes an entry point asset and traverses through the file to identify the dependencies used to create a <em>tree of assets</em> similar to the dependency graph.



<k>Bundle Tree construction:</k> Here, individual assets in the Asset Tree are combined with their linked dependencies to form a bundle tree.



<k>Packaging:</k> This is the final stage where each bundle on the bundle tree is associated with its specific packager file types and transformed into a final compiled file.



After that, you can then provide a single entry asset against Parcel.

Make sure to note that Parcel supports multiple entry points.

To get started, run npm i parcel.

Let’s say you have a sample HTML boilerplate.

&lt;html&gt;

  &lt;body&gt;

    &lt;script src="./index.js"&gt;&lt;/script&gt;

  &lt;/body&gt;

&lt;/html&gt;



You can then use Parcel to build the HTML file by running: parcel index.html.

What’s impressive is that Parcel will compile the HTML file pointed to it and the index.js that the HTML links to.

<h4 id="BundlersGuidetopic-24">  Pros</h4>
<h5 id="BundlersGuidetopic-25">   Zero configuration</h5>
Parcel solves the configuration issues faced with Webpack and Browserify providing developers with a performant architecture needed for rapid web development.

There’s also multi-asset support like Webpack enabling bundles for all kinds of non-JavaScript assets like CSS, HTML, and images.

<h5 id="BundlersGuidetopic-26">   Fast</h5>
Parcel is fast providing premium resource optimization features like hot module replacement and lazy loading of split code.

<a href="https://www.npmjs.com/package/parcel-bundler">According to the most recent benchmarks</a>, Parcel's bundling speed is 9.98s, compared to Browserify's 22.98s and Webpack's 20.71s.

Using Parcel's built-in caching technique can even deliver quicker results, with a benchmark time of 2.64s.

<h4 id="BundlersGuidetopic-27">  Cons</h4>
<h5 id="BundlersGuidetopic-28">   Lack of advanced customizations</h5>
As a highly-opinionated bundler, Parcel is perfect for small and medium-sized applications.

Nonetheless, making it work for complex applications where you need to modify the configurations might be tedious.

In this situation, most developers prefer to use Webpack.

<h3 id="BundlersGuidetopic-29"> Fusebox</h3>
 
<img src="https://www.datocms-assets.com/48401/1636497001-fusebox.svg" data-v-d9081d06="" data-v-5af3888a=""> 



 <a href="https://fuse-box.org/">Fusebox</a> is an open-source Javascript and Typescript bundler and loader.

It combines Webpack's best optimization techniques into a fast, lightweight bundler that gives a rich API experience.

<h4 id="BundlersGuidetopic-30">  How does it work?</h4>
The Fusebox bundling process provides a couple of defaults that keep things easy to get started without requiring extensive modifications.

To get started, install Fusebox with the command: npm i fuse-box.

After that, you need to create the main configuration script file, usually titled fuse.js or fuse.ts.

Here's an example code snippet that includes the entry point and destination file, as well as the required mode.

import { fusebox } from 'fuse-box';  fusebox({  target: 'browser',  entry: 'src/index.tsx',  webIndex: {  template: 'src/index.html',  },  devServer: true,  }).runDev();



Fusebox initiates the bundling process by building a virtual file structure that mimics a dependency graph.

These files are then emitted and bundled together.

<h4 id="BundlersGuidetopic-31">  Pros</h4>
<h5 id="BundlersGuidetopic-32">   Excellent developer experience</h5>
Fusebox has a minimum defaults style resulting in a simple learning curve for beginners.

This allows for a quick start without much configuration.

<h5 id="BundlersGuidetopic-33">   Fast</h5>
It provides a fast experience due to a couple of asset optimization features it has.

Features like HMR (Hot Module Replacement) allow the bundler to manage assets without fully refreshing the browser.

There’s a powerful cache system and inbuilt code-spilling, resulting in faster browser loads.

<h4 id="BundlersGuidetopic-34">  Cons</h4>
<h5 id="BundlersGuidetopic-35">   Poor multi-asset support</h5>
Fusebox is Javascript and Typescript-centric, rendering inbuilt support for both files.

Working with other files like CSS would require integrating the <a href="https://fuse-box.org/docs/3.6.0/plugins/css-plugin">CSSPlugin</a> or the <a href="https://fuse-box.org/docs/plugins/sass-plugin">SassPlugin</a>.

Because it is a newer bundler, it lacks the robust ecosystem seen in Webpack.

<h3 id="BundlersGuidetopic-36"> Rollup</h3>
 
<img src="https://www.datocms-assets.com/48401/1636497678-rollup.svg" data-v-d9081d06="" data-v-5af3888a=""> 


 Released in 2018, <a href="https://rollupjs.org/">Rollup</a> is a next-generation JavaScript bundler whose primary selling point is its tree-shaking feature, enabling it to sieve out unused resources before bundling single, smaller modules into larger ones.

Because of this capability has gained some traction among developers and has been downloaded over 4 million times every week, and it also has more than 20,000 GitHub stars.

<h4 id="BundlersGuidetopic-37">  How does it work?</h4>
Rollup uses the main configuration file, usually named <em>rollup.config.js,</em> to define bundling specifications.

Next, it analyzes the entry point file and then sorts the dependencies while creating a dependency order.

During this parsing process, the tree shaking feature is also implemented.

Finally, all the declared functions encountered in the specified modules are compiled into a single global scope while paying attention to potential name collision.

To get started, run npm i rollup to install rollup.

You can perform the bundling process either through a CLI with the aid of a config file or via the bundling JavaScript API.

Here’s a sample config file containing the entry point, output file destination, and format type.

export default {  input: 'src/app.js',  output: {  file: 'bundle.js',  format: 'cjs'  }  };



Like many other JavaScript bundlers, Rollup also supports multiple entry points.

<h4 id="BundlersGuidetopic-38">  Pros</h4>
<h5 id="BundlersGuidetopic-39">   Asset optimization</h5>
Rollup provides rich asset management features allowing you to code-split your bundles for faster browser loads.

There’s also the Tree-shaking feature that helps developers get rid of unnecessary variables or functions.

<h5 id="BundlersGuidetopic-40">   Native ES6 support</h5>
For better browser compatibility in sharing imports and exports, Javascript’s ES6 version was released.

Rollups supports this new ES6 module system keeping existing import and export functions while allowing you to transform them to other module formats like CommonJS and AMD.

<h4 id="BundlersGuidetopic-41">  Cons</h4>
<h5 id="BundlersGuidetopic-42">   Budding developer ecosystem</h5>
One of the growing pains of a new development tool is the time it takes to build a fully-fledged ecosystem.

While Rollup is ideal for quick tasks, developers may be disappointed when creating large, complex apps due to a lack of plugins for required functionalities.

<h3 id="BundlersGuidetopic-43"><pk>Honorary Mention: Vite.js</pk></h3>
<h3 id="BundlersGuidetopic-44"><k>Vite.js</k></h3>
 
<img src="https://www.datocms-assets.com/48401/1637592787-vitejs.svg" data-v-d9081d06="" data-v-5af3888a=""> 



 <a target="_blank" href="https://vitejs.dev/">Vite.js</a>&nbsp;is a next-generation, open-source frontend building tool.

Vite.js is a next-generation, open-source frontend building tool.&nbsp;<a target="_blank" href="https://vuejs.org/">Vue.js&nbsp;</a>creator Evan You created Vite.js in 2020 to enhance the bundling ecosystem by exploiting the latest ES modules improvements to solve some of the building performance issues prior bundlers encountered.&nbsp;

Currently, Vite.js has over 33.9k stars on Github and has over 340,000 downloads every week.

<h4 id="BundlersGuidetopic-45">  &nbsp;How Does It Work?</h4>
One of Vite.js's unique features is that it comes with a dev server and a bundling build command.

The Dev server parses your application modules and separates them into two groups: The dependencies which are mostly not frequently updated are pre-bunded using esbuild, a JavaScript bundler that's&nbsp;<a target="_blank" href="https://esbuild.github.io/">extremely faster</a>&nbsp;than Webpack, Rollup, and Parcel.

The application source code's other group requires frequent updates and is served on-demand without bundling to the browser leveraging the browser's&nbsp;<a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">powerful ESM module capability</a>.&nbsp;

On the other hand, the build command bundles your code using Rollup, a JS bundler we've examined earlier.

Vite.js starts from an entry point when traversing your codebase to convert them into production-ready static assets.

Like several other JS bundlers, Vite.js also supports multiple entry points.

// vite.config.js

const { resolve } = require('path')

const { defineConfig } = require('vite')

module.exports = defineConfig({

 build: {

   rollupOptions: {

     input: {

       main: resolve(__dirname, 'index.html'),

       nested: resolve(__dirname, 'nested/index.html')

     }

   }

 }

})



<h4 id="BundlersGuidetopic-46">  Pros&nbsp;</h4>
<h5 id="BundlersGuidetopic-47">   <k>Lean and Fast</k></h5>
By leveraging the Native ES6 module system, Vite.js can serve application code faster by reducing the number of browser requests it makes.

That's not all.

Vite.js also comes with Hot Module Replacement (HMR), making editing a quicker, near-instant process.&nbsp;

<h5 id="BundlersGuidetopic-48">   <k>Multi-Framework Support&nbsp;</k></h5>
Vite.js is framework-agnostic with out-of-box support for many popular Javascript frameworks like React.js, Vue.js, Typescript, and Preact.

Recent releases have also integrated support for CSS modules, pre-processors, and other static assets.

For example, you can quickly set up a Vue.js app with Vite using the following command:

npm init vite@latest my-vue-app -- --template vue

It also has a rich plugin ecosystem that leverages other bundlers like esbuild and Rollup plugin ecosystems to provide developers with an extensive set of options.

<h4 id="BundlersGuidetopic-49">  Cons</h4>
<h5 id="BundlersGuidetopic-50">   <k>Reliance on ESM Modules</k></h5>
Vite.js heavily relies on the browser's native ESM system to produce the mindblowing speed it's known for.

This means developers might run into issues when dealing with older browsers that don't support these upgrades.

<h3 id="BundlersGuidetopic-51"><pk>Closing thoughts</pk></h3>
Honestly, it's tough to determine which of these bundlers is the best overall because each offers distinctive features that may be ideal for your requirements.

For example, if you're creating a large app with complex features, such as an e-commerce app, and want complete control over your configurations, Webpack is a fantastic option.

On the other hand, Fusebox might be an attractive alternative if you're developing a hobby project and enjoy working with Typescript.

I’d say that regardless of the option you take, performance and development workflow metrics should be your north star.

<h2>Sound.js 开源音频库</h2>
<div id="toc" class="Sound.jstoc"><a href="#Sound.jstopic-0" target="_self">Sound.js 是什么？</a><br><a href="#Sound.jstopic-1" target="_self">快速开始</a><br><a href="#Sound.jstopic-2" target="_self">应用案例</a><br><a href="#Sound.jstopic-3" target="_self">最佳实践</a><br><a href="#Sound.jstopic-4" target="_self">生态项目</a><br></div></center><br><br>

无论是游戏、教育应用还是交互式网站，音频都是不可或缺的元素。
Sound.js，能够简化网络音频的处理，让开发者能够更加专注于创造出色的音频体验。

<h3 id="Sound.jstopic-0">Sound.js 是什么？</h3>
Sound.js 提供了一个统一的 API 来处理不同浏览器中的音频播放。
支持 Web Audio API、HTML5 Audio、Cordova/PhoneGap，并且提供了 Flash 作为后备选项。
开发者无需担心浏览器兼容性问题，可以轻松地在任何设备上播放音频。

<k>特点</k>
1. <k>跨浏览器支持</k>：能够在所有现代浏览器上运行，包括 Chrome、Firefox、Safari、Opera 和 Internet Explorer。
2. <k>事件驱动</k>：提供了一个事件驱动的音频播放模型，可以监听音频播放状态的变化，如播放完成、错误等。
3. <k>预加载和缓存</k>：支持音频的预加载和缓存，确保音频文件在播放时无需等待在、加载。
4. <k>音量控制</k>：提供简单的API来控制音量，包括静音和调节音量大小。
5. <k>多种音频格式</k>：支持多种音频格式，如 MP3、OGG 等。

<h3 id="Sound.jstopic-1">快速开始</h3>
要开始使用 Sound.js，需要做的第一件事就是将库文件引入到你的项目中。

以下是如何快速启动一个简单的音频播放示例：

1. <k>下载Sound.js</k>：你可以从 GitHub 仓库下载 Sound.js。
2. <k>引入Sound.js</k>：在你的HTML文件中引入 Sound.js 库。

&lt;script src="path/to/soundjs.min.js"&gt;&lt;/script&gt;

3. <k>编写JavaScript代码</k>：创建一个简单的音频播放脚本。
// 预加载音频文件
createjs.Sound.registerSound("path/to/your-audio-file.mp3", "exampleSound");

// 播放音频
createjs.Sound.play("exampleSound");

4. <k>运行项目</k>：打开你的 HTML 文件，你应该能够听到音频播放。
下面是一个游戏示例
<h3 id="Sound.jstopic-2">应用案例</h3>
Sound.js 可以用于多种场景，例如：
• <k>游戏开发</k>：在游戏中播放背景音乐和音效。
• <k>多媒体应用</k>：在教育或娱乐应用中播放音频内容。
• <k>交互式网站</k>：在网站中添加音频反馈，提升用户体验。

<h3 id="Sound.jstopic-3">最佳实践</h3>
• <k>预加载音频</k>：使用 createjs.Sound.registerSound 方法预加载音频文件，以避免播放时的延迟。
• <k>事件监听</k>：利用 Sound.js 的事件系统，监听音频播放状态的变化，如 complete 事件表示音频播放完成。
• <k>音量控制</k>：使用 setVolume 方法控制音频的音量，提供更好的用户体验

<h3 id="Sound.jstopic-4">生态项目</h3>
Sound.js 是 CreateJS 生态系统的一部分，与其紧密相关的项目包括：
• <k>EaselJS</k>：用于处理图形和动画的库，与 Sound.js 结合使用，创建丰富的多媒体应用。
• <k>TweenJS</k>：用于创建补间动画的库，与 Sound.js 结合使用，实现动画和音频的同步。

<h2>locate all marks</h2>
var historyBookstoc = $('#historyBookstoc');
var bookmarkerList = []

  $("k").each(function(i) {
      var booktopic = $(this), booktopicNumber = i; booktopicLength = booktopicNumber +1;

      // make a content list
      var bookmarkerContent = $(this).text();
      bookmarkerList.push(bookmarkerContent);
  
      // historyBookstoc coding here
      if (typeof(showbookTopicNumber) !== 'undefined'){
        if (showbookTopicNumber == true){
          historyBookstoc.append(booktopicNumber +' <a href="#booktopic-'+booktopicNumber+'" target="_self" onclick="jumpto(' + booktopicNumber + ')">'+booktopic.html()+'</a>'+booktopicEnd);
        }else{
          historyBookstoc.append('<a href="#booktopic-'+booktopicNumber+'" target="_self" onclick="jumpto(' + booktopicNumber + ')">'+booktopic.html()+'</a>'+booktopicEnd);
        }
      }else{
        historyBookstoc.append('<a href="#booktopic-'+booktopicNumber+'" target="_self" onclick="jumpto(' + booktopicNumber + ')">'+booktopic.html()+'</a><br>');
      }
      // historyBookstoc.append(booktopicNumber +' <a href="#booktopic-'+booktopicNumber+'" target="_self">'+booktopic.html()+'</a><br>');

      // modify the target id
      booktopic.attr('id', 'booktopic-' + booktopicNumber);
      booktopic.after('&emsp;<a href=#top target="_self"><b>&#8679;</b></a><br>')
  });

<h2>regex replace multiple matches</h2>
lastamt = Number(lastamt.replace(/^.*?;|w.*/g, "").replace(/,/g, ""))

<h2>load extenal data</h2>
<h3>.load</h3>
$("#codelist").load("HKCodelist.txt")

<h3>.get</h3>
$("button").click(function(){
  $.get("demo_test.asp", function(data, status){
    console.log("Data: " + data + "\nStatus: " + status);
  });
});

  thisImgHead = "&lt;img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=580&chartheight=400&stockid=";
  thisImgPCode= "&period=7";
  thisImgTail="&type=1&logoStyle=1' ";

  $.get('5FC.txt', function (data) {
    var theList = data.split(',');
    $("#codelist").append("Total: " + theList.length + "&lt;br>");
    for(var codeNo = 0; codeNo &lt; theList.length; codeNo++){
      theText = theList[codeNo];
      theFunccode = thisImgHead + theText + thisImgPCode + thisImgTail + "onclick = \"sCt('" + theText + "')\">";
      $( "#codelist" ).append( theFunccode);
    };
  });

Access to XMLHttpRequest at from origin 'null' has been blocked by CORS policy

<h2>Video Streaming with JavaScript</h2>
<div id="VideoStreamingtoc" class="toc"><a href="#VideoStreamingtopic-0" target="_self">create index.html</a><br><a href="#VideoStreamingtopic-1" target="_self">To enable the camera</a><br><a href="#VideoStreamingtopic-2" target="_self">processStream</a><br><a href="#VideoStreamingtopic-3" target="_self">VideoBuffer</a><br><a href="#VideoStreamingtopic-4" target="_self">server-side</a><br><a href="#VideoStreamingtopic-5" target="_self">express</a><br><a href="#VideoStreamingtopic-6" target="_self">file upload</a><br><a href="#VideoStreamingtopic-7" target="_self">sendFile</a><br></div></center><br><br>

https://medium.com/@likovalevl/video-streaming-with-javascript-the-easy-way-45ecd7ec3f08

<k>client</k> creates video =&gt;
<k>client</k> sends video to server =&gt;
<k>server</k> stores video =&gt;
<k>client</k> asks server for video =&gt; 
server loads the video from storage =&gt; 
server sends video to client =&gt;
<k>client</k> plays video
Everything happens with HTTP and doesn’t involve any superfluous code.

Let’s start with the client-side.
The root of the whole project will be the &lt;video&gt; HTML tag.
<h3 id="VideoStreamingtopic-0">create index.html</h3>
like this:
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Streaming&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;video autoplay&gt;&lt;/video&gt;
    &lt;script src="index.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

We’ve added &lt;video&gt; tag with autoplay attribute and &lt;script&gt; to hook our <mgr>index.js</mgr> from the directory root.

Place the <mgr>index.js</mgr> in the same directory.
<h3 id="VideoStreamingtopic-1">To enable the camera</h3>
we need to ask the browser if it has a proper API.

For this we use the following function:
function permittedGetUserMedia() {
    return !!(navigator.mediaDevices &amp;&amp;
        navigator.mediaDevices.getUserMedia);
}

So at the top level of the <mgr>index.js</mgr> we make a trigger:

if (permittedGetUserMedia()) {
    const video = document.querySelector('video');
    const mediaSource = new MediaSource();
    video.src = URL.createObjectURL(mediaSource);

    navigator.mediaDevices.getUserMedia({
        video: true
    }).then((stream) =&gt; processStream(stream, mediaSource));
}
	
In this part of code, we check if we have access to the camera, then we get the node of &lt;video&gt; tag.
This node has the <mgr>src</mgr> attribute.

Typically it should be a URL of the video file, but today we will provide a virtual URL of some object in the browser memory.
We create <mgr>MediaSource</mgr> and create its URL, that we set as <mgr>video.url</mgr> property.

This <mgr>MediaSource</mgr> will provide the proper interface for &lt;video&gt; node.
With the last directive, we will ask the user for permission to enable the camera.
Users will see a notification in a browser and can allow video recording.

If she or he did it, the promise that is returned by this method will be resolved and we will receive <mgr>MediaStream</mgr> object.
In this example, we will pass it to the <mgr>processStream</mgr> function along with the <mgr>MediaSource</mgr> instance.

In fact, all the rest of the actions here are in vain if you just want to make a cyberpunk mirror.
You can just make <mgr>(stream) =&gt; {video.srcObject = stream}</mgr> without even bothering about <mgr>MediaSource</mgr>.
This is also a viable approach.
But here we are going to simulate the later connection to the server.

<h3 id="VideoStreamingtopic-2">processStream</h3>
In <mgr>processStream</mgr> we write:

function processStream(stream, mediaSource) {
    const mediaRecorder = new MediaRecorder(stream)
    const videoBuffer = mediaSource.addSourceBuffer('video/webm;codecs=vp8');

    mediaRecorder.ondataavailable = (data) =&gt; {
        let fileReader = new FileReader();
        let arrayBuffer;

        fileReader.onloadend = () =&gt; {
            arrayBuffer = fileReader.result;
            videoBuffer.appendBuffer(arrayBuffer)
        }
        fileReader.readAsArrayBuffer(data.data);
    }
    mediaRecorder.start()

    setInterval(() =&gt; {
        mediaRecorder.requestData()
    }, 1000)
}

Here we define <mgr>MediaRecord</mgr> instance that will create a kind of media file that we can send to the server later.
<mgr>MediaRecord</mgr> must be started before use.
<h3 id="VideoStreamingtopic-3">VideoBuffer</h3>
<mgr>VideoBuffer</mgr> is a special object that works as an input to <mgr>MediaSource</mgr>.
It is an instance of <mgr>MediaBuffer</mgr>.

You can have several <mgr>MediaBuffers</mgr> for one <mgr>MediaSource</mgr>.
Right now <mgr>MediaRecord</mgr> just creates a bunch of video information.
We can pull if from time to time to send to the server /video player.
For this, we invoke <mgr>requestData</mgr> method that activates a built-in method of <mgr>MediaRecorder</mgr> called <mgr>ondataavailable</mgr>.

It also cleans previous data so we can call it several times and receive non-overlapping bunches of video.
For periodical loads of data, we can use <mgr>setInterval</mgr>.
All the further magic will happen in <mgr>MediaRecorder.ondataavailable</mgr>.
This method receives old data.

We will feed it to our <mgr>videoBuffer</mgr> — and everything works.
Except for one little thing: we need to convert the data into <mgr>arrayBuffer</mgr> using FileReader instance.
This is basically it.
We received the same cyberpunk mirror but with a little lag.
Please, don’t try to shave or apply makeup using it.

&lt;<h3 id="VideoStreamingtopic-4">server-side</h3>
Now we can move to create the server-side.
Let’s be lazy here and use docker-compose for faster connection of all services.
For me the project structure looks like this:

<img src="https://miro.medium.com/v2/resize:fit:468/format:webp/1*tJaKXLrsi8RfmkfhlINlaA.jpeg">

The rest of the files are autogenerated.
I will not go deeper into the environment implementation, I just will show you the contents of the supporting files.
Docker-compose creates 3 services: <mgr>frontend</mgr>, <mgr>backend</mgr>, and <mgr>nginx</mgr>.
The last one makes sure that we have the same domain name for API and client:

version: '3'

services:
  nginx:
    image: nginx
    ports:
      - 80:80
    restart: always
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
      - ./nginx/default.conf:/etc/nginx/conf.d/default.conf

  frontend:
    image: nginx
    volumes:
      - ../frontend:/usr/share/nginx/html

  backend:
    build: ./backend
    volumes:
      - ../backend:/app
    working_dir: /app
    command: nodemon index.js

Nginx configurations are pretty standard, except I’ve made max body size a little bigger:

user  nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;
events {
    worker_connections  1024;
}
http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    client_max_body_size 50m;

    sendfile        on;

    keepalive_timeout  65;

    gzip  on;

    include /etc/nginx/conf.d/*.conf;
}

The default site config is like this:

upstream frontend-upstream {
    server frontend:80;
}

upstream backend-upstream {
    server backend:3000;
}
server {
    listen       80 default;
    server_name  _;
    root         /var/www/html;

    location ~ ^/api {
        rewrite  ^/api/?(.*) /$1 break;
        proxy_pass http://backend-upstream;
    }

    location / {
      proxy_pass http://frontend-upstream;
    }

}

We set up upstreams for API and client here.
<mgr>Docekrfile</mgr> for backend looks like this:

FROM node
RUN npm install nodemon -g

For the sake of development simplicity, I set up <mgr>nodemon</mgr> here for hot-reloading the code.
Now to the backend.
I’ve used this package.json:

{
  "name": "stream-test",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "dependencies": {
    "express": "^4.17.1",
    "express-fileupload": "^1.1.6-alpha.6"
  },
  "devDependencies": {},
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "author": "",
  "license": "ISC"
}

<h3 id="VideoStreamingtopic-5">express</h3>
It has only 2 dependencies: <mgr>express</mgr> and <mgr>express-fileupload</mgr>.
With a pure node making the same will be a more painful process.
Believe me, I’ve tried.
Put empty <mgr>index.js</mgr> file into the backend directory, so on the first start backend container wouldn’t exit with an error.
Use <mgr>docker-compose up</mgr> to set up the server and access the backend with <mgr>docker-compose exec backend bash</mgr>.
From there execute <mgr>npm install</mgr> and we’re ready for coding.


Prerequisites:
For the frontend part, we will have the same functions <mgr>permittedGetUserMedia</mgr>, <mgr>processStream</mgr>, and the same <mgr>if</mgr> clause that we used before.
We will change only <mgr>processStream</mgr>.
For the backend we will need an obligatory part of express.js:

const fs = require('fs')
const bodyParser = require('body-parser')
const express = require('express')
const fileUpload = require('express-fileupload')

const app = express()
app.use(bodyParser.urlencoded())
app.use(bodyParser.json())
app.use(fileUpload({
    useTempFiles: true,
    tempFileDir: '/tmp/'
}))

const hostname = '0.0.0.0'
const port = 3000

// CODE GOES HERE

app.listen(port, hostname, () =&gt; {
    console.log('Starting development server')
})

<h3 id="VideoStreamingtopic-6">file upload</h3>
Let’s start with file upload.
From the frontend point of view, we need to grab the video and send it to the server.
We can delete all contents of processStream function now and leave only a call of a new function called registerRecord.
This function will look like this:

function registerRecord(stream) {
    const mediaRecorder = new MediaRecorder(stream)
    let countUploadChunk = 0

    mediaRecorder.ondataavailable = (data) =&gt; {
        sendFile(data.data, countUploadChunk)
        countUploadChunk++
    }
    mediaRecorder.start()

    setInterval(() =&gt; {
        mediaRecorder.requestData()
    }, 2000)
}

We’re creating the same <mgr>MediaRecorder</mgr> instance and define a counter.
The counter will be used to mark a new part of the video we send to the server.
We’re using <mgr>MediaRecorder</mgr> instance the same way as before, except now we don’t put the result directly to the player, but send it to the server.

We grow counter here to make a new chunk name every time.
One step aside here.
We will need to name our stream somehow.
The name must be unique and the easiest way is to define it on the client-side.
I’ve defined it as a global constant:

function sendFile(file, chunkNumber) {
    const formData = new FormData();
    formData.append('file', file);
    formData.append('name', STREAM_NAME);
    formData.append('chunk', chunkNumber);
    fetch('/api/upload', {
        method: 'PUT',
        body: formData
    });
}

<h3 id="VideoStreamingtopic-7">sendFile</h3>
The <mgr>sendFile</mgr> function will look like this:

function sendFile(file, chunkNumber) {
    const formData = new FormData();
    formData.append('file', file);
    formData.append('name', STREAM_NAME);
    formData.append('chunk', chunkNumber);
    fetch('/api/upload', {
        method: 'PUT',
        body: formData
    });
}

Nothing special here: we’re just sending a bunch of <mgr>form-data</mgr> including the file itself, name of stream and number of a chunk.
Now we are sending video to the server at last.
On backend let’s define a helper function:

const makeDirnameFilename = (name, chunk) =&gt; {
    const dirname = `/app/uploads/${name}`
    const filename = `${dirname}/${chunk}.webm`
    return [dirname, filename]
}

It will help us to define the name of saving/loading files.
Now we can work with uploading file:

app.put('/upload', (req, res) =&gt; {
    const file = req.files.file
    const [dirname, filename] = makeDirnameFilename(req.body.name, req.body.chunk)

    fs.promises.mkdir(dirname, {recursive: true})
        .then(
            file.mv(filename)
        )

    res.statusCode = 200
    res.setHeader('Content-Type', 'text/plain')
    res.end('Upload\n')
})

First, we define some helper constants.
Then, we make sure that the directory for the new file really exists.
Our file is saved in temporary storage and we just move it to the permanent directory.
This all happens asynchronously so we return the response before the file is actually saved.
Now, if you will try the code, it will start saving files, but won’t show you anything.

We proceed with playing functionality.
For the frontend part, we will add a call of registerPlayer function in processStream function.
Finally the later will look like this:

function processStream(stream, mediaSource) {
    registerRecord(stream)
    registerPlayer(mediaSource)
}

And here is the whole code of the <mgr>registerPlayer</mgr>:

function registerPlayer(mediaSource) {
    const videoBuffer = mediaSource.addSourceBuffer('video/webm;codecs=vp8');
    let countDownloadChunk = 0

    setInterval(() =&gt; {
        fetch(`/api/download?name=${STREAM_NAME}&amp;chunk=${countDownloadChunk}`)
            .then((response) =&gt; {
                if (response.status !== 200) {
                    throw Error('no such file')
                }
                return response.arrayBuffer()
            }).then((buffer) =&gt; {
                countDownloadChunk++
                videoBuffer.appendBuffer(buffer)
            }).catch(() =&gt; {})
    }, 1000)
}

We’re defining <mgr>videoBuffer</mgr> as before.
And adding one more counter, this time for downloading.
Downloading intervals will be less then uploading to make sure that we catch all new chunks of video without video freezes.

With <mgr>fetch</mgr>, we grab the file on a specific route using the GET query.
Then, if a response is 200 (we actually can have 204 here if a new file is not ready), we make <mgr>arrayBuffer</mgr> from file and return it as a next promise resolution.

The resulting <mgr>arrayBuffer</mgr> we will send into <mgr>videoBuffer</mgr>.
We increment the counter here only on a successful download.
The last <mgr>catch</mgr> is used to prevent littering console with error messages.
For the backend we define a new endpoint:

app.get('/download', (req, res) =&gt; {
    const query = req.query
    const [dirname, filename] = makeDirnameFilename(query.name, query.chunk)

    fs.promises.readFile(filename)
        .then((file) =&gt; {
            res.statusCode = 200
            res.write(file, 'binary')
            res.end()
        }).catch(() =&gt; {
        res.statusCode = 204
        res.end()
    })
})

First, we create helper constants here and then trying to read the file.
On success, we just send it to the client, but if we don’t find it — we return 204 for the client like a call to try it later.

If you will return 404, which looks logical, the Chrome browser will show lots of errors in a console later.
Keep in mind that we’re working with a file as with binary everywhere, so we provide <mgr>binary</mgr> flag on file save and response.
Now you can open localhost/ in the browser and try the code yourself.

If this didn’t work and you don’t see your picture in 3 seconds, just refresh the page.
With current code may exist a little bug when the first chunk of code was not created and your player just can't load any further part.
This bug can be fixed with 2 techniques that I recommend to use: using WebSocket for both uploading and downloading instead of HTTP requests and adding some file mapping that will tell the client which files it can download right now.
But this goes far from the actual goal of this article.

We’ve just created the real simple streaming workflow.
This structure, workflow and, especially, work with browser API can be handy to understand the whole background of how modern streaming services work.
To see the complete code visit the GitHub repo:<a href="https://github.com/hgato/streaming-article" rel="noopener ugc nofollow" target="_blank">https://github.com/hgato/streaming-article</a>.

<h2>stream from camera to web page</h2>
The Live Streaming either need Streaming Video Server or HTTP Streaming.

<h3>Streaming Video Server</h3>
IT is the server from which you will stream your video.
They have to be extremely fast, able to handle many connections at a time, depending on user's connection speed etc.
To have this, you can Buy your own, or
Sign up for a hosted streaming plan with an ISP (Internet Service Provider)

<h3>HTTP Streaming</h3>
Or, you need HTTP Streaming
To make it as simple as it can be
Create a video file in a common streaming media format
Upload the file to your web server
Make a simple hyperlink to the video file, or use special HTML tags to embed the video in a web page.

<h3>Some helpful posts and plugins</h3>
<a href="https://stackoverflow.com/questions/4241992/video-streaming-over-websockets-using-javascript">Video streaming over websockets using JavaScript</a>

<a href="http://jqueryvideo-player.com/jquery-webcam-video-streaming.html" rel="nofollow noreferrer">jQuery Video Player</a>: Enables webcam video streaming

<a href="http://freecode.com/articles/video-and-audio-streaming-with-flash-and-open-source-tools" rel="nofollow noreferrer">Video and Audio Streaming with Flash and Open Source Tools</a><br>
<sub>And yes <code>&lt;object&gt;</code> tag, can be used to embed a video player which stream the data.</sub>

<strong><a href="http://www.codeproject.com/Articles/16092/Streaming-over-HTTP-with-JavaScript-AJAX-video-pla" rel="nofollow noreferrer">Streaming over HTTP with JavaScript: AJAX video player</a> <em><sup>Recommended, step by step guide </sup></em></strong>

<h2>Access Device Camera using Camera API</h2>
<div id="toc" class="toc"><a href="#topic-0" target="_self">add a html5 video tag</a><br><a href="#topic-1" target="_self">First, check if your browser is supporting <k>navigator.mediaDevices</k></a><br><a href="#topic-2" target="_self">add the camera API code</a><br><a href="#topic-3" target="_self">parameter options</a><br><a href="#topic-4" target="_self">assign a stream</a><br><a href="#topic-5" target="_self">capture the image</a><br><a href="#topic-6" target="_self">final camera.js file</a><br></div></center><br><br>

It doesn’t require any library or module to be installed.
you can do this by just writing a small code.

<h3 id="topic-0">add a html5 video tag</h3>
First, you have to add a html5 video tag to your <k>index.html</k>
&lt;video id="video"&gt;&lt;/video&gt;

In your camera.js file add the following code snippet.

<h3 id="topic-1">First, check if your browser is supporting <k>navigator.mediaDevices</k></h3>

if(navigator &amp;&amp; navigator.mediaDevices){
    //Your browser is supporting camera API.
}else{
    console.log("camera API is not supported by your browser")
}

<h3 id="topic-2">add the camera API code</h3>
In the next step, we will add the camera API code.
if(navigator &amp;&amp; navigator.mediaDevices){
    navigator.mediaDevices.getUserMedia(options)
    .then(function(stream) {
       //use the stream to you code
    })
    .catch(function(err) {
        //Handle error here
    });
}else{
    console.log("camera API is not supported by your browser")
}

<h3 id="topic-3">parameter options</h3>
as you can see that in the above code there are parameter options.
It's a configuration object which we will pass to restrict or allow some of its features.

For example, to allow the audio:
{ audio: true }
to access the front camera:
{ video: { facingMode: "user" } }
to access the back camera:
{ video: { facingMode: { exact: "environment" } } }

For more information about configuration, visit <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia" rel="noopener ugc nofollow" target="_blank">this doc</a>.

<h3 id="topic-4">assign a stream</h3>
We are almost done with the configuration, Now will assign a stream to the video tag.

if(navigator &amp;&amp; navigator.mediaDevices){
    const options = { audio: false, video: { facingMode: "user", width: 200, height: 200  } }
    navigator.mediaDevices.getUserMedia(options)
    .then(function(stream) {
        var video = document.querySelector('video');
        video.srcObject = stream;
        video.onloadedmetadata = function(e) {
          video.play();
        };
    })
    .catch(function(err) {
        //Handle error here
    });
}else{
    console.log("camera API is not supported by your browser")
}

<h3 id="topic-5">capture the image</h3>
So, We are almost done till now, now we will add a button to capture the image from the video and display it on canvas.

<h3 id="topic-6">final camera.js file</h3>
This is our final camera.js file.
var video, canvas, ctx;
if(navigator &amp;&amp; navigator.mediaDevices){
    const options = { audio: false, video: { facingMode: "user", width: 300, height: 300  } }
    navigator.mediaDevices.getUserMedia(options)
    .then(function(stream) {
        video = document.querySelector('video');
        video.srcObject = stream;
        video.onloadedmetadata = function(e) {
          video.play();
        };
        canvas = document.getElementById("myCanvas");
        ctx = canvas.getContext('2d');
    })
    .catch(function(err) {
        //Handle error here
    });
}else{
    console.log("camera API is not supported by your browser")
}

function clickPhoto() {
   ctx.drawImage(video, 0,0, canvas.width, canvas.height);
 }
Here is our final index.html file.
&lt;body&gt;
     &lt;div style="text-align: center;"&gt;                                                   
          &lt;video id="video" style="text-align: center; border-radius: 20px;"&gt;&lt;/video&gt;
        &lt;/div&gt;
        &lt;div  style="text-align: center;"&gt;
            &lt;button type="button" class="btn btn-warning" onclick="clickPhoto();"&gt;Take Photo&lt;/button&gt;
         &lt;/div&gt;
         &lt;div style="text-align: center;"&gt;
            &lt;canvas id="myCanvas" width="300" height="300" style="text-align: center; border-radius: 20px;"&gt;&lt;/canvas&gt;
        &lt;/div&gt;
&lt;/body&gt;
<a href="https://github.com/kmtabish/blog-js-camera-api" rel="noopener ugc nofollow" target="_blank">Download</a> the final codebase repo.
See the <a href="https://blog-js-camera-api.surge.sh/" rel="noopener ugc nofollow" target="_blank">demo</a> here.

<h2>Video Streaming Server</h2>
https://github.com/thesmartcoder7/video_streaming_server

<h3>Installation</h3>
Clone this repository or download the source code.
git clone https://github.com/thesmartcoder7/video-streaming-server.git

From here, navigate to the project directory
cd video-streaming-server

Install the npm packages
npm install

<h3>Usage</h3>
Place your video file (e.g., Chris-Do.mp4) in the root directory of the project.

Start the server by running the following command:
node server.js

This will start the server, and you will see the message "Listening on port 8000!" in the console, indicating that the server is running.

To access the video stream, open a web browser and navigate to http://localhost:8000/video. You should be able to stream the video.

<h2>select column from a two dimensional array</h2>
Use Array.prototype.map() with an arrow function:
newObj = [  [1, 2, 3],  [4, 5, 6],  [7, 8, 9],];

arrayColumn = (newObj, n) => newObj.map(x => x[n]);
arrayColumn(newObj, 1)

<h2>crossorigin="anonymous"</h2>
crossorigin attribute has only two possible values:
anonymous or use-credentials.
Any value other than anonymous, including empty value, will be translated to anonymous.

<h2>video controlslist</h2>
to customize Chrome's native media controls such as the download, fullscreen and remoteplayback buttons.
The current implementation for now is a blocklist mechanism on native controls with the ability to set them directly from HTML content using the new attribute controlsList.

controlslist Examples
<video controls controlslist="nofullscreen nodownload noremoteplayback noplaybackrate foobar"></video>

Usage in Javascript:
var video = document.querySelector('video');
video.controls; // true
video.controlsList; // "nofullscreen nodownload noremoteplayback noplaybackrate" - "foobar" not present
video.controlsList.remove('noremoteplayback');
video.controlsList; // "nofullscreen nodownload noplaybackrate" - "noremoteplayback" not present
video.getAttribute('controlslist'); // "nofullscreen nodownload noplaybackrate"




<br><br><br><br><br>


<script src='https://williamkpchan.github.io/LibDocs/readbook.js'></script>
<script>
var lazyLoadInstance = new LazyLoad({
elements_selector: ".lazy"
// ...more custom settings
});
</script>
</body>
</html>
