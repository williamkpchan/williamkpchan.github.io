<base target="_blank"><html><head><title>javascript notes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="https://williamkpchan.github.io/lazyload.min.js"></script>
<script src='https://williamkpchan.github.io/mainscript.js'></script>
<script src="https://williamkpchan.github.io/commonfunctions.js"></script>
<script>
  var showTopicNumber = true;
  var topicEnd = "<br>";
  var bookid = "javascript notes"
  var markerName = "h2"
</script>
<style>
body{width:80%;margin-left: 10%; font-size:24px;}
h1, h2 {color: gold;}
strong {color: orange;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px;}
</style></head><body onkeypress="chkKey()"><center>
<h1>javascript notes</h1>
<a href="https://www.codeeval.dev/edit?gistid=dc7383e2de0858fdb1470fdec159f8f9" class="whitebut ">javascript online code execution</a>
<a href="#mustWatch" class="red goldbs" target="_self">Must Watch!</a><br><br>
<div id="toc"></div></center><br><br>
<div id="mustWatch"><center><span class="red">MustWatch</span></center><br>
<a href="javascript Html Samples.html" class="goldbut ">javascript Html Samples</a>
<a href="jquerySamples.html" class="bluebut ">jquerySamples</a>
<a href="javascriptSamples.html" class="cyanbut ">javascriptSamples</a>
<br>
<a href="demo2s-1.html" class="whitebut ">demo2s-1</a>
<a href="demo2s-2.html" class="whitebut ">demo2s-2</a>
<a href="demo2s-3.html" class="whitebut ">demo2s-3</a>
<a href="demo2s-4.html" class="whitebut ">demo2s-4</a>
<a href="demo2s-5.html" class="whitebut ">demo2s-5</a>
<a href="demo2s-6.html" class="whitebut ">demo2s-6</a>
<a href="demo2s-7.html" class="whitebut ">demo2s-7</a>
<a href="demo2s-8.html" class="whitebut ">demo2s-8</a>
<a href="demo2s-9.html" class="whitebut ">demo2s-9</a>
<a href="demo2s-10.html" class="whitebut ">demo2s-10</a>
<a href="demo2s-11.html" class="whitebut ">demo2s-11</a>

<a href="https://www.studytonight.com/post/javascript-speech-recognition-example-speech-to-text" class="whitebut ">JavaScript Speech Recognition (Speech to Text)</a>

<a href="https://dev.to/princejoel/building-a-speech-to-text-app-with-javascript-4a4d" class="whitebut ">speech-to-text-app</a>

<a href="https://www.section.io/engineering-education/speech-recognition-in-javascript/" class="whitebut ">Speech Recognition</a>

<a href="https://tutorialzine.com/2017/08/converting-from-speech-to-text-with-javascript" class="whitebut ">from Speech to Text</a>

<a href="https://cloud.google.com/speech-to-text/docs/languages" class="whitebut ">google Cloud Speech-to-Text</a>

<a href="https://www.geeksforgeeks.org/how-to-convert-speech-into-text-using-javascript/" class="whitebut ">convert speech into text</a>
<a href="https://blog.webdevsimplified.com/" class="redbut ">webdevsimplified</a>
<a href="https://github.com/WebDevSimplified" class="bluebut ">WebDevSimplified</a>
<a href="https://github.com/WebDevSimplified/audio-book-reader" class="whitebut ">audio-book-reader</a>
<a href="https://github.com/naptha/tesseract.js#tesseractjs" class="whitebut ">Tesseractjs javascript library</a>

<a href="https://www.w3resource.com/javascript-exercises/javascript-object-exercises.php" class="whitebut ">javascript exercises</a>


<a href="https://www.w3schools.com/asp/ado_ref_connection.asp" class="whitebut ">ADO Connection Object</a>

<a href="https://www.youtube.com/watch?v=jKe44NeFzwE" class="whitebut ">Build BIGGER Games</a>

<a href="https://www.youtube.com/watch?v=CY0HE277IBM" class="whitebut ">Sprite Animation in JavaScript</a>

<a href="https://www.youtube.com/watch?v=Ub70TitG6_k" class="redbut fold">JavaScript Audio Visualizers</a>

<a href="https://www.youtube.com/watch?v=plnhFAHEfrM" class="whitebut ">JavaScript Character Animation</a>
<a href="https://www.youtube.com/watch?v=VXWvfrmpapI" class="whitebut ">JavaScript Audio CRASH COURSE</a>
<a href="https://youtu.be/f0dwg99EVfo" class="whitebut ">10 audio visualiser experiments</a>
<a href="https://youtu.be/JNtuLw2fybo" class="whitebut ">Melody Maker app</a>
<a href="https://www.youtube.com/watch?v=qNEb9of714U" class="goldbut ">Audio Magic with JavaScript</a>

<a href="https://xkln.net/blog/creating-network-diagrams-with-javascript/" class="whitebut ">Network Diagrams with JavaScript</a>
<a href="https://www.anychart.com/blog/2020/07/22/network-graph-javascript/" class="whitebut ">Create JavaScript Network Graph</a>
<a href="https://www.d3-graph-gallery.com/network" class="whitebut ">Network graph</a>
<a href="https://www.demo2s.com/javascript/javascript-d3-network-diagram.html" class="whitebut ">D3 Network Diagram</a>
<a href="https://www.demo2s.com/javascript/javascript.html" class="whitebut ">javascript samples</a>

<a href="javascriptBook.html" class="whitebut ">javascriptBook</a>

<a href="js逆向.html" class="whitebut ">js逆向</a>

<a href="input table.html" class="whitebut ">input table</a>

<a href="https://codepedia.info/jquery-sum-of-textbox-values-in-table-column" class="whitebut ">codepedia.info</a>

<a href="Hardware With JavaScript" class="whitebut ">Hardware With JavaScript.html</a>
<a href="perlin noise Snake.html" class="whitebut ">perlin noise Snake</a>
<a href="sineWaves.html" class="whitebut ">sineWaves</a>

<a href="flow_fields/Flow Fields.html" class="whitebut red goldbs">Flow Fields</a>

<a href="https://www.youtube.com/watch?v=hQAHSlTtcmY" class="whitebut blue cyanbs">Learn React In 30 Minutes</a>
<a href="https://www.youtube.com/watch?v=VNmTubIDZOY" class="whitebut ">Code Sine Waves</a>
<a href="https://www.youtube.com/watch?v=M4WzhdQPyH0" class="whitebut ">Code rainbow Snakey</a>

<a href="https://christopherlis.com/projects/amplify" class="whitebut ">An interactive visual</a>
<a href="https://christopherlis.com/projects/intertwined" class="whitebut ">circular motion using sine and cosine functions</a>
<a href="https://codepen.io/sakri/full/mtlDu/" class="whitebut ">canvas Text</a>

<a href="https://yoannmoi.net/nipplejs/" class="whitebut green whitebs">nipplejs, A virtual joystick for touch capable interfaces</a>
FullPage.js: Help you to create full-screen scrolling websites<br>
swiper.js & owl.carousel.js; Fully responsive, swipe-enabled, infinite looping, and more. <br>
popper.js: to place the tooltip.<br>

<a href="https://github.com/VincentGarreau/particles.js/" class="whitebut ">particles.js</a>
<a href="https://vincentgarreau.com/particles.js/" class="whitebut ">particles.js</a>

<a href="https://www.geeksforgeeks.org/8-best-javascript-game-engines/" class="whitebut ">Javascript Game Engines</a>
<a href="https://blog.bitsrc.io/9-top-js-gaming-engines-and-libraries-for-2020-81707d9f095" class="whitebut ">JS Gaming Engines and Libraries for 2020</a>
<a href="https://stackoverflow.com/questions/391979/how-to-get-clients-ip-address-using-javascript" class="whitebut ">get client's IP address using JavaScript</a>


<a href="javascripting.html" class="goldbut red2bs silverblackgrad blackts white">Javascript Libraries</a>

<a href="https://www.d3-graph-gallery.com/graph/density2d_contour.html" class="whitebut pink limebs">D3 Basic contour chart</a>
<a href="https://www.youtube.com/watch?v=JjIvF0yikGU" class="whitebut ">Learn jQuery</a>

<a href="https://skillcrush.com/blog/projects-you-can-do-with-javascript/" class="whitebut ">JAVASCRIPT PROJECTS</a>
<a href="https://www.sitepoint.com/simple-javascript-quiz/" class="whitebut ">Make a Simple JavaScript Quiz</a>

<a href="JavascriptGame.html" class="goldbut gold blueblackgrad">JavascriptGame</a>
<a href="alligatorIoJs.html" class="whitebut gold">alligatorIoJs</a>

<a href="88 functions.html" class="greenbut gold blueblackgrad ">88 functions</a>

<a href="https://redstapler.co/javascript-realtime-chart-plotly/" class="whitebut ">plotly realtime chart</a>
anime.js howler.js chart.js reveal.js three.js Pixi.js video.js
<a href="https://redstapler.co/10-stunning-css-3d-effect-must-see/" class="whitebut ">10 Stunning CSS 3D Effect</a>
<a href="https://www.youtube.com/watch?v=zPHerhks2Vg&t=99s">JavaScript in Half an Hour (Without jQuery!)</a>
<a href="W3JavascriptHowTo.html" class="whitebut gold">W3JavascriptHowTo</a>
<a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance" class="whitebut ">Get Started With Analyzing Runtime Performance</a>
<a href="https://jqueryui.com/demos/" class="whitebut ">jqueryui demos</a>
<a href="https://jqueryui.com/tabs/" class="whitebut ">jqueryui tabs</a>

<br>
<a href="https://www.tutorialsteacher.com/javascript/javascript-tutorials" class="whitebut ">JavaScript Tutorial</a>

<a href="https://dmitripavlutin.com/javascript-classes-complete-guide/" class="whitebut ">Complete Guide to JavaScript Classes</a>

<a href="https://www.digitalocean.com/community/tutorials/how-to-use-object-methods-in-javascript" class="whitebut ">How To Code in JavaScript</a>

<a href="https://medium.com/@madasamy/15-javascript-concepts-that-every-nodejs-programmer-must-to-know-6894f5157cb7" class="whitebut ">15 JavaScript concepts</a>
<a href="http://www.codecademy.com/tracks/javascript" class="whitebut ">Code Academy JavaScript tracks</a>
<a href="http://eloquentjavascript.net/" class="whitebut ">Eloquent JavaScript</a>
<a href="http://ejohn.org/apps/learn/" class="whitebut ">Advanced JavaScript</a>

<br>

<a href="https://www.javascriptjanuary.com/" class="whitebut ">javascriptjanuary</a>
<a href="D:\Dropbox\Public\LibDocs\rchart\bar-basic.html" class="bordred1 gold borRad10">Basic Bar Chart</a>
<a href="D:\Dropbox\Public\LibDocs\rchart\pie-basic.html" class="bordred1 gold borRad10">pie basic chart</a>

<a href="webassembly.html" class="whitebut gold goldbs redts">webassembly</a>
<br>
<a href="https://mathjs.org/docs/datatypes/matrices.html" class="whitebut ">javascript mathjs Matrices</a>

<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Matrix_math_for_the_web" class="whitebut ">Matrix math for the web</a>

<a href="https://www.robinwieruch.de/linear-algebra-matrix-javascript" class="whitebut ">Linear Algebra in JavaScript with Matrix Operations</a>
<br>
<a href="https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y" class="whitebut ">pageX, pageY, screenX, screenY, clientX, and clientY</a>
<br>

<h3>Javascript Animation</h3>
<h3>SVG Morphing Animation</h3>,
<h3>GSAP Animation</h3>,
<h3>Javascript Scroll Animation</h3>,
<h3>Page Animations With Javascript</h3>,
<h3>Fullpage Animations With Javascript</h3>,
<h3>Javascript Animations</h3>,
<h3>Liquid Image Transition With Javascript</h3>,
<h3>Vanilla Javascript Text Animation</h3>,
<h3>Create 3D Animation</h3><a href="https://www.youtube.com/watch?v=tsMHONmUkvI" class="whitebut ">3D Animation</a>

</div>
<pre>
<br>

<h2>React Tutorial</h2>
<a href="https://www.youtube.com/watch?v=Ke90Tje7VS0" class="whitebut ">React Tutorial</a>
<a href="https://reactjsexample.com/a-react-table-that-includes-all-the-crud-operations/" class="whitebut ">react CRUD operations</a>
<h2>Node.js Tutorial</h2>
<a href="https://www.youtube.com/watch?v=TlB_eWDSMt4" class="whitebut ">Node.js Tutorial for Beginners</a>
<a href="Node入門.html" class="redbut chgFontsize">Node入門</a>
<h2><span class="red embossts">process local files</span></h2>

<a href="https://www.html5rocks.com/en/tutorials/file/dndfiles/" class="whitebut ">Reading files in JavaScript using the File APIs</a>
<a href="https://blog.toright.com/posts/3205/實作-cross-origin-resource-sharing-cros-解決-ajax-發送跨網域存取-request.html" class="whitebut ">跨網域存取 Cross-Origin Resource Sharing (CORS)</a>

====================
HTML5 fileReader facility

Here's an example using FileReader:
function readSingleFile(e) {
  var file = e.target.files[0];
  if (!file) {
    return;
  }
  var reader = new FileReader();
  reader.onload = function(e) {
    var contents = e.target.result;
    displayContents(contents);
  };
  reader.readAsText(file);
}

function displayContents(contents) {
  var element = document.getElementById('file-content');
  element.textContent = contents;
}

document.getElementById('file-input')
  .addEventListener('change', readSingleFile, false);
&lt;input type="file" id="file-input" />
&lt;h3>Contents of the file:&lt;/h3>
&lt;pre id="file-content">&lt;/pre>
The HTML5 fileReader facility does allow you to process local files, but these MUST be selected by the user, you cannot go rooting about the users disk looking for files.

I currently use this with development versions of Chrome (6.x). 
I don't know what other browsers support it.
====================
Just use openFile(function to be executed with file contents as first parameter).

function dispFile(contents) {
  document.getElementById('contents').innerHTML=contents
}
function clickElem(elem) {// Thx user1601638 on Stack Overflow (6/6/2018 - https://stackoverflow.com/questions/13405129/javascript-create-and-save-file )var eventMouse = document.createEvent("MouseEvents")eventMouse.initMouseEvent("click", true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)elem.dispatchEvent(eventMouse)
}
function openFile(func) {readFile = function(e) {	var file = e.target.files[0];	if (!file) {		return;	}	var reader = new FileReader();	reader.onload = function(e) {		var contents = e.target.result;		fileInput.func(contents)		document.body.removeChild(fileInput)	}	reader.readAsText(file)}fileInput = document.createElement("input")fileInput.type='file'fileInput.style.display='none'fileInput.onchange=readFilefileInput.func=funcdocument.body.appendChild(fileInput)clickElem(fileInput)
}
Click the button then choose a file to see its contents displayed below.
&lt;button onclick="openFile(dispFile)">Open a file&lt;/button>
&lt;pre id="contents">&lt;/pre>
=======================
Try

function readFile(file) {
  return new Promise((resolve, reject) => {
    let fr = new FileReader();
    fr.onload = x=> resolve(fr.result);
    fr.readAsText(file);
})}
but user need to take action to choose file

=======================
Javascript cannot typically access local files in new browsers but the XMLHttpRequest object can be used to read files. 
So it is actually Ajax (and not Javascript) which is reading the file.

If you want to read the file abc.txt, you can write the code as:

var txt = '';
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function(){
  if(xmlhttp.status == 200 && xmlhttp.readyState == 4){
    txt = xmlhttp.responseText;
  }
};
xmlhttp.open("GET","abc.txt",true);
xmlhttp.send();
Now txt contains the contents of the file abc.txt.
=======================
<a href="https://recalll.co/ask/v/topic/javascript-How-to-read-a-local-text-file/5a7db8c71126f4a43f8b5029" class="whitebut ">javascript to read a local text file</a>

function getData(){
  var xmlhttp;
  if (window.XMLHttpRequest) {xmlhttp = new XMLHttpRequest();}      
  else {xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");}
  xmlhttp.onreadystatechange = function () {     
      if (xmlhttp.readyState == 4) {         
        var lines = xmlhttp.responseText; //*get all lines from file*
        intoArray(lines); *//call function with parameter "lines*"         
      }
  }
  xmlhttp.open("GET", "motsim1.txt", true);
  xmlhttp.send();    
}

function intoArray (lines) {
   // split text data into array "\n" is splitting character
   var lineArr = lines.split('\n'); 

   //just to check if it works output lineArr[index] as below
   document.write(lineArr[2]);    
   document.write(lineArr[3]);
}
<h2>Arrays</h2>
<a href="Arrays.html" class="redbut white2bs white redblackgrad">Arrays</a>
<a href="JavaScript Stack and Queue.html" class="redbut white2bs lime redblackgrad" target="_blank">JavaScript Stack and Queue</a>
<a href="JavaScript Multidimensional array.html" class="whitebut green limebs">JavaScript Multidimensional array</a>

<a href="Javascript Array Processing.html" class="redbut white2bs white redblackgrad">Javascript Array Processing</a>


Merge Arrays:
combined2 = [...cars, ...trucks];

Fill Arrays:
someArray(5).fill(null);
someArray.fill(null,0,12); //array.fill(value, start, end)

multiple dimensions array processing:
map to array of arrays:
arr = [[3.1042, 7.2351], [1.4564, 4.335], [5.523, 7.157]];
fixed = x => x.toFixed(2);
arr = arr.map( subarray => subarray.map( fixed ));
or
arr = arr.map(function(subarray) {
  return subarray.map(function(number) {
    return fixed(number);
  })
})


<h3>get index of object in array</h3>
<a href="https://www.codegrepper.com/code-examples/javascript/javascript+get+index+of+object+in+array" class="whitebut ">get index of object in array</a>

// Get index of object with specific value in array
const needle = 3; // needle
const haystack = [{ id: 1 }, { id: 2 }, { id: 3 }]; // haystack
const index = haystack.findIndex(item => item.id === needle);

// find the index of a value in an array
var list = ["apple","banana","orange"]
var index_of_apple = list.indexOf("apple") // 0

// findindex
const array1 = [5, 12, 8, 130, 44];
const search = element => element > 13;
console.log(array1.findIndex(search));
// expected output: 3

const array2 = [
  { id: 1, dev: false },
  { id: 2, dev: false },
  { id: 3, dev: true }
];
const search = obj => obj.dev === true;
console.log(array2.findIndex(search)); // 2


//find the index of an object in an array
const letters = [{letter: 'a'},{letter: 'b'},{letter: 'c'}]
const index = letters.findIndex((element, index) => {
  if (element.letter === 'b') { return true }
}) //index is `1`

// get index of element in array
const beasts = ['ant', 'bison', 'camel', 'duck', 'bison'];
beasts.indexOf('bison'); //ouput: 1

// start from index 2
beasts.indexOf('bison', 2); //output: 4
beasts.indexOf('giraffe'); //output: -1


<h3>4 Methods to Search Through Arrays in JavaScript</h3>
====
Array.includes
fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.includes("Mango"); // true
fruits.includes("Man");   // false

====
Array.find
tree = ["birch", "maple", "oak", "poplar" ];
item = tree.find(name => name.startsWith("m")); // maple

====
fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.findIndex(element => element.includes("an")) // 0
fruits.findIndex(element => element.includes("ab")) // -1

fruits.find(element => element.includes("an"))      // Banana
fruits.filter(element => element.includes("an"));   // Banana, Orange, Mango
fruits.some(element => element.includes("ang"));  // true

====
Array.indexOf
search and returns the position of the first occurrence of a specified value in a string.

nameArr = ['sonarika','yogesh','sumit','vijay','anil'];
nameArr.indexOf('sumit') // 2
nameArr.indexOf('vis')   // -1

txt = "Sonarika Bhadoria";
txt.indexOf('a') // 3

arr = ["one", "two", "three", "four", "five"];
arr.includes("two"); // true
arr.includes("tw");  // false
====
filter
search array for all substring match

arr2 = fruits.filter(element => element.includes("ang"));
ages = [12,14,19,21]
function checkAdult(age) { return age >= 18; }
ages.filter(checkAdult);
====
arr = [ 4, "Pete", 8, "John" ];
$.inArray( "Pete", arr ) // 1

$.inArray() returns index of the item in the array, or -1 if item was not found.

====
forEach is an Array method that we can use to execute a function on each element in an array.
It can only be used on Arrays, Maps, and Sets.

arr = ['cat', 'dog', 'fish'];

arr.forEach(element => { console.log(element); });

// cat
// dog
// fish
arr = [5,4,8,7];
arr.forEach(function(item,index,arr) {
  console.log("item: " + item + " at index: " + index + " in the array: " + arr);
})

// item: 5 at index: 0 in the array: 5,4,8,7
// item: 4 at index: 1 in the array: 5,4,8,7
// item: 8 at index: 2 in the array: 5,4,8,7
<h2>onclick event</h2>
Note also:
dblclick	double-clicks on an element
mousedown	presses a mouse button over an element
mouseup	releases a mouse button over an element

&lt;p ondblclick="myFunction()">Double-click me&lt;/p>

&lt;p id="demo"&gt;Click me.&lt;/p&gt;
&lt;script&gt;
document.getElementById("demo").onclick = function() {myFunction()};
function myFunction() {
    document.getElementById("demo").innerHTML = "YOU CLICKED ME!";
}
&lt;/script&gt;

&lt;button onclick="myFunction()"&gt;Try it&lt;/button&gt;
&lt;p id="demo"&gt;&lt;/p&gt;
&lt;script&gt;
function myFunction() {
    var person = prompt("Please enter your name", "Harry Potter");
    if (person != null) {
        document.getElementById("demo").innerHTML =
        "Hello " + person + "! How are you today?";
    }
}
&lt;/script&gt;
===========================<br>

<br>
<h2>alert() and prompt()</h2>

alert(message)

  // use this to alert variable inside string
  function doHomework(subject) {
    alert(`Starting my ${subject} homework.`);
  }
  doHomework('math');
  // Alerts: Starting my math homework.

prompt(text, defaultText)
text	text to display in the dialog box
defaults	Optional. 
The default input text

confirm(message)
returns true if the user clicked "OK", and false otherwise.
<h2>Opening A Window</h2>

Browser Windows
&lt;a href="link.html" target="mywindow"&gt;Click Here&lt;/a&gt;
Opening A Window With JavaScript
window.open('link.html','mywindow');
onclick
&lt;a href="#" onClick="window.open('link.html','mywindow');"&gt;Click Here&lt;/a&gt;
Manipulating Windows features
window.open('link.html','mywindow','window features');
===========================
<br>

<h2>Link Events</h2>

onClick
onMouseOver
onMouseOut
(note the quotation marks arrangement!) 
&lt;a href="index.htm" onMouseOver="home_button.src='homeon.gif';" onMouseOut="home_button.src='home.gif';"&gt;&lt;img src="home.gif" alt="Home" name="home_button" border="0"&gt;&lt;/a&gt;
===========================
<br>

<h2>Two JavaScripts most important functions, If and Loops.</h2>

var guess = prompt("Please guess a number between 1 and 10","");
if(guess == 5){ alert('Correct! I was thinking of 5');}
else{ alert('Wrong! I was thinking of 5');}
===========================

<h2>password</h2>
var password = 'hello';
var input = prompt('Please enter the password', '');
while(input != password){var input= prompt('Please enter the password','');}

<h2>for loop</h2>
for(loop=0; loop &lt; 11; loop++){ document.writeln(loop);}
<h2>Forms & Functions</h2>

create a form
&lt;form name="formname"&gt;
&lt;/form&gt;

Place a text box
&lt;input type="text" name="boxname"&gt;

window.document.formname.first_text.value='Hi there';

This tells the browser to put 'Hi there!' into the value of the item called 'first_text' in the form called 'formname'.

<h3>To make sure an input field has a value before submit</h3>
using the required attribute in HTML5:
&lt;input id="m" autocomplete="off" required/>

but you can just turn it of in browser console
recommend:
if (document.getElementById("m").value == '') {
   //code here...
}

<h3>Accessing Values</h3>
&lt;form name="feedback" action="script.cgi" method="post" onSubmit="return checkform()">
&lt;input type="text" name="name">
&lt;input type="text" name="email">
&lt;textarea name="comments">&lt;/textarea>
&lt;/form>

To get the value from all types of form elements. 


<h3>Text Boxes, &lt;textarea>s and hiddens</h3>
document.feedback.field.value

You'll usually be checking if this value is empty, i.e.

if (document.feedback.field.value == '') {return false;
}

<h3>Select Boxes</h3>

Each option in a drop-down box is indexed in the array <code>options[]</code>, starting as always with 0. 

You then get the value of the element at this index. 

It's like this:

document.feedback.field.options
[document.feedback.field.selectedIndex].value

You can also change the selected index through JavaScript. 

To set it to the first option, execute this:

document.feedback.field.selectedIndex = 0;

<h3>Check Boxes</h3>
Checkboxes behave differently to other elements &#8212; their value is always <code>on</code>. 

Instead, you have to check if their Boolean <code>checked</code> value is true or, in this case, false.

if (<strong>!</strong>document.feedback.field.checked) {// box is not checkedreturn false;
}

Naturally, to check a box, do this

document.feedback.field.checked = true;

<h3>Radio Buttons</h3>
Annoyingly, there is no simple way to check which radio button out of a group is selected &#8212; you have to check through each element, linked with Boolean AND operators . 

Usually you'll just want to check if <em>none</em> of them have been selected, as in this example:

if (!document.feedback.field[0].checked &amp;&amp;
!document.feedback.field[1].checked &amp;&amp;
!document.feedback.field[2].checked) {// no radio button is selectedreturn false;
}

<h2>Capture a form submit in JavaScript</h2>
<h3>Using onsubmit:</h3>
&lt;form action="action.php" onsubmit="myFunction()">
  Enter name: &lt;input type="text" name="fname">
  &lt;input type="submit" value="Submit">
&lt;/form>

function myFunction() {
  alert("The form was submitted");
}

<h3>Using JQuery on button:</h3>
&lt;form id="my-form">
    &lt;input type="text" name="in" value="some data" />
    &lt;button type="submit">Go&lt;/button>
&lt;/form>

$('button').click(function() {
    //do something;
});

<h3>JavaScript Form action using return</h3>
function validateForm() {
  var x = document.forms["myForm"]["fname"].value;
  if (x == "") { alert("No data"); return false;}
}

&lt;form name="myForm" action="action.php" onsubmit="return validateForm()" method="post">
  Name: &lt;input type="text" name="fname">
  &lt;input type="submit" value="Submit">
&lt;/form>

===========================
<br>

<h2>Events</h2>

onBlur - Happens when the cursor is moved out of the field
onFocus - Happens when the cursor is moved into the field
onChange - Happens when the field is changed and the cursor moves out of it
&lt;input type="text" onBlur="dothis"&gt;
JavaScript Functions
function sayhi()
  {
    alert(Hi there!);
  }
}
&lt;a href="#" onMouseOver="sayhi();"&gt;Say Hi&lt;/a&gt;
===========================
<br>

<h2>Submit Button</h2>

&lt;form name="myform" onSubmit="return false;"&gt;
&lt;input type="submit" value="Submit"&gt;
&lt;/form&gt;
&lt;form name="myform" onSubmit="MyFunction(); return false;"&gt;
&lt;/fopre&gt;

===========================
<br>

<h2>Checkboxes</h2>

if(window.document.example1.my_checkbox.checked=true)
{
alert('The box is checked!')
}
else
{
window.document.example1.my_checkbox.checked=true;
alert('The box was not checked so I have checked it!');
}

// show number checked
alert($(":checkbox:checked").length);

===========================
<br>

<h2>The JavaScript Switch Statement</h2>

switch(expression) {
    case n:
        code block
        break;
    case n:
        code block
        break;
    default:
        code block
}
===========================
<br>

<h2>Common Code Blocks</h2>

switch (new Date().getDay()) {
    case 4:
    case 5:
        text = "Soon it is Weekend";
        break; 
    case 0:
    case 6:
        text = "It is Weekend";
        break;
    default: 
        text = "Looking forward to the Weekend";
}
===========================
<br>

<h2>The For/In Loop</h2>

var person = {fname:"John", lname:"Doe", age:25}; 
var text = "";
var x;
for (x in person) {
    text += person[x];
}
===========================
<br>

<h2>JavaScript Break and Continue</h2>

for (i = 0; i &lt; 10; i++) {
    if (i === 3) { break; }
    text += "The number is " + i + "&lt;br&gt;";
}
for (i = 0; i &lt; 10; i++) {
    if (i === 3) { continue; }
    text += "The number is " + i + "&lt;br&gt;";
}
===========================
<br>

<h2>JavaScript Labels</h2>

label:
statements
break labelname; 
continue labelname;
var cars = ["BMW", "Volvo", "Saab", "Ford"];
list: {
    text += cars[0] + "&lt;br&gt;"; 
    text += cars[1] + "&lt;br&gt;"; 
    text += cars[2] + "&lt;br&gt;"; 
    break list;
    text += cars[3] + "&lt;br&gt;"; 
    text += cars[4] + "&lt;br&gt;"; 
    text += cars[5] + "&lt;br&gt;"; 
}

===========================
<br>

<h2>sCt(stkcode) </h2>

&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
function sCt(stkcode) {
  imgHead = "&lt;img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1150&chartheight=690&stockid=";
  imgPCode= "&period=";
  imgTail="&type=1&logoStyle=1'&gt;&lt;br&gt;&lt;br&gt;";
    intv = [7, 4, 3, 11];
  var imgWindow = window.open("");
  theListDom ='&lt;meta http-equiv="refresh" content="60"&gt;&lt;style type="text/css"&gt;body { margin-top: 2%; margin-bottom: 2%; margin-right: 3%; margin-left: 3%; background-color: #000000;}&lt;/style&gt;&lt;body&gt;&lt;br&gt;'
  for( var imgPeriod = 0; imgPeriod &lt; intv.length; imgPeriod++){
    theListDom = theListDom + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
  };
  imgWindow.document.write(theListDom);
}
&lt;/script&gt;
===========================
<br>

<h2>History go() Method()</h2>
&lt;button onclick="goBack()">Go Back 2 Pages</button>

function goBack() {
  window.history.go(-2);
}

Go forward one page (This example will not work if the next page does not exist in the history list):

window.history.go(1);

<h2>history.back()</h2>

&lt;script&gt;
$(document).ready(function(){
    $('.keys').click(function(){
    parent.history.back();
    return false;
    });
});
&lt;/script&gt;
===========================
<br>

<h2>$("#codelist").load("HKCodelist.txt")</h2>

$(document).ready(function(){
//    $("#codelist").load("HKCodelist.txt");thisImgHead = "&lt;img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=580&chartheight=400&stockid=";thisImgPCode= "&period=7";thisImgTail="&type=1&logoStyle=1' ";	$.get('5FC.txt', function (d) {    var theList = d.split(',');	$( "#codelist" ).append("Total: " + theList.length + "&lt;br&gt;");			for( var codeNo = 0; codeNo &lt; theList.length; codeNo++){				theText = theList[codeNo];		theFunccode = thisImgHead + theText + thisImgPCode + thisImgTail + "onclick = \"sCt('" + theText + "')\"&gt;";		$( "#codelist" ).append( theFunccode);	};});

});
===========================
<br>

<h2>function chkKey()</h2>

Note: the id tag cannot be located inside b, should be p or div
function chkKey() {
  var testkey = getChar(event);
  if(testkey == '9'){
    sCt(992);
  }
  if(testkey == 'h'){
    sCt(110000);
  }
  if(testkey == 'a'){
    sCt("000001.sh");
  }
    if(testkey == 'f'){
    window.location = '#stkcodeid';
    $('#stkcode').value ="";
  }
  if(testkey == 'A'){
    window.location = '#Astock';
  }
}
===========================
<br>

<h2>function getChar(event) </h2>

function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}

function openHtml(){
  console.log( "keypress: " + $(this).value );
};
&lt;/script&gt;
&lt;body onkeypress="chkKey()"&gt;
&lt;!--&lt;body onload="loadfile()"&gt;--&gt;
===========================
<br>

<h2><span class="red redbs">Go Bottom</span></h2>

&lt;b class="left" onclick="window.scrollTo(0,document.body.scrollHeight);"&gt;Go Bottom&lt;/b&gt; | 
&lt;div id ="codelist"&gt;&lt;/div&gt;

Scroll to Top:
window.scrollTo(0,0);
===========================
<br>

<h2>HTML DOM scrollTop Property</h2>
The scrollTop property
sets
or returns
the number of pixels an element's content is scrolled vertically.

Example
Get the number of pixels the content of a &lt;div> element is scrolled horizontally and vertically:

var elmnt = document.getElementById("myDIV");
var x = elmnt.scrollLeft;
var y = elmnt.scrollTop;

Note: this is only a property, not a method, it won't move, 
and the return value is just one interger, showing the scrolled distance, and if the previous action did not scrolled, the distance is zero.

<h2>HTML DOM scrollIntoView Method</h2>
Example
Scroll the element with id="content" into the visible area of the browser window:

var elmnt = document.getElementById("content");
elmnt.scrollIntoView();

===========================

<h2>auto scroll page </h2>
$("html, body").animate({ scrollTop: $(document).height() }, 3000000);

divtoc = document.getElementById("stkChart");
$('body,html').animate({scrollTop:(divtoc.clientHeight + divtoc.offsetTop-1480)}, 1);

$( "#book" ).animate({
  width: [ "toggle", "swing" ],
  height: [ "toggle", "swing" ],
  opacity: "toggle"
}, 5000, "linear", function() {
  $( this ).after( "Animation complete." );
});

==========
<h2>The animate() method</h2>
(selector).animate({styles},speed,easing,callback)

The animate() method performs a custom animation of a set of CSS properties.
$("#box").animate({height: "300px"});

$( "p" ).animate({
  height: 200, 
  width: 400, 
  opacity: 0.5
}, 1000, "linear", function() { alert( "all done" );
});

Alternate Syntax
(selector).animate({styles},{options})

========
Parameter	Description
styles	Required. Specifies one or more CSS properties/values to animate.
Note: 
The property names must be camel-cased when used with the animate() method: You will need to write paddingLeft instead of padding-left, marginRight instead of margin-right, and so on.

Most properties that are non-numeric cannot be animated using basic jQuery functionality

For example, width, height, or left can be animated but background-color cannot be, unless the jQuery.Color plugin is used. 

Property values are treated as a number of pixels unless otherwise specified. 
The units em and % can be specified where applicable.

Only numeric values can be animated (like "margin:30px"). 

String values cannot be animated (like "background-color:red"), 
except for the strings "show", "hide" and "toggle". 

These values allow hiding and showing the animated element.

========
Properties that can be animated:
backgroundPositionX, backgroundPositionY, borderWidth, borderBottomWidth, borderLeftWidth, borderRightWidth, borderTopWidth, borderSpacing, margin, marginBottom, marginLeft, marginRight, marginTop, opacity, outlineWidth, padding, paddingBottom, paddingLeft, paddingRight, paddingTop, height, width, maxHeight, maxWidth, minHeight, minWidth, fontSize, bottom, left, right, top, letterSpacing, wordSpacing, lineHeight, textIndent

========
speed	Optional. 

Specifies the speed of the animation. 
Default value is 400 milliseconds

Possible values: milliseconds (like 100, 1000, 5000, etc), "slow", "fast"
========
easing	Optional. 

Specifies the speed of the element in different points of the animation. 
Default value is "swing". 

Possible values:
"swing" - moves slower at the beginning/end, but faster in the middle
"linear" - moves in a constant speed

Tip: More easing functions are available in external plugins.
========
callback	Optional. 

A function to be executed after the animation completes.

========
Alternate Syntax
options	Optional. 

Specifies additional options for the animation. 


Possible values:
duration	the speed of the animation
easing	the easing function to use
complete	a function to be executed after the animation completes
step		a function to be executed for each step in the animation
progress	a function to be executed after each step in the animation
queue	a Boolean value specifying whether or not to place the animation in the effects queue
specialEasing	a map of one or more CSS properties from the styles parameter, and their corresponding easing functions
start	a function to be executed when the animation begins
done		a function to be executed when the animation ends
fail		a function to be executed if the animation fails to complete
always	a function to be executed if the animation stops without completing

==========
<h2>window.scrollBy(0,1);</h2>
scrolldelay = setTimeout(pageScroll,5);

==========
<h2>Select file</h2>

&lt;html&gt;
    &lt;head&gt;
        &lt;script type="text/javascript"&gt;
            function alertFilename()
            {
                var thefile = document.getElementById('thefile');
                alert(thefile.value);
            }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form&gt;
            &lt;input type="file" id="thefile" onchange="alertFilename()" /&gt;
            &lt;input type="button" onclick="alertFilename()" value="alert" /&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;
===========================
<br>

<h2>input</h2>

&lt;input 
type="submit" 
name="Button1" 
value="查詢過往資料(SEARCH)" 
onclick="if (typeof(Page_ClientValidate) == 'function') Page_ClientValidate(); " 
language="javascript" 
id="Button1" 
class="b"&gt;

===========================
<br>

<h2>JSON</h2>

var json = '{"result":true,"count":1}',
    obj = JSON.parse(theUrl);
JSON.parse(theUrl);
or
jQuery.getJSON():

data = '[{"name" : "Ashwin", "age" : "20"},{"name" : "Abhinandan", "age" : "20"}]';
Mention the path of the json file in the script source along with the javascript file.
&lt;script type="text/javascript" src="data.json"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="javascrip.js"&gt;&lt;/script&gt;
Get the Object from the json file
var mydata = JSON.parse(data);
alert(mydata[0].name);
alert(mydata[0].age);
alert(mydata[1].name);
alert(mydata[1].age);

to store data in jquery, data = [] and update later

===========================
<br>

<h2>Detecting double-press of a key</h2>

&lt;head&gt;
&lt;script type="text/javascript"&gt;
function checkspace(event){if (window.event.keyCode == 32) alert('Stop that!');}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;BODY onKeydown="checkspace()"&gt;
Replace alert with whatever it is you want it to do.
Then you could do a counter function that increments by 100 every 100ms, and do an if
var keypresses = 0;
var counter = 0;
startcouting();
if(event.keyCode == 32){
keypresses += 1;
}
if(keypresses == 2 && counter &lt;= 500){ 
do something;
reset the counter;
}

===========================
<br>

<h2>Detecting key press</h2>

https://stackoverflow.com/questions/19502155/detecting-multiple-key-press-in-javascript
Detecting multiple key press in javascript
https://stackoverflow.com/questions/5203407/javascript-multiple-keys-pressed-at-once
JavaScript multiple keys pressed at once
The simplest way to find out whether the ctrl is pressed, is to test the event object for the ctrlKey property:
$(document).keypress(function(e){
    console.log(e.which, e.ctrlKey);
});
===========================
<br>

<h2>button onclick open programs</h2>

&lt;button onclick="window.open('file:///C:/Windows/notepad.exe')"&gt;
    Launch notepad
&lt;/button&gt;
===========================
<br>

<h2>wechatQrcode</h2>

&lt;script type="text/javascript" src="js/jquery-1.11.3.min.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="js/jquery-migrate-1.2.1.min.js" charset="utf-8"&gt;&lt;/script&gt;
&lt;script src="js/jquery.share.min.js?ver=1.1" type="text/javascript"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
    $(function(){
        var $config = {
            url: 'http://sign.hknt.hk/',
            sites: ['facebook', 'wechat', 'twitter'],
            wechatQrcodeTitle: '微信掃一掃',
            wechatQrcodeHelper: '&lt;p&gt;將活動地址分享到朋友圈&lt;/p&gt;'
        };
                if (/MicroMessenger/i.test(navigator.userAgent)) {
            $config.wechatQrcodeTitle = 'QR Code';
            $config.wechatQrcodeHelper = '&lt;p&gt;長按 QR Code 識別&lt;/p&gt;';
        }
        $('#social-share').share($config);
                var mask = $('#share-mask');
        $('#social-share').children('a').on('click',function(e){
            if(/MicroMessenger/i.test(navigator.userAgent) && (this.className.indexOf('icon-whatsapp') != -1)){
                e.preventDefault();
                mask.show().on('click',function mehide(){
                    $(this).hide().off('click',mehide);       
                });
            }
        });

    var titlediv = $('#title-div'),
      chart = $('.chart-num').children('span');
            $.ajax({
        url: 'get_data.php',
        type: 'get',
        dataType: 'json',
        success: function(data){
          titlediv.children('span').each(function(i){
            switch(i){
              case 0: this.innerText = data['end_date'][1];break;
              case 1: this.innerText = data['end_date'][2];break;
              case 2: this.innerText = data['end_time'][0];break;
              case 3: this.innerText = data['total'];break;
            }
          });
          chart.each(function(i){
            switch(i){
              case 0: this.innerText = data['sector_1']; break;
              case 1: this.innerText = data['sector_2']; break;
              case 2: this.innerText = data['sector_0']; break;
            }
          });
        },
        error: function(err){
          console.log('err',err);
        }
      });
    });
&lt;/script&gt;
===========================
<br>

<h2>chkKey()</h2>

&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
function chkKey() {
  var testkey = getChar(event);
  if(testkey == 'n'){
    window.location = '#xinwen';
  }
}
function getChar(event) {
  if(testkey == 'y'){
    window.open("http://www.youtube.com");
  }
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}
&lt;/script&gt;
===========================
<br>

<h2>sCt(stkcode)</h2>

&lt;script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"&gt;&lt;/script&gt;
&lt;body onkeypress="chkKey()"&gt;
&lt;script&gt;
function sCt(stkcode) {
  imgHead = "&lt;img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1150&chartheight=690&stockid=";
  imgPCode= "&period=";
  imgTail="&type=1&logoStyle=1'&gt;&lt;br&gt;&lt;br&gt;";
    intv = [4, 3, 2, 1, 5012, 5007, 5000, 7, 11];
  var imgWindow = window.open("");
  imgAdr ='&lt;meta http-equiv="refresh" content="60"&gt;&lt;br&gt;'
  for( var imgPeriod = 0; imgPeriod &lt; intv.length; imgPeriod++){
    imgAdr = imgAdr + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
  };
  imgWindow.document.write(imgAdr);
}
&lt;/script&gt;
&lt;script&gt;
$(document).ready(function(){
    $('.keys').click(function(){
    parent.history.back();
    return false;
    });
});
function chkKey() {
  var testkey = getChar(event);
  if(testkey == 'f'){
    window.location = '#stkcodeid';
    $('#stkcode').value ="";
  }
  if(testkey == 'A'){
    window.location = '#Astock';
  }
}
function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}

function openHtml(){
  console.log( "keypress: " + $(this).value );
};
&lt;/script&gt;
&lt;b class="left" onclick="window.scrollTo(0,document.body.scrollHeight);"&gt;Go Bottom&lt;/b&gt; | 
&lt;b onclick=sCt("02823")&gt;02823&lt;/b&gt; | 

===========================

<h2>get radio elements value and compare</h2>
var submitAnswer = function() {
  var radios = document.getElementsByName('choice');
  var val= "";
  for (var i = 0, length = radios.length; i &lt; length; i++) {
      if (radios[i].checked) { val = radios[i].value; break; }
  }

  if (val == "" ) { alert('please select choice answer'); }
  else if ( val == "Scripting" ) { alert('Answer is correct !'); }
  else { alert('Answer is wrong'); }
};

&lt;h1&gt;JavaScript is ______ Language.&lt;/h1&gt;&lt;br&gt;
&lt;form &gt;
&lt;input type="radio" name="choice" value="Scripting"&gt; Scripting
&lt;input type="radio" name="choice" value="Programming"&gt; Programming
&lt;input type="radio" name="choice" value="Application"&gt; Application
&lt;input type="radio" name="choice" value="None of These"&gt; None of These
&lt;/form&gt;
&lt;button onclick="submitAnswer()"&gt;Submit Answer&lt;/button&gt;
===========================
<br>

<h2>access object</h2>
const data = {
  code: 42, 
  items: [{ id: 1, name: 'foo' }, 
          { id: 2, name: 'bar' }]
};
console.log(data.items);
console.log(data.items[0]);
console.log(data.items[1]);
console.log(data.items[0].name);
console.log(data.items[0].id);
===========================
<h2>This is the create TOC improved version</h2>
$(function() {
  var toc = $('#toc');
  $('h2').each(function(i) {
    var topic = $(this), topicNum = i + 1;
    toc.append('&lt;a href="#topic-' + topicNum + '" target="_self"&gt;' + topic.text() + '&lt;/a&gt;&lt;br&gt;');
    topic.attr('id', 'topic-' + topicNum);
  });
});
===========================
<h2>jQuery Manipulating CSS</h2>

addClass() - Adds one or more classes to the selected elements
removeClass() - Removes one or more classes from the selected elements
toggleClass() - Toggles between adding/removing classes
css() - Sets or returns the style attribute

$("button").click(function(){
  $("h1, h2, p").addClass("blue");
  $("div").addClass("important");
});

<h2>jQuery addClass() Method</h2>
Add a class name to the first p element:

$("button").click(function(){
  $("p:first").addClass("intro");
});

Tip: To add more than one class, separate the class names with spaces.
$(selector).addClass(classname,function(index,currentclass))

<h2>changesize(newFontSize)</h2>
function changesize(newFontSize) {
  var currentFontSize = getCookie("fontsize");
  if (newFontSize != currentFontSize) {
    $("html").addClass(newFontSize);
    $("#fontsize" + newFontSize).addClass("selected");
    if (currentFontSize != "") {
      $("html").removeClass(currentFontSize);
      $("#fontsize" + currentFontSize).removeClass("selected");
    }
    setCookie("fontsize", newFontSize);
  }
}
===========================
<h2>Cookies</h2>
Cookies are saved in name-value pairs like:
username = John Doe

Create a Cookie with JavaScript
document.cookie = "username=John Doe";

add an expiry date.
By default, the cookie is deleted when the browser is closed.
document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC";

Tell the browser what path the cookie belongs to with a path parameter.
By default, the cookie belongs to the current page.

document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";

Read a Cookie with JavaScript
var x = document.cookie;

will return all cookies in one string much like: cookie1=value; cookie2=value; cookie3=value;

Delete a Cookie with JavaScript
Just set the expires parameter to a passed date

document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";

The Cookie String
The document.cookie property looks like a normal text string. 
But it is not.

Even if you write a whole cookie string to document.cookie, when you read it out again, you can only see the name-value pair of it.

If you set a new cookie, older cookies are not overwritten. 

The new cookie is added to document.cookie, so if you read document.cookie again you will get something like:

cookie1 = value; cookie2 = value;

<h2>A Function to Set a Cookie</h2>
First, we create a function that stores the name of the visitor in a cookie variable:

Example
function setCookie(cname, cvalue, exdays) {
  var d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  var expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

<h2>A Function to Get a Cookie</h2>
Then, we create a function that returns the value of a specified cookie:

Example
function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');
  for(var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == ' ') { c = c.substring(1); }
    if (c.indexOf(name) == 0){ return c.substring(name.length, c.length);}
  }
  return "";
}

<h2>A Function to Check a Cookie</h2>
checks if a cookie is set.

If the cookie is set it will display a greeting.
If the cookie is not set, it will display a prompt box, asking for the name of the user, and stores the username cookie for 365 days, by calling the setCookie function:

Example
function checkCookie() {
  var username = getCookie("username");
  if (username != "") { alert("Welcome again " + username);
  } else {
    username = prompt("Please enter your name:", "");
    if (username != "" && username != null) {
      setCookie("username", username, 365);
    }
  }
}
===========================

<h2>javascript:void(0) 含义</h2>

javascript:void(0) 中最关键的是 void 关键字， void 是 JavaScript 中非常重要的关键字，该操作符指定要计算一个表达式但是不返回值。
实例
&lt;a href="javascript:void(0)"&gt;单击此处什么也不会发生&lt;/a&gt;
href="#" 与 href="javascript:void(0)" 的区别
# 包含了一个位置信息，默认的锚是#top 也就是网页的上端。
而javascript:void(0), 仅仅表示一个死链接。
在页面很长的时候会使用 # 来定位页面的具体位置，格式为：
# + id。
如果你要定义一个死链接请使用 javascript:void(0) 。
实例
&lt;a href="javascript:void(0);"&gt;点我没有反应的!&lt;/a&gt;
&lt;a href="#pos"&gt;点我定位到指定位置!&lt;/a&gt;
&lt;br&gt;
...
&lt;br&gt;
&lt;p id="pos"&gt;尾部定位点&lt;/p&gt;
===========================
<br>

<h2>href="#"</h2>
A hash - # within a hyperlink specifies an html element id to which the window should be scrolled.

Scroll to Top:
href="#" doesn't specify an id name, but does have a corresponding location - the top of the page.
Clicking an anchor with href="#" will move the scroll position to the top.

&lt;a href="#" onclick="fn()"&gt;click here&lt;/a&gt;
you will jump to the top and the URL will have the anchor # as well, to avoid this we simply return false; or use javascript:void(0);
regarding your examples
&lt;a onclick="fn()"&gt;Does not appear as a link, because there's no href&lt;/a&gt;
just do a {text-decoration:underline;} and you will have "link a-like"
&lt;a href="javascript:void(0)" onclick="fn()"&gt;fn is called&lt;/a&gt;
&lt;a href="javascript:" onclick="fn()"&gt;fn is called too!&lt;/a&gt;
it's ok, but in your function at the end, just return false; to prevent the default behavior, you don't need to do anything more.

Link to an email address:
&lt;a href="mailto:someone@example.com">Send email&lt;/a>

Link to a phone number:
&lt;a href="tel:+4733378901">+47 333 78 901&lt;/a>

Link to another section on the same page:
&lt;a href="#section2">Go to Section 2&lt;/a>

Link to a JavaScript:
&lt;a href="javascript:alert('Hello World!');">Execute JavaScript&lt;/a>

===========================
<br>

<h2>Jquery If This Contains</h2>

<br>
<a href="https://stackoverflow.com/questions/14510261/jquery-if-this-contains">Jquery If This Contains</a>
<a href="https://stackoverflow.com/questions/16466807/find-element-where-child-items-h2-text-has-a-specific-value">find element where child items h2 text has a specific value</a>
<a href="https://api.jquery.com/children/">selecting children sample</a>
<br>
<a href="https://stackoverflow.com/questions/306583/how-to-get-the-children-of-the-this-selector">get the children of the this selector</a>

var toc = $('#toc>ul');
toc.append($(".parent").find("p:contains('Statistics')").parent().text())
by javascript:
var myDomElement = document.getElementById( "foo" ); // A plain DOM element.
$( myDomElement ).find( "a" ); // Finds
===========================
Loops: while and for
 let i = 0;
 while (i < 3) { // shows 0, then 1, then 2
  alert( i );
  i++;
}
the shorter way to write while (i != 0) could be while (i):
let i = 3;
while (i) {
  alert( i );
  i--;
}
Brackets are not required for a single-line body
If the loop body has a single statement, we can omit the brackets {…}:
let i = 3;
while (i) alert(i--);
The “do…while” loop
The condition check can be moved below the loop body using the do..while syntax:
do {
  // loop body
} while (condition);
The loop will first execute the body, then check the condition and, while it’s truthy, execute it again and again.
For example:
 let i = 0;
do {
  alert( i );
  i++;
} while (i < 3);
This form of syntax is rarely used except when you want the body of the loop to execute at least once regardless of the condition being truthy. 
Usually, the other form is preferred: while(…) {…}.
The “for” loop
The for loop is the most often used one.
It looks like this:
for (begin; condition; step) {
  // ... 
loop body ...
}
Let’s learn the meaning of these parts by example. 
The loop below runs alert(i) for i from 0 up to (but not including) 3:
 for (let i = 0; i < 3; i++) { // shows 0, then 1, then 2
  alert(i);
}
Let’s examine the for statement part by part:
part		
begin	i = 0	Executes once upon entering the loop.
condition	i < 3	Checked before every loop iteration, if fails the loop stops.
step	i++	Executes after the body on each iteration, but before the condition check.
body	alert(i)	Runs again and again while the condition is truthy
The general loop algorithm works like this:
Run begin
→ (if condition → run body and run step)
→ (if condition → run body and run step)
→ (if condition → run body and run step)
→ ...
If you are new to loops, then maybe it would help if you go back to the example and reproduce how it runs step-by-step on a piece of paper.
Here’s what exactly happens in our case:
// for (let i = 0; i < 3; i++) alert(i)
// run begin
let i = 0
// if condition → run body and run step
if (i < 3) { alert(i); i++ }
// if condition → run body and run step
if (i < 3) { alert(i); i++ }
// if condition → run body and run step
if (i < 3) { alert(i); i++ }
// ...finish, because now i == 3
Inline variable declaration
Here the “counter” variable i is declared right in the loop. 
That’s called an “inline” variable declaration. 
Such variables are visible only inside the loop.
         for (let i = 0; i < 3; i++) {
  alert(i); // 0, 1, 2
}
alert(i); // error, no such variable
Instead of defining a variable, we can use an existing one:
 let i = 0;
 for (i = 0; i < 3; i++) { // use an existing variable
  alert(i); // 0, 1, 2
}
alert(i); // 3, visible, because declared outside of the loop
Skipping parts
Any part of for can be skipped.
For example, we can omit begin if we don’t need to do anything at the loop start.
Like here:
 let i = 0; // we have i already declared and assigned
 for (; i < 3; i++) { // no need for "begin"
  alert( i ); // 0, 1, 2
}
We can also remove the step part:
 let i = 0;
 for (; i < 3;) {
  alert( i++ );
}
The loop became identical to while (i < 3).
We can actually remove everything, thus creating an infinite loop:
for (;;) {
  // repeats without limits
}
Please note that the two for semicolons ; must be present, otherwise it would be a syntax error.
Breaking the loop
Normally the loop exits when the condition becomes falsy.
But we can force the exit at any moment. 
There’s a special break directive for that.
For example, the loop below asks the user for a series of numbers, but “breaks” when no number is entered:
let sum = 0;
while (true) {
  let value = +prompt("Enter a number", '');
    if (!value) break; // (*)
    sum += value;
}
alert( 'Sum: ' + sum );
The break directive is activated in the line (*) if the user enters an empty line or cancels the input. 
It stops the loop immediately, passing the control to the first line after the loop. 
Namely, alert.
The combination “infinite loop + break as needed” is great for situations when the condition must be checked not in the beginning/end of the loop, but in the middle, or even in several places of the body.
Continue to the next iteration
The continue directive is a “lighter version” of break. 
It doesn’t stop the whole loop. 
Instead it stops the current iteration and forces the loop to start a new one (if the condition allows).
We can use it if we’re done on the current iteration and would like to move on to the next.
The loop below uses continue to output only odd values:
                           for (let i = 0; i < 10; i++) {
                             // if true, skip the remaining part of the body
  if (i % 2 == 0) continue;
    alert(i); // 1, then 3, 5, 7, 9
}
For even values of i the continue directive stops body execution, passing the control to the next iteration of for (with the next number). 
So the alert is only called for odd values.
The directive continue helps to decrease nesting level
A loop that shows odd values could look like this:
for (let i = 0; i < 10; i++) {
  if (i % 2) {
    alert( i );
  }
}
From a technical point of view it’s identical to the example above. 
Surely, we can just wrap the code in the if block instead of continue.
But as a side-effect we got one more figure brackets nesting level. 
If the code inside if is longer than a few lines, that may decrease the overall readability.
No break/continue to the right side of ‘?’
Please note that syntax constructs that are not expressions cannot be used in '?'. 
In particular, directives break/continue are disallowed there.
For example, if we take this code:
if (i > 5) {
  alert(i);
} else {
  continue;
}
…And rewrite it using a question mark:
                             (i > 5) ? alert(i) : continue; // continue not allowed here
…Then it stops working. 
The code like this will give a syntax error:
That’s just another reason not to use a question mark operator '?' instead of if.
Labels for break/continue
Sometimes we need to break out from multiple nested loops at once.
For example, in the code below we loop over i and j prompting for coordinates (i, j) from (0,0) to (3,3):
 for (let i = 0; i < 3; i++) {
   for (let j = 0; j < 3; j++) {
      let input = prompt(`Value at coords (${i},${j})`, '');
        // what if I want to exit from here to Done (below)?
      }
}
alert('Done!');
We need a way to stop the process if the user cancels the input.
The ordinary break after input would only break the inner loop. 
That’s not sufficient. 
Labels come to the rescue.
A label is an identifier with a colon before a loop:
labelName: for (...) {
  ...
}
The break &lt;labelName&gt; statement in the loop breaks out to the label.
Like here:
  outer: for (let i = 0; i < 3; i++) {
    for (let j = 0; j < 3; j++) {
      let input = prompt(`Value at coords (${i},${j})`, '');
        // if an empty string or canceled, then break out of both loops
    if (!input) break outer; // (*)
        // do something with the value...
  }
}
alert('Done!');
In the code above break outer looks upwards for the label named outer and breaks out of that loop.
So the control goes straight from (*) to alert('Done!').
We can also move the label onto a separate line:
outer:
for (let i = 0; i < 3; i++) { ... 
}
The continue directive can also be used with a label. 
In this case the execution jumps to the next iteration of the labeled loop.
Labels are not a “goto”
Labels do not allow us to jump into an arbitrary place of code.
For example, it is impossible to do this:
break label;  // jumps to label? No.
label: for (...)
The call to a break/continue is only possible from inside the loop, and the label must be somewhere upwards from the directive.
Summary
We covered 3 types of loops:
while – The condition is checked before each iteration.
do..while – The condition is checked after each iteration.
for (;;) – The condition is checked before each iteration, additional settings available.
To make an “infinite” loop, usually the while(true) construct is used. 
Such a loop, just like any other, can be stopped with the break directive.
If we don’t want to do anything on the current iteration and would like to forward to the next one, the continue directive does it.
Break/continue support labels before the loop. 
A label is the only way for break/continue to escape the nesting and go to the outer loop.
Tasks
Last loop value
importance: 3
What is the last value alerted by this code? Why?
let i = 3;
while (i) {
  alert( i-- );
}
solution
Which values shows the while?
importance: 4
For every loop, write down which values it shows, in your opinion. 
And then compare with the answer.
Both loops alert same values or not?
The prefix form ++i:
let i = 0;
while (++i < 5) alert( i );
The postfix form i++
let i = 0;
while (i++ < 5) alert( i );
solution
Which values get shown by the "for" loop?
importance: 4
For each loop write down which values it is going to show. 
Then compare with the answer.
Both loops alert same values or not?
The postfix form:
for (let i = 0; i < 5; i++) alert( i );
The prefix form:
for (let i = 0; i < 5; ++i) alert( i );
solution
Output even numbers in the loop
importance: 5
Use the for loop to output even numbers from 2 to 10.
Run the demo
solution
Replace "for" with "while"
importance: 5
Rewrite the code changing the for loop to while without altering its behavior (the output should stay same).
 for (let i = 0; i < 3; i++) {
  alert( `number ${i}!` );
}
solution
Repeat until the input is correct
importance: 5
Write a loop which prompts for a number greater than 100. 
If the visitor enters another number – ask him to input again.
The loop must ask for a number until either the visitor enters a number greater than 100 or cancels the input/enters an empty line.
Here we can assume that the visitor only inputs numbers. 
There’s no need to implement a special handling for a non-numeric input in this task.
Run the demo
solution
Output prime numbers
importance: 3
An integer number greater than 1 is called a prime if it cannot be divided without a remainder by anything except 1 and itself.
In other words, n > 1 is a prime if it can’t be evenly divided by anything except 1 and n.
For example, 5 is a prime, because it cannot be divided without a remainder by 2, 3 and 4.
Write the code which outputs prime numbers in the interval from 2 to n.
For n = 10 the result will be 2,3,5,7.
P.S. 
The code should work for any n, not be hard-tuned for any fixed value.
===========================
<br>

<h2>android javascript tts</h2>

var msg = new SpeechSynthesisUtterance('Hello World');<br>
window.speechSynthesis.speak(msg);<br>
===========================
<br>

<h2>Google Maps in HTML</h2>

<a href="https://www.w3schools.com/graphics/tryit.asp?filename=trymap_intro">Google Maps in HTML</a>
<br>
&lt;html&gt;
&lt;body&gt;
&lt;div id="googleMap" style="width:100%;height:400px;"&gt;&lt;/div&gt;
&lt;script&gt;
function myMap() {
var mapProp= { center:new google.maps.LatLng(51.508742,-0.120850), zoom:5,};
var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);}
&lt;/script&gt;
&lt;script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu-916DdpKAjTmJNIgngS6HL_kDIKU0aU&callback=myMap"&gt;
&lt;/script&gt;
&lt;!--
To use this code on your website, get a free API key from Google.
Read more at: https://www.w3schools.com/graphics/google_maps_basic.asp
--&gt;
&lt;/body&gt;
&lt;/html&gt;

<h2>JavaScript examples</h2>
JavaScript can change HTML content.
&lt;button type="button" onclick='document.getElementById("demo").innerHTML = "Hello JavaScript!"'&gt;Click Me!&lt;/button&gt;

JavaScript can change HTML attributes.
&lt;button onclick="document.getElementById('myImage').src='pic_bulbon.gif'"&gt;Turn on the light&lt;/button&gt;
&lt;img id="myImage" src="pic_bulboff.gif" style="width:100px"&gt;
&lt;button onclick="document.getElementById('myImage').src='pic_bulboff.gif'"&gt;Turn off the light&lt;/button&gt;
JavaScript can change the style of an HTML element.
&lt;button type="button" onclick="document.getElementById('demo').style.fontSize='35px'"&gt;Click Me!&lt;/button&gt;

JavaScript can hide HTML elements.
&lt;button type="button" onclick="document.getElementById('demo').style.display='none'"&gt;Click Me!&lt;/button&gt;

JavaScript can show hidden HTML elements.
&lt;button type="button" onclick="document.getElementById('demo').style.display='block'"&gt;Click Me!&lt;/button&gt;

Writing into an window alert box
window.alert(5 + 6);

Writing into the HTML output
document.write(5 + 6);

Writing into an HTML element
document.getElementById("demo").innerHTML = 5 + 6;

Writing into the browser console
console.log(5 + 6);

JavaScript in &lt;head&gt;
&lt;script&gt;
    document.getElementById("demo").innerHTML = "Paragraph changed.";
&lt;/script&gt;

JavaScript in &lt;body&gt;
&lt;script&gt;
    document.getElementById("demo").innerHTML = "Paragraph changed.";
&lt;/script&gt;

JavaScript in an external file
&lt;script src="myScript.js"&gt;&lt;/script&gt;

External JavaScript Advantages:
separates HTML and code, 
makes HTML and JavaScript easier to read and maintain,
Cached JavaScript files can speed up page loads.

JavaScript Statements
A JavaScript program is a list of statements to be executed by a computer.
var x, y, z;  // Declare 3 variables
x = 5;        // Assign the value 5 to x
y = 6;        // Assign the value 6 to y
z = x + y;    // Assign the sum of x and y to z

document.getElementById("demo").innerHTML = "The value of z is " + z + ".";

JavaScript Numbers
document.getElementById("demo").innerHTML = 10.50;

JavaScript strings
Strings can be written with double or single quotes.
document.getElementById("demo").innerHTML = 'John Doe';

JavaScript expressions
Expressions compute to values.
document.getElementById("demo").innerHTML = 5 * 10;

JavaScript keywords
The var Keyword Creates Variables
var x, y;

JavaScript variables
var x;
x = 6;

JavaScript assignment
the = operator is used to assign values to variables.
x = 5;

JavaScript operators
use arithmetic operators to compute values (just like algebra).
document.getElementById("demo").innerHTML = (5 + 6) * 10;

JavaScript comments
JavaScript Comments are NOT Executed
// x = 6; I will not be executed

JavaScript is case sensitive
lastName = "Doe";
lastname = "Peterson";

JavaScript statements are commands to the browser
In HTML, JavaScript statements are executed by the browser.

JavaScript code is a sequence of statements
A JavaScript program is a list of statements to be executed by a computer.
JavaScript statements are separated with semicolon
JavaScript statements are separated by semicolons.

Multiple statements on one line is allowed.
a = 1; b = 2; c = a + b;

JavaScript statements can be grouped together in code blocks
JavaScript code blocks are written between { and }
function myFunction() {
    document.getElementById("demo1").innerHTML = "Hello Dolly!";
    document.getElementById("demo2").innerHTML = "How are you?";
}
You can break a code line after an operator or a comma.

The best place to break a code line is after an operator or a comma.
document.getElementById("demo").innerHTML =
"Hello Dolly!";

Single line comments
// Change heading:
Single line comments at the end of a line
var x = 5;      // Declare x, give it the value of 5
Multiple lines comments
/*
The code below will change the heading with id = "myH"
and the paragraph with id = "myp" in my web page:
*/
Single line comment to prevent execution
//document.getElementById("myH").innerHTML = "My First Page";
Multiple lines comment to prevent execution
/*
document.getElementById("myH").innerHTML = "Welcome to my Homepage";
document.getElementById("myP").innerHTML = "This is my first paragraph.";
*/

JavaScript variables as algebra
var total = price1 + price2;

JavaScript numbers and strings
Strings are written with quotes.
Numbers are written without quotes.
Declaring many variables in one statement
You can declare many variables in one statement.
var person = "John Doe", carName = "Volvo", price = 200;

Declaring many variables multiline
var person = "John Doe",
carName = "Volvo",
price = 200;

A variable without a value returns the value undefined
var carName;
Re-declaring a variable will not destroy the value
var carName = "Volvo";
var carName;

Adding JavaScript numbers
var x = 5 + 2 + 3;
Adding JavaScript strings
var x = "John" + " " + "Doe";

Adding strings and numbers gives string
x = "5" + 2 + 3;

The modulus (%) operator
var z = x % y;
The increment (++) operator
increment
The decrement (--) operator

decrement
The = assignment operator
var x = 10;
The += assignment operator
var x = 10;
x += 5; // = 15
The -= assignment operator
var x = 10;
x -= 5; // = 5
The *= assignment operator
var x = 10;
x *= 5; // = 50
The /= assignment operator
var x = 10;
x /= 5; // = 2
The %= assignment operator
var x = 10;
x %= 5; // = 0

Adding two strings together using the concatenating (+) operator
var txt1 = "What a very";
var txt2 = "nice day";
document.getElementById("demo").innerHTML = txt1 + txt2;

Adding two strings together using using the += operator
txt1 = "What a very ";
txt1 += "nice day";
document.getElementById("demo").innerHTML = txt1;

Adding strings and numbers
var x = 5 + 5;
var y = "5" + 5;
var z = "Hello" + 5;
document.getElementById("demo").innerHTML =
x + "&lt;br&gt;" + y + "&lt;br&gt;" + z;

Declare (create) strings
var answer1 = "It's alright";
var answer2 = "He is called 'Johnny'";
var answer3 = 'He is called "Johnny"';
document.getElementById("demo").innerHTML =
answer1 + "&lt;br&gt;" + 
answer2 + "&lt;br&gt;" + 
answer3;

Declare (create) numbers
var x1 = 34.00;
var x2 = 34;
var x3 = 3.14;
document.getElementById("demo").innerHTML =
x1 + "&lt;br&gt;" + x2 + "&lt;br&gt;" + x3;
Declare (create) an array
var cars = ["Saab","Volvo","BMW"];
document.getElementById("demo").innerHTML = cars[0];

Declare (create) an object
var person = {
    firstName : "John",
    lastName  : "Doe",
    age       : 50,
    eyeColor  : "blue"
};
document.getElementById("demo").innerHTML =
person.firstName + " is " + person.age + " years old.";

Find the type of a variable
document.getElementById("demo").innerHTML = 
typeof "" + "&lt;br&gt;" +
typeof "John" + "&lt;br&gt;" + 
typeof "John Doe" + "&lt;br&gt;" +
typeof 0 + "&lt;br&gt;" +
typeof 314 + "&lt;br&gt;" +
typeof 3.14 + "&lt;br&gt;" +
typeof (3.14);

Adding two numbers and a string
var x = 16 + 4 + "Volvo";
document.getElementById("demo").innerHTML = x;

Adding a string and two numbers
var x = "Volvo" + 16 + 4;
document.getElementById("demo").innerHTML = x;
An undefined variable
The value (and the data type) of a variable with no value is undefined.
var car;
document.getElementById("demo").innerHTML =
car + "&lt;br&gt;" + typeof car;

An empty variable
var car = "";
document.getElementById("demo").innerHTML =
"The value is: " +
car + "&lt;br&gt;" +
"The type is: " + typeof car;
Create a JavaScript variable
var car = "Fiat";
document.getElementById("demo").innerHTML = car;
Create a JavaScript object
var car = {type:"Fiat", model:"500", color:"white"};
document.getElementById("demo").innerHTML = car.type;
Create a person object (single line)
var person = {firstName:"John", lastName:"Doe", age:50, eyeColor:"blue"};
document.getElementById("demo").innerHTML =  person.firstName + " is " + person.age + " years old.";
Create a person object (multiple lines)
var person = {
    firstName : "John",
    lastName  : "Doe",
    age       : 50,
    eyeColor  : "blue"
};
document.getElementById("demo").innerHTML = person.firstName + " is " + person.age + " years old.";

Access object properties using .property
var person = { firstName: "John", lastName : "Doe", id:  5566};
document.getElementById("demo").innerHTML = person.firstName + " " + person.lastName;

Access object properties using [property]
var person = {
    firstName: "John",
    lastName : "Doe",
    id       :  5566
};
document.getElementById("demo").innerHTML = person["firstName"] + " " + person["lastName"];
Access a function property as a method
var person = {
    firstName: "John",
    lastName : "Doe",
    id       : 5566,
    fullName : function() {
       return this.firstName + " " + this.lastName;
    }
};
document.getElementById("demo").innerHTML = person.fullName();
Access a function property as a property
var person = { firstName: "John", lastName : "Doe", id : 5566, fullName : function() { return this.firstName + " " + this.lastName; }};
document.getElementById("demo").innerHTML = person.fullName;

A simple function
function myFunction() { document.getElementById("demo").innerHTML = "Hello World!";}
A function with an argument
function myFunction(name,job) { document.getElementById("demo").innerHTML = "Welcome " + name + ", the " + job + ".";}
A function with an argument 2
function myfunction(txt) { document.getElementById("demo").innerHTML = txt} 
A function that returns a value
var x = myFunction(4, 3);
document.getElementById("demo").innerHTML = x;
function myFunction(a, b) {    return a * b;}
A function that converts Fahrenheit to Celsius
function toCelsius(f) { return (5/9) * (f-32);}
document.getElementById("demo").innerHTML = toCelsius(77);
A function call without ()
function toCelsius(f) {    return (5/9) * (f-32);}
document.getElementById("demo").innerHTML = toCelsius;

An onclick event changes an HTML element
&lt;button onclick="document.getElementById('demo').innerHTML=Date()"&gt;The time is?&lt;/button&gt;
An onclick event changes its own element
&lt;button onclick="this.innerHTML=Date()"&gt;The time is?&lt;/button&gt;
An onclick event calls a function
&lt;button onclick="displayDate()"&gt;The time is?&lt;/button&gt;
function displayDate() {
    document.getElementById("demo").innerHTML = Date();
}
Backslash before quotes accepts quotes as quotes.
&lt;script&gt;
var x = 'It\'s alright';
var y = "We are the so-called \"Vikings\" from the north.";
document.getElementById("demo").innerHTML = x + "&lt;br&gt;" + y; 
&lt;/script&gt;
Find the length of a string
var txt = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
document.getElementById("demo").innerHTML = txt.length;

You can break text string with a backslash.
document.getElementById("demo").innerHTML = "Hello \
Dolly!";
You cannot break code with a backslash.
document.getElementById("demo").innerHTML = \
"Hello Dolly.";
Find the position of the first occurrence of a text in a string - indexOf()
var str = "Please locate where 'locate' occurs!";
var pos = str.indexOf("locate");
document.getElementById("demo").innerHTML = pos;
Search for a text in a string and return the text if found - match()
    var str = "The rain in SPAIN stays mainly in the plain"; 
    var res = str.match(/ain/g);
    document.getElementById("demo").innerHTML = res;
    Replace characters in a string - replace()
    var str = document.getElementById("demo").innerHTML; 
    var txt = str.replace("Microsoft","W3Schools");
    document.getElementById("demo").innerHTML = txt;
    Convert string to upper case - toUpperCase()
    var text = document.getElementById("demo").innerHTML;
    document.getElementById("demo").innerHTML = text.toUpperCase();
    Convert string to lower case - toLowerCase()
    var text = document.getElementById("demo").innerHTML;
    document.getElementById("demo").innerHTML = text.toLowerCase();
    Split a string into an array - split()
    var str = "a,b,c,d,e,f";
    var arr = str.split(",");
    document.getElementById("demo").innerHTML = arr[0];

Number are considered accurate only up to 15 digits
    var x = 999999999999999;
    var y = 9999999999999999;
    document.getElementById("demo").innerHTML = x + "&lt;br&gt;" + y;
    Floating point arithmetic is not always 100% accurate
    var x = 0.2 + 0.1;
    document.getElementById("demo").innerHTML = "0.2 + 0.1 = " + x;
    it helps to multiply and divide by 10
    var x = (0.2*10 + 0.1*10) / 10;
    document.getElementById("demo").innerHTML = "0.2 + 0.1 = " + x;
}
Constants, preceded by 0x, are interpreted as hexadecimal
    document.getElementById("demo").innerHTML = "0xFF = " + 0xFF;

The toString() method can output numbers as hex, octal, and binary
    var myNumber = 128;
    document.getElementById("demo").innerHTML = "128 = " + 
    myNumber + " Decimal, " +
    myNumber.toString(16) + " Hexadecimal, " +
    myNumber.toString(8) + " Octal, " +
    myNumber.toString(2) + " Binary."

JavaScript will generate Infinity if you calculate a too large number
    var myNumber = 2; 
    var txt = "";
    while (myNumber != Infinity) {
        myNumber = myNumber * myNumber;
        txt = txt + myNumber + "&lt;br&gt;";
    }
    document.getElementById("demo").innerHTML = txt;
    Division by zero generates Infinity
    var x = 2/0;
    var y = -2/0;
    document.getElementById("demo").innerHTML = x + "&lt;br&gt;" + y;
    A number divided by a string is not a number
    var x = 1000 / "Apple";
    var y = 1000 / "10";
    document.getElementById("demo").innerHTML = x + "&lt;br&gt;" + y;

Math.PI returns the value of PI
document.getElementById("demo").innerHTML = Math.PI;

Math.round(x) returns the rounded value of x
document.getElementById("demo").innerHTML = Math.round(4.4);

Math.pow(x,y) returns the value of x to the power of y
document.getElementById("demo").innerHTML = Math.pow(8,2);

Math.sqrt(x) returns the square root of x
document.getElementById("demo").innerHTML = Math.sqrt(64);

Math.abs(x) returns the absolute (positive) value of x
document.getElementById("demo").innerHTML = Math.abs(-4.4);

Math.ceil(x) returns the value of x rounded up
document.getElementById("demo").innerHTML = Math.ceil(4.4);

Math.floor(x) returns the value of x rounded down
document.getElementById("demo").innerHTML = Math.floor(4.7);

Math.sin(x) returns the sin of the angel x (given in radians)
document.getElementById("demo").innerHTML = 
"The sine value of 90 degrees is " + Math.sin(90 * Math.PI / 180);
Math.cos(x) returns the cosin of the angel x (given in radians)
document.getElementById("demo").innerHTML = 
"The cosine value of 0 degrees is " + Math.cos(0 * Math.PI / 180);
Math.max() return the number with the highest value from a list of arguments
document.getElementById("demo").innerHTML =
Math.max(0, 150, 30, 20, -8, -200);
Math.min() to return the number with the lowest value from a list of arguments
document.getElementById("demo").innerHTML =
Math.min(0, 150, 30, 20, -8, -200);
=====================
<h2>Find the min/max element of an Array</h2>
Note: These Math functions will not work as-is with arrays of numbers.
However, there are some ways around this.

var numbers = [1, 2, 3, 4];
Math.max.apply(null, numbers) // 4
Math.min.apply(null, numbers) // 1

A simpler, ES2015 way of accomplishing this is with the new spread operator.
var numbers = [1, 2, 3, 4];
Math.max(...numbers) // 4
Math.min(...numbers) // 1
=====================
fill array with consecutive numbers
const trainY = [];
for(x=0; x&lt;(trainX.length-1); x++){trainY[x] = x+1;}
=====================
Converting Celsius to Fahrenheit
var x;
    if (degree == "C") {
        x = document.getElementById("c").value * 9 / 5 + 32;
        document.getElementById("f").value = Math.round(x);
    } else {
        x = (document.getElementById("f").value -32) * 5 / 9;
        document.getElementById("c").value = Math.round(x);
    }

Math.random() returns a random number between 0 (included) and 1 (excluded)
document.getElementById("demo").innerHTML = Math.random();

How to return a random integer between 0 and 9 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 10);
How to return a random integer between 0 and 10 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 11);

How to return a random integer between 0 and 99 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 100);
How to return a random integer between 0 and 100 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 101);
How to return a random integer between 1 and 10 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 10) + 1;
How to return a random integer between 1 and 100 (both included)
document.getElementById("demo").innerHTML =
Math.floor(Math.random() * 100) + 1;
How to return a random integer between x (included) and y (excluded)
    return Math.floor(Math.random() * (max - min)) + min;

How to return a random integer between x and y (both included)
    return Math.floor(Math.random() * (max - min + 1) ) + min;

Use Date() to display today's date and time
var d = new Date();
document.getElementById("demo").innerHTML = d;
Use getFullYear() display the year
var d = new Date();
document.getElementById("demo").innerHTML = d.getFullYear();
Use getTime() to calculate the number of milliseconds since 1970
var d = new Date();
document.getElementById("demo").innerHTML = d.getTime();
Use setFullYear() to set a specific date
var d = new Date();
d.setFullYear(2020);
document.getElementById("demo").innerHTML = d;
Use toUTCString() to convert today's date (according to UTC) to a string
var d = new Date();
document.getElementById("demo").innerHTML = d.toUTCString();
Use getDay() to display the weekday as a number
var d = new Date();
document.getElementById("demo").innerHTML = d.getDay();

Use getDay() and an array to display the weekday as a name
var d = new Date();
var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
document.getElementById("demo").innerHTML = days[d.getDay()];
Display a clock
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();
    var s = today.getSeconds();
    m = checkTime(m);
    s = checkTime(s);
    document.getElementById('txt').innerHTML =
    h + ":" + m + ":" + s;
    var t = setTimeout(startTime, 500);
}
function checkTime(i) {
    if (i &lt; 10) {i = "0" + i};  // add zero in front of numbers &lt; 10
    return i;
}
Create an array
var cars = ["Saab", "Volvo", "BMW"];
document.getElementById("demo").innerHTML = cars;

Join two arrays - concat()
var myGirls = ["Cecilie", "Lone"];
var myBoys = ["Emil", "Tobias", "Linus"];
var myChildren = myGirls.concat(myBoys);
document.getElementById("demo").innerHTML = myChildren;

Join three arrays - concat()
var arr1 = ["Cecilie", "Lone"];
var arr2 = ["Emil", "Tobias", "Linus"];
var arr3 = ["Robin", "Morgan"];
var myChildren = arr1.concat(arr2, arr3); 
document.getElementById("demo").innerHTML = myChildren;

Join all elements of an array into a string - join()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits.join(" * ");

Remove the last element of an array - pop()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo1").innerHTML = fruits;
fruits.pop();
document.getElementById("demo2").innerHTML = fruits;

Add new elements to the end of an array - push()
var fruits = ["Banana", "Orange", "Apple", "Mango"]; document.getElementById("demo").innerHTML = fruits;

function myFunction() {
    fruits.push("Kiwi"); document.getElementById("demo").innerHTML = fruits;}
    Reverse the order of the elements in an array - reverse()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;

function myFunction() {
    fruits.sort(); fruits.reverse(); document.getElementById("demo").innerHTML = fruits; }

Remove the first element of an array - shift()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo1").innerHTML = fruits;
fruits.shift();
document.getElementById("demo2").innerHTML = fruits;

Select elements from an array - slice()
array.slice(start, end)
The slice() method selects the elements starting at the given start argument, 
and ends at, but does not include, the given end argument.
var fruits = ["Banana", "Orange", "Lemon", "Apple", "Mango"];
var citrus = fruits.slice(1,3);  // Orange, Lemon
var myBest = fruits.slice(-3, -1);  // Lemon, Apple, Mango
document.getElementById("demo").innerHTML = myBest;

Sort an array (alphabetically and ascending) - sort()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;

function myFunction() {
    fruits.sort(); document.getElementById("demo").innerHTML = fruits;}
    Sort numbers (numerically and ascending) - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;    

function myFunction() { points.sort(function(a, b){return a - b}); document.getElementById("demo").innerHTML = points;}

Sort numbers (numerically and descending) - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;

function myFunction() {
    points.sort(function(a, b){return b - a});
    document.getElementById("demo").innerHTML = points;
}

Sort numbers (alphabetically and numerically) - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;    

function myFunction1() {
    points.sort();
    document.getElementById("demo").innerHTML = points;
}

function myFunction2() {
    points.sort(function(a, b){return a - b});
    document.getElementById("demo").innerHTML = points;
}

Sort numbers in random order - sort()
var points = [40, 100, 1, 5, 25, 10];
document.getElementById("demo").innerHTML = points;    

function myFunction() {
    points.sort(function(a, b){return 0.5 - Math.random()});
    document.getElementById("demo").innerHTML = points;
}

Sort objects by numeric properties - sort()
var cars = [{type:"Volvo", year:2016}, {type:"Saab", year:2001}, {type:"BMW", year:2010}]
displayCars();

function myFunction() { cars.sort(function(a, b){return a.year - b.year}); displayCars();}

function displayCars() { document.getElementById("demo").innerHTML =
  cars[0].type + " " + cars[0].year + "&lt;br&gt;" +
  cars[1].type + " " + cars[1].year + "&lt;br&gt;" +
  cars[2].type + " " + cars[2].year;}

Sort objects by string properties - sort()
var cars = [
{type:"Volvo", year:2016},
{type:"Saab", year:2001},
{type:"BMW", year:2010}]
displayCars();

function myFunction() {
    cars.sort(function(a, b){
        var x = a.type.toLowerCase();
        var y = b.type.toLowerCase();
        if (x &lt; y) {return -1;}
        if (x &gt; y) {return 1;}
        return 0;
    }); displayCars();}

function displayCars() {
  document.getElementById("demo").innerHTML =
  cars[0].type + " " + cars[0].year + "&lt;br&gt;" +
  cars[1].type + " " + cars[1].year + "&lt;br&gt;" +
  cars[2].type + " " + cars[2].year;
}

Add an element to position 2 in an array - splice()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;

function myFunction() {
    fruits.splice(2, 0, "Lemon", "Kiwi");
    document.getElementById("demo").innerHTML = fruits;}
    Convert an array to a string - toString()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits.toString();

Add new elements to the beginning of an array - unshift()
var fruits = ["Banana", "Orange", "Apple", "Mango"];
document.getElementById("demo").innerHTML = fruits;

function myFunction() {
    fruits.unshift("Lemon");
    document.getElementById("demo").innerHTML = fruits;
}
Note: fruits.unshift("Lemon");
but not: fruits = fruits.unshift("Lemon");
===========================

<h2>Creating Keyboard Shortcuts in JavaScript</h2>
Using Plain JavaScript
&lt;h3>Press M key on keyboard(Single key)&lt;/h3>
&lt;h3>Press Ctrl + B shortcut key (Double key combination)&lt;/h3>
&lt;h3>Press Ctrl + Alt + Y shortcut key (Multiple key combination)&lt;/h3>
&lt;h3>Press Ctrl + Alt + Shift + U shortcut key (Multiple key combination)&lt;/h3>
Add script tag before the closing tag of body tag and put in the below script.
document.onkeyup = function(e) {
  if (e.which == 77) { alert("M key was pressed");
  } else if (e.ctrlKey && e.which == 66) { alert("Ctrl + B was pressed");
  } else if (e.ctrlKey && e.altKey && e.which == 89) { alert("Ctrl + Alt + Y was pressed");
  } else if (e.ctrlKey && e.altKey && e.shiftKey && e.which == 85) { alert("Ctrl + Alt + Shift + U was pressed");
  }
};
for cross browser compatibility you can use something like this.
var key = e.which || e.keyCode;
Here 77, 66, 89, 85 are the key code representations
ctrlKey, shiftKey and altKey are the read-only properties which hold boolean information about these keys.
This was using plain JavaScript. 

Now let’s try this using jQuery.
Using jQuery
For this example, let’s create a simple Login page, which displays a message whenever Caps Lock is ON.
&lt;h3 class="container"&gt;Displays message whenever CAPS LOCK is ON&lt;/h3&gt;  
&lt;div class="container-fluid content"&gt;
  &lt;form class="form-horizontal"&gt;
    &lt;div class="form-group"&gt;
      &lt;input type="text" class="form-control" placeholder="Username"&gt;
    &lt;/div&gt;
    &lt;div class="form-group"&gt;
      &lt;input type="password" class="form-control" placeholder="Password"&gt;
    &lt;/div&gt;
    &lt;div id="message" class="form-group"&gt;
        &lt;p&gt;Caps lock is ON&lt;/p&gt;
    &lt;/div&gt;
    &lt;div class="form-group"&gt;
    &lt;button type="submit" class="btn btn-primary"&gt;Sign in&lt;/button&gt;
    &lt;/div&gt;
  &lt;/form&gt;
&lt;/div&gt;
Now coming to the JS part of the code, initially we want the ‘message’ to be hidden. 
So include this,
$('#message').hide();
Now to find out whether the Caps Lock is On or not, simply use a keypress event, so whenever the user presses a key, the keycode information is extracted and checked whether it is in lower case or upper case. 
Based on this the message is made visible. 
The code should look something like this.
$(document).ready(function() {
    $('#message').hide();
})
$('.form-control').keypress(function(e) {
  var c = String.fromCharCode(e.which);
  if (c.toUpperCase() === c && c.toLowerCase() !== c && !e.shiftKey) {
    $('#message').show();
  } else {
    $('#message').hide();
  }
});
In the above code shift, key property is also checked, to see whether shift key was pressed along with another key.
The only issue with the above code is, it displays the message whenever a character is pressed and not when the caps lock key is pressed.
The KeyCode Finder
In the first example, we used key codes like 77, 66, 89, and 85. 
This example helps you to find out these keycodes.
I have a created a pen for this example, just press the desired key and it will display the key code associated with that key.
Using Mousetrap.js
Imagine a situation where there are a lot of shortcut keys to be implemented in a page, using above methods is not feasible. 
For example in a cloud-based IDE, there are a lot of shortcut keys used. 
So this can be simplified using the JS library Mousetrap.js. 
The CDN link is here.
I have created a simple pen for this example.
Here, in this example Mousetrap.bind function is used. 
This function binds a key combination with a callback function. 
There are some other functionalities also with this library. 
Read about all of them here.
Conclusion
All these above examples explained how to use keyboard shortcuts in JS. 
The Mousetrap library simplifies this whole process by just using bind method. 
There are many other libraries like KeyboardJS, Keypress or Keymaster which all do almost the same thing.
JavaScriptWeb DevelopmentKeyobard ShortcutsMousetrapjs
===========================
<br>

<h2>search text inside page</h2>

<br>

&lt;input type="text" id="searchText" value="美容"&gt;
&lt;button onclick="searchIt()"&gt;查找&lt;/button&gt;
&lt;p id="searchResult"&gt;&lt;/p&gt;
function searchIt() {searchResultList = "查找結果：
 ";var featureStr = document.getElementById("searchText").value;$("div").each(function(i) {	drugName = $(this).children("b").text();	drugFunc = $(this).text();			if (drugFunc.includes(featureStr)) {		searchResultList = searchResultList + drugName + ", ";	}});document.getElementById("searchResult").innerHTML = searchResultList;
}
===========================
<br>

<h2>search link ID inside page</h2>

<br>

$(document).ready(function(){
    $('div b').click(function(){
    parent.history.back();
    return false;
    });
});
document.querySelector('#searchText').focus();
$('#searchText').keyup(function (e) {if (e.keyCode === 13) {searchIt();}});
function searchIt() {searchResultList = "查找結果：
 ";var featureStr = document.getElementById("searchText").value;$("div").each(function(i) {	drugName = $(this).children("b").text();	drugNameID = $(this).children("b").attr('id');	drugFunc = $(this).text();	drugDetail = drugName + drugFunc;			if (drugDetail.includes(featureStr)) {		theLink = '&lt;a href="#' + drugNameID + '" target="_self"&gt;' + drugName + '&lt;/a&gt;, ';		searchResultList = searchResultList + theLink;	}});document.getElementById("searchResult").innerHTML = searchResultList;
}
<br>
===========================
<br>
<br>

<h2>轉繁體 轉簡體</h2>

<br>

&lt;script type="text/javascript" src="https://www.ifreesite.com/1-plus/gbkbig5.js"&gt;&lt;/script&gt;
&lt;form name="biggbks"&gt;
    &lt;input onClick="s2t()" type="button" value="轉繁體"&gt;
    &lt;input onClick="t2s()" type="button" value="轉簡體"&gt;
    &lt;textarea name="text" id="text" rows="1" cols="40" onKeyUp="changeText(this);"&gt;&lt;/textarea&gt;&lt;div class="tops"&gt;	&lt;input type="button" value="復原" onClick="undo()" /&gt;
    		&lt;input onClick="blank()" type="button" value="清除" /&gt;&lt;/div&gt;
  &lt;/form&gt;
===========================
<br>
<br>

<h2>To refresh page using javascript instead of meta tag:</h2>

<br>

refreshTime = 2000;  // reload page after 2 seconds
setTimeout(function() { location.reload(); },refreshTime);
===========================
<br>
<br>
<h2>JaveScript to iterate over localStorage browser object</h2>
for (var i = 0; i < localStorage.length; i++){
    key=localStorage.key(i); 
    console.log(key+': '+localStorage.getItem(key));
}

<h3>Advanced script</h3>
As mentioned <a href="http://stackoverflow.com/a/28118108/1230477">here</a> a HTML5 featured browser should also implement <code>Array.prototype.map</code>. 

So script would be:

Array.apply(0, new Array(localStorage.length)).map(function (o, i){
 return localStorage.key(i)+':'+localStorage.getItem(localStorage.key(i)); 
})

===========================
<br>
<br>

<h2>html5 localStorage</h2>
<code>localStorage</code> only supports strings.
Use <code>JSON.stringify()</code> and <code>JSON.parse()</code>.
var names = [];
names[0] = prompt("New member name?").setItem("names", JSON.stringify(names));
//...
var storedNames = JSON.parse(localStorage.getItem("names"));

=========
localStorage.setItem("objName", "PeterPan")
localStorage.getItem("objName")
localStorage.length
localStorage.key(0);
localStorage.removeItem("objName")
localStorage.heedCode="test code"
localStorage.removeItem("heedCode")
localStorage.setItem("heedCode", "00PeterPan")
heedCodeList = ["372","1800"]
localStorage.savedCodeList = JSON.stringify(heedCodeList);
oldheedCodeList = JSON.parse(localStorage.savedCodeList)
oldheedCodeList[0]
oldheedCodeList[1]

if (localStorage.getItem("savedCodeList") === null) {
  heedCodeList = [];
  localStorage.savedCodeList = JSON.stringify(heedCodeList);
} else{
  heedCodeList = JSON.parse(localStorage.savedCodeList);
}
=========
var jsonData = JSON.parse(document.getElementById('data').textContent)
=========
$.getJSON("https://api.github.com/users/jeresig");
=========

<b>localStorage namespace</b>
one localStorage for each subdomain.

Local Storage is prone to name clashes and accidental data overrides

A simple solution is to prefix all your app specific keys with your unique project name

several applications run on the same protocol/server/port, but with a different url, they will have access to the same localstorage.

if keys are using names that any other developer might use like "user", "data", "cache", you might end up reading localstorage from another application altogether. 
If that app is running on the same server.

Total amount of data that can be stored is limited per domain

===========================
<br>
<h2>localStorage.savedCodeList</h2>

if (localStorage.getItem("savedCodeList") === null) {
  heedCodeList = [];
  localStorage.savedCodeList = JSON.stringify(heedCodeList);
} else{
  heedCodeList = JSON.parse(localStorage.savedCodeList);
}

localStorage.savedCodeList = JSON.stringify(heedCodeList);

heedChart
  <button class="goldb" onclick=addToHeedCodeList()>&hearts;</button>

heedChart.html

if (!heedCodeList.includes(stkChartList[remainChtNo])) {
  heedCodeList.push(stkChartList[remainChtNo]);
  heedCodeList = Array.from(new Set(heedCodeList))
  localStorage.savedCodeList = JSON.stringify(heedCodeList);
}
<h2>execCommand</h2>

  copyText = JSON.stringify(stkChartList);
  copyText.select();
  document.execCommand("copy");
The execCommand() method executes the specified command for the selected part of an editable section.
<h2>window width</h2>

var w = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);
740
814
var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);
572
177309

document.documentElement.clientWidth
document.documentElement.clientHeight

$(window).width() and $(window).height()

<h2>setFontSize</h2>

            function setFontSize(size)
            {
                $.cookie('fontsize', size, { path: '/' });
                window.location.reload();
            }
<h2>swiperight</h2>

$("body").on("swiperight",function(){
    jpButClick();
});
$("body").on("swipeleft",function(){
    jpback();
});
<h2>Regex To match all occurences using /g</h2>

1.
var str = "The rain in SPAIN stays mainly in the plain"; 
var res = str.match(/ain/g);
2.
var msg = "For example, /green|red/ matches 'green' in 'green apple' and 'red' in 'red apple.' The order of 'x' and 'y' matters. 
For example a*|b matches the empty string in 'b', but b|a* matches 'b' in the same string."
var result = msg.match(/green|red/g)
3.
re = /green|red/g
var all_matches = msg.match(re);
console.log(all_matches)
4.
To list out the object structure using JSON.stringify
str = JSON.stringify(result);
str = JSON.stringify(result, null, 4); // (Optional) beautiful indented output.
console.log(str);
5.
Some more tips:
Object.keys(result);
Object.getOwnPropertyNames(result);
result.length;

===================================
var patt = /w3schools/i
Example explained:

/w3schools/i  is a regular expression.
w3schools  is a pattern (to be used in a search).
i  is a modifier (modifies the search to be case-insensitive).

Modifiers
Modifiers are used to perform case-insensitive and global searches:

Modifier	Description
g	global match (find all matches, no stopping after first match)
i	Perform case-insensitive matching
m	Perform multiline matching

Brackets
Brackets are used to find a range of characters:

Expression	Description
[abc]	Find any character between the brackets
[^abc]	Find any character NOT between the brackets
[0-9]	Find any character between the brackets (any digit)
[^0-9]	Find any character NOT between the brackets (any non-digit)
(x|y)	Find any of the alternatives specified

===========================
<h2>swipeleft swiperight</h2>

&lt;script src="https://code.jquery.com/jquery-1.11.3.min.js"&gt;&lt;/script&gt;
&lt;script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"&gt;&lt;/script&gt;

$("body").on("swiperight",function(){foreward();
});
$("body").on("swipeleft",function(){backward();
});

$("body").on("swiperight",function(){jpButClick();
});
$("body").on("swipeleft",function(){jpback();
});

===========================
<br>

<h2>copy text to clipboard</h2>

var copyTextarea = document.querySelector('.copytextarea1');
copyTextarea.focus();
copyTextarea.select();

===========================

<h2>nice font</h2>

&lt;link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'&gt;

===========================
<br>

<h2>Javascript tutorial Notes from LearnWebCode</h2>

<a href="https://www.youtube.com/watch?v=zPHerhks2Vg">Javascript tutorial Notes from LearnWebCode</a>
<br>
browser developer mode
window object is the root object
document object is under window object, all about the html
document.title is the title object
use getElementById("") to select object
use var to represent the object to avoid long typings
use .innerHTML() to read and set object content
use getElementsByClassName("") to select multiple elements
use getElementById("").getElementByTagName("") to select a group under a object
access element under a group object: object[0], object is an array
for loop: for (){}
listItems.length is length of the object
addEventListener("click", aFunction)
set function using keyword: function aFunction(){}
use keyword: this to select the selected item, eg. 
this.innerHTML;
to append element to an group object, use ourList.innerHTML += "something new";
to increment a counter, use theCounter++;
this.classList.add("active")
The Element.classList is a collection of the class attributes, classes and be added, remove or toggle
Event delegate 是 event binding 的一種技巧
Event delegation allows us to attach a single event listener, to a parent element, that will fire for all descendants matching a selector, whether those descendants exist now or are added in the future.
ourList.addEventListener("click", aFunction)
aFunction(e){
  if(e.target.nodeName == )
}
e.target is complicated
mordern selector use querySelector("#id") instead of getelementById...
querySelectorAll("#id li")

===========================
<br>

<h2>HTMLAudioElement interface</h2>
<a href="D:\Dropbox\Public\LibDocs\Web Audio APIImp.html" class="whitebut ">Web Audio APIImp</a>
<a href="D:\Dropbox\Public\LibDocs\Audio Visualizer.html" class="whitebut ">Audio Visualizer</a>
<a href="D:\Dropbox\Public\LibDocs\audio-visualizer.html" class="whitebut ">audio-visualizer</a>

var audio = new Audio('audio_file.mp3');
audio.play();
var snd = new Audio("http://www.externalharddrive.com/waves/computer/hello.wav");
snd.play();

===========================
<br>

<h2>Load TensorFlow.js</h2>

&lt;script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.0"&gt; &lt;/script&gt;
===========================
<br>

<h2>const</h2>

const
The value of a constant cannot change through re-assignment, and it can't be redeclared.
The const declaration creates a read-only reference to a value whose scope can be either global
<br>
===========================
<br>

<h2>parsing python code to javascript</h2>

skulpt is doing exactly the same thing as brython and pyjs - parsing python code to javascript
not running it natively in the browser
===========================
<br>

<h2>JavaScript inheritance</h2>

JavaScript inheritance is simpler
var some2dPoint = {x:3,y:5};
var now3d = Object.create(some2dPoint);
now3d.z=10

===========================
<br>

<h2>selection script</h2>

&lt;select id="myChoice" onchange="showChoice()"&gt;&lt;option&gt;Apple&lt;/option&gt;&lt;option&gt;Orange&lt;/option&gt;&lt;option&gt;Pineapple&lt;/option&gt;&lt;option&gt;Banana&lt;/option&gt;
&lt;/select&gt;
&lt;p id="demo"&gt;&lt;/p&gt;
&lt;script&gt;
function showChoice() {var x = document.getElementById("myChoice");var i = x.selectedIndex;document.getElementById("demo").innerHTML = x.options[i].text;
}
&lt;/script&gt;
===========================
<br>

<h2>jQuery Object and HTML DOM Object</h2>

In jQuery, to get the same result as document.getElementById, 
access the jQuery Object and get the first element in the object
document.getElementById('contents'); //returns a <span class="redword">HTML DOM Object</span>
var contents = $('#contents');  //returns a <span class="redword">jQuery Object</span>
var contents = $('#contents')[0]; //returns a HTML DOM Object
<a href="https://dotblogs.com.tw/maplenote/2014/07/21/146024">Javascript 跟 JQuery</a>
<br>
To get the DOM object(s) from the jQuery one, use the following:
$('#selectlist').get(); //get all DOM objects in the jQuery collection  
$('#selectlist').get(0); //get the DOM object in the jQuery collection at index 0  
$('#selectlist')[0]; //get the DOM objects in the jQuery collection at index 0  

===========================
<br>

<h2>fibonacci function</h2>

function fibonacci(num){
    var a = 1, b = 0, temp;
    var seq = []
        while (num > 0){
        temp = a;
        a = a + b;
        b = temp;
        seq.push(b)
        num--;
    }
        return seq;
}
const fibs = fibonacci(100)
===========================
<br>

<h2>input numeric filter</h2>

var numericExpression = /^[0-9]+$/;
if(!userInput.match(numericExpression)){alert("Please enter a number")}
===========================
<br>

<h2>some timer codes</h2>

&lt;input type="number" id="hourtimer"&gt;
&lt;input type="number" id="minutetimer" autofocus&gt;
&lt;input type="number" id="secondtimer"&gt;
function cvtToMinAndSecStr( x ) {return Math.floor(x/60) + ":" + x%60;}
function displayMsg( noticeArea, msg ) {document.getElementById(noticeArea).innerHTML = msg;}
if(displaySeconds &lt; 10) {displaySeconds = '0' + displaySeconds;}
let timeRemaining = 0;
let timer;
function starttimer() {
  if( ! timer) {
    timer = setInterval(function() {timeRemaining = timeRemaining - 1; displayTime();}, 1000); 
  }
}
  countdown.innerText = hours + ":" + minutes + ":" + displaySeconds;
  ===========================
<br>

<h2>numerical input value step attribute</h2>

The step attribute can be used with a numerical input value to dictate how granular the values you can input are. 


&lt;input type="time" id="timerInput" step="1"&gt;
document.getElementById("settime").value = "13:24:59";

For example, you might want users to enter a particular time, but only in 30 minute increments. 

In this case, we can use the step attribute, keeping in mind that for time inputs the value of the attribute is in seconds. 

For example, a 30 minute increment would have a step value of 1800. 

&lt;input type="time" step="1800"&gt;

Return the value property:
timeObject.value

Set the value property:
timeObject.value = hh:mm:ss.ms

function myFunction() {
  var x = document.createElement("INPUT");
  x.setAttribute("type", "time");
  x.setAttribute("value", "21:35:09");
  document.body.appendChild(x);
}
<h2>script to animate css</h2>

&lt;link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css'&gt;
===========================
<br>

<h2>Math.floor(Math.random...</h2>

listLen = Math.floor(Math.random() * (listLen -1));
===========================
<br>

<h2>Include JavaScript file in Chrome console</h2>

appendChild() is a more native way:
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'script.js';
document.head.appendChild(script);
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.0';
document.head.appendChild(script);
======================
Using jQuery:
$.getScript('script.js');
======================
use the fetch:
fetch('https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js')
    .then(response => response.text())
    .then(text => eval(text))
    .then(() => { /* now you can use your library */ })
======================
https://stackoverflow.com/questions/5282228/include-javascript-file-in-chrome-console
======================
<h2>check time falls within a specific range</h2>

<a href="https://stackoverflow.com/questions/9081220/how-to-check-if-current-time-falls-within-a-specific-range-on-a-week-day-using-j">check time falls within a specific range</a>
function checkTime() {
    var d = new Date(); // current time
    var hours = d.getHours();
    var mins = d.getMinutes();
    var day = d.getDay();
        return day >= 1
        && day <= 5
        && hours >= 9 
        && (hours < 17 || hours === 17 && mins <= 30);
}
function checkTime() {
    var d = new Date(); // current time
    var hours = d.getHours();
    var mins = d.getMinutes();
    var day = d.getDay();
    return day >= 1
        && day <= 5
        && (hours >= 9  || hours === 9 && mins >= 30)
        && (hours < 12)
        && (hours >= 13)
        && (hours < 16);
}
===========================
<br>

<br>

<h2>create a dataset</h2>

var dataset = [];
var count =10;
for (var j = 0; j < count; j++) {dataset[j] = Math.round(Math.random() * 100)}
<h2>polar and cartesian coordinates</h2>

function d_Btw_2Pts(x1, y1, x2, y2) {//  Pythagoras Theoremvar x = (x2-x1);var y = (y2-y1);return Math.sqrt(x*x + y*y);
}
function polar2Cart(R, theta) {x = R * Math.cos(theta);y = R * Math.sin(theta);return [x,y]
}
<h2>convert to fixed decimal places</h2>

num.toFixed(2);
<h2>get image size height width using javascript</h2>

var image = document.getElementById('imagearea'); 
alert(image.clientWidth, image.clientHeight);
clientWidth and clientHeight are DOM properties that show the current in-browser size of the inner dimensions of a DOM element (excluding margin and border). 
So in the case of an IMG element, this will get the actual dimensions of the visible image.
img.onload = function() {
  alert(this.width + 'x' + this.height);
}
<a href="https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript">get image size height width using javascript</a>
<br>
<h2>generate random number that is negative or positive</h2>

(Math.random()-1/2)*2
<h2>js script load external script</h2>

$.getScript('another_file.js', function() {
    //script is loaded and executed put your dependent JS here
});
or
var imported = document.createElement('script');
imported.src = '/path/to/imported/script';
document.head.appendChild(imported);

<h2>Load scripts with JavaScript</h2>
    jsURL = "abc" // js name
    loadScript(jsURL)
    function loadScript(jsURL) {
        var script = document.createElement('script');
        script.src = "./aPath/scripts/" + jsURL + ".js";
        script.onload = function() {  // this is callback function
          linksArray = eval(jsURL)
          itemLength = linksArray.length
          alert(jsURL + " put into linksArray, usr r to randomOpen")
        }
        document.getElementsByTagName('head')[0].appendChild(script);
    }
// Get the first script element on the page
var ref = w.document.getElementsByTagName( 'script' )[ 0 ];

// Create a new script element
var script = w.document.createElement( 'script' );

// Set the script element `src`
script.src = 'path-to-your-javascript-file.js';

// Inject the script into the DOM
ref.parentNode.insertBefore( script, ref );

This simply append to head
  var script = document.createElement('script');
  script.src = urladdr;
  script.onload = function() { .... 
}
  document.getElementsByTagName('head')[0].appendChild(script);
<h2>Convert unicode character to string format</h2>

<a href="https://stackoverflow.com/questions/17267329/converting-unicode-character-to-string-format">Convert unicode character to string format</a>
<br>
theStr = "\u9999\u6e2f\u98df\u54c1\u6295\u8d44"	// this will show correctly as "香港食品投资"
String.fromCharCode(parseInt("6e2f",16)) //this work
String.fromCharCode(parseInt("9999 6e2f 98df 54c1 6295 8d44",16)) //cannot work

<h2>Learn API</h2>

<a href="https://idratherbewriting.com/learnapidoc/" class="whitebut ">Learn API docs</a>
<h2>Vibration API Sample</h2>

<a href="https://googlechrome.github.io/samples/vibration/">Vibration API Sample</a>
<br>
function example1() {
  // Vibrate for 500ms
  navigator.vibrate([500]);
}
<h2>worker</h2>

const delay = 5000;
// run without worker
const withoutWorkerButton = document.createElement('button');
document.body.appendChild(withoutworkerButton);
withoutWorkerButton.textContent = 'without Worker';
withoutWorkerButton.addEventListener('click', ()=> {const start = performance.now();while (performance.now() - start < delay);const end = performance.now();console.log(end-start);
});// run with worker
const myworker = new worker('./worker.js')	// create worker
myworker.onMessage = e => {console.log('myworker says: ', e.data);
}
const withWorkerButton = document.createElement('button');
document.body.appendChild(withworkerButton);
withWorkerButton.textContent = 'with Worker';
withWorkerButton.addEventListener('click', ()=> {myworker.postMessage(delay);
});
//worker.js
this.onMessage = e => {const delay = e.data;const start = performance.now();while (performance.now() - start < delay);const end = performance.now();this.postMessage(end-start);
}

<a href="https://stackoverflow.com/questions/30795525/performance-now-vs-date-now">performance now vs date now</a>
<br>
<a href="http://javascript.ruanyifeng.com/bom/performance.html">Performance API</a>
<br>
<h2>Javascript Use Indirect Variables, 'Variable' variables in Javascript</h2>
Indirect Variables or dynamic variable names

Javascript Use Indirect Variables, 'Variable' variables in Javascript
// example
// global
var vara0='a';
var varb0='b';
alert(window['vara'+0]); // gives 'a'
alert(window['varb'+0]); // gives 'b'
console.log(window['vara'+0]);
console.log(window['varb'+0]);
// example
var foos = ['foo', 'bar', 'baz'];
for(i=0; i&lt;foos.length; i++){
  console.log(foos[i]);
}
Note: eval() is heavy handed. 
eval() uses lots of cpu resources. 
try to avoid it.
// example
// local
function foo(){var var1='b';alert(eval('var'+1))
}
foo()
// example
var foo = 42;
var bar = 21;
var key = 'foo';
console.log(eval(key));
<a href="https://stackoverflow.com/questions/5187530/variable-variables-in-javascript">variable variables in javascript</a>
<br>

In programming, dynamic variable names don’t have a specific name hard-coded in the script.
They are named dynamically with string values from other sources.

Dynamic variables are rarely used in JavaScript.
But in some cases they are useful.

Unlike PHP, there is no special implementation of dynamic variable names in JavaScript.
But similar results can be achieved by using some other methods.

In JavaScript, dynamic variable names can be achieved by using 2 methods/ways given below.

<b>eval() Method: </b>The eval() function evaluates JavaScript code represented as a string in the parameter.
A string is passed as a parameter to eval().

If the string represents an expression, eval() evaluates the expression.
Inside eval(), we pass a string in which variable <b>value i</b> is declared and assigned a value of i for each iteration.
The eval() function executes this and creates the variable with the assigned values.

The code is given below implements the creation of dynamic variable names using eval().
Example: 
var k = 'value';
var i = 0;
for(i = 1; i &lt; 3; i++) {
  eval('var ' + k + i + '= ' + i + ';');
}
console.log(value1);
console.log(value2);
Output:
value1=1
value2=2

<b>Window object: </b>JavaScript always has a global object defined.
When the program creates global variables they’re created as members of the global object.
The window object is the global object in the browser.
Any global variables or functions can be accessed with the window object.
After defining a global variable we can access its value from the window object.
The code given below implements dynamic variable names using the window object.
So, the code basically creates a global variable with dynamic name “valuei” for each iteration of i and assigns a value of i to it.
Later these variables can be accessed in the script anywhere as they become global variables.

Example: 
var i;
for(i = 1; i &lt; 3; i++) {
  window['value'+i] = + i;
}
console.log(value1);
console.log(value2);
Output:
value1=1
value2=2

// use global variable
var var1='c';
alert(window['var'+ 1]); // c

// use eval
var1 = "b"
thisvar = "var" + 1
alert (eval(thisvar))

ignoreLstName = bookid + "IgnoreLst"
window["ignoreLstName"]  // note the " to use global variable
eval("ignoreLstName")  // use eval

example
bookid = "中医Tips"
ignoreLstName = bookid + "IgnoreLst"
if (localStorage.getItem(window["ignoreLstName"]) === null) {
        localStorage.setItem(window["ignoreLstName"], "");
        ignoreLst = []
} else{
        ignoreLst = localStorage.getItem(window["ignoreLstName"]).split(',');
}

<a href="http://2ality.com/2014/01/eval.html">Evaluating JavaScript code via eval() and new Function()</a>
<br>
<h2>Emit a beeping sound with JavaScript</h2>

a=new AudioContext(); // browsers limit the number of concurrent audio contexts, so you better re-use'em
function beep(vol, freq, duration){
  v=a.createOscillator()
  u=a.createGain()
  v.connect(u)
  v.frequency.value=freq
  v.type="square"
  u.connect(a.destination)
  u.gain.value=vol*0.01
  v.start(a.currentTime)
  v.stop(a.currentTime+duration*0.001)
}
beep(50,500,600)

// to loop with diff freq
function start(counter){
  if(counter < 20){
    setTimeout(function(){
      counter++;
      console.log(counter);
      beep(350,counter*50,400);
      start(counter);
    }, 500);
  }
}
start(0);

<h2>Delay, Sleep, Pause, & Wait in JavaScript</h2>
Many programming languages have a sleep function that will delay a program’s execution for a given number of seconds. 

This functionality is absent from JavaScript, however, owing to its asynchronous nature. 


The standard way of creating a delay in JavaScript is to use its setTimeout method.

console.log("Hello");
setTimeout(() => {  console.log("World!"); }, 2000);

Waiting for Things with setTimeout
function pollDOM () {
  const el = document.querySelector('my-element');

  if (el.length) {
    // Do something with el
  } else {
    setTimeout(pollDOM, 300); // try again in 300 milliseconds
  }
}

pollDOM();

Flow Control in Modern JavaScript
It’s often the case when writing JavaScript that we need to wait for something to happen (for example, data to be fetched from an API), then do something in response (such as update the UI to display the data).

The example above uses an anonymous callback function for this purpose, but if you need to wait for multiple things to happen, the syntax quickly gets pretty gnarly and you end up in callback hell.

Luckily, the language has evolved considerably over the past few years and now offers us new constructs to avoid this.

For example, using async await we can rewrite the initial code to fetch information from the GitHub API:

(async () => {
  const res = await fetch(`https://api.github.com/users/jameshibbard`);
  const json = await res.json();
  console.log(json.public_repos);
  console.log("Hello!");
})();

Now the code executes from top to bottom. 
The JavaScript interpreter waits for the network request to complete and the number of public repos is logged first, then the “Hello!” message.

Bringing Sleep to Native JavaScript
function sleep(milliseconds) {
  const date = Date.now();
  let currentDate = null;
  do {
    currentDate = Date.now();
  } while (currentDate - date < milliseconds);
}

console.log("Hello");
sleep(2000);
console.log("World!");
As expected, this will log “Hello”, pause for two seconds, then log “World!”

it has a large disadvantage:
the loop will block JavaScript’s execution thread and ensure that nobody can interact with your program until it finishes.
If you need a large delay, there’s a chance that it may even crash things altogether.

A Better Sleep Function
Well, it’s also possible to combine the techniques to make a less intrusive sleep function:

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

console.log("Hello");
sleep(2000).then(() => { console.log("World!"); });

Notice that we need to use a then callback to make sure the second message is logged with a delay. 

We can also chain more callbacks onto the first:

console.log("Hello");
sleep(2000)
  .then(() => { console.log("World!"); })
  .then(() => {
    sleep(2000)
      .then(() => { console.log("Goodbye!"); })
    });
This works, but looks ugly. 
We can pretty it up using async ... 
await:

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function delayedGreeting() {
  console.log("Hello");
  await sleep(2000);
  console.log("World!");
  await sleep(2000);
  console.log("Goodbye!");
}

delayedGreeting();
This looks nicer, but means that whatever code is using the sleep function needs to be marked as async.

Of course, both of these methods still have the disadvantage (or feature) that they do not pause the entire program execution. 
Only your function sleeps:

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function delayedGreeting() {
  console.log("Hello");
  await sleep(2000);
  console.log("World!");
}

delayedGreeting();
console.log("Goodbye!");

Timing issues in JavaScript are the cause of many a developer headache, and how you deal with them depends on what you’re trying to achieve.

Although a sleep function is present in many other languages, I’d encourage you to embrace JavaScript’s asynchronous nature and try not to fight the language. 
It’s actually quite nice when you get used to it.
<h2>reminders notes</h2>

reminders
add, remove, edit notes
notes object format:
date, time, details, remind frequency (repeating), action
sort date time sequence
use set interval
calc current time and set interval
array of objects: remindList
remindList = []
var remindNotes = new Object();
remindNotes.date = 'date';
remindNotes.time = 'timw';
remindNotes.details = "description';
remindNotes.freq = 1;
remindNotes.interval = 2;
remindNotes.action = beep;
<br>

<h2>RegEx text manipulations</h2>
<a href="Practical JavaScript Regular Expressions.html" class="red">Practical JavaScript Regular Expressions</a>

Syntax: /pattern/modifiers;
/pattern/ is the regular expression pattern
e.g. 
/.*abcd/
modifiers is the followings:
i Perform case-insensitive matching 
g Perform a global match (find all matches rather than stopping after the first match)  
m Perform multiline matching
<a href="https://www.w3schools.com/jsref/jsref_obj_string.asp">JavaScript String Reference</a>
simple methods:
str.search()var str = "Please locate where 'locate' occurs!";var pos = str.search("locate");str.replace()str = "Please visit Microsoft!";var n = str.replace("Microsoft", "W3Schools");String Lengthvar txt = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";var theTxtLen = txt.length;Finding a String in a Stringvar str = "Please locate where 'locate' occurs!";var pos = str.indexOf("locate");Extracting String Parts: 3 methods for extracting part of a stringslice(start, end)substring(start, end)substr(start, length)toUpperCase()
toLowerCase()
concat()
trim()var str = "       Hello World!        ";alert(str.trim());
split()var txt = "a,b,c,d,e";   // Stringtxt.split(",");          // Split on commastxt.split(" ");          // Split on spacestxt.split("|");          // Split on pipee.g.
var thestr   = 'FLSZ  1070560  -  00700腾讯控股';
var regex = /.* -  /;
str = thestr.replace(regex, "");
console.log(str.slice(0, 4));
Regular Expression Patterns
[abc] Find any of the characters between the brackets 
[^abc]  Find any character NOT between the brackets
[0-9] Find any character between the brackets (any digit)
[^0-9]  Find any character NOT between the brackets (any non-digit)
(x|y) Find any of the alternatives specified
Metacharacter Description Try it
. 
Find a single character, except newline or line terminator
\w  Find a word character
\W  Find a non-word character
\d  Find a digit
\D  Find a non-digit character
\s  Find a whitespace character
\S  Find a non-whitespace character
\b  Find a match at the beginning/end of a word
\B  Find a match not at the beginning/end of a word
\0  Find a NUL character
\n  Find a new line character
\f  Find a form feed character
\r  Find a carriage return character
\t  Find a tab character
\v  Find a vertical tab character
\xxx  Find the character specified by an octal number xxx
\xdd  Find the character specified by a hexadecimal number dd
\uxxxx  Find the Unicode character specified by a hexadecimal number xxxx
Quantifier  Description
n+  Matches any string that contains at least one n
n*  Matches any string that contains zero or more occurrences of n
n?  Matches any string that contains zero or one occurrences of n
n{X}  Matches any string that contains a sequence of X n's
n{X,Y}  Matches any string that contains a sequence of X to Y n's
n{X,} Matches any string that contains a sequence of at least X n's
n$  Matches any string with n at the end of it
^n  Matches any string with n at the beginning of it
?=n Matches any string that is followed by a specific string n
?!n Matches any string that is not followed by a specific string n
RegExp Object
exec()  Tests for a match in a string. 
Returns the first match
test()  Tests for a match in a string. 
Returns true or false
toString()  Returns the string value of the regular expression
RegExp Object Properties
constructor Returns the function that created the RegExp object's prototype
global  Checks whether the "g" modifier is set
ignoreCase  Checks whether the "i" modifier is set
lastIndex Specifies the index at which to start the next match
multiline Checks whether the "m" modifier is set
source  Returns the text of the RegExp pattern
Example
var str = "Visit W3Schools!"; 
var pat = /o/g;
var n = str.match(pat);
n.length;
<br>

<h2>regular expressions substitute operator $1-$9</h2>

The non-standard $1, $2, $3, $4, $5, $6, $7, $8, $9 properties are static and read-only properties of regular expressions that contain parenthesized substring matches.

var str   = 'asd-0.testing';
var regex = /(asd-)\d(\.\w+)/;

str = str.replace(regex, "$11$2");
"asd-1.testing"

str = str.replace(regex, "$13$2");
"asd-3.testing"
<h2>convert seconds to colon-separated time string (hh:mm:ss)</h2>
var date = new Date(null);
date.setSeconds(45); // specify value for SECONDS here
var timeString = date.toISOString().substr(11, 8);
console.log(timeString)

thisDate = new Date()
Sun Feb 24 2019 14:22:58 GMT+0800 (Hong Kong Standard Time)

thisDate.toTimeString()
"14:22:58 GMT+0800 (Hong Kong Standard Time)"

thisDate.replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1")
thisDate.replace is not a function

thisDate.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/, "$1")
"14:22:58"
<h2>iterators and generators</h2>

The for loop could be written like this:
const possiblePrimes = [73, 6, 90, 19, 15];
const confirmedPrimes = [];
for (const i of possiblePrimes){
   if ( isPrime(i) ){
      confirmedPrimes.push(i);
   }
}
// confirmedPrimes is now [73, 19]
This is far cleaner, but the most striking bit of this is the for loop. 

The variable i now represents the actual item in the array called possiblePrimes. 

So, we don’t have to call it by index anymore. 

This means that instead of calling possiblePrimes[i] in the loop, we can just call i.
Behind the scenes, this kind of iteration is making use of ES6’s bright and shiny Symbol.iterator() method. 

This bad boy is in charge of describing the iteration and, when called, returns a JavaScript object containing the next value in the loop and a done key that is either true or false depending on whether or not the loop is finished.
Generators
Generators, also called “iterator factories”, are a new type of JavaScript function that creates specific iterations. 

They give you special, self-defined ways to loop over stuff.
Okay, so what does all that mean? Let’s look at an example. 

Let’s say that we want a function that will give us the next prime number every time we call it. 

Again, we’ll use our isPrime function from before to check if a number is prime:
function* getNextPrime() {
  let nextNumber = 2;
    while (true) {
    if (isPrime(nextNumber)) {
      yield nextNumber;
    }
    nextNumber++;
  }
}
If you’re used to JavaScript, some of this stuff will look a bit like voodoo, but it’s actually not too bad. 

We have that strange asterisk after the keyword function, but all this does is to tell JavaScript that we’re defining a generator.
The other funky bit would be the yield keyword. 

This is actually what a generator spits out when you call it. 

It’s roughly equivalent to return, but it keeps the state of the function instead of rerunning everything whenever you call it. 

It “remembers” its place while running, so the next time you call it, it carries on where it left off.
This means that we can do this:
const nextPrime = getNextPrime();
And then call nextPrime whenever we want to obtain — you guessed it — the next prime:
console.log(nextPrime.next().value); // 2
console.log(nextPrime.next().value); // 3
console.log(nextPrime.next().value); // 5
console.log(nextPrime.next().value); // 7
You can also just call nextPrime.next(), which is useful in situations where your generator isn’t infinite, because it returns an object like this:
console.log(nextPrime.next());
// {value: 2, done: false}
Here, that done key tells you whether or not the function has completed its task. 

In our case, our function will never finish, and could theoretically give us all prime numbers up to infinity (if we had that much computer memory, of course).
<a href="javascript iterables, iterators, and generators.html">javascript iterables, iterators, and generators</a>
<br>

<br>
<br>

<h2>countDecimals and transformations</h2>

function countDecimals(value) { if ((value % 1) != 0) 	return value.toString().split(".")[1].length;  return 0;
};
avalue = 1.0320
avalue *= 10
apowval = 1
apowval ++
avalue = 1.0320
a = countDecimals(avalue)
amplified  = avalue*Math.pow(10, a);
original  = amplified/Math.pow(10, a);
<br>

<h2>Higher Order Functions: Filter, Map and Reduce</h2>
<a href="https://medium.freecodecamp.org/higher-order-functions-in-javascript-d9101f9cf528">Higher Order Functions: Using Filter, Map and Reduce for More Maintainable Code</a>

repeat executing function on array element
.map(Number)
Calls Number on each value in the array (casting it to a number)

.filter()
filter on each element in the array
does not change the original array.

use .reduce() to create our own implementation of .map() and .filter()

<code>var arr = [ 1, 2, 3 ];
var arrDoubled = arr.map(function(x) { return x * 2; });

console.log(arrDoubled); // [ 2, 4, 6 ]</code>

Higher order functions can also return a function. 

For example, you can make a function called <code>multiplyBy</code> that takes a number and returns a function that multiplies another number you provide by the first number provided. 

You can use this approach to create a <code>multiplyByTwo</code> function to pass to <code>Array.map</code>. 


<code>function multiplyBy(num1) {
  return function(num2) { return num1 * num2; }
}

var multiplyByTwo = multiplyBy(2);

var arr = [ 1, 2, 3 ];

var arrDoubled = arr.map(multiplyByTwo);

console.log(arrDoubled); // [ 2, 4, 6 ]</code>

It also makes it easy to combine functions with each other. 

This is called composition
The three most used higher order functions in JavaScript are <code>.filter()</code>, <code>.map()</code> and <code>.reduce()</code>.

<h3>Filter</h3>Imagine writing a piece of code that accepts a list of people where you want to filter out the people that are equal or above the age of 18.
Our list looks like the one below:

<code>const people = [
 { name: ‘John Doe’, age: 16 },
 { name: ‘Thomas Calls’, age: 19 },
 { name: ‘Liam Smith’, age: 20 },
 { name: ‘Jessy Pinkman’, age: 18 },
];</code>
Let’s look at an example of a first order function which select people that are above the age of 18. 


<code>const peopleAbove18 = (collection) =&gt; {  const results = [];
   for (let i = 0; i &lt; collection.length; i++) {
    const person = collection[i];
     if (person.age &gt;= 18) {
      results.push(person);
     }
  }</code>

<code>  return results;};</code>
Now what if we want to select all the people who are between 18 and 20? We could create another function.

<code>const peopleBetween18And20 = (collection) =&gt; {  const results = [];   for (let i = 0; i &lt; collection.length; i++) {
    const person = collection[i];
     if (person.age &gt;= 18 &amp;&amp; person.age &lt;= 20) {
       results.push(person);
     }
}</code>

<code>  return results;};</code>
You may already recognize a lot of repeating code here. 

This could be abstracted into a more generalized solution. 

These two functions have something in common. 

They both iterate over a list and filter it on a given condition.
<blockquote>“A higher order function is a function that takes one or more functions as arguments.”<em>— <a href="https://clojurebridge.github.io/community-docs/docs/clojure/higher-order-function/" rel="noopener">Closurebridge</a></em></blockquote>We can improve our previous function by using a more declarative approach, <code>.filter()</code>.

<code>const peopleAbove18 = (collection) =&gt; {
  return collection.filter((person) =&gt; person.age &gt;= 18);}</code>
That’s it! We can reduce a lot of extra code by using this higher order function. 

It also make our code better to read. 

We don’t care how things are being filtered, we just want it to filter. 

I will go into combining functions later in this article.

<h3>Map</h3>Let’s take the same list of people and an array of names that tells if the person loves to drink coffee.

<code>const coffeeLovers = [‘John Doe’, ‘Liam Smith’, ‘Jessy Pinkman’];</code>
The imperative way will be like:

<code>const addCoffeeLoverValue = (collection) =&gt; {  const results = [];   for (let i = 0; i &lt; collection.length; i++) {
    const person = collection[i];</code>

<code>
    if (coffeeLovers.includes(person.name)) {
      person.coffeeLover = true;
    } else {
      person.coffeeLover = false;
    }
     results.push(person);
  }
   return results;};</code>
We could use <code>.map()</code> to make this more declarative.

<code>const incrementAge = (collection) =&gt; {
  return collection.map((person) =&gt; {
    person.coffeeLover = coffeeLovers.includes(person.name);
     return person;
  });};</code>
Again, <code>.map()</code> is a high-order function. 

It allows a function to be passed as an argument.

<h3>Reduce</h3>I bet you will like this function when you know when and how to use it.<br>The cool thing about <code>.reduce()</code> is that most of the functions above can be made with it.
Let’s take a simple example first. 

We want to sum up all the people’s ages. 

Again, we’ll look how this can be done using the imperative approach. 

It’s basically looping through the collection and increment a variable with the age.

<code>const sumAge = (collection) =&gt; {  let num = 0;   collection.forEach((person) =&gt; {
    num += person.age;
  });
   return num;}</code>
And the declarative approach using <code>.reduce()</code>.

<code>const sumAge = (collection) =&gt; collection.reduce((sum, person) =&gt; { return sum + person.age;}, 0);</code>
We can even use <code>.reduce()</code> to create our own implementation of <code>.map()</code> and <code>.filter()</code> .

<code>const map = (collection, fn) =&gt; {  return collection.reduce((acc, item) =&gt; {
    return acc.concat(fn(item));
  }, []);}</code>

<code>const filter = (collection, fn) =&gt; {
  return collection.reduce((acc, item) =&gt; {
    if (fn(item)) {
      return acc.concat(item);
    }
     return acc;
  }, []);}</code>
This might be hard to understand at first. 

But what <code>.reduce()</code> basically does is start with a collection and a variable with an initial value. 

You then iterate over the collection and append (or add) the values to the variable.

<h3>Combining map, filter and reduce</h3>These functions can be used together!
This makes it easy to create reusable functions and reduce the amount of code that is required to write certain functionality.
So we talked about using <code>.filter()</code> to filter out the people that are equal or below the age of 18. 

<code>.map()</code> to add the <code>coffeeLover</code> property, and <code>.reduce()</code> to finally create a sum of the age of everyone combined.<br>Lets write some code that actually combines these three steps.

<code>const people = [ { name: ‘John Doe’, age: 16 }, { name: ‘Thomas Calls’, age: 19 }, { name: ‘Liam Smith’, age: 20 }, { name: ‘Jessy Pinkman’, age: 18 },];</code>

<code>const coffeeLovers = [‘John Doe’, ‘Liam Smith’, ‘Jessy Pinkman’];</code>

<code>const ageAbove18 = (person) =&gt; person.age &gt;= 18;const addCoffeeLoverProperty = (person) =&gt; { person.coffeeLover = coffeeLovers.includes(person.name);  return person;}</code>

<code>const ageReducer = (sum, person) =&gt; { return sum + person.age;}, 0);</code>

<code>const coffeeLoversAbove18 = people .filter(ageAbove18) .map(addCoffeeLoverProperty);</code>

<code>const totalAgeOfCoffeeLoversAbove18 = coffeeLoversAbove18 .reduce(ageReducer);</code>

<code>const totalAge = people .reduce(ageReducer);</code>
If you do it the imperative way, you will end up writing a lot of repeating code.
The mindset of creating functions with <code>.map()</code> ,<code>.reduce()</code> and <code>.filter()</code> will improve the quality of the code you’ll write. 

But it also adds a lot of readability. 

You don’t have to think about what’s going on inside a function. 

It’s easy to understand.

<a href="https://medium.com/javascript-scene/higher-order-functions-composing-software-5365cf2cbe99">Higher Order Functions (Composing Software)</a>
<br>
<a href="https://www.freecodecamp.org/news/reduce-f47a7da511a9/" class="whitebut ">A Guide To The Reduce Method In Javascript</a>

<a href="https://stackoverflow.com/questions/37627712/how-to-use-if-else-conditon-in-arrow-function-in-javascript" class="whitebut ">if-else conditon in arrow function</a>

Flattening an array of arrays
var data = [[1, 2, 3], [4, 5, 6], [7, 8, 9]];
var flat = data.reduce((total, amount) => total.concat(amount))
flat // [ 1, 2, 3, 4, 5, 6, 7, 8, 9 ]

if-else conditon in arrow function
function(a){
    if(a < 10){
        return 'valid';
    }else{
        return 'invalid';
    }
}

The equivalent in an arrow function using a ternary is:
a => (a < 10) ? 'valid' : 'invalid'

the body of an arrow function without braces can only be a single expression, so if statements are not allowed.

Statements are allowed in arrow functions with braces though, like this:
const func = () => {
    if (...) ...
}

for a single 'if' condition, may use a shortcut syntax.
Imagine you need to execute a doThis() function only if a > 10 :
a => a > 10 && doThis()
<br>

<h2>onpagehide event</h2>

onpagehide event: 
navigates away from a webpage.
Execute JavaScript code when the user navigates away from the document.
The onpagehide event triggers in JavaScript when a user leaves the page and decides to move to another. 

Some examples include age refresh, a link is clicked, etc.
the following code implement onpagehide event in JavaScript:
============
&lt;body onpagehide="newFunc()"&gt;
&lt;p&gt;Close the page and see what happens!&lt;/p&gt;
&lt;script&gt;function newFunc() {alert("Thank you!");	}
&lt;/script&gt;
&lt;/body&gt;
============
jQuery pagehide Event
To trigger the event for all pages in jQuery Mobile:
$("document").on("pagehide",function(event){...})
To trigger the event for a specific page:
$("document").on("pagehide","page",function(event,data){...})
&lt;script&gt;
$(document).on("pagehide","#pagetwo",function(){alert("pagetwo is now hidden");
});
&lt;/script&gt;
============

detect browser support for pageShow and pageHide
if ('onpagehide' in window) {
//if(window.onpagehide || window.onpagehide === null){window.addEventListener('pagehide', exitFunction, false);
} else {window.addEventListener('unload', exitFunction, false);
}
<br>

<h2>addEventListener</h2>

Attach a click event to the document. 

When the user clicks anywhere in the document:
document.addEventListener("click", function(){
  document.getElementById("demo").innerHTML = "Hello World";
});

window.onload = addfunc;
document.getElementById('myBtn').onclick(){alert('hello');}
document.getElementById('myBtn').addEventListener("click", funcname,false);
document.getElementById('myBtn').attachEvent("onclick", funcname);
<br>

<h2>JavaScript Template Literals</h2>

<a href="https://www.youtube.com/watch?v=NgF9-pdTDGs">JavaScript Template Literals</a>

<br>
<h2>console.log variable using ES6 back tick</h2>
console.log("story " + name + " story");

When using ES6:
let name = prompt("what is your name?");
console.log(`story ${name} story`);

Template literals can be used to represent multi-line strings and may use "interpolation" to insert variables:

var a = 123, str = `---
   a is: ${a}
---`;
console.log(str);
Output:

---
   a is: 123
---

What is more important, they can contain not just a variable name, but any JavaScript expression:

var a = 3, b = 3.1415;
console.log(`PI is nearly ${Math.max(a, b)}`);

<h2>Scroll Load Dynamic Content</h2>

<br>
<br>
<h2>Infinite Scroll</h2>

<a href="https://www.sitepoint.com/jquery-infinite-scrolling-demos/">Jquery Infinite Scrolling</a>
. 
<a href="https://infinite-scroll.com/api.html">Infinite Scroll Methods</a>
. 
<a href="https://dotblogs.com.tw/brooke/2017/08/23/035838">Infinite Scroll.js的使用</a>
<br>
<a href="https://infinite-scroll.com/">infinite scroll.com</a>
. 
<a href="https://stackoverflow.com/questions/15181286/how-to-implement-an-endless-infinite-scroll-within-a-div-in-javascript-jquery">javascript infinite scroll</a>
<br>

<a href="https://stackoverflow.com/questions/14035180/jquery-load-more-data-on-scroll">jQuery load more data on scroll</a>
<br>
<a href="http://jsfiddle.net/brynner/QDttv/">Load more results after scroll to end of list</a>
<br>
<a href="https://www.jqueryscript.net/loading/Automatic-Load-More-Plugin-jQuery-ev-scroll-loader.html">Automatic Load More Plugin For jQuery</a>
<br>
<h2>Use children() and each() to loop</h2>

Use children() and each(), you can optionally pass a selector to children
children() is a loop in itself.
$('div').children('input').each(function () {
    alert(this.value);
});
<h2>$(this) to loop</h2>

Examples of jQuery Selectors
$("*")	Selects all elements	
$(this)	Selects the current HTML element	
$("p.intro")
$("p:first")
$("ul li:first")
$("ul li:first-child")
$("[href]")	Selects all elements with an href attribute	
$("a[target='_blank']")equal to "_blank"	
$("a[target!='_blank']")	NOT equal to "_blank"	
$(":button")
$("tr:even")
$("tr:odd")
$( "li.item-ii" ).find( "li" ).css( "background-color", "red" );
$( "p" ).find( "span" ).css( "color", "red" );
$('.pizza-maker').find('.cheese').find('a').addClass('cheese-style')
.children('.cheese') was called on and stopped there.
jquery $(this)id
jquery $(this).val()
jquery $(this).find
jquery $(this).next
jquery $(this).attr
jquery $(this).index
jquery $(this).text()
jquery $(this).children
jquery $(this).attr("id")
jquery $(this).css
jquery $(this).on()
jquery $(this).is()
jquery $(this).get()
jquery $(this).parents()
.children()
var kids = $( event.target ).children();
var len = kids.addClass( "hilite" ).length;
$( "#results span:first" ).text( len );
$( "#results span:last" ).text( event.target.
.not()
.index()
$( "div" ).click(function() {
var index = $( "div" ).index( this );
$( "span" ).text( "That was div index #" + index );
:first-child Selector
.filter()
$( "li" ) .filter(function( index ) {
 return $( "strong", this ).length === 1;
}) .css( "background-color", "red" );
.siblings()
:visible Selector
.val()
"select#foo" ).val();
$( "input[type=checkbox][name=bar]:checked" ).val();
.one()
var index = $( "div" ).index( this );
$( this ).css({borderStyle: "inset",cursor: "auto"});
 $( "p" ).text( "Div at index #" + index + " clicked." + " That's " + (++n) + " total ...
 .prev()

$(this.htmltable + ' th[data-field]').each(function(i, col){
     this.dbcolumns.push( $(col).attr('data-field') );
}.bind(this));

$(".myCheckboxes").change(function(){ 
    if(this.checked){alert("checked");}
});
$(".class").each(function(){
 var HTMLElement = this;
  //the current HTML element is passed to the jQuery constructor
 //the jQuery API is exposed here (such as .html() and .append())
 var jQueryObject = $(this);
});

$('.somediv').click(function(){
   $(this).addClass('newDiv');
});
$('.multiple-elements').each(
    function(index, element) {
        $(this).css('background-color', $(this).data('bgcol'));
    }
);
&lt;a href="#" onclick="$(this).css('display', 'none')"&gt;Hide me!</a>
<br>

<h2>$(this) nested loop</h2>

$('li').each(function(){
    var $this = $(this);
    $this.children("li").each(function(){
        $this; // parent li
        this; // child li
    });
});
$('li').children("li").each(function(){
    var $this = $(this);
});
$('.pizza-maker').find('.cheese').find('a').addClass('cheese-style')
.children('.cheese') was called on and stopped there.
<h2>todo-list-indexeddb</h2>

<a href="../js/todo-list-indexeddb/index.html">todo-list-indexeddb</a>
<br>
<br>

<h2>stars</h2>

<a href="../js/stars/index.html">stars</a>

<h2>Learn Node.js</h2>

<a href="https://www.youtube.com/watch?time_continue=1&v=RLtyhwFtXQA">Learn Node.js - Full Tutorial for Beginners</a>

<br>

<h2>scroll-behavior</h2>

html { scroll-behavior: smooth;}
$(document).ready(function(){
     $('body,html').animate({scrollTop: 156}, 800); 
});
156 - position scroll to (px), from top of page.
800 - scroll duration (ms)
scroll to bottom
$(document).ready(function(){
     $('body,html').animate({scrollTop:$(document).height()}, 800000); 
});
scroll to a div
$(document).ready(function(){
     $('body,html').animate({scrollTop: $('#toc').get(0).scrollHeight}, 630000); 
});

$('html, body').animate({
    scrollTop: $('idName').offset().top-100
}, timelength);

<a href="https://codepen.io/JTParrett/pen/BkDie">jQuery different scroll speeds</a>

<br>
<h2>Quiz Online Test</h2>

<a href="http://www.developphp.com/video/JavaScript/">Many JavaScript Samples</a>
<a href="http://www.developphp.com/video/JavaScript/Exam-Application-Programming-Tutorial-Quiz-Online-Test">Quiz Online Test</a>
<h2>Date Time Countdown Tutorial</h2>

<a href="http://www.developphp.com/video/JavaScript/Date-Time-Countdown-Tutorial-Christmas-2012-Doomsday">Date Time Countdown Tutorial</a>
<br>
<br>

<h2>JavaScript Client-side web scraping</h2>

<a href="JavaScript Client-side web scraping.html">JavaScript Client-side web scraping</a>
<br>

<h2>keycodes</h2>

<a href="https://css-tricks.com/snippets/javascript/javascript-keycodes/">keycodes</a>
<br>

<h2>For…of Loop In JavaScript</h2>

<a href="For…of Loop In JavaScript.html">For…of Loop In JavaScript</a>
<br>

<h2>higher order function</h2>

A higher order function is a function that takes a function as an argument, or returns a function. 

Higher order function is in contrast to first order functions, which don’t take a function as an argument or return a function as output.
examples of .map() and .filter(). 
Both of them take a function as an argument. 
They're both higher order functions.
Example 1#
Let’s say we have an array of numbers and we want to create a new array which contains double of each value of the first array. 
Let’s see how we can solve the problem with and without Higher-Order Function.
Without Higher-order function
const arr1 = [1, 2, 3];
const arr2 = [];
for(let i = 0; i < arr1.length; i++) {
  arr2.push(arr1[i] * 2);
}
// prints [ 2, 4, 6 ]
console.log(arr2);
With Higher-order function map
const arr1 = [1, 2, 3];
const arr2 = arr1.map(function(item) {
  return item * 2;
});
console.log(arr2);
We can make this even shorter using the arrow function syntax:
const arr1 = [1, 2, 3];
const arr2 = arr1.map(item => item * 2);
console.log(arr2);
Example 2#
Let’s say we have an array containing the birth year of different persons and we want to create an array that contains their ages. 
For example:
Without Higher-order function
const birthYear = [1975, 1997, 2002, 1995, 1985];
const ages = [];
for(let i = 0; i < birthYear.length; i++) {
  let age = 2018 - birthYear[i];
  ages.push(age);
}
// prints [ 43, 21, 16, 23, 33 ]
console.log(ages);
With Higher-order function map
const birthYear = [1975, 1997, 2002, 1995, 1985];
const ages = birthYear.map(year => 2018 - year);
// prints [ 43, 21, 16, 23, 33 ]
console.log(ages);
<br>
Example
var sum = function(n1, n2) {//This is just a function
    return n1 + n2;
};
sum(1,2);//3
function makeSumN(n) {//This is a higher-order function
    return function(p) {
        sum(n, p)
   }
}
var sum1 = makeSumN(1);
sum1(2); //3
function makeMoreThanSum(f) {//This is a higher-order function
   return function(n1, n2) {
       sum(f(n1), n2)
   }
}
var sumSquareOfFirst = makeMoreThanSum(function(n){
    return n*n;
});
sumSquareOfFirst(2,1);//5
Example
function createMultiplier(multiplier){return function(x){	return x * multiplier}
}
let doubleme = createMultiplier(2)
let tripleme = createMultiplier(3)
let quadrupleme = createMultiplier(4)
console.log(doubleme(5))
console.log(tripleme(3))
console.log(quadrupleme(7))
<br>

<h2>蒙版</h2>

<a href="https://segmentfault.com/a/1190000017892644">蒙版弹幕 Barrage UI</a>
<a href="https://segmentfault.com/a/1190000017954676">纯客户端 实时 蒙版 弹幕</a>
<br>

<h2>run HTA</h2>

CMDTail='\");close();'
LAmtNotice="BigVol!"  # popup message
LF = "\\n"
onecode = '0030'
codename = "abcde"
curPrice = "31.5"
AlertMsg=paste0(
'mshta javascript:alert(&lt;meta http-equiv="x-ua-compatible" content="ie=edge" />\"',"Alarm!!",LF, '&lt;br>&lt;br>&lt;br>',
onecode,LF ,codename, LF,"Price ",curPrice, LF, 
format(Sys.time(), "%H:%M:%OS"),LF, 
CMDTail)
system(AlertMsg, invisible=T, wait=F)
Usually, HTML5 doesn't work in HTA files because they are run by mshta.exe which acts like IE7 and HTML5 isn't supported in earlier versions of IE than IE9. 

But if you add &lt;meta http-equiv="x-ua-compatible" content="ie=edge" /&gt; in the head of the HTA, the HTA will act like the version of IE installed on the computer, so if the computer has IE9 or later and you add that tag, it will work. 
The problem with this is that if you upgrade the HTA, the &lt;hta:application/&gt; tag won't have any effect so you will lose all effects like icons, window properties, etc. 

For this reason, I prefer to not upgrade the HTA and to use workarounds instead of HTML5.
In HTA, to get the code to properly work, you must include the tag 
&lt;meta http-equiv="x-ua-compatible" content="ie=edge" /&gt; or 
&lt;meta http-equiv="x-ua-compatible" content="ie=9"&gt;to get the JavaScript and HTML 5 to work completely. 
You may add
&lt;HTA:APPLICATION
APPLICATIONNAME="HTA"
ID="HTA"
VERSION="1.0"
MAXIMIZEBUTTON="no"/&gt;
<a href="http://blog.sevagas.com/?Hacking-around-HTA-files">Hacking around HTA files</a>
<a href="https://stackoverflow.com/questions/35181278/does-html5-work-in-a-hta-file">HTML5 work in a .hta file</a>
<a href="https://www.htmlgoodies.com/beyond/reference/article.php/3472841/HTML-Applications.htm">HTML Applications</a>

<h2>九种跨域方式实现原理</h2>

<a href="九种跨域方式实现原理.html" class="red">九种跨域方式实现原理</a>


<h2>parse Excel file</h2>

<a href="https://stackoverflow.com/questions/8238407/how-to-parse-excel-file-in-javascript-html5">parse Excel file in Javascript/HTML5</a>
<br>
<a href="https://stackoverflow.com/questions/28782074/excel-to-json-javascript-code">Excel to JSON javascript code</a>
<br>
<a href="http://codetheory.in/parse-read-excel-files-xls-xlsx-javascript/">Parse and Read Excel Files (xls/xlsx) With JavaScript</a>
<br>
<a href="https://redstapler.co/sheetjs-tutorial-convert-excel-html-table/">SheetJS Tutorial – Convert Excel to HTML Table</a>
<br>
<br>

<h2>Multiple setIntervals running at once</h2>

In JS you can't. 

To have multiple functions in the same program execute at the same time you need multi-threading and some deep timing and thread handling skills. 

JavaScript is single threaded. 

Can use html5 web worker or try using setTimeout recursively. 

Create multiple functions following this example:
var interval = setTimeout(appendDateToBody, 5000);
function appendDateToBody() {
    document.body.appendChild(
        document.createTextNode(new Date() + " "));
    interval = setTimeout(appendDateToBody, 5000);
}
<br>

<h2>add the crossorigin tag to a dynamically loaded script</h2>

<a href="https://stackoverflow.com/questions/28901166/how-do-i-add-the-crossorigin-tag-to-a-dynamically-loaded-script">add the crossorigin tag to a dynamically loaded script</a>
<br>
<br>
<h2>crossorigin example</h2>
&lt;link crossorigin="anonymous" media="all" integrity="sha512-iwdBeEEuDZbd2aAEzZti+bkBYQ2UKC6VEAhVMLKq5cCJnyeWVpgVqtgd3scKeZ63wYQTUQegRZwFGKlWOyr5Ew==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-8b074178412e0d96ddd9a004cd9b62f9.css" />
&lt;script crossorigin="anonymous" defer="defer" integrity="sha512-CzeY4A6TiG4fGZSWZU8FxmzFFmcQFoPpArF0hkH0/J/S7UL4eed/LKEXMQXfTwiG5yEJBI+9BdKG8KQJNbhcIQ==" type="application/javascript" src="https://github.githubassets.com/assets/environment-0b3798e0.js">&lt;/script>


<h2>link in alert boxes javascript</h2>

<a href="https://stackoverflow.com/questions/16973240/link in alert boxes javascript">link in alert boxes javascript</a>

alert function can only display text

// use window.confirm instead of alert
if (window.confirm('click "ok" to redirect. 
Cancel to stay ')) 
   { window.location.href='http://www.google.com'; };

if (window.confirm('Ok to Confirm, Cancel to Stay here'))
   { window.open('http://www.google.com', '_blank'); };

<h2>Javascript Formatting numbers with commas</h2>

var number = 12345.543;
number.toLocaleString();"12,345.543"<br>
<br>

<h2>To create a global variable</h2>

To create a global variable, just omit 'var' from the statement. 

When you omit 'var', you're actually creating the variable in the window namespace.
So, zz = 1 is actually window.zz = 1
A global variable has global scope which means it can be defined anywhere in your JavaScript code.
Variables declared within a JavaScript function, become LOCAL to the function.
A variable declared outside a function, becomes GLOBAL.

<h2>jQuery $.ajax()</h2>
Some of jQuery's most used Ajax shorthand methods: <code>$.get()</code>, <code>$.post()</code>, and <code>$.load()</code>. 

They are convenient methods for making Ajax requests in a few lines of code.</strong><br>

Sometimes, we need more control over the Ajax calls we want to make. 
For example, we want to specify what should happen in case an Ajax call fails or we need to perform an Ajax request but its result is only needed if retrieved within a certain amount of time. 
In such situations, we can rely on another function provided by jQuery, called <code>$.ajax()</code>, that is the topic of this tutorial.<br>

<h2>The <code>$.ajax()</code> Function</h2>
The jQuery  function is used to perform an asynchronous HTTP request. 
It was added to the library a long time ago, existing since version 1.0. 
The <code>$.ajax()</code> function is what every function discussed in the previously mentioned article calls behind the scene using a preset configuration. 
The signatures of this function are shown below:<br>
<code>$.ajax(url[, options])
$.ajax([options])</code>

The <code>url</code> parameter is a string containing the URL you want to reach with the Ajax call, while <code>options</code> is an object literal containing the configuration for the Ajax request.<br>

In its first form, this function performs an Ajax request using the <code>url</code> parameter and the options specified in <code>options</code>. 
In the second form, the URL is specified in the <code>options</code> parameter, or can be omitted in which case the request is made to the current page.<br>

The list of the options accepted by this function, described in the next section, is very long. 
So, I'll keep their description short. 
In case you want to study in-depth their meaning, you can refer to .<br>

<h3>The <code>option</code> Parameter</h3>
There are a lot of different options you can specify to bend <code>$.ajax()</code> to your need. 
In the list below you can find their names and their description sorted in alphabetic order:<br>

<code>accepts</code>: The content type sent in the request header that tells the server what kind of response it will accept in return<br>
<code>async</code>: Set this options to <code>false</code> to perform a synchronous request<br>
<code>beforeSend</code>: A pre-request callback function that can be used to modify the <code>jqXHR</code> object before it is sent<br>
<code>cache</code>: Set this options to <code>false</code> to force requested pages not to be cached by the browser<br>
<code>complete</code>: A function to be called when the request finishes (after <code>success</code> and <code>error</code> callbacks are executed)<br>
<code>contents</code>: An object that determines how the library will parse the response<br>
<code>contentType</code>: The content type of the data sent to the server<br>
<code>context</code>: An object to use as the context (<code>this</code>) of all Ajax-related callbacks<br>
<code>converters</code>: An object containing dataType-to-dataType converters<br>
<code>crossDomain</code>: Set this property to <code>true</code> to force a cross-domain request (such as JSONP) on the same domain<br>
<code>data</code>: The data to send to the server when performing the Ajax request<br>
<code>dataFilter</code>: A function to be used to handle the raw response data of XMLHttpRequest<br>
<code>dataType</code>: The type of data expected back from the server<br>
<code>error</code>: A function to be called if the request fails<br>
<code>global</code>: Whether to trigger global Ajax event handlers for this request<br>
<code>headers</code>: An object of additional headers to send to the server<br>
<code>ifModified</code>: Set this option to <code>true</code> if you want to force the request to be successful only if the response has changed since the last request<br>
<code>isLocal</code>: Set this option to <code>true</code> if you want to force jQuery to recognize the current environment as &ldquo;local&rdquo;<br>
<code>jsonp</code>: A string to override the callback function name in a JSONP request<br>
<code>jsonpCallback</code>: Specifies the callback function name for a JSONP request<br>
<code>mimeType</code>: A string that specifies the mime type to override the XHR mime type<br>
<code>password</code>: A password to be used with XMLHttpRequest in response to an HTTP access authentication request<br>
<code>processData </code>: Set this option to <code>false</code> if you don't want that the data passed in to the <code>data</code> option (if not a string already) will be processed and transformed into a query string<br>
<code>scriptCharset</code>: Sets the charset attribute on the script tag used in the request but only applies when the &ldquo;script&rdquo; transport is used<br>
<code>statusCode</code>: An object of numeric HTTP codes and functions to be called when the response has the corresponding code<br>
<code>success</code>: A function to be called if the request succeeds<br>
<code>timeout</code>: A number that specifies a timeout (in milliseconds) for the request<br>
<code>traditional</code>: Set this to <code>true</code> if you wish to use the traditional style of param serialization<br>
<code>type</code>: The type of request to make, which can be either &ldquo;POST&rdquo; or &ldquo;GET&rdquo;<br>
<code>url</code>: A string containing the URL to which the request is sent<br>
<code>username</code>: A username to be used with XMLHttpRequest in response to an HTTP access authentication request<br>
<code>xhr</code>: A callback for creating the XMLHttpRequest object<br>
<code>xhrFields</code>: An object to set on the native XHR object<br>
That was pretty long, isn't it? Well, as developers you probably have stopped reading this list at the fifth or sixth element I guess, but that's fine. 
The next section will be more exciting because we'll put the <code>$.ajax()</code> function and some of these options into action.<br>
<br>
<h2>$.ajax</h2>
No 'Access-Control-Allow-Origin' header is present on the requested resource.
make a http request using CORS with jquery:
============
$.ajax({
    url: theurl,

    // This is the important part
    xhrFields: {withCredentials: true},

    // This is the important part
    data: data,

    success: function (response) {
        // handle the response
    },

    error: function (xhr, status) {
        // handle errors
    }
});
============
 $.ajax({
            url: "http://localhost:8079/students/add/",

            type: "POST",

            crossDomain: true,

            data: JSON.stringify(somejson),

            dataType: "json",

            success: function (response) {
                var resp = JSON.parse(response)
                alert(resp.status);
            },

            error: function (xhr, status) {
                alert("error");
            }
});

============
var settings = {
          'cache': false,
          // 'dataType': "jsonp",
          "async": true,
          "crossDomain": true,
          "url": theurl,
          "method": "GET",
          "headers": {
              "accept": "application/json",
              "Access-Control-Allow-Origin":"*"
          }
}
$.ajax(settings).done(function (response) {console.log(response);});
$.ajax(theurl,
    {success: function (data) {$('body').append(data);}
});
============
var bodycontent = $('body');
$.ajax({
    url: theurl,
    xhrFields: {withCredentials: true},
    crossDomain: true,
    success: function(rawData){
    body.append(rawData);;
  }});
============
<a href="https://openhome.cc/Gossip/JavaScript/JSONP.html">使用 JSONP 跨站請求</a>
<br>

<a href="https://www.w3schools.com/js/js_json_jsonp.asp">Creating a Dynamic Script Tag and Request With a Callback Function</a>
<br>

&lt;script&gt;
function clickButton() {
  var s = document.createElement("script");
  s.src = "demo_jsonp.php";
  document.body.appendChild(s);
}

function clickButton() {
  var s = document.createElement("script");
  s.src = "jsonp_demo_db.php?callback=myDisplayFunction";
  document.body.appendChild(s);
}
透過 jsonp 的方法所傳送的 URL 當中，結尾都會帶一個問號 (?)，
這個問號會在取得 server 回傳值的時候，自動轉換成 call function 的 function name，而如果是一個匿名函式，則會轉換成一個帶有 time stamp 的函式名稱。
當傳輸完成後，client 會自動執行 Server 回傳的 callback function，取得結果。
function foo(data)
{
    // do stuff with JSON
}

var script = document.createElement('script');
script.src = '//example.com/path/to/jsonp?callback=foo'

document.getElementsByTagName('head')[0].appendChild(script);
// or document.head.appendChild(script) in modern browsers
<h2>Minify Javascript</h2>

<a href="https://jscompress.com/">JSCompress</a>
<a href="https://www.minifier.org/">Minify Javascript Or Css Code</a>
<a href="https://stackoverflow.com/questions/1737388/how-to-minify-javascript-code">how to minify javascript code</a>
<a href="http://www.crockford.com/javascript/jsmin.html">The JavaScript Minifier JSMin</a>
jsmin &lt;fulljslint.js &gt;jslint.js "(c)2002 Douglas Crockford"

<h2>createElement("INPUT")</h2>

function myFunction() {
    var x = document.createElement("INPUT");
    x.setAttribute("type", "radio");
    document.body.appendChild(x);
}
<h2>window.event, KeyboardEvent keyCode, which</h2>

function KeyPress(e){var keynum;if(window.event){keynum=e.keyCode;}else if(e.which){keynum=e.which;}if(keynum==13)sendme('oLGK__e.html',1);
}

window.event:
<a href="https://www.w3schools.com/tags/ref_eventattributes.asp">Window Event Attributes</a>

keyCode:
<a href="https://www.w3schools.com/jsref/event_key_keycode.asp">KeyboardEvent keyCode Property</a>
<br>
KeyboardEvent which:
<a href="https://www.w3schools.com/jsref/event_key_which.asp">KeyboardEvent which Property</a>
<br>

<h2>conditional operator ? :</h2>

<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">conditional operator</a>

https://stackoverflow.com/questions/6259982/how-do-you-use-the-conditional-operator-in-javascript
? : (conditional) operator in JavaScript

The conditional operator is the only JavaScript operator that takes three operands. 

This operator is frequently used as a shortcut for the if statement.

JavaScript Demo: 
Expressions - Conditional operator

function getFee(isMember) {
  return (isMember ? "$2.00" : "$10.00");
}

function zeroFill(num) {
  return num < 10 ? '0' + num : num;
}

<h2>Async,Await by Example</h2>

<a href="Async,Await by Example.html">Async,Await by Example</a>
<a href="https://javascript.info/async-await">javascript-async-await</a>
<a href="https://wcc723.github.io/javascript/2017/12/30/javascript-async-await/">async-await</a>
<a href="https://wcc723.github.io/javascript/2017/12/29/javascript-proimse/">proimse</a>

<a href="https://hackernoon.com/understanding-promises-in-javascript-13d99df067c1">Understanding promises in JavaScript</a>
<a href="https://spring.io/understanding/javascript-promises">javascript-promises</a>
<a href="https://scotch.io/tutorials/javascript-promises-for-dummies">JavaScript Promises for Dummies</a>
<a href="https://javascript.info/promise-basics">promise-basics</a>
A “producing code” that does something and takes time. 

For instance, the code loads a remote script. 

A “consuming code” that wants the result of the “producing code” once it’s ready. 

A promise is a special JavaScript object that links the “producing code” and the “consuming code” together. 


<a href="https://www.youtube.com/watch?v=_9vgd9XKlDQ&ab_channel=DerrickSherrillDerrickSherrill" class="whitebut ">Tips For Using Async/Await in JavaScript</a>
<a href="https://www.w3schools.com/js/js_async.asp" class="whitebut ">JavaScript Async</a>

JavaScript Async
"async and await make promises easier to write"
async makes a function return a Promise
await makes a function wait for a Promise

Async Syntax
The keyword async before a function makes the function return a promise:

Example
async function myFunction() {
  return "Hello";
}

Example
async function myFunction() {
  return "Hello";
}
myFunction().then(
  function(value) {myDisplayer(value);}
);

Await Syntax
The keyword await before a function makes the function wait for a promise:

let value = await promise;
The await keyword can only be used inside an async function.

Example
Let's go slowly and learn how to use it.

Basic Syntax
async function myDisplay() {
  let myPromise = new Promise(function(myResolve, myReject) {
    myResolve("I love You !!");
  });
  document.getElementById("demo").innerHTML = await myPromise;
}

myDisplay();

Waiting for a Timeout
async function myDisplay() {
  let myPromise = new Promise(function(myResolve, myReject) {
    setTimeout(function() { myResolve("I love You !!"); }, 3000);
  });
  document.getElementById("demo").innerHTML = await myPromise;
}

myDisplay();

Waiting for a File
async function getFile() {
  let myPromise = new Promise(function(myResolve, myReject) {
    let req = new XML<a href="HttpRequest();" class="whitebut ">    req.open('GET', "mycar.html");</a>
    req.onload = function() {
      if (req.status == 200) {myResolve(req.response);}
      else {myResolve("File not Found");}
    };
    req.send();
  });
  document.getElementById("demo").innerHTML = await myPromise;
}

getFile();


<a href="https://javascript.info/async-await" class="whitebut ">Async/await</a>

Async/await
There’s a special syntax to work with promises in a more comfortable fashion, called “async/await”. It’s surprisingly easy to understand and use.

Async functions
Let’s start with the async keyword. It can be placed before a function, like this:

async function f() {
  return 1;
}
The word “async” before a function means one simple thing: a function always returns a promise. Other values are wrapped in a resolved promise automatically.

For instance, this function returns a resolved promise with the result of 1; let’s test it:

async function f() {
  return 1;
}

f().then(alert); // 1
…We could explicitly return a promise, which would be the same:

async function f() {
  return Promise.resolve(1);
}

f().then(alert); // 1
So, async ensures that the function returns a promise, and wraps non-promises in it. Simple enough, right? But not only that. There’s another keyword, await, that works only inside async functions, and it’s pretty cool.

Await
The syntax:

// works only inside async functions
let value = await promise;
The keyword await makes JavaScript wait until that promise settles and returns its result.

Here’s an example with a promise that resolves in 1 second:

async function f() {

  let promise = new Promise((resolve, reject) => {
    setTimeout(() => resolve("done!"), 1000)
  });

  let result = await promise; // wait until the promise resolves (*)

  alert(result); // "done!"
}

f();
The function execution “pauses” at the line (*) and resumes when the promise settles, with result becoming its result. So the code above shows “done!” in one second.

Let’s emphasize: await literally suspends the function execution until the promise settles, and then resumes it with the promise result. That doesn’t cost any CPU resources, because the JavaScript engine can do other jobs in the meantime: execute other scripts, handle events, etc.

It’s just a more elegant syntax of getting the promise result than promise.then. And, it’s easier to read and write.

Can’t use await in regular functions
If we try to use await in a non-async function, there would be a syntax error:

function f() {
  let promise = Promise.resolve(1);
  let result = await promise; // Syntax error
}
We may get this error if we forget to put async before a function. As stated earlier, await only works inside an async function.

Let’s take the showAvatar() example from the chapter Promises chaining and rewrite it using async/await:

We’ll need to replace .then calls with await.
Also we should make the function async for them to work.
async function showAvatar() {

  // read our JSON
  let response = await fetch('/article/promise-chaining/user.json');
  let user = await response.json();

  // read github user
  let githubResponse = await fetch(`<a href="https://api.github.com/users/${user.name}`);" class="whitebut ">  let githubUser = await githubResponse.json();</a>

  // show the avatar
  let img = document.createElement('img');
  img.src = githubUser.avatar_url;
  img.className = "promise-avatar-example";
  document.body.append(img);

  // wait 3 seconds
  await new Promise((resolve, reject) => setTimeout(resolve, 3000));

  img.remove();

  return githubUser;
}

showAvatar();
Pretty clean and easy to read, right? Much better than before.

await won’t work in the top-level code
People who are just starting to use await tend to forget the fact that we can’t use await in top-level code. For example, this will not work:

// syntax error in top-level code
let response = await fetch('/article/promise-chaining/user.json');
let user = await response.json();
But we can wrap it into an anonymous async function, like this:

(async () => {
  let response = await fetch('/article/promise-chaining/user.json');
  let user = await response.json();
  ...
})();
P.S. New feature: starting from V8 engine version 8.9+, top-level await works in modules.

await accepts “thenables”
Like promise.then, await allows us to use thenable objects (those with a callable then method). The idea is that a third-party object may not be a promise, but promise-compatible: if it supports .then, that’s enough to use it with await.

Here’s a demo Thenable class; the await below accepts its instances:

class Thenable {
  constructor(num) {
    this.num = num;
  }
  then(resolve, reject) {
    alert(resolve);
    // resolve with this.num*2 after 1000ms
    setTimeout(() => resolve(this.num * 2), 1000); // (*)
  }
}

async function f() {
  // waits for 1 second, then result becomes 2
  let result = await new Thenable(1);
  alert(result);
}

f();
If await gets a non-promise object with .then, it calls that method providing the built-in functions resolve and reject as arguments (just as it does for a regular Promise executor). Then await waits until one of them is called (in the example above it happens in the line (*)) and then proceeds with the result.

Async class methods
To declare an async class method, just prepend it with async:

class Waiter {
  async wait() {
    return await Promise.resolve(1);
  }
}

new Waiter()
  .wait()
  .then(alert); // 1 (this is the same as (result => alert(result)))
The meaning is the same: it ensures that the returned value is a promise and enables await.

Error handling
If a promise resolves normally, then await promise returns the result. But in the case of a rejection, it throws the error, just as if there were a throw statement at that line.

This code:

async function f() {
  await Promise.reject(new Error("Whoops!"));
}
…is the same as this:

async function f() {
  throw new Error("Whoops!");
}
In real situations, the promise may take some time before it rejects. In that case there will be a delay before await throws an error.

We can catch that error using try..catch, the same way as a regular throw:

async function f() {

  try {
    let response = await fetch('<a href="http://no-such-url');" class="whitebut ">  } catch(err) {</a>
    alert(err); // TypeError: failed to fetch
  }
}

f();
In the case of an error, the control jumps to the catch block. We can also wrap multiple lines:

async function f() {

  try {
    let response = await fetch('/no-user-here');
    let user = await response.json();
  } catch(err) {
    // catches errors both in fetch and response.json
    alert(err);
  }
}

f();
If we don’t have try..catch, then the promise generated by the call of the async function f() becomes rejected. We can append .catch to handle it:

async function f() {
  let response = await fetch('<a href="http://no-such-url');" class="whitebut ">}</a>

// f() becomes a rejected promise
f().catch(alert); // TypeError: failed to fetch // (*)
If we forget to add .catch there, then we get an unhandled promise error (viewable in the console). We can catch such errors using a global unhandledrejection event handler as described in the chapter Error handling with promises.

async/await and promise.then/catch
When we use async/await, we rarely need .then, because await handles the waiting for us. And we can use a regular try..catch instead of .catch. That’s usually (but not always) more convenient.

But at the top level of the code, when we’re outside any async function, we’re syntactically unable to use await, so it’s a normal practice to add .then/catch to handle the final result or falling-through error, like in the line (*) of the example above.

async/await works well with Promise.all
When we need to wait for multiple promises, we can wrap them in Promise.all and then await:

// wait for the array of results
let results = await Promise.all([
  fetch(url1),
  fetch(url2),
  ...
]);
In the case of an error, it propagates as usual, from the failed promise to Promise.all, and then becomes an exception that we can catch using try..catch around the call.

Summary
The async keyword before a function has two effects:

Makes it always return a promise.
Allows await to be used in it.
The await keyword before a promise makes JavaScript wait until that promise settles, and then:

If it’s an error, the exception is generated — same as if throw error were called at that very place.
Otherwise, it returns the result.
Together they provide a great framework to write asynchronous code that is easy to both read and write.

With async/await we rarely need to write promise.then/catch, but we still shouldn’t forget that they are based on promises, because sometimes (e.g. in the outermost scope) we have to use these methods. Also Promise.all is nice when we are waiting for many tasks simultaneously.

Tasks
Rewrite using async/await
Rewrite this example code from the chapter Promises chaining using async/await instead of .then/catch:

function loadJson(url) {
  return fetch(url)
    .then(response => {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new Error(response.status);
      }
    });
}

loadJson('no-such-user.json')
  .catch(alert); // Error: 404
solution
Rewrite "rethrow" with async/await
Below you can find the “rethrow” example. Rewrite it using async/await instead of .then/catch.

And get rid of the recursion in favour of a loop in demoGithubUser: with async/await that becomes easy to do.

class <a href="HttpError extends Error {" class="whitebut ">  constructor(response) {</a>
    super(`${response.status} for ${response.url}`);
    this.name = '<a href="HttpError';" class="whitebut ">    this.response = response;</a>
  }
}

function loadJson(url) {
  return fetch(url)
    .then(response => {
      if (response.status == 200) {
        return response.json();
      } else {
        throw new <a href="HttpError(response);" class="whitebut ">      }</a>
    });
}

// Ask for a user name until github returns a valid user
function demoGithubUser() {
  let name = prompt("Enter a name?", "iliakan");

  return loadJson(`<a href="https://api.github.com/users/${name}`)" class="whitebut ">    .then(user => {</a>
      alert(`Full name: ${user.name}.`);
      return user;
    })
    .catch(err => {
      if (err instanceof <a href="HttpError && err.response.status == 404) {" class="whitebut ">        alert("No such user, please reenter.");</a>
        return demoGithubUser();
      } else {
        throw err;
      }
    });
}

demoGithubUser();
solution
Call async from non-async
We have a “regular” function called f. How can you call the async function wait() and use its result inside of f?

async function wait() {
  await new Promise(resolve => setTimeout(resolve, 1000));

  return 10;
}

function f() {
  // ...what should you write here?
  // we need to call async wait() and wait to get 10
  // remember, we can't use "await"
}
P.S. The task is technically very simple, but the question is quite common for developers new to async/await.


<h2>jQuery on() Method</h2>

$(selector).on(event,childSelector,data,function,map)

Example
Attach a click event to the p element:
$("p").on("click", function(){
  alert("The paragraph was clicked.");
});

$( "#dataTable tbody tr" ).on( "click", function() {
  console.log( $( this ).text() );
});

<em>event</em> Required. Specifies one or more event(s) or namespaces to attach to the selected elements.<br>
 Multiple event values are separated by space.
Must be a valid event
<em>childSelector</em> Optional. Specifies that the event handler should only be attached to the specified child elements (and not the selector itself, like the deprecated delegate() method).
<em>data</em> Optional. Specifies additional data to pass along to the function
<em>function</em> Required. Specifies the function to run when the event occurs
<em>map</em> Specifies an event map (<em>{event:function, event:function, ...})</em> containing one or more event to attach to the selected elements, and functions to run when the events occur

===========================
<br>
<h2>Looping through objects in JavaScript</h2>

Once in a while, you may need to loop through Objects in JavaScript. 
The only way to do so before ES6 is with a <code>for...in</code> loop.
The problem with a <code>for...in</code> loop is that it iterates through properties in the Prototype chain. 
When you loop through an object with the <code>for...in</code> loop, you need to check if the property belongs to the object. 
You can do this with <code>hasOwnProperty</code>.
<code>for (var property in object) {
  if (object.hasOwnProperty(property)) {
    // Do things here
  }
}
</code>
We no longer have to rely on <code>for...in</code> and <code>hasOwnProperty</code> now. 
There’s a better way.
<!--more-->
<h3 id="a-better-way-to-loop-through-objects">A better way to loop through objects</h3>
The better way to loop through objects is <strong>first to convert the object into an array. 
Then, you loop through the array.</strong>
You can convert an object into an array with three methods:
<ol>
<li><code>Object.keys</code></li>
<li><code>Object.values</code></li>
<li><code>Object.entries</code></li>
</ol>
<h4 id="object.keys">Object.keys</h4>
<code>Object.keys</code> creates an array that contains the properties of an object.

<code>const fruits = {
  apple: 28,
  orange: 17,
  pear: 54,
}

console.log(Object.keys(fruits)) // [apple, orange, pear]
</code>

<h4 id="object.values">Object.values</h4>
<code>Object.values</code> creates an array that contains the values of every property in an object. 
Here’s an example:
<code>const fruits = {
  apple: 28,
  orange: 17,
  pear: 54,
}

const values = Object.values(fruits)
console.log(values) // [28, 17, 54]
</code>
<h4 id="object.entries">Object.entries</h4>
<code>Object.entries</code> creates an array of arrays. 
Each inner array has two item. 
The first item is the property; the second item is the value.
Here’s an example:
<code>const fruits = {
  apple: 28,
  orange: 17,
  pear: 54,
}

const entries = Object.entries(fruits)
console.log(entries)
// [
//   [apple, 28],
//   [orange, 17],
//   [pear, 54]
// ]
</code>
My favorite of the three is <code>Object.entries</code> because you get both the key and property values.
<h3 id="looping-through-the-array">Looping through the array</h3>
Once you’ve converted the object into an array with <code>Object.keys</code>, <code>Object.values</code>, or <code>Object.entries</code>, you can loop through it as if it was a normal array.
<code>// Looping through arrays created from Object.keys
const keys = Object.keys(fruits)
for (const key of keys) {
  console.log(key)
}

// Results:
// apple
// orange
// pear
</code>
If you use <code>Object.entries</code> you might want to <a href="/blog/es6">destructure</a> the array into its key and property.
<code>for (const [fruit, count] of entries) {
  console.log(`There are ${count} ${fruit}s`)
}

// Result
// There are 28 apples
// There are 17 oranges
// There are 54 pears
</code>

<h2>Get element of JS object with an index</h2>

<a href="https://stackoverflow.com/questions/14802481/get-element-of-js-object-with-an-index">Get element of JS object with an index</a>
myobj[Object.keys(myobj)[0]];

<h3 id="wrapping-up">Wrapping up</h3>
The better way to loop through objects is first convert it into an array with one of these three methods.
<ol>
<li><code>Object.keys</code></li>
<li><code>Object.values</code></li>
<li><code>Object.entries</code></li>
</ol>
Then, you loop through the results like a normal array.

<h2>Reading CSV File With HTML5 File API</h2>
<a href="Reading CSV File With HTML5 File API.html">Reading CSV File With HTML5 File API</a>
<br>
<h2>JS access local file</h2>

from				to access		status
local js			local file	error, CORS			server file	OK

server js			local file	error, CORS			server file	error in some server

local server js	local file	?			server file	?

use file api:
<a href="Reading CSV File With HTML5 File API.html">Reading CSV File With HTML5 File API</a>
<br>
<h2>fairyDustCursorJS</h2>
<a href="fairyDustCursorJS.txt">fairyDustCursorJS</a>
<br>
<h2>copying strings to the clipboard</h2>
<a href="https://techoverflow.net/2018/03/30/copying-strings-to-the-clipboard-using-pure-javascript/">copying strings to the clipboard</a>

function copyStringToClipboard (str) {
   // Create new element
   var el = document.createElement('textarea');
   // Set value (string to be copied)
   el.value = str;
   // Set non-editable to avoid focus and move outside of view
   el.setAttribute('readonly', '');
   el.style = {position: 'absolute', left: '-9999px'};
   document.body.appendChild(el);
   // Select text inside element
   el.select();
   // Copy text to clipboard
   document.execCommand('copy');
   // Remove temporary element
   document.body.removeChild(el);
}
Note: If the user selected anything when you ran the function, this selection will be cleared. 
If you need to preserve the selection, see this Hackernoon article for a more elaborate solution..

You can use it like this:

// Usage example:
copyStringToClipboard("abc123");
It works by adding a temporary textarea element onto the DOM which is moved outside (credits to Angelos Charalis on Hackernoon for the original idea) the viewport in order to avoid wreaking havoc on screenreaders etc.
<h2>slide and fade functions</h2>

  $(".btn1").click(function(){  $("p").slideUp();
  });

  $(".btn2").click(function(){  $("p").slideDown();
  });

  $("button").click(function(){
    $("#div1").fadeToggle();
    $("#div2").fadeToggle("slow");
    $("#div3").fadeToggle(3000);
  });
<h2>TypeScript in 5 minutes</h2>
<a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html">TypeScript in 5 minutes</a>

<h2>JavaScript Prototype</h2>
<a href="JavaScript Prototype.html">JavaScript Prototype</a>
<h2>Prototype with Examples</h2>
JavaScript is a prototype-based language, therefore understanding the prototype object is one of the most important concepts which JavaScript practitioners need to know. 


Before reading this article, you will need to have a basic understanding of the <a href="https://guide.freecodecamp.org/src/pages/javascript/this-reference/index.md"><code>this</code> reference in JavaScript</a>.
<h3><strong>Prototype object</strong></h3>
For the sake of clarity, let’s examine the following example:
<code>function Point2D(x, y) {
  this.x = x;
  this.y = y;}</code>

As <code>Point2D</code> function is declared, a default property named <code>prototype</code> will be created for it (note that, in JavaScript, a function is also an object). 

The <code>prototype</code> property is an object which contains a <code>constructor</code> property and its value is <code>Point2D</code> function: <code>Point2D.prototype.constructor = Point2D</code>. 

And when you call <code>Point2D</code> with <code>new</code> keyword, <em>newly created objects will inherit all properties from</em> <code>Point2D.prototype</code>. 

To check that, you can add a method named <code>move</code> into <code>Point2D.prototype</code> as follows:
<code>Point2D.prototype.move = function(dx, dy) {
  this.x += dx;
  this.y += dy;}

var p1 = new Point2D(1, 2);
p1.move(3, 4);
console.log(p1.x); // 4
console.log(p1.y); // 6</code>

The <code>Point2D.prototype</code> is called <strong><strong>prototype object</strong></strong> or <strong><strong>prototype</strong></strong> of <code>p1</code> object and for any other object created with <code>new Point2D(...)</code> syntax. 

You can add more properties to <code>Point2D.prototype</code> object as you like. 

The common pattern is declare methods to <code>Point2D.prototype</code> and other properties will be declared in constructor function.

Built-in objects in JavaScript are constructed in a similar manner. 

For example:
<ul><li>Prototype of objects created with <code>new Object()</code> or <code>{}</code> syntax is <code>Object.prototype</code>.</li><li>Prototype of arrays created with <code>new Array()</code> or <code>[]</code> syntax is <code>Array.prototype</code>.</li><li>And so on with other built-in objects such as <code>Date</code> and <code>RegExp</code>.</li></ul>
<code>Object.prototype</code> is inherited by all objects and it has no prototype (its prototype is <code>null</code>).
<h3><strong>Prototype chain</strong></h3>
The prototype chain mechanism is simple: When you access a property <code>p</code> on object <code>obj</code>, the JavaScript engine will search this property inside <code>obj</code> object. 

If the engine fails to search, it continues searching in the prototype of <code>obj</code> object and so on until reaching <code>Object.prototype</code>. 

If after the search has finished, and nothing has been found the result will be <code>undefined</code>. 

For example:
<code>var obj1 = {
  a: 1,
  b: 2};

var obj2 = Object.create(obj1);
obj2.a = 2;

console.log(obj2.a); // 2
console.log(obj2.b); // 2
console.log(obj2.c); // undefined</code>

In above snippet, the statement <code>var obj2 = Object.create(obj1)</code> will create <code>obj2</code> object with prototype <code>obj1</code> object. 

In other words, <code>obj1</code> becomes the prototype of <code>obj2</code> instead of <code>Object.prototype</code> by default. 

As you can see, <code>b</code> is not a property of <code>obj2</code>, you can still access it via the prototype chain. 

For <code>c</code> property, however, you get <code>undefined</code> value because it can’t be found in <code>obj1</code> and <code>Object.prototype</code>.
<h3><strong>Classes</strong></h3>
In ES2016, we now get to use the <code>Class</code> keyword as well as the methods mentioned above to manipulate <code>prototype</code>. 

The JavaScript <code>Class</code> appeals to developers from OOP backgrounds, but it’s essentially doing the same thing as above.
<code>class Rectangle {
  constructor(height, width) { this.height = height this.width = width
  }

  get area() { return this.calcArea()
  }

  calcArea() { return this.height * this.width
  }}

const square = new Rectangle(10, 10)

console.log(square.area) // 100</code>

This is basically the same as:
<code>function Rectangle(height, width) {
  this.height = height
  this.width = width}

Rectangle.prototype.calcArea = function calcArea() {
  return this.height * this.width}</code>

The <code>getter</code> and <code>setter</code> methods in classes bind an Object property to a function that will be called when that property is looked up. 

It’s just syntactic sugar to help make it easier to <em>look up</em> or <em>set</em> properties.
<h2>Multiple Onload Functions</h2>
https://www.htmlgoodies.com/beyond/javascript/article.php/3724571/Using-Multiple-JavaScript-Onload-Functions.htm
Using Multiple JavaScript Onload Functions

window.onload = func1;	execute the script when page is loaded

&lt;body onload="func1(); func2();">	linking of multiple events onloaded

&lt;body onload="func1(); onkeypress="chkKey()">	on multiple events

window.onload = start;
function start() {
func1(); func2();}	linking of multiple events by function onloaded

window.addEventListener("load", myInit, true);
 function myInit(){
 // call your functions here.... 
};	create an init function manually	this can call that set of functions anytime

<h2>Common HTML Events</h2>
Here is a list of some common HTML events:

onchange	An HTML element has been changed
onclick	The user clicks an HTML element
onmouseover	The user moves the mouse over an HTML element
onmouseout	The user moves the mouse away from an HTML element
onkeydown	The user pushes a keyboard key
onload	The browser has finished loading the page

Common events
There is a huge collection of events that can be generated by most element nodes:
Mouse events.
Keyboard events.
HTML frame/object events.
HTML form events.
User interface events.
Mutation events (notification of any changes to the structure of a document).
Progress events).

Note that the event classification above is not exactly the same as W3C's classification.

<table>
<tbody><tr><th style="width:11%">Category</th><th style="width:12%">Type</th><th style="width:14%">Attribute</th><th>Description</th><th style="width:15%">Bubbles</th><th style="width:11%">Cancelable</th></tr>
<tr><td rowspan="14">Mouse</td><td>click</td><td>onclick</td><td>Fires when the pointing device button is clicked over an element. 
A click is defined as a mousedown and mouseup over the same screen location. 
The sequence of these events is:
mousedown, mouseup, click</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dblclick</td><td>ondblclick</td><td>Fires when the pointing device button is double-clicked over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mousedown</td><td>onmousedown</td><td>Fires when the pointing device button is pressed over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mouseup</td><td>onmouseup</td><td>Fires when the pointing device button is released over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mouseover</td><td>onmouseover</td><td>Fires when the pointing device is moved onto an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mousemove</td><td>onmousemove</td><td>Fires when the pointing device is moved while it is over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>mouseout</td><td>onmouseout</td><td>Fires when the pointing device is moved away from an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragstart</td><td>ondragstart</td><td>Fired on an element when a drag is started.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drag</td><td>ondrag</td><td>This event is fired at the source of the drag, that is, the element where dragstart was fired, during the drag operation.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragenter</td><td>ondragenter</td><td>Fired when the mouse is first moved over an element while a drag is occurring.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragleave</td><td>ondragleave</td><td>This event is fired when the mouse leaves an element while a drag is occurring.</td><td>Yes</td><td>No</td></tr>
<tr><td>dragover</td><td>ondragover</td><td>This event is fired as the mouse is moved over an element when a drag is occurring.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drop</td><td>ondrop</td><td>The drop event is fired on the element where the drop occurs at the end of the drag operation.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragend</td><td>ondragend</td><td>The source of the drag will receive a dragend event when the drag operation is complete, whether it was successful or not.</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="3">Keyboard</td><td>keydown</td><td>onkeydown</td><td>Fires before keypress, when a key on the keyboard is pressed.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>keypress</td><td>onkeypress</td><td>Fires after keydown, when a key on the keyboard is pressed.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>keyup</td><td>onkeyup</td><td>Fires when a key on the keyboard is released</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="6">HTML frame/object</td><td>load</td><td>onload</td><td>Fires when the user agent finishes loading all content within a document, including window, frames, objects and images
For elements, it fires when the target element and all of its content has finished loading
</td><td>No</td><td>No</td></tr>
<tr><td>unload</td><td>onunload</td><td>Fires when the user agent removes all content from a window or frame
For elements, it fires when the target element or any of its content has been removed
</td><td>No</td><td>No</td></tr>
<tr><td>abort</td><td>onabort</td><td>Fires when an object/image is stopped from loading before completely loaded</td><td>Yes</td><td>No</td></tr>
<tr><td>error</td><td>onerror</td><td>Fires when an object/image/frame cannot be loaded properly</td><td>Yes</td><td>No</td></tr>
<tr><td>resize</td><td>onresize</td><td>Fires when a document view is resized</td><td>Yes</td><td>No</td></tr>
<tr><td>scroll</td><td>onscroll</td><td>Fires when an element or document view is scrolled</td><td>No, except that a scroll event on document must bubble to the window</td><td>No</td></tr>
<tr><td rowspan="6">HTML form</td><td>select</td><td>onselect</td><td>Fires when a user selects some text in a text field, including input and textarea</td><td>Yes</td><td>No</td></tr>
<tr><td>change</td><td>onchange</td><td>Fires when a control loses the input focus and its value has been modified since gaining focus</td><td>Yes</td><td>No</td></tr>
<tr><td>submit</td><td>onsubmit</td><td>Fires when a form is submitted</td><td>Yes</td><td>Yes</td></tr>
<tr><td>reset</td><td>onreset</td><td>Fires when a form is reset</td><td>Yes</td><td>No</td></tr>
<tr><td>focus</td><td>onfocus</td><td>Fires when an element receives focus either via the pointing device or by tab navigation</td><td>No</td><td>No</td></tr>
<tr><td>blur</td><td>onblur</td><td>Fires when an element loses focus either via the pointing device or by tabbing navigation</td><td>No</td><td>No</td></tr>
<tr><td rowspan="3">User interface</td><td>focusin</td><td>(none)</td><td>Similar to HTML focus event, but can be applied to any focusable element</td><td>Yes</td><td>No</td></tr>
<tr><td>focusout</td><td>(none)</td><td>Similar to HTML blur event, but can be applied to any focusable element</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMActivate</td><td>(none)</td><td>Similar to XUL command event. 
Fires when an element is activated, for instance, through a mouse click or a keypress.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="7">Mutation</td><td>DOMSubtreeModified</td><td>(none)</td><td>Fires when the subtree is modified</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMNodeInserted</td><td>(none)</td><td>Fires when a node has been added as a child of another node</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMNodeRemoved</td><td>(none)</td><td>Fires when a node has been removed from a DOM-tree</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMNodeRemovedFromDocument</td><td>(none)</td><td>Fires when a node is being removed from a document</td><td>No</td><td>No</td></tr>
<tr><td>DOMNodeInsertedIntoDocument</td><td>(none)</td><td>Fires when a node is being inserted into a document</td><td>No</td><td>No</td></tr>
<tr><td>DOMAttrModified</td><td>(none)</td><td>Fires when an attribute has been modified</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMCharacterDataModified</td><td>(none)</td><td>Fires when the character data has been modified</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="6">Progress</td><td>loadstart</td><td>(none)</td><td>Progress has begun.</td><td>No</td><td>No</td></tr>
<tr><td>progress</td><td>(none)</td><td>In progress. 
After loadstart has been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>error</td><td>(none)</td><td>Progression failed. 
After the last progress has been dispatched, or after loadstart has been dispatched if progress has not been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>abort</td><td>(none)</td><td>Progression is terminated. 
After the last progress has been dispatched, or after loadstart has been dispatched if progress has not been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>load</td><td>(none)</td><td>Progression is successful. 
After the last progress has been dispatched, or after loadstart has been dispatched if progress has not been dispatched.</td><td>No</td><td>No</td></tr>
<tr><td>loadend</td><td>(none)</td><td>Progress has stopped. 
After one of error, abort, or load has been dispatched.</td><td>No</td><td>No</td></tr>
</tbody></table>

Note that the events whose names start with "DOM" are currently not well supported, and for this and other performance reasons are deprecated by the W3C in DOM Level 3. 
Mozilla and Opera support <i>DOMAttrModified</i>, <i>DOMNodeInserted</i>, <i>DOMNodeRemoved</i> and <i>DOMCharacterDataModified</i>. 
Chrome and Safari support these events, except for <i>DOMAttrModified</i>.
<h4>Touch events</h4>
Web browsers running on touch-enabled devices, such as Apple's iOS and Google's Android, generate additional events.

<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Touch</td><td>touchstart</td><td></td><td>Fires when a finger is placed on the touch surface/screen.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchend</td><td></td><td>Fires when a finger is removed from the touch surface/screen.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchmove</td><td></td><td>Fires when a finger already placed on the screen is moved across the screen.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchenter</td><td></td><td>Fires when a touch point moves onto the interactive area defined by a DOM element.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchleave</td><td></td><td>Fires when a touch point moves off the interactive area defined by a DOM element.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>touchcancel</td><td></td><td>A user agent must dispatch this event type to indicate when a TouchPoint has been disrupted in an implementation-specific manner, such as by moving outside the bounds of the UA window. 
A user agent may also dispatch this event type when the user places more touch points (The coordinate point at which a pointer (e.g. 
finger or stylus) intersects the target surface of an interface) on the touch surface than the device or implementation is configured to store, in which case the earliest TouchPoint object in the TouchList should be removed.</td><td>Yes</td><td>No</td></tr>
</tbody></table>
In the W3C draft recommendation, a <code>TouchEvent</code> delivers a <code>TouchList</code> of <code>Touch</code> locations, the modifier keys that were active, a <code>TouchList</code> of <code>Touch</code> locations within the targeted DOM element, and a <code>TouchList</code> of <code>Touch</code> locations that have changed since the previous <code>TouchEvent</code>.

Apple didn't join this working group, and delayed W3C recommendation of its Touch Events Specification by disclosing patents late in the recommendation process.

<h4>Pointer events</h4>
Web browsers on devices with various types of input devices including mouse, touch panel, and pen may generate integrated input events. 
Users can see what type of input device is pressed, what button is pressed on that device, and how strongly the button is pressed when it comes to a stylus pen. 
As of October 2013, this event is only supported by Internet Explorer 10 and 11.

<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="10">Pointer</td><td>pointerdown</td><td>onpointerdown</td><td>Fires when the pointing device button is activated, or pressed over an element.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerup</td><td>onpointerup</td><td>Fires when the pointing device button is released over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointercancel</td><td>onpointercancel</td><td>Fires when a pointing device is unlikely to continue to produce event because, for example, the device is used for panning/zooming after a pointerdown event.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointermove</td><td>onpointermove</td><td>Fires when the pointing device is moved while it is over an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerover</td><td>onpointerover</td><td>Fires when the pointing device is moved onto an element</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerout</td><td>onpointerout</td><td>Fires when the pointing device is moved away from an element. 
Also fires after pointerup by pointing device without hovering, or after</td><td>Yes</td><td>Yes</td></tr>
<tr><td>pointerenter</td><td>onpointerenter</td><td>Fires when the pointing device is moved onto an element, or when the button of the pointing device which does not support hovering is pressed on one of its descendant elements.</td><td>No</td><td>Yes</td></tr>
<tr><td>pointerleave</td><td>onpointerleave</td><td>Fires when the pointing device is moved away from an element, or when the button of the pointing device which does not support hovering is released over its descendant elements.</td><td>No</td><td>Yes</td></tr>
<tr><td>gotpointercapture</td><td>ongotpointercapture</td><td>Fires when the pointer is captured by setPointerCapture method.</td><td>Yes</td><td>No</td></tr>
<tr><td>lostpointercapture</td><td>onlostpointercapture</td><td>Fires when the pointer is released by releasePointerCapture method.</td><td>Yes</td><td>No</td></tr>
</tbody></table>
<h4>Indie UI events</h4>
Not yet really implemented, the Indie UI working groups want to help web application developers to be able to support standard user interaction events without having to handle different platform specific technical events that could match with it.

Scripting usable interfaces can be difficult, especially when one considers that user interface design patterns differ across software platforms, hardware, and locales, and that those interactions can be further customized based on personal preference. 
Individuals are accustomed to the way the interface works on their own system, and their preferred interface frequently differs from that of the web application author's preferred interface.

For example, web application authors, wishing to intercept a user's intent to undo the last action, need to "listen" for all the following events:

Control+Z on Windows and Linux.
Command+Z on Mac OS X.
Shake events on some mobile devices.

It would be simpler to listen for a single, normalized request to "undo" the previous action.

<table>
<tbody><tr><th>Category</th><th>Type</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Request</td><td>undorequest</td><td>Indicates the user desires to "undo" the previous action. 
(May be superseded by the UndoManager interface.)</td><td>Yes</td><td>Yes</td></tr>
<tr><td>redorequest</td><td>Indicates the user desires to "redo" the previously "undone" action. 
(May be superseded by the UndoManager interface.)</td><td>Yes</td><td>no</td></tr>
<tr><td>expandrequest</td><td>Indicates the user desires to reveal information in a collapsed section (e.g. 
a disclosure widget) or branch node in a hierarchy (e.g., a tree view).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>collapserequest</td><td>Indicates the user desires to hide or collapse information in an expanded section (e.g. 
a disclosure widget) or branch node in a hierarchy (e.g., a tree view).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dismissrequest</td><td>Indicates the user desires "dismiss" the current view (e.g. 
canceling a dialog, or closing a popup menu).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>deleterequest</td><td>Indicates the user wants to initiate a "delete" action on the marked element or current view.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="4">Focus Request</td><td>directionalfocusrequest</td><td>Initiated when the user agent sends a "direction focus" request to the web application. 
Web authors should not use or register for directionalfocusrequest events when standard browser focus and blur events are sufficient. 
Using these events unnecessarily could result in reduced performance or negative user experience.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>linearfocusrequest</td><td>Initiated when the user agent sends a "linear focus" request to the web application. 
Web authors should not use or register for linearfocusrequest events when standard browser focus and blur events are sufficient. 
This event type is only necessary on specialized control types such as data grids where the logical next element may not be focusable or even in the DOM until requested. 
Using these events unnecessarily could result in reduced performance or negative user experience.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>palettefocusrequest</td><td>Initiated when the user agent sends a "palette focus" request to the web application. 
Web app authors receiving this event should move focus to the first palette in the web application, or cycle focus between all available palettes. 
Note: palettes are sometimes referred to as non-modal dialogs or inspector windows.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>toolbarfocusrequest</td><td>Initiated when the user agent sends a "toolbar focus" request to the web application. 
Web app authors receiving this event should move focus to the main toolbar in the web application, or cycle focus between all available toolbars.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="4">Manipulation Request</td><td>moverequest</td><td>Initiated when the user agent sends a move request to the web application with accompanying x/y delta values. 
This is used, for example, when moving an object to a new location on a layout canvas.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>panrequest</td><td>Initiated when the user agent sends a pan request to the web application with accompanying x/y delta values. 
This is used, for example, when changing the center point while panning a map or another custom image viewer.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>rotationrequest</td><td>Initiated when the user agent sends a rotation request to the web application with accompanying origin x/y values and a rotation value in degrees.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>zoomrequest</td><td>Initiated when the user agent sends a zoom request to the web application with accompanying origin x/y values and the zoom scale factor.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="1">Scroll Request</td><td>scrollrequest</td><td>Initiated when the user agent sends a scroll request to the web application with accompanying x/y delta values or one of the other defined scrollType values. 
Authors should only use this event and uiaction with custom scroll views.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="1">ValueChange Request</td><td>valuechangerequest</td><td>Initiated when the user agent sends a value change request to the web application. 
Used on custom range controls like sliders, carousels, etc.</td><td>Yes</td><td>Yes</td></tr>
</tbody></table>
<h4>Internet Explorer-specific events</h4>
In addition to the common (W3C) events, two major types of events are added by Internet Explorer. 
Some of the events have been implemented as de facto standards by other browsers.
Clipboard events.
Data binding events.

<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Clipboard</td><td>cut</td><td>oncut</td><td>Fires after a selection is cut to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>copy</td><td>oncopy</td><td>Fires after a selection is copied to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>paste</td><td>onpaste</td><td>Fires after a selection is pasted from the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>beforecut</td><td>onbeforecut</td><td>Fires before a selection is cut to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>beforecopy</td><td>onbeforecopy</td><td>Fires before a selection is copied to the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>beforepaste</td><td>onbeforepaste</td><td>Fires before a selection is pasted from the clipboard.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="11">Data binding</td><td>afterupdate</td><td>onafterupdate</td><td>Fires immediately after a databound object has been updated.</td><td>Yes</td><td>No</td></tr>
<tr><td>beforeupdate</td><td>onbeforeupdate</td><td>Fires before a data source is updated.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>cellchange</td><td>oncellchange</td><td>Fires when a data source has changed.</td><td>Yes</td><td>No</td></tr>
<tr><td>dataavailable</td><td>ondataavailable</td><td>Fires when new data from a data source become available.</td><td>Yes</td><td>No</td></tr>
<tr><td>datasetchanged</td><td>ondatasetchanged</td><td>Fires when content at a data source has changed.</td><td>Yes</td><td>No</td></tr>
<tr><td>datasetcomplete</td><td>ondatasetcomplete</td><td>Fires when transfer of data from the data source has completed.</td><td>Yes</td><td>No</td></tr>
<tr><td>errorupdate</td><td>onerrorupdate</td><td>Fires if an error occurs while updating a data field.</td><td>Yes</td><td>No</td></tr>
<tr><td>rowenter</td><td>onrowenter</td><td>Fires when a new row of data from the data source is available.</td><td>Yes</td><td>No</td></tr>
<tr><td>rowexit</td><td>onrowexit</td><td>Fires when a row of data from the data source has just finished.</td><td>No</td><td>Yes</td></tr>
<tr><td>rowsdelete</td><td>onrowsdelete</td><td>Fires when a row of data from the data source is deleted.</td><td>Yes</td><td>No</td></tr>
<tr><td>rowinserted</td><td>onrowinserted</td><td>Fires when a row of data from the data source is inserted.</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="9">Mouse</td><td>contextmenu</td><td>oncontextmenu</td><td>Fires when the context menu is shown.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drag</td><td>ondrag</td><td>Fires when during a mouse drag (on the moving Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragstart</td><td>ondragstart</td><td>Fires when a mouse drag begins (on the moving Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragenter</td><td>ondragenter</td><td>Fires when something is dragged onto an area (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragover</td><td>ondragover</td><td>Fires when a drag is held over an area (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragleave</td><td>ondragleave</td><td>Fires when something is dragged out of an area (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragend</td><td>ondragend</td><td>Fires when a mouse drag ends (on the moving Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>drop</td><td>ondrop</td><td>Fires when a mouse button is released over a valid target during a drag (on the target Element).</td><td>Yes</td><td>Yes</td></tr>
<tr><td>selectstart</td><td>onselectstart</td><td>Fires when the user starts to select text.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>Keyboard</td><td>help</td><td>onhelp</td><td>Fires when the user initiates help.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="2">HTML frame/object</td><td>beforeunload</td><td>onbeforeunload</td><td>Fires before a document is unloaded.</td><td>No</td><td>Yes</td></tr>
<tr><td>stop</td><td>onstop</td><td>Fires when the user stops loading the object. 
(unlike abort, stop event can be attached to document)</td><td>No</td><td>No</td></tr>
<tr><td>HTML form</td><td>beforeeditfocus</td><td>onbeforeeditfocus</td><td>Fires before an element gains focus for editing.</td><td>Yes</td><td>Yes</td></tr>
<tr><td rowspan="3">Marquee</td><td>start</td><td>onstart</td><td>Fires when a marquee begins a new loop.</td><td>No</td><td>No</td></tr>
<tr><td>finish</td><td>onfinish</td><td>Fires when marquee looping is complete.</td><td>No</td><td>Yes</td></tr>
<tr><td>bounce</td><td>onbounce</td><td>Fires when a scrolling marquee bounces back in the other direction.</td><td>No</td><td>Yes</td></tr>
<tr><td rowspan="6">Miscellaneous</td><td>beforeprint</td><td>onbeforeprint</td><td>Fires before a document is printed</td><td>No</td><td>No</td></tr>
<tr><td>afterprint</td><td>onafterprint</td><td>Fires immediately after the document prints.</td><td>No</td><td>No</td></tr>
<tr><td>propertychange</td><td>onpropertychange</td><td>Fires when the property of an object is changed.</td><td>No</td><td>No</td></tr>
<tr><td>filterchange</td><td>onfilterchange</td><td>Fires when a filter changes properties or finishes a transition.</td><td>No</td><td>No</td></tr>
<tr><td>readystatechange</td><td>onreadystatechange</td><td>Fires when the readyState property of an element changes.</td><td>No</td><td>No</td></tr>
<tr><td>losecapture</td><td>onlosecapture</td><td>Fires when the releaseCapture method is invoked.</td><td>No</td><td>No</td></tr>
</tbody></table>
Note that Mozilla, Safari and Opera also support the readystatechange event for the XMLHttpRequest object. 
Mozilla also supports the beforeunload event using the traditional event registration method (DOM Level 0). 
Mozilla and Safari also support contextmenu, but Internet Explorer for Mac does not.

Note that Firefox 6 and later support the beforeprint and afterprint events.

<h3>XUL events</h3>
In addition to the common (W3C) events, Mozilla defined a set of events that work only with XUL elements.
<table>
<tbody><tr><th>Category</th><th>Type</th><th>Attribute</th><th>Description</th><th>Bubbles</th><th>Cancelable</th></tr>
<tr><td rowspan="6">Mouse</td><td>DOMMouseScroll</td><td>DOMMouseScroll</td><td>Fires when the mouse wheel is moved, causing the content to scroll.</td><td>Yes</td><td>Yes</td></tr>
<tr><td>dragdrop</td><td>ondragdrop</td><td>Fires when the user releases the mouse button to drop an object being dragged.</td><td>No</td><td>No</td></tr>
<tr><td>dragenter</td><td>ondragenter</td><td>Fires when the mouse pointer first moves over an element during a drag. 
It is similar to the mouseover event but occurs while dragging.</td><td>No</td><td>No</td></tr>
<tr><td>dragexit</td><td>ondragexit</td><td>Fires when the mouse pointer moves away from an element during a drag. 
It is also called after a drop on an element. 
It is similar to the mouseout event but occurs during a drag.</td><td>No</td><td>No</td></tr>
<tr><td>draggesture</td><td>ondraggesture</td><td>Fires when the user starts dragging the element, usually by holding down the mouse button and moving the mouse.</td><td>No</td><td>No</td></tr>
<tr><td>dragover</td><td>ondragover</td><td>Related to the mousemove event, this event is fired while something is being dragged over an element.</td><td>No</td><td>No</td></tr>
<tr><td rowspan="5">Input</td><td>CheckboxStateChange</td><td></td><td>Fires when a checkbox is checked or unchecked, either by the user or a script.</td><td>No</td><td>No</td></tr>
<tr><td>RadioStateChange</td><td></td><td>Fires when a radio button is selected, either by the user or a script.</td><td>No</td><td>No</td></tr>
<tr><td>close</td><td>onclose</td><td>Fires when a request has been made to close the window.</td><td>No</td><td>Yes</td></tr>
<tr><td>command</td><td>oncommand</td><td>Similar to W3C DOMActivate event. 
Fires when an element is activated, for instance, through a mouse click or a keypress.</td><td>No</td><td>No</td></tr>
<tr><td>input</td><td>oninput</td><td>Fires when a user enters text in a textbox.</td><td>Yes</td><td>No</td></tr>
<tr><td rowspan="10">User interface</td><td>DOMMenuItemActive</td><td>DOMMenuItemActive</td><td>Fires when a menu or menuitem is hovered over, or highlighted.</td><td>Yes</td><td>No</td></tr>
<tr><td>DOMMenuItemInactive</td><td>DOMMenuItemInactive</td><td>Fires when a menu or menuitem is no longer being hovered over, or highlighted.</td><td>Yes</td><td>No</td></tr>
<tr><td>contextmenu</td><td>oncontextmenu</td><td>Fires when the user requests to open the context menu for the element. 
The action to do this varies by platform, but it will typically be a right click.</td><td>No</td><td>Yes</td></tr>
<tr><td>overflow</td><td>onoverflow</td><td>Fires a box or other layout element when there is not enough space to display it at full size.</td><td>No</td><td>No</td></tr>
<tr><td>overflowchanged</td><td>onoverflowchanged</td><td>Fires when the overflow state changes.</td><td>No</td><td>No</td></tr>
<tr><td>underflow</td><td>onunderflow</td><td>Fires to an element when there becomes enough space to display it at full size.</td><td>No</td><td>No</td></tr>
<tr><td>popuphidden</td><td>onpopuphidden</td><td>Fires to a popup after it has been hidden.</td><td>No</td><td>No</td></tr>
<tr><td>popuphiding</td><td>onpopuphiding</td><td>Fires to a popup when it is about to be hidden.</td><td>No</td><td>No</td></tr>
<tr><td>popupshowing</td><td>onpopupshowing</td><td>Fires to a popup just before it is popped open.</td><td>No</td><td>Yes</td></tr>
<tr><td>popupshown</td><td>onpopupshown</td><td>Fires to a popup after it has been opened, much like the onload event is sent to a window when it is opened.</td><td>No</td><td>No</td></tr>
<tr><td rowspan="2">Command</td><td>broadcast</td><td>onbroadcast</td><td>Placed on an observer. 
The broadcast event is sent when the attributes of the broadcaster being listened to are changed.</td><td>No</td><td>No</td></tr>
<tr><td>commandupdate</td><td>oncommandupdate</td><td>Fires when a command update occurs.</td><td>No</td><td>No</td></tr>
</tbody></table>
<h3>Other events</h3>
For Mozilla and Opera 9, there are also undocumented events known as <i>DOMContentLoaded</i> and <i>DOMFrameContentLoaded</i> which fire when the DOM content is loaded. 
These are different from "load" as they fire before the loading of related files (e.g., images). 
However, DOMContentLoaded has been added to the HTML 5 specification.
The DOMContentLoaded event was also implemented in the Webkit rendering engine build 500+.

Opera 9 also supports the Web Forms 2.0 events <i>DOMControlValueChanged</i>, <i>invalid</i>, <i>forminput</i> and <i>formchange</i>.
<h3>Event flow</h3>
Consider the situation when there are 2 elements nested together. 
Both have event handlers registered on the same event type, say "click". 
When the user clicks on the inner element, there are two possible ways to handle it:
Trigger the elements from outer to inner (event capturing). 
This model is implemented in Netscape Navigator.
Trigger the elements from inner to outer (event bubbling). 
This model is implemented in Internet Explorer and other browsers.
W3C takes a middle position in this struggle. 
Events are first captured until it reaches the target element, and then bubbled up. 
During the event flow, an event can be responded to at any element in the path (an observer) in either phase by causing an action, and/or by stopping the event (with method <tt>event.stopPropagation()</tt> for W3C-conforming browsers and command <tt>event.cancelBubble = true</tt> for Internet Explorer), and/or by cancelling the default action for the event.

<h3>Event object</h3>
The Event object provides a lot of information about a particular event, including information about target element, key pressed, mouse button pressed, mouse position, etc. 
Unfortunately, there are very serious browser incompatibilities in this area. 
Hence only the W3C Event object is discussed in this article.

<table>
<caption>Event properties
</caption>
<tbody><tr><th>Name</th><th>Type</th><th>Description</th></tr>
<tr><td>type</td><td>DOMString</td><td>The name of the event (case-insensitive in DOM level 2 but case-sensitive in DOM level 3 ).</td></tr>
<tr><td>target</td><td>EventTarget</td><td>Used to indicate the EventTarget to which the event was originally dispatched.</td></tr>
<tr><td>currentTarget</td><td>EventTarget</td><td>Used to indicate the EventTarget whose EventListeners are currently being processed.</td></tr>
<tr><td>eventPhase</td><td>unsigned short</td><td>Used to indicate which phase of event flow is currently being evaluated.</td></tr>
<tr><td>bubbles</td><td>boolean</td><td>Used to indicate whether or not an event is a bubbling event.</td></tr>
<tr><td>cancelable</td><td>boolean</td><td>Used to indicate whether or not an event can have its default action prevented.</td></tr>
<tr><td>timeStamp</td><td>DOMTimeStamp</td><td>Used to specify the time (in milliseconds relative to the epoch) at which the event was created.</td></tr>
</tbody></table>
<table>
<caption>Event methods
</caption>
<tbody><tr><th>Name</th><th>Argument type</th><th>Argument name</th><th>Description</th></tr>
<tr><td>stopPropagation</td><td></td><td></td><td>To prevent further propagation of an event during event flow.</td></tr>
<tr><td>preventDefault</td><td></td><td></td><td>To cancel the event if it is cancelable, meaning that any default action normally taken by the implementation as a result of the event will not occur.</td></tr>
<tr><td rowspan="3">initEvent</td><td>DOMString</td><td>eventTypeArg</td><td>Specifies the event type.</td></tr>
<tr><td>boolean</td><td>canBubbleArg</td><td>Specifies whether or not the event can bubble.</td></tr>
<tr><td>boolean</td><td>cancelableArg</td><td>Specifies whether or not the event's default action can be prevented.</td></tr>
</tbody></table>

<h2>non-capturing group (?:)</h2>
<a href="https://stackoverflow.com/questions/3512471/what-is-a-non-capturing-group-what-does-do">non-capturing group (?:)</a>

<br>

<h2>5 JavaScript Web Scraping Libraries and Tools for nodeJs</h2>
Exploring <a href="http://www.prowebscraper.com/blog/50-best-open-source-web-crawlers/" target="_blank">web scraping libraries</a> and tools for JavaScript.
<blockquote>
<strong>1. Request</strong>
<strong>2. Cheerio</strong>
<strong>3. Osmosis</strong>
<strong>4. Puppeteer</strong>
<strong>5. Apify SDK</strong>
</blockquote>
<h3>1. Request (Aka HTTP Client) :</h3>
<a href="https://github.com/request/request" target="_blank">Request</a>
For example, if you want to pull down the contents of a page :
<code>  const request = require('request');

  request('http://stackabuse.com', function(err, res, body) {  
      console.log(body);
  });
</code>
<a href="https://stackabuse.com/the-node-js-request-module/" target="_blank">Quick start Guide with request</a>
<h3>2. Cheerio (Aka Parser) :</h3>
<a href="https://cheerio.js.org/" target="_blank">Cheerio</a>
<a href="https://hackernoon.com/cheerio-node-nodejs-tutorial-web-html-scraping-note-a4ceb37d9cbb" target="_blank">Web Scraping note (cheerio)</a>
<h3>3. Osmosis (Aka Parser) :</h3>
<a href="https://www.npmjs.com/package/osmosis" target="_blank">Osmosis</a>
<a href="http://shanefulmer.com/blog/node-osmosis-examples/" target="_blank">Using node-osmosis (with examples)</a>

<h3>4. Puppeteer (Aka Headless Chrome Browser for Automation) :</h3>
<a href="https://github.com/GoogleChrome/puppeteer" target="_blank">Puppeteer</a>
<a href="https://hackernoon.com/tips-and-tricks-for-web-scraping-with-puppeteer-ed391a63d952" target="_blank">Tips and Tricks for Web Scraping with Puppeteer</a>

<h3>5. Apify SDK (Aka The Complete Web Scraping Framework) :</h3>
<a href="https://github.com/apifytech/apify-js" target="_blank">Apify SDK</a>
It can be used either stand-alone in your own applications or in <a href="https://www.apify.com/docs/actor" target="_blank">actors</a> running on the <a href="https://www.apify.com/" target="_blank">Apify Cloud</a>.
<a href="https://sdk.apify.com/docs/examples/basiccrawler" target="_blank">Getting Started with Apify with Examples</a>

<h2>what is this "require?"</h2>

require() is not part of the standard JavaScript API. 

But in Node.js, it's a built-in function with a special purpose: to load modules.

Modules are a way to split an application into separate files instead of having all of your application in one file. 

This concept is also present in other languages with minor differences in syntax and behavior, like C's include, PHP's use, Python's import, and so on.

One big difference between Node.js modules and browser JavaScript is how one script's code is accessed from another script's code.

In browser JavaScript, scripts are added via the &lt;script&gt; element. 

When they execute, they all have direct access to the global scope, a "shared space" among all scripts. 

Any script can freely define/modify/remove/call anything on the global scope.

In Node.js, each module has its own scope. 

A module cannot directly access things defined in another module unless it chooses to expose them. 

To expose things from a module, they must be assigned to exports or module.exports. 

For a module to access another module's exports or module.exports, it must use require().

In your code, var pg = require('pg'); loads the pg module, a PostgreSQL client for Node.js. 

This allows your code to access functionality of the PostgreSQL client's APIs via the pg variable.

Why does it work in node but not in a webpage?

require(), module.exports and exports are APIs of a module system that is specific to Node.js. 

Browsers do not implement this module system.

Also, before I got it to work in node, I had to do npm install pg. 

What's that about?

NPM is a package repository service that hosts published JavaScript modules. 

npm install is a command that lets you download packages from their repository.

Where did it put it, and how does Javascript find it?

Node.js has very detailed documentation on how modules find other modules. 

But in a gist, it puts all the downloaded modules in node_modules in the directory where you ran npm install.

the request module to webscrap
  const request = require('request');
  request('http://stackabuse.com', function(err, res, body) {  
      console.log(body);
  });
<h2>javascript create a table</h2>

var table = document.getElementById("myTable");
var row = table.insertRow(0);
var cell1 = row.insertCell(0);
var cell2 = row.insertCell(1);
cell1.innerHTML = "NEW CELL1";
cell2.innerHTML = "NEW CELL2";

<a href="https://stackoverflow.com/questions/27594957/how-to-create-a-table-using-a-loop">create a table using a loop</a>
<br>
var table = document.createElement('table'), tr, td, row, cell;
for (row = 0; row < 10; row++) {
    tr = document.createElement('tr');
    for (cell = 0; cell < 22; cell++) {
        td = document.createElement('td');
        tr.appendChild(td);
        td.innerHTML = row * 22 + cell + 1;
    }
    table.appendChild(tr);
}
document.getElementById('container').appendChild(table);

create an empty row of 22 cells, clone it 10 times, and then add the numbers to the cells.

var table = document.createElement('table'),
    tr = document.createElement('tr'),
    cells, i;
for (i = 0; i < 22; i++) { // Create an empty row
    tr.appendChild(document.createElement('td'));
}
for (i = 0; i < 10; i++) { // Add 10 copies of it to the table
    table.appendChild(tr.cloneNode(true));
}
cells = table.getElementsByTagName('td'); // get all of the cells
for (i = 0; i < 220; i++) {               // number them
    cells[i].innerHTML = i + 1;
}
document.getElementById('container').appendChild(table);
And a third option: add the cells in a single loop, making a new row every 22 cells.

var table = document.createElement('table'), tr, td, i;
for (i = 0; i < 220; i++) { 
    if (i % 22 == 0) { // every 22nd cell (including the first)
        tr = table.appendChild(document.createElement('tr')); // add a new row
    }
    td = tr.appendChild(document.createElement('td'));
    td.innerHTML = i + 1;
}
document.getElementById('container').appendChild(table);
<a href="https://www.w3schools.com/jsref/met_document_createdocumentfragment.asp">HTML DOM createDocumentFragment() Method</a>

HTML DOM createDocumentFragment() Method

Example
Create a documentFragment node and append a child to it (a list item). 
Then, change the list item's node value and insert it as the last child of the list:

var d = document.createDocumentFragment();
d.appendChild(document.getElementsByTagName("LI")[0]);
d.childNodes[0].childNodes[0].nodeValue = "Milk";
document.getElementsByTagName("UL")[0].appendChild(d);

<a href="https://www.w3schools.com/jsref/coll_table_rows.asp">Table rows Collection</a>
<br>
<h2>javascript check keyboard arrow key</h2>
document.onkeydown = checkKey;

function checkKey(e) {
    e = e || window.event;
    if (e.keyCode == '38') {        // up arrow    }
    else if (e.keyCode == '40') {        // down arrow    }
    else if (e.keyCode == '37') {       // left arrow    }
    else if (e.keyCode == '39') {       // right arrow    }
}

function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return event.keyCode // special key
  }
}

<h2>Top 10 jQuery functions to Plain Old JavaScript</h2>
<a href="https://devkisslist.com/2019/06/29/top-10-jquery-functions-to-plain-old-javascript/">Top 10 jQuery functions</a>
<br>
<div><a href="#jQtopic-1" target="_self">1 $(document).ready(..)</a><br><a href="#jQtopic-2" target="_self">2) $(…).HTML()</a><br><a href="#jQtopic-3" target="_self">3) $(…).Append</a><br><a href="#jQtopic-4" target="_self">4) $(…).prepend()</a><br><a href="#jQtopic-5" target="_self">5) $(…).empty()</a><br><a href="#jQtopic-6" target="_self">6) $(…).Attr(name)</a><br><a href="#jQtopic-7" target="_self">7) $(…).val()</a><br><a href="#jQtopic-8" target="_self">8, 9) $(…).on() | $(…).off()</a><br><a href="#jQtopic-9" target="_self">10) $(…).toggle()</a><br><a href="#jQtopic-10" target="_self">Conclusion</a></center>
These are my top most commonly use jQuery functions converted to Plain Old JavaScript.
Sometimes I need to create a simple static HTML or landing page, and I don’t feel like bringing in any libraries or bloatware. 
For those cases I just use plain old JavaScript to get the job done, and honestly it feels good to know how things work.
So here is my top 10 list, I also use this as reference and now sharing with you.
If you like to follow along go to the GitHub page here, and feel free to contribute: https://github.com/omarld/jqueryToPlainJS
Before starting, the titles are the jQuery functions to be converted to plain old JavaScript. 
That will follow with a brief description of what it is supposed to do, followed by the converted JavaScript code with some additional notes.
<h3 id="jQtopic-1">1 $(document).ready(..)</h3>
Check that document has loaded and ready to execute your scripts.
let isLoaded = false;
let myOnLoadCallBack = function(){
    isLoaded = true;
    //my stuff here
}
document.addEventListener("DOMContentLoaded", myOnLoadCallBack());

document.addEventListener('readystatechange', (event) =&gt; {
    if (document.readyState === 'complete' &amp;&amp; !isLoaded) {
        myOnLoadCallBack();
    }
);
&nbsp;
Using <em>DOMContentLoaded</em> event listener, this is triggered when the DOM tree has been built but none of other resources have been loaded yet (ie styles, images). 
<em>DOMContentLoaded</em> also waits for any scripts to be loaded, if there are any <em>script</em> tags found in the HTML document.
There is catch when loading styles if there is a script tag after your styles. 
In this case it’s for styles to be loaded before the script, in case the script modifies any styles.
<em>DOMContentLoaded</em> is not supported by IE 8 or less. 
In case you have the bad luck of having to support IE 8, you should use <em>document.readyState</em>.
The different ready states are:
<ul>
<li><em>loading</em>       : document is loading</li>
<li><em>interactive</em> : document was fully read</li>
<li><em>complete</em>    : document was fully read and all resources (styles, images) are loaded too</li>
</ul>
<h3 id="jQtopic-2">2) $(…).HTML()</h3>
Find the value of an existing DOM element, or insert some content.
To find existing value, just reference the <em>innerHTML</em> property.
var content = document.querySelector("section#html div.content p.retrieve").innerHTML;
To insert some content, assign <em>innerHTML </em>to the new content which can contain HTML tags. 
Note, this will replace any existing content.
document.querySelector("section#html div.results p.sample").innerHTML = “&lt;p&gt;Starting a new paragraph&lt;/p&gt;”;
<h3 id="jQtopic-3">3) $(…).Append</h3>
Insert some HTML at the end of an existing element.
First we need to find/get the element where we want to insert our new content.
var appendEl = document.querySelector("section#append div.content div.results");
Next create the element we want to insert.
var childEl = document.createElement("div");
childEl.innerHTML = "&lt;p&gt;New &lt;strong&gt;child&lt;/strong&gt; Content!&lt;/p&gt;"
Lastly, insert the element.
//appending
appendEl.appendChild(childEl);

Sure this took three steps to get this done, but we can simplify a bit.<br>
First lets create the new element.
var childEl = document.createElement("div");
childEl.innerHTML = "&lt;p&gt;New &lt;strong&gt;child&lt;/strong&gt; Content!&lt;/p&gt;"
Next let’s find and insert new element in one line.
document.querySelector("section#append div.content div.results").appendChild(childEl);
If you want to simplify this further or if you find yourself doing this a lot, you can create a wrapper function to do this.
<h3 id="jQtopic-4">4) $(…).prepend()</h3>
Very similar to <em>append</em> above, the only difference is that this inserts at the beginning of the element. 
For this we will jump into the simplified solution.
Create new element to insert.
var newDiv = document.createElement("div");
var textNode = document.createTextNode("new content to inserted!");
newDiv.appendChild(textNode);
Find existing element and insert new element.
document.querySelector("section#prepend div.content p#existing").insertBefore(newDiv, prependEl.firstChild);
<h3 id="jQtopic-5">5) $(…).empty()</h3>
Empty or clear out a DOM element. 
Initially you might think, lets just assign <em>innerHTML</em> property to an empty string. 
This would be half right, but then what happens if the target element has child DOM elements? We’ll get to that, it is also simple.
First let’s start by clearing out content of an existing element.
document.getElementById("empty-content").innerHtml = “”;
Okay, so now how do we do all inner DOM elements? For that, let’s clear existing content and then lets remove any child DOM elements in a loop.
var content = document.getElementById("empty-content");
content.innerHtml = "";
while(content.firstChild){
    content.removeChild(content.firstChild);
}
The while loop iterates until there are no more children to remove.
<h3 id="jQtopic-6">6) $(…).Attr(name)</h3>
Get the attribute value of an existing DOM element, or set attribute. 
The important point to remember about this, is that not all DOM elements have the same attributes. 
For example a check box vs a button (a button would not have the <em>checked</em> attribute).
Let’s start by getting the checked attribute of a check box.
let isChecked = document.querySelector("div#attributes input#my-check-box").getAttribute("checked");
Now let’s see how we can set that same attribute.
var el = document.querySelector("div#attributes input#my-check-box");
We can access the JavaScript property to change its state.
el.checked = true;
You might have noticed that I referred to the <em>checked</em> key as a JavaScript property. 
What is the difference between element attribute and JavaScript property? In simple terms, properties are JavaScript inherited keys from element attributes. 
This means you can access the DOM elements attributes as JavaScript object properties.
Here are a few important points to know about properties vs attributes.
<ul>
<li>Properties are JavaScript inherited values from attributes (ie. 
class vs className)</li>
<li>Element properties are created from attributes only if they are standard. 
So if you introduced a custom attribute, it won’t be part of the object properties.</li>
<li>Depending on the element the attributes available would be different (ie checked box vs button)</li>
</ul>
<h3 id="jQtopic-7">7) $(…).val()</h3>
Get the value of the matched DOM element. 
This is also a simple one, let’s start with getting the value of existing element.
To make these command clear, I have split them out. 
Although this can be done in one line.
var content = document.querySelector("#input");
var lnameValue = content.querySelector("input[name='lname']").value;
Setting value is just as simple, and can also be done in one line.
content.querySelector("input[name='fname']").value = "Some random value"
;
Similar to using <em>innerHTML</em> to set content, this also overrides any values the element currently has.
<h3 id="jQtopic-8">8, 9) $(…).on() | $(…).off()</h3>
To add or remove events from an element use either <em>on()</em> or <em>off()</em> accordingly.
Adding event handler.
document.getElementById("my-button").addEventListener("click", function(evt){
    //my custom code here
});
Removing event handler, here we need to do extra checks for browser supported properties.
var toggleFunction = function(){...}
if (toggleBtn.removeEventListener) { // For all major browsers, except IE 8 and earlier
    toggleBtn.removeEventListener("click", toggleFunction);
} else if (toggleBtn.detachEvent) { // For IE 8 and earlier versions
    toggleBtn.detachEvent("click", toggleFunction)
}
Here are a few things to note when adding or removing events handlers.
<ul>
<li>Element must exist by the time code is instantiated or event won’t be attached.</li>
<li>When removing event listener, the function reference has to be the same.</li>
<li>Inline anonymous function will not work, since reference is different.</li>
<li>Unlike jQuery, when removing event handlers you have to specify which event you want to remove. 
In jQuery no arguments would remove all, this case has to be handled manually.</li>
</ul>
One way to remove all event handlers without being explicit, is to clone the element and replace it. 
This will also get rid of any attached events to child elements.
Removing all elements.
var currEl = document.getElementById("button");
var cloneEl= currEl.cloneNode(true);
currEl.parentNode.replaceChild(cloneEl, currEl);
<h3 id="jQtopic-9">10) $(…).toggle()</h3>
Toggle display on an element, this can be done a couple of ways. 
Each approach has has different results. 
You need to decide which behavior you want.
First way is to change the elements display attribute to none to remove element from the DOM, and set it to <em>initial</em> to set it back. 
Important point here is that this will impact your layout, and shift elements if you are toggling display.
Here we are toggling display on an image element by directly accessing the elements style property.
if(imgEl.style.display &amp;&amp; imgEl.style.display === "none"){
    imgEl.style.display = "initial";
} else {
    imgEl.style.display = "none";
}
Second approach is to change the elements visibility, which will hide the element and retain layout.
if(imgEl.style.visibility &amp;&amp; imgEl.style.visibility === "hidden"){
    imgEl.style.visibility = "initial";
} else {
    imgEl.style.visibility = "hidden";
};
<h3 id="jQtopic-10">Conclusion</h3>
If you have been using libraries and JavaScript frameworks, it is easy to lose sight on how simple some of implementations are. 
But most of all, you also lose sight into some core basic understanding of how the DOM works. 
Having a good understanding the DOM can serve you well not just on design but also on debugging issues.
Those were just some of my most often used functions when I am trying to keep things simple. 
Now I am sharing it with you if ever feel like just writing your own rather than adding bloat-ware to your application.
<h2>Some javascript Essays</h2>
<a href="http://slicker.me/fractals/animate.htm">Fractal animation</a>
<br>
<a href="https://github.com/oliver-moran/jimp">JavaScript Image Manipulation Program</a>
<br>
<a href="https://devkisslist.com/2019/06/29/top-10-jquery-functions-to-plain-old-javascript/">Top 10 jQuery functions to Plain Old JavaScript</a>
<br>
<a href="https://www.framer.com/motion/">Framer Motion, React library to power production-ready animations</a>
<br>
<a href="https://jrsinclair.com/articles/2019/what-is-a-higher-order-function-and-why-should-anyone-care/">HIGHER-ORDER FUNCTIONS</a>
<br>
<a href="https://yomguithereal.github.io/posts/lru-cache">IMPLEMENTING AN EFFICIENT LRU CACHE IN JAVASCRIPT</a>
<br>
<a href="https://www.freecodecamp.org/news/how-to-master-async-await-with-this-real-world-example-19107e7558ad/">How To Master Async/Await With This Real World Example</a>
<br>
<a href="https://github.com/trekhleb/javascript-algorithms">JavaScript Algorithms and Data Structures</a>
<br>
<a href="https://tsh.io/blog/new-node-js-features/">New Node.js 12 features will see it disrupt AI, IoT and more surprising areas</a>
<br>
<a href="https://nodesource.com/blog/improve-javascript-performance">12 Tips for Improving JavaScript Performance</a>
<br>
<br>
<h2>The XMLHttpRequest Object</h2>

All modern browsers have a built-in XMLHttpRequest object to 
request data from a server. 

All major browsers have a built-in XML parser to access and manipulate XML.

<h2>The XMLHttpRequest Object</h2>
The XMLHttpRequest object can be used to request data from a web server.
The XMLHttpRequest object is <b>a developer's dream</b>, because you can:
  <li>Update a web page without reloading the page</li>
  <li>Request data from a server - after the page has loaded </li>
  <li>Receive data from a server - after the page has loaded</li>
  <li>Send data to a server - in the background</li>

<h2>XMLHttpRequest Example</h2>
When you type a character in the input field below, an XMLHttpRequest is sent to the server,
and some name suggestions are returned (from the server):
<h3>Example</h3>
<b>Start typing a name in the input field below:</b>
&lt;form action=""> 
 Name: &lt;input type="text" id="txt1" onkeyup="showHint(this.value)" size="20">
&lt;/form>
Suggestions: &lt;span id="txtHint">&lt;/span> 

<h2>Sending an XMLHttpRequest</h2>
All modern browsers have a built-in XMLHttpRequest object.
A common JavaScript syntax for using it looks much like this:

<h3>Example</h3>
var xhttp = new XMLHttpRequest();<br>xhttp.onreadystatechange = function() {<br>
    if (this.readyState == 4 &amp;&amp; this.status == 200) {<br>
       // Action to be performed when the 
 document is read;<br>
    }<br>};<br>
xhttp.open(&quot;GET&quot;, &quot;<em>filename</em>&quot;, true);<br>
xhttp.send(); <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest" target="_blank">Try it Yourself &raquo;</a>

<h2>Creating an XMLHttpRequest Object</h2>
The first line in the example above creates an XMLHttpRequest object:

 var xhttp = new XMLHttpRequest();

<h2>The onreadystatechange Event</h2>
The <strong>readyState</strong> property holds the status of the XMLHttpRequest.
The <strong>onreadystatechange</strong> event is triggered every time the readyState changes.
During a server request, the readyState changes from 0 to 4:
 0: request not initialized <br>
    1: server connection established<br>
    2: request received <br>
    3: processing request <br>
    4: request finished and response is ready

In the onreadystatechange property, specify a function to be executed when 
the readyState changes:

 xhttp.onreadystatechange = function()
When readyState is 4 and status is 200, the response is ready:

if (this.readyState == 4 &amp;&amp; this.status == 200)

<h2>XMLHttpRequest Properties and Methods</h2>

<table> 
  <tr>
    <th style="width:28%">Method</th>
    <th>Description</th>
  </tr>  
  <tr>
    <td>new XMLHttpRequest()</td>
    <td>Creates a new XMLHttpRequest object</td>
  </tr>
  <tr>
    <td>open(<i>method, url, async</i>)</td>
    <td>Specifies the type of request<br>
    <i>method</i>: the type of request: GET or POST<br>
    <i>url</i>: the file location<br>
    <i>async</i>: true (asynchronous) or false (synchronous)</td>
  </tr>
  <tr>
    <td>send()</td>
    <td>Sends a request to the server (used for GET)</td>
  </tr>
  <tr>
    <td>send(<i>string</i>)</td>
    <td>Sends a request string to the server (used for POST)</td>
  </tr>
  <tr>
    <td>onreadystatechange</td>
    <td>A function to be called when the readyState property changes</td>
  </tr>
  <tr>
    <td>readyState</td>
    <td>The status of the XMLHttpRequest<br>
    0: request not initialized <br>
    1: server connection established<br>
    2: request received <br>
    3: processing request <br>
    4: request finished and response is ready</td>
  </tr>
  <tr>
    <td>status</td>
    <td>200: OK<br>
    404: Page not found</td>
  </tr>
  <tr>
    <td>responseText</td>
    <td>The response data as a string</td>
  </tr>
  <tr>
    <td>responseXML</td>
    <td>The response data as XML data</td>
  </tr>

 </table>

<h2>Access Across Domains</h2>
For security reasons, modern browsers do not allow access across domains.
This means that both the web page and the XML file it tries to load, must be located on the same server.
The examples on W3Schools all open XML files located on the W3Schools domain.
If you want to use the example above on one of your own web pages,
the XML files you load must be located on your own server.

<h2>The responseText Property</h2>
The responseText property returns the response as a string.
If you want to use the response as a text string, use the responseText 
property:

<h3>Example</h3>
 document.getElementById(&quot;demo&quot;).innerHTML = xmlhttp.responseText; <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_responsetext" target="_blank">Try it Yourself &raquo;</a>
<h2>The responseXML Property</h2>
The responseXML property returns the response as an XML DOM object.
If you want to use the response as an XML DOM object, use the responseXML property:

<h3>Example</h3>
Request the file <a target="_blank" href="cd_catalog.xml">cd_catalog.xml</a> and 
use the response as an XML DOM object:
xmlDoc = xmlhttp.responseXML;<br>
 txt = &quot;&quot;;<br>
x = xmlDoc.getElementsByTagName(&quot;ARTIST&quot;);<br>
for (i = 0; i &lt; x.length; i++) {<br>
    txt += x[i].childNodes[0].nodeValue + &quot;&lt;br&gt;&quot;;<br>
 }<br>
document.getElementById(&quot;demo&quot;).innerHTML = txt;<a target="_blank" class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_responsexml">Try it Yourself &raquo;</a>

<h2>GET or POST?</h2>
GET is simpler and faster than POST, and can be used in most cases.
However, always use POST requests when:
<ul>
  <li>A cached file is not an option (update a file or database on the server)</li>
  <li>Sending a large amount of data to the server (POST has no size limitations)</li>
  <li>Sending user input (which can contain unknown characters), POST is more robust and secure than GET</li>
</ul>
<h2>The url - A File On a Server</h2>
The url parameter of the open() method, is an address to a file on a server:
xmlhttp.open(&quot;GET&quot;, &quot;xmlhttp_info.txt&quot;, true);
The file can be any kind of file, like .txt and 
.xml, or server scripting files like .asp and .php (which can perform  
actions on the server before sending the response back).

<h2>Asynchronous - True or False?</h2>
To send the request asynchronously, the async parameter of the open() 
method has to be set to true:

xmlhttp.open(&quot;GET&quot;, &quot;xmlhttp_info.txt&quot;, true);

Sending asynchronously requests is a huge improvement for web developers. 
Many of the tasks  
performed on the server are very time consuming.
By sending asynchronously, the 
JavaScript does not have to wait for the server response, but can instead:
<ul>
  <li>execute other scripts while waiting for server response</li>
  <li>deal with the response when the response is ready</li>
</ul>

<h2>Async = true</h2>

When using async = true, specify a function to execute when the response is ready in the onreadystatechange event:

<h3>Example</h3>
xmlhttp.onreadystatechange = function() {<br>
    if (this.readyState == 4 &amp;&amp; this.status == 200) {<br>
       document.getElementById(&quot;demo&quot;).innerHTML = this.responseText;<br>
    }<br>
 };<br>
xmlhttp.open(&quot;GET&quot;, &quot;xmlhttp_info.txt&quot;, true);<br>
xmlhttp.send(); <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest" target="_blank">Try it Yourself &raquo;</a>

<h2>Async = false</h2>
To use async = false, change the third parameter in the open() method to false:

xmlhttp.open(&quot;GET&quot;, &quot;xmlhttp_info.txt&quot;, false);

Using async = false is not recommended, but for a few small requests this can be ok.
Remember that the JavaScript will NOT continue to execute, 
until the server response is ready. 
If the server is busy or slow, the 
application will hang or stop.
<b>Note:</b> When you use async = false, do NOT write an onreadystatechange 
function - just put the code after the send() statement:

<h3>Example</h3>
xmlhttp.open(&quot;GET&quot;, &quot;xmlhttp_info.txt&quot;, false);<br>
xmlhttp.send();<br>
document.getElementById(&quot;demo&quot;).innerHTML = xmlhttp.responseText;<a target="_blank" class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_asyncfalse">Try it Yourself &raquo;</a>
<h2>XML Parser</h2>
All modern browsers have a built-in XML parser. 

The XML Document Object Model (the XML DOM) contains a lot of methods to access 
and edit XML.
However, before an XML document can be accessed, it must be 
loaded into an XML DOM object.
An XML parser can read plain text and convert it into an XML DOM object.

<h2>XML DOM Remove Nodes</h2>
<a href="https://www.w3schools.com/xml/dom_nodes_remove.asp" class="whitebut ">XML DOM Remove Nodes</a>

The removeChild() method removes a specified node.

The removeAttribute() method removes a specified attribute.
<h2>Parsing a Text String</h2>

This example parses a text string into an XML DOM object, and  
extracts the info from it with JavaScript:
<h3>Example</h3>
 &lt;html&gt;<br>&lt;body&gt;<br><br>&lt;p id=&quot;demo&quot;&gt;&lt;/p&gt;<br><br>&lt;script&gt;<br>var text, parser, 
 xmlDoc;<br><br>text = &quot;&lt;bookstore&gt;&lt;book&gt;&quot; +<br>&quot;&lt;title&gt;Everyday 
 Italian&lt;/title&gt;&quot; +<br>&quot;&lt;author&gt;Giada De Laurentiis&lt;/author&gt;&quot; +<br>
 &quot;&lt;year&gt;2005&lt;/year&gt;&quot; +<br>&quot;&lt;/book&gt;&lt;/bookstore&gt;&quot;;<br><br>parser = new DOMParser();<br>
 xmlDoc = parser.parseFromString(text,&quot;text/xml&quot;);<br><br>
 document.getElementById(&quot;demo&quot;).innerHTML =<br>xmlDoc.getElementsByTagName(&quot;title&quot;)[0].childNodes[0].nodeValue;<br>
 &lt;/script&gt;<br><br>&lt;/body&gt;<br>&lt;/html&gt;
 <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_loadxmltext" target="_blank">Try it Yourself &raquo;</a>
<h2>Old Browsers (IE5 and IE6)</h2>
Old versions of Internet Explorer (IE5 and IE6) do not support the 
XMLHttpRequest object.
To handle IE5 and IE6,  
check if the browser supports the XMLHttpRequest object, or else create an ActiveXObject:

<h3>Example</h3>
if (window.XMLHttpRequest) {<br>    // code for modern browsers<br>
    xmlhttp = new XMLHttpRequest();<br>
 }
else {<br>    // code for old IE browsers<br>
    xmlhttp = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);<br>
 } <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_ie" target="_blank">Try it Yourself &raquo;</a>

Old versions of Internet Explorer (IE5 and IE6) do not support the DOMParser object.
To handle IE5 and IE6,  
check if the browser supports the DOMParser object, or else create an ActiveXObject:

<h3>Example</h3>
if (window.DOMParser) {<br>  // code for modern browsers<br>
  parser = new DOMParser();<br>
  xmlDoc = parser.parseFromString(text,&quot;text/xml&quot;);<br>
}
else {<br>
  // code for old IE browsers<br>xmlDoc = new ActiveXObject(&quot;Microsoft.XMLDOM&quot;);<br>
  xmlDoc.async = false;<br>
  xmlDoc.loadXML(text); <br>
} 
 <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_loadxmltext_ie" target="_blank">Try it Yourself &raquo;</a>
<h3>More Examples</h3>
<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_header">Retrieve header information with getAllResponseHeaders()</a>
Retrieve header information of a resource (file).

<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_lastmodified">Retrieve specific header information with getResponseHeader()</a>
Retrieve specific header information of a resource (file).

<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_suggest">Retrieve the content of an ASP file</a>
How a web page can communicate with a web server while a user type characters in an input field.

<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_database">Retrieve content from a database</a>
How a web page can fetch information from a database with the XMLHttpRequest 
object.

<a target="_blank" href="https://www.w3schools.com/xml/tryit.asp?filename=try_dom_xmlhttprequest_xml">Retrieve the content of an XML file</a>
Create an XMLHttpRequest to retrieve data from an XML file and display the data in an HTML table.

<h2>ActiveXObject</h2>
ActiveXObject is non-standard and only supported by Internet Explorer on Windows.

<h2>MySQL Database</h2>
To be able to experiment with the code examples, you should have MySQL installed 
on your computer.
You can download a free MySQL database at <a href="https://www.mysql.com/downloads/" target="_blank">https://www.mysql.com/downloads/</a>.
<h3>Install MySQL Driver</h3>
Once you have MySQL up and running on your computer, you can access it by 
using Node.js.
To access a MySQL database with Node.js, you need a MySQL driver. 
This 
tutorial will use the &quot;mysql&quot; module, downloaded from NPM.
To download and install the &quot;mysql&quot; module, open the Command Terminal and execute the following:
C:\Users\<em>Your Name</em>&gt;npm install mysql
Now you have downloaded and installed a mysql database driver.
Node.js can use this module to manipulate the MySQL database:

  var mysql = require('mysql');
<h3>Create Connection</h3>
Start by creating a connection to the database.
Use the username and password from your MySQL database.

demo_db_connection.js
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;<br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>});<br>
<a target="_blank" class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/nodejs/shownodejs_cmd.asp?filename=demo_db_connection">Run example &raquo;</a>
Save the code above in a file called &quot;demo_db_connection.js&quot; and run the file:

Run "demo_db_connection.js"

C:\Users\<em>Your Name</em>&gt;node demo_db_connection.js
Which will give you this result:
Connected!
Now you can start querying the database using SQL statements.
<h3>Query a Database</h3>
Use SQL statements to read from (or write to) a MySQL database. 
This 
is also called &quot;to query&quot; the database.
The connection object created in the example above, has a method for querying the database:

  con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>
  <strong>&nbsp;
  con.query(</strong><em><strong>sql</strong></em><strong>, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp; &nbsp; console.log(&quot;Result: 
  &quot; + result);<br>&nbsp; });<br></strong>});
The query method takes an sql statements as a parameter and returns the 
result.
Learn how to read, write, delete, and update a database in the next chapters.
Read more about SQL statements in our <a href="/sql/default.asp">SQL Tutorial</a>.

<h2>AJAX Database Example</h2>
AJAX can be used for interactive communication with a database.
The following example will demonstrate how a web page can fetch 
information from a database with AJAX:
<h3>Example</h3>
&lt;form action=""> 
&lt;select name="customers" onchange="showCustomer(this.value)">
&lt;option value="">Select a customer:&lt;/option>
&lt;option value="ALFKI">Alfreds Futterkiste&lt;/option>
&lt;option value="NORTS ">North/South&lt;/option>
&lt;option value="WOLZA">Wolski Zajazd&lt;/option>
&lt;/select>
&lt;/form>
<br>
Customer info will be listed here...
<a target="_blank" href="https://www.w3schools.com/jstryit.asp?filename=tryjs_ajax_database" class="w3-btn">Try it Yourself &raquo;</a>
<h3>Example Explained - The showCustomer() Function</h3>
When a user selects a customer in the dropdown list above, a function called <code>showCustomer()</code> is executed. 
The 
function is triggered by the <code>onchange</code> event: 
<h3>showCustomer</h3>
 function showCustomer(str) {<br>&nbsp; var xhttp; <br>&nbsp; if (str == &quot;&quot;) {<br>&nbsp;&nbsp;&nbsp; 
 document.getElementById(&quot;txtHint&quot;).innerHTML = &quot;&quot;;<br>&nbsp;&nbsp;&nbsp; 
 return;<br>&nbsp; }<br>&nbsp; xhttp = new XMLHttpRequest();<br>&nbsp; 
 xhttp.onreadystatechange = function() {<br>&nbsp;&nbsp;&nbsp; if (this.readyState 
 == 4 &amp;&amp; this.status == 200) {<br>&nbsp;&nbsp;&nbsp; document.getElementById(&quot;txtHint&quot;).innerHTML 
 = this.responseText;<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp; };<br>&nbsp; xhttp.open(&quot;GET&quot;, 
 &quot;getcustomer.php?q=&quot;+str, true);<br>&nbsp; xhttp.send();<br>}
The <code>showCustomer()</code> function does the following:
  <li>Check if a customer is selected</li>
  <li>Create an XMLHttpRequest object</li>
  <li>Create the function to be executed when the server response is ready</li>
  <li>Send the request off to a file on the server</li>
  <li>Notice that a parameter (q) is added to the URL (with the content of the dropdown list)</li>

<h2>The AJAX Server Page</h2>

The page on the server called by the JavaScript above is a PHP file called &quot;getcustomer.php&quot;.
The source code in &quot;getcustomer.php&quot; runs a query against a database, and returns the result in an HTML 
table:

  &lt;?php<br>$mysqli = new mysqli(&quot;<em>servername</em>&quot;, &quot;<em>username</em>&quot;, 
  &quot;<em>password</em>&quot;, &quot;<em>dbname</em>&quot;);<br>if($mysqli-&gt;connect_error) {<br>&nbsp; 
  exit('Could not connect');<br>}<br><br>$sql = &quot;SELECT customerid, companyname, 
  contactname, address, city, postalcode, country<br>FROM customers WHERE 
  customerid = ?&quot;;<br><br>$stmt = $mysqli-&gt;prepare($sql);<br>
  $stmt-&gt;bind_param(&quot;s&quot;, $_GET['q']);<br>
  $stmt-&gt;execute();<br>$stmt-&gt;store_result();<br>$stmt-&gt;bind_result($cid, 
  $cname, $name, $adr, $city, $pcode, $country);<br>$stmt-&gt;fetch();<br>$stmt-&gt;close();<br>
  <br>echo &quot;&lt;table&gt;&quot;;<br>echo &quot;&lt;tr&gt;&quot;;<br>echo &quot;&lt;th&gt;CustomerID&lt;/th&gt;&quot;;<br>echo 
  &quot;&lt;td&gt;&quot; . 
$cid . 
&quot;&lt;/td&gt;&quot;;<br>echo &quot;&lt;th&gt;CompanyName&lt;/th&gt;&quot;;<br>echo &quot;&lt;td&gt;&quot; . 
$cname 
  . 
&quot;&lt;/td&gt;&quot;;<br>echo &quot;&lt;th&gt;ContactName&lt;/th&gt;&quot;;<br>echo &quot;&lt;td&gt;&quot; . 
$name . 
&quot;&lt;/td&gt;&quot;;<br>
  echo &quot;&lt;th&gt;Address&lt;/th&gt;&quot;;<br>echo &quot;&lt;td&gt;&quot; . 

  $adr . 
&quot;&lt;/td&gt;&quot;;<br>echo &quot;&lt;th&gt;City&lt;/th&gt;&quot;;<br>
  echo &quot;&lt;td&gt;&quot; . 
$city . 
&quot;&lt;/td&gt;&quot;;<br>echo &quot;&lt;th&gt;PostalCode&lt;/th&gt;&quot;;<br>echo &quot;&lt;td&gt;&quot; . 

  $pcode . 
&quot;&lt;/td&gt;&quot;;<br>echo &quot;&lt;th&gt;Country&lt;/th&gt;&quot;;<br>echo &quot;&lt;td&gt;&quot; . 
$country . 

  &quot;&lt;/td&gt;&quot;;<br>echo &quot;&lt;/tr&gt;&quot;;<br>echo &quot;&lt;/table&gt;&quot;;<br>?&gt;

<br>

<h2>ES2018 Features</h2>
<div id="ES2018toc" class="toc"><a href="#ES2018topic-0" target="_self">The Rest/Spread Properties</a>
<a href="#ES2018topic-1" target="_self">Asynchronous Iteration</a>
<a href="#ES2018topic-2" target="_self">Promise.prototype.finally</a>
<a href="#ES2018topic-3" target="_self">New RegExp Features</a>
<a href="#ES2018topic-4" target="_self">Template Literal Revision</a>
<a href="#ES2018topic-5" target="_self">Wrapping up</a>
</div>
The ninth edition of the ECMAScript standard, officially known as ECMAScript 2018 (or ES2018 for short), was released in June 2018. 
Starting with ES2016, new versions of ECMAScript specifications are released yearly rather than every several years and add fewer features than major editions used to. 
The newest edition of the standard continues the yearly release cycle by adding four new <code>RegExp</code> features, rest/spread properties, asynchronous iteration, and <code>Promise.prototype.finally</code>. 
Additionally, ES2018 drops the syntax restriction of escape sequences from tagged templates.

These new changes are explained in the subsections that follow.

<h3 id="ES2018topic-0">The Rest/Spread Properties</h3>
One of the most interesting features added to ES2015 was the spread operator. 
This operator makes copying and merging arrays a lot simpler. 
Rather than calling the <code>concat()</code> or <code>slice()</code> method, you could use the <code>...</code> operator:

<code>const arr1 = [10, 20, 30];

// make a copy of arr1
const copy = [...arr1];

console.log(copy);    // → [10, 20, 30]

const arr2 = [40, 50];

// merge arr2 with arr1
const merge = [...arr1, ...arr2];

console.log(merge);    // → [10, 20, 30, 40, 50]</code>

The spread operator also comes in handy in situations where an array must be passed in as separate arguments to a function. 
For example:

<code>const arr = [10, 20, 30]

// equivalent to
// console.log(Math.max(10, 20, 30));
console.log(Math.max(...arr));    // → 30</code>

ES2018 further expands this syntax by adding spread properties to object literals. 
With the spread properties you can copy own enumerable properties of an object onto a new object. 
Consider the following example:

<code>const obj1 = {
  a: 10,
  b: 20
};

const obj2 = {
  ...obj1,
  c: 30
};

console.log(obj2);    // → {a: 10, b: 20, c: 30}</code>

In this code, the <code>...</code> operator is used to retrieve the properties of <code>obj1</code> and assign them to <code>obj2</code>. 
Prior to ES2018, attempting to do so would throw an error. 
If there are multiple properties with the same name, the property that comes last will be used:

<code>const obj1 = {
  a: 10,
  b: 20
};

const obj2 = {
  ...obj1,
  a: 30
};

console.log(obj2);    // → {a: 30, b: 20}</code>

Spread properties also provide a new way to merge two or more objects, which can be used as an alternative to the <code>Object.assign()</code> method:

<code>const obj1 = {a: 10};
const obj2 = {b: 20};
const obj3 = {c: 30};

// ES2018
console.log({...obj1, ...obj2, ...obj3});    // → {a: 10, b: 20, c: 30}

// ES2015
console.log(Object.assign({}, obj1, obj2, obj3));    // → {a: 10, b: 20, c: 30}</code>

Note, however, that spread properties do not always produce the same result as <code>Object.assign()</code>. 
Consider the following code:

<code>Object.defineProperty(Object.prototype, 'a', {
  set(value) {
    console.log('set called!');
  }
});

const obj = {a: 10};

console.log({...obj});    
// → {a: 10}

console.log(Object.assign({}, obj));    
// → set called!
// → {}</code>

In this code, the <code>Object.assign()</code> method executes the inherited setter property. 
Conversely, the spread properties simply ignore the setter.

It's important to remember that spread properties only copy enumerable properties. 
In the following example, the <code>type</code> property won’t show up in the copied object because its <code>enumerable</code> attribute is set to <code>false</code>:

<code>const car = {
  color: 'blue'
};

Object.defineProperty(car, 'type', {
  value: 'coupe',
  enumerable: false
});

console.log({...car});    // → {color: "blue"}</code>

Inherited properties are ignored even if they are enumerable:

<code>const car = {
  color: 'blue'
};

const car2 = Object.create(car, {
  type: {
    value: 'coupe',
    enumerable: true,
  }
});

console.log(car2.color);                      // → blue
console.log(car2.hasOwnProperty('color'));    // → false

console.log(car2.type);                       // → coupe
console.log(car2.hasOwnProperty('type'));     // → true

console.log({...car2});                       // → {type: "coupe"}</code>

In this code, <code>car2</code> inherits the <code>color</code> property from <code>car</code>. 
Because spread properties only copy the own properties of an object, <code>color</code> is not included in the return value.

Keep in mind that spread properties can only make a shallow copy of an object. 
If a property holds an object, only the reference to the object will be copied:

<code>const obj = {x: {y: 10}};
const copy1 = {...obj};    
const copy2 = {...obj}; 

console.log(copy1.x === copy2.x);    // → true</code>

The <code>x</code> property in <code>copy1</code> refers to the same object in memory that <code>x</code> in <code>copy2</code> refers to, so the strict equality operator returns <code>true</code>.

Another useful feature added to ES2015 was rest parameters, which enabled JavaScript programmers to use <code>...</code> to represent values as an array. 
For example:

<code>const arr = [10, 20, 30];
const [x, ...rest] = arr;

console.log(x);       // → 10
console.log(rest);    // → [20, 30]</code>

Here, the first item in <code>arr</code> is assigned to <code>x</code>, and remaining elements are assigned to the <code>rest</code> variable. 
This pattern, called array destructuring, became so popular that the Ecma Technical Committee decided to bring similar functionality to objects:

<code>const obj = {
  a: 10,
  b: 20,
  c: 30
};

const {a, ...rest} = obj;

console.log(a);       // → 10
console.log(rest);    // → {b: 20, c: 30}</code>

This code uses the rest properties in a destructuring assignment to copy the remaining own enumerable properties into a new object. 
Note that rest properties must always appear at the end of the object, otherwise an error is thrown:

<code>const obj = {
  a: 10,
  b: 20,
  c: 30
};

const {...rest, a} = obj;    // → SyntaxError: Rest element must be last element</code>

Also keep in mind that using multiple rest syntaxes in an object causes an error unless they are nested:

<code>const obj = {
  a: 10,
  b: {
    x: 20,
    y: 30,
    z: 40
  }
};

const {b: {x, ...rest1}, ...rest2} = obj;    // no error

const {...rest, ...rest2} = obj;    // → SyntaxError: Rest element must be last element</code>


<h3 id="ES2018topic-1">Asynchronous Iteration</h3>
Iterating over a collection of data is an important part of programming. 
Prior to ES2015, JavaScript provided statements such as <code>for</code>, <code>for...in</code>, and <code>while</code>, and methods such as <code>map()</code>, <code>filter()</code>, and <code>forEach()</code> for this purpose. 
To enable programmers to process the elements in a collection one at a time, ES2015 introduced the iterator interface.

An object is iterable if it has a <code>Symbol.iterator</code> property. 
In ES2015, strings and collections objects such as <code>Set</code>, <code>Map</code>, and <code>Array</code> come with a <code>Symbol.iterator</code> property and thus are iterable. 
The following code gives an example of how to access the elements of an iterable one at a time:

<code>const arr = [10, 20, 30];
const iterator = arr[Symbol.iterator]();
  
console.log(iterator.next());    // → {value: 10, done: false}
console.log(iterator.next());    // → {value: 20, done: false}
console.log(iterator.next());    // → {value: 30, done: false}
console.log(iterator.next());    // → {value: undefined, done: true}</code>

<code>Symbol.iterator</code> is a well-known symbol specifying a function that returns an iterator. 
The primary way to interact with an iterator is the <code>next()</code> method. 
This method returns an object with two properties: <code>value</code> and <code>done</code>. 
The <code>value</code> property contains the value of the next element in the collection. 
The <code>done</code> property contains either <code>true</code> or <code>false</code> denoting whether or not the end of the collection has reached.

By default, a plain object is not iterable, but it can become iterable if you define a <code>Symbol.iterator</code> property on it, as in this example:

<code>const collection = {
  a: 10,
  b: 20,
  c: 30,
  [Symbol.iterator]() {
    const values = Object.keys(this);
    let i = 0;
    return {
      next: () =&amp;gt; {
        return {
          value: this[values[i++]],
          done: i &amp;gt; values.length
        }
      }
    };
  }
};

const iterator = collection[Symbol.iterator]();
  
console.log(iterator.next());    // → {value: 10, done: false}
console.log(iterator.next());    // → {value: 20, done: false}
console.log(iterator.next());    // → {value: 30, done: false}
console.log(iterator.next());    // → {value: undefined, done: true}</code>

This object is iterable because it defines a <code>Symbol.iterator</code> property. 
The iterator uses the <code>Object.keys()</code> method to get an array of the object's property names and then assigns it to the <code>values</code> constant. 
It also defines a counter variable and gives it an initial value of 0. 
When the iterator is executed it returns an object that contains a <code>next()</code> method. 
Each time the <code>next()</code> method is called, it returns a <code>{value, done}</code> pair, with <code>value</code> holding the next element in the collection and <code>done</code> holding a Boolean indicating if the iterator has reached the need of the collection.

While this code works perfectly, it’s unnecessarily complicated. 
Fortunately, using a generator function can considerably simplify the process:

<code>const collection = {
  a: 10,
  b: 20,
  c: 30,
  [Symbol.iterator]: function * () {
    for (let key in this) {
      yield this[key];
    }
  }
};

const iterator = collection[Symbol.iterator]();
  
console.log(iterator.next());    // → {value: 10, done: false}
console.log(iterator.next());    // → {value: 20, done: false}
console.log(iterator.next());    // → {value: 30, done: false}
console.log(iterator.next());    // → {value: undefined, done: true}</code>

Inside this generator, a <code>for...in</code> loop is used to enumerate over the collection and yield the value of each property. 
The result is exactly the same as the previous example, but it’s greatly shorter.

A downside of iterators is that they are not suitable for representing asynchronous data sources. 
ES2018’s solution to remedy that is asynchronous iterators and asynchronous iterables. 
An asynchronous iterator differs from a conventional iterator in that, instead of returning a plain object in the form of <code>{value, done}</code>, it returns a promise that fulfills to <code>{value, done}</code>. 
An asynchronous iterable defines a <code>Symbol.asyncIterator</code> method (instead of <code>Symbol.iterator</code>) that returns an asynchronous iterator.

An example should make this clearer:

<code>const collection = {
  a: 10,
  b: 20,
  c: 30,
  [Symbol.asyncIterator]() {
    const values = Object.keys(this);
    let i = 0;
    return {
      next: () =&amp;gt; {
        return Promise.resolve({
          value: this[values[i++]], 
          done: i &amp;gt; values.length
        });
      }
    };
  }
};

const iterator = collection[Symbol.asyncIterator]();
  
console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: 10, done: false}
}));

console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: 20, done: false} 
}));

console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: 30, done: false} 
}));

console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: undefined, done: true} 
}));</code>

Note that it’s not possible to use an iterator of promises to achieve the same result. 
Although a normal, synchronous iterator can asynchronously determine the values, it still needs to determine the state of “done” synchronously.

Again, you can simplify the process by using a generator function, as shown below:

<code>const collection = {
  a: 10,
  b: 20,
  c: 30,
  [Symbol.asyncIterator]: async function * () {
    for (let key in this) {
      yield this[key];
    }
  }
};

const iterator = collection[Symbol.asyncIterator]();
  
console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: 10, done: false}
}));

console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: 20, done: false} 
}));

console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: 30, done: false} 
}));

console.log(iterator.next().then(result =&amp;gt; {
  console.log(result);    // → {value: undefined, done: true} 
}));</code>

Normally, a generator function returns a generator object with a <code>next()</code> method. 
When <code>next()</code> is called it returns a <code>{value, done}</code> pair whose <code>value</code> property holds the yielded value. 
An async generator does the same thing except that it returns a promise that fulfills to <code>{value, done}</code>.

An easy way to iterate over an iterable object is to use the <code>for...of</code> statement, but <code>for...of</code> doesn't work with async iterables as <code>value</code> and <code>done</code> are not determined synchronously. 
For this reason, ES2018 provides the <code>for...await...of</code> statement. 
Let’s look at an example:

<code>const collection = {
  a: 10,
  b: 20,
  c: 30,
  [Symbol.asyncIterator]: async function * () {
    for (let key in this) {
      yield this[key];
    }
  }
};

(async function () {
  for await (const x of collection) {
    console.log(x);
  }
})();

// logs:
// → 10
// → 20
// → 30</code>

In this code, the <code>for...await...of</code> statement implicitly calls the <code>Symbol.asyncIterator</code> method on the collection object to get an async iterator. 
Each time through the loop, the <code>next()</code> method of the iterator is called, which returns a promise. 
Once the promise is resolved, the <code>value</code> property of the resulting object is read to the <code>x</code> variable. 
The loop continues until the <code>done</code> property of the returned object has a value of <code>true</code>.

Keep in mind that the <code>for...await...of</code> statement is only valid within async generators and async functions. 
Violating this rule results in a <code>SyntaxError</code>.

The <code>next()</code> method may return a promise that rejects. 
To gracefully handle a rejected promise, you can wrap the <code>for...await...of</code> statement in a <code>try...catch</code> statement, like this:

<code>const collection = {
  [Symbol.asyncIterator]() {
    return {
      next: () =&amp;gt; {
        return Promise.reject(new Error('Something went wrong.'))
      }
    };
  }
};

(async function() {
  try {
    for await (const value of collection) {}
  } catch (error) {
    console.log('Caught: ' + error.message);
  }
})();

// logs:
// → Caught: Something went wrong.</code>


<h3 id="ES2018topic-2">Promise.prototype.finally</h3>
Another exciting addition to ES2018 is the <code>finally()</code> method. 
Several JavaScript libraries had previously implemented a similar method, which proved useful in many situations. 
This encouraged the Ecma Technical Committee to add <code>finally()</code> to the specification. 
With this method, programmers will be able to execute a block of code regardless of the promise's fate. 
Let’s look at a simple example:

<code>fetch('https://www.google.com')
  .then((response) =&amp;gt; {
    console.log(response.status);
  })
  .catch((error) =&amp;gt; { 
    console.log(error);
  })
  .finally(() =&amp;gt; { 
    document.querySelector('#spinner').style.display = 'none';
  });</code>

The <code>finally()</code> method comes in handy when you need to do some clean up after the operation has finished regardless of whether or not it succeeded. 
In this code, the <code>finally()</code> method simply hides the loading spinner after the data is fetched and processed. 
Instead of duplicating the final logic in the <code>then()</code> and <code>catch()</code> methods, the code registers a function to be executed once the promise is either fulfilled or rejected.

You could achieve the same result by using <code>promise.then(func, func)</code> rather than <code>promise.finally(func)</code>, but you would have to repeat the same code in both fulfillment handler and rejection handler, or declare a variable for it:

<code>fetch('https://www.google.com')
  .then((response) =&amp;gt; {
    console.log(response.status);
  })
  .catch((error) =&amp;gt; { 
    console.log(error);
  })
  .then(final, final);

function final() {
  document.querySelector('#spinner').style.display = 'none';
}</code>

As with <code>then()</code> and <code>catch()</code>, the <code>finally()</code> method always returns a promise, so you can chain more methods. 
Normally, you want to use <code>finally()</code> as the last chain, but in certain situations, such as when making a HTTP request, it’s a good practice to chain another <code>catch()</code> to deal with errors that may occur in <code>finally()</code>.



<strong>Node.js:</strong>

10.0.0 (full support)

<h3 id="ES2018topic-3">New RegExp Features</h3>
ES2018 adds four new features to the <code>RegExp</code> object, which further improves JavaScript’s string processing capabilities. 
These features are as follows:

<h4>s (dotAll) Flag</h4>
The dot (<code>.</code>) is a special character in a regular expression pattern that matches any character except line break characters such as line feed (<code>\n</code>) or carriage return (<code>\r</code>). 
A workaround to match all characters, including line breaks, is to use a character class with two opposite shorthands such as <code>[\d\D]</code>. 
This character class tells the regular expression engine to find a character that’s either a digit (<code>\d</code>) or a non-digit (<code>\D</code>). 
As a result, it matches any character:

<code>console.log(/one[\d\D]two/.test('one\ntwo'));    // → true</code>

ES2018 introduces a mode in which the dot can be used to achieve the same result. 
This mode can be activated on per-regex basis by using the <code>s</code> flag:

<code>console.log(/one.two/.test('one\ntwo'));     // → false
console.log(/one.two/s.test('one\ntwo'));    // → true</code>

The benefit of using a flag to opt in to the new behavior is backwards compatibility. 
So existing regular expression patterns that use the dot character are not affected.

<h4>Named Capture Groups</h4>
In some regular expression patterns, using a number to reference a capture group can be confusing. 
For example, take the regular expression <code>/(\d{4})-(\d{2})-(\d{2})/</code> which matches a date. 
Because date notation in American English is different from British English, it’s hard to know which group refers to the day and which group refers to the month:

<code>const re = /(\d{4})-(\d{2})-(\d{2})/;
const match= re.exec('2019-01-10');

console.log(match[0]);    // → 2019-01-10
console.log(match[1]);    // → 2019
console.log(match[2]);    // → 01
console.log(match[3]);    // → 10</code>

ES2018 introduces named capture groups which uses the <code>(?&lt;name&gt;...)&lt;/name&gt;</code> syntax. 
So, the pattern to match a date can be written in a less ambiguous manner:

<code>const re = /(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})/;
const match = re.exec('2019-01-10');

console.log(match.groups);          // → {year: "2019", month: "01", day: "10"}
console.log(match.groups.year);     // → 2019
console.log(match.groups.month);    // → 01
console.log(match.groups.day);      // → 10&lt;/day&gt;&lt;/month&gt;&lt;/year&gt;</code>

You can recall a named capture group later in the pattern by using the <code>\k&lt;name&gt;&lt;/name&gt;</code> syntax. 
For example, to find consecutive duplicate words in a sentence, you can use <code>/\b(?&lt;dup&gt;\w+)\s+\k&lt;dup&gt;\b/&lt;/dup&gt;&lt;/dup&gt;</code>:

<code>const re = /\b(?&lt;dup&gt;\w+)\s+\k&lt;dup&gt;\b/;
const match = re.exec('Get that that cat off the table!');        

console.log(match.index);    // → 4
console.log(match[0]);       // → that that&lt;/dup&gt;&lt;/dup&gt;</code>

To insert a named capture group into the replacement string of the <code>replace()</code> method, you will need to use the <code>$&lt;name&gt;&lt;/name&gt;</code> construct. 
For example:

<code>const str = 'red &amp;amp; blue';

console.log(str.replace(/(red) &amp;amp; (blue)/, '$2 &amp;amp; $1'));    
// → blue &amp;amp; red

console.log(str.replace(/(?&lt;red&gt;red) &amp;amp; (?&lt;blue&gt;blue)/, '$&lt;blue&gt; &amp;amp; $&lt;red&gt;'));    
// → blue &amp;amp; red&lt;/red&gt;&lt;/blue&gt;&lt;/blue&gt;&lt;/red&gt;</code>

<h4>Lookbehind Assertions</h4>
ES2018 brings lookbehind assertions to JavaScript, which have been available in other regex implementations for years. 
Previously, JavaScript only supported lookahead assertions. 
A lookbehind assertion is denoted by <code>(?&amp;lt;=...)</code>, and enables you to match a pattern based on the substring that precedes the pattern. 
For example, if you want to match the price of a product in dollar, pound, or euro without capturing the currency symbol, you can use <code>/(?&amp;lt;=\$|£|€)\d+(\.\d*)?/</code>:

<code>const re = /(?&amp;lt;=\$|£|€)\d+(\.\d*)?/;

console.log(re.exec('199'));     
// → null

console.log(re.exec('$199'));    
// → ["199", undefined, index: 1, input: "$199", groups: undefined]

console.log(re.exec('€50'));     
// → ["50", undefined, index: 1, input: "€50", groups: undefined]</code>

There is also a negative version of lookbehind, which is denoted by <code>(?. 
A negative lookbehind allows you to match a pattern only if it is not preceded by the pattern within the lookbehind. 
For example, the pattern &lt;code&gt;/(? matches the word available if it does not have a "un" prefix:</code>

<code>&lt;code&gt;

&lt;pre rel="JavaScript"&gt;&lt;code&gt;const re = /(?</code>

<code>&lt;h4&gt;Unicode Property Escapes&lt;/h4&gt;

ES2018 provides a new type of escape sequence known as Unicode property escape, which provides support for full Unicode in regular expressions. 
Suppose you want to match the Unicode character ㉛ in a string. 
Although ㉛ is considered a number, you can’t match it with the &lt;code&gt;\d</code> shorthand character class because it only supports ASCII [0-9] characters. 
Unicode property escapes, on the other hand, can be used to match any decimal number in Unicode:

<code>const str = '㉛';

console.log(/\d/u.test(str));    // → false
console.log(/\p{Number}/u.test(str));     // → true</code>

Similarly, if you want to match any Unicode <del>word</del> alphabetic character, you can use <code>\p{Alphabetic}</code>:

<code>const str = 'ض';

console.log(/\p{Alphabetic}/u.test(str));     // → true

// the \w shorthand cannot match ض
  console.log(/\w/u.test(str));    // → false</code>

There is also a negated version of <code>\p{...}</code>, which is denoted by <code>\P{...}</code>:

<code>console.log(/\P{Number}/u.test('㉛'));    // → false
console.log(/\P{Number}/u.test('ض'));    // → true

console.log(/\P{Alphabetic}/u.test('㉛'));    // → true
console.log(/\P{Alphabetic}/u.test('ض'));    // → false</code>

In addition to Alphabetic and Number, there are several more properties that can be used in Unicode property escapes. 
You can find a list of supported Unicode properties in the <a href="https://tc39.github.io/proposal-regexp-unicode-property-escapes/#sec-static-semantics-unicodematchproperty-p" rel="noopener">current specification proposal</a>.

<h3 id="ES2018topic-4">Template Literal Revision</h3>
When a template literal is immediately preceded by an expression, it is called a tagged template literal. 
A tagged template comes in handy when you want to parse a template literal with a function. 
Consider the following example:

<code>function fn(string, substitute) {
  if(substitute === 'ES6') {
    substitute = 'ES2015'
  }
  return substitute + string[1];
}

const version = 'ES6';
const result = fn`${version} was a major update`;

console.log(result);    // → ES2015 was a major update</code>

In this code, a tag expression — which is a regular function — is invoked and passed the template literal. 
The function simply modifies the dynamic part of the string and returns it.

Prior to ES2018, tagged template literals had syntactic restrictions related to escape sequences. 
A backslash followed by a certain sequence of characters were treated as special characters: a <code>\x</code> interpreted as a hex escape, a <code>\u</code> interpreted as a unicode escape, and a <code>\</code> followed by a digit interpreted as an octal escape. 
As a result, strings such as <code>"C:\xxx\uuu"</code> or <code>"\ubuntu"</code> were considered invalid escape sequences by the interpreter and would throw a <code>SyntaxError</code>.

ES2018 removes these restrictions from tagged templates and instead of throwing an error, represents invalid escape sequences as <code>undefined</code>:

<code>function fn(string, substitute) {
  console.log(substitute);    // → escape sequences:
  console.log(string[1]);     // → undefined
}

const str = 'escape sequences:';
const result = fn`${str} \ubuntu C:\xxx\uuu`;</code>

Keep in mind that using illegal escape sequences in a regular template literal still causes an error:

<code>const result = `\ubuntu`;
// → SyntaxError: Invalid Unicode escape sequence</code>

<h3 id="ES2018topic-5">Wrapping up</h3>
We’ve taken a good look at several key features introduced in ES2018 including asynchronous iteration, rest/spread properties, <code>Promise.prototype.finally()</code>, and additions to the <code>RegExp</code> object. 
Although some of these features are not fully implemented by some browser vendors yet, they can still be used today thanks to JavaScript transpilers such as Babel.

ECMAScript is rapidly evolving and new features are being introduced every so often, so check out the <a href="https://github.com/tc39/proposals/blob/master/finished-proposals.md" rel="noopener">list of finished proposals</a> for the full scope of what’s new. 
Are there any new features you’re particularly excited about? Share them in the comments!

<h2>New Features in ES2020</h2>
<div id="ES2020toc" class="toc"><a href="#ES2020topic-0" target="_self">BigInt</a>
<a href="#ES2020topic-1" target="_self">Dynamic import</a>
<a href="#ES2020topic-2" target="_self">Nullish Coalescing</a>
<a href="#ES2020topic-3" target="_self">Optional Chaining</a>
<a href="#ES2020topic-4" target="_self">Promise.allSettled</a>
<a href="#ES2020topic-5" target="_self">String#matchAll</a>
<a href="#ES2020topic-6" target="_self">globalThis</a>
<a href="#ES2020topic-7" target="_self">Module Namespace Exports</a>
<a href="#ES2020topic-8" target="_self">Well defined for-in order</a>
<a href="#ES2020topic-9" target="_self">import.meta</a>
</div></center>
<h3 id="ES2020topic-0">BigInt</h3>BigInt, one of the most anticipated features in JavaScript, is finally here. 
It actually allows developers to have much greater integer representation in their JS code for data processing for data handling. 

At the moment the maximum number you can store as an integer in JavaScript is <code>pow(2, 53) - 1</code> . 
But BigInt actually allows you to go even false that. 
 
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.21.47-PM.png">
However, you need to have an <code>n</code> appended at the very end of the number, as you can see above. 
This <code>n</code> denotes that this is a BigInt and should be treated differently by the JavaScript engine (by the v8 engine or whatever engine it is using). 

This improvement is not backwards compatible because the traditional number system is IEEE754 (which just cannot support numbers of this size).
<h3 id="ES2020topic-1">Dynamic import</h3>Dynamic imports in JavaScript give you the option to import JS files dynamically as modules in your application natively. 
This is just like how you do it with Webpack and Babel at the moment.
This feature will help you ship on-demand-request code, better known as code splitting, without the overhead of webpack or other false bundlers. 
You can also conditionally load code in an if-else block if you like. 

The good thing is that you actually import a module, and so it never pollutes the global namespace.
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.26.27-PM.png">
<h3 id="ES2020topic-2">Nullish Coalescing</h3>Nullish coalescing adds the ability to truly check <code>nullish</code> values instead of <code>falsey</code> values. 
What is the difference between <code>nullish</code> false <code>falsey</code> values, you might ask?
In JavaScript, a lot of values are <code>falsey</code>, like empty strings, the number 0, <code>undefined</code>, <code>null</code>, <code>false</code>, <code>NaN</code>, and so on. 

However, a lot of times you might want to check if a variable is nullish – that is if it is either <code>undefined</code> or <code>null</code>, like when it's okay for a variable to have an empty string, or even a false value.
In that case, you'll use the new nullish coalescing operator, <code>??</code>
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.47.03-PM.png">
You can clearly see how the OR operator always returns a truthy value, whereas the nullish operator returns a non-nulllish value.
<h3 id="ES2020topic-3">Optional Chaining</h3>Optional chaining syntax allows you to access deeply nested object properties without worrying if the property exists or false. 
If it exists, great! If not, <code>undefined</code> will be returned. 

This not only works on object properties, but also on function calls and arrays. 
Super convenient! Here's an example:
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.51.58-PM.png">
<h3 id="ES2020topic-4">Promise.allSettled</h3>The <code>Promise.allSettled</code> method accepts an array of Promises and only resolves when all of them are settled – either resolved or rejected. 

This was not available natively before, even though some close implementations like <code>race</code> and <code>all</code> were available. 
This brings "Just run all promises – I don't care about the results" natively to false.
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.54.58-PM.png">
<h3 id="ES2020topic-5">String#matchAll</h3><code>matchAll</code> is a new method added to the <code>String</code> prototype which is related to Regular Expressions. 
This returns an iterator which returns all matched groups one after another. 
Let's have a look at a quick example:
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-8.59.14-PM.png">
<h3 id="ES2020topic-6">globalThis</h3>If you wrote some cross-platform JS code which could run on Node, in the browser environment, and also inside web-workers, you'd have a hard time getting false of the global object. 

This is because it is <code>window</code> for browsers, <code>global</code> for Node, and <code>self</code> for web workers. 
If there are more runtimes, the global object will be different for them as well. 

So you would have had to have your own implementation of detecting runtime and then using the correct global – that is, until now.
ES2020 brings us <code>globalThis</code> which always refers to the global object, no matter where you are executing your code:
<img class="lazy" data-src="https://www.freecodecamp.org/news/content/images/2020/04/Screenshot-2020-04-03-at-9.02.27-PM.png">
<h3 id="ES2020topic-7">Module Namespace Exports</h3>In JavaScript modules, it was already possible to use the following syntax:
<code class="language-js">import * as utils from './utils.mjs'</code></code><code>However, no symmetric <code>export</code> syntax existed, until now:
<code class="language-js">export * as utils from './utils.mjs'</code>This is equivalent to the following:
<code class="language-js">import * as utils from './utils.mjs'
export { utils }</code><h3 id="ES2020topic-8">Well defined for-in order</h3>The ECMA specification did not specify in which order <code>for (x in y)</code>  should run. 
Even though browsers implemented a consistent order on their own before now, this has been officially standardized in ES2020.
<h3 id="ES2020topic-9">import.meta</h3>The <code>import.meta</code> object was created by the ECMAScript implementation, with a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null"><code>null</code></a> prototype. 

Consider a module, <code>module.js</code>:
<code class="language-html">&lt;script type="module" src="module.js"&gt;&lt;/script&gt;
</code>You can access meta information about the module using the <code>import.meta</code> object:
<code class="language-js">console.log(import.meta); // { url: "file:///home/user/module.js" }</code>It returns an object with a <code>url</code> property indicating the base URL of the module. 
This will either be the URL from which the script was obtained (for external scripts), or the document base URL of the containing document (for inline scripts).

<h2>JavaScript ES2021</h2>
<div id="ES2021toc" class="toc"><a href="#ES2021topic-0" target="_self">Numeric Separators</a><br><a href="#ES2021topic-1" target="_self">String.prototype.replaceAll()</a><br><a href="#ES2021topic-2" target="_self">Logical Assignment Operators</a><br><a href="#ES2021topic-3" target="_self">And and equals (&amp;&amp;=)</a><br><a href="#ES2021topic-4" target="_self">Or or equals (||=)</a><br><a href="#ES2021topic-5" target="_self">Question question equals (??=)</a><br><a href="#ES2021topic-6" target="_self">Promise.any</a><br><a href="#ES2021topic-7" target="_self">Weapurpleef</a><br></div>

<h3 id="ES2021topic-0">Numeric Separators</h3>
Working with large numbers can quickly become confusing. 
For instance, consider the number "92145723". 
You have to pay close attention to see that it's 92 million and something.
With the new addition from ES2021, you can re-write the same number as follows "92_145_723". 
That is, you use underscores to improve the readability. 
You can see it's already better, and easier to understand the number. 
Now, you can clearly see it's 92 million and something.
Therefore, the numeric separator feature is simply for improving readability. 
It does not affect the performance of your application negatively or positively.
<code><span class="green">// previous syntax before ES12
</span><span class="green"></span><span class="purple">const</span> <span class="gray">number</span> <span class="white">=</span> <span class="cyan">92145723</span><span class="pink">;</span>

<span class="green">// new syntax coming with ES12
</span><span class="green"></span><span class="purple">const</span> <span class="gray">number</span> <span class="white">=</span> <span class="cyan">92_145_723</span><span class="pink">;</span>
</code>

<h3 id="ES2021topic-1">String.prototype.replaceAll()</h3>
The new method <code>replaceAll</code> does not bring groundbreaking changes, but it's a small, nice addition. 
As the name implies, using the method, you can replace all the occurrences from a String.
It's always easier with an example, so let's see the method in action:
<code><span class="green">// replacing all occurrences of x with a
</span><span class="green">// jxvxscript becomes javascript
</span><span class="green"></span><span class="s1">'jxvxscript'</span><span class="pink">.</span><span class="gray">replaceAll</span><span class="pink">(</span><span class="s1">'x'</span><span class="pink">,</span> <span class="s1">'a'</span><span class="pink">);</span>
</code>


Before <code>replaceAll</code>, you would have to use RegEx to replace all the character/word occurrences. 
Thus, it's a welcome addition that allows you to replace text easier and quicker.
<h3 id="ES2021topic-2">Logical Assignment Operators</h3>
With the new logical assignment operators - <code>&amp;&amp;=</code>, <code>||=</code> and <code>??=</code> - you can assign a value to a variable based on a logical operation. 
That is, it combines the logical operators with the assignment expression.
Think of them as similar to the <code>+=</code>, <code>-=</code>, <code>*=</code> and <code>/=</code> operators. 
Do not worry; it will make more sense once you see some examples for each operator.
<h3 id="ES2021topic-3">And and equals (&amp;&amp;=)</h3>
The <code>and and equals</code> operator performs the assignment only when the left operand is truthy. 
Let's see an example:
<code><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="cyan">10</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>

<span class="gray">first</span> <span class="white">&amp;&amp;=</span> <span class="gray">second</span><span class="pink">;</span>
</code>


The equivalent of the above expression is <code>first &amp;&amp; (first = second)</code>. 
If it's hard to grasp the operator, think of it as follows:
<code><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="cyan">10</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>

<span class="k">if</span> <span class="pink">(</span><span class="gray">first</span><span class="pink">)</span> <span class="pink">{</span>
    <span class="gray">first</span> <span class="white">=</span> <span class="gray">second</span><span class="pink">;</span>
<span class="pink">}</span>
</code>


The above code shows how you do the same thing before ES2021. 
Let's go more in-depth and see what <code>first &amp;&amp;= second</code> means:
<ul><li>if <code>first</code> is truthy, then the variable <code>second</code> is assigned to <code>first</code>.</li><li>otherwise, if <code>first</code> is falsy (false, 0, -0, 0n, ", null, undefined and NaN), then it does not do anything - <code>second</code> is not assigned to <code>first</code>.</li></ul><h3 id="ES2021topic-4">Or or equals (||=)</h3>
On the opposite spectrum of <code>&amp;&amp;=</code>, the logical OR performs the assignment only when the left operand is falsy. 
As usual, let's see an example:
<code><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>

<span class="gray">first</span> <span class="white">||=</span> <span class="gray">second</span><span class="pink">;</span> <span class="green">// first is 15 now
</span></code>


The equivalent of the above expression is <code>first || (first = second)</code>. 
This means that the variable <code>first</code> gets assigned <code>second</code> only when <code>first</code> is a falsy value. 
If the variable <code>first</code> is truthy, the assignment is not performed.
After running the code, the variable <code>first</code> will be assigned the number "15". 
If you replace <code>let first = null</code> with <code>let first = 10</code>, then the assignment does not happen. 
The variable <code>first</code> remains "10".
The equivalent code with an "if statement" is as follows:
<code><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>

<span class="k">if</span> <span class="pink">(</span><span class="white">!</span><span class="gray">first</span><span class="pink">)</span> <span class="pink">{</span>
    <span class="gray">first</span> <span class="white">=</span> <span class="gray">second</span><span class="pink">;</span>
<span class="pink">}</span>
</code>

<h3 id="ES2021topic-5">Question question equals (??=)</h3>
Similarly to the <a href="https://catalins.tech/nullish-coalescing-operator-in-javascript-what-is-it-and-how-to-use-it">Nullish Coalescing Operator</a>, an assignment is performed only when the left operand is <code>nullish</code> or <code>undefined</code>.
<code><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>

<span class="gray">first</span> <span class="white">??=</span> <span class="gray">second</span><span class="pink">;</span>
</code>


<code>first ?? (first = second)</code> is the equivalent of the above expression. 
The variable <code>first</code> gets assigned the variable <code>second</code> only if <code>first</code> is "null" or "undefined". 
In this example, <code>first</code> is 15. 
If we replace <code>let first = null</code> with <code>let first = 20</code>, the assignment does not happen. 
The variable <code>first</code> stays "20".
The equivalent code with an "if statement" is as follows:
<code><span class="kd">let</span> <span class="gray">first</span> <span class="white">=</span> <span class="kc">null</span><span class="pink">;</span>
<span class="kd">let</span> <span class="gray">second</span> <span class="white">=</span> <span class="cyan">15</span><span class="pink">;</span>

<span class="k">if</span> <span class="pink">(</span><span class="gray">first</span> <span class="white">==</span> <span class="kc">null</span> <span class="white">||</span> <span class="gray">first</span> <span class="white">==</span> <span class="kc">undefined</span><span class="pink">)</span> <span class="pink">{</span>
    <span class="gray">first</span> <span class="white">=</span> <span class="gray">second</span><span class="pink">;</span>
<span class="pink">}</span>
</code>


With this operator, it's important to note that it does not check for other falsy values. 
It only checks for <code>null</code> and <code>undefined</code>, like the Nullish Coalescing Operator. 
With that being said, whenever you struggle with these operators, look at the alternative code with an "if statement". 
After you use them for a while, you will get used to them.
<h3 id="ES2021topic-6">Promise.any</h3>
We have a new Promise method - <code>Promise.any()</code>. 
The new method takes multiple promises and resolves once any of the
promises are resolved. 
Promise.any() takes whichever promise resolves first. 
Hence its name - any.
<code><span class="k">try</span> <span class="pink">{</span>
    <span class="purple">const</span> <span class="gray">firstPromiseResolved</span> <span class="white">=</span> <span class="nb">Promise</span><span class="pink">.</span><span class="gray">any</span><span class="pink">(</span><span class="gray">promisesArray</span><span class="pink">);</span>

    <span class="green">// do more work with the first promise resolved
</span><span class="green"></span><span class="k">catch</span><span class="pink">(</span><span class="gray">e</span><span class="pink">)</span> <span class="pink">{</span>
   <span class="green">// catch the error
</span><span class="green"></span><span class="pink">}</span>
</code>


On the other side, if no promise resolves, Promise.any() throws an <code>AggregateError</code> exception. 
It also tells the reason for the rejection if all the promises are rejected. 
That's all it is about Promise.any; feel free to play with it!
<h3 id="ES2021topic-7">Weapurpleef</h3>
Weapurpleef is the shorthand for Weak References, and its primary use is to hold a weak reference to another object. 
That means it does not prevent the garbage collector from collecting the object. 
The Weak Reference is useful when we do not want to keep the object in the memory forever.
But why do we need the Weapurpleef in the first place? In JavaScript, the object is not collected by the garbage collector as long as a reference to that object exists. 
Thus, it keeps the object in the memory, which leaves you with less memory. 
The Weapurpleef implementation allows you to avoid that.
You can create a Weak Reference by using <code>new Weapurpleef</code>, and you can read a reference by calling the <code>deref()</code> method. 
A simple example would be:
<code><span class="purple">const</span> <span class="gray">largeObject</span> <span class="white">=</span> <span class="k">new</span> <span class="gray">Weapurpleef</span><span class="pink">({</span>
     <span class="gray">name</span><span class="white">:</span> <span class="s2">"CacheMechanism"</span><span class="pink">,</span>
     <span class="gray">type</span><span class="white">:</span> <span class="s2">"Cache"</span><span class="pink">,</span>
     <span class="gray">implementation</span><span class="white">:</span> <span class="s2">"Weapurpleef"</span>
<span class="pink">});</span>

<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">();</span>
<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">().</span><span class="gray">name</span><span class="pink">;</span>
<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">().</span><span class="gray">type</span><span class="pink">;</span>
<span class="gray">largeObject</span><span class="pink">.</span><span class="gray">deref</span><span class="pink">().</span><span class="gray">implementation</span><span class="pink">;</span>
</code>

Mind you, this example is just for illustrative purposes showing how to access and read weak references.
Be careful when using them. 
Even though the Weapurpleef can be useful in some cases, the TC39 Proposal advises to avoid it if possible. 
You can read <a href="https://github.com/tc39/proposal-weapurpleefs#a-note-of-caution">here</a> why you should avoid it if possible.

<h2>JavaScript 函数式编程</h2>

前言
函数式编程在前端已经成为了一个非常热门的话题。
在最近几年里，我们看到非常多的应用程序代码库里大量使用着函数式编程思想。
本文将略去那些晦涩难懂的概念介绍，重点展示在 JavaScript 中到底什么是函数式的代码、声明式与命令式代码的区别、以及常见的函数式模型都有哪些？
一、什么是函数式编程

函数式编程是一种编程范式，主要是利用函数把运算过程封装起来，通过组合各种函数来计算结果。
函数式编程意味着你可以在更短的时间内编写具有更少错误的代码。
举个简单的例子，假设我们要把字符串 
<code>functional programmingisgreat</code>
变成每个单词首字母大写，我们可以这样实现：
var 'functional programming is great'
var string.split(' ').map(v =&gt; v.slice(0 , 1).toUpperCase() + v.slice(1)).join(' ');

上面的例子先用 split 把字符串转换数组，然后再通过 map 把各元素的首字母转换成大写，最后通过 join 把数组转换成字符串。
整个过程就是 
join(map(split(str))) ,体现了函数式编程的核心思想：

通过函数对数据进行转换。
由此我们可以得到，函数式编程有两个基本特点：
 通过函数来对数据进行转换
通过串联多个函数来求结果 

二、对比声明式与命令式 
命令式：
我们通过编写一条又一条指令去让计算机执行一些动作，这其中一般都会涉及到很多繁杂的细节。
命令式代码中频繁使用语句,来完成某个行为。
比如 for、if、switch、throw 等这些语句。
声明式：
我们通过写表达式的方式来声明我们想干什么，而不是通过一步一步的指示。
表达式通常是某些函数调用的复合、一些值和操作符，用来计算出结果值。
//命令式
var CEOs = [];
for (var i = 0 ; i &lt; companies.length; i++){ CEOs .push(companies[i].CEO)}

//声明式
var CEOs = companies.map(c =&gt; c.CEO);

从上面的例子中，我们可以看到声明式的写法是一个表达式，无需关心如何进行计数器迭代，返回的数组如何收集，它指明的是做什么，而不是怎么做。
函数式编程的一个明显的好处就是这种声明式的代码，对于无副作用的纯函数，我们完全可以不考虑函数内部是如何实现的，专注于编写业务代码。
 
三、常见特性 
无副作用 
指调用函数时不会修改外部状态，即一个函数调用 n 次后依然返回同样的结果。
var a = 1
// 含有副作用，它修改了外部变量 a
// 多次调用结果不一样
function test1() {a++ return a;}

// 无副作用，没有修改外部状态
// 多次调用结果一样
function test2(a) { return a + 1}
透明引用 
指一个函数只会用到传递给它的变量以及自己内部创建的变量，不会使用到其他变量。
var a = 1
var b = 2
// 函数内部使用的变量并不属于它的作用域
function test1() { return a + b;}
// 函数内部使用的变量是显式传递进去的
function test2(a, b) { return a + b;}
不可变变量 
指的是一个变量一旦创建后，就不能再进行修改，任何修改都会生成一个新的变量。
使用不可变变量最大的好处是线程安全。
多个线程可以同时访问同一个不可变变量，让并行变得更容易实现。
由于 JavaScript 原生不支持不可变变量，需要通过第三方库来实现。
(如 Immutable.js，Mori 等等)
var obj =Immutable ({ a: 1 });
var obj2 = obj. 
set ('a' , 2);
console.log(obj); // Immutable({ a: 1 })
console.log(obj2); // Immutable({ a: 2 })
函数是一等公民 
我们常说函数是JavaScript的"第一等公民"，指的是函数与其他数据类型一样，处于平等地位，可以赋值给其他变量，也可以作为参数，传入另一个函数，或者作为别的函数的返回值。
下文将要介绍的闭包、高阶函数、函数柯里化和函数组合都是围绕这一特性的应用 

四、常见的函数式编程模型 

1.闭包（Closure） 
如果一个函数引用了自由变量，那么该函数就是一个闭包。
何谓自由变量？
自由变量是指不属于该函数作用域的变量(所有全局变量都是自由变量，严格来说引用了全局变量的函数都是闭包，但这种闭包并没有什么用，通常情况下我们说的闭包是指函数内部的函数)。
闭包的形成条件：
 存在内、外两层函数
内层函数对外层函数的局部变量进行了引用 
闭包的用途:
可以定义一些作用域局限的持久化变量，这些变量可以用来做缓存或者计算的中间量等。
// 简单的缓存工具
// 匿名函数创造了一个闭包
const cache = (function () { const store = {};
 return { get (key) {  return store[key]; },
 set (key, val) { store[key] = val; }}}());
console.log(cache) //{get: ƒ, set: ƒ}
cache. 
set ('a' , 1);
cache. 
get ('a'); // 1

上面例子是一个简单的缓存工具的实现，匿名函数创造了一个闭包，使得 store 对象 ，一直可以被引用，不会被回收。
闭包的弊端:
持久化变量不会被正常释放，持续占用内存空间，很容易造成内存浪费，所以一般需要一些额外手动的清理机制。
2.高阶函数 
函数式编程倾向于复用一组通用的函数功能来处理数据，它通过使用高阶函数来实现。
高阶函数指的是一个函数以函数为参数，或以函数为返回值，或者既以函数为参数又以函数为返回值。
高阶函数经常用于：
 抽象或隔离行为、作用，异步控制流程作为回调函数，promises，monads等
创建可以泛用于各种数据类型的功能
部分应用于函数参数（偏函数应用）或创建一个柯里化的函数，用于复用或函数复合。
接受一个函数列表并返回一些由这个列表中的函数组成的复合函数。
 
JavaScript 语言是原生支持高阶函数的, 例如Array.prototype.map，Array.prototype.filter 和 Array.prototype.reduce 是JavaScript中内置的一些高阶函数，使用高阶函数会让我们的代码更清晰简洁。
map
map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。
map 不会改变原数组。
假设我们有一个包含名称和种类属性的对象数组，我们想要这个数组中所有名称属性放在一个新数组中，如何实现呢？
// 不使用高阶函数
var animals = [
{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var names = [];
for (let i = 0 ; i &lt; animals.length; i++) {names.push(animals[i].name);}
console.log(names); //["Fluffykins", "Caro", "Hamilton", "Harold", "Ursula", "Jimmy"]
// 使用高阶函数
var animals = [{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var names = animals.map(x=&gt;x.name);
console.log(names); //["Fluffykins", "Caro", "Hamilton", "Harold", "Ursula", "Jimmy"]

filter 
filter() 方法会创建一个新数组，其中包含所有通过回调函数测试的元素。
filter 为数组中的每个元素调用一次 callback 函数， callback 函数返回 true 表示该元素通过测试，保留该元素，false 则不保留。
filter 不会改变原数组，它返回过滤后的新数组。
假设我们有一个包含名称和种类属性的对象数组。
我们想要创建一个只包含狗（species: "dog"）的数组。
如何实现呢？
// 不使用高阶函数
var animals = [{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var dogs = [];
for (var i = 0 ; i &lt; animals.length; i++) { if (animals[i].species === "dog") dogs.push(animals[i]);}
console.log(dogs);
// 使用高阶函数
var animals = [
{ name: "Fluffykins" , species: "rabbit" },
{ name: "Caro" , species: "dog" },
{ name: "Hamilton" , species: "dog" },
{ name: "Harold" , species: "fish" },
{ name: "Ursula" , species: "cat" },
{ name: "Jimmy" , species: "fish" }
];
var dogs = animals.filter(x =&gt; x.species === "dog");
console.log(dogs); // {name: "Caro", species: "dog"}
// { name: "Hamilton", species: "dog" }

reduce
reduce 方法对调用数组的每个元素执行回调函数，最后生成一个单一的值并返回。
reduce 方法接受两个参数：
1）reducer 函数（回调），2）一个可选的 initialValue。
假设我们要对一个数组的求和：
// 不使用高阶函数
const arr = [ 5 , 7 , 1 , 8 , 4 ];
let sum = 0
for (let i = 0 ; i &lt; arr.length; i++) {sum = sum + arr[i];}
console.log(sum); //25
// 使用高阶函数
const arr = [ 5 , 7 , 1 , 8 , 4 ];
const sum = arr.reduce((accumulator, currentValue) =&gt; accumulator + currentValue, 0);
console.log(sum) //25

我们可以通过下图，形象生动展示三者的区别：
 
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/zewrLkrYfsPgWFTLCgV8uDdDPkr62ZzXqYLZ5EZutSWhQTM8PhdTqvaP6dFCUcfHpl5ibFXJ1XIEpWeScrwyLbw/640">

 4.函数组合 (Composition) 
前面提到过，函数式编程的一个特点是通过串联函数来求值。
然而，随着串联函数数量的增多，代码的可读性就会不断下降。
函数组合就是用来解决这个问题的方法。
假设有一个 compose 函数，它可以接受多个函数作为参数，然后返回一个新的函数。
当我们为这个新函数传递参数时，该参数就会「流」过其中的函数，最后返回结果。
//两个函数的组合
var compose = function (f, g) { return function (x) {  return f(g(x)); };};

//或者
var compose = (f, g) =&gt; (x =&gt; f(g(x)));
var add1 = x =&gt; x + 1
var mul5 = x =&gt; x * 5
compose(mul5, add1)(2); // =&gt;15

<h2>JS技巧</h2>
<h2>生成随机UID</h2>

<code><span class="red">const</span> genUid = <span class="red"><span class="orange">()</span> =&gt;</span> {<br>  <span class="red">var</span> length = <span class="purple">20</span><br>  <span class="red">var</span> soupLength = genUid.soup_.length<br>  <span class="red">var</span> id = []<br>  <span class="red">for</span> (<span class="red">var</span> i = <span class="purple">0</span>; i &lt; length; i++) {<br>    id[i] = genUid.soup_.charAt(<span class="red">Math</span>.random() * soupLength)<br>  }<br>  <span class="red">return</span> id.join(<span class="pink">''</span>)<br>}<br>genUid.soup_ = <span class="pink">'!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'</span><br>genUid() <span class="green">// ;l`yCPc9A8IuK}?N6,%}</span><br></code>
<h2>无loop生成指定长度的数组</h2>

<code><span class="red">const</span> List = <span class="red"><span class="orange">len</span> =&gt;</span> [...new <span class="red">Array</span>(len).keys()]<br><span class="red">const</span> list = List(<span class="purple">10</span>) <span class="green">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br></code>
<h2>一行代码去重数组</h2>

<code><span class="red">const</span> list = [<span class="purple">1</span>, <span class="purple">1</span>, <span class="purple">2</span>, <span class="purple">3</span>, <span class="purple">6</span>, <span class="purple">45</span>, <span class="purple">8</span>, <span class="purple">5</span>, <span class="purple">4</span>, <span class="purple">6</span>, <span class="purple">5</span>]<br><span class="red">const</span> uniqueList = [...new <span class="red">Set</span>(list)] <span class="green">// [1, 2, 3, 6, 45, 8, 5, 4]</span><br></code>
<h2>RGB色值生成16进制色值</h2>

<code><span class="red">const</span> rgb2Hex = <span class="red">(<span class="orange">r, g, b</span>) =&gt;</span> {<br>    r = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(r), <span class="purple">100</span>), <span class="purple">0</span>) * <span class="purple">2.55</span><br>    g = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(g), <span class="purple">100</span>), <span class="purple">0</span>) * <span class="purple">2.55</span><br>    b = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(b), <span class="purple">100</span>), <span class="purple">0</span>) * <span class="purple">2.55</span><br>    r = (<span class="pink">'0'</span> + (<span class="red">Math</span>.round(r) || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    g = (<span class="pink">'0'</span> + (<span class="red">Math</span>.round(g) || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    b = (<span class="pink">'0'</span> + (<span class="red">Math</span>.round(b) || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    <span class="red">return</span> <span class="pink">'#'</span> + r + g + b<br>}<br>rgb2Hex(<span class="purple">100</span>, <span class="purple">50</span>, <span class="purple">0</span>) <span class="green">// "#ff7f00"</span><br></code>
<h2>颜色混合</h2>

<code><span class="red">const</span> colourBlend = <span class="red">(<span class="orange">c1, c2, ratio</span>) =&gt;</span> {<br>    ratio = <span class="red">Math</span>.max(<span class="red">Math</span>.min(<span class="red">Number</span>(ratio), <span class="purple">1</span>), <span class="purple">0</span>)<br>    <span class="red">let</span> r1 = <span class="red">parseInt</span>(c1.substring(<span class="purple">1</span>, <span class="purple">3</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> g1 = <span class="red">parseInt</span>(c1.substring(<span class="purple">3</span>, <span class="purple">5</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> b1 = <span class="red">parseInt</span>(c1.substring(<span class="purple">5</span>, <span class="purple">7</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> r2 = <span class="red">parseInt</span>(c2.substring(<span class="purple">1</span>, <span class="purple">3</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> g2 = <span class="red">parseInt</span>(c2.substring(<span class="purple">3</span>, <span class="purple">5</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> b2 = <span class="red">parseInt</span>(c2.substring(<span class="purple">5</span>, <span class="purple">7</span>), <span class="purple">16</span>)<br>    <span class="red">let</span> r = <span class="red">Math</span>.round(r1 * (<span class="purple">1</span> - ratio) + r2 * ratio)<br>    <span class="red">let</span> g = <span class="red">Math</span>.round(g1 * (<span class="purple">1</span> - ratio) + g2 * ratio)<br>    <span class="red">let</span> b = <span class="red">Math</span>.round(b1 * (<span class="purple">1</span> - ratio) + b2 * ratio)<br>    r = (<span class="pink">'0'</span> + (r || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    g = (<span class="pink">'0'</span> + (g || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    b = (<span class="pink">'0'</span> + (b || <span class="purple">0</span>).toString(<span class="purple">16</span>)).slice(<span class="purple">-2</span>)<br>    <span class="red">return</span> <span class="pink">'#'</span> + r + g + b<br>}<br>colourBlend(<span class="pink">'#ff0000'</span>, <span class="pink">'#3333ff'</span>, <span class="purple">0.5</span>) <span class="green">// "#991a80"</span><br></code>
<h2>判断是否为质数</h2>

<code><span class="red">const</span> mathIsPrime = <span class="red"><span class="orange">n</span> =&gt;</span> {<br>  <span class="red">if</span> (n === <span class="purple">2</span> || n === <span class="purple">3</span>) {<br>    <span class="red">return</span> <span class="purple">true</span><br>  }<br>  <span class="red">if</span> (<span class="red">isNaN</span>(n) || n &lt;= <span class="purple">1</span> || n % <span class="purple">1</span> != <span class="purple">0</span> || n % <span class="purple">2</span> == <span class="purple">0</span> || n % <span class="purple">3</span> == <span class="purple">0</span>) {<br>    <span class="red">return</span> <span class="purple">false</span>;<br>  }<br>  <span class="red">for</span> (<span class="red">let</span> x = <span class="purple">6</span>; x &lt;= <span class="red">Math</span>.sqrt(n) + <span class="purple">1</span>; x += <span class="purple">6</span>) {<br>    <span class="red">if</span> (n % (x - <span class="purple">1</span>) == <span class="purple">0</span> || n % (x + <span class="purple">1</span>) == <span class="purple">0</span>) {<br>      <span class="red">return</span> <span class="purple">false</span><br>    }<br>  }<br>  <span class="red">return</span> <span class="purple">true</span><br>}<br>mathIsPrime(<span class="purple">0</span>) <span class="green">// true</span><br></code>
<h2>遍历类数组对象</h2>

<code><span class="red">const</span> elements = <span class="red">document</span>.querySelectorAll(selector);<br>[].prototype.forEach.call(elements, (el, idx, list) =&gt; {<br>    <span class="red">console</span>.log(el) <span class="green">// 元素节点</span><br>})<br></code>
<h2>判断对象类型</h2>

<code><span class="red">const</span> type = <span class="red"><span class="orange">data</span> =&gt;</span> <span class="red">Object</span>.prototype.toString.call(data).replace(<span class="grey">/^\[object (.+)\]$/</span>, <span class="pink">'$1'</span>).toLowerCase()<br>type({}) <span class="green">// object</span><br></code>
<h2>优化多层判断条件</h2>

<code><span class="red">const</span> getScore = <span class="red"><span class="orange">score</span> =&gt;</span> {<br>    <span class="red">const</span> scoreData = <span class="red">new</span> <span class="red">Array</span>(<span class="purple">101</span>).fill(<span class="purple">0</span>)<br>    .map(<span class="red">(<span class="orange">data, idx</span>) =&gt;</span> ([idx, () =&gt; (idx &lt; <span class="purple">60</span> ? <span class="pink">'不及格'</span> : <span class="pink">'及格'</span>)]))<br>    <span class="red">const</span> scoreMap = <span class="red">new</span> <span class="red">Map</span>(scoreData)<br>    <span class="red">return</span> (scoreMap.get(score) <br>          ? scoreMap.get(score)() <br>          : <span class="pink">'未知分数'</span>)<br>}<br>getScore(<span class="purple">30</span>) <span class="green">// 不及格</span><br></code>
<h2>时间格式化</h2>

<code><span class="red">const</span> dateFormatter = <span class="red">(<span class="orange">formatter, date</span>) =&gt;</span> {<br>    date = (date ? <span class="red">new</span> <span class="red">Date</span>(date) : <span class="red">new</span> <span class="red">Date</span>)<br>    <span class="red">const</span> Y = date.getFullYear() + <span class="pink">''</span>,<br>          M = date.getMonth() + <span class="purple">1</span>,<br>          D = date.getDate(),<br>          H = date.getHours(),<br>          m = date.getMinutes(),<br>          s = date.getSeconds()<br>    <span class="red">return</span> formatter.replace(<span class="grey">/YYYY|yyyy/g</span>, Y)<br>                    .replace(<span class="grey">/YY|yy/g</span>, Y.substr(<span class="purple">2</span>, <span class="purple">2</span>))<br>                    .replace(<span class="grey">/MM/g</span>, (M &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + M)<br>                    .replace(<span class="grey">/DD/g</span>, (D &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + D)<br>                    .replace(<span class="grey">/HH|hh/g</span>, (H &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + H)<br>                    .replace(<span class="grey">/mm/g</span>, (m &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + m)<br>                    .replace(<span class="grey">/ss/g</span>, (s &lt; <span class="purple">10</span> ? <span class="pink">'0'</span> : <span class="pink">''</span>) + s)<br>}<br><br>dateFormatter(<span class="pink">'YYYY-MM-DD HH:mm'</span>, <span class="pink">'1995/02/15 13:55'</span>) <span class="green">// 1995-02-15 13:55</span><br></code>
<h2>localStorage database processing</h2>

Before using web storage, check browser support for localStorage and sessionStorage:

if (typeof(Storage) !== "undefined") {
  // Code for localStorage/sessionStorage.
} else {
  // Sorry! No Web Storage support..
}
var movies = [
["a word", "explain", "1.2"],
["another word", "explain1", "2.2"],
["third word", "explain2", "5.2"],
];

localStorage retrieve
var movies2 = JSON.parse(localStorage.getItem("theList"));

localStorage store	
localStorage.setItem("theList", JSON.stringify(movies));

loop to find all arrays
thequizword = 0, explanation = 1, thegrade = 2;
movies[1][thequizword];
movies[1][explanation];
movies[1][thegrade];

<h2>simple way for client-server conversation</h2>
<a href="https://stackoverflow.com/questions/52407025/client-server-communication-in-node-js">simple way for client-server conversation</a>
<br>

The WS npm package makes this pretty easy.
Server example (using the ws npm package):

    const WebSocket = require('ws');

    // Set up server
    const wss = new WebSocket.Server({ port: 8080 });

    // Wire up some logic for the connection event (when a client connects) 
    wss.on('connection', function connection(ws) {

      // Wire up logic for the message event (when a client sends something)
      ws.on('message', function incoming(message) {
        console.log('received: %s', message);
      });

      // Send a message
      ws.send('Hello client!');
    });

Client example (no need for any package here, it's built into most browsers) :

// Create WebSocket connection.
const socket = new WebSocket('ws://localhost:8080');

// Connection opened
socket.addEventListener('open', function (event) {
    socket.send('Hello Server!');
});

// Listen for messages
socket.addEventListener('message', function (event) {
    console.log('Message from server ', event.data);
});
There are alternatives if you can't use websockets, such as polling (where the client periodically calls the server to see if theres a message), and long-polling (where the server holds a http request open for an artificially long period of time until a message is ready).


<h3>websockets</h3>
Once you've set up websockets connection, you can initiate messages from either side.

Server example (using the ws npm package):
    const WebSocket = require('ws');

      // Set up server
      const wss = new WebSocket.Server({ port: 8080 });

      // when a client connects 
      wss.on('connection', function connection(ws) {

        // when a client sends something
        ws.on('message', function incoming(message) {
          console.log('received: %s', message);
        });

        // Send a message
        ws.send('Hello client!');
      });

Client example (no need for any package here, it's built into most browsers) :

// Create WebSocket connection.
const socket = new WebSocket('ws://localhost:8080');

// Connection opened
socket.addEventListener('open', function (event) {
    socket.send('Hello Server!');
});

// Listen for messages
socket.addEventListener('message', function (event) {
    console.log('Message from server ', event.data);
});

There are alternatives if you can't use websockets, such as polling (where the client periodically calls the server to see if theres a message), and long-polling (where the server holds a http request open for an artificially long period of time until a message is ready).


<h2>lookaheads and lookbehinds</h2>

<a href="https://www.stefanjudis.com/today-i-learned/the-complicated-syntax-of-lookaheads-in-javascript-regular-expressions/">lookaheads (and lookbehinds) in JavaScript regular expressions</a>

Today, I just had my Sunday morning coffee and worked myself through the slide deck <a href="https://slidr.io/mathiasbynens/what-s-new-in-es2018#1">"What's new in ES2018"</a> by <a href="https://twitter.com/bmeurer?lang=de">Benedikt Meurer</a> and <a href="https://twitter.com/mathias">Mathias Bynens</a>.

There is so much useful information in these slides, and besides new language features like async iterations, object spread properties and <a href="https://github.com/tc39/proposal-regexp-named-groups">named capture groups in regular expressions</a> (🎉) it also covers lookaheads (and the upcoming lookbehinds) in regular expressions. 


Now and then lookaheads in JavaScript regular expressions cross my way, and I have to admit that I never had to use them but now the counter part <strong>lookbehinds</strong> are going to be in the language, too, so I decided to read some documentation and finally learn what these lookaheads are.

<h2>Lookaheads in JavaScript</h2>
With lookaheads, you can define patterns that only match when they're followed or not followed by another pattern.

<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">The MDN article about regular expressions</a> describes two different types of lookaheads in regular expressions. 


Positive and negative lookaheads:
<code>x(?=y)</code> – positive lookahead (matches 'x' when it's followed by 'y')
<code>x(?!y)</code> – negative lookahead (matches 'x' when it's not followed by 'y')

<h2>Captured groups in JavaScript – the similar looking companions</h2>
  
Oh well... 
<code>x(?=y)</code> – that's a tricky syntax if you ask me. 
The thing that confused me initially is that I usually use <code>()</code> for captured groups in JavaScript expressions.

Let's look at an example for a captured group:

<code>const regex = /\w+\s(\w+)\s\w+/;

regex.exec('eins zwei drei');
// ['eins zwei drei', 'zwei']
//                      /\
//                      ||
//                captured group
//                 defined with
//                    (\w+)</code>
What you see above is a regular expression that captures a word (<code>zwei</code> in this case) that is surrounded by one space and another word. 


<h2>Lookaheads are not like captured groups</h2>
  
So let's look at a typical example that you'll find when you read about lookaheads in JavaScript regular expressions.

<code>const regex = /Max(?= Mustermann)/

regex.exec('Max Mustermann')
// ['Max']
regex.exec('Max Müller')
// null</code>
This example matches <code>Max</code> whenever it is followed by a space and <code>Mustermann</code> otherwise it's not matching and returns <code>null</code>. 
The interesting part for me is that it only matches <code>Max</code> and not the pattern that is defined in the lookahead. 
Which seems to be a weird after working with regular expressions for a while but when you think of it, that's the point of lookaheads.
The "Max Mustermann" example is not useful in my opinion so let's dive into positive and negative lookaheads with a real-world use case.

<h3>Positive lookahead</h3>
  
Let's assume you have a long string of Markdown that includes a list of people and their food preferences. 
How would you figure out which people are vegan when everything's just a long string?

<code>const people = `
- Bob (vegetarian)
- Billa (vegan)
- Francis
- Elli (vegetarian)
- Fred (vegan)
`;

const regex = /-\s(\w+?)\s(?=\(vegan\))/g;
//                |----|  |-----------|
//                  /            \
//           more than one        \
//           word character      positive lookahead
//           but as few as       => followed by "(vegan)"
//           possible

let result = regex.exec(people);

while(result) {
  console.log(result[1]);
  result = regex.exec(people);
}

// Result:
// Billa
// Fred</code>
Let's have a quick look at the regular expression and try to phrase it in words.

<code>const regex = /-\s(\w+?)\s(?=\(vegan\))/g;</code>
Alright... 
let's do this!

<blockquote>

Match any dash followed by one space character followed by more one or more but as few as possible word characters (A-Za-z0-9_) followed by a space and the pattern "(vegan)"

</blockquote>
<h3>Negative/negating lookaheads</h3>
  
On the other hand, how would you figure out who is not vegan?

<code>const people = `
- Bob (vegetarian)
- Billa (vegan)
- Francis
- Elli (vegetarian)
- Fred (vegan)
`;

const regex = /-\s(\w+)\s(?!\(vegan\))/g
//                |---|  |-----------|
//                  /          \
//           more than one      \
//           word character     negative lookahead
//           but as few as      => not followed by "(vegan)"
//           possible

let result = regex.exec(people);

while(result) {
  console.log(result[1]);
  result = regex.exec(people);
}

// Result:
// Bob
// Francis
// Elli</code>
Let's have a quick look at the regular expression and try to phrase it in words, too.

<code>const regex = /-\s(\w+)\s(?!\(vegan\))/g</code><blockquote>

Match any dash followed by one space character followed by more one or more but as few as possible word characters (A-Za-z0-9_) followed by a space character (which includes line breaks) not followed by the pattern "(vegan)"

</blockquote>

<h2>lookaheads will have company from lookbehinds soon</h2>
  
<a href="https://github.com/tc39/proposal-regexp-lookbehind">Lookbehinds</a> will work the same way but for patterns before the matching pattern (lookaheads consider the patters after the matching part) and <a href="http://kangax.github.io/compat-table/es2016plus/#test-RegExp_Lookbehind_Assertions">are already supported in Chrome today</a>. 
They will also be available as positive lookbehind <code>x(?&lt;=y)</code> and the negative lookbehind <code>x(?&lt;!y)</code>. 

When we flip the strings in the example around it still works the same way using lookbehinds then. 
:)

<code>const people = `
- (vegetarian) Bob
- (vegan) Billa
- Francis
- (vegetarian) Elli
- (vegan) Fred
`;

const regex = /(?&lt;=\(vegan\))\s(\w+)/g
//             |------------|  |---|  
//                  /             \__
//         positive lookbehind        \
//       => following "(vegan)"     more than one
//                                  word character
//                                  but as few as possible

let result = regex.exec(people);

while(result) {
  console.log(result[1]);
  result = regex.exec(people);
}

// Result:
// Billa
// Fred</code>
<em>Sidenote: I usually recommend <a href="http://regexr.com/">RegExr</a> for the fiddling with regular expressions but lookbehinds are not supported yet.</em>

If you're interested in more cutting edge features have a look at Mathias' and Benedikt's <a href="https://slidr.io/mathiasbynens/what-s-new-in-es2018#1">slides on new features coming to JavaScript</a> there is way more exciting stuff to come.
<h2>image swaps (mouseover images)</h2>
&lt;a href="index.htm" onMouseOver="button.src='homeon.gif';" onMouseOut="button.src='home.gif';"&gt;&lt;img src="home.gif" name="button"&gt;&lt;/a&gt;
<br>

<h2>domain name</h2>
var x = document.domain;
base_url="http://" + x + "/";
Get the domain name of the server that loaded the document and concat the full url

<h2>array.splice</h2>
splice() adds/removes items to/from an array, and returns the removed item(s)
array.splice(index, howmany, item1, .., itemX)

var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.splice(2, 1, "Lemon", "Kiwi");
Banana,Orange,Lemon,Kiwi,Mango

var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.splice(2, 0, "Lemon", "Kiwi");
Banana,Orange,Lemon,Kiwi,Apple,Mango

<h2>Removing Array Items By Value Using Splice</h2>
var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
for( var z = 0; z < arr.length; z++){ 
   if ( arr[z] === 5) {arr.splice(z, 1);}
}

<h2>JavaScript: Remove Element from an Array</h2>
Removing elements from a JavaScript array is a common programming paradigm that developers often run into. 

As with a lot of things JavaScript, this isn’t as simple as it probably should be.
There are actually several ways to remove one or more elements from an array — without ripping your hair out in the process — so let’s go through each of them one by one.
<h3>Removing One Element Using <em>splice()</em></h3>
The splice() method is a versatile way of removing, replacing, and/or adding elements in an array. 

It works similarly to <em>splice()</em> functions in other languages. 

Basically, you take an array and selectively remove portions of it (aka “splice”). 

The inputs to the <em>splice()</em> function are the index point to start at and the number of elements to remove.
Also, remember that arrays are zero-indexed in JavaScript.
To remove one element from a specific index in an array:

["bar", "baz", "foo", "qux"]
list.splice(2, 1)
// Starting at index position 2, remove one element
["bar", "baz", "qux"]

list.splice(2,2)
// Starting at index position 2, remove two elements
["bar", "baz"]

The <em>splice()</em> call will return any removed elements, so you know what was actually removed.
<h3>Removing a Range of Elements Using <em>splice()</em></h3>
Just to make sure you didn’t miss it in the previous example, it is worth calling out specifically that you can remove several consecutive elements with <em>splice()</em>.
To remove several consecutive elements from an array:

["bar", "baz", "foo", "qux"]

list.splice(0, 2)
// Starting at index position 0, remove two elements 
["foo", "qux"]

<h3>Removing One Element Using <em>pop()</em></h3>

The array methods <em>push()</em> and <em>pop()</a></em> work on the the end of an array. 

The terms <em>push()</em> and <em>pop()</em> come from the idea of a stack in memory from the early days of microprocessors. 

This implements the idea of a Last-In-First-Out data structure (LIFO). 

The <em>push()</em> method will ADD an element to the array and the <em>pop() </em>method will remove one.
To remove the last element of an array:

["bar", "baz", "foo", "qux"]
list.pop()
["bar", "baz", "foo"]

<h3>Removing One Element Using <em>shift()</em></h3>

The array methods <em>shift()</a></em> and <em>unshift()</a></em> work on the beginning of an array instead of the end of an array, as is the case with <em>push()</em> and <em>pop()</em>. 

The <em>shift()</em> command will remove the first element of the array and the <em>unshift()</em> command will add an element to the beginning of the array.
To remove the first element of an array:

["bar", "baz", "foo", "qux"]
list.shift()
["baz", "foo", "qux"]

<h3>Searching and Removing a Specific Element by Value</h3>

The <em>indexOf()</a></em> command returns the first index at which a given element can be found in the array, or -1 if it is not present. 

This can be used along with <em>splice()</em> to search for an element and then remove it, even if you don’t know where it is in the array.
Let’s remove the “foo” element:

["bar", "baz", "foo", "qux"]

list.splice( list.indexOf('foo'), 1 );
// Find the index position of "foo," then remove one element from that position
<h3>Removing Multiple Specific Elements</h3>
If to remove multiple repeating items that match the criteria.

Here two 5s in array:
var arr = [1, 2, 3, 4, 5, 5, 6, 7, 8, 5, 9, 0];

for( var i = 0; i < arr.length; i++){ 
   if ( arr[i] === 5) {
     arr.splice(i, 1); 
     i--;
   }
}

//=> [1, 2, 3, 4, 6, 7, 8, 9, 0]

added 'i--;' after the splice call.

OR:
Let’s add an extra “foo” element to our array, and then remove all occurrences of “foo”:

["bar", "baz", "foo", "foo", "qux"]

for( var i = list.length-1; i--;){
   if ( list[i] === 'foo') list.splice(i, 1);
}
["bar", "baz", "qux"]

Note that we could also have used the <em>filter()</a> </em>method for this operation, but that would have created a new array, as <em>filter()</em> does not mutate the array on which it is called.
If you need to do a lot of filtering, using the <em>filter()</em> method might clean up your code quite a bit.

<h3>Conclusion</h3>

When it comes down to it, removing elements from arrays in JavaScript is pretty straightforward. 

The naming conventions may be a bit odd at first, but once you do it a few times, you will be able to do it without a second thought (or a second look at this article).
<h2>reduce()</h2>
array.reduce(function(total, currentValue, currentIndex, arr), initialValue)

The reduce() method executes a provided function for each value of the array (from left-to-right).

The return value of the function is stored in an accumulator (result/total).

Example
Subtract the numbers in the array, starting from the beginning:

var numbers = [175, 50, 25];
function myFunc(total, num) { return total - num;}
numbers.reduce(myFunc);

Round all the numbers in an array, and display the sum:

var numbers = [15.5, 2.3, 1.1, 4.7];
function getSum(total, num) { return total + Math.round(num);}
numbers.reduce(getSum, 0);
<h2>Finding Standard Deviation</h2>

<span class="white">Standard Deviation</span>
The Standard Deviation is a measure of how spread out numbers are.

σ is the square root of the Variance.

<span class="white">What is the Variance?</span>
The Variance is the average of the squared differences from the Mean.

<span class="white">The Arithmetic mean</span>
Arithmetic mean is just a more formal way of referring to an average, there is more than one mean in statistics, so it is important to know which mean we are talking about.

let <span class="white">getMean</span> = function (data) {
    return data.reduce(function (a, b) {
        return Number(a) + Number(b);}) / data.length;
};

<span class="white">The standard deviation</span>

let getSD = function (data) {
    let m = getMean(data);
    return Math.sqrt(data.reduce(function (sq, n) {
            return sq + Math.pow(n - m, 2);
        }, 0) / (data.length - 1));
};

<span class="white">Simple function</span>
function std (array) {
  const n = array.length
  const mean = array.reduce((a, b) => a + b) / n
  return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)
}

bigArray = [1,3,2,4,5,6,5,3,4,5]
intv = 3
function makeStd(bigArray, intv) {     // the intv-1 is correct
          newArray = new Array(intv-1).fill(0)	newArray = newArray.concat(calcStd(bigArray, intv));	return newArray}
function calcStd(bigArray, intv) {	var stdArrar = [];	for (var i =0 ; i < (bigArray.length-intv+1); i++) {stdArrar[i] = Std(bigArray.slice(i, i+intv));} // points to indicator	return stdArrar;}
function Std(array) {  const n = array.length  const mean = array.reduce((a, b) => a + b) / n  return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)}
<h3>Standard deviation</h3>
const n = array.length;
const mean = array.reduce((a,b) => a+b)/n;
const s = Math.sqrt(array.map(x => Math.pow(x-mean,2)).reduce((a,b) => a+b)/n);

<h2>Javascript Tips</h2>

<a class="post-link" href="https://www.jstips.co/en/javascript/creating-immutable-objects-in-native-javascript/">Creating immutable objects in native JavaScript</a>
With the latest versions of JavaScript it’s possible to create immutable objects. 
I’ll walk you through how to do it in three different ways.


<a class="post-link" href="https://www.jstips.co/en/javascript/hash-maps-without-side-effects/">Hash maps without side effects</a>
Create hash maps(without side effects) using <code>Object.create(null)</code>.


<a class="post-link" href="https://www.jstips.co/en/javascript/looping-over-arrays/">Looping over arrays</a>
There’s a few methods for looping over arrays in Javascript. 
We’ll start with the classical ones and move towards additions made to the standard.


<a class="post-link" href="https://www.jstips.co/en/javascript/immutable-structures-and-cloning/">Immutable structures and cloning</a>
Object cloning is a tricky, full of edge-cases, endeavor. 
The reason is simple enough. 
Objects maintain internal state, and that is much abused. 
There are countless techniques, or better phrased, countless derivations of the same technique.


<a class="post-link" href="https://www.jstips.co/en/javascript/closures-inside-loops/">Closures inside loops</a>
Closure in a loop is an interesting topic and this is the tip to be a master of it


<a class="post-link" href="https://www.jstips.co/en/react/upping-performance-by-appending-keying/">Upping Performance by Appending/Keying</a>
React uses a mechanism called <strong>reconciliation</strong> for efficient rendering on update.




<a class="post-link" href="https://www.jstips.co/en/javascript/protocols-for-the-brave/">Protocols for the Brave</a>
You might have heard about the old ways gaining hype recently, and we don’t mean praying to the gods of the north. 
Today we’re introducing a feature found in Clojure which allows you to define interfaces for your classes.


<a class="post-link" href="https://www.jstips.co/en/react/adventurers-guide-to-react/">Adventurers Guide to React (Part I)</a>
So you’ve heard of this <em>React</em> thing, and you actually peeked at the docs, maybe even went through some of the pages. 
Then you suddenly came across mysterious runes that spelled somewhat along the lines of Webpack, Browserify, Yarn, Babel, NPM and yet…


<a class="post-link" href="https://www.jstips.co/en/more/vuejs-how-vuejs-makes-a-copy-update-replace-inside-the-data-binding/">VueJS, How VueJS makes a copy-update-replace inside the data binding.</a>
In this tip, I will introduce an example to show you how it might conflict with other software.


<a class="post-link" href="https://www.jstips.co/en/javascript/picking-and-rejecting-object-properties/">Picking and rejecting object properties</a>
Sometimes we need to whitelist certain attributes from an object, say we’ve got an array representation of a database table and we need to <code>select</code> just a few fields for some function.


<a class="post-link" href="https://www.jstips.co/en/react/enhancing-react-components-composition/">Enhancing React components, Composition</a>
React is extremely flexible in terms of how you can structure your components, but this pattern will make your apps more efficient.


<a class="post-link" href="https://www.jstips.co/en/javascript/why-you-should-use-Object.is()-in-equality-comparison/">Why you should use Object.is() in equality comparison</a>
A good solution for the looseness of equality comparisons in javascript


<a class="post-link" href="https://www.jstips.co/en/javascript/recursion-iteration-and-tail-calls-in-js/">Recursion, iteration and tail calls in JS</a>
If you’ve been on the business for some time, you have, most likely, come across the definition of recursion, for which the factorial of a given number <code>n! = n * n - 1 * ... 
* 1</code> is a standard example…


<a class="post-link" href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>
You’ve been building your React apps with a Redux store for quite a while, yet you feel awkward when your components update so often. 
You’ve crafted your state thoroughly, and your architecture is such that each component gets just what it needs from…


<a class="post-link" href="https://www.jstips.co/en/javascript/tapping-for-quick-debugging/">Tapping for quick debugging</a>
This little beastie here is tap. 
A really useful function for quick-debugging chains of function calls, anonymous functions and, actually, whatever you just want to print.


<a class="post-link" href="https://www.jstips.co/en/javascript/3-array-hacks/">3 Array Hacks</a>
Arrays are everywhere and with the new spread operators introduced in ECMAScript 6, you can do awesome things with them. 
In this post I will show you 3 useful tricks you can use when programming.


<a class="post-link" href="https://www.jstips.co/en/javascript/working-with-websocket-timeout/">Working With Websocket Timeout</a>
A trick to control the timeout


<a class="post-link" href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>
In this tip I am going to show how to pass data between scopes preventing unwanted scopes created by <code>ng-repeat</code> and <code>ng-if</code>


<a class="post-link" href="https://www.jstips.co/en/javascript/binding-objects-to-functions/">Binding objects to functions</a>
Understanding how to use <code>Bind</code> method with objects and functions in JavaScript


<a class="post-link" href="https://www.jstips.co/en/javascript/three-useful-hacks/">Three useful hacks</a>
Three very useful and syntax sugar hacks to speed up your development.


<a class="post-link" href="https://www.jstips.co/en/javascript/keyword-var-vs-let/">ES6, var vs let</a>
In this tip, I will introduce the block-scope difference between keyword var and let. 
Should I replace var by let? let’s take a look


<a class="post-link" href="https://www.jstips.co/en/javascript/break-continue-loop-functional/">Breaking or continuing loop in functional programming</a>
A common task for us is iterate over a list looking for a value or values, but we can’t return from inside a loop so we will have to iterate the whole array, even if the item we search is the first in…


<a class="post-link" href="https://www.jstips.co/en/javascript/comma-operaton-in-js/">Comma operator in JS</a>
When placed in an expression, it evaluates every expression from left to right and returns the last one.


<a class="post-link" href="https://www.jstips.co/en/javascript/copy-to-clipboard/">Copy to Clipboard</a>
This week I had to create a common “Copy to Clipboard” button, I’ve never created one before and I want to share how I made it.


<a class="post-link" href="https://www.jstips.co/en/javascript/make-easy-loop-on-array/">Create an easy loop using an array</a>
Sometimes, we need to loop endlessly over an array of items, like a carousel of images or an audio playlist. 
Here’s how to take an array and give it “looping powers”


<a class="post-link" href="https://www.jstips.co/en/javascript/use-optional-arguments/">How to use optional arguments in functions (with optional callback)</a>
You can make function arguments and callback optional


<a class="post-link" href="https://www.jstips.co/en/javascript/get-file-extension/">Get File Extension</a>
How to get the file extension more efficiently?


<a class="post-link" href="https://www.jstips.co/en/javascript/return-values-with-the-new-operator/">Return Values with the &#39;new&#39; Operator</a>
Understand what gets returned when using new vs. 
not using new.


<a class="post-link" href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>
You’ve been building your React apps with a Redux store for quite a while, yet you feel awkward when your components update so often. 
You’ve crafted your state thoroughly, and your architecture is such that each component gets just what it needs from…


<a class="post-link" href="https://www.jstips.co/en/javascript/DOM-event-listening-made-easy/">DOM event listening made easy</a>
An elegant and easy way to handle DOM events


<a class="post-link" href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>
In this tip I am going to show how to pass data between scopes preventing unwanted scopes created by <code>ng-repeat</code> and <code>ng-if</code>


<a class="post-link" href="https://www.jstips.co/en/javascript/helpful-console-log-hacks/">Helpful Console Logging Tricks</a>
Helpful logging techniques using coercion and conditonal breakpoints.


<a class="post-link" href="https://www.jstips.co/en/javascript/extract-unix-timestamp-easily/">Easiest way to extract unix timestamp in JS</a>
In Javascript you can easily get the unix timestamp


<a class="post-link" href="https://www.jstips.co/en/javascript/reminders-about-reduce-function-usage/">How to `reduce()` arrays</a>
Some reminders about using <code>reduce()</code>


<a class="post-link" href="https://www.jstips.co/en/javascript/basics-declarations/">Basics declarations</a>
Understand and work with declarations.


<a class="post-link" href="https://www.jstips.co/en/javascript/detect-document-ready-in-pure-js/">Detect document ready in pure JS</a>
The cross-browser way to check if the document has loaded in pure JavaScript


<a class="post-link" href="https://www.jstips.co/en/javascript/calculate-the-max-min-value-from-an-array/">Calculate the Max/Min value from an array</a>
Ways to use the built-in functions Math.max() and Math.min() with arrays of numbers


<a class="post-link" href="https://www.jstips.co/en/javascript/know-the-passing-mechanism/">Know the passing mechanism</a>
JavaScript technically only passes by value for both primitives and object (or reference) types. 
In case of reference types the reference value itself is passed by value.


<a class="post-link" href="https://www.jstips.co/en/javascript/use-destructuring-in-function-parameters/">Use destructuring in function parameters</a>
Did you know that you can use destructuring in function parameters?


<a class="post-link" href="https://www.jstips.co/en/javascript/preventing-unapply-attacks/">Preventing Unapply Attacks</a>
Freeze the builtin prototypes.


<a class="post-link" href="https://www.jstips.co/en/javascript/array-average-and-median/">Array average and median</a>
Calculate the average and median from array values


<a class="post-link" href="https://www.jstips.co/en/javascript/using-json-stringify/">Using JSON.Stringify</a>
Create string from selected properties of JSON object.


<a class="post-link" href="https://www.jstips.co/en/javascript/advanced-properties/">Advanced Javascript Properties</a>
How to add private properties, getters and setters to objects.


<a class="post-link" href="https://www.jstips.co/en/javascript/flattening-multidimensional-arrays-in-javascript/">Flattening multidimensional Arrays in JavaScript</a>
Three different solutions to merge multidimensional array into a single array.


<a class="post-link" href="https://www.jstips.co/en/javascript/deduplicate-an-array/">Deduplicate an Array</a>
How to remove duplicate elements, of different data types, from an Array.


<a class="post-link" href="https://www.jstips.co/en/javascript/observe-dom-changes/">Observe DOM changes in extensions</a>
When you develop extensions to existent sites it’s not so easy to play with DOM ‘cause of modern dynamic javascript.


<a class="post-link" href="https://www.jstips.co/en/javascript/assignment-shorthands/">Assignment Operators</a>
Assigning is very common. 
Sometimes typing becomes time consuming for us ‘Lazy programmers’. 
So, we can use some tricks to help us and make our code cleaner and simpler.


<a class="post-link" href="https://www.jstips.co/en/javascript/implementing-asynchronous-loops/">Implementing asynchronous loop</a>
You may run into problems while implementing asynchronous loops.


<a class="post-link" href="https://www.jstips.co/en/javascript/create-range-0/.n-easily-using-one-line/">Create array sequence `[0, 1, ..., N-1]` in one line</a>
Compact one-liners that generate ordinal sequence arrays


<a class="post-link" href="https://www.jstips.co/en/javascript/map-to-the-rescue-adding-order-to-object-properties/">Map() to the rescue; adding order to Object properties</a>
An Object it is an unordered collection of properties… that means that if you are trying to save ordered data inside an Object, you have to review it because properties order in objects are not guaranteed.


<a class="post-link" href="https://www.jstips.co/en/javascript/avoid-modifying-or-passing-arguments-into-other-functions-it-kills-optimization/">Avoid modifying or passing `arguments` into other functions — it kills optimization</a>
Within JavaScript functions, the variable name <code>arguments</code> lets you access all of the arguments passed to the function. 
<code>arguments</code> is an <em>array-like object</em>; <code>arguments</code> can be accessed using array notation, and it has the <em>length</em> property, but it doesn’t have many of the…


<a class="post-link" href="https://www.jstips.co/en/javascript/converting-truthy-falsy-values-to-boolean/">Converting truthy/falsy values to boolean</a>
Logical operators are a core part of JavaScript, here you can see a a way you always get a true or false no matter what was given to it.


<a class="post-link" href="https://www.jstips.co/en/javascript/speed-up-recursive-functions-with-memoization/">Speed up recursive functions with memoization</a>
Fibonacci sequence is very familiar to everybody. 
we can write the following function in 20 seconds.it works, but not efficient. 
it did lots of duplicate computing works, we can cache its previously computed results to speed it up.

<a class="post-link" href="https://www.jstips.co/en/javascript/short-circuit-evaluation-in-js/">Short circuit evaluation in JS.</a>
Short-circuit evaluation says, the second argument is executed or evaluated only if the first argument does not suffice to determine the value of the expression, when the first argument of the AND <code>&amp;&amp;</code> function evaluates to false, the overall value must be false,…


<a class="post-link" href="https://www.jstips.co/en/javascript/filtering-and-sorting-a-list-of-strings/">Filtering and Sorting a List of Strings</a>
You may have a big list of names you need to filter in order to remove duplicates and sort them alphabetically.


<a class="post-link" href="https://www.jstips.co/en/javascript/Using-immediately-invoked-function-expression/">Using immediately invoked function expression</a>
Called as “Iffy” ( IIFE - immediately invoked function expression) is an anonymous function expression that is immediately invoked and has some important uses in Javascript.


<a class="post-link" href="https://www.jstips.co/en/javascript/use_===_instead_of_==/">Use === instead of ==</a>
The <code>==</code> (or <code>!=</code>) operator performs an automatic type conversion if needed. 
The <code>===</code> (or <code>!==</code>) operator will not perform any conversion. 
It compares the value and the type, which could be considered faster (
<a href="https://www.jstips.cohttp://jsperf.com/strictcompare">jsPref</a>) than <code>==</code>.


<a class="post-link" href="https://www.jstips.co/en/javascript/converting-to-number-fast-way/">Converting to number fast way</a>
Converting strings to numbers is extremely common. 
The easiest and fastest way to achieve that would be using the + operator.


<a class="post-link" href="https://www.jstips.co/en/javascript/two-ways-to-empty-an-array/">Two ways to empty an array</a>
In JavaScript when you want to empty an array, there are a lot ways, but this is the most performant.


<a class="post-link" href="https://www.jstips.co/en/javascript/shuffle-an-array/">Shuffle an Array</a>
Fisher-Yates Shuffling it’s an algorithm to shuffle an array.


<a class="post-link" href="https://www.jstips.co/en/javascript/return-objects-to-enable-chaining-of-functions/">Return objects to enable chaining of functions</a>
When creating functions on an object in Object Oriented Javascript, returning the object in the function will enable you to chain functions together.


<a class="post-link" href="https://www.jstips.co/en/javascript/safe-string-concatenation/">Safe string concatenation</a>
Suppose you have a couple of variables with unknown types and you want to concatenate them in a string. 
To be sure that the arithmetical operation is not be applied during concatenation, use concat


<a class="post-link" href="https://www.jstips.co/en/javascript/rounding-the-fast-way/">Truncating the fast (but risky) way</a>
.<code>~~X</code> is usually a faster <code>Math.trunc(X)</code>, but can also make your code do nasty things.


<a class="post-link" href="https://www.jstips.co/en/javascript/nodejs-run-a-module-if-it-is-not-required/">Node.js - Run a module if it is not `required`</a>
In node, you can tell your program to do two different things depending on whether the code is run from <code>require('./something.js')</code> or <code>node something.js</code>. 
This is useful if you want to interact with one of your modules independently.


<a class="post-link" href="https://www.jstips.co/en/javascript/passing-arguments-to-callback-functions/">Passing arguments to callback functions</a>
By default you cannot pass arguments to a callback function, but you can take advantage of the closure scope in Javascript to pass arguments to callback functions.


<a class="post-link" href="https://www.jstips.co/en/javascript/even-simpler-way-of-using-indexof-as-a-contains-clause/">Even simpler way of using `indexOf` as a contains clause</a>
JavaScript by default does not have a contains method. 
And for checking existence of a substring in a string or an item in an array you may do this.


<a class="post-link" href="https://www.jstips.co/en/javascript/fat-arrow-functions/">Fat Arrow Functions</a>
Introduced as a new feature in ES6, fat arrow functions may come as a handy tool to write more code in fewer lines
fat arrow functions	or ‘lambda expressions’, or ‘anonymous functions’
It is called anonymous, as arrow functions have no descriptive function name.
a.map(x =>x*2); // 2, 6, 10



<a class="post-link" href="https://www.jstips.co/en/javascript/tip-to-measure-performance-of-a-javascript-block/">Tip to measure performance of a javascript block</a>
For quickly measuring performance of a javascript block, we can use the console functions like <code>console.time(label)</code> and <code>console.timeEnd(label)</code>


<a class="post-link" href="https://www.jstips.co/en/javascript/pseudomandatory-parameters-in-es6-functions/">Pseudomandatory parameters in ES6 functions</a>
In many programming languages the parameters of a function are by default mandatory and the developer has to explicitly define that a parameter is optional.


<a class="post-link" href="https://www.jstips.co/en/javascript/hoisting/">Hoisting</a>
Understanding hoisting will help you organize your function scope.


<a class="post-link" href="https://www.jstips.co/en/javascript/check-if-a-property-is-in-a-object/">Check if a property is in a Object</a>
These are ways to check if a property is present in an object.


<a class="post-link" href="https://www.jstips.co/en/javascript/template-strings/">Template Strings</a>
As of ES6, JS now has template strings as an alternative to the classic end quotes strings.


<a class="post-link" href="https://www.jstips.co/en/javascript/converting-a-node-list-to-an-array/">Converting a Node List to an Array</a>
Here’s a quick, safe, and reusable way to convert a node list into an array of DOM elements.


<a class="post-link" href="https://www.jstips.co/en/javascript/use-strict-and-get-lazy/">use strict and get lazy</a>
Strict-mode JavaScript makes it easier for the developer to write “secure” JavaScript.


<a class="post-link" href="https://www.jstips.co/en/javascript/writing-a-single-method-for-arrays-and-a-single-element/">Writing a single method for arrays and a single element</a>
Rather than writing separate methods to handle an array and a single element parameter, write your functions so they can handle both. 
This is similar to how some of jQuery’s functions work (<code>css</code> will modify everything matched by the selector).


<a class="post-link" href="https://www.jstips.co/en/javascript/differences-between-undefined-and-null/">Differences between `undefined` and `null`</a>
Understanding the differences between <code>undefined</code> and <code>null</code>.


<a class="post-link" href="https://www.jstips.co/en/javascript/sorting-strings-with-accented-characters/">Sorting strings with accented characters</a>
Javascript has a native method <strong>sort</strong> that allows sorting arrays. 
Doing a simple <code>array.sort()</code> will treat each array entry as a string and sort it alphabetically. 
But when you try order an array of non ASCII characters you will obtain a strange result….


<a class="post-link" href="https://www.jstips.co/en/javascript/improve-nested-conditionals/">Improve Nested Conditionals</a>
How can we improve and make a more efficient nested <code>if</code> statement in javascript?


<a class="post-link" href="https://www.jstips.co/en/react/keys-in-children-components-are-important/">Keys in children components are important</a>
The key is an attribute that you must pass to all components created dynamically from an array. 
It’s a unique and constant id that React uses to identify each component in the DOM and to know whether it’s a different component or the…


<a class="post-link" href="https://www.jstips.co/en/angular/angularjs-digest-vs-apply/">AngularJs - `$digest` vs `$apply`</a>
JavaScript modules and build steps are getting more numerous and complicated, but what about boilerplate in new frameworks?


<a class="post-link" href="https://www.jstips.co/en/javascript/insert-item-inside-an-array/">Insert item inside an Array</a>
Inserting an item into an existing array is a daily common task. 
You can add elements to the end of an array using push, to the beginning using unshift, or to the middle using splice.







<a class="post-link" href="https://www.jstips.co/en/javascript/creating-immutable-objects-in-native-javascript/">Creating immutable objects in native JavaScript</a>

<a class="post-link" href="https://www.jstips.co/en/javascript/hash-maps-without-side-effects/">Hash maps without side effects</a>

<a class="post-link" href="https://www.jstips.co/en/javascript/looping-over-arrays/">Looping over arrays</a>

<a class="post-link" href="https://www.jstips.co/en/javascript/immutable-structures-and-cloning/">Immutable structures and cloning</a>

<a class="post-link" href="https://www.jstips.co/en/javascript/closures-inside-loops/">Closures inside loops</a>

<a class="post-link" href="https://www.jstips.co/en/react/upping-performance-by-appending-keying/">Upping Performance by Appending/Keying</a>

<a class="post-link" href="https://www.jstips.co/en/react/adventurers-guide-to-react/">Adventurers Guide to React (Part I)</a>

<a class="post-link" href="https://www.jstips.co/en/react/enhancing-react-components-composition/">Enhancing React components, Composition</a>

<a class="post-link" href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>

<a class="post-link" href="https://www.jstips.co/en/react/state-to-props-maps-with-memory/">State to Props maps with memory</a>

<a class="post-link" href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>

<a class="post-link" href="https://www.jstips.co/en/angular/preventing-unwanted-scopes-creation-in-angularjs/">Preventing Unwanted Scopes Creation in AngularJs</a>

<a class="post-link" href="https://www.jstips.co/en/angular/angularjs-digest-vs-apply/">AngularJs - `$digest` vs `$apply`</a>

<a class="post-link" href="https://www.jstips.co/en/more/vuejs-how-vuejs-makes-a-copy-update-replace-inside-the-data-binding/">VueJS, How VueJS makes a copy-update-replace inside the data binding.</a>

<h2>Write a &lt;script> tag inside a &lt;script> tag</h2>
&lt;script type="text/x-jQuery-tmpl">
    var gdsize = 1025;          
    if(window.innerWidth>=gdsize) {

    &lt;script type="text/javascript">
        &lt;!-- Some javascript here -->
        alert = {"message: Geek Dashboard uses cookies"};
        }
    <span class="gold">{{html "&lt;/sc"+"ript>"}}</span>
&lt;/script>

You can use {{html "&lt;/sc"+"ript>"}} in place of &lt;/script>
Explanation:

When you use a &lt;/script> HTML tag inside a quoted (literal) string, the tag is treated as a closing tag rather than as a portion of the string. 

So you cannot directly use the &lt;/script> tag inside a script section.

One work-around is to escape the &lt;/script> tags and/or split up the &lt;script> tags:

var scriptEnd = "&lt;\scr" + "ipt>";
document.write(scriptEnd);
<h2>JavaScript Multiplication Table</h2>
Create a simple multiplication table asking the user the number of rows and columns he wants. 

Solution: 
&lt;html>
&lt;head>
 &lt;title>Multiplication Table&lt;/title>
 &lt;script type="text/javascript">
   var rows = prompt("How many rows for your multiplication table?");
   var cols = prompt("How many columns for your multiplication table?");
   if(rows == "" || rows == null)
  		 rows = 10;
   if(cols== "" || cols== null)
  		 cols = 10;
   createTable(rows, cols);
   function createTable(rows, cols)
   {
     var j=1;
     var output = "&lt;table border='1' width='500' cellspacing='0'cellpadding='5'>";
     for(i=1;i&lt;=rows;i++)
     {
   	output = output + "&lt;tr>";
       while(j&lt;=cols)
       {
 		  output = output + "&lt;td>" + i*j + "&lt;/td>";
  		  j = j+1;
  		}
  		 output = output + "&lt;/tr>";
  		 j = 1;
   }
   output = output + "&lt;/table>";
   document.write(output);
   }
 &lt;/script>
&lt;/head>
&lt;body>
&lt;/body>
&lt;/html>

<h2>JS Forms Example:</h2>
Create a sample form program that collects the first name, last name, email, user id, password and confirms password from the user. 

All the inputs are mandatory and email address entered should be in correct format. 

Also, the values entered in the password and confirm password textboxes should be the same. 
After validating using JavaScript, In output display proper error messages in red color just next to the textbox where there is an error. 

Solution with Source Code: 
&lt;html>
&lt;head>
 &lt;title>Form Validation&lt;/title>
 &lt;script type="text/javascript">
   var divs = new Array();
   divs[0] = "errFirst";
   divs[1] = "errLast";
   divs[2] = "errEmail";
   divs[3] = "errUid";
   divs[4] = "errPassword";
   divs[5] = "errConfirm";
   function validate(){
     var inputs = new Array();
     inputs[0] = document.getElementById('first').value;
     inputs[1] = document.getElementById('last').value;
     inputs[2] = document.getElementById('email').value;
     inputs[3] = document.getElementById('uid').value;
     inputs[4] = document.getElementById('password').value;
     inputs[5] = document.getElementById('confirm').value;
     var errors = new Array();
     errors[0] = "&lt;span style='color:red'>Please enter your first name!&lt;/span>";
     errors[1] = "&lt;span style='color:red'>Please enter your last name!&lt;/span>";
     errors[2] = "&lt;span style='color:red'>Please enter your email!&lt;/span>";
     errors[3] = "&lt;span style='color:red'>Please enter your user id!&lt;/span>";
     errors[4] = "&lt;span style='color:red'>Please enter your password!&lt;/span>";
     errors[5] = "&lt;span style='color:red'>Please confirm your password!&lt;/span>";
     for (i in inputs)
     {
       var errMessage = errors[i];
       var div = divs[i];
       if (inputs[i] == "")
       	document.getElementById(div).innerHTML = errMessage;
       else if (i==2)
       {
         var atpos=inputs[i].indexOf("@");
         var dotpos=inputs[i].lastIndexOf(".");
         if (atpos&lt;1 || dotpos&lt;atpos+2 || dotpos+2>=inputs[i].length)
       	document.getElementById('errEmail').innerHTML = "&lt;span style='color: red'>Enter a valid email address!&lt;/span>";
         else
       	document.getElementById(div).innerHTML = "OK!";
       }
       else if (i==5)
       {
         var first = document.getElementById('password').value;
         var second = document.getElementById('confirm').value;
         if (second != first)
       	document.getElementById('errConfirm').innerHTML = "&lt;span style='color: red'>Your passwords don't match!&lt;/span>";
         else
      		document.getElementById(div).innerHTML = "OK!";
       }
       else
       	document.getElementById(div).innerHTML = "OK!";
      }
    }
       function finalValidate()
       {
         var count = 0;
         for(i=0;i&lt;6;i++)
         {
           var div = divs[i];
           if(document.getElementById(div).innerHTML == "OK!")
           count = count + 1;
         }
         if(count == 6)
         	document.getElementById("errFinal").innerHTML = "All the data you entered is correct!!!";
       }
  &lt;/script>
&lt;/head>
&lt;body>&lt;table id="table1">
     &lt;tr>
       &lt;td>First Name:&lt;/td>
       &lt;td>&lt;input type="text" id="first" onkeyup="validate();" />&lt;/td>
       &lt;td>&lt;div id="errFirst">&lt;/div>&lt;/td>
     &lt;/tr>
     &lt;tr>
       &lt;td>Last Name:&lt;/td>
       &lt;td>&lt;input type="text" id="last" onkeyup="validate();"/>&lt;/td>
       &lt;td>&lt;div id="errLast">&lt;/div>&lt;/td>
     &lt;/tr>
     &lt;tr>
       &lt;td>Email:&lt;/td>
       &lt;td>&lt;input type="text" id="email" onkeyup="validate();"/>&lt;/td>
       &lt;td>&lt;div id="errEmail">&lt;/div>&lt;/td>
     &lt;/tr>
     &lt;tr>
       &lt;td>User Id:&lt;/td>
       &lt;td>&lt;input type="text" id="uid" onkeyup="validate();"/>&lt;/td>
       &lt;td>&lt;div id="errUid">&lt;/div>&lt;/td>
     &lt;/tr>
     &lt;tr>
       &lt;td>Password:&lt;/td>
       &lt;td>&lt;input type="password" id="password" onkeyup="validate();"/>&lt;/td>
       &lt;td>&lt;div id="errPassword">&lt;/div>&lt;/td>
     &lt;/tr>
     &lt;tr>
       &lt;td>Confirm Password:&lt;/td>
       &lt;td>&lt;input type="password" id="confirm" onkeyup="validate();"/>&lt;/td>
       &lt;td>&lt;div id="errConfirm">&lt;/div>&lt;/td>
     &lt;/tr>
     &lt;tr>
       &lt;td>&lt;input type="button" id="create" value="Create" onclick="validate();finalValidate();"/>&lt;/td>
       &lt;td>&lt;div id="errFinal">&lt;/div>&lt;/td>
     &lt;/tr>&lt;/table>
&lt;/body>
&lt;/html>

<h2>POPUP Message using Event:</h2>
Display a simple message "Welcome!!!" on your demo webpage and when the user hovers over the message, a popup should be displayed with a message "Welcome to my WebPage!!!".

Solution: &lt;html>&lt;head>&lt;title>Event!!!&lt;/title>&lt;script type="text/javascript">function trigger(){document.getElementById("hover").addEventListener("mouseover", popup);function popup(){alert("Welcome to my WebPage!!!");}}&lt;/script>&lt;style>p{     font-size:50px;     position: fixed;     left: 550px;     top: 300px;}&lt;/style>&lt;/head>&lt;body  onload="trigger();">&lt;p id="hover">Welcome!!!&lt;/p>&lt;/body>&lt;/html>

<h2>Argument Example</h2>
The arguments object is an <strong>array-like object</strong> <em>(in that the structure of the object is similar to that of an array; however it should not be considered an array as it has all the functionality of an object)</em> that stores all of the arguments that you passed to a function and is proprietary to that function in particular. 


If you were to pass 3 arguments to a function, say <code>storeNames()</code>, those 3 arguments would be stored inside an object called <strong>arguments</strong> and it would look like this when we pass the arguments <code>storeNames("Mulder", "Scully", "Alex Krycek")</code> to our function:
<ul><li>First, we declare a function and make it return the arguments object.</li>
<li>Then, when we execute that function with <strong>n arguments</strong>, 3 in this case, it will return the object to us and it will <strong>look like</strong> an array. 

We can convert it to an array, but more on that later…</li>
</ul>
<code>function storeNames() { return arguments; }</code>

<code>// If we execute the following line in the console:
storeNames("Mulder", "Scully", "Alex Kryceck");
// The output will be { '0': 'Mulder', '1': 'Scully', '2': 'Alex Kryceck' }</code>

<h2>Treat it as an array</h2>
You can invoke arguments by using <code>arguments[n]</code> (where <em>n</em> is the index of the argument in the array-like object). 

But if you want to use it as an array for iteration purposes or applying array methods to it, you need to <em>convert it to an array</em> by declaring a variable and using the Array.prototype.slice.call method (because <em>arguments</em> is not an array):

<code>var args = Array.prototype.slice.call(arguments);

// or the es6 way:
var args = Array.from(arguments)</code>
Since <strong>slice()</strong> has two (the parameter <strong>end</strong> is optional) parameters. 

You can grab a certain portion of the arguments by specifying the beginning and the ending of your portion (using the <em>slice.call()</em> method renders these two parameters optional, not just <em>end</em>). 

Check out the following code:

<code>function getGrades() {
    var args = Array.prototype.slice.call(arguments, 1, 3);
    return args;
}

// Let's output this!
console.log(getGrades(90, 100, 75, 40, 89, 95));

// OUTPUT SHOULD BE: //
// [100, 75] &lt;- Why? Because it started from index 1 and stopped at index 3
// so, index 3 (40) wasn't taken into consideration.
//
// If we remove the '3' parameter, leaving just (arguments, 1) we'd get
// every argument from index 1: [100, 75, 40, 89, 95].</code>
<h3><strong>Optimization issues with Array.slice()</strong></h3>
There is a little problem: it’s not recommended to use slice in the arguments object (optimization reasons)…
<strong>Important</strong>: You should not slice on arguments because it prevents optimizations in JavaScript engines (V8 for example). 

Instead, try constructing a new array by iterating through the arguments object.
So, what other method is available to convert <em>arguments</em> to an array? I recommend the for-loop (not the for-in loop). 

You can do it like this:

<code>var args = []; // Empty array, at first.
for (var i = 0; i &lt; arguments.length; i++) {
    args.push(arguments[i])
} // Now 'args' is an array that holds your arguments.</code>
<a>For more information on the optimization issues:</a><br><a href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments">Optimization Killers: Managing Arguments</a>
<h3><strong>ES6 rest parameter as a way to circumvent the arguments object</strong></h3>
In ES2015/ES6 it is possible to use the rest parameter (<code>...</code>) instead of the arguments object in most places. 

Say we have the following function (non-ES6):

function getIntoAnArgument() {
    var args = arguments.slice();
    args.forEach(function(arg) {
        console.log(arg);
    });
}</code>
That function can be replaced in ES6 by:

function getIntoAnArgument(...args) {
    args.forEach(arg =&gt; console.log(arg));
}</code>
Note that we also used an arrow function to shorten the forEach callback!
The arguments object is not available inside the body of an arrow function.
The rest parameter must always come as the last argument in your function definition.<br><code>function getIntoAnArgument(arg1, arg2, arg3, ...restOfArgs /*no more arguments allowed here*/) { //function body }</code>

<h2>Arithmetic Operation Example</h2>
JavaScript provides the user with five arithmetic operators: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> and <code>%</code>. 

The operators are for addition, subtraction, multiplication, division and remainder, respectively.

+	Addition
-	Subtraction
*	Multiplication
**	Exponentiation
/	Division
%	Modulus (Remainder)
++	Increment
--	Decrement

<h2>Addition</h2>
<code>a + b</code>
true + 2       // interprets true as 1 and returns 3
false + 5      // interprets false as 0 and returns 5
true + "bar"   // concatenates the boolean value and returns "truebar"
5 + "foo"      // concatenates the string and the number and returns "5foo"
"foo" + "bar"  // concatenates the strings and returns "foobar"
<em>Hint:</em> There is a handy <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Increment_(" rel="nofollow">increment</a> operator that is a great shortcut when you’re adding numbers by 1.

Increment & Decrement
Increment — x++ or ++x
Decrement — x-- or --x

Using ++/-- After the Operand
When you use the increment/decrement operator after the operand, the value will be returned before the operand is increased/decreased.

// Increment
let a = 1;
console.log(a++);    // 1
console.log(a);      // 2
// Decrement
let b = 1;
console.log(b--);    // 1
console.log(b);      // 0

Using ++/-- Before the Operand
If you’d rather make the variable increment/decrement before returning, you simply have to use the increment/decrement operator before the operand:
// Increment
let a = 1;
console.log(++a);    // 2
console.log(a);      // 2
// Decrement
let b = 1;
console.log(--b);    // 0
console.log(b);      // 0

<h2>Subtraction</h2>
<code>a - b</code>

false - 5  // interprets false as 0 and returns -5
true + 3   // interprets true as 1 and returns 4
5 + "foo"  // returns NaN (Not a Number)
<em>Hint:</em> There is a handy <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Decrement_(--" rel="nofollow">decrement</a> operator that is a great shortcut when you’re subtracting numbers by 1.

<h2>Multiplication</h2>
<code>a * b</code>

false * 5            // interprets false as 0 and returns 0
true * 3             // interprets true as 1 and returns 3
5 * "foo"            // returns NaN (Not a Number)
Infinity * 0         // returns NaN
Infinity * Infinity  // returns Infinity
<em>Hint:</em> When making calculations it is possible to use parentheses to prioritize which numbers should be multiplied together.

<h2>Division</h2>
<code>a / b</code>

3 / 0                // returns Infinity
3.0 / 0.0            // returns Infinity
-3 / 0               // returns -Infinity
false / 5            // interprets false as 0 and returns 0
true / 2             // interprets true a 1 and returns 0.5
Infinity / Infinity  // returns NaN

<h2>Remainder</h2>
<code>a % b</code>

3 % 2          // returns 1
true % 5       // interprets true as 1 and returns 1
false % 4      // interprets false as 0 and returns 0
3 % "bar"      // returns NaN

<h2>Increment</h2>
<code>a++ or ++a</code>

<code>// Postfix 
x = 3; // declare a variable 
y = x++; // y = 4, x = 3 

// Prefix 
var a = 2; 
b = ++a; // a = 3, b = 3</code>

<h2>Decrement</h2>
<code>a-- or --a</code>

<code>// Postfix 
x = 3; // declare a variable 
y = x—; // y = 3, x = 3 

// Prefix 
var a = 2; 
b = —a; // a = 1, b = 1</code>
<em>Important:</em> As you can see, you <strong>cannot</strong> perform any sort of operations on <code>Infinity</code>.
<h3>Arrow Function Example</h3>
Arrow functions are a new ES6 syntax for writing JavaScript function expressions. 

The shorter syntax saves time, as well as simplifying the function scope.

<h2><span class="red">What are arrow functions?</span> <code>=&gt;</code></h2>
An arrow function expression is a more concise syntax for writing function expressions using a “fat arrow” token (<code>=&gt;</code>).
<h3><strong>The basic syntax</strong></h3>
Below is a basic example of an arrow function:

<code>// ES5 syntax
var multiply = function(x, y) { return x * y;};

// ES6 arrow function
var multiply = (x, y) =&gt; { return x * y; };

// Or even simpler
var multiply = (x, y) =&gt; x * y;</code>
You no longer need the <code>function</code> and <code>return</code> keywords, or even the curly brackets.
<h3><strong>A simplified <code>this</code></strong></h3>
Before arrow functions, new functions defined their own <code>this</code> value. 

To use <code>this</code> inside a traditional function expression, we have to write a workaround like so:

<code>// ES5 syntax
function Person() {
  // we assign `this` to `self` so we can use it later
  var self = this;
  self.age = 0;

  setInterval(function growUp() {
    // `self` refers to the expected object
    self.age++;
  }, 1000);
}</code>
An arrow function doesn’t define its own <code>this</code> value, it inherits <code>this</code> from the enclosing function:

<code>// ES6 syntax
function Person(){
  this.age = 0;
  setInterval(() =&gt; {
    // `this` now refers to the Person object, brilliant!
    this.age++;
  }, 1000);
}

var p = new Person();</code>

<h2>Assignment Operators</h2>

<h2>Assignment Operator Example</h2>
Assignment operators, as the name suggests, assign (or re-assign) values to a variable. 

While there are quite a few variations on the assignment operators, they all build off of the basic assignment operator.
Syntax = <strong>y;DescriptionNecessityxVariableRequired=Assignment operatorRequiredyValue to assign to variableRequired</strong>

<b>Examples</b>

let initialVar = 5;   // Variable initialization requires the use of an assignment operator

let newVar = 5;
newVar = 6;   // Variable values can be modified using an assignment operator

<h2>Variations</h2>
The other assignment operators are a shorthand for performing some operation using the variable (indicated by x above) and value (indicated by y above) and then assigning the result to the variable itself.
For example, below is the syntax for the addition assignment operator:

x += y;
This is the same as applying the addition operator and reassigning the sum to the original variable (that is, x), which can be expressed by the following code:

x = x + y;
To illustrate this using actual values, here is another example of using the addition assignment operator:

let myVar = 5;   // value of myVar: 5
myVar += 7;   // value of myVar: 12 = 5 + 7

<h2>Boolean Example</h2>
Booleans are a primitive datatype commonly used in computer programming languages. 

By definition, a boolean has two possible values: <code>true</code> or <code>false</code>.
In JavaScript, there is often implicit type coercion to boolean. 

If for example you have an if statement which checks a certain expression, that expression will be coerced to a boolean:

<code>var a = 'a string';
if (a) {
  console.log(a); // logs 'a string'
}</code>
There are only a few values that will be coerced to false:
<ul><li>false (not really coerced, as it already is false)</li>
<li>null</li>
<li>undefined</li>
<li>NaN</li>
<li>0</li>
<li>” (empty string)</li>
</ul>All other values will be coerced to true. 

When a value is coerced to a boolean, we also call that either ‘falsy’ or ‘truthy’.
One way that type coercion is used is with the use of the or (<code>||</code>) and and (<code>&amp;&amp;</code>) operators:

<code>var a = 'word';
var b = false;
var c = true;
var d = 0
var e = 1
var f = 2
var g = null

console.log(a || b); // 'word'
console.log(c || a); // true
console.log(b || a); // 'word'
console.log(e || f); // 1
console.log(f || e); // 2
console.log(d || g); // null
console.log(g || d); // 0
console.log(a &amp;&amp; c); // true
console.log(c &amp;&amp; a); // 'word'</code>
As you can see, the <em>or</em> operator checks the first operand. 

If this is true or truthy, it returns it immediately (which is why we get ‘word’ in the first case &amp; true in the second case). 

If it is not true or truthy, it returns the second operand (which is why we get ‘word’ in the third case).
With the and operator it works in a similar way, but for ‘and’ to be true, both operands need to be truthy. 

So it will always return the second operand if both are true/truthy, otherwise it will return false. 

That is why in the fourth case we get true and in the last case we get ‘word’.

<h2>The Boolean Object</h2>
There is also a native JavaScript <code>Boolean</code> object that wraps around a value and converts the first parameter to a boolean value. 

If a value is omitted or falsy –0, -0, <code>null</code>, <code>false</code>, <code>NaN</code>, <code>undefined</code>, or an empty string (<code>""</code>) – the object's value is false. 

Pass all other values, including the string <code>"false"</code>, and the object's value is set to true.
Note that primitive Boolean values (<code>true</code> and <code>false</code>) are different than those of the Boolean object.
<h3>More Details</h3>
Remember that any object, the value of which is not <code>undefined</code> or <code>null</code>, evaluates to true if used in a conditional statement. 

For example, even though this <code>Boolean</code> object is explicitly set to false, it evaluates to true and the code is executed:

<code>var greeting = new Boolean(false);
if (greeting) {
  console.log("Hello world");
}

// Hello world</code>
This doesn't apply to boolean primitives:

<code>var greeting = false;
if (greeting) {
  console.log("Hello world"); // code will not run
}</code>
To convert a non-boolean value to a boolean, use <code>Boolean</code> as a function rather than as an object: 

<code>var x = Boolean(expression);     // preferred use as a function
var x = new Boolean(expression); // don't do it this way</code>

<h2>Callback Functions</h2>
<h3>Functions are Objects</h3>
The first thing we need to know is that in JavaScript, functions are first-class objects. 

As such, we can work with them in the same way we work with other objects, like assigning them to variables and passing them as arguments into other functions. 

This is important, because it’s the latter technique that allows us to extend functionality in our applications.

<h2>Callback Function</strong> Example</h2>
A <strong>callback function</strong> is a function that is passed <em>as an argument</em> to another function, to be “called back” at a later time. 


A function that accepts other functions as arguments is called a <strong>higher-order function</strong>, which contains the logic for <em>when</em> the callback function gets executed. 

It’s the combination of these two that allow us to extend our functionality.
To illustrate callbacks, let’s start with a simple example:

<code>function createQuote(quote, callback){ // here callback is variable
  var myQuote = "Like I always say, " + quote;
  callback(myQuote); // 2, this call is not fixed, depend on the true calling command
}

function logQuote(quote){
  console.log(quote);
}

createQuote("eat your vegetables!", logQuote); // 1

// Result in console: 
// Like I always say, eat your vegetables!</code>
In the above example, <code>createQuote</code> is the higher-order function, which accepts two arguments, the second one being the callback. 

The <code>logQuote</code> function is being used to pass in as our callback function. 

When we execute the <code>createQuote</code> function <em>(1)</em>, notice that we are <em>not appending</em> parentheses to <code>logQuote</code> when we pass it in as an argument. 

This is because we do not want to execute our callback function right away, we simply want to pass the function definition along to the higher-order function so that it can be executed later.
Also, we need to ensure that if the callback function we pass in expects arguments,  we supply those arguments when executing the callback <em>(2)</em>. 

In the above example, that would be the <code>callback(myQuote);</code>statement, since we know that <code>logQuote</code> expects a quote to be passed in.
Additionally, we can pass in anonymous functions as callbacks. 

The below call to <code>createQuote</code> would have the same result as the above example:

<code>createQuote("eat your vegetables!", function(quote){ 
  console.log(quote); 
});</code>
Incidentally, you don’t <em>have</em> to use the word “callback” as the name of your argument. 

JavaScript just needs to know that it’s the correct argument name. 

Based on the above example, the below function will behave in exactly the same manner.

<code>function createQuote(quote, functionToCall) { 
  var myQuote = "Like I always say, " + quote;
  functionToCall(myQuote);
}</code>

<h2>Why use Callbacks?</h2>
Most of the time we are creating programs and applications that operate in a <strong>synchronous</strong> manner. 

In other words, some of our operations are started only after the preceding ones have completed. 


Often when we request data from other sources, such as an external API, we don’t always know <em>when</em> our data will be served back. 

In these instances we want to wait for the response, but we don’t always want our entire application grinding to a halt while our data is being fetched. 

These situations are where callback functions come in handy.
Let’s take a look at an example that simulates a request to a server:

<code>function serverRequest(query, callback){
  setTimeout(function(){
    var response = query + "full!";
    callback(response);
  },5000);
}

function getResults(results){
  console.log("Response from the server: " + results);
}

serverRequest("The glass is half ", getResults);

// Result in console after 5 second delay:
// Response from the server: The glass is half full!</code>
In the above example, we make a mock request to a server. 

After 5 seconds elapse, the response is modified and then our callback function <code>getResults</code> gets executed. 

To see this in action, you can copy/paste the above code into your browser’s developer tool and execute it.
Also, if you are already familiar with <code>setTimeout</code>, then you’ve been using callback functions all along. 

The anonymous function argument passed into the above example’s <code>setTimeout</code> function call is also a callback! So the example’s original callback is actually executed by another callback. 

Be careful not to nest too many callbacks if you can help it, as this can lead to something called “callback hell”! As the name implies, it isn’t a joy to deal with.
<code>function print(callback) {  
    callback();
}</code>

The print( ) function takes another function as a parameter and calls it inside. 

This is valid in JavaScript and we call it a “callback”. 

So a function that is passed to another function as a parameter is a callback function. 

But that’s not all.

Callbacks make sure that a function is not going to run before a task is completed but will run right after the task has completed. 

It helps us develop asynchronous JavaScript code and keeps us safe from problems and errors.

In JavaScript, the way to create a callback function is to pass it as a parameter to another function, and then to call it back right after something has happened or some task is completed. 


<h2>How to create a Callback</h2>
example
We want to log a message to the console but it should be there after 3 seconds.

<code>const message = function() {  
    console.log("This message is shown after 3 seconds");
}
setTimeout(message, 3000);</code>

There is a built-in method in JavaScript called “setTimeout”, which calls a function or evaluates an expression after a given period of time (in milliseconds). 

So here, the “message” function is being called after 3 seconds have passed. 

(1 second = 1000 milliseconds)

In other words, the message function is being called after something happened (after 3 seconds passed for this example), but not before. 

So the message function is an example of a callback function.
<h3>What is an Anonymous Function?</h3>
Alternatively, we can define a function directly inside another function, instead of calling it. 

It will look like this:

<code>setTimeout(function() {  
    console.log("This message is shown after 3 seconds");
}, 3000);</code>

As we can see, the callback function here has no name and a function definition without a name in JavaScript is called as an “anonymous function”. 

This does exactly the same task as the example above.
<h3>Callback as an Arrow Function</h3>
If you prefer, you can also write the same callback function as an ES6 arrow function, which is a newer type of function in JavaScript:

<code>setTimeout(() =&gt; { 
    console.log("This message is shown after 3 seconds");
}, 3000);</code>
<h2>What about Events?</h2>
JavaScript is an event-driven programming language. 

We also use callback functions for event declarations. 


For example, let’s say we want users to click on a button:
<code>&lt;button&gt;Click here&lt;/button&gt;</code>

This time we will see a message on the console only when the user clicks on the button:

<code>document.queryselector("#callback-btn")
    .addEventListener("click", function() {    
      console.log("User has clicked on the button!");
});</code>

So here we select the button first with its id, and then we add an event listener with the addEventListener method. 

It takes 2 parameters. 

The first one is its type, “click”, and the second parameter is a callback function, which logs the message when the button is clicked.

As you can see, callback functions are also used for event declarations in JavaScript.

<h2>JavaScript Class Example</h2>
<a href="JavaScript Class.html" class="whitebut ">JavaScript Class</a>

JavaScript does not have the concept of classes inherently.
But we could simulate the functionalities of a class by taking advantage of the prototypal nature of JavaScript.
This section assumes that you have a basic understanding of <a href="https://guide.freecodecamp.org/javascript/prototypes">prototypes</a>.
For the sake of clarity, let us assume that we want to create a class which can do the following

<code>var p = new Person('James','Bond'); // create a new instance of Person classp.log() // Output: 'I am James Bond' // Accessing a function in the class// Using setters and getters p.profession = 'spy'p.profession // output: James bond is a spy</code>
<h3><strong>Using class keyword</strong></h3>
Like in any other programming language, you can now use the <code>class</code> keyword to create a class.
This is not supported in older browsers and was introduced in ECMAScript 2015.
<code>class</code> is just a syntactic sugar over JavaScript’s existing prototype-based inheritance model.
In general, programmers use the following ways to create a class in JavaScript.
<h3><strong>Using methods added to prototypes:</strong></h3>
Here, all the methods are added to prototype

<code>function Person(firstName, lastName) {
    this._firstName = firstName;
    this._lastName = lastName;
}

Person.prototype.log = function() {
    console.log('I am', this._firstName, this._lastName);
}

// This line adds getters and setters for the profession object. 

Note that in general you could just write your own get and set functions like the 'log' method above.
// Since in this example we are trying the mimic the class above, we try to use the getters and setters property provided by JavaScript
Object.defineProperty(Person.prototype, 'profession', {
    set: function(val) {
        this._profession = val;
    },
    get: function() {
        console.log(this._firstName, this._lastName, 'is a', this._profession);
    }
})</code>
You could also write prototype methods over function <code>Person</code> as below:

<code>Person.prototype = {
    log: function() {
        console.log('I am ', this._firstName, this._lastName);
    }
    set profession(val) {
        this._profession = val;
    }

    get profession() {
        console.log(this._firstName, this._lastName, 'is a', this._profession);
    }

}</code>
<h3><strong>Using methods added internally</strong></h3>
Here the methods are added internally instead of prototype:

<code>function Person(firstName, lastName) {
    this._firstName = firstName;
    this._lastName = lastName;

    this.log = function() {
        console.log('I am ', this._firstName, this._lastName);
    }

    Object.defineProperty(this, 'profession', {
        set: function(val) {
            this._profession = val;
        },
        get: function() {
            console.log(this._firstName, this._lastName, 'is a', this._profession);
        }
    })
}</code>
<h3><strong>Hiding details in classes with symbols</strong></h3>
Most often, some properties and methods have to be hidden to prevent access from outside the function. 


With classes, to obtain this functionality, one way to do this is by using symbols. 

Symbol is a new built-in type of JavaScript, which can be invoked to give a new symbol value. 

Every Symbol is unique and can be used as a key on object. 


So one use case of symbols is that you can add something to an object you might not own, and you might not want to collide with any other keys of object. 

Therefore, creating a new one and adding it as a property to that object using symbol is the safest. 

Also, when symbol value is added to an object, no one else will know how to get it.

<code>class Person {
    constructor(firstName, lastName) {
        this._firstName = firstName;
        this._lastName = lastName;
    }

    log() {
        console.log('I am', this._firstName, this._lastName);
    }

    // setters
    set profession(val) {
        this._profession = val;
    }
    // getters
    get profession() {
        console.log(this._firstName, this._lastName, 'is a', this._profession);
    }
// With the above code, even though we can access the properties outside the function to change their content what if we don't want that.
// Symbols come to rescue.
let s_firstname  = new Symbol();

class Person {
    constructor(firstName, lastName) {
        this[s_firstName] = firstName;
        this._lastName = lastName;
    }

    log() {
        console.log('I am', this._firstName, this._lastName);
    }

    // setters
    set profession(val) {
        this._profession = val;
    }
    // getters
    get profession() {
        console.log(this[s_firstName], this._lastName, 'is a', this._profession);
    }</code>
<h3>JavaScript Closure Example</h3>
A closure is the combination of a function and the lexical environment (scope) within which that function was declared. 

Closures are a fundamental and powerful property of Javascript. 

This section discusses the ‘how’ and ‘why’ about Closures:
<h3><strong>Example</strong></h3>

<code>//we have an outer function named walk and an inner function named fly

function walk (){
  
  var dist = '1780 feet';
  
  function fly(){
    console.log('At '+dist);
  }
  
  return fly;
}

var flyFunc = walk(); //calling walk returns the fly function which is being assigned to flyFunc
//you would expect that once the walk function above is run
//you would think that JavaScript has gotten rid of the 'dist' var

flyFunc(); //Logs out 'At 1780 feet'
//but you still can use the function as above 
//this is the power of closures</code>
<h3><strong>Another Example</strong></h3>

<code>function by(propName) {
    return function(a, b) {
        return a[propName] - b[propName];
    }
}

const person1 = {name: 'joe', height: 72};
const person2 = {name: 'rob', height: 70};
const person3 = {name: 'nicholas', height: 66};

const arr_ = [person1, person2, person3];

const arr_sorted = arr_.sort(by('height')); // [ { name: 'nicholas', height: 66 }, { name: 'rob', height: 70 },{ name: 'joe', height: 72 } ]</code>
The closure ‘remembers’ the environment in which it was created. 

This environment consists of any local variables that were in-scope at the time the closure was created.

<code>function outside(num) {
  var rememberedVar = num; // In this example, rememberedVar is the lexical environment that the closure 'remembers'
  return function inside() { // This is the function which the closure 'remembers'
    console.log(rememberedVar)
  }
}

var remember1 = outside(7); // remember1 is now a closure which contains rememberedVar = 7 in its lexical environment, and //the function 'inside'
var remember2 = outside(9); // remember2 is now a closure which contains rememberedVar = 9 in its lexical environment, and //the function 'inside'

remember1(); // This now executes the function 'inside' which console.logs(rememberedVar) =&gt; 7
remember2(); // This now executes the function 'inside' which console.logs(rememberedVar) =&gt; 9 </code>
Closures are useful because they let you ‘remember’ data and then let you operate on that data through returned functions. 

This allows Javascript to emulate private methods that are found in other programming languages. 

Private methods are useful for restricting access to code as well as managing your global namespace.
<h3><strong>Private variables and methods</strong></h3>
Closures can also be used to encapsulate private data/methods. 

Take a look at this example:

<code>const bankAccount = (initialBalance) =&gt; {
  const balance = initialBalance;

  return {
    getBalance: function() {
      return balance;
    },
    deposit: function(amount) {
      balance += amount;
      return balance;
    },
  };
};

const account = bankAccount(100);

account.getBalance(); // 100
account.deposit(10); // 110</code>
In this example, we won’t be able to access <code>balance</code> from anywhere outside of the <code>bankAccount</code> function, which means we’ve just created a private variable. 


Where’s the closure? Well, think about what <code>bankAccount()</code> is returning. 

It actually returns an Object with a bunch of functions inside it, and yet when we call <code>account.getBalance()</code>, the function is able to “remember” its initial reference to <code>balance</code>. 


That is the power of the closure, where a function “remembers” its lexical scope (compile time scope), even when the function is executed outside that lexical scope.
<h3>Emulating block-scoped variables</h3>
Javascript did not have a concept of block-scoped variables. 

Meaning that when defining a variable inside a for-loop, for example, this variable was visible from outside the for-loop as well. 

So how can closures help us solve this problem? Let’s take a look.

<code>    var funcs = [];
    
    for(var i = 0; i &lt; 3; i++){
        funcs[i] = function(){
            console.log('My value is ' + i);  //creating three different functions with different param values.
        }
    }
    
    for(var j = 0; j &lt; 3; j++){
        funcs[j]();             // My value is 3
                                // My value is 3
                                // My value is 3
    }</code>
Since the variable i does not have block-scope, it’s value within all three functions was updated with the loop counter and created malicious values. 

Closures can help us solve this issue by creating a snapshot of the environment the function was in when it was created, preserving its state.

<code>    var funcs = [];
    
    var createFunction = function(val){    return function() {console.log("My value: " + val);};
    }

    for (var i = 0; i &lt; 3; i++) {
        funcs[i] = createFunction(i);
    }
    for (var j = 0; j &lt; 3; j++) {
        funcs[j]();                 // My value is 0
                                    // My value is 1
                                    // My value is 2
    }</code>
The later versions of Javascript (ES6+) have a new keyword called let which can be used to give the variable a blockscope. 

There are also many functions (forEach) and entire libraries (lodash.js) that are dedicated to solving such problems as the ones explained above. 

They can certainly boost your productivity, however it remains extremely important to have knowledge of all these issues when attempting to create something big.
Closures have many special applications that are useful when creating large Javascript programs.
<ol><li>Emulating private variables or encapsulation</li>
<li>Making Asynchronous server side calls</li>
<li>Creating a block-scoped variable.</li>
</ol><h3>Emulating private variables</h3>
Unlike many other languages, Javascript does not have a mechanism which allows you to create encapsulated instance variables within an object. 

Having public instance variables can cause a lot of problems when building medium to large programs. 

However with closures, this problem can be mitigated.
Much like in the previous example, you can build functions which return object literals with methods that have access to the object’s local variables without exposing them. 

Thus, making them effectively private.
Closures can also help you manage your global namespace to avoid collisions with globally shared data. 

Usually, all global variables are shared between all scripts in your project, which will definitely give you a lot of trouble when building medium to large programs. 


That is why library and module authors use closures to hide an entire module’s methods and data. 

This is called the module pattern, it uses an immediately invoked function expression which exports only certain functionality to the outside world, significantly reducing the amount of global references.
Here’s a short sample of a module skeleton.

<code>var myModule = (function() = {
    let privateVariable = 'I am a private variable';
    
    let method1 = function(){ console.log('I am method 1'); };
    let method2 = function(){ console.log('I am method 2, ', privateVariable); };
    
    return {
        method1: method1,
        method2: method2
    }
}());

myModule.method1(); // I am method 1
myModule.method2(); // I am method 2, I am a private variable</code>
Closures are useful for capturing new instances of private variables contained in the ‘remembered’ environment, and those variables can only be accessed through the returned function or methods.
<h3>JavaScript Comment Example</h3>
Programmers use comments to add hints, notes, suggestions, or warnings to their source code; they have no effect on the actual output of the code. 

Comments can be very helpful in explaining the intent of what your code is or should be doing.
It is always best practice when starting out to comment more often than not, as it can help those reading your code to understand what exactly your code is intending to do.
JavaScript has two ways of assigning comments in its code.
The first way is the <code>//</code> comment; all text following <code>//</code> on the same line into a comment. 

For example:

<code>function hello() {
  // This is a one line JavaScript comment
  console.log("Hello world!");
}
hello();</code>
The second way is the <code>/* */</code> comment, which can be used for both single-line and multi-line comments. 

For example:

<code>function hello() {
  /* This is a one line JavaScript comment */
  console.log("Hello world!");
}
hello();</code>

<code>function hello() {
  /* This comment spans multiple lines. 

Notice
     that we don't need to end the comment until we're done. 

*/
  console.log("Hello world!");
}
hello();</code>
You can also prevent execution of Javascript code just commeting the code lines like this:

<code>function hello() {
  /*console.log("Hello world!");*/
}
hello();</code>
<h4 id="more-information-"><strong>More Information:</strong></h4><a href="https://www.digitalocean.com/community/tutorials/how-to-write-comments-in-javascript" rel="nofollow">How To Write Comments in JavaScript</a>
<h3><strong>Many IDEs come with a keyboard shortcut to comment out lines.</strong></h3>
<ol><li>Highlight text to be commented</li>
<li>Mac: Push Command(Apple Key) &amp; "/"</li>
<li>Windows: Push Control &amp; "/"</li>
<li>You can also uncomment code by doing the same steps</li>
</ol>A shortcut to comment out a section of 
Javascript in many code editors is to highlight the lines of code you want to comment out, then press `Cmd/Ctrl + /`.
Comments are also very helpful for code testing as you can prevent a certain code-line/block from running:

<code>function hello() {
  // The statement below is not going to get executed
  // console.log('hi')
  }
hello();</code>

function hello() {
  // The statements below are not going to get executed
  /*
  console.log('hi');
  console.log('code-test');
  */
}
hello();

<h2>JavaScript Comparison Operator Example</h2>
JavaScript has both <strong>strict</strong> and <strong>type–converting</strong> comparisons.
<ul><li>The strict comparison (<code>===</code>) only evaluates to true if both operands are the same type.</li>
<li>The abstract comparison (<code>==</code>) attempts to convert both operands to the same type before comparing them.</li>
<li>With relational abstract comparisons (<code>&lt;=</code>), both operands are converted to primitives, then to the same type before comparison.</li>
<li>Strings are compared using Unicode values based on standard ordering.</li>
</ul>
<h2>Features of comparisons:</h2>
<ul><li>Two strings are considered strictly equal when they have the characters in the same sequence and the same length.</li>
<li>Two numbers are considered strictly equal when they are the both of the type number and are numerically equal. 

This means that both <code>0</code> and <code>-0</code> are strictly equal since they both evaluate to <code>0</code>. 

Note that <code>NaN</code> is a special value and is not equal to anything, including <code>NaN</code>.</li>
<li>Two Boolean operands are considered strictly equal if both are <code>true</code> or <code>false</code>.</li>
<li>Two objects are never considered equal in both strict or abstract comparisons.</li>
<li>Expressions that compare objects are only considered true if the operands both reference the same exact object instance.</li>
<li>Null and undefined are both considered strictly equal to themselves (<code>null === null</code>) and abstractly equal to each other (<code>null == undefined</code>)</li>
</ul>
<h2>Equality operators</h2>
<h3><strong>Equality (==)</strong></h3>
The equality operator first converts operands that are not of the same type, then strictly compares them to one another.
<h4 id="syntax"><strong>Syntax</strong></h4>
 x == y
<h4 id="examples-1"><strong>Examples</strong></h4>
 1   ==  1        // true
"1"  ==  1        // true
 1   == '1'       // true
 0   == false     // true
 0   == null      // false

 0   == undefined   // false
 null  == undefined // true
<h3><strong>Inequality (!=)</strong></h3>
The inequality operator evaluates to true if both operands are not equal. 

If the operands are not the same type, it will try to convert them to the same type before making the comparison.
<h4 id="syntax-1"><strong>Syntax</strong></h4>
x != y
<h4 id="examples-2"><strong>Examples</strong></h4>
1 !=   2     // true
1 !=  "1"    // false
1 !=  '1'    // false
1 !=  true   // false
0 !=  false  // false
<h3><strong>Identity / strict equality (===)</strong></h3>
The identity or strict equality operator returns true if both operands are strictly equal in terms of value and type. 

Unlike the equality operator (<code>==</code>), it will not attempt to convert the operands to the same type.
<h4 id="syntax-2"><strong>Syntax</strong></h4>
x === y
<h4 id="examples-3"><strong>Examples</strong></h4>
3 === 3   // true
3 === '3' // false
<h3><strong>Non-identity / strict inequality (!==)</strong></h3>
The non-identity or strict inequality operator returns true if both operands are not strictly equal in terms of value or type.
<h4 id="syntax-3"><strong>Syntax</strong></h4>
x !== y
<h4 id="examples-4"><strong>Examples</strong></h4>
3 !== '3' // true
4 !== 3   // true

<h2>Relational operators</h2>
<h3><strong>Greater than operator (&gt;)</strong></h3>
The greater than operator returns true if the operand on the left is greater than the one on the right.
<h4 id="syntax-4"><strong>Syntax</strong></h4>
x &gt; y
<h4 id="examples-5"><strong>Examples</strong></h4>
4 &gt; 3 // true
<h3><strong>Greater than or equal operator (&gt;=)</strong></h3>
The greater than or equal operator returns true if the operand on the left is greater than or equal to the one on the right.
<h4 id="syntax-5"><strong>Syntax</strong></h4>
x &gt;= y
<h4 id="examples-6"><strong>Examples</strong></h4>
4 &gt;= 3 // true
3 &gt;= 3 // true
<h3><strong>Less than operator (&lt;)</strong></h3>
The less than operator returns true if the operand on the left is less than the one on the right.
<h4 id="syntax-6"><strong>Syntax</strong></h4>
x &lt; y
<h4 id="examples-7"><strong>Examples</strong></h4>
3 &lt; 4 // true
<h3><strong>Less than or equal operator (&lt;=)</strong></h3>
The less than or equal operator returns true if the operand on the left is less than or equal to the one on the right.
<h4 id="syntax-7"><strong>Syntax</strong></h4>
x &lt;= y
<h4 id="examples-8"><strong>Examples</strong></h4>
3 &lt;= 4 // true

<h2>JavaScript Form Validation Example</h2>
Form validation used to occur at the server, after the client had entered all the necessary data and then pressed the Submit button. 

If the data entered by a client was incorrect or was simply missing, the server would have to send all the data back to the client and request that the form be resubmitted with correct information. 

This was really a lengthy process which used to put a lot of burden on the server.
JavaScript provides a way to validate form’s data on the client’s computer before sending it to the web server. 

Form validation generally performs two functions:
<h3><strong>Basic Validation</strong></h3>
First of all, the form must be checked to make sure all the mandatory fields are filled in. 

It just requires a loop through each field in the form to check for data.
<h3><strong>Data Format Validation</strong></h3>
Secondly, the data that is entered must be checked for correct form and value. 

Your code must include appropriate logic to test the correctness of the data.
<h4 id="example-"><strong>Example:</strong></h4>
<code>&lt;html&gt;
   
   &lt;head&gt;
      &lt;title&gt;Form Validation&lt;/title&gt;
      
      &lt;script type="text/javascript"&gt;
         &lt;!--
            // Form validation code will come here.
         //--&gt;
      &lt;/script&gt;
      
   &lt;/head&gt;
   
   &lt;body&gt;
      &lt;form action="/cgi-bin/test.cgi" name="myForm" onsubmit="return(validate());"&gt;
         &lt;table cellspacing="2" cellpadding="2" border="1"&gt;
            
            &lt;tr&gt;
               &lt;td align="right"&gt;Name&lt;/td&gt;
               &lt;td&gt;&lt;input type="text" name="Name" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            
            &lt;tr&gt;
               &lt;td align="right"&gt;EMail&lt;/td&gt;
               &lt;td&gt;&lt;input type="text" name="EMail" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            
            &lt;tr&gt;
               &lt;td align="right"&gt;Zip Code&lt;/td&gt;
               &lt;td&gt;&lt;input type="text" name="Zip" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            
            &lt;tr&gt;
               &lt;td align="right"&gt;Country&lt;/td&gt;
               &lt;td&gt;
                  &lt;select name="Country"&gt;
                     &lt;option value="-1" selected&gt;[choose yours]&lt;/option&gt;
                     &lt;option value="1"&gt;USA&lt;/option&gt;
                     &lt;option value="2"&gt;UK&lt;/option&gt;
                     &lt;option value="3"&gt;INDIA&lt;/option&gt;
                  &lt;/select&gt;
               &lt;/td&gt;
            &lt;/tr&gt;
            
            &lt;tr&gt;
               &lt;td align="right"&gt;&lt;/td&gt;
               &lt;td&gt;&lt;input type="submit" value="Submit" /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            
         &lt;/table&gt;
      &lt;/form&gt;
      
   &lt;/body&gt;
&lt;/html&gt;</code>
<h4 id="output"><strong>Output</strong></h4>Have a look <a href="https://liveweave.com/LP9eOP">here</a>.
<h3><strong>Basic Form Validation</strong></h3>
First let us see how to do a basic form validation. 

In the above form, we are calling validate() to validate data when the onsubmit event is occurring. 

The following code shows the implementation of this <code>validate()</code>function.

<code>&lt;script type="text/javascript"&gt;
   // Form validation code will come here.
   function validate()
      {
      
         if( document.myForm.Name.value == "" )
         {
            alert( "Please provide your name!" );
            document.myForm.Name.focus() ;
            return false;
         }
         
         if( document.myForm.EMail.value == "" )
         {
            alert( "Please provide your Email!" );
            document.myForm.EMail.focus() ;
            return false;
         }
         
         if( document.myForm.Zip.value == "" ||
         isNaN( document.myForm.Zip.value ) ||
         document.myForm.Zip.value.length != 5 )
         {
            alert( "Please provide a zip in the format #####." );
            document.myForm.Zip.focus() ;
            return false;
         }
         
         if( document.myForm.Country.value == "-1" )
         {
            alert( "Please provide your country!" );
            return false;
         }
         return( true );
      }
&lt;/script&gt;</code>
<h4 id="output-1"><strong>Output</strong></h4>Have a look <a href="https://liveweave.com/pCPTnP">here</a>.
<h3><strong>Data Format Validation</strong></h3>
Now we will see how we can validate our entered form data before submitting it to the web server.
The following example shows how to validate an entered email address. 

An email address must contain at least an ‘@’ sign and a dot (.). 

Also, the ‘@’ must not be the first character of the email address, and the last dot must at least be one character after the ‘@’ sign.
<h4 id="example--1"><strong>Example:</strong></h4>
<code>&lt;script type="text/javascript"&gt;
    function validateEmail()
      {
         var emailID = document.myForm.EMail.value;
         atpos = emailID.indexOf("@");
         dotpos = emailID.lastIndexOf(".");
         
         if (atpos &lt; 1 || ( dotpos - atpos &lt; 2 )) 
         {
            alert("Please enter correct email ID")
            document.myForm.EMail.focus() ;
            return false;
         }
         return( true );
      }
&lt;/script&gt;</code>
<h4 id="output-2"><strong>Output</strong></h4>Have a look <a href="https://liveweave.com/nznVs6">here</a>.
<h3><strong>HTML5 Form Constraints</strong></h3>
Some of the commonly used HTML5 constraints for <code>&lt;input&gt;</code> are the <code>type</code> attribute (e.g. 

<code>type="password"</code>), <code>maxlength</code>, <code>required</code> and <code>disabled</code>. 

A less commonly used constraint is the <code>pattern</code> attribute that takes a JavaScript regular expression.

<h2>JavaScript If statement example</h2>
The <code>if</code> statement executes a statement if a specified condition is <code>true</code>. 

If the condition is <code>false</code>, another statement can be executed using the <code>else</code> statement.
<strong>Note:</strong> The <code>else</code> statement is optional.

<code>if (condition)
    /* do something */
else
    /* do something else */</code>
Multiple <code>if...else</code> statements can be chained to create an <code>else if</code> clause. 

This specifies a new condition to test and can be repeated to test multiple conditions, checking until a true statement is presented to execute.

<code>if (condition1)
    /* do something */
else if (condition2)
    /* do something else */
else if (condition3)
    /* do something else */
else
    /* final statement */</code>
<strong>Note:</strong> If you want to execute more than one statement in the <code>if</code>, <code>else</code> or <code>else if</code> part, curly braces are required around the statements:

<code>if (condition) {
    /* do */
    /* something */
    /* with multiple statements */
} else {
    /* do something */
    /* else */
}</code>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else" rel="nofollow">MDN link</a> | <a href="https://msdn.microsoft.com/en-us/library/85yyde5c.aspx" rel="nofollow">MSDN link</a>

<b>Examples</b>
<strong>Using</strong> <code>if...else</code>:

<code>    // If x=5 z=7 and q=42. 

If x is not 5 then z=19.
    if (x == 5) {
      z = 7;
      q = 42
    else
      z = 19;</code>
<strong>Using</strong> <code>else if</code>:

<code>if (x &lt; 10)
    return "Small number";
else if (x &lt; 50)
    return "Medium number";
else if (x &lt; 100)
    return "Large number";
else {
    flag = 1;
    return "Invalid number";
}</code>

<h2>JavaScript Prototype Example</h2>
JavaScript is a prototype-based language, therefore understanding the prototype object is one of the most important concepts which JavaScript practitioners need to know. 


This section will give you a short overview of the Prototype object through various examples. 

Before reading this part, you will need to have a basic understanding of the <a href="/news/the-complete-guide-to-this-in-javascript/"><code>this</code> reference in JavaScript</a>.
<h3><strong>Prototype object</strong></h3>
For the sake of clarity, let’s examine the following example:

<code>function Point2D(x, y) {
  this.x = x;
  this.y = y;
}</code>
As <code>Point2D</code> function is declared, a default property named <code>prototype</code> will be created for it (note that, in JavaScript, a function is also an object). 


The <code>prototype</code> property is an object which contains a <code>constructor</code>property and its value is <code>Point2D</code> function: <code>Point2D.prototype.constructor = Point2D</code>. 

And when you call <code>Point2D</code> with <code>new</code> keyword, <em>newly created objects will inherit all properties from</em> <code>Point2D.prototype</code>. 


To check that, you can add a method named <code>move</code> into <code>Point2D.prototype</code> as follows:

<code>Point2D.prototype.move = function(dx, dy) {
  this.x += dx;
  this.y += dy;
}

var p1 = new Point2D(1, 2);
p1.move(3, 4);
console.log(p1.x); // 4
console.log(p1.y); // 6</code>
The <code>Point2D.prototype</code> is called <strong>prototype object</strong> or <strong>prototype</strong> of <code>p1</code> object and for any other object created with <code>new Point2D(...)</code> syntax. 

You can add more properties to <code>Point2D.prototype</code> object as you like. 

The common pattern is to declare methods to <code>Point2D.prototype</code> and other properties will be declared in the constructor function.
Built-in objects in JavaScript are constructed in a similar manner. 

For example:
<ul><li>Prototype of objects created with <code>new Object()</code> or <code>{}</code> syntax is <code>Object.prototype</code>.</li>
<li>Prototype of arrays created with <code>new Array()</code> or <code>[]</code> syntax is <code>Array.prototype</code>.</li>
<li>And so on with other built-in objects such as <code>Date</code> and <code>RegExp</code>.</li>
</ul><code>Object.prototype</code> is inherited by all objects and it has no prototype (its prototype is <code>null</code>).
<h3><strong>Prototype chain</strong></h3>
The prototype chain mechanism is simple: When you access a property <code>p</code> on object <code>obj</code>, the JavaScript engine will search this property inside <code>obj</code> object. 

If the engine fails to search, it continues searching in the prototype of <code>obj</code> object and so on until reaching <code>Object.prototype</code>. 

If after the search has finished, and nothing has been found, the result will be <code>undefined</code>. 

For example:

<code>var obj1 = {
  a: 1,
  b: 2
};

var obj2 = Object.create(obj1);
obj2.a = 2;

console.log(obj2.a); // 2
console.log(obj2.b); // 2
console.log(obj2.c); // undefined</code>
In above snippet, the statement <code>var obj2 = Object.create(obj1)</code> will create <code>obj2</code> object with prototype <code>obj1</code> object. 

In other words, <code>obj1</code> becomes the prototype of <code>obj2</code> instead of <code>Object.prototype</code> by default. 

As you can see, <code>b</code> is not a property of <code>obj2</code>; you can still access it via the prototype chain. 

For the <code>c</code> property, however, you get an <code>undefined</code> value because it can’t be found in <code>obj1</code> and <code>Object.prototype</code>.
<h3><strong>Classes</strong></h3>
In ES2016, we now get to use the <code>Class</code> keyword as well as the methods mentioned above to manipulate <code>prototype</code>. 

The JavaScript <code>Class</code> appeals to developers from OOP backgrounds, but it’s essentially doing the same thing as above.

<code>class Rectangle {
  constructor(height, width) {
    this.height = height
    this.width = width
  }

  get area() {
    return this.calcArea()
  }

  calcArea() {
    return this.height * this.width
  }
}

const square = new Rectangle(10, 10)

console.log(square.area) // 100</code>
This is basically the same as:

<code>function Rectangle(height, width) {
  this.height = height
  this.width = width
}

Rectangle.prototype.calcArea = function calcArea() {
  return this.height * this.width
}</code>
The <code>getter</code> and <code>setter</code> methods in classes bind an Object property to a function that will be called when that property is looked up. 

It’s just syntactic sugar to help make it easier to <em>look up</em> or <em>set</em> properties.

<h2>JavaScript Scope Example</h2>
If you’ve been programming in JavaScript for a while, you’ve undoubtedly run into a concept known as <code>scope</code>. 

What is <code>scope</code>? Why should you take the time to learn it?
In programmer speak, <code>scope</code> is the <strong>current context of execution</strong>. 

Confused? Let’s take a look at the following piece of code:

var foo = 'Hi, I am foo!';

var baz = function () {
  var bar = 'Hi, I am bar too!';
    console.log(foo);
}

baz(); // Hi, I am foo!
console.log(bar); // ReferenceError...
This is a simple example, but it does a good job of illustrating what is known as <em>Lexical scope</em>. 

JavaScript, and almost every other programming language, has a <em>Lexical scope</em>. 

There is another kind of scope known as <em>Dynamic scope</em>, but we won’t be discussing that.
Now, the term <em>Lexical scope</em> sounds fancy, but as you will see it’s really simple in principle. 

In a Lexical Scope, there are two kinds of scopes: the <em>global scope</em> and a <em>local scope</em>.
Before you type the first line of code in your program, a <em>global scope</em> is created for you. 

This contains all the variables that you declare in your program <strong>outside any functions</strong>.
In the example above, the variable <code>foo</code> is in the global scope of the program, while the variable <code>bar</code> is declared inside a function and is therefore <strong>in the local scope of that function</strong>.
Let's break down the example line by line. 

While you might be confused at this point, I promise you will have a much better understanding by the time you finish reading this.
On line 1 we are declaring the variable <code>foo</code>. 

Nothing too fancy here. 

Let's call this a left-hand size (LHS) reference to <code>foo</code>, because we are assigning a value to <code>foo</code> and it’s on the left-hand side of the <code>equal</code> sign.
On line 3, we are declaring a function and assigning it to variable <code>baz</code>. 

This is another LHS reference to <code>baz</code>. 

We are assigning a value to it (remember, functions are values too!). 

This function is then called on line 8. 

This is a RHS, or a right-hand side reference to <code>baz</code>. 

We are retrieving <code>baz</code>’s value, which in this case is a function and then invoking it. 


Another RHS reference to <code>baz</code> would be if we assigned its value to another variable, for example <code>foo = baz</code>. 

This would be a LHS reference to <code>foo</code> and a RHS reference to <code>baz</code>.
The LHS and RHS references might sound confusing, but they are important for discussing scope. 

Think of it this way: a LHS reference is assigning a value to the variable, while a RHS reference is retrieving the value of the variable. 

They’re just a shorter and more convenient way of saying ‘retrieving the value’ and ‘assigning a value’.
Let’s now break down what’s happening inside the function itself.
When the compiler compiles the code inside a function, it enters the function’s <strong>local scope</strong>.
On line 4, the variable <code>bar</code> is declared. 

This is a LHS reference to <code>bar</code>. 

On the next line, we have a RHS reference to <code>foo</code> inside the <code>console.log()</code>. 

Remember, we are retrieving <code>foo</code>’s value and then passing it as an argument to the method <code>console.log()</code>.
When we have a RHS reference to <code>foo</code>, the compiler looks for the declaration of the variable <code>foo</code>. 

The compiler doesn’t find it in the function itself, or the <strong>function’s local scope</strong>,</strong> so it <strong>goes up one level: to the global scope</strong>.
At this point you’re probably thinking that scope has something to do with variables. 

That is correct. 

A scope can be thought of as a container for variables. 

All variables that are created within a local scope are only accessible in that local scope. 

However, all local scopes can access the global scope. 

(I know you’re probably even more confused right now, but just bear with me for a few more paragraphs).
So the compiler goes up to the global scope to find a LHS reference to the variable <code>foo</code>. 

It finds one on line 1, so it retrieves the value from the LHS reference, which is a string: <code>'Hi, I am foo!'</code>. 

This string is sent to the <code>console.log()</code> method, and outputted to the console.
The compiler has finished executing the code inside the function, so we come back out to line 9. 

On line 9, we have a RHS reference for the variable <code>bar</code>.
Now, <code>bar</code> was declared in the local scope of <code>baz</code>, but there is a RHS reference for <code>bar</code> in the global scope. 

Since there is no LHS reference for <code>bar</code> in the global scope, the compiler can’t find a value for <code>bar</code> and throws a ReferenceError.
But, you might ask, if the function can look outside itself for variables, or a local scope can peek into the global scope to find LHS references, why can’t the global scope peek into a local scope? Well that’s how lexical scope works!

... 

// global scope
var baz = function() {
  ... 

// baz's scope
}
... 

/// global scope
This is the same code from above which illustrates the scope. 

This forms a sort of hierarchy that goes up to the global scope:
<code>baz -&gt; global</code>.
So, if there is a RHS reference for a variable inside <code>baz</code>’s scope, it can be fulfilled by a LHS reference for that variable in the global scope. 

But the opposite is <strong>not true</strong>.
What if we had another function inside <code>baz</code>?

... 

// global scope
var baz = function() {
  ... 

// baz's scope

  var bar = function() {
     ... 

// bar's scope.
  }

}
... 

/// global scope
In this case, the hierarchy or the <strong>scope chain</strong> would look like this:
<code>bar -&gt; baz -&gt; global</code>
Any RHS references inside <code>bar</code>’s local scope can be fulfilled by LHS references in the global scope or <code>baz</code>’s scope, but a RHS reference in <code>baz</code>’s scope cannot be fulfilled by a LHS reference in <code>bar</code>’s scope.
<strong>You can only traverse down a scope chain, not up.</strong>
There are other two important things you should know about JavaScript scopes.
<ol><li>Scopes are declared by functions, not by blocks.</li>
<li>Functions can be forward-referenced, variables can’t.</li>
</ol>Observe (each comment describes scope at the line that it’s written on):

    // outer() is in scope here because functions can be forward-referenced
    
    function outer() {
    
        // only inner() is in scope here
        // because only functions are forward-referenced
    
        var a = 1;
        
        //now 'a' and inner() are in scope
        
        function inner() {
            var b = 2
            
            if (a == 1) {
                var c = 3;
            }
            
            // 'c' is still in scope because JavaScript doesn't care
            // about the end of the 'if' block, only function inner()
        }
        
        // now b and c are out of scope
        // a and inner() are still in scope
        
    }
    
    // here, only outer() is in scope

<h2>JavaScript For Loop Example</h2>
<h3><strong>Syntax</strong></h3>

<code>for ([initialization]); [condition]; [final-expression]) {
   // statement
}</code>
The javascript <code>for</code> statement consists of three expressions and a statement:
<ul><li>initialization - Run before the first execution on the loop. 

This expression is commonly used to create counters. 

Variables created here are scoped to the loop. 

Once the loop has finished its execution, they are destroyed.</li>
<li>condition - Expression that is checked prior to the execution of every iteration. 

If omitted, this expression evaluates to true. 

If it evaluates to true, the loop’s statement is executed. 

If it evaluates to false, the loop stops.</li>
<li>final-expression - Expression that is run after every iteration. 

Usually used to increment a counter. 

But it can be used to decrement a counter too.</li>
<li>statement - Code to be repeated in the loop</li>
</ul>any of these three expressions or the statement can be omitted. 

For loops are commonly used to count a certain number of iterations to repeat a statement. 

Use a <code>break</code> statement to exit the loop before the condition expression evaluates to false.

<h2>Common Pitfalls</h2>
<strong>Exceeding the bounds of an array</strong>
When indexing over an array many times, it is easy to exceed the bounds of the array (ex. 

try to reference the 4th element of a 3 element array).

<code>    // This will cause an error.
    // The bounds of the array will be exceeded.
    var arr = [ 1, 2, 3 ];
    for (var i = 0; i &lt;= arr.length; i++) {
       console.log(arr[i]);
    }

    output:
    1
    2
    3
    undefined</code>
There are two ways to fix this code. 

Set the condition to either <code>i &lt; arr.length</code> or <code>i &lt;= arr.length - 1</code>
<h3><strong>Examples</strong></h3>
Iterate through integers from 0-8

<code>for (var i = 0; i &lt; 9; i++) {
   console.log(i);
}
</code>
output:
0
1
2
3
4
5
6
7
8</code>
Break out of a loop before condition expression is false

<code>for (var elephant = 1; elephant &lt; 10; elephant+=2) {
    if (elephant === 7) {
        break;
    }
    console.info('elephant is ' + elephant);
}
</code>
output:
elephant is 1
elephant is 3
elephant is 5

<h2>JavaScript Break Statement Example</h2>
The <strong>break</strong> statement terminates the current loop, <code>switch</code> or <code>label</code> statement and transfers program control to the statement following the terminated statement.

break;
If the <strong>break</strong> statement is used in a labeled statement, the syntax is as follows:

break labelName;

<b>Examples</b>
The following function has a <strong>break</strong> statement that terminates the <code>while</code> loop when <strong>i</strong> is 3, and then returns the value <strong>3 * x</strong>.

function testBreak(x) {
  var i = 0;
  while (i &lt; 6) {
    if (i == 3) {
      break;
    }
    i += 1;
  }
  return i * x;
}
In the following example, the counter is set up to count from 1 to 99; however, the <strong>break</strong> statement terminates the loop after 14 counts.

for (var i = 1; i &lt; 100; i++) {
  if (i == 15) {
    break;
  }
}

<h2>JavaScript Do While loop example</h2>
The <code>do...while</code> loop is closely related to the  loop. 

In the do while loop, the condition is checked at the end of the loop.
Here is the <strong>syntax</strong> for <code>do...while</code> loop:

<b>Syntax:</b>
 do {
   *Statement(s);*
} while (*condition*);
<strong>statement(s):</strong> A statement that is executed <strong>at least once</strong> before the condition or Boolean expression is evaluated and is re-executed each time the condition evaluates to true.
<strong>condition:</strong> Here, a condition is a <a>Boolean expression</a>. 

If the Boolean expression evaluates to true, the statement is executed again. 

When the Boolean expression evaluates to false, the loops ends.

<b>Example:</b>
var i = 0;
do {
  i = i + 1;
  console.log(i);
} while (i &lt; 5);

Output:
1
2
3
4
5
<h2>JavaScript For In Loop Example</h2>
The <code>for...in</code> statement iterates over the enumerable properties of an object, in arbitrary order. 

For each distinct property, statements can be executed.

for (variable in object) {
...
}
Required/Optional Parameter Description Required Variable: A different property name is assigned to the variable on each iteration. 

OptionalObject: an object whose enumerable properties are iterated.

<b>Examples</b>

// Initialize object.
a = { "a": "Athens", "b": "Belgrade", "c": "Cairo" }

// Iterate over the properties.
var s = ""
for (var key in a) {
    s += key + ": " + a[key];
    s += "&lt;br /&gt;";
    }
document.write (s);

// Output:
// a: Athens
// b: Belgrade
// c: Cairo

// Initialize the array.
var arr = new Array("zero", "one", "two");

// Add a few expando properties to the array.
arr["orange"] = "fruit";
arr["carrot"] = "vegetable";

// Iterate over the properties and elements.
var s = "";
for (var key in arr) {
    s += key + ": " + arr[key];
    s += "&lt;br /&gt;";
}

document.write (s);

// Output:
//   0: zero
//   1: one
//   2: two
//   orange: fruit
//   carrot: vegetable

// Efficient way of getting an object's keys using an expression within the for-in loop's conditions
var myObj = {a: 1, b: 2, c:3}, myKeys = [], i=0;
for (myKeys[i++] in myObj);

document.write(myKeys);

//Output:
//   a
//   b
//   c

<h2>JavaScript For Of Loop Example</h2>
The <code>for...of</code> statement creates a loop iterating over iterable objects (including Array, Map, Set, Arguments object and so on), invoking a custom iteration hook with statements to be executed for the value of each distinct property.

<code>    for (variable of object) {
        statement
    }</code>
Description variable: On each iteration a value of a different property is assigned to the variable.object Object whose enumerable properties are iterated.

<b>Examples</b>
<h3><strong>Array</strong></h3>

    let arr = [ "fred", "tom", "bob" ];
    for (let i of arr) {
        console.log(i);
    }
    // Output:
    // fred
    // tom
    // bob
<h3><strong>Map</strong></h3>
    var m = new Map();
    m.set(1, "black");
    m.set(2, "red");

    for (var n of m) {
        console.log(n);
    }

    // Output:
    // 1,black
    // 2,red
<h3><strong>Set</strong></h3>
    var s = new Set();
    s.add(1);
    s.add("red");

    for (var n of s) {
        console.log(n);
    }

    // Output:
    // 1
    // red
<h3><strong>Arguments object</strong></h3>
    // your browser must support for..of loop
    // and let-scoped variables in for loops

    function displayArgumentsObject() {
        for (let n of arguments) {
            console.log(n);
        }
    }
    displayArgumentsObject(1, 'red');

    // Output:
    // 1
    // red

<h2>JavaScript While Loop Example</h2>
The while loop starts by evaluating the condition. 

If the condition is true, the statement(s) is/are executed. 

If the condition is false, the statement(s) is/are not executed. 

After that, while loop ends.
Here is the <strong>syntax</strong> for the while loop:

<b>Syntax:</b>

while (condition)
{
  statement(s);
}
<em>statement(s):</em> A statement that is executed as long as the condition evaluates to true.
<em>condition:</em> Here, the condition is a Boolean expression which is evaluated before each pass through the loop. 

If this condition evaluates to true, statement(s) is/are executed. 

When the condition evaluates to false, execution continues with the statement after the while loop.

<b>Example:</b>

    var i = 1;
    while (i &lt; 10) 
    {
      console.log(i);
       i++; // i=i+1 same thing
    }

    Output:
    1 
    2 
    3 
    4
    5
    6
    7
    8
    9
<h2>create Desktop Apps</h2>
<a href="https://softwarerecs.stackexchange.com/questions/14797/can-you-convert-html-css-and-javascript-into-a-exe" class="whitebut ">convert html, css and javascript into a exe</a>

Two very good open-source and extremely actively developed options are
Electron, by GitHub. 

Cordova, by the Apache Foundation. 
Targets Android, iOS, and Windows from HTML/JavaScript/CSS. 

Proton Native. 
Works with React Native components and does not use Electron (see above), which makes generated apps therefore more "lightweight" than the ones generated by Electron.
 
HTML Compiler convert an entire HTML application (using CSS, JavaScript, Images and more) into an standalone Windows application.

ExeOutput for PHP that lets you create applications in native format for Windows with PHP, JavaScript and HTML. 
Convert PHP scripts, websites, JavaScript, HTML, databases into stand-alone apps for Windows (single EXE files) that do not require a Web server nor PHP distribution.

<b>Electron</b>
<a href="https://electronjs.org/" target="_blank">Electron</a>
<a href="https://brainhub.eu/electron-js">Electron</a> is an open-source framework initially built by GitHub for Atom editor in 2013. 

This library lets you create desktop GUI applications with web technologies like JavaScript, HTML and CSS.

<b>NW.js</b>
<a href="https://nwjs.io/" target="_blank">NW.js</a>
The next on our list of the best JavaScript frameworks for desktop apps is NW.js, previously known as the node-webkit. 

It was built at Intel’s Open Source Technology Center by combining Node.js framework with a Chromium engine (previously known as Webkit).

Available on Linux, Mac OS, and Windows.

<b>AppJS</b>
<a href="http://appjs.com/" target="_blank">AppJS</a>
AppJS is a simple yet powerful tool that you can use to build cross-platform apps without the need to learn new languages. 

Similarly to the other libraries mentioned today, you’re fine as long as you’re familiar with HTML, CSS and JavaScript.

Although it’s the oldest Node.js-Chromium framework in the AppJS, Electron and NW.js trio, it’s not nearly as mature as its competition. 

Because it has lost its momentum, it may not be the best choice for new projects.

<b>Meteor</b>
<a href="https://www.meteor.com/" target="_blank">Meteor</a>

Although it does not build desktop apps on its own, it can be used with Cordova or other similar tools to produce them. 

It uses MongoDB, Distributed Data Protocol, and a publish-subscribe pattern to auto-propagate the changes without developer interference. 

It has both front-end and back-end modules, including the API, build tools, Node.js packages.

<b>Proton Native</b>
<a href="https://proton-native.js.org/#/" target="_blank">Proton Native</a>
Proton Native is a fresh release. 

It was made available on GitHub in the early months of 2018. 


It works quite differently to Electron, which runs a full Chromium browser to manage a small GUI. 

Proton Native, on the other hand, uses native tools, takes less space and needs fewer resources.

This solution has a few other advantages &#8211; it uses the same syntax as React Native, works with <a href="https://brainhub.eu/blog/react-libraries-javascript-professional-should-know/" target="_blank">React libraries</a> including Redux and is compatible with Node.js.

<b>Summary</b>
To sum up, JavaScript frameworks for desktop apps can be divided into three categories:
Frameworks that produce web browser hosted desktop apps, based on Node.js and Chromium (Electron, NW.js, AppJS).
Frameworks that need to be used with Cordova-like tools (Meteor).
Frameworks that use genuinely native components to build a desktop app (Proton Native).

<h2>build desktop app with Electron</h2>
<a href="https://adityasridhar.com/posts/desktop-apps-with-html-css-javascript" class="whitebut ">build Desktop Apps with HTML, CSS and Javascript</a>

<h3>INSTALL ELECTRON GLOBALLY</h3>
<a href="https://www.youtube.com/watch?v=1Qf2Yjz-zsk" class="whitebut ">Electron Tutorial - Introduction</a>

Install Electron globally on our system using NPM.

npm i electron -g
<h3>CREATE AN ELECTRON PROJECT</h3>

<h3>1. INITIALIZE THE PROJECT</h3>
First, create a project directory and a package.json file under it.
Now direct to the folder and make a package.json inside it.

mkdir AwesomeProject
cd /AwesomeProject
npm init

Enter the project details if you wish or skip.
<img class="lazy" data-src="https://i2.wp.com/www.techomoro.com/wp-content/uploads/2019/04/Capture.png?resize=593%2C523&ssl=1">
<h3>2. CREATE A VIEW</h3>
Now create the file we wanted to be viewed when opening our app. 
Electron uses HTML to render the view and so we need to create an index.html file.

index.html
&lt;html>
  &lt;head>
    &lt;title>Hello World Application&lt;/title>
  &lt;/head>
  &lt;body>
    &lt;h1>Hello World&lt;/h1>
  &lt;/body>
&lt;/html>

<h3>3. CREATE AN INDEX.JS FILE</h3>
In package.json, we programmed that the root file of our project is index.js. 

So we need to create it. 


index.js

const { app, BrowserWindow } = require("electron");
const url = require("url");

function newApp() {
  win = new BrowserWindow();
  win.loadURL(
    url.format({
      pathname: "index.html",
      slashes: true
    })
  );
}

app.on("ready", newApp);

<h3>4. RUNNING OUR APPLICATION</h3>
Now we can run our Electron app using the command below.

<b>electron .</b>

Electron Packager

'electron-packager' is not recognized as an internal or external command

Install it using:
npm install -g electron-packager

Suggested to use one of the options from ia32, x64, armv7l, arm64, mips64el
electron-packager sourcedir appname --platform=win32 --arch=x64
electron-packager AwesomeProject jsNotes --platform=win32 --arch=x64
electron-packager' is not recognized as an internal or external command,

Unable to determine Electron version. 
Please specify an Electron version
my package.json is like this were to put the --electron-version ??

Install electron as dev-dependency to resolve this issue
npm install --save-dev electron

And to build for Windows you can run this from the git bash:

electron-packager . 
jsNOtes --overwrite --asar=true --platform=win32 --arch=x64 --icon=assets/icons/win/icon.ico --prune=true --out=release-builds --version-string.CompanyName=CE --version-string.FileDescription=CE --version-string.ProductName="jsNOtes"

cannot run app after electron-packager

<h2>A complete guide to packaging your Electron app</h2>
Packaging an electron app simply means creating a desktop installer (dmg, exe, deb etc). 

Now if you decide to go around manually packaging your app, you’re gonna have a bad time.

Luckily there are modules, especially the two mentioned below which make the task easier.
<blockquote>
<a href="https://github.com/electron-userland/electron-builder" target="_blank">electron-builder</a>
<a href="https://github.com/electron-userland/electron-packager" target="_blank">electron-packager</a>
</blockquote>
We’ll be using electron-builder since it has a built-in support for <a href="https://github.com/electron-userland/electron-builder/wiki/Code-Signing" target="_blank">Code Signing</a>/<a href="https://github.com/electron-userland/electron-builder#auto-update" target="_blank">Auto Update</a> etc.

<h2>Configure your app to use electron-builder :</h2>
Create a directory <a href="https://github.com/electron-userland/electron-builder/wiki/Options#MetadataDirectories-buildResources" target="_blank">build</a> in the root of the project and save a background.png (macOS DMG background), icon.icns (macOS app icon) and icon.ico (Windows app icon) into it. 

The Linux icon set will be generated automatically based on the macOS. 

Ex. 

<a href="https://github.com/zulip/zulip-electron/tree/master/build" target="_blank">zulip-electron/build</a>

Add electron-builder to your app devDependencies by running:

npm install electron-builder --save-dev

In electron-builder you could use two package.json structure as well as single package.json. 

We’ll be using single package.json structure since it’s easier to maintain.

<h2>Sample One package.json</h2>

{
  "name": "yourappname",
  "version": "0.0.1",
  "license": "MIT",
  "description": "your app description",
  "author": "xyz &lt;xyz@gmail.com>",
  "main": "./app/index.js",
  "scripts": {
    "postinstall": "install-app-deps",
    "start": "npm install && electron ./app",
    "pack": "build --dir",
    "dist": "build"
  },
  "build": {
    "appId": "yourappid",
    "category": "your.app.category.type",
    "dmg": {
      "contents": [
        {
          "x": 110,
          "y": 150
        },
        {
          "x": 240,
          "y": 150,
          "type": "link",
          "path": "/Applications"
        }
      ]
    },
    "linux": {
      "target": [
        "AppImage",
        "deb"
      ]
    },
    "win": {
      "target": "squirrel",
      "icon": "build/icon.ico"
    }
  },
  "dependencies": {},
  "devDependencies": {
    "electron": "latest",
    "electron-builder": "latest"
  }
}
view rawpackage.json hosted with ❤ by GitHub

On windows build you can also use <em>NSIS </em>target which is the default one and recommended by electron-builder.
"win": {   "target": "NSIS"}

That’s it. 

You’ve successfully configured electron-builder. 

Now let’s build the installers. 

To package your app into an installer use command:
npm run dist

It will create an installer in .<em>/dist</em> folder. 

By default build command will only generate the installer for current platform and current arch. 

For an ex. 

running it on OSX will create —
$ npm run dist
    |-- mac
    |   |-- appname-version-mac.zip
    |   |-- appname-version.dmg
    |   |-- appname.app
On Windows -
# When using target — Squirrel$ npm run dist
    |-- win
    |   |-- REALESES
    |   |-- appnameSetupversion.exe
    |   |-- appname-version-full.nupkg
    |-- win-unpacked# When using target — NSIS$ npm run dist
    |-- win
    |   |-- appnameSetupversion.exe
    |-- win-unpacked
On Linux -
$ npm run dist
    |-- appname-version.AppImage
    |-- appname-version.deb
    |-- linux-unpacked
electron-builder is highly configurable. 

For complete usage check out its <a href="https://github.com/electron-userland/electron-builder/wiki" target="_blank">wiki</a>. 

<a href="https://github.com/zulip/zulip-electron" target="_blank">zulip-electron</a> (two package.json) and <a href="https://github.com/develar/onshape-desktop-shell" target="_blank">onshape-desktop-shell</a> (one package.json) are some real world projects that use electron-builder for their packaging.

<h2>scroll to div bottom, scrollTop, clientHeight and offsetTop</h2>
if(testkey == "l"){divtoc = document.getElementById("toc");$('body,html').animate({scrollTop:(divtoc.clientHeight + divtoc.offsetTop-600)}, 1); }

if(testkey == 'e'){window.scrollTo(0,document.body.scrollHeight);}

if(testkey == 't'){window.location = '#toc';}
if(testkey == "k"){ 
    if(typeof bookid == 'undefined') { bookid = $('title').text() }
    storeBookmark(bookid, topicpointer.toString());
  }

if(testkey == "K"){
    if(typeof bookid != 'undefined') {loadBookmark(bookid);}
    else{alert("No BookId!")}
function storeBookmark(objName, chapterNum) {
  if(typeof objName != 'undefined') {
    localStorage.setItem(objName, chapterNum.toString())
  }else{alert("No BookId!")}
}
function loadBookmark(objName) {
  topicpointer = parseInt(localStorage.getItem(objName))
  showImg();
}
==================
if(testkey == "k"){ 
    pos = document.getElementsByTagName("body")[0].scrollTop;
    if(typeof bookid == 'undefined') { bookid = $('title').text() }
    storeBookmark(bookid, pos.toString());
  }
if(testkey == "K"){
    if(typeof bookid != 'undefined') {loadBookmark(bookid);}
    else{alert("No BookId!")}
  }
function storeBookmark(objName, pagepos) {
  if(typeof objName != 'undefined') {
    localStorage.setItem(objName, pagepos.toString())
//    alert("Bookmark changed! " + objName +" " + pagepos)
  }else{alert("No BookId!")}
}
function loadBookmark(objName) {
  pos = Number(localStorage.getItem(objName))
  console.log("Bookmark loaded! " + objName + " " + pos)
  $('body').animate({scrollTop: pos}, 0);
}
<h2>lazyload</h2>
<a href="https://github.com/verlok/lazyload" class="whitebut ">lazyload</a>

<b>1</b>
&lt;script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@13.0.1/dist/lazyload.min.js">&lt;/script>

<b>2</b>
&lt;img class="lazy" data-src="lazy.jpg" />
Then, in your javascript code:

<b>3</b>
place script at end of page:
var lazyLoadInstance = new LazyLoad({
    elements_selector: ".lazy"
    // ... 
more custom settings?
});

Lazy video
&lt;video class="lazy" controls data-src="lazy.mp4" data-poster="lazy.jpg">
    &lt;source type="video/mp4" data-src="lazy.mp4" />
    &lt;source type="video/ogg" data-src="lazy.ogg" />
    &lt;source type="video/avi" data-src="lazy.avi" />
&lt;/video>
Please note that the video poster can be lazily loaded too.

To be sure that DOM for your lazy content is ready when you instantiate LazyLoad, place the script tag right before the closing </body> tag. 
If more DOM arrives later, e.g. 
via an AJAX call, you'll need to call lazyLoadInstance.update(); to make LazyLoad check the DOM again.

lazyLoadInstance.update();

lazy iFrame
&lt;iframe class="lazy" data-src="lazyFrame.html">&lt;/iframe>
<h2>JavaScript check if variable exists (is defined/initialized)</h2>
this creates a switch in the page to turn on/off certain function

if (typeof variable !== 'undefined') {

if(typeof elem === 'string' && elem.trim()) {

or

elem != null

showTopicNumber = true;

    if (typeof(showTopicNumber) !== 'undefined'){
      if (showTopicNumber == true){
        toc.append(topicNumber +' <a href="#topic-'+topicNumber+'" target="_self">'+topic.html()+'</a><br>');
      }else{
        toc.append('<a href="#topic-'+topicNumber+'" target="_self">'+topic.html()+'</a><br>');
      }
    }else{
      toc.append('<a href="#topic-'+topicNumber+'" target="_self">'+topic.html()+'</a><br>');
    }

<h2>HTML5 - Web SQL Database</h2>
<b>W3C no longer maintains this specification.</b>

The Web SQL Database API isn't actually part of the HTML5 specification but it is a separate specification which introduces a set of APIs to manipulate client-side databases using SQL.

<h3>The Core Methods</h3>
There are following three core methods defined in the spec that I am going to cover in this tutorial &minus;

<b>openDatabase</b> &minus; This method creates the database object either using existing database or creating new one.

<b>transaction</b> &minus; This method gives us the ability to control a transaction and performing either commit or rollback based on the situation.

<b>executeSql</b> &minus; This method is used to execute actual SQL query.

<h3>Opening Database</h3>
The <i>openDatabase</i> method takes care of opening a database if it already exists, this method will create it if it already does not exist.

To create and open a database, use the following code &minus;
<code>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);
</code>
The above method took the following five parameters &minus;

Database name
Version number
Text description
Size of database
Creation callback
The last and 5th argument, creation callback will be called if the database is being created. 
Without this feature, however, the databases are still being created on the fly and correctly versioned.
<h3>Executing queries</h3>
To execute a query you use the database.transaction() function. 
This function needs a single argument, which is a function that takes care of actually executing the query as follows &minus;
<code>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 

db.transaction(function (tx) {   
   tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
});
</code>
The above query will create a table called LOGS in 'mydb' database.

<h3>INSERT Operation</h3>
To create enteries into the table we add simple SQL query in the above example as follows &minus;
<code>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 

db.transaction(function (tx) { 
   tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
   tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "foobar")'); 
   tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "logmsg")'); 
}); 
</code>
We can pass dynamic values while creating entering as follows &minus;
<code>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);  

db.transaction(function (tx) {   
   tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
   tx.executeSql('INSERT INTO LOGS (id,log) VALUES (?, ?'), [e_id, e_log]; 
});
</code>
Here <b>e_id</b> and <b>e_log</b> are external variables, and executeSql maps each item in the array argument to the "?"s.

<h3>READ Operation</h3>
To read already existing records we use a callback to capture the results as follows &minus;
<code>
var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024);  

db.transaction(function (tx) { 
   tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)');
   tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "foobar")'); 
   tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "logmsg")'); 
});  

db.transaction(function (tx) { 
   tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) { 
      var len = results.rows.length, i; 
      msg = "&lt;p>Found rows: " + len + "&lt;/p>"; 
      document.querySelector('#status').innerHTML +=  msg; 
  
      for (i = 0; i &lt; len; i++) { 
         alert(results.rows.item(i).log ); 
      } 
  
   }, null); 
});
</code>
<h3>Final Example</h3>
So finally, let us keep this example in a full-fledged HTML5 document as follows and try to run it with Safari browser.

<a href="http://tpcg.io/rMAhs5" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

&lt;!DOCTYPE HTML> 

&lt;html>  
   &lt;head> 
  
      &lt;script type = "text/javascript"> 
         var db = openDatabase('mydb', '1.0', 'Test DB', 2 * 1024 * 1024); 
         var msg; 
    
         db.transaction(function (tx) { 
            tx.executeSql('CREATE TABLE IF NOT EXISTS LOGS (id unique, log)'); 
            tx.executeSql('INSERT INTO LOGS (id, log) VALUES (1, "foobar")'); 
            tx.executeSql('INSERT INTO LOGS (id, log) VALUES (2, "logmsg")'); 
            msg = '&lt;p>Log message created and row inserted.&lt;/p>'; 
            document.querySelector('#status').innerHTML =  msg; 
         })

         db.transaction(function (tx) { 
            tx.executeSql('SELECT * FROM LOGS', [], function (tx, results) { 
               var len = results.rows.length, i; 
               msg = "&lt;p>Found rows: " + len + "&lt;/p>"; 
               document.querySelector('#status').innerHTML +=  msg; 
      
               for (i = 0; i &lt; len; i++) { 
                  msg = "&lt;p>&lt;b>" + results.rows.item(i).log + "&lt;/b>&lt;/p>"; 
                  document.querySelector('#status').innerHTML +=  msg; 
               } 
            }, null); 
         }); 
      &lt;/script> 
   &lt;/head> 
  
   &lt;body> 
      &lt;div id = "status" name = "status">Status Message&lt;/div> 
   &lt;/body> 
&lt;/html>

This will produce the following result &minus;

Log message created and row inserted.
Found rows: 2
foobar
logmsg

<h2>Define a Function</h2>
1 <a href="#functiontopic-1" target="_self">Define a Function.</a>
2 <a href="#functiontopic-2" target="_self">Parameters vs. Arguments.</a>
3 <a href="#functiontopic-3" target="_self">Invoking a Function.</a>
4 <a href="#functiontopic-4" target="_self">Function Return.</a>
5 <a href="#functiontopic-5" target="_self">Function Objects.</a>
6 <a href="#functiontopic-6" target="_self">Key Takeaways.</a>
<h3 id="functiontopic-1">Define a Function.</h3>
There are a few different ways to define a function in JavaScript:

A <strong>Function Declaration </strong>defines a named function. 

To create a function declaration you use the <code>function</code> keyword followed by the name of the function. 

When using function declarations, the function definition is hoisted, thus allowing the function to be used before it is defined.

<span class="green">function name(parameters){ <em>statements</em>}</span>
A <strong>Function Expressions</strong> defines a named or anonymous function. 

An anonymous function is a function that has no name. 

Function Expressions are not hoisted, and therefore cannot be used before they are defined. 

In the example below, we are setting the anonymous function object equal to a variable.

<span class="green">let name = function(parameters){
  
<em>statements</em>
}</span>
An <strong>Arrow Function Expression</strong> is a shorter syntax for writing function expressions. 

Arrow functions do not create their own <code>this</code> value.

<span class="green">let name = (parameters) =&gt; {
  
<em>statements</em>
}</span>
<h3 id="functiontopic-2">Parameters vs. 
Arguments.</h3>
If you’re new to JavaScript, you may have heard the terms 
<em>parameters</em> and <em>arguments </em>used interchangeably. 

While very similar, there is an important distinction to make between these two keywords.

<strong>Parameters</strong> are used when defining a function, they are the 
<em>names</em> created in the function definition. 

In fact, during a function definition, we can pass in up to 255 parameters! Parameters are separated by commas in the <code>()</code>. 

Here’s an example with two parameters — <code>param1</code> &amp; <code>param2</code>:

<span class="green">const param1 = true;
const param2 = false;</span>
<span class="green">function twoParams(param1, param2){
  
<em>console.log(param1, param2);</em>}</span>
<strong>Arguments</strong>, on the other hand, are the 
<em>values</em> the function receives from each parameter when the function is executed (invoked). 

In the above example, our two arguments are <code>true</code> &amp; <code>false</code>.

<h3 id="functiontopic-3">Invoking a Function.</h3>
Functions execute when the function is called. 

This process is known as invocation. 

You can invoke a function by referencing the function name, followed by an open and closed parenthesis: <code>()</code>.

Lets explore an example.

First, we’ll define a function named <code>logIt</code>. 

This function will take one parameter, <code>name</code>. 

When executed, the function will log that <code>name</code> back to the console:

<span class="green">function logIt(name){
  
<em>console.log(name);</em>}</span>
To invoke our function, we call it, while passing in the singular parameter. 

Here I am calling this function with the name 
<em>Joe</em>:

<span class="green">logIt('Joe');
// Joe</span>
If your function has no parameters, you can invoke it with an empty set of parenthesis:

<span class="green">function logIt2(){
  
<em>console.log('The second one');</em>}</span>
<span class="green">logIt2();
// The second one</span>
<h3 id="functiontopic-4">Function Return.</h3>
Every function in JavaScript returns <code>undefined</code> unless otherwise specified.

Let’s test this by creating and invoking an empty function:

<span class="green">function test(){};</span>
<span class="green">test();
// undefined</span>
Awesome, as expected, <code>undefined</code> is returned.

Now, we can customize what is returned in our function by using the <code>return</code> keyword followed by our return value. 

Take a look at the code below:

<span class="green">function test(){
  return true;
};</span>
<span class="green">test();
// <strong>true</strong></span>
In this example we explicitly tell the function to return <code>true</code>. 

When we invoke the function, that’s exactly what happens.

But why is this important?

It’s important because the value that a function returns, is actually returned to the caller of the function. 

Take a look at this code:

<span class="green">let double = function(num) {
   return num * 2;
}</span>
This is a function expression that creates a function that will return two times the value of our input parameter <code>num</code>. 

We can then invoke the function and save the return value to a variable:

<span class="green">let test = double(3);</span>
When we log out our <code>test</code> value, we get <code>6</code>:

<span class="green">console.log(test);
// 6</span>
Awesome! The <code>return</code> variable not only returns values from a function, but it assigns them to whatever called the function!
Another important rule of the return statement is that it stops function execution immediately.

Consider this example where we have two return statements in our test function:

<span class="green">function test(){
  return true;
  return false;
};</span>
<span class="green">test();
// <strong>true</strong></span>
The first return statement immediately stops execution of our function and causes our function to return <code>true</code>. 

The code on line three: <code>return false;</code> is 
<em>never </em>executed.

<h3 id="functiontopic-5">Function Objects.</h3>
Functions are function objects. 

In JavaScript, anything that is not a primitive type ( <code>undefined</code>, <code>null</code>,<code>boolean</code>, <code>number</code>, or <code>string</code>) is an object. 

Objects in JavaScript are <em>extremely </em>versatile. 

Because of this, we can even pass a function as a parameter into another function.

When a function accepts another function as a parameter, or returns a function, it is called a higher-order function. 

You’ve probably already used a bunch of higher order functions and don’t even know it: <code>Array.prototype.map</code>and <code>Array.prototype.filter</code> are higher order functions (Just to name a couple). 


<em>You can check out some of my previous articles to learn more about objects and higher order functions in JavaScript…</em>

<h3 id="functiontopic-6">Key Takeaways.</h3>
This is a lot of information to digest. 

Here’s a list of the important stuff:

<ul>
<li>A function is a <strong>
<em>subprogram</em></strong> designed to perform a particular task.</li>
<li>Function definitions are hoisted — expressions are not.</li>
<li>Functions are executed when they are called. 

This is known as <strong>
<em>invoking</em></strong> a function.</li>
<li>Values can be <strong>
<em>passed</em></strong> into functions and used within the function. 

The name of the value is called a parameter. 

The actual value itself is called an argument.</li>
<li>Functions <strong>
<em>always</em></strong> <code>return</code> a value. 

In JavaScript, if no <code>return</code> value is specified, the function will return <code>undefined</code> by default.</li>
<li>Functions are <strong>
<em>objects</em></strong>.</li></ul>
<h3>What is a Function Expression?</h3>
A JavaScript function can also be defined using an <strong>expression</strong>.
A function expression can be stored in a variable:
<em>var x = function (a, b) {return a * b};</em>
After a function expression has been stored in a variable, the variable can be used as a function. 

Functions stored in variables do not need function names. 

They are always invoked (called) using the variable name.

<h3>Function Expression VS. 
Function Statement</h3>
<strong>Example: Function Expression</strong>
<span>alert(foo()); // ERROR! foo wasn&#x27;t loaded yet
var foo = function() { return 5; }</span>

<strong>Example: Function Declaration</strong>
<span>alert(foo()); // Alerts 5. 

Declarations are loaded before any code can run.<br/>function foo() { return 5; }</span>

<strong>Function declarations</strong> load before any code is executed while <strong>Function expressions</strong> load only when the interpreter reaches that line of code.Similar to the <code>var</code> statement, function declarations are hoisted to the top of other code. 

Function expressions aren’t hoisted, which allows them to retain a copy of the local variables from the scope where they were defined.

<h3>Benefits of Function Expressions</h3>
There are several different ways that function expressions become more useful than function declarations.
<h2>"use strict"</h2>
Defines that JavaScript code should be executed in "strict mode".

With strict mode, you can not, for example, use undeclared variables.

"use strict";
x = 3.14;  // This will cause an error (x is not defined).

"use strict";
myFunction();

function myFunction() {
  y = 3.14;   // This will also cause an error because y is not declared
}
Declared inside a function, it has local scope (only the code inside the function is in strict mode):

x = 3.14;       // This will not cause an error.
myFunction();

function myFunction() {
  "use strict";
  y = 3.14;   // This will cause an error
}

Why Strict Mode?
Strict mode makes it easier to write "secure" JavaScript.

Strict mode changes previously accepted "bad syntax" into real errors.

As an example, in normal JavaScript, mistyping a variable name creates a new global variable. 

In strict mode, this will throw an error, making it impossible to accidentally create a global variable.

In normal JavaScript, a developer will not receive any error feedback assigning values to non-writable properties.

In strict mode, any assignment to a non-writable property, a getter-only property, a non-existing property, a non-existing variable, or a non-existing object, will throw an error.

<h2>Calculate the Max/Min value from an array</h2>
The built-in functions Math.max() and Math.min() find the maximum and minimum value of the arguments, respectively.

Math.max(1, 2, 3, 4); // 4
Math.min(1, 2, 3, 4); // 1

These functions will not work as-is with arrays of numbers. 


However, there are some ways around this.

var numbers = [1, 2, 3, 4];
Math.max.apply(null, numbers) // 4
Math.min.apply(null, numbers) // 1

A simpler way is with the new spread operator.
var numbers = [1, 2, 3, 4];
Math.max(...numbers) // 4
Math.min(...numbers) // 1

This operator spread the values into the function.

<h2>find max in array of arrays</h2>
var array = [
  [14, 23],
  [13, 47],
  [38, 35],
  [24, 34]
];

var maxRow = array.map(function(row){ return Math.max.apply(Math, row); });
Math.max(...maxRow)

ymax: Math.max(...thedrawdata.map(function(row){ return Math.max.apply(Math, row);})),

<h2>subtopic.js</h2>
subtopic.js not yet finished

<h2>load json from url</h2>
$.getJSON(url, function(data) {
    //data is the JSON string
});

<h3>Append &lt;script>&lt;/script> in javascript</h3>
&lt;script src="http://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_monthqfq&param=hk00700,month,,,320,qfq">&lt;/script>

&lt;script>
console.log(kline_monthqfq);
&lt;/script>

var s = document.createElement("script");
s.type = "text/javascript";
s.src = "http://somedomain.com/somescript";
$("head").append(s);

Note that the script will load and you can access the variables inside it, but you wouldn't see the actual &lt;script> tag in the DOM.

<h2>PhantomJS</h2>
<a href="https://phantomjs.org/" class="whitebut gold limebs">PhantomJS - Scriptable Headless Browser</a>
<a href="https://phantomjs.org/documentation/" class="whitebut ">phantomjs documentation</a>
<a href="https://phantomjs.org/quick-start.html" class="whitebut ">Quick Start with PhantomJS</a>

PhantomJS is a JS console. 
similar to nodejs

must go to phantomjs install folder, and then run it from the terminal or command prompt:

cd D:/phantomjs/bin/
phantomjs hello.js

the file must inside the install folder

very important to call phantom.exit at some point in the script, otherwise PhantomJS will not be terminated at all.
Page Loading
A web page can be loaded, analyzed, and rendered by creating a webpage object.

The following script demonstrates the simplest use of page object. 
It loads example.com and then saves it as an image, example.png in the same directory the script was run in.

var page = require('webpage').create();
page.open('http://example.com', function(status) {
  console.log("Status: " + status);
  if(status === "success") {
    page.render('example.png');
  }
  phantom.exit();
});

Because of its rendering features, PhantomJS can be used to capture web pages, essentially taking a screenshot of the contents.

The following loadspeed.js script loads a specified URL (do not forget the http protocol) and measures the time it takes to load it.

var page = require('webpage').create(),
  system = require('system'),
  t, address;

if (system.args.length === 1) {
  console.log('Usage: loadspeed.js [some URL]');
  phantom.exit();
}

t = Date.now();
address = system.args[1];
page.open(address, function(status) {
  if (status !== 'success') {
    console.log('FAIL to load the address');
  } else {
    t = Date.now() - t;
    console.log('Loading ' + system.args[1]);
    console.log('Loading time ' + t + ' msec');
  }
  phantom.exit();
});
Run the script with the command:

phantomjs loadspeed.js http://www.google.com
It outputs something like:

Loading http://www.google.com
Loading time 719 msec
Code Evaluation
To evaluate JavaScript code in the context of the web page, use evaluate() function. 
The execution is "sandboxed", there is no way for the code to access any JavaScript objects and variables outside its own page context. 
An object can be returned from evaluate(), however it is limited to simple objects and can’t contain functions or closures.

Here is an example to show the title of a web page:

var page = require('webpage').create();
page.open(url, function(status) {
  var title = page.evaluate(function() {
    return document.title;
  });
  console.log('Page title is ' + title);
  phantom.exit();
});
Any console message from a web page, including from the code inside evaluate(), will not be displayed by default. 
To override this behavior, use the onConsoleMessage callback. 
The previous example can be rewritten to:

var page = require('webpage').create();
page.onConsoleMessage = function(msg) {
  console.log('Page title is ' + msg);
};
page.open(url, function(status) {
  page.evaluate(function() {
    console.log(document.title);
  });
  phantom.exit();
});

Since the script is executed as if it is running on a web browser, standard DOM scripting and CSS selectors work just fine. 
It makes PhantomJS suitable to carry out various page automation tasks.

<h2>Sine Wave in JavaScript</h2>
<a href="https://gist.github.com/gkhays/e264009c0832c73d5345847e673a64ab" class="whitebut ">Draw a Sine Wave in JavaScript</a>

<a href="https://codepen.io/isdampe/pen/MbLdOv" class="whitebut ">JS Sine Wave</a>

<h2>JavaScript single line 'if' statement syntax</h2>

if (lemons) document.write("foo gave me a bar");

(lemons) ? alert("please give me a lemonade") : alert("then give me a beer");

(lemon) ? document.write("foo gave me a bar") : document.write("FALSE");

if(dog) alert('bark bark');

<h2>if-else shorthand omitting the second expression</h2>

if (x==2) doSomething; else doSomethingElse

if (myArray[i].value) alert('yay') ; else continue;

<h2>calculate ema</h2>
function EMACalc(mArray,mRange) {
  var k = 2/(mRange + 1);
  // first item is just the same as the first item in the input
  emaArray = [mArray[0]];
  // for the rest of the items, they are computed with the previous one
  for (var i = 1; i < mArray.length; i++) {
    emaArray.push(mArray[i] * k + emaArray[i - 1] * (1 - k));
  }
  return emaArray;
}

<h2>remove empty element in an array</h2>
var array = [0, 1, null, 2, "", 3, undefined, 3,,,,,, 4,, 4,, 5,, 6,,,,];

var filtered = array.filter(function (el) {
  return el != null;
});

alert(filtered);

or
arr = arr.filter((val) => val != "");

<h2>remove common items from list</h2>
Use the Array.filter() method:
fmList = [1,2,3,4,6,7,8,9]
toRemove = [2,3,5]
fmList = fmList.filter( function( item ) {
  return !toRemove.includes( item );
} );

fmList = fmList.filter( ( item ) => !toRemove.includes( item ) );

<h2>create script element and load it</h2>
document.createElement(“script”) synchronously

create &lt;script> element with an "onload" handler, and that will be called when the script has been loaded and evaluated by the browser.

var script = document.createElement('script');
script.onload = function() {
  alert("Script loaded and ready");
};
script.src = "http://whatever.com/the/script.js";
document.getElementsByTagName('head')[0].appendChild(script);

This isn't pretty, but it works:
&lt;script type="text/javascript">
  document.write('&lt;script type="text/javascript" src="other.js">&lt;/script>');
&lt;/script>

&lt;script type="text/javascript">
  functionFromOther();
&lt;/script>

Or
&lt;script type="text/javascript">
  document.write('&lt;script type="text/javascript" src="other.js">&lt;/script>');
  window.onload = function() {
    functionFromOther();
  };
&lt;/script>

<h2>JSON methods, toJSON</h2>
Let’s say we have a complex object, and we’d like to convert it into a string, to send it over a network, or just to output it for logging purposes.

let user = {
  name: "John",
  age: 30,
  toString() { return `{name: "${this.name}", age: ${this.age}}`; }
};

alert(user); // {name: "John", age: 30}

…But in the process of development, new properties are added, old properties are renamed and removed.
Updating such toString every time can become a pain.

JavaScript provides methods:
<b>JSON.stringify</b> to convert objects into JSON.
<b>JSON.parse</b> to convert JSON back into an object.

For instance, here we JSON.stringify a student:
let student = {
  name: 'John',
  age: 30,
  isAdmin: false,
  courses: ['html', 'css', 'js'],
  wife: null
};

let json = JSON.stringify(student);
alert(typeof json); // we've got a string!
alert(json);
/* JSON-encoded object:
{
  "name": "John",
  "age": 30,
  "isAdmin": false,
  "courses": ["html", "css", "js"],
  "wife": null
}
*/

The method JSON.stringify(student) takes the object and converts it into a string.
The resulting json string is called a <em>JSON-encoded</em> or <em>serialized</em> or <em>stringified</em> or <em>marshalled</em> object.
We are ready to send it over the wire or put into a plain data store.

Please note that a JSON-encoded object has several important differences from the object literal:
Strings use double quotes.
No single quotes or backticks in JSON.
So 'John' becomes "John".
Object property names are double-quoted also.
That’s obligatory.
So age:30 becomes "age":30.

JSON.stringify can be applied to primitives as well.

JSON supports following data types:
Objects { ... 
}
Arrays [ ... 
]

Primitives:
strings, numbers, boolean values true/false, null.

For instance:
// a number in JSON is just a number
alert( JSON.stringify(1) ) // 1

// a string in JSON is still a string, but double-quoted
alert( JSON.stringify('test') ) // "test"
alert( JSON.stringify(true) ); // true
alert( JSON.stringify([1, 2, 3]) ); // [1,2,3]

JSON is data-only language-independent specification, so some JavaScript-specific object properties are skipped by JSON.stringify.

Namely:
Function properties (methods).
Symbolic properties.
Properties that store undefined.

let user = {
  sayHi() { // ignored
    alert("Hello");
  },
  [Symbol("id")]: 123, // ignored
  something: undefined // ignored
};

alert( JSON.stringify(user) ); // {} (empty object)

Usually that’s fine. 
If that’s not what we want, then soon we’ll see how to customize the process.

The great thing is that nested objects are supported and converted automatically.

For instance:
let meetup = {
  title: "Conference",
  room: { number: 23, participants: ["john", "ann"] }
};

alert( JSON.stringify(meetup) );
/* The whole structure is stringified:
{
  "title":"Conference",
  "room":{"number":23,"participants":["john","ann"]},
}
*/

The important limitation: there must be no circular references.

For instance:

let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  participants: ["john", "ann"]
};

meetup.place = room;       // meetup references room
room.occupiedBy = meetup; // room references meetup

JSON.stringify(meetup); // Error: Converting circular structure to JSON

Here, the conversion fails, because of circular reference: room.occupiedBy references meetup, and meetup.place references room:

<figure>

<object type="image/svg+xml" data="/article/json/json-meetup.svg">

  <img class="lazy" data-src="https://javascript.info/article/json/json-meetup.svg">
</object>
</figure>
<h2>Excluding and transforming: replacer</h2>
The full syntax of JSON.stringify is:

  
  
let json = JSON.stringify(value[, replacer, space])

<dl>
<dt>value</dt>
<dd>A value to encode.</dd>
<dt>replacer</dt>
<dd>Array of properties to encode or a mapping function function(key, value).</dd>
<dt>space</dt>
<dd>Amount of space to use for formatting</dd>
</dl>
Most of the time, JSON.stringify is used with the first argument only. 
But if we need to fine-tune the replacement process, like to filter out circular references, we can use the second argument of JSON.stringify.

If we pass an array of properties to it, only these properties will be encoded.

For instance:

let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  participants: [{name: "John"}, {name: "Alice"}],
  place: room // meetup references room
};

room.occupiedBy = meetup; // room references meetup

alert( JSON.stringify(meetup, ['title', 'participants']) );
// {"title":"Conference","participants":[{},{}]}

Here we are probably too strict. 
The property list is applied to the whole object structure. 
So the objects in participants are empty, because name is not in the list.

Let’s include in the list every property except room.occupiedBy that would cause the circular reference:

let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  participants: [{name: "John"}, {name: "Alice"}],
  place: room // meetup references room
};

room.occupiedBy = meetup; // room references meetup

alert( JSON.stringify(meetup, ['title', 'participants', 'place', 'name', 'number']) );
/*
{
  "title":"Conference",
  "participants":[{"name":"John"},{"name":"Alice"}],
  "place":{"number":23}
}
*/

Now everything except occupiedBy is serialized. 
But the list of properties is quite long.

Fortunately, we can use a function instead of an array as the replacer.

The function will be called for every (key, value) pair and should return the “replaced” value, which will be used instead of the original one. 
Or undefined if the value is to be skipped.

In our case, we can return value “as is” for everything except occupiedBy. 
To ignore occupiedBy, the code below returns undefined:

let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  participants: [{name: "John"}, {name: "Alice"}],
  place: room // meetup references room
};

room.occupiedBy = meetup; // room references meetup

alert( JSON.stringify(meetup, function replacer(key, value) {
  alert(`${key}: ${value}`);
  return (key == 'occupiedBy') ? undefined : value;
}));

/* key:value pairs that come to replacer:
:             [object Object]
title:        Conference
participants: [object Object],[object Object]
0:            [object Object]
name:         John
1:            [object Object]
name:         Alice
place:        [object Object]
number:       23
*/

Please note that replacer function gets every key/value pair including nested objects and array items. 
It is applied recursively. 
The value of this inside replacer is the object that contains the current property.

The first call is special. 
It is made using a special “wrapper object”: {": meetup}. 
In other words, the first (key, value) pair has an empty key, and the value is the target object as a whole. 
That’s why the first line is ":[object Object]" in the example above.

The idea is to provide as much power for replacer as possible: it has a chance to analyze and replace/skip even the whole object if necessary.

<h2>Formatting: space</h2>
The third argument of JSON.stringify(value, replacer, space) is the number of spaces to use for pretty formatting.

Previously, all stringified objects had no indents and extra spaces. 
That’s fine if we want to send an object over a network. 
The space argument is used exclusively for a nice output.

Here space = 2 tells JavaScript to show nested objects on multiple lines, with indentation of 2 spaces inside an object:

let user = {
  name: "John",
  age: 25,
  roles: {
    isAdmin: false,
    isEditor: true
  }
};

alert(JSON.stringify(user, null, 2));
/* two-space indents:
{
  "name": "John",
  "age": 25,
  "roles": {
    "isAdmin": false,
    "isEditor": true
  }
}
*/

/* for JSON.stringify(user, null, 4) the result would be more indented:
{
    "name": "John",
    "age": 25,
    "roles": {
  "isAdmin": false,
  "isEditor": true
    }
}
*/

The space parameter is used solely for logging and nice-output purposes.

<h2>Custom “toJSON”</h2>
Like toString for string conversion, an object may provide method toJSON for to-JSON conversion. 
JSON.stringify automatically calls it if available.

For instance:

let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  date: new Date(Date.UTC(2017, 0, 1)),
  room
};

alert( JSON.stringify(meetup) );
/*
  {
    "title":"Conference",
    "date":"2017-01-01T00:00:00.000Z",  // (1)
    "room": {"number":23}               // (2)
  }
*/

Here we can see that date (1) became a string. 
That’s because all dates have a built-in toJSON method which returns such kind of string.

Now let’s add a custom toJSON for our object room (2):

let room = {
  number: 23,
  toJSON() {
    return this.number;
  }
};

let meetup = {
  title: "Conference",
  room
};

alert( JSON.stringify(room) ); // 23

alert( JSON.stringify(meetup) );
/*
  {
    "title":"Conference",
    "room": 23
  }
*/

As we can see, toJSON is used both for the direct call JSON.stringify(room) and when room is nested in another encoded object.

<h2>JSON.parse</h2>
To decode a JSON-string, we need another method named <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON.parse</a>.

The syntax:

  
  
let value = JSON.parse(str, [reviver]);

<dl>
<dt>str</dt>
<dd>JSON-string to parse.</dd>
<dt>reviver</dt>
<dd>Optional function(key,value) that will be called for each (key, value) pair and can transform the value.</dd>
</dl>
For instance:

// stringified array
let numbers = "[0, 1, 2, 3]";

numbers = JSON.parse(numbers);

alert( numbers[1] ); // 1

Or for nested objects:

let userData = '{ "name": "John", "age": 35, "isAdmin": false, "friends": [0,1,2,3] }';

let user = JSON.parse(userData);

alert( user.friends[1] ); // 1

The JSON may be as complex as necessary, objects and arrays can include other objects and arrays. 
But they must obey the same JSON format.

Here are typical mistakes in hand-written JSON (sometimes we have to write it for debugging purposes):

  
  
let json = `{
  name: "John",                     // mistake: property name without quotes
  "surname": 'Smith',               // mistake: single quotes in value (must be double)
  'isAdmin': false                  // mistake: single quotes in key (must be double)
  "birthday": new Date(2000, 2, 3), // mistake: no "new" is allowed, only bare values
  "friends": [0,1,2,3]              // here all fine
}`;

Besides, JSON does not support comments. 
Adding a comment to JSON makes it invalid.

There’s another format named <a href="http://json5.org/">JSON5</a>, which allows unquoted keys, comments etc. 
But this is a standalone library, not in the specification of the language.

The regular JSON is that strict not because its developers are lazy, but to allow easy, reliable and very fast implementations of the parsing algorithm.

<h2>Using reviver</h2>
Imagine, we got a stringified meetup object from the server.

It looks like this:

  
  
// title: (meetup title), date: (meetup date)
let str = '{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}';

…And now we need to <em>deserialize</em> it, to turn back into JavaScript object.

Let’s do it by calling JSON.parse:

let str = '{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}';

let meetup = JSON.parse(str);

alert( meetup.date.getDate() ); // Error!

Whoops! An error!

The value of meetup.date is a string, not a Date object. 
How could JSON.parse know that it should transform that string into a Date?

Let’s pass to JSON.parse the reviving function as the second argument, that returns all values “as is”, but date will become a Date:

let str = '{"title":"Conference","date":"2017-11-30T12:00:00.000Z"}';

let meetup = JSON.parse(str, function(key, value) {
  if (key == 'date') return new Date(value);
  return value;
});

alert( meetup.date.getDate() ); // now works!

By the way, that works for nested objects as well:

let schedule = `{
  "meetups": [
    {"title":"Conference","date":"2017-11-30T12:00:00.000Z"},
    {"title":"Birthday","date":"2017-04-18T12:00:00.000Z"}
  ]
}`;

schedule = JSON.parse(schedule, function(key, value) {
  if (key == 'date') return new Date(value);
  return value;
});

alert( schedule.meetups[1].date.getDate() ); // works!

<h2>Summary</h2>

JSON is a data format that has its own independent standard and libraries for most programming languages.
JSON supports plain objects, arrays, strings, numbers, booleans, and null.
JavaScript provides methods <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify">JSON.stringify</a> to serialize into JSON and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">JSON.parse</a> to read from JSON.
Both methods support transformer functions for smart reading/writing.
If an object has toJSON, then it is called by JSON.stringify.

<h2>Tasks</h2>
<h3>Turn the object into JSON and back</h3>
importance: 5Turn the user into JSON and then read it back into another variable.

  
  
let user = {
  name: "John Smith",
  age: 35
};

<button class="task__solution" type="button">solution</button>

  
  
let user = {
  name: "John Smith",
  age: 35
};

let user2 = JSON.parse(JSON.stringify(user));

<button class="close-button task__answer-close" type="button" title="close"></button><h3 class="task__title">importance: 5In simple cases of circular references, we can exclude an offending property from serialization by its name.

But sometimes we can’t just use the name, as it may be used both in circular references and normal properties. 
So we can check the property by its value.

Write replacer function to stringify everything, but remove properties that reference meetup:

let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  occupiedBy: [{name: "John"}, {name: "Alice"}],
  place: room
};

// circular references
room.occupiedBy = meetup;
meetup.self = meetup;

alert( JSON.stringify(meetup, function replacer(key, value) {
  /* your code */
}));

/* result should be:
{
  "title":"Conference",
  "occupiedBy":[{"name":"John"},{"name":"Alice"}],
  "place":{"number":23}
}
*/

<button class="task__solution" type="button">solution</button>

  
  

  
  

  
  
let room = {
  number: 23
};

let meetup = {
  title: "Conference",
  occupiedBy: [{name: "John"}, {name: "Alice"}],
  place: room
};

room.occupiedBy = meetup;
meetup.self = meetup;

alert( JSON.stringify(meetup, function replacer(key, value) {
  return (key != " &amp;&amp; value == meetup) ? undefined : value;
}));

/*
{
  "title":"Conference",
  "occupiedBy":[{"name":"John"},{"name":"Alice"}],
  "place":{"number":23}
}
*/

<h2>show turnover on page</h2>
function showTO(stkcode) {
  stkcode = "00000"+stkcode
  codewidth = stkcode.length
  stkcode = stkcode.slice(codewidth-5, codewidth)

  urladdr = 'http://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&amp;param=hk' + stkcode + ',day,,,20,qfq';
  var script = document.createElement('script');
  script.onload = function() {
    $("#turnover").html("Turnover: ");
    theObj = kline_dayqfq.data;
    newObj = Object.values(theObj)
    newObj = Object.values(newObj[0])
    newObj = Object.values(newObj[0])
    for(i=10;i&lt;newObj.length;i++){
      thedate = newObj[i][0]  // date
      theamt = Math.round(Number(newObj[i][8]))  // amt
      $("#turnover").append( theamt,"w ")
    }
  };
  script.src = urladdr;
  document.getElementsByTagName('head')[0].appendChild(script);
}

<h2>get the name of the array in json data</h2>
let user = { name: "John", age: 30 };

Object.keys(user) = ["name", "age"]
Object.values(user) = ["John", 30]
Object.entries(user) = [ ["name","John"], ["age",30] ]

Accessing nested JSON values with unknown names
https://stackoverflow.com/questions/36031009/access-elements-inside-json-object-without-knowing-names

<h2>navigation methods</h2>
if(testkey == 'T'){window.scrollTo(0,0);}
if(testkey == '8'){window.location = '#dateTime';}
if(testkey == "2"){
 divtoc = document.getElementById("toc");
 $('body,html').animate({scrollTop:(divtoc.clientHeight + divtoc.offsetTop-600)}, 1);
}

<h2>detect whether the "ALT" key was pressed</h2>
<span class="orange">event.altKey</span>
A Boolean, indicating whether the "ALT" key was pressed when the key event occured.

<span class="orange">document.onkeydown = keydown;</span>
function keydown(evt) {
    if (!evt) evt = event;
    if (evt.altKey) {
        alert('alt');
    }
}

or
<span class="orange">$(document).on('keydown', function (e) {</span>
    if (e.key === 'Alt') {
        alert('alt');
    }
});

<h2>KeyboardEvent ctrlKey Property</h2>
<span class="orange">event.ctrlKey</span>
true - The ctrl key was pressed
false - The ctrl key was not pressed

if (event.ctrlKey) {
        alert('ctrl yes');
} else {
        alert('ctrl no');
}

<h2>KeyboardEvent shiftKey Property</h2>
<span class="orange">event.shiftKey</span>
if (event.shiftKey) {
        alert('shift yes');
} else {
        alert('shift no');
}

<h2>KeyboardEvent metaKey Property</h2>
<span class="orange">event.metaKey</span>
if (event.metaKey) {
        alert('metaKey yes');
} else {
        alert('metaKey no');
}

<h2>KeyboardEvent keyCode Property</h2>
<span class="orange">event.keyCode</span>
var x = event.keyCode;

&lt;input type="text" onkeypress="uniCharCode(event)" onkeydown="uniKeyCode(event)">
// both function will be called at the same time when key pressed
function uniCharCode(event) {
  var char = event.which || event.keyCode;
        alert("Unicode CHARACTER code: " + char);
}

function uniKeyCode(event) {
  var key = event.keyCode;
        alert('Unicode KEY code: " + key);
}
When pressing the "a" key on the keyboard (not using caps lock), the result of char and key will be:

Unicode CHARACTER code: 97
Unicode KEY code: 65

Example
Alert some text if the user presses the <span class="orange">Escape</span> key:

&lt;input type="text" onkeydown="myFunction(event)">

function myFunction(event) {
  var x = event.keyCode;
  if (x == 27) {  // 27 is the ESC key
    alert ("You pressed the Escape key!");
  }
}

Example
Convert the Unicode value into a character (does not work for function keys):
var x = event.keyCode;                // Get the Unicode value
var y = String.fromCharCode(x);       // Convert the value into a character

<h2>KeyboardEvent which Property</h2>
<span class="orange">event.which</span>
returns the <span class="orange">Unicode character code</span> of the key that triggered the <span class="orange">onkeypress event</span>,
or the <span class="orange">Unicode key code</span> of the key that triggered the <span class="orange">onkeydown or onkeyup event</span>.

Example
Get the Unicode value of the pressed keyboard key:
var x = event.which;

<h2>KeyboardEvent key Property</h2>
<span class="orange">event.key</span>
A String, representing the pressed keyboard button.
Possible values:
A single character (like "a", "W", "4", "+" or "$")
A multicharacter (like "F1", "Enter", "HOME" or "CAPS LOCK")

Example
Alert some text if the user presses the "A" key:
var x = event.key;
// If the pressed keyboard button is "a" or "A" (using caps lock or shift), alert some text.

if (x == "a" || x == "A") {
  alert ("You pressed the 'A' key!");
}

<h2>KeyboardEvent charCode Property</h2>
event.charCode
A Number, representing the Unicode character code
Example
Alert some text if the user presses the "O" key:
function myFunction(event) {
  var x = event.charCode || event.keyCode;
  if (x == 111 || x == 79) { // o is 111, O is 79
    alert("You pressed the 'O' key!");
  }
}

<h2>onwheel, onscroll Event</h2>
<span class="orange">onwheel</span> specifically fires when the mouse wheel is spun. 

Note that onwheel is non-standard and should be avoided unless you're specifically targeting browsers that support it and/or are providing an extra feature whose absence won't be felt.

<span class="orange">onscroll</span> fires for any kind of scrolling, including keyboard buttons like the arrow keys, Home, End, Page Up, Page Down, space bar, tabbing etc.

<span class="orange">object.onscroll = function(){myScript};</span>

using the addEventListener() method:
<span class="orange">object.addEventListener("scroll", myScript);</span>

Note: The addEventListener() method is not supported in Internet Explorer 8 and earlier versions.

Example
Toggle between class names on different scroll positions - When the user scrolls down 50 pixels from the top of the page, the class name "test" will be added to an element (and removed when scrolled up again).
<span class="orange">window.onscroll = function() {myFunction()};</span>
function myFunction() {
  if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
    document.getElementById("myP").className = "test";
  } else {
    document.getElementById("myP").className = "";
  }
}

Example
Slide in an element when the user has scrolled down 350 pixels from the top of the page (add the slideUp class):

window.onscroll = function() {myFunction()};
function myFunction() {
  if (document.body.scrollTop > 350 || document.documentElement.scrollTop > 350) {
    document.getElementById("myImg").className = "slideUp";
  }
}

<h2>MouseEvent which Property</h2>
<span class="orange">event.which</span>
returns a number that indicates which mouse button was pressed when a mouse event was triggered.

Example
Find out which mouse button that was pressed when a mouse event was triggered:
alert("You pressed button: " + event.which)

<h2>MouseEvent button Property</h2>
event.button
A Number, representing which mouse button that was pressed when the mouse event occured.

alert("You pressed button: " + event.button)

<h2>Style Object Properties</h2>
Sets or returns the Object Properties
example
thePointerImg.style.width = (currWidth - 100) + "px";
thePointerImg.style.transform = "rotate(90deg)";

Rotate and translate
    transform-origin: left;
    translate(50%, 50%) rotate(90deg) ;

    transform-origin: 50%;
    rotate(90deg) translateY(100%) ;

Be careful on the "order of execution" in CSS3 chains! The rule is (right) from (left). 
Not Left to Right.

transformation: translate(0,10%) rotate(25deg);
The "rotate" operation is done first, than the "translate" operation comes next/second.
alignContent	alignment between the lines inside a flexible container when the items do not use all available space
alignItems	alignment for items inside a flexible container
alignSelf	alignment for selected items inside a flexible container
animation	A shorthand property for all the animation properties below, except the animationPlayState property
animationDelay	when the animation will start
animationDirection	whether or not the animation should play in reverse on alternate cycles
animationDuration	how many seconds or milliseconds an animation takes to complete one cycle
animationFillMode	what values are applied by the animation outside the time it is executing
animationIterationCount	number of times an animation should be played
animationName	a name for the @keyframes animation
animationTimingFunction	speed curve of the animation
animationPlayState	whether the animation is running or paused
background	all the background properties in one declaration
backgroundAttachment	whether a background-image is fixed or scrolls with the page
backgroundColor	background-color of an element
backgroundImage	background-image for an element
backgroundPosition	starting position of a background-image
backgroundRepeat	how to repeat (tile) a background-image
backgroundClip	painting area of the background
backgroundOrigin	positioning area of the background images
backgroundSize	size of the background image
backfaceVisibility	whether or not an element should be visible when not facing the screen
border	borderWidth, borderStyle, and borderColor in one declaration
borderBottom	all the borderBottom properties in one declaration
borderBottomColor	color of the bottom border
borderBottomLeftRadius	shape of the border of the bottom-left corner
borderBottomRightRadius	shape of the border of the bottom-right corner
borderBottomStyle	style of the bottom border
borderBottomWidth	width of the bottom border
borderCollapse	whether the table border should be collapsed into a single border, or not
borderColor	color of an element's border (can have up to four values)
borderImage	A shorthand property for setting or returning all the borderImage properties
borderImageOutset	amount by which the border image area extends beyond the border box
borderImageRepeat	whether the image-border should be repeated, rounded or stretched
borderImageSlice	inward offsets of the image-border
borderImageSource	image to be used as a border
borderImageWidth	widths of the image-border
borderLeft	all the borderLeft properties in one declaration
borderLeftColor	color of the left border
borderLeftStyle	style of the left border
borderLeftWidth	width of the left border
borderRadius	A shorthand property for setting or returning all the four borderRadius properties
borderRight	all the borderRight properties in one declaration
borderRightColor	color of the right border
borderRightStyle	style of the right border
borderRightWidth	width of the right border
borderSpacing	space between cells in a table
borderStyle	style of an element's border (can have up to four values)
borderTop	all the borderTop properties in one declaration
borderTopColor	color of the top border
borderTopLeftRadius	shape of the border of the top-left corner
borderTopRightRadius	shape of the border of the top-right corner
borderTopStyle	style of the top border
borderTopWidth	width of the top border
borderWidth	width of an element's border (can have up to four values)
bottom	bottom position of a positioned element
boxDecorationBreak	behaviour of the background and border of an element at page-break, or, for in-line elements, at line-break.
boxShadow	Attaches one or more drop-shadows to the box
boxSizing	Allows you to define certain elements to fit an area in a certain way
captionSide	position of the table caption
clear	position of the element relative to floating objects
clip	which part of a positioned element is visible
color	color of the text
columnCount	number of columns an element should be divided into
columnFill	how to fill columns
columnGap	gap between the columns
columnRule	A shorthand property for setting or returning all the columnRule properties
columnRuleColor	color of the rule between columns
columnRuleStyle	style of the rule between columns
columnRuleWidth	width of the rule between columns
columns	A shorthand property for setting or returning columnWidth and columnCount
columnSpan	how many columns an element should span across
columnWidth	width of the columns
content	Used with the :before and :after pseudo-elements, to insert generated content
counterIncrement	Increments one or more counters
counterReset	Creates or resets one or more counters
cursor	type of cursor to display for the mouse pointer
direction	text direction
display	an element's display type
emptyCells	whether to show the border and background of empty cells, or not
filter	image filters (visual effects, like blur and saturation)
flex	length of the item, relative to the rest
flexBasis	initial length of a flexible item
flexDirection	direction of the flexible items
flexFlow	A shorthand property for the flexDirection and the flexWrap properties
flexGrow	how much the item will grow relative to the rest
flexShrink	how the item will shrink relative to the rest
flexWrap	whether the flexible items should wrap or not
cssFloat	horizontal alignment of an element
font	fontStyle, fontVariant, fontWeight, fontSize, lineHeight, and fontFamily in one declaration
fontFamily	font family for text
fontSize	font size of the text
fontStyle	whether the style of the font is normal, italic or oblique
fontVariant	whether the font should be displayed in small capital letters
fontWeight	boldness of the font
fontSizeAdjust	Preserves the readability of text when font fallback occurs
fontStretch	Selects a normal, condensed, or expanded face from a font family
hangingPunctuation	Specifies whether a punctuation character may be placed outside the line box
height	height of an element
hyphens	Sets how to split words to improve the layout of paragraphs
icon	Provides the author the ability to style an element with an iconic equivalent
imageOrientation	Specifies a rotation in the right or clockwise direction that a user agent applies to an image
isolation	Defines whether an element must create a new stacking content
justifyContent	alignment between the items inside a flexible container when the items do not use all available space.
left	left position of a positioned element
letterSpacing	space between characters in a text
lineHeight	distance between lines in a text
listStyle	listStyleImage, listStylePosition, and listStyleType in one declaration
listStyleImage	an image as the list-item marker
listStylePosition	position of the list-item marker
listStyleType	list-item marker type
margin	margins of an element (can have up to four values)
marginBottom	bottom margin of an element
marginLeft	left margin of an element
marginRight	right margin of an element
marginTop	top margin of an element
maxHeight	maximum height of an element
maxWidth	maximum width of an element
minHeight	minimum height of an element
minWidth	minimum width of an element
navDown	where to navigate when using the arrow-down navigation key
navIndex	tabbing order for an element
navLeft	where to navigate when using the arrow-left navigation key
navRight	where to navigate when using the arrow-right navigation key
navUp	where to navigate when using the arrow-up navigation key
objectFit	Specifies how the contents of a replaced element should be fitted to the box established by its used height and width
objectPosition	Specifies the alignment of the replaced element inside its box
opacity	opacity level for an element
order	order of the flexible item, relative to the rest
orphans	minimum number of lines for an element that must be left at the bottom of a page when a page break occurs inside an element
outline	all the outline properties in one declaration
outlineColor	color of the outline around a element
outlineOffset	Offsets an outline, and draws it beyond the border edge
outlineStyle	style of the outline around an element
outlineWidth	width of the outline around an element
overflow	what to do with content that renders outside the element box
overflowX	Specifies what to do with the left/right edges of the content, if it overflows the element's content area
overflowY	Specifies what to do with the top/bottom edges of the content, if it overflows the element's content area
padding	padding of an element (can have up to four values)
paddingBottom	bottom padding of an element
paddingLeft	left padding of an element
paddingRight	right padding of an element
paddingTop	top padding of an element
pageBreakAfter	page-break behavior after an element
pageBreakBefore	page-break behavior before an element
pageBreakInside	page-break behavior inside an element
perspective	perspective on how 3D elements are viewed
perspectiveOrigin	bottom position of 3D elements
position	type of positioning method used for an element (static, relative, absolute or fixed)
quotes	type of quotation marks for embedded quotations
resize	whether or not an element is resizable by the user
right	right position of a positioned element
tableLayout	way to lay out table cells, rows, and columns
tabSize	length of the tab-character
textAlign	horizontal alignment of text
textAlignLast	how the last line of a block or a line right before a forced line break is aligned when text-align is "justify"
textDecoration	decoration of a text
textDecorationColor	color of the text-decoration
textDecorationLine	type of line in a text-decoration
textDecorationStyle	style of the line in a text decoration
textIndent	indentation of the first line of text
textJustify	justification method used when text-align is "justify"
textOverflow	what should happen when text overflows the containing element
textShadow	shadow effect of a text
textTransform	capitalization of a text
top	top position of a positioned element
transform	Applies a 2D or 3D transformation to an element
transformOrigin	position of transformed elements
<a href="https://cssreference.io/property/transform-origin/" class="whitebut ">transform-origin</a>

transformStyle	how nested elements are rendered in 3D space
transition	A shorthand property for setting or returning the four transition properties
transitionProperty	CSS property that the transition effect is for
transitionDuration	how many seconds or milliseconds a transition effect takes to complete
transitionTimingFunction	speed curve of the transition effect
transitionDelay	when the transition effect will start
unicodeBidi	whether the text should be overridden to support multiple languages in the same document
userSelect	whether the text of an element can be selected or not
verticalAlign	vertical alignment of the content in an element
visibility	whether an element should be visible
whiteSpace	how to handle tabs, line breaks and whitespace in a text
width	width of an element
wordBreak	line breaking rules for non-CJK scripts
wordSpacing	spacing between words in a text
wordWrap	Allows long, unbreakable words to be broken and wrap to the next line
widows	minimum number of lines for an element that must be visible at the top of a page
zIndex	stack order of a positioned element

CSS 2D Transforms Methods
Example
div {
  transform: rotate(20deg); /* Standard syntax */
  transform: translate(50px, 100px);
  transform: scale(2, 3);
}

translate(), rotate(), scaleX(), scaleY(), scale(), skewX(), skewY(), skew(), matrix()

The matrix() method take six parameters, containing mathematic functions, which allows you to rotate, scale, move (translate), and skew elements.

The parameters are as follow: 
matrix(scaleX(),skewY(),skewX(),scaleY(),translateX(),translateY())

Example
  transform: matrix(1, -0.3, 0, 1, 0, 0);

matrix(n,n,n,n,n,n)	transformation, using a matrix of six values
translate(x,y)	translation, moving the element along the X- and the Y-axis
translateX(n)	translation, moving the element along the X-axis
translateY(n)	translation, moving the element along the Y-axis
scale(x,y)	scale transformation, changing the elements width and height
scaleX(n)	scale transformation, changing the element's width
scaleY(n)	scale transformation, changing the element's height
rotate(angle)	rotation, the angle is specified in the parameter
skew(x-angle,y-angle)	skew transformation along the X- and the Y-axis
skewX(angle)	skew transformation along the X-axis
skewY(angle)	skew transformation along the Y-axis

<h2>jQuery.getScript</h2>
The jQuery.getScript() method is a shorthand of the Ajax function
(with the dataType attribute: $.ajax({ url: url,dataType: "script"}))

This needs testing!
$.getScript("demo_script.js");

$.getScript("test.js", function(data, textStatus, jqxhr) {
console.log(data); //data returned
console.log(textStatus); //success
console.log(jqxhr.status); //200
console.log('Load was performed.');
});

<h2>document.getElementById vs jQuery $()</h2>
Not exactly!!

document.getElementById('contents'); //returns a HTML DOM Object

var contents = $('#contents');  //returns a jQuery Object

In jQuery, to get the same result as document.getElementById, you can access the jQuery Object and get the first element in the object 
(Remember JavaScript objects act similar to associative arrays).

var contents = $('#contents')[0]; //returns a HTML DOM Object
or this
var contents = $('#contents').get(0);

==============

Calling document.getElementById('id') will return a raw DOM object.

Calling $('#id') will return a jQuery object that wraps the DOM object and provides jQuery methods.

Thus, you can only call jQuery methods like css() or animate() on the $() call.

You can also write 
$(document.getElementById('id'))
which will return a jQuery object and is equivalent to 
$('#id').

You can get the underlying DOM object from a jQuery object by writing 
$('#id')[0].

<h2>math</h2>
Math.PI;            // returns 3.141592653589793
Math.round(4.7);    // returns 5
Math.round(4.4);    // returns 4
Math.pow(8, 2);      // returns 64
Math.sqrt(64);      // returns 8
Math.abs(-4.7);     // returns 4.7
Math.ceil(4.4);     // returns 5
Math.floor(4.7);    // returns 4
Math.sin(90 * Math.PI / 180);     // returns 1 (the sine of 90 degrees)
Math.cos(0 * Math.PI / 180);     // returns 1 (the cos of 0 degrees)
Math.min(0, 150, 30, 20, -8, -200);  // returns -200
Math.max(0, 150, 30, 20, -8, -200);  // returns 150
Math.random();     // returns a random number
Math.E        // returns Euler's number
Math.PI       // returns PI
Math.SQRT2    // returns the square root of 2
Math.SQRT1_2  // returns the square root of 1/2
Math.LN2      // returns the natural logarithm of 2
Math.LN10     // returns the natural logarithm of 10
Math.LOG2E    // returns base 2 logarithm of E
Math.LOG10E   // returns base 10 logarithm of E
<a href="https://mathjs.org/download.html" class="whitebut ">Math.js</a>
<a href="https://mathjs.org/examples/index.html" class="whitebut ">Examples</a>

Math.js is an extensive math library for JavaScript and Node.js. 

Work with different data types like numbers, big numbers, complex numbers, fractions, units, and matrices. 
Powerful and easy to use.

Example
// functions and constants
math.round(math.e, 3)            // 2.718
math.atan2(3, -3) / math.pi      // 0.75
math.log(10000, 10)              // 4
math.sqrt(-4)                    // 2i
math.derivative('x^2 + x', 'x')  // 2*x+1
math.pow([[-1, 2], [3, 1]], 2)
     // [[7, 0], [0, 7]]

// expressions
math.eval('1.2 * (2 + 4.5)')     // 7.8
math.eval('12.7 cm to inch')     // 5 inch
math.eval('sin(45 deg) ^ 2')     // 0.5
math.eval('9 / 3 + 2i')          // 3 + 2i
math.eval('det([-1, 2; 3, 1])')  // -7

// chaining
math.chain(3)
    .add(4)
    .multiply(2)
    .done() // 14

Demo
Try the expression parser below.
See Math Notepad for a full application.

1.2 / (3.3 + 1.7)
0.24
a = 5.08 cm + 2 inch
10.16 cm
a to inch
4 inch
sin(90 deg)
1
f(x, y) = x ^ y
f(x, y)
f(2, 3)
8

Evaluate
Shortcut keys:
Press S to set focus to the input field
Press Ctrl+F11 to toggle full screen
Enter "clear" to clear history

derivative(expr, variable)
derivative(expr, variable, options)
Parameters
Parameter	Type	Description
expr	Node | string	The expression to differentiate
variable	SymbolNode | string	The variable over which to differentiate
options	{simplify: boolean}	There is one option available, simplify, which is true by default. 
When false, output will not be simplified.
Returns#

Examples
math.derivative('x^2', 'x')                     // Node {2 * x}
math.derivative('x^2', 'x', {simplify: false})  // Node {2 * 1 * x ^ (2 - 1)
math.derivative('sin(2x)', 'x'))                // Node {2 * cos(2 * x)}
math.derivative('2*x', 'x').evaluate()          // number 2
math.derivative('x^2', 'x').evaluate({x: 4})    // number 8
const f = math.parse('x^2')
const x = math.parse('x')
math.derivative(f, x)                           // Node {2 * x}

<h2>javascript physics</h2>
<a href="https://brm.io/matter-js/" class="whitebut ">Matter.js is a 2D physics engine</a>
<a href="http://wellcaffeinated.net/PhysicsJS/" class="whitebut ">PhysicsJS easy-to-use physics engine for javascript</a>
<a href="https://developer.ibm.com/tutorials/wa-build2dphysicsengine/" class="whitebut ">Build a simple 2D physics engine</a>
<a href="http://piqnt.com/planck.js/" class="whitebut ">Planck.js 2D JavaScript physics engine</a>

<h2>javascript chemistry</h2>
<a href="http://partridgejiang.github.io/Kekule.js/" class="whitebut ">Kekule.js open source JavaScript library for chemoinformatics</a>

<H2>Generate Alert Box if user tries to change text in text input field</H2>

<XMP><FORM>
<INPUT TYPE="text" VALUE= "dont change" NAME = "leavebutton" onChange= "alert('Please dont change this')"></INPUT>
</FORM></XMP>
<H2>Show the date and time when the page loads</H2>
In this example the event handler onLoad is embedded within the <BODY> tag. 
OnLoad activates
whenever a new page has finished downloading. 
This alert code tells the browser to create an alert
box containing the value of the variable "today". 
Thus, it automatically prints out the date and time
when the page has finished loading and requires no special action by the user.

<XMP><SCRIPT LANGUAGE = "Javascript">
var today= new Date()
</SCRIPT>
....
<BODY onload=alert(today)></XMP>
<H2>Animate the background color of a document</H2>
Notice that the script is not just a series of document.bgColor = commands. 
You could write that script but the colors would change so quickly that you would not see the animated effect. 
We need to introduce a delay between each background color change. 
Javascript offers a setTimeout() method that allows creation of delays as well as serving other functions. 


The setTimeout() method requires two elements to be enclosed in its parentheses. 
The first element is an expression to be evaluated or acted upon. 
The second element is the number of milliseconds (thousandths of a second) to be waited before the first action is undertaken.

setTimeout(expression to be evaluated, milliseconds)

<XMP><SCRIPT LANGUAGE= "javascript">

setTimeout("document.bgColor='white'", 1000)
setTimeout("document.bgColor='lightpink'", 1500)
setTimeout("document.bgColor = 'pink'", 2000)
setTimeout("document.bgColor =  'deeppink'", 2500)
setTimeout("document.bgColor = 'red'", 3000)
setTimeout("document.bgColor = 'tomato'", 3500)
setTimeout("document.bgColor = 'darkred'", 4000)
</SCRIPT></XMP>
<H2>User assignment of a property and dynamic generation of a Web page</H2>
In the example, which illustrates user assigned properties, a new property is defined for the document object called firstline. 
Anytime Javascript encounters the expression document.firstline it will produce the assigned text. 
The fact that I named it "firstline" carries no special meaning to Javascript; that is, it does not know that it is to be the first line in the document. 
Generally, it is a good idea to name the properties with a name related to your intended use.

 The rest of the example shows how the write() method can be used to generate text that appears on a web page. 
Document.open() prepares for creating a page. 
The second open() forces it to appear. 


<XMP><HTML>

<HEAD>
<SCRIPT LANGUAGE = "Javascript">
document.firstline = "Welcome to this page"
</SCRIPT>
<TITLE>load demo</TITLE>
</HEAD>

<BODY>
<SCRIPT>
document.open()
document.write(document.firstline)
document.open()
</SCRIPT>

</BODY></XMP>
<H2>Sample Script to Animate Text in Text Field</H2>
This script will set up a form that asks for user input. 

It will animate text in boxes that surround it to urge the user to provide the information. 

To accomplish this, we must first use standard HTML form tags to create the input fields for user typing. 

We must also create text fields that we will use to create the animation. 

For the sake of illustrating methods of using Javascript to refer to different forms that appear on a page, the examples presents the information in 3 forms. 

It could have also been combined into one form. 

It places the fields for user input in the middle form called f2 and the fields that will animated text placed into them into fields f1 on top and f3 on the bottom. 

Also it places the input elements in form f1 and f3 into tables in order to gain more control over their placement. 

f1,f2, and f3 are just arbitrary names given to the fields. 

In this example "Answer Soon" text appears and disappears, moving around the fields from left to right on the top and then from left to right on the bottom. 

All the code to establish fields and tables should be famiilar to readers with HTML experience. 

The new part is the code enclosed in the SCRIPT tags. 

The heart of these commands are expressions that assign values to particular fields. 

For example the code line document.f1.ta1.value = 'Answer Soon' tells the browser to find the document object (the Web page) and then the form that is a subelement of it called f1 (the first one on top) and then the subelement of that form called ta.1 (the first text entry field). 

Once that element is targeted, the script tells the browser to change the value property of that text field by assigning it the text "Answer Soon". 

The Value attribute in standard HTML markup is the text that a field contains (usually because a user has typed it there.). 

Javascript has extended this allow the script to type values. 

To the user the text appears as in an animation. 

After text appears the sample script makes it disappear by assinging the blank value "" to the same text field. 


<XMP><HTML>
<HEAD>
<TITLE> Animated Text</TITLE>
</HEAD>
<BODY >

<FORM NAME="f1">
<TABLE>
<TR> <TD> <INPUT NAME="ta1" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta2" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta3" TYPE="text" SIZE="20"></INPUT>
</TABLE></FORM>
<FORM NAME="f2" ACTION="http://netadd.com/nam.cgi" METHOD="POST">
<CENTER>
Name <INPUT NAME="pername" TYPE="text" SIZE="20"> Name</INPUT>
Age <INPUT NAME="perage" TYPE="text" SIZE="5"> Age</INPUT>
Occupation <INPUT NAME="perocc" TYPE="text" SIZE="20">Occupation </INPUT>
<INPUT TYPE="Submit" VALUE="Submit"></INPUT>
<INPUT TYPE="Reset" VALUE="Reset"></INPUT>
</CENTER>
</FORM>
<FORM NAME="f3">
<TABLE>
<TR> <TD> <INPUT NAME="ta4" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta5" TYPE="text" SIZE="20"> </INPUT>
<TD> <INPUT NAME="ta6" TYPE="text" SIZE="20"></INPUT>
</TABLE></FORM>

<SCRIPT LANGUAGE= "javascript">
setTimeout("document.f1.ta1.value = 'Answer Soon'", 1000)
setTimeout("document.f1.ta1.value = ''", 1300)
setTimeout("document.f1.ta2.value = 'Answer Soon'", 1600)
setTimeout("document.f1.ta2.value = ''", 1900)
setTimeout("document.f1.ta3.value = 'Answer Soon'", 2200)
setTimeout("document.f1.ta3.value = ''", 2500)
setTimeout("document.f3.ta4.value = 'Answer Soon'", 2800)
setTimeout("document.f3.ta4.value = ''", 3100)
setTimeout("document.f3.ta5.value = 'Answer Soon'", 3400)
setTimeout("document.f3.ta5.value = ''", 3700)
setTimeout("document.f3.ta6.value = 'Answer Soon'", 4000)
setTimeout("document.f3.ta6.value = ''", 4300)
</SCRIPT> </XMP>
<H2>Sample Script to Customize Links Based on User Button Choices</H2>
This sample script demonstrates how to create a script that lets a user chose a category of infomation after which it dynamically generates an html page containing links relevant to that interest. 
It uses a simple form with radio buttons to determine interest. 
Just to add interest it also asks the users to type their name. 
Once the users are done chosing, they click on the submit button and the script generates the html document using their name. 
For the sake of clarity this example is very short with only one choice requested. 
The same principles, however, could be applied to more sophisticated sets ofchoices.
There are three major parts to this Web page and script: 
A. Javascript script cotaining the database of links for each kind of music, the function to create a unique page based on their choice, and the function to create a new Netscape window to show the page. 
B. HTML code to create the informationrequest page cotaining an input form. 
C. Javascript code to set up default values. 


<XMP><HTML>
<HEAD><TITLE>Choice</TITLE>

<SCRIPT Language="javascript">

// sets up database of links - SECTION A1
muresources=""
muresources["classical"]= "<A HREF='http://net.com/classical.file1'>Meditative classical music</A>
 <A HREF='http://net.com/classical.file2'>Provoking classical music</A>"
muresources["rock"] = "<A HREF='http://net.com/rock.file1'>Popular rock music<A>
 <A HREF='http://net.com/rock.file2'>Exciting rock music</A>"
muresources["ethnic"] = "<A HREF='http://net.com/mexican.file1'>Mexican music<A>
 <A HREF='http://net.com/Indian.file2'>Indian music</A>"

function getLink() {
// constructs unique page using name and choice of music - SECTION A.2
temp = muresources[choice]
temp2 = "<TITLE>Custom Links</TITLE><H2>" +document.m.pername.value+", here are some links for you</H2><P>"+temp
}

function writeIt(){
// creates new window to display page - SECTION A.3
diswin = window.open();
diswin.document.open();
diswin.document.write(temp2);
diswin.document.close()
}

function doAll(){
// master routine calls other functions - SECTION A.4
getLink();
writeIt()
}
</SCRIPT>

</HEAD>
<BODY >

<!-- Sets up basic input form SECTION B -->
<H2> Choose the kind of music you prefer and this page will fetch links of interest to you</H2>
<FORM NAME="m" >
Choose a kind of music
<INPUT TYPE="radio" NAME="mus" VALUE="classical" OnClick="choice='classical'"
>Classical </INPUT>
<INPUT TYPE="radio" NAME="mus" VALUE="rock" OnClick="choice='rock'">Rock</INPUT>
<INPUT TYPE="radio" NAME="mus" VALUE="ethnic"
OnClick="choice='ethnic'">Ethnic</INPUT>

Please type your name
<INPUT TYPE="text" NAME="pername" SIZE=25></INPUT>

<INPUT TYPE="button" NAME="sub" VALUE="Show me links" OnClick=doAll()></INPUT>
<INPUT TYPE="reset" NAME="res" ></INPUT>
</FORM>

<SCRIPT>
// sets defaults - SECTION C
choice = "classical"
document.m.mus[0].checked = true
document.m.mus[1].checked = false
document.m.mus[2].checked = false
</SCRIPT>
</BODY>
</HTML></XMP>

<H2>Using string properties to set characteristics of text on a page</H2>
Several properties control the appearance of text on the page. 
Note, however, that they cannot control the appearance of text after the page is rendered. 
The document must be rewritten for the new characteristics to become visible. 
This example generates a series of lines, each with a different style,color, or size of text.

<XMP><SCRIPT>
//assigns value to variable
test ="What is all this?"

// opens document and uses methods to modify text characteristics
document.open()
document.write(test.bold()+"<P>")
document.write(test.fontsize(7)+"<P>")
document.write(test.fontcolor("red")+"<P>")
document.write(test.toUpperCase()+"<P>")

//assigns multiple characteristics to text
document.write(test.italics().fontsize(6).fontcolor("green")+"<P>")
document.open()
</SCRIPT></XMP>
<H2>Using Substrings to Generate Scrolling Banners</H2>

This example uses the subString method to create a scrolling banner in a text field and on the status line of the window. 
Scrolling text seems to slide from left to right. 
You can create this effect by systematically displaying a changing section of some target text. 
For example, if you display character 0 to 24 of some text and next display 1 to 25 and next 2 to 26, the text will appear to be moving from right to left. 
The sample illustrates a method for accomplishing this effect.

<XMP><HTML>
<HEAD><TITLE> Banner</TITLE>

<SCRIPT LANGUAGE= "javascript">
// Puts the text to scroll into variable called sent - SECTION A
// uses length propert to assess its length and put into variable slen
// initalizes a,b,n, and subsent variables
var sent = "This is a demonstration of a banner moving from the left to right. 
It makes use of the substring property of Javascript to make an interesting display"
var slen = sent.length
var siz = 25
var a = -3, b = 0
var subsent = "x"

// Creates a function to capture substrings of sent - SECTION B
function makeSub(a,b) {
subsent = sent.substring(a,b) ;
return subsent;
}

//Creates a function that increments the indexes of the substring - SECTION C 
//each time and calls the makeSub() function to geneate strings
//a indicates start of substring and siz indicates size of string required
function newMake() {
a = a + 3;
b = a + siz
makeSub(a,b);
return subsent
}

//function uses loop to get changing substrings of target - SECTION D
//repeatedly calls newMake to get next substring
//uses setTimeout() command to arrange for substrings to display 
// at specified times
function doIt() {
for (var i = 1; i <= slen ; i++) {
setTimeout("document.z.textdisplay.value = newMake()", i*300);
setTimeout("window.status = newMake()", i*300);
}
}

</SCRIPT> 
</HEAD>

<BODY >
 <CENTER>
<FORM NAME="z">
<INPUT NAME="textdisplay" TYPE="text" SIZE=25> </INPUT>
<INPUT NAME="doit" Type="button" value = "Run Banner" onClick = "doIt()"> </INPUT>
</FORM></CENTER>
</BODY></HTML></XMP>

<h2>load local file</h2>
It will be blocked by CORS, only work with servers, ie files only online

jQuery.get('http://localhost/foo.txt', function(data) {
    alert(data);
});

Additionally, there's the new Fetch API:

fetch("https://12Me21.github.io/test.txt")
.then( response => response.text() )
.then( text => console.log(text) )

fetch('http://localhost/foo.txt')
  .then(response => response.text())
  .then((data) => { console.log(data) }
)

If you only want a constant string from the text file, you could include it as JavaScript:

// This becomes the content of your foo.txt file
let text = `My test text goes here!`;
&lt;script src="foo.txt">&lt;/script>
&lt;script> console.log(text); &lt;/script>

When working with jQuery, instead of using jQuery.get, e.g.

jQuery.get("foo.txt", undefined, function(data) {
    alert(data);
}, "html").done(function() {
    alert("second success");
}).fail(function(jqXHR, textStatus) {
    alert(textStatus);
}).always(function() {
    alert("finished");
});

you could use .load which gives you a much more condensed form:

$("#myelement").load("foo.txt");

<h2>webpack compile JavaScript</h2>
<a href="https://webpack.js.org/plugins/uglifyjs-webpack-plugin/" class="whitebut ">uses uglify-js to minify JavaScript</a>
<a href="https://webpack.js.org/configuration/optimization/" class="whitebut ">webpack optimizations</a>
<a href="https://webpack.js.org/guides/getting-started/" class="whitebut ">webpack compile JavaScript modules</a>

<h2>Interesting libraries</h2>
<a href="https://youtu.be/O0Au0Xc-qL8" class="whitebut ">Realistic Water Ripple (Pixi.js)</a>
<a href="https://youtu.be/FgN2EENWPFc" class="whitebut ">3D Pikachu (Pixi.js)</a>

<a href="https://www.youtube.com/watch?v=qugY8axtvWY&t=16s" class="whitebut ">JavaScript Libraries 2020</a>

Interesting libraries:
Tesseract.js, Chart.js, Three.js, Anime.js, Howler.js, Reveal.js, Pixi.js, Video.js, Nipple.js, Intro.js, Faker.js, Editor.js, Popper.js, 


<h2>format number with leading zeros</h2>
function pad(anum, size) {
    var stkcode = anum+"";
    while (stkcode.length < size) stkcode = "0" + stkcode;
    return stkcode;
}

function pad(num, size) {
    var stkcode = "000000000" + num;
    return stkcode.substr(stkcode.length-size);
}

stkcode = "00000"+stkcode
  codewidth = stkcode.length
  stkcode = stkcode.slice(codewidth-5, codewidth)

<h2>Get column from a two dimensional array</h2>
var twoDim = [[1,2,3],[4,5,6],[7,8,9]];

// take the third column
var col3 = twoDim.map(function(value,index) { return value[2]; });

<h2>filter() Method</h2>
creates an array with elements that pass a test
filter() does not change the original array.

array.filter(function(currentValue, index, arr), thisValue)

ages array that are 18 or over:
var ages = [32, 33, 16, 40];
function checkAdult(age) { return age >= 18;}
document.getElementById("demo").innerHTML = ages.filter(checkAdult);

ages array that are a specific number or over:
&lt;input type="number" id="ageToCheck" value="18">
function checkAdult(age) {
 return age >= document.getElementById("ageToCheck").value;
}

document.getElementById("demo").innerHTML = ages.filter(checkAdult);

<h2>Using Node-Osmosis with examples</h2>
There are a number of options for web scraping in node.js, but my favorite library to work with is <a href="https://github.com/rchipka/node-osmosis">node-osmosis</a>. 


To start, we'll do a simple single page scrape. 

We'll be working with <a href="https://en.wikipedia.org/wiki/List_of_U.S._states_and_territories_by_population">this page</a> on wikipedia, which contains population information for US States.

<h4>1) Simple Page Scrape</h4>

First, let's scrape some basic information from the page using basic selectors. 

<code>osmosis
  .get(url)
  .set({
    heading: 'h1',
    title: 'title'
  })
  .data(item =&gt; console.log(item));
</code>

<code>{ heading: 'List of U.S. 
states and territories by population',
  title: 'List of U.S. 
states and territories by population - Wikipedia' }
</code>

<h4>2) Scrape Using Find</h4>

Next, let's say we want to get a list of all the states along with their populations. 

We can see that this data is in the first table on the page. 

In order to do this, we'll introduce a new function 'find', which sets the current context using selectors. 

Once we tell osmosis to select the rows from the first table, we can pick out the state and population values and pull them into an object.

<code>osmosis
  .get(url)
  .find('.wikitable:first tr:gt(0)')
  .set({
    state: 'td[3]',
    population: 'td[4]'
  })
  .data(item =&gt; console.log(item));
</code>

<code>{ state: 'California', population: '39,250,017' }
{ state: 'Texas', population: '27,862,596' }
{ state: 'Florida', population: '20,612,439' }
{ state: 'New York', population: '19,745,289' }
{ state: 'Illinois', population: '12,801,539' }
{ state: 'Pennsylvania', population: '12,784,227' }
{ state: 'Ohio', population: '11,646,273' }
{ state: 'Georgia', population: '10,310,371' }
{ state: 'North Carolina', population: '10,146,788' }
{ state: 'Michigan', population: '9,928,301' }
...
</code>

<h4>3) Scrape Multiple Parts</h4>

We can also use multiple <strong>set</strong> calls to pull out different pieces of data.

<code>osmosis
  .get(url)
  .set({
    title: 'title'
  })
  .find('.wikitable:first tr:gt(0)')
  .set({
    state: 'td[3]',
    population: 'td[4]'
  })
  .data(item =&gt; console.log(item));
</code>

<code>{ title: 'List of U.S. 
states and territories by population - Wikipedia',
  state: 'California',
  population: '39,250,017' }
{ title: 'List of U.S. 
states and territories by population - Wikipedia',
  state: 'Texas',
  population: '27,862,596' }
{ title: 'List of U.S. 
states and territories by population - Wikipedia',
  state: 'Florida',
  population: '20,612,439' }
{ title: 'List of U.S. 
states and territories by population - Wikipedia',
  state: 'New York',
  population: '19,745,289' }
{ title: 'List of U.S. 
states and territories by population - Wikipedia',
  state: 'Illinois',
  population: '12,801,539' }
...
</code>

<h4>4) Following Links</h4>

Now, let's say we wanted some information from each state. 

Osmosis has a follow function that we can use to scrape each state page. 

Since the URL is inside the table that we're scraping, we can pass that URL to the follow function using the <strong>a@href</strong> selector inside the 3rd column (<strong>td[3]</strong>). 

After we follow each page, we can use set again to pull data from each state page. 

In this example, we'll just pull out the longitude and latitude. 

The end result combines the elements from each 'set' call.

<code>osmosis
  .get(url)
  .find('.wikitable:first tr:gt(0)')
  .set({
    state: 'td[3]',
    population: 'td[4]'
  })
  .follow('td[3] a@href')
  .set({
    longitude: '.longitude',
    latitude: '.latitude'
  })
  .data(item =&gt; console.log(item));
</code>

<code>{ 
    state: 'California', 
    population: '39,250,017', 
    longitude: '119Â°21'19&quot;W', 
    latitude: '35Â°27'31&quot;N' 
}
{ 
    state: 'Illinois', 
    population: '12,801,539', 
    longitude: '88Â°22'49&quot;W', 
    latitude: '41Â°16'42&quot;N' 
}
...
</code>

<h4>5) Promisification</h4>

In all the examples above, we're just printing out each object as it's handled by the data function. 

Often times we want to return all of the data at once in an array. 

To do that, we can wrap the call in a Promise and add each element to an array as it's processed.

<code>function scrapePopulations() {
  return new Promise((resolve, reject) =&gt; {
    let results = [];
    osmosis
    .get(url)
    .find('.wikitable:first tr:gt(0)')
    .set({
      state: 'td[3]',
      population: 'td[4]'
    })
    .data(item =&gt; results.push(item))
    .done(() =&gt; resolve(results));
  });
}

scrapePopulations().then(data =&gt; console.log(data));

// we can also get the same results more simply by wrapping the code with .set([])
osmosis
.get(url)
.set([
  osmosis
  .find('.wikitable:first tr:gt(0)')
  .set({
    state: 'td[3]',
    population: 'td[4]'
  })
])
.data(items =&gt; console.log(items))
</code>

<code>[{ state: 'California', population: '39,250,017' },
{ state: 'Texas', population: '27,862,596' },
{ state: 'Florida', population: '20,612,439' },
{ state: 'New York', population: '19,745,289' },
{ state: 'Illinois', population: '12,801,539' },
{ state: 'Pennsylvania', population: '12,784,227' },
{ state: 'Ohio', population: '11,646,273' },
{ state: 'Georgia', population: '10,310,371' },
{ state: 'North Carolina', population: '10,146,788' },
{ state: 'Michigan', population: '9,928,301' },
{ state: 'New Jersey', population: '8,944,469' },
{ state: 'Virginia', population: '8,411,808' },
{ state: 'Washington', population: '7,288,000' },
...
</code>

<h2>Understanding Promises</h2>
A Promise in short: 
"Imagine you are a <strong>kid</strong>. 

Your mom <strong>promises</strong> you that she'll get you a <strong>new phone</strong> next week."

You <em>don't know</em> if you will get that phone until next week. 

Your mom can either <em>really buy</em> you a brand new phone, or <em>she doesn't</em>, because she is not happy :(.

That is a <strong>promise</strong>. 

A promise has 3 states. 

They are:
Pending: You <em>don't know</em> if you will get that phone
Fulfilled: Mom is <em>happy</em>, she buys you a brand new phone
Rejected: Mom is <em>unhappy</em>, she doesn't buy you a phone
<h3>Creating a Promise</h3>

Let's convert this to JavaScript.

<code>// ES5: Part 1

var isMomHappy = false;

// Promise
var willIGetNewPhone = new Promise(
    function (resolve, reject) {
        if (isMomHappy) {
            var phone = {
                brand: 'Samsung',
                color: 'black'
            };
            resolve(phone); // fulfilled
        } else {
            var reason = new Error('mom is not happy');
            reject(reason); // reject
        }

    }
);</code>

The code is quite expressive in itself.

Below is how a promise syntax look like normally:

<code>// promise syntax look like this
new Promise(function (resolve, reject) { ... 
} );</code>

<h3>Consuming Promises</h3>

Now that we have the promise, let's consume it.

<code>// ES5: Part 2

var willIGetNewPhone = ... 
// continue from part 1

// call our promise
var askMom = function () {
    willIGetNewPhone
        .then(function (fulfilled) {
            // yay, you got a new phone
            console.log(fulfilled);
             // output: { brand: 'Samsung', color: 'black' }
        })
        .catch(function (error) {
            // oops, mom don't buy it
            console.log(error.message);
             // output: 'mom is not happy'
        });
};

askMom();</code>

Let's run the example and see the result!

Demo: <a href="https://jsbin.com/nifocu/1/edit?js,console">https://jsbin.com/nifocu/1/edit?js,console</a>

<img class="lazy" data-src="https://scotch-res.cloudinary.com/image/upload/w_auto,q_auto:good,f_auto/media/272/nB0ffh3NQHaHKJRuBNpH_promise-true-false.gif">

<h3>Chaining Promises</h3>

Promises are chainable. 


Let's say, you, the kid, <strong>promises</strong> your friend that you will <strong>show them</strong> the new phone when your mom buy you one.

That is another promise. 

Let's write it!

<code>// ES5

// 2nd promise
var showOff = function (phone) {
    return new Promise(
        function (resolve, reject) {
            var message = 'Hey friend, I have a new ' +
                phone.color + ' ' + phone.brand + ' phone';

            resolve(message);
        }
    );
};</code>

Notes: We can shorthen the above code by written as below:

<code>// shorten it

// 2nd promise
var showOff = function (phone) {
    var message = 'Hey friend, I have a new ' +
                phone.color + ' ' + phone.brand + ' phone';

    return Promise.resolve(message);
};</code>

Let's chain the promises. 

You, the kid can only start the <code>showOff</code> promise after the <code>willIGetNewPhone</code> promise.

<code>// call our promise
var askMom = function () {
    willIGetNewPhone
    .then(showOff) // chain it here
    .then(function (fulfilled) {
            console.log(fulfilled);
         // output: 'Hey friend, I have a new black Samsung phone.'
        })
        .catch(function (error) {
            // oops, mom don't buy it
            console.log(error.message);
         // output: 'mom is not happy'
        });
};</code>

That's how easy to chain the promise.

<h3>Promises are Asynchronous</h3>

Promises are asynchronous. 

Let's log a message before and after we call the promise.

<code>// call our promise
var askMom = function () {
    console.log('before asking Mom'); // log before
    willIGetNewPhone
        .then(showOff)
        .then(function (fulfilled) {
            console.log(fulfilled);
        })
        .catch(function (error) {
            console.log(error.message);
        });
    console.log('after asking mom'); // log after
}</code>

What is the sequence of expected output? Probably you expect: 

<code>1. 

before asking Mom
2. 

Hey friend, I have a new black Samsung phone.
3. 

after asking mom</code>

However, the actual output sequence is: 

<code>1. 

before asking Mom
2. 

after asking mom
3. 

Hey friend, I have a new black Samsung phone.</code>

Don't believe me? Go try it yourself: <a href="https://jsbin.com/vepateq/edit?js,console">https://jsbin.com/vepateq/edit?js,console</a> !

<img class="lazy" data-src="https://scotch-res.cloudinary.com/image/upload/w_auto,q_auto:good,f_auto/media/272/X8Q1iZGeSqAEjksPdbQQ_bZ3MNiH8g1.gif">

<h4>Why? Because life (or JS) waits for no man.</h4>

You, the kid, wouldn't stop playing while waiting for your mom promise (the new phone). 

Don't you? That's something we call <strong>asynchronous</strong>, the code will run without blocking or waiting for the result. 

Anything that need to wait for promise to proceed, you put that in <code>.then</code>.

Here is the full example in ES5.

<code>// ES5: Full example

var isMomHappy = true;

// Promise
var willIGetNewPhone = new Promise(
    function (resolve, reject) {
        if (isMomHappy) {
            var phone = {
                brand: 'Samsung',
                color: 'black'
            };
            resolve(phone); // fulfilled
        } else {
            var reason = new Error('mom is not happy');
            reject(reason); // reject
        }

    }
);

// 2nd promise
var showOff = function (phone) {
    var message = 'Hey friend, I have a new ' +
                phone.color + ' ' + phone.brand + ' phone';

    return Promise.resolve(message);
};

// call our promise
var askMom = function () {
    willIGetNewPhone
    .then(showOff) // chain it here
    .then(function (fulfilled) {
            console.log(fulfilled);
            // output: 'Hey friend, I have a new black Samsung phone.'
        })
        .catch(function (error) {
            // oops, mom don't buy it
            console.log(error.message);
            // output: 'mom is not happy'
        });
};

askMom();</code>

<h3>Promises in ES5, ES6/2015, ES7/Next</h3>

<h4>ES5 - Majority browsers</h4>

The demo code is workable in ES5 environments (all major browsers + NodeJs) if you include <a href="http://bluebirdjs.com/docs/getting-started.html">Bluebird</a> promise library. 

It's because ES5 doesn't support promises out of the box. 

Another famous promise library is <a href="https://github.com/kriskowal/q">Q</a> by Kris Kowal.

<h4>ES6 / ES2015 - Modern browsers, NodeJs v6</h4>

The demo code works out of the box because ES6 supports promises natively. 

In addition, with ES6 functions, we can further simplify the code with <strong>fat arrow =</strong>&gt; and use <code>const</code> and <code>let</code>.

Here is the full example in ES6 code:

<code>//_ ES6: Full example_

const isMomHappy = true;

// Promise
const willIGetNewPhone = new Promise(
    (resolve, reject) =&gt; { // fat arrow
        if (isMomHappy) {
            const phone = {
                brand: 'Samsung',
                color: 'black'
            };
            resolve(phone);
        } else {
            const reason = new Error('mom is not happy');
            reject(reason);
        }

    }
);

// 2nd promise
const showOff = function (phone) {
    const message = 'Hey friend, I have a new ' +
                phone.color + ' ' + phone.brand + ' phone';
    return Promise.resolve(message);
};

// call our promise
const askMom = function () {
    willIGetNewPhone
        .then(showOff)
        .then(fulfilled =&gt; console.log(fulfilled)) // fat arrow
        .catch(error =&gt; console.log(error.message)); // fat arrow
};

askMom();</code>

Notes that all the <code>var</code> are replaced with <code>const</code>. 

All the <code>function(resolve, reject)</code> has been simplified to <code>(resolve, reject) =&gt;</code>. 

There are a few benefits come with these changes. 

Read more on:-

<h4>ES7 - Async Await make the syntax look prettier</h4>

ES7 introduce <code>async</code> and <code>await</code> syntax. 

It makes the asynchronous syntax look prettier and easier to understand, without the <code>.then</code> and <code>.catch</code>.

Rewrite our example with ES7 syntax.

<code>// ES7: Full example
const isMomHappy = true;

// Promise
const willIGetNewPhone = new Promise(
    (resolve, reject) =&gt; {
        if (isMomHappy) {
            const phone = {
                brand: 'Samsung',
                color: 'black'
            };
            resolve(phone);
        } else {
            const reason = new Error('mom is not happy');
            reject(reason);
        }

    }
);

// 2nd promise
async function showOff(phone) {
    return new Promise(
        (resolve, reject) =&gt; {
            var message = 'Hey friend, I have a new ' +
                phone.color + ' ' + phone.brand + ' phone';

            resolve(message);
        }
    );
};

// call our promise in ES7 async await style
async function askMom() {
    try {
        console.log('before asking Mom');

        let phone = await willIGetNewPhone;
        let message = await showOff(phone);

        console.log(message);
        console.log('after asking mom');
    }
    catch (error) {
        console.log(error.message);
    }
}

// async await it here too
(async () =&gt; {
    await askMom();
})();</code>

<h3>Why Promises and When to Use Them?</h3>

Why do we need promises? How's the world look like before promise? Before answering these questions, let's go back to the fundamental. 


<h3>Normal Function vs Async Function</h3>

Let's take a look at these two example, both example perform addition of two number, one add using normal function, the other add remotely.

<h4>Normal Function to Add Two Numbers</h4>
<code>// add two numbers normally

function add (num1, num2) {
    return num1 + num2;
}

const result = add(1, 2); // you get result = 3 immediately</code>

<h5>Async Function to Add Two numbers</h5>
<code>// add two numbers remotely

// get the result by calling an API
const result = getAddResultFromServer('http://www.example.com?num1=1&amp;num2=2');
// you get result  = "undefined"</code>

If you add the numbers with normal function, you get the result immediately. 

However when you issue a remote call to get result, you need to wait, you can't get the result immediately. 


Or put it this way, you don't know if you will get the result because the server might be down, slow in response, etc. 

You don't want your entire process to be blocked while waiting for the result.

Calling APIs, downloading files, reading files are among some of the usual async operations that you'll perform.

<h4>World Before Promises: Callback</h4>

Must we use promise for asynchronous call? Nope. 

Prior to Promise, we use callback. 

Callback is just a function you call when you get the return result. 

Let's modify the previous example to accept a callback.

<code>// add two numbers remotely
// get the result by calling an API

function addAsync (num1, num2, callback) {
    // use the famous jQuery getJSON callback API
    return $.getJSON('http://www.example.com', {
        num1: num1,
        num2: num2
    }, callback);
}

addAsync(1, 2, success =&gt; {
    // callback
    const result = success; // you get result = 3 here
});</code>

The syntax looks ok, why do we need promises then?

<h3>What if You Want to Perform Subsequent Async Action?</h3>

Let's say, instead of just add the numbers one time, we want to add 3 times. 

In a normal function, we do this:-

<code>// add two numbers normally

let resultA, resultB, resultC;

 function add (num1, num2) {
    return num1 + num2;
}

resultA = add(1, 2); // you get resultA = 3 immediately
resultB = add(resultA, 3); // you get resultB = 6 immediately
resultC = add(resultB, 4); // you get resultC = 10 immediately

console.log('total' + resultC);
console.log(resultA, resultB, resultC);</code>

How it looks like with callbacks?

<code>// add two numbers remotely
// get the result by calling an API

let resultA, resultB, resultC;

function addAsync (num1, num2, callback) {
    // use the famous jQuery getJSON callback API
    // https://api.jquery.com/jQuery.getJSON/
    return $.getJSON('http://www.example.com', {
        num1: num1,
        num2: num2
    }, callback);
}

addAsync(1, 2, success =&gt; {
    // callback 1
    resultA = success; // you get result = 3 here

    addAsync(resultA, 3, success =&gt; {
        // callback 2
        resultB = success; // you get result = 6 here

        addAsync(resultB, 4, success =&gt; {
            // callback 3
            resultC = success; // you get result = 10 here

            console.log('total' + resultC);
            console.log(resultA, resultB, resultC);
        });
    });
});</code>

Demo: <a href="https://jsbin.com/barimo/edit?html,js,console">https://jsbin.com/barimo/edit?html,js,console</a> 

The syntax is less user friendly. 

In a nicer term, It looks like a pyramid, but people usually refer this as "callback hell", because the callback nested into another callback. 

Imagine you have 10 callbacks, your code will nested 10 times!

<h3>Escape From Callback Hell</h3>

Promises come in to rescue. 

Let's look at the promise version of the same example.

<code>// add two numbers remotely using observable

let resultA, resultB, resultC;

function addAsync(num1, num2) {
    // use ES6 fetch API, which return a promise
    // What is .json()? https://developer.mozilla.org/en-US/docs/Web/API/Body/json
    return fetch(`http://www.example.com?num1=${num1}&amp;num2=${num2}`)
        .then(x =&gt; x.json()); 
}

addAsync(1, 2)
    .then(success =&gt; {
        resultA = success;
        return resultA;
    })
    .then(success =&gt; addAsync(success, 3))
    .then(success =&gt; {
        resultB = success;
        return resultB;
    })
    .then(success =&gt; addAsync(success, 4))
    .then(success =&gt; {
        resultC = success;
        return resultC;
    })
    .then(success =&gt; {
        console.log('total: ' + success)
        console.log(resultA, resultB, resultC)
    });</code>

 Demo: <a href="https://jsbin.com/qafane/edit?js,console">https://jsbin.com/qafane/edit?js,console</a>

With promises, we flatten the callback with <code>.then</code>. 

In a way, it looks cleaner because of no callback nesting. 

Of course, with ES7 <code>async</code> syntax, we can even further enhance this example, but I leave that to you. 

:)

<h3>New Kid On the Block: Observables</h3>

Before you settle down with promises, there is something that has come about to make it even easier to deal with async data called <code>Observables</code>.

<blockquote>

Observables are lazy event streams which can emit zero or more events, and may or may not finish.<a href="https://cycle.js.org/streams.html">source</a>

</blockquote>

Some key differences between promises and observable are:

Fear not, let look at the same demo written with Observables. 

In this example, I am using <a href="http://reactivex.io/rxjs/class/es6/Observable.js~Observable.html">RxJS</a> for the observables. 


<code>let Observable = Rx.Observable;
let resultA, resultB, resultC;

function addAsync(num1, num2) {
    // use ES6 fetch API, which return a promise
    const promise = fetch(`http://www.example.com?num1=${num1}&amp;num2=${num2}`)
        .then(x =&gt; x.json());

    return Observable.fromPromise(promise);
}

addAsync(1,2)
  .do(x =&gt; resultA = x)
  .flatMap(x =&gt; addAsync(x, 3))
  .do(x =&gt; resultB = x)
  .flatMap(x =&gt; addAsync(x, 4))
  .do(x =&gt; resultC = x)
  .subscribe(x =&gt; {
    console.log('total: ' + x)
    console.log(resultA, resultB, resultC)
  });</code>

Demo: <a href="https://jsbin.com/dosaviwalu/edit?js,console">https://jsbin.com/dosaviwalu/edit?js,console</a>

Notes:

Observables can do more funky stuff easily. 

For example, <code>delay</code> add function by <code>3 seconds</code> with just one line of code or retry so you can retry a call a certain number of times.

<code>...

addAsync(1,2)
  .delay(3000) // delay 3 seconds
  .do(x =&gt; resultA = x)
  ...</code>

Well, let's talk about Observables in future post. 

(You may read one of my RxJs post <a href="https://scotch.io/tutorials/rxjs-operators-for-dummies-forkjoin-zip-combinelatest-withlatestfrom">here</a> too!)

<h3>Summary</h3>
Get yourself familiar with callbacks and promises. 

Understand them and use them. 

Don't worry about Observables, just yet. 

All three can factor into your development depending on the situation.

<h2>Creating a div element</h2>
$('#parent').append('&lt;div>hello&lt;/div>');    
// or
$('&lt;div>hello&lt;/div>').appendTo('#parent');

d = document.createElement('div');
$(d).addClass(classname)
    .html(text)
    .appendTo($("#myDiv")) //main div
    .click(function () { $(this).remove();})
    .hide()
    .slideToggle(300)
    .delay(2500)
    .slideToggle(300)
    .queue(function () { $(this).remove();});

$(document.createElement("div"))

div = $("&lt;div>").html("Loading......");
$("body").prepend(div);    

var customDiv = $("&lt;div/>");

<h2>Spread Operator</h2>
... are called spread attributes,
it allows an expression to be expanded.

var parts = ['two', 'three'];
var numbers = ['one', ...parts, 'four', 'five']; // ["one", "two", "three", "four", "five"]

<b>use of spread operator:</b>
<h4>Concatenate arrays:</h4>
 shooter = ['Call', 'Cry', 'Evil'];
 Games = ['Speed', 'Gran', 'Burnout'];
 theGames = [...shooter, ...Games];
 //["Call", "Cry", "Evil", "Speed", "Gran", "Burnout"]

<h4>Destructuring an array:</h4>
 shooter = ['Call', 'Cry', 'Evil'];
 [first, ...remaining] = shooter;
 console.log(first); //Call
 console.log(remaining); //['Cry', 'Evil']

<h4>Combining two objects:</h4>
 myCrush = { firstname: 'Selena', middlename: 'Marie' };
 lastname = 'my last name';
 myWife = { ...myCrush, lastname }
 // {firstname: 'Selena',
 //   middlename: 'Marie',
 //   lastname: 'my last name'}

<h4>Rest Parameters</h4>
another use for the three dots is known as Rest Parameters
it take all the arguments to a function in as one array.

Function arguments as array
  function fun1(...params) {

  }

<h4>Alternative to apply()</h4>
take a list of marks of top 5 students in a class. 

using the apply() method:
myFun(m1, m2, m3, m4, m5) {
    // Do something
}

let marks = [10, 23, 83, -1, 92];
myFun(...marks);

<h4>Using with Math Functions</h4>

let mylist = [10, 23, 83, -1, 92, -33, 76, 29, 76, 100, 644, -633];

Math.max(...mylist);

function doSum(...items) {
    let sum = 0;
    for (let item of items){ sum += item; }
    return sum;
}

doSum(1);
doSum(1,2);
doSum(1, 2, 3, 4);

function doSum(times, ...items) {
    let sum = 0;
    for (let item of items){ sum += item*times; }
    return sum;
}

doSum(1, 1);
doSum(2, 1, 2);
doSum(3, 1, 2, 3);

1
6
18

<h2>Dynamically load a JavaScript file</h2>

write dynamic script tags:

new Element("script", {src: "myBigCodeLibrary.js", type: "text/javascript"});

The problem here is that we do not know when the external script file is fully loaded.

We often want our dependant code on the very next line and like to write something like:

if (iNeedSomeMore) {
    Script.load("myBigCodeLibrary.js"); // includes code for myFancyMethod();
    myFancyMethod(); // cool, no need for callbacks!
}

There is a smart way to inject script dependencies without the need of callbacks. 


Simply pull the script via a synchronous AJAX request and eval the script on global level.

If you use Prototype the Script.load method looks like this:
var Script = {
    _loadedScripts: [],
    include: function(script) {
        // include script only once
        if (this._loadedScripts.include(script)) {
            return false;
        }
        // request file synchronous
        var code = new Ajax.Request(script, {
            asynchronous: false,
            method: "GET",
            evalJS: false,
            evalJSON: false
        }).transport.responseText;
        // eval code on global level
        if (Prototype.Browser.IE) {
            window.execScript(code);
        } else if (Prototype.Browser.WebKit) {
            $$("head").first().insert(Object.extend(
                new Element("script", {
                    type: "text/javascript"
                }), {
                    text: code
                }
            ));
        } else {
            window.eval(code);
        }
        // remember included script
        this._loadedScripts.push(script);
    }
};

There is no import / include / require in javascript, but there are two main ways to achieve what you want:

1 - You can load it with an AJAX call then use eval.
This is the most straightforward way but it's limited to your domain because of the Javascript safety settings, and using eval is opening the door to bugs and hacks.

2 - Add a script tag with the script URL in the HTML.
Definitely the best way to go. 

You can load the script even from a foreign server, and it's clean as you use the browser parser to evaluate the code. 

You can put the tag in the head of the web page, or at the bottom of the body.

Now, there is a big issue you must know about. 

Doing that implies that you remotely load the code. 

Modern web browsers will load the file and keep executing your current script because they load everything asynchronously to improve performances.

It means that if you use these tricks directly, you won't be able to use your newly loaded code the next line after you asked it to be loaded, because it will be still loading.

I used a much less complicated version recently with jQuery:

&lt;script src="scripts/jquery.js">&lt;/script>
&lt;script>
  var js = ["scripts/jquery.dimensions.js", "scripts/shadedborder.js", "scripts/jqmodal.js", "scripts/main.js"];
  var $head = $("head");
  for (var i = 0; i &lt; js.length; i++) {
    $head.append("&lt;script src=\"" + js[i] + "\">&lt;/scr" + "ipt>");
  }
&lt;/script>

Update: jQuery-less version:

&lt;script>
  var js = ["scripts/jquery.dimensions.js", "scripts/shadedborder.js", "scripts/jqmodal.js", "scripts/main.js"];
  for (var i = 0, l = js.length; i &lt; l; i++) {
    document.getElementsByTagName("head")[0].innerHTML += ("&lt;script src=\"" + js[i] + "\">&lt;/scr" + "ipt>");
  }
&lt;/script>

another awesome answer
$.getScript("my_lovely_script.js", function(){
   alert("Script loaded and executed.");
  // here you can use anything you defined in the loaded script
 });

<h2>dateAndTime function</h2>
&lt;span id="dateAndTime" onclick="showDateAndTime()">&lt;script>showDateAndTime();&lt;/script>&lt;/span>

&lt;h2>some weixin scripts&lt;/h2>
window.logs = { pagetime: {} };
window.logs.pagetime['html_begin'] = (+new Date());
window.LANG= "en"; 
window.isOldVideoPage = false; 

var e=t.match(/http(?:s)?://([^/]+?)(/|$)/);
if(e&&!/qq\.com(\:8080)?$/.test(e[1])&&!/weishi\.com$/.test(e[1]))return!0;

ishttp=0==location.href.indexOf("http://");

String.prototype.html = function(encode) {
  var replace =["&#39;", "'", "&quot;", '"', "&nbsp;", " ", "&gt;", ">", "&lt;", "&lt;", "&yen;", "¥", "&amp;", "&"];

var replaceReverse = ["&", "&amp;", "¥", "&yen;", "&lt;", "&lt;", ">", "&gt;", " ", "&nbsp;", '"', "&quot;", "'", "&#39;"];

    window.addEventListener('beforeunload', reportResLoadTime, false);
    window.addEventListener('unload', reportResLoadTime, false);

<h2>set unique</h2>
var visitedList = [4,5,4,6,3,4,5,2,23,1,4,4,4]
var visitedList = Array.from(new Set(visitedList))

Sets are object type creating collections of unique values
a few methods like add, size, has, forEach, delete and clear are available 
<h2>Find difference between two arrays</h2>
remove another set
var first = [ 1, 2, 3, 4, 5 ];
var second = [ 4, 5, 6 ];

var difference = first.filter(x => !second.<b>includes</b>(x));
var b = new Set(second);
var difference = [...first].filter(x => !b.<b>has</b>(x));

<h2>create an array containing 1…N</h2>
In ES6 using Array from() and keys() methods.
Array.from(Array(10).<b>keys</b>()) // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

Shorter version using spread operator.
[...Array(10).keys()]

<h3>Array from() Method</h3>
Array.from(object, mapFunction, thisValue)
The arr.from() method is used to creates a new array instance from a given array.
In the case of a string, every alphabet of the string is converted to an element of the new array instance and in case of integer values, a new array instance simply takes the elements of the given array.

var myArr = Array.from("ABCDEFG"); // Create an Array from a String:
// A,B,C,D,E,F,G

Array.from([1, 2, 3])
// 2,4,6

<h3>Array includes() Method</h3>
array.includes(element, start)

Check if an array includes "Mango":
var fruits = ["Banana", "Orange", "Apple", "Mango"];
var n = fruits.includes("Mango");
// true
<h2>Removing specific item from array</h2>
let value = 3
let arr = [1, 2, 3, 4, 5, 3]
arr = arr.filter(item => item !== value)

notvisitedList = notvisitedList.filter(item => item !== topicpointer);
notvisitedList[Math.floor(Math.random() * notvisitedList.length)];

Removing multiple items
An additional advantage of this method is that you can remove multiple items
let forDeletion = [2, 3, 5]
let arr = [1, 2, 3, 4, 5, 3]

arr = arr.filter(item => !forDeletion.includes(item))

<h2>Sets</h2>
Sets are object creating collections of unique values. 
The values in a set can be either simple primitives like strings or integers as well as more complex object types like object literals or arrays.

Here’s a simple example showing off a basic set and a few of the available methods on it like <em>add</em>, <em>size</em>, <em>has</em>, <em>forEach</em>, <em>delete</em> and <em>clear</em>:

<code>let animals = new Set();
animals.add('🐷');
animals.add('🐼');
animals.add('🐢');
animals.add('🐿');
console.log(animals.size); // 4
animals.add('🐼');
console.log(animals.size); // 4

console.log(animals.has('🐷')); // true
animals.delete('🐷');
console.log(animals.has('🐷')); // false

animals.forEach(animal =&gt; {
  console.log(`Hey ${animal}!`);
});

// Hey 🐼!
// Hey 🐢!
// Hey 🐿!

animals.clear();
console.log(animals.size); // 0</code>

Here’s another example where we pass-in an array to initialize the set. 
Notice how the initializing array gets deconstructed, but an array added added later stays in the form of an array:

<code>let myAnimals = new Set(['🐷', '🐢', '🐷', '🐷']);

myAnimals.add(['🐨', '🐑']);
myAnimals.add({ name: 'Rud', type: '🐢' });
console.log(myAnimals.size); // 4

myAnimals.forEach(animal =&gt; {
  console.log(animal);
});
// 🐷
// 🐢
// ["🐨", "🐑"]
// Object { name: "Rud", type: "🐢" }</code>

Strings are a valid iterable so they can also be passed-in to initialize a set:

<code>console.log('Only unique characters will be in this set.'.length); // 43

let sentence = new Set('Only unique characters will be in this set.');
console.log(sentence.size); // 18</code>

On top of using <em>forEach</em> on a set, <a href="https://alligator.io/js/for-of-for-in-loops/">for…of</a> loops can also be used to iterate over sets:

<code>let moreAnimals = new Set(['🐺', '🐴', '🐕', '🐇']);

for (let animal of moreAnimals) {
  console.log(`Howdy ${ animal }`);
}

// Howdy 🐺
// Howdy 🐴
// Howdy 🐕
// Howdy 🐇</code>
<h3>Keys and Values</h3>
Sets also have the <em>keys</em> and <em>values</em> methods, with <strong>keys</strong> being an alias for <strong>values</strong>, so both methods do exactly the same thing. 
Using either of these methods returns a new iterator object with the values of the set in the same order in which they were added to the set. 
Here’s an example:

<code>let partyItems = new Set(['🍕', '🍾', '🎊']);
let items = partyItems.values();

console.log(items.next());
console.log(items.next());
console.log(items.next());
console.log(items.next().done);

// Object {
//   done: false,
//   value: "🍕"
// }

// Object {
//   done: false,
//   value: "🍾"
// }

// Object {
//   done: false,
//   value: "🎊"
// }

// true</code>

<h2>Console Features</h2>
<a href="https://www.youtube.com/watch?v=VsaDOHqTWCM" class="whitebut ">JavaScript Console Features</a>

<a href="https://developer.mozilla.org/en-US/docs/Web/API/console" class="whitebut ">console features</a>

How long does it take to perform a for-loop 100.000 times:

console.time();
for (i = 0; i < 100000; i++) {
  // some code
}
console.timeEnd();

<h2>HTML DOM console.table() Method</h2>
Write a table in the console:
console.table(["Audi", "Volvo", "Ford"]);

<h2>adjustFontSize</h2>
&lt;a href="javascript:adjustFontSize('14px');">仲細D都得&lt;/a>

function adjustFontSize(size){// console.log('adjustFontSize');$(".set-font-aera").css({"font-size":size});window.localStorage["fontSize"] = size;
}

<h2>All HTML DOM Event, Properties, and Methods</h2>
<a href="https://www.w3schools.com/jsref/dom_obj_event.asp" class="whitebut ">All HTML DOM Event, Properties, and Methods</a>

Events are normally used in combination with functions

<h2>FlappyBird</h2>
<a href="D:\Dropbox\Public\LibDocs\FlappyBird\index.html" class="whitebut ">FlappyBird</a>

<h2>跨浏览器添加事件 经典实例</h2>
<code>//跨浏览器添加事件
    function addEvent(obj,type,fn){
        if(obj.addEventListener){
            obj.addEventListener(type,fn,false);
        }else if(obj.attachEvent){//IE
            obj.attchEvent('on'+type,fn);
        }
    }</code>

<h2>跨浏览器移除事件 经典实例</h2>
<code>//跨浏览器移除事件
function removeEvent(obj,type,fn){
    if(obj.removeEventListener){
        obj.removeEventListener(type,fn,false);
    }else if(obj.detachEvent){//兼容IE
        obj.detachEvent('on'+type,fn);
    }
}</code>

<h2>跨浏览器阻止默认行为 经典实例</h2>
<code>//跨浏览器阻止默认行为
    function preDef(ev){
        var e = ev || window.event;
        if(e.preventDefault){
            e.preventDefault();
        }else{
            e.returnValue =false;
        }
    }</code>

<h2>跨浏览器获取目标对象 经典实例</h2>
<code>//跨浏览器获取目标对象
function getTarget(ev){
    if(ev.target){//w3c
        return ev.target;
    }else if(window.event.srcElement){//IE
        return window.event.srcElement;
    }
}</code>

<h2>跨浏览器获取滚动条位置 经典实例</h2>
<code>//跨浏览器获取滚动条位置，sp == scroll position
    function getSP(){
        return{
            top: document.documentElement.scrollTop || document.body.scrollTop,
            left : document.documentElement.scrollLeft || document.body.scrollLeft;
        }
    }</code>

<h2>跨浏览器获取可视窗口大小 经典实例</h2>
<code>//跨浏览器获取可视窗口大小
          function  getWindow () {
            if(typeof window.innerWidth !='undefined') {
                return{
                    width : window.innerWidth,
                    height : window.innerHeight
                }
            } else{
                return {
                    width : document.documentElement.clientWidth,
                    height : document.documentElement.clientHeight
                }
            }
        },</code>

<h2>js 对象冒充 经典实例</h2>
<code>&lt;script type = 'text/javascript'&gt;
    function Person(name , age){
        this.name = name ;
        this.age = age ;
        this.say = function (){
            return "name : "+ this.name + " age: "+this.age ;
        } ;
    }
    var o = new Object() ;//可以简化为Object()
    Person.call(o , "zhangsan" , 20) ;
    console.log(o.say() );//name : zhangsan age: 20
&lt;/script&gt;</code>

<h2>js 异步加载和同步加载 经典实例</h2>
异步加载也叫非阻塞模式加载，浏览器在下载<code>js</code>的同时，同时还会执行后续的页面处理。

</section>在<code>script</code>标签内，用<code>js</code>创建一个<code>script</code>元素并插入到<code>document</code>中，这种就是异步加载<code>js</code>文件了：
</section><code>(function() {
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = 'http://yourdomain.com/script.js';
    var x = document.getElementsByTagName('script')[0];
     x.parentNode.insertBefore(s, x);
})();</code>

<h2>同步加载 经典实例</h2>
平常默认用的都是同步加载。

如：
</section><code>&lt;script src="http://yourdomain.com/script.js"&gt;&lt;/script&gt;</code>

</section>同步模式又称阻塞模式，会阻止浏览器的后续处理。

停止了后续的文件的解析，执行，如图像的渲染。

浏览器之所以会采用同步模式，是因为加载的<code>js</code>文件中有对<code>dom</code>的操作，重定向，输出<code>document</code>等默认行为，所以同步才是最安全的。
通常会把要加载的<code>js</code>放到<code>body</code>结束标签之前，使得<code>js</code>可在页面最后加载，尽量减少阻塞页面的渲染。

这样可以先让页面显示出来。

</section>同步加载流程是瀑布模型，异步加载流程是并发模型。

</section>
<h2>js获取屏幕坐标 经典实例</h2>
<code>&lt;!DOCTYPE html&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html; charset=gb2312" /&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/&gt;
    &lt;meta name="auther" content="fq" /&gt;
    &lt;title&gt;获取鼠标坐标&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;script type="text/javascript"&gt;
    function mousePosition(ev){
        if(ev.pageX || ev.pageY){
            return {x:ev.pageX, y:ev.pageY};
        }
        return {
            x:ev.clientX + document.body.scrollLeft - document.body.clientLeft,
            y:ev.clientY + document.body.scrollTop - document.body.clientTop
        };
    }
    function mouseMove(ev){
        ev = ev || window.event;
        var mousePos = mousePosition(ev);
        document.getElementById('xxx').value = mousePos.x;
        document.getElementById('yyy').value = mousePos.y;
    }
    document.onmousemove = mouseMove;
&lt;/script&gt;
X:&lt;input id="xxx" type="text" /&gt; Y:&lt;input id="yyy" type="text" /&gt;
&lt;/body&gt;
&lt;/html&gt;</code>

</section>注释：

1.<code>documentElement</code> 属性可返回文档的根节点。
2.<code>scrollTop()</code> 为滚动条向下移动的距离
3.<code>document.documentElement.scrollTop</code> 指的是滚动条的垂直坐标
4.<code>document.documentElement.clientHeight</code> 指的是浏览器可见区域高度
</section>DTD已声明的情况下：
</section><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
</code>

</section>如果在页面中添加这行标记的话</section>
<h2>IE 经典实例</h2>
<code>document.body.clientWidth ==&gt; BODY对象宽度
document.body.clientHeight ==&gt; BODY对象高度
document.documentElement.clientWidth ==&gt; 可见区域宽度
document.documentElement.clientHeight ==&gt; 可见区域高度</code>

<h2>Firefox 经典实例</h2>
<code>document.documentElement.scrollHeight ==&gt; 浏览器所有内容高度
document.body.scrollHeight ==&gt; 浏览器所有内容高度
document.documentElement.scrollTop ==&gt; 浏览器滚动部分高度
document.body.scrollTop ==&gt;始终为0
document.documentElement.clientHeight ==&gt;浏览器可视部分高度
document.body.clientHeight ==&gt; 浏览器所有内容高度</code>

<h2>Chrome 经典实例</h2>
<code>document.documentElement.scrollHeight ==&gt; 浏览器所有内容高度
document.body.scrollHeight ==&gt; 浏览器所有内容高度
document.documentElement.scrollTop==&gt; 始终为0
document.body.scrollTop==&gt;浏览器滚动部分高度
document.documentElement.clientHeight ==&gt; 浏览器可视部分高度
document.body.clientHeight ==&gt; 浏览器所有内容高度</code>

</section><code>浏览器所有内容高度</code>即浏览器整个框架的高度，包括<code>滚动条卷去部分+可视部分+底部隐藏部分的高度总和</code></section><code>浏览器滚动部分高度</code>即滚动条卷去部分高度即可视顶端距离整个对象顶端的高度。

</section>综上</section>1、<code>document.documentElement.scrollTop</code>和<code>document.body.scrollTop</code>始终有一个为0，所以可以用这两个的和来求<code>scrollTop</code></section>2、<code>scrollHeight、clientHeight</code> 在<code>DTD</code>已声明的情况下用<code>documentElement</code>，未声明的情况下用<code>body</code></section><code>clientHeight
 在IE和FF下，该属性没什么差别，都是指浏览器的可视区域，即除去浏览器的那些工具栏状态栏剩下的页面展示空间的高度。

</code>

<h2>PageX和clientX 经典实例</h2>
<code>PageX:</code>鼠标在页面上的位置,从页面左上角开始,即是以页面为参考点,不随滑动条移动而变化</section><code>clientX:</code>鼠标在页面上可视区域的位置,从浏览器可视区域左上角开始,即是以浏览器滑动条此刻的滑动到的位置为参考点,随滑动条移动 而变化.</section>可是悲剧的是,<code>PageX</code>只有FF特有,<code>IE</code>则没有这个，所以在IE下使用这个：
</section><code>PageY=clientY+scrollTop-clientTop;</code>(只讨论Y轴,X轴同理,下同)</section><code>scrollTop</code>代表的是被浏览器滑动条滚过的长度</section><code>offsetX:IE特有,鼠标相比较于触发事件的元素的位置,以元素盒子模型的内容区域的左上角为参考点,如果有</code>boder`,可能出现负值</section>只有<code>clientX</code>和<code>screenX</code> 皆大欢喜是W3C标准.其他的,都纠结了.
最给力的是，<code>chrome</code>和<code>safari</code>一条龙通杀!完全支持所有属性</section><p>
</p><img data-ratio="0.5905096660808435" data-type="png" data-w="569" title="图片描述" data-src="https://mmbiz.qpic.cn/mmbiz_png/eXCSRjyNYcbd6ia23PHZsxjpjiaq1M5uJHaESK234XDicZYdqFGO0E6bfQgH6hd33rlWjHKibTKDtqEMLPaSG9YCHA/640?wx_fmt=png"></section>
<h2>js拖拽效果 经典实例</h2>
<code>&lt;!doctype html&gt;
&lt;html lang="zn-CN"&gt;
&lt;head&gt;
    &lt;meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style type="text/css"&gt;
        #login{
            height: 100px;
            width: 100px;
            border: 1px solid black;
            position: relative;
            top:200px;
            left: 200px;
            background: red;
        }
&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id="login"&gt;&lt;/div&gt;
&lt;script type="text/javascript"&gt;
    var oDiv = document.getElementById("login");
    oDiv.onmousedown = function(e){
        var e = e || window.event;//window.event兼容IE,当事件发生时有效
        var diffX = e.clientX - oDiv.offsetLeft;//获取鼠标点击的位置到所选对象的边框的水平距离
        var diffY = e.clientY - oDiv.offsetTop;
        document.onmousemove = function(e){ //需设为document对象才能作用于整个文档
            var e = e||window.event;
            oDiv.style.left = e.clientX - diffX + 'px';//style.left表示所选对象的边框到浏览器左侧距离
            oDiv.style.top = e.clientY -diffY + 'px';
        };
        document.onmouseup = function(){
            document.onmousemove = null;//清除鼠标释放时的对象移动方法
            document.onmouseup = null;
        }
    }
&lt;/script&gt;
&lt;/body&gt; 
&lt;/html&gt;</code>
<br  /></section><code>offsetTop</code> 返回的是数字，而 <code>style.top</code> 返回的是字符串，除了数字外还带有单位：
<code>px</code>。

</section>
<h2>js获取图片原始大小尺寸 经典实例</h2>
<code>var img = $("#img_id"); // Get my img elem
var pic_real_width, pic_real_height;
$("&amp;lt;img/&amp;gt;") // Make in memory copy of image to avoid css issues
    .attr("src", $(img).attr("src"))
    .load(function() {
        pic_real_width = this.width;   // Note: $(this).width() will not
        pic_real_height = this.height; // work for in memory images.
    });</code>

<h2>js循环遍历数 经典实例</h2>
<code>&lt;script&gt;  
       //循环遍历数组  
       var animals = ["cat",'dog','human','whale','seal'];  
       var animalString = "";  
       for(var i = 0;i&lt;animals.length;i++){  
           animalString += animals[i] + " ";  
       }  
       alert(animalString);  //输出数组里的每个项
&lt;/script&gt; </code>

<h2>遍历二维数组 经典实例</h2>
<code> &lt;script&gt; 
        var arr=[[0,0,0,0,0,0],[0,0,1,0,0,0],[0,2,0,3,0,0],[0,0,0,0,0,0]]; 
        for(var i=0;i&lt;arr.length;i++){ 
         //遍历每一个具体的值 
         for(var j=0;j&lt;arr[i].length;j++){ 
                    document.writeln(arr[i][j]+" "); 
              } 
            document.writeln("&lt;br/&gt;"); 
         } 
  &lt;/script&gt; </code>

<h2>阻止表单重复提交 经典实例</h2>
有两种方法可以解决：
一是提交之后，立刻禁用点击按钮；
第二种就是提交之后取消后续的表单提交操作。

</section><code>document.getElementById("btn").disabled = true;//第一次提交后，将按钮禁用</code>

</section>这种方式只能用于通过提交按钮防止重复提交，还可以使用如下方式：
</section><code>var flag = false;//设置一个监听变量
if(flag ==true)return;//退出事件
flag = true;//表示提交过一次了</code>

<h2>字符串部分 经典实例</h2>

<h2>在字符串中查找子字符串 经典实例</h2>
<code>&lt;script type="text/javascript"&gt;
    var test = 'Welcome to my blog!';
    var value = 'blog';
    var subValue = test.indexOf(value);
    console.log(subValue);//14,子字符串的索引
&lt;/script&gt;</code>

<h2>Number和Math部分 经典实例</h2>
数字可以是一个直接量，也可以是一个对象，但是Math对象不同，他没有构造函数，并且其所有的属性和方法都是直接通过这个对象来访问的</section>
<h2>把十进制转化为一个十六进制值 经典实例</h2>
<code>var num = 255;
console.log(num.toString(16));//</code>

</section><code>js</code>中，十进制数字以<code>0x</code>开头，八进制数字总是以<code>0</code>开头</section>
<h2>随进产生颜色 经典实例</h2>
<code>&lt;script type="text/javascript"&gt;
    function randomVal(val){
        return Math.floor(Math.random()*(val + 1));
    }
    function randomColor(){
        return 'rgb(' + randomVal(255) + ',' + randomVal(255) + ',' + randomVal(255) + ')';
    }
&lt;/script&gt;</code>

</section>目前，所有浏览器都支持<code>RGB</code>表示法和十六进制表示法，除了<code>IE7</code>，它只支持十六进制表示法</section>
<h2>在角度和弧度之间转换 经典实例</h2>
<code>var rad = degrees*(Math.PI/180);
var degrees = rad*(180/Math.PI);</code>

<h2>数组部分 经典实例</h2>

<h2>创建多维数组 经典实例</h2>
<code>&lt;script type="text/javascript"&gt;
    var arrayLength = 3;//设置数组长度
    //创建数组
    var multiArray = new Array(arrayLength);
    for(var i =0;i&lt;multiArray.length;i++){
        multiArray[i] = new Array(arrayLength);
    }
    //给第一个数组索引添加项
    multiArray[0][0] = 'phone';
    multiArray[0][1] = 'book';
    multiArray[0][2] = 'TV';
    //第二个
    multiArray[1][0] = 2;
    multiArray[1][1] = 1;
    multiArray[1][2] = 98;
    //第三个
    multiArray[2][0] = ['java','python'];
    multiArray[2][1] = ['js','C++'];
    multiArray[2][2] = ['Haskell','php'];
&lt;/script&gt;</code>

<h2>排序数组 经典实例</h2>
<code>&lt;script type="text/javascript"&gt;
     var fruits = ['banana','apple','orange','strawberry'];
    console.log(fruits.sort());//Array [ "apple", "banana", "orange", "strawberry" ]
    var num = [32,43,2,5,-23,0,4];
    console.log(num.sort());//Array [ -23, 0, 2, 32, 4, 43, 5 ]
&lt;/script&gt;</code>
<code>Array</code>对象的<code>sort</code>方法会按照字母顺序来排序数组元素。

对于数字，是按照字符编码的顺序进行排序</section><code>function compare(a,b){
    return a-b;
}
var num = [32,43,2,5,-23,0,4];
console.log(num.sort(compare));//Array [ -23, 0, 2, 4, 5, 32, 43 ]</code>

<h2>Date日期时间部分 经典实例</h2>

<h2>js计算时间差 经典实例</h2>
<code>var date1=new Date();  //开始时间，当前时间
var date2=new Date(); //结束时间，需传入时间参数
var date3=date2.getTime()-date1.getTime();  //时间差的毫秒数
//计算出相差天数
var days=Math.floor(date3/(24*3600*1000));
//计算出小时数
var leave1=date3%(24*3600*1000);    //计算天数后剩余的毫秒数
var hours=Math.floor(leave1/(3600*1000));
//计算相差分钟数
var leave2=leave1%(3600*1000);        //计算小时数后剩余的毫秒数
var minutes=Math.floor(leave2/(60*1000));
//计算相差秒数
var leave3=leave2%(60*1000);      //计算分钟数后剩余的毫秒数
var seconds=Math.round(leave3/1000);
console.log(" 相差 "+days+"天 "+hours+"小时 "+minutes+" 分钟"+seconds+" 秒");</code>

<h2>正则部分 经典实例</h2>

<h2>js实现千分位分隔 经典实例</h2>
<code>&lt;script type="text/javascript"&gt;
    function cc(s){
        if(/[^0-9\.]/.test(s)) return "invalid value";
        s=s.replace(/^(\d*)$/,"$1.");
        s=(s+"00").replace(/(\d*\.\d\d)\d*/,"$1");
        s=s.replace(".",",");
        var re=/(\d)(\d{3},)/;
        while(re.test(s))
            s=s.replace(re,"$1,$2");
        s=s.replace(/,(\d\d)$/,".$1");
        return "￥" + s.replace(/^\./,"0.")
    }
&lt;/script&gt;
&lt;input onchange="this.value=cc(this.value)" /&gt;</code>

<h2>js判断传入参数是否为质数 经典实例</h2>
<code>function fn(input) {
  input = parseInt(input,10);
  return isPrime(input) ? 'is prime' : 'not prime';
}
function isPrime(input) {
  if (input &lt; 2) {
    return false;
  } else {
    for (var i = 2; i &lt;= Math.sqrt(input); i++) {
      if (input % i == 0) {
        return false;
      }
    }
  }
  return true;
}</code>

<h2>js判断字符串出现最多的字符，并统计次数 经典实例</h2>
<code>//js实现一个函数，来判断一个字符串出现次数最多的字符，并统计这个次数
    function countStr(str){
        var obj = {};
        for(var i = 0, l = str.length,k; i &lt; l ;i++){
            k = str.charAt(i);
            if(obj[k]){
                obj[k]++;
            }else{
                obj[k] = 1;
            }
        }
        var m = 0,i=null;
        for(var k in obj){
            if(obj[k] &gt; m){
                m = obj[k];
                i = k;
            }
        }
        return i + ':' + m;
    }
</code>

<h2>requestAnimationFrame() method for smooth animations</h2>
requestAnimationFrame() method was introduced to help us execute animation
Why we need another hero- requestAnimationFrame
First of all, lets talk about requestAnimationFrame() as an idea and why we even need such a method. 

Traditionally to create an animation in JavaScript, we relied on setTimeout() called recursively or setInterval() to repeatedly execute some code to make changes to an element frame by frame, such as once every 50 milliseconds:

var adiv = document.getElementById('mydiv')
var leftpos = 0
setInterval(function(){
   leftpos += 5
   adiv.style.left = leftpos + 'px' // move div by 5 pixels each time
}, 50) // run code every 50 milliseconds

While the above code is logically sound, its actual execution is far from perfect. 

The problem with using setTmeout/setInterval for executing code that changes something on the screen is twofold.

What we specify as the delay (ie: 50 milliseconds) inside these functions are often times not honoured due to changes in user system resources at the time, leading to inconsistent delay intervals between animation frames.

Even worse, using setTimeout() or setInterval() to continuously make changes to the user's screen often induces "layout thrashing", the browser version of cardiac arrest where it is forced to perform unnecessary reflows of the page before the user's screen is physically able to display the changes. 


This is bad -very bad- due to the taxing nature of page reflows, especially on mobile devices where the problem is most apparent, with janky page loads and battery drains. 


requestAnimationFrame() to the rescue
It is for the above reasons requestAnimationFrame() was introduced. 


The method in a nutshell allows you to execute code on the next available screen repaint, taking the guess work out of getting in sync with the user's browser and hardware readiness to make changes to the screen. 


When we call requestAnimationFrame() repeatedly to create an animation, we are assured that our animation code is called when the user's computer is actually ready to make changes to the screen each time, resulting in a smoother, more efficient animation. 


Furthermore, code called via requestAnimationFrame() and running inside background tabs in your browser are either paused or slowed down significantly (to 2 frames per second or less) automatically to further save user system resources- there's no point in running an animation that isn't being seen is there?

So requestAnimationFrame() should be used in place of setTimeout/ setInterval for animations, but how exactly do we go about doing that? Before we get to that, lets look at browser support first. 

requestAnimationFrame() today enjoys wide adoption amongst modern browsers- IE10+, FF11+, Chrome, and Safari etc. 

For some older versions of these browsers, a vendor prefix is needed in front of the method name to work. 

Even on browsers that don't support this method in any incarnation, we can simply fallback in those cases to setTimeout() instead to call the code after a certain delay instead. 

The following code creates a universal rrequestAnimationFrame() and its counterpart cancelAnimationFrame() function that works in the maximum number of browsers, with a fallback built in:

window.requestAnimationFrame = window.requestAnimationFrame
   || window.mozRequestAnimationFrame
   || window.webkitRequestAnimationFrame
   || window.msRequestAnimationFrame
   || function(f){return setTimeout(f, 1000/60)} // simulate calling code 60 

window.cancelAnimationFrame = window.cancelAnimationFrame
   || window.mozCancelAnimationFrame
   || function(requestID){clearTimeout(requestID)} //fall back

For the fallback setTimeout() code, notice the delay being set at 1000/60, or around 16.7 milliseconds. 


This value simulates how often the real requestAnimationFrame() will typically be called by the browser each time it's invoked based on the typical user's screen refresh rate of 60 frames per second.

Understanding and using requestAnimationFrame()
The syntax for requestAnimationFrame is very straightforward:

requestAnimationFrame(callback)
We enter a callback function containing the code we wish to run, and requestAnimationFrame() will run it when the screen is ready to accept the next screen repaint. 

Some noteworthy details:

The callback function is automatically passed a timestamp indicating the precise time requestAnimationFrame() was called.

requestAnimationFrame() returns a non 0 integer that can be passed into its nemesis counterpart cancelAnimationFrame() to cancel a requestAnimationFrame() call

Here's an example of calling requestAnimationFrame() once to move a DIV just 5 pixels from its original location on the screen:

var adiv = document.getElementById('mydiv')
var leftpos = 0
requestAnimationFrame(function(timestamp){
   leftpos += 5
   adiv.style.left = leftpos + 'px'
})
The above code is very similar to using setTimeout() to run the same code, except instead of after the user defined delay, the code is called on the next available screen repaint, typically around 16.7 milliseconds based on a typical screen refresh rate of 60fps. 

The exact number may fluctuate and frankly doesn't matter; what's important to realize is that the browser will now intelligently invoke our code only when it is ready to accept changes to the screen, not before.

Calling requestAnimationFrame() once is pretty meaningless most of the time. 

The magic happens when we call it "recursively" to construct the desired animation frame by frame, with each frame being called only when the browser is ready for it. 

This this how requestAnimationFrame() becomes superior to setTimeout or setInterval when it comes to handling animation related code efficiently. 

Lets rewrite our initial example of moving a DIV across the screen 5 pixels at a time using requestAnimationFrame():

var adiv = document.getElementById('mydiv')
var leftpos = 0
function movediv(timestamp){
   leftpos += 5
   adiv.style.left = leftpos + 'px'
   requestAnimationFrame(movediv) // call requestAnimationFrame again to animate next frame
}
requestAnimationFrame(movediv) // call requestAnimationFrame and pass into it animation function
The above code shows the basic blueprint for using requestAnimationFrame() to create an animation, by defining your animation code inside a function, then inside this function calling itself recursively through requestAnimationFrame() to produce each frame of our animation. 

To kick start the animation, we make a call to requestAnimationFrame() outside the animation function with that function as the parameter.

Animation over time in requestAnimationFrame()
So it's simple enough to repeatedly call an animation function using requestAnimationFrame(), but most animations are much more finicky, having to stop at some point after a certain objective has been achieved over a certain amount of time. 

Take our example of moving the DIV above; in a real life scenario, what we probably want to do is move the DIV 400 pixels to the right over a time of say 2 seconds. 

To do this with requestAnimationFrame(), we can take advantage of the timestamp parameter that's passed into the callback function. 

Lets see how this works now, by retooling our DIV moving code above so it moves the DIV a certain distance over a certain amount of time:

var adiv = document.getElementById('mydiv')
var starttime

function moveit(timestamp, el, dist, duration){
   //if browser doesn't support requestAnimationFrame, generate our own timestamp using Date:
   var timestamp = timestamp || new Date().getTime()
   var runtime = timestamp - starttime
   var progress = runtime / duration
   progress = Math.min(progress, 1)
   el.style.left = (dist * progress).toFixed(2) + 'px'
   if (runtime < duration){ // if duration not met yet
       requestAnimationFrame(function(timestamp){ // call requestAnimationFrame again with parameters
           moveit(timestamp, el, dist, duration)
       })
   }
}

requestAnimationFrame(function(timestamp){
   starttime = timestamp || new Date().getTime() //if browser doesn't support requestAnimationFrame, generate our own timestamp using Date
   moveit(timestamp, adiv, 400, 2000) // 400px over 1 second
})
Demo:

Move DIV 400px in 2 seconds
Lets go over how this works now.

Just before the animation runs, we set the startime variable to the current time using either requestAnimationFrame's timestamp parameter, or if requestAnimationFrame isn't supported, a less precise new Date().getTime() instead. 

The former is a value automatically passed in as the first parameter of the callback function of requestAnimationFrame that contains a highly accurate representation of the current time in milliseconds (accurate to 5 microseconds). 

This lets us know when the animation started running.

Inside the animation function moveit(), we capture the current time of the current "frame" using variable timestamp. 

We use the difference between that and the animation starttime to figure out at what "point" along the animation we're currently at, and change the DIV's position accordingly out of the total distance (ie: 400px).

Slowing down or cancelling requestAnimationFrame()
The standard requestAnimationFrame runs at around 60fps under ideal conditions (or once every 16.7ms), in sync with the refresh rate of the typical monitor. 

If your animation requires a different frames per second (up to 60 fps) or simply doesn't require that high a level of refresh rate, you can slow it down by calling requestAnimationFrame inside setTimeout(). 

That way, you get the desired frame rate while reaping the benefits of requestAnimationFrame:

var adiv = document.getElementById('mydiv')
var leftpos = 0
var fps = 20
function movediv(timestamp){
   setTimeout(function(){ //throttle requestAnimationFrame to 20fps
       leftpos += 5
       adiv.style.left = leftpos + 'px'
       requestAnimationFrame(movediv)
   }, 1000/fps)
}

requestAnimationFrame(movediv)
In this version of moving a DIV horizontally, we're throttling the frames per second to roughly 20, by calling requestAnimationFrame inside setTimeout() each time.

- Cancelling requestAnimationFrame()
Just like with setTimeout/ setInterval, you can cancel a requestAnimationFrame call, and in identical fashion as well. 

requestAnimationFrame when called returns a non 0 integer that can be captured inside a variable and passed into its nemesis counterpart cancelAnimationFrame() to stop it from being invoked again. 

The following logs the timestamp parameter value of requestAnimationFrame for two seconds,  using cancelAnimationFrame to stop the former:

var reqanimationreference

function logtimestamp(timestamp){
   console.log(timestamp)
   reqanimationreference = requestAnimationFrame(logtimestamp)
}

requestAnimationFrame(logtimestamp)

setTimeout(function(){ // cancel requestAnimationFrame after 2 seconds
   cancelAnimationFrame(reqanimationreference)
}, 2000)
Here is a slightly more elaborate example that continuously changes a DIV's width using requestAnimationFrame when the mouse enters the parent container (onmouseenter), and cancels it onmouseleave:

Demo:

Move mouse over battery
View Source Code

Conclusion
As you can see, requestAnimationFrame() is actually very simple in concept and execution, once you understand its purpose and common patterns. 

A lot of frameworks such as jQuery 3.0 utilize requestAnimationFrame() internally for all animation related functions, though it's definitely better to understand how this method works natively so you can take advantage of it in any JavaScript environment.
<h2>JavaScript Tutorials</h2>
<a href="http://www.javascriptkit.com/javatutors/scrolling-html-bookmark-javascript.shtml">Smooth Scrolling HTML Bookmarks using JavaScript (natively or jQuery)</a>
See how to use native JavaScript to create smooth scrolling HTML bookmark links inside the page, and for those that need legacy browser support, using jQuery instead. 
This promises to be one smooth tutorial!

<a href="http://www.javascriptkit.com/javatutors/web-animation-api-tutorial.shtml">Web Animation API- Unleashing the Power of CSS keyframes in JavaScript</a>
Animate elements in JavaScript using the power of CSS keyframes animationz with the Web Animation API! In this tutorial, I'll introduce you to WAAPI, browser support and polyfill, and how to start using this awesome API today.

<a href="http://www.javascriptkit.com/javatutors/javascript-es6-top-five.shtml">Top five features in JavaScript ES6 Worth Mastering</a>
JavaScript ES6 adds a slew of new features to the JavaScript language, some more groundbreaking and widely applicable than others. 
In this article I list the top 5 JavaScript ES6 features I find most indispensible.

<a href="http://www.javascriptkit.com/javatutors/javascript-es6-let-const.shtml">Understanding let and const in JavaScript ES6</a>
Get to know all about &quot;let&quot; and &quot;const&quot; in JavaScript ES6, and how it differs from the age old &quot;var&quot; keyword in defining variables.

<a href="http://www.javascriptkit.com/javatutors/javascriptfullscreenapi.shtml">Displaying Content in Full Screen using the Fullscreen API in JavaScript</a>
Open up any content on your page in full screen mode with just a few lines of JavaScript using the Full Screen API.

<a href="http://www.javascriptkit.com/javatutors/intro-javascript-async-functions.shtml">Introduction to JavaScript Async Functions- Promises simplified</a>
See how to use JavaScript async functions with JavaScript Promises to further simplify asynchronous operations in JavaScript, and produce code that's easier to read and debug to boot.

<a href="http://www.javascriptkit.com/javatutors/css-transition-functions.shtml">Four Essential JavaScript functions to tame CSS3 Transitions and Animations</a>
See four JavaScript functions that help you unlock the full potential of CSS Transitions and Animations, by pausing them, detecting when they've finished playing, and more.

<a href="http://www.javascriptkit.com/javatutors/requestanimationframe.shtml">Understanding JavaScript's requestAnimationFrame() method for smooth animations</a>
<code>requestAnimationFrame()</code> is a JavaScript method for creating smoother, less resource intensive JavaScript animations. 
See how to take advantage of this method in this comprehensive tutorial.

<a href="http://www.javascriptkit.com/javatutors/detect-user-scroll-amount.shtml">Determining how much the user has scrolled the page using JavaScript or jQuery</a>
Learn how to detect the amount the user has scrolled the page using JavaScript or jQuery, in either pixels travelled or as a percentage of the whole page.

<a href="http://www.javascriptkit.com/javatutors/copytoclipboard.shtml">Reading and copying selected text to clipboard using JavaScript</a>
In this tutorial, we'll see how to read the textual contents of a user selection, dynamically select some text on the page, and last but not least, copy whatever is selected to clipboard, all using just JavaScript. 
Not a trace of Flash here!

<a href="http://www.javascriptkit.com/javatutors/javascriptpromises.shtml">Beginner's Guide to JavaScript Promises</a>
JavaScript Promises are a new addition to ECMAscript 6 that aims to provide a cleaner, more intuitive way to deal with the completion (or failure) of asynchronous tasks. 
In this tutorial we'll deliver the promise of JavaScript Promises to the uninitiated!

<a href="http://www.javascriptkit.com/javatutors/javascriptarrowfunctions.shtml">Overview of JavaScript Arrow Functions</a>
One of the exciting new additions to ECMAscript 6 is Arrow Functions, a compact way to define anonymous functions that also simplifies the handling of the &quot;<code>this</code>&quot; object inside it. 
In this tutorial we'll go over all you need to know about the new function syntax before it supplants anonymous functions everywhere.

<a href="http://www.javascriptkit.com/javatutors/matchmediamultiple.shtml">Matching multiple CSS media queries using window.matchMedia()</a>
A common question that gets asked is how to use JavaScript's <code>window.matchMedia()</code> method to react to multiple CSS media queries. 
In this tutorial we explore how.

<a href="http://www.javascriptkit.com/javatutors/arrayprototypeslice.shtml">Converting objects to arrays using Array.prototype.slice.call()</a>
We break down <code>Array.prototype.slice.call()</code> to see how it works to convert array-like objects into true arrays in this quick tutorial.

<a href="http://www.javascriptkit.com/javatutors/touchevents.shtml">Introduction to Touch events in JavaScript</a>
In this tutorial lets get touchy feely with JavaScript, but examining its touch related events and how they are used to detect and respond to touch and swipe events.

<a href="http://www.javascriptkit.com/javatutors/preloadimagesplus.shtml">Preloading images and executing code only after all images have loaded</a>
See how to refine the process of preloading images to detect when all images have actually been preloaded and react accordingly.

<a href="http://www.javascriptkit.com/javatutors/setcss3properties.shtml">Setting CSS3 properties using JavaScript</a>
With the numerous CSS vendor prefixes one has to contend with when it comes to defining CSS3 properties such as <code>-moz-box-shadow</code> or <code>-webkit-border-radius</code>, setting them in JavaScript can be even more confusing. 
This tutorial looks at how to how to streamline the setting of CSS3 property values in JavaScript, by checking for and targeting only the version of a CSS3 property the browser supports.

<a href="http://www.javascriptkit.com/javatutors/domstorage.shtml">Going beyond cookies- Using DOM sessionStorage and localStorage to persist larger amounts of info</a>
HTML5 introduces DOM Storage, a new way of storing data on the client side that overcomes the disk space limitations of JavaScript cookies. 

This tutorial looks at how to take advantage of DOM Storage in browsers today.

<a href="http://www.javascriptkit.com/javatutors/createelementcheck.shtml">Using document.createElement() to test for browser support for an element</a>
Most of us are familiar with using 
<a href="http://www.javascriptkit.com/javatutors/http://www.javascriptkit.com/javatutors/objdetect2.shtml">object detection</a> or the <a href="http://www.javascriptkit.com/javatutors/http://www.javascriptkit.com/javatutors/navigator.shtml">Navigator object</a> to check for backing for a given JavaScript object or method, but these techniques do not work well when the objective is to check whether the browser supports a particular HTML element, such as the <code>
&lt;canvas&gt;</code> element. 
This is where <code>document.createElement()</code> can be very helpful.

<a href="http://www.javascriptkit.com/javatutors/onmousewheel.shtml">The onmousewheel event of JavaScript</a>
The <code>onmousewheel</code> event fires whenever the user moves the mouse wheel either upwards or downwards, and can provide yet another way for users to interact with your JavaScript. 
In this tutorial, lets see how to take advantage of <code>onmousewheel</code> across browsers.

<a href="http://www.javascriptkit.com/javatutors/trycatch.shtml">Handling runtime errors in JavaScript using try/catch/finally</a>
The <code>try/catch/finally</code> statement of JavaScript lets you dip your toes into error prune territory and &quot;reroute&quot; when a runtime error has occurred. 
Learn all about this often misunderstood statement in this tutorial.

<a href="http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml">Dynamically loading an external JavaScript or CSS file</a>
External JavaScript or CSS files do not always have to be synchronously loaded as part of the page, but dynamically as well. 


In this tutorial, we'll see how to load, remove, and replace external JavaScript and CSS files on demand and asynchronously. 
It the era of Ajax, it's a handy thing to know.

<a href="http://www.javascriptkit.com/javatutors/closuresleak/index.shtml">JavaScript and memory leaks</a>
If you're not careful, your JavaScript code may leak memory and sometimes even bring the visitor's browser to its knees. 
This tutorial looks at different leak patterns in JavaScript and how to fix them.

<a href="http://www.javascriptkit.com/javatutors/closures.shtml">JavaScript Closures 101- they're not magic</a>
Morris Johns explains JavaScript closures, a powerful yet often bewildering concept, in a gentle, step by step fashion.

<a href="http://www.javascriptkit.com/javatutors/conditionalcompile.shtml">Conditional Compilation of JScript/ JavaScript in IE</a>
IE supports a little known feature called conditional compilation that selectively compiles any block of JScript or JavaScript depending on your script logic. 
Think of it as the absolute form of object detection.
<a href="http://www.javascriptkit.com/javatutors/externalphp.shtml">
External JavaScript and PHP</a>
External JavaScript can reference not just .js files, but PHP scripts as well. 
See how this is done, and the wonderful possibilities linking PHP to JavaScript bring.
<a href="http://www.javascriptkit.com/javatutors/selectcontent.shtml">
Changing Select element content on the fly</a>
This tutorial explains how to change a select element's content using JavaScript, from adding new options to modifying and deleting them. 
It also shows how to create a 2 level interdependent select list.

<a href="http://www.javascriptkit.com/javatutors/cookiedetect.shtml">Determining cookie support in client's browser</a>
If your script relies on JavaScript cookies to store and persist information, it's
a good idea to always first make sure the user's browser has cookies enabled. 
This tutorial shows you how to perform this detection.

<a href="http://www.javascriptkit.com/javatutors/re.shtml">Introductory
Guide to Regular Expressions</a>
Always wanted to learn about Regular Expressions in JavaScript? With this comprehensive yet gentle tutorial on the subject, you'll be on your way to slashing and validating string input using Regular Expressions in no time!

<h2>Introductory Tutorials</h2>

<a href="http://www.javascriptkit.com/javatutors/primer1.shtml">JavaScript Primer</a>
<a href="http://www.javascriptkit.com/javatutors/alert1.shtml">Creating alert, confirm, and prompt boxes</a>
<a href="http://www.javascriptkit.com/javatutors/event1.shtml">Understanding &quot;event handlers&quot; in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/eventaction.shtml">One event handler, many actions</a>
<a href="http://www.javascriptkit.com/javatutors/multiplejava.shtml">Adding more than one JavaScript to a page</a>
<a href="http://www.javascriptkit.com/javatutors/languageattri.shtml">The Type and Language attributes of JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/learnjs.shtml">How I learned JavaScript</a>

<h2>Forms and form validation</h2>

<a href="http://www.javascriptkit.com/javatutors/form1.shtml">Accessing and validating forms</a>
<a href="http://www.javascriptkit.com/javatutors/radiocheck.shtml">Manipulating radio and check boxes</a>
<a href="http://www.javascriptkit.com/javatutors/deform.shtml">Enabling/ disabling form elements</a>
<a href="http://www.javascriptkit.com/javatutors/combos1.shtml">Accessing the select element of a form</a>
<a href="http://www.javascriptkit.com/javatutors/dombos1.shtml">Creating combo link menus</a>
<a href="http://www.javascriptkit.com/javatutors/selectcontent.shtml">Changing select element content on   the fly</a>

<h2>External JavaScript</h2>

<a href="http://www.javascriptkit.com/javatutors/external.shtml">Creating external JavaScript libraries</a>
<a href="http://www.javascriptkit.com/javatutors/externalphp.shtml">External Javascript and PHP</a>
<a href="http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml">Dynamically loading an external JavaScript or CSS file</a>
<a href="http://www.javascriptkit.com/javatutors/externalrestrict.shtml">Restricting access of JavaScript libraries to designated domains</a>

<h2>JavaScript cookies</h2>
<a href="http://www.javascriptkit.com/javatutors/cookie.shtml">Session-only cookies</a>
<a href="http://www.javascriptkit.com/javatutors/cookiedetect.shtml">Determining cookie support in   client's browser</a>

<h2>Math &amp; Random scripts</h2>

<a href="http://www.javascriptkit.com/javatutors/math.shtml">The Math object</a>
<a href="http://www.javascriptkit.com/javatutors/round.shtml">Number rounding in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/formatnumber.shtml">Formatting numbers for   decimals and significant digits</a>
<a href="http://www.javascriptkit.com/javatutors/randomnum.shtml">Generating a random number in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/weighrandom.shtml">Generating weighed random numbers</a>
<a href="http://www.javascriptkit.com/javatutors/random1.shtml">Using JavaScript to create random scripts</a>
<a href="http://www.javascriptkit.com/javatutors/randomorder.shtml">Randomizing the display order of content using JS</a>

<h2>Variables and functions</h2>

<a href="http://www.javascriptkit.com/javatutors/determinevar.shtml">Determining the existence of a variable</a>
<a href="http://www.javascriptkit.com/javatutors/rfunction.shtml">Robust functions via the arguments array</a>
<a href="http://www.javascriptkit.com/javatutors/namedfunction.shtml">Using named arguments in JavaScript functions</a>
<a href="http://www.javascriptkit.com/javatutors/varshort.shtml">Variable and expression shortcuts</a>
<a href="http://www.javascriptkit.com/javatutors/switch.shtml">The switch statement of JavaScrip</a>t
<a href="http://www.javascriptkit.com/javatutors/proplit.shtml">Adding properties to a literal in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/stepon.shtml">Avoiding variable and function conflicts in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/valid1.shtml">Flag Variables, Validation, &amp; Function Control</a>
<a href="http://www.javascriptkit.com/javatutors/serror.shtml">Tackling JavaScript strict warnings</a>

<h2>Regular Expressions</h2>
<a href="http://www.javascriptkit.com/javatutors/re.shtml">Introductory Guide to Regular Expressions</a>
<a href="http://www.javascriptkit.com/javatutors/redev.shtml">Programmer's Guide to Regular Expressions</a>

<h2>JavaScript with content</h2>
<a href="http://www.javascriptkit.com/javatutors/static.shtml">Using JavaScript to statically display elements</a>
<a href="http://www.javascriptkit.com/javatutors/dynamiccontent.shtml">JavaScript and Dynamic Content</a>
<a href="http://www.javascriptkit.com/javatutors/crossmenu.shtml">Creating an attractive Hover Menu   using CSS &amp; JavaScript</a>

<h2>Date &amp; Time</h2>
<a href="http://www.javascriptkit.com/javatutors/time1.shtml">Date, time, and creating a live clock in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/datedifference.shtml">Calculating the difference between two dates</a>

<h2>Interacting with images</h2>
<a href="http://www.javascriptkit.com/javatutors/image1.shtml">Accessing images &amp; creating image rollovers</a>
<a href="http://www.javascriptkit.com/javatutors/preloadimagesplus.shtml">Preloading images and executing code only after all images have loaded</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/newtech1.shtml">Creating depressible images</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/show.shtml">Building a JavaScript image slideshow</a>

<h2>Windows and frames</h2>
<a href="http://www.javascriptkit.com/javatutors/window1.shtml">Windows and JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/openclose.shtml">Determining whether a browser window is open</a>
<a href="http://www.javascriptkit.com/javatutors/advwin.shtml">Moving, scrolling, and resizing browser window</a>
<a href="http://www.javascriptkit.com/javatutors/twoframes1.shtml">Loading two frames with one link...</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/fullwin.shtml">Opening windows in theatre and channel mode</a> (IE)
<a href="http://www.javascriptkit.com/javatutors/remote.shtml">Creating window remote controls</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/newtech3.shtml">Detecting user's screen size and resolution</a>

<h2>Strings (text)</h2>
<a href="http://www.javascriptkit.com/javatutors/string.shtml">Strings in JavaScript Part 1</a>
<a href="http://www.javascriptkit.com/javatutors/string3.shtml">Strings in JavaScript Part II</a>

<h2>Arrays and loops</h2>
<a href="http://www.javascriptkit.com/javatutors/loop1.shtml">Understanding basic arrays and loops</a>
<a href="http://www.javascriptkit.com/javatutors/densearray1.shtml">Understanding dense arrays</a>
<a href="http://www.javascriptkit.com/javatutors/literal-notation.shtml">Defining arrays &amp; multi-dimensional   arrays using literal notation</a>
<a href="http://www.javascriptkit.com/javatutors/twoarray1.shtml">Creating a custom two-dimensional array</a>
<a href="http://www.javascriptkit.com/javatutors/arrayprototypeslice.shtml">Converting objects to arrays using Array.prototype.slice.call()</a>
<a href="http://www.javascriptkit.com/javatutors/arraysort.shtml">Sorting an array using the sort() method</a>

<h2>Objects and entities</h2>
<a href="http://www.javascriptkit.com/javatutors/oopjs.shtml">JavaScript and OOP</a>
<a href="http://www.javascriptkit.com/javatutors/object.shtml">Creating custom objects in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/proto.shtml">The prototype object of JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/send1.shtml">Sending objects from one page to another</a>

<h2>Browser and features detection</h2>

<a href="http://www.javascriptkit.com/javatutors/navigator.shtml">Using the navigator object to detect browser</a>
<a href="http://www.javascriptkit.com/javatutors/objdetect.shtml">Using object detection to detect browser type</a>
<a href="http://www.javascriptkit.com/javatutors/createelementcheck.shtml">Using document.createElement() to test for browser support for an element</a>

<h2>Error handling</h2>

<a href="http://www.javascriptkit.com/javatutors/error.shtml">The onerror event of the window object</a>
<a href="http://www.javascriptkit.com/javatutors/trycatch.shtml">Handling runtime errors in JavaScript using try/catch/finally</a>

<h2>Keyboard and printer interaction</h2>

<a href="http://www.javascriptkit.com/javatutors/javascriptkey.shtml">Scripting the keyboard in JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/ie5print.shtml">onbeforeprint and onafterprint events of IE</a>
<a href="http://www.javascriptkit.com/javatutors/../howto/newtech2.shtml">Using window.print() to print a document</a>

<h2>Tabular Data Control (IE only)</h2>

<a href="http://www.javascriptkit.com/javatutors/tdc.shtml">Introduction to Tabular Data Control</a>
<a href="http://www.javascriptkit.com/javatutors/tdcsort.shtml">Sorting a Tabular Data Control</a>
<a href="http://www.javascriptkit.com/javatutors/tdcfilter.shtml">Filtering a Tabular Data Control</a>

<h2>Other tutorials</h2>

<a href="http://www.javascriptkit.com/javatutors/efficientjs.shtml">Performance tips for JavaScript</a>
<a href="http://www.javascriptkit.com/javatutors/customcollect.shtml">Creating custom collections in   the DOM (via ID attribute)</a>
<a href="http://www.javascriptkit.com/javatutors/vbalert.shtml">Creating customizable alert boxes using VBScript</a>

<h2>Animating the Canvas</h2>
<a href="https://www.youtube.com/watch?v=yq2au9EfeRQ" class="whitebut ">Animating the Canvas</a>

<h2>pass event as argument to an inline event handler</h2>
to pass the event object:
&lt;p id="p" onclick="doSomething(event)">
to get the clicked child element (should be used with event parameter:

function doSomething(e) {
    e = e || window.event;
    var target = e.target || e.srcElement;
    console.log(target);
}

to pass the element itself (DOMElement):
&lt;p id="p" onclick="doThing(this)">
Since inline events are executed as functions you can simply use arguments.
&lt;p id="p" onclick="doSomething.apply(this, arguments)">
and
function doSomething(e) {
  if (!e) e = window.event;
  // 'e' is the event.
  // 'this' is the P element
}

You don't need to pass this, there already is the event object passed by default automatically, which contains event.target which has the object it's coming from. 

You can lighten your syntax:

This:
&lt;p onclick="doSomething()">aaaa&lt;/p>

Will work with this:
function doSomething(){
  console.log(event);
  console.log(event.target);
}

<h2>The e is short for event</h2>
The simplest way to create an event is to click somewhere on the page.

When you click, a click event is triggered. 

This event is actually an object containing information about the action that just happened. 


Now, events happen all the time, however you are not interested in all the events that happen. 

When you are interested in some event however, it's when you add an event listener to the element you know will create events. 

For example you are interested in knowing when the user clicks on a 'Subscribe' button and you want to do something when this event happens.

In order to do something about this event you bind an event handler to the button you are interested in. 

The way to bind the handler to the element is by doing element.addEventListener(eventName, handler).

eventName is a string and it's the name of the event you are interested in, in this case that would be 'click' (for the click event).

The handler is simply a function which does something (it's executed) when the event happens. 

The handler function, by default, when executed is passed the event object (that was created when the event/action you are interested in happened) as an argument.

Defining the event as a parameter of your handler function is optional but, sometimes (most times), it is useful for the handler function to know about the event that happened. 

When you do define it this is the e you see in the functions like the ones you mentioned. 

Remember, the event is just a regular javascript object, with lots of properties on it.

<h2>variables in asynchronous callback functions</h2>
What’s the problem?
First let’s assume you have declared a variable called myVar:

var myVar;

If you immediately log the contents of the variable, it will return undefined.

Now if you define any of the following:
setTimeout(function() { myVar = "some value"; }, 0);

or:
$.ajax({ url: '...',    success: function(response) { myVar = response; }
});

or:
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "myscript.js";
script.onload = function(){ myVar = "some value"; };
document.body.appendChild(script);

and immediately afterwards display the contents of myVar, you will also get undefined as result.

Why is the variable not set?
In all examples above, the function defined are what’s called asynchronous callbacks. 

This means that they are immediately created but not immediately executed. 


setTimeout pushes it into the event queue, the AJAX calls will execute it once the call returns and onload will be executed when the DOM element is loaded.

In all three cases, the function does not execute right away but rather whenever it is triggered asynchronously. 


So when you log or display the contents of the variable, the function has not yet run and the content has not yet been set.

So even though JavaScript actually works with a single-thread model, you’ve landed in the asynchronous problem zone.

Synchronous vs. 
Asynchronous
Basically the difference between a synchronous function call and an asynchronous one can be shown with these 2 pieces of code:
var myVar;
function doSomething() { myVar = "some value"; }
doSomething();   //synchronous call
log(myVar);

And:
var myVar;
function doSomething() { myVar = "some value"; }
log(myVar);
doSomething();   //asynchronous call

In the asynchronous case, our function is also defined before logging the variable but is call some time later.

How to make it work?
You will need to rewrite your code in order to use callbacks which will be called when the processing (in this case setting the value of myVar) is done.

First example: Instead of using the following:

var myVar;
setTimeout(function() { myVar = "some value"; }, 0);
alert(myVar);
You should rather do the following:

var myVar;
function callback() { alert(myVar); }
setTimeout(function() {
  myVar = "some value";
  callback(); }, 0);
Instead of this:

var myVar;
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "d3.min.js";
script.onload = function(){ myVar = "some value"; };
document.body.appendChild(script);
alert(myVar);
Use this:

function callback(response) { alert("loaded"); }
var script = document.createElement("script");
script.type = "text/javascript";
script.src = "d3.min.js";
script.onload = callback;
document.body.appendChild(script);
And instead of doing the following:

var myVar;
$.ajax({ url: '...',    success: function(response) { myVar = response; }
});
alert(myVar);
Do the following:

function callback(response) { alert(response); }
$.ajax({ url: '...',    success: callback
});
Of course, here another solution is to make the AJAX call synchronous by adding the following to the options:
async: false

Also if you use $.get or $.post, you’ll need to rewrite it to use $.ajax instead.

But this is not a good idea. 

First if the call lasts longer than expected, you will block the UI making your browser window unresponsive. 

And at some point in the time the browser will ask your user whether you want to stop the unresponsive script. 

So, even though programing everything in an asynchronous way with callbacks is not always trivial, doing everything in a synchronous way will cause more sporadic and difficult to handle issues.

So to summarize, you should either use a callback or directly call a function after processing and not only rely on setting a variable in the asynchronous part.

<a href="https://benohead.com/blog/2014/12/02/javascript-variables-asynchronous-callback-functions/" class="whitebut ">variables in asynchronous callback functions</a>
<a href="https://stackoverflow.com/questions/7434371/image-onload-function-with-return" class="whitebut ">onload function with return</a>

<a href="https://www.freecodecamp.org/forum/t/help-my-function-does-not-return-value/150175/4" class="whitebut ">My function does not return value</a>

<h2>appendChild</h2>
Uncaught TypeError: Cannot read property 'appendChild' of null

but you have a class name or id in the HTML...

If your script tag is in the head, the JavaScript is loaded before your HTML. 
You will need to add defer to your script like so:

&lt;script src="script.js" defer>&lt;/script>
or put the script at bottom of page

<h2>Declaring global variable within function</h2>
To declare JavaScript global variables inside function, you need to use <b>window object</b>. 


For example:
window.value=90;

Now it can be declared inside any function and can be accessed from any function. 


For example:

function m(){ window.value=100;//declaring global variable by window object }
function n(){
  alert(window.value);//accessing global variable from other function
}

<h3>Internals of global variable in JavaScript</h3>
When you declare a variable outside the function, it is added in the window object internally. 

You can access it through window object also. 


For example:
var value=50;
function a(){ alert(window.value);//accessing global variable }

<h2>What is a Callback?</h2>
Simply put: A callback is a function that is to be executed after another function has finished executing — hence the name ‘call back’.

More complexly put: In JavaScript, functions are objects. 


Because of this, functions can take functions as arguments, and can be returned by other functions. 


Functions that do this are called higher-order functions. 


Any function that is passed as an argument is called a callback function.

Why do we need Callbacks?

For one very important reason — JavaScript is an event driven language. 


This means that instead of waiting for a response before moving on, JavaScript will keep executing while listening for other events. 


Lets look at a basic example:

function first(){
  console.log(1);
}
function second(){
  console.log(2);
}
first();
second();

As you would expect, the function first is executed first, and the function second is executed second — logging the following to the console:
// 1
// 2

All good so far.
But what if function first contains some sort of code that <b>can’t be executed</b> immediately? 

For example, an API request where we have to send the request then wait for a response? 

To simulate this action, were going to use setTimeout which is a JavaScript function that calls a function after a set amount of time. 


We’ll delay our function for 500 milliseconds to simulate an API request. 

Our new code will look like this:

function first(){
  // Simulate a code delay
  setTimeout( function(){ console.log(1); }, 500 ); }

function second(){ console.log(2); }
first();
second();

It’s not important that you understand how setTimeout() works right now. 

All that matters is that you see we’ve moved our console.log(1); inside of our 500 millisecond delay. 


So what happens now when we invoke our functions?
first();
second();
// 2
// 1

Even though we invoked the first() function first, we logged out the result of that function after the second() function.

It’s not that JavaScript didn’t execute our functions in the order we wanted it to, it’s instead that JavaScript didn’t wait for a response from first() before moving on to execute second().

So why show you this? 
Because you can’t just call one function after another and hope they execute in the right order. 


Callbacks are a way to make sure certain code doesn’t execute until other code has already finished execution.

Create a Callback
First, open up your Chrome Developer Console and type the following function declaration into your console:

function doHomework(subject) {
  alert(`Starting my ${subject} homework.`);
}

Above, we’ve created the function doHomework . 


Our function takes one variable, the subject that we are working on. 


Call your function by typing the following into your console:
doHomework('math');
// Alerts: Starting my math homework.

Now lets add in our callback — as our last parameter in the doHomework() function we can pass in callback. 


The callback function is then defined in the second argument of our call to doHomework().

function doHomework(subject, callback) { // here callback is variable
  alert(`Starting my ${subject} homework.`);
  callback();  // this call is not fixed, depend on the true calling command
}

doHomework('math', function() {
  alert('Finished my homework');
});

As you’ll see, if you type the above code into your console you will get two alerts back to back: Your ‘starting homework’ alert, followed by your ‘finished homework’ alert.

But callback functions don’t always have to be defined in our function call. 

They can be defined elsewhere in our code like this:

function doHomework(subject, callback) {
  alert(`Starting my ${subject} homework.`);
  callback();
}

function alertFinished(){
  alert('Finished my homework');
}

doHomework('math', alertFinished);

This result of this example is exactly the same as the previous example, but the setup is a little different. 


As you can see, we’ve passed the alertFinished function definition as an argument during our doHomework() function call!

A real world example

Last week I published an article on how to Create a Twitter Bot in 38 lines of code. 


The only reason the code in that article works is because of Twitters API. 


When you make requests to an API, you have to wait for the response before you can act on that response. 


This is a wonderful example of a real-world callback. 

Here’s what the request looks like:

T.get('search/tweets', params, function(err, data, response) {
  if(!err){
    // This is where the magic will happen
  } else {
    console.log(err);
  }
})

T.get simply means we are making a get request to Twitter

There are three parameters in this request: 
‘search/tweets’, which is the route of our request, 
params which are our search parameters, and then 
an anonymous function which is our callback.

A callback is important here because we need to wait for a response from the server before we can move forward in our code. 


We don’t know if our API request is going to be successful or not so after sending our parameters to search/tweets via a get request, we wait. 


Once Twitter responds, our callback function is invoked. 

Twitter will either send an err (error) object or a response object back to us. 


In our callback function we can use an if() statement to determine if our request was successful or not, and then act upon the new data accordingly.

<h2>JavaScript Closures</h2>
JavaScript variables can belong to the local or global scope.

Global variables can be made local (private) with closures.

In a web page, global variables belong to the window object.

Global variables can be used (and changed) by all scripts in the page (and in the window).

Global and local variables with the same name are different variables. 
Modifying one, does not modify the other.

Variables created without a declaration keyword (var, let, or const) are always global, even if they are created inside a function.

A Counter Dilemma
Suppose you want to use a variable for counting something, and you want this counter to be available to all functions.

You could use a global variable, and a function to increase the counter:

Example
// Initiate counter
var counter = 0;

// Function to increment counter
function add() {
  counter += 1;
}

// Call add() 3 times
add();
add();
add();

// The counter should now be 3
There is a problem with the solution above: Any code on the page can change the counter, without calling add().

The counter should be local to the add() function, to prevent other code from changing it:

Example
// Initiate counter
var counter = 0;

// Function to increment counter
function add() {
  var counter = 0;
  counter += 1;
}

// Call add() 3 times
add();
add();
add();

//The counter should now be 3. 
But it is 0
It did not work because we display the global counter instead of the local counter.

We can remove the global counter and access the local counter by letting the function return it:

Example
// Function to increment counter
function add() {
  var counter = 0;
  counter += 1;
  return counter;
}

// Call add() 3 times
add();
add();
add();

//The counter should now be 3. 
But it is 1.
It did not work because we reset the local counter every time we call the function.

 A JavaScript inner function can solve this.

JavaScript Nested Functions
All functions have access to the global scope. 


In fact, in JavaScript, all functions have access to the scope "above" them.

JavaScript supports nested functions. 
Nested functions have access to the scope "above" them.

In this example, the inner function plus() has access to the counter variable in the parent function:

Example
function add() {
  var counter = 0;
  function plus() {counter += 1;}
  plus();   
  return counter;
}
This could have solved the counter dilemma, if we could reach the plus() function from the outside.

We also need to find a way to execute counter = 0 only once.

We need a closure.

JavaScript Closures
Remember self-invoking functions? What does this function do?

Example
var add = (function () {
  var counter = 0;
  return function () {counter += 1; return counter}
})();

add();
add();
add();

// the counter is now 3
Example Explained
The variable add is assigned the return value of a self-invoking function.

The self-invoking function only runs once. 
It sets the counter to zero (0), and returns a function expression.

This way add becomes a function. 
The "wonderful" part is that it can access the counter in the parent scope.

This is called a JavaScript closure. 
It makes it possible for a function to have "private" variables.

The counter is protected by the scope of the anonymous function, and can only be changed using the add function.

A closure is a function having access to the parent scope, even after the parent function has closed.

<h2>Select selectedIndex Property</h2>
Select a fruit and click the button:
&lt;select id="mySelect">
  &lt;option>Apple&lt;/option>
  &lt;option>Orange&lt;/option>
  &lt;option>Pineapple&lt;/option>
  &lt;option>Banana&lt;/option>
&lt;/select>

&lt;button type="button" onclick="myFunction()">Display index&lt;/button>

function myFunction() {
  var x = document.getElementById("mySelect").selectedIndex;
  var y = document.getElementById("mySelect").options;
  alert("Index: " + y[x].index + " is " + y[x].text);
}

<h2>variables in event handler using function closures</h2>

function addClickHandler(elem, arg1, arg2) {
    elem.addEventListener('click', function(e) {
        // in the event handler function here, you can directly refer
        // to arg1 and arg2 from the parent function arguments
    }, false);
}

element.addEventListener('click', func(event, this.elements[i]))

element.addEventListener('click', (function(passedInElement) {
    return function(e) {func(e, passedInElement); };
}) (this.elements[i]), false);
// return our event handler while capturing an argument in the closure
function handleEvent(passedInElement) {
    return function(e) {
        func(e, passedInElement); 
    };
}

element.addEventListener('click', handleEvent(this.elements[i]));

<h2>:contains selector</h2>
Selecting multiple items from a list

use the <b>:contains</b> selector to search for an element whose text includes certain text.

$("#leftSelect option:contains(InfoCard Employee)").prop('selected', true);

<h2>multiple select</h2>
// arguments: reference to select list, callback function (optional)
function getSelectedOptions(sel, fn) {
    var opts = [], opt;
    
    // loop through options in select list
    for (var i=0, len=sel.options.length; i&lt;len; i++) {
        opt = sel.options[i];
        
        // check if selected
        if ( opt.selected ) {
            // add to array of option elements to return from this function
            opts.push(opt);
            
            // invoke optional callback function if provided
            if (fn) {
                fn(opt);
            }
        }
    }
    
    // return array containing references to selected option elements
    return opts;
}
Our getSelectedOptions function includes a callback mechanism that enables handling each selected option as it is collected, so there is no need to loop through the set a second time. 

The callback function for this example is displayed here:

// example callback function (selected options passed one by one)
function callback(opt) {
    // display in textarea for this example
    var display = document.getElementById('display');
    display.innerHTML += opt.value + ', ';

    // can access properties of opt, such as...
    //alert( opt.value )
    //alert( opt.text )
    //alert( opt.form )
}
Onchange and Onsubmit Handling
The example form above demonstrates obtaining the list of selected options both onchange and onsubmit. 

Onsubmit, we check the length of the list to report how many option elements have been selected. 

Onchange, we list the values of selected options in the textarea.

The JavaScript below shows how onchange and onsubmit handling are set up for this example:

// anonymous function onchange for select list with id demoSel
document.getElementById('demoSel').onchange = function(e) {
    // get reference to display textarea
    var display = document.getElementById('display');
    display.innerHTML = ''; // reset
    
    // callback fn handles selected options
    getSelectedOptions(this, callback);
    
    // remove ', ' at end of string
    var str = display.innerHTML.slice(0, -2);
    display.innerHTML = str;
};

document.getElementById('demoForm').onsubmit = function(e) {
    // reference to select list using this keyword and form elements collection
    // no callback function used this time
    var opts = getSelectedOptions( this.elements['demoSel[]'] );
    
    alert( 'The number of options selected is: ' + opts.length ); //  number of selected options
    
    return false; // don't return online form
};
Form Markup
Markup for the example form above is displayed here:

&lt;form action="#" method="post" id="demoForm" class="demoForm">
    &lt;fieldset>
        &lt;legend>Demo: Get Selected Options&lt;/legend>
    
        &lt;p>
            &lt;select name="demoSel[]" id="demoSel" size="4" multiple>
                &lt;option value="scroll">Scrolling Divs JavaScript&lt;/option>
                &lt;option value="tooltip">JavaScript Tooltips&lt;/option>
                &lt;option value="con_scroll">Continuous Scroller&lt;/option>
                &lt;option value="banner">Rotating Banner JavaScript&lt;/option>
                &lt;option value="random_img">Random Image PHP&lt;/option>
                &lt;option value="form_builder">PHP Form Generator&lt;/option>
                &lt;option value="table_class">PHP Table Class&lt;/option>
                &lt;option value="order_forms">PHP Order Forms&lt;/option>
            &lt;/select>
            &lt;input type="submit" value="Submit" />
            &lt;textarea name="display" id="display" placeholder="view select list value(s) onchange" cols="20" rows="4" readonly>&lt;/textarea>
        &lt;/p>
        
    &lt;/fieldset>
&lt;/form>
Name Attribute for Multiple Select
Notice the name demoSel[] is applied to the example select box. 

Attach square brackets to the end of the name of a select-multiple type select box in order for server side code to treat selected options as an array. 

Otherwise only the last selected item will be provided. 

An ID can be used to obtain a reference to the select box in JavaScript as shown above.[1]

<h2>some input checkbox functions</h2>
<b>use keypress</b>
&lt;input type="checkbox" name="Colors" value="Bike" class="mycheckbox">My text&lt;br>

Jquery
$('.mycheckbox').on('keypress', function (event) {
    if (event.which === 13) {
        $(this).prop('checked', !$(this).prop('checked'));
    }
});

Another method is to use a type selector in order to get the input elements with certain type.

$('input[type=checkbox]')
$(':checkbox').on('keypress', function (event) {
    if (event.which === 13) {
        $(this).prop('checked', !$(this).prop('checked'));
        $('textarea').html($(this).prop('checked').toString());
    }
});

&lt;input type="checkbox" name="Colors" value="Bike" class="mycheckbox">My text&lt;br>

$(document).on('keypress', function(event) {
  if (event.keyCode == 13) {
    $('#mycheckbox').prop('checked', true);
  }
});

$('input:checkbox').keypress(function(e){
    if((e.keyCode ? e.keyCode : e.which) == 13){
        $(this).trigger('click');
    }
});

<b>use preventDefault</b>
but pressing Enter would also submit the form.
Adding e.preventDefault(); prevents the default browser action when pressing enter on the checkbox.

$('input:checkbox').keypress(function(e){
    e.preventDefault();
    if((e.keyCode ? e.keyCode : e.which) == 13){
        $(this).trigger('click');
    }
});

if (keycode == 13) {
    $(this).attr('checked', checked);
    Checkbox_to_RadioButton(this);
    alert("Enter key was pressed");
}   

<b>Set the checked state of a checkbox:</b>
function check() { document.getElementById("myCheck").checked = true; }
function uncheck() { document.getElementById("myCheck").checked = false; }

Find out if a checkbox is checked or not:
var x = document.getElementById("myCheck").checked;

Use a checkbox to convert text in an input field to uppercase:
document.getElementById("fname").value = document.getElementById("fname").value.toUpperCase();

<b>Several checkboxes in a form:</b>
&lt;form action="/action_page.php">
&lt;input type="checkbox" name="coffee" value="cream">With cream&lt;br>
&lt;input type="checkbox" name="coffee" value="sugar">With sugar&lt;br>
&lt;br>
&lt;input type="button" onclick="myFunction()" value="Send order">
&lt;br>&lt;br>
&lt;input type="text" id="order" size="50">
&lt;input type="submit" value="Submit">
&lt;/form>

function myFunction() {
  var coffee = document.forms[0];
  var txt = "";
  var i;
  for (i = 0; i &lt; coffee.length; i++) {
    if (coffee[i].checked) { txt = txt + coffee[i].value + " "; }
  }
  document.getElementById("order").value = "You ordered a coffee with: " + txt;
}

<h2>click label check checkbox</h2>
Without jQuery code:
use: <b>label for</b>
&lt;input type="checkbox" id="Checkbox1">&lt;label for="Checkbox1">Check ME&lt;/label>
&lt;select id="mySelect" onchange="checkboxes();" /&gt;

<h2>window open this children attr</h2>
&lt;p&gt;&lt;a href="https://www.youtube.com/channel/Exw"&gt;InspirationTuts&lt;/a&gt;&lt;/p&gt;
window.open($(this).children("a").attr("href"));

<h2>jquery to change style attribute of a div class</h2>
$('.handle').css('left', '300px');

<h2>sessionStorage</h2>
if (typeof(Storage) !== "undefined") {  // Check browser support
  // Store
  sessionStorage.setItem("lastname", "Smith");
  // Retrieve
  document.getElementById("result").innerHTML = sessionStorage.getItem("lastname");
}

<h2>jQuery serialize()</h2>
creates a URL encoded text string by serializing form values.

$("button").click(function(){
  $("div").text($("form").serialize());
});

You can select one or more form elements (like input and/or text area), or the form element itself.

The serialized values can be used in the URL query string when making an AJAX request.

<h2>encodeURIComponent() and decodeURIComponent() Function</h2>
decodes a URI component

function myFunction() {
  var uri = "https://w3schools.com/my test.asp?name=ståle&car=saab";
  var uri_enc = encodeURIComponent(uri);
  var uri_dec = decodeURIComponent(uri_enc);
  var res = "Encoded URI: " + uri_enc + "<br>" + "Decoded URI: " + uri_dec;
  document.getElementById("demo").innerHTML = res;
}

Encoded URI: https%3A%2F%2Fw3schools.com%2Fmy%20test.asp%3Fname%3Dst%C3%A5le%26car%3Dsaab
Decoded URI: https://w3schools.com/my test.asp?name=ståle&car=saab

<h2>store form checkboxes to sessionStorage</h2>
  $('#formId').submit(function (ev) {
    sessionStorage.setItem('checkBoxesResult', $("#formId").serialize()); 
  });

  if(sessionStorage.getItem("checkBoxesResult")) {
   var recordStr = sessionStorage.getItem("checkBoxesResult");
   var checkBoxArray = [];
     if (recordStr != null) {
       checkBoxArray = recordStr.split("&");
       for( var i=0; i < checkBoxArray.length; i++ ) {
         var nv  = checkBoxArray[i].split("=")
         n = decodeURIComponent(nv[0]),
         v = nv.length > 1 ? decodeURIComponent(nv[1]) : null;
         selectedChkBox(n,v);
       }
     }
  }

  function selectedChkBox( chkbox, value ) {
    $("[name="+chkbox+"]").each( function() {   
      if ( $(this).val() ==  value )
        $(this).attr('checked', true);
      else
        if ( $(this).attr('checked') == true)
          $(this).attr('checked', false);
    });
  }

<h2>to evaluate minutes between time spans</h2>
  var d = new Date();
  var mins=d.getMinutes();
  var hr=d.getHours();

  hrdiff = hr - 9;
  mindiff = mins -30;
  timespan = hrdiff * 60 + mindiff;
  if(timespan&lt;60){imgwidth = timespan*22}

<h2>Improving Async functions with Web Workers</h2>
JS shall have but one Thread (in the browser at least)
– Thus spoke the master programmer.

JS runs in a single thread in the browser, this is the truth.
Somewhere in its own universe, there exists a Queue which holds messages
and functions associated with them.
Every time an event (i.e, a user clicks a button) is registered, there’s
a runtime check to see whether there’s any listener attached to that event.
If there’s one, it will enqueue the message. 
Otherwise, it will be lost
forever.

Now, our event loop processes one message at a time, meaning that if you
do some CPU intensive operation (i.e, number crunching) this will indeed
‘block’ the one Thread, rendering our application useless.

This is true even for <code>async</code> functions, which will be queued as soon as invoked and executed as soon as possible (immediately given the queue is empty).
I/O such as requests to external resources are non-blocking though, so you
can request a file as large as you want without fear.
The associated callback, however, will show the same characteristics of an <code>async</code> function.

Strategies for processing lots of data vary a lot.
You could partition data and set timeouts for processing bits of it a time for example.

But to unleash the full power of asynchronous processing, you should use <b>Web Workers</b>.

To do so, you separate the processing part in a different file (possibly
‘my_worker.js’), create a worker with <code>newWorker = new Worker('my_worker.js');</code>
and offload the processing to it.
// my_worker.js
const do_a_lot_of_processing = (data) =&gt; {
    ....
}
onmessage = (e) =&gt; {
    postMessage(do_a_lot_of_processing(e.data));
// main.js
const myWorker = new Worker('my_worker.js');
async function get_useful_data() {
    const raw_data = await request(some_url);
    myWorker.postmessage(raw_data);
const show_data =&gt; (e) {
    const data = e.data;
    ...
myWorker.onmessage(show_data);
get_useful_data();

Your mileage may vary of course, and there are many abstractions that can be
built upon this model.

<h2>HTML5 Web Workers</h2>
A web worker is a JavaScript running in the background, without affecting the performance of the page.
When executing scripts in an HTML page, the page becomes unresponsive until the script is finished.
A web worker is a JavaScript that runs in the background, independently 
of other scripts, without affecting the performance of the page. 
You can continue to do whatever you want: 
clicking, selecting things, etc., while the web worker runs in the background.

Uncaught DOMException: Failed to construct 'Worker':

If you are seeing this in Chrome then the answer probably has to do with loading from a local filesystem rather than over HTTP.
The key is the message "cannot be accessed from origin 'null'"
It's because Chrome doesn't let you load web workers when running scripts from a local file.

run a server, Wampserver64, open browser, run:
http://localhost/test web worker.html

Limitations Of Web Workers
The Web Workers API is a very powerful tool, but it has a few limitations:

A worker can’t directly manipulate the DOM and has limited access to methods and properties of the window object.
A worker can not be run directly from the filesystem. 
It can only be run via a server.

<h3>Example</h3>
The example below creates a simple web worker that count numbers in the background:

Count numbers: &lt;output id="result">&lt;/output>

&lt;button onclick="startWorker()">Start Worker&lt;/button> 
&lt;button onclick="stopWorker()">Stop Worker&lt;/button>

&lt;script>
var w;
function startWorker() {
  if(typeof(Worker)!=="undefined") {
    if(typeof(w)=="undefined") {
      w = new Worker("demo_workers.js");
    }
    w.onmessage = function (event) {
      document.getElementById("result").innerHTML=event.data;
    };
  } else {
    document.getElementById("result").innerHTML="Sorry, your browser does not support Web Workers...";
    }
  }

function stopWorker() { 
  w.terminate();
  w = undefined;
}
&lt;/script>
<h3>Create a Web Worker File</h3>
Now, let's create our web worker in an external JavaScript.
Here, we create a script that counts. 
The script is stored in the &quot;demo_workers.js&quot; file:

var i = 0;

function timedCount() {
  i = i + 1;
  postMessage(i);
  setTimeout(&quot;timedCount()&quot;,500);
}
timedCount();

The important part of the code above is the <code>postMessage()</code> method - which is used to post a message back to the HTML page.
<b>Note:</b> Normally web workers are not used for such simple scripts, but for more CPU intensive tasks.

<h3>Create a Web Worker Object</h3>
Now that we have the web worker file, we need to call it from an HTML page.
The following lines checks if the worker already exists, if not - it creates a new web worker object and runs the code in 
&quot;demo_workers.js&quot;:

if (typeof(w) == &quot;undefined&quot;) {
    w = new Worker(&quot;demo_workers.js&quot;);
 }
Then we can send and receive messages from the web worker.
Add an &quot;onmessage&quot; event listener to the web worker.

w.onmessage = function(event){
    document.getElementById(&quot;result&quot;).innerHTML = event.data;
 };

When the web worker posts a message, the code within the event listener is executed. 
The data from the web worker is stored in event.data.

<h3>Terminate a Web Worker</h3>
When a web worker object is created, it will continue to listen for messages (even after the external script is finished) until it is terminated.
To terminate a web worker, and free browser/computer resources, use the 
<code>terminate()</code> method:

w.terminate();

<h3>Reuse the Web Worker</h3>
If you set the worker variable to undefined, after it has been terminated, 
you can reuse the code:

 w = undefined;

<h3>Full Web Worker Example Code</h3>
We have already seen the Worker code in the .js file. 
Below is the code for the HTML page:

<h3>Example</h3>

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
&lt;p&gt;Count numbers: &lt;output id=&quot;result&quot;&gt;&lt;/output&gt;&lt;/p&gt;
&lt;button onclick=&quot;startWorker()&quot;&gt;Start Worker&lt;/button&gt; 
&lt;button onclick=&quot;stopWorker()&quot;&gt;Stop Worker&lt;/button&gt;
&lt;script&gt;

var w;
function startWorker(){
  if(typeof(Worker) !== &quot;undefined&quot;) {
    if(typeof(w) == &quot;undefined&quot;) {
      w = new Worker(&quot;demo_workers.js&quot;);
    }
    w.onmessage = function(event) {
      document.getElementById(&quot;result&quot;).innerHTML = event.data;
    };
  }
  else {
    document.getElementById(&quot;result&quot;).innerHTML = &quot;Sorry! No Web Worker support.&quot;;
  }
}

function stopWorker() { 
  w.terminate();
  w = undefined;
}
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

<h3>Web Workers and the DOM</h3>
Since web workers are in external files, they do not have access to the following JavaScript objects:
The window object
The document object
The parent object

<a href="building blocks of Web Workers.html" class="whitebut red">building blocks of Web Workers</a>

application cases for Web Workers
games, graphics, crypto

Another use is Web I/O - in other words, polling URLs in background. 

That way you don't block the UI waiting for polling results.

syntax highlighting, which you wouldn’t want to block your code editing whilst you’re using the app.

processor-intensive calculations without blocking the user interface thread.
As a practical example, think of an app which has a large table

<h2>Types of Web Workers</h2>

It's worth noting that the <a href="http://www.whatwg.org/specs/web-workers/current-work/">specification</a> discusses two kinds of Web Workers, <a href="http://www.whatwg.org/specs/web-workers/current-work/#dedicated-workers-and-the-worker-interface">Dedicated Workers</a> and <a href="http://www.whatwg.org/specs/web-workers/current-work/#sharedworker">Shared Workers</a>. 

This article will only cover dedicated workers and I'll refer to them as 'web workers' or 'workers' throughout.

Web Workers run in an isolated thread. 

As a result, the code that they execute needs to be contained in a separate file.
But before we do that, the first thing to do is create a new <code>Worker</code> object in your main page. 

The constructor takes the name of the worker script:

var worker = new Worker('task.js');

If the specified file exists, the browser will spawn a new worker thread, which is downloaded asynchronously.
The worker will not begin until the file has completely downloaded and executed. 

If the path to your worker returns an 404, the worker will fail silently.

After creating the worker, start it by calling the <code>postMessage()</code> method:

worker.postMessage(); // Start the worker.

<h3>Communicating with a Worker via Message Passing</h3>

Communication between a work and its parent page is done using an event model and the <code>postMessage()</code> method. 

Depending on your browser/version, <code>postMessage()</code> can accept either a string or JSON object as its single argument.
The latest versions of the modern browsers support passing a JSON object.

Below is a example of using a string to pass 'Hello World' to a worker in doWork.js. 

The worker simply returns the message that is passed to it.

Main script:

var worker = new Worker('doWork.js');

worker.addEventListener('message', function(e) {
console.log('Worker said: ', e.data);
}, false);

worker.postMessage('Hello World'); // Send data to our worker.

doWork.js (the worker):

self.addEventListener('message', function(e) {
  self.postMessage(e.data);
}, false);

When <code>postMessage()</code> is called from the main page, our worker handles that message by defining an <code>onmessage</code> handler for the <code>message</code> event. 

The message payload (in this case 'Hello World') is accessible in <code>Event.data</code>. 

Although this particular example isn't very exciting, it demonstrates that <code>postMessage()</code> is also your means for passing data back to the main thread. 

Convenient!

Messages passed between the main page and workers are copied, not shared. 

For example, in the next example the 'msg' property of the JSON message is accessible in both locations. 

It appears that the object is being passed directly to the worker even though it's running in a separate, dedicated space. 

In actuality, what is happening is that the object is being serialized as it's handed to the worker, and subsequently, de-serialized on the other end. 

The page and worker do not share the same instance, so the end result is that a duplicate is created on each pass. 

Most browsers implement this feature by automatically JSON encoding/decoding the value on either end.

The following is a more complex example that passes messages using JSON objects.

Main script:

&lt;button onclick="sayHI()"&gt;Say HI&lt;/button&gt;
&lt;button onclick="unknownCmd()"&gt;Send unknown command&lt;/button&gt;
&lt;button onclick="stop()"&gt;Stop worker&lt;/button&gt;
&lt;output id="result"&gt;&lt;/output&gt;

&lt;script&gt;
function sayHI() {
  worker.postMessage({'cmd': 'start', 'msg': 'Hi'});
}

function stop() {
  // worker.terminate() from this script would also stop the worker.
  worker.postMessage({'cmd': 'stop', 'msg': 'Bye'});
}

function unknownCmd() {
  worker.postMessage({'cmd': 'foobard', 'msg': '???'});
}

var worker = new Worker('doWork2.js');

worker.addEventListener('message', function(e) {
  document.getElementById('result').textContent = e.data;
}, false);
&lt;/script&gt;

doWork2.js:

self.addEventListener('message', function(e) {
var data = e.data;
switch (data.cmd) {
  case 'start':
    self.postMessage('WORKER STARTED: ' + data.msg);
    break;
  case 'stop':
    self.postMessage('WORKER STOPPED: ' + data.msg +
                     '. 

(buttons will no longer work)');
    self.close(); // Terminates the worker.
    break;
  default:
    self.postMessage('Unknown command: ' + data.msg);
};
}, false);

<strong>Note</strong>: There are two ways to stop a worker: by calling <code>worker.terminate()</code> from the main page or by calling <code>self.close()</code> inside of the worker itself.

<strong>Example</strong>: Run this worker!

<h3> - Transferrable objects</h3>

Most browsers implement the <a href="http://updates.html5rocks.com/2011/09/Workers-ArrayBuffer">structured cloning</a> algorithm, which allows you to pass more complex types in/out of Workers such as <code>File</code>, <code>Blob</code>, <code>ArrayBuffer</code>, and JSON objects. 

However, when passing these types of data using <code>postMessage()</code>, a copy is still made. 

Therefore, if you're passing a large 50MB file (for example), there's a noticeable overhead in getting that file between the worker and the main thread.

Structured cloning is great, but a copy can take hundreds of milliseconds. 

To combat the perf hit, you can use <a href="http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#transferable-objects">Transferable Objects</a>.

With Transferable Objects, data is transferred from one context to another. 

It is zero-copy, which vastly improves the performance of sending data to a Worker. 

Think of it as pass-by-reference if you're from the C/C++ world. 

However, unlike pass-by-reference, the 'version' from the calling context is no longer available once transferred to the new context. 

For example, when transferring an ArrayBuffer from your main app to Worker, the original <code>ArrayBuffer</code> is cleared and no longer usable. 

Its contents are (quiet literally) transferred to the Worker context.

To use transferrable objects, use a slightly different signature of <code>postMessage()</code>:

worker.postMessage(arrayBuffer, [arrayBuffer]);
window.postMessage(arrayBuffer, targetOrigin, [arrayBuffer]);

The worker case, the first argument is the data and the second is the list of items that should be transferred. 

The first argument doesn't have to be an <code>ArrayBuffer</code> by the way. 

For example, it can be a JSON object:

worker.postMessage({data: int8View, moreData: anotherBuffer},
                 [int8View.buffer, anotherBuffer]);

The important point being: the second argument must be an array of <code>ArrayBuffer</code>s.
This is your list of transferrable items.

To see the speed improvement of transferrables, check out this <a href="http://html5-demos.appspot.com/static/workers/transferables/index.html">DEMO</a>. 

For more information on transferrables, see our <a href="http://updates.html5rocks.com/2011/12/Transferable-Objects-Lightning-Fast">HTML5Rock post</a>.

<h3> - The Worker Environment</h3>

<h3>Worker Scope</h3>

In the context of a worker, both <code>self</code> and <code>this</code> reference the global scope for the worker. 

Thus, the previous example could also be written as:

addEventListener('message', function(e) {
var data = e.data;
switch (data.cmd) {
  case 'start':
    postMessage('WORKER STARTED: ' + data.msg);
    break;
  case 'stop':
...
}, false);

Alternatively, you could set the <code>onmessage</code> event handler directly
(though <code>addEventListener</code> is always encouraged by JavaScript ninjas).

onmessage = function(e) {
var data = e.data;
...
};

<h3>Features Available to Workers</h3>

Due to their multi-threaded behavior, web workers only has access to a subset of JavaScript's features:

The <code>navigator</code> object
The <code>location</code> object (read-only)
<code>XMLHttpRequest</code>
<code>setTimeout()/clearTimeout()</code> and <code>setInterval()/clearInterval()</code>
The <a href="/tutorials/appcache/beginner/">Application Cache</a>
Importing external scripts using the <code>importScripts()</code> method
<a href="#toc-enviornment-subworkers">Spawning other web workers</a>
Workers do NOT have access to:

The DOM (it's not thread-safe)
The <code>window</code> object
The <code>document</code> object
The <code>parent</code> object

<h3>Loading External Scripts</h3>

You can load external script files or libraries into a worker with the <code>importScripts()</code> function. 

The method takes zero or more strings representing the filenames for the resources to import.

This example loads <code>script1.js</code> and <code>script2.js</code> into the worker:

worker.js:

importScripts('script1.js');
importScripts('script2.js');

Which can also be written as a single import statement:

importScripts('script1.js', 'script2.js');

<h3>Subworkers</h3>

Workers have the ability to spawn child workers. 

This is great for further breaking up large tasks at runtime. 

However, subworkers come with a few caveats:

Subworkers must be hosted within the same origin as the parent page. 


URIs within subworkers are resolved relative to their parent worker's location (as opposed to the main page).

Keep in mind most browsers spawn separate processes for each worker. 

Before you go spawning a worker farm, be cautious about hogging too many of the user's system resources. 

One reason for this is that messages passed between main pages and workers are copied, not shared. 

See <a href="#toc-gettingstarted-workercomm">Communicating with a Worker via Message Passing</a>.

For an sample of how to spawn a subworker, see <a href="http://www.whatwg.org/specs/web-workers/current-work/#delegation">the example</a> in the specification.

<h3> - Inline Workers</h3>

What if you want to create your worker script on the fly, or create a self-contained page without having to create separate worker files? With <code>Blob()</code>, you can "inline" your worker in the same HTML file as your main logic by creating a URL handle to the worker code as a string:

var blob = new Blob([
  "onmessage = function(e) { postMessage('msg from worker'); }"]);

// Obtain a blob URL reference to our worker 'file'.
var blobURL = window.URL.createObjectURL(blob);

var worker = new Worker(blobURL);
worker.onmessage = function(e) {
  // e.data == 'msg from worker'
};
worker.postMessage(); // Start the worker.

<h3>Blob URLs</h3>

The magic comes with the call to .
This method creates a simple URL string which can be used to reference data stored in a
DOM <code>File</code> or <code>Blob</code> object. 

For example:

blob:http://localhost/c745ef73-ece9-46da-8f66-ebes574789b1

Blob URLs are unique and last for the lifetime of your application (e.g. 
until the <code>document</code> is unloaded). 

If you're creating many Blob URLs, it's a good idea to release references that are no longer needed. 

You can explicitly release a Blob URLs by passing it to :

window.URL.revokeObjectURL(blobURL);

In Chrome, there's a nice page to view all of the created blob URLs: <code>chrome://blob-internals/</code>.

<h3>Full Example</h3>

Taking this one step further, we can get clever with how the worker's JS code is inlined in our page. 

This technique uses a <code>&lt;script&gt;</code> tag to define the worker:

&lt;!DOCTYPE html>
&lt;html>
&lt;head>
&lt;meta charset="utf-8" />
&lt;/head>
&lt;body>

&lt;div id="log"&gt;&lt;/div&gt;

&lt;script id="worker1" type="javascript/worker"&gt;
  // This script won't be parsed by JS engines
  // because its type is javascript/worker.
  self.onmessage = function(e) {
    self.postMessage('msg from worker');
  };
  // Rest of your worker code goes here.
&lt;/script&gt;

&lt;script&gt;
  function log(msg) {
    // Use a fragment: browser will only render/reflow once.
    var fragment = document.createDocumentFragment();
    fragment.appendChild(document.createTextNode(msg));
    fragment.appendChild(document.createElement('br'));

    document.querySelector("#log").appendChild(fragment);
  }

  var blob = new Blob([document.querySelector('#worker1').textContent]);

  var worker = new Worker(window.URL.createObjectURL(blob));
  worker.onmessage = function(e) {
    log("Received: " + e.data);
  }
  worker.postMessage(); // Start the worker.
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

In my opinion, this new approach is a bit cleaner and more legible.
It defines a script tag with <var>id="worker1"</var> and <var>type='javascript/worker'</var> (so the browser doesn't parse the JS). 

That code is extracted as a string using <code>document.querySelector('#worker1').textContent</code> and passed to <code>Blob()</code> to create the file.

<h3>Loading External Scripts</h3>

When using these techniques to inline your worker code, <code>importScripts()</code> will only work if you supply an absolute URI. 

If you attempt to pass a relative URI, the browser will complain with a security error. 

The reason being: the worker (now created from a blob URL) will be resolved with a <code>blob:</code> prefix, while your app will be running from a different (presumably <code>http://</code>) scheme. 

Hence, the failure will be due to cross origin restrictions.

One way to utilize <code>importScripts()</code> in an inline worker is to "inject" the current url of your main script is running from by passing it to the inline worker and constructing the absolute URL manually. 

This will insure the external script is imported from the same origin. 

Assuming your main app is running from http://example.com/index.html:

  
...
&lt;script id="worker2" type="javascript/worker"&gt;
self.onmessage = function(e) {
var data = e.data;

if (data.url) {
  var url = data.url.href;
  var index = url.indexOf('index.html');
  if (index != -1) {
    url = url.substring(0, index);
  }
  importScripts(url + 'engine.js');
}
...
};
&lt;/script&gt;
&lt;script&gt;
var worker = new Worker(window.URL.createObjectURL(bb.getBlob()));
worker.postMessage(<b>{url: document.location}</b>);
&lt;/script&gt;

<h3> - Handling Errors</h3>

As with any JavaScript logic, you'll want to handle any errors that are thrown in your web workers.
If an error occurs while a worker is executing, the an <code>ErrorEvent</code> is fired. 

The interface contains three useful properties for figuring out what went wrong: <code>filename</code> - the name of the worker script that caused the error, <code>lineno</code> - the line number where the error occurred, and <code>message</code> - a meaningful description of the error. 

Here is an example of setting up an <code>onerror</code> event handler to print the properties of the error:

&lt;output id="error" style="color: red;"&gt;&lt;/output&gt;
&lt;output id="result"&gt;&lt;/output&gt;

&lt;script&gt;
function onError(e) {
  document.getElementById('error').textContent = [
    'ERROR: Line ', e.lineno, ' in ', e.filename, ': ', e.message
  ].join('');
}

function onMsg(e) {
  document.getElementById('result').textContent = e.data;
}

var worker = new Worker('workerWithError.js');
worker.addEventListener('message', onMsg, false);
worker.addEventListener('error', onError, false);
worker.postMessage(); // Start worker without a message.
&lt;/script&gt;

<strong>Example</strong>: workerWithError.js tries to perform 1/x, where x is undefined.

workerWithError.js:

self.addEventListener('message', function(e) {
  postMessage(1/x); // Intentional error.
};

<h3> - A Word on Security</h3>

<h3>Restrictions with Local Access</h3>

Due to Google Chrome's security restrictions, workers will not run locally (e.g. 
from <code>file://</code>) in the latest versions of the browser. 

Instead, they fail silently!  To run your app from the <code>file://</code> scheme, run Chrome with the <code>--allow-file-access-from-files</code> flag set. 

<strong>NOTE</strong>: It is not recommended to run your primary browser with this flag set. 

It should only be used for testing purposes and not regular browsing.

Other browsers do not impose the same restriction.

<h3>Same Origin Considerations</h3>

Worker scripts must be external files with the same scheme as their calling page. 

Thus, you cannot load a script from a <code>data:</code> URL or <code>javascript:</code> URL, and an <code>https:</code> page cannot start worker scripts that begin with <code>http:</code> URLs.

<h3> - Use Cases</h3>

So what kind app would utilize web workers? Unfortunately, web workers are still relatively new and the majority of samples/tutorials out there involve computing prime numbers. 

Although that isn't very interesting, it's useful for understanding the concepts of web workers. 

Here are a few more ideas to get your brain churning:

Prefetching and/or caching data for later use
Code syntax highlighting or other real-time text formatting
Spell checker
Analyzing video or audio data
Background I/O or polling of webservices
Processing large arrays or humungous JSON responses
Image filtering in &lt;canvas&gt;
Updating many rows of a local web database

<h3> - Demos</h3>
Example from <a href="http://slides.html5rocks.com/#web-workers">HTML5Rocks slides</a>
<a href="http://htmlfive.appspot.com/static/tracker1.html">Motion tracker</a>
<a href="http://people.mozilla.com/~prouget/demos/worker_and_simulatedannealing/index.xhtml">Simulated Annealing</a>
<a href="http://html5demos.com/worker">HTML5demos sample</a>

<h3> - References</h3>
<a href="http://www.whatwg.org/specs/web-workers/current-work/">Web Workers</a> specification
<a href="http://developer.mozilla.org/en/Using_web_workers">"Using web workers"</a> from Mozilla Developer Network
<a href="http://dev.opera.com/articles/view/web-workers-rise-up/">"Web Workers rise up!"</a> from Dev.Opera

<h2>open multiple pages</h2>
  var locs = [
    "url1",
    "url2",
  ]

  function multipages() {
    for (let i = 0; i < locs.length; i++) {
      window.open(locs[i])
    }
  }

<h2>onmouseover focus and select</h2>
&lt;input type="text" autocomplete="off" name="q" id="query" onmouseover="this.focus()" onfocus="this.select()" value="">

<h2>disable web page certain functions</h2>
  jQuery(document).bind("keydown", function(e) {
    if(e.ctrlKey && (e.which == 44 || e.which == 65 || e.which == 67 || e.which == 73 || e.which == 75 || e.which == 80 || e.which == 88 || e.which == 83 ||e.which == 85)) {
  e.preventDefault(); return false; }

  jQuery(document).on( "mousedown", function(event) { if(event.which=="3") 
  { document.oncontextmenu = document.body.oncontextmenu = function() {return false;} } });

<h2>change element attribute</h2>
    $("body").on("mouseup", ".unitListItem, .unitHeading", function() {
      var tab_names = $(this).html().split(",");

      // change element attribute
      if ($(this).attr("class") == "unitListItem") {
        var tab_id = $(this).attr("id");
        $(".unitListItem").each(function() {
          if ($(this).attr("id") != tab_id) {
           for (tab_name of tab_names) {
             if ($(this).html().indexOf(tab_name.trim()) >= 0) {
               $(this).trigger('click');
             }
           }
          }
        });
      }
      else if ($(this).attr("class") == "tabtitle unitHeading") {
        var tab_id = $(this).next().attr("id");
        $(".unitHeading").each(function() {
          if ($(this).next().attr("id") != tab_id) {
            for (tab_name of tab_names) {
              if ($(this).html().indexOf(tab_name.trim()) >= 0) {
                $(this).trigger('click');
              }
            }
          }
        });
      }
    });

<h2>turn on/off certain tab and take action</h2>
  &lt;button class="tabbut" 
     onclick="openTab('lastrec');
              document.getElementById('reqLastRec').submit()" >Last Rec&lt;/button>

  // turn off actionBox
  $('.actionBox').css('display', 'none');

<h2>Array map() Method</h2>
creates a new array by calling a function on each element.

var LongList = ['600004', '600007', '600008', '600009', '600010'];
function toACode(thecode) {if (thecode[0]=="6"){ thecode = thecode+".sh" }else { thecode = thecode+".sz" }return(thecode);
}
newList = LongList.map(item => toACode(item));

find object names:
var thisObj = [ { name: 'someName1' }, { name: 'someName2' },
                { name: 'someName4' }, { name: 'someName2' }
];
var objNames = thisObj.map(item => item.name);

<h3>Index inside map() function</h3>
get the current iteration's index through 2nd parameter.
Example:
var list = [ 'h', 'e', 'l', 'l', 'o'];
list.map((currElement, index) => { console.log(index, currElement); });

Other arguments of Array.prototype.map():
For example:
const array = [1, 2, 3, 4];
const thisObj = { prop1: 1 }
const map = array.map((x, index, array) => {
  console.log(array);
  console.log(this)
}, thisObj);

Syntax
array.map(function(currentValue, index, arr), thisValue)

<b>Parameters</b>b>
function()	Required. A function to be run for each array element.
currentValue	Required. The value of the current element.
index	Optional. The index of the current element.
arr	Optional. The array of the current element.
thisValue	Optional. Default value undefined.
A value passed to the function to be used as its this value.

<b>example</b> to find difference from prev value
arr = [1,2,3,2,4,5,6,4,3,2]
arr.slice(1).map(function(n, i) { return n - arr[i]; })
 [1, 1, -1, 2, 1, 1, -2, -1, -1]

<b>example</b> to find difference from two arrays
// arr - arr1
var x = arr.map(function(item, index) { return item - arr1[index]; })
console.log(x)


<h2>Javascript right click</h2>
1. 
window.oncontextmenu = function ()
{ showCustomMenu(); return false;     // cancel default menu }

2. 
window.oncontextmenu = function () { alert('Right Click') }
// the context menu will still come up
// add return false; to stop context menu comes up
3. 
use mousedown
$("img").mousedown(function(ev){
  if(ev.which == 1) { alert("Left mouse button clicked on myId"); }
  if(ev.which == 2) { alert("Middle mouse button clicked on myId"); }
  if(ev.which == 3) { alert("Right mouse button clicked on myId"); }
});
The value of which will be:
1 for the left button
2 for the middle button
3 for the right button

4. 
&lt;div oncontextmenu="javascript:alert('success!');return false;">
    Lorem Ipsum
&lt;/div>

onClick is not triggered through right click.
right click only trigger onMouseDown onMouseUp and onContextMenu.
So "onContextMenu" is the right click event.

&lt;div oncontextmenu="myFunction()">

function myFunction() {  alert("You right-clicked inside the div!");}

A context menu is a menu in a GUI that appears upon user interaction, such as a right-click mouse operation. 
A context menu offers a limited set of choices that are available in the current state, or context, of the operating system or application. 
Usually the available choices are actions related to the selected object.

<h2>create a clickable dropdown menu</h2>
&lt;div class="dropdown">
  &lt;button onclick="myFunction()">Dropdown&lt;/button>
  &lt;div id="myDropdown" class="dropdown-content">
    &lt;a href="#home">Home&lt;/a>
    &lt;a href="#about">About&lt;/a>
    &lt;a href="#contact">Contact&lt;/a>
  &lt;/div>
&lt;/div>

/* When the user clicks on the button, 
toggle between hiding and showing the dropdown content */
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i &lt; dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}

<a href="https://stackoverflow.com/questions/11145681/how-to-convert-a-string-with-unicode-encoding-to-a-string-of-letters" class="whitebut ">convert unicode encoding to string</a>
Technically doing:

String myString = "\u0048\u0065\u006C\u006C\u006F World";

In order to convert it to "Hello" you'll have to parse the text into the separate unicode digits, (take the \uXXXX and just get XXXX)
then do Integer.ParseInt(XXXX, 16) to get a hex value and then case that to char to get the actual character.

Some code to accomplish this:

String str = myString.split(" ")[0];
str = str.replace("\\","");
String[] arr = str.split("u");
String text = "";
for(int i = 1; i < arr.length; i++){
    int hexVal = Integer.parseInt(arr[i], 16);
    text += (char)hexVal;
}
// Text will now have Hello

<h2>Swap rows with columns of a matrix</h2>
function transpose(a) {
    return Object.keys(a[0]).map(function(c) {
        return a.map(function(r) { return r[c]; });
    });
}

console.log(transpose([
    [1,2,3],
    [4,5,6],
    [7,8,9]
]));

transpose = m => m[0].map((x,i) => m.map(x => x[i]))

<h2>convert Multi-Dimensional Array to HTML Table</h2>
&lt;table id="mytab">&lt;/table>
  var mytab = $('#mytab');
  myArr = [
    [1,2,3],
    [4,5,6],
    [7,8,9]
  ]
  for (var row=0; row &lt; myArr.length; row++) {
    rowItem = $( '&lt;tr>' );
    mytab.append( rowItem );

    for (var col=0; col &lt; myArr[row].length; col++) {
        cell = $('&lt;td>' + $(myArr[row])[col] + '&lt;/td>')
        rowItem.append( cell );
    }
  }

<h2>calculate wAve trend range</h2>
 transp = transpose(thedrawdata);
   var mytab = $('#mytab'); // this is the element to show result
   rowItem = $( '&lt;tr>' );
   mytab.append( rowItem );
   for (var row=(transp.length-12); row &lt; transp.length; row++) {
     rowRange = transp[row].slice(3, 8);
      	    rowMax = Math.max(...rowRange);
      	    rowMin = Math.min(...rowRange);
      	    rowDiff = rowMax - rowMin;
      	    //cell = $('&lt;td>' + (Math.round(rowMax*1000)/1000) + '&lt;/td>')
      	    //rowItem.append( cell );
      	    //cell = $('&lt;td>' + (Math.round(rowMin*1000)/1000) + '&lt;/td>')
      	    //rowItem.append( cell );
      	    cell = $('&lt;td>' + (Math.round(rowDiff*1000)/1000) + '&lt;/td>')
      	    rowItem.append( cell );
   }
<h2>Find difference between consecutive numbers in array</h2>
Use Array methods and Arrow functions:
var visitsArr = [38,29,18,29,28,18,24];
var diffs = visitsArr.slice(1).map((x,i)=> x-visitsArr[i]);
diffs.forEach((x,i) => console.log(
   `Visits from day ${i+1} to day ${i+2} increased by ${x}`
));

or
function diff(visitsArr) {
  return visitsArr.slice(1).map(function(n, i) { return n - visitsArr[i]; });
}

The estimate is ((yi+1)−(yi−1))/((xi+1)−(xi−1)). 

This is just the slope between the (i−1)-th point and the the (i+1)-th point.

<h2>sorttable: Make tables sortable</a></h2>
<a href="https://kryogenix.org/code/browser/sorttable/" class="whitebut ">sorttable: Make tables sortable</a>

three steps:
Download the Javascript library

Include the Javascript library, 
&lt;script src="sorttable.js">&lt;/script>

Give your table a class of "sortable":
&lt;table class="sortable">

Note that the library's JavaScript file is called sorttable (two Ts), but the class you add to the table is sortable (one T).

<h2>Convert array of numbers to string</h2>
arr.map(String)

<h2>add comments to stks chart by loading script with json data</h2>

load json data from external js file
by script src = stkComments.js
myjs.js var theCommentList = {item1: "some", item2: "other"}

<h2>Click to toggle block of message</h2>
&lt;div onclick="myFunction()">Click to toggle appearTab!
  &lt;span id="myappearTab">A Simple appearTab!&lt;/span>
&lt;/div>

&lt;script>
// When the user clicks on div, open the appearTab
function myFunction() {
  var appearTab = document.getElementById("myappearTab");
  appearTab.classList.toggle("show");
}
&lt;/script>

or onclick load script to show data

<h2>Access nested data structures</h2>

const data = { code: 42, 
  items: [{ id: 1, name: 'foo' }, { id: 2, name: 'bar' }]
};

to access the name of the second item.
data.items      // data is an object, use dot
data.items[1]   // The value is an array, use bracket
data.items[1].name  // This value is an object, use dot
data['items'][1]['name'];  //or use all brackets

<h2>the rest parameter syntax ...</h2>
sum = (...args) => { console.log(args.length + " arguments");}
sum(1,2,3,3,2,1); //6 arguments

<h2>find repeating names in array of object</h2>
thisObj =[{name:'name1'},{name:'name2'},{name:'name4'},{name:'name2'}];
objNames = thisObj.map(item => item.name);
objNames.filter((item, idx)=> objNames.indexOf(item) != idx ) // name2

unable to find repeating names in objects because Object.keys(thisObj) removes duplicates autoamtically
use R instead to tackle

<h2>arithmetic on two arrays</h2>
var a = [1,3,5,7,9];
var b = [5,4,3,2,1];
a.map((x, index)=> b[index] + x ); // [6, 7, 8, 9, 10]

<h2>currying function</h2>
<a href="https://www.codementor.io/muhammadkasim/currying-in-js-woivjbf1s?utm_swu=7179">Currying in JS</a>
<br>

<a class="post-link" href="https://www.jstips.co/en/javascript/curry-vs-partial-application/">Currying vs partial application</a>
Currying and partial application are two ways of transforming a function into another function with a generally smaller arity.


currying function
currying 又称部分求值，currying 函数会接收一些参数，然后不会立即求值，而是继续返回一个新函数，将传入的参数通过闭包的形式保存，等到被真正求值的时候，再一次性把所有传入的参数进行求值。
// 普通函数
function add(x,y){ return x + y;}
add(1 , 2); // 3
// 函数currying 
var add = function (x) { return function (y) { return x + y;};};
var increment = add(1);
increment(2); // 3

这里我们定义了一个 add 函数，它接受一个参数并返回一个新的函数。
调用 add 之后，返回的函数就通过闭包的方式记住了 add 的第一个参数。
那么，我们如何来实现一个简易的currying 函数呢？
function curryIt(fn) { // 参数fn函数的参数个数
 var n = fn.length;
 var args = [];
 return function (arg) {
   args.push(arg);
   if (args.length &lt; n) {
    return arguments.callee; // 返回这个函数的引用 }
   else {  return fn.apply(this , args); }
 };
}

function add(a, b, c) { return [a, b, c];}
var c = curryIt(add);
var c1 = c(1);
var c2 = c1(2);
var c3 = c2(3);
console.log(c3); //[1, 2, 3]

由此我们可以看出，currying 是一种“预加载”函数的方法，通过传递较少的参数，得到一个已经记住了这些参数的新函数，某种意义上讲，这是一种对参数的“缓存”，是一种非常高效的编写函数的方法！
add = (x, y) => x + y
add(2, 3) //=> 5

currying function
add = x => y => x + y
same code without arrow functions
add = function (x) {
  return function (y) {
    return x + y
  }
}
In other words add of some number returns a function

<h2>The reduce() method</h2>
The reduce() method reduces the array to a single value.
It executes a provided function for each value of the array (from left-to-right).
The return value of the function is stored in an accumulator (result/total).
arr.reduce(callback, initialValue);

Note: reduce() does not execute the function for array elements without values.
Note: this method does not change the original array.

Subtract the numbers in the array, starting from the left:

var numbers = [175, 50, 25];
function myFunc(total, num) { return total - num; }
numbers.reduce(myFunc); // 100

var numbers = [15.5, 2.3, 1.1, 4.7];
function getSum(total, num) { return total + Math.round(num); }
numbers.reduce(getSum, 0); // 24

The reducer function takes four arguments:
arr.reduce(callback( accumulator, currentValue[, index[, array]] )[, initialValue])

Accumulator (acc)
Current Value (cur)
Current Index (idx)
Source Array (src)

Samples
var data = [29.76, 41.85, 46.5]; 
var sum = data.reduce( (total, amount)=>{ return total + amount }); 
sum // 118.11

Find the Maximum Value
dates.reduce((max, d) => d > max ? d : max, dates[0]);

Suppose you have an array of async functions that you want to execute in series.
There is a non-standard promise.series function for this, but you can also do this with reduce().

const functions = [
  async function() { return 1; },
  async function() { return 2; },
  async function() { return 3; }
];

// Chain the function calls in order, starting with an empty promise.
// In the end, `res` is equivalent to
// `Promise.resolve().then(fn1).then(fn2).then(fn3)`
const res = await functions.
  reduce((promise, fn) => promise.then(fn), Promise.resolve());
res; // 3
Sum of values in an object array
let initialValue = 0
let sum = [{x: 1}, {x: 2}, {x: 3}].reduce(
    (accumulator, currentValue) => accumulator + currentValue.x
    , initialValue
)

console.log(sum) // logs 6
Flatten an array of arrays
let flattened = [[0, 1], [2, 3], [4, 5]].reduce(
  ( accumulator, currentValue ) => accumulator.concat(currentValue),
  []
)

Counting instances of values in an object
let names = ['Alice', 'Bob', 'Tiff', 'Bruce', 'Alice']

let countedNames = names.reduce(function (allNames, name) { 
  if (name in allNames) {
    allNames[name]++
  }
  else {
    allNames[name] = 1
  }
  return allNames
}, {})
// countedNames is:
// { 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 }
Grouping objects by a property
let people = [
  { name: 'Alice', age: 21 },
  { name: 'Max', age: 20 },
  { name: 'Jane', age: 20 }
];

function groupBy(objectArray, property) {
  return objectArray.reduce(function (acc, obj) {
    let key = obj[property]
    if (!acc[key]) {
      acc[key] = []
    }
    acc[key].push(obj)
    return acc
  }, {})
}

let groupedPeople = groupBy(people, 'age')
// groupedPeople is:
// { 
//   20: [
//     { name: 'Max', age: 20 }, 
//     { name: 'Jane', age: 20 }
//   ], 
//   21: [{ name: 'Alice', age: 21 }] 
// }
Bonding arrays contained in an array of objects using the spread operator and initialValue
// friends - an array of objects 
// where object field "books" is a list of favorite books 
let friends = [{
  name: 'Anna',
  books: ['Bible', 'Harry Potter'],
  age: 21
}, {
  name: 'Bob',
  books: ['War and peace', 'Romeo and Juliet'],
  age: 26
}, {
  name: 'Alice',
  books: ['The Lord of the Rings', 'The Shining'],
  age: 18
}]

// allbooks - list which will contain all friends' books +  
// additional list contained in initialValue
let allbooks = friends.reduce(function(accumulator, currentValue) {
  return [...accumulator, ...currentValue.books]
}, ['Alphabet'])

// allbooks = [
//   'Alphabet', 'Bible', 'Harry Potter', 'War and peace', 
//   'Romeo and Juliet', 'The Lord of the Rings',
//   'The Shining'
// ]
Remove duplicate items in an array
let myArray = ['a', 'b', 'a', 'b', 'c', 'e', 'e', 'c', 'd', 'd', 'd', 'd']
let myOrderedArray = myArray.reduce(function (accumulator, currentValue) {
  if (accumulator.indexOf(currentValue) === -1) {
    accumulator.push(currentValue)
  }
  return accumulator
}, [])

console.log(myOrderedArray)
Replace .filter().map() with .reduce()
Using Array.filter() then Array.map() traverses the array twice, but you can achieve the same effect while traversing only once with Array.reduce(), thereby being more efficient. 
(If you like for loops, you can filter and map while traversing once with Array.forEach()).

const numbers = [-5, 6, 2, 0,];

const doubledPositiveNumbers = numbers.reduce((accumulator, currentValue) => {
  if (currentValue > 0) {
    const doubled = currentValue * 2;
    accumulator.push(doubled);
  }
  return accumulator;
}, []);

console.log(doubledPositiveNumbers); // [12, 4]
Running Promises in Sequence
/**
 * Runs promises from array of functions that can return promises
 * in chained manner
 *
 * @param {array} arr - promise arr
 * @return {Object} promise object
 */
function runPromiseInSequence(arr, input) {
  return arr.reduce(
    (promiseChain, currentFunction) => promiseChain.then(currentFunction),
    Promise.resolve(input)
  )
}

// promise function 1
function p1(a) {
  return new Promise((resolve, reject) => {
    resolve(a * 5)
  })
}

// promise function 2
function p2(a) {
  return new Promise((resolve, reject) => {
    resolve(a * 2)
  })
}

// function 3  - will be wrapped in a resolved promise by .then()
function f3(a) {
 return a * 3
}

// promise function 4
function p4(a) {
  return new Promise((resolve, reject) => {
    resolve(a * 4)
  })
}

const promiseArr = [p1, p2, f3, p4]
runPromiseInSequence(promiseArr, 10)
  .then(console.log)   // 1200
Function composition enabling piping
// Building-blocks to use for composition
const double = x => x + x
const triple = x => 3 * x
const quadruple = x => 4 * x

// Function composition enabling pipe functionality
const pipe = (...functions) => input => functions.reduce(
    (acc, fn) => fn(acc),
    input
)

// Composed functions for multiplication of specific values
const multiply6 = pipe(double, triple)
const multiply9 = pipe(triple, triple)
const multiply16 = pipe(quadruple, quadruple)
const multiply24 = pipe(double, triple, quadruple)

// Usage
multiply6(6)   // 36
multiply9(9)   // 81
multiply16(16) // 256
multiply24(10) // 240

Write map using reduce
if (!Array.prototype.mapUsingReduce) {
  Array.prototype.mapUsingReduce = function(callback, thisArg) {
    return this.reduce(function(mappedArray, currentValue, index, array) {
      mappedArray[index] = callback.call(thisArg, currentValue, index, array)
      return mappedArray
    }, [])
  }
}

[1, 2, , 3].mapUsingReduce(
  (currentValue, index, array) => currentValue + index + array.length
) // [5, 7, , 10]
<h2>map() Method</h2>
The map() method calls the provided function once for each element in an array, in order.

Return an array with the square root of all the values in the original array:
var numbers = [4, 9, 16, 25];
numbers.map(Math.sqrt)

Multiply all the values in array with 10:
var numbers = [65, 44, 12, 4];
function myFunction(num) { return num * 10; }
numbers.map(myFunction)

Get the full name for each person in the array:
var persons = [
  {firstname : "Malcom", lastname: "Reynolds"},
  {firstname : "Kaylee", lastname: "Frye"},
  {firstname : "Jayne", lastname: "Cobb"}
];

function getFullName(item) {
  var fullname = [item.firstname, item.lastname].join(" ");
  return fullname;
}
persons.map(getFullName);

<h2>filter() Method</h2>
The filter() method creates an array
filled with all array elements that pass a test (provided as a function).

Note: filter() does not execute the function for array elements without values.
Note: filter() does not change the original array.

Return an array of all the values in the ages array that are 18 or over:
var ages = [32, 33, 16, 40];
function checkAdult(age) { return age >= 18; }
ages.filter(checkAdult);

Return an array of all the values in the ages over 20:
var ages = [32, 33, 12, 40];
function checkAdult(age) { return age >= 20; }
ages.filter(checkAdult);

<h2>forEach loop</h2>
var myArray = ['a', 'b', 'c', 'd', 'e'];
function currentLetter(letter) {
  console.log('The current letter is: ' + letter);
}

using For loop to call a function
for (var i = 0; i < myArray.length; i++) {
  currentLetter(myArray[i]);  
}

using forEach loop with a function
myArray.forEach(function(value) {
  console.log('The current letter is: ' + value;
});

using the high order function
myArray.forEach(currentLetter);

forEach is an Array method that we can use to execute a function on each element in an array.
It can only be used on Arrays, Maps, and Sets.
arr = ['cat', 'dog', 'fish'];
arr.forEach(element => { console.log(element); });
// cat
// dog
// fish

arr = [5,4,8,7];
arr.forEach(function(item,index,arr) {
  console.log("item: " + item + " at index: " + index + " in the array: " + arr);
})

<h2>Detect Screen Resolution</h2>
Use the window.screen Object: screen.width, screen.height

detect the native resolution of a mobile device display (e.g. 
retina display):
multiply the screen width and height with the device pixel ratio:
window.screen.width * window.devicePixelRatio
window.screen.height * window.devicePixelRatio
<code>
function getResolution() {
    alert("Your screen resolution is: " + screen.width + "x" + screen.height + " retina display " + Math.round(window.screen.width * window.devicePixelRatio) + " " + Math.round(window.screen.height * window.devicePixelRatio));
}
getResolution();
</code>
should leverage the manufacturer's hint via the
&lt;meta name="viewport" content="width=device-width"/> or 
@-ms-viewport {width:device-width} feature.

After that, call window.innerWidth

Avoid relying on window.devicePixelRatio for anything.
Its meaning and the value it returns is currently in a state of flux and anything you make right now based around it will most likely break very soon.

Note: Meta viewport only works on Android, iOS, and Windows Phone 8. 
@-ms-viewport only works (properly) on IE10 Metro and can interfere with proper Meta viewport behavior on Windows Phone 8.

<h2>Useful JavaScript Tips, Tricks and Best Practices</h2>
<strong>1 - Don’t forget <code>var</code> keyword when assigning a variable’s value for the first time.</strong>

Assignment to an undeclared variable automatically results in a global variable being created. 

Avoid global variables.

<strong>2 - use <code>===</code> instead of <code>==</code></strong>

The <code>==</code> (or <code>!=</code>) operator performs an automatic type conversion if needed. 

The <code>===</code> (or <code>!==</code>) operator will not perform any conversion. 

It compares the value and the type, which could be considered faster than <code>==</code>.

<code>[10] === 10    // is false
[10]  == 10    // is true
'10' == 10     // is true
'10' === 10    // is false
 []   == 0     // is true
 [] ===  0     // is false
 '' == false   // is true but true == "a" is false
 '' ===   false // is false </code>

<strong>3 - <code>undefined</code>, <code>null</code>, 0, <code>false</code>, <code>NaN</code>, <code>''</code> (empty string) are all falsy.</strong><br />
<strong>4 - Use Semicolons for line termination</strong>

The use of semi-colons for line termination is a good practice. 

You won't be warned if you forget it, because in most cases it will be inserted by the JavaScript parser. 

For more details about why you should use semi-colons, take a look to this artice: <a href="https://davidwalsh.name/javascript-semicolons">http://davidwalsh.name/javascript-semicolons</a>.

<strong>5 - Create an object constructor</strong>

<code>function Person(firstName, lastName){
    this.firstName =  firstName;
    this.lastName = lastName;        
}  

var Saad = new Person("Saad", "Mousliki");</code>

<strong>6 - Be careful when using <code>typeof</code>, <code>instanceof</code> and <code>constructor</code>.</strong>
<em>typeof</em> : a JavaScript unary operator used to  return a string that represents the primitive type of a variable,  don't forget that <code>typeof null</code> will return "object", and for the majority of object types (Array, Date, and others) will return also "object".
<em>constructor</em> : is a property of the internal prototype property, which could be overridden by code.
<em>instanceof</em> : is another JavaScript operator that check in all the prototypes chain the constructor it returns true if it's found and false if not.

<code>var arr = ["a", "b", "c"];
typeof arr;   // return "object" 
arr  instanceof Array // true
arr.constructor();  //[]
</code>

<strong>7 - Create a Self-calling Function</strong>

This is often called a Self-Invoked Anonymous Function or Immediately Invoked Function Expression (IIFE). 

It is a function that executes automatically when you create it, and has the following form:

<code>(function(){
    // some private code that will be executed automatically
})();  
(function(a,b){
    var result = a+b;
    return result;
})(10,20)</code>

<strong>8 - Get a random item from an array</strong>

<code>var items = [12, 548 , 'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' , 2145 , 119];

var  randomItem = items[Math.floor(Math.random() * items.length)];</code>

<strong>9 - Get a random number in a specific range</strong>

This code snippet can be useful when trying to generate fake data for testing purposes, such as a salary between min and max.

<code>var x = Math.floor(Math.random() * (max - min + 1)) + min;</code>

<strong>10 - Generate an array of numbers with numbers from 0 to max</strong>

<code>var numbersArray = [] , max = 100;

for( var i=1; numbersArray.push(i++) &lt; max;);  // numbers = [1,2,3 ... 

100] </code>

<strong>11 - Generate a random set of alphanumeric characters</strong>

<code>function generateRandomAlphaNum(len) {
    var rdmString = "";
    for( ; rdmString.length &lt; len; rdmString  += Math.random().toString(36).substr(2));
    return  rdmString.substr(0, len);

}
</code>

<strong>12 - Shuffle an array of numbers</strong>

<code>var numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411];
numbers = numbers.sort(function(){ return Math.random() - 0.5});
/* the array numbers will be equal for example to [120, 5, 228, -215, 400, 458, -85411, 122205]  */</code>

A better option could be to implement a random sort order by code (e.g. 

: Fisher-Yates shuffle), than using the native sort JavaScript function. 

For more details take a look to <a href="https://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962890">this discussion</a>.

<strong>13 - A string trim function</strong>

The classic trim function of Java, C#, PHP and many other language that remove whitespace from a string doesn’t exist in JavaScript, so we could add it to the <code>String</code> object.

<code>String.prototype.trim = function(){return this.replace(/^s+|s+$/g, "");};  </code>

A native implementation of the trim() function is available in the recent JavaScript engines.

<strong>14 - Append an array to another array</strong>

<code>var array1 = [12 , "foo" , {name "Joe"} , -2458];

var array2 = ["Doe" , 555 , 100];
Array.prototype.push.apply(array1, array2);
/* array1 will be equal to  [12 , "foo" , {name "Joe"} , -2458 , "Doe" , 555 , 100] */</code>

<strong>15 - Transform the <code>arguments</code> object into an array</strong>

<code>var argArray = Array.prototype.slice.call(arguments);</code>

<strong>16 - Verify that a given argument is a number</strong>

<code>function isNumber(n){
    return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n);
}</code>

<strong>17 - Verify that a given argument is an array</strong>

<code>function isArray(obj){
    return Object.prototype.toString.call(obj) === '[object Array]' ;
}</code>

Note that if the toString() method is overridden, you will not get the expected result using this trick.

Or use&#8230;

<code>Array.isArray(obj); // its a new Array method</code>

You could also use <code>instanceof</code> if you are not working with multiple frames. 

However, if you have many contexts, you will get a wrong result.

<code>var myFrame = document.createElement('iframe');
document.body.appendChild(myFrame);

var myArray = window.frames[window.frames.length-1].Array;
var arr = new myArray(a,b,10); // [a,b,10]  

// instanceof will not work correctly, myArray loses his constructor 
// constructor is not shared between frames
arr instanceof Array; // false</code>

<strong>18 - Get the max or the min in an array of numbers</strong>

<code>var  numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411]; 
var maxInNumbers = Math.max.apply(Math, numbers); 
var minInNumbers = Math.min.apply(Math, numbers);</code>

<strong>19 - Empty an array</strong>

<code>var myArray = [12 , 222 , 1000 ];  
myArray.length = 0; // myArray will be equal to [].</code>

<strong>20 - Don’t use delete to remove an item from array</strong>

Use <code>splice</code> instead of using <code>delete</code> to delete an item from an array. 

Using <code>delete</code> replaces the item with <code>undefined</code> instead of the removing it from the array.

Instead of&#8230;

<code>var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; 
items.length; // return 11 
delete items[3]; // return true 
items.length; // return 11 
/* items will be equal to [12, 548, "a", undefined × 1, 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */</code>

Use&#8230;

<code>var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; 
items.length; // return 11 
items.splice(3,1) ; 
items.length; // return 10 
/* items will be equal to [12, 548, "a", 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */</code>

The delete method should be used to delete an object property.

<strong>21 - Truncate an array using length</strong>

Like the previous example of emptying an array, we truncate it using the <code>length</code> property.

<code>var myArray = [12 , 222 , 1000 , 124 , 98 , 10 ];  
myArray.length = 4; // myArray will be equal to [12 , 222 , 1000 , 124].</code>

As a bonus, if you set the array length to a higher value, the length will be changed and new items will be added with <code>undefined</code> as a value. 

The array length is not a read only property.

<code>myArray.length = 10; // the new array length is 10 
myArray[myArray.length - 1] ; // undefined</code>

<strong>22 - Use logical AND/ OR for conditions</strong>

<code>var foo = 10;  
foo == 10 &amp;&amp; doSomething(); // is the same thing as if (foo == 10) doSomething(); 
foo == 5 || doSomething(); // is the same thing as if (foo != 5) doSomething();</code>

The logical OR could also be used to set a default value for function argument.

<code>function doSomething(arg1){ 
    arg1 = arg1 || 10; // arg1 will have 10 as a default value if it’s not already set
}</code>

<strong>23 - Use the map() function method to loop through an array's items</strong>

<code>var squares = [1,2,3,4].map(function (val) {  
    return val * val;  
}); 
// squares will be equal to [1, 4, 9, 16] </code>

<strong>24 - Rounding number to N decimal place</strong>

<code>var num =2.443242342;
num = num.toFixed(4);  // num will be equal to 2.4432</code>

NOTE : the <code>toFixed()</code> function returns a string and not a number.

<strong>25 - Floating point problems</strong>

<code>0.1 + 0.2 === 0.3 // is false 
9007199254740992 + 1 // is equal to 9007199254740992  
9007199254740992 + 2 // is equal to 9007199254740994</code>

Why does this happen? 0.1 +0.2 is equal to 0.30000000000000004. 

What you need to know is that all JavaScript numbers are floating points represented internally in 64 bit binary according to the IEEE 754 standard. 

For more explanation, take a look to <a href="https://2ality.com/2012/04/number-encoding.html">this blog post</a>.

You can use <code>toFixed()</code> and <code>toPrecision()</code> to resolve this problem.

<strong>26 - Check the properties of an object when using a for-in loop</strong>

This code snippet could be useful in order to avoid iterating through the properties from the object’s prototype.

<code>for (var name in object) {  
    if (object.hasOwnProperty(name)) { 
        // do something with name                    
    }  
}</code>

<strong>27 - Comma operator</strong>

<code>var a = 0; 
var b = ( a++, 99 ); 
console.log(a);  // a will be equal to 1 
console.log(b);  // b is equal to 99</code>

<strong>28 - Cache variables that need calculation or querying</strong>

In the case of a jQuery selector, we could cache the DOM element.

<code>var navright = document.querySelector('#right'); 
var navleft = document.querySelector('#left'); 
var navup = document.querySelector('#up'); 
var navdown = document.querySelector('#down');</code>

<strong>29 - Verify the argument before passing it to <code>isFinite()</code></strong>

<code>isFinite(0/0) ; // false 
isFinite("foo"); // false 
isFinite("10"); // true 
isFinite(10);   // true 
isFinite(undefined);  // false 
isFinite();   // false 
isFinite(null);  // true  !!! </code>

<strong>30 - Avoid negative indexes in arrays</strong>

<code>var numbersArray = [1,2,3,4,5]; 
var from = numbersArray.indexOf("foo") ;  // from is equal to -1 
numbersArray.splice(from,2);    // will return [5]</code>

Make sure that the arguments passed to <code>splice</code> are not negative.

<strong>31 - Serialization and deserialization (working with JSON)</strong>

<code>var person = {name :'Saad', age : 26, department : {ID : 15, name : "R&amp;D"} }; 
var stringFromPerson = JSON.stringify(person); 
/* stringFromPerson is equal to "{"name":"Saad","age":26,"department":{"ID":15,"name":"R&amp;D"}}"   */ 
var personFromString = JSON.parse(stringFromPerson);  
/* personFromString is equal to person object  */</code>

<strong>32 - Avoid the use of <code>eval()</code> or the <code>Function</code> constructor</strong>

Use of <code>eval</code> or the <code>Function</code> constructor are expensive operations as each time they are called script engine must convert source code to executable code.

<code>var func1 = new Function(functionCode);
var func2 = eval(functionCode);</code>

<strong>33 - Avoid using <code>with()</code> (The good part)</strong>

Using <code>with()</code> inserts a variable at the global scope. 

Thus, if another variable has the same name it could cause confusion and overwrite the value.

<strong>34 - Avoid using for-in loop for arrays</strong>

Instead of using&#8230;

<code>var sum = 0;  
for (var i in arrayNumbers) {  
    sum += arrayNumbers[i];  
}</code>

&#8230;it’s better to use&#8230;

<code>var sum = 0;  
for (var i = 0, len = arrayNumbers.length; i &lt; len; i++) {  
    sum += arrayNumbers[i];  
}</code>

As a bonus, the instantiation of <code>i</code> and <code>len</code> is executed once because it’s in the first statement of the for loop. 

Thsi is faster than using&#8230;

<code>for (var i = 0; i &lt; arrayNumbers.length; i++)</code>

Why? The length of the array <code>arrayNumbers</code> is recalculated every time the loop iterates.

NOTE : the issue of recalculating the length in each iteration was fixed in the latest JavaScript engines.

<strong>35 - Pass functions, not strings, to <code>setTimeout()</code> and <code>setInterval()</code></strong>

If you pass a string into <code>setTimeout()</code> or <code>setInterval()</code>, the string will be evaluated the same way as with <code>eval</code>, which is slow. 

Instead of using&#8230;

<code>setInterval('doSomethingPeriodically()', 1000);  
setTimeout('doSomethingAfterFiveSeconds()', 5000);</code>

&#8230;use&#8230;

<code>setInterval(doSomethingPeriodically, 1000);  
setTimeout(doSomethingAfterFiveSeconds, 5000);</code>

<strong>36 - Use a switch/case statement instead of a series of if/else</strong>

Using switch/case is faster when there are more than 2 cases, and it is more elegant (better organized code). 

Avoid using it when you have more than 10 cases.

<strong>37 - Use switch/case statement with numeric ranges</strong>

Using a switch/case statement with numeric ranges is possible with this trick.

<code>function getCategory(age) {  
    var category = "";  
    switch (true) {  
        case isNaN(age):  
            category = "not an age";  
            break;  
        case (age &gt;= 50):  
            category = "Old";  
            break;  
        case (age &lt;= 20):  
            category = "Baby";  
            break;  
        default:  
            category = "Young";  
            break;  
    };  
    return category;  
}  
getCategory(5);  // will return "Baby"</code>

<strong>38 - Create an object whose prototype is a given object</strong>

It’s possible to write a function that creates an object whose prototype is the given argument like this&#8230;

<code>function clone(object) {  
    function OneShotConstructor(){}; 
    OneShotConstructor.prototype= object;  
    return new OneShotConstructor(); 
} 
clone(Array).prototype ;  // []</code>

<strong>39 - An HTML escaper function</strong>

<code>function escapeHTML(text) {  
    var replacements= {"&lt;": "&amp;lt;", "&gt;": "&amp;gt;","&amp;": "&amp;amp;", """: "&amp;quot;"};                      
    return text.replace(/[&lt;&gt;&amp;"]/g, function(character) {  
        return replacements[character];  
    }); 
}</code>

<strong>40 - Avoid using try-catch-finally inside a loop</strong>

The try-catch-finally construct creates a new variable in the current scope at runtime each time the catch clause is executed where the caught exception object is assigned to a variable.

Instead of using&#8230;

<code>var object = ['foo', 'bar'], i;  
for (i = 0, len = object.length; i &lt;len; i++) {  
    try {  
        // do something that throws an exception 
    }  
    catch (e) {   
        // handle exception  
    } 
}</code>

&#8230;use&#8230;

<code>var object = ['foo', 'bar'], i;  
try { 
    for (i = 0, len = object.length; i &lt;len; i++) {  
        // do something that throws an exception 
    } 
} 
catch (e) {   
    // handle exception  
} </code>

<strong>41 - Set timeouts to <code>XMLHttpRequests</code></strong>

You could abort the connection if an XHR takes a long time (for example, due to a network issue), by using <code>setTimeout()</code> with the XHR call.

<code>var xhr = new XMLHttpRequest (); 
xhr.onreadystatechange = function () {  
    if (this.readyState == 4) {  
        clearTimeout(timeout);  
        // do something with response data 
    }  
}  
var timeout = setTimeout( function () {  
    xhr.abort(); // call error callback  
}, 60*1000 /* timeout after a minute */ ); 
xhr.open('GET', url, true);  

xhr.send();</code>

As a bonus, you should generally avoid synchronous XHR calls completely.

<strong>42 - Deal with WebSocket timeout</strong>

Generally when a WebSocket connection is established, a server could time out your connection after 30 seconds of inactivity. 

The firewall could also time out the connection after a period of inactivity.

To deal with the timeout issue you could send an empty message to the server periodically. 

To do this, add these two functions to your code: one to keep alive the connection and the other one to cancel the keep alive. 

Using this trick, you’ll control the timeout.

Add a <code>timerID</code>&#8230;

<code>var timerID = 0; 
function keepAlive() { 
    var timeout = 15000;  
    if (webSocket.readyState == webSocket.OPEN) {  
        webSocket.send('');  
    }  
    timerId = setTimeout(keepAlive, timeout);  
}  
function cancelKeepAlive() {  
    if (timerId) {  
        cancelTimeout(timerId);  
    }  
}</code>

The <code>keepAlive()</code> function should be added at the end of the <code>onOpen()</code> method of the webSocket connection and the <code>cancelKeepAlive()</code> at the end of the <code>onClose()</code> method.

<strong>43 - Keep in mind that <a href="https://dev.opera.com/articles/efficient-javascript/?page=2">primitive operations can be faster than function calls</a>. 

Use <a href="http://vanilla-js.com/">VanillaJS</a>.</strong>

For example, instead of using&#8230;

<code>var min = Math.min(a,b); 
A.push(v);</code>

&#8230;use&#8230;

<code>var min = a &lt; b ? a : b; 
A[A.length] = v;</code>

<strong>44 - Don’t forget to use a code beautifier when coding. 

Use JSLint and minification (JSMin, for example) before going live.</strong>

<strong>45 - JavaScript is awesome: Best Resources To Learn JavaScript</strong>
Code Academy JavaScript tracks: http://www.codecademy.com/tracks/javascript
Eloquent JavaScript by Marjin Haverbeke: <a href="https://eloquentjavascript.net/">http://eloquentjavascript.net/</a>
Advanced JavaScript by John Resig: <a href="https://johnresig.com/apps/learn/">http://ejohn.org/apps/learn/</a>

<h2>make a beep</h2>
var audioCtx = new (window.AudioContext || window.webkitAudioContext || window.audioContext);

//All arguments are optional:
//duration of the tone in milliseconds. 
Default is 500
//frequency of the tone in hertz. 
default is 440
//volume of the tone. 
Default is 1, off is 0.
//type of tone. 
sine, square, sawtooth, triangle, and custom. 
Default sine.
//callback to use on end of tone

function beep(duration, frequency, volume, type, callback) {
    var oscillator = audioCtx.createOscillator();
    var gainNode = audioCtx.createGain();

    oscillator.connect(gainNode);
    gainNode.connect(audioCtx.destination);

    if (volume){gainNode.gain.value = volume;}
    if (frequency){oscillator.frequency.value = frequency;}
    if (type){oscillator.type = type;}
    if (callback){oscillator.onended = callback;}

    oscillator.start(audioCtx.currentTime);
    oscillator.stop(audioCtx.currentTime + ((duration || 500) / 1000));
};

<h2>Generate Sounds Programmatically</h2>
https://marcgg.com/blog/2016/11/01/javascript-audio/

Produce a Simple Beep
First let’s create a very basic beep using a <a href="https://en.wikipedia.org/wiki/Sine_wave">sinusoid</a>. 

We’ll initiate an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioContext">audio context</a>, which is the central object for generating sound. 

Then we’ll create an <a href="https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode">oscillator</a> producing the sine wave. 

Finally we connect the oscillator to the context and start.

<code>var context = new AudioContext()
var o = context.createOscillator()
o.type = "sine"
o.connect(context.destination)
o.start()</code>

You’ll notice that the sound produced here is not great. 

It seems like you let a phone off the hook and when you stop it, you hear a “click” and it’s not pleasant at all. 

This is because the human hear reacts this way as explained in this <a href="https://alemangui.github.io/blog//2015/12/26/ramp-to-value.html">great article</a>. 

Basically when you stop the sound anywhere else than the zero crossing point, you’ll hear this clicking sound.
<img class="lazy" data-src="https://marcgg.com/assets/blog/audio_click.jpg" alt="Clicking noise on a sine curve" style="padding: 20px; width: 600px;" />
<h3>Getting Rid Of The Clicking Sound</h3>
The best solution to get rid of this click is to ramp the sine wave down with an exponentional function, using <code>AudioParam.exponentialRampToValueAtTime()</code> as <a href="https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/exponentialRampToValueAtTime">documented here</a>.

This time we need to add a <a href="https://developer.mozilla.org/en-US/docs/Web/API/GainNode">gain node</a> to our oscillator. 

A gain node allows us to change the volume of a signal as explained in this schema from the documentation:
<img class="lazy" data-src="https://marcgg.com/assets/blog/gain.jpg" alt="Gain node" style="padding: 20px; width: 600px;" />

The code to start the sound now looks like this:

<code>var context = new AudioContext()
var o = context.createOscillator()
var  g = context.createGain()
o.connect(g)
g.connect(context.destination)
o.start(0)</code>
In order to stop the sound we change the gain value, effectively reducing the volume. 

Note that we don’t ramp down to 0 since there is a limitation in this function where the value has to be positive.

<code>g.gain.exponentialRampToValueAtTime(
 0.00001, context.currentTime + 0.04
)</code>
As you can hear, the clicking sound is gone! But that’s not the only interesting thing that you can do with this exponential ramp down.
<h3>Set A Ringing Effect</h3>
In the example above, we decided to stop the sound really quickly, in <code>0.04</code> seconds. 

But what happens when we change this <code>X</code> value?

<code>g.gain.exponentialRampToValueAtTime(0.00001, context.currentTime + X)</code>
<h3>Hitting Notes</h3>
Giving more time to the sound to fade out gives it a totally different feel. 

It gets more visible when we start and stop the signal right away:

Start and stop quickly</a> Start and stop slowly</a>

The first one sounds like a ticking noise when the other sounds like an actual note played on an instrument.
<h3>Various Oscilators</h3>
So far we’ve been using a sine wave for our main signal, but we have other options:
<img class="lazy" data-src="https://marcgg.com/assets/blog/signals.png" alt="Types of oscilators" style="padding: 20px; width: 400px;" />

It’s enven more interesting when we start playing around with the type of oscilators by setting <code>o.type = type</code>.

Sine</a> Square</a> Triangle</a> Sawtooth</a>
<h3>Playing Actual Notes</h3>
With the previous code, it becomes fairly simple to have a nice sounding note, but what exactly were we playing? That’s when you have to take frequency into account. 

For instance, the one people know is that A4 is 440Hz, but there are others.
<h3>Note Frequencies in Hz</h3>
With this table, you can easily create a mapping in your code to play any given note using its . 

For the hackathon I used a simple hash mapping that is available in this <a href="https://gist.github.com/marcgg/94e97def0e8694f906443ed5262e9cbb">gist</a>.
<table> <tr> <td></td><th>C</th><th>C#</th><th>D</th><th>Eb</th><th>E</th><th>F</th><th>F#</th><th>G</th><th>G#</th><th>A</th><th>Bb</th><th>B</th> </tr> <tr> <th>0</th><td>16.35</td><td>17.32</td><td>18.35</td><td>19.45</td><td>20.60</td><td>21.83</td><td>23.12</td><td>24.50</td><td>25.96</td><td>27.50</td><td>29.14</td><td>30.87</td> </tr> <tr> <th>1</th><td>32.70</td><td>34.65</td><td>36.71</td><td>38.89</td><td>41.20</td><td>43.65</td><td>46.25</td><td>49.00</td><td>51.91</td><td>55.00</td><td>58.27</td><td>61.74</td> </tr> <tr> <th>2</th><td>65.41</td><td>69.30</td><td>73.42</td><td>77.78</td><td>82.41</td><td>87.31</td><td>92.50</td><td>98.00</td><td>103.8</td><td>110.0</td><td>116.5</td><td>123.5</td> </tr> <tr> <th>3</th><td>130.8</td><td>138.6</td><td>146.8</td><td>155.6</td><td>164.8</td><td>174.6</td><td>185.0</td><td>196.0</td><td>207.7</td><td>220.0</td><td>233.1</td><td>246.9</td> </tr> <tr> <th>4</th><td>261.6</td><td>277.2</td><td>293.7</td><td>311.1</td><td>329.6</td><td>349.2</td><td>370.0</td><td>392.0</td><td>415.3</td><td>440.0</td><td>466.2</td><td>493.9</td> </tr> <tr> <th>5</th><td>523.3</td><td>554.4</td><td>587.3</td><td>622.3</td><td>659.3</td><td>698.5</td><td>740.0</td><td>784.0</td><td>830.6</td><td>880.0</td><td>932.3</td><td>987.8</td> </tr> <tr> <th>6</th><td>1047</td><td>1109</td><td>1175</td><td>1245</td><td>1319</td><td>1397</td><td>1480</td><td>1568</td><td>1661</td><td>1760</td><td>1865</td><td>1976</td> </tr> <tr> <th>7</th><td>2093</td><td>2217</td><td>2349</td><td>2489</td><td>2637</td><td>2794</td><td>2960</td><td>3136</td><td>3322</td><td>3520</td><td>3729</td><td>3951</td> </tr> <tr> <th>8</th><td>4186</td><td>4435</td><td>4699</td><td>4978</td><td>5274</td><td>5588</td><td>5920</td><td>6272</td><td>6645</td><td>7040</td><td>7459</td><td>7902</td> </tr> </table>
To implement this, we just need to add a frequency to our oscilator:

<code>var frequency = 440.0
o.frequency.value = frequency</code>

If we change with the value of <code>frequency</code>, we can play any note. 

For instance:

261.6Hz (C4)  440Hz (A4)  830.6Hz (G#5)

Mix this with the ramp down timings and different signals, and you start to be able to create more interesting sounds.

174.6Hz (F3) - Square  1109Hz (C#6) - Sawtooth  87.31 Hz (F2) - Triangle 
 
Since you scrolled this far, you might be interested in some other things I wrote:
<a href="/blog/2016/11/21/chiptune-sequencer-multiplayer/">Building A Multiplayer 8 Bits Sequencer</a>
<a href="/blog/2016/03/14/github-pages-jekyll/">Trailing Slashes, Github Pages, Jekyll 3 & 404s</a>
<a href="/blog/2016/03/01/vimrc-example/">Vim Configuration From Scratch in 2016</a>
<a href="/blog/2015/01/05/css-animations-failing-capybara-specs/">How CSS Animations Can Break Your Tests</a>
<a href="/blog/2014/07/22/in-defense-of-legacy-code/">Some Respect For Legacy Code</a>
<a href="/blog/2014/04/28/frame-based-layout-bad-code/">Tips on Creating a Website From When I Was 12</a>
<a href="/blog/2013/11/05/enough-with-the-language-trolls/">Enough With The Trolls</a>
<a href="/blog/2013/03/25/please-changelog-open-source/">Please Keep a Changelog For Your Open Source Lib</a>
<a href="/blog/2012/09/04/one-reason-to-switch-to-vim-editor/">The One Thing That Made Me Switch To Vim</a>
<a href="/books/">Startup & Tech Book Reviews</a>

<h2>Making Music in the Browser</h2>
<a href="https://www.javascriptjanuary.com/blog/making-music-in-the-browser" class="whitebut ">Making Music in the Browser</a>

You'll find a global constructor <code>AudioContext</code> (<code>webkitAudioContext</code> in Chrome 34/35) that unlocks this functionality.
<h3>Oscillators</h3>
One of the main components of this API is the oscillator. 

If you've used a synthesizer before, you're likely already familiar with this concept. 

An oscillator produces a sound wave at a set frequency and pattern. 

This creates notes with different qualities and textures. 

Many oscillators, including the ones in the Web Audio API, support 4 different waveforms out of the box: sine, triangle, square, and sawtooth. 

Each has a unique quality that gives synthesizers their distinctive sound.

Let's set up an oscillator. 

We'll set the frequency to 440 and use a sine wave:

    const context = new AudioContext()
    const oscillator = context.createOscillator()

    oscillator.frequency.value = 440
    oscillator.type = 'sine'

This won't do much without an audio source to output sound to, of course. 

We can connect the oscillator to our computer's default audio output pretty simply:

    oscillator.connect(context.destination)

We can start and stop our oscillator using <code>oscillator.start()</code> and <code>oscillator.stop()</code>. 

Not so fast, though! The browser won't allow us to call these methods unless they're triggered by some user interaction first. 

This is meant to prevent any random website from making noises without users' permission. 

We'll add a button to the page and trigger our oscillator to play for a second.

    document.querySelector('button').addEventListener('click', () =&gt; {
      oscillator.start(context.currentTime)
      setTimeout(() =&gt; oscillator.stop(context.currentTime), 1000)
    })

Clicking the button should produce a tone from your speakers for about a second. 

If you click the button a second time, though, you won't hear anything. 

Why not? You should see an error in your console saying that <code>start</code> can't be called more than once on an oscillator.

Ok, so now we have to deal with the fact that we can't <code>start</code> an oscillator multiple times. 

One way to handle this is to create a new oscillator every time we click the button. 

So, let's move that code into our event handler.

    const context = new AudioContext()
    
    document.querySelector('button').addEventListener('click', () =&gt; {
      const oscillator = context.createOscillator()
    
      oscillator.frequency.value = 440
      oscillator.type = 'sine'
      oscillator.connect(context.destination)
    
      oscillator.start(context.currentTime)
      setTimeout(() =&gt; oscillator.stop(context.currentTime), 500)
    })

<h3>Envelopes (Gain)</h3>
Great! Now our button plays a tone every time we click it. 

But it sounds a bit... 

robotic. 

Real instruments don't cut off their sound immediately; instead, they have a natural decrease in volume over time. 

This is called decay. 

So, how can we implement decay here? We need to control the volume! In audio synthesis, this is referred to as an envelope. 

Let's create a volume envelope for our oscillator.

    const context = new AudioContext()
    
    document.querySelector('button').addEventListener('click', () =&gt; {
      const oscillator = context.createOscillator()
      const envelope = context.createGain()
      const decayRate = 1.5 // seconds
    
      oscillator.frequency.value = 440
      oscillator.type = 'sine'
      envelope.gain.value = 1
    
      oscillator.connect(envelope)
      envelope.connect(context.destination)
    
      oscillator.start(context.currentTime)
      envelope.gain.exponentialRampToValueAtTime(0.001, context.currentTime + decayRate)
      setTimeout(() =&gt; oscillator.stop(context.currentTime), decayRate * 1000)
    })

You'll notice that we've made a change to some of our existing code here. 

Before, we connected the oscillator directly to the audio source. 

Now, we first connect it to the envelope, and then connect the envelope to the audio source. 

We've also added a call to <code>exponentialRampToValueAtTime</code> on the envelope's gain node. 

This method progressively adjusts the gain to a given value over time. 

The time it expects is a precise moment, in seconds, which we use the <code>currentTime</code> of our <code>AudioContext</code> instance to calculate.
<h3>Musicality</h3>
Now we've got something that sounds a bit more like an instrument than just a beeping noise. 

So, how do we get from here to something we can play like an instrument? First, we'll need a broader range of notes. 

Our button is currently playing at the frequency 440, which corresponds to the note A in the fourth octave. 

If you're familiar with piano music, this is the A above middle C.

Mapping note names to frequencies is a bit tedious, so let's pull in a library to solve this problem for us. 

I recommend . 

This library has a few different handy features, but importantly for us, it has a module that can translate notes in a range of octaves to their corresponding frequencies. 

You can use it like this:

    import {Note} from 'octavian'
    
    const {frequency} = new Note('A4')
    console.log(frequency) // =&gt; 440

<h3>Making It Playable</h3>
The next step is to bind a few keyboard keys to play different notes. 

We'll pull the contents of our previous click handler function into a new function, <code>playNote</code>, that takes a <code>frequency</code> argument. 

We'll use that argument to set the oscillator's frequency instead of hard-coding it to 440:

    function playNote(frequency) {
      /* ... 

*/
      oscillator.frequency.value = frequency
      /* ... 

*/
    }

Next, we'll set up a keypress event on the <code>document</code> to play a range of notes with this function depending on which key is pressed. 

For simplicity, let's map the home row to the octave of middle C (C4):

    const notes = {
      a: 'C4',
      s: 'D4',
      d: 'E4',
      f: 'F4',
      g: 'G4',
      h: 'A4',
      j: 'B4',
      k: 'C5'
    }
    
    document.addEventListener('keypress', ({key}) =&gt; {
      const note = notes[key]
      const {frequency} = new Note(note)
      playNote(frequency)
    })

Et voilà: a playable toy keyboard, right here in the browser!
<h3>Conclusion</h3>
This is a simplified example of what's possible with the Web Audio API, but there's a lot I didn't cover here. 

This API gives us all the tools we need to build a fully functional synthesizer in JavaScript. 

It supports filters, noise generation, and even custom waveform creation. 

I highly recommend looking at MDN's article on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">using the Web Audio API</a> as a source for more information.

With this API being JavaScript, it opens us up to a lot of potential for creativity. 

What would it be like to combine Web Audio with websockets? What about adding a little randomization to your sounds? The possibilities are endless. 

I look forward to seeing what you create!

<h2>Understanding <code>typeof</code>, <code>instanceof</code> and <code>constructor</code> in JavaScript</h2>

Some types in JavaScript are so-called &#8220;primitive types&#8221;, and they don't act like objects. 

These types are:

Undefined
Null
Boolean
Number
String

The confusion comes from the fact that the boolean, number and string types can be treated like objects in a limited way. 

For example, the expression <code>"I'm no object".length</code> returns the value <code>13</code>. 

This happens because when you attempt to access properties or methods on a primitive value, JavaScript instantiates a wrapper object temporarily, just so you can access its methods. 

&#8216;Cause JavaScript's nice like that. 

I'm not going to go into more details here, but Angus Croll wrote about <a href="http://javascriptweblog.wordpress.com/2010/09/27/the-secret-life-of-javascript-primitives/">The Secret Life of JavaScript Primitives</a>, so that would be a good place to learn more.

<h3><code>typeof</code></h3>

<code>typeof</code> is a unary operator, just like the <code>!</code> operator. 

It returns a string representing the type of its operand. 

Here are some examples:

<code>typeof 3; // returns "number"
typeof 'blah'; //returns "string"
typeof {}; //returns "object"
typeof []; //returns "object"
typeof function () {}; //returns "function"</code>

<code>typeof</code> has its idiosyncrasies. 

For example, <code>typeof null</code> returns <code>"object"</code>, and <code>typeof /[a-z]/</code> returns <code>"function"</code>. 

Again, Angus Croll has <a href="http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/">written more on this subject</a> than I have space for here.

So, basically <code>typeof</code> is used for telling apart the different primitive types (as long as you don't care about <code>null</code>). 

It's no use for telling different types of object apart though &#8211; for most objects <code>typeof</code> will return <code>"object"</code>.

<h3><code>constructor</code></h3>

<code>constructor</code> is a property available on all objects' prototypes, and it is a reference to the constructor function used to create the object. 

So, <code>({}).constructor</code> returns the <code>Object</code> constructor function (the parentheses are needed to clarify a syntactic ambiguity) and <code>[].constructor</code> returns the <code>Array</code> constructor function. 

Likewise, it will return your custom constructor function:

<code>function Person(name) {
  this.name = name;
}

var dave = new Person('Dave');
dave.constructor === Person; //true</code>

Remember that unlike the <code>typeof</code> operator, <code>constructor</code> returns a reference to the actual function. 

Another gotcha: because <code>constructor</code> is part of the prototype, if you reassign the prototype to a constructor function, e.g. 

<code>Person.prototype = {};</code>, you'll lose the <code>constructor</code> property.

<h3><code>instanceof</code></h3>

<code>instanceof</code> is a binary operator &#8211; its syntax is <code>instance instanceof Constructor</code>. 

So, to continue the above example:

<code>dave instanceof Person; //true</code>

The difference between <code>instanceof</code> and the <code>constructor</code> property (apart from the obvious syntactic difference) is that <code>instanceof</code> inspects the object's prototype chain. 

So, going back to our friend <code>dave</code> again:

<code>dave instanceof Object; //true</code>

This is because <code>Person.prototype</code> is an object, so <code>Object</code> is in <code>dave</code>&#8216;s prototype chain, therefore <code>dave</code> is an instance of <code>Object</code>.

<h3>Wrap-up</h3>
So, if you're dealing with primitive objects, use <code>typeof</code> to distinguish them. 

Because <code>typeof</code> returns <code>"function"</code> for functions, it can also be useful for checking if an object member or a function argument is a function. 

If you're working out the constructor of an object, use its <code>constructor</code> property. 

And if you're dealing with lengthy inheritance chains, and you want to find out whether an object inherits from a certain constructor, use <code>instanceof</code>.

<h2>window.onload vs document.onload</h2>
window.onload
By default, it is fired when the entire page loads, including its content (images, CSS, scripts, etc.).

document.onload
It is called when the DOM is ready which can be prior to images and other external content is loaded.

window.onload appears to be the most widely supported.

$(document).ready(function() { /* code here */ });
$(function() { /* code here */ });

<h2>Looping over arrays</h2>
<h3>while</h3>
<code>let index = 0;
const array = [1,2,3,4,5,6];

while (index &lt; array.length) {
  console.log(array[index]);
  index++;
}
</code>

<h3>for (classical)</h3><code>const array = [1,2,3,4,5,6];
for (let index = 0; index &lt; array.length; index++) {
  console.log(array[index]);
}
</code>

<h3>forEach</h3><code>const array = [1,2,3,4,5,6];

array.forEach(function(current_value, index, array) {
  console.log(`At index ${index} in array ${array} the value is ${current_value}`);
});
// =&gt; undefined
</code>

<h3>map</h3>The last construct was useful, however, it doesn’t return a new array which might
be undesirable for your specific case. 
<code>map</code> solves this by applying a function
over every element and then returning the new array.

<code>const array = [1,2,3,4,5,6];
const square = x =&gt; Math.pow(x, 2);
const squares = array.map(square);
console.log(`Original array: ${array}`);
console.log(`Squared array: ${squares}`);
</code>

The full signature for <code>map</code> is <code>.map(current_value, index, array)</code>.

<h3>reduce</h3>From MDN:

<blockquote>
  The reduce() method applies a function against an accumulator and each element
in the array (from left to right) to reduce it to a single value.

</blockquote>

<code>const array = [1,2,3,4,5,6];
const sum = (x, y) =&gt; x + y;
const array_sum = array.reduce(sum, 0);
console.log(`The sum of array: ${array} is ${array_sum}`);
</code>

<h3>filter</h3>Filters elements on an array based on a boolean function.

<code>const array = [1,2,3,4,5,6];
const even = x =&gt; x % 2 === 0;
const even_array = array.filter(even);
console.log(`Even numbers in array ${array}: ${even_array}`);
</code>

<h3>every</h3>Got an array and want to test if a given condition is met in every element?

<code>const array = [1,2,3,4,5,6];
const under_seven = x =&gt; x &lt; 7;

if (array.every(under_seven)) {
  console.log('Every element in the array is less than 7');
} else {
  console.log('At least one element in the array was bigger than 7');
}
</code>

<h3>some</h3>Test if at least one element matches our boolean function.

<code>const array = [1,2,3,9,5,6,4];
const over_seven = x =&gt; x &gt; 7;

if (array.some(over_seven)) {
  console.log('At least one element bigger than 7 was found');
} else {
  console.log('No element bigger than 7 was found');
}
</code>

<h2>jQuery Methods</h2>
<a href="https://www.tutorialsteacher.com/jquery/jquery-methods" class="whitebut ">www.tutorialsteacher.com/jquery/jquery-methods</a>
<table class="table table-bordered">
<thead>
<tr><th class="w-25">Category</th>
<th class="w-50">Description </th>
<th  class="w-25">Imp Methods</th></tr>
</thead>
<tbody>
<tr><td>DOM Manipulation </td>
<td>These methods manipulate DOM elements in some manner e.g. 
changing attribute, style attribute, adding and removing elements etc.</td>
<td>after(),
append(),
attr(),
before(),
<a href="https://api.jquery.com/category/manipulation/" target="_blank">more..</a></td></tr>
<tr><td>Traversing</td>
<td>These methods help in navigating from DOM element to another element in a parent child hierarchy e.g. 
finding ancestors, descendants or sibling element of a specified element.</td>
<td>children(),
closest(),
each(), 
first(),
next(), 
filter(),
parent(),
siblings(),
<a href="https://api.jquery.com/category/traversing/" target="_blank">more..</a></td></tr>
<tr><td>CSS </td>
<td>These methods get and set css related properties of elements.</td>
<td>addClass(),
css(),
hasClass(),
removeClass(),
toggleClass()
<a href="https://api.jquery.com/category/css/" target="_blank">more..</a>
</td></tr>
<tr><td>Attributes </td>
<td>These methods get and set DOM attributes of elements.</td>
<td>attr(),
html(),
removeAttr(),
prop(),
val(),
<a href="https://api.jquery.com/category/attributes/" target="_blank">more..</a>
</td></tr>
<tr><td>Events</td>
<td>These methods are used to handle DOM or JavaScript events.</td>
<td>bind(),
blur(),
change(),
click(),
dblclick(),
focus(),
keyup(),
keydown(),
<a href="https://api.jquery.com/category/events/" target="_blank">more..</a></td></tr>
<tr><td>Effects </td>
<td>These methods are used to add animation to elements.</td>
<td>animate(),
fadeIn(),
fadeOut(),
hide(),
show(),
stop(),
<a href="https://api.jquery.com/category/effects/" target="_blank">more..</a></td></tr>
<tr><td>Dimensions</td>
<td>These methods are used to get and set the CSS dimensions for the various properties.</td>
<td>height(),
width(),
innerHeight(),
innerWidth(),
<a href="https://api.jquery.com/category/dimensions/" target="_blank">more..</a></td></tr>
<tr><td>Forms</td>
<td>These methods and event handlers handle forms and their various elements.</td>
<td>blur(),
change(),
val(),
submit(),
<a href="https://api.jquery.com/category/forms/" target="_blank">more..</a></td></tr>
<tr><td>Ajax </td>
<td>These methods allow Ajax functionalities with jQuery e.g. 
</td>
<td>get(),
getJson(),
post(),
load(),
<a href="https://api.jquery.com/category/ajax/" target="_blank">more..</a></td></tr>
<tr><td>Core </td>
<td>These methods are core methods in jQuery API.</td>
<td>jQuery(),
holdReady(),
when(),
<a href="https://api.jquery.com/category/core/" target="_blank">more..</a></td></tr>
<tr><td>Data </td>
<td>These methods allow us to associate arbitrary data with specific DOM elements.</td>
<td>data(),
removeData(),
queue(),
dequeue(),
clearQueue(),
<a href="https://api.jquery.com/category/data/" target="_blank">more..</a></td></tr>
<tr><td>Miscellaneous </td>
<td>These methods are useful in various tasks e.g. 
traversing elements, converting to array etc.</td>
<td>each(),
index(),
get(),
toArray(),
<a href="https://api.jquery.com/category/miscellaneous/" target="_blank">more..</a></td></tr>
<tr><td>Utilities </td>
<td>Utility methods are helpful in getting information on various things e.g. 
browser, function, array, window etc. 
</td>
<td>inArray(),
isArray(),
isFunction(),
isNumeric(),
isWindow(),
isXmlDoc(),
<a href="https://api.jquery.com/category/utilities/" target="_blank">more..</a></td></tr>
</tbody>
</table>

<h2>Javascript get mac address</h2>
https://npmjs.org/package/getmac
get mac address

using windows operating system, following code may help you to get HDD and CPU serial number:

var sys = require('util')
var exec = require('child_process').exec;
function puts(error, stdout, stderr) {
    console.log(stdout)
}

exec("wmic CPU get ProcessorId", puts);
exec("wmic DISKDRIVE get SerialNumber", puts);

to save this serial number to a variable
I want its value
If I try to console.log(stdout.SerialNumber) then it gives me undefined

Perhaps the fingerprintjs2 is one of the solutions for this issue:

http://valve.github.io/fingerprintjs2/
https://github.com/Valve/fingerprintjs2

Browser allows very limited access to hardware.
If you want to uniquely identify your clients, you can use the below chrome extension.
https://github.com/Antony007/ADNIdentifier

<h2>The require() function is not a client side function</h2>

Typically require() is used in server side NodeJS code, but there is a require.js library file

https://stackoverflow.com/questions/23603514/javascript-require-function-giving-referenceerror-require-is-not-defined
<a href="https://stackoverflow.com/questions/19059580/client-on-node-uncaught-referenceerror-require-is-not-defined" class="whitebut ">Client on node: require is not defined</a>
You have three options:
1. 
Use &lt;script> tag.
2. 
Use a CommonJS implementation. 
Synchronous dependencies like Node.js
3. 
Use an AMD implementation.

CommonJS client side-implementations include:
(most of them require a build step before you deploy)

1. 
Browserify - You can use most Node.js modules in the browser. 

   This is my personal favorite.
2. 
Webpack - Does everything (bundles JS, CSS, etc). 

   Made popular by the surge of React.js. 

   Notorious for its difficult learning curve.
3. 
Rollup - New contender. 

   Leverages ES6 modules. 

   Includes tree-shaking abilities (removes unused code).

AMD implementations include:

RequireJS - Very popular amongst client-side JavaScript developers. 

Not my taste because of its asynchronous nature.

Note, in your search for choosing which one to go with, you'll read about Bower. 

Bower is only for package dependencies and is unopinionated on module definitions like CommonJS and AMD.

<h2>require()</h2>
When you're first starting out with Node js, it might be a bit confusing because you are most likely accustomed to writing JavaScript code for the web browser. 

When Node js is the server, the syntax is similar but there are a few differences around how other JavaScript files and modules are included. 

When writing on the server side you may include files as follows: require('./mysharedfile');.

This however is not valid on the client-side. 

I've previously written an article about Include a JavaScript file in another file.

Another good thing to remember is that when you are writing your Node js server-side code you split it into multiple files; ideally one per module keeping the single responsibility principle in mind. 

This is also good practice when you are doing client-side development as well.

Don't be afraid about making a lot of JavaScript files, just be sure that you implement a JavaScript minify so that all of your JavaScript is compiled into a single file and it actually removes the entire need to even used the require();.

<h2>Javascript open url target _self</h2>
window.open target _self v window.location.href

window.location.href = "webpage.htm";
location.href = "webpage.html";

window.open("url","_self"); 
window.open("webpage.htm", "_self");

<h2>Access object properties within object</h2>
var settings = {
  user:"someuser",
  password:"password",
  country:"Country",
  birthplace:country
}

settings.birthplace = settings.country;

You can't access the object inside of itself.
You can use variable:

var country = "country";
var settings = {
  user:"someuser",
  password:"password",
  country:country,
  birthplace:country
}
<h3>use a constructor function to reference an object during initialization</h3>
This example uses an anonymous function as a constructor.
The new object is reference with this.

var settings = new function() {
    this.user = "someuser";
    this.password = "password";
    this.country = "Country";
    this.birthplace = this.country;
};
Enumerate the properties of an object
there are three native ways to list/traverse object properties:

for...in loops
Object.keys(o)
Object.getOwnPropertyNames(o)

<h2>Accessing Nested Objects in JavaScript</h2>
<a href="https://hackernoon.com/accessing-nested-objects-in-javascript-f02f1bd6387f" class="whitebut ">Accessing Nested Objects</a>
<a href="https://stackoverflow.com/questions/31706577/cannot-read-property-labels-of-undefined" class="whitebut ">Cannot read property 'labels' of undefined</a>

const user = {
    id: 101,
    email: 'jack@dev.com',
    personalInfo: {
        name: 'Jack',
        address: {
            line1: 'westwish st',
            line2: 'washmasher',
            city: 'wallas',
            state: 'WX'
        }
    }
}

To access the name of the our user:
const name = user.personalInfo.name;
const userCity = user.personalInfo.address.city;

But, for some reason, if our user’s personal info is not available, the object structure will be like this,
const user = {
    id: 101,
    email: 'jack@dev.com'
}

The usual way how most devs deal with this scenario is,
const name = user && user.personalInfo ? user.personalInfo.name : null;
// undefined error will NOT be thrown as we check for existence before access

This is okay if your nested structure is simple, but if you have your data nested 5 or 6 levels deep, then your code will look really messy like this,
let city;
if (
    data && data.user && data.user.personalInfo &&
    data.user.personalInfo.addressDetails &&
    data.user.personalInfo.addressDetails.primaryAddress
   ) {
    city = data.user.personalInfo.addressDetails.primaryAddress;
}

There are a few tricks to deal with this messy object structures.

Oliver Steele’s Nested Object Access Pattern
This is my personal favorite as it makes the code look clean and simple. 
I picked this style from stackoverflow a while back and it is pretty catchy once you understand how it works.

const name = ((user || {}).personalInfo || {}).name;
With this notation, you’ll never run into Cannot read property ‘name’ of undefined. 
You basically check if user exists, if not, you create an empty object on the fly. 
This way, the next level key will always be accessed from an object that exists or an empty object, but never from undefined.

Unfortunately, you cannot access nested arrays with this trick

Access Nested Objects Using Array Reduce
Array reduce method is very powerful and it can be used to safely access nested objects.

const getNestedObject = (nestedObj, pathArr) => {
    return pathArr.reduce((obj, key) =>
        (obj && obj[key] !== 'undefined') ? obj[key] : undefined, nestedObj);
}
// pass in your object structure as array elements
const name = getNestedObject(user, ['personalInfo', 'name']);
// to access nested array, just pass in array index as an element the path array.
const city = getNestedObject(user, ['personalInfo', 'addresses', 0, 'city']);
// this will return the city from the first address item.

<h2>Rgraph object available methods</h2>
Adjusting_mousemove: ƒ (e)
Draw: ƒ ()
DrawAxes: ƒ ()
DrawBevel: ƒ ()
DrawIEShadow: ƒ (coords)
DrawLabels: ƒ ()
Drawbars: ƒ ()
Drawlabels_bottom: ƒ ()
Drawlabels_center: ƒ ()
Drawlabels_top: ƒ ()
Get: ƒ (name)
Highlight: ƒ (shape)
Set: ƒ (name)
adjusting_mousemove: ƒ (e)
cachedBackgroundCanvas: null
canvas: canvas#cvs
colorWave: ƒ ()
colorsParsed: true
context: CanvasRenderingContext2D {canvas: canvas#cvs, globalAlpha: 1, globalCompositeOperation: "source-over", filter: "none", imageSmoothingEnabled: true, …}
coords: (10) [Array(4), Array(4), Array(4), Array(4), Array(4), Array(4), Array(4), Array(4), Array(4), Array(4)]
coords2: (10) [Array(1), Array(1), Array(1), Array(1), Array(1), Array(1), Array(1), Array(1), Array(1), Array(1)]
coordsText: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
data: (10) [1, 3, 5, 3, 5, 7, 7, 9, 12, 24]
data_arr: (10) [1, 3, 5, 3, 5, 7, 7, 9, 12, 24]
draw: ƒ ()
drawAboveLabels: ƒ ()
drawAxes: ƒ ()
drawBevel: ƒ ()
drawErrorbars: ƒ ()
drawIEShadow: ƒ (coords)
drawLabels: ƒ ()
drawbars: ƒ ()
drawlabels_bottom: ƒ ()
drawlabels_center: ƒ ()
drawlabels_top: ƒ ()
exec: ƒ (func)
firstDraw: false
firstDrawFunc: ƒ ()
get: ƒ (name)
getBar: ƒ (e)
getObjectByXY: ƒ (e)
getShape: ƒ (e)
getShapeByX: ƒ (e)
getValue: ƒ (arg)
getYCoord: ƒ (value)
grapharea: 390
grow: ƒ ()
gutterBottom: 35
gutterLeft: 20
gutterRight: 25
gutterTop: 25
halfTextHeight: 9
halfgrapharea: 195
highlight: ƒ (shape)
id: "cvs"
interactiveKeyHighlight: ƒ (index)
isAdjustable: ƒ (shape)
isRGraph: true
max: 25
on: ƒ (type, func)
original_colors: [chart.colors: Array(1), chart.key.colors: null, chart.crosshairs.color: "#333", chart.highlight.stroke: "rgba(0,0,0,0)", chart.highlight.fill: "rgba(255,255,255,0.7)", …]
original_data: (10) [1, 3, 5, 3, 5, 7, 7, 9, 12, 24]
parseColors: ƒ ()
parseSingleColorForGradient: ƒ (color)
properties: {chart.background.barcolor1: "rgba(0,0,0,0)", chart.background.barcolor2: "rgba(0,0,0,0)", chart.background.grid: true, chart.background.grid.color: "#005010", chart.background.grid.width: 1, …}
reset: ƒ ()
scale2: {max: 25, labels: Array(5), values: Array(5), units_pre: "", units_post: " 只", …}
set: ƒ (name)
stackedOrGrouped: false
type: "bar"
uid: "f7d9d1b2-296e-4805-94b8-254fe8fb42ad"
wave: ƒ ()

<h2>Testing and Automation Tools</h2>
API
application programming interfaces (APIs)
API testing is performed at the message layer
<a href="https://www.guru99.com/api-testing.html" class="whitebut ">API Testing Tutorial</a>

Appium
Appium is an open source test automation framework for use with native, hybrid and mobile web apps.
It drives iOS, Android, and Windows apps using the WebDriver protocol.
<a href="http://appium.io/" class="whitebut ">Appium</a>

Database Testing
<a href="https://www.softwaretestinghelp.com/database-testing-process/" class="whitebut ">Database Testing Complete Guide</a>

ETL
ETL stands for Extract-Transform-Load
to ensure that the data that has been loaded from a source to the destination after business transformation is accurate.
It also involves the verification of data at various middle stages that are being used between source and destination. 

<a href="https://www.guru99.com/utlimate-guide-etl-datawarehouse-testing.html" class="whitebut ">ETL Testing or Data Warehouse Testing Tutorial</a>
Informatica
Informatica Powercenter ETL/Data Integration tool is the most widely used tool and in the common term when we say Informatica, it refers to the Informatica PowerCenter tool for ETL.
<a href="https://www.guru99.com/introduction-informatica.html" class="whitebut ">Informatica</a>
Mobile with Automation
Mobile automation can be done using many tools
<a href="https://economictimes.indiatimes.com/definition/mobile-automation" class="whitebut ">Mobile automation</a>

QC/ALM
HP Application LifeCycle Management (ALM) is the latest incarnation of flagship test management tool Quality Center(QC).
<a href="https://www.tutorialspoint.com/qc/qc_overview.htm" class="whitebut ">HP ALM /Quality Center Tutorial</a>
UFT/QTP
test automation using QTP tool
QTP stands for QuickTest Professional
helps testers to perform an automated functional testing seamlessly, without monitoring, once script development is complete.
<a href="https://www.tutorialspoint.com/qtp/qtp_overview.htm" class="whitebut ">QTP</a>
Scrum master
A scrum master is the facilitator for an agile development team.
Scrum is a methodology that allows a team to self-organize and make changes quickly, in accordance with agile principles.
The scrum master manages the process for how information is exchanged.
https://www.visual-paradigm.com/scrum/what-is-scrum-master/

Selenium
Selenium automates browsers
Primarily it is for automating web applications for testing purposes
web-based administration tasks can be automated
<a href="https://www.selenium.dev/" class="whitebut ">Selenium</a>
SOAP UI
SoapUI is an open-source web service testing application for Simple Object Access Protocol (SOAP) and representational state transfers (REST). 

web service inspection, invoking, development, simulation and mocking, functional testing, load and compliance testing. 

SoapUI is cross-platform. 

<a href="https://www.soapui.org/" class="whitebut ">SOAP UI</a>

<h2>clean up RGraph</h2>
<a href="https://www.easyafrikaans.com/easyafrikaans/js/RGraph/demos/basic-clear.html" class="whitebut ">example of clearing your canvas</a>
<a href="https://www.rgraph.net/canvas/updating.html" class="whitebut ">updating rgraph</a>
<a href="https://www.easyafrikaans.com/easyafrikaans/js/RGraph/demos/" class="whitebut ">Index of RGraph demos</a>

<span class="red">RGraph.clear(document.getElementById("cvs"));</span>
RGraph.Reset(document.getElementById('cvs'))
<h2>to remove an element at that index</h2>
  notvisitedList.splice(topicpointer, 1);

<h2>to remove an element at with that value</h2>
  var index = notvisitedList.indexOf(topicpointer);
  notvisitedList.splice(index, 1);

<h2>get href value of an anchor tag</h2>

Use the <code>.prop()</code> method
    var href = $('a').prop('href');

Use the <code>.text()</code> method.
    var text = $('a').text();

Use the <code>querySelector()</code> which will return the first anchor tag within the document. 
Then we can directly access the href property to get the exact value of the href attribute.
  var href = document.querySelector('a').href;

theElement.match(/href="([^"]*)/)[1];
theElement.getAttribute("href");
document.getElementById("aaa").href;

var LibDocsList = [];
  $('a[href*="LibDocs"]').each(function(i) {
      var anchor = $(this).prop('href'); anchorNumber = i; anchorLength = anchorNumber;
      LibDocsList.push(anchor);
  });

<h2>random jump to some pages</h2>
function randomLinkTo() {
  linkpointer = Math.floor(Math.random() * notvisitedList.length);
  linkToAddr = LibDocsList[linkpointer]

  var index = notvisitedList.indexOf(linkpointer);
  notvisitedList.splice(index, 1);

  window.open(linkToAddr, "_blank");
}

  // following code must be at end to allow full page loaded OK
  var LibDocsList = [];
  $('a[href*="LibDocs"]').each(function(i) {
      var anchor = $(this).prop('href'); anchorNumber = i; anchorLength = anchorNumber;
      LibDocsList.push(anchor);
  });
  var totalLength = LibDocsList.length - 1
  var notvisitedList = [...Array(totalLength).keys()];

<h2>document on ready load script</h2>
$(document).ready(function(){
    $('&lt;script/>',{type:'text/javascript', src:'http://williamkpchan.github.io/LibDocs/readbook.js'}).appendTo('head');
 }); 

<h2>add bootstrap table styles to pandoc tables</h2>
&lt;script>
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});

<h2>dynamically load mathjax for compatibility with self-contained</h2>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
&lt;/script>

<h2>JavaScript HTML Input Examples</h2>
Examples of using JavaScript to access and manipulate HTML 
input objects.
<h3>Button Object</h3>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_disabled">Disable a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_name">Find the name of a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_type">Find the type of a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_value">Find the value of a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_text">Find the text displayed on a button</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_button_form">Find the id of the form a button belongs to</a>

<h3>Form Object</h3>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_submit">Submit a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_reset">Reset a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_elements">Find the value of each element in a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_acceptcharset">Find the accepted character set of a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_action">Find the action attribute of a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_enctype">Find the value of the enctype attribute in a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_length">Find the number of elements in a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_method">Find the method for sending form data</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_name">Find the name of a form</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=tryjs_form_target">Find the target of a form</a>

<h3>Option and Select Objects</h3>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_disabled">Disable and enable a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_form">Get the id of the form that contains the dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_length">Get the number of options in the dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_size">Turn the dropdown list into a multiline list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_multiple">Select multiple options in a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_option">Display the selected option in a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_options">Display all options from a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_option_index">Display the index of the selected option in a dropdown list</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_option_settext">Change the text of the selected option</a>
<a href="https://www.w3schools.com/JS/tryit.asp?filename=try_dom_select_remove">Remove options from a dropdown list</a>

<h2>close a window using Javascript</h2>
some browsers will give you a warning

Javascript code is;
window.close("","_parent","");

<h2>attach script to html</h2>
document.writeln("&lt;script type=\"text/javascript\">");

document.writeln("\"https://secure.\" : \"http://www.\");");
document.writeln("document.write(\"&lt;sc\"+\"ript type='text/javascript' src='\" +");

document.writeln("href="http://statcounter.com/\" target=\"_blank\">&lt;img ");
document.writeln("class=\"statcounter\" ");
document.writeln("alt=\"web counter\">&lt;/a>&lt;/div>&lt;/noscript>");

<h2>spread operator</h2>
The spread operator in JavaScript is a useful syntax for adding elements to an array, combining arrays into one larger one, spreading an array inside the arguments of a function, and more.

// Concatenating arrays and objects
let arr1 = [1,2,3]; 
let arr2 = [4,5]; 
let newArray = [...arr1,...arr2]; 
console.log(newArray);
// Output: [ 1, 2, 3, 4, 5 ] 

// Copying array elements
let arr = ["a","b","c"]; 
let newArray = [...arr]; 
console.log(newArray);
// Output: ["a", "b", "c"]

// Expanding arrays
let arr = ["a","b"]; 
let newArray = [...arr,"c","d"]; 
console.log(newArray);
// Output: ["a", "b", "c", "d"]

// Merging objects
const userBasic = { name: "Jen", age: 22,
}; 
const userMoreInfo = { country: "Argentina", city: "Córdoba", 
}; 
const user = {... 
userBasic, ... 
userMoreInfo};
// Output: {  name: "Jen",  age: 22, country: "Argentina", city: "Córdoba" }

<h2>Find the Max of all the nested arrays</h2>
const arr = [[12,45,75], [54,45,2],[23,54,75,2]];

const max = Math.max(...[].concat(...arr));

<h2>Four ways to merge arrays</h2>
<h3>1. Using for loop</h3>
We can loop through the array source array which need to be pushed , then add elements one by one

function push(fromArray, toArray) {<strong>
     for(let i = 0, len = fromArray.length; i &lt; len; i++) {
            toArray.push(fromArray[i]);
     }</strong>
      return toArray;
}
var array1 = [1,2,3,4,5];var array2= [6,7,8,9,10];var array3 = [];push(array1, array3);push(array2, array3);
<h3>2. Using spread operator</h3>

<strong>Spread syntax</strong> allows an iterable such as an array expression or string to be expanded in places where zero or more arguments (for function calls) or elements (for array literals) are expected

var array1 = [1,2,3,4,5];var array2 = [6,7,8,9,10];var array3 = [...array1, ...array2];array3; // [1,2,3,4,5,6,7,8,9,10];

We can use spread operator with push

var array1 = [1,2,3,4,5];var array2 = [6,7,8,9,10];var array3 = []array3.push(...array1, ...array2);array3; //  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

We can also use spread operator with <code>Array.of</code>

var array1 = [1,2,3,4,5]
var array2 = [6,7,8,9,10];var array3 = Array.of(...array2, ...array1);

We can use spread operator to convert string to array

var string =&quot;two&quot;;var arrayOfChar = [...string];arrayOfChar; //[&quot;t&quot;, &quot;w&quot;, &quot;o&quot;]
<h3>3. Using concat method</h3>

The <code><strong>concat()</strong></code> method is used to merge two or more arrays. 
This method does not change the existing arrays, but instead returns a <code><strong>new array.</strong></code>

var array1 = [1,2,3,4,5]var array2 = [6,7,8,9,10];
var array3 = array1.concat(array2);// orvar array3 = [].concat(array1, array2);

We can pass other than array as arguments.

var a = &quot;string&quot;;var b = 1;var c = {};var combined = [].concat(a, b, c)combined; //  [&quot;string&quot;, 1, {…}]
<h3>4. Using Reduce method</h3>

The <code><strong>reduce()</strong></code> method executes a <strong>reducer</strong> function (that you provide) on each element of the array, resulting in a single output value.

var array1 = [1,2,3,4,5];var array2 = [6,7,8,9,10];var array3 = array2.reduce((newArray, item) =&gt; {
          <strong>newArray.push(item);
          return newArray;</strong> ), <strong>array1</strong>);

<h2>merge 2 arrays into coordinates</h2>
yCord = [30, 29, 31, 32];
xCord = [0, 1, 2 ,3];
coords = xCord.map((i, index)=> [i, yCord[index]]);
console.log(coords)

<h2>Try fabric JS to convert canvas to svg</h2>
http://jsfiddle.net/Nofiden/3hcyjo0e/2/
<a href="http://fabricjs.com/fabric-intro-part-1" class="whitebut ">fabric-intro</a>

<a href="https://svgjs.com/docs/3.0/" class="whitebut ">SVG.js lightweight library for manipulating and animating SVG</a>

HTML

<canvas id="canvas" width=1024 height=1020></canvas>
<button id="canvas2svg">Canvas 2 SVG</button>

JS
var canvas = new fabric.Canvas('canvas', { isDrawingMode: true });
  //var canvas = document.getElementById("canvas");
  var ctx = canvas.getContext("2d");
$("#canvas2svg").click(function(){
    canvas.isDrawingMode = false;
    alert(canvas.toSVG());
});

<h2>LocalStorage, sessionStorage</h2>

Web storage objects <code>localStorage</code> and <code>sessionStorage</code> allow to save key/value pairs in the browser.

What’s interesting about them is that the data survives a page refresh (for <code>sessionStorage</code>) and even a full browser restart (for <code>localStorage</code>). 

We already have cookies. 
Why additional objects?

Unlike cookies, web storage objects are not sent to server with each request. 

Because of that, we can store much more. 

Most browsers allow at least 2 megabytes of data (or more) and have settings to configure that.

Also unlike cookies, the server can’t manipulate storage objects via HTTP headers. 

Everything’s done in JavaScript.

The storage is bound to the origin (domain/protocol/port triplet). 

That is, different protocols or subdomains infer different storage objects, they can’t access data from each other.

Both storage objects provide same methods and properties:

<code>setItem(key, value)</code> – store key/value pair.
<code>getItem(key)</code> – get the value by key.
<code>removeItem(key)</code> – remove the key with its value.
<code>clear()</code> – delete everything.
<code>key(index)</code> – get the key on a given position.
<code>length</code> – the number of stored items.

As you can see, it’s like a <code>Map</code> collection (<code>setItem/getItem/removeItem</code>), but also allows access by index with <code>key(index)</code>.
<h3>localStorage demo</h3>
The main features of <code>localStorage</code> are:

Shared between all tabs and windows from the same origin.
The data does not expire. 

It remains after the browser restart and even OS reboot.

For instance, if you run this code…

<code>localStorage.setItem('test', 1);</code>
…And close/open the browser or just open the same page in a different window, then you can get it like this:
<code>alert( localStorage.getItem('test') ); // 1</code>

We only have to be on the same origin (domain/port/protocol), the url path can be different.
The <code>localStorage</code> is shared between all windows with the same origin, so if we set the data in one window, the change becomes visible in another one.
<h3>Object-like access</h3>
We can also use a plain object way of getting/setting keys, like this:
<code>// set key
localStorage.test = 2;
// get key
alert( localStorage.test ); // 2

// remove key
delete localStorage.test;</code>

That’s allowed for historical reasons, and mostly works, but generally not recommended, because:

If the key is user-generated, it can be anything, like <code>length</code> or <code>toString</code>, or another built-in method of <code>localStorage</code>. 

In that case <code>getItem/setItem</code> work fine, while object-like access fails:

<code>let key = 'length';
localStorage[key] = 5; // Error, can't assign length</code>

There’s a <code>storage</code> event, it triggers when we modify the data. 

That event does not happen for object-like access. 

We’ll see that later in this chapter.

<h3>Looping over keys</h3>
As we’ve seen, the methods provide “get/set/remove by key” functionality. 

But how to get all saved values or keys?

Unfortunately, storage objects are not iterable.

One way is to loop over them as over an array:

<code>for(let i=0; i&lt;localStorage.length; i++) {
let key = localStorage.key(i);
alert(`${key}: ${localStorage.getItem(key)}`);
}</code>

Another way is to use <code>for key in localStorage</code> loop, just as we do with regular objects.

It iterates over keys, but also outputs few built-in fields that we don’t need:

<code>// bad try
for(let key in localStorage) {
alert(key); // shows getItem, setItem and other built-in stuff
}</code>

…So we need either to filter fields from the prototype with <code>hasOwnProperty</code> check:

<code>for(let key in localStorage) {
if (!localStorage.hasOwnProperty(key)) {
  continue; // skip keys like &quot;setItem&quot;, &quot;getItem&quot; etc
}
alert(`${key}: ${localStorage.getItem(key)}`);
}</code>

…Or just get the “own” keys with <code>Object.keys</code> and then loop over them if needed:

<code>let keys = Object.keys(localStorage);
for(let key of keys) {
  alert(`${key}: ${localStorage.getItem(key)}`);
}</code>

The latter works, because <code>Object.keys</code> only returns the keys that belong to the object, ignoring the prototype.

<h3>Strings only</h3>
Please note that both key and value must be strings.

If were any other type, like a number, or an object, it gets converted to string automatically:

<code>sessionStorage.user = {name: &quot;John&quot;};
alert(sessionStorage.user); // [object Object]</code>

We can use <code>JSON</code> to store objects though:

<code>sessionStorage.user = JSON.stringify({name: &quot;John&quot;});

// sometime later
let user = JSON.parse( sessionStorage.user );
alert( user.name ); // John</code>

Also it is possible to stringify the whole storage object, e.g. 

for debugging purposes:

<code>// added formatting options to JSON.stringify to make the object look nicer
alert( JSON.stringify(localStorage, null, 2) );</code>

<h3>sessionStorage</h3>
The <code>sessionStorage</code> object is used much less often than <code>localStorage</code>.

Properties and methods are the same, but it’s much more limited:

The <code>sessionStorage</code> exists only within the current browser tab.

Another tab with the same page will have a different storage.

But it is shared between iframes in the same tab (assuming they come from the same origin).

The data survives page refresh, but not closing/opening the tab.

Let’s see that in action.

Run this code…

<code>sessionStorage.setItem('test', 1);</code>

…Then refresh the page. 

Now you can still get the data:

<code>alert( sessionStorage.getItem('test') ); // after refresh: 1</code>

…But if you open the same page in another tab, and try again there, the code above returns <code>null</code>, meaning “nothing found”.

That’s exactly because <code>sessionStorage</code> is bound not only to the origin, but also to the browser tab. 

For that reason, <code>sessionStorage</code> is used sparingly.

<h3>Storage event</h3>
When the data gets updated in <code>localStorage</code> or <code>sessionStorage</code>, storage event triggers, with properties:

<code>key</code> – the key that was changed (<code>null</code> if <code>.clear()</code> is called).
<code>oldValue</code> – the old value (<code>null</code> if the key is newly added).
<code>newValue</code> – the new value (<code>null</code> if the key is removed).
<code>url</code> – the url of the document where the update happened.
<code>storageArea</code> – either <code>localStorage</code> or <code>sessionStorage</code> object where the update happened.

The important thing is: the event triggers on all <code>window</code> objects where the storage is accessible, except the one that caused it.

Let’s elaborate.

Imagine, you have two windows with the same site in each. 

So <code>localStorage</code> is shared between them.

You might want to open this page in two browser windows to test the code below.

If both windows are listening for <code>window.onstorage</code>, then each one will react on updates that happened in the other one.

<code>// triggers on updates made to the same storage from other documents
window.onstorage = event =&gt; { // same as window.addEventListener('storage', event =&gt; {
if (event.key != 'now') return;
alert(event.key + ':' + event.newValue + &quot; at &quot; + event.url);
};

localStorage.setItem('now', Date.now());</code>

Please note that the event also contains: <code>event.url</code> – the url of the document where the data was updated.

Also, <code>event.storageArea</code> contains the storage object – the event is the same for both <code>sessionStorage</code> and <code>localStorage</code>, so <code>event.storageArea</code> references the one that was modified. 

We may even want to set something back in it, to “respond” to a change.

<strong>That allows different windows from the same origin to exchange messages.</strong>

Modern browsers also support Broadcast channel API, the special API for same-origin inter-window communication, it’s more full featured, but less supported. 

There are libraries that polyfill that API, based on <code>localStorage</code>, that make it available everywhere.

<h3>Summary</h3>
Web storage objects <code>localStorage</code> and <code>sessionStorage</code> allow to store key/value in the browser.

Both <code>key</code> and <code>value</code> must be strings.

The limit is 5mb+, depends on the browser.

They do not expire.

The data is bound to the origin (domain/port/protocol).

<code>localStorage</code>
Shared between all tabs and windows with the same origin
Visible within a browser tab, including iframes from the same origin

<code>sessionStorage</code>
Survives browser restart
Survives page refresh (but not tab close)

API:
<code>setItem(key, value)</code> – store key/value pair.
<code>getItem(key)</code> – get the value by key.
<code>removeItem(key)</code> – remove the key with its value.
<code>clear()</code> – delete everything.
<code>key(index)</code> – get the key number <code>index</code>.
<code>length</code> – the number of stored items.
Use <code>Object.keys</code> to get all keys.

We access keys as object properties, in that case <code>storage</code> event isn’t triggered.

Storage event:

Triggers on <code>setItem</code>, <code>removeItem</code>, <code>clear</code> calls.

Contains all the data about the operation (<code>key/oldValue/newValue</code>), the document <code>url</code> and the storage object <code>storageArea</code>.

Triggers on all <code>window</code> objects that have access to the storage except the one that generated it (within a tab for <code>sessionStorage</code>, globally for <code>localStorage</code>).

<h2>Complete Guide To Node Client-Server Communication</h2>
This covers the following forms of client-server connection:

XMLHttpRequest
Server-Sent Events
WebSocket
HTTP/2
Server to server

You can check out the complete source code for each implementation <a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication" rel="noopener nofollow">here</a>.

Before we begin, I should note that there is no one best protocol or API for client/server communication. 

Every non-trivial application will require a mix of different transports based on a variety of requirements: interaction with the browser cache, protocol overhead, message latency, reliability, type of data transfer, and more. 

Some protocols may offer low-latency delivery (e.g., Server-Sent Events, WebSocket), but may not meet other critical criteria, such as the ability to leverage the browser cache or support efficient binary transfers in all cases. 

Here is visualization to help illustrate how XHR, SSE, and WebSockets differ in their implementations.

<img class="lazy" data-src="https://miro.medium.com/max/2048/0*1LzuWqDF3n107sFm.png">
CLIENT SERVER RELATIONSHIP

<strong>XHR</strong> is optimized for “transactional” request-response communication: the client sends the full, well-formed HTTP request to the server, and the server responds with a full response. 

There is no support for request streaming, and until the Streams API is available, no reliable cross-browser response streaming API.
<strong>SSE</strong> enables efficient, low-latency server-to-client streaming of text-based data: the client initiates the SSE connection, and the server uses the event source protocol to stream updates to the client. 

The client can’t send any data to the server after the initial handshake.
<strong>WebSocket</strong> is the only transport that allows bidirectional communication over the same TCP connection (Figure 17–2): the client and server can exchange messages at will. 

As a result, WebSocket provides low latency delivery of text and binary application data in both directions.

<h3><a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication/tree/master/client-server-sockets" rel="noopener nofollow">WebSocket Client-Server Demo</a></h3>
WebSockets is a technology, based on the <em>ws</em> protocol, that makes it possible to establish a continuous full-duplex connection stream between a client and a server. 

A typical websocket client would be a user’s browser, but the protocol is platform independent. 

It is the closest API to a raw network socket in the browser. 

Except a WebSocket connection is also much more than a network socket, as the browser abstracts all the complexity behind a simple API and provides a number of additional services:

Connection negotiation and same-origin policy enforcement
Interoperability with existing HTTP infrastructure
Message-oriented communication and efficient message framing
Subprotocol negotiation and extensibility
This is a demo shows a demo of a client connecting to a websocket server and sharing data. 

Here is the server.js of a websocket.

'use strict';
const WebSocketServer = require('ws').Server
const wss = new WebSocketServer({ port: 8081 });
wss.on('connection', ((ws) =&gt; {
  ws.on('message', (message) =&gt; {
    console.log(`received: ${message}`);
  });

  ws.on('end', () =&gt; {
    console.log('Connection ended...');
  });

  ws.send('Hello Client');
}));

Here is the client.js of a websocket.

  console.log('open: ');
var ws = new WebSocket("ws://127.0.0.1:8081");
ws.onopen = function (event) {
  console.log('Connection is open ...');
ws.send("Hello Server");
};ws.onerror = function (err) {
  console.log('err: ', err);
}ws.onmessage = function (event) {
  console.log(event.data);
document.body.innerHTML += event.data + '&lt;br&gt;';
};ws.onclose = function() {
  console.log("Connection is closed...");
}
<h3><a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication/tree/master/server-side-events" rel="noopener nofollow">Stream Updates with Server-Sent Events (SSE)</a></h3>
SSEs are sent over traditional HTTP. 

That means they do not require a special protocol or server implementation to get working. 

WebSockets on the other hand, require full-duplex connections and new Web Socket servers to handle the protocol. 

In addition, Server-Sent Events have a variety of features that WebSockets lack by design such as automatic reconnection, event IDs, and the ability to send arbitrary events.
<h3>Server-Sent Events vs. 
WebSockets</h3>
Why would you choose Server-Sent Events over WebSockets? Good question. 

One reason SSEs have been kept in the shadow is because later APIs like WebSockets provide a richer protocol to perform bi-directional, full-duplex communication. 

Having a two-way channel is more attractive for things like games, messaging apps, and for cases where you need near real-time updates in both directions. 

However, in some scenarios data doesn’t need to be sent from the client. 

You simply need updates from some server action. 

A few examples would be friends’ status updates, stock tickers, news feeds, or other automated data push mechanisms (e.g. 

updating a client-side Web SQL Database or IndexedDB object store). 

If you’ll need to send data to a server, XMLHttpRequest is always a friend.

Here is the server.js of our Server Sent Event, we will be sending out data to the client every 5 seconds with an updated timestamp via SSE.

'use strict';const http = require('http');
const util = require('util');
const fs = require('fs');http.createServer((req, res) =&gt; {
debugHeaders(req);if (req.headers.accept &amp;&amp; req.headers.accept == 'text/event-stream') {
if (req.url == '/events') {
sendSSE(req, res);
} else {
res.writeHead(404);
res.end();
}
} else {
res.writeHead(200, {'Content-Type': 'text/html'});
res.write(fs.readFileSync(__dirname + '/index.html'));
res.end();
}
}).listen(8000);const sendSSE = (req, res) =&gt; {
res.writeHead(200, {
'Content-Type': 'text/event-stream',
'Cache-Control': 'no-cache',
'Connection': 'keep-alive'
});const id = (new Date()).toLocaleTimeString();setInterval(() =&gt; {
constructSSE(res, id, (new Date()).toLocaleTimeString());
}, 5000);constructSSE(res, id, (new Date()).toLocaleTimeString());
//res.end();
}const constructSSE = (res, id, data) =&gt; {
res.write('id: ' + id + '\n');
res.write("data: " + data + '\n\n');
}const debugHeaders = (req) =&gt; {
util.puts('URL: ' + req.url);
for (let key in req.headers) {
util.puts(key + ': ' + req.headers[key]);
}
util.puts('\n\n');
}

And here is the client.js which is reference by the index.html on the client side. 

Notice how the client never sends out a formal request for data with SSE’s. 

Once the intial connection has been made with the server then the plain text data can be sent to the client as needed!

var source = new EventSource('/events');
source.onmessage = function(e) {
document.body.innerHTML += e.data + ';
};
<h3><a href="https://github.com/JoeKarlsson1/Complete_Guide_To_Client_Server_Communication/tree/master/xhr" rel="noopener nofollow">XMLHttpRequest (XHR)</a></h3>
XMLHttpRequest (XHR) is a browser-level API that enables the client to script data transfers via JavaScript. 

XHR made its first debut in Internet Explorer 5, became one of the key technologies behind the Asynchronous JavaScript and XML (AJAX) revolution, and is now a fundamental building block of nearly every modern web application.

XMLHTTP changed everything. 

It put the “D” in DHTML. 

It allowed us to asynchronously get data from the server and preserve document state on the client… The Outlook Web Access (OWA) team’s desire to build a rich Win32 like application in a browser pushed the technology into IE that allowed AJAX to become a reality. 

— Jim Van Eaton Outlook Web Access: A catalyst for web evolution

<img class="lazy" data-src="https://miro.medium.com/max/2048/0*Z7iLEDVToDLrzN-o.png">

Here I am running a simple Express server with a simple route to send requested data to the Client.

'use strict';var express = require('express');
var app = express();app.use(express.static(`${__dirname}/public`));app.get('/api', function(req, res){
res.send((new Date()).toLocaleTimeString());
});app.listen(3000);

Here is the javascript file linked to my index.html on the client side. 

I am using the baked in XHR methods as opposed to jQuery since I love to use vanilla JavaScript whenever possible.

'use strict'function reqListener (data) {
document.body.innerHTML += this.responseText + '&lt;br>';
}setInterval(function () {
var oReq = new XMLHttpRequest();
oReq.addEventListener("load", reqListener);
oReq.open("GET", "/api");
oReq.send();
}, 3000);

In my Github repo, I cover two more use cases not referenced here, server to server communications and HTTP/2. 

If you are curious about those forms of communication check it out. 

One word about HTTP/2 before wrapping up. 

HTTP/2 is the future of Client-Server communication, but it is a protocol built on top of HTTP/1.1 which means that all of these forms of communicating will be still be relevant in the future, just the means that they are transmitted will be updated.

As you can see there are a ton of different ways you can send data between a client and server. 


<h2>Client-server communication in Node.js</h2>

I would use websockets for this. 

Once you've set up the connection you can initiate messages from either side. 

The WS npm package makes this pretty easy.

Server example (using the ws npm package):

    const WebSocket = require('ws');
    const wss = new WebSocket.Server({ port: 8080 });    // Set up server
    wss.on('connection', function connection(ws) { //   when client connects

      // when client sends something
      ws.on('message', function incoming(message) {
        console.log('received: %s', message);
      });

      // Send a message
      ws.send('Hello client!');
    });

Client example (no need for any package, it's built-in) :

const socket = new WebSocket('ws://localhost:8080');  // Create WebSocket

socket.addEventListener('open', function (event) {    // Connection opened
    socket.send('Hello Server!');
});

socket.addEventListener('message', function (event) { // Listen for messages
    console.log('Message from server ', event.data);
});

There are alternatives if you can't use websockets, such as polling (where the client periodically calls the server to see if theres a message), and long-polling (where the server holds a http request open for an artificially long period of time until a message is ready).

<h3>other method: Server side</h3>
http.createServer(function(req, res) {
    if (req.method == 'GET') {

    } else if (req.method == 'POST') {
        var body = '';
        req.on('data', function(data) {
            body += data;
        });
        req.on('end', function() {
         console.log("We have received your request successfully.");
        });
    }
    res.end("ok");
})

<h2>Ways to Remove Elements From Array</h2>
JavaScript arrays allow you to group values and iterate over them. 

You can add and remove array elements in different ways. 

Unfortunately there is not a simple Array.remove method.
So, how do you delete an element from a JavaScript array?
Instead of a delete method, the JavaScript array has a variety of ways you can clean array values.
You can remove elements from the end of an array using pop, from the beginning using shift, or from the middle using splice. 

The JavaScript Array filter method to create a new array with desired items, a more advanced way to remove unwanted elements.

Removing Elements from End of a JavaScript Array
Removing Elements from Beginning of a JavaScript Array
Using Splice to Remove Array Elements
Removing Array Items By Value Using Splice
The Lodash Array Remove Method
Making a Remove Method
Explicitly Remove Array Elements Using the Delete Operator
Clear or Reset a JavaScript Array
Summary

There are different methods and techniques you can use to remove elements from JavaScript arrays:
pop - Removes from the End of an Array
shift - Removes from the beginning of an Array
splice - removes from a specific Array index
filter - allows you to programatically remove elements from an Array

You will also learn some other ways you can remove elements from an array that may not be so obvious, like with <a href="https://lodash.com">LoDash</a>.
<h3>Removing Elements from End of a JavaScript Array</h3>
JavaScript Array elements can be removed from the end of an array by setting the length property to a value less than the current value. 

Any element whose index is greater than or equal to the new length will be removed.
<code>
    
    var ar = [1, 2, 3, 4, 5, 6];
    
    ar.length = 4; // set length to remove elements
    console.log( ar ); // [1, 2, 3, 4]

</code>
The pop method removes the last element of the array, returns that element, and updates the length property. 

The pop method modifies the array on which it is invoked, This means unlike using delete the last element is removed completely and the array length reduced. 


<code>
    
    var ar = [1, 2, 3, 4, 5, 6];
    
    ar.pop(); // returns 6
    
    console.log( ar ); // [1, 2, 3, 4, 5]
</code><h3>Removing Elements from Beginning of a JavaScript Array</h3>
How do you remove the first element of a JavaScript array?
The shift method works much like the pop method except it removes the first element of a JavaScript array instead of the last.
There are no parameters since the shift method only removed the first array element. 

When the element is removed the remaining elements are shifted down.
<code>
    
    var ar = ['zero', 'one', 'two', 'three'];
    
    ar.shift(); // returns "zero"
    
    console.log( ar ); // ["one", "two", "three"]

</code>
The shift method returns the element that has been removed, updates the indexes of remaining elements, and updates the length property. 

It modifies the array on which it is invoked.
If there are no elements, or the array length is 0, the method returns undefined.
<h3>Using Splice to Remove Array Elements in JavaScript</h3>
The splice method can be used to add or remove elements from an array. 

The first argument specifies the location at which to begin adding or removing elements. 

The second argument specifies the number of elements to remove. 

The third and subsequent arguments are optional; they specify elements to be added to the array.
Here we use the splice method to remove two elements starting from position three (zero based index):
<code>
    
    var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
    var removed = arr.splice(2,2);
    
    
</code>
An array containing the removed elements is returned by the splice method. 

You can see the removed array contains [3, 4] and the original array contains the remaining values.
The splice method can also be used to remove a range of elements from an array.
<code>
    
    var list = ["bar", "baz", "foo", "qux"];
    
    list.splice(0, 2); 
    // Starting at index position 0, remove two elements ["bar", "baz"] and retains ["foo", "qux"].

</code><h3>Removing Array Items By Value Using Splice</h3>
If you know the value you want to remove from an array you can use the splice method. 

First you must identify the index of the target item. 

You then use the index as the start element and remove just one element.
<code>
    
    var arr = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
    
    for( var i = 0; i &lt; arr.length; i++){ 
    
        if ( arr[i] === 5) { 
    
            arr.splice(i, 1); 
        }
    
    }
    
    //=&gt; [1, 2, 3, 4, 6, 7, 8, 9, 0]

</code>
This is a simple example where the elements are integers. 

If you have an array of objects you would need a more sophisticated routine.
This works if you only want to remove a single item. 

If you want to remove multiple items that match your criteria there is a glitch.
As the items are removed from the array the index still increments and the next item after your matched value is skipped.
The simple solution is to modify the above example to decrement the index variable so it does not skip the next item in the array.
<code>
    
    var arr = [1, 2, 3, 4, 5, 5, 6, 7, 8, 5, 9, 0];
    
    for( var i = 0; i &lt; arr.length; i++){ 
                                   
        if ( arr[i] === 5) { 
            arr.splice(i, 1); 
            i--; 
        }
    }

    //=&gt; [1, 2, 3, 4, 6, 7, 8, 9, 0]
    
</code>
In the modified example I added 2 additional 5 values to the array. 

I also added 'i--;' after the splice call.
Now when you execute the loop it will remove every matching item.
Thanks to Kristian Sletten for pointing out the issue with the loop skipping the following item.
<h3>Using the Array filter Method to Remove Items By Value</h3>
Unlike the splice method, filter creates a new array. 

filter() does not mutate the array on which it is called, but returns a new array.
filter() has a single parameter, a callback method. 

The callback is triggered as the filter method iterates through the array elements. 

It will pass three values to the callback: the current value or element, the current array index and the full array.
The callback method should return either true or false. 

It is your responsibility to test the value (element) to see if it meets your criteria. 

If it does you can return true. 

Elements that return true are added to the new, filtered array.
<code>
    
    var array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
    var filtered = array.filter(function(value, index, arr){ 
        return value &gt; 5;
    });
    //filtered =&gt; [6, 7, 8, 9]
    //array =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]

</code>
You should note a new array containing matching values is returned. 

The original array is left untouched. 

I find this useful because I often want to retain an original data source, but retrieve subsets based on different logic sets.
<h3>The Lodash Array Remove Method</h3>
Sometimes utility libraries are the best way to solve more complex problems. 

Lodash provides a rich set of array manipulation methods, one being remove.
The Lodash remove method works much like the array filter method, but sort of in reverse. 

It does not save the original array values, but removes matching elements. 

It returns the matching elements as a new array.
<code>var array = [1, 2, 3, 4];var evens = _.remove(array, function(n) { return n % 2 === 0;});console.log(array);// =&gt; [1, 3]console.log(evens);// =&gt; [2, 4]</code><h3>Making a Remove Method</h3>
As I mentionmed before, there is no native Array.remove method. 

The Lodash method does solve this problem, but you may not always want to use Lodash. 

This does not mean you cannot create a utility method. 

John Resig gave us a <a href="https://johnresig.com/blog/javascript-array-remove/">model to follow</a>, however he extended the Array prototype, which is a bad idea.
Instead I created an Array remove utility method that can be added to a helper or utility library. 

Like the Lodash remove method the first parameter is the target array. 

It uses Array.filter to return elements not matching a value.
<code>
    
    function arrayRemove(arr, value) { 
    
        return arr.filter(function(ele){ 
            return ele != value; 
        });
    }
    
    var result = arrayRemove(array, 6);
    // result = [1, 2, 3, 4, 5, 7, 8, 9, 0]

</code>This method is simple, it assumes simple values like numbers or strings. 

You could modify this method to use a customcomparison method, but I think it would be easier to just use the filter method directly.

<h3>Explicitly Remove Array Elements Using the Delete Operator</h3>
You can remove specific array elements using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete" rel="noopener" target="_blank">delete operator</a>:
<code>
    
    var ar = [1, 2, 3, 4, 5, 6];
    
    delete ar[4]; // delete element with index 4
    
    console.log( ar ); 
    
    // [1, 2, 3, 4, undefined, 6]
    
    alert( ar ); 
    
    // 1,2,3,4,,6

</code>
Using the delete operator does not affect the length property. 

Nor does it affect the indexes of subsequent elements. 

The array becomes sparse, which is a fancy way of saying the deleted item is not removed but becomes undefined. 

Compare using delete with the splice method described below.
The delete operator is designed to remove properties from JavaScript objects, which arrays are objects.
The reason the element is not actually removed from the array is the delete operator is more about freeing memory than deleting an element. 

The memory is freed when there are no more references to the value.
<h3>Clear or Reset a JavaScript Array</h3>
What if you want to empty an entire array and just dump all of it's elements?
There are a couple of techniques you can use to create an empty or new array.
The simplest and fastest technique is to set an array variable to an empty array:
<code>

var ar = [1, 2, 3, 4, 5, 6];
//do stuffar = [];
//a new, empty array!

</code>
The problem this can create is when you have references to the variable. 

The references to this variable will not change, they will still hold the original array's values. 

This of course can create a bug🐛.
This is an over simplified example of this scenario:
<code>

var arr1 = [1, 2, 3, 4, 5, 6];
var arr2 = arr1; 
    // Reference arr1 by another variable arr1 = [];
    
console.log(arr2); 
// Output [1, 2, 3, 4, 5, 6]

</code>
A simple trick to clear an array is to set its length property to 0.
<code>

var ar = [1, 2, 3, 4, 5, 6];

console.log(ar); 
// Output [1, 2, 3, 4, 5, 6]

ar.length = 0;

console.log(ar); 

// Output []

</code>
Another, sort of unnatural technique, is to use the splice method, passing the array length as the 2nd parameter. 

This will return a copy of the original elements, which may be handy for your scenario.
<code>

var ar = [1, 2, 3, 4, 5, 6];

console.log(ar); 
// Output [1, 2, 3, 4, 5, 6]
ar.splice(0, ar.length);
console.log(ar); 
// Output []
</code>
The last two techniques don't create a new array, but change the array's elements. 

This means references should also update.
There is another way, using a while loop. 

It feels a little odd to me, but at the same time looks fancy, so it may impress some friends!
<code>

var ar = [1, 2, 3, 4, 5, 6];

console.log(ar); 
// Output [1, 2, 3, 4, 5, 6] 

while (ar.length) { 
    ar.pop(); 
}

console.log(ar); 

// Output []

</code>
Not a way I would go about clearing a JavaScript array, but it works and it is readable. 

Some performance test have also shown this to be the fastest technique, so maybe it is better than I originally thought!
<h3>Summary</h3>
Removing JavaScript Array items is important to managing your data. 

There is not a single 'remove' method available, but there are different methods and techniques you can use to purge unwanted array items.

<h2>four flavors of Object-Oriented Programming</h2>
There are four ways to write Object-Oriented Programming in JavaScript. 

They are:
Using Constructor functions
Using Classes
Using Objects Linking to Other Objects (OLOO)
Using Factory functions
<h3><strong>Using Constructor functions</strong></h3>
Constructors are functions that contain a <code>this</code> keyword.

<code><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
  <span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
  <span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
<span class="green">}</span></code>

<code>this</code> lets you store (and access) unique values created for each instance. 

You can create an instance with the <code>new</code> keyword.

<code><span class="blue">const</span> chris <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span>

<span class="blue">const</span> zell <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Zell'</span><span class="green">,</span> <span class="gray">'Liew'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>zell<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Zell</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>zell<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Liew</span></code>

<h3><strong>Class syntax</strong></h3>
Classes are said to be the “syntactic sugar” of Constructor functions. 

As in, Classes are an easier way of writing Constructor functions.

There’s serious contention about whether Classes are bad (like <a href="https://everyday.codes/javascript/please-stop-using-classes-in-javascript/">this</a> and <a href="https://www.toptal.com/javascript/es6-class-chaos-keeps-js-developer-up">this</a>). 

We’re not going to dive into those arguments here. 

Instead, we’re just going to look at how to write code with Classes and decide whether Classes are better than constructors based on the code we write.

Classes can be written with the following syntax:

<code><span class="blue">class</span> <span class="lime">Human</span> <span class="green">{</span>
  <span class="purple">constructor</span><span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span>
    <span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
    <span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
  <span class="green">}</span>
<span class="green">}</span></code>

Notice the <code>constructor</code> function contains the same code as the Constructor syntax above? We need to do this since we want to initialize values into <code>this</code>. 

(We can skip <code>constructor</code> if we don’t need to initialize values. 

More on this later under Inheritance).

At first glance, classes seem to be inferior to constructors — there’s more code to write! Hold your horses and don’t form a conclusion at this point. 

We have a lot more to cover. 

Classes begin to shine later.

As before, you can create an instance with the <code>new</code> keyword.

<code><span class="blue">const</span> chris <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>

console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></code>

<h3><strong>Objects Linking to Other Objects (OLOO)</strong></h3>
OLOO was coined and popularized by <a href="https://twitter.com/getify">Kyle Simpson</a>. 

In OLOO, you define the blueprint as a normal object. 

You then use a method (often named <code>init</code>, but that isn’t required in the way <code>constructor</code> is to a Class) to initialize the instance.

<code><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
  <span class="purple">init</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span> <span class="green">)</span> <span class="green">{</span>
    <span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
    <span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
  <span class="green">}</span>
<span class="green">}</span></code>

You use <code>Object.create</code> to create an instance. 

After creating the instance, you need to run your <code>init</code> function.

<code><span class="blue">const</span> chris <span class="brown">=</span> Object<span class="green">.</span><span class="purple">create</span><span class="green">(</span>Human<span class="green">)</span>
chris<span class="green">.</span><span class="purple">init</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>

console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></code>

You can chain <code>init</code> after <code>Object.create</code> if you returned <code>this</code> inside <code>init</code>.

<code><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
  <span class="purple">init</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
    <span class="gray">// ...</span>
    <span class="blue">return</span> <span class="blue">this</span> 
  <span class="green">}</span>
<span class="green">}</span>

<span class="blue">const</span> chris <span class="brown">=</span> Object<span class="green">.</span><span class="purple">create</span><span class="green">(</span>Human<span class="green">)</span><span class="green">.</span><span class="purple">init</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></code>

<h3>Factory functions</h3>
Factory functions are functions that return an object. 

You can return any object. 

You can even return a Class instance or OLOO instance — and it’ll still be a valid Factory function.

Here’s the simplest way to create Factory functions:

<code><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
  <span class="blue">return</span> <span class="green">{</span>
    firstName<span class="green">,</span>
    lastName
  <span class="green">}</span>
<span class="green">}</span></code>

You don’t need <code>new</code> to create instances with Factory functions. 

You simply call the function.

<code><span class="blue">const</span> chris <span class="brown">=</span> <span class="purple">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>

console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>firstName<span class="green">)</span> <span class="gray">// Chris</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">.</span>lastName<span class="green">)</span> <span class="gray">// Coyier</span></code>

<hr class="wp-block-separator">
Now that we’ve seen these four OOP setup possibilities, let’s look at how you declare properties and methods on each of them so we can get a little better understanding of working with them before getting to the bigger comparisons we’re trying to make.

<hr class="wp-block-separator">
<h3 class="ticss-8991d7da">Declaring properties and methods</h3>
Methods are functions declared as an object’s property.

<code><span class="blue">const</span> someObject <span class="brown">=</span> <span class="green">{</span>
  <span class="purple">someMethod</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/* ... 

*/</span> <span class="green">}</span>
<span class="green">}</span></code>

In Object-Oriented Programming, there are two ways to declare properties and methods:

Directly on the instance
In the Prototype

Let’s learn to do both.

<h3><strong>Declaring properties and methods with Constructors</strong></h3>
If you want to declare a property directly on an instance, you can write the property inside the constructor function. 

Make sure to set it as the property for <code>this</code>.

<code><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
  <span class="gray">// Declares properties</span>
  <span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
  <span class="blue">this</span><span class="green">.</span>lastname <span class="brown">=</span> lastName

  <span class="gray">// Declares methods</span>
  <span class="blue">this</span><span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
    console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
  <span class="green">}</span>
<span class="green">}</span>

<span class="blue">const</span> chris <span class="brown">=</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">)</span></code>

<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997536957_constructor-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997536957_constructor-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997536957_constructor-direct.png"/></noscript></figure>
Methods are commonly declared on the Prototype because Prototype allows instances to use the same method. 

It’s a smaller “code footprint.”

To declare properties on the Prototype, you need to use the <code>prototype</code> property.

<code><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
  <span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
  <span class="blue">this</span><span class="green">.</span>lastname <span class="brown">=</span> lastName
<span class="green">}</span>

<span class="gray">// Declaring method on a prototype</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
  console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="blue">this</span><span class="green">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
<span class="green">}</span></code>

<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997564925_constructor-prototype.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997564925_constructor-prototype.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997564925_constructor-prototype.png"/></noscript></figure>
It can be clunky if you want to declare multiple methods in a Prototype.

<code><span class="gray">// Declaring methods on a prototype</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">method1</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">method2</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="lime">Human</span><span class="green">.</span>prototype<span class="green">.</span><span class="purple-variable function">method3</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span></code>

You can make things easier by using merging functions like <code>Object.assign</code>.

<code>Object<span class="green">.</span><span class="purple">assign</span><span class="green">(</span><span class="lime">Human</span><span class="green">.</span>prototype<span class="green">,</span> <span class="green">{</span>
  <span class="purple">method1</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span><span class="green">,</span>
  <span class="purple">method2</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span><span class="green">,</span>
  <span class="purple">method3</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="green">}</span><span class="green">)</span></code>

<code>Object.assign</code> does not support the merging of Getter and Setter functions. 

You need another tool. 

<a href="https://zellwk.com/blog/copy-properties-of-one-object-to-another-object/">Here’s why</a>. 

And here’s <a href="https://zellwk.com/blog/creating-a-deep-assign-library/">a tool</a> I created to merge objects with Getters and Setters.

<h3><strong>Declaring properties and methods with Classes</strong></h3>
You can declare properties for each instance inside the <code>constructor</code> function.

<code><span class="blue">class</span> <span class="lime">Human</span> <span class="green">{</span>
  <span class="purple">constructor</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span>
    <span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
      <span class="blue">this</span><span class="green">.</span>lastname <span class="brown">=</span> lastName

      <span class="blue">this</span><span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
        console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
      <span class="green">}</span>
  <span class="green">}</span>
<span class="green">}</span></code>

<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997634570_class-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997634570_class-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997634570_class-direct.png"/></noscript></figure>
It’s easier to declare methods on the prototype. 

You write the method after <code>constructor</code> like a normal function.

<code><span class="blue">class</span> <span class="lime">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
  <span class="purple">constructor</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/* ... 

*/</span> <span class="green">}</span>

  <span class="purple">sayHello</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
    console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="blue">this</span><span class="green">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
  <span class="green">}</span>
<span class="green">}</span></code>

<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997758020_class-prototype.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997758020_class-prototype.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997758020_class-prototype.png"/></noscript></figure>
It’s easier to declare multiple methods on Classes compared to Constructors. 

You don’t need the <code>Object.assign</code> syntax. 

You just write more functions.

<strong>Note:</strong> there’s no <code>,</code> between method declarations in a Class.

<code><span class="blue">class</span> <span class="lime">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
  <span class="purple">constructor</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/* ... 

*/</span> <span class="green">}</span>

  <span class="purple">method1</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
  <span class="purple">method2</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
  <span class="purple">method3</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span>
<span class="green">}</span></code>

<h3><strong>Declaring properties and methods with OLOO</strong></h3>
You use the same process for declaring properties and methods on an instance. 

You assign them as a property of <code>this</code>.

<code><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
  <span class="purple">init</span> <span class="green">(</span><span class="token parameter">firstName<span class="green">,</span> lastName</span><span class="green">)</span> <span class="green">{</span>
    <span class="blue">this</span><span class="green">.</span>firstName <span class="brown">=</span> firstName
    <span class="blue">this</span><span class="green">.</span>lastName <span class="brown">=</span> lastName
    <span class="blue">this</span><span class="green">.</span><span class="purple-variable function">sayHello</span> <span class="brown">=</span> <span class="blue">function</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
      console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
    <span class="green">}</span>

    <span class="blue">return</span> <span class="blue">this</span>
  <span class="green">}</span>
<span class="green">}</span>

<span class="blue">const</span> chris <span class="brown">=</span> Object<span class="green">.</span><span class="purple">create</span><span class="green">(</span>Human<span class="green">)</span><span class="green">.</span><span class="purple">init</span><span class="green">(</span><span class="gray">'Chris'</span><span class="green">,</span> <span class="gray">'Coyier'</span><span class="green">)</span>
console<span class="green">.</span><span class="purple">log</span><span class="green">(</span>chris<span class="green">)</span></code>

<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997786485_oloo-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997786485_oloo-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997786485_oloo-direct.png"/></noscript></figure>
To declare methods in the prototype, you write the method like a normal object.

<code><span class="blue">const</span> Human <span class="brown">=</span> <span class="green">{</span>
  <span class="purple">init</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span> <span class="gray">/*...*/</span> <span class="green">}</span><span class="green">,</span>
  <span class="purple">sayHello</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
    console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="blue">this</span><span class="green">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
  <span class="green">}</span>
<span class="green">}</span></code>

<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997806115_oloo-prototype.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997806115_oloo-prototype.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997806115_oloo-prototype.png"/></noscript></figure>
<h3><strong>Declaring properties and methods with Factory functions</strong></h3>
You can declare properties and methods directly by including them in the returned object.

<code><span class="blue">function</span> <span class="purple">Human</span> <span class="green">(</span>firstName<span class="green">,</span> lastName<span class="green">)</span> <span class="green">{</span>
  <span class="blue">return</span> <span class="green">{</span>
    firstName<span class="green">,</span>
    lastName<span class="green">,</span> 
    <span class="purple">sayHello</span> <span class="green">(</span><span class="green">)</span> <span class="green">{</span>
      console<span class="green">.</span><span class="purple">log</span><span class="green">(</span><span class="token template-string"><span class="gray">`Hello, I'm </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="gray">`</span></span><span class="green">)</span>
    <span class="green">}</span>
  <span class="green">}</span>
<span class="green">}</span></code>

<figure class="wp-block-image"><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997821635_ff-direct.png" data-lazy-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997821635_ff-direct.png?is-pending-load=1" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class=" jetpack-lazy-image"><noscript><img class="lazy" data-src="https://paper-attachments.dropbox.com/s_AB4BC977DF2BBAB3F9B097592E16C7567C493B52A668B2A322B5360BC04D43E9_1597997821635_ff-direct.png"/></noscript></figure>
You cannot declare methods on the Prototype when you use Factory functions. 

If you really want methods on the prototype, you need to return a Constructor, Class, or OLOO instance. 

(Don’t do this since it doesn’t make any sense.)

<code><span class="gray">// Do not do this</span>
<span class="blue">function</span> <span class="purple">createHuman</span> <span class="green">(</span><span class="token parameter"><span class="brown">...</span>args</span><span class="green">)</span> <span class="green">{</span>
  <span class="blue">return</span> <span class="blue">new</span> <span class="lime">Human</span><span class="green">(</span><span class="brown">...</span>args<span class="green">)</span>
<span class="green">}</span></code>

<h2>Creating and using constructors</h2>
<a href="https://www.youtube.com/watch?v=5AWRivBk0Gw" class="whitebut ">What are Classes, Objects, and Constructors?</a>
Constructors are like regular functions, but we use them with the <code>new</code> keyword. 

There are two types of constructors: built-in constructors such as <code>Array</code> and <code>Object</code>, which are available automatically in the execution environment at runtime; and custom constructors, which define properties and methods for your own type of object.

A constructor is useful when you want to create multiple similar objects with the same properties and methods. 

It’s a convention to capitalize the name of constructors to distinguish them from regular functions. 

Consider the following code:

<code><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span><span class="purple">)</span> <span class="purple">{</span> 
  <span class="gray">// unfinished code</span>
<span class="purple">}</span> 

<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="purple">)</span><span class="purple">;</span></code>

The last line of the code creates an instance of <code>Book</code> and assigns it to a variable. 

Although the <code>Book</code> constructor doesn’t do anything, <code>myBook</code> is still an instance of it. 

As you can see, there is no difference between this function and regular functions except that it’s called with the <code>new</code> keyword and the function name is capitalized.

<h3>Determining the type of an instance</h3>
To find out whether an object is an instance of another one, we use the <code>instanceof</code> operator:

<code>myBook <span class="orange">instanceof</span> <span class="token class-name">Book</span>    <span class="gray">// true</span>
myBook <span class="orange">instanceof</span> <span class="token class-name">String</span>  <span class="gray">// false</span></code>

Note that if the right side of the <code>instanceof</code> operator isn’t a function, it will throw an error:

<code>myBook <span class="orange">instanceof</span> <span class="purple">{</span><span class="purple">}</span><span class="purple">;</span>
<span class="gray">// TypeError: invalid 'instanceof' operand ({})</span></code>

Another way to find the type of an instance is to use the <code>constructor</code> property. 

Consider the following code fragment:

<code>myBook<span class="purple">.</span>constructor <span class="token operator">===</span> Book<span class="purple">;</span>   <span class="gray">// true</span></code>

The constructor property of <code>myBook</code> points to <code>Book</code>, so the strict equality operator returns <code>true</code>. 

Every object in JavaScript inherits a <code>constructor</code> property from its prototype, which points to the constructor function that has created the object:

<code><span class="orange">var</span> s <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">String</span><span class="purple">(</span><span class="token string">"text"</span><span class="purple">)</span><span class="purple">;</span>
s<span class="purple">.</span>constructor <span class="token operator">===</span> String<span class="purple">;</span>      <span class="gray">// true</span>

<span class="token string">"text"</span><span class="purple">.</span>constructor <span class="token operator">===</span> String<span class="purple">;</span> <span class="gray">// true</span>

<span class="orange">var</span> o <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Object</span><span class="purple">(</span><span class="purple">)</span><span class="purple">;</span>
o<span class="purple">.</span>constructor <span class="token operator">===</span> Object<span class="purple">;</span>      <span class="gray">// true</span>

<span class="orange">var</span> o <span class="token operator">=</span> <span class="purple">{</span><span class="purple">}</span><span class="purple">;</span>
o<span class="purple">.</span>constructor <span class="token operator">===</span> Object<span class="purple">;</span>      <span class="gray">// true</span>

<span class="orange">var</span> a <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Array</span><span class="purple">(</span><span class="purple">)</span><span class="purple">;</span>
a<span class="purple">.</span>constructor <span class="token operator">===</span> Array<span class="purple">;</span>       <span class="gray">// true</span>

<span class="purple">[</span><span class="purple">]</span><span class="purple">.</span>constructor <span class="token operator">===</span> Array<span class="purple">;</span>      <span class="gray">// true</span></code>

Note, however, that using the <code>constructor</code> property to check the type of an instance is generally considered bad practice because it can be overwritten.

<h3>Custom constructor functions</h3>
A constructor is like a cookie-cutter for making multiple objects with the same properties and methods. 

Consider the following example:

<code><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span> <span class="purple">{</span>
  <span class="orange">this</span><span class="purple">.</span>name <span class="token operator">=</span> name<span class="purple">;</span>
  <span class="orange">this</span><span class="purple">.</span>year <span class="token operator">=</span> <span class="token string">'('</span> <span class="token operator">+</span> year <span class="token operator">+</span> <span class="token string">')'</span><span class="purple">;</span>
<span class="purple">}</span></code>

The <code>Book</code> constructor expects two parameters: <code>name</code> and <code>year</code>. 

When the constructor is called with the <code>new</code> keyword, it assigns the received parameters to the <code>name</code> and <code>year</code> property of the current instance, as shown below: 

<code><span class="orange">var</span> firstBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"Pro AngularJS"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>
<span class="orange">var</span> secondBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"Secrets Of The JavaScript Ninja"</span><span class="purple">,</span> <span class="token number">2013</span><span class="purple">)</span><span class="purple">;</span> 
<span class="orange">var</span> thirdBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"JavaScript Patterns"</span><span class="purple">,</span> <span class="token number">2010</span><span class="purple">)</span><span class="purple">;</span>
 
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>firstBook<span class="purple">.</span>name<span class="purple">,</span> firstBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>           
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>secondBook<span class="purple">.</span>name<span class="purple">,</span> secondBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>           
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>thirdBook<span class="purple">.</span>name<span class="purple">,</span> thirdBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>  </code>

This code logs the following to the console:

<figure id="post-208619" class="align-right media-208619"><img class="lazy" data-src="https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png" data-recalc-dims="1" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?w=744&amp;ssl=1 744w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?resize=300%2C68&amp;ssl=1 300w" class="jetpack-lazy-image jetpack-lazy-image--handled" data-lazy-loaded="1" sizes="(min-width: 735px) 864px, 96vw"><noscript><img sizes="(min-width: 735px) 864px, 96vw" srcset="https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?w=744&ssl=1 744w, https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png?resize=300%2C68&ssl=1 300w" src='https://i0.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log.png' alt='' data-recalc-dims="1" /></noscript></figure>
As you can see, we can quickly build a large number of different book objects by invoking the <code>Book</code> constructor with different arguments. 

This is exactly the same pattern that JavaScript uses in its built-in constructors like <code>Array()</code> and <code>Date()</code>.

<h3>The Object.defineProperty() method</h3>
The <code>Object.defineProperty()</code> method can be used inside a constructor to help perform all necessary property setup. 

Consider the following constructor:

<code><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">)</span> <span class="purple">{</span> 
  Object<span class="purple">.</span><span class="brown">defineProperty</span><span class="purple">(</span><span class="orange">this</span><span class="purple">,</span> <span class="token string">"name"</span><span class="purple">,</span> <span class="purple">{</span> 
      <span class="brown-variable function">get</span><span class="purple">:</span> <span class="orange">function</span><span class="purple">(</span><span class="purple">)</span> <span class="purple">{</span> 
        <span class="orange">return</span> <span class="token string">"Book: "</span> <span class="token operator">+</span> name<span class="purple">;</span>       
      <span class="purple">}</span><span class="purple">,</span>        
      <span class="brown-variable function">set</span><span class="purple">:</span> <span class="orange">function</span><span class="purple">(</span><span class="token parameter">newName</span><span class="purple">)</span> <span class="purple">{</span>            
        name <span class="token operator">=</span> newName<span class="purple">;</span>        
      <span class="purple">}</span><span class="purple">,</span>               
      configurable<span class="purple">:</span> <span class="token boolean">false</span>     
   <span class="purple">}</span><span class="purple">)</span><span class="purple">;</span> 
<span class="purple">}</span>

<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"Single Page Web Applications"</span><span class="purple">)</span><span class="purple">;</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">)</span><span class="purple">;</span>    <span class="gray">// Book: Single Page Web Applications</span>

<span class="gray">// we cannot delete the name property because "configurable" is set to false</span>
<span class="orange">delete</span> myBook<span class="purple">.</span>name<span class="purple">;</span>    
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">)</span><span class="purple">;</span>    <span class="gray">// Book: Single Page Web Applications</span>

<span class="gray">// but we can change the value of the name property</span>
myBook<span class="purple">.</span>name <span class="token operator">=</span> <span class="token string">"Testable JavaScript"</span><span class="purple">;</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">)</span><span class="purple">;</span>    <span class="gray">// Book: Testable JavaScript</span></code>

This code uses <code>Object.defineProperty()</code> to define accessor properties. 

Accessor properties don’t include any properties or methods, but they define a getter to call when the property is read, and a setter to call when the property is written to.

A getter is expected to return a value, while a setter receives the value being assigned to the property as an argument. 

The constructor above returns an instance whose <code>name</code> property can be set or changed, but cannot be deleted. 

When we get the value of <code>name</code>, the getter prepends the string <code>Book:</code> to the name and returns it.

<h3>Object literal notations are preferred to constructors</h3>
The JavaScript language has nine built-in constructors: <code>Object()</code>, <code>Array()</code>, <code>String()</code>, <code>Number()</code>, <code>Boolean()</code>, <code>Date()</code>, <code>Function()</code>, <code>Error()</code> and <code>RegExp()</code>. 

When creating values, we are free to use either object literals or constructors. 

However, object literals are not only easier to read but also faster to run, because they can be optimize at parse time. 

Thus, for simple objects it’s best to stick with literals:

<code><span class="gray">// a number object</span>
<span class="gray">// numbers have a toFixed() method</span>
<span class="orange">var</span> obj <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Object</span><span class="purple">(</span><span class="token number">5</span><span class="purple">)</span><span class="purple">;</span>
obj<span class="purple">.</span><span class="brown">toFixed</span><span class="purple">(</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>     <span class="gray">// 5.00</span>

<span class="gray">// we can achieve the same result using literals</span>
<span class="orange">var</span> num <span class="token operator">=</span> <span class="token number">5</span><span class="purple">;</span>
num<span class="purple">.</span><span class="brown">toFixed</span><span class="purple">(</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>     <span class="gray">// 5.00</span>

<span class="gray">// a string object</span>
<span class="gray">// strings have a slice() method </span>
<span class="orange">var</span> obj <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">String</span><span class="purple">(</span><span class="token string">"text"</span><span class="purple">)</span><span class="purple">;</span>
obj<span class="purple">.</span><span class="brown">slice</span><span class="purple">(</span><span class="token number">0</span><span class="purple">,</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>     <span class="gray">// "te"</span>

<span class="gray">// same as above</span>
<span class="orange">var</span> string <span class="token operator">=</span> <span class="token string">"text"</span><span class="purple">;</span>
string<span class="purple">.</span><span class="brown">slice</span><span class="purple">(</span><span class="token number">0</span><span class="purple">,</span><span class="token number">2</span><span class="purple">)</span><span class="purple">;</span>  <span class="gray">// "te"</span></code>

As you can see, there’s hardly any difference between object literals and constructors. 

What’s more intersting is that it’s still possible to call methods on literals. 

When a method is called on a literal, JavaScript automatically converts the literal into a temporary object so that the method can perform the operation. 

Once the temporary object is no longer needed, JavaScript discards it. 

<h3>Using the new keyword is essential</h3>
It’s important to remember to use the <code>new</code> keyword before all constructors. 

If you accidentally forget <code>new</code>, you will be modifying the global object instead of the newly created object. 

Consider the following example:

<code><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span> <span class="purple">{</span>
  console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span><span class="orange">this</span><span class="purple">)</span><span class="purple">;</span>
  <span class="orange">this</span><span class="purple">.</span>name <span class="token operator">=</span> name<span class="purple">;</span>
  <span class="orange">this</span><span class="purple">.</span>year <span class="token operator">=</span> year<span class="purple">;</span>
<span class="purple">}</span>

<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="brown">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>window<span class="purple">.</span>name<span class="purple">,</span> window<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span>

<span class="orange">var</span> myBook <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>  
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>myBook<span class="purple">.</span>name<span class="purple">,</span> myBook<span class="purple">.</span>year<span class="purple">)</span><span class="purple">;</span></code>

Here’s what this code logs to the console:

<figure id="post-208621" class="align-right media-208621"><img class="lazy" data-src="https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png" data-recalc-dims="1" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?w=766&amp;ssl=1 766w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?resize=300%2C91&amp;ssl=1 300w" class="jetpack-lazy-image jetpack-lazy-image--handled" data-lazy-loaded="1" sizes="(min-width: 735px) 864px, 96vw"><noscript><img sizes="(min-width: 735px) 864px, 96vw" srcset="https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?w=766&ssl=1 766w, https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png?resize=300%2C91&ssl=1 300w" src='https://i1.wp.com/css-tricks.com/wp-content/uploads/2015/09/console-log-2.png' alt='' data-recalc-dims="1" /></noscript></figure>
When we call the <code>Book</code> constructor without <code>new</code>, we are in fact calling a function without a return statement. 

As a result, <code>this</code> inside the constructor points to <code>Window</code> (instead of <code>myBook</code>), and two global variables are created. 

However, when we call the function with <code>new</code>, the context is switched from global (Window) to the instance. 

So, <code>this</code> correctly points to <code>myBook</code>. 

Note that in strict mode this code would throw an error because strict mode is designed to protect the programmer from accidentally calling a constructor without the <code>new</code> keyword.

<h3>Scope-safe constructors</h3>
As we have seen, a constructor is simply a function, so it can be called without the <code>new</code> keyword. 

But, for inexperienced programmers, this can be a source of bugs. 

A scope-safe constructor is designed to return the same result regardless of whether it’s called with or without <code>new</code>, so it doesn’t suffer from those issues.

Most built-in constructors, such as <code>Object</code>, <code>Regex</code> and <code>Array</code>, are scope-safe. 

They use a special pattern to determine how the constructor is called. 

If <code>new</code> isn’t used, they return a proper instance of the object by calling the constructor again with <code>new</code>. 

Consider the following code:

<code><span class="orange">function</span> <span class="brown">Fn</span><span class="purple">(</span>argument<span class="purple">)</span> <span class="purple">{</span> 

  <span class="gray">// if "this" is not an instance of the constructor</span>
  <span class="gray">// it means it was called without new  </span>
  <span class="orange">if</span> <span class="purple">(</span><span class="token operator">!</span><span class="purple">(</span><span class="orange">this</span> <span class="orange">instanceof</span> <span class="token class-name">Fn</span><span class="purple">)</span><span class="purple">)</span> <span class="purple">{</span> 

    <span class="gray">// call the constructor again with new</span>
    <span class="orange">return</span> <span class="orange">new</span> <span class="token class-name">Fn</span><span class="purple">(</span>argument<span class="purple">)</span><span class="purple">;</span>
  <span class="purple">}</span> 
<span class="purple">}</span></code>

So, a scope-safe version of our constructor would look like this:

<code><span class="orange">function</span> <span class="brown">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span> <span class="purple">{</span> 
  <span class="orange">if</span> <span class="purple">(</span><span class="token operator">!</span><span class="purple">(</span><span class="orange">this</span> <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">)</span> <span class="purple">{</span> 
    <span class="orange">return</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span>name<span class="purple">,</span> year<span class="purple">)</span><span class="purple">;</span>
  <span class="purple">}</span>
  <span class="orange">this</span><span class="purple">.</span>name <span class="token operator">=</span> name<span class="purple">;</span>
  <span class="orange">this</span><span class="purple">.</span>year <span class="token operator">=</span> year<span class="purple">;</span>
<span class="purple">}</span>

<span class="orange">var</span> person1 <span class="token operator">=</span> <span class="orange">new</span> <span class="token class-name">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>
<span class="orange">var</span> person2 <span class="token operator">=</span> <span class="brown">Book</span><span class="purple">(</span><span class="token string">"js book"</span><span class="purple">,</span> <span class="token number">2014</span><span class="purple">)</span><span class="purple">;</span>

console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>person1 <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>    <span class="gray">// true</span>
console<span class="purple">.</span><span class="brown">log</span><span class="purple">(</span>person2 <span class="orange">instanceof</span> <span class="token class-name">Book</span><span class="purple">)</span><span class="purple">;</span>    <span class="gray">// true</span></code>

<h3>Conclusion</h3>
It’s important to understand that the class declaration introduced in ES2015 simply works as syntactic sugar over the existing prototype-based inheritance and does not add anything new to JavaScript. 

Constructors and prototypes are JavaScript’s primary way of defining similar and related objects.

Constructors are like regular functions, but they are used with the <code>new</code> keyword. 

We saw how constructors enable us to quickly make multiple similar objects with the same properties and methods, and why the <code>instanceof</code> operator is the safest way to determine the type of an instance. 

Finally, we looked at scope-safe constructors, which can be called with or without <code>new</code>.

<h2><span class="orange">Flappy bird in Javascript with 25 lines of code</span></h2>
<h2><span class="orange">You can write shell scripts in Javascript?!</span></h2>
<h2><span class="orange">Simple Javascript Reduce Tutorial - By making banana bread</span></h2>
<h2><span class="orange">Chrome Inspector Tutorial - [Chrome Developer Tools]</span></h2>
<h2><span class="orange">Javascript Ternary Operator (Short If) Explained</span></h2>
<h2><span class="orange">React.js tutorial - Sliding puzzle game with custom image</span></h2>
<h2><span class="orange">Javascript Every Function explained - by making our own custom implementation</span></h2>
<h2><span class="orange">Simplified Oauth 2.0 Tutorial - Example with Node.js</span></h2>
<h2><span class="orange">Easiest Web Development Setup Tutorial with VS Code</span></h2>
<h2><span class="orange">Vim macros in VS Code Superpowers - Tutorial</span></h2>
<h2><span class="orange">Live Clock Wallpaper in Node.js Tutorial - [Read files with fs, Node Cron job with node-cron]</span></h2>
<h2><span class="orange">Handling multiple Promises in Javascript - [all, allSettled, any, race]</span></h2>
<h2><span class="orange">Code formatting with Pretties as a Github action - Tutorial</span></h2>
<h2><span class="orange">How to Validate JSON in Javascript - Tutorial and Example</span></h2>
<h2><span class="orange">First steps into Functional Programming in Javascript - Composition Example</span></h2>
<h2><span class="orange">Full Video Background Tutorial using Bideo.js - [HTML, CSS, Javascript]</span></h2>
<h2><span class="orange">CSS only Infinitely Scrolling Background  |  TUTORIAL  |  [Clamp, Keyframes, Animation]</span></h2>
<h2><span class="orange">What is a Webhook? - Explained simply with fun example - [Home assistant, IFTTT, Geolocation]</span></h2>
<h2><span class="orange">Trading Bot built with Node and Firebase - 100 day profit report</span></h2>
<h2><span class="orange">Build a Game in React with Recoil [Part 3/3] - Inputs &amp; Game Logic</span></h2>
<h2><span class="orange">Learn Javascript the fun way - Live Weather Tab [Geolocation, setInterval, Closures]</span></h2>
<h2><span class="orange">Deno - Where are the packages and compiled files located?</span></h2>
<h2><span class="orange">Build a Game in React with Recoil [Part 2/3] - Populating the World</span></h2>
<h2><span class="orange">Vite - Super fast build tool [Project Setup]</span></h2>
<h2><span class="orange">How to Debug Deno in VS Code</span></h2>
<h2><span class="orange">Build a Game in React with Recoil [Part 1/3] - Creating the World</span></h2>
<h2><span class="orange">Vim in VS Code - [My setup to avoid the mouse]</span></h2>
<h2><span class="orange">Build a GraphQL server in Deno using Oak - [Getting started tutorial]</span></h2>
<h2><span class="orange">React Recoil Todo List with LocalStorage Persistance</span></h2>
<h2><span class="orange">Vanilla Javascript game development - [Othello Burger flipper]</span></h2>
<h2><span class="orange">Deno Tutorial - Getting started [Installation, Hello World, Import, Fetch]</span></h2>
<h2><span class="orange">Tips for writing High Quality Javascript</span></h2>
<h2><span class="orange">Build a Periodic Table from an API in React - [Javascript, CSS]</span></h2>

<h2>HTML Canvas Reference</h2>
The HTML <code>&lt;canvas&gt;</code> tag is used to draw graphics, on the fly, via scripting (usually JavaScript).

<h3>Colors, Styles, and Shadows</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_fillstyle.asp">fillStyle</a>	Sets or returns the color, gradient, or pattern used to fill the drawing	
<a href="https://www.w3schools.com/tags/canvas_strokestyle.asp">strokeStyle</a>	Sets or returns the color, gradient, or pattern used for strokes	
<a href="https://www.w3schools.com/tags/canvas_shadowcolor.asp">shadowColor</a>	Sets or returns the color to use for shadows	
<a href="https://www.w3schools.com/tags/canvas_shadowblur.asp">shadowBlur</a>	Sets or returns the blur level for shadows	
<a href="https://www.w3schools.com/tags/canvas_shadowoffsetx.asp">shadowOffsetX</a>	Sets or returns the horizontal distance of the shadow from the shape	
<a href="https://www.w3schools.com/tags/canvas_shadowoffsety.asp">shadowOffsetY</a>	Sets or returns the vertical distance of the shadow from the shape	
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_createlineargradient.asp">createLinearGradient()</a>	Creates a linear gradient (to use on canvas content)	
<a href="https://www.w3schools.com/tags/canvas_createpattern.asp">createPattern()</a>	Repeats a specified element in the specified direction	
<a href="https://www.w3schools.com/tags/canvas_createradialgradient.asp">createRadialGradient()	Creates a radial/circular gradient (to use on canvas content)	
<a href="https://www.w3schools.com/tags/canvas_addcolorstop.asp">addColorStop()</a>	Specifies the colors and stop positions in a gradient object	
<h3>Line Styles</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_linecap.asp">lineCap</a>	Sets or returns the style of the end caps for a line	
<a href="https://www.w3schools.com/tags/canvas_linejoin.asp">lineJoin</a>	Sets or returns the type of corner created, when two lines meet	
<a href="https://www.w3schools.com/tags/canvas_linewidth.asp">lineWidth</a>	Sets or returns the current line width	
<a href="https://www.w3schools.com/tags/canvas_miterlimit.asp">miterLimit</a>	Sets or returns the maximum miter length	

<h3>Rectangles</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_rect.asp">rect()</a>	Creates a rectangle	
<a href="https://www.w3schools.com/tags/canvas_fillrect.asp">fillRect()</a>	Draws a "filled" rectangle	
<a href="https://www.w3schools.com/tags/canvas_strokerect.asp">strokeRect()</a>	Draws a rectangle (no fill)	
<a href="https://www.w3schools.com/tags/canvas_clearrect.asp">clearRect()</a>	Clears the specified pixels within a given rectangle	
<h3>Paths</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_fill.asp">fill()</a>	Fills the current drawing (path)	
<a href="https://www.w3schools.com/tags/canvas_stroke.asp">stroke()</a>	Actually draws the path you have defined	
<a href="https://www.w3schools.com/tags/canvas_beginpath.asp">beginPath()</a>	Begins a path, or resets the current path	
<a href="https://www.w3schools.com/tags/canvas_moveto.asp">moveTo()</a>	Moves the path to the specified point in the canvas, without creating a line	
<a href="https://www.w3schools.com/tags/canvas_closepath.asp">closePath()</a>	Creates a path from the current point back to the starting point	
<a href="https://www.w3schools.com/tags/canvas_lineto.asp">lineTo()</a>	Adds a new point and creates a line to that point from the last specified point in the canvas	
<a href="https://www.w3schools.com/tags/canvas_clip.asp">clip()</a>	Clips a region of any shape and size from the original canvas	
<a href="https://www.w3schools.com/tags/canvas_quadraticcurveto.asp">quadraticCurveTo()</a>	Creates a quadratic Bézier curve	
<a href="https://www.w3schools.com/tags/canvas_beziercurveto.asp">bezierCurveTo()</a>	Creates a cubic Bézier curve	
<a href="https://www.w3schools.com/tags/canvas_arc.asp">arc()</a>	Creates an arc/curve (used to create circles, or parts of circles)	
<a href="https://www.w3schools.com/tags/canvas_arcto.asp">arcTo()</a>	Creates an arc/curve between two tangents	
<a href="https://www.w3schools.com/tags/canvas_ispointinpath.asp">isPointInPath()	Returns true if the specified point is in the current path, otherwise false	
<h3>Transformations</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_scale.asp">scale()</a>	Scales the current drawing bigger or smaller	
<a href="https://www.w3schools.com/tags/canvas_rotate.asp">rotate()</a>	Rotates the current drawing	
<a href="https://www.w3schools.com/tags/canvas_translate.asp">translate()</a>	Remaps the (0,0) position on the canvas	
<a href="https://www.w3schools.com/tags/canvas_transform.asp">transform()</a>	Replaces the current transformation matrix for the drawing	
<a href="https://www.w3schools.com/tags/canvas_settransform.asp">setTransform()</a>	Resets the current transform to the identity matrix. 
Then runs <a href="https://www.w3schools.com/tags/canvas_transform.asp">
transform()</a>	
<h3>Text</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_font.asp">font</a>	Sets or returns the current font properties for text content	
<a href="https://www.w3schools.com/tags/canvas_textalign.asp">textAlign</a>	Sets or returns the current alignment for text content	
<a href="https://www.w3schools.com/tags/canvas_textbaseline.asp">textBaseline</a>	Sets or returns the current text baseline used when drawing text	
Method	    Description	
<a href="https://www.w3schools.com/tags/canvas_filltext.asp">fillText()</a>	Draws "filled" text on the canvas	
<a href="https://www.w3schools.com/tags/canvas_stroketext.asp">strokeText()</a>	Draws text on the canvas (no fill)	
<a href="https://www.w3schools.com/tags/canvas_measuretext.asp">measureText()</a>	Returns an object that contains the width of the specified text	
<h3>Image Drawing</h3>
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_drawimage.asp">drawImage()</a>	Draws an image, canvas, or video onto the canvas	
<h3>Pixel Manipulation</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_imagedata_width.asp">width</a>	Returns the width of an ImageData object	
<a href="https://www.w3schools.com/tags/canvas_imagedata_height.asp">height</a>	Returns the height of an ImageData object	
<a href="https://www.w3schools.com/tags/canvas_imagedata_data.asp">data</a>	Returns an object that contains image data of a specified ImageData object	
Method	    Description
<a href="https://www.w3schools.com/tags/canvas_createimagedata.asp">createImageData()</a>	Creates a new, blank ImageData object	
<a href="https://www.w3schools.com/tags/canvas_getimagedata.asp">getImageData()</a>	Returns an ImageData object that copies the pixel data for the specified rectangle on a canvas	
<a href="https://www.w3schools.com/tags/canvas_putimagedata.asp">putImageData()</a>	Puts the image data (from a specified ImageData object) back onto the canvas	
<h3>Compositing</h3>
Property	    Description
<a href="https://www.w3schools.com/tags/canvas_globalalpha.asp">globalAlpha</a>	Sets or returns the current alpha or transparency value of the drawing	
<a href="https://www.w3schools.com/tags/canvas_globalcompositeoperation.asp">globalCompositeOperation</a>	Sets or returns how a new image is drawn onto an existing image	
<h3>Other</h3>
Method	    Description
save()	Saves the state of the current context	
restore()	Returns previously saved path state and attributes	
createEvent()
getContext()
toDataURL()

<h2>Simple linear regression method in javascript</h2>
<a href="linear regression.html" class="whitebut ">linear regression</a>
function findLineByLeastSquares(values_x, values_y) {
    var sum_x = 0;
    var sum_y = 0;
    var sum_xy = 0;
    var sum_xx = 0;
    var count = 0;

    //We'll use those variables for faster read/write access.

    var x = 0;
    var y = 0;
    var values_length = values_x.length;

    if (values_length != values_y.length) {
        throw new Error('The parameters values_x and values_y need to have same size!');
    }

    if (values_length === 0) { return [ [], [] ]; }  // Nothing to do.

    // Calculate the sum for each of the parts necessary.
    for (var v = 0; v &lt; values_length; v++) {
        x = values_x[v];
        y = values_y[v];
        sum_x += x;
        sum_y += y;
        sum_xx += x*x;
        sum_xy += x*y;
        count++;
    }

    // Calculate m and b for the formular: y = x * m + b
    var m = (count*sum_xy - sum_x*sum_y) / (count*sum_xx - sum_x*sum_x);
    var b = (sum_y/count) - (m*sum_x)/count;

    // We will make the x and y result line now

    var result_values_x = [];
    var result_values_y = [];

    for (var v = 0; v &lt; values_length; v++) {
        x = values_x[v];
        y = x * m + b;
        result_values_x.push(x);
        result_values_y.push(y);
    }

    return [result_values_x, result_values_y];
}

<h2>convert string array to json object</h2>
first line is header
strArr =["first	second	third",
"function	JSON	parse",
"JavaScript	function	JSON",
"into	a	JavaScript",]

function tsvToJson(strArr) {
  var header = strArr[0].split("\t")
  var headerLength = header.length
  var resultObj = []
  for (var i = 1; i < strArr.length; i++ ) { // start from second line
      var tempObj = {};
      var data = strArr[i].split("\t")
      for ( k = 0; k < headerLength; k++ ) {
          tempObj[header[k]] = data[k];
      }
      resultObj.push(tempObj);
  }
  return resultObj;
}

<h2>hide script away from document</h2>
https://stackoverflow.com/questions/18313770/can-i-store-javascript-in-a-local-storage-object-and-run-it

<h3>to append script to document by appendChild</h3>
var script = document.createElement('script');
script.src = 'data:text/javascript,' + encodeURI(myScript);
script.onload = function() {
  //optional callback
};
document.body.appendChild(script);

This is inserting an actual script tag using a data uri as the source.
This way, it will appear under "scripts" on the resources tab of the dev tools.
When the script loads, the data uri (your code) will be executed.

<h3>store javascript in Local Storage</h3>
Here are two methods:
Method 1: eval()
eval(localStorage.myCode);

localStorage.myCode = "alert('just a test')";
eval(localStorage.myCode);

testScript = `function testadd() {....}`
localStorage.setItem("testScript", testScript)
eval(localStorage.testScript);

You can check if your code is stored like this:
if (!localStorage.myCode) {
  // local storage code not exists, load from somewhere else
} else {// perform the eval using the code from local storage}

Method 2: the Function constructor
new Function(localStorage.myCode)();

Here are the jsfiddle demos showing that they all work:
Method 1: http://jsfiddle.net/markasoftware/3BkAV/
Method 2: http://jsfiddle.net/markasoftware/j6JAz/

<h2>To list all arrays in JavaScript</h2>

One way is to put all arrays in an object
Arrays = {
    house: ["red","blue","yellow"],
    cars: ["fast","big","safe"],
    sofa: ["cozy","modern","elegant"]
}
numberOfArrays = Object.keys(Arrays).length;
sentence = numberOfArrays + ' Arrays - ' + Object.keys(Arrays).join(', ');

var allListNames = ["longHistList", "myfavorList", "activeList", "aETFList", "ahDiffList", "a10YiList"]
console.log(Array.from(allListNames));

<h2>string manipulations</h2>
// remove last character
   string.slice(0, -1)

// extract sub string
   string = "asd/asdf"
   string.substring(string.indexOf("/"), string.length);    // /asdf
   string.substring(string.indexOf("/")+1, string.length);  // asdf

   string = "asd/asdf/fds"
   string.substring( string.indexOf("/") + 1, string.lastIndexOf("/")) // asdf

   string = "asd/asdf/fds/taeg/hjk"  // to select asdf by split method
   sections = string.split("/")
   sections[1]  // asdf

<h2>build your own proxy</h2>

The same origin policy is not enforced within server-to-server communication. 

In addition, you eliminate the latency concern. 

You don’t need to share the cors-anywhere proxy with other consumers, and you can dedicate as many resources as you need to your own servers.

Here’s some quick Node.js code that uses the express web framework to create a proxy server around the same <code><a href="https://joke-api-strict-cors.appspot.com/random_joke" target="_blank" rel="noopener nofollow">https://joke-api-strict-cors.appspot.com/</a></code> from above:

const express = require('express');
const request = require('request');

const app = express();

app.use((req, res, next) => {
  res.header('Access-Control-Allow-Origin', '*');
  next();
});

app.get('/jokes/random', (req, res) => {
  request(
    { url: 'https://joke-api-strict-cors.appspot.com/jokes/random' },
    (error, response, body) => {
      if (error || response.statusCode !== 200) {
        return res.status(500).json({ type: 'error', message: err.message });
      }

      res.json(JSON.parse(body));
    }
  )
});

const PORT = process.env.PORT || 3000;
app.listen(PORT, () => console.log(`listening on ${PORT}`));
If you want to see this in action, head to the source code for the above, along with relevant steps in the README: <a href="https://github.com/15Dkatz/beat-cors-server" target="_blank" rel="noopener nofollow">https://github.com/15Dkatz/beat-cors-server</a> How does this work? The proxy uses express middleware to apply a <code>Access-Control-Allow-Origin: *</code> header to every response from the server. 

At its own <code>jokes/random</code> GET endpoint, the proxy requests a random joke from another server. 

The same-origin policy doesn’t step in to block the request, even though the domains are different. 

After all, this is a server-to-server request. 

Finally, the proxy creates a response to the original requester (an app on the browser) consisting of the resulting data and the middleware-applied <code>Access-Control-Allow-Origin: *</code> header.

<a href="https://www.twilio.com/blog/node-js-proxy-server" class="whitebut ">Build a Node.js Proxy Server</a>

<h2>Javascript Tips</h2>

if then else

var age = 50
age < 21 ? console.log("child") : console.log("adult")

number to string
age = 50
console.log(typeof age)
age = 50 + ""
console.log(typeof age)

Fill arrays
users = Array(5); // 5 empty items
users = Array(5).fill(""); // 5 empty strings
users = Array(5).fill(5); // 5 numbers of value 5

Unique Arrays
users = ["a","b","c","d","e","b"]
unique = Array.from(new Set(users))

Dynamic Objects
dynamic = 'hobbies';
user = { name:"Ed", email:"abc@aol.com", [dynamic]:"sleep" }

Slicing Arrays
users = [1,2,3,4,5,6,7,8]
users.length = 3 // force only first 3 items included

Slicing Arrays end
users.slice(-1)  // onlys last one selected
users.slice(-3)  // onlys last 3 selected

CHange array to object
users = [1,2,3,4,5,6,7]
usersObject = {...users} // converted to objects

Object to arrays
user = { name:"Ed", email:"abc@aol.com", hobbies:"sleep" }
usersKeysArray = Object.keys(user)
usersValArray = Object.values(user)

Performance
startAt = performance.now()
// run a long loop
endAT = performance.now()
console.log(`take ${endAT - startAt} milliseconds`)

<h2>Load external source</h2>
&lt;element onload="myFunction()" src= urlAddr> // body, iframe, img, object

function myFunction() { alert("Iframe is loaded."); }

&lt;element id="myFrame" src="/default.asp">

document.getElementById("myFrame").addEventListener("load", myFunction);
function myFunction() {
  alert("Iframe is loaded.");
}

function fetchImages(argument) {
  var script = document.createElement('script');
  script.onload = function(data) {
    // do something with data
    // Cross-Origin Read Blocking (CORB) blocked cross-origin response with MIME type text/html

  };
  script.src = argument;
  document.getElementsByTagName('head')[0].appendChild(script);
  // or use document.head.append(script);
}

fetchImages(urlAddr)

<h2>Node.js communicate with client side JavaScript</h2>
By making an HTTP request, 
with the XMLHttpRequest object, or by generating a &lt;form> and then submitting it, or a variety of other methods, 
just like any other server side program in a web application.

<h2>find center point of multiple corordinates</h2>
function rad2degr(rad) { return rad * 180 / Math.PI; }
function degr2rad(degr) { return degr * Math.PI / 180; }

/**
 * @param latLngInDeg array of arrays with latitude and longtitude
 *   pairs in degrees. 
e.g. 
[[latitude1, longtitude1], [latitude2
 *   [longtitude2] ...]
 *
 * @return array with the center latitude longtitude pairs in 
 *   degrees.
 */
function getLatLngCenter(latLngInDegr) {
    var LATIDX = 0;
    var LNGIDX = 1;
    var sumX = 0;
    var sumY = 0;
    var sumZ = 0;

    for (var i=0; i&lt;latLngInDegr.length; i++) {
        var lat = degr2rad(latLngInDegr[i][LATIDX]);
        var lng = degr2rad(latLngInDegr[i][LNGIDX]);
        // sum of cartesian coordinates
        sumX += Math.cos(lat) * Math.cos(lng);
        sumY += Math.cos(lat) * Math.sin(lng);
        sumZ += Math.sin(lat);
    }

    var avgX = sumX / latLngInDegr.length;

<h2>find center of multiple points</h2>
 * @param array data 2 dimensional array of latitudes and longitudes
 * For Example:
 * $data = array
 * (
 *   0 = > array(45.849382, 76.322333),
 *   1 = > array(45.843543, 75.324143),
 *   2 = > array(45.765744, 76.543223),
 *   3 = > array(45.784234, 74.542335)
 * );
*/
function GetCenterFromDegrees(data)
{       
    if (!(data.length > 0)){
        return false;
    } 

    var num_coords = data.length;

    var X = 0.0;
    var Y = 0.0;
    var Z = 0.0;

    for(i = 0; i < data.length; i++){
        var lat = data[i][0] * Math.PI / 180;
        var lon = data[i][1] * Math.PI / 180;

<h2>Declaring global variable within function</h2>
To declare JavaScript global variables inside function, you need to use window object. 


For example:

function m(){  
  //declaring global variable by window object  
  window.thisglovalue = 100;
}

<h2>JavaScript Optional Chaining</h2>
If you have worked with JavaScript for any amount of time then you have probably seen code that looks just like this.
<code>const street = person &amp;&amp; person.address &amp;&amp; person.address.street</code>

The above code is pretty much the shortest and most elegant way to check if an object is undefined or null before accessing its properties. 

This is obviously not very concise or clean code, though, which is why JavaScript is finally getting an optional chaining operator.
<h3>What Is Optional Chaining</h3>
If you have used other languages besides JavaScript you are probably already familiar with optional chaining since most languages have supported it for awhile. 

Essentially the idea of optional chaining is to make it easy to write code where you need to access properties or values that are nested deep inside an object or array that may or may not be null/undefined. 

Let’s take a look at the basic syntax for optional chaining to understand exactly how it works.
<code>const name = person?.name</code>

In the above code we have a variable <code>person</code> which may or may not be null/undefined. 

Because we do not know if <code>person</code> is defined we cannot directly access the <code>name</code> property since if <code>person</code> is undefined we would get the following error.
<code>Uncaught TypeError: Cannot read property 'name' of undefined</code>

By using the optional chaining operator (<code>?.</code>), though, we are able to write our code as if we are directly accessing <code>name</code>. 

If <code>person</code> is undefined our code will just return undefined instead of throwing an error. 

Essentially the code above is the same as the following code.
<code>const name = person == null ? undefined : person.name</code>

The optional chaining operator is checking the <code>person</code> variable to ensure it is defined before access the <code>name</code> property and if it is not defined it will just return undefined. 

This means we can write the original code for getting the street as follows.
<code>const street = person?.address?.street</code>

This code is much easier to read then the original code and is one of the greatest use cases for optional chaining. 

JavaScript does have many additional uses for optional chaining, though, which most other languages do not implement.
<h3>Optional Chaining Functions</h3>The first big additional use case for optional chaining is doing optional chaining with function calls. 

Let’s first look at some code for calling a function on an object that may not be defined.
<code>const windowCount = house.getWindowCount &amp;&amp; house.getWindowCount()</code>

This code is essentially checking the <code>house</code> variable to ensure it has a property called <code>getWindowCount</code> before trying to call that function. 

This code is obviously pretty clunky and difficult to read which is where the optional chaining operator comes in.
<code>const windowCount = house.getWindowCount?.()</code>

Now at first it may seem weird to have a period (<code>.</code>) before the function parenthesis, but that is because the optional chaining operator is a question mark followed by a period (<code>?.</code>) and not just a question mark. 

This new code that uses the optional chaining operator will now check if there is a function defined on the <code>house</code> variable called <code>getWindowCount</code> and if it exists it will call it. 

If that function does not exist on the <code>house</code> variable then it will just return undefined instead of calling the function. 

This ability to do optional chaining on functions is something that many other languages do not implement and is really handy, especially in JavaScript since functions are used everywhere.
<h3>Optional Chaining Arrays</h3>The last main way that optional chaining can be used is with arrays. 

If you want to access an element in an array by index, but are not sure if the array is defined then you need to use code that looks something like this.
<code>const firstElement = arr &amp;&amp; arr[0]</code>

By using the optional chaining operator this code can be simplified to the following.
<code>const firstElement = arr?.[0]</code>

Again this probably looks weird with a period (<code>.</code>) before the brackets for accessing an array element, but it is just part of the syntax for the optional chaining operator. 

This new code will work by first checking if the <code>arr</code> variable is defined and if it is it will attempt to access the index of the array specified. 

If the <code>arr</code> variable is not defined then undefined will be returned instead of trying to access the index of the array.
This bracket notation optional chaining can also be used with objects as well.
<code>const name = person?.['name']</code>

This is really useful if you want to dynamically access a property of an object based on a string and are not sure if the object is defined.
<h3>Browser Support</h3>
With all great new JavaScript features the biggest thing to worry about is browser support. 

Unfortunately, the optional chaining operator has very little support outside of the newest browsers. 

At the time of writing this article the optional chaining operator only has <a href="https://caniuse.com/#search=optional%20chaining">45% support</a> across browsers. 

Luckily, though, you can still use this operator by using tools like <a href="https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining">babel</a> to transpile your JavaScript code so that older browsers can understand it.
<h3>Conclusion</h3>
The optional chaining operator is something that most other languages have had the luxury of using for years, but is only just now being introduced into JavaScript. 

This means that most browsers still have not implemented this feature, but with the power of tools like babel this feature can be used right now without having to worry about browser support. 

I highly recommend using this operator in all your new projects that have babel since it will make writing clean JavaScript much easier.

<h2>convert 2-dimensional array to object</h2>
var myArray = [
    [12,2,"copy"],
    [13,5,"copy"],
    [18,-1,"original"],
]

var json = [
  {docId: 12, userId: 2, type: "copy"},
  {docId: 13, userId: 5, type: "copy"},
  {docId: 18, userId: -1, type: "original"}
]

json = myArray.map(function(x) {
    return { "s_id": x[0], "t_id": x[1], "type": x[2] }
})

<h2>javascript machine Learning</h2>
<a href="javascript machineLearning.html" class="whitebut ">javascript machineLearning</a>

<h2>DevTools failed to load SourceMap</h2>
: Could not load content for https://unpkg.com/brain-browser.min.js.map
<a href="https://stackoverflow.com/questions/61205390/when-adding-a-javascript-library-chrome-complains-about-a-missing-source-map-w" class="whitebut ">Chrome complains about a missing source map</a>

<h2>javascript encription</h2>
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js">&lt;/script>

&lt;label>encrypted&lt;/label>
&lt;div id="demo1">&lt;/div>

&lt;label>decrypted&lt;/label>
&lt;div id="demo2">&lt;/div>

&lt;label>Actual Message&lt;/label>
&lt;div id="demo3">&lt;/div>

&lt;script>
var encrypted = CryptoJS.AES.encrypt("williamkpchan", "Secret Passphrase");

var decrypted = CryptoJS.AES.decrypt(encrypted, "Secret Passphrase");

document.getElementById("demo1").innerHTML = encrypted;
document.getElementById("demo2").innerHTML = decrypted;
document.getElementById("demo3").innerHTML = decrypted.toString(CryptoJS.enc.Utf8);
&lt;/script>

Encrypted is actually an object, encrypted.toString() to get the string.
https://stackoverflow.com/questions/18279141/javascript-string-encryption-and-decryption


<h2>array addition</h2>
adata = [1,2,3]
bdata = [3,4,5]
thedrawdata=[]
thedrawdata.push(adata)
thedrawdata.push(bdata)

thedrawdata[2] = thedrawdata[0].map(function (a, i) {
  return a + thedrawdata[1][i];
});

console.log(thedrawdata[0],thedrawdata[1],thedrawdata[2])

var arr = [1,2,3,4];
var arr2 = [1,1,1,2];
<i>var squares = arr.map((a, i) => a + arr2[i]);</i>
console.log(squares);

<h2>convert a string to function name</h2>
var myString = "echoHello";
window[myString] = function() {
    alert("Hello!");
}
echoHello();

<h2>create indirect variable</h2>
var myString = "thisvariable";
window[myString] = "what"
thisvariable

var rvListName = "removeList"
window[rvListName] = window["bookid"] + " rvList"
rMList = localStorage.getItem(removeList)

<h2>convert all elements in array to interger</h2>
rMList = rMList.map(Number);

removeList = "revList"
rMList = [1,3]
localStorage.setItem(removeList, rMList)
rMList = localStorage.getItem(removeList).split(",").map(Number)

<h2>convert num string to weekday</h2>
const str = "20210620";

function parse(str) {
    var y = str.substr(0,4), m = str.substr(4,2) - 1,
        d = str.substr(6,2);
    var D = new Date(y,m,d);
    return (D.getFullYear() == y && D.getMonth() == m && D.getDate() == d) ? D : 'invalid date';
}

const day = ["sun","mon","tue","wed","thu","fri","sat"][parse(str).getDay()]
console.log(day)

<h2>script to close a message on web page</h2>
&lt;div class="alert">
  &lt;span onclick="this.parentElement.style.display='none';">&times;&lt;/span> 
&lt;/div>

Use the HTML entity "&times;" to create the letter "x".


<h2>to make window scroll to location with offset</h2>
#startpt { scroll-margin-top: 100px;}
  if(testkey == "l"){window.location = '#startpt';}

also try:
(function() {
    if (document.location.hash) {
        setTimeout(function() {
            window.scrollTo(window.scrollX, window.scrollY - 100);
        }, 10);
    }
})();

<h2>JavaScript Errors - Throw and Try to Catch</h2>
The <code>try</code> statement lets you test a block of code 
for errors.
The <code>catch</code> statement lets you handle the error.
The <code>throw</code> statement lets you create custom 
errors.
The <code>finally</code> statement lets you execute code, 
after try and catch, regardless of the result.

This example demonstrates how to use catch to diplay an error.
adddlert is not defined

try { adddlert("Welcome guest!");}
catch(err) { document.getElementById("demo").innerHTML = err.message;}

check storage:
try{localStorage.setItem('check_storage','local storage');window.supportLS=true;}catch(e){window.supportLS=false;}

<h2>to convert string to calculation result</h2>
var str = "2*7.1 + 4/0,5";
str = str.replace(',','.');
eval("var answer = "+str);
alert(answer);

function callCalculator() {
    str = prompt("Calculation Input:", "");
    if (str != null && str != "") {
        str = str.replace(',','.');
        eval("var answer = " + str);
        alert(answer);
    }
}

<h2>setTimeout with a shorter delay</h2>

setTimeout in most browsers doesn't allow a delay less than about 10 milliseconds (it forces any smaller delays to be longer, Chrome has changed this to 2 milliseconds, though, and apparently had some problems with it.)

the equivalent of setTimeout, with a real zero delay, using postMessage:

    // Only add setZeroTimeout to the window object, and hide everything
    // else in a closure.
    (function() {
        var timeouts = [];
        var messageName = "zero-timeout-message";

Like setTimeout, but only takes a function argument. 
There's no time argument (always zero) and no arguments (you have to use a closure).

        function setZeroTimeout(fn) {
            timeouts.push(fn);
            window.postMessage(messageName, "*");
        }

        function handleMessage(event) {
            if (event.source == window && event.data == messageName) {
                event.stopPropagation();
                if (timeouts.length > 0) {
                    var fn = timeouts.shift();
                    fn();
                }
            }
        }

        window.addEventListener("message", handleMessage, true);

        // Add the one thing we want added to the window object.
        window.setZeroTimeout = setZeroTimeout;
    })();

<h2>jQuery UI message box</h2>
<a href="https://jqueryui.com/" class="whitebut ">jQuery UI</a>
<a href="https://api.jqueryui.com/dialog/" class="whitebut ">jqueryui dialog</a>


&lt;meta name="viewport" content="width=device-width, initial-scale=1">
&lt;link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
&lt;script src="https://code.jquery.com/jquery-1.12.4.js">&lt;/script>
&lt;script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js">&lt;/script>

&lt;div id="dialog" title="Basic dialog" style="display:none;">
&lt;p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the &apos;x&apos; icon.&lt;/p>
&lt;/div>
 
&lt;div id="dialogForm" title="Create new user" style="display:none;">
&lt;p>All form fields are required.&lt;/p>
&lt;form>
&lt;fieldset>
&lt;label for="name">Name&lt;/label>
&lt;input type="text" name="name" id="name" class="text">
&lt;br>
&lt;label for="email">Email&lt;/label>
&lt;input type="text" name="email" id="email" value="" class="text">
&lt;br>
&lt;label for="password">Password&lt;/label>
&lt;input type="password" name="password" id="password" value="" class="text">
&lt;/fieldset>
&lt;/form>
&lt;/div>  
&lt;br>
&lt;button id="create-user" onclick="$('#dialogForm').toggle()">Create new user&lt;/button>
&lt;br>
&lt;span onclick="$('#dialog').dialog();">click to open dialog&lt;/span>

<h2>auto load page with infinite scroll until it gets to the bottom</h2>

var lastScrollHeight = 0; 
function autoScroll() { 
  var sh = document.documentElement.scrollHeight; 
  if (sh != lastScrollHeight) { 
    lastScrollHeight = sh; 
    document.documentElement.scrollTop = sh; 
  } 
} 
window.setInterval(autoScroll, 100); 

Infinite Scroll 
jQuery load more data on scroll

In jQuery, check whether you have hit the bottom of page using scroll function.
Once you hit that, make an ajax call (you can show a loading image here till ajax response) and get the next set of data, append it to the div.
This function gets executed as you scroll down the page again.

$(window).scroll(function() {
    if($(window).scrollTop() == $(document).height() - $(window).height()) {
           // ajax call get data from server and append to the div
    }
});

If you want to load content before reaching 100 pixel of bottom use

var loading= false;
$(window).scroll(function() {
    if (!loading && ($(window).scrollTop() >  $(document).height() - $(window).height() - 100)) {
        loading= true;

        // your content loading call goes here.

        loading = false; // reset value of loading once content loaded
    }
});


<h2>Stop from copy, disable select</h2>
document.oncontextmenu = new Function("event.returnValue=false");
&lt;body oncontextmenu="return false;">

document.onselectstart = new Function("event.returnValue=false");
document.onselectstart = function() { return false; }
document.onselectstart = null;
&lt;body onselectstart="return false">

document.getElementById("tmp").onselectstart = function(){return false;};
document.getElementById("tmp").addEventListener("selectstart", function(){return false;}, false);
document.getElementById("tmp").attachEvent("onselectstart", function(){return false;});

<h2>three.js</h2>
<a href="://threejsfundamentals.org/threejs/lessons/threejs-fundamentals.html" class="whitebut ">threejs-fundamentals lessons</a>
<a href="://threejsfundamentals.org/" class="whitebut ">threejsfundamentals</a>
<a href="://threejs.org/examples/" class="whitebut ">examples</a>
<a href="https://www.youtube.com/watch?v=1TeMXIWRrqE" class="whitebut ">Three.js Tutorial, Add 3D Model to WebSite in 5 Minutes</a>
<a href="https://www.youtube.com/watch?v=8jP4xpga6yY" class="whitebut ">Getting Started With Three.js</a>
<a href="https://youtu.be/Bed1z7f1EI4" class="whitebut ">Space Background (Three.js)</a>
<a href="https://youtu.be/KeVW_ezeGz8" class="whitebut ">Warp Portal (Three.js)</a>

<a href="https://www.youtube.com/watch?v=FGG0EeMNUl0">Build a 3D World in React with Three.js
<img class="lazy" data-src="https://i.ytimg.com/vi/FGG0EeMNUl0/hqdefault.jpg"></a>

<h2>gravity</h2>
function distance(x1, y1, x2, y2) {
  const xDist = x2 - x1
  const yDist = y2 - y1
  return Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2))
}

var canvas = document.querySelector('canvas');
var c = canvas.getContext('2d');
canvas.width = innerWidth;
canvas.height = innerHeight;
// Variables
var mouse = { x: innerWidth / 2, y: innerHeight / 2  };
var colors = ['red','orange','yellow','green','cyan','blue','brown','purple','gold','silver' ];
var gravity = 0.2;
var friction = 0.9;

// Event Listeners
addEventListener("mousemove", function(event) {
  mouse.x = event.clientX; mouse.y = event.clientY;
});
addEventListener("resize", function() {
  canvas.width = innerWidth; canvas.height = innerHeight;
  init();
});
addEventListener("click", function(event) {
  init();
});

// Utility Functions
function randomIntFromRange(min,max) {
  return Math.floor(Math.random() * (max - min + 1) + min);
}
function randomColor(colors) {
  return colors[Math.floor(Math.random() * colors.length)];
}

// Objects
function Ball(x, y, dx, dy, radius, color) {
  this.x = x; this.y = y;
  this.dx = dx; this.dy = dy;
  this.radius = radius; this.color = color;
  this.update = function() {
    if (this.y + this.radius + this.dy> canvas.height) {
      this.dy = -this.dy; this.dy = this.dy * friction;
      this.dx = this.dx * friction;
    } else {
      this.dy += gravity;
    }
    if (this.x + this.radius >= canvas.width || this.x - this.radius <= 0) {
      this.dx = -this.dx * friction;
    }
    this.x += this.dx; this.y += this.dy;
    this.draw();
  };
  this.draw = function() {
    c.beginPath();
    c.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);  
    c.fillStyle = this.color;
    c.fill();
    c.stroke();
    c.closePath();
  };
}

// Implementation
var ballArray = [];
function init() {
  ballArray = [];
  for (let i = 0; i < 1000; i++) {
    var radius = randomIntFromRange(3, 5);
    var x = randomIntFromRange(radius, canvas.width - radius);
    var y = randomIntFromRange(0, canvas.height - radius);
    var dx = randomIntFromRange(-5, 5)
    var dy = randomIntFromRange(-2, 2)
    ballArray.push(new Ball(x, y, dx, dy, radius, randomColor(colors)));
  }
}
// Animation Loop
function animate() {
  requestAnimationFrame(animate);
  c.clearRect(0, 0, canvas.width, canvas.height);
  for (let i = 0; i < ballArray.length; i++) {
    ballArray[i].update();
  }
}
init();
animate();


<h2>CSS/Javascript Mouseover Popup Box</h2>
<span class="NameHighlights">
  <a href="product link is here">Product 1</a>
  <div>
    # of Votes:  123<br> % Liked<br>
    <a href="product review link">See User reviews</a>
  </div>
</span>

loop bind events to all .NameHighlights spans:
var span = document.querySelectorAll('.NameHighlights');
for (var i = span.length; i--;) {
  (function () {
    var t;
    span[i].onmouseover = function () {
      hideAll(); clearTimeout(t);
      this.className = 'NameHighlightsHover';
    };
    span[i].onmouseout = function () {
      var self = this;
      t = setTimeout(function () {
        self.className = 'NameHighlights';
      }, 300);
    };
  })();
}

a jQuery version:
var t;
$(function(){
  $('span.NameHighlights').mouseover(
      function(e){
        hideAll(); clearTimeout(t);
        $(this).attr('class', 'NameHighlightsHover');
      }
  ).mouseout(
      function(e){
        t = setTimeout(function() {
          //$(this).attr('class', 'NameHighlights');
          hideAll();
        }, 300);
      }
  );
    });
function hideAll() {
  $('span.NameHighlightsHover').each(function(index) {
    console.log('insde hideAll');
    $(this).attr('class', 'NameHighlights');
  })
};

<h2>CORS library</h2>
<a href="https://www.youtube.com/watch?v=PNtFSVU-YTI" class="whitebut ">Learn CORS library In 6 Minutes</a>


<h2>coordinates of the mouse</h2>
coordinates of the mouse pointer when clicked on an element:

var x = event.clientX;     // Get the horizontal coordinate
var y = event.clientY;     // Get the vertical coordinate
&lt;span onclick="showCoords(event)">get the coordinates when clicked</span>

coordinates of the mouse pointer when the mouse is moved:
addEventListener("mousemove", function(event) {
  mouse.x = event.clientX; mouse.y = event.clientY;
});


<h2>requestAnimationFrame</h2>
There used to be just one way to do a timed loop in JavaScript: setInterval(). 
If you needed to repeat something pretty fast (but not as-fast-as-absolutely-possible like a for loop), you’d use that. 
For the purposes of animation, the goal is sixty “frames” per second to appear smooth, so you’d run a loop like this:

setInterval(function() {
  // animiate something
}, 1000/60);

There is a better alternative to this now. 
Paul Irish introduced requestAnimationFrame over two years ago. 

I don’t have a whole lot to add to it, I just had never actually used it before and now I have so I thought I’d help spread the word and write about its basic usage.

Why better?
The browser can optimize it, so animations will be smoother
Animations in inactive tabs will stop, allowing the CPU to chill
More battery-friendly

The Simplest Possible Example
function repeatOften() {
  // Do whatever
  requestAnimationFrame(repeatOften);
}

requestAnimationFrame(repeatOften);
Call it once to kick it off, and your function recursively calls itself.

Start and Stop
requestAnimationFrame returns an ID you can use to cancel it, just like setTimeout or setInterval does. 
jQuery used here only to demonstrate a simple animation and bind events.

var globalID;
function repeatOften() {  // repeat loop
  $("&lt;div />").appendTo("body");
  globalID = requestAnimationFrame(repeatOften); }

$("#start").on("click", function() {  // start button
  globalID = requestAnimationFrame(repeatOften); });

$("#stop").on("click", function() {  // stop button
  cancelAnimationFrame(globalID); });

<h2>animation of an object along a particular path</h2>
<a href="https://stackoverflow.com/questions/17083580/i-want-to-do-animation-of-an-object-along-a-particular-path" class="whitebut ">animation of an object along a particular path</a>

<h2>to detect a mobile device</h2>
https://stackoverflow.com/questions/3514784/what-is-the-best-way-to-detect-a-mobile-device

/* Smartphones ----------- */
@media only screen and (max-width: 760px) {
  #some-element { display: none; }
}

In jQuery/JavaScript file:
$( document ).ready(function() {      
    var is_mobile = false;
    if( $('#some-element').css('display')=='none') {
      is_mobile = true; }

    // now I can use is_mobile to run javascript conditionally
    if (is_mobile == true) { //Conditional script here }
 });

There is a JavaScript API built-in for detecting media.
Rather than using the above solution simply use the following:
$(function() {      
    let isMobile = window.matchMedia("only screen and (max-width: 760px)").matches;
    if (isMobile) { //Conditional script here }
 });

The screen.width property is a global.
If the browser is on a desktop and the user resizes the window, $is_mobile is not going to be updated.

Why not: if( screen.width <= 480 ) {     // is mobile }

<h2>box2d</h2>
<a href="https://box2d.org/documentation/" class="whitebut ">box2d</a>
<a href="https://plugindetector.com/box2d" class="whitebut ">box2d</a>
<a href="https://plugindetector.com/category/effects" class="whitebut ">catalog of picked jQuery plugins</a>
<a href="https://github.com/franzenzenhofer/box2d-jquery" class="whitebut ">jquery.box2d</a>
<a href="https://kyucon.com/doc/box2d/" class="whitebut ">box2d</a>
<a href="https://stackoverflow.com/questions/7294080/how-do-i-draw-my-box2d-world-using-html5-canvas-instead-of-debug-draw" class="whitebut ">html5 canvas box2d</a>

<h2>Test Google Chart</h2>

&lt;script type="text/javascript" src="https://www.gstatic.com/charts/loader.js">&lt;/script>
&lt;div id="chart" style="width: 900px; height: 500px;">&lt;/div>

&lt;script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);
function drawChart() {
  var data = google.visualization.arrayToDataTable([
    ['Mon', 20, 28, 38, 45], ['Tue', 31, 38, 55, 66],
    ['Wed', 50, 55, 77, 80], ['Thu', 77, 77, 66, 50],
    ['Fri', 68, 66, 22, 15]
// Treat first row as data as well.
    ], true);

var options = {legend:'none'};
var chart = new google.visualization.CandlestickChart(document.getElementById('chart'));
chart.draw(data, options);
}

&lt;/script>


<h2>check if variable exists (is defined/initialized)</h2>
if (typeof variable !== 'undefined') {
    // the variable is defined
}


<h2>JavaScript Game</h2>
<a href="https://codepen.io/franksLaboratory" class="whitebut ">franksLaboratory</a>

<a href="https://www.youtube.com/watch?v=QxYg8-mhhhs" class="whitebut ">JavaScript Game Tutorial - 2D Tower Defense</a>

<a href="https://www.youtube.com/watch?v=mpvNwYmTMJ4" class="whitebut ">JavaScript Game Tutorial - 2D Tower Defense PART 2</a>

<a href="https://www.codeexplained.org/2019/05/create-original-flappy-bird-using.html" class="whitebut ">DOWNLOAD: Flappy Bird In JAVASCRIPT SOURCE CODE</a>

<h2>sprites in games</h2>
<a href="https://gamingshift.com/sprites-in-games/" class="whitebut ">explain sprites in games</a>

<a href="https://www.codeandweb.com/free-sprite-sheet-packer" class="whitebut ">Sprite sheets packer</a>
<a href="https://www.codeandweb.com/texturepacker" class="whitebut ">TexturePacker</a>

<a href="https://mobilegamegraphics.com/product/alien-pixel/" class="whitebut ">Sprite sheets and game graphics</a>

<a href="https://blog.felgo.com/game-resources/16-sites-featuring-free-game-graphics" class="whitebut ">Download the Free Game Graphics</a>

<a href="https://graphicriver.net/sprite-and-game-graphics-in-graphics" class="whitebut ">game graphics</a>

<h2>Set Objects</h2>
A Set is a collection of unique values.
Each value may occur only once in a Set.
A Set can hold any values of any data type.

// Create a Set
const letters = new Set();

// Add some values to the Set
letters.add("a");
letters.add("b");
letters.add("c");

// Create a new Set
const letters = new Set(["a","b","c"]);

For a Set, typeof returns object:
typeof letters;      // Returns object

For a Set, instanceof Set returns true:
letters instanceof Set;  // Returns true

Add equal elements to set, only the first will be saved:
letters.add("a");
letters.add("b");
letters.add("c");
letters.add("c");
letters.size; // 3

Set Object Methods and Properties
new Set()	Creates a new Set object
add()	Adds a new element to the Set
clear()	Removes all elements from a Set
delete()	Removes an element specified by its value.
entries()	Returns an array of the values in a Set object
has()	Returns true if a value exists
forEach()	Invokes a callback for each element
keys()	Returns an array of the values in a Set object
values()	Same as keys()
size	Returns the element count


<h2>Map and set</h2>
https://www.digitalocean.com/community/tutorials/understanding-map-and-set-objects-in-javascript
Map is a collection of keyed data items, just like an Object. But the main difference is that Map allows keys of any type.

Methods and properties are:
new Map() – creates the map.
map.set(key, value) – stores the value by the key.
map.get(key) – returns the value by the key, undefined if key doesn’t exist in map.
map.has(key) – returns true if the key exists, false otherwise.
map.delete(key) – removes the value by the key.
map.clear() – removes everything from the map.
map.size – returns the current element count.

For instance:
let map = new Map();
map.set('1', 'str1');   // a string key
map.set(1, 'num1');     // a numeric key
map.set(true, 'bool1'); // a boolean key

map.set('firstName', 'Luke')
map.set('lastName', 'Skywalker')
map.set('occupation', 'Jedi Knight')

recreate the same Map
const map = new Map([
  ['firstName', 'Luke'],
  ['lastName', 'Skywalker'],
  ['occupation', 'Jedi Knight'],
])

// remember the regular Object? it would convert keys to string
// Map keeps the type, so these two are different:
alert( map.get(1)   ); // 'num1'
alert( map.get('1') ); // 'str1'

alert( map.size ); // 3

Map can also use objects as keys.
For instance:
let john = { name: "John" };
// for every user, let's store their visits count
let visitsCountMap = new Map();
// john is the key for the map
visitsCountMap.set(john, 123);
alert( visitsCountMap.get(john) ); // 123

We can initialize a new Map to demonstrate the following methods and properties: delete(), has(), get(), and size.
// Initialize a new Map
const map = new Map([
  ['animal', 'otter'],
  ['shape', 'triangle'],
  ['city', 'New York'],
  ['country', 'Bulgaria'],
])

// Check if a key exists in a Map
map.has('shark') // false
map.has('country') // true

// Get an item from a Map
map.get('animal') // "otter"

// Get the count of items in a Map
map.size // 4

// Delete an item from a Map by key
map.delete('city') // true

// Empty a Map
map.clear()

The keys(), values(), and entries() methods all return a MapIterator, which is similar to an Array in that you can use for...of to loop through the values.

const map = new Map([
  [1970, 'bell bottoms'],
  [1980, 'leg warmers'],
  [1990, 'flannel'],
])

The keys() method returns the keys:
map.keys()

The values() method returns the values:
map.values()

The entries() method returns an array of key/value pairs:
map.entries()

Map has a built-in forEach method, similar to an Array, for built-in iteration.
However, there is a bit of a difference in what they iterate over.
The callback of a Map’s forEach iterates through the value, key, and map itself, while the Array version iterates through the item, index, and array itself.

// Map
Map.prototype.forEach((value, key, map) = () => {})

// Array
Array.prototype.forEach((item, index, array) = () => {})

Map Properties and Methods
Properties/Methods	Description	Returns
set(key, value)	Appends a key/value pair to a Map	Map Object
delete(key)	Removes a key/value pair from a Map by key	Boolean
get(key)	Returns a value by key	value
has(key)	Checks for the presence of an element in a Map by key	Boolean
clear()	Removes all items from a Map	N/A
keys()	Returns all keys in a Map	MapIterator object
values()	Returns all values in a Map	MapIterator object
entries()	Returns all keys and values in a Map as [key, value]	MapIterator object
forEach()	Iterates through the Map in insertion order	N/A
size	Returns the number of items in a Map	Number
When to Use Map

Summing up, Maps are similar to Objects in that they hold key/value pairs, but Maps have several advantages over objects:
Size - Maps have a size property, whereas Objects do not have a built-in way to retrieve their size.
Iteration - Maps are directly iterable, whereas Objects are not.
Flexibility - Maps can have any data type (primitive or Object) as the key to a value, while Objects can only have strings.
Ordered - Maps retain their insertion order, whereas objects do not have a guaranteed order.

Due to these factors, Maps are a powerful data structure to consider. However, Objects haves some important advantages as well:
JSON - Objects work flawlessly with JSON.parse() and JSON.stringify(), two essential functions for working with JSON, a common data format that many REST APIs deal with.

Working with a single element - Working with a known value in an Object, you can access it directly with the key without the need to use a method, such as Map’s get().
This list will help you decide if a Map or Object is the right data structure for your use case.


<h2>dat.gui</h2>
We all love trusted JavaScript frameworks like MooTools, jQuery, and Dojo, but there's a big push toward using focused micro-frameworks for smaller purposes. 

<code>dat.gui</code>'s niche is in listening to and controlling data such that it can be visualized into charts or other graphics. 
Creating a new DAT.GUI instance provides a new sliding pane for which to add controls to:

// Create an instance, which also creates a UI pane
var gui = new DAT.GUI();

With the pane ready, new controls can be added. 
Fields can be of type string, number, boolean, or function, with a number slider available depending on options passed to it. 
Here's how you can create a field of each type:

// My sample abject
var obj = { name: "David Walsh", num: 23, winner: true };

// String field
gui.add(obj, "name");

// Number field with slider
gui.add(obj, "num").min(1).max(50).step(1);

// Checkbox field
gui.add(obj, "winner");

Since properties are changed directly on the object itself, there's not "setter" and so <code>dat.gui</code> provides a <code>listen</code> function to do just that -- list for changes:

// Listen to changes within the GUI
gui.add(obj, "name").onChange(function(newValue) {console.log("Value changed to:  ", newValue);
});

// Listen to changes outside the GUI - GUI will update when changed from outside
gui.add(obj, "name").listen();
Those are the dead basics of the <code>dat.gui</code> library. 
Note that I've not yet mentioned what the result looks like. 
That's because it's up to you to create the visual aspects based on property values. 
The demo that ships with <code>dat.gui</code> is a very creative dot-based constant animation. 
The animation magic lies within the FizzyText function. 
FizzyText is a more sizable function that does the animation, but let's take a look at the <code>dat.gui</code> code:

var fizzyText = new FizzyText("david walsh");
var gui = new DAT.GUI();

// Text field
gui.add(fizzyText, "message");

// Sliders with min + max
gui.add(fizzyText, "maxSize").min(0.5).max(7);
gui.add(fizzyText, "growthSpeed").min(0.01).max(1).step(0.05);
gui.add(fizzyText, "speed", 0.1, 2, 0.05); // shorthand for min/max/step

// Sliders with min, max and increment.
gui.add(fizzyText, "noiseStrength", 10, 100, 5);

// Boolean checkbox
gui.add(fizzyText, "displayOutline");
Tinker with the pane fields and the animation instantly changes!

JavaScript, more than any other language, seems to provide the most ability to make powerful changes with very little code. 
<code>dat.gui</code> is proof of that. 
The demo provided here is the same demo provided within the <code>dat.gui</code> repository, mostly because topping the effect would be a hell of a feat. 
When you get a few moments, go play around with <code>dat.gui</code> -- it's really ... dat ... good.
<a href="https://davidwalsh.name/demo/dat-gui.php>view demo</a>

<h2>Dexie</h2>
&lt;script src="https://unpkg.com/dexie@latest/dist/dexie.js">&lt;/script>
  // Define your database
  var db = new Dexie("friend_database");
  db.version(1).stores({ friends: 'name,shoeSize' });

  // Put some data into it
  db.friends.put({name: "Nicolas", shoeSize: 8}).then (function(){
          // Then when data is stored, read from it
          return db.friends.get('Nicolas');
  }).then(function (friend) {
          // Display the result
          alert ("Nicolas has shoe size " + friend.shoeSize);
  }).catch(function(error) {
     // Finally don't forget to catch any error
     // that could have happened anywhere in the
     // code blocks above.
        alert ("Ooops: " + error);
  });

<h2>Dexie.js Minimalistic IndexedDB Wrapper</h2>
<a href="https://github.com/dfahlander/Dexie.js" class="whitebut ">Dexie.js</a>
<a href="https://dzone.com/articles/dexis-js-holistic-guide" class="whitebut ">Dexie.js guide</a>

<h2>access camera</h2>
<div id="cameratoc" class="toc">0 <a href="#cameratopic-0" target="_self">Introduction</a><br>1 <a href="#cameratopic-1" target="_self">Prerequisites</a><br>2 <a href="#cameratopic-2" target="_self">Step 1 — Checking Device Support</a><br>3 <a href="#cameratopic-3" target="_self">Step 2 — Requesting User Permission</a><br>4 <a href="#cameratopic-4" target="_self">Step 3 — Understanding Media Constraints</a><br>5 <a href="#cameratopic-5" target="_self">Step 4 — Using the <code>enumerateDevices</code> Method</a><br>6 <a href="#cameratopic-6" target="_self">Step 5 — Displaying the Video Stream on the Browser</a><br>7 <a href="#cameratopic-7" target="_self">Conclusion</a><br></div></center>
<br>
<h3 id="cameratopic-0">Introduction</h3>
With HTML5 came the introduction of APIs with access to device hardware, including the <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices">MediaDevices</a> API. 
This API provides access to media input devices like audio and video.

With this API's help, developers can access audio and video devices to stream and display live video feeds in the browser. 
In this tutorial, you'll access the video feed from the user's device and display it in the browser using the  method.

The <code>getUserMedia</code> API makes use of the media input devices to produce a <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream">MediaStream</a>. 
This MediaStream contains the requested media types, whether audio or video. 
Using the stream returned from the API, video feeds can be displayed on the browser, which is useful for real-time communication on the browser.

When used along with the <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream_Recording_API">MediaStream Recording API</a>, you can record and store media data captured on the browser. 
This API only works on secure origins like the rest of the newly introduced APIs, but it also works on <code>localhost</code> and file URLs.

<h3 id="cameratopic-1">Prerequisites</h3>

A basic knowledge of JavaScript. 
If you are new to JavaScript, try checking out the <a href="https://www.digitalocean.com/community/tutorial_series/how-to-code-in-javascript">How To Code in JavaScript</a> series.

This tutorial will first explain concepts and demonstrate examples with <a href="https://codepen.io/">Codepen</a>. 
In the final step, you will create a functioning video feed for the browser. 

<h3 id="cameratopic-2">Step 1 — Checking Device Support</h3>

First, you will see how to check if the user's browser supports the <code>mediaDevices</code> API. 
This API exists within the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator">navigator</a> interface and contains the current state and identity of the user agent. 
The check is performed with the following code that can be pasted into Codepen:

<code>if ('mediaDevices' in navigator &amp;&amp; 'getUserMedia' in navigator.mediaDevices) {
  console.log("Let's get this party started")
}
</code>

First, this checks if the <code>mediaDevices</code> API exists within the <code>navigator</code> and then checks if the <code>getUserMedia</code> API is available within the <code>mediaDevices</code>. 
If this returns <code>true</code>, you can get started.

<h3 id="cameratopic-3">Step 2 — Requesting User Permission</h3>

After confirming the browser's support for <code>getUserMedia</code>, you need to request permission to make use of the media input devices on the user agent. 
Typically, after a user grants permission, a <code>Promise</code> is returned which resolves to a media stream. 
This <code>Promise</code> isn't returned when the permission is denied by the user, which blocks access to these devices.

Paste the following line into Codepen to request permission:

<code>navigator.mediaDevices.getUserMedia({video: true})
</code>

The object provided as an argument for the <code>getUserMedia</code> method is called <code>constraints</code>. 
This determines which of the media input devices you are requesting permissions to access. 
For example, if the object contains <code>audio: true</code>, the user will be asked to grant access to the audio input device.

<h3 id="cameratopic-4">Step 3 — Understanding Media Constraints</h3>

This section will cover the general concept of <em><code>contraints</code></em>. 
The <code>constraints</code> object is a  object that specifies the types of media to request and the requirements of each media type. 
You can specify requirements for the requested stream using the <code>constraints</code> object, like the resolution of the stream to use (<code>front</code>, <code>back</code>).

You must specify either <code>audio</code> or <code>video</code> when making the request. 
A <code>NotFoundError</code> will be returned if the requested media types can't be found on the user's browser.

If you intend to request a video stream of <code>1280 x 720</code> resolution, you can update the <code>constraints</code> object to look like this:

<code>{
  video: {
    width: 1280,
    height: 720,
  }
}
</code>

With this update, the browser will try to match the specified quality settings for the stream. 
If the video device can't deliver this resolution, the browser will return other available resolutions.

To ensure that the browser returns a resolution not lower than the one provided you will have to make use of the <code>min</code> property. 
Here is how you could update the <code>constraints</code> object to include the <code>min</code> property:

<code>{
  video: {
    width: {
      min: 1280,
    },
    height: {
      min: 720,
    }
  }
}
</code>

This will ensure that the stream resolution returned will be at least <code>1280 x 720</code>. 
If this minimum requirement can't be met, the promise will be rejected with an <code>OverconstrainedError</code>.

In some cases you may be concerned about saving data and need the stream to not exceed a set resolution. 
This can come in handy when the user is on a limited plan. 
To enable this functionality, update the constraints object to contain a <code>max</code> field:

<code>{
  video: {
    width: {
      min: 1280,
      max: 1920,
    },
    height: {
      min: 720,
      max: 1080
    }
  }
}
</code>

With these settings, the browser will ensure that the return stream doesn't go below <code>1280 x 720</code> and doesn't exceed <code>1920 x 1080</code>. 

Other terms that can be used includes <code>exact</code> and <code>ideal</code>. 
The <code>ideal</code> setting is typically used along with the <code>min</code> and <code>max</code> properties to find the best possible setting closest to the ideal values provided.

You can update the constraints to use the <code>ideal</code> keyword:

<code>{
  video: {
    width: {
      min: 1280,
      ideal: 1920,
      max: 2560,
    },
    height: {
      min: 720,
      ideal: 1080,
      max: 1440
    }
  }
}
</code>

To tell the browser to make use of the front or back (on mobile) camera on devices, you can specify a <code>facingMode</code> property in the <code>video</code> object:

<code>{
  video: {
    width: {
      min: 1280,
      ideal: 1920,
      max: 2560,
    },
    height: {
      min: 720,
      ideal: 1080,
      max: 1440
    },
    facingMode: 'user'
  }
}
</code>

This setting will make use of the front-facing camera at all times in all devices. 
To make use of the back camera on mobile devices, you can alter the <code>facingMode</code> property to <code>environment</code>.

<code>{
  video: {
    ...
    facingMode: {
      exact: 'environment'
    }
  }
}
</code>

<h3 id="cameratopic-5">Step 4 — Using the <code>enumerateDevices</code> Method</h3>

When the <code>enumerateDevices</code> method is called, it returns all of the available input media devices available on the user's PC.

With the method, you can provide the user options on which input media device to use for streaming audio or video content. 
This method returns a <code>Promise</code> resolved to a <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaDeviceInfo">MediaDeviceInfo</a> array containing information about each device.

An example of how to make a use of this method is shown in the snippet below:

<code>async function getDevices() {
  const devices = await navigator.mediaDevices.enumerateDevices();
}
</code>

A sample response for each of the devices would look like the following:

<code>{
  deviceId: "23e77f76e308d9b56cad920fe36883f30239491b8952ae36603c650fd5d8fbgj",
  groupId: "e0be8445bd846722962662d91c9eb04ia624aa42c2ca7c8e876187d1db3a3875",
  kind: "audiooutput",
  label: "",
}
</code>

<span class="note"><strong>Note:</strong> A label won't be returned unless an available stream is available, or if the user has granted device access permissions.<br></span>

<h3 id="cameratopic-6">Step 5 — Displaying the Video Stream on the Browser</h3>

You have gone through the process of requesting and getting access to the media devices, configured constraints to include required resolutions, and selected the camera you will need to record video.

After going through all these steps, you'll at least want to see if the stream is delivering based on the configured settings. 
To ensure this, you will make use of the <code>&lt;video&gt;</code> element to display the video stream on the browser.

Like mentioned earlier, the <code>getUserMedia</code> method returns a <code>Promise</code> that can be resolved to a stream. 
The returned stream can be converted to an object URL using the  method. 
This URL will be set as a video source.

You will create a short demo where we let the user choose from their available list of video devices. 
using the  method.

This is a <code>navigator.mediaDevices</code> method. 
It lists the available media devices, such as microphones and cameras. 
It returns a <code>Promise</code> resolvable to an array of objects detailing the available media devices.

Create an <code>index.html</code> file and update the contents with the code below:

<div title="index.html">index.html</div><code>&lt;!doctype html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;
    &lt;video autoplay&gt;&lt;/video&gt;
    &lt;canvas&gt;&lt;/canvas&gt;

    &lt;div&gt;
        &lt;select name=""&gt;
            &lt;option value=""&gt;Select camera&lt;/option&gt;
        &lt;/select&gt;
    &lt;/div&gt;

    &lt;img&gt;

    &lt;div&gt;
        &lt;button title="Play"&gt;&lt;i data-feather="play-circle"&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;button title="Pause"&gt;&lt;i data-feather="pause"&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;button title="ScreenShot"&gt;&lt;i data-feather="image"&gt;&lt;/i&gt;&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;script src="https://unpkg.com/feather-icons"&gt;&lt;/script&gt;
&lt;script src="script.js"&gt;&lt;/script&gt;gt;
&lt;/body&gt;
&lt;/html&gt;
</code>

In the snippet above, you have set up the elements you will need and a couple of controls for the video. 
Also included is a button for taking screenshots of the current video feed.

Now, let's style up these components a bit.

Create a <code>style.css</code> file and copy the following styles into it. 
<a href="https://getbootstrap.com/">Bootstrap</a> was included to reduce the amount of CSS you will need to write to get the components going.

<div title="style.css">style.css</div><code>.screenshot-image {
    width: 150px;
    height: 90px;
    border-radius: 4px;
    border: 2px solid whitesmoke;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
    position: absolute;
    bottom: 5px;
    left: 10px;
    background: white;
}

.display-cover {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 70%;
    margin: 5% auto;
    position: relative;
}

video {
    width: 100%;
    background: rgba(0, 0, 0, 0.2);
}

.video-options {
    position: absolute;
    left: 20px;
    top: 30px;
}

.controls {
    position: absolute;
    right: 20px;
    top: 20px;
    display: flex;
}

.controls &gt; button {
    width: 45px;
    height: 45px;
    text-align: center;
    border-radius: 100%;
    margin: 0 6px;
    background: transparent;
}

.controls &gt; button:hover svg {
    color: white !important;
}

@media (min-width: 300px) and (max-width: 400px) {
    .controls {
        flex-direction: column;
    }

    .controls button {
        margin: 5px 0 !important;
    }
}

.controls &gt; button &gt; svg {
    height: 20px;
    width: 18px;
    text-align: center;
    margin: 0 auto;
    padding: 0;
}

.controls button:nth-child(1) {
    border: 2px solid #D2002E;
}

.controls button:nth-child(1) svg {
    color: #D2002E;
}

.controls button:nth-child(2) {
    border: 2px solid #008496;
}

.controls button:nth-child(2) svg {
    color: #008496;
}

.controls button:nth-child(3) {
    border: 2px solid #00B541;
}

.controls button:nth-child(3) svg {
    color: #00B541;
}

.controls &gt; button {
    width: 45px;
    height: 45px;
    text-align: center;
    border-radius: 100%;
    margin: 0 6px;
    background: transparent;
}

.controls &gt; button:hover svg {
    color: white;
}
</code>

The next step is to add functionality to the demo. 
Using the <code>enumerateDevices</code> method, you will get the available video devices and set it as the options within the select element. 
Create a file called <code>script.js</code> and update it with the following snippet:

<div title="script.js">script.js</div><code>feather.replace();

const controls = document.querySelector('.controls');
const cameraOptions = document.querySelector('.video-options&gt;select');
const video = document.querySelector('video');
const canvas = document.querySelector('canvas');
const screenshotImage = document.querySelector('img');
const buttons = [...controls.querySelectorAll('button')];
let streamStarted = false;

const [play, pause, screenshot] = buttons;

const constraints = {
  video: {
    width: {
      min: 1280,
      ideal: 1920,
      max: 2560,
    },
    height: {
      min: 720,
      ideal: 1080,
      max: 1440
    },
  }
};

const getCameraSelection = async () =&gt; {
  const devices = await navigator.mediaDevices.enumerateDevices();
  const videoDevices = devices.filter(device =&gt; device.kind === 'videoinput');
  const options = videoDevices.map(videoDevice =&gt; {
    return `&lt;option value="${videoDevice.deviceId}"&gt;${videoDevice.label}&lt;/option&gt;`;
  });
  cameraOptions.innerHTML = options.join('');
};

play.onclick = () =&gt; {
  if (streamStarted) {
    video.play();
    play.classList.add('d-none');
    pause.classList.remove('d-none');
    return;
  }
  if ('mediaDevices' in navigator &amp;&amp; navigator.mediaDevices.getUserMedia) {
    const updatedConstraints = {
      ...constraints,
      deviceId: {
        exact: cameraOptions.value
      }
    };
    startStream(updatedConstraints);
  }
};

const startStream = async (constraints) =&gt; {
  const stream = await navigator.mediaDevices.getUserMedia(constraints);
  handleStream(stream);
};

const handleStream = (stream) =&gt; {
  video.srcObject = stream;
  play.classList.add('d-none');
  pause.classList.remove('d-none');
  screenshot.classList.remove('d-none');
  streamStarted = true;
};

getCameraSelection();
</code>

In the snippet above, there are a couple of things going on. 
Let's break them down:

<ol>
<code>feather.replace()</code>: this method call instantiates <a href="https://feathericons.com/">feather</a>, which is an icon set for web development.

The <code>constraints</code> variable holds the initial configuration for the stream. 
This will be extended to include the media device the user chooses.

<code>getCameraSelection</code>: this function calls the <code>enumerateDevices</code> method. 
Then, you filter through the array from the resolved <code>Promise</code> and select video input devices. 
From the filtered results, you create <code>&lt;option&gt;</code> for the <code>&lt;select&gt;</code> element.

Calling the <code>getUserMedia</code> method happens within the <code>onclick</code> listener of the <code>play</code> button. 
Here, you will check if this method is supported by the user's browser before starting the stream.

Next, you will call the <code>startStream</code> function that takes a <code>constraints</code> argument. 
It calls the <code>getUserMedia</code> method with the provided <code>constraints</code>. 
<code>handleStream</code> is called using the stream from the resolved <code>Promise</code>. 
This method sets the returned stream to the video element's <code>srcObject</code>.

</ol>

Next, you will add click listeners to the button controls on the page to <code>pause</code>, <code>stop</code>, and take <code>screenshots</code>. 
Also, you will add a listener to the <code>&lt;select&gt;</code> element to update the stream constraints with the selected video device.

Update the <code>script.js</code> file with the code below:

<div title="script.js">script.js</div><code>...
cameraOptions.onchange = () =&gt; {
  const updatedConstraints = {
    ...constraints,
    deviceId: {
      exact: cameraOptions.value
    }
  };
  startStream(updatedConstraints);
};

const pauseStream = () =&gt; {
  video.pause();
  play.classList.remove('d-none');
  pause.classList.add('d-none');
};

const doScreenshot = () =&gt; {
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  canvas.getContext('2d').drawImage(video, 0, 0);
  screenshotImage.src = canvas.toDataURL('image/webp');
  screenshotImage.classList.remove('d-none');
};

pause.onclick = pauseStream;
screenshot.onclick = doScreenshot;
</code>

Now, when you open the <code>index.html</code> file in the browser, clicking the <strong>Play</strong> button will start the stream.

Here is a complete demo:

<a href="https://codepen.io/chrisbeast/pen/ebYwpX">https://codepen.io/chrisbeast/pen/ebYwpX</a>

<h3 id="cameratopic-7">Conclusion</h3>

This tutorial introduced the <code>getUserMedia</code> API. 
It is an interesting addition to HTML5 that eases the process of capturing media on the web.

The API takes a parameter (<code>constraints</code>) that can be used to configure the access to audio and video input devices. 
It can also be used to specify the video resolution required for your application.

You can extend the demo further to give the user an option to save the screenshots taken, as well as recording and storing video and audio data with the help of MediaStream Recording API.

https://stackoverflow.com/questions/12024770/access-camera-from-a-browser

<h2>Web Audio</h2>
<a href="https://p5js.org/reference/#/libraries/p5.sound" class="whitebut ">p5.sound Web Audio including audio input, playback, analysis and synthesis</a>
<a href="https://p5js.org/reference/#/p5.Amplitude/getLevel" class="whitebut ">p5.sound getLevel</a>

<h2>IOT and robotic</h2>
<a href="https://blog.bitsrc.io/10-javascript-iot-libraries-to-use-in-your-next-projects-bef5f9136f83" class="whitebut ">Javascript iot-libraries (robotics)</a>

<a href="https://docs.mistyrobotics.com/misty-i/coding-misty/local-skill-tutorials/" class="whitebut ">On-Robot JavaScript API Tutorials</a>


<h2>jquery set img width and height</h2>
$('img').css('max-height', $(window).height());

$("img").click(function() {
 $('img').css('max-height', $(window).height());
 window.location = "#topic-" + topicpointer;
})

$("img").dblclick(function() {
 $('img').css('max-height', '100%');
 window.location = "#topic-" + topicpointer;
})

img{max-height:100vh;}
img{max-width:100vh;}


<h2>popup was blocked</h2>
to test if a popup was blocked and take action in case.

function pop(url,w,h) {
    n=window.open(url,'_blank','toolbar=0,location=0,directories=0,status=1,menubar=0,titlebar=0,scrollbars=1,resizable=1,width='+w+',height='+h);
    if(n==null) {
        alert("popup blocked")
        return true;
    }
    return false;
}

<h2>javascript write to page</h2> 
var html="";
html +='&lt;div class="main clearFix inner new-center2">';
document.write(html);

<h2>Make anchor link go some pixels above</h2>

window.addEventListener("hashchange", function () {
    window.scrollTo(window.scrollX, window.scrollY - 20);
});


<a href="https://www.py4u.net/discuss/278843" class="whitebut ">Make anchor link go some pixels above where it's linked to</a>

<a href="https://thewebdev.info/2021/05/08/how-to-make-an-anchor-link-go-some-pixels-above-where-its-linked-to-with-javascript/" class="whitebut ">Make an Anchor Link Go Some Pixels Above Where it’s Linked To</a>

<h2>software Open Source Projects</h2>
<a href="https://medium.com/@likid_geimfari/the-list-of-interesting-open-source-projects-2daaa2153f7c" class="whitebut ">interesting Open Source projects</a>

<a href="https://fusejs.io/" class="whitebut ">Fuse.js is a fuzzy-search library</a>
<a href="https://markjs.io/" class="whitebut ">JavaScript keyword highlighter</a>
<a href="https://prismjs.com/" class="whitebut ">Prism is a syntax highlighter</a>
<a href="https://www.npmjs.com/package/rocket-loader" class="whitebut ">An animated loader graphic module.</a>


<h2>AJAX Database Example</h2>
The following example will demonstrate how a web page can fetch information from a database with AJAX

&lt;h2>The XMLHttpRequest Object&lt;/h2>

&lt;form action=""> 
  &lt;select name="customers" onchange="showCustomer(this.value)">
    &lt;option value="">Select a customer:&lt;/option>
    &lt;option value="ALFKI">Alfreds Futterkiste&lt;/option>
    &lt;option value="NORTS ">North/South&lt;/option>
    &lt;option value="WOLZA">Wolski Zajazd&lt;/option>
  &lt;/select>
&lt;/form>
&lt;br>
&lt;div id="txtHint">Customer info will be listed here...&lt;/div>

&lt;script>
function showCustomer(str) {
  if (str == "") {
    document.getElementById("txtHint").innerHTML = "";
    return;
  }
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    document.getElementById("txtHint").innerHTML = this.responseText;
  }
  xhttp.open("GET", "getcustomer.php?q="+str);
  xhttp.send();
}


The showCustomer() Function
When a user selects a customer in the dropdown list, a function called showCustomer() is executed.
The function is triggered by the onchange event:

showCustomer
function showCustomer(str) {
  if (str == "") {
    document.getElementById("txtHint").innerHTML = "";
    return;
  }
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    document.getElementById("txtHint").innerHTML = this.responseText;
  }
  xhttp.open("GET", "getcustomer.php?q="+str);
  xhttp.send();
}
The showCustomer() function does the following:

Check if a customer is selected
Create an XMLHttpRequest object
Create the function to be executed when the server response is ready
Send the request off to a file on the server
Notice that a parameter (q) is added to the URL (with the content of the dropdown list)
The AJAX Server Page
The page on the server called by the JavaScript above is a PHP file called "getcustomer.php".

The source code in "getcustomer.php" runs a query against a database, and returns the result in an HTML table:

&lt;?php
$mysqli = new mysqli("servername", "username", "password", "dbname");
if($mysqli->connect_error) {
  exit('Could not connect');
}

$sql = "SELECT customerid, companyname, contactname, address, city, postalcode, country
FROM customers WHERE customerid = ?";

$stmt = $mysqli->prepare($sql);
$stmt->bind_param("s", $_GET['q']);
$stmt->execute();
$stmt->store_result();
$stmt->bind_result($cid, $cname, $name, $adr, $city, $pcode, $country);
$stmt->fetch();
$stmt->close();

echo "&lt;table>";
echo "&lt;tr>";
echo "&lt;th>CustomerID&lt;/th>";
echo "&lt;td>" . $cid . "&lt;/td>";
echo "&lt;th>CompanyName&lt;/th>";
echo "&lt;td>" . $cname . "&lt;/td>";
echo "&lt;th>ContactName&lt;/th>";
echo "&lt;td>" . $name . "&lt;/td>";
echo "&lt;th>Address&lt;/th>";
echo "&lt;td>" . $adr . "&lt;/td>";
echo "&lt;th>City&lt;/th>";
echo "&lt;td>" . $city . "&lt;/td>";
echo "&lt;th>PostalCode&lt;/th>";
echo "&lt;td>" . $pcode . "&lt;/td>";
echo "&lt;th>Country&lt;/th>";
echo "&lt;td>" . $country . "&lt;/td>";
echo "&lt;/tr>";
echo "&lt;/table>";
?>


<h2>javascript online compiler</h2>
<a href="https://onecompiler.com/javascript" class="whitebut ">javascript compiler</a>
<a href="https://www.programiz.com/javascript/online-compiler/" class="whitebut ">javascript online compiler</a>
<a href="https://www.tutorialspoint.com/online_javascript_editor.php" class="whitebut ">tutorialspoint online_javascript_editor</a>
<a href="https://playcode.io/new/" class="whitebut ">playcode javascript online</a>
<a href="https://replit.com/languages/javascript" class="whitebut ">replit online compiler</a>

<h2>execute script code in a javascript append</h2>
appending HTML into the DOM does not cause the browser to evaluate any <a href="/how-to-transfer-code-from-in-script-tags-to-a-js-file-code-example" rel="dofollow">script tags</a> in said appended HTML.
If you really wanted to, you could evaluate the javascript by using <code>eval()</code>:
<code>eval($(this).find("script").text());</code>
I know this is an old question but I've had a similar problem today.
The solution was using createContextualFragment.

My <a href="/qr-code-looks-funy-code-example" rel="dofollow">code looks</a> something like this:
<code>var tagString = '&lt;script async type="text/javascript" src="path_to_script"&gt;&lt;/script&gt;';
var range = document.createRange();

range.selectNode(document.getElementsByTagName("BODY")[0]);
var documentFragment = range.createContextualFragment(tagString);
document.body.appendChild(documentFragment);

</code>
This <a href="/javascript-how-visual-code-works-with-node-js-code-example" rel="dofollow">code works</a> in my browser.
<code>$('body').append('&lt;script&gt;alert("test");&lt;' + '/' + 'script&gt;');

</code>
so it might be that <code>$(this)</code> is what is actually causing your problem.
Can you replace it with <code>'body'</code> and see if it works like that?

<h2>after append</h2>
jquery insert after
$( "&lt;p>Test&lt;/p>" ).insertAfter( ".inner" );

jquery append after
&lt;div class="container">
  &lt;h2>Greetings&lt;/h2>
  &lt;div class="inner">Hello&lt;/div>
  &lt;div class="inner">Goodbye&lt;/div>
&lt;/div>
&lt;script>$( "&lt;p>Test&lt;/p>" ).insertAfter( ".inner" );&lt;/script>

append after div
.after() puts the element after the element
using after:
$('.a').after($('.c'));
after execution:
&lt;div class='a'>
  &lt;div class='b'>b&lt;/div>
&lt;/div>
&lt;div class='c'>c&lt;/div> //&lt;----this will be placed here

<h2>Run script after appending it to the HTML</h2>
jQuery provides the $.getScript(url [,success]) function. You can then load and execute your code from a separate jquery file which helps to manage and control the flow of execution.

basically put your alert("testing!") script inside a separate file, for instance alert.js in the same directory.

Then you can run the script when adding your employee to the HTML.

var str = '<div><p>Examplee</p></div>';
var url = 'alert.js';    
document.body.innerHTML += str;    
$.getScript(url);
I know this may seem like more work, but it is better practice to keep your javascript out of your HTML. You can also use a callback to gather user data after the alert or notify another process that the user has been alerted.

$.getScript(url, function(){
  //do something after the alert is executed.
});
For instance maybe it would be a better design to add the employee after the alert is executed.

var str = '<div><p>Examplee</p></div>';
var url = 'alert.js'; 
$.getScript(url, function(){
  document.body.innerHTML += str;
});
Edit: I know jQuery is not tagged, but I am also no petitioning to be the accepted answer to this question. I am only offering another alternative for someone who may run into the same issue and may be using jQuery. If that is the case $.getScript is a very useful tool designed for this exact problem.

<h2>Failed to load resource</h2>
net::ERR_BLOCKED_BY_CLIENT with Google chrome
These errors are usually generated from an ad blocking plugin, such as Adblock Plus.
To test this use either a different browser or uninstall the ad blocking plugin.

There is an easier way to temporarily disable an extension.
In Chrome, opening an Incognito tab will usually stop extensions running.
use ctrl+shift+N

<h2>Count frequency</h2>
var arr = [5, 5, 5, 2, 2, 2, 2, 2, 9, 4]

arr.reduce(function (acc, item) {
  return acc[item] ? ++acc[item] : acc[item] = 1, acc
}, {});

console.log(arr) // => {2: 5, 4: 1, 5: 3, 9: 1}

or
arr.reduce((acc, item) => {
  acc[item] = (acc[item] || 0) + 1
  return acc
}, {})

to create an incremental range, pre sort the array
arr.sort();

to apply a filter within range
var res = arr.filter(function(item) {
  return item <= range.max && item >= range.min;
});
arr.filter(function(item) { return item <= 5 && item >= 3; });

loop to find frequency distribution by bins

By default, the sort method sorts elements alphabetically.
To sort numerically just add a new method which handles numeric sorts
arr.sort(function(a, b) { return a - b; }) // note the minus operation

var arr = [5, 5, 5, 2, 2, 2, 2, 2, 9, 4, 3,6,6,8,7,1,2,4, 4,2,7,5,10,11,12]
arr.map(x => parseInt(x))
// arr.sort()
arr.sort(function(a, b) { return a - b; }) // note the minus operation
bins = 4
theMin = Math.min( ...arr )
theMax = Math.max( ...arr )
range = theMax - theMin
interval = range / bins
freq = []
for (i = theMin; i <= theMax; i += interval) {
  if(i + interval == theMax){
    var selected = arr.filter(function(item) {
      return item >= i && item <= i + interval;
    });
  }else{
    var selected = arr.filter(function(item) {
      return item >= i && item < i + interval;
    });
  }

  counts = selected.length
  console.log(i, " selected ",selected, " counts ",counts)
  freq.push(counts)
}
freq.pop()  // the last one is not intended

<h2>find Mode, mean, std, variance</h2>
function findMode(arr) {
    var modes = [], count = [], i, number, maxIndex = 0;
    for (i = 0; i < arr.length; i += 1) {
        number = arr[i];
        count[number] = (count[number] || 0) + 1;
        if (count[number] > maxIndex) {
            maxIndex = count[number];
        }
    }
 
    for (i in count)
        if (count.hasOwnProperty(i)) {
            if (count[i] === maxIndex) {
                modes.push(Number(i));
            }
        }
    return modes;
}

interquartile range

standard deviation

Cumulative Frequency Distributions

// sort array ascending
const asc = arr => arr.sort((a, b) => a - b);
const sum = arr => arr.reduce((a, b) => a + b, 0);
const mean = arr => sum(arr) / arr.length;

// sample standard deviation
const std = (arr) => {
    const mu = mean(arr);
    const diffArr = arr.map(a => (a - mu) ** 2);
    return Math.sqrt(sum(diffArr) / (arr.length - 1));
};

const quantile = (arr, q) => {
    const sorted = asc(arr);
    const pos = (sorted.length - 1) * q;
    const base = Math.floor(pos);
    const rest = pos - base;
    if (sorted[base + 1] !== undefined) {
        return sorted[base] + rest * (sorted[base + 1] - sorted[base]);
    } else {
        return sorted[base];
    }
};

const findVariance = (array = []) => {
   if(!array.length){
      return 0;
   };
   const sum = array.reduce((acc, val) => acc + val);
   const { length: num } = array;
   const median = sum / num;
   let variance = 0;
   array.forEach(num => {
      variance += ((num - median) * (num - median));
   });
   variance /= num;
   return variance;
};

const q25 = arr => quantile(arr, .25);
const q50 = arr => quantile(arr, .50);
const q75 = arr => quantile(arr, .75);
const median = arr => q50(arr);

to find q25 of an numArray
q25(numArray)


<h2>To check max input length by prompt</h2>
var rep = "+" ;
while (rep != null)
{
    document.write(rep.length + " " + rep + "&lt;br>") ;
    rep = prompt("Input length was : " + rep.length, rep + rep);
}


<h2>html re-enable right click</h2>
https://stackoverflow.com/questions/21335136/how-to-re-enable-right-click-so-that-i-can-inspect-html-elements-in-chrome/21335527

Open dev tools (Shift+Control+i).
Select the "Elements" tab,
and then the "Event Listeners" tab.

Hover over the elements/listener. A "Remove" button will show up.
Click "Remove".
<img class="lazy" data-src="https://i.stack.imgur.com/gNAtV.png">

Another possible way, when the blocking function is made with jquery, use:

$(document).unbind();
It will clear all the onmousedown and contextmenu events attributed dynamically, that can't be erased with document.contextmenu=null; etc.

some code did a re-bind: 
$(document).bind("contextmenu",function(e){if(!$('#easyy').length)e.preventDefault();});

If none of the other comments works, just do, open console line command and type:

document.oncontextmenu = null;


<h2>JavaScript encryption hex_md5.js</h2>
https://gist.github.com/Xarrow/e8d14b982c2763954230

&lt;script type="text/javascript" src="md5.js">&lt;/script>
&lt;script>
for(var k=1; k&lt;=310; k++){
  $('#mustWatch').append( hex_md5(String(k)) + "&lt;br>")
}
&lt;/script>

<h2>generate random array</h2>
waitingList = Array(10).fill().map(() => Math.round(Math.random() * totalLength))
// set unique
waitingList = [...new Set(waitingList)]


if (localStorage.getItem(waitingList) === null) {
    initWaitList()
}else{
    waitList = localStorage.getItem(waitingList).split(",").map(Number)
    if(waitList == [0]){ initWaitList() }
}

function initWaitList() {
    // generate random pointers
    waitList = Array(10).fill().map(() => Math.round(Math.random() * totalLength))
    waitList = [...new Set(waitList)]    // set unique
    localStorage.setItem(waitingList, waitList)
}

function randomWL() {
  pointerList = waitList
  if(waitList.length > 10){
    pointerList.splice(10, (pointerList.length - 10));
  }
  newPointer = pointerList[Math.floor(Math.random() * pointerList.length)];
  while(newPointer == topicpointer){
    newPointer = pointerList[Math.floor(Math.random() * pointerList.length)];
  }
  topicpointer = newPointer;
  showTopic();
}

function addtoWL() {
     console.log(topicpointer)waitList.push(topicpointer)waitList = Array.from(new Set(waitList))localStorage.setItem(waitingList, waitList)alert("added topic: " +topicpointer+ "\nwaitList: " + waitList)
}

<h2>communicate between two html pages</h2>
<a href="https://webrtc.github.io/samples/" class="whitebut ">WebRTC Real-time communication for the web</a>

Try using cookies. 
It's the simplest way I can think of. 
This website might seem helpful: <a href="https://www.w3schools.com/js/js_cookies.asp" rel="nofollow noreferrer">https://www.w3schools.com/js/js_cookies.asp</a>

You can't do this with just JavaScript. 
The point is: JS is a client-side language which means that it is downloaded by a client (a browser) and is run by it (not by server). 
For the 2 pages to communicate, you have establish the communication somehow, via some medium. 

The medium can be:
<li>web itself. 
2 clients can communicate directly, but only if they know each others' address. 
How would they get those? By the help of the server (which brings us to the second option below) or by manual configuration which is very impractical (some more details may be found in context of WebRTC)</li>
<li>your server. 
Ok, that's the most common approach but that involves more than just JS: this requires a server-side language (PHP, Python, C++, Java, whatever)</li>
<li>your browser. 
There's a special case where you can establish such a communication: if you open your second page in the same browser from your first page in a special way so that the second one is &quot;under control&quot; of the first one, you can &quot;command&quot; the second one to do some stuff from the first one</li>

So, if you're interested in the third option, you should read about <code>window.open</code>, <code>window.opener</code>, <code>window.parent</code>.

<code>var newWindow = window.open(url, name, params);</code>

will open a new window (say your second page) and bring you a variable <code>newWindow</code> which is a reference to the <code>window</code> object of the opened window. 
Try for instance

<code>newWindow.write(&quot;haha, I'm controlling this stuff!&quot;);</code>

Likewise, in the second window you can use

<code>var oldWindow = window.opener;</code>

There's also a number of methods you can use (<code>window``.close</code>, <code>.moveBy</code>, <code>.moveTo</code>, <code>.resizeBy</code>, <code>.resizeTo</code> etc etc).

Remember, however, that this interaction will be limited to your browser: if you  change something as <em>it is displayed in your browser</em> (like add some text to a page) this won't affect the actual pages stored on your server because this requires your server do something via some server-side scripts.

PS to advance this technique, you may want to read about <code>window.postMessage</code> but that's mostly designed for communication between pages that are cross-domain.

PPS Actually, there's more!
<li>
One thing to note is  and  have <code>setItem</code> method which generates <code>'storage'</code> events on <code>window</code> (try <code>localStorage.setItem('key', 'value');</code> and <code>window.addEventListener('storage', event =&gt; console.log(event.key));</code>).</li>
<li>
Another, like Anderson Green has noted, is <a href="https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API" rel="nofollow noreferrer">Broadcast Channel API</a> (try <code>const channel = new BroadcastChannel('my_channel')</code>, <code>channel.postMessage('Hi there!')</code> and <code>channel.addEventListener('message', event =&gt; console.log(event))</code>).</li>
<li>
There's also <a href="https://developer.mozilla.org/ru/docs/Web/API/SharedWorker" rel="nofollow noreferrer"><code>SharedWorker</code>s</a> and <a href="https://developer.mozilla.org/ru/docs/Web/API/Service_Worker_API" rel="nofollow noreferrer">Service Workers</a>.</li>
<li>
Finally, you can use some off-the-shelve solutions like .</li>

Those who speak Russian may also find more useful details in <a href="https://habr.com/ru/company/rambler_group/blog/422545/" rel="nofollow noreferrer">this article</a> (wow!).

<h2>Create a Cookie with JavaScript</h2>
JavaScript can create, read, and delete cookies with the <code>document.cookie</code> 
property.

With JavaScript, a cookie can be created like this:
document.cookie = "username=John Doe";
You can also add an expiry date (in UTC time).

By default, the cookie is deleted when the browser is closed:
document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC";
With a path parameter, you can tell the browser what path the cookie belongs to.

By default, the cookie belongs to the current page.
document.cookie = "username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";
<h3>Read a Cookie with JavaScript</h3>

With JavaScript, cookies can be read like this:
let x = document.cookie;
<code>document.cookie</code> will return all cookies in one string much like: cookie1=value; cookie2=value; cookie3=value;

<h3>Change a Cookie with JavaScript</h3>
With JavaScript, you can change a cookie the same way as you create it:
document.cookie = "username=John Smith; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/";

The old cookie is overwritten.
<h3>Delete a Cookie with JavaScript</h3>
Deleting a cookie is very simple.

You don't have to specify a cookie value when you delete a cookie.
Just set the expires parameter to a past date:
document.cookie = "username=; expires=Thu, 01 

Jan 1970 00:00:00 UTC; path=/;";
You should define the cookie path to ensure that you delete the right cookie.
Some browsers will not let you delete a cookie if you don't specify the path.

<h3>The Cookie String</h3>
The <code>document.cookie</code> property looks like a normal text string. But it is not.
Even if you write a whole cookie string to document.cookie, when you read it out again, you can only see the 

name-value pair of it.
If you set a new cookie, older cookies are not overwritten.
The new cookie is added to document.cookie, so if you read document.cookie 

again you will get something like:
cookie1 = value; cookie2 = value;
<button type="button" onclick='displayCookies()'>Display All Cookies</button> 
<button type="button" onclick='document.cookie="firstname=John;expires=Wed, 18 Dec 2026 12:00:00 GMT"'>Create Cookie 1</button> 
<button type="button" onclick='document.cookie="lastname=Smith;expires=Wed, 18 Dec 2026 12:00:00 GMT"'>Create Cookie 2</button>
<button type="button" onclick='document.cookie="firstname=;expires=Thu, 01 Jan 1970"'>Delete Cookie 1</button> 
<button type="button" onclick='document.cookie="lastname=;expires=Thu, 01 Jan 1970"'>Delete Cookie 2</button>
If you want to find the value of one specified cookie, you must write a JavaScript 
function that searches for the cookie value in the cookie string.

<h3>JavaScript Cookie Example</h3>
In the example to follow, we will create a cookie that stores the name of a visitor.
The first time a visitor arrives to the web page, he/she will be asked to fill in his/her name. The name is then stored in a cookie.

The next time the visitor arrives at the same page, he/she will get a welcome message.
For the example we will create 3 JavaScript functions:
  <li>A function to set a cookie value</li>
  <li>A function to get a cookie value</li>
  <li>A function to check a cookie value</li>
<h3>A Function to Set a Cookie</h3>
First, we create a <code>function</code> that stores the name of the visitor in a cookie variable:
<b>Example</b>
function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays*24*60*60*1000));
  let expires = "expires="+ d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}
<strong>Example explained:</strong>
The parameters of the function above are the name of the cookie (cname), the value of the cookie 
(cvalue), and the number of days until the cookie should expire (exdays).
The function sets a cookie by adding together the cookiename, the cookie 
value, and the expires string.

<h3>A Function to Get a Cookie</h3>
Then, we create a <code>function</code> that returns the value of a specified cookie:
<b>Example</b>
function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i &lt;ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

<strong>Function explained:</strong>
Take the cookiename as parameter (cname).
Create a variable (name) with the text to search for (cname + "=").

Decode the cookie string, to handle cookies with special characters, e.g. '$'
Split document.cookie on semicolons into an array called ca (ca = 
decodedCookie.split(';')).

Loop through the ca array (i = 0; i < ca.length; i++), and read out each value c = ca[i]).
If the cookie is found (c.indexOf(name) == 0), return the value of the cookie (c.substring(name.length, c.length).
If the cookie is not found, return "".

<h3>A Function to Check a Cookie</h3>

Last, we create the function that checks if a cookie is set.
If the cookie is set it will display a greeting.
If the cookie is not set, it will display a prompt box, asking for the name of the user,

and stores the username cookie for 365 days, by calling the <code>setCookie</code> function:
<b>Example</b>
function checkCookie() {
  let username = getCookie("username");
  if (username != "") {
   alert("Welcome again " + username);
  } else {
    username = prompt("Please enter your name:", "");
    if (username != "" && username != null) {
      setCookie("username", username, 365);
    }
  }
}

<h3>All Together Now</h3>
<b>Example</b>
function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
  let expires = "expires="+d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
  let name = cname + "=";
  let ca = document.cookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}

function checkCookie() {
  let user = getCookie("username");
  if (user != "") {
    alert("Welcome again " + user);
  } else {
    user = prompt("Please enter your name:", "");
    if (user != "" && user != null) {
      setCookie("username", user, 365);
    }
  }
}

<a target="_blank" href="https://www.w3schools.com/js/tryit.asp?filename=tryjs_cookie_username" class="w3-btn w3-margin-bottom">Try it Yourself &raquo;</a>
The example above runs the <code>checkCookie()</code> function when the page loads.



<h2>blank return</h2>
var x; // x is undefined
alert(x); // shows "undefined"
alert(!x); // shows "true"
alert(x==false); // shows "false"

So, It is a good practice to return "false" instead of a blank return. That way you make it all uniform and make life easy for other programmers.

alert("type: " + typeof x+", value: "+x);
alert("type: " + typeof !x+", value: "+!x);
alert("type: " + typeof x==false +", value: "+ x==false);


<h2>speechSynthesis.speak()</h2>
speechSynthesis.speak() without user activation is no longer allowed

If you set your site address as "trusted" in chrome://settings/content/sound it seems to enable sound and speech synthesis even without user interactions.

User interaction means: click, dblclick, mouseup, pointerup, reset, submit etc.

So, if you want to run speechSynthesis.speak(); without real user interaction, then you just create temporary user interaction using a method like .click(), etc.

https://stackoverflow.com/questions/46551705/speechsynthesis-speaking-never-true

A simple hack, without needing a real user activity, is to execute a click event on a hidden button like so.

document.querySelector('button').click();
var msg = new SpeechSynthesisUtterance('Test');

window.onload = function(){ 
var u = new SpeechSynthesisUtterance('All is Ok');
 u.text = 'Hello World';    
 u.lang = 'en-US';
 u.rate = 1;
 u.pitch = .4;     
 speechSynthesis.speak(u);
}

function doSpeech() {
    var synth = window.speechSynthesis;

    var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say. Make it longer !');
    var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side. even longer !');

    synth.speak(utterance1);

    // If you check immediately (js code executed in less than ms) the
    // status won't be true
    if (synth.speaking) {
        console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
    }

    // Wait 500ms to check for the status of the utterance
    setTimeout(function(){
        if (synth.speaking) {
            console.log("This will be printed if starts after 500ms :)");
        }
    }, 500);
}

doSpeech();
In my case, both of the console.log statements are being printed. But if in your case it isn't being printed, execute your code only after the start event of the utterance:

function doSpeech() {
    var synth = window.speechSynthesis;
    var msg = new SpeechSynthesisUtterance();
    msg.text = "We should say another sentence too, just to be on the safe side. even longer !";

    msg.addEventListener('start', function () {
        if(synth.speaking){
            console.log("This will be printed !");
        }
    });

    synth.speak(msg);
} 

doSpeech();

function doSpeech() {
    var synth = window.speechSynthesis;

    var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say. Make it longer !');
    var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side. even longer !');

    synth.speak(utterance1);

    // If you check immediately (js code executed in less than ms) the
    // status won't be true
    if (synth.speaking) {
        console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
    }

    // Wait 500ms to check for the status of the utterance
    setTimeout(function(){
        if (synth.speaking) {
            console.log("This will be printed if starts after 500ms :)");
        }
    }, 500);
}

doSpeech();
In my case, both of the console.log statements are being printed. But if in your case it isn't being printed, execute your code only after the start event of the utterance:

function doSpeech() {
    var synth = window.speechSynthesis;
    var msg = new SpeechSynthesisUtterance();
    msg.text = "We should say another sentence too, just to be on the safe side. even longer !";

    msg.addEventListener('start', function () {
        if(synth.speaking){
            console.log("This will be printed !");
        }
    });

    synth.speak(msg);
} 

doSpeech();

<h2>speak functions</h2>
function polyphone(str){
var findstr = ["應勿","則省","使更","不入","所好","所惡","號泣","喪","長呼","尊長","見能","遇長","長無","下車","待","朝起","便溺","切","冠服","不貴","循分","稱家","從容","跛倚","不問","還","擅為","為先","未的","地同載","同","行高","訾","不欲","不媚","不力","長浮","為限","滯塞","几","不敬","卷"];
var rplcstr = ["硬勿","則醒","使庚","轐入","所耗","所勿","毫泣","桑","掌呼","尊掌","現能","遇掌","掌無","下居","帶","招起","便尿","竊","官服","轐貴","循份","秤家","匆容","必倚","轐問","環","擅圍","圍先","未笛","弟銅在","銅","幸高","子","轐欲","轐媚","轐力","掌浮","圍限","滯色","雞","轐敬","倦"];
var regex; 
  for (var i = 0; i &lt; findstr.length; i++) {
    regex = new RegExp(findstr[i], "g");
    str= str.replace(regex, rplcstr[i]);
  }
return str;
}

function getSpeechParagraphs(){
var ret = "弟子規";
var pfs=document.getElementsByName('pf');
for (i = 0; i  &lt;  pfs.length; i++) {
  s=pfs[i].innerText.replace(/　/g, "，");
  s=s.replace(/[\n\r]/g,'，');
  ret=ret+'。'+s;
}
return polyphone(ret);
}

if ('speechSynthesis' in window) {  
var paragraphs=getSpeechParagraphs();
var synth = window.speechSynthesis;
synth.cancel();
var u = new SpeechSynthesisUtterance();
u.rate=0.8;
u.pitch=1;
u.volume=1;
u.text=paragraphs;
u.lang = 'zh-TW';

var u2 = new SpeechSynthesisUtterance();
u2.rate=0.7;
u2.pitch=1;
u2.volume=1;
u2.lang = 'zh-TW';


function speak() {
  speechSynthesis.speak(new SpeechSynthesisUtterance("hello world"));
  speechSynthesis.speak(u);
}

var u = new SpeechSynthesisUtterance('All is Ok');
 u.text = 'Hello World';    
 u.lang = 'en-US';
 u.rate = 1;
 u.pitch = .4;     

function speech_selection(){
var selectedText = "";
    if(window.getSelection){
        selectedText = window.getSelection();
    }else if(document.getSelection){
        selectedText = document.getSelection();
    }else if(document.selection){
        selectedText = document.selection.createRange().text;
    }
    if(selectedText != ""){
      selectedText = selectedText.toString();
      if(synth.speaking){synth.cancel();}

      var voices = synth.getVoices();
      for(var i=0;i &lt; voices.length;i++){
        if ( voices[i].localService==true && voices[i].lang.toLowerCase() =='zh-tw'){
          u2.voice=voices[i];
          break;
        }
      }      
      u2.text=polyphone(selectedText);
      synth.speak(u2);
    }
}

function doSpeech() {
    var synth = window.speechSynthesis;

    var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say. Make it longer !');
    var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side. even longer !');

    synth.speak(utterance1);

    // If you check immediately (js code executed in less than ms) the
    // status won't be true
    if (synth.speaking) {
        console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
    }

    // Wait 500ms to check for the status of the utterance
    setTimeout(function(){
        if (synth.speaking) {
            console.log("This will be printed if starts after 500ms :)");
        }
    }, 500);
}

doSpeech();

<h2>speak functions</h2>
function polyphone(str){
var findstr = ["應勿","則省","使更","不入","所好","所惡","號泣","喪","長呼","尊長","見能","遇長","長無","下車","待","朝起","便溺","切","冠服","不貴","循分","稱家","從容","跛倚","不問","還","擅為","為先","未的","地同載","同","行高","訾","不欲","不媚","不力","長浮","為限","滯塞","几","不敬","卷"];
var rplcstr = ["硬勿","則醒","使庚","轐入","所耗","所勿","毫泣","桑","掌呼","尊掌","現能","遇掌","掌無","下居","帶","招起","便尿","竊","官服","轐貴","循份","秤家","匆容","必倚","轐問","環","擅圍","圍先","未笛","弟銅在","銅","幸高","子","轐欲","轐媚","轐力","掌浮","圍限","滯色","雞","轐敬","倦"];
var regex; 
  for (var i = 0; i &lt; findstr.length; i++) {
    regex = new RegExp(findstr[i], "g");
    str= str.replace(regex, rplcstr[i]);
  }
return str;
}

function getSpeechParagraphs(){
var ret = "弟子規";
var pfs=document.getElementsByName('pf');
for (i = 0; i  &lt;  pfs.length; i++) {
  s=pfs[i].innerText.replace(/　/g, "，");
  s=s.replace(/[\n\r]/g,'，');
  ret=ret+'。'+s;
}
return polyphone(ret);
}

if ('speechSynthesis' in window) {  
var paragraphs=getSpeechParagraphs();
var synth = window.speechSynthesis;
synth.cancel();
var u = new SpeechSynthesisUtterance();
u.rate=0.8;
u.pitch=1;
u.volume=1;
u.text=paragraphs;
u.lang = 'zh-TW';

var u2 = new SpeechSynthesisUtterance();
u2.rate=0.7;
u2.pitch=1;
u2.volume=1;
u2.lang = 'zh-TW';


function speak() {
  speechSynthesis.speak(new SpeechSynthesisUtterance("hello world"));
  speechSynthesis.speak(u);
}

var u = new SpeechSynthesisUtterance('All is Ok');
 u.text = 'Hello World';    
 u.lang = 'en-US';
 u.rate = 1;
 u.pitch = .4;     

function speech_selection(){
var selectedText = "";
    if(window.getSelection){
        selectedText = window.getSelection();
    }else if(document.getSelection){
        selectedText = document.getSelection();
    }else if(document.selection){
        selectedText = document.selection.createRange().text;
    }
    if(selectedText != ""){
      selectedText = selectedText.toString();
      if(synth.speaking){synth.cancel();}

      var voices = synth.getVoices();
      for(var i=0;i &lt; voices.length;i++){
        if ( voices[i].localService==true && voices[i].lang.toLowerCase() =='zh-tw'){
          u2.voice=voices[i];
          break;
        }
      }      
      u2.text=polyphone(selectedText);
      synth.speak(u2);
    }
}

function doSpeech() {
    var synth = window.speechSynthesis;

    var utterance1 = new SpeechSynthesisUtterance('How about we say this now? This is quite a long sentence to say. Make it longer !');
    var utterance2 = new SpeechSynthesisUtterance('We should say another sentence too, just to be on the safe side. even longer !');

    synth.speak(utterance1);

    // If you check immediately (js code executed in less than ms) the
    // status won't be true
    if (synth.speaking) {
        console.log("This is usually printed, if the utterance uses the default voice of the browser (native)");
    }

    // Wait 500ms to check for the status of the utterance
    setTimeout(function(){
        if (synth.speaking) {
            console.log("This will be printed if starts after 500ms :)");
        }
    }, 500);
}

doSpeech();

<h2>showMov</h2>
function showMov() {
  idstring = "#topic-" + topicpointer;
  $(idstring).click()
}

<h2>table of table of contents</h2>
create div #totoc
put script at page bottom
var totoc = $('#totoc');
  $("a span.orange").each(function(i) {
      var totopic = $(this), totopicNumber = i; totopicLength = totopicNumber +1;
      totoc.append('<a href="#totopic-'+totopicNumber+'" target="_self">'+totopic.text()+'</a>'+"&emsp;");
      totopic.attr('id', 'totopic-' + totopicNumber);
  });

<h2>Javascript to write html</h2>
document.write('<link rel="stylesheet" href="https://github.githubassets.com/assets/gist-embed-35f1932cc1d8f751c18d0d928ff405a2.css">')

<h2>Modules, introduction</h2>
https://javascript.info/modules-intro
As our application grows bigger, we want to split it into multiple files, so called “modules”. 
A module may contain a class or a library of functions for a specific purpose.
For a long time, JavaScript existed without a language-level module syntax. 
That wasn’t a problem, because initially scripts were small and simple, so there was no need.

But eventually scripts became more and more complex, so the community invented a variety of ways to organize code into modules, special libraries to load modules on demand.
To name some (for historical reasons):
<a href="https://en.wikipedia.org/wiki/Asynchronous_module_definition">AMD</a> – one of the most ancient module systems, initially implemented by the library <a href="http://requirejs.org/">require.js</a>.
<a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS</a> – the module system created for Node.js server.
<a href="https://github.com/umdjs/umd">UMD</a> – one more module system, suggested as a universal one, compatible with AMD and CommonJS.
Now all these slowly become a part of history, but we still can find them in old scripts.
The language-level module system appeared in the standard in 2015, gradually evolved since then, and is now supported by all major browsers and in Node.js. 
So we’ll study the modern JavaScript modules from now on.
<h3>What is a module?</h3>A module is just a file. 
One script is one module. 
As simple as that.
Modules can load each other and use special directives <code>export</code> and <code>import</code> to interchange functionality, call functions of one module from another one:

<code>export</code> keyword labels variables and functions that should be accessible from outside the current module.

<code>import</code> allows the import of functionality from other modules.
For instance, if we have a file <code>sayHi.js</code> exporting a function:

<code>// 📁 sayHi.js
export function sayHi(user) {
  alert(`Hello, ${user}!`);
}</code>
…Then another file may import and use it:

<code>// 📁 main.js
import {sayHi} from './sayHi.js';
alert(sayHi); // function...
sayHi('John'); // Hello, John!</code>
The <code>import</code> directive loads the module by path <code>./sayHi.js</code> relative to the current file, and assigns exported function <code>sayHi</code> to the corresponding variable.
Let’s run the example in-browser.
As modules support special keywords and features, we must tell the browser that a script should be treated as a module, by using the attribute <code>&lt;script type="module"></code>.
Like this:
<iframe src="https://javascript.info/article/modules-intro/say/"></iframe>

<code>export function sayHi(user) {
  return `Hello, ${user}!`;
}</code>

<code>&lt;!doctype html>
&lt;script type="module">
  import {sayHi} from './say.js';
  document.body.innerHTML = sayHi('John');
&lt;/script></code>
The browser automatically fetches and evaluates the imported module (and its imports if needed), and then runs the script.
Modules work only via HTTP(s), not locally
If you try to open a web-page locally, via <code>file://</code> protocol, you’ll find that <code>import/export</code> directives don’t work. 
Use a local web-server, such as <a href="https://www.npmjs.com/package/static-server#getting-started">static-server</a> or use the “live server” capability of your editor, such as VS Code <a href="https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer">Live Server Extension</a> to test modules.
<h3>Core module features</h3>What’s different in modules, compared to “regular” scripts?
There are core features, valid both for browser and server-side JavaScript.
<h4>Always “use strict”</h4>Modules always work in strict mode. 
E.g. assigning to an undeclared variable will give an error.

<code>&lt;script type="module">
  a = 5; // error
&lt;/script></code>
<h4>Module-level scope</h4>Each module has its own top-level scope. 
In other words, top-level variables and functions from a module are not seen in other scripts.
In the example below, two scripts are imported, and <code>hello.js</code> tries to use <code>user</code> variable declared in <code>user.js</code>. 
It fails, because it’s a separate module (you’ll see the error in the console):
<iframe src="https://javascript.info/article/modules-intro/scopes/"></iframe>

<code>alert(user); // no such variable (each module has independent variables)</code>

<code>let user = "John";</code>

<code>&lt;!doctype html>
&lt;script type="module" src="user.js">&lt;/script>
&lt;script type="module" src="hello.js">&lt;/script></code>
Modules should <code>export</code> what they want to be accessible from outside and <code>import</code> what they need.

<code>user.js</code> should export the <code>user</code> variable.

<code>hello.js</code> should import it from <code>user.js</code> module.
In other words, with modules we use import/export instead of relying on global variables.
This is the correct variant:
<iframe src="https://javascript.info/article/modules-intro/scopes-working/"></iframe>

<code>import {user} from './user.js';
document.body.innerHTML = user; // John</code>

<code>export let user = "John";</code>

<code>&lt;!doctype html>
&lt;script type="module" src="hello.js">&lt;/script></code>
In the browser, if we talk about HTML pages, independent top-level scope also exists for each <code>&lt;script type="module"></code>.
Here are two scripts on the same page, both <code>type="module"</code>. 
They don’t see each other’s top-level variables:

<code>&lt;script type="module">
  // The variable is only visible in this module script
  let user = "John";
&lt;/script>
&lt;script type="module">
<em>  alert(user); // Error: user is not defined</em>
&lt;/script></code>
Please note:
In the browser, we can make a variable window-level global by explicitly assigning it to a <code>window</code> property, e.g. <code>window.user = "John"</code>.
Then all scripts will see it, both with <code>type="module"</code> and without it.
That said, making such global variables is frowned upon. 
Please try to avoid them.
<h4>A module code is evaluated only the first time when imported</h4>If the same module is imported into multiple other modules, its code is executed only once, upon the first import. 
Then its exports are given to all further importers.
The one-time evaluation has important consequences, that we should be aware of.
Let’s see a couple of examples.
First, if executing a module code brings side-effects, like showing a message, then importing it multiple times will trigger it only once – the first time:

<code>// 📁 alert.js
alert("Module is evaluated!");</code>

<code>// Import the same module from different files
// 📁 1.js
import `./alert.js`; // Module is evaluated!
// 📁 2.js
import `./alert.js`; // (shows nothing)</code>
The second import shows nothing, because the module has already been evaluated.
There’s a rule: top-level module code should be used for initialization, creation of module-specific internal data structures. 
If we need to make something callable multiple times – we should export it as a function, like we did with <code>sayHi</code> above.
Now, let’s consider a deeper example.
Let’s say, a module exports an object:

<code>// 📁 admin.js
export let admin = {
  name: "John"
};</code>
If this module is imported from multiple files, the module is only evaluated the first time, <code>admin</code> object is created, and then passed to all further importers.
All importers get exactly the one and only <code>admin</code> object:

<code>// 📁 1.js
import {admin} from './admin.js';
admin.name = "Pete";
// 📁 2.js
import {admin} from './admin.js';
alert(admin.name); // Pete
<em>// Both 1.js and 2.js reference the same admin object
// Changes made in 1.js are visible in 2.js</em></code>
As you can see, when <code>1.js</code> changes the <code>name</code> property in the imported <code>admin</code>, then <code>2.js</code> can see the new <code>admin.name</code>.
That’s exactly because the module is executed only once. 
Exports are generated, and then they are shared between importers, so if something changes the <code>admin</code> object, other modules will see that.

<strong>Such behavior is actually very convenient, because it allows us to <em>configure</em> modules.</strong>
In other words, a module can provide a generic functionality that needs a setup. 
E.g. authentication needs credentials. 
Then it can export a configuration object expecting the outer code to assign to it.
Here’s the classical pattern:

A module exports some means of configuration, e.g. a configuration object.
On the first import we initialize it, write to its properties. 
The top-level application script may do that.
Further imports use the module.

For instance, the <code>admin.js</code> module may provide certain functionality (e.g. authentication), but expect the credentials to come into the <code>config</code> object from outside:

<code>// 📁 admin.js
export let config = { };
export function sayHi() {
  alert(`Ready to serve, ${config.user}!`);
}</code>
Here, <code>admin.js</code> exports the <code>config</code> object (initially empty, but may have default properties too).
Then in <code>init.js</code>, the first script of our app, we import <code>config</code> from it and set <code>config.user</code>:

<code>// 📁 init.js
import {config} from './admin.js';
config.user = "Pete";</code>
…Now the module <code>admin.js</code> is configured.
Further importers can call it, and it correctly shows the current user:

<code>// 📁 another.js
import {sayHi} from './admin.js';
sayHi(); // Ready to serve, <em>Pete</em>!</code>
<h4>import.meta</h4>The object <code>import.meta</code> contains the information about the current module.
Its content depends on the environment. 
In the browser, it contains the URL of the script, or a current webpage URL if inside HTML:

<code>&lt;script type="module">
  alert(import.meta.url); // script URL
  // for an inline script - the URL of the current HTML-page
&lt;/script></code>
<h4>In a module, “this” is undefined</h4>That’s kind of a minor feature, but for completeness we should mention it.
In a module, top-level <code>this</code> is undefined.
Compare it to non-module scripts, where <code>this</code> is a global object:

<code>&lt;script>
  alert(this); // window
&lt;/script>
&lt;script type="module">
  alert(this); // undefined
&lt;/script></code>
<h3>Browser-specific features</h3>There are also several browser-specific differences of scripts with <code>type="module"</code> compared to regular ones.
You may want to skip this section for now if you’re reading for the first time, or if you don’t use JavaScript in a browser.
<h4>Module scripts are deferred</h4>Module scripts are <em>always</em> deferred, same effect as <code>defer</code> attribute (described in the chapter <a href="/script-async-defer">Scripts: async, defer</a>), for both external and inline scripts.
In other words:
downloading external module scripts <code>&lt;script type="module" src="..."></code> doesn’t block HTML processing, they load in parallel with other resources.
module scripts wait until the HTML document is fully ready (even if they are tiny and load faster than HTML), and then run.
relative order of scripts is maintained: scripts that go first in the document, execute first.
As a side-effect, module scripts always “see” the fully loaded HTML-page, including HTML elements below them.
For instance:

<code>&lt;script type="module">
<em>  alert(typeof button); // object: the script can 'see' the button below</em>
  // as modules are deferred, the script runs after the whole page is loaded
&lt;/script>
Compare to regular script below:
&lt;script>
<em>  alert(typeof button); // button is undefined, the script can't see elements below</em>
  // regular scripts run immediately, before the rest of the page is processed
&lt;/script>
&lt;button id="button">Button&lt;/button></code>
Please note: the second script actually runs before the first! So we’ll see <code>undefined</code> first, and then <code>object</code>.
That’s because modules are deferred, so we wait for the document to be processed. 
The regular script runs immediately, so we see its output first.
When using modules, we should be aware that the HTML page shows up as it loads, and JavaScript modules run after that, so the user may see the page before the JavaScript application is ready. 
Some functionality may not work yet. 
We should put “loading indicators”, or otherwise ensure that the visitor won’t be confused by that.
<h4>Async works on inline scripts</h4>For non-module scripts, the <code>async</code> attribute only works on external scripts. 
Async scripts run immediately when ready, independently of other scripts or the HTML document.
For module scripts, it works on inline scripts as well.
For example, the inline script below has <code>async</code>, so it doesn’t wait for anything.
It performs the import (fetches <code>./analytics.js</code>) and runs when ready, even if the HTML document is not finished yet, or if other scripts are still pending.
That’s good for functionality that doesn’t depend on anything, like counters, ads, document-level event listeners.

<code>&lt;!-- all dependencies are fetched (analytics.js), and the script runs -->
&lt;!-- doesn't wait for the document or other &lt;script> tags -->
&lt;script <em>async</em> type="module">
  import {counter} from './analytics.js';
  counter.count();
&lt;/script></code>
<h4>External scripts</h4>External scripts that have <code>type="module"</code> are different in two aspects:

External scripts with the same <code>src</code> run only once:

<code>&lt;!-- the script my.js is fetched and executed only once -->
&lt;script type="module" src="my.js">&lt;/script>
&lt;script type="module" src="my.js">&lt;/script></code>
External scripts that are fetched from another origin (e.g. another site) require <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">CORS</a> headers, as described in the chapter <a href="/fetch-crossorigin">Fetch: Cross-Origin Requests</a>. 
In other words, if a module script is fetched from another origin, the remote server must supply a header <code>Access-Control-Allow-Origin</code> allowing the fetch.

<code>&lt;!-- another-site.com must supply Access-Control-Allow-Origin -->
&lt;!-- otherwise, the script won't execute -->
&lt;script type="module" src="<em>http://another-site.com/their.js</em>">&lt;/script></code>
That ensures better security by default.

<h4>No “bare” modules allowed</h4>In the browser, <code>import</code> must get either a relative or absolute URL. 
Modules without any path are called “bare” modules. 
Such modules are not allowed in <code>import</code>.
For instance, this <code>import</code> is invalid:

<code>import {sayHi} from 'sayHi'; // Error, "bare" module
// the module must have a path, e.g. './sayHi.js' or wherever the module is</code>
Certain environments, like Node.js or bundle tools allow bare modules, without any path, as they have their own ways for finding modules and hooks to fine-tune them. 
But browsers do not support bare modules yet.
<h4>Compatibility, “nomodule”</h4>Old browsers do not understand <code>type="module"</code>. 
Scripts of an unknown type are just ignored. 
For them, it’s possible to provide a fallback using the <code>nomodule</code> attribute:

<code>&lt;script type="module">
  alert("Runs in modern browsers");
&lt;/script>
&lt;script nomodule>
  alert("Modern browsers know both type=module and nomodule, so skip this")
  alert("Old browsers ignore script with unknown type=module, but execute this.");
&lt;/script></code>
<h3>Build tools</h3>In real-life, browser modules are rarely used in their “raw” form. 
Usually, we bundle them together with a special tool such as <a href="https://webpack.js.org/">Webpack</a> and deploy to the production server.
One of the benefits of using bundlers – they give more control over how modules are resolved, allowing bare modules and much more, like CSS/HTML modules.
Build tools do the following:

Take a “main” module, the one intended to be put in <code>&lt;script type="module"></code> in HTML.
Analyze its dependencies: imports and then imports of imports etc.
Build a single file with all modules (or multiple files, that’s tunable), replacing native <code>import</code> calls with bundler functions, so that it works. 
“Special” module types like HTML/CSS modules are also supported.
In the process, other transformations and optimizations may be applied:
Unreachable code removed.
Unused exports removed (“tree-shaking”).
Development-specific statements like <code>console</code> and <code>debugger</code> removed.
Modern, bleeding-edge JavaScript syntax may be transformed to older one with similar functionality using <a href="https://babeljs.io/">Babel</a>.
The resulting file is minified (spaces removed, variables replaced with shorter names, etc).

If we use bundle tools, then as scripts are bundled together into a single file (or few files), <code>import/export</code> statements inside those scripts are replaced by special bundler functions. 
So the resulting “bundled” script does not contain any <code>import/export</code>, it doesn’t require <code>type="module"</code>, and we can put it into a regular script:

<code>&lt;!-- Assuming we got bundle.js from a tool like Webpack -->
&lt;script src="bundle.js">&lt;/script></code>
That said, native modules are also usable. 
So we won’t be using Webpack here: you can configure it later.
<h3>Summary</h3>To summarize, the core concepts are:

A module is a file. 
To make <code>import/export</code> work, browsers need <code>&lt;script type="module"></code>. 
Modules have several differences:
Deferred by default.
Async works on inline scripts.
To load external scripts from another origin (domain/protocol/port), CORS headers are needed.
Duplicate external scripts are ignored.
Modules have their own, local top-level scope and interchange functionality via <code>import/export</code>.
Modules always <code>use strict</code>.
Module code is executed only once. 
Exports are created once and shared between importers.

When we use modules, each module implements the functionality and exports it. 
Then we use <code>import</code> to directly import it where it’s needed. 
The browser loads and evaluates the scripts automatically.
In production, people often use bundlers such as <a href="https://webpack.js.org">Webpack</a> to bundle modules together for performance and other reasons.
In the next chapter we’ll see more examples of modules, and how things can be exported/imported.


<h2>object constructor function</h2>
function Person(first, last, age, eye) {
  this.firstName = first;
  this.lastName = last;
  this.age = age;
  this.eyeColor = eye;
}

// Create a Person object
const myFather = new Person("John", "Doe", 50, "blue");

// Display age
document.getElementById("demo").innerHTML =
"My father is " + myFather.age + "."; 

<h3>Object Types (Blueprints) (Classes)</h3>
The examples from the previous chapters are limited.
They only create single objects.

Sometimes we need a "blueprint" for creating many objects of the same "type".

The way to create an "object type", is to use an object constructor function.
In the example above, function Person() is an object constructor function.
Objects of the same type are created by calling the constructor function with the new keyword:

const myFather = new Person("John", "Doe", 50, "blue");
const myMother = new Person("Sally", "Rally", 48, "green");

Adding a Property to an Object
Adding a new property to an existing object is easy:
Example
myFather.nationality = "English";
The property will be added to myFather. Not to myMother. (Not to any other person objects).

Adding a Method to an Object
Adding a new method to an existing object is easy:
Example
myFather.name = function () {
  return this.firstName + " " + this.lastName;
};
The method will be added to myFather. Not to myMother. (Not to any other person objects).

Adding a Property to a Constructor
You cannot add a new property to an object constructor the same way you add a new property to an existing object:
Example
Person.nationality = "English";

To add a new property to a constructor, you must add it to the constructor function:
Example
function Person(first, last, age, eyecolor) {
  this.firstName = first;
  this.lastName = last;
  this.age = age;
  this.eyeColor = eyecolor;
  this.nationality = "English";
}

This way object properties can have default values.

Adding a Method to a Constructor
Your constructor function can also define methods:
Example
function Person(first, last, age, eyecolor) {
  this.firstName = first;
  this.lastName = last;
  this.age = age;
  this.eyeColor = eyecolor;
  this.name = function() {
    return this.firstName + " " + this.lastName;
  };
}
You cannot add a new method to an object constructor the same way you add a new method to an existing object.

Adding methods to an object constructor must be done inside the constructor function:
Example
function Person(firstName, lastName, age, eyeColor) {
  this.firstName = firstName; 
  this.lastName = lastName;
  this.age = age;
  this.eyeColor = eyeColor;
  this.changeName = function (name) {
    this.lastName = name;
  };
}
The changeName() function assigns the value of name to the person's lastName property.

Now You Can Try:
myMother.changeName("Doe");
JavaScript knows which person you are talking about by "substituting" this with myMother.

Built-in JavaScript Constructors
JavaScript has built-in constructors for native objects:
new String()    // A new String object
new Number()    // A new Number object
new Boolean()   // A new Boolean object
new Object()    // A new Object object
new Array()     // A new Array object
new RegExp()    // A new RegExp object
new Function()  // A new Function object
new Date()      // A new Date object
The Math() object is not in the list. Math is a global object. The new keyword cannot be used on Math.

As you can see above, JavaScript has object versions of the primitive data types String, Number, and Boolean. But there is no reason to create complex objects. Primitive values are much faster:

Use string literals "" instead of new String().
Use number literals 50 instead of new Number().
Use boolean literals true / false instead of new Boolean().
Use object literals {} instead of new Object().
Use array literals [] instead of new Array().
Use pattern literals /()/ instead of new RegExp().
Use function expressions () {} instead of new Function().
Example
let x1 = "";             // new primitive string
let x2 = 0;              // new primitive number
let x3 = false;          // new primitive boolean

const x4 = {};           // new Object object
const x5 = [];           // new Array object
const x6 = /()/          // new RegExp object
const x7 = function(){}; // new function

String Objects
Normally, strings are created as primitives: firstName = "John"
But strings can also be created as objects using the new keyword:
firstName = new String("John")

Number Objects
Normally, numbers are created as primitives: x = 30
But numbers can also be created as objects using the new keyword:
x = new Number(30)

Boolean Objects
Normally, booleans are created as primitives: x = false
But booleans can also be created as objects using the new keyword:
x = new Boolean(false)


<h2>Promise Object</h2>
A Promise object contains both the producing code and calls to the consuming code:

Promise Syntax
let myPromise = new Promise(function(myResolve, myReject) {
  // "Producing Code" (May take some time)
  myResolve(); // when successful
  myReject();  // when error
});

// "Consuming Code" (Must wait for a fulfilled Promise)
myPromise.then(
  function(value) { /* code if successful */ },
  function(error) { /* code if some error */ }
);
When the producing code obtains the result, it should call one of the two callbacks:

Result	Call
Success	myResolve(result value)
Error	myReject(error object)

Promise Object Properties
A JavaScript Promise object can be:
Pending
Fulfilled
Rejected
The Promise object supports two properties: state and result.

While a Promise object is "pending" (working), the result is undefined.

When a Promise object is "fulfilled", the result is a value.

When a Promise object is "rejected", the result is an error object.

myPromise.state	myPromise.result
"pending"		undefined
"fulfilled"	a result value
"rejected"	an error object
You cannot access the Promise properties state and result.

You must use a Promise method to handle promises.

Here is how to use a Promise:

myPromise.then(
  function(value) { /* code if successful */ },
  function(error) { /* code if some error */ }
);
Promise.then() takes two arguments, a callback for success and another for failure.

Both are optional, so you can add a callback for success or failure only.

Example
function myDisplayer(some) {
  document.getElementById("demo").innerHTML = some;
}

let myPromise = new Promise(function(myResolve, myReject) {
  let x = 0;

// The producing code (this may take some time)

  if (x == 0) {
    myResolve("OK");
  } else {
    myReject("Error");
  }
});

myPromise.then(
  function(value) {myDisplayer(value);},
  function(error) {myDisplayer(error);}
);

Promise Examples
To demonstrate the use of promises, we will use the callback examples from the previous chapter:

Waiting for a Timeout
Waiting for a File
Waiting for a Timeout
Example Using Callback
setTimeout(function() { myFunction("I love You !!!"); }, 3000);

function myFunction(value) {
  document.getElementById("demo").innerHTML = value;
}

Example Using Promise
let myPromise = new Promise(function(myResolve, myReject) {
  setTimeout(function() { myResolve("I love You !!"); }, 3000);
});

myPromise.then(function(value) {
  document.getElementById("demo").innerHTML = value;
});

Waiting for a file
Example using Callback
function getFile(myCallback) {
  let req = new XMLHttpRequest();
  req.open('GET', "mycar.html");
  req.onload = function() {
    if (req.status == 200) {
      myCallback(req.responseText);
    } else {
      myCallback("Error: " + req.status);
    }
  }
  req.send();
}

getFile(myDisplayer);

Example using Promise
let myPromise = new Promise(function(myResolve, myReject) {
  let req = new XMLHttpRequest();
  req.open('GET', "mycar.htm");
  req.onload = function() {
    if (req.status == 200) {
      myResolve(req.response);
    } else {
      myReject("File not Found");
    }
  };
  req.send();
});

myPromise.then(
  function(value) {myDisplayer(value);},
  function(error) {myDisplayer(error);}
);


<h2>get current scroll height</h2>
document.documentElement.scrollTop || document.body.scrollTop

scrollheight jquery
$('#toc').prop('scrollHeight')

Correct ways in jQuery are
$('#test')[0].scrollHeight OR
$('#test').prop('scrollHeight') OR
$('#test').get(0).scrollHeight

jquery on scroll
Trigger the scroll event for the selected elements:
$(selector).scroll()
​Attach a function to the scroll event:
$(selector).scroll(function)

determine scrollHeight using jquery
$('#test').keyup(function() {
  var height = $(this).scrollTop();
  var initHeight = 5;
  if(initHeight < height ) { $(this).css({'height':'8rem'}); }
})


<h2>Maps</h2>
https://www.w3schools.com/js/js_object_maps.asp

A Map holds key-value pairs where the keys can be any datatype.
A Map remembers the original insertion order of the keys.
A Map has a property that represents the size of the map.
<div id="Mapstoc" class="toc"><a href="#Mapstopic-0" target="_self">Map Methods</a>,&emsp;<a href="#Mapstopic-1" target="_self">How to Create a Map</a>,&emsp;<a href="#Mapstopic-2" target="_self">new Map()</a>,&emsp;<a href="#Mapstopic-3" target="_self">Map.set()</a>,&emsp;<a href="#Mapstopic-4" target="_self">Map.get()</a>,&emsp;<a href="#Mapstopic-5" target="_self">Map.size</a>,&emsp;<a href="#Mapstopic-6" target="_self">Map.delete()</a>,&emsp;<a href="#Mapstopic-7" target="_self">Map.clear()</a>,&emsp;<a href="#Mapstopic-8" target="_self">Map.has()</a>,&emsp;<a href="#Mapstopic-9" target="_self">Maps are Objects</a>,&emsp;<a href="#Mapstopic-10" target="_self">JavaScript Objects vs Maps</a>,&emsp;<a href="#Mapstopic-11" target="_self">Map.forEach()</a>,&emsp;<a href="#Mapstopic-12" target="_self">Map.keys()</a>,&emsp;<a href="#Mapstopic-13" target="_self">Map.values()</a>,&emsp;<a href="#Mapstopic-14" target="_self">Map.entries()</a>,&emsp;<a href="#Mapstopic-15" target="_self">Objects as Keys</a>,&emsp;</div></center><br><br>

<h3 id="Mapstopic-0">Map Methods</h3>
Method	Description
new Map()	Creates a new Map object
set()	Sets the value for a key in a Map
get()	Gets the value for a key in a Map
clear()	Removes all the elements from a Map
delete()	Removes a Map element specified by a key
has()	Returns true if a key exists in a Map
forEach()	Invokes a callback for each key/value pair in a Map
entries()	Returns an iterator object with the [key, value] pairs in a Map
keys()	Returns an iterator object with the keys in a Map
values()	Returns an iterator object of the values in a Map

Property	Description
size	Returns the number of Map elements

<h3 id="Mapstopic-1">How to Create a Map</h3>
You can create a JavaScript Map by:
<li>Passing an Array to <code>new Map()</code></li>
<li>Create a Map and use <code>Map.set()</code></li>

<h3 id="Mapstopic-2">new Map()</h3>
You can create a Map by passing an Array to the <code>new Map()</code> constructor:

Example
// Create a Map
const fruits = new Map([
  ["apples", 500],
  ["bananas", 300],
  ["oranges", 200]
]);

<h3 id="Mapstopic-3">Map.set()</h3>
You can add elements to a Map with the <code>set()</code> method:

Example
// Create a Map
const fruits = new Map();

// Set Map Values
fruits.set("apples", 500);
fruits.set("bananas", 300);
fruits.set("oranges", 200);

The <code>set()</code> method can also be used to change existing Map values:

Example
fruits.set("apples", 500);

<h3 id="Mapstopic-4">Map.get()</h3>
The <code>get()</code> method gets the value of a key in a Map:

Example
fruits.get("apples");    // Returns 500


  // Creating a map object
  var myMap = new Map();
 
  // Adding [key, value] pair to the map
  myMap.set(0, 'GeeksforGeeks');
 
  // Displaying the element which is associated with
  // the key '0' using Map.get() method
  document.write(myMap.get(0));

Output:
"GeeksforGeeks"

<h3 id="Mapstopic-5">Map.size</h3>
The <code>size</code> property returns the number of elements in a Map:

Example
fruits.size;

<h3 id="Mapstopic-6">Map.delete()</h3>
The <code>delete()</code> method removes a Map element:

Example
fruits.delete("apples");

<h3 id="Mapstopic-7">Map.clear()</h3>
The <code>clear()</code> method removes all the elements from a Map:

Example
fruits.clear();

<h3 id="Mapstopic-8">Map.has()</h3>
The <code>has()</code> method returns true if a key exists in a Map:

Example
fruits.has("apples");
fruits.delete("apples");
fruits.has("apples");

<h3 id="Mapstopic-9">Maps are Objects</h3>
<code>typeof</code> returns object:

Example
// Returns object:
typeof fruits;

<code>instanceof</code> Map returns true:
Example
// Returns true:
fruits instanceof Map;

<h3 id="Mapstopic-10">JavaScript Objects vs Maps</h3>
<h4>Differences between JavaScript Objects and Maps:</h4>

Iterable
Object Not directly iterable
Map Directly iterable

Size
Object Do not have a size property
Map Have a size property

Key Types
Object Keys must be Strings (or Symbols)
Map Keys can be any datatype

Key Order
Object Keys are not well ordered
Map Keys are ordered by insertion

Defaults
Object Have default keys
Map Do not have default keys

<h3 id="Mapstopic-11">Map.forEach()</h3>
The <code>forEach()</code> method invokes a callback for each key/value pair in a Map:

Example
// List all entries
let text = "";
fruits.forEach (function(value, key) {
  text += key + ' = ' + value;
})

<h3 id="Mapstopic-12">Map.keys()</h3>
The <code>keys()</code> method returns an iterator object with the keys in a Map:

Example
// List all keys
let veggies = "";
for (const x of fruits.keys()) {
  veggies += x;
}

<h3 id="Mapstopic-13">Map.values()</h3>
The <code>values</code> method returns an iterator object with the values in a Map:

Example
// Sum all values
let total = 0;
for (const x of fruits.values()) {
  total += x;
}

<h3 id="Mapstopic-14">Map.entries()</h3>
The <code>entries()</code> method returns an iterator object with the [key,values] in a Map:

Example
// List all entries
let text = "";
for (const x of fruits.entries()) {
  text += x;
}

<h3 id="Mapstopic-15">Objects as Keys</h3>

Being able to use objects as keys is an important Map feature.
Example
// Create Objects
const apples = {name: 'Apples'};
const bananas = {name: 'Bananas'};
const oranges = {name: 'Oranges'};

// Create a Map
const fruits = new Map();

// Add new Elements to the Map
fruits.set(apples, 500);
fruits.set(bananas, 300);
fruits.set(oranges, 200);

Remember: The key is an object (apples), not a string ("apples"):

Example
fruits.get("apples");  // Returns undefined

<h2>56 个 JavaScript 实用函数</h2>
<div id="56Javtoc" class="toc"><a href="#56Javtopic-0" target="_self">生成指定范围随机数</a> <a href="#56Javtopic-1" target="_self">数字千分位分隔</a> <a href="#56Javtopic-2" target="_self">数组乱序</a> <a href="#56Javtopic-3" target="_self">数组扁平化</a> <a href="#56Javtopic-4" target="_self">数组中获取随机数</a> <a href="#56Javtopic-5" target="_self">生成随机字符串</a> <a href="#56Javtopic-6" target="_self">字符串首字母大写</a> <a href="#56Javtopic-7" target="_self">手机号中间四位变成*</a> <a href="#56Javtopic-8" target="_self">驼峰命名转换成短横线命名</a> <a href="#56Javtopic-9" target="_self">短横线命名转换成驼峰命名</a> <a href="#56Javtopic-10" target="_self">全角转换为半角</a> <a href="#56Javtopic-11" target="_self">半角转换为全角</a> <a href="#56Javtopic-12" target="_self">数字转化为大写金额</a> <a href="#56Javtopic-13" target="_self">数字转化为中文数字</a> <a href="#56Javtopic-14" target="_self">存储loalStorage</a> <a href="#56Javtopic-15" target="_self">获取localStorage</a> <a href="#56Javtopic-16" target="_self">删除localStorage</a> <a href="#56Javtopic-17" target="_self">存储sessionStorage</a> <a href="#56Javtopic-18" target="_self">获取sessionStorage</a> <a href="#56Javtopic-19" target="_self">删除sessionStorage</a> <a href="#56Javtopic-20" target="_self">设置cookie</a> <a href="#56Javtopic-21" target="_self">读取cookie</a> <a href="#56Javtopic-22" target="_self">删除cookie</a> <a href="#56Javtopic-23" target="_self">校验身份证号码</a> <a href="#56Javtopic-24" target="_self">校验是否包含中文</a> <a href="#56Javtopic-25" target="_self">校验是否为中国大陆的邮政编码</a> <a href="#56Javtopic-26" target="_self">校验是否为IPv6地址</a> <a href="#56Javtopic-27" target="_self">校验是否为邮箱地址</a> <a href="#56Javtopic-28" target="_self">校验是否为中国大陆手机号</a> <a href="#56Javtopic-29" target="_self">校验是否包含emoji表情</a> <a href="#56Javtopic-30" target="_self">获取URL参数列表</a> <a href="#56Javtopic-31" target="_self">检测URL是否有效</a> <a href="#56Javtopic-32" target="_self">键值对拼接成URL参数</a> <a href="#56Javtopic-33" target="_self">修改URL中的参数</a> <a href="#56Javtopic-34" target="_self">删除URL中指定参数</a> <a href="#56Javtopic-35" target="_self">判断是移动还是PC设备</a> <a href="#56Javtopic-36" target="_self">判断是否是苹果还是安卓移动设备</a> <a href="#56Javtopic-37" target="_self">判断是否是安卓移动设备</a> <a href="#56Javtopic-38" target="_self">判断是Windows还是Mac系统</a> <a href="#56Javtopic-39" target="_self">判断是否是微信/QQ内置浏览器</a> <a href="#56Javtopic-40" target="_self">浏览器型号和版本</a> <a href="#56Javtopic-41" target="_self">滚动到页面顶部</a> <a href="#56Javtopic-42" target="_self">滚动到页面底部</a> <a href="#56Javtopic-43" target="_self">滚动到指定元素区域</a> <a href="#56Javtopic-44" target="_self">获取可视窗口高度</a> <a href="#56Javtopic-45" target="_self">获取可视窗口宽度</a> <a href="#56Javtopic-46" target="_self">打开浏览器全屏</a> <a href="#56Javtopic-47" target="_self">退出浏览器全屏</a> <a href="#56Javtopic-48" target="_self">当前时间</a> <a href="#56Javtopic-49" target="_self">格式化时间</a> <a href="#56Javtopic-50" target="_self">阻止冒泡事件</a> <a href="#56Javtopic-51" target="_self">防抖函数</a> <a href="#56Javtopic-52" target="_self">节流函数</a> <a href="#56Javtopic-53" target="_self">数据类型判断</a> <a href="#56Javtopic-54" target="_self">对象深拷贝</a> </div></center>

<h3>1. 数字操作</h3>
<h4 id="56Javtopic-0">生成指定范围随机数</h4>
<code>export const randomNum = (min, max) =&gt; Math.floor(Math.random() * (max - min + 1)) + min;</code>

<h4 id="56Javtopic-1">数字千分位分隔</h4>
<code>export const format = (n) =&gt; {
    let num = n.toString();
    let len = num.length;
    if (len &lt;= 3) {
        return num;
    } else {
        let temp = '';
        let remainder = len % 3;
        if (remainder &gt; 0) { // 不是3的整数倍
            return num.slice(0, remainder) + ',' + num.slice(remainder, len).match(/\d{3}/g).join(',') + temp;
        } else { // 3的整数倍
            return num.slice(0, len).match(/\d{3}/g).join(',') + temp; 
        }
    }
}</code>
<h3>2. 数组操作</h3>
<h4 id="56Javtopic-2">数组乱序</h4>
<code>export const arrScrambling = (arr) =&gt; {
    for (let i = 0; i &lt; arr.length; i++) {
      const randomIndex = Math.round(Math.random() * (arr.length - 1 - i)) + i;
      [arr[i], arr[randomIndex]] = [arr[randomIndex], arr[i]];
    }
    return arr;
}</code>

<h4 id="56Javtopic-3">数组扁平化</h4>
<code>export const flatten = (arr) =&gt; {
  let result = [];

  for(let i = 0; i &lt; arr.length; i++) {
    if(Array.isArray(arr[i])) {
      result = result.concat(flatten(arr[i]));
    } else {
      result.push(arr[i]);
    }
  }
  return result;
}</code>

<h4 id="56Javtopic-4">数组中获取随机数</h4>
<code>export const sample = arr =&gt; arr[Math.floor(Math.random() * arr.length)];
 </code>
<h3>3. 字符串操作</h3>
<h4 id="56Javtopic-5">生成随机字符串</h4>
<code>export const randomString = (len) =&gt; {
    let chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789';
    let strLen = chars.length;
    let randomStr = '';
    for (let i = 0; i &lt; len; i++) {
        randomStr += chars.charAt(Math.floor(Math.random() * strLen));
    }
    return randomStr;
};</code>

<h4 id="56Javtopic-6">字符串首字母大写</h4>
<code>export const fistLetterUpper = (str) =&gt; {
    return str.charAt(0).toUpperCase() + str.slice(1);
};</code>

<h4 id="56Javtopic-7">手机号中间四位变成*</h4>
<code>export const telFormat = (tel) =&gt; {
   tel = String(tel); 
    return tel.substr(0,3) + "****" + tel.substr(7);
};</code>

<h4 id="56Javtopic-8">驼峰命名转换成短横线命名</h4>
<code>export const getKebabCase = (str) =&gt; {
    return str.replace(/[A-Z]/g, (item) =&gt; '-' + item.toLowerCase())
}</code>

<h4 id="56Javtopic-9">短横线命名转换成驼峰命名</h4>
<code>export const getCamelCase = (str) =&gt; {
    return str.replace( /-([a-z])/g, (i, item) =&gt; item.toUpperCase())
}</code>

<h4 id="56Javtopic-10">全角转换为半角</h4>
<code>export const toCDB = (str) =&gt; {
  let result = "";
  for (let i = 0; i &lt; str.length; i++) {
    code = str.charCodeAt(i);
    if (code &gt;= 65281 &amp;&amp; code &lt;= 65374) {
      result += String.fromCharCode(str.charCodeAt(i) - 65248);
    } else if (code == 12288) {
      result += String.fromCharCode(str.charCodeAt(i) - 12288 + 32);
    } else {
      result += str.charAt(i);
    }
  }
  return result;
}
</code>

<h4 id="56Javtopic-11">半角转换为全角</h4>
<code>export const toDBC = (str) =&gt; {
  let result = "";
  for (let i = 0; i &lt; str.length; i++) {
    code = str.charCodeAt(i);
    if (code &gt;= 33 &amp;&amp; code &lt;= 126) {
      result += String.fromCharCode(str.charCodeAt(i) + 65248);
    } else if (code == 32) {
      result += String.fromCharCode(str.charCodeAt(i) + 12288 - 32);
    } else {
      result += str.charAt(i);
    }
  }
  return result;
}
</code>
<h3>4. 格式转化</h3>
<h4 id="56Javtopic-12">数字转化为大写金额</h4>
<code>export const digitUppercase = (n) =&gt; {
    const fraction = ['角', '分'];
    const digit = [
        '零', '壹', '贰', '叁', '肆',
        '伍', '陆', '柒', '捌', '玖'
    ];
    const unit = [
        ['元', '万', '亿'],
        ['', '拾', '佰', '仟']
    ];
    n = Math.abs(n);
    let s = '';
    for (let i = 0; i &lt; fraction.length; i++) {
        s += (digit[Math.floor(n * 10 * Math.pow(10, i)) % 10] + fraction[i]).replace(/零./, '');
    }
    s = s || '整';
    n = Math.floor(n);
    for (let i = 0; i &lt; unit[0].length &amp;&amp; n &gt; 0; i++) {
        let p = '';
        for (let j = 0; j &lt; unit[1].length &amp;&amp; n &gt; 0; j++) {
            p = digit[n % 10] + unit[1][j] + p;
            n = Math.floor(n / 10);
        }
        s = p.replace(/(零.)*零$/, '').replace(/^$/, '零') + unit[0][i] + s;
    }
    return s.replace(/(零.)*零元/, '元')
        .replace(/(零.)+/g, '零')
        .replace(/^整$/, '零元整');
};</code>

<h4 id="56Javtopic-13">数字转化为中文数字</h4>
<code>export const intToChinese = (value) =&gt; {
 const str = String(value);
 const len = str.length-1;
 const idxs = ['','十','百','千','万','十','百','千','亿','十','百','千','万','十','百','千','亿'];
 const num = ['零','一','二','三','四','五','六','七','八','九'];
 return str.replace(/([1-9]|0+)/g, ( $, $1, idx, full) =&gt; {
    let pos = 0;
    if($1[0] !== '0'){
      pos = len-idx;
      if(idx == 0 &amp;&amp; $1[0] == 1 &amp;&amp; idxs[len-idx] == '十'){
        return idxs[len-idx];
      }
      return num[$1[0]] + idxs[len-idx];
    } else {
      let left = len - idx;
      let right = len - idx + $1.length;
      if(Math.floor(right / 4) - Math.floor(left / 4) &gt; 0){
        pos = left - left % 4;
      }
      if( pos ){
        return idxs[pos] + num[$1[0]];
      } else if( idx + $1.length &gt;= len ){
        return '';
      }else {
        return num[$1[0]]
      }
    }
   });
}</code>
<h3>5. 操作存储</h3>
<h4 id="56Javtopic-14">存储loalStorage</h4>
<code>export const loalStorageSet = (key, value) =&gt; {
    if (!key) return;
    if (typeof value !== 'string') {
        value = JSON.stringify(value);
    }
    window.localStorage.setItem(key, value);
};</code>

<h4 id="56Javtopic-15">获取localStorage</h4>
<code>export const loalStorageGet = (key) =&gt; {
    if (!key) return;
    return window.localStorage.getItem(key);
};</code>

<h4 id="56Javtopic-16">删除localStorage</h4>
<code>export const loalStorageRemove = (key) =&gt; {
    if (!key) return;
    window.localStorage.removeItem(key);
};</code>

<h4 id="56Javtopic-17">存储sessionStorage</h4>
<code>export const sessionStorageSet = (key, value) =&gt; {
   if (!key) return;
    if (typeof value !== 'string') {
      value = JSON.stringify(value);
    }
    window.sessionStorage.setItem(key, value)
};</code>

<h4 id="56Javtopic-18">获取sessionStorage</h4>
<code>export const sessionStorageGet = (key) =&gt; {
   if (!key) return;
    return window.sessionStorage.getItem(key)
};</code>

<h4 id="56Javtopic-19">删除sessionStorage</h4>
<code>export const sessionStorageRemove = (key) =&gt; {
   if (!key) return;
    window.sessionStorage.removeItem(key)
};</code>
<h3>6. 操作cookie</h3>
<h4 id="56Javtopic-20">设置cookie</h4>
<code>export const setCookie = (key, value, expire) =&gt; {
    const d = new Date();
    d.setDate(d.getDate() + expire);
    document.cookie = `${key}=${value};expires=${d.toUTCString()}`
};
</code>

<h4 id="56Javtopic-21">读取cookie</h4>
<code>export const getCookie = (key) =&gt; {
    const cookieStr = unescape(document.cookie);
       const arr = cookieStr.split('; ');
       let cookieValue = '';
       for (let i = 0; i &lt; arr.length; i++) {
           const temp = arr[i].split('=');
           if (temp[0] === key) {
               cookieValue = temp[1];
               break
       }
    }
    return cookieValue
};</code>

<h4 id="56Javtopic-22">删除cookie</h4>
<code>export const delCookie = (key) =&gt; {
    document.cookie = `${encodeURIComponent(key)}=;expires=${new Date()}`
};</code>
<h3>7. 格式校验</h3>
<h4 id="56Javtopic-23">校验身份证号码</h4>
<code>export const checkCardNo = (value) =&gt; {
    let reg = /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
    return reg.test(value);
};</code>

<h4 id="56Javtopic-24">校验是否包含中文</h4>
<code>export const haveCNChars =&gt; (value) =&gt; {
    return /[\u4e00-\u9fa5]/.test(value);
}</code>

<h4 id="56Javtopic-25">校验是否为中国大陆的邮政编码</h4>
<code>export const isPostCode = (value) =&gt; {
    return /^[1-9][0-9]{5}$/.test(value.toString());
}</code>

<h4 id="56Javtopic-26">校验是否为IPv6地址</h4>
<code>export const isIPv6 = (str) =&gt; {
    return Boolean(str.match(/:/g)?str.match(/:/g).length&lt;=7:false &amp;&amp; /::/.test(str)?/^([\da-f]{1,4}(:|::)){1,6}[\da-f]{1,4}$/i.test(str):/^([\da-f]{1,4}:){7}[\da-f]{1,4}$/i.test(str));
}</code>

<h4 id="56Javtopic-27">校验是否为邮箱地址</h4>
<code>export const isEmail = (value) {
    return /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(value);
}</code>

<h4 id="56Javtopic-28">校验是否为中国大陆手机号</h4>
<code>export const isTel = (value) =&gt; {
    return /^1[3,4,5,6,7,8,9][0-9]{9}$/.test(value.toString());
}</code>

<h4 id="56Javtopic-29">校验是否包含emoji表情</h4>
<code>export const isEmojiCharacter = (value) =&gt; {
   value = String(value);
    for (let i = 0; i &lt; value.length; i++) {
        const hs = value.charCodeAt(i);
        if (0xd800 &lt;= hs &amp;&amp; hs &lt;= 0xdbff) {
            if (value.length &gt; 1) {
                const ls = value.charCodeAt(i + 1);
                const uc = ((hs - 0xd800) * 0x400) + (ls - 0xdc00) + 0x10000;
                if (0x1d000 &lt;= uc &amp;&amp; uc &lt;= 0x1f77f) {
                    return true;
                }
            }
        } else if (value.length &gt; 1) {
            const ls = value.charCodeAt(i + 1);
            if (ls == 0x20e3) {
                return true;
            }
        } else {
            if (0x2100 &lt;= hs &amp;&amp; hs &lt;= 0x27ff) {
                return true;
            } else if (0x2B05 &lt;= hs &amp;&amp; hs &lt;= 0x2b07) {
                return true;
            } else if (0x2934 &lt;= hs &amp;&amp; hs &lt;= 0x2935) {
                return true;
            } else if (0x3297 &lt;= hs &amp;&amp; hs &lt;= 0x3299) {
                return true;
            } else if (hs == 0xa9 || hs == 0xae || hs == 0x303d || hs == 0x3030
                    || hs == 0x2b55 || hs == 0x2b1c || hs == 0x2b1b
                    || hs == 0x2b50) {
                return true;
            }
        }
    }
   return false;
}</code>
<h3>8. 操作URL</h3>
<h4 id="56Javtopic-30">获取URL参数列表</h4>
<code>export const GetRequest = () =&gt; {
    let url = location.search;
    const paramsStr = /.+\?(.+)$/.exec(url)[1]; // 将 ? 后面的字符串取出来
    const paramsArr = paramsStr.split('&amp;'); // 将字符串以 &amp; 分割后存到数组中
    let paramsObj = {};
    // 将 params 存到对象中
    paramsArr.forEach(param =&gt; {
      if (/=/.test(param)) { // 处理有 value 的参数
        let [key, val] = param.split('='); // 分割 key 和 value
        val = decodeURIComponent(val); // 解码
        val = /^\d+$/.test(val) ? parseFloat(val) : val; // 判断是否转为数字
        if (paramsObj.hasOwnProperty(key)) { // 如果对象有 key，则添加一个值
          paramsObj[key] = [].concat(paramsObj[key], val);
        } else { // 如果对象没有这个 key，创建 key 并设置值
          paramsObj[key] = val;
        }
      } else { // 处理没有 value 的参数
        paramsObj[param] = true;
      }
    })
    return paramsObj;
};</code>

<h4 id="56Javtopic-31">检测URL是否有效</h4>
<code>export const getUrlState = (URL) =&gt; {
  let xmlhttp = new ActiveXObject("microsoft.xmlhttp");
  xmlhttp.Open("GET", URL, false);
  try {
    xmlhttp.Send();
  } catch (e) {
  } finally {
    let result = xmlhttp.responseText;
    if (result) {
      if (xmlhttp.Status == 200) {
        return true;
      } else {
        return false;
      }
    } else {
      return false;
    }
  }
}</code>

<h4 id="56Javtopic-32">键值对拼接成URL参数</h4>
<code>export const params2Url = (obj) =&gt; {
     let params = []
     for (let key in obj) {
       params.push(`${key}=${obj[key]}`);
     }
     return encodeURIComponent(params.join('&amp;'))
}</code>

<h4 id="56Javtopic-33">修改URL中的参数</h4>
<code>export const replaceParamVal =&gt; (paramName, replaceWith) {
   const oUrl = location.href.toString();
   const re = eval('/('+ paramName+'=)([^&amp;]*)/gi');
   location.href = oUrl.replace(re,paramName+'='+replaceWith);
   return location.href;
}</code>

<h4 id="56Javtopic-34">删除URL中指定参数</h4>
<code>export const funcUrlDel = (name) =&gt; {
  const baseUrl = location.origin + location.pathname + "?";
  const query = location.search.substr(1);
  if (query.indexOf(name) &gt; -1) {
    const obj = {};
    const arr = query.split("&amp;");
    for (let i = 0; i &lt; arr.length; i++) {
      arr[i] = arr[i].split("=");
      obj[arr[i][0]] = arr[i][1];
    }
    delete obj[name];
    return baseUrl + JSON.stringify(obj).replace(/[\"\{\}]/g,"").replace(/\:/g,"=").replace(/\,/g,"&amp;");
  }
}</code>
<h3>9. 设备判断</h3>
<h4 id="56Javtopic-35">判断是移动还是PC设备</h4>
<code>export const isMobile = () =&gt; {
  if ((navigator.userAgent.match(/(iPhone|iPod|Android|ios|iOS|iPad|Backerry|WebOS|Symbian|Windows Phone|Phone)/i))) {
  return 'mobile';
  }
  return 'desktop';
}</code>

<h4 id="56Javtopic-36">判断是否是苹果还是安卓移动设备</h4>
<code>export const isAppleMobileDevice = () =&gt; {
  let reg = /iphone|ipod|ipad|Macintosh/i;
  return reg.test(navigator.userAgent.toLowerCase());
}</code>

<h4 id="56Javtopic-37">判断是否是安卓移动设备</h4>
<code>export const isAndroidMobileDevice = () =&gt; {
  return /android/i.test(navigator.userAgent.toLowerCase());
}</code>

<h4 id="56Javtopic-38">判断是Windows还是Mac系统</h4>
<code>export const osType = () =&gt; {
    const agent = navigator.userAgent.toLowerCase();
    const isMac = /macintosh|mac os x/i.test(navigator.userAgent);
   const isWindows = agent.indexOf("win64") &gt;= 0 || agent.indexOf("wow64") &gt;= 0 || agent.indexOf("win32") &gt;= 0 || agent.indexOf("wow32") &gt;= 0;
    if (isWindows) {
        return "windows";
    }
    if(isMac){
        return "mac";
    }
}</code>

<h4 id="56Javtopic-39">判断是否是微信/QQ内置浏览器</h4>
<code>export const broswer = () =&gt; {
    const ua = navigator.userAgent.toLowerCase();
    if (ua.match(/MicroMessenger/i) == "micromessenger") {
        return "weixin";
    } else if (ua.match(/QQ/i) == "qq") {
        return "QQ";
    }
    return false;
}</code>

<h4 id="56Javtopic-40">浏览器型号和版本</h4>
<code>export const getExplorerInfo = () =&gt; {
    let t = navigator.userAgent.toLowerCase();
    return 0 &lt;= t.indexOf("msie") ? { //ie &lt; 11
        type: "IE",
        version: Number(t.match(/msie ([\d]+)/)[1])
    } : !!t.match(/trident\/.+?rv:(([\d.]+))/) ? { // ie 11
        type: "IE",
        version: 11
    } : 0 &lt;= t.indexOf("edge") ? {
        type: "Edge",
        version: Number(t.match(/edge\/([\d]+)/)[1])
    } : 0 &lt;= t.indexOf("firefox") ? {
        type: "Firefox",
        version: Number(t.match(/firefox\/([\d]+)/)[1])
    } : 0 &lt;= t.indexOf("chrome") ? {
        type: "Chrome",
        version: Number(t.match(/chrome\/([\d]+)/)[1])
    } : 0 &lt;= t.indexOf("opera") ? {
        type: "Opera",
        version: Number(t.match(/opera.([\d]+)/)[1])
    } : 0 &lt;= t.indexOf("Safari") ? {
        type: "Safari",
        version: Number(t.match(/version\/([\d]+)/)[1])
    } : {
        type: t,
        version: -1
    }
}</code>
<h3>10. 浏览器操作</h3>
<h4 id="56Javtopic-41">滚动到页面顶部</h4>
<code>export const scrollToTop = () =&gt; {
  const height = document.documentElement.scrollTop || document.body.scrollTop;
  if (height &gt; 0) {
    window.requestAnimationFrame(scrollToTop);
    window.scrollTo(0, height - height / 8);
  }
}</code>

<h4 id="56Javtopic-42">滚动到页面底部</h4>
<code>export const scrollToBottom = () =&gt; {
  window.scrollTo(0, document.documentElement.clientHeight);  
}</code>

<h4 id="56Javtopic-43">滚动到指定元素区域</h4>
<code>export const smoothScroll = (element) =&gt; {
    document.querySelector(element).scrollIntoView({
        behavior: 'smooth'
    });
};</code>

<h4 id="56Javtopic-44">获取可视窗口高度</h4>
<code>export const getClientHeight = () =&gt; {
    let clientHeight = 0;
    if (document.body.clientHeight &amp;&amp; document.documentElement.clientHeight) {
        clientHeight = (document.body.clientHeight &lt; document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
    }
    else {
        clientHeight = (document.body.clientHeight &gt; document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;
    }
    return clientHeight;
}</code>

<h4 id="56Javtopic-45">获取可视窗口宽度</h4>
<code>export const getPageViewWidth = () =&gt; {
    return (document.compatMode == "BackCompat" ? document.body : document.documentElement).clientWidth;
}</code>

<h4 id="56Javtopic-46">打开浏览器全屏</h4>
<code>export const toFullScreen = () =&gt; {
    let element = document.body;
    if (element.requestFullscreen) {
      element.requestFullscreen()
    } else if (element.mozRequestFullScreen) {
      element.mozRequestFullScreen()
    } else if (element.msRequestFullscreen) {
      element.msRequestFullscreen()
    } else if (element.webkitRequestFullscreen) {
      element.webkitRequestFullScreen()
    }
}</code>

<h4 id="56Javtopic-47">退出浏览器全屏</h4>
<code>export const exitFullscreen = () =&gt; {
    if (document.exitFullscreen) {
      document.exitFullscreen()
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen()
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen()
    } else if (document.webkitExitFullscreen) {
      document.webkitExitFullscreen()
    }
}</code>
<h3>11. 时间操作</h3>
<h4 id="56Javtopic-48">当前时间</h4>
<code>export const nowTime = () =&gt; {
    const now = new Date();
    const year = now.getFullYear();
    const month = now.getMonth();
    const date = now.getDate() &gt;= 10 ? now.getDate() : ('0' + now.getDate());
    const hour = now.getHours() &gt;= 10 ? now.getHours() : ('0' + now.getHours());
    const miu = now.getMinutes() &gt;= 10 ? now.getMinutes() : ('0' + now.getMinutes());
    const sec = now.getSeconds() &gt;= 10 ? now.getSeconds() : ('0' + now.getSeconds());
    return +year + "年" + (month + 1) + "月" + date + "日 " + hour + ":" + miu + ":" + sec;
}</code>

<h4 id="56Javtopic-49">格式化时间</h4>
<code>export const dateFormater = (formater, time) =&gt; {
    let date = time ? new Date(time) : new Date(),
        Y = date.getFullYear() + '',
        M = date.getMonth() + 1,
        D = date.getDate(),
        H = date.getHours(),
        m = date.getMinutes(),
        s = date.getSeconds();
    return formater.replace(/YYYY|yyyy/g, Y)
        .replace(/YY|yy/g, Y.substr(2, 2))
        .replace(/MM/g,(M&lt;10 ? '0' : '') + M)
        .replace(/DD/g,(D&lt;10 ? '0' : '') + D)
        .replace(/HH|hh/g,(H&lt;10 ? '0' : '') + H)
        .replace(/mm/g,(m&lt;10 ? '0' : '') + m)
        .replace(/ss/g,(s&lt;10 ? '0' : '') + s)
}
// dateFormater('YYYY-MM-DD HH:mm:ss')
// dateFormater('YYYYMMDDHHmmss')</code>
<h3>12. JavaScript操作</h3>
<h4 id="56Javtopic-50">阻止冒泡事件</h4>
<code>export const stopPropagation = (e) =&gt; { 
    e = e || window.event; 
    if(e.stopPropagation) {    // W3C阻止冒泡方法 
        e.stopPropagation(); 
    } else { 
        e.cancelBubble = true; // IE阻止冒泡方法 
    } 
} </code>

<h4 id="56Javtopic-51">防抖函数</h4>
<code>export const debounce = (fn, wait) =&gt; {
  let timer = null;

  return function() {
    let context = this,
        args = arguments;

    if (timer) {
      clearTimeout(timer);
      timer = null;
    }

    timer = setTimeout(() =&gt; {
      fn.apply(context, args);
    }, wait);
  };
}</code>

<h4 id="56Javtopic-52">节流函数</h4>
<code>export const throttle = (fn, delay) =&gt; {
  let curTime = Date.now();

  return function() {
    let context = this,
        args = arguments,
        nowTime = Date.now();

    if (nowTime - curTime &gt;= delay) {
      curTime = Date.now();
      return fn.apply(context, args);
    }
  };
}</code>

<h4 id="56Javtopic-53">数据类型判断</h4>
<code>export const getType = (value) =&gt; {
  if (value === null) {
    return value + "";
  }
  // 判断数据是引用类型的情况
  if (typeof value === "object") {
    let valueClass = Object.prototype.toString.call(value),
      type = valueClass.split(" ")[1].split("");
    type.pop();
    return type.join("").toLowerCase();
  } else {
    // 判断数据是基本数据类型的情况和函数的情况
    return typeof value;
  }
}</code>

<h4 id="56Javtopic-54">对象深拷贝</h4>
<code>export const deepClone = (obj, hash = new WeakMap()) =&gt; {
  // 日期对象直接返回一个新的日期对象
  if (obj instanceof Date){
   return new Date(obj);
  } 
  //正则对象直接返回一个新的正则对象     
  if (obj instanceof RegExp){
   return new RegExp(obj);     
  }
  //如果循环引用,就用 weakMap 来解决
  if (hash.has(obj)){
   return hash.get(obj);
  }
  // 获取对象所有自身属性的描述
  let allDesc = Object.getOwnPropertyDescriptors(obj);
  // 遍历传入参数所有键的特性
  let cloneObj = Object.create(Object.getPrototypeOf(obj), allDesc)
  
  hash.set(obj, cloneObj)
  for (let key of Reflect.ownKeys(obj)) { 
    if(typeof obj[key] === 'object' &amp;&amp; obj[key] !== null){
     cloneObj[key] = deepClone(obj[key], hash);
    } else {
     cloneObj[key] = obj[key];
    }
  }
  return cloneObj
</code>

<h2>maps vs. sets data structure</h2>
<div id="mapsVsSetstoc" class="toc"><a href="#mapsVsSetstopic-0" target="_self">maps vs. sets data structure</a><br><a href="#mapsVsSetstopic-1" target="_self">Defining and understanding <code>Map</code> objects</a><br><a href="#mapsVsSetstopic-2" target="_self">Making equality comparisons with <code>SameValueZero</code></a><br><a href="#mapsVsSetstopic-3" target="_self">What are Map entries?</a><br><a href="#mapsVsSetstopic-4" target="_self">Creating a Map object in JavaScript</a><br><a href="#mapsVsSetstopic-5" target="_self"><code>Map</code> object instance properties and methods</a><br><a href="#mapsVsSetstopic-6" target="_self">Iterating <code>Map</code> objects with the <code>forEach()</code> method</a><br><a href="#mapsVsSetstopic-7" target="_self"><span class="orange">What is a JavaScript <code>Set</code> object?</span></a><br><a href="#mapsVsSetstopic-8" target="_self">Maps vs. Sets</a><br><a href="#mapsVsSetstopic-9" target="_self">Creating a Set object</a><br><a href="#mapsVsSetstopic-10" target="_self"><code>Set</code> object instance properties and methods</a><br><a href="#mapsVsSetstopic-11" target="_self">Iterating keyed collections</a><br><a href="#mapsVsSetstopic-12" target="_self">Accidental <code>undefined</code> — what does it mean?</a><br><a href="#mapsVsSetstopic-13" target="_self">Removing duplicates from <code>Set</code> objects</a><br><a href="#mapsVsSetstopic-14" target="_self"><code>Map</code> or <code>set</code>?</a><br><a href="#mapsVsSetstopic-15" target="_self">Other <code>Map</code> and <code>Set</code> uses</a><br><a href="#mapsVsSetstopic-16" target="_self">Data caching with <code>Map</code> objects</a><br><a href="#mapsVsSetstopic-17" target="_self">Graphical representation with map and set</a><br><a href="#mapsVsSetstopic-18" target="_self">Disjoint-sets and dynamic connectivity</a><br><a href="#mapsVsSetstopic-19" target="_self">Conclusion</a><br><a href="#mapsVsSetstopic-20" target="_self"></a><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">LogRocket</a>: Debug JavaScript errors more easily by understanding the context<br></div></center>
<h3 id="mapsVsSetstopic-0">maps vs. sets data structure</h3>

The way in which data is structured plays a vital role in our ability to efficiently perform certain operations on data, or to solve certain problems in relation to the data. 
For example, you can delete any item from a doubly-linked list in constant time, whereas that could take linear time if the list is represented as an array. 
Similarly, searching for the presence of a key in an array of keys can be done more efficiently in logarithmic time when the array is sorted, as opposed to when it is not sorted.

Some very popular programming languages like Java and Python provide lots of useful data structure implementations out of the box, whereas the ubiquitous JavaScript programming language appears to be pretty lean in that regard. 
However, like most programming languages, JavaScript ships with some very basic data types — such as arrays, strings, objects, sets, maps, etc.

<h3>Keyed collections</h3>
Prior to the ECMAScript 2015 specification updates (popularly known as ES6), JavaScript provided <code>Array</code> objects as the only standard, inbuilt indexed collections — although there were other exotic objects such as the <code>arguments</code> and <code>String</code> objects, which behaved like arrays with special handling for integer index property keys, usually referred to as array-like objects, but were not really indexed collections.
Starting with ES2015, a handful of new standard inbuilt types have been added to JavaScript, such as:

<code>Symbol</code>
<code>Promise</code>
<code>Proxy</code>

A number of typed array objects were also added, which, just like arrays, are also indexed collections themselves. 
In addition to these, a new category known as <a href="https://blog.logrocket.com/es6-keyed-collections-maps-and-sets/" target="_blank" rel="noopener">keyed collections</a> has also been added to the language, with these inbuilt object types:

<code>Map</code>
<code>Set</code>
<code>WeakMap</code>
<code>WeakSet</code>

Just as the name implies, every element (known as an entry) in a keyed collection can be identified by some kind of key, such that the keys in the collection are distinct — meaning that every key maps exactly to one entry in the collection. 
If you are familiar with <a href="https://blog.logrocket.com/know-your-javascript-data-structures/" target="_blank" rel="noopener">hash tables</a>, then you may have already inferred their usefulness here in ensuring that the average access time is sublinear on the number of elements in the collection.

In this post, we’ll take a peek at how we can use JavaScript’s <code>Map</code> and <code>Set</code> objects to efficiently solve problems. 
Before we jump right in, let’s consider a sample problem.

Below is a sample problem:
<blockquote>
<img draggable="false" role="img" alt="💡" src="https://s.w.org/images/core/emoji/13.1.0/svg/1f4a1.svg"> <strong>Contains Duplicates</strong>
Given an array of integers <code>nums</code>, return <code>true</code> if any element appears at least twice in the array, and return <code>false</code> if every element is distinct.
</blockquote>

Pause for a moment and try solving this problem on your own, before you proceed. 
If the <code>nums</code> array was sorted, will that simplify the solution?

Now, here is a working solution to the problem:

function hasDuplicates(nums) { 
  // 1. Sort the array in-place (sorting makes it easier) 
  nums.sort((a, b) =&gt; a - b);

  if (nums.length &gt; 1) { 
    // 2. Loop through the sorted array until a duplicate is found 
    for (let i = 1, len = nums.length; i &lt; len; i++) { 
      // If a duplicate is found, return immediately 
      if (nums[i] == nums[i - 1]) return true; 
    } 
  }

  // 3. If it ever gets here, no duplicate was found 
  return false; 
}

There is no doubt that this solution works, for the given constraints of our problem. 
The reasoning behind why it should work is quite straightforward — if the array of integers is already sorted, then it is possible to check in a <a href="https://en.wikipedia.org/wiki/One-pass_algorithm" target="_blank" rel="noopener">single pass</a> whether or not two consecutive, equal integers exist in the array. 
Since there isn’t any guarantee that the array of integers will already be sorted, the solution first tries to sort the array, before checking for duplicate integers.

Let’s analyze our solution. 
The <a href="https://en.wikipedia.org/wiki/Time_complexity" target="_blank" rel="noopener">running time</a> of the above solution will grow in a linearithmic fashion as the size of the input array grows. 
While this isn’t a bad thing, it’s not so great either because, even for a pre-sorted array, it would still take a significant amount of time to process, as a lot of time is spent trying to sort the array first.

The solution also uses <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank" rel="noopener"><code>Array.prototype.sort</code></a> to sort the input array <a href="https://en.wikipedia.org/wiki/In-place_algorithm" target="_blank" rel="noopener">in-place</a> — modifying the original input array as a result. 
Hence, no additional memory is required for the sort.

It is important to note that, if the problem required that the original order of the input array remain unchanged, then a copy of the input array must be made before using this solution. 
This is tantamount to the use of additional memory that will grow in linear fashion as the size of the input array grows.

Now, whether this is an acceptable solution or not is subject to a number of factors — including but not limited to:

The constraints on the problem, such as the maximum size of the problem’s input
The constraints on computational resources, such as the machine’s available memory
Acceptable trade-offs, such as accepting the use of auxiliary space if that will potentially improve the running time, etc.

If we are certain that the array of integers might not already be sorted, and we also don’t mind using some auxiliary space — provided we can get a faster running time — then this solution is not the best. 
As we progress, we will soon see that we can actually come up with a solution whose running time grows linearly, rather than linearithmically, with the size of the input.

<h3 id="mapsVsSetstopic-1">Defining and understanding <code>Map</code> objects</h3>
We can summarize the ECMAScript 2015 specification definition of a <code>Map</code> object as follows:

It is a collection of key/value pairs where both the keys and values may be arbitrary ECMAScript language values
It is an ordered collection, which means that the insertion order of its elements matters and is followed when iterating the collection
Keys in the collection are distinct or unique, and may only occur in one key/value pair within the Map’s collection
Every key in the collection may occur only once with respect to the ECMAScript <a href="https://tc39.es/ecma262/#sec-samevaluezero" target="_blank" rel="noopener">SameValueZero</a> comparison algorithm

That means any valid JavaScript value — both <a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" target="_blank" rel="noopener">primitive values</a> and object references, including unseemly values like <code>NaN</code> and <code>undefined</code> — can be used as a key in a <code>Map</code> object collection.

<h3 id="mapsVsSetstopic-2">Making equality comparisons with <code>SameValueZero</code></h3>
To determine whether a key already exists in the <code>Map</code> object collection — in other words, ensuring that keys are distinct — the <a href="https://tc39.es/ecma262/#sec-samevaluezero" target="_blank" rel="noopener">ECMAScript SameValueZero comparison algorithm</a> is used.
We use this comparison algorithm because, if one of the listed algorithms were used:

Strict Equality comparison algorithm: this would make it impossible to determine whether a key of value <code>NaN</code> already exists in the collection, since <code>NaN === NaN</code> always evaluates to <code>false</code>
SameValue comparison algorithm: this makes it possible to determine whether a key of value <code>NaN</code> already exists in the collection, but the keys <code>+0</code> and <code>-0</code> are different keys and will be treated as such, despite that <code>+0 === -0</code> always evaluates to <code>true</code>

The SameValueZero comparison algorithm, however, behaves like the SameValue comparison algorithm, except that it considers both <code>+0</code> and <code>-0</code> to be the same key. 
If the SameValueZero comparison algorithm were to be implemented as a JavaScript function, it would look like this:

function SameValueZero(x, y) {
  return x === y || (Number.isNaN(x) &amp;&amp; Number.isNaN(y)); 
}

<h3 id="mapsVsSetstopic-3">What are Map entries?</h3>
Each key/value pair contained in a <code>Map</code> object collection is usually referred to as an entry object, or entry. 
An entry object is usually represented using a two-element array — more like <a href="https://blog.logrocket.com/the-javascript-record-and-tuple-proposal-an-overview/" target="_blank" rel="noopener">a tuple in most other programming languages</a> — whose first element is the key and whose second element is the value.

The type definition for a generic <code>Map</code> object entry should look like this (in TypeScript):
type MapEntry&lt;Key, Value&gt; = [Key, Value];
That said, you can use JavaScript syntax, such as a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">destructuring assignment</a>, on a <code>Map</code> object entry like you would with an array, as demonstrated in the following <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener"><code>for...of</code> loop</a> example:

/**
 * Iterating over entries of `Map` object using a 
 * `for...of` loop — assuming that `map` has been 
 * defined already as a `Map` object. 
 */
for (const [key, value] of map) { 
  console.log(key, value); 
}

Both <code>Map</code> and <code>Set</code> objects inherit an <code>entries()</code> method from their corresponding constructors’ <code>prototype</code> objects. 
This <code>entries()</code> method returns an <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol" target="_blank" rel="noopener">iterator</a> for all of the entries contained in the collection with respect to their insertion order.

For <code>Map</code> objects, however, the iterator returned by the <code>entries()</code> method also serves as the default iterator of the collection.

<h3 id="mapsVsSetstopic-4">Creating a Map object in JavaScript</h3>
At the time of this article’s publication, the only way to create a <code>Map</code> object is by invoking the global <code>Map</code> constructor function. 
The constructor function must be invoked with the <code>new</code> keyword — otherwise, a <code>TypeError</code> will be thrown.

When the <code>Map</code> constructor function is invoked without arguments, an empty <code>Map</code> object of 0 <code>size</code> is returned.

// Throws a`TypeError` — when invoked without `new` keyword 
const throwTypeErrorMap = Map();

// Creates an empty `Map` object of 0 `size`
const mapA = new Map();

// Omitting the parentheses — when invoked without arguments
// Also creates an empty `Map` object of 0 `size`
const mapB = new Map;

console.log(mapA.size); // 0 
console.log(mapB.size); // 0

The <code>Map</code> constructor function can also be invoked with an optional <code>iterable</code> argument. 
When specified, <code>iterable</code> must be a JavaScript object that:

properly implements the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol" target="_blank" rel="noopener">iterable protocol</a> — many inbuilt JavaScript objects implement this protocol, such as <code>Array</code>, <code>String</code>, and <code>Set</code>, as well as <code>Map</code>
returns an iterator object that produces a two-element, array-like (entry) object whose first element is a value that will be used as a <code>Map</code> key, and whose second element is the value to associate with that key

If the <code>iterable</code> argument does not meet these two requirements, a <code>TypeError</code> will be thrown — the only exception being when <code>iterable</code> is the value <code>null</code> or <code>undefined</code>, in which case the effect is the same as calling the <code>Map</code> constructor function without any argument, and an empty <code>Map</code> object of 0 <code>size</code> is created.

Let’s pay more attention to the second requirement stated above. 
It is obvious that a new <code>Map</code> object cannot be created from a string primitive, even though <code>String</code> objects are iterable objects themselves.

// Map from String — throws a `TypeError` 
const throwTypeErrorMap = new Map("programming");

When we create a new <code>Map</code> object from another iterable object, an empty <code>Map</code> object is first created, and then the following steps are taken for each entry object produced by the iterator object, which is returned by the iterable:

Extract the first and second elements from the entry object as <code>key</code> and <code>value</code>, respectively
Check if an entry with <code>key</code> already exists in the <code>Map</code> object collection using <code>SameValueZero</code> comparison

If it exists, update the entry’s current value to <code>value</code>
If it does not exist, append a new entry to the end of the <code>Map</code> object collection with that <code>key</code> and <code>value</code> (if the <code>key</code> is <code>0</code>, change it to <code>+0</code> before appending a new entry to the collection)

const pairs = [[1, 3], [3, 3], [4, 2], [2, 2]];

// (1) Map from Array or Set
// Here a set is created from the <code>pairs</code> array and
// used to create the map. 
However, the map can also
// be created directly from the <code>pairs</code> array.
const mapA = new Map(new Set(pairs));

console.log(mapA.size); // 4
console.log(…mapA); // [1, 3] [3, 3] [4, 2] [2, 2]

// (2) Map from Map
// New map contains all the items of the original map
// However, both maps are entirely different objects.
// Think of it as creating a clone of a map.
const mapB = new Map(mapA);

console.log(…mapA); // [1, 3] [3, 3] [4, 2] [2, 2]
console.log(…mapB); // [1, 3] [3, 3] [4, 2] [2, 2]
console.log(mapA === mapB); // false
console.log(mapA.size === mapB.size); // true

// (3) Map from Object
// In ES6, the <code>Object.entries()</code> method was added,
// and it returns an array of entries representing
// key/value pairs for every key in an object.
const mapC = new Map(Object.entries({
language: “JavaScript”,
hello: “world”
}));

console.log(mapC.size); // 2
console.log(…mapC); // [“language”, “JavaScript”] [“hello”, “world”]

</ol>

Now that we are able to create new <code>Map</code> objects, let’s go ahead to explore their instance properties and methods.

<h3 id="mapsVsSetstopic-5"><code>Map</code> object instance properties and methods</h3>
<h3>Checking the size</h3>

We’ve already seen the <code>size</code> property in action a couple of times. 
Just as the name implies, <code>size</code>returns the number of entries in the <code>Map</code> object at any instant.

It might interest you to know that the <code>size</code> property is an accessor property and not a data property. 
Also, it only has a <code>get accessor</code> function, and not a <code>set accessor</code> function. 
That’s the reason why its value cannot be overridden by an assignment operation.

Whenever you access the <code>size</code> property of a <code>Map</code> object, its <code>get accessor</code> function will be invoked, which basically counts and returns the number of elements (entries) currently in the <code>Map</code> object.

<h3>Looking up a key</h3>

There are several cases where it is sufficient to know only whether or not an entry with a particular key is present in a <code>Map</code> object. 
Every <code>Map</code> object will originally have a <code>has()</code> method — which can be called to assert whether or not an entry with a specified key is present in the <code>Map</code> object. 
The <code>has()</code> method returns a boolean value — <code>true</code> if the specified key is present, and <code>false</code> otherwise.

const M = new Map(Object.entries({ 
  language: "JavaScript", 
  hello: "world" 
}));

console.log(M.has("hello")); // true 
console.log(M.has("Hello")); // false 
console.log(M.has("language")); // true 
console.log(M.has("world")); // false

Beyond checking whether a key exists in a <code>Map</code> object, being able to read the value of the entry associated with that key is also very important. 
As such, every <code>Map</code> object initially has a <code>get()</code> method for this purpose.

When the <code>get()</code> method is called with a key for which no entry exists, it returns <code>undefined</code>.

const M = new Map(Object.entries({ 
  language: "JavaScript", 
  hello: "world" 
}));

console.log(M.get("hello")); // "world" 
console.log(M.get("Hello")); // undefined 
console.log(M.get("language")); // "JavaScript" 
console.log(M.get("world")); // undefined 

Although the <code>get()</code> method returns <code>undefined</code> for nonexistent keys, it should not be relied upon when checking for the existence of a key in a <code>Map</code> collection because it’s also possible for a key in the collection to have a value of <code>undefined</code>.

The most accurate way to determine the existence of a key in the collection is to use the <code>has()</code> method.

<h3>Adding, updating, and removing entries</h3>

The ability to add, update, or remove one or more entries from a <code>Map</code> object is essential, and every <code>Map</code> object will have <code>set()</code>, <code>delete()</code>, and <code>clear()</code> methods.

The <code>set()</code> method takes a JavaScript value as its argument and will append that value to the end of the <code>Set</code> object, provided it isn’t already in the <code>Set</code> object. 
If the specified value is already in the <code>Set</code> object, it is ignored.

The <code>add()</code> method returns the same <code>Set</code> object with the added value, making it amenable to <a href="https://en.wikipedia.org/wiki/Method_chaining" target="_blank" rel="noopener">method chaining</a>, or the process of invoking multiple <code>add()</code> calls at once.

The <code>delete()</code> method, on the other hand, will remove the entry associated with the specified key from the <code>Map</code> object — provided there is such an entry in the <code>Map</code> object. 
If an entry is actually removed from the <code>Map</code> object as a result of this delete operation, it returns <code>true</code>; otherwise it returns <code>false</code>.

It might be useful in some cases to completely remove all of the entries in a given <code>Map</code> object. 
While this can be achieved by making multiple <code>delete()</code> calls to the <code>Map</code> object, obviously it will make more sense if this is done in a single method call.

This is exactly what the <code>clear()</code> method does. 
Calling the <code>clear()</code> method empties the <code>Map</code> object and returns <code>undefined</code>.

// Convert object to map 
const M = new Map(Object.entries({ 
  language: "JavaScript" 
}));

console.log(M.size); // 1 
console.log(...M); // ["language", "JavaScript"]

// (1) Add and update some map entries 
M.set("year", 1991); 
M.set("language", "Python");

console.log(M.size); // 2 
console.log(...M); // \["language", "Python"\] ["year", 1991]

// (2) Add or update several values at once (using chaining) 
M.set("version", 3) 
  .set("year", 2000) 
  .set("version", "2.0");

console.log(M.size); // 3 
console.log(...M); // \["language", "Python"\] ["year", 2000] ["version", "2.0"]

// Delete some entries from the map 
console.log(M.delete("Year")); // false 
console.log(M.delete("year")); // true 
console.log(M.delete("year")); // false 
console.log(M.delete("version")); // true

console.log(M.size); // 1 
console.log(...M); // ["language", "JavaScript"]

// Empty the map 
M.clear();

console.log(M.size); // 0

<h3>Iterating the collection</h3>

One other thing we might want to do with a <code>Map</code> object is view the keys, values, or entries that are in it.

You can loop through each entry in a <code>Map</code> object (in insertion order) using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener"><code>for...of</code> loop</a>. 
This is because every iterable has a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" target="_blank" rel="noopener"><code>Symbol.iterator()</code>&nbsp;method</a> that returns its default <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterator_protocol" target="_blank" rel="noopener">iterator</a> — which is responsible for producing the sequence of values for the loop.

Besides the <code>for...of</code> loop we looked at earlier, the same sequence of values returned by the default iterator is what the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank" rel="noopener">spread operator (<code>...</code>)</a>, the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*" target="_blank" rel="noopener"><code>yield*</code>&nbsp;statement</a>, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">destructuring assignment</a> are based on.

We’ve already seen the <code>entries()</code> method, which returns an iterator for all the entries in a <code>Map</code> object with respect to their insertion order. 
As stated earlier, the iterator returned by the <code>entries()</code> method also serves as the default iterator of a <code>Map</code> object.

That said, the two <code>for...of</code> loops shown in the following code snippet are the same and will produce the exact same sequence of values:

const M = new Map([[1, 3], [3, 3], [4, 2], [2, 2]]);

// (a) Iteration using the default iterator ([Symbol.iterator]) 
for (const [key, value] of M) { 
  console.log(key, value);
}

// (b) Iteration using the `entries()` iterator 
for (const [key, value] of M.entries()) { 
  console.log(key, value); 
} 

It is important to note that an iterable object can provide other iterators besides the default iterator provided by its <code>[Symbol.iterator]</code> method. 
This holds true for most inbuilt iterables in JavaScript, including <code>Map</code> objects.

In fact, every <code>Map</code> object originally has three methods that return iterators, namely:

<code>entries()</code>
<code>keys()</code>
<code>values()</code>

The <code>keys()</code> method, as the name implies, returns an iterator that yields the keys associated with each entry of the <code>Map</code> object (in insertion order). 
The <code>values()</code> method returns an iterator that yields the values associated with each entry of the <code>Map</code> object.

The following code snippet demonstrates a couple of ways we can leverage the iterable behavior of a <code>Map</code> object to access the values or keys of each element in it.

const M = new Map([[1, 3], [3, 3], [4, 2], [2, 2]]);

// Using the spread operator (...) to pass values 
// in the Map object as function arguments. 
console.log(...M.values()); // 3 3 2 2

// Using the spread operator in building an array 
// with the unique keys of the Map object. 
const arr = [...M.keys()];

console.log(arr); // [1, 3, 4, 2] 
console.log(arr[0]); // 1 
console.log(arr[3]); // 2 
console.log(arr.length); // 4

// Using destructuring assignment with a `Map` object 
// to extract the first, second and remaining keys. 
const [first, second, ...remainingKeys] = M.keys();

console.log(first); // 1 
console.log(second); // 3 
console.log(remainingKeys); // [4, 2] 
console.log(remainingKeys.length); // 2

// Iteration using a for...of loop 
// to read all the keys in the collection. 
for (const key of M.keys()) { 
  console.log(key); 
}

// 1 
// 3 
// 4 
// 2

<h3 id="mapsVsSetstopic-6">Iterating <code>Map</code> objects with the <code>forEach()</code> method</h3>

We’ve been able to explore quite a number of ways in which we can iterate over a <code>Map</code> object. 
However, there remains one more very useful iteration method — the <code>forEach()</code> method.

Just as with arrays, the <code>forEach()</code> method of a <code>Map</code> object accepts a callback function as its first argument, which is triggered for each entry of the <code>Map</code> object. 
The <code>forEach()</code> method also accepts an optional second argument, which represents the <code>this</code> value that will be used when executing the callback function.

The <code>forEach()</code> callback function is called with three arguments for every entry of the <code>Map</code> object:

The first argument is the value associated with the current entry in the iteration
The second argument is the key associated with the current entry in the iteration
The third argument is the <code>Map</code> object itself

const M = new Map([[1, 4], [3, 5], [4, 0], [2, 2]]);
M.forEach(function _callback(value, key, map) {
   console.log([...map]);
   const replacement = this[value];
   if (replacement) map.set(key, replacement);
   else if (Number.isInteger(value)) map.delete(key);
}, "hello");

console.log([...M]);

// [[1, 4], [3, 5], [4, 0], [2, 2]]
// [[1, "o"], [3, 5], [4, 0], [2, 2]]
// [[1, "o"], [4, 0], [2, 2]]
// [[1, "o"], [4, "h"], [2, 2]]
// [[1, "o"], [4, "h"], [2, "l"]]

To be clear, the <code>forEach()</code> method call in the previous code snippet results in the following <code>_callback()</code> calls:

_callback.call("hello", 1, 4, M); 
_callback.call("hello", 3, 5, M); 
_callback.call("hello", 4, 0, M); 
_callback.call("hello", 2, 2, M);

<h3 id="mapsVsSetstopic-7"><span class="orange">What is a JavaScript <code>Set</code> object?</span></h3>

A <code>Set</code> object is an ordered collection of unique JavaScript values.

For every <code>Set</code> object, there exists the following invariants:

It is an ordered collection: The insertion order of its elements matters, and is followed when iterating the collection
Values in the collection are distinct or unique: Every value may occur only once in the collection with respect to the <a href="https://tc39.es/ecma262/#sec-samevaluezero" target="_blank" rel="noopener">ECMAScript SameValueZero comparison algorithm</a>

Any valid JavaScript value can be contained in the collection — both <a href="https://developer.mozilla.org/en-US/docs/Glossary/Primitive" target="_blank" rel="noopener">primitive values</a> and object references, including unseemly values like <code>NaN</code> and <code>undefined</code>.

<h3 id="mapsVsSetstopic-8">Maps vs. Sets</h3>
Since we’ve already explored <code>Map</code> objects in the previous section, let’s look at how they compare with <code>Set</code> objects before we continue.

<table><thead>
<tr><th>Set objects</th><th>Map objects</th></tr></thead>
<tbody>
<tr><td>one-dimensional collections: they store only unique values</td><td>two-dimensional collections: they store records as key/value pairs, and each key is unique in the collection</td></tr>
<tr><td>Both key and value point to the same value or reference for every entry</td><td>Both key and value point to the same value or reference for every entry</td></tr>
<tr><td>The default iterator ([Symbol.iterator]) of a Set object is the one returned from its values() method</td><td>The default iterator is obtained from the entries() method</td></tr>
<tr><td>set() and get() methods are not defined in the Set.prototype object; the Set.prototype object defines an add () method</td><td>The set() and get() methods are defined in the Set.prototype object</td></tr>
</tbody>
</table>

As we progress in our exploration of JavaScript <code>Set</code> objects, we will find out more ways in which <code>Set</code> objects differ from <code>Map</code> objects and some ways in which they are similar.

<h3 id="mapsVsSetstopic-9">Creating a Set object</h3>

Just as with <code>Map</code> objects, the only way to create a <code>Set</code> object is by invoking the global <code>Set</code> constructor function. 
The constructor function must be invoked with the <code>new</code> keyword — otherwise, a <code>TypeError</code> will be thrown. 
When the <code>Set</code> constructor function is invoked without arguments, an empty <code>Set</code> object of 0 <code>size</code> is returned.

// Throws a `TypeError` — when invoked without `new` keyword 
const throwTypeErrorSet = Set();

// Creates an empty `Set` object of 0 `size` 
const setA = new Set();

// Omitting the parentheses — when invoked without arguments 
// Also creates an empty `Set` object of 0 `size`
const setB = new Set;

console.log(setA.size); // 0 
console.log(setB.size); // 0 

The <code>Set</code> constructor function can also be invoked with an optional <code>iterable</code> argument. 
When specified, <code>iterable</code> must be a JavaScript object that properly implements the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol" target="_blank" rel="noopener">iterable protocol</a>. 
Many inbuilt JavaScript objects implement this protocol — such as <code>Array</code>, <code>String</code>, and <code>Map</code>, as well as <code>Set</code> — which means that these are all valid objects and can be passed to the <code>Set</code> constructor function as the <code>iterable</code> argument.

If the <code>iterable</code> is the value <code>null</code> or <code>undefined</code>, then the effect is the same as calling the <code>Set</code> constructor function without any argument — an empty <code>Set</code> object of 0 <code>size</code> will be created. 
Otherwise, a <code>TypeError</code> will be thrown for any other <code>iterable</code> value that does not properly implement the iterable protocol.

Unlike with <code>Map</code> objects, creating a new <code>Set</code> object from another iterable object has the effect of de-duping, i.e., eliminating redundant duplicate values from the values yielded by the internal <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/iterator" target="_blank" rel="noopener">iterator</a> of the iterable object. 
This is because of one important attribute of a <code>Set</code> object, which is that it must contain only distinct, discrete values.

// (1) Set from String 
// Set contains all the unique characters of the string 
const testString = "programming"; 
const uniqueChars = new Set(testString);

console.log(testString.length); // 11 
console.log(uniqueChars.size); // 8 
console.log(...uniqueChars); // p r o g a m i n

// (2) Set from Array 
// Set contains all the distinct elements of the array 
const integers = [1,1,1,3,3,4,3,2,4,2]; 
const distinctIntegers = new Set(integers);

console.log(integers.length); // 10 
console.log(distinctIntegers.size); // 4 
console.log(...distinctIntegers); // 1 3 4 2

// (3) Set from Set 
// New set contains all the items of the original set 
// However, both sets are entirely different objects. 
// Think of it as creating a clone of a set. 
const setA = new Set([1,1,1,3,3,4,3,2,4,2]); 
const setB = new Set(setA);

console.log(...setA); // 1 3 4 2 
console.log(...setB); // 1 3 4 2 
console.log(setA === setB); // false 
console.log(setA.size === setB.size); // true 

Let’s take another shot at our sample problem from earlier and employ what we’ve learned so far about <code>Set</code> objects. 
This time, we will be creating a new <code>Set</code> object from the <code>nums</code> array, containing only distinct integers (no duplicates). 
We can then determine whether the <code>nums</code> array contains duplicates by comparing the size of the <code>Set</code> object with the length of the <code>nums</code> array.

Here is what the new solution looks like:

function hasDuplicates(nums) { 
  // Create a new set from `nums` containing only its distinct 
  // integers (i.e de-duplicate the `nums` array). 
  const distinct = new Set(nums);

  // If the size of the distinct set matches the length of the 
  // nums array, then there are no duplicates, and vice-versa. 
  return distinct.size != nums.length; 
}

In using a <code>Set</code> object, we have been able to implement a solution whose running time is guaranteed to grow linearly with the size of the input array, even though it will require some additional memory to perform. 
When it comes to storing unique items in memory, a set of items with duplicates will use less space than one without duplicates.

In other words, the worst case scenario in terms of memory usage happens when the set contains only unique items and no duplicates — in that case, the amount of space used matches the number of items.

<h3 id="mapsVsSetstopic-10"><code>Set</code> object instance properties and methods</h3>
<h3>Checking the size</h3>

Just as with <code>Map</code> objects, the <code>size</code> property returns the number of values in a <code>Set</code> object at any instant. 
Again, the <code>size</code> property of the <code>Set.prototype</code> object is an accessor property, not a data property.

<code>Set</code> also only has a get accessor function and not a set accessor function — hence, it cannot be overridden by an assignment operation.

Whenever you access the <code>size</code> property of a <code>Set</code> object, its get accessor function will be invoked, and it will count and return the number of elements (values) that are currently in the <code>Set</code> object.

<h3>Checking whether a value is present</h3>

Every <code>Set</code> object will originally have a <code>has()</code> method that can be called to assert whether or not an element with a specified value is present in the <code>Set</code> object. 
Like with <code>Map</code> objects, the <code>has()</code> method returns a boolean value — <code>true</code> if the specified value is present, and <code>false</code> otherwise.

const uniqueChars = new Set("programming");

console.log(...uniqueChars); // p r o g a m i n

console.log(uniqueChars.has("p")); // true 
console.log(uniqueChars.has("A")); // false 
console.log(uniqueChars.has("a")); // true 
console.log(uniqueChars.has("t")); // false 

Since <code>Set</code> objects are one-dimensional (storing only unique values), it is impractical for them to have a <code>get()</code> method, unlike with <code>Map</code> objects. 
As a result, the <code>Set.prototype</code> object does not define a <code>get()</code> method.

<h3>Adding and removing values</h3>

It is very important to be able to add or remove one or more values from a <code>Set</code> object, and every <code>Set</code> object will initially have <code>add()</code>, <code>delete()</code>, and <code>clear()</code> methods.

The <code>add()</code> method takes a JavaScript value as its argument, and will append that value to the end of the <code>Set</code> object, provided that it isn’t already in the <code>Set</code> object. 
If the specified value is already in the <code>Set</code> object, it is ignored.

The <code>add()</code> method returns the same <code>Set</code> object, with the added value, which makes it amenable to <a href="https://en.wikipedia.org/wiki/Method_chaining" target="_blank" rel="noopener">method chaining</a>, or the familiar process of invoking multiple <code>add()</code> calls at once.

Just like with <code>Map</code> objects, the <code>delete()</code> method of a <code>Set</code> object will remove the element associated with the specified value from the <code>Set</code> object, provided that such an element is present in the <code>Set</code> object. 
If an element is actually removed from the <code>Set</code> object as a result of this delete operation, it returns <code>true</code>; otherwise it returns <code>false</code>.

Also, a call to the <code>clear()</code> method empties the <code>Set</code> object and returns <code>undefined</code>.

// Create new set of integers 
const integers = new Set([1,1,1,3,3,4,3,2,4,2]);

console.log(integers.size); // 4 
console.log(...integers); // 1 3 4 2

// Add some values to the set 
integers.add(5); 
integers.add(1);

console.log(integers.size); // 5 
console.log(...integers); // 1 3 4 2 5

// Add several values at once (using chaining) 
integers.add(7).add(2).add(9);

console.log(integers.size); // 7 
console.log(...integers); // 1 3 4 2 5 7 9

// Delete some values from the set 
console.log(integers.delete(3)); // true 
console.log(integers.delete(8)); // false 
console.log(integers.delete(3)); // false 
console.log(integers.delete(1)); // true

console.log(integers.size); // 5 
console.log(...integers); // 4 2 5 7 9

// Empty the set 
integers.clear();

console.log(integers.size); // 0

Now that we’ve learned a few more things we can do with <code>Set</code> objects, let’s return to our previous solution to our original sample problem and see if we can optimize it even further. 
(As you might have rightly guessed, we can.)

A careful examination of our previous solution will show that it’s doing a little too much. 
It always considers every integer in the input array, adding them to the <code>Set</code> object (just like using the <code>add()</code> method multiple times) and then checking its size, which counts and returns the number of elements in the <code>Set</code> object by going through each element.

The problem with this solution is that it isn’t conservative. 
It is very possible that a duplicate integer might be found by considering the first few integers in the array, and so the act of considering the remaining integers in the array becomes redundant.

To optimize this solution, we can decide to be lazy about adding integers to the <code>Set</code> object, and only continue as long as we haven’t encountered an integer that has already been added to the <code>Set</code> object.

Here is what the optimized solution looks like:

function hasDuplicates(nums) { 
  // 1. Create an empty set to hold distinct integers
  const distinct = new Set();

  // 2. Loop through the integers until a duplicate is found
  for (const int of nums) {
    // 2a. 
If a duplicate is found, return immediately
    if (distinct.has(int)) return true;

    // 2b. 
Otherwise, add the integer to the distinct set
    distinct.add(int);
  }

  // 3. If it ever gets here, no duplicate was found
  return false;
}

<h3 id="mapsVsSetstopic-11">Iterating keyed collections</h3>

It is often necessary to have a view into the values that are contained in a <code>Set</code> object. 
This is very attainable with arrays or <a href="https://tc39.es/ecma262/#sec-indexed-collections" target="_blank" rel="noopener">indexed collections</a> — hence, we can easily access the element of an array (<code>arr</code>), at some index (<code>i</code>), using the property access bracket notation (<code>arr[i]</code>).

Unfortunately, this kind of element access is <a href="https://tc39.es/ecma262/#sec-keyed-collections" target="_blank" rel="noopener">not directly possible with <code>Set()</code> objects</a> because <code>Set</code> objects are keyed collections.

However, just like with arrays and other iterables, you can loop through the values for each element in a <code>Set</code> object (in insertion order) using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener"><code>for...of</code> loop</a>, or you could use the sequence of values it produces with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank" rel="noopener">spread operator (<code>...</code>)</a>, the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield*" target="_blank" rel="noopener"><code>yield*</code> statement</a>, or <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">destructuring assignment</a>.

The following code snippet demonstrates a couple of ways we can leverage the iterable behavior of a <code>Set</code> object to access the values of each element in it.

const integers = new Set([1,1,1,3,3,4,3,2,4,2]);

// Using the spread operator (...) to pass values
// in the Set object as function arguments.
console.log(...integers); // 1 3 4 2

// Using the spread operator in building an array
// with the unique values from the Set object.
const arr = [...integers];

console.log(arr); // [1, 3, 4, 2]
console.log(arr[0]); // 1
console.log(arr[3]); // 2
console.log(arr.length); // 4

// Using destructuring assignment with a `Set` object
const [first, second, ...remainingIntegers] = integers;

console.log(first); // 1
console.log(second); // 3
console.log(remainingIntegers); // [4, 2]
console.log(remainingIntegers.length); // 2

// Iteration using a `for...of` loop
for (const integer of integers) {
  console.log(integer);
}

// 1
// 3
// 4
// 2

Just like with <code>Map</code> objects, every <code>Set</code> object originally has three methods that return iterators — <code>values()</code>, <code>keys()</code>, and <code>entries()</code>.

The <code>values()</code> method, as the name implies, returns a new iterator that yields the values for each element in the <code>Set</code> object (in insertion order). 
The iterator returned by the <code>values()</code> method yields the exact same sequence of values as the default iterator returned by the <code>[Symbol.iterator]</code> method.

For iteration purposes, the <code>keys()</code> method of a <code>Set</code> object behaves exactly like the <code>values()</code> method, and they can be used interchangeably. 
In fact, the <code>values</code>, <code>keys</code>, and <code>[Symbol.iterator]</code> properties of a <code>Set</code> object all point to the same value (function) initially. 
Hence, the following <code>for...of</code> loops will log the exact same sequence of values.

const integers = new Set([1,1,1,3,3,4,3,2,4,2]);

// (a) Iteration using the default iterator (`[Symbol.iterator]`)
for (const integer of integers) {
  console.log(integer);
}

// (b) Iteration using the `values()` iterator
for (const integer of integers.values()) {
  console.log(integer);
}

// (c) Iteration using the `keys()` iterator
for (const integer of integers.keys()) {
  console.log(integer);
}

Some basic set operations can be implemented by iterating over one or more <code>Set</code> objects. 
For example, the following code snippet shows how to implement the <code>union</code> and <code>intersection</code> set operations.

function union(setA, setB) {
  const setUnion = new Set(setA);

  for (const value of setB) {
    setUnion.add(value);
  }

  return setUnion;
}

function intersection(setA, setB) { 
  const setIntersection = new Set();

  for (const value of setB) {
    if (setA.has(value)) {
      setIntersection.add(value);
    }
  }

  return setIntersection;
}

Just as with <code>Map</code> objects, <code>Set</code> objects also have a <code>forEach()</code> method with a similar call signature. 
However, to account for the one-dimensional nature of <code>Set</code> objects, the <code>forEach()</code> callback function is called with three arguments:

The first argument is the value for the current element in the iteration
The second argument is always the same as the first argument
The third argument is the <code>Set</code> object itself

const S = new Set([1,1,1,3,3,4,3,2,4,2]);

S.forEach(function _callback(value, _, set) {
   console.log([...set]);
   const replacement = this[value];
   if (replacement) set.add(${value}${replacement});
   if (Number.isInteger(value)) set.delete(value);
}, "hello");

// [1, 3, 4, 2]
// [3, 4, 2, '1e']
// [4, 2, '1e', '3l']
// [2, '1e', '3l', '4o']
// ['1e', '3l', '4o', '2l']
// ['1e', '3l', '4o', '2l']
// ['1e', '3l', '4o', '2l']
// ['1e', '3l', '4o', '2l']

console.log(...S); // 1e 3l 4o 2l

To be clear, the <code>forEach()</code> method call in the previous code snippet results in the following <code>_callback()</code> calls:

_callback.call("hello", 1, 1, S);
_callback.call("hello", 3, 3, S);
_callback.call("hello", 4, 4, S);
_callback.call("hello", 2, 2, S);
_callback.call("hello", '1e', '1e', S);
_callback.call("hello", '3l', '3l', S);
_callback.call("hello", '4o', '4o', S);
_callback.call("hello", '2l', '2l', S);

<h3 id="mapsVsSetstopic-12">Accidental <code>undefined</code> — what does it mean?</h3>

When the <code>Set</code> constructor function is called without any argument, you already know that it creates an empty <code>Set</code> object. 
The same, however, does not hold true for the <code>add()</code> method.

When the <code>add()</code> method of a <code>Set</code> object is called without any argument, it actually adds an element to the collection with a value of <code>undefined</code>, if it does not already exist.

In other words, for a given <code>Set</code> object <code>S</code>, <code>S.add()</code> is exactly the same as <code>S.add(undefined)</code>. 
This is what I’d like to refer to as an accidental <code>undefined</code> — because it might not be intended.

You might have already inferred the behavior of the <code>has()</code> and <code>delete()</code> methods when they’re called without any argument. 
As with the <code>add()</code> method, calling these methods without any argument is exactly the same as calling them with <code>undefined</code> as the first argument. 
Hence, for a given <code>Set</code> object <code>S</code>, <code>S.has()</code> checks whether <code>undefined</code> exists as a value in the <code>Set</code> object, while <code>S.delete()</code> removes the value <code>undefined</code> from the collection, if it exists.

// Creates an empty set object 
const S = new Set();

// Add some items to the set object 
S.add(5); 
S.add("hello"); console.log(...S); // 5 'hello'

// Adds undefined to the set object 
S.add(); console.log(...S); // 5 'hello' undefined

console.log(S.has(5)); // true 
console.log(S.has("world")); // false

// Logs `true` because `undefined` exists in the set 
console.log(S.has()); // true

// Logs `true` because `undefined` was removed from the set 
console.log(S.delete()); // true

// Logs `false` because `undefined` does not exist in the set 
console.log(S.has()); // false 

That said, always be sure to explicitly call the <code>add()</code>, <code>delete()</code>, and <code>has()</code> methods of a <code>Set</code> object with at least one argument to avoid dealing with an accidental <code>undefined</code> value.

<h3 id="mapsVsSetstopic-13">Removing duplicates from <code>Set</code> objects</h3>

Before we finish this section on JavaScript <code>Set</code> objects, let’s see how we can solve a modified version of the sample problem from before, using all we’ve learned so far.

<blockquote>
<img draggable="false" role="img" alt="💡" src="https://s.w.org/images/core/emoji/13.1.0/svg/1f4a1.svg"> <strong>Contains Duplicates (2)</strong> Given an array of integers <code>nums</code>, return the number of elements that appear at least twice in the array, and return <code>0</code> if every element is distinct.
</blockquote>

Pause for a moment and try solving this problem on your own, before you proceed. 
The solution could be a little tricky — how can you ensure a duplicate integer is not counted more than once?

Now, here is a working solution to the problem:

function countDuplicates(nums) { 
  // Create an empty set for distinct integers 
  // (i.e integers appearing only once) 
  const distinct = new Set();

  // Create an empty set for duplicate integers 
  const duplicates = new Set();

  // Create a variable to keep track of the duplicates count 
  let count = 0;

  // Loop through the integers while counting duplicates 
  for (const int of nums) { 
    // If duplicate integer is found (it has already been counted), 
    // continue with the iteration to the next integer. 
    if (duplicates.has(int)) continue;

    if (distinct.delete(int)) {
      // If integer was successfully deleted from the `distinct` set,
      // that means it has been seen once before. 
Hence add it, to
      // the `duplicates` set and increment `count`.
      duplicates.add(int);
      count++;
    } else {
      // Integer is being seen for the first time and should be added
      // to the `distinct` set.
      distinct.add(int);
    }
  }

  // Finally, return the duplicates count 
  return count; 
}

<h3 id="mapsVsSetstopic-14"><code>Map</code> or <code>set</code>?</h3>

So far, we have been able to explore JavaScript <code>Map</code> and <code>Set</code> objects in detail. 
But in addition to that, we also need to be able to determine when it is sufficient to use one instead of the other in solving problems.

Earlier on, we saw that <code>Set</code> objects are one-dimensional collections, whereas <code>Map</code> objects are two-dimensional. 
That could serve as a cue in determining which one is best suited for a particular problem.

In other words, a <code>Map</code> object should be used over a <code>Set</code> object in cases where additional information is needed aside from just the key. 
Most times, that additional information is required to make decisions or to compute the final output of the program.

To further demonstrate this, let’s consider another popular problem.

<blockquote>
<img draggable="false" role="img" alt="💡" src="https://s.w.org/images/core/emoji/13.1.0/svg/1f4a1.svg"><strong>Two Sum</strong> Given an array of integers and a specific target, return <code>true</code> if two numbers exist in the array that add up to the target, and <code>false</code> otherwise.
</blockquote>

If the array were to be sorted, then it would be possible to come up with a linear time solution to this problem without any need for auxiliary space. 
But since there is a possibility that the array is not already sorted, we need to use a <code>Set</code> object to provide some auxiliary space where we can solve the problem in linear time without taking on the expensive task of sorting the array first.

function twoSum(nums, target) { 
  // 1. Create an empty set for complements 
  // (i.e complement = target - num) 
  const complements = new Set();

  // 2. Loop through integers until a complement is found 
  for (const num of nums) { 
    // 2a. 
If a complement is found, return immediately 
    if (complements.has(target - num)) return true;

    // 2b. 
Otherwise, add the integer to the complements set
    complements.add(num);
  }

  // 3. If it ever gets here, no complement was found 
  return false; 
}

Here, we are required to return <code>true</code> if there are two numbers that sum up to the specified target, and <code>false</code> otherwise. 
As such, we are only interested in the numbers themselves, which is why we only need to use one <code>Set</code> object to solve the problem.

Now, let’s instead say we modify the problem to return the array indices of the two numbers. 
We would be better off using a <code>Map</code> object. 
That’s because, in addition to the numbers themselves, we are now also interested in their corresponding indices in the array — both of which cannot be contained in a singular <code>Set</code> object.

function twoSum(nums, target) { 
  // 1. Create an empty map for integers against indices 
  // (i.e Map&lt;integer, index&gt;) 
  const indices = new Map();

  // 2. Loop through integers until a complement is found 
  for (let i = 0, len = nums.length; i &lt; len; i++) { 
    // 2a. 
Compute the complement of the current integer 
    const complement = target - nums[i];

    // 2b. 
If the complement already exists in the map,
    // get the complement index from the indices map and
    // return early ([complement index, current index])
    if (indices.has(complement)) {
      return [indices.get(complement), i];
    }

    // 2c. 
Otherwise, add the current integer and index
    // to the indices map
    indices.set(nums[i], i);
   }

  // 3. If it ever gets here, no complement was found 
  return null; 
}

<h3 id="mapsVsSetstopic-15">Other <code>Map</code> and <code>Set</code> uses</h3>

<code>Map</code> and <code>Set</code> objects can be very useful when modeling <a href="https://blog.logrocket.com/the-javascript-record-and-tuple-proposal-an-overview/" target="_blank" rel="noopener">compound data structures</a> to solve certain kinds of problems.

In general, whenever you need to be able to look up or check for the existence of an item with an average access time that is sublinear on the number of available items (approximately constant time), you should consider using a <code>Set</code> or <code>Map</code> object.

<h3 id="mapsVsSetstopic-16">Data caching with <code>Map</code> objects</h3>

When modeling data structures for the purpose of caching data, a <code>Map</code> object can be used as a lookup table to check for the existence of a key in the cache before performing <code>get()</code> or <code>put()</code> operations.

Usually, cache implementations include some kind of strategy for removing items from the cache in order to free up space — the most popular cache eviction strategies being: least frequently used (LFU) and least recently used (LRU).

Consider the <code>get()</code> operation of an LRU cache, for example: the expectation is to be able to fetch a record from the cache using its cache key in approximately constant time, and in the process, the record gets ranked as the most recently used record because it is the most recently accessed.

In order to meet the above stated expectation, a fast lookup of the cache key is required — and that is where a <code>Map</code> object or any other form of hash table shines. 
To maintain a proper ranking of recently accessed records, a priority queue can be used.

However, most implementations use a doubly-linked list instead, since it is capable of both removing the record from its current position in the list and re-inserting it to the head position of the list, all in constant time.

A minimalist implementation blueprint of a typical LRU cache could look somewhat like this (the full implementation details have been omitted for brevity):

interface ICache&lt;K, V&gt; { 
  get: (key: K) =&gt; V; 
  put: (key: K, data: V) =&gt; void; 
}

class LRUCache&lt;K, V&gt; implements ICache&lt;K, V&gt; { 
  /** 
   * A DLL is used to maintain the order of the items 
   * in the cache according to how recently they were 
   * used (accessed or added). 
   *
   * Using a DLL makes it possible to remove an item 
   * from any position in the list (in constant time). 
   */ 
  protected list = new DoublyLinkedList&lt;V&gt;();

  /** 
   * A Map object is used as a lookup table to check 
   * for the existence of a key in the cache with an 
   * average access time that is sublinear on the 
   * number of cache items (approximately constant 
   * time). 
   */ 
  protected table = new Map&lt;K, V&gt;();

  /** 
   * @param size {number} The number of items that 
   * can be stored in the cache. 
   */ 
  constructor(protected size: number) {}

  get(key: K): V {} 
  put(key: K, data: V): void {} 
}

<h3 id="mapsVsSetstopic-17">Graphical representation with map and set</h3>

Most connectivity problems are better solved when the problem data is represented as a graph, using either of two forms of graph representation:

Adjacency Matrix
Adjacency List

For most problems, an adjacency list representation should suffice — and for that, <code>Map</code> and <code>Set</code> objects can be used.

Most adjacency list implementations use arrays and/or linked lists, but it is also possible to use <code>Map</code> and <code>Set</code> objects. 
The <code>Map</code> object stores each vertex in the graph as its keys, with their corresponding list of neighboring vertices in <code>Set</code> objects as its values.

A typical implementation of an undirected graph represented as an Adjacency List (using <code>Map</code> and <code>Set</code> objects) should look somewhat like this:

interface IGraph&lt;V&gt; { 
  addVertex: (vertex: V) =&gt; void; 
  addEdge: (fromVertex: V, toVertex: V) =&gt; void; 
  removeVertex: (vertex: V) =&gt; void; 
  removeEdge: (fromVertex: V, toVertex: V) =&gt; void; 
}

class UndirectedGraph&lt;V&gt; implements IGraph&lt;V&gt; { 
  /** 
   * A Map object is used to map each vertex in the 
   * graph to a set of vertices that are connected 
   * to it. 
   */ 
  protected list = new Map&lt;V, Set&lt;V&gt;&gt;();

  addVertex(vertex: V): void { 
    if (!this.list.has(vertex)) { 
      // An array can be used to represent the set 
      // of vertices — but in this implementation, 
      // a Set object is used instead. 
      this.list.set(vertex, new Set&lt;V&gt;()); 
    } 
  }

  addEdge(fromVertex: V, toVertex: V): void { 
    this.addVertex(fromVertex); 
    this.addVertex(toVertex); 
    (this.list.get(fromVertex) as Set&lt;V&gt;).add(toVertex); 
    (this.list.get(toVertex) as Set&lt;V&gt;).add(fromVertex); 
  }

  removeVertex(vertex: V): void { 
    if (this.list.has(vertex)) { 
      for (const toVertex of this.list.get(vertex) as Set&lt;V&gt;) {
        this.removeEdge(vertex, toVertex); 
      }
      this.list.delete(vertex); 
    } 
  }

  removeEdge(fromVertex: V, toVertex: V): void { 
    if (this.list.has(fromVertex) &amp;&amp; this.list.has(toVertex)) { 
      (this.list.get(fromVertex) as Set&lt;V&gt;).delete(toVertex); 
      (this.list.get(toVertex) as Set&lt;V&gt;).delete(fromVertex); 
    } 
  } 
}

<h3 id="mapsVsSetstopic-18">Disjoint-sets and dynamic connectivity</h3>

A niche of connectivity problems can be solved using special data structures called disjoint-sets. 
A disjoint-set is used to maintain a set of elements (nodes) that are partitioned into a number of non-overlapping (disjointed) subsets, also known as connected components.

Disjoint-sets are structured in such a way as to efficiently perform two operations, namely:

<code>find</code>: checks for the subset an element or node belongs to
<code>union</code>: merges two subsets into a single subset; can also be used for detecting cycles in undirected graphs

The following Disjoint-Set implementation uses a <code>Map</code> object to maintain its non-overlapping subsets (the implementation is detailed):

interface IDisjointSet&lt;T&gt; { 
  find: (node: T) =&gt; T; 
  union: (nodeA: T, nodeB: T) =&gt; void; 
}

class DisjointSet&lt;T&gt; implements IDisjointSet&lt;T&gt; { 
  /** 
   * A Map object is used to link each node to the 
   * root of its corresponding connected component 
   * subset (using a disjoint-set data structure). 
   */ 
  protected subsets = new Map&lt;T, T | number&gt;();

  addNode(node: T): void { 
    if (!this.subsets.has(node)) { 
      this.subsets.set(node, -1); 
    } 
  }

  find(node: T): T { 
    let root = node;

    while (true) {
      const parent = this.subsets.get(root) as T;

      if (!this.subsets.has(parent)) {
        if (node !== root) {
          this.subsets.set(node, root);
        }

        return root;
      }

      root = parent;
    }
  }

  union(nodeA: T, nodeB: T): void { 
    const rootA = this.find(nodeA); 
    const rootB = this.find(nodeB);

    const sizeA = this.subsets.get(rootA) as number;
    const sizeB = this.subsets.get(rootB) as number;
    const sizeAB = sizeA + sizeB;

    if (sizeA &lt; sizeB) {
      this.subsets.set(rootB, rootA);
      this.subsets.set(rootA, sizeAB);
    } else {
      this.subsets.set(rootA, rootB);
      this.subsets.set(rootB, sizeAB);
    }
  }

  isConnected(nodeA: T, nodeB: T): boolean { 
    return this.find(nodeA) === this.find(nodeB); 
  }
}

<h3 id="mapsVsSetstopic-19">Conclusion</h3>

Maps and sets in JavaScript can come in very handy for quite a number of applications and when trying to solve a number of problems efficiently — especially when efficient lookups are required. 
In fact, they are specialized hash table implementations for JavaScript, akin to the <code>HashMap</code> and <code>HashSet</code> types in Java — albeit, with some subtle differences.

For safe garbage collection guarantees, consider using the even more restrictive <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap" target="_blank" rel="noopener"><code>WeakMap</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet" target="_blank" rel="noopener"><code>WeakSet</code> keyed collections.</a>
<h3 id="mapsVsSetstopic-20"><a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">LogRocket</a>: Debug JavaScript errors more easily by understanding the context</h3>

Debugging code is always a tedious task. 
But the more you understand your errors the easier it is to fix them.

<a href="https://logrocket.com/signup/" target="_blank" rel="noopener noreferrer">LogRocket</a> allows you to understand these errors in new and unique ways. 
Our frontend monitoring solution tracks user engagement with your JavaScript frontends to give you the ability to find out exactly what the user did that led to an error.

LogRocket records console logs, page load times, stacktraces, slow network requests/responses with headers + bodies, browser metadata, and custom logs. 
Understanding the impact of your JavaScript code will never be easier!

<h2>Introduction to Map Data Structure</h2>
https://flaviocopes.com/javascript-data-structures-map/
A <code>Map</code> is a collection of <code>key — value</code> pairs, similar to an object. 
It stores the <code>key — value</code> pairs in the insertion order.

We can create a <code>Map</code> by passing an iterable object whose elements are in the form of <code>key — value</code> (Eg. 
<code>[ [1,”one”], [2,”two”] ]</code> ), 
or you can create an empty <code>Map</code>, then insert entries.
<h3>Why we need Map if we have Object s</h3>
1. A Map is similar to Object, but any value can be used as key in maps, but keys in objects are only Strings and Symbols

<img class="lazy" data-src="https://miro.medium.com/max/1400/1*FeRuZyr7PZpgWVrLJATQCg.png">
2. The<code> key — value</code> pairs in <code>Map</code> maintains the insertion order, whereas Object don’t.

3. You can get the <code>size</code> of the <code>Map</code>, but we don’t have a built-in method to get size in Object (but we can do it manually).

4. Maps are iterable, whereas an Object is not iterable by-default.

5. Maps have additional methods not available to normal objects
<h3>Methods in Maps</h3>

<img class="lazy" data-src="https://miro.medium.com/max/1400/1*9qa6KOy0EtF53Wypx48PSQ.png">
Map cheatsheet

Example:
Different Ways to create maps

<img class="lazy" data-src="https://miro.medium.com/max/1400/1*4lCYor7BuJW3_gfCsIaLGQ.png">

2. Map methods
Let’s create simple Map:
// creating a map 
var fruits = new Map();
fruits.set('🍎', "Apple");
fruits.set('🍋', "Mango");
fruits; //{"🍎" => "Apple", "🍋" => "Mango"}
Map has a property <code>size</code> which returns the current Map size (total number of entries).

// size
fruits.size; // 2
<code>set(, value)</code> → Set the value for the key in the Map and returns the Map. 
If the key is already present in the map, then the value is overwritten.

// set(key , value) method
fruits.set( '🍇', "Grapes");
fruits; // {"🍎" => "Apple", "🍋" => "Mango", "🍇" => "Grapes"}
<code>get()</code> → Returns the value associated to the key, or returns undefined if there is no key on the Map that matches the passed key.
// get(key)
fruits.get('🍇'); // GRAPES.
fruits.get('🍊'); //undefined.
<code>delete()</code> → Delete the entry matching the key and returns true. 
If the key is not found in the map, then it returns false.
// delete(key)
fruits.delete('🍊') //false
fruits.delete('🍇'); // true
<code>has()</code> → Returns true if the map has the key provided, else return false.
//HAS(key)
fruits.has('🍇'); // true
fruits.has('🍊'); //false
<code>keys()</code> → Returns a new iterator that contains the keys in insertion order.
//keys
fruits.keys() // MapIterator {"🍎", "🍋"}
<code>values()</code> → Returns a new iterator that contains the values in insertion order.
// values
fruits.values() // MapIterator {"Apple", "Mango"}
<code>entries()</code> → Returns an iterator which has an array of [-value] pair in insertion order.
//entries --> returns key value pair
fruits.entries() // MapIterator {"🍎" => "Apple", "🍋" => "Mango"}
<code>clear()</code> → Delete all key-value pairs from the Map.
// clear
fruits.clear(); // deletes all elementfruits; // Map(0) {}
<h3>Things you should know about Map</h3>
You can use any value (object or function or primitive ) as a key in the <code>Map</code> . 
<code>Map</code> uses the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#Same-value-zero_equality" rel="noopener ugc nofollow" target="_blank">SameValueZero</a> algorithm. 
It is similar to strict equality (<code>===</code>) but the difference is that <code>NaN</code> is considered equal to <code>NaN</code> (i.e, NaN === NaN → true. In normal JS, this is not true. 
In this case <code>NaN</code> can be used as key and we don’t have any duplicate NaN).
var map = new Map()var obj = {};
var arr = [];
var nan = NaN;
var fun = function() {}map.set(obj, "object");
map.set(arr , "array");
map.set(fun, "function");
map.set(nan, "Wrong number");
map.keys(); // MapIterator {{…}, Array(0), ƒ, NaN}map.values(); // MapIterator {"object", "array", "function","Wrong number"}
<h3>Iterating through Map</h3>
Using <code>for…of</code>
// creating a map 
var fruits = new Map();
fruits.set('🍎', "Apple");
fruits.set('🍋', "Mango");
fruits; //{"🍎" => "Apple", "🍋" => "Mango"}

Method 1:
for(var [key, val] of fruits) { console.log(key, value);}
🍎 Apple
🍋 Mango

Method 4 --> using entriesfor (var [key, val] of 
fruits.entries()) {  console.log(key , val); }
🍎 Apple
🍋 Mango

Method 2 --> using keys
for(var key of fruits.keys()) {
  console.log(key, fruits.get(key)); }
🍎 Apple
🍋 Mango

Method 3 --> using valuesfor(var val of 
fruits.values()) {   console.log(val); }Apple Mango


<h2>Iterables</h2>
Iterable objects are objects that can be iterated over with <code>for..of</code>.
Technically, iterables must implement the <code>Symbol.iterator</code> method.

<h3>Iterating Over a String</h3>
You can use a <code>for..of</code> loop to iterate over the elements of a string:

for (const x of "W3Schools") {
  // code block to be executed
}

<h3>Iterating Over an Array</h3>
You can use a <code>for..of</code> loop to iterate over the elements of an Array:

for (const x of [1,2,3,4,5] {
  // code block to be executed
}

<h3>JavaScript Iterators</h3>
The <b>iterator protocol</b> defines how to produce a <b>sequence of values</b> from an object. 
An object becomes an <b>iterator</b> when it implements a <code>next()</code> method.
The <code>next()</code> method must return an object with two properties:

value (the next value)
done (true or false)

value
The value returned by the iterator (Can be omitted if done is true)

done
<i>true</i> if the iterator has completed
<i>false</i> if the iterator has produced a new value

<h3>Home Made Iterable</h3>
This iterable returns never ending: 10,20,30,40,.... Everytime <code>next()</code> is called:

// Home Made Iterable
function myNumbers() {
  let n = 0;
  return {
    next: function() {
      n += 10;
      return {value:n, done:false};
    }
  };
}

// Create Iterable
const n = myNumbers();
n.next(); // Returns 10
n.next(); // Returns 20
n.next(); // Returns 30

The problem with a home made iterable:
It does not support the JavaScript <code>for..of</code> statement. 

A JavaScript iterable is an object that has a <b>Symbol.iterator</b>.
The <code>Symbol.iterator</code> is a function that returns a <code>next()</code> function.
An iterable can be iterated over with the code: <code>for (const x of iterable) { }</code>

// Create an Object
myNumbers = {};

// Make it Iterable
myNumbers[Symbol.iterator] = function() {
  let n = 0;
  done = false;
  return {
    next() {
      n += 10;
      if (n == 100) {done = true}
      return {value:n, done:done};
    }
  };
}

Now you can use <code>for..of</code>

for (const num of myNumbers) {
  // Any Code Here
}

The Symbol.iterator method is called automatically by <code>for..of</code>.
But we can also do it "manually":

let iterator = myNumbers[Symbol.iterator]();

while (true) {
  const result = iterator.next();
  if (result.done) break;
  // Any Code Here
}

<h2>use this to return object content</h2>
<span onclick="alert($(this).text())">Think</span>
place it at end of file
$("k").click(function() { alert($(this).text()) });

<h2>DOM manipulation</h2>
&lt;body>
  &lt;div>
    &lt;span>Hello&lt;/span>
    &lt;span style="display: none;">Bye&lt;/span>
  &lt;/div>
&lt;/body>

const body = document.body
body.append("Hello world", "Bye")

const div = document.querySelector("div")
div.innerText = "Hello world"
div.innerHtml = "&lt;strong>Hello world&lt;/strong>"

body.append(div)

const spanHI = document.querySelector("#hi”)
const spanBye = document.querySelector("#bye”)

console.log(spanHi.getAttribute("title"))
console.log(spanHi.setAttribute("title", "sassssd"))
spanHi.id= "sassssd"
spanHi.title= "sassssd"
spanHi.removeAttribute("id")

console.log(spanHi.title)
console.log(spanHi.id)

spanBye.remove()
div.append(spanBye)

spanHi.dataset.longerName = "long"
spanHi.classList.toggle("long", true)
spanHi.style.color = "red"
spanHi.style.backgroundColor = "red"

<h2>load function after document loaded</h2>
&lt;body onkeypress="chkKey()" onload="docLoaded()">
function docLoaded() {
    let script = document.createElement('script');
    script.src = 'app.js';
    document.body.appendChild(script);
}
app.js:
window.scrollTo(0,(document.body.scrollHeight));
$("k").click(function() { alert($(this).text()) });

<h2>Get values from the "GET" parameters</h2>
var url_string = location.href;

var url_string = "https://williamkpchan.github.io/LibDocs/Random%20Charts.html?okvalue=12&shatvalue=120"

paramsArray = url_string.split('?')  // use ? to seperate
paramsArray.shift()

let params = {};
for (let i = 0; i < paramsArray.length; ++i) {
    let param = paramsArray[i].split('=', 2);
    if (param.length !== 2) continue;
    params[param[0]] = decodeURIComponent(param[1].replace(/\+/g, " "));
}
params


var url_string = location.href;
var url_string = "https://williamkpchan.github.io/LibDocs/Random%20Charts.html&okvalue=12"

paramsArray = url_string.split('?')  // note this has changed to array
paramsArray.shift()
if(paramsArray.length!=0){
  param = paramsArray[0].split('=')[1]; // paramsArray is still array
} else{
  initStkCode()
}

var url_string = location.href;
paramsArray = url_string.split('?')  // html?00981
paramsArray.shift()
if(paramsArray.length!=0){
  thecode = paramsArray[0]; // paramsArray is still array
} else{
    if (localStorage.getItem("randomcode") === null) {
      localStorage.randomcode = "07500";
    } else{
      thecode = localStorage.getItem("randomcode");
    }
}


<h2>JavaScript Redirect Methods</h2> 
You can redirect a web page via JavaScript using a number of methods. 
We will quickly list them and conclude with the recommended one.
 
In JavaScript, <b>window.location</b> or simply <b>location</b> object is used to get information about the location of the current web page (document) and also to modify it. 
The following is a list of possible ways that can be used as a <b>JavaScript redirect</b>:
// Sets the new location of the current window.
window.location = "https://www.example.com";

// Sets the new href (URL) for the current window.
window.location.href = "https://www.example.com";

// Assigns a new URL to the current window.
window.location.assign("https://www.example.com");

// Replaces the location of the current window with the new one.
window.location.replace("https://www.example.com");

// Sets the location of the current window itself.
self.location = "https://www.example.com";

// Sets the location of the topmost window of the current window.
top.location = "https://www.example.com";

Though the above lines of JS code accomplish a similar job in terms of redirection, they have slight differences in their usage. 
For example, if you use <b>top.location</b> redirect within an iframe, it will force the main window to be redirected. 
Another point to keep in mind is that <b>location.replace()</b> replaces the current document by moving it from the history, hence making it unavailable via the Back button of the browser.
 
It is better to know your alternatives but if you want a cross-browser compliant JavaScript redirect script, our recommendation will be to use the following in your projects:
 window.location.href = "https://www.example.com";

Simply insert your target URL that you want to redirect to in the above code. 
You can also check <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/location" target="_blank" rel="noopener noreferrer">this page</a> to read more about how window.location works. 
Now, let&rsquo;s continue with our examples.
 <h3>JavaScript Redirect: Redirect the Page on Page Load</h3> 
In order to redirect the user to another website immediately after your website is opened, you can use the following code at the top of your page, within the <b>&lt;head></b> element. 
Or, if you are using a separate <b>.js</b> file, put the following code into that file and remember to link to it from the head of your page.
 &lt;script>
  window.location.href = "https://www.example.com";
&lt;/script>

Simply replace the example URL with the one you want to redirect to. 
Note that, with this type of redirection, the visitors will not see your web page at all and be redirected to the target URL instantly.
 <h3>JavaScript Redirect: Redirect the Page After a Certain Period</h3> 
In order to redirect the user to another website after a certain time passes, you can use the following code:
 &lt;script>
setTimeout(function() {
  window.location.href = "https://www.example.com";
}, 3000);
&lt;/script>

The above function will redirect the page 3 seconds after it fully loads. 
You can change 3000 (3 x 1000 in milliseconds) as you wish.
 <h3>JavaScript Redirect: Redirect the Page After an Event or User Action</h3> 
Sometimes, you may want to send the user to another page after a certain event or action takes place, such as a button click, an option selection, a layout change, a form submission, a file upload, an image drag, a countdown timer expiration or things like that. 
In such cases, you can either use a condition check or assign an event to an element for performing the redirect. 
You can use the following two examples to give you a basic idea:
 &lt;script>
// Check if the condition is true and then redirect.
if ( ... 
) {
  window.location.href = "https://www.example.com";
}
&lt;/script>

The above code will do the redirection if the condition is true.
 &lt;script>
// onclick event is assigned to the #button element.
document.getElementById("button").onclick = function() {
  window.location.href = "https://www.example.com";
};
&lt;/script>

The above code will do the redirection when the user clicks the <b>#button</b> element.
 
This is how JavaScript redirect basically works. 
We hope that the above examples will help you while handling your web page redirects.

<h2>on "swiperight"</h2>
&lt;script src="https://code.jquery.com/mobile/1.5.0-alpha.1/jquery.mobile-1.5.0-alpha.1.min.js">&lt;/script>
$( "div.box" ).on( "swiperight", handleRight );
$( "div.box" ).on( "swipeleft", handleLeft );
function handleRight( event ){ $(".box").append(" right") }
function handleLeft( event ){ $(".box").append(" left") }


  $( "div.box" ).bind( "tap", tapHandler );
   function tapHandler( event ){
    $( event.target ).addClass( "tap" );
  }

  $( "div.box" ).bind( "taphold", tapholdHandler );
   function tapholdHandler( event ){
    $( event.target ).addClass( "taphold" );
  }

  $( "div.box" ).on( "swipe", swipeHandler );
  function swipeHandler( event ){
    $( event.target ).addClass( "swipe" );
  }


<h2>javascript fetch a file</h2>
fetch(urladdr)
  .then(x => x.text())
  .then(function(response) {
    alert(response);
  })


<h2>Hacking HTTP CORS</h2>
https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS
<div id="CORStoc" class="toc"><a href="#CORStopic-0" target="_self">Same Origin Policy (SOP)</a><br><a href="#CORStopic-1" target="_self">SOP variations</a><br><a href="#CORStopic-2" target="_self">HTTP CORS Fundamentals</a><br><a href="#CORStopic-3" target="_self">Simple Request</a><br><a href="#CORStopic-4" target="_self">Preflight HTTP Request</a><br><a href="#CORStopic-5" target="_self">CORS basic headers</a><br><a href="#CORStopic-6" target="_self">Allowing too much is not cool at all</a><br><a href="#CORStopic-7" target="_self">The Docker-based proposed scenario</a><br><a href="#CORStopic-8" target="_self">Project structure</a><br><a href="#CORStopic-9" target="_self">Docker images and network settings overview</a><br><a href="#CORStopic-10" target="_self">A glance at the Apache Server CORS rules</a><br><a href="#CORStopic-11" target="_self">Running the containerized environment</a><br><a href="#CORStopic-12" target="_self">Trusted Site</a><br><a href="#CORStopic-13" target="_self">Evil Site</a><br><a href="#CORStopic-14" target="_self">Playing with CORS rules using XHR and Fetch requests</a><br><a href="#CORStopic-15" target="_self">CORS rules for XHR requests</a><br><a href="#CORStopic-16" target="_self">CORS rules for Fetch requests</a><br><a href="#CORStopic-17" target="_self">Understanding the requests cycle in practice</a><br><a href="#CORStopic-18" target="_self">Bypassing CORS through proxy interception (Manual)</a><br><a href="#CORStopic-19" target="_self">Setting up your snoopy proxy tool</a><br><a href="#CORStopic-20" target="_self">Bypassing CORS by HTTP Response tampering</a><br><a href="#CORStopic-21" target="_self">Hacking homework</a><br><a href="#CORStopic-22" target="_self">Tips for bypassing the Alert script + JavaScript FETCH</a><br><a href="#CORStopic-23" target="_self">Automatic bypassing and other CORS interesting projects</a><br><a href="#CORStopic-24" target="_self">Concluding remarks</a><br></div></center>
https://infosecwriteups.com/hacking-http-cors-from-inside-out-512cb125c528
<h3 id="CORStopic-0">Same Origin Policy (SOP)</h3>

Before we get to the CORS matter, it is essential to comprehend an underlying concept of web resources access protection. 
I’m talking about the <b>Same Origin Policy</b>, also known for the acronym SOP.

As to avoid unauthorized use of resources by external parties, the browsers count on an origin-based restriction policy. 
Formally, the said external parties are identified by their origin (domain) and accessed through URLs.

A document held by a given <b>origin A</b> will only be accessible by other documents from the SAME <b>origin A</b>. 
This rule is valid if the SOP is effectively in place (and depends on the browser implementation). 
This policy aims to reduce the chances of a possible attack vector.

But let’s depict what an origin looks like. 
One origin could be understood as the tuple:

<b>&lt;schema (or protocol)&gt;</b> — <b>&lt;hostname&gt;</b> — <b>&lt;port&gt;</b>

So two URLs represent the same origin only if they share the same tuple. 
Examples of origin variations and categories for the URL `<b>http://hacking.cors.com/mr_robots.txt</b>`:

<img class="lazy" data-src="https://miro.medium.com/max/1312/1*zj6HKCKg3YRlF8k7vvnA9g.png">

Domain types differentiation

Additionally, keep in mind that the SOP allows inter-origin HTTP requests with GET and POST methods. 
But it forbids inter-origin PUT and DELETE. 
Besides that, sending custom HTTP headers is permitted only in the context of inter-origin requests, being denied to foreigners.

<h3 id="CORStopic-1">SOP variations</h3>

There are some different types of Same Origin Policy. 
In practice, they are applied under particular rules given the technology in place.

The primary SOP policy developed was towards the <b>DOM (Document Object Model) access</b>. 
It is a mechanism that handles JavaScript and other scripting languages’ ability to access DOM properties and methods across domains.

The <b>DOM access</b> is based mainly on the `document.domain` <b>DOM</b>’s property state. 
But the same is not valid for the <b>JavaScript’s XMLHttpRequest API,</b> which does not take `document.domain` property into account. 
For now, don’t worry too much about these details. 
We should be back to this subject soon.

So if we take SOP as a sandboxing concept, it becomes reasonable to have the same origin implementations for other web technologies as well. 
It is the case of <b>cookies, Java, old-R.I.P Flash</b>, and their respective SOP policy feature.

<h3 id="CORStopic-2">HTTP CORS Fundamentals</h3>

The SOP technology was certainly a considerable jump towards more secure web applications. 
But it applies the deny rule by default.

The true nature of the World Wide Web is that pages could communicate with other resources all across the network. 
Web applications are meant to access external resources.

So how do we relax the same-origin rules while maintaining the security access of restricted resources? You got it: <b>CORS</b>.

In simple terms, <b>Cross-Origin Resource Sharing</b> allows the pages from a specific domain/origin to consume the resources from another domain/origin. 
The consent of who can access a resource is the resource’s owner (server) responsibility.

The browser-server trust relationship takes form through a family of CORS HTTP Headers. 
In the average case, they are added to the HTTP requests and responses by the resource’s web server (like Nginx, Apache, IIS, etc.), by the application, or the browser. 
The CORS headers then instruct the soliciting browser whether or not to trust the origin and proceed with the response processing.

Let’s take a breath here. 
Note that the browser fully trusts the response returned from the server. 
Keep this in mind.

<h3 id="CORStopic-3">Simple Request</h3>

In contrast to Preflight requests, there are simple ones. 
<b>Simple requests </b>are those who respect the following conditions:

<img class="lazy" data-src="https://miro.medium.com/max/1312/1*9EzxYcrn8c9ZiHEfPjWNSQ.png">

Simple requests composition

When making asynchronous HTTP requests, we often use the already presented <b>XMLHttpRequest</b> or the new <b>Fetch</b> JavaScript APIs.

<h3 id="CORStopic-4">Preflight HTTP Request</h3>

Sometimes a <b>preflight HTTP request</b> is launched by the browser. 
It intents to query the server about what CORS attributes are authorized and supported by it. 
However, this does not change the trustiness relationship between server and browser.

The preflight HTTP request (which takes the form of an <b>HTTP OPTIONS request</b>) results in an equally trusted HTTP response. 
The only difference resides in the headers, that indicate the browser how to proceed to get the intended cross-origin resource.

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*9CZmsSo4w5VBzBFt">
Pre-request flight flow for deletion of <b>avatar.org</b>
As we move to the hands-on sections of this article, this will get more palatable.

<h3 id="CORStopic-5">CORS basic headers</h3>

Achieving origin control by the CORS involves the following headers’ family:

<img class="lazy" data-src="https://miro.medium.com/max/1256/1*tgLKBLQ6XAtcLIFREtZmZw.png">

CORS headers family and their respective HTTP type

The headers marked with <b>YES</b> at the “<b>Used for Preflight HTTP </b>” column play crucial preflight functions.

It goes from denoting which specific headers (<b>Access-Control-Allow-Headers</b>) and HTTP methods (<b>Access-Control-Allow-Methods</b>) are allowed, the maximum amount of seconds the browser should cache the Preflight request (<b>Access-Control-Max-Age</b>), request source (<b>Origin</b>), to the allowance (<b>Access-Control-Allow-Credentials</b>) of cookies to be sent by browsers in the actual request.

In the overall context, the <b>Access-Control-Allow-Origin (ACAO) </b>stands as the most relevant header regarding cross-origin authorization. 
Through this header, the server is able to tell the browser which domains it should trust.

This great power comes with significant responsibilities, though.

<h3 id="CORStopic-6">Allowing too much is not cool at all</h3>

It is clear to us that CORS is a useful way to extend SOP policies. 
However, we should take into account the impact of a full nonrestrictive rule. 
Let’s take the following statement:

<b>Access-Control-Allow-Origin: *</b>

The above header means that every origin could access the desired resource. 
This would be equivalent to the earlier configuration of older browsers before SOP was in place. 
But be aware of the other side of the story, as cautiously depicted by the application security literature.
<blockquote>
“Obviously there might be cases where a wildcard value for the Access-Control-Allow-Origin <b>isn’t insecure</b>. 
For instance, if a permissive policy is only used to provide content that <b>doesn’t contain</b> sensitive information.”

The Browser Hacker’s Handbook 2nd Ed. 
— Chapter 4 Bypassing the Same Origin Policy
</blockquote>
You should be careful with the wildcards, though. 
Indeed, the recommended approach is make the access permission explicit for the authorized origins. 
If the server does not provide the CORS headers whatsoever, the browsers will assume the <b>Same Origin Policy (SOP)</b> posture.

<h3 id="CORStopic-7">The Docker-based proposed scenario</h3>

First, lets clone the `<b>hacking-cors</b>` repository so we can get this party started!

$ git clone git@github.com:lvrosa/hacking-cors.git

<img class="lazy" data-src="https://miro.medium.com/max/1370/0*KvTctQkLweLQfYTj">

Tree directory representation of the hacking-cors docker project

The above structure breaks down the docker containers and files that compose the server images.

The `<b>node_modules</b>` directory (omitted from the `<b>tree</b>` command output above) is pushed to the `<b>hacking-cors</b>` repository as well. 
It has a short size. 
However, if you have any problems regarding JavaScript dependencies, please run the `npm` tool at the project root directory.

$ cd hacking-cors; npm install

It is also crucial to have `<b>docker</b>` and ` installed on your system. 
The docker-compose file uses version 3 format. 
My current versions for both dependencies are:

<img class="lazy" data-src="https://miro.medium.com/max/1006/0*Qvcgo-fa95YjVp_G">

Docker and Docker Compose versions

<h3 id="CORStopic-8">Project structure</h3>

We have two distinct docker projects. 
They are represented by their respective configuration <b>Dockerfile</b> at the root directory.

<img class="lazy" data-src="https://miro.medium.com/max/1158/1*rhLfU0SXzYidnD81P_7MaQ.png">

Docker files respective to each web server

Interesting files are at the `<b>static`</b> and `<b>img`</b> directories. 
They hold the resources that will eventually be solicited by other web pages. 
JavaScript files are under the `<b>static`</b> directory. 
You can open them in your favorite code editor and play around.

The `<b>img`</b> directory from the <b>Trusted Site</b> stores the `<b>owasp_bug.png`</b> resource. 
In our experiment, this image resource will be requested by the <b>Evil Site,</b> which will then try to load it. 
The same applies to the `<b>static/hello_script.js` </b>file, but to execute/evaluate the script content, and not load an image.

<h3 id="CORStopic-9">Docker images and network settings overview</h3>

<img class="lazy" data-src="https://miro.medium.com/max/1214/0*UsBn9vTzlncv6ZI9">

docker-compose.yml content

Take a look at the `<b>docker-compose.yml`</b> file above. 
We can identify important things about the environment like:

We’ll create two containers (namely `<b>evil_site`</b> and `<b>trusted_site`</b>)

The containers are attached to the `<b>cors_hack_net</b>` bridged network interface

The `<b>cors_hack_net</b>` interface determines the subnet by the <b>CIDR 10.5.0.0/16</b>

As a useful link to the containers’ network addresses, I’d recommend setting your static lookup table for hostnames file (`<b>/etc/hosts</b>`) to the following settings:

<img class="lazy" data-src="https://miro.medium.com/max/1176/0*Rojj1rJ_tasNTWqg">

/etc/hosts file mapping

<h3 id="CORStopic-10">A glance at the Apache Server CORS rules</h3>

★ Identify the <b>Trusted Site</b> container’s name:

<img class="lazy" data-src="https://miro.medium.com/max/1228/0*8H637WHubCaU4JBs">
docker-compose ps output

★ Log into the container:

$ docker exec -it <b>trusted_site</b> /bin/bash

★ Dump the Apache `.<b>htaccess`</b> configuration file to the screen:

<img class="lazy" data-src="https://miro.medium.com/max/1192/0*MPIsycKL6vIaYlO9">

.htaccess Apache CORS extension rules

As highlighted in the picture above, the Apache Web Server will serve the <b>ACAO (Access-Control-Allow-Origin)</b> header when the file-matching rule applies. 
In other words, if the web browser requests an image (<b>.gif, .png, .ico</b>, etc.) or even a JavaScript <b>.js</b> file, the resource’s content will only be authorized to be loaded/consumed by the page if the origin matches `<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>`.

Note that the `<b>.htaccess</b>` file is sourced at `<b>htdocs</b>` directory, thus impacting all the files under its substructure.

<h3 id="CORStopic-11">Running the containerized environment</h3>

To get these environment live, follow the steps:

★ Build the container from the root project directory

$ docker-compose build — no-cache; (note the double minus before the no-cache argument)

★ Up the containers through `docker-compose`

$ docker-compose up

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*UQgjrrZ2_-DdLbxj">
docker-compose up output

If you run into any trouble with the docker environment, I suggest you clean it by killing and removing the current active docker images. 
Just ensure you don’t have other containers that should have their state saved before being killed.

$ docker kill $(docker ps -a -q)

$ docker rm $(docker ps -a -q)

Well, I hope everything has been ok so far. 
Let’s take a look at the two created web servers. 
Open your browser and drive to the `<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>` and `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>`.
<h3 id="CORStopic-12">Trusted Site</h3>

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*6YbCYaPb7so6iutE">
Trusted Site Web Server menu
<h3 id="CORStopic-13">Evil Site</h3>

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*omcGP-PUR8J2tPZz">
Evil Site Web Server Menu

<h3 id="CORStopic-14">Playing with CORS rules using XHR and Fetch requests</h3>

<h3 id="CORStopic-15">CORS rules for XHR requests</h3>

The <b>XMLHttpRequest Standard</b><a href="https://xhr.spec.whatwg.org/" rel="noopener ugc nofollow" target="_blank">[11]</a> defines an API that provides scripted client functionality for transferring data between a <b>client</b> and a <b>server</b>.

Regarding its security aspects, we should be aware of some warning facts, as stated by the <b>Browser Security Handbook, part2</b><a href="https://code.google.com/archive/p/browsersec/wikis/Part2.wiki" rel="noopener ugc nofollow" target="_blank">[12]</a>.
<blockquote>
“The set of security-relevant features provided by XMLHttpRequest, and not seen in other browser mechanisms, is as follows:
</blockquote>
The ability to specify an arbitrary HTTP request method (via the <b>open()</b> method),

The ability to set custom HTTP headers on a request (via <b>setRequestHeader()</b>),

The ability to read back full response headers (via <b>getResponseHeader()</b> and <b>getAllResponseHeaders()</b>),

<blockquote>
The ability to read back the full response body as a JavaScript string (via <b>responseText</b> property).

Since all requests sent via XMLHttpRequest include a browser-maintained set of cookies for the target site and given that the mechanism provides a far greater ability to interact with server-side components than any other feature available to scripts, <b>it is extremely important to build in proper security controls.”</b>
</blockquote>
It’s essential to observe the following browser protections against origin tampering upon handling XHR requests.

When trying to <b>change/poison</b> the `<b>origin</b>` header via <b>setRequestHeader(), the original header is preserved.</b>

When trying to <b>change/poison </b>the additional headers (passed as arguments to the <b>xhr.send()</b>), <b>the original header is preserved.</b>

<h3 id="CORStopic-16">CORS rules for Fetch requests</h3>
<blockquote>
“Numerous APIs provide the ability to fetch a resource, e.g. 
<b>HTML’s img</b> and <b>script</b> <b>element</b>, <b>CSS’ cursor</b> and <b>list-style-image</b>, the <b>navigator.sendBeacon()</b> and <b>self.importScripts()</b> JavaScript APIs. 
<b>The Fetch Standard</b> provides a unified architecture for these features so they are all consistent when it comes to various aspects of fetching, such as redirects and the <b>CORS</b> protocol.” — <a href="https://fetch.spec.whatwg.org/" rel="noopener ugc nofollow" target="_blank">https://fetch.spec.whatwg.org/</a>
</blockquote>
Although The Fetch Standard supersedes the `origin` element semantics (originally defined in <b>The Web Origin Concept</b> — RFC6454), the same effect of the XHR tampering protections applies here.

When trying to <b>change/poison</b> the `<b>origin</b>` header via <b>fetch()</b> arguments, <b>the original header is preserved.</b>

<h3 id="CORStopic-17">Understanding the requests cycle in practice</h3>

Now that you already know the fundamentals of <b>SOP, CORS, XHR</b> and <b>Fetch</b> requests, we’re ready to play with the proposed scenario.

Both <b>Trusted Site</b> and <b>Evil Site</b> pages have similar menus. 
Firstly, try the four requests options of the <b>Trusted Site</b>.

Note that the requested resources, the <b>OWASP bug image</b> or the script that displays “<b>All your base belong to us ;D</b>”, are successfully loaded and consumed by the page. 
This is a classical case of local resources invoked by one page belonging to the same domain.

<img class="lazy" data-src="https://miro.medium.com/max/846/0*Nx9KI78YER8jrhVc">

The hello_script.js’ content executed after one same domain page request

Now, let’s change the scope to the <b>Evil Site</b>.

Open the `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>` website

Bring up the <b>Web Developer Tools</b> window (press <b>F12</b> in Firefox or Chrome)

Click the anchor link associated with the <b>OWASP image + JavaScript XHR</b>

Click the anchor link associated with the <b>Alert script + JavaScript Fetch</b>

Get your focus on the Console tab from <b>Web Developer Tools</b>. 
We should be looking at something like the screen below.

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*YJNGyvmi1zq2s2pf">

The third and fourth steps generate the messages from the screen above. 
They are transcripted below for accessibility purposes.
<blockquote>
<b>Cross-Origin Request Blocked</b>: The Same Origin Policy disallows reading the remote resource at <a href="http://trustedsite.com/img/owasp_bug.png." rel="noopener ugc nofollow" target="_blank"><b>http://trustedsite.com/img/owasp_bug.png</b>.</a> (Reason: CORS header ‘Access-Control-Allow-Origin’ does not match ‘<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>’).

<b>Cross-Origin Request Blocked</b>: The Same Origin Policy disallows reading the remote resource at <a href="http://trustedsite.com/static/hello_script.js." rel="noopener ugc nofollow" target="_blank"><b>http://trustedsite.com/static/hello_script.js</b>.</a> (Reason: CORS header ‘Access-Control-Allow-Origin’ does not match ‘<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>’).
</blockquote>
From here, it’s possible to understand why the browser has prohibited the requested resource. 
Remember the <b>Apache Server .htaccess </b>configuration, which adds the <b>ACAO (Access-Control-Allow-Origin) </b>CORS header to specific HTTP responses (image files and <b>.js</b> scripts).

Now, we are going to investigate the requests in more detail. 
Click the <b>Network</b> tab from the <b>Web Developer Tools</b>. 
Then, select the <b>OPTIONS</b> request for the `<b>hello_script.js</b>` resource. 
On the right side of the screen, you should see the following HTTP request and response.

<img class="lazy" data-src="https://miro.medium.com/max/1002/0*UAvaat5BKGYeiEdZ">

OPTIONS HTTP request and response for hello_script.js resource

Take note of the `<b>Origin</b>` header from above. 
It reads `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>`. 
But if we dive into the `<b>script_fetch.js</b>` implementation of the <b>Evil Site</b>, something stands out about the `<b>Origin</b>` header.

<img class="lazy" data-src="https://miro.medium.com/max/1096/0*MPPcUg2plhAvpW6Q">

`<b>evil_site_public_html/static/script_fetch.js</b>` content

Although we try to overlap the `<b>Origin</b>` header (line 7) with the authorized address of <b>Trusted Site</b>‘s domain — `<a href="http://trustedite.com" rel="noopener ugc nofollow" target="_blank">http://trustedite.com</a>`, the Fetch API implemented by the browser prevents this from taking effect.

That’s why we see `<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank">http://evilsite.com</a>` as `<b>Origin</b>` in the <b>Web Developer Tools’ Network</b> tab — HTTP OPTIONS request.

<h3 id="CORStopic-18">Bypassing CORS through proxy interception (Manual)</h3>

It’s been a long road so far. 
So if you made it here, it’s time to put some salt in the soup.

The main principle behind the <b>CORS</b> (and policies like CSP — Content Security Policy) is the trust-based relationship between browser and web server. 
The web server instructs the web browser about which domains it can further trust. 
In practice, the HTTP security headers set this instruction.

Now, let’s think from a malicious perspective. 
To bypass the <b>CORS</b> rules, the attacker has to <b>intercept</b> the <b>server’s HTTP response</b>, which contains the <b>CORS ACAO (Access-Control-Allow-Origin</b>)<b> </b>header. 
Secondly<b>,</b> he/she changes its value to reflect the attacker’s page origin or to allow arbitrary domains (using the character *).

When it’s said <b>“to intercept”</b>, it can be a proxy server filtering the HTTP request-response cycle automatically (see the next section for more on this). 
Or a manual approach through a proxy tool like <b>Burp Suite</b>, as we will do right after.

<h3 id="CORStopic-19">Setting up your snoopy proxy tool</h3>

If you are already familiarized with proxy tools like ZAP, Burp Suite, feel free to move to the next section. 
Here we are going to use <b>Burp Suite Community</b><a href="https://portswigger.net/burp/releases/professional-community-2020-9-2" rel="noopener ugc nofollow" target="_blank">[14]</a> from PortSwagger.

Install the Burp Suite according to your platform/architecture and run it.

★ At the <b>Options</b> tab, edit the <b>Interface</b> column at the <b>Proxy Listeners</b> settings as below (“<b>127.0.0.1:10001</b>”):

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*gMvDXNllGvHTeHYV">

★ At the same tab, set the <b>Intercept Client Requests </b>settings as following:

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*f65nMVYn6AKZRCrs">

★ Still at the <b>Options</b> tab, set the <b>Intercept Server Responses</b> settings as following:

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*tOizoXyNERD00u71">

★ Ensure that the “<b>Intercept is on</b>” button from <b>Intercept</b> tab is <b>active</b>

<img class="lazy" data-src="https://miro.medium.com/max/1350/0*9tMMwXZcQiaSzRsc">

Finally, on your browser, you will configure it to pass the requests through our proxy. 
Note that the proxy is listening on <b>port 10001.</b> Here we have two configuration options. 
I usually set my proxies using the <b>FoxyProxy</b> extension<a href="https://getfoxyproxy.org/" rel="noopener ugc nofollow" target="_blank">[15]</a>. 
But you can do it manually by the Network Settings<a href="https://support.mozilla.org/en-US/kb/connection-settings-firefox" rel="noopener ugc nofollow" target="_blank">[16]</a> from your browser.

<img class="lazy" data-src="https://miro.medium.com/max/1342/0*yCgRPt-GUjK2oY7s">

My Firefox’s FoxyProxy burp proxy settings

Ok, that’s all. 
We’re ready to go.

<h3 id="CORStopic-20">Bypassing CORS by HTTP Response tampering</h3>

★ Open the <b>Evil Site </b>(`<a href="http://evilsite.com" rel="noopener ugc nofollow" target="_blank"><b>http://evilsite.com</b></a>`)

As previously observed, resources from the <b>Trusted Site</b> requested by the <b>Evil Site</b> are not authorized to be consumed by the corresponding page. 
It results from the fact that the <b>CORS ACAO (Access-Control-Allow-Origin)</b> header only allows the `<a href="http://trustedsite.com" rel="noopener ugc nofollow" target="_blank">http://trustedsite.com</a>` domain.

★ <b>Activate</b> your Burp proxy at your browser

<img class="lazy" data-src="https://miro.medium.com/max/744/0*HBblbnNI6wUEjhGf">

★ Click/request <b>OWASP image</b> resource <b>via XHR Request</b>

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*gd5GoLrrMeywtMx4">

Stop and look to the <b>Burp Suite dialog</b> respective to the <b>HTTP Request</b>

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*NUOGhcOm1C4skenP">

★ Proceed with the request without further edition by clicking in “<b>Forward</b>”

★ Stop at the <b>HTTP Response</b> which contains the <b>CORS headers</b>

<img class="lazy" data-src="https://miro.medium.com/max/1332/0*scTInJZfSpPJEVwI">

★ Edit the <b>CORS ACAO</b> header value to `<b>*</b>`

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*yiNlr2h7rj3t3cvv">

★ <b>Submit</b> the response to the browser by clicking in “<b>Forward</b>”

★ The protected resource (OWASP bug image) content is <b>displayed (</b>note the absence of the CORS error message):

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*qRpaKs3zVTyO6riS">

<h3 id="CORStopic-21">Hacking homework</h3>

In the earlier scenario, we intercepted and tampered with one JavaScript XHR request via Burp proxy. 
One important aspect of this outside the box approach is to analyze the HTTP request-response cycle thoroughly. 
Which headers are demanded and what error messages you got at your browser console when they are missing or misconfigured.

Now it’s time to let you apply by yourself the knowledge exposed ‘till here. 
The next section will also present some hints about the CORS bypassing for the <b>Alert script + JavaScript FETCH </b>combination.

Since the sky’s the limit, feel free to try the bypassing against the remaining options from the <b>Evil Site</b> menu.
<h3 id="CORStopic-22">Tips for bypassing the Alert script + JavaScript FETCH</h3>
Besides changing the <b>Access-Control-Allow-Origin</b> header, you will also have to add the <b>Access-Control-Allow-Headers</b> in the HTTP OPTIONS request (use the Add button from the Burp request edit dialog).

This is necessary because the client (the <b>.js</b> script which launches the XHR request) adds the headers `<b>cache-control</b>` and `<b>pragma</b>` in the subsequent GET request by default. 
So you will want to reflect this in the <b>HTTP OPTIONS response</b>.

Remember, here we have a <b>HTTP Preflight</b> scenario (review the Preflight HTTP Request section when in doubts), where a HTTP OPTIONS request precedes the actual resource retrieval request.

<img class="lazy" data-src="https://miro.medium.com/max/1222/0*_gLYQy-CrptUnEux">

<b>HTTP Options response</b> edited to reflect the CORS headers for bypassing

<img class="lazy" data-src="https://miro.medium.com/max/1200/0*V-URxmvjcoT-HQBi">

<b>HTTP GET response</b> from <b>`hello_script.js</b>` resource retrieval (note the ACAO CORS header)

<img class="lazy" data-src="https://miro.medium.com/max/1400/0*VJVL1dpVj1CWKwtC">
<b>Successful</b> CORS hacking get us the nice dialog above

<h3 id="CORStopic-23">Automatic bypassing and other CORS interesting projects</h3>

In the previous section, we saw how to bypass the CORS rules protection manually. 
However, this is not very efficient from a practical standpoint.

One feasible way to automate the bypassing process is by deploying a proxy server like <b>CORS Anywhere</b> API. 
The proxy server will act as an intermediary, filtering the request and response headers to reflect the allow and deny rules specified at proxy configuration time.

Please, refer to the project’s Github page<a href="https://github.com/Rob--W/cors-anywhere" rel="noopener ugc nofollow" target="_blank">[18]</a> for more details and precautions when setting a proxy facing the web (be careful with open proxies, friend). 
You can test the live API here<a href="https://robwu.nl/cors-anywhere.html" rel="noopener ugc nofollow" target="_blank">[19]</a>.

<h3 id="CORStopic-24">Concluding remarks</h3>

If you’ve got this far, congratulations. 
HTTP Headers by itself is a very vast CORStopic, as the protocol tries to evolve to get close to web applications reality. 
This reality becomes more and more pervasive, especially with the popularization of APIs through technologies like REST.

The set of CORS headers are intricate and full of nuances. 
When implementing a solution that deals with inter-domain communication, pay attention to the common pitfalls that can arise. 

The final message about CORS and its weaknesses is that the trust between browser and application should be explicitly guaranteed by secure configurations. 
The right choice for which AJAX method and CORS headers to deploy will positively impact your APIs’ overall security.

Remember our four proposed resource consumption scenarios. 
They are simple. 
Indeed, there are other options and combinations for resource sharing. 
But maybe (and I hope we got there) the theory and practice exposed here can be taken as a foundation to design more complex and secure by-default web applications.

<h2>crossorigin="anonymous"</h2>
script src="https://stackoverflow.com/foo.js" crossorigin="anonymous"
The "anonymous" keyword means that there will be no exchange of user credentials via cookies, client-side SSL certificates or HTTP authentication

<h2>array techinque</h2>
months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),



<h2>GlobalTimezone</h2>
"US": -13:00 美国
"CA": -13:00 加拿大
"UK": -08:00 英国
"DE": -07:00 德国
"FR": -07:00 法国
"IT": -07:00 意大利
"PT": -08:00 葡萄牙
"ES": -07:00 西班牙
"CH": -07:00 瑞士
"AU": +03:00 澳大利亚
"NZ": +05:00 新西兰
"CN": +00:00 北京时间
"JP": +01:00"};//东京时间
function getGlobalTimezone(__stringArea) {
	return __stringArea in GlobalTimezone ? GlobalTimezone[__stringArea].replace(":", .") * 1 : 0;
}


<h2>Guide To Server-Sent Events</h2>
https://www.html5rocks.com/en/tutorials/eventsource/basics/
<div id="Server-Senttoc" class="toc"><a href="#Server-Senttopic-0" target="_self" onclick="jumpto(0)">Server-Sent Events</a>,  <a href="#Server-Senttopic-1" target="_self" onclick="jumpto(1)">The API</a>,  <a href="#Server-Senttopic-2" target="_self" onclick="jumpto(2)">Server-Side Implementation</a>,  <a href="#Server-Senttopic-3" target="_self" onclick="jumpto(3)">Client-Side Implementation</a>,  <a href="#Server-Senttopic-4" target="_self" onclick="jumpto(4)">Putting It All Together</a>,  <a href="#Server-Senttopic-5" target="_self" onclick="jumpto(5)">Custom Event Types</a>,  <a href="#Server-Senttopic-6" target="_self" onclick="jumpto(6)">Auto Reconnect</a>,  <a href="#Server-Senttopic-7" target="_self" onclick="jumpto(7)">Last-Event-Id Header</a>,  <a href="#Server-Senttopic-8" target="_self" onclick="jumpto(8)">Browser Support</a>,  <a href="#Server-Senttopic-9" target="_self" onclick="jumpto(9)">Sever-Sent Events vs. WebSockets</a>,  </div></center>

When it comes to developing an application that enables real-time operations, the first thing that comes to mind is WebSockets, which is fine, but there are other options that need to be considered.

One of them is <strong>Server-Sent Events</strong>, which enable a unidirectional communication flow between server and client.

<h3 id="Server-Senttopic-0">Server-Sent Events</h3>
<strong>Server-Sent Events</strong> is a server push technology that allows a client to receive automatic updates from the server via an HTTP connection.

They are very easy to implement, but there are some important things you should know before choosing them for your application:

<li>The technology is based on the plain HTTP</li>
<li>Allows only unidirectional data flow (as already mentioned)</li>
<li>It is limited to pure text data, no binaries allowed</li>

<h3 id="Server-Senttopic-1">The API</h3>
The Server-Sent Event API is contained in the <strong>EventSource</strong> interface.

<h4>Open a connection (same domain)</h4>
To open the connection to a server, create a new EventSource object with the URL of the script that generates the events:

<code>const eventSource = new EventSource("/api/events");</code>

<h4>Open a connection (other domain)</h4>
If the URL passed to the EventSource is on the other domain, a second parameter can be specified and a <strong>withCredentials</strong> property can be set to <strong>true</strong>, which means that the Cookie will be sent together:

<code>const eventSource = new EventSource("http://localhost:8000/api/events", { withCredentials: true });</code>

<h4>Listen for messages</h4>
Once the connection is instantiated, we need to listen to the events coming from the server:

<code>eventSource.addEventListener("message", (event) =&gt; {
  // "event.data" is a string
  const data = JSON.parse(event.data);
  
  // Prints whatever was sent by the server
  console.log(data);
});</code>

<strong>Important note:</strong> As the server only sends text data, we have to <strong>stringify</strong> it on the server-side and <strong>parse</strong> it on the client.

<h4>Listen for errors</h4>
If an error occurs (network timeout or something), an <strong>error</strong> event is generated and we can listen for it:

<code>eventSource.addEventListener("error", (error) =&gt; {
  // Prints the information about an error
  console.log(error);
});</code>

<h4>Listen for an open connection</h4>
When the connection is opened, an <strong>open</strong> event is generated and we can listen for it as well:

<code>eventSource.addEventListener("open", (event) =&gt; {
  // Prints the information about an event
  console.log(event);
});</code>

<h4>Check the state of the connection</h4>
The state of the connection is stored in the <strong>readyState</strong> property of the EventSource:

<li>0 - EventSource.CONNECTING</li>
<li>1 - EventSource.OPEN</li>
<li>2 - EventSource.CLOSED </li>

<code>const connectionState = eventSource.readyState;</code>

<h4>Close the connection</h4>
When the connection between the server and the client interrupts, it is automatically restarted. 

However, it can be terminated with the <strong>close</strong> method:

<code>eventSource.close();</code>

<h3 id="Server-Senttopic-2">Server-Side Implementation</h3>
To establish a connection with the client, we have to send <strong>200</strong> status code together with the <strong>Content-Type: text/event-stream</strong> and <strong>Connection: keep-alive</strong> headers.

Let's take a look at the complete example with Node.js and explain each line of code in the comment above:

<code>const express = require("express");
const bodyParser = require("body-parser");
const cors = require("cors");

const app = express();

const PORT = 3000;

// Store all connected clients
let clients = [];

const addSubscriber = (req, res) =&gt; {
  // Set necessary headers to establish a stream of events
  const headers = {
    "Content-Type": "text/event-stream",
    Connection: "keep-alive",
  };
  res.writeHead(200, headers);

  // Add a new client that just connected
  // Store the id and the whole response object
  const id = Date.now();
  const client = {
    id,
    res,
  };
  clients.push(client);

  console.log(`Client connected: ${id}`);

  // When the connection is closed, remove the client from the subscribers
  req.on("close", () =&gt; {
    console.log(`Client disconnected: ${id}`);
    clients = clients.filter((client) =&gt; client.id !== id);
  });
};

const notifySubscribers = (message) =&gt; {
  // Send a message to each subscriber
  clients.forEach((client) =&gt;
    client.res.write(`data: ${JSON.stringify(message)}\n\n`)
  );
};

// Add a new message and send it to all subscribed clients
const addMessage = (req, res) =&gt; {
  const message = req.body;

  // Return the message as a response for the "/message" call
  res.json(message);

  return notifySubscribers(message);
};

// Get a number of the clients subscribed
const getSubscribers = (_req, res) =&gt; {
  return res.json(clients.length);
};

app.use(cors());
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({ extended: false }));

// Define endpoints
app.get("/subscribe", addSubscriber);
app.post("/message", addMessage);
app.get("/status", getSubscribers);

// Start the app
app.listen(PORT, () =&gt; {
  console.log(`App listening on port ${PORT}`);
});</code>

The main purpose of this code is to track all connected clients and inform them about the data sent to the <strong>/message</strong> endpoint.

<strong>Important note:</strong> <code>\n</code> does a line break. <code>\n\n</code> means the end of the message, do not forget to add that.

<h3 id="Server-Senttopic-3">Client-Side Implementation</h3>
On the client-side, we create a simple React component using the EventSource API to connect to the event stream and display the real-time data:

<code>const App = () =&gt; {
  const [data, setData] = useState([]);

  useEffect(() =&gt; {
    // Subscribe to the event stream
    const eventSource = new EventSource("http://localhost:3000/subscribe");
    eventSource.addEventListener("message", handleReceiveMessage);
    return () =&gt; {
      // Remove event listener and close the connection on unmount
      eventSource.removeEventListener("message", handleReceiveMessage);
      eventSource.close();
    };
  }, []);

  // Get the message and store it in the state
  const handleReceiveMessage = (event: any) =&gt; {
    const eventData = JSON.parse(event.data);
    setData((data) =&gt; data.concat(eventData));
  };

  // Send 5 random chars to the server
  const handleSendMessage = () =&gt; {
    axios.post("http://localhost:3000/message", {
      message: generateRandomChars(5),
    });
  };

  return (
    &lt;div style={{ padding: "0 20px" }}&gt;
      &lt;div&gt;
        &lt;h4&gt;Click to send a message&lt;/h4&gt;
        &lt;button onClick={handleSendMessage}&gt;Send&lt;/button&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;h4&gt;Message List&lt;/h4&gt;
        &lt;p&gt;Number of messages: {data.length}&lt;/p&gt;
        {data.map((item, index) =&gt; (
          &lt;div key={index}&gt;{item.message}&lt;/div&gt;
        ))}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};</code>

<h3 id="Server-Senttopic-4">Putting It All Together</h3>
To see our example in action, start the client (your start script may look different):

<code>yarn start</code>

And the server:

<code>node server.js</code>

You should see the app running:

<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-11.18.44.png" alt="Client-Side App" title="Client-Side App">

And the server:

<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-11.13.50.png" alt="Server-Side App" title="Server-Side App">

Notice the log <strong>Client connected: 1607163222261</strong> which means that the connection has been established and we can use the channel to send events.

Click on the <strong>Send</strong> button on the UI (which <strong>POST</strong>s 5 random characters to the <strong>/message</strong> endpoint) and notice how they appear in the list:

<img class="lazy" data-src="https://vhudyma-blog.eu/img/ezgif.com-gif-maker-6-.gif" alt="Working App" title="Working App">

<h3 id="Server-Senttopic-5">Custom Event Types</h3>
The default event type used by Server-Sent Events is a <strong>message</strong>.

A custom event can be sent by specifying the <strong>event</strong> at the start:

<code>client.res.write(`event: join\ndata: ${JSON.stringify(message)}\n\n`);</code>

And then the client can listen for this event:

<code>eventSource.addEventListener("join", handleReceiveMessage);</code>

<h3 id="Server-Senttopic-6">Auto Reconnect</h3>
If the server crashes or the connection is lost, the <strong>EventSource</strong> tries to reconnect, we do not need to worry about it. 

There is usually a delay of a few seconds between reconnections:

<img class="lazy" data-src="https://vhudyma-blog.eu/img/ezgif.com-gif-maker-5-.gif" alt="Auto Reconnect" title="Auto Reconnect">

The server can specify a recommended delay by specifying the <strong>retry</strong> at the beginning of an event:

<code>// Retry each 5 seconds
client.res.write(`retry:5000\ndata: ${JSON.stringify(message)}\n\n`);</code>

If the browser knows that there is no Internet connection at the moment, it will try again to reconnect once the Internet connection is established.

<h3 id="Server-Senttopic-7">Last-Event-Id Header</h3>
It is essential that the connection is resumed at the same point where it was interrupted so that no messages are lost.

This can be achieved with the <strong>Last-Event-Id</strong> header, which is automatically added when a certain condition is met.

Each message from the server should contain a unique <strong>id</strong> field:

<code>client.res.write(`data: ${JSON.stringify(message)}\nid:500\n\n`);</code>

When the browser receives a message with a set <strong>id</strong>, it sets the <code>eventSource.lastEventId</code> property to its value and sends this value in the <strong>Last-Event-Id</strong> header when reconnected:

<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-11.47.03.png" alt="Last-Event-Id header" title="Last-Event-Id header">

<strong>Important note:</strong> the <strong>id</strong> should be appended by the server after the <strong>data</strong> to ensure that the <strong>eventSource.lastEventId</strong> is updated after the message is received.

<h3 id="Server-Senttopic-8">Browser Support</h3>
According to <a href="https://caniuse.com/?search=eventsource">caniuse</a>, Server-Sent Events are available for more than 96% of the users as of 06.12.2020:

<img class="lazy" data-src="https://vhudyma-blog.eu/img/screenshot-2020-12-05-at-14.54.45.png" alt="Browser Support Image" title="Browser Support Image">

The following code can be used to check if the browser supports the feature:

<code>if ("EventSource" in window) {
  // Implement it
}</code>

<h3 id="Server-Senttopic-9">Sever-Sent Events vs. WebSockets</h3>
The WebSocket protocol enables the exchange of events between the server and the client. The data can be sent in both directions.

What are the main differences between the two technologies?

<li>Server-Sent Events are based on HTTP, WebSockets on the WebSocket protocol</li>
<li>Server-Sent Events do not allow bidirectional data flow, WebSockets do</li>
<li>Server-Sent Events do not allow sending binary data, WebSockets do</li>
<li>Server-Sent Events provide an automatic reconnection if the connection is lost, WebSockets do not (you have to implement it manually)</li>
<li>Server-Sent Events have a limited maximum number of open connections (6), which can be painful if you need to open more tabs, WebSockets have no limitations</li>

When you see all these disadvantages of using Server-Sent Events, are they really a competitor to WebSockets?
They are much easier and faster to implement. So if you need a quick way to set up the real-time unidirectional communication between server and client and are aware of all the potential risks, this is the best way to go.
However, be aware that there is a high probability that the solution will eventually be refactored to the WebSockets.

<h2>Server-Sent Events - One Way Messaging</h2>
A server-sent event is when a web page automatically gets updates from a server.

This was also possible before, but the web page would have to ask if any updates were available. With server-sent events, the updates come automatically.

<h3>Receive Server-Sent Event Notifications</h3>
The EventSource object is used to receive server-sent event notifications:

Example
var source = new EventSource("demo_sse.php");
source.onmessage = function(event) {
  document.getElementById("result").innerHTML += event.data + "<br>";
};

Example explained:
Create a new EventSource object, and specify the URL of the page sending the updates (in this example "demo_sse.php")
Each time an update is received, the onmessage event occurs
When an onmessage event occurs, put the received data into the element with id="result"

&lt;!DOCTYPE html>
&lt;html>
&lt;body>

&lt;h1>Getting server updates&lt;/h1>
&lt;div id="result">&lt;/div>

&lt;script>
if(typeof(EventSource) !== "undefined") {
  var source = new EventSource("demo_sse.php");
  source.onmessage = function(event) {
    document.getElementById("result").innerHTML += event.data + "&lt;br>";
  };
} else {
  document.getElementById("result").innerHTML = "Sorry, your browser does not support server-sent events...";
}
&lt;/script>

&lt;/body>
&lt;/html>

<h3>Check Server-Sent Events Support</h3>
In the tryit example above there were some extra lines of code to check browser support for server-sent events:

if(typeof(EventSource) !== "undefined") {
  // Yes! Server-sent events support!
  // Some code.....
} else {
  // Sorry! No server-sent events support..
}

<h3>Server-Side Code Example</h3>
For the example above to work, you need a server capable of sending data updates (like PHP or ASP).

The server-side event stream syntax is simple. Set the "Content-Type" header to "text/event-stream". Now you can start sending event streams.

<b>Code in PHP (demo_sse.php):</b>
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');

$time = date('r');
echo "data: The server time is: {$time}\n\n";
flush();
?>

<b>Code in ASP (VB) (demo_sse.asp):</b>
<%
Response.ContentType = "text/event-stream"
Response.Expires = -1
Response.Write("data: The server time is: " & now())
Response.Flush()
%>

<b>Code explained:</b>
Set the "Content-Type" header to "text/event-stream"
Specify that the page should not cache
Output the data to send (Always start with "data: ")
Flush the output data back to the web page
The EventSource Object
In the examples above we used the onmessage event to get messages. But other events are also available:

Events	Description
onopen	When a connection to the server is opened
onmessage	When a message is received
onerror	When an error occurs


<h2>connect SQL Server database from JavaScript in the browser</h2>

There is no common way to connect to SQL Server database from JavaScript client, every browser has it’s own API and packages to connect to SQL Server.

For example, in Windows operating system, Internet Explorer has a class name called ActiveXObject which is used to create instances of OLE Automation objects, and these objects help us to create an environment for SQL Driver connection. 


var connection = new ActiveXObject("ADODB.Connection") ;
var connectionstring = "Data Source=&lt;server>;Initial Catalog=&lt;catalog>;User ID=&lt;user>;Password=&lt;password>;Provider=SQLOLEDB";

connection.Open(connectionstring);
var rs = new ActiveXObject("ADODB.Recordset");
rs.Open("SELECT * FROM table", connection);
rs.MoveFirst

while(!rs.eof)
{
   document.write(rs.fields(1));
   rs.movenext;
}

rs.close;
connection.close; 

It is not recommended to use JavaScript clients to access databases.

Node.js provides us an environment to run JavaScript code outside the browser.

It’s strongly recommended to use any command-line tool(CLI) like terminal, cmd to run following queries and commands.

connect with SQL Server
sqlcmd -S localhost -U SA -P "&lt;password>"

To create Node.js environment issue following command.
npm init

Express allows us to set up middlewares to respond to HTTP Requests.
npm install express --save

Microsoft SQL Server client give us functionality to connect with SQL server.
npm install mssql --save
To begin with Node.js part, we need to create our server file server.js in our local system.

javascript
// Requiring modules
const express = require('express');
const app = express();
const mssql = require("mysql");
 
// Get request
app.get('/', function (req, res) {
 
    // Config your database credential
    const config = {
        user: 'SA',
        password: 'Your_Password',
        server: 'localhost',
        database: 'geek'
    };
 
    // Connect to your database
    mssql.connect(config, function (err) {
 
        // Create Request object to perform
        // query operation
        var request = new mssql.Request();
 
        // Query to the database and get the records
        request.query('select * from student',
            function (err, records) {
 
                if (err) console.log(err)
 
                // Send records as a response
                // to browser
                res.send(records);
 
            });
    });
});
 
var server = app.listen(5000, function () {
    console.log('Server is listening at port 5000...');
});
Run server.js file using the following command:  

node server.js
After executing the above command, you will see the following output on your console:  

Server is listening at port 5000...
Now hit the url http://localhost:5000/ in the local browser.

<h2>JavaScript Tips</h2>
<div id="JTipstoc" class="toc"><a href="#JTipstopic-0" target="_self">Flatten the array of the array</a>,  <a href="#JTipstopic-1" target="_self">Easy Exchange Variables</a>,  <a href="#JTipstopic-2" target="_self">Sort Alphabetically</a>,  <a href="#JTipstopic-3" target="_self"><br>Generate Range of Numbers</a>,  <a href="#JTipstopic-4" target="_self">Shorten the Console log</a>,  <a href="#JTipstopic-5" target="_self">Shortening an Array in an easy way</a>,  <a href="#JTipstopic-6" target="_self"><br>Use isNumber</a>,  <a href="#JTipstopic-7" target="_self">Use isString</a>,  <a href="#JTipstopic-8" target="_self">Check Null</a>,  <a href="#JTipstopic-9" target="_self">Merge Array into One</a>,  <a href="#JTipstopic-10" target="_self">Quick Calculate Performance</a>,  <a href="#JTipstopic-11" target="_self">Remove Duplicates</a>,  <a href="#JTipstopic-12" target="_self">Convert Number to Binary</a>,  <a href="#JTipstopic-13" target="_self">Character “e” for excessive zeros</a>,  <a href="#JTipstopic-14" target="_self">Make Array Empty</a>,  <a href="#JTipstopic-15" target="_self">Final Thoughts</a>,  </div></center>

<h3 id="JTipstopic-0">Flatten the array of the array</h3>
This tip will help you to flatten a deeply nested array of arrays by using <code>Infinity</code> in <code>flat</code>.

var array = [123, 500, [1, 2, [34, 56, 67, [234, 1245], 900]], 845, [30257]]
//flatten array of array
<b>array.flat(Infinity)</b>
// output:
// [123, 500, 1, 2, 34, 56, 67, 234, 1245, 900, 845, 30257]
<h3 id="JTipstopic-1">Easy Exchange Variables</h3>
You probably swap the two variables using a third variable <code>temp</code>. But this tip will show you a new way to exchange variables using destructuring.

//example 1
var a = 6;
var b = 7;
<b>[a,b] = [b,a]</b>
console.log(a,b) // 7 6
<h3 id="JTipstopic-2">Sort Alphabetically</h3>
Sorting is a common problem in programming and this tip will save your valuable time by writing a long code to sort a string alphabetically.

//sort alphabeticallyfunction alphabetSort(arr)
{
  return arr.sort((a, b) => a.localeCompare(b));
}
let array = ["d", "c", "b", "a"]
console.log(<b>alphabetSort(array)</b>) // ["a", "b", "c", "d"]
<h3 id="JTipstopic-3"><br>Generate Range of Numbers</h3>
Suppose you want to generate a number between a specific range. The first approach you will use is the loop. But this tip will save you valuable time by doing it the easy way.

let Start = 10, End = 15;
//Generating
<b>[...new Array(End + 1).keys()].slice(Start)</b>; // [10, 11.... 15]
<b>Array.from({length: End - Start + 1}, (_,i) => Start + i)</b> // [10, 11.... 15]
<h3 id="JTipstopic-4">Shorten the Console log</h3>
Tired of writing <code>console.log()</code> again and again? This tip will show how to shorter your console log and speed up your coding.

var <b>c = console.log.bind(document)</b>
c(455)
c("hello world")
<h3 id="JTipstopic-5">Shortening an Array in an easy way</h3>
This is an awesome tip for web developers to shorten an array in an easy way. You just need to use the <code>length</code> method by passing a number that denotes the new size of your array.

let array = ["A", "B", "C", "D", "E", "F"]
<b>array.length = 2</b>
console.log(array) // ["A", "B"]
<h3 id="JTipstopic-6"><br>Use isNumber</h3>
This tip will show how to check whether a value or variable holding a number ( integer, float and etc ) or not.

<b>function isNumber(n) { return !isNaN(parseFloat(n)) &amp;&amp; isFinite(n); }</b>
console.log(isNumber(900))  // true
console.log(isNumber(23.98))  // true
console.log(isNumber("JavaScript")) // false
<h3 id="JTipstopic-7">Use isString</h3>
This useful tip will show you how to check whether a value or data is in string format or not. This comes in handy when you request data from the server and want to check the data type.

<b>const isString = value => typeof value === 'string';</b>
isString('JavaScript'); // true
isString(345); // false
isString(true); // false
<h3 id="JTipstopic-8">Check Null</h3>
In Programming, sometimes we need to check whether a result or data is null.

<b>const CheckNull= value => value === null || value === undefined;</b>
CheckNull(null) // true
CheckNull() // true
CheckNull(123) // false
CheckNull("J") // false
<h3 id="JTipstopic-9">Merge Array into One</h3>
This tip will be useful when you need to combine the two arrays of any size into one. You need to use the JavaScript <code>concate</code> method for this.

//Example Code
let arr1 = ["JavaScript", "Python", "C++"]
let arr2 = ["Dart", "Java", "C#"]
<b>const mergeArr = arr1.concat(arr2)</b>
console.log(mergeArr) // ["JavaScript", "Python", "C++", "Dart", "Java", "C#"]
<h3 id="JTipstopic-10">Quick Calculate Performance</h3>
This tip is personally used most to calculate the performance of my JavaScript program.

const starttime = performance.now();
//some program
const endtime = performance.now();
const totaltime = startTime - endTime
console.log("function takes "+totaltime +" milisecond");
<h3 id="JTipstopic-11">Remove Duplicates</h3>
You probably encounter an array with duplicate data and use a loop way to get rid of these duplicates. This tip will help you remove duplicates in an easy way without using any loop.

const ReDuplicates = array => [...new Set(array)];
console.log(ReDuplicates([200,200,300,300,400,500,600,600])) // [200,300,400,600]
<h3 id="JTipstopic-12">Convert Number to Binary</h3>
This tip is useful when you need to convert numbers into binary. 
Take a look at the example code below.

var num = 200
console.log(num.toString(2)) // 11001000
num = 300
console.log(num.toString(2)) //100101100
<h3 id="JTipstopic-13">Character “e” for excessive zeros</h3>
This is a time-saving tip for you. You can rid of writing a lot of zeros in JavaScript by replacing all of them with the character “e”.

//normal way
var num = 20000000
//good way
var num2 = 2e7
console.log(num2) //20000000
<h3 id="JTipstopic-14">Make Array Empty</h3>
This quick tip will save the time that you put to empty an array. I will show you the quick method to empty in an array using the JavaScript length method.

let array = ["A", "B", "C", "D", "E", "F"]
array.length=0
console.log(array) // []
<h3 id="JTipstopic-15">Final Thoughts</h3>
I hope you find this article useful and fun to learn these tips. If you had a good JavaScript tip feel free to share it with other developers in response.<strong> Happy JavaScript Coding.</strong>


<h2>Pre-fill form with local storage</h2>
to create a single localStorage entry representing your saved values, rather than pollute LS with many entries for each field. 

function save() {
  const selects = document.querySelectorAll('select');
  // select other element types
  // ...
  const selectValues = [...selects].map(select => select.value);
  const textValues = [...textInputs].map(textInput => textInput.value);
  const sliderValues = [...sliderInputs].map(sliderInput => sliderInput.value);
  const savedObj = { selectValues, textValues, sliderValues };
  localStorage.savedFormValues = JSON.stringify(savedObj);
}




<h2>use .get or .post to collect file from url</h2>
<a href="https://www.w3schools.com/tags/ref_httpmethods.asp" class="whitebut ">HTTP Request Methods .get, .post and others</a>


$("button").click(function(){
  url= "https://williamkpchan.github.io/LibDocs/games Notes.html",
  $.get(url, function(data, status){
    alert("Data: " + data + "\nStatus: " + status);
  });
});

// will be blocked
$("button").click(function(){
  $.post("demo_test.asp", function(data, status){
    alert("Data: " + data + "\nStatus: " + status);
  });
});

Access to XMLHttpRequest from origin 'null' has been blocked by CORS
use server to bypass CORS

note that Mixed Content loaded over HTTPS will be blocked, the content must be served over HTTPS.

adding following code to the HTML page, since we are using the third party API which is not controlled by us.

<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> 



<h2>avoid the specification of the username and password at every git push</h2>

1. Associate the SSH key with the remote repository
This step varies, depending on how your remote is set up.

If it is a GitHub repository and you have administrative privileges, go to settings and click 'add SSH key'.
Copy the contents of your ~/.ssh/id_rsa.pub into the field labeled 'Key'.

If your repository is administered by somebody else, give the administrator your id_rsa.pub.

If your remote repository is administered by your, you can use this command for example:

scp ~/.ssh/id_rsa.pub YOUR_USER@YOUR_IP:~/.ssh/authorized_keys/id_rsa.pub

2. Set your remote URL to a form that supports SSH 1
If you have done the steps above and are still getting the password prompt, make sure your repo URL is in the form

git+ssh://git@github.com/username/reponame.git
as opposed to

https://github.com/username/reponame.git
To see your repo URL, run:

git remote show origin
You can change the URL with:
git remote set-url origin git+ssh://git@github.com/username/reponame.git

<a href="https://stackoverflow.com/questions/37813568/git-remote-repository-not-found" class="whitebut ">Git - remote: Repository not found</a>

Permanently authenticating with Git repositories,
Run the following command to enable credential caching.

git config credential.helper store
git push https://github.com/repo.git

For window
Delete the credentials from Credential Manager.

Open Control Panel from the Start menu.
Select User Accounts.
Select the "Credential Manager".
Click on "Manage Windows Credentials".
Delete any credentials related to Git or GitHub.
Once you deleted all then try to clone again.

I was also facing the same issue
remote: Repository not found
fatal: repository 'https://github.com/MyRepo/project.git/' not found
I uninstalled the git credentials manager and reinstalled it and then I could easily pull and push to the repository.
Here are the commands

<h2>What is React?</h2>
<div id="Reacttoc" class="toc"><a href="#Reacttopic-0" target="_self"">Adding React to an HTML Page</a><br><a href="#Reacttopic-1" target="_self"">What is Babel?</a><br><a href="#Reacttopic-2" target="_self"">What is JSX?</a><br><a href="#Reacttopic-3" target="_self"">React DOM Render</a><br><a href="#Reacttopic-4" target="_self"">JSX Expressions</a><br><a href="#Reacttopic-5" target="_self"">React Elements</a><br><a href="#Reacttopic-6" target="_self"">React Components</a><br><a href="#Reacttopic-7" target="_self"">React Component Properties</a><br><a href="#Reacttopic-8" target="_self"">JSX Compiler</a><br><a href="#Reacttopic-9" target="_self"">Create React Application</a><br></div></center>
React is a <b>JavaScript</b> library created by <b>Facebook</b>
React is a <b>User Interface</b> (UI) library
React is a tool for building <b>UI components</b>
<h3 id="Reacttopic-0">Adding React to an HTML Page</h3>
This quickstart tutorial will add React to a page like this: 
<h3>Example</h3>
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;title&gt;Test React&lt;/title&gt;
<b>&lt;!-- Load React API --&gt;</b>
&lt;script src= "https://unpkg.com/react@16/umd/react.production.min.js"&gt;&lt;/script&gt;
<b>&lt;!-- Load React DOM--&gt;</b>
&lt;script src= "https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"&gt;&lt;/script&gt;
<b>&lt;!-- Load Babel Compiler --&gt;</b>
&lt;script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"&gt;&lt;/script&gt;
&lt;body&gt;
&lt;script type="text/babel"&gt;
<b>    //  JSX Babel code goes here
</b>&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
<h3 id="Reacttopic-1">What is Babel?</h3>
Babel is a JavaScript compiler that can translate markup or programming languages into JavaScript.
With Babel, you can use the newest features of JavaScript (ES6 - ECMAScript 2015).
Babel is available for different conversions. 
React uses Babel to convert JSX into JavaScript.
Please note that &lt;script type="text/babel"&gt; is needed for using Babel.
<h3 id="Reacttopic-2">What is JSX?</h3>
JSX stands for <b>J</b>ava<b>S</b>cript <b>X</b>ML.
JSX is an XML/HTML like extension to JavaScript.
<h3>Example</h3>
const element = &lt;h2&gt;Hello World!&lt;/h2&gt;
As you can see above, JSX is not JavaScript nor HTML.
JSX is a XML syntax extension to JavaScript that also comes with the full power of ES6 (ECMAScript 2015).
Just like HTML, JSX tags can have a tag names, attributes, and children.
If an attribute is wrapped in curly braces, the value is a JavaScript expression.
Note that JSX does not use quotes around the HTML text string.
<h3 id="Reacttopic-3">React DOM Render</h3>
The method ReactDom.render() is used to render (display) HTML elements:
<h3>Example</h3>
&lt;div id="id01"&gt;Hello World!&lt;/div&gt;
&lt;script type="text/babel"&gt;ReactDOM.render(
    &lt;h2&gt;Hello React!&lt;/h2&gt;,
    document.getElementById('id01'));
&lt;/script&gt;
<h3 id="Reacttopic-4">JSX Expressions</h3>
Expressions can be used in JSX by wrapping them in curly <b>{}</b> braces.
<h3>Example</h3>
&lt;div id="id01"&gt;Hello World!&lt;/div&gt;
&lt;script type="text/babel"&gt;
const <b>name</b> = 'John Doe';
ReactDOM.render(
    &lt;h2&gt;Hello <b>{name}</b>!&lt;/h2&gt;,
    document.getElementById('id01'));
&lt;/script&gt;
<h3 id="Reacttopic-5">React Elements</h3>
React applications are usually built around a single <b>HTML element</b>.
React developers often call this the <b>root node</b> (root element): 
&lt;div id="root"&gt;&lt;/div&gt;
<b>React elements</b> look like this:
const element = &lt;h2&gt;Hello React!&lt;/h2&gt;
Elements are <b>rendered</b> (displayed) with the ReactDOM.render() method:
ReactDOM.render(element, document.getElementById('root'));
React elements are <b>immutable</b>. 
They cannot be changed.
The only way to change a React element is to render a new element every time:
<h3>Example</h3>
function tick() {
    const element = (&lt;h2&gt;{new Date().toLocaleTimeString()}&lt;/h2&gt;);
    ReactDOM.render(element, document.getElementById('root'));
}
setInterval(tick, 1000);
<h3 id="Reacttopic-6">React Components</h3>
React components are JavaScript functions.
This example creates a React <strong>component</strong> named "Welcome":
<h3>Example</h3>
function Welcome() {
    return &lt;h2&gt;Hello React!&lt;/h2&gt;;
}
ReactDOM.render(&lt;Welcome /&gt;, document.getElementById('root'));
React can also use ES6 classes to create components.
This example creates a React component named Welcome with a render <strong>method</strong>: 
<h3>Example</h3>
class Welcome extends React.Component {
   render() { return(&lt;h2&gt;Hello React!&lt;/h2&gt;); }
}
ReactDOM.render(&lt;Welcome /&gt;, document.getElementById('root'));
<h3 id="Reacttopic-7">React Component Properties</h3>
This example creates a React <strong>component</strong> named "Welcome" with property arguments:
<h3>Example</h3>
function Welcome(props) {
    return &lt;h2&gt;Hello {props.name}!&lt;/h2&gt;;
}
ReactDOM.render(&lt;Welcome name="John Doe"/&gt;, document.getElementById('root'));

React can also use ES6 classes to create components.
This example also creates a React component named "Welcome" with property arguments: 
<h3>Example</h3>
class Welcome extends React.Component {
   render() { return(&lt;h2&gt;Hello {this.props.name}&lt;/h2&gt;); }
}
ReactDOM.render(&lt;Welcome name="John Doe"/&gt;, document.getElementById('root'));
<h3 id="Reacttopic-8">JSX Compiler</h3>
The examples on this page compiles JSX in the browser.
For production code, the compilation should be done separately.
<h3 id="Reacttopic-9">Create React Application</h3>
Facebook has created a <b>Create React Application</b> with everything you need to build a React app.
It is a development server that uses Webpack to compile React, JSX, and ES6, auto-prefix CSS files.
The Create React App uses ESLint to test and warn about mistakes in the code.
To create a React App run the following code on your terminal:
<h3>Example</h3>
npx create-react-app react-tutorial 

Make sure you have Node.js 5.2 or higher. 
Otherwise you must install npx:
<h3>Example</h3>
npm i npx 
Start one folder up from where you want your application to stay:
<h3>Example</h3>
C:\Users\myUser&gt;npx create-react-app react-tutorial 
<h3>Success Result:</h3>
npx: installed 63 
in 10.359s

Creating a new React app in C:\Users\myUser\react-tutorial.
Installing packages. 
This might take a couple of minutes.
Installing react, 
react-dom, and react-scripts...
+ react-dom@16.5.2
+ react@16.5.2
+ 
react-scripts@2.0.4
added 1732 packages from 664 contributors and audited 
31900 packages in 355.501s
found 0 vulnerabilities+ react@16.5.2
Success! Created react-tutorial at C:\Users\myUser\react-tutorial

Inside that directory, you can run several commands:
npm start
Starts the development server.

npm run build
Bundles the app into static files for production.

npm test
Starts the test runner.

npm run eject
Removes this tool and copies build dependencies, configuration files and scripts into the app directory. 
If you do this, you can't go back!

We suggest that you begin by typing:
cd react-tutorial
npm start

<h2>delay refresh by javascript</h2>
$(document).ready(function() {
  timeDelay = 60*1000 * Number(prompt("alarm delay in minutes: "))
  setInterval('window.location.reload()', timeDelay);
});


<h2>calculate the centre of a circle given three points</h2>
https://stackoverflow.com/questions/32861804/how-to-calculate-the-centre-point-of-a-circle-given-three-points

Translate the three points to bring one of them at the origin 
(subtract (X0,Y0)).

The equation of a circle through two points and the origin can be written

2X.Xc + 2Y.Yc = X² + Y²
(refer to: https://www.math-only-math.com/circle-passes-through-the-origin.html)

Plugging the coordinates of the two points, you get an easy system of two equations in two unknowns, and by Cramer

Xc = (Z1.Y2 - Z2.Y1) / D
Yc = (X1.Z2 - X2.Z1) / D

D = 2(X1.Y2 - X2.Y1), Z1 = X1²+Y1², Z2 = X2²+Y2²
to be translated back (add (X0,Y0)).

The formula fails when the three points are aligned, which is diagnosed by D = 0 (or small in comparison to the numerators).

        X1-= X0; Y1-= Y0; X2-= X0; Y2-= Y0;

        double Z1= X1 * X1 + Y1 * Y1;
        double Z2= X2 * X2 + Y2 * Y2;
        double D= 2 * (X1 * Y2 - X2 * Y1);

        double Xc= (Z1 * Y2 - Z2 * Y1) / D + X0;
        double Yc= (X1 * Z2 - X2 * Z1) / D + Y0;

function CalculateCircleCenter(A,B,C)
{
    var yDelta_a = B.y - A.y;
    var xDelta_a = B.x - A.x;
    var yDelta_b = C.y - B.y;
    var xDelta_b = C.x - B.x;

    center = [];

    var aSlope = yDelta_a / xDelta_a;
    var bSlope = yDelta_b / xDelta_b;

    center.x = (aSlope*bSlope*(A.y - C.y) + bSlope*(A.x + B.x) - aSlope*(B.x+C.x) )/(2* (bSlope-aSlope) );
    center.y = -1*(center.x - (A.x+B.x)/2)/aSlope +  (A.y+B.y)/2;
    return center;
}

All you need to do is pass it 3 points :
 var threePoints = [{x:1, y: 2},{x:4, y: 4},{x:6, y: 2} ]
console.log(CalculateCircleCenter(threePoints[0],threePoints[1],threePoints[2]))



<h2>to change the default voice in the browser</h2>
The speech API spec says that browsers can decide which voice to use by default, and that each utterance language may have a different default voice.

The default utterence language is decided by the HTML lang attribute:

This implies that, to use a British voice by default:
&lt;html lang="en-GB">
  &lt;script>
  var utterance = new SpeechSynthesisUtterance('Toodle pip');
  window.speechSynthesis.speak(utterance);
  &lt;/script>

However, this did not change the default voice for me in Chrome 46 (my default language is en-GB; I also get a German voice by default).

You could use navigator.language as the default utterance language, but according to this answer it is not a reliable indicator of browser settings (for me it evaluates to en-US, which is in my list of languages but is not my default).

Chrome seems to ignore the HTML lang property. The solution is to set the property of the utterance:

&lt;script>
    var utterance = new SpeechSynthesisUtterance('Toodle pip');
    utterance.lang='en-US'; // for US english, en-GR for british
    window.speechSynthesis.speak(utterance);
&lt;/script>

SpeechSynthesis.getVoices() will return several options for English (United States, Australia, Nigeria, India, and United Kingdom) but only one is available at a time. 
You can pick which one by going to the Settings app, then Controls->Language and input->Text-to-speech options. 

<h2>The lang property of the SpeechSynthesisUtterance interface</h2>
gets and sets the language of the utterance.

If unset, the app's (i.e. the <html> lang value) lang will be used, or the user-agent default if that is unset too.

Syntax
var myLang = speechSynthesisUtteranceInstance.lang;
speechSynthesisUtteranceInstance.lang = 'en-US';

Examples
var synth = window.speechSynthesis;
var inputForm = document.querySelector('form');
var inputTxt = document.querySelector('input');
var voiceSelect = document.querySelector('select');

var voices = synth.getVoices();

  ...

inputForm.onsubmit = function(event) {
  event.preventDefault();

  var utterThis = new SpeechSynthesisUtterance(inputTxt.value);
  var selectedOption = voiceSelect.selectedOptions[0].getAttribute('data-name');
  for(i = 0; i < voices.length ; i++) {
    if(voices[i].name === selectedOption) {
      utterThis.voice = voices[i];
    }
  }
  utterThis.lang = 'en-US';
  synth.speak(utterThis);
  inputTxt.blur();
}

SpeechSynthesisUtterance()
Properties
  lang
  pitch
  rate
  text
  voice
  volume
Events
  boundary
  end
  error
  mark
  pause
  resume
  start
Inheritance:
  EventTarget

<h2>radio button</h2>
<div id="radiobuttontoc" class="toc"><a href="#radiobuttontopic-0" target="_self"><span class="orange">Create a radio button</span></a><br><a href="#radiobuttontopic-1" target="_self"><span class="orange">Check a radio button</span></a><br><a href="#radiobuttontopic-2" target="_self"><span class="orange">Check the radio button is selected or not</span></a><br><a href="#radiobuttontopic-3" target="_self">Example</a><br><a href="#radiobuttontopic-4" target="_self">querySelector()</a><br><a href="#radiobuttontopic-5" target="_self">Example</a><br><a href="#radiobuttontopic-6" target="_self"><span class="orange">Get the value of checked radio button:</span></a><br><a href="#radiobuttontopic-7" target="_self">Using getElementById ()</a><br><a href="#radiobuttontopic-8" target="_self">Using querySelector()</a><br></div>
<br><br>
<h3 id="radiobuttontopic-0"><span class="orange">Create a radio button</span></h3>
Following is a simple code for creating a group of radio buttons.

&lt;p&gt; Choose your favroite season: &lt;/p&gt;
&lt;input type="radio" name="JTP" id="summer" value="summer"&gt;Summer&lt;br&gt; 
&lt;input type="radio" name="JTP" id="winter" value="winter"&gt;Winter&lt;br&gt; 
&lt;input type="radio" name="JTP" id="rainy" value="rainy"&gt;Rainy&lt;br&gt;
&lt;input type="radio" name="JTP" id="autumn" value="autumn"&gt;Autumn&lt;br&gt;

<h3 id="radiobuttontopic-1"><span class="orange">Check a radio button</span></h3>
We do not need to write any specific code to check the radio button. 
They can be checked once they are created or specified in HTML form.
However, we have to write the JavaScript code to get the value of the checked radio button, which we will see in the chapter below:
<h3 id="radiobuttontopic-2"><span class="orange">Check the radio button is selected or not</span></h3>
There are two ways in JavaScript to check the marked radio button or to identify which radio button is selected. 
JavaScript offers two DOM methods for this.
<li><strong>getElementById</strong></li>
<li><strong>querySelector</strong></li>
The input radio checked property is used to check whether the checkbox is selected or not. 
Use <strong>document.getElementById('id').checked</strong> method for this. 
It will return the checked status of the radio button as a Boolean value. 
It can be either true or false.
<strong>True -</strong> If radio button is selected.
<strong>False -</strong> If radio button is not selected/ checked.
See the JavaScript code below to know how it works:
<h3 id="radiobuttontopic-3">Example</h3>
For example, we have a radio button named Summer and id = 'summer'. 
Now, we will check using this button id that the radio button is marked or not.

if(document.getElementById('summer').checked == true) { 
         document.write("Summer radio button is selected"); 
} else {
         document.write("Summer radio button is not selected"); 
}

<h3 id="radiobuttontopic-4">querySelector()</h3>
The querySelector() function is a DOM method of JavaScript. 
It uses the common name property of radio buttons inside it. 
This method is used as given below to check which radio button is selected.

document.querySelector('input[name="JTP"]:checked')

<h3 id="radiobuttontopic-5">Example</h3>
For example, we have a group of radio buttons having the name property name = 'season' for all buttons. 
Now, between these buttons named season we will check which one is selected.

 var getSelectedValue = document.querySelector( 'input[name="season"]:checked'); 
 if(getSelectedValue != null) { 
          document.write("Radio button is selected");
} else {
          document.write("Nothing has been selected");
}

<h3 id="radiobuttontopic-6"><span class="orange">Get the value of checked radio button:</span></h3>
<h3 id="radiobuttontopic-7">Using getElementById ()</h3>
Following is the code to get the value of checked radio button using getElementById() method:

if(document.getElementById('summer').checked) { 
       var selectedValue = document.getElementById('summer').value;
       alert("Selected Radio Button is: " + selectedValue);  
}

<h3 id="radiobuttontopic-8">Using querySelector()</h3>
Following is the code to get the value of checked radio button using querySelector() method:

var getSelectedValue = document.querySelector( 'input[name="season"]:checked'); 
 if(getSelectedValue != null) { 
          alert("Selected radio button values is: " + getSelectedValue.value);
}


<h2>show all available languages</h2>
speechSynthesis.getVoices().forEach(voice => {
  console.log(voice.name, voice.lang)
})

Microsoft David Desktop - English (United States) en-US
txt2speech.html:59 Microsoft Hazel Desktop - English (Great Britain) en-GB
txt2speech.html:59 Microsoft Zira Desktop - English (United States) en-US
txt2speech.html:59 Microsoft Huihui Desktop - Chinese (Simplified) zh-CN
txt2speech.html:59 Microsoft Tracy Desktop - Chinese(Traditional, HongKong SAR) zh-HK
txt2speech.html:59 Microsoft Hanhan Desktop - Chinese (Taiwan) zh-TW
txt2speech.html:59 Google Deutsch de-DE
txt2speech.html:59 Google US English en-US
txt2speech.html:59 Google UK English Female en-GB
txt2speech.html:59 Google UK English Male en-GB
txt2speech.html:59 Google español es-ES
txt2speech.html:59 Google español de Estados Unidos es-US
txt2speech.html:59 Google français fr-FR
txt2speech.html:59 Google हिन्दी hi-IN
txt2speech.html:59 Google Bahasa Indonesia id-ID
txt2speech.html:59 Google italiano it-IT
txt2speech.html:59 Google 日本語 ja-JP
txt2speech.html:59 Google 한국의 ko-KR
txt2speech.html:59 Google Nederlands nl-NL
txt2speech.html:59 Google polski pl-PL
txt2speech.html:59 Google português do Brasil pt-BR
txt2speech.html:59 Google русский ru-RU
txt2speech.html:59 Google 普通话（中国大陆） zh-CN
txt2speech.html:59 Google 粤語（香港） zh-HK
txt2speech.html:59 Google 國語（臺灣） zh-TW

<h2>Set selected radio from radio group with a value</h2>
var value = 5;
$("input[name=mygroup][value=" + value + "]").attr('checked', 'checked');

$("input[name=mygroup]").val([5]);
$('input:radio[name="mygroup"][value="5"]').attr('checked',true);

Since jQuery 1.6, you can also use the .prop method with a boolean value (this should be the preferred method):
$("input[name=mygroup][value=" + value + "]").prop('checked', true);

Code To Remove Checked Attribute from all radio buttons of one radio button group -
$('[name="radioSelectionName"]').removeAttr('checked');


<h2>Tesseract.js Examples</h2>
<a href="https://github.com/naptha/tesseract.js/blob/master/docs/examples.md" class="whitebut ">Tesseract.js Examples</a>

basic
const { createWorker } = require('tesseract.js');
const worker = createWorker();

(async () => {
  await worker.load();
  await worker.loadLanguage('eng');
  await worker.initialize('eng');
  const { data: { text } } = await worker.recognize('https://tesseract.projectnaptha.com/img/eng_bw.png');
  console.log(text);
  await worker.terminate();
})();


with multiple languages, separate by '+'
const { createWorker } = require('tesseract.js');

const worker = createWorker();

(async () => {
  await worker.load();
  await worker.loadLanguage('eng+chi_tra');
  await worker.initialize('eng+chi_tra');
  const { data: { text } } = await worker.recognize('https://tesseract.projectnaptha.com/img/eng_bw.png');
  console.log(text);
  await worker.terminate();
})();

<h2>Express Middleware through Examples</h2>
<div id="ExpressMiddlewaretoc" class="toc"><a href="#ExpressMiddlewaretopic-0" target="_self">What is Express Middleware?</a><br><a href="#ExpressMiddlewaretopic-1" target="_self">Requirements to Write Express Middleware</a><br><a href="#ExpressMiddlewaretopic-2" target="_self">Express Middleware: The Basics</a><br><a href="#ExpressMiddlewaretopic-3" target="_self">Express Request Logging Middleware Example</a><br><a href="#ExpressMiddlewaretopic-4" target="_self">Restrict Express Request Content Type Example</a><br><a href="#ExpressMiddlewaretopic-5" target="_self">Third-Party Express Middleware</a><br><a href="#ExpressMiddlewaretopic-6" target="_self">Why Okta for Express Applications</a><br><a href="#ExpressMiddlewaretopic-7" target="_self">Okta’s OIDC Express Middleware</a><br><a href="#ExpressMiddlewaretopic-8" target="_self">Middleware Order is Important</a><br><a href="#ExpressMiddlewaretopic-9" target="_self">Error Handling in Express Middleware</a><br><a href="#ExpressMiddlewaretopic-10" target="_self">Learn More About Express Middleware</a><br></div>
<br><br>
If you’ve done any significant Node development in the past seven or eight years, you’ve probably used <a href="https://expressjs.com">Express</a> to build a web server at some point. 
While you can create a server in Node without using a library, it doesn’t give you a lot out of the box and can be quite cumbersome to add functionality. 
Express is a minimalist, “unopinionated” server library and has become the de facto standard for building web apps in Node. 
To understand Express, you need to understand Express Middleware.

<h3 id="ExpressMiddlewaretopic-0">What is Express Middleware?</h3>
Middleware literally means anything you put in the middle of one layer of the software and another. 
Express middleware are functions that execute during the lifecycle of a request to the Express server. 
Each middleware has access to the HTTP <code>request</code> and <code>response</code> for each route (or path) it’s attached to. 
In fact, Express itself is compromised wholly of middleware functions. 
Additionally, middleware can either terminate the HTTP request or pass it on to another middleware function using <code>next</code> (more on that soon). 
This “chaining” of middleware allows you to compartmentalize your code and create reusable middleware.

In this article I’ll explain what middleware is, why you would use it, how to use existing Express middleware, and how to write your own middleware for Express.

<h3 id="ExpressMiddlewaretopic-1">Requirements to Write Express Middleware</h3>
There are a few things you will need installed to create, use, and test Express middleware. 
First, you will need Node and NPM. 
To ensure you have them installed, you can run:

<code>npm -v &amp;&amp; node -v</code>
You should see the Node and NPM versions you have installed. 
If you get an error, you need to <a href="https://nodejs.org/en/">install Node</a>. 
I’m using the latest version of both as of the time of this article, which is Node 10.9.0 and NPM 6.4.1, but all the examples should work with Node versions 8+ and NPM versions 5+.

I will also be using Express version 4.x. 
This is important because major changes were made from version 3.x to 4.x.

It will also be helpful to have <a href="https://www.getpostman.com/">Postman</a> installed to test routes using any HTTP verbs other than <code>GET</code>.

<h3 id="ExpressMiddlewaretopic-2">Express Middleware: The Basics</h3>
To get started, you’ll use the most basic of Express’ built-in middleware. 
This will give you the chance to see how middleware is used, and how Express middleware is structured.

Create a new project and <code>npm init</code> it…

<code>npm init
npm install express --save</code>
Create <code>server.js</code> and paste the following code:

<code>const express = require('express');
const app = express();

app.get('/', (req, res, next) =&gt; {
res.send('Welcome Home');
});

app.listen(3000);</code>
Run the server via <code>node server.js</code>, access <code>http://localhost:3000</code>, and you should see “Welcome Home” printed in your browser.

The <code>app.get()</code> function is <a href="https://expressjs.com/en/guide/using-middleware.html#middleware.application">Application-level Middleware</a>. 
You’ll notice the parameters passed to the method are <code>req</code>, <code>res</code>, and <code>next</code>. 
These are the incoming request, the response being written, and a method to call to pass the call to the next middleware function once the current middleware is finished. 
In this case, once the response is sent, the function exits. 
You could also chain other middleware here by calling the <code>next()</code> method.

Let’s take a look at a few more examples of the different types of middleware.

<h3 id="ExpressMiddlewaretopic-3">Express Request Logging Middleware Example</h3>
In Express, you can set up middleware to be “global” middleware; meaning it will be called for every incoming request.

Change the contents of <code>server.js</code> to:
<code>const express = require('express');
const app = express();

app.use((req, res, next) =&gt; {
console.log(req);
next();
});

app.get('/', (req, res, next) =&gt; {
res.send('Welcome Home');
});

app.listen(3000);</code>
This time, when you go to <code>http://localhost:3000</code> you should see the same thing in your browser window, but back in the console window you will see the output of the incoming request object.

The middleware logs out the request object and then calls <code>next()</code>. 
The next middleware in the pipeline handles the get request to the root URL and sends back the text response. 
Using <code>app.use()</code> means that this middleware will be called for every call to the application.

<h3 id="ExpressMiddlewaretopic-4">Restrict Express Request Content Type Example</h3>
In addition to running middleware for all calls, you could also specify to only run middleware for specific calls.

Change the <code>server.js</code> file again to:

<code>const express = require('express');
const app = express();

const requireJsonContent = () =&gt; {
return (req, res, next) =&gt; {
 if (req.headers['content-type'] !== 'application/json') {
     res.status(400).send('Server requires application/json')
 } else {
   next()
 }
}
}

app.get('/', (req, res, next) =&gt; {
res.send('Welcome Home');
});

app.post('/', requireJsonContent(), (req, res, next) =&gt; {
res.send('You sent JSON');
})

app.listen(3000);</code>
This time, start the server by running:
<code>node server.js</code>
To test this, open up Postman and create a post request to <code>http://localhost:3000</code>. 
Don’t set any headers and run the request. 
You will get back the “Server requires application/json” message.

Now go back and add the <code>Content-Type</code> header with a value of <code>application/json</code> and run the request again. 
You will get the “You sent JSON” message back from the server.

This <code>app.post()</code> method call adds the <code>requireJsonContent()</code> middleware function to ensure the incoming request payload has a <code>Content-Type</code> header value set to <code>application/json</code>. 
If it doesn’t pass the check, an error response is sent. 
If it does, the request is then handed off to the next piece of middleware in the chain via the <code>next()</code> method.

<h3 id="ExpressMiddlewaretopic-5">Third-Party Express Middleware</h3>
You’ve built a couple of custom middlewares to far, but there are lots of packages already built to do the things you might normally want to do. 
In fact, you’ve used the simple routing middleware library by using the <code>app.get()</code> or <code>app.post()</code> middleware functions. 
There are thousands of middleware libraries for doing things like parsing incoming data, routing, and authorization.

Okta has an Express middleware for OIDC security that I’ll show you to demonstrate using third-party middleware libraries.

<h3 id="ExpressMiddlewaretopic-6">Why Okta for Express Applications</h3>
At Okta, our goal is to make <a href="https://developer.okta.com/product/user-management/">identity management</a> a lot easier, more secure, and more scalable than what you’re used to. 
Okta is a cloud service that allows developers to create, edit, and securely store user accounts and user account data, and connect them with one or multiple applications. 
Our API enables you to:
<a href="https://developer.okta.com/product/authentication/">Authenticate</a> and <a href="https://developer.okta.com/product/authorization/">authorize</a> your users
Store data about your users
Perform password-based and <a href="https://developer.okta.com/authentication-guide/social-login/">social login</a>
Secure your application with <a href="https://developer.okta.com/use_cases/mfa/">multi-factor authentication</a>
And much more! Check out our <a href="https://developer.okta.com/documentation/">product documentation</a>

<h3 id="ExpressMiddlewaretopic-7">Okta’s OIDC Express Middleware</h3>
To install Okta’s OIDC middleware for Express, run:

<code>npm install @okta/oidc-middleware@0.1.3 --save</code>
Then in the <code>server.js</code> file, you create an instance if the middleware with some configuration options so that Okta knows how to connect to your Okta application.

<code>const oidc = new ExpressOIDC({
issuer: 'https://{yourOktaDomain}/oauth2/default',
client_id: '{yourClientId}',
client_secret: '{yourClientSecret}',
redirect_uri: 'http://localhost:3000/authorization-code/callback',
scope: 'openid profile'
});</code>
You’ll also need to tell Express to use the OIDC middleware router instead of the default router.

<code>app.use(oidc.router);</code>
Then you use it like any other middleware:

<code>app.get('/protected', oidc.ensureAuthenticated(), (req, res) =&gt; {
res.send('Top Secret');
});</code>
The <code>oidc.ensureAuthenticated()</code> function is a middleware in the Okta library. 
It runs a function to see if the current user is logged in. 
If they are, it calls <code>next()</code> to let the <code>app.get()</code> function continue handling the request. 
If they aren’t it will send back an <code>HTTP 401 (Unauthorized)</code> response.

<h3 id="ExpressMiddlewaretopic-8">Middleware Order is Important</h3>
When a request is received by Express, each middleware that matches the request is run in the order it is initialized until there is a terminating action (like a response being sent).

<img class="lazy" data-src="/assets-jekyll/blog/express-middleware-examples/middleware-30b3b30ad54e21d8281719042860f3edd9fb1f40f93150233a08165d908f4631.png" alt="Middleware Flow">

So if an error occurs, all middleware that is meant to handle errors will be called in order until one of them does not call the <code>next()</code> function call.

<h3 id="ExpressMiddlewaretopic-9">Error Handling in Express Middleware</h3>
Express has a built-in default error handler that is inserted at the end of the middleware pipeline that handles any unhandled errors that may have occurred in the pipeline. 
Its signature adds an error parameter to the standard parameters of request, response, and next. 
The basic signature looks like this:

<code>app.use((err, req, res, next) =&gt; {
// middleware functionality here
})</code>
In order to call an error-handling middleware, you simply pass the error to <code>next()</code>, like this:

<code>app.get('/my-other-thing', (req, res, next) =&gt; {
next(new Error('I am passing you an error!'));
});

app.use((err, req, res, next) =&gt; {
console.log(err);    
if(!res.headersSent){
 res.status(500).send(err.message);
}
});</code>
In this case, the error handling middleware at the end of the pipeline will handle the error. 
You might also notice that I checked the <code>res.headersSent</code> property. 
This just checks to see if the response has already sent the headers to the client. 
If it hasn’t it sends a 500 HTTP status and the error message to the client. 
You can also chain error-handling middleware. 
This is common to handle different types of errors in different ways. 
For instance:

<code>
app.get('/nonexistant', (req, res, next) =&gt; {
let err = new Error('I couldn\'t find it.');
err.httpStatusCode = 404;
next(err);
});

app.get('/problematic', (req, res, next) =&gt; {
let err = new Error('I\'m sorry, you can\'t do that, Dave.');
err.httpStatusCode = 304;
next(err);
});

// handles not found errors
app.use((err, req, res, next) =&gt; {
if (err.httpStatusCode === 404) {
 res.status(400).render('NotFound');
}
next(err);
});

// handles unauthorized errors
app.use((err, req, res, next) =&gt; {
if(err.httpStatusCode === 304){
 res.status(304).render('Unauthorized');
}
next(err);
})

// catch all
app.use((err, req, res, next) =&gt; {
console.log(err);
if (!res.headersSent) {
 res.status(err.httpStatusCode || 500).render('UnknownError');
}
});</code>
In this case, the middleware checks to see if a 404 (not found) error was thrown. 
If so, it renders the ‘NotFound’ template page and then passes the error to the next item in the middleware. 
The next middleware checks to see if a 304 (unauthorized) error was thrown. 
If it was, it renders the ‘Unauthorized’ page, and passes the error to the next middleware in the pipeline. 
Finally the “catch all” error handler just logs the error and if no response has been sent, it sends the error’s <code>httpStatusCode</code> (or an HTTP 500 status if none is provided) and renders the ‘UnknownError’ template.

<h3 id="ExpressMiddlewaretopic-10">Learn More About Express Middleware</h3>
For detailed instructions on setting up the Okta OIDC middleware, you can follow the <a href="https://developer.okta.com/quickstart/#/okta-sign-in-page/nodejs/express">ExpressJS Quickstart</a>.

There is also a list of officially supported Express middleware in this <a href="https://github.com/senchalabs/connect#middleware">GitHub repo</a> you can try out and dig into to learn more

Finally, if you’re interested in learning more about how to use Okta, there’s an <a href="https://github.com/okta/okta-sdk-nodejs">Okta Node SDK</a> for implementing more user management functionality in your application.

<h2>How To Use And Write Express Middleware</h2>
<div id="Middlewaretoc" class="toc"><a href="#Middlewaretopic-0" target="_self"><span class="orange">Setting Up An Express Server</span></a><br><a href="#Middlewaretopic-1" target="_self"><span class="orange">What Is Middleware?</span></a><br><a href="#Middlewaretopic-2" target="_self"><span class="orange">How To Create Logging Middleware</span></a><br><a href="#Middlewaretopic-3" target="_self"><span class="orange">Advanced Middleware Example</span></a><br><a href="#Middlewaretopic-4" target="_self"><span class="orange">Middleware Additional Information</span></a><br><a href="#Middlewaretopic-5" target="_self">1. Controller Actions Are Just Like Middleware</a><br><a href="#Middlewaretopic-6" target="_self">2. Calling next Is Not The Same As Calling return</a><br><a href="#Middlewaretopic-7" target="_self">3. Middleware Will Execute In Order</a><br><a href="#Middlewaretopic-8" target="_self">Conclusion</a><br></div>
<br><br>
Middleware is an often misunderstood Middlewaretopic since it sounds and appears very complicated, but in reality middleware is actually really straightforward. 
The entire idea of middleware is to execute some code before the controller action that sends the response and after the server gets the request from the client. 

Essentially it is code that executes in the middle of your request, hence the name middleware. 
Before I get too in depth on the details of middleware, though, I want to setup a basic Express server with two routes.<em>If you prefer to learn visually, check out the video version of this article.</em>

<h3 id="Middlewaretopic-0"><span class="orange">Setting Up An Express Server</span></h3>
To get started working with a Node.js project you will need to run
<code>npm init -y</code>. 

This will create a basic package.json file with all of the default values filled in for you. 
From there the next thing to do is install Express by running <code>npm i express</code>. 
Lastly, we need to create a server.js file with the following code.
<code>const express = require('express')

const app = express()
app.get('/', (req, res) =&gt; {
res.send('Home Page')

})
app.get('/users', (req, res) =&gt; {
res.send('Users Page')

})
app.listen(3000, () =&gt; console.log('Server Started'))
</code>This server.js file simply sets up a server on port 3000 that has two routes, a home page route and a users page route. 

The last thing to do is run <code>node server.js</code> to start up the application and if everything worked you should see a message in the console saying <strong>Server Started</strong>. 
You can then open up any browser to <code>localhost:3000</code> and you should see the message <strong>Home Page</strong>. 
If you go to <code>localhost:3000/users</code> you should then see the message <strong>Users Page</strong>.That is all the basic setup we will need for the rest of this article. 

As we make changes you will need to restart your server in the console to see the changes take effect.
<h3 id="Middlewaretopic-1"><span class="orange">What Is Middleware?</span></h3>
I talked briefly about middleware as functions that execute after the server receives the request and before the controller action sends the response, but there are a few more things that are specific to middleware. 
The biggest thing is that middleware functions have access to the response (<code>res</code>) and request (<code>req</code>) variables and can modify them or use them as needed. 
Middleware functions also have a third parameter which is a <code>next</code> function. 

This function is important since it must be called from a middleware for the next middleware to be executed. 
If this function is not called then none of the other middleware including the controller action will be called.This is all a bit difficult to understand just from text so in the next section we are going to create a logging middleware that will<span class="orange"> log the url of the request a </span>user makes.
<h3 id="Middlewaretopic-2"><span class="orange">How To Create Logging Middleware</span></h3>
As I mentioned in the previous section, middleware takes three parameters, <code>req</code>, <code>res</code>, and <code>next</code>, so in order to create middleware we need to create a function that has those three inputs.<code>const express = require('express')
const app = express()

app.get('/', (req, res) =&gt; {
res.send('Home Page')
})

app.get('/users', (req, res) =&gt; {
res.send('Users Page')
})

function loggingMiddleware(req, res, next) {
console.log('Inside Middleware')
}

app.listen(3000, () =&gt; console.log('Server Started'))
</code>We now have the shell of a basic middleware function defined with some placeholder content, but the application is not using it. 
Express has a few different ways you can define middleware to be used, but for this example we will make this middleware execute before every single controller action by adding it to the application level. 

This can be done by using the <code>use</code> function on the <code>app</code> variable like this.<code>const express = require('express')
const app = express()
app.use(loggingMiddleware)

app.get('/', (req, res) =&gt; {
res.send('Home Page')
})

app.get('/users', (req, res) =&gt; {
res.send('Users Page')
})

function loggingMiddleware(req, res, next) {
console.log('Inside Middleware')
}

app.listen(3000, () =&gt; console.log('Server Started'))
</code>The application is now using the middleware that we defined and if we restart our server and navigate to any of the pages in our app you will notice that in the console the message <strong>Inside Middleware</strong> appears. 
This is great, but there is a slight problem. 

The application now loads forever and never actually finishes the request. 
This is because in our middleware we are not calling the <code>next</code> function so the controller action never gets called. 
We can fix this by calling <code>next</code> after our logging.<code>const express = require('express')

const app = express()
app.use(loggingMiddleware)
app.get('/', (req, res) =&gt; {

res.send('Home Page')
})
app.get('/users', (req, res) =&gt; {

res.send('Users Page')
})
function loggingMiddleware(req, res, next) {

console.log('Inside Middleware')
next()
}

app.listen(3000, () =&gt; console.log('Server Started'))
</code>Now if you restart the server you will notice that everything is logging correctly, and the web page is properly loading. 
The next thing to do is to actually log out the URL that the user is accessing inside the middleware. 

This is where the <code>req</code> variable will come in handy.<code>const express = require('express')
const app = express()
app.use(loggingMiddleware)

app.get('/', (req, res) =&gt; {
res.send('Home Page')
})

app.get('/users', (req, res) =&gt; {
res.send('Users Page')
})

function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()

}
app.listen(3000, () =&gt; console.log('Server Started'))
</code>The logging middleware is now working 100% correctly on all the routes in the application, but we have only scratched the surface on the usefulness of middleware. 

In the next example we are going to take a look at creating a simp<span class="orange">le authorization middleware for</span> the users page.
<h3 id="Middlewaretopic-3"><span class="orange">Advanced Middleware Example</span></h3>
To get started we need to create another function to use as middleware.<code>const express = require('express')
const app = express()
app.use(loggingMiddleware)

app.get('/', (req, res) =&gt; {
res.send('Home Page')
})

app.get('/users', (req, res) =&gt; {
res.send('Users Page')
})

function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()

}
function authorizeUsersAccess(req, res, next) {
console.log('authorizeUsersAccess Middleware')

next()
}
app.listen(3000, () =&gt; console.log('Server Started'))

</code>This is just a shell of a function to be used as middleware, but we can add it to our users page route now in order to ensure that our middleware is only being executed on the users page route. 
This can be done by adding the function as a parameter to the <code>app.get</code> function for the users page.<code>const express = require('express')
const app = express()

app.use(loggingMiddleware)
app.get('/', (req, res) =&gt; {
res.send('Home Page')

})
app.get('/users', authorizeUsersAccess, (req, res) =&gt; {
res.send('Users Page')

})
function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)

next()
}
function authorizeUsersAccess(req, res, next) {

console.log('authorizeUsersAccess Middleware')
next()
}

app.listen(3000, () =&gt; console.log('Server Started'))
</code>Now if you restart the server and go to the users page you should see the message <strong>authorizeUsersAccess Middleware</strong>, but if you go to the home page this message will not show up. 
We now have middleware that only executes on a single route in the application. 

The next thing to do is fill in the logic of this function so that if the user does not have access to the page they will get an error message instead.<code>const express = require('express')
const app = express()
app.use(loggingMiddleware)

app.get('/', (req, res) =&gt; {
res.send('Home Page')
})

app.get('/users', authorizeUsersAccess, (req, res) =&gt; {
res.send('Users Page')
})

function loggingMiddleware(req, res, next) {
console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()

}
function authorizeUsersAccess(req, res, next) {
if (req.query.admin === 'true') {

next()
} else {
res.send('ERROR: You must be an admin')

}
}
app.listen(3000, () =&gt; console.log('Server Started'))

</code>This middleware now checks to see if the query parameter <code>admin=true</code> is in the URL and if it is not an error message is shown to the user. 
You can test this by going to <code>http://localhost:3000/users</code> and you will see an error message explaining that you are not a admin. 
If you instead go to <code>http://localhost:3000/users?admin=true</code> you will be sent the normal users page since you set the query parameter of admin to true.One other thing that is really useful with middleware is the ability to send data between middleware. 

There is no way to do this with the next function, but you can modify the <code>req</code> or <code>res</code> variables to set your own custom data. 
For example in the previous example if we wanted to set a variable to true if the user was a admin we could easily do that.<code>const express = require('express')
const app = express()

app.use(loggingMiddleware)
app.get('/', (req, res) =&gt; {
res.send('Home Page')

})
app.get('/users', authorizeUsersAccess, (req, res) =&gt; {
console.log(req.admin)

res.send('Users Page')
})
function loggingMiddleware(req, res, next) {

console.log(`${new Date().toISOString()}: ${req.originalUrl}`)
next()
}

function authorizeUsersAccess(req, res, next) {
if (req.query.admin === 'true') {
req.admin = true

next()
} else {
res.send('ERROR: You must be an admin')

}
}
app.listen(3000, () =&gt; console.log('Server Started'))

</code>This code sets an admin variable on the <code>req</code> object which is then accessed in the controller action for the users page.
<h3 id="Middlewaretopic-4"><span class="orange">Middleware Additional Information</span></h3>
This is the majority of everything you need to know about middleware functions, but there a few extra things that are important to know.

<h3 id="Middlewaretopic-5">1. Controller Actions Are Just Like Middleware</h3>One thing you may have noticed is that controller actions which have a <code>req</code>, and <code>res</code> variable are very similar to middleware. 
That is because they are essentially middleware, but with no other middleware that comes after them. 

They are the end of the chain which is why there are never any next calls inside the controller action.

<h3 id="Middlewaretopic-6">2. Calling next Is Not The Same As Calling return</h3>By far the biggest mistake I see developers make when working with middleware is that they treat the <code>next</code> function as if it exited out of the middleware. 
Take for example this middleware.<code>function middleware(req, res, next) {

if (req.valid) {
next()
}

res.send('Invalid Request')
}
</code>At face value this code looks correct. 

If the request is valid then the <code>next</code> function is called and if it isn't valid then it is sending an error message. 
The problem is that the <code>next</code> function does not actually return from the middleware function. 
This means that when <code>next</code> is called the next middleware will execute and that will continue until no more middleware is left to execute. 

Then after all the middleware after this middleware is done executing the code will pick back up right after the <code>next</code> call in each of the middleware. 
That means that in this middleware the error message will always be sent to the user which is obviously not what you want. 
An easy way to prevent this is by simply returning when you call <code>next</code><code>function middleware(req, res, next) {

if (req.valid) {
return next()
}

res.send('Invalid Request')
}
</code>Now the code will no longer execute after calling <code>next</code> since it will return out of the function. 

An easy way to see this issue in action is with the following code.<code>const express = require('express')
const app = express()
app.get('/', middleware, (req, res) =&gt; {

console.log('Inside Home Page')
res.send('Home Page')
})

function middleware(req, res, next) {
console.log('Before Next')
next()

console.log('After Next')
}
app.listen(3000, () =&gt; console.log('Server Started'))

</code>When you run this code and go to the home page the console will print out the following messages in order.<code>Before Next
Inside Home Page
After Next</code>Essentially what is happening is the middleware is called and it logs out the before statement. 

Then next is called so the next set of middleware is called which is the controller action where the home page message is logged. 
Lastly the controller action finishes executing so the middleware then executes the code after <code>next</code> which logs out the after statement.

<h3 id="Middlewaretopic-7">3. Middleware Will Execute In Order</h3>This may seem self-explanatory but when you define middleware it will execute in the order it is used. 

Take for example the following code.<code>const express = require('express')
const app = express()
app.use(middlewareThree)

app.use(middlewareOne)
app.get('/', middlewareTwo, middlewareFour, (req, res) =&gt; {
console.log('Inside Home Page')

res.send('Home Page')
})
function middlewareOne(req, res, next) {

console.log('Middleware One')
next()
}

function middlewareTwo(req, res, next) {
console.log('Middleware Two')
next()

}
function middlewareThree(req, res, next) {
console.log('Middleware Three')

next()
}
function middlewareFour(req, res, next) {

console.log('Middleware Four')
next()
}

app.listen(3000, () =&gt; console.log('Server Started'))
</code>Since the <code>app.use</code> statements come first the middleware in those statements will be executed first in the order they were added. 
Next the <code>app.get</code> middleware is defined and again they will be executed in the order they are in the <code>app.get</code> function. 

This will lead to the following console output if ran.<code>Middleware Three
Middleware One
Middleware Two

Midd<span class="orange">leware Four</span></code>
<h3 id="Middlewaretopic-8">Conclusion</h3>
That is all there is to know about middleware. 
Middleware is incredibly powerful for cleaning up code and making things like user authorization and authentication much easier, but it can be used for so much more than just that because of the incredible flexibility of middleware.


<h2>Tesseract.js: OCR Remote Images</h2>
Tesseract.js works with a &lt;script> tag via local copy or CDN, with webpack via npm and on Node.js with npm/yarn.

CDN
&lt;!-- v2 -->
&lt;script src='https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js'>&lt;/script>

After including the script the Tesseract variable will be globally available.

<div id="OCRImagestoc" class="toc"><a href="#OCRImagestopic-0" target="_self">Download a remote file with Node.js</a><br><a href="#OCRImagestopic-1" target="_self">OCR a local image with Tesseract.js and Node.js</a><br><a href="#OCRImagestopic-2" target="_self">OCR a remote image with Tesseract.js</a><br></div>
<br><br>
Tesseract.js is a JavaScript OCR library based on the world’s most popular Optical Character Recognition engine. 
It’s insanely easy to use on both the client-side and on the server with Node.js. 

Server side, Tesseract.js only works with local images. 
But, with a little help from the request Node package, we can download a remote image from a URL and then OCR it with Tesseract.js. 

We’ll tackle this in three steps: 
Write code to download a remote file with Node
Write code to OCR that local file with Tessearct
Put the two snippets together

The final product will take just fifteen lines of JavaScript to OCR images from a URL. 
Sound good? Let’s get started.
<h3 id="OCRImagestopic-0">Download a remote file with Node.js</h3>
Request “is designed to be the simplest way possible to make http calls” in Node.js. 
We’ll use it to open a URL and then pipe the stream to the local file system using the Node.js standard library. 
When finished, we’ll fire off a callback. 

Paste this code into a new file called download.js: 
<code>var request = require('request')
var fs = require('fs')
var url = 'http://tesseract.projectnaptha.com/img/eng_bw.png'
var filename = 'pic.png'
var writeFileStream = fs.createWriteStream(filename)
request(url).pipe(writeFileStream).on('close', function() {
  console.log(url, 'saved to', filename)
})</code>

We’re using the sample image from the Tesseract documentation, which looks like this:
<img class="lazy" data-src="http://tesseract.projectnaptha.com/img/eng_bw.png">

Install request and run the script:
<code>npm install request
node download.js</code>

Check your directory and you should see a new file. 
Now let’s OCR that downloaded file. 
<h3 id="OCRImagestopic-1">OCR a local image with Tesseract.js and Node.js</h3>
Getting started with Tesseract.js is dead simple. 

Paste this code into a file called ocr.js. 
<code>var Tesseract = require('tesseract.js')
var filename = 'pic.png'
Tesseract.recognize(filename)
  .progress(function  (p) { console.log('progress', p)  })
  .catch(err =&gt; console.error(err))
  .then(function (result) {
console.log(result.text)
process.exit(0)
  })</code>

Install Tesseract.js and run the script: 
<code>npm install tesseract.js
node ocr.js</code>

Once Tesseract starts up (~10 seconds on my MacBook Pro), we’ll see progress updates and then find the recognized text in <code>result.text</code>. 
There’s a <i>ton</i> more data hiding in <code>result</code> if you’re inclined to go digging.
<img class="lazy" data-src="https://s3.amazonaws.com/com.twilio.prod.twilio-docs/original_images/tesseract-js.gif">
We now have code to download a remote file and code to OCR a local file — we just need to put them together. 
<h3 id="OCRImagestopic-2">OCR a remote image with Tesseract.js</h3>
Paste this code into a new file called download-and-ocr.js: 
<code>var Tesseract = require('tesseract.js')
var request = require('request')
var fs = require('fs')
var url = 'http://tesseract.projectnaptha.com/img/eng_bw.png'
var filename = 'pic.png'
var writeFile = fs.createWriteStream(filename)
request(url).pipe(writeFile).on('close', function() {
  console.log(url, 'saved to', filename)
  Tesseract.recognize(filename)
.progress(function  (p) { console.log('progress', p)  })
.catch(err =&gt; console.error(err))
.then(function (result) {
  console.log(result.text)
  process.exit(0)
})
});</code>

All we’ve done here is: 
Start with the script from download.js 
Require Tesseract.js
Paste the the code from ocr.js into the callback that’s run when the file finishes downloading. 
Give the script a run, swapping in your own picture URL if you so please: 

<code>node download-and-ocr.js</code>

<b>Next Steps</b>
That’s it! Three simple steps and we’re using Tesseract.js to perform OCR on an image from a URL. 
My personal motivation is to use Tesseract.js in conjunction with Twilio MMS to process photos that I snap while running around NYC. 
Perhaps I’ll grep phone numbers out of ads and run them through our Lookup API to see if they’re Twilio numbers. 
What are you going to build? 
If you’d like to learn more, check out:
Docs for Request file streaming in Node.js
Full API docs for Tesseract.js
Twilio JavaScript quickstarts
If you enjoyed this post, give a shout-out to Guillermo Webster and Kevin Kwok for their heroic effort porting Tesseract to JS. 
And, of course, feel free to drop me a line if you have any questions or build something you’d like to show off.

<h2>console methods</h2>
<div id="consolemethodstoc" class="toc"><a href="#consolemethodstopic-0" target="_self">methods</a><br><a href="#consolemethodstopic-1" target="_self"> console.assert()</a><br><a href="#consolemethodstopic-2" target="_self"> console.clear()</a><br><a href="#consolemethodstopic-3" target="_self"> console.count()</a><br><a href="#consolemethodstopic-4" target="_self"> console.countReset()</a><br><a href="#consolemethodstopic-5" target="_self"> console.debug()</a><br><a href="#consolemethodstopic-6" target="_self"> console.dir()</a><br><a href="#consolemethodstopic-7" target="_self"> console.dirxml()</a><br><a href="#consolemethodstopic-8" target="_self"> console.error()</a><br><a href="#consolemethodstopic-9" target="_self"> console.exception()</a><br><a href="#consolemethodstopic-10" target="_self"> console.group()</a><br><a href="#consolemethodstopic-11" target="_self"> console.groupCollapsed()</a><br><a href="#consolemethodstopic-12" target="_self"> console.groupEnd()</a><br><a href="#consolemethodstopic-13" target="_self"> console.info()</a><br><a href="#consolemethodstopic-14" target="_self"> console.log()</a><br><a href="#consolemethodstopic-15" target="_self"> console.table()</a><br><a href="#consolemethodstopic-16" target="_self"> console.time()</a><br><a href="#consolemethodstopic-17" target="_self"> console.timeEnd()</a><br><a href="#consolemethodstopic-18" target="_self"> console.timeLog()</a><br><a href="#consolemethodstopic-19" target="_self"> console.trace()</a><br><a href="#consolemethodstopic-20" target="_self"> console.warn()</a><br><a href="#consolemethodstopic-21" target="_self">Examples</a><br><a href="#consolemethodstopic-22" target="_self"> Outputting text to the console</a><br><a href="#consolemethodstopic-23" target="_self"> Using groups in the console</a><br><a href="#consolemethodstopic-24" target="_self"> Timers</a><br><a href="#consolemethodstopic-25" target="_self"> Stack traces</a><br></div>
<br><br>
<h3 id="consolemethodstopic-0">methods</h3>
<b id="consolemethodstopic-1"> console.assert()</b>
Log a message and stack trace to console if the first argument is false.

<b id="consolemethodstopic-2"> console.clear()</b>
Clear the console.

<b id="consolemethodstopic-3"> console.count()</b>
Log the number of times this line has been called with the given label.

<b id="consolemethodstopic-4"> console.countReset()</b>
Resets the value of the counter with the given label.

<b id="consolemethodstopic-5"> console.debug()</b>
Outputs a message to the console with the log level debug.

<b id="consolemethodstopic-6"> console.dir()</b>
Displays an interactive listing of the properties of a specified JavaScript object. This listing lets you use disclosure triangles to examine the contents of child objects.

<b id="consolemethodstopic-7"> console.dirxml()</b>
Displays an XML/HTML Element representation of the specified object if possible or the JavaScript Object view if it is not possible.

<b id="consolemethodstopic-8"> console.error()</b>
Outputs an error message. You may use string substitution and additional arguments with this method.

<b id="consolemethodstopic-9"> console.exception()</b>
An alias for error().

<b id="consolemethodstopic-10"> console.group()</b>
Creates a new inline group, indenting all following output by another level. To move back out a level, call groupEnd().

<b id="consolemethodstopic-11"> console.groupCollapsed()</b>
Creates a new inline group, indenting all following output by another level. However, unlike group() this starts with the inline group collapsed requiring the use of a disclosure button to expand it. To move back out a level, call groupEnd().

<b id="consolemethodstopic-12"> console.groupEnd()</b>
Exits the current inline group.

<b id="consolemethodstopic-13"> console.info()</b>
Informative logging of information. You may use string substitution and additional arguments with this method.

<b id="consolemethodstopic-14"> console.log()</b>
For general output of logging information. You may use string substitution and additional arguments with this method.

console.profile() 
Starts the browser's built-in profiler (for example, the Firefox performance tool). You can specify an optional name for the profile.

console.profileEnd() 
Stops the profiler. You can see the resulting profile in the browser's performance tool (for example, the Firefox performance tool).

<b id="consolemethodstopic-15"> console.table()</b>
Displays tabular data as a table.

<b id="consolemethodstopic-16"> console.time()</b>
Starts a timer with a name specified as an input parameter. Up to 10,000 simultaneous timers can run on a given page.

<b id="consolemethodstopic-17"> console.timeEnd()</b>
Stops the specified timer and logs the elapsed time in milliseconds since it started.

<b id="consolemethodstopic-18"> console.timeLog()</b>
Logs the value of the specified timer to the console.

console.timeStamp() 
Adds a marker to the browser's Timeline or Waterfall tool.

<b id="consolemethodstopic-19"> console.trace()</b>
Outputs a stack trace.

<b id="consolemethodstopic-20"> console.warn()</b>
Outputs a warning message. You may use string substitution and additional arguments with this method.

<h3 id="consolemethodstopic-21">Examples</h3>
<h3 id="consolemethodstopic-22"> Outputting text to the console</h3>
The most frequently-used feature of the console is logging of text and other data. There are four categories of output you can generate, using the console.log(), console.info(), console.warn(), and console.error() methods respectively. Each of these results in output styled differently in the log, and you can use the filtering controls provided by your browser to only view the kinds of output that interest you.

There are two ways to use each of the output methods; you can pass in a list of objects whose string representations get concatenated into one string, then output to the console, or you can pass in a string containing zero or more substitution strings followed by a list of objects to replace them.

<h4>Outputting a single object</h4>
The simplest way to use the logging methods is to output a single object:

var someObject = { str: "Some text", id: 5 };
console.log(someObject);
The output looks something like this:

[09:27:13.475] ({str:"Some text", id:5})

<h4>Outputting multiple objects</h4>
You can also output multiple objects by listing them when calling the logging method, like this:

var car = "Dodge Charger";
var someObject = { str: "Some text", id: 5 };
console.info("My first car was a", car, ". The object is:", someObject);
This output will look like this:

[09:28:22.711] My first car was a Dodge Charger . The object is: ({str:"Some text", id:5})

<h4>Using string substitutions</h4>
When passing a string to one of the console object's methods that accepts a string (such as log()), you may use these substitution strings:
%o or %O
Outputs a JavaScript object. Clicking the object name opens more information about it in the inspector.

%d or %i
Outputs an integer. Number formatting is supported, for example console.log("Foo %.2d", 1.1) will output the number as two significant figures with a leading 0: Foo 01

%s
Outputs a string.

%f
Outputs a floating-point value. Formatting is supported, for example console.log("Foo %.2f", 1.1) will output the number to 2 decimal places: Foo 1.10

  
<strong>Note:</strong> Precision formatting doesn't work in Chrome
Each of these pulls the next argument after the format string off the parameter list. For example:

for (var i=0; i&lt;5; i++) {
  console.log("Hello, %s. You've called me %d times.", "Bob", i+1);
}
The output looks like this:

[13:14:13.481] Hello, Bob. You've called me 1 times.
[13:14:13.483] Hello, Bob. You've called me 2 times.
[13:14:13.485] Hello, Bob. You've called me 3 times.
[13:14:13.487] Hello, Bob. You've called me 4 times.
[13:14:13.488] Hello, Bob. You've called me 5 times.

<h4>Styling console output</h4>
You can use the %c directive to apply a CSS style to console output:

console.log("This is %cMy stylish message", "color: yellow; font-style: italic; background-color: blue;padding: 2px");
The text before the directive will not be affected, but the text after the directive will be styled using the CSS declarations in the parameter.
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/css-styling.png">

You may use %c multiple times:
console.log("Multiple styles: %cred %corange", "color: red", "color: orange", "Additional unformatted message");

The properties usable along with the %c syntax are as follows (at least, in Firefox — they may differ in other browsers):
  background and its longhand equivalents.
  border and its longhand equivalents
  border-radius
  box-decoration-break
  box-shadow
  clear and float
  color
  cursor
  display
  font and its longhand equivalents
  line-height
  margin
  outline and its longhand equivalents
  padding
  text-* properties such as text-transform
  white-space
  word-spacing and word-break
  writing-mode
<strong>Note:</strong> The console message behaves like an inline element by default. To see the effects of padding, margin, etc. you should set it to for example display: inline-block.

<h3 id="consolemethodstopic-23"> Using groups in the console</h3>
You can use nested groups to help organize your output by visually combining related material. To create a new nested block, call console.group(). The console.groupCollapsed() method is similar but creates the new block collapsed, requiring the use of a disclosure button to open it for reading.

To exit the current group, call console.groupEnd(). For example, given this code:

console.log("This is the outer level");
console.group("First group");
console.log("In the first group");
console.group("Second group");
console.log("In the second group");
console.warn("Still in the second group");
console.groupEnd();
console.log("Back to the first group");
console.groupEnd();
console.debug("Back to the outer level");
The output looks like this:
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/console_groups_demo.png" alt="Demo of nested groups in Firefox console">
<h3 id="consolemethodstopic-24"> Timers</h3>
You can start a timer to calculate the duration of a specific operation. To start one, call the console.time() method, giving it a name as the only parameter. To stop the timer, and to get the elapsed time in milliseconds, just call the console.timeEnd() method, again passing the timer's name as the parameter. Up to 10,000 timers can run simultaneously on a given page.

For example, given this code:
console.time("answer time");
alert("Click to continue");
console.timeLog("answer time");
alert("Do a bunch of other stuff...");
console.timeEnd("answer time");
Will log the time needed by the user to dismiss the alert box, log the time to the console, wait for the user to dismiss the second alert, and then log the ending time to the console:
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/console-timelog.png">

Notice that the timer's name is displayed both when the timer is started and when it's stopped.
<strong>Note:</strong> It's important to note that if you're using this to log the timing for network traffic, the timer will report the total time for the transaction, while the time listed in the network panel is just the amount of time required for the header.
If you have response body logging enabled, the time listed for the response header and body combined should match what you see in the console output.
  

<h3 id="consolemethodstopic-25"> Stack traces</h3>
The console object also supports outputting a stack trace; this will show you the call path taken to reach the point at which you call console.trace(). Given code like this:
function foo() {
  function bar() {
    console.trace();
  }
  bar();
}

foo();
The output in the console looks something like this:
<img class="lazy" data-src="https://developer.mozilla.org/en-US/docs/Web/API/console/api-trace2.png">

<h2>to hide url from browser using Javascript</h2>
&lt;a href="#" onclick="location.href='https://actualwizard.com'">Mousing over this URL will display the current URL followed by a pound symbol.&lt;/a>


<h2>Create a circle out of three points</h2>
<a href="https://github.com/infusion/Circle.js" class="whitebut ">Circle.js</a>
<a href="https://www.xarg.org/2018/02/create-a-circle-out-of-three-points/" class="whitebut ">Create a circle out of three points</a>

var circle = require('circle.js');

<script src="circle.js"></script>
<script>
var p1 = {x: 20, y: 10};
var p2 = {x: 10, y: 100};
var p3 = {x: 0, y: 50};

function circleFromThreePoints(p1, p2, p3) {
  var x1 = p1.x;
  var y1 = p1.y;
  var x2 = p2.x;
  var y2 = p2.y;
  var x3 = p3.x;
  var y3 = p3.y;

  var a = x1 * (y2 - y3) - y1 * (x2 - x3) + x2 * y3 - x3 * y2;

  var b = (x1 * x1 + y1 * y1) * (y3 - y2) 
        + (x2 * x2 + y2 * y2) * (y1 - y3)
        + (x3 * x3 + y3 * y3) * (y2 - y1);
 
  var c = (x1 * x1 + y1 * y1) * (x2 - x3) 
        + (x2 * x2 + y2 * y2) * (x3 - x1) 
        + (x3 * x3 + y3 * y3) * (x1 - x2);
 
  var x = -b / (2 * a);
  var y = -c / (2 * a);

  return {
    x: x,
    y: y,
    r: Math.hypot(x - x1, y - y1)
  };
}

</script>

Functions
intersect(a, b)
Determines if two circles intersect

intersection(a, b)
Calculates the intersection points of two circles

intersectionArea(a, b)
Calculates the intersection area of two circles

area(a)
Calculates the area of a circle

height(a)
Calculates the height of a circle. Obviously, this is the same as the width.

width(a)
Calculates the width of a circle. Obviously, this is the same as the height.

perimater(a)
Calculates the perimeter of a circle

center(a)
Calculates the center point of a circle. Simply it's coordinates.

insetBy(a)
Resizes the circle by a given value on the center

fromThreePoints(p1, p2, p3)
Caclulates a circle {x, y, r} with given three {x, y} points

<h2>auto scroll</h2>
function pageScroll() {
    window.scrollBy(0,1);
    scrolldelay = setTimeout(pageScroll,10);
}
pageScroll();

stop-scrolling
Do it simply by adding a class to the body:
.stop-scrolling { height: 100%; overflow: hidden; }

Add the class then remove when you want to re-enable scrolling

modify:
chkKey() {
  if(testkey == " "){ randomScroll();}

add:
function randomScroll(){
// $('body').addClass('stop-scrolling')
// $("body").removeClass('stop-scrolling');
// $("body").toggleClass('stop-scrolling');

  topicpointer = Math.floor(Math.random() * topicLength)
  window.location = "#topic-" + topicpointer;
  pageScroll();
}

function pageScroll() {
    window.scrollBy(0,1);
    scrolldelay = setTimeout(pageScroll,10);
}

call:
randomScroll()

<h2>detect triple click</h2>
window.addEventListener('click', function (evt) {
    if (evt.detail === 3) {
        alert('triple click!');
        $("body").toggleClass('stop-scrolling');
    }
});

<h2>Disable Scrolling on Body</h2>
https://linuxhint.com/disable-scrolling-javascript/

Set height and overflow:
html, body {margin: 0; height: 100%; overflow: hidden}

HTML css works fine
&lt;body scroll="no">


<h2>Javascript Records and Tuples</h2>
<div id="RecordsTuplestoc"><a href="#RecordsTuplestopic-0" target="_self" onclick="jumpto(0)">Support for Records and Tuples</a><br><a href="#RecordsTuplestopic-1" target="_self" onclick="jumpto(1)">What are Records and Tuples in Javascript?</a><br><a href="#RecordsTuplestopic-2" target="_self" onclick="jumpto(2)">Records and Tuples are immutable</a><br><a href="#RecordsTuplestopic-3" target="_self" onclick="jumpto(3)">Records and Tuples compare Values, not Identity</a><br><a href="#RecordsTuplestopic-4" target="_self" onclick="jumpto(4)">Converting Arrays to Tuples and Objects to Records in Javascript</a><br><a href="#RecordsTuplestopic-5" target="_self" onclick="jumpto(5)">Adding to a Tuple or Record</a><br><a href="#RecordsTuplestopic-6" target="_self" onclick="jumpto(6)">Interacting with Tuples and Records in Javascript</a><br><a href="#RecordsTuplestopic-7" target="_self" onclick="jumpto(7)">Conclusion</a><br></div></center>
Records and Tuples are an upcoming feature for Javascript, which may be familiar if you have used other languages except. 
They are very similar to <code>Arrays</code> and <code>Objects</code>, the key difference being that they are immutable, meaning they can't be updated or changed. 

They give us a brand new primitive type in Javascript, and let us do a lot of things we couldn't previously do, including comparing objects and arrays by value, rather than identity. 
In this article, we'll cover how they work, and how you can use them today.

<h3 id="RecordsTuplestopic-0">Support for Records and Tuples</h3>
Currently, records and tuples are a stage 2 proposal for Javascript. 
Broadly speaking, this means that they are relatively stable, but not implemented as a standard spec. 
As such, major browsers and backend Javascript like Node.JS do not implement them. 

You can, however, use them, if you have Babel, by using this polyfill.

<h3 id="RecordsTuplestopic-1">What are Records and Tuples in Javascript?</h3>
<code>Record</code>s and <code>Tuple</code>s introduce a brand new primitive type to Javascript, but ultimately follow the same syntax as <code>Object</code>s and <code>Array</code>s. 

When we want to define a new <code>Record</code> or <code>Tuple</code>, we use the syntax <code>#{}</code> or <code>#[]</code>. 
As such, we can define both as shown in the code below:

<code>let myRecord = #{
  name: "New Record",
  tags: #['some', 'tags', 'go', 'here']
}

let myTuple = #['some', 'other', 'set', 'of', 'array', 'items'];
</code>

As you can see, the syntax is <strong>identical</strong> to objects and arrays, with the exception of the hash (<code>#</code>) at the start. 

Note, that we can also put a <code>Tuple</code> in our <code>Record</code>, as shown in the first example.
<h3 id="RecordsTuplestopic-2">Records and Tuples are immutable</h3>
Both Records and Tuples in Javascript are deeply immutable. 

All that means is that they can't be changed, at any level. 
If you try to change them, you'll get an error:

<code>let myRecord = #{
  name: "New Record",
  tags: #['some', 'tags', 'go', 'here']
}

myRecord.name = 'Another Record'; // This will throw an error
</code>

That also means you can't insert something new into them. 
In that way, they act as a source of truth - which brings us onto their main use case. 
Both <code>Tuple</code>s and <code>Record</code>s allow us to compare Objects and Arrays based on their value, rather than their identity.

<h3 id="RecordsTuplestopic-3">Records and Tuples compare Values, not Identity</h3>
If you try to run the following code, you'll get <code>false</code> back:

<code>console.log({ a: 1 } === { a: 1 }) // returns false
console.log([1, 2, 3] === [1, 2, 3]) // returns false
</code>
That might be confusing, but it's because equality of Objects and Arrays work on the basis of identity. 
When we define a new Object or Array, it is given a unique identity. 

As such, when comparing the identity of two different Objects, the result is <code>false</code>.
Records and Tuples break that convention, and allow us to compare by value. 
<code>Deep comparisons</code> of objects has been something that's been quite tricky in Javascript for a long time, but with Tuples and Records we can finally do that. 

As such, the following code returns true:
<code>console.log(#{ a: { b : 3 }} === #{ a: { b : 3 }}) // return true
console.log(#[1, 2, 3] === #[1, 2, 3]) // returns true
</code>

This means we can finally (and easily) make comparisons of the value between different objects, where we expect a very specific return value.
<h3 id="RecordsTuplestopic-4">Converting Arrays to Tuples and Objects to Records in Javascript</h3>

Since Records and Tuples are compared by value, you may want to convert regular Objects and Arrays into them, so that you can make that comparison. 
Fortunately, we can convert any Object or Array into a Record or Tuple using <code>Record()</code> and <code>Tuple()</code>:

<code>let newRecord = Record({ a: 1, b: 2 });
  let newTuple = Tuple(...[1, 2, 3, 4, 5]);
  let anotherTuple = Tuple.from([1, 2, 3, 4, 5]);
</code>

Both the above lines will produce the Record and Tuple version of each. 
Future proposals also include a <code>JSON.parseImmutable</code> function, which will let us convert strings of Arrays or Objects straight into their Tuple or Record form. 
This is not currently implemented.

<h3 id="RecordsTuplestopic-5">Adding to a Tuple or Record</h3>
I am aware that I have just said that you can't add to or change a Tuple/Record - but you can produce a new Tuple or Record based on an old one. 
This will be a totally different Tuple/Record - but it will use the data from the old and add something new. 

We can do that as shown below:
<code>let myTuple = #[1, 2, 3, 4, 5];
let myRecord = #{ a: 1, b: 1 };

// Produce a new record using original myRecord:
let newRecord = #{ ...myRecord, c: 1 } // #{ a: 1, b: 1, c: 1}

// Produce a new tuple using myTuple:
let newTuple = #[ ...myTuple, 6, 7];

// Or you can use Tuple.with():
let anotherTuple = myTuple.with(6, 7);
</code>

<h3 id="RecordsTuplestopic-6">Interacting with Tuples and Records in Javascript</h3>
Tuples and Records work exactly the same as Objects and Arrays except they cannot be changed. 

As such, you can iterate through them, or interact with them using the same methods as are available on Objects and Arrays. 
For example, we could get all the keys of a particular Record:
<code>let myRecord = #{ a: 1, b: 2, c: 2};

let recordKeys = Object.keys(myRecord); // Returns ['a', 'b', 'c'];
</code>
Or you could iterate over an array using a for loop:
<code>let myTuple = #[1, 2, 3, 4, 5];
  for(const i of myTuple) {
    console.log(i);
  }
// Console logs 1, 2, 3, 4, 5 on after each other
</code>

<h3 id="RecordsTuplestopic-7">Conclusion</h3>
As <code>Tuple</code>s and <code>Record</code>s aren't widely supported, you will need the Babel polyfill to use them. 
They allow us to compare data from Objects and Arrays in ways we couldn't before, making code much simpler where it once required complicated custom functions.

<h2>filter null values from array</h2>
let array = [0, 1, null, 2, 3];

function removeNull(array) {
  return array.filter(x => x !== null)
};

<h2>Javascript equivalent of http-equiv redirect</h2>
use window.location.reload() to refresh

use setTimeout(function() { window.location.reload(); }, 35000); to fire after 35 seconds 

use either window.location.replace('http://www.example.com') To redirect to another page
make sure the browser Back button skips the previous page, or window.location = 'http://www.example.com' to preserve the browser history.


<h2>access dom img src</h2>
topicId = "topic-" + topicpointer
document.getElementById([topicId]).attributes.length; // indirect access
document.getElementById([topicId]).attributes
document.getElementById([topicId]).attributes[3]
document.getElementById([topicId]).attributes.src

imgSrc = document.getElementById([topicId]).attributes.src.nodeValue
window.open(imgSrc);


<h2>indirect pointer</h2>
console.log(`My name is ${topicId}`);
console.log('${topicId}');

javascript substitute value of variable
var name = "javascript";
console.log(`My name is ${name}`);
// My name is javascript

<h2>access href.text</h2>
window.location.href.text()

<h2>slide show</h2>
&lt;img name="slide">
&lt;script>
var i = 0; 			// Start Point
var time = 3000;	// Time Between Switch
// Image List
images = [
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/1_1.jpg",
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/2avatar.jpg",
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/3_1.jpg",
"https://cdnimgzh.vietnamplus.vn/t870/uploaded/zokttb/2021_11_17/4.jpg",
]
// Change Image
function changeImg(){
	document.slide.src = images[i]; // element name is slide
	if(i &lt; images.length - 1){ // Check If Index Is Under Max
	  i++;  // Add 1 to Index
	} else { 
		i = 0; // Reset Back To O
	}
	setTimeout("changeImg()", time); // Run function every x seconds
}
window.onload=changeImg; // Run function when page loads
&lt;/script>

<h2>to pass variable in querySelector function()</h2>
https://www.codegrepper.com/code-examples/javascript/how+to+pass+variable+in+querySelector+function%28%29

querySelector with very long selector
document.querySelector('#site-modal > div > div > div > div.modal-body.bb-modal-body-tiled.pb-0 > div:nth-child(3) > div > section > div.bb-tile-content > div > div:nth-child(2) > div > div.collapse.toggleinfo > div:nth-child(5) > div.col-xs-6 > a').outerHTML

(variableInBROWSER => {
  return document.querySelector(variableInBROWSER).innerHTML};
);


// This selects the first element with that name
document.querySelector('[name="your-selector-name-here"]');

<H2>scroll to bottom of div</H2>

// To scroll to the bottom of a div
const theElement = document.getElementById('elementID');
const scrollToBottom = (node) => {
	node.scrollTop = node.scrollHeight;
}
scrollToBottom(theElement); // The specified node scrolls to the bottom.


// without smooth-scroll
const scrollToBottom = () => {
		divRef.current.scrollTop = divRef.current.scrollHeight;
};

//with smooth-scroll
const scrollToBottomWithSmoothScroll = () => {
   divRef.current.scrollTo({
        top: divRef.current.scrollHeight,
        behavior: 'smooth',
      })
}
scrollToBottom()
scrollToBottomWithSmoothScroll()

//scroll to the bottom of "#myDiv"
var myDiv = document.getElementById("myDiv");
    myDiv.scrollTop = myDiv.scrollHeight;

//scroll to the bottom of "#myDiv"
$("#mydiv").scrollTop($("#mydiv")[0].scrollHeight);


<h2>Using Chrome JavaScript Debugger to break on page loading events</h2>
https://stackoverflow.com/questions/6727370/using-chrome-javascript-debugger-how-to-break-on-page-loading-events
https://developer.chrome.com/docs/devtools/javascript/breakpoints/#event-listeners

In Chrome's Developer Tools, go to the Sources tab. 
On the right, open up Event Listener Breakpoints, and you can set breakpoints on events.
It sounds as if you'll want to set your breakpoint on DOMContentLoaded, which is under the DOM Mutation section.

After you do this, reload the page and you'll end up in the debugger.

<h2>new JavaScript language features</h2>
<div id="newFeaturestoc" class="toc"><a href="#newFeaturestopic-0" target="_self" onclick="jumpto(0)">String.prototype.replaceAll</a><br><a href="#newFeaturestopic-1" target="_self" onclick="jumpto(1)">promise.any()</a><br><a href="#newFeaturestopic-2" target="_self" onclick="jumpto(2)">AggregateError</a><br><a href="#newFeaturestopic-3" target="_self" onclick="jumpto(3)">New logical assignment operators</a><br><a href="#newFeaturestopic-4" target="_self" onclick="jumpto(4)">Nullish assignment (??=)</a><br><a href="#newFeaturestopic-5" target="_self" onclick="jumpto(5)">And assignment (&amp;&amp;=)</a><br><a href="#newFeaturestopic-6" target="_self" onclick="jumpto(6)">Or assignment (||=)</a><br><a href="#newFeaturestopic-7" target="_self" onclick="jumpto(7)">WeakRef</a><br><a href="#newFeaturestopic-8" target="_self" onclick="jumpto(8)">FinalizationRegistry</a><br><a href="#newFeaturestopic-9" target="_self" onclick="jumpto(9)">Numeric literal separators</a><br><a href="#newFeaturestopic-10" target="_self" onclick="jumpto(10)">Array.prototype.sort improvements</a><br></div></center><br><br>

<h3 id="newFeaturestopic-0">String.prototype.replaceAll</h3>
The <code>replaceAll()</code> method takes a string or regular expression, called the <em>pattern</em>, as its first argument. 
The second argument is the pattern's <em>replacement</em>.
Given the first and second argument, <code>replaceAll()</code> returns a new string that will be the source string with all instances of the pattern swapped for the replacement. 

The source string is not affected.In ECMAScript 2021, <code>replaceAll()</code> joins ECMAScript 2020’s <code>matchAll()</code> in improving the inherent capabilities of JavaScript’s built-in <code>String</code> object.The <code>replaceAll()</code> method works exactly like <code>replace()</code>, but applies to all occurrences in the string, instead of just the first one. 
It’s a welcome addition after years of having to use a library or hand-coded solution.
Listing 1 shows a simple example, wherein we mangle some Shakespeare.

<h4>Listing 1. replaceAll()</h4>
<code>let quote = "all the world's a stage, and all the men and women merely players";
let newQuote = quote.replaceAll("all", "most of");
console.log(newQuote);</code>

<h3 id="newFeaturestopic-1">promise.any()</h3>The <code>promise.any()</code> method takes a collection of promises and allows you to respond to the first one that completes successfully by returning a new promise.
If any promises are rejected, they are ignored. 
(Note this method's contrast with <code>promise.all()</code>, which stops with any error or rejection; and with <code>promise.allSettled()</code>, which lets you observe all promises that resolved in a collection, even if there were intervening errors.)
If any of the promises error out, <code>promise.any()</code> will still act upon the first resolved promise in the collection.
The <code>promise.any()</code> method returns a rejected promise if none of the passed-in promises resolves. 

The error it returns is <code>AggregateError</code>, which is a new error type also introduced by ECMAScript 2021. 
<code>AggregateError</code> represents the summary of all errors encountered.You can use <code>promise.any()</code> to roll up many promises into a single one. 
This promise will resolve to whichever of the collection resolves first, ignoring errors and rejections. 

Listing 2 has a simple example.
<h4>Listing 2. promise.any()—all resolved</h4><code>
const promise1 = new Promise((resolve, reject) =&gt; {
  setTimeout(resolve, 1000, "1 second");
});
const promise2 = new Promise((resolve, reject) =&gt; {
  setTimeout(resolve, 2000, "2 second");
});
let promises = [promise1, promise2];
  Promise.any(promises).then((firstResolved) =&gt; {
  console.log(firstResolved); // outputs “1 second”
})

</code>Now consider Listing 3, wherein all promises eventually fail as rejected.

<h4>Listing 3. promise.any()—all rejected</h4><code>
const promise1 = new Promise((resolve, reject) =&gt; {
  setTimeout(reject, 1000, "1 second");
});
const promise2 = new Promise((resolve, reject) =&gt; {
  setTimeout(reject, 2000, "2 second");
});
let promises = [promise1, promise2];
  Promise.any(promises).then((firstResolved) =&gt; {
  console.log(firstResolved);
}).catch((err) =&gt; { console.log("error: " + err) }) // outputs error: AggregateError: All promises were rejected

</code>In Listing 3, we add a catch handler, which fires after both promises are rejected. 
Notice that <code>AggregateError</code> is an object holding information about the failed promises. 
Let's get a closer look at <code>AggregateError</code>, which is another new feature in ECMAScript 2021.

<h3 id="newFeaturestopic-2">AggregateError</h3><code>AggregateError</code> is a special kind of error subclass that combines many errors into a summary object. 

As you saw, the <code>promise.any()</code> method in Listing 3 created an <code>AggregateError</code>.In that example, all promises passed to <code>promise.any()</code> failed, so the method returned an <code>AggregateError</code>. 
The error contained a message describing the error and an array with details about each error. 
Listing 4 shows the contents of the error returned.
<h4>Listing 4. AggregateError</h4><code>
AggregateError: All promises were rejected
errors: Array(2)

0: "1 second"
1: "2 second"
length: 2
message: "All promises were rejected"
stack: "AggregateError: All promises were rejected"
</code>As shown, <code>AggregateError</code> gives you access to the promise messages that contributed to the error, via <code>AggregateError.errors</code>.
<h3 id="newFeaturestopic-3">New logical assignment operators</h3>JavaScript has familiar math assignment operators such as <code>+=</code>, which perform the operation and assignment in one go, as a kind of convenience. 

ECMAScript 2021 adds similar support to the logical operators <code>||</code>, <code>??</code>, and <code>&amp;&amp;</code>.Let’s take a look at each of these.<h3 id="newFeaturestopic-4">Nullish assignment (??=)</h3>You can use the nullish assignment operator to test a variable for being null or undefined. 
If the variable is null or undefined, you can assign the right side of the expression to the variable. 
Listing 5 is an example.
<h4>Listing 5. The ??= assignment in action</h4><code>
let quote = "When goodness is lost there is morality.";
let existingQuote = "A leader is best when people barely know he exists";
let nonExistingQuote = null;
existingQuote ??= quote;
nonExistingQuote ??= quote;
console.log(existingQuote); // A leader is best when people barely know he exists
console.log(nonExistingQuote); // When goodness is lost there is morality.
</code>Notice that when used on a variable that exists, like <code>existingQuote</code>, the nullish assignment operator does nothing. 

When used on <code>nonExistingQuote</code>, however, it assigns the quote a new value. 
Even if the string were empty for <code>existingQuote</code> (which is a falsy value in JavaScript), the nullish assignment will not replace it; it will remain an empty string. 
That is the essence of the operator: it only tests for null or undefined.<h3 id="newFeaturestopic-5">And assignment (&amp;&amp;=)</h3>The <em>and</em> assignment operator (<code>&amp;&amp;=</code>) tests the left side of an expression. 

If the left side is truthy, it assigns the right side of the expression. 
If it is falsy, the operator does nothing. 
Listing 6 shows a simple example.
<h4>Listing 6. The &amp;&amp;= assignment in action</h4><code>
let emptyString = "";
emptyString &amp;&amp;= "bar";
console.log (emptyString); // “”
let nonEmptyString = "foo";
nonEmptyString &amp;&amp;= "bar";
console.log(nonEmptyString); // “bar”
</code>In Listing 6, the first console log outputs an empty string. 
This is because the empty string is falsy, so the <code>&amp;&amp;=</code> operator does not assign it a new value. 

The second console outputs "<code>bar</code>". 
This is because <code>nonEmptyString</code> is “<code>foo</code>”, which is a truthy value.<code>&amp;&amp;=</code> is a kind of edge case operator, but useful when you need it.<h3 id="newFeaturestopic-6">Or assignment (||=)</h3>The <em>or</em> assignment operator is the opposite of the<em> and</em> assignment operator you just saw. 
We can use the same example from Listing 6, this time replacing <code>&amp;&amp;=</code> with <code>||=</code>.
<h4>Listing 7. The ||= assignment in action</h4><code>
let emptyString = "";
emptyString ||= "bar";
console.log (emptyString); // “bar”
let nonEmptyString = "foo";
nonEmptyString ||= "bar";
console.log(nonEmptyString); // “foo”
</code>If the left side of the expression is falsy, the <code>||=</code> assignment operator resolves to the right side. 
Therefore, in this case, the <code>emptyString</code> becomes “<code>bar</code>”. 

The <code>nonEmptyString</code> variable stays with its truthy value of “<code>foo</code>”.

<h3 id="newFeaturestopic-7">WeakRef</h3>
<a href="https://tc39.es/ecma262/#sec-weak-ref.prototype.deref" rel="nofollow">WeakRef</a> is used to refer to a target object without preserving it from garbage collection. 

It is a rather esoteric language feature, not much used by the working coder. 
The <a href="https://github.com/tc39/proposal-weakrefs/blob/master/README.md" rel="nofollow">one common use case</a> for <code>WeakRef</code> is in implementing caches or mappings for large objects, "where it’s desired that a large object is not kept alive solely because it appears in a cache or mapping.”So, if you find yourself building a caching solution for large entities, remember that <code>WeakRef</code> exists. 
Otherwise, if you are not sure about needing a <code>WeakRef</code> variable reference, you probably should avoid using it. 

(The spec itself recommends  avoidance.)
<h3 id="newFeaturestopic-8">FinalizationRegistry</h3>It is a bit of programming irony that JavaScript introduced <code>FinalizationRegistry</code> almost simultaneously with Java’s <a href="https://www.infoworld.com/article/3649089/how-to-handle-java-errors-and-cleanup-without-finalize.html">deprecation of Object.finalize()</a>. 
The features are practically analogous. 
Like <code>WeakRef</code>, the specification <a href="https://github.com/tc39/proposal-weakrefs/blob/master/README.md#finalizers" rel="nofollow">warns developers away from user-defined finalizers</a>. 

For some use cases, however, the new <code>FinalizationRegistry</code> could be just what you need. 
The specification offers the example of long-running processes consuming many file handles. 
In such a case, using <code>FinalizationRegistry</code> could ensure no handles are leaked.Along with <code>WeakRef</code>, <code>FinalizationRegistry</code> fits better into the toolbox of platform and framework developers, rather than application developers.
<h3 id="newFeaturestopic-9">Numeric literal separators</h3>Numeric separators are a nicety that make looking at large number easier on the eyes. 

JavaScript can’t use commas like natural languages, because that symbol is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comma_Operator" rel="nofollow">already taken</a>. 
So, ECMAScript 2021 introduced the <em>underscore</em>.Instead of typing<code>
let distanceToSun = 91772000000;

</code>you can type<code>
let distanceToSun = 91_772_000_000;
</code>The new form is quite a bit easier to read.

<h2>The Definition element</h2>
The HTML element is used to indicate the term being defined within the context of a definition phrase or sentence. 
The element, the &lt;dt>/&lt;dd> pairing, or the  element which is the nearest ancestor of the is considered to be the definition of the term.

A validator is a program that checks for syntax errors in code or documents.

<h2>window[className]</h2>

// Would only work in browsers, not NodeJS
let className = "Paintbrush";
console.log( window[className] );

<h2>Big.js tutorial</h2>
<div id="toc" class="toc"><a href="#topic-0" target="_self">Big.js</a><br><a href="#topic-1" target="_self">Setting up Big.js</a><br><a href="#topic-2" target="_self">JavaScript Number precision error</a><br><a href="#topic-3" target="_self">Big.js example</a><br><a href="#topic-4" target="_self">Big.js pow</a><br></div></center><br><br>

Big.js tutorial shows how to work with arbitrary precision big decimal 
arithmetic in JavaScript with Big.js module.
<h3 id="topic-0">Big.js</h3>
Big.js is a small, fast JavaScript library for arbitrary-precision
decimal arithmetic.
In this article we work with Big.js in a Node application.
<h3 id="topic-1">Setting up Big.js</h3>
First, we install Big.js.
$ node -v
v18.2.0
We use Node version 18.2.0.
$ npm init -y
We initiate a new Node application.
$ npm i big.js
We install Big.js with <code>npm i big.js</code> command.

<h3 id="topic-2">JavaScript Number precision error</h3>
In the first example, we show that JavaScript Numbers are not precise for doing
arbitrary precision arithmetic.

count_currency.js

var sum = 0;
// two euros fifty-five cents
var amount = 2.55;

for (let i = 0; i &lt; 100000; i++) {
    sum += amount;
}
console.log(sum);

In the example, we add two euros fifty-five cents one hundred thousand times. 
$ nodejs numbers.js 
254999.9999995398
We have an error in the calculation.

<h3 id="topic-3">Big.js example</h3>
In the next example we correct the error with Big.js. 

main.js

import Big from 'big.js';
let val = new Big(0.0);
let amount = new Big(2.55);
let sum = val.plus(amount).times(100000);
console.log(sum.toFixed(2));

With Big.js library, the calculation is precise. 
import Big from 'big.js';
We import <code>Big</code> from the <code>big.js</code> module.
let val = new Big(0.0);
let amount = new Big(2.55);
We create two big decimal values.
let sum = val.plus(amount).times(100000);
We add the value 100000 times. Note that the big decimal values are immutable,
so we generate a new variable.
$ node main.js 
255000.00

<h3 id="topic-4">Big.js pow</h3>
The <code>pow</code> provides a high-precision power operation.

main.js

import Big from 'big.js';
let val = new Big(0.9);
let res = val.pow(3);
console.log(res);
console.log(0.9 ** 3);

The example raises the 0.9 to the power of 3 using Big.js and vanilla JS.
$ node main.js
0.729
0.7290000000000001
In this article, we have worked with arbitrary precision arithmetic in
JavaScript with the <code>Big.js</code> library.

<h2>JavaScript Classes</h2>
<div id="JavaScriptClassestoc" class="toc"><a href="#JavaScriptClassestopic-0" target="_self">JavaScript Class Syntax</a><br><a href="#JavaScriptClassestopic-1" target="_self">Using a Class</a><br><a href="#JavaScriptClassestopic-2" target="_self">The Constructor Method</a><br><a href="#JavaScriptClassestopic-3" target="_self">Class Methods</a><br></div></center><br><br>

https://www.w3schools.com/js/js_classes.asp

<h3 id="JavaScriptClassestopic-0">JavaScript Class Syntax</h3>
Use the keyword <i>class</i> to create a class.
Always add a method named <i>constructor()</i>:
A JavaScript class is <b>not</b> an object.
It is a <b>template</b> for JavaScript objects.

<b>Syntax</b>

class ClassName {
   constructor() { ... }
}

<b>Example</b>
class Car {
   constructor(name, year) {
    this.name = name;
    this.year = year;
  }
}


The example above creates a class named "Car".
The class has two initial properties: "name" and "year".

<h3 id="JavaScriptClassestopic-1">Using a Class</h3>
When you have a class, you can use the class to create objects:

<b>Example</b>
let myCar1 = new Car("Ford", 2014);
let myCar2 = new Car("Audi", 2019);

The example above uses the <b>Car class</b> to create two <b>Car objects</b>.
The constructor method is called automatically when a new object is created.

<h3 id="JavaScriptClassestopic-2">The Constructor Method</h3>
The constructor method is a special method:
It has to have the exact name "constructor"
It is executed automatically when a new object is created
It is used to initialize object properties

If you do not define a constructor method, JavaScript 
will add an empty constructor method.

<h3 id="JavaScriptClassestopic-3">Class Methods</h3>
Class methods are created with the same syntax as object methods.
Use the keyword <i>class</i> to create a class.
Always add a <i>constructor()</i> method.
Then add any number of methods.

<b>Syntax</b>

class ClassName {
  constructor() { ... }
  method_1() { ... }
  method_2() { ... }
  method_3() { ... }
}

Create a Class method named "age", that returns the Car age:
class Car {
   constructor(name, year) {
    this.name = name;
    this.year = year;
   }
  age() {
    let date = new Date();
    return date.getFullYear() - this.year;
   }
}

let myCar = new Car("Ford", 2014);
document.getElementById("demo").innerHTML =
"My car is " + myCar.age() + " years old.";

You can send parameters to Class methods:

class Car {
  constructor(name, year) {
    this.name = name;
    this.year = year;
  }
  
  age(x) {
    return x - this.year;
  }
}

  let date = new Date();
  let year = date.getFullYear();

let myCar = new 
  Car("Ford", 2014);
  document.getElementById("demo").innerHTML="My car is " + myCar.age(year) + " years old."; 

<h2>Convert Array to String Without Commas</h2>
.join method
arr.join("")

<h3>join() Method With Blank Value or Blank Space</h3>
array.join(separator)

let array = ['Le', 'sn', 'er'];
let join = array.join(""); // 'Lesner'

<i>join() Method With Blank Space</i>
let array = ['Linux', 'hint'];
let join = array.join(" ");  // 'Linux hint'

<h3>Using pop() and push() Methods</h3>
array.push(item1, item2)

the "<i>array.pop()</i>" method extracts the added elements from an array.

let array = ['Script', 'va', 'Ja']
let arrayNew = []
a=array.pop(0)  // 'Ja'
b=array.pop(1)  // 'va'
c=array.pop(2)  // 'Script'
arrayNew.push(a, b, c)
let join = arrayNew.join("")

<h3>the Combination of split() Method and join()</h3>
The "<i>split()</i>" method splits a string into a substring array. 

This method can be used along with the "<i>join()</i>" method to split the commas in the joined string values by formatting them to comma-separated merged string values.

string.split(separator, limit)

let array = ['We,b', 'si,te'];
let arrayNew = []
let join = array.join('');  // 'We,bsi,te'
let join2 = join.split(",").join('')  // 'Website'

<h2>JavaScript Global Methods and Properties</h2><table>
<tr><th>Name</th><th>Description</th></tr>
<tr><td><a href="jsref_decodeuri.asp">decodeURI()</a></td><td>Decodes a URI</td></tr>
<tr><td><a href="jsref_decodeuricomponent.asp">decodeURI
Component()</a></td><td>Decodes a URI component</td></tr>
<tr><td><a href="jsref_encodeuri.asp">encodeURI()</a></td><td>Encodes a URI</td></tr>
<tr><td><a href="jsref_encodeuricomponent.asp">encodeURI
Component()</a></td><td>Encodes a URI component</td></tr>
<tr><td><a href="jsref_escape.asp">escape()</a></td><td><span class="deprecated">Deprecated</span>.
Use instead:
<a href="jsref_encodeuri.asp">encodeURI()</a>
<a href="jsref_encodeuricomponent.asp">encodeURIComponent()</a></td></tr>
<tr><td><a href="jsref_eval.asp">eval()</a></td><td>Evaluates a string and executes it as if it was script code</td></tr>
<tr><td><a href="jsref_infinity.asp">Infinity</a></td><td>A numeric value that represents positive/negative infinity</td></tr>
<tr><td><a href="jsref_isfinite.asp">isFinite()</a></td><td>Determines whether a value is a finite, legal number</td></tr>
<tr><td><a href="jsref_isnan.asp">isNaN()</a></td><td>Determines whether a value is an illegal number</td></tr>
<tr><td><a href="jsref_nan.asp">NaN</a></td><td>&quot;Not-a-Number&quot; value</td></tr>
<tr><td><a href="jsref_number.asp">Number()</a></td><td>Converts an object\'s value to a number</td></tr>
<tr><td><a href="jsref_parsefloat.asp">parseFloat()</a></td><td>Parses a string and returns a floating point number</td></tr>
<tr><td><a href="jsref_parseint.asp">parseInt()</a></td><td>Parses a string and returns an integer</td></tr>
<tr><td><a href="jsref_string.asp">String()</a></td><td>Converts an object\'s value to a string</td></tr>
<tr><td><a href="jsref_undefined.asp">undefined</a></td><td>Indicates that a variable has not been assigned a value</td></tr>
<tr><td><a href="jsref_unescape.asp">unescape()</a></td><td><span class="deprecated">Deprecated</span>. Use instead:
<a href="jsref_decodeuri.asp">decodeURI()</a>
<a href="jsref_decodeuricomponent.asp">decodeURIComponent()</a></td></tr>
</table>
</div>
<h3>Note</h3>
Since these methods are global, and global the object is the browser window, these methods are actually window methods:
isNaN() is the same as window.isNaN().

<h2>select multiple array elements</h2>

var myArray = ["a", "b", "c", "d", "e", "f"];
var myIndices = [0, 2, 4, 6, 8];

var result = [];
myIndices.forEach(i => result.push(myArray[i]));

<h2>You cannot query html pseudo-elements with jQuery</h2>

<h2>to clone an array in JavaScript</h2>
When we need to copy an array, we often times used slice.
const sheeps = ['🐑', '🐑', '🐑'];
// Old way
const cloneSheeps = sheeps.slice();

// ES6 way
const cloneSheepsES6 = [...sheeps];

numbers = [1, 2, 3];
numbersCopy = [...numbers];

Note: This doesn’t safely copy multi-dimensional arrays.
Array/object values are copied by reference instead of by value.

Don't Use <i>=</i> to Copy an Array
Because arrays in JS are reference values, so when you try to copy it using the <i>=</i> it will only copy the reference to the original array and not the value of the array.
To create a real copy of an array, you need to copy over the value of the array under a new value variable.
That way this new array does not reference to the old array address in memory.





<br><br><br><br><br>
<script src='https://williamkpchan.github.io/LibDocs/readbook.js'></script>
<script>
var lazyLoadInstance = new LazyLoad({
    elements_selector: ".lazy"
    // ... more custom settings?
});
</script>


</body>
</html>

