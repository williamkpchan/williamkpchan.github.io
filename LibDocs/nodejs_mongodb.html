<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width"/>
<style>

table.w3-table-all{margin:20px 0}
.top {
 position:relative;
 background-color:black;
 height:68px;
 padding-top:20px;
 line-height:50px;
 overflow:hidden;
 z-index:2;
}
body {
 background-color: #000000;
 color: MediumSeaGreen;
 margin-left: 14%;
 margin-right: 14%;
 font-size: 24px;
}
a { text-decoration: none;
	color: green;}
a:visited { color: #88C898;}
a:hover,a:active{color:red}
A:focus {	color: red;}
code { color: gray; background-color: #001010; font-size: 18px;}
pre { color: gray; background-color: #001010; font-size: 18px;}
h1, h2, h3, h4, h5, .goldword {
	color: gold;
}
table{
	width: 100%;
	font-size: 20px;
	border-collapse: collapse;
	border: 1px solid gray;
}
th{
	border: 1px solid gray;
	font-weight:bold;
	color: lightgreen;
}
td{
	padding:10px;
	border: 1px dotted dimgray;
}
tr>th:first-child{
	width:40%;
}
tr>td:first-child{
	color: lime;

}
img{
	margin-top:1%;
	margin-bottom:2%;
}
.topic{
    color: lime;
}
.goldsha {
    color: white;
    border: 1px solid gold;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px gold inset;
}
.redsha {
    color: gold;
    border: 1px solid red;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px red inset;
}
.whitesha {
    color: red;
    border: 1px solid white;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -3px -2px 3px white inset;
}
.orangesha {
    color: yellow;
    border: 1px solid orange;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px orange inset;
}
.yellowsha {
    color: lime;
    border: 1px solid yellow;
    padding: 2px;
    border-radius: 3px;
	box-shadow: 3px 3px 3px silver;
	display: inline-block;
}
.greensha {
    color: lightblue;
    border: 1px solid green;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px green inset;
}
.left {
    position: absolute;
    left: 100px;
    color: GoldenRod;
    border: 1px solid GoldenRod;
    padding: 2px;
    font-size: 60%;
}
.bord {
    color: redpink;
    border: 1px solid GoldenRod;
    padding: 1px;
    font-size: 90%;
}
.yellowbord {
    color: lime;
    border: 1px solid yellow;
    padding: 2px;
    border-radius: 3px;
	box-shadow: 3px 3px 3px silver;
}
.bluebord {
    color: white;
    border: 1px solid lightblue;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px silver inset;
}
.highlight { 
    color: white;
    background-color: #002030
  }
hr {width: 50%;}
li{
	list-style-type: decimal;
}
#toc, #tang, #san, #pill {
	margin-left: 15%;
	margin-right: 15%;
	color: gold;
	padding: 1%;
	text-align: left;
	box-shadow: 5px 5px 15px silver;
	border-radius: 5px;
	border: 1px solid DarkSlateGray;
    font-size: 90%;
}
.mywords{
    color: Crimson;
}
.orangeword{
    color: orange;
}
.remarks {
	font-size: 22px;
	color: MediumSeaGreen;
}
</STYLE>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, .topic').click(function(){
    parent.history.back();
    return false;
    });
});
</script>


</head>
<body>

<center><h1>Node.js MongoDB</h1></center>
<div id="toc"><ul></ul></div>
<br>

<h4></h4>
<h4>Node.js MongoDB</h4>

<p class="intro">Node.js can be used in database applications.</p>
<p class="intro">One of the most popular NoSQL database is MongoDB.</p>


<h2>MongoDB</h2>
<p>To be able experiment with the code examples, you will need access to a 
MongoDB database.</p>
<p>You can download a free MongoDB database at
<a href="https://www.mongodb.com/" target="_blank">https://www.mongodb.com</a>.</p>

<h2>Install MongoDB Driver</h2>
<p>Let us try to access a MongDB database with Node.js.</p>
<p>To download and install the official MongoDB driver, open the Command Terminal and execute the following:</p>

<div class="w3-example">
<p>Download and install mongodb package:</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;npm install mongodb
</div>
</div>
<p>Now you have downloaded and installed a mongodb database driver.</p>
<p>Node.js can use this module to manipulate MongoDB databases:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  var mongo = require('mongodb');</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Create Database</h4>


<h2>Creating a Database</h2>
<p>To create a database in MongoDB, start by creating a MongoClient object, then specify a connection URL with the 
correct ip address and the name of the database you want to create.</p>
<p>MongoDB will create the database if it does not exist, and make a connection 
to it.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Create a database called "mydb":</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/mydb&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Database 
  created!&quot;);<br>&nbsp; db.close();<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_create_mongo_db">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_create_mongo_db.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_create_mongo_db.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_create_mongo_db.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Database created!</div>
</div>

<h4></h4>
<h4>Node.js MongoDB Create Collection</h4>

<div class="w3-panel w3-note">
  <p>A <strong>collection</strong> in MongoDB is the same as a <strong>table</strong> in MySQL</p>
</div>

<h2>Creating a Collection</h2>
<p>To create a collection in MongoDB, use the <code class="w3-codespan">createCollection()</code> method:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Create a collection called "customers":</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  &nbsp; dbo.createCollection(&quot;customers&quot;, 
  function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Collection created!&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_createcollection">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_createcollection.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_createcollection.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_createcollection.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Collection created!</div>
</div>

<h4></h4>
<h4>Node.js MongoDB Insert</h4>


<h2>Insert Into Collection</h2>
<p>To insert a record, or <em>document</em> as it is called in MongoDB, into a collection, we use the 
<code class="w3-codespan">insertOne()</code> method.</p>

<div class="w3-panel w3-note">
  <p>A <strong>document</strong> in MongoDB is the same as a <strong>record</strong> in MySQL</p>
</div>

<p>The first parameter of the <code class="w3-codespan">insertOne()</code> method is an object containing the 
name(s) and value(s) of each field in the document you want to insert.</p>
<p>It also takes a callback function where you can work with any errors, or the 
result of the insertion:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Insert a document in the "customers" collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myobj = { name: &quot;Company 
  Inc&quot;, address: &quot;Highway 37&quot; };<br>&nbsp; dbo.collection(&quot;customers&quot;).insertOne(myobj, function(err, res) {<br>
  &nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;1 
  document 
  inserted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_insert">Run example &raquo;</a>

</div>

<p>Save the code above in a file called &quot;demo_mongodb_insert.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_insert.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_insert.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  1 document inserted</div>
</div>

<div class="w3-panel w3-note">
<p><strong>Note:</strong> If you try to insert documents in a collection that do not 
exist, MongoDB will create the collection automatically.</p>
</div>

<div style="overflow:auto;text-align:center">
<!-- MidContent -->
  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>  
</div>

<h2>Insert Multiple Documents</h2>
<p>To insert multiple documents into a collection in MongoDB, we use the 
<code class="w3-codespan">insertMany()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">insertMany()</code> method 
is an array of objects, containing the data you want to 
insert.</p>
<p>It also takes a callback function where you can work with any errors, or the 
result of the insertion:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Insert multiple documents in the &quot;customers&quot; collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myobj = [<br>&nbsp;&nbsp;&nbsp; { name: 'John', address: 'Highway 71'},<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp;&nbsp;&nbsp; { name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp;&nbsp;&nbsp; { name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp;&nbsp;&nbsp; { name: 'Michael', address: 'Valley 
  345'},<br>&nbsp;&nbsp;&nbsp; { name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Betty', address: 'Green Grass 1'},<br>&nbsp;&nbsp;&nbsp; { name: 
  'Richard', address: 'Sky st 331'},<br>&nbsp;&nbsp;&nbsp; { name: 'Susan', 
  address: 'One way 98'},<br>&nbsp;&nbsp;&nbsp; { name: 'Vicky', address: 
  'Yellow Garden 2'},<br>&nbsp;&nbsp;&nbsp; { name: 'Ben', address: 'Park Lane 
  38'},<br>&nbsp;&nbsp;&nbsp; { name: 'William', address: 'Central st 954'},<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Chuck', address: 'Main Road 989'},<br>&nbsp;&nbsp;&nbsp; { name: 
  'Viola', address: 'Sideway 1633'}<br>&nbsp; ];<br>&nbsp; dbo.collection(&quot;customers&quot;).insertMany(myobj, 
  function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(&quot;Number of documents inserted: &quot; + res.insertedCount);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_insert_multiple">Run example &raquo;</a>

</div>

<p>Save the code above in a file called &quot;demo_mongodb_insert_multiple.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_insert_multiple.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_insert_multiple.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Number of documents inserted: 14</div>
</div>


<h2>The Result Object</h2>
<p>When executing the <code class="w3-codespan">insertMany()</code> method, a result object is returned.</p>
<p>The result object contains information about how the insertion affected the 
database.</p>
<p>The object returned from the example above looked like this:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  {<br>&nbsp; result: { ok: 1, n: 14 },<br>&nbsp; ops: [<br>&nbsp;&nbsp;&nbsp; { 
  name: 'John', address: 'Highway 71', _id: 58fdbf5c0ef8a50b4cdd9a84 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Peter', address: 'Lowstreet 4', _id: 58fdbf5c0ef8a50b4cdd9a85 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Amy', address: 'Apple st 652', _id: 58fdbf5c0ef8a50b4cdd9a86 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Hannah', address: 'Mountain 21', _id: 58fdbf5c0ef8a50b4cdd9a87 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Michael', address: 'Valley 345', _id: 58fdbf5c0ef8a50b4cdd9a88 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Sandy', address: 'Ocean blvd 2', _id: 58fdbf5c0ef8a50b4cdd9a89 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Betty', address: 'Green Grass 1', _id: 58fdbf5c0ef8a50b4cdd9a8a },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Richard', address: 'Sky st 331', _id: 58fdbf5c0ef8a50b4cdd9a8b },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Susan', address: 'One way 98', _id: 58fdbf5c0ef8a50b4cdd9a8c },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Vicky', address: 'Yellow Garden 2', _id: 58fdbf5c0ef8a50b4cdd9a8d },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Ben', address: 'Park Lane 38', _id: 58fdbf5c0ef8a50b4cdd9a8e },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'William', address: 'Central st 954', _id: 58fdbf5c0ef8a50b4cdd9a8f },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Chuck', address: 'Main Road 989', _id: 58fdbf5c0ef8a50b4cdd9a90 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Viola', address: 'Sideway 1633', _id: 58fdbf5c0ef8a50b4cdd9a91 } ],<br>&nbsp; 
  insertedCount: 14,<br>&nbsp; insertedIds: [<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a84,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a85,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a86,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a87,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a88,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a89,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a8a,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a8b,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a8c,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a8d,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a8e,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a8f <br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a90,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a91 ]<br>
  }</div>
</div>

<p>The values of the properties can be displayed like this:</p>

<div class="w3-example">
<h3>Example</h3>
<p>Return the number of inserted documents:</p>
<div class="w3-code notranslate w3-black">
console.log(res.insertedCount)
</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
14</div>
</div>
<h2>The _id Field</h2>
<p>If you do not specify an <code class="w3-codespan">_id</code> field, then MongoDB 
will add one for you and assign a unique id for each document.</p>
<p>In the example above no <code class="w3-codespan">_id</code> field was 
specified, and as you can see from the result object, MongoDB assigned a unique 
_id for each document.</p>
<p>If you <em>do</em> specify the <code class="w3-codespan">_id</code> field, the value must 
be unique for each document:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Insert three records in a &quot;products&quot; table, with specified 
<code class="w3-codespan">_id</code> fields:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myobj = [<br>&nbsp;&nbsp;&nbsp; { <strong>_id: 154</strong>, name: 
  'Chocolate Heaven'},<br>&nbsp;&nbsp;&nbsp; { <strong>_id: 155</strong>, name: 
  'Tasty Lemon'},<br>&nbsp;&nbsp;&nbsp; { <strong>_id: 156</strong>, name: 
  'Vanilla Dream'}<br>&nbsp; ];<br>&nbsp; dbo.collection(&quot;products&quot;).insertMany(myobj, 
  function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(res);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_insert_id">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_mongodb_insert_id.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_insert_id.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_insert_id.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  {<br>&nbsp; result: { ok: 1, n: 3 },<br>&nbsp; ops: [<br>&nbsp;&nbsp;&nbsp; { 
  _id: 154, name: 'Chocolate Heaven },<br>&nbsp;&nbsp;&nbsp; { 
  _id: 155, name: 'Tasty Lemon },<br>&nbsp;&nbsp;&nbsp; { 
  _id: 156, name: 'Vanilla Dream }<br>&nbsp; 
  insertedCount: 3,<br>&nbsp; insertedIds: [<br>&nbsp;&nbsp;&nbsp; 
  154,<br>&nbsp;&nbsp;&nbsp; 155,<br>&nbsp;&nbsp;&nbsp; 
  156 ]<br>
  }</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Find</h4>

<div class="w3-panel w3-note">
  <p>In MongoDB we use the <strong>find</strong> and <strong>findOne</strong> methods to find data in a collection.</p>
  <p>Just like the <strong>SELECT</strong> statement is used to find data in a 
  table in a MySQL database.</p>
</div>

<h2>Find One</h2>
<p>To select data from a collection in MongoDB, we can use the
<code class="w3-codespan">findOne()</code> method.</p>
<p>The <code class="w3-codespan">findOne()</code> method returns the first 
occurrence in the selection.</p>
<p>The first parameter of the <code class="w3-codespan">findOne()</code> method 
is a query object. In this example we use an empty query object, which selects 
all documents in a collection (but returns only the first document).</p>
<div class="w3-example">
<h3>Example</h3>
<p>Find the first document in the customers collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; dbo.collection(&quot;customers&quot;).findOne({}, function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result.name);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_findone">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_findone.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_findone.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_findone.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">Company Inc.</div>
</div>

<div style="overflow:auto;text-align:center">
<!-- MidContent -->
  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>  
</div>

<h2>Find All</h2>
<p>To select data from a table in MongoDB, we can also use the
<code class="w3-codespan">find()</code> method.</p>
<p>The <code class="w3-codespan">find()</code> method returns all 
occurrences in the selection.</p>
<p>The first parameter of the <code class="w3-codespan">find()</code> method 
is a query object. In this example we use an empty query object, which selects 
all documents in the collection.</p>
<div class="w3-panel w3-note">
  <p>No parameters in the find() method gives you the same result as <strong>SELECT *</strong> in MySQL.</p>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>Find all documents in the customers collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({}).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_find.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_find.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_find.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84 , name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85 , name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86 , name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87 , name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88 , name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89 , name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a , 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b , name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c , name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d , name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e , name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f , name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90 , name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91 , name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>
<h2>Find Some</h2>
<p>The second parameter of the <code class="w3-codespan">find()</code> method 
is an object describing which fields to include in the result.</p>
<p>This parameter is optional, and if omitted, all fields will be included in 
the result.</p>

<div class="w3-example">
<h3>Example</h3>
<p>Return the fields &quot;name&quot; and &quot;address&quot; of all documents in the customers collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { _id: 0, name: 1, address: 
  1 }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_find_fields.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_find_fields.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_find_fields.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { name: 'John', address: 'Highway 71'},<br>&nbsp; { name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; {&nbsp;name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>

<div class="w3-panel w3-note">
<p>You are not allowed to specify both 0 and 1 values in the same object (except 
if one of the fields is the _id field). If you specify a field with the value 0, all other fields get the value 1, 
and vice versa:</p>
</div>


<div class="w3-example">
<h3>Example</h3>
<p>This example will exclude &quot;address&quot; from the result:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { address: 0 }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields4">Run example &raquo;</a>
</div>

<div class="w3-panel w3-note">
<p>To exclude the _id field, you must set its value to 0:</p>
</div>


<div class="w3-example">
<h3>Example</h3>
<p>This example will return only the &quot;name&quot; field:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { _id: 0, name: 1 }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields3">Run example &raquo;</a>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>This example will give you the same result as the first example; return all 
fields except the _id field:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { _id: 0 }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields2">Run example &raquo;</a>
</div>

<div class="w3-example w3-warning">
<h3>Example</h3>
<p>You get an error if you specify both 0 and 1 values in the same object 
(except if one of the fields is the _id field):</p>
<div class="w3-code notranslate jsHigh" style="border-left:4px solid transparent">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { name: 1, address: 0 }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields_error">Run example &raquo;</a>
</div>
<h2>The Result Object</h2>
<p>As you can see from the result of the example above, the result can be converted into an array containing each 
document as an object.</p>
<p>To return e.g. the address of the third document, just refer to the third array 
object's address property:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Return the address of the third document:</p>
<div class="w3-code notranslate w3-black">
  console.log(result[2].address);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Apple st 652</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Query</h4>


<h2>Filter the Result</h2>
<p>When finding documents in a collection, you can filter the result by using a 
query object.</p>
<p>The first argument of the <code class="w3-codespan">find()</code> method 
is a query object, and is used to limit the search.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Find documents with the address &quot;Park Lane 38&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var query = { address: &quot;Park Lane 38&quot; };<br></strong>&nbsp; dbo.collection(&quot;customers&quot;).find(<strong>query</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_query">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_query.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_query.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_query.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8e 
  , name: 'Ben', address: 'Park Lane 38' }<br>]</div>
</div>

<div style="overflow:auto;text-align:center">
<!-- MidContent -->
  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>  
</div>

<h2>Filter With Regular Expressions</h2>
<p>You can write regular expressions to find exactly what you are searching for.</p>


<div class="w3-panel w3-note">
  <p><strong>Regular expressions can only be used to query <em>strings</em>.</strong></p>
</div>

<p>To find only the documents where the &quot;address&quot; field starts with the letter "S", use the regular 
expression <code class="w3-codespan">/^S/</code>:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Find documents where the address starts with the letter "S":</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  &nbsp; var query = { address: <strong>/^S/</strong> };<br>&nbsp; dbo.collection(&quot;customers&quot;).find(query).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_query_s">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_query_s.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_query_s.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_query_s.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b , name: 'Richard', 
  address: 'Sky st 331' },<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91 , name: 'Viola', address: 'Sideway 
  1633' }<br>]</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Sort</h4>


<h2>Sort the Result</h2>
<p>Use the <code class="w3-codespan">sort()</code> method to sort the result in ascending or descending order.</p>
<p>The <code class="w3-codespan">sort()</code> method takes one parameter, an 
object defining the sorting order.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Sort the result alphabetically by name:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var mysort = { name: 1 };<br></strong>&nbsp; dbo.collection(&quot;customers&quot;).find()<strong>.sort(mysort)</strong>.toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_sort">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_sort.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_sort.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_sort.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86, name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e, name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a, 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90, name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84, name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88, name: 'Michael', address: 'Valley 345'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c, name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d, name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91, name: 'Viola', address: 'Sideway 
  1633'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f, name: 'William', 
  address: 'Central st 954'}<br>]</div>
</div>

<div style="overflow:auto;text-align:center">
<!-- MidContent -->
  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>  
</div>

<h2>Sort Descending</h2>
<p>Use the value -1 in the sort object to sort descending.</p>
<div class="w3-panel w3-note">
  <p>{ name: 1 } // ascending<br>{ name: -1 } // descending</p>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>Sort the result reverse alphabetically by name:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var mysort = { name: -1 };<br></strong>&nbsp; dbo.collection(&quot;customers&quot;).find()<strong>.sort(mysort)</strong>.toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_sort_desc">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_sort_desc.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_sort_desc.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_sort_desc.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f, name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91, name: 'Viola', address: 'Sideway 
  1633'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d, name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c, name: 'Susan', address: 'One way 
  98'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88, name: 'Michael', address: 'Valley 345'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84, name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90, name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a, 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e, name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86, name: 'Amy', 
  address: 'Apple st 652'}<br>]</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Delete</h4>


<h2>Delete Document</h2>
<p>To delete a record, or document as it is called in MongoDB, we use the
<code class="w3-codespan">deleteOne()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">deleteOne()</code> method 
is a query object defining which document to delete.</p>
<div class="w3-panel w3-note">
<p><strong>Note:</strong> If the query finds more than one document, only the first 
occurrence is deleted.</p>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>Delete the document with the address &quot;Mountain 21&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>
  MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var myquery = { address: 'Mountain 21' };<br></strong>&nbsp; 
  dbo.collection(&quot;customers&quot;).deleteOne(myquery, function(err, obj) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;1 
  document deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_delete" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_delete.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_delete.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_delete.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">1 record deleted</div>
</div>

<div style="overflow:auto;text-align:center">
<!-- MidContent -->
  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>  
</div>

<h2>Delete Many</h2>
<p>To delete more than one document, use the
<code class="w3-codespan">deleteMany()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">deleteMany()</code> method 
is a query object defining which documents to delete.</p>

<div class="w3-example">
<h3>Example</h3>
<p>Delete all documents were the address starts with the letter &quot;O&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>
  MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var myquery = { address: /^O/ };<br></strong>&nbsp; 
  dbo.collection(&quot;customers&quot;).deleteMany(myquery, function(err, obj) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(obj.result.n + &quot; 
  document(s) deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_delete_many" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_delete_many.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_delete_many.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_delete_many.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">2 document(s) deleted</div>
</div>
<h2>The Result Object</h2>
<p>The <code class="w3-codespan">deleteMany()</code> method returns an object which contains information about how 
the execution affected the database.</p>
<p>Most of the information is not important to understand, but one object inside 
the object is called &quot;result&quot; which tells us if the execution went OK, and how 
many documents were affected.</p>
<p>The result object looks like this:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  { n: 2, ok: 1 }</div>
</div>

<p>You can use this object to return the number of deleted documents:</p>


<div class="w3-example">
<h3>Example</h3>
<p>Return the number of deleted documents:</p>
<div class="w3-code notranslate w3-black">
  console.log(obj.result.n);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  2</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Drop</h4>


<h2>Drop Collection</h2>
<p>You can delete a table, or collection as it is called in MongoDB, by using 
the <code class="w3-codespan">drop()</code> method.</p>
<p>The <code class="w3-codespan">drop()</code> method takes a callback function 
containing the error object and the result parameter which returns true if the collection was dropped successfully, 
otherwise it returns false.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Delete the &quot;customers&quot; table:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).drop(function(err, delOK) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; if (delOK) console.log(&quot;Collection 
  deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_drop">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_drop.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_drop.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_drop.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">Collection deleted</div>
</div>

<div style="overflow:auto;text-align:center">
<!-- MidContent -->
  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>  
</div>

<h2>db.dropCollection</h2>
<p>You can also use the <code class="w3-codespan">dropCollection()</code> method to delete a table (collection).</p>
<p>The <code class="w3-codespan">dropCollection()</code> method takes two parameters: the name of the collection 
and a callback function.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Delete the &quot;customers&quot; collection, using dropCollection():</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<strong><br>&nbsp; 
  dbo.dropCollection(&quot;customers&quot;, function(err, delOK) {<br></strong>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; if (delOK) console.log(&quot;Collection 
  deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_dropcollection">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_dropcollection.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_dropcollection.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_dropcollection.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">Collection deleted</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Update</h4>


<h2>Update Document</h2>
<p>You can update a record, or document as it is called in MongoDB, by using 
the <code class="w3-codespan">updateOne()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">updateOne()</code> method 
is a query object defining which document to update.</p>
<div class="w3-panel w3-note">
<p><strong>Note:</strong> If the query finds more than one record, only the first 
occurrence is updated.</p>
</div>
<p>The second parameter  
is an object defining the new values of the document.<!-- By default, all fields in 
the 
document gets updated, (except the <code class="w3-codespan">_id</code> field) 
so remember to set the value of every field, otherwise the value will be left 
empty.--></p>


<div class="w3-example">
  <h3>Example</h3>
<p>Update the document with the address &quot;Valley 345&quot; to name=&quot;Mickey&quot; and 
address=&quot;Canyon 123&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://127.0.0.1:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myquery = { address: &quot;Valley 345&quot; };<br>&nbsp; var newvalues = { 
  $set: {name: 
  &quot;Mickey&quot;, address: &quot;Canyon 123&quot; } };<br>&nbsp; dbo.collection(&quot;customers&quot;).updateOne(myquery, 
  newvalues, function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(&quot;1 document updated&quot;);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_update_one" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_update_one.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_update_one.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_update_one.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">1 document updated</div>
</div>

<div style="overflow:auto;text-align:center">
<!-- MidContent -->
  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>  
</div>

<h2>Update Only Specific Fields</h2>
<p>When using the <code class="w3-codespan">$set</code> operator, only the 
specified fields are updated:</p>
<div class="w3-example">
  <h3>Example</h3>
<p>Update the address from &quot;Valley 345&quot; to &quot;Canyon 123&quot;:</p>
<div class="w3-code notranslate jsHigh">
  ...<br>&nbsp; var myquery = { address: &quot;Valley 345&quot; };<br>&nbsp; var newvalues 
  = { <strong>$set: { address: &quot;Canyon 123&quot; }</strong> };<br>&nbsp; dbo.collection(&quot;customers&quot;).updateOne(myquery, 
  newvalues, function(err, res) {<br>...</div>
  <a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_update_set">Run example &raquo;</a>
</div>
<h2>Update Many Documents</h2>
<p>To update <em>all</em> documents that meets the criteria of the query, use 
the <code class="w3-codespan">updateMany()</code> method.</p>
<div class="w3-example">
  <h3>Example</h3>
<p>Update all documents where the name starts with the letter &quot;S&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://127.0.0.1:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myquery = { address: /^S/ };<br>&nbsp; var newvalues = {$set: {name: 
  &quot;Minnie&quot;} };<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).updateMany(myquery, newvalues, function(err, 
  res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(res.result.nModified + &quot; document(s) updated&quot;);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_update_many" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_update_many.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_update_many.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_update_many.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">2 document(s) updated</div>
</div>


<h2>The Result Object</h2>
<p>The <code class="w3-codespan">updateOne()</code> and the
<code class="w3-codespan">updateMany()</code> methods return an object which contains information about how 
the execution affected the database.</p>
<p>Most of the information is not important to understand, but one object inside 
the object is called &quot;result&quot; which tells us if the execution went OK, and how 
many documents were affected.</p>
<p>The result object looks like this:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  { n: 1, nModified: 2, ok: 1 }</div>
</div>

<p>You can use this object to return the number of updated documents:</p>


<div class="w3-example">
<h3>Example</h3>
<p>Return the number of updated documents:</p>
<div class="w3-code notranslate w3-black">
  console.log(res.result.nModified);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  2</div>
</div>
<h4></h4>
<h4>Node.js MongoDB Limit</h4>


<h2>Limit the Result</h2>
<p>To limit the result in MongoDB, we use the <code class="w3-codespan">limit()</code> 
method.</p>
<p>The <code class="w3-codespan">limit()</code> method takes one parameter, a number defining how many documents 
to return.</p>

<p>Consider you have a "customers" collection:</p>
<div class="w3-example">
<h3>customers</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84 , name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85 , name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86 , name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87 , name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88 , name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89 , name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a , 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b , name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c , name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d , name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e , name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f , name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90 , name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91 , name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>


<div class="w3-example">
  <h3>Example</h3>
<p>Limit the result to only return 5 documents:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find()<strong>.limit(5)</strong>.toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_limit" target="_blank">Run example &raquo;</a>
</div>


<p>Save the code above in a file called &quot;demo_mongodb_limit.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_limit.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_limit.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<h3>customers</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84 , name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85 , name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86 , name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87 , name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88 , name: 'Michael', 
  address: 'Valley 345'}<br>]</div>
</div>

<p>As you can see from the result above, only the 5 first documents were 
returned.</p>

<h4></h4>
<h4>Node.js MongoDB Join</h4>


<h2>Join Collections</h2>
<p>MongoDB is not a relational database, but you can perform a left outer join 
by using the <code class="w3-codespan">$lookup</code> stage.</p>
<p>The <code class="w3-codespan">$lookup</code> stage lets you specify which 
collection you want to join with the current collection, and which 
fields that should match.</p>

<p>Consider you have a "orders" collection and a "products" collection:</p>
<div class="w3-example">
<h3>orders</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 1, product_id: 
  154, status: 1 }<br>]</div>
</div>

<div class="w3-example">
<h3>products</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 154, name: 
  'Chocolate Heaven' },<br>&nbsp; { _id: 155, name: 'Tasty Lemons' },<br>&nbsp; { 
  _id: 156, name: 'Vanilla Dreams' }<br>]</div>
</div>

<div class="w3-example">
  <h3>Example</h3>
<p>Join the matching "products" document(s) to the "orders" collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://127.0.0.1:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection('orders').aggregate([<br><strong>&nbsp;&nbsp;&nbsp; { $lookup:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from: 'products',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  localField: 'product_id',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  foreignField: '_id',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  as: 'orderdetails'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp; 
  }<br></strong>&nbsp;&nbsp;&nbsp; ]).toArray(function(err, 
  res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(JSON.stringify(res));<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_join" target="_blank">Run example &raquo;</a>
</div>


<p>Save the code above in a file called &quot;demo_mongodb_join.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_join.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_join.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { &quot;_id&quot;: 1, &quot;product_id&quot;: 
  154, &quot;status&quot;: 1, &quot;orderdetails&quot;: [<br>&nbsp;&nbsp;&nbsp; { &quot;_id&quot;: 154, &quot;name&quot;: 
  &quot;Chocolate Heaven&quot; } ]<br>&nbsp; }<br>]</div>
</div>
<p>As you can see from the result above, the matching document from the products 
collection is included in the orders collection as an array.</p>


<br>
<br><br><br><br><br>
<script>
  $(function() {
    var toc = $('#toc>ul');

    function makeLi(text, href) {
      return $('<a href="' + href + '" target="_self">' + text + '</a><br>');
    }

    $('h2, h4').each(function(i) {
      var chapter = $(this), chapterNumber = i + 1;
      toc.append(
        makeLi(chapter.text(), '#chapter-' + chapterNumber)
      );
      chapter.attr('id', 'chapter-' + chapterNumber);
    });

  });
</script>
</body>
</html>

