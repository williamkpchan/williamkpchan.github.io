<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width"/>
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, strong,  div.title').click(function(){
    parent.history.back();
    return false;
    });
});
</script>
<style>
body{width:80%;margin-left: 10%}
strong, h1, h2 {color: gold;}
</style>
</head><body>
<center><h1>DiagrammeR Docs</h1>
<div id="toc"></div></center>
<br>
<br>
<br>

        <p>Get an overview of DiagrammeR, learn the syntax, check out some examples.
<br>
<a href="https://www.graphviz.org">What is Graphviz</a>
</p>
<p class="lead"><strong>Graphviz</strong> support is an integral part of the <strong>DiagrammeR</strong> package. <strong>Graphviz</strong> consists of a graph description language called the <strong>DOT</strong> language and it also comprises various tools that can process the <strong>DOT</strong> language. <strong>DOT</strong> is highly customizable and it allows you to control line colors, arrow shapes, node shapes, and many other layout features.</p>
                    <h2 id="diagrammer-implementation">DiagrammeR Implementation</h2>
                    <p>For <strong>Graphviz</strong> graphs, <strong>DiagrammeR</strong> uses the processing function called <code>grViz()</code>. What you pass into <code>grViz()</code> is a valid graph specification in the <strong>DOT</strong> language. The <strong>DOT</strong> graph description can either be delivered to <code>grViz()</code> in the form of a string, a reference to a <strong>Graphviz</strong> file (with a <code>.gv</code> file extension), or as a text connection.</p>
                    <p>All of the code examples provided in later sections call the <code>grViz()</code> function in an <strong>R</strong> script and pass in a graph description as a string. It is important to consider that strings in <strong>R</strong> cannot contain any unescaped double-quote characters. However, the <code>grViz()</code> function allows for single-quote characters in their place. As a further convenience, when the <strong>DOT</strong> graph description is supplied as a file (e.g., 'dot-graph.gv') or as a text connection, either format for quotes will be accepted.</p>
                    <p>In very recent builds of <strong>RStudio</strong>, the use of an external text file with the <code>.gv</code> file extension can provide the advantage of syntax coloring and previewing in the <strong>RStudio</strong> Viewer pane after saving (if 'Preview on Save' is selected), or, by pressing the 'Preview' button on the Source pane.</p>

                    <img src="http://rich-iannone.github.io/DiagrammeR/img/rstudio-graphviz-syntax-coloring.png" class="img-responsive center-block">
                    <h2 id="defining-a-graphviz-graph">Defining a Graphviz Graph</h2>
                    <p>The <strong>Graphviz</strong> graph specification must begin with a directive stating whether a directed graph (<code>digraph</code>) or an undirected graph (<code>graph</code>) is desired. Semantically, this indicates whether or not there is a natural direction from one of the edge's nodes to the other. An optional graph ID follows this and paired curly braces denotes the body of the statement list (<code>stmt_list</code>).</p>
                    <p>Optionally, a graph may also be described as <code>strict</code>. This forbids the creation of multi-edges (i.e., there can be at most one edge with a given tail node and head node in the directed case). For undirected graphs, there can be at most one edge connected to the same two nodes. Subsequent <code>edge</code> statements using the same two nodes will identify the edge with the previously defined one and apply any attributes given in the <code>edge</code> statement.</p>
                    <p>Here is the basic structure:</p>
                    <div><pre><code class="prettyprint">[strict] (graph | digraph) [ID] '{' stmt_list '}'</code></pre></div>
                    <h2 id="statements">Statements</h2>
                    <p>The graph statement (<code>graph_stmt</code>), the node statement (<code>node_stmt</code>), and the edge statement (<code>edge_stmt</code>) are the three most commonly used statements in the <strong>Graphviz</strong> <strong>DOT</strong> language. Graph statements allow for attributes to be set for all components of the graph. Node statements define and provide attributes for graph nodes. Edge statements specify the edge operations between nodes and they supply attributes to the edges. For the edge operations, a directed graph must specify an edge using the edge operator <code>-&gt;</code> while an undirected graph must use the <code>--</code> operator.</p>
                    <p>Within these statements follow statement lists. Thus for a node statement, a list of nodes is expected. For an edge statement, a list of edge operations. Any of the list items can optionally have an attribute list (<code>attr_list</code>) which modify the attributes of either the node or edge.</p>
                    <p>Comments may be placed within the statement list. These can be marked using a <code>//</code> or a <code>/* */</code> structure. Comment lines are denoted by a <code>#</code> character. Multiple statements within a statement list can be separated by linebreaks or ; characters between multiple statements</p>
                    <p>Here is an example where nodes (in this case styled as boxes and circles) can be easily defined along with their connections:</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/Example_7a.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">grViz("
digraph boxes_and_circles {

  # a 'graph' statement
  graph [overlap = true, fontsize = 10]

  # several 'node' statements
  node [shape = box,
        fontname = Helvetica]
  A; B; C; D; E; F

  node [shape = circle,
        fixedsize = true,
        width = 0.9] // sets as circles
  1; 2; 3; 4; 5; 6; 7; 8

  # several 'edge' statements
  A-&gt;1 B-&gt;2 B-&gt;3 B-&gt;4 C-&gt;A
  1-&gt;D E-&gt;A 2-&gt;4 1-&gt;5 1-&gt;F
  E-&gt;6 4-&gt;6 5-&gt;7 6-&gt;7 3-&gt;8
}
")</code></pre>
                    </div>
                    <h2 id="subgraphs-and-clusters">Subgraphs and Clusters</h2>
                    <p>Subgraphs play three roles in <strong>Graphviz</strong>. First, a subgraph can be used to represent graph structure, indicating that certain nodes and edges should be grouped together. This is the usual role for subgraphs and typically specifies semantic information about the graph components. It can also provide a convenient shorthand for edges. An edge statement allows a subgraph on both the left and right sides of the edge operator. When this occurs, an edge is created from every node on the left to every node on the right. For example, the specification</p>
                    <div><pre><code>A -&gt; {B C}</code></pre></div>
                    <p>is equivalent to</p>
                    <div><pre><code>A -&gt; B
A -> C</code></pre></div>
                    <p>In the second role, a subgraph can provide a context for setting attributes. For example, a subgraph could specify that blue is the default color for all nodes defined in it. In the context of graph drawing, a more interesting example is</p>
                    <div><pre><code>subgraph {
rank = same; A; B; C;
}</code></pre></div>
                    <p>This anonymous subgraph specifies that the nodes <code>A</code>, <code>B</code> and <code>C</code> should all be placed on the same rank.</p>
                    <p>The third role for subgraphs directly involves how the graph will be laid out by certain layout types. If the name of the subgraph begins with <code>cluster</code>, <strong>Graphviz</strong> notes the subgraph as a special cluster subgraph. If supported, the layout will make it such that the nodes belonging to the cluster are drawn together, with the entire drawing of the cluster contained within a bounding rectangle.</p>
                </div>
                <div class="bs-docs-section">
                    <h1 id="attributes" class="page-header">Graphviz Attributes</h1>
                    <p class="lead"><strong>Graphviz</strong> attributes allow you to style your <strong>Graphviz</strong> graph. Combinations of attributes for nodes, edges, clusters, and for the entire graph provide for highly-customized layouts.</p>
                    <h2 id="node-attributes">Node Attributes</h2>
                    <p>All <strong>Graphviz</strong> attributes are specified by name-value pairs. Thus, to set the fillcolor of a node <code>abc</code>, one would use</p>
                    <div><pre><code>abc [fillcolor = red]</code></pre></div>
                    <p></p>
                    <div>
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/graph-functions/header_node_attributes_2x.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/graph-functions/node_attributes_2x.png" class="img-responsive center-block">
                    </div>
                    <h2 id="edge-attributes">Edge Attributes</h2>
                    <p>Edge attributes are set the same way as node attributes. For example, to set the arrowhead style of an edge <code>abc -> def</code>, one would use</p>
                    <div><pre><code>abc -> def [arrowhead = diamond]</code></pre></div>
                    <p>Quotation marks are important only for multiword attributes, such might be used in the <code>label</code> attribute.</p>
                    <div>
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/graph-functions/header_edge_attributes_2x.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/graph-functions/edge_attributes_2x.png" class="img-responsive center-block">
                    </div>
                    <h2 id="colors">Colors</h2>
                    <p>By default, <strong>Graphviz</strong> can use colors provided as hexadecimal values, or, as <strong>X11</strong> color names. The following provides the entire list of <strong>X11</strong> color names. Some colors have additional 4-color palettes based on the named color. Those additional colors can be used by appending the digits <code>1</code>-<code>4</code> to the color name. Gray (or grey) has variations from <code>0</code>-<code>100</code>. Please note that, in all color names, 'gray' is interchangeable with 'grey'.</p>
                    <div>
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/X11_Color_Names.png" class="img-responsive center-block">
                    </div>
                    <h2 id="node-shapes">Node Shapes</h2>
                    <p>There's no shortage of shapes available for nodes. Nodes can be changed from the default <code>ellipse</code> shape by using the <code>shape</code> parameter. This table provides a listing of all the possible node shapes.</p>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Node Appearance</th>
                                    <th>Value for <code>shape</code></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-node-shape-oval.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>oval</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-node-shape-diamond.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>diamond</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-node-shape-egg.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>egg</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-node-shape-plaintext.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>plaintext</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-node-shape-point.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>point</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-node-shape-square.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>square</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-node-shape-triangle.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>triangle</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <h2 id="arrow-shapes">Arrow Shapes</h2>
                    <p>The shapes of arrows are highly customizable. When defining an edge, the <code>arrowhead</code> parameter allows you change the style of arrowhead from the default <code>normal</code> arrow shape, to one of several others. Here are some of the other arrowhead types that could be used.</p>
                    <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Arrow Appearance</th>
                                    <th>Value for <code>arrowhead</code></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-normal.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>normal</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-box.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>box</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-crow.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>crow</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-curve.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>curve</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-diamond.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>diamond</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-dot.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>dot</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-inv.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>inv</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-none.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>none</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-tee.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>tee</code></td>
                                </tr>
                                <tr>
                                    <td class="col-md-1"><img src="http://rich-iannone.github.io/DiagrammeR/img/grviz-arrowhead-vee.png" height="50px"></td>
                                    <td style="vertical-align:middle;"><code>vee</code></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="bs-docs-section">
                    <h1 id="substitution" class="page-header">Graphviz Substitution</h1>
                    <p class="lead">Inspired by <strong>Razor</strong> and the footnote style in <strong>Markdown</strong>, <strong>Graphviz</strong> substitution allows for mixing in <strong>R</strong> expressions into a <strong>Graphviz</strong> graph specification without sacrificing readability.</p>
                    <h2 id="how-it-works">How It Works</h2>
                    <p>To take advantage of substitution when rendering a graph, simply use the <code>grViz()</code> function with <strong>Graphviz</strong> <strong>DOT</strong> code:</p>
                        <div>
                            <pre><code class="prettyprint">grViz("[...graph spec with substitutions using @@ notation and footnote R expressions...]")</code></pre>
                        </div>
                    <p>The notation <code>@@</code> within <strong>GraphViz</strong> <strong>DOT</strong> will indicate where the substitution is to take place and corresponding <strong>R</strong> expressions will provide values to be substituted. The <code>grViz()</code> function will autodetect whether the working <strong>Graphviz</strong> graph specification contains <code>@@</code>s between the curly braces of the <code>[graph|digraph] {...}</code> DOT construction.</p>
                        <div>
                            <pre><code class="prettyprint">grViz("
[...graph spec with substitutions using @@ notation and footnote R expressions...]
")</code></pre>
                        </div>
                    <p>If you specify a subsitution with <code>@@</code>, you must ensure there is a valid expression for that substitution. The expressions are placed as footnotes and their evaluations must result in an <strong>R</strong> vector object (i.e., not a data frame, list, or matrix). Because there is the possibility to have multiple substitutions, numbering is required. Thus, the <code>@@</code> notation is immediately followed by a number and that number should correspond to the number of the footnoted <strong>R</strong> expression.</p>
                    <p>The substitution construction is:</p>
                        <div>
                            <pre><code>"@@" + [footnote number]</code></pre>
                        </div>
                    <p>Importantly, the footnote expressions should reside below the closing curly brace of the graph or digraph expression. It should always take the form of:</p>
                        <div>
                            <pre><code>"[" + [footnote number] + "]:"</code></pre>
                        </div>
                    <p>In the simple example of specifying a single node, the following substitution syntax would be used:</p>
                        <div>
                            <pre><code>digraph {
@@1
}

[1]: 'a'</code></pre>
                        </div>
                    <p>In the above example, the <code>[1]:</code> footnote expression evaluates as <code>'a'</code>, and, that is what's substituted in place of the <code>@@1</code> (where, in turn, it will be taken as the node ID).</p>
                    <p>Substitutions can also be used to insert values from vector indices into the graph specification. Simply use this format:</p>
                        <div>
                            <pre><code>"@@" + [footnote number] + "-" + [index number]</code></pre>
                        </div>
                    <p>Here's an example of how specific values from vectors can be inserted into the graph:</p>
                        <div>
                            <pre><code>digraph {
alpha
@@1-1; @@1-2; @@1-3; @@1-4; @@1-5
@@1-6; @@1-7; @@1-8; @@1-9; @@1-10
}

[1]: LETTERS</code></pre>
                    </div>
                    <p>After evaluation of the footnote expressions and substitution, the graph specification becomes this:</p>
                    <div>
                        <pre><code>digraph {
alpha
A; B; C; D; E
F; G; H; I; J
}</code></pre>
                    </div>
                    <h2 id="examples">Examples</h2>
                    <p>The best way to demonstrate how substitution works is through a set of examples. Here is an example of substituting alphabet letters from <strong>R</strong>'s <code>LETTERS</code> constant into a <strong>Graphviz</strong> graph specification.</p>
                    <p>You can mix subtitutions of single-values objects and those specifying indices of <strong>R</strong> vector objects. As an example:</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/Graphviz_substitution.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">grViz("
digraph a_nice_graph {

# node definitions with substituted label text
node [fontname = Helvetica]
a [label = '@@1']
b [label = '@@2-1']
c [label = '@@2-2']
d [label = '@@2-3']
e [label = '@@2-4']
f [label = '@@2-5']
g [label = '@@2-6']
h [label = '@@2-7']
i [label = '@@2-8']
j [label = '@@2-9']

# edge definitions with the node IDs
a -> {b c d e f g h i j}
}

[1]: 'top'
[2]: 10:20
")</code></pre>
                    </div>
                    <p>As can be seen from the output:</p>
                    <ol>
                        <li>the node with ID <code>a</code> is given the label "top" (after substituting <code>@@1</code> with expression after the <code>[1]:</code> footnote expression)</li>
                        <li>the nodes with ID values from <code>b</code> to <code>j</code> are respectively provided values from indices 1 to 9 (using the hypenated form of <code>@@</code>) of the evaluated expression <code>10:20</code> (in the <code>[2]:</code> footnote expression)</li>
                    </ol>
                    <p>Footnote expressions are meant to be flexible. They can span multiple lines, and they can also take in objects that are available in the global workspace. So, as long as a vector object results from evaluation, substitution can be performed.</p>
                    <p>Here is a final example of a diagram created using <strong>R</strong> and <strong>RStudio</strong> information (obtained from the <code>R.Version()</code> and <code>rstudioapi::versionInfo()</code> functions). The output will of course vary by the system on which it was generated. Here is the output from the dev machine:</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/r_Information.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">grViz("
digraph nicegraph {

  # graph, node, and edge definitions
  graph [compound = true, nodesep = .5, ranksep = .25,
         color = crimson]

  node [fontname = Helvetica, fontcolor = darkslategray,
        shape = rectangle, fixedsize = true, width = 1,
        color = darkslategray]

  edge [color = grey, arrowhead = none, arrowtail = none]

  # subgraph for R information
  subgraph cluster0 {
    node [fixedsize = true, width = 3]
    '@@1-1' -&gt; '@@1-2' -&gt; '@@1-3' -&gt; '@@1-4'
    '@@1-4' -&gt; '@@1-5' -&gt; '@@1-6' -&gt; '@@1-7'
  }

  # subgraph for RStudio information
  subgraph cluster1 {
    node [fixedsize = true, width = 3]
    '@@2' -&gt; '@@3'
  }

  Information             [width = 1.5]
  Information -&gt; R
  Information -&gt; RStudio
  R -&gt; '@@1-1'            [lhead = cluster0]
  RStudio -&gt; '@@2'        [lhead = cluster1]

}

[1]: paste0(names(R.Version())[1:7], ':\\n ', R.Version()[1:7])
[2]: paste0('RStudio version:\\n ', rstudioapi::versionInfo()[[1]])
[3]: paste0('Current program mode:\\n ', rstudioapi::versionInfo()[[2]])

")</code></pre>
                    </div>
                <div class="bs-docs-section">
                    <h1 id="graphviz-layouts" class="page-header">Graphviz Layouts</h1>
                    <p class="lead"><strong>Graphviz</strong> layouts can be modified radically by rendering the graph with different <strong>Graphviz</strong> layouts.</p>
                    <h2 id="the-layouts">The Layouts</h2>
                    <p>By default, the <code>grViz()</code> function renders graphs with the standard <strong>dot</strong> layout. However, the <strong>neato</strong>, <strong>twopi</strong>, and <strong>circo</strong> layouts are selectable by setting the graph attribute <code>layout</code> equal to either <code>neato</code>, <code>twopi</code>, or <code>circo</code> in a <strong>Graphviz</strong> graph statement.</p>
                    <div>
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/Graphviz_Engines.png" class="img-responsive center-block">
                    </div>
                    <h2 id="dot">dot</h2>
                    <p>By default, the <code>grViz()</code> function renders graphs using the standard <strong>dot</strong> layout. However, the <strong>neato</strong>, <strong>twopi</strong>, and <strong>circo</strong> layouts are selectable by supplying those names in a <code>layout</code> statement.</p>
                    <div><pre><code class="prettyprint">graph [layout = dot|neato|twopi|circo]</code></pre></div>
                    <p>The <strong>dot</strong> layout flows the directed graph in the direction of rank (i.e., downstream nodes of the same rank are aligned). By default, the direction is from top to bottom (where the graph attribute <code>rankdir</code> is set to <code>TB</code>). The following examples will use the same <strong>Graphviz</strong> <strong>DOT</strong> code, differing only in the choice of layout. Here is the default <strong>dot</strong> output.</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/engine-dot-TB.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">grViz("
digraph dot {

graph [layout = dot]

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}")</code></pre>
                    </div>
                    <p>Note that in the previous example, rank 1 is the red node whereas ranks 2 and 3 are colored green and yellow, respectively. Alternatively, the rank direction can be set to left to right in a <code>graph</code> statement (<code>rankdir = LR</code>).</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/engine-dot-LR.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">grViz("
digraph dot {

graph [layout = dot,
       rankdir = LR]

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}")</code></pre>
                    </div>
                    <h2 id="neato">neato</h2>
                    <p>The <strong>neato</strong> layout provides spring model layouts. This is a suitable layout if the graph is not too large (less than 100 nodes) and you don't know anything else about it. The <strong>neato</strong> layout attempts to minimize a global energy function, which is equivalent to statistical multi-dimensional scaling. Have a look at the previous graph, rendered with the <strong>neato</strong> layout:</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/engine-neato.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">grViz("
digraph neato {

graph [layout = neato]

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}")</code></pre>
                    </div>
                    <p>Things do actually get interesting if there are lots of nodes. Here is an example of an undirected graph with 407 nodes amongst several ranks. Graph edges have varying lengths. (The code is not presented here as it is rather lenghty but it is available as a <a href="https://gist.github.com/rich-iannone/de0bb88d155a2c1c7e38">GitHub gist</a>.)</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/several-ranks-neato-overlap-true.png" class="img-responsive center-block">
                    </div>
                    <p>The graph specification can have an entirely different layout with the <strong>neato</strong> layout if the graph attribute <code>overlap</code> is set to <code>false</code> instead of the default <code>true</code> value (<a href="https://gist.github.com/rich-iannone/c58b07f992a1f9ab5d3e">GitHub gist</a>). What occurs in this case is that node overlaps are removed by a Voronoi-based technique.</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/several-ranks-neato-overlap-false.png" class="img-responsive center-block">
                    </div>
                    <h2 id="twopi">twopi</h2>
                    <p>The <strong>twopi</strong> layout provides radial layouts. Nodes are placed on concentric circles depending their distance from a given root node. In the following example, that root node is the red one.</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/engine-twopi.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">grViz("
digraph twopi {

graph [layout = twopi]

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}")</code></pre>
                    </div>
                    <h2 id="circo">circo</h2>
                    <p>With <strong>circo</strong>, a circular layout results. This is suitable for certain diagrams of multiple cyclic structures, such as certain telecommunications networks.</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/engine-circo.png" class="img-responsive center-block">
                    </div>
                    <div>
                            <pre><code class="prettyprint">grViz("
digraph circo {

graph [layout = circo]

node [shape = circle,
      style = filled,
      color = grey,
      label = '']

node [fillcolor = red]
a

node [fillcolor = green]
b c d

node [fillcolor = orange]

edge [color = grey]
a -> {b c d}
b -> {e f g h i j}
c -> {k l m n o p}
d -> {q r s t u v}
}")</code></pre>
                        </div>
                        <h1 id="mermaid" class="page-header">mermaid</h1>
                    <p class="lead">The <strong>mermaid</strong> library is part of <strong>DiagrammeR</strong>. With it, you can describe graphs and sequence diagrams.</p>
                    <h2 id="mermaid-basics">mermaid Basics</h2>
                    <p>For <strong>mermaid</strong> diagrams, <strong>DiagrammeR</strong> uses the processing function called <code>mermaid</code>. What you pass into <code>mermaid</code> is a valid graph or sequence diagram specification. The specification can either be delivered to <code>mermaid</code> in the form of a string, a reference to a <strong>mermaid</strong> file (with a <code>.mmd</code> file extension), or as a text connection.</p>
                    <p>All of the code examples provided in later sections call the <code>mermaid</code> function in an <strong>R</strong> script and pass in a specification as a string. It is important to consider that strings in <strong>R</strong> cannot contain any unescaped double-quote characters. However, the <code>mermaid</code> function allows for single-quote characters in their place. As a further convenience, when a <strong>mermaid</strong> graph description is supplied as a file (e.g., 'mermaid-graph.mmd') or as a text connection, either format for quotes will be accepted.</p>
                    <p>In very recent builds of <strong>RStudio</strong>, the use of an external text file with the <code>.mmd</code> file extension can provide the advantage of syntax coloring and previewing in the <strong>RStudio</strong> Viewer pane after saving (if 'Preview on Save' is selected), or, by pressing the 'Preview' button on the Source pane.</p>
                    <img src="http://rich-iannone.github.io/DiagrammeR/img/rstudio-mermaid-syntax-coloring.png" class="img-responsive center-block">
                    <h2 id="defining-a-mermaid-graph">Defining a mermaid Graph</h2>
                    <p>The <strong>mermaid</strong> graph specification begins with a declaration of <code>graph</code> followed by the graph direction. The directions can be</p>
                    <ul>
                        <li><code>LR</code> left to right</li>
                        <li><code>RL</code> right to left</li>
                        <li><code>TB</code> top to bottom</li>
                        <li><code>BT</code> bottom to top</li>
                        <li><code>TD</code> top down (same as TB)</li>
                    </ul>
                    <p>Nodes can be given arbitrary ID values and those IDs are displayed as text within their respective boxes. Connections between nodes are denoted by:
                    <ul>
                        <li><code>--></code> arrow connection</li>
                        <li><code>---</code> line connection</li>
                    </ul>
                    <p>Simply joining up a series of nodes in a left-to-right graph can be done in a few lines:</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_1.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph LR
  A-->B
  A-->C
  C-->E
  B-->D
  C-->D
  D-->F
  E-->F
")</code></pre>
                    </div>
                    <p>The same result can be achieved in a more succinct manner with this R statement (using semicolons between statements in the mermaid diagram spec):</p>
                    <div><pre><code>mermaid("graph LR; A-->B; A-->C; C-->E; B-->D; C-->D; D-->F; E-->F")</code></pre></div>
                    <p>Alternatively, here is the result of using the statement graph TB in place of graph LR:</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_2.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph TB
  A-->B
  A-->C
  C-->E
  B-->D
  C-->D
  D-->F
  E-->F
")</code></pre>
                    </div>
                    <p>Keep in mind that external .mmd files can also be called by the <strong>mermaid</strong> function. The file <code>graph.mmd</code> can contain the text of the diagram specification as follows:
<div><pre><code>graph LR
  A-->B
  A-->C
  C-->E
  B-->D
  C-->D
  D-->F
  E-->F</code></pre></div>
                    <p>and be rendered through:</p>
                    <div><pre><code>mermaid("graph.mmd")</code></pre></div>
                    <h2 id="node-shape-and-text">Node Shape and Text</h2>
                    <p>When assigning nodes, the default behavior is to assign the node IDs as text within the node objects. The addition of text inside node objects occurs through simultaneous assignment of both the node shape and the node label. The syntax for assigning text to a label is</p>
                    <div><pre><code>[ID][opening brace][label][closing brace]</code></pre></div>
                    <p> There the different types of patterns of opening and closing braces enclosing the <code>label</code> that change the shape of the node. Using <code>[</code> and <code>]</code> yields text in a rectangular node</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_text_1.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph LR
  A[node text]
")</code></pre>
                    </div>
                    <p>Text placed in a node shaped as a rounded rectangle is done using <code>(</code> and <code>)</code></p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_text_2.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph LR
  A(node text)
")</code></pre>
                    </div>
                    <p>A circular node with text can be created by encapsulating the text with <code>((</code> and <code>))</code></p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_text_3.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph LR
  A((node text))
")</code></pre>
                    </div>
                    <p>A rhombus node is made with <code>{</code> and <code>}</code></p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_text_4.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph LR
  A{node text}
")</code></pre>
                    </div>
                    <p>Finally, there is a special type of shape which is asymmetric and resembles a flag. Only one representation is possible at this time, which is constructed with <code>></code> and <code>]</code></p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_text_5.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph LR
  A>node text]
")</code></pre>
                    </div>
                    <p>Combining these node shapes together in a single graph, the following may be obtained</p>
                      <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid_text_6.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
graph LR
A(Rounded)-->B[Rectangular]
B-->C{A Rhombus}
C-->D[Rectangle One]
C-->E[Rectangle Two]
")</code></pre>
                    </div>
                </div>
                  <h2 id="mermaid-sequence-diagrams">mermaid Sequence Diagrams</h2>
                    <p>The "How to Draw Sequence Diagrams" report by Poranen, Makinen, and Nummenmaa offers a good introduction to sequence diagrams. Let's replicate the ticket-buying example from Figure 1 of this report and add in some conditionals.</p>
                    <div class="bs-example">
                        <img src="http://rich-iannone.github.io/DiagrammeR/img/mermaid-sequence-diagram-example.png" class="img-responsive center-block">
                    </div>
                    <div>
                        <pre><code class="prettyprint">mermaid("
sequenceDiagram
  customer->>ticket seller: ask ticket
  ticket seller->>database: seats
  alt tickets available
    database->>ticket seller: ok
    ticket seller->>customer: confirm
    customer->>ticket seller: ok
    ticket seller->>database: book a seat
    ticket seller->>printer: print ticket
  else sold out
    database->>ticket seller: none left
    ticket seller->>customer: sorry
  end
")</code></pre></div>
                </div>
            </div>
<br>
<pre>
<h2>Exercise:</h2>
a -> {b c d e f g h i j}
[1]: 'The Paramount'
[2]: 20:30

  graph [overlap = true, fontsize = 10]
  node [shape = box, fontname = Helvetica]
  A; B; C; D; E; F

  node [shape = circle, fixedsize = true,width = 0.9] // sets as circles
  1; 2; 3; 4; 5; 6; 7; 8

  A->1 B->2 B->3 B->4 C->A 1->D E->A 2->4 1->5 1->F  E->6 4->6 5->7 6->7 3->8
 abc -> def [arrowhead = diamond]

mermaid("graph LR; A-->B; A-->C; C-->E; B-->D; C-->D; D-->F; E-->F")

mermaid("
graph TB
A(Rounded)-->B[Rectangular]
B-->C{A Rhombus}
A-->C
C-->D[Rectangle One]
C-->E[Rectangle Two]
")
</pre>
<br>
<br>
<br>

<script>
	var toc = $('#toc');
	$('h2').each(function(i) {
		var topic = $(this), topicNumber = i + 1;
		toc.append('<a href="#topic-'+topicNumber+'" target="_self">'+topic.text()+'</a><br>');
		topic.attr('id', 'topic-' + topicNumber);
	});
</script>

</body>
</html>
