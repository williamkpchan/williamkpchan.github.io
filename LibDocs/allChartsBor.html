<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>allChartsBor</title>
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://williamkpchan.github.io/mainscript.js"></script>

<style>
body {
  background-color: black;
  color: gray;
  justify-content: center;
  align-content: center;
  width: 100%;
}
img {max-width:100%;}
</style>

</head>
<body onkeypress="chkKey()">
<div id="chart"></div>
<script>
chartPeriod = [5000,5012,2,3,4,6,9,16,11,2059,2060]
periodPtr = 0

function showcharts() {
 var imgAdr ='<br>'
 var theCode = localStorage.randomcode;
 imgAdr = sCt(theCode)
 $( "#chart" ).html( imgAdr);
}

function sCt(stkcode) {
  indpara1 = [40,20,12,10,10,8,6,30,6,25,6]
  imgHead01 = "<img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=T&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1="
  imgHead02 = "&indpara2=1.6&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=7&ref3para1=7&ref3para2=5&ref3para3=0&subChart4=7&ref4para1=11&ref4para2=8&ref3para3=0&subChart5=13&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1350&chartheight=1000&stockid=";
  imgPCode= "&period=";
  imgTail="&type=1&logoStyle=1'>";
  theListDom = "periodPtr: "+(periodPtr+1) + " ma: " + indpara1[periodPtr] +"<br>"+ imgHead01 + indpara1[periodPtr] + imgHead02+ stkcode + imgPCode + chartPeriod[periodPtr] + imgTail;
  return theListDom;
}

function chkKey() {
  var testkey = getChar(event);
  if(testkey == '0'){changeCode('000001.sh');}
  else if(testkey == '3'){changeCode('399001.sz');}
  else if(testkey == '\\'){changeCode('399006.sz');}
  else if(testkey == '1'){changeCode('110000');}
  else if(testkey == '2'){changeCode('00388');}
  else if(testkey == '4'){changeCode('01766');}
  else if(testkey == '5'){changeCode('02009');}
  else if(testkey == '6'){changeCode('01186');}
  else if(testkey == '7'){changeCode('28647');}
  else if(testkey == '8'){changeCode('00308');}
  else if(testkey == '9'){changeCode('00390');}
  else if(testkey == 't'){window.location = '#dateAndTime';}
  else if(testkey == 'w'){window.scrollTo(0,0);}
  //else if(testkey == 't'){jpTo0();}
  else if(testkey == 'g'){window.open('heedChart.html');}
  else if(testkey == 'r'){
    localStorage.setItem("randomcode", thecode);
    window.open('Random Charts.html');}
  else if(testkey == 'f'){jpForeward();}
  else if(testkey == 'b'){jpBackWard();}
  else if(testkey == 'c'){askCode();}
  else if(testkey == 'a'){window.location = '#imgp0';}
  else if(testkey == 's'){window.location = '#imgp3';}
  //else if(testkey == 'd'){window.location = '#daychart';}
  else if(testkey == 'd'){window.location = '#imgp5';}
  else if(testkey == 'v'){window.location = '#imgp6';}

  else if(testkey == 'x'){window.open('minBor.html', "_self");}
  else if(testkey == 'z'){window.open('View STK Charts.html', "_self");}
  else{chkOtherKeys(tBstkey)} 

}

function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}


function changeCode(thecode) {
  localStorage.setItem("randomcode", thecode)
  showcharts(thecode)
}

function jpForeward() {
  periodPtr = periodPtr + 1
  if (periodPtr >= chartPeriod.length) {
    periodPtr = 0
  }
  showcharts()
}

function jpBackWard() {
  periodPtr = periodPtr - 1
  if (periodPtr < 0) {
    periodPtr = chartPeriod.length -1
  }
  showcharts()
}

function askCode() {
    var thecode = prompt("Code Number:", "");
    if (thecode != null && thecode != "") {
        if (thecode != "HSI") { thecode = FormatNumberLength5(thecode);}
        localStorage.setItem("randomcode", thecode)
        showcharts(thecode)
    }
}

showcharts()
</script>

</body>
</html>