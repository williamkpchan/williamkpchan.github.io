<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<style>
html {
  overflow:   scroll;
}
::-webkit-scrollbar {
    width: 0px;
    background: transparent; /* make scrollbar transparent */
}

body {
 margin-left: 14%;
 margin-right: 14%;
 font-size: 24px;
 background-color: #000000;
 color: #20C030;
}
a { text-decoration: none; 
	color: #28B8B8; }
a:visited {	color: #389898; }
A:hover {	color: yellow; }
A:focus {	color: red; }
code { color: gray;  background-color: #001010}
pre { color: gray;  background-color: #001010;  font-size: 16px; }

</style>
</head>
<body>

<h2>网页中文 朗读功能 开发实现</h2>
前几天完成了一个需求，在网页中完成鼠标指向哪里，就用语音读出所指的文本。如果是按钮、链接、文本输入框，则还还要给出是什么的提醒。同时针对大段的文本，不能整段的去读，要按照标点符号进行断句处理。


<span>重点当然就是先获取到当前标签上的文本，再把文本转化成语音即可。 </span>

<br>
<h4><span style="color: rgb(255, 0, 0);">
<strong><span>标签朗读 </span></strong>
 </span>
</h4>


<span>这个很简单了，只用根据当前是什么标签，给出提示即可。 </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 标签朗读文本 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 tagTextConfig = { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'a' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'链接' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'input[text]' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'文本输入框' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'input[password]' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'密码输入框' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'button' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'按钮' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'img' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'图片' </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
}; </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>还有需要朗读的标签，继续再添加即可。 </span>

<br>

<span>然后根据标签，返回前缀文本即可。 </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
/** </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * 获取标签朗读文本 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * @param {HTMLElement} el 要处理的HTMLElement </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * @returns {String} &nbsp; 朗读文本 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 */ </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 getTagText(el) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (!el)  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 tagName = el.tagName.toLowerCase(); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 处理input等多属性元素 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
switch </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (tagName) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
case </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'input' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
: </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;tagName +=  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'[' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + el.type +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
']' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
break </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
default </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
: </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
break </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 标签的功能提醒和作用应该有间隔，因此在最后加入一个空格 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (tagTextConfig[tagName] ||  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
) +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
' ' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
} </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>获取完整的朗读文本就更简单了，先取标签的功能提醒，再取标签的文本即可。 </span>

<br>

<span>文本内容优先取  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
title </span>

</code>

<span> 其次  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
alt </span>

</code>

<span> 最后  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
innerText </span>

</code>

<span>。 </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
/** </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * 获取完整朗读文本 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * @param {HTMLElement} el 要处理的HTMLElement </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * @returns {String} &nbsp; 朗读文本 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 */ </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 getText(el) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (!el)  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 getTagText(el) + (el.title || el.alt || el.innerText ||  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
} </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>这样就可以获取到一个标签的功能提醒和内容的全部带朗读文本了。 </span>

<br>
<h4>

<span style="color: rgb(255, 0, 0);">

<strong><span style="color: rgb(255, 0, 0);font-size: 15px;">
正文分隔 </span></strong>
 </span>

</h4>


<span>接下来要处理的就是正文分隔了，在这个过程中，踩了不少坑，走了不少弯路，好好记录一下。 </span>

<br>

<span>首先准备了正文分隔的配置： </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 正文拆分配置 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 splitConfig = { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 内容分段标签名称 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;unitTag:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'p' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 正文中分隔正则表达式 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;splitReg:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
/[,;，；。]/ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
g, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 包裹标签名 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;wrapTag:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'label' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 包裹标签类名 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;wrapCls:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'speak-lable' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 高亮样式名和样式 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;hightlightCls:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'speak-help-hightlight' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;hightStyle:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'background: #000!important; color: #fff!important' </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
}; </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>最开始想的就是直接按照正文中的分隔标点符号进行分隔就好了呀。 </span>

<br>

<span>想法如下： </span>

<br>
<ol class=" list-paddingleft-2" style="">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
获取段落全部文本 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
使用&nbsp;
<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
split(分隔正则表达式) </span>

</code>
&nbsp;方法将正文按照标点符号分隔成小段 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
每个小段用标签包裹放回去即可 </span>

<br>
</li>

</ol>


<span>然而理想很丰满，现实很骨感。 </span>

<br>

<span>两个大坑如下： </span>

<br>
<ol class=" list-paddingleft-2" style="">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
split </span>

</code>
&nbsp;方法进行分隔，分隔后分隔字符就丢了，也就是说把原文的一些标点符号给弄丢了。 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
如果段落内还存在其他标签，而这个标签内部也正好存在待分隔的标点符号，那包裹分段标签时直接破换了原标签的完整性。 </span>

<br>
</li>

</ol>


<span>关于第一个问题，丢失标点的符号，考虑过逐个标点来进行和替换  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
split </span>

</code>

<span> 分隔方法为逐个字符循环来做。 </span>

<br>

<span>前者问题是原本一次完成的工作分成了多次，效率太低。第二种感觉效率更低了，分隔本来是很稀疏的，但是却要变成逐个字符出判断处理，更关键的是，分隔标点的位置要插入包裹标签，会导致字符串长度变化，还要处理下标索引。代码是机器跑的，或许不会觉得烦，但是我真的觉得好烦。如果这么干，或许以后哪个AI或者同事看到这样的代码，说不定会说“这真是个傻xxxx”。 </span>

<br>

<span>第二个问题想过很多办法来补救，如先使用正则匹配捕获内容中成对的标签，对标签内部的分隔先处理一遍，然后再处理整个的。 </span>

<br>

<span>想不明白问题二的，可参考一下待分隔的段落: </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(237, 85, 101);line-height: 20px;white-space: inherit;">
&lt;p&gt; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
这是一段测试文本，这里有个链接。 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(237, 85, 101);line-height: 20px;white-space: inherit;">
&lt;a&gt; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
您好，可以点击此处进行跳转 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(237, 85, 101);line-height: 20px;white-space: inherit;">
&lt;/a&gt; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
还有其他内容其他内容容其他内容容其他内容，容其他内容。 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(237, 85, 101);line-height: 20px;white-space: inherit;">
&lt;/p&gt; </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>如先使用  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
/&lt;((\w+?)&gt;)(.+?)&lt;\/\2(?=&gt;)/g </span>

</code>

<span> 正则，依次捕获段落内被标签包裹的内容，对标签内部的内容先处理。 </span>

<br>

<span>但是问题又来了，这么处理的都是字符串，在js中都是基本类型，这些操作进行的时候都是在复制的基础上进行的，要修改到原字符串里去，还得记录下原本的开始结束位置，再将新的插进去。繁，还是繁，但是已经比之前逐个字符去遍历的好，正则捕获中本来就有了匹配的索引，直接用即可，还能接受。 </span>

<br>

<span>但是这只是处理了段落内部标签的问题，段落内肯定还有很多文本是没有处理呢，怎么办？ </span>

<br>

<span>正则匹配到了只是段落内标签的结果啊，外面的没有啊。哦，对，有匹配到的索引，上次匹配到的位置加上上次处理的长度，就是一段直接文本的开始。下一次匹配到的索引-1就是这段直接文本的结束。这只是匹配过程中的，还有首尾要单独处理。又回到烦的老路上去了。。。 </span>

<br>

<span>这么烦，一个段落分隔能这么繁琐，我不信！ </span>

<br>

<span>突然想到了，有文本节点这么个东西，删繁就简嘛，正则先到边上去，直接处理段落的所有节点不就行了。 </span>

<br>

<span>文本节点则分隔直接包裹，标签节点则对内容进行包裹，这种情况下处理的直接是dom，更省事。 </span>

<br>

<span>文本节点里放标签？这是在开玩笑么，是也不是。文本节点里确实只能放文本，但是我把标签直接放进去，它会自动转义，那最后再替换出来不就行了。 </span>

<br>

<span>好了，方案终于有了，而且这个方案逻辑多简单，代码逻辑自然也不会烦。 </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
/** </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * 正文内容分段处理 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * @param {jQueryObject/HTMLElement/String} &nbsp;$content 要处理的正文jQ对象或HTMLElement或其对应选择器 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 */ </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 splitConent($content) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;$content = $($content); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;$content.find(splitConfig.unitTag).each( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (index, item) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 $item = $(item), </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;text = $.trim($item.text()); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (!text)  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 nodes = $item[ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
0 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
].childNodes; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;$.each(nodes,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (i, node) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
switch </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (node.nodeType) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
case </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
3 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
: </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// text 节点 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 由于是文本节点，标签被转义了，后续再转回来 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;node.data =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;node.data.replace(splitConfig.splitReg,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;/' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;$&amp;&lt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
) + </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;/' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
break </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
case </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
1 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
: </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 元素节点 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 innerHtml = node.innerHTML, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;start =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
end </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 如果内部还有直接标签，先去掉 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 startResult =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
/^&lt;\w+?&gt;/ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
. </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
exec </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
(innerHtml); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (startResult) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;start = startResult[ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
0 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
]; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;innerHtml = innerHtml.substr(start.length); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 endResult =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
/&lt;\/\w+?&gt;$/ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
. </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
exec </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
(innerHtml); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (endResult) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
end </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 = endResult[ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
0 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
]; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;innerHtml = innerHtml.substring( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
0 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, endResult.index); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 更新内部内容 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;node.innerHTML = start + </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;innerHtml.replace(splitConfig.splitReg,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;/' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;$&amp;&lt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
) + </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;/' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
end </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
break </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
default </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
: </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
break </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;}); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 处理文本节点中被转义的html标签 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;$item[ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
0 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
].innerHTML = $item[ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
0 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
].innerHTML </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.replace( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
new </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
RegExp </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&amp;lt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&amp;gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'g' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
),  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
) </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;.replace( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
new </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
RegExp </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&amp;lt;/' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&amp;gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'g' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
),  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&lt;/' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapTag +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'&gt;' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;$item.find(splitConfig.wrapTag).addClass(splitConfig.wrapCls); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;}); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
} </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>上面代码中最后对文本节点中被转义的包裹标签替换似乎有点麻烦，但是没办法，ES5之前JavaScript并不支持正则的后行断言（也就是正则表达式中“后顾”）。所以没办法对包裹标签前后的  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
&amp;lt; </span>

</code>

<span> 和  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
&amp;gt; </span>

</code>

<span> 进行精准替换，只能连同标签名一起替换。 </span>

<br>
<h4>

<span style="color: rgb(255, 0, 0);">

<strong><span style="color: rgb(255, 0, 0);font-size: 15px;">
事件处理 </span></strong>
 </span>

</h4>


<span>在上面完成了文本获取和段落分隔，下面要做的就是鼠标移动上去时获取文本触发朗读即可，移开时停止朗读即可。 </span>

<br>

<span>鼠标移动，只读一次，基于这两点原因，使用  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
mouseenter </span>

</code>

<span> 和  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
mouseleave </span>

</code>

<span> 事件来完成。 </span>

<br>

<span>原因： </span>

<br>
<ol class=" list-paddingleft-2" style="">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
不冒泡，不会触发父元素的再次朗读 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
不重复触发，一个元素内移动时不会重复触发。 </span>

<br>
</li>

</ol>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
 </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
/** </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 * 在页面上写入高亮样式 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
 */ </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 createStyle() { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (document.getElementById( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'speak-light-style' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
))  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 style = document.createElement( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'style' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;style.id =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'speak-light-style' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;style.innerText =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'.' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.hightlightCls +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'{' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.hightStyle +  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'}' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;document.getElementsByTagName( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'head' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
)[ </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
0 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
].appendChild(style); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 非正文需要朗读的标签 逗号分隔 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 speakTags =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'a, p, span, h1, h2, h3, h4, h5, h6, img, input, button' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
$(document).on( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'mouseenter.speak-help' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, speakTags,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (e) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 $target = $(e.target); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 排除段落内的 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 ($target.parents( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'.' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapCls).length || $target.find( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'.' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapCls).length) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 图片样式单独处理 其他样式统一处理 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (e.target.nodeName.toLowerCase() ===  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'img' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;$target.css({ </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'2px solid #000' </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;}); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;}  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
else </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;$target.addClass(splitConfig.hightlightCls); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 开始朗读 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;speakText(getText(e.target)); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
}).on( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'mouseleave.speak-help' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
, speakTags,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (e) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 $target = $(e.target); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 ($target.find( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'.' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapCls).length) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
return </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 图片样式 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
if </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (e.target.nodeName.toLowerCase() ===  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'img' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;$target.css({ </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;border:  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'none' </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;}); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;}  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
else </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;$target.removeClass(splitConfig.hightlightCls); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 停止语音 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;stopSpeak(); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
}); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 段落内文本朗读 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
$(document).on( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'mouseenter.speak-help' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'.' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapCls,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (e) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;$( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
this </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
).addClass(splitConfig.hightlightCls); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 开始朗读 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;speakText(getText( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
this </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
)); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
}).on( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'mouseleave.speak-help' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'.' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 + splitConfig.wrapCls,  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 (e) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;$( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
this </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
).removeClass(splitConfig.hightlightCls); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 停止语音 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;stopSpeak(); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
}); </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>注意要把针对段落的语音处理和其他地方的分开。为什么？ 因为段落是个块级元素，鼠标移入段落中的空白时，如：段落前后空白、首行缩进、末行剩余空白等，是不应该触发朗读的，如果不阻止掉，进行这些区域将直接触发整段文字的朗读，失去了我们对段落文本内分隔的意义，而且，无论什么方式转化语音都是要时间的，大段内容可能需要较长时间，影响语音输出的体验。 </span>

<br>
<h4>

<span style="color: rgb(255, 0, 0);">

<strong><span>文本合成语音 </span></strong>
 </span>

</h4>


<span>上面我们是直接使用了  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
speakText(text) </span>

</code>

<span> 和  </span>

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);line-height: 18px;">

<span style="padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;font-size: 15px;">
stopSpeak() </span>

</code>

<span> 两个方法来触发语音的朗读和停止。 </span>

<br>

<span>我们来看下如何实现这个两个功能。 </span>

<br>

<span>其实现代浏览器默认已经提供了上面功能： </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 speechSU =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
new </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 window. </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
SpeechSynthesisUtterance </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
(); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
speechSU.text =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(255, 206, 84);line-height: 20px;white-space: inherit;">
'你好，世界！' </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
window.speechSynthesis.speak(speechSU); </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>复制到浏览器控制台看看能不能听到声音呢？(需要Chrome 33+、Firefox 49+ 或 IE-Edge) </span>

<br>

<span>利用一下两个API即可： </span>

<br>

<span>
<strong style="box-sizing: border-box;color: rgb(0, 0, 0);">
SpeechSynthesisUtterance 用于语音合</strong>
 </span>

<br>
<ul class=" list-paddingleft-2" style="list-style-type: square;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
lang </span>

</code>
&nbsp;: 语言 Gets and sets the language of the utterance. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
pitch </span>

</code>
&nbsp;: 音高 Gets and sets the pitch at which the utterance will be spoken at. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
rate </span>

</code>
&nbsp;: 语速 Gets and sets the speed at which the utterance will be spoken at. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
text </span>

</code>
&nbsp;: 文本 Gets and sets the text that will be synthesised when the utterance is spoken. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
voice </span>

</code>
&nbsp;: 声音 Gets and sets the voice that will be used to speak the utterance. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
volume </span>

</code>
&nbsp;: 音量 Gets and sets the volume that the utterance will be spoken at. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onboundary </span>

</code>
&nbsp;: 单词或句子边界触发，即分隔处触发 Fired when the spoken utterance reaches a word or sentence boundary. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onend </span>

</code>
&nbsp;: 结束时触发 Fired when the utterance has finished being spoken. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onerror </span>

</code>
&nbsp;: 错误时触发 Fired when an error occurs that prevents the utterance from being succesfully spoken. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onmark </span>

</code>
&nbsp;: Fired when the spoken utterance reaches a named SSML "mark" tag. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onpause </span>

</code>
&nbsp;: 暂停时触发 Fired when the utterance is paused part way through. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onresume </span>

</code>
&nbsp;: 重新播放时触发 Fired when a paused utterance is resumed. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onstart </span>

</code>
&nbsp;: 开始时触发 Fired when the utterance has begun to be spoken. </span>

<br>
</li>

</ul>


<span>
<strong style="box-sizing: border-box;color: rgb(0, 0, 0);">
SpeechSynthesis 用于朗</strong>
 </span>

<br>
<ul class=" list-paddingleft-2" style="list-style-type: square;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
paused </span>

</code>
&nbsp;:&nbsp;
<strong style="box-sizing: border-box;color: rgb(0, 0, 0);">
Read onl</strong>
&nbsp;是否暂停 A Boolean that returns true if the SpeechSynthesis object is in a paused state. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
pending </span>

</code>
&nbsp;:&nbsp;
<strong style="box-sizing: border-box;color: rgb(0, 0, 0);">
Read onl</strong>
&nbsp;是否处理中 A Boolean that returns true if the utterance queue contains as-yet-unspoken utterances. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
speaking </span>

</code>
&nbsp;:&nbsp;
<strong style="box-sizing: border-box;color: rgb(0, 0, 0);">
Read onl</strong>
&nbsp;是否朗读中 A Boolean that returns true if an utterance is currently in the process of being spoken — even if SpeechSynthesis is in a paused state. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
onvoiceschanged </span>

</code>
&nbsp;: 声音变化时触发 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
cancel() </span>

</code>
&nbsp;: 情况待朗读队列 Removes all utterances from the utterance queue. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
getVoices() </span>

</code>
&nbsp;: 获取浏览器支持的语音包列表 Returns a list of SpeechSynthesisVoice objects representing all the available voices on the current device. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
pause() </span>

</code>
&nbsp;: 暂停 Puts the SpeechSynthesis object into a paused state. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
resume() </span>

</code>
&nbsp;: 重新开始 Puts the SpeechSynthesis object into a non-paused state: resumes it if it was already paused. </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">

<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
speak() </span>

</code>
&nbsp;: 读合成的语音，参数必须为&nbsp;
<code class="" style="box-sizing: border-box;background: rgb(243, 241, 241);color: rgb(88, 88, 88);font-size: 16px;line-height: 18px;">

<span class="" style="color: rgb(74, 74, 74);padding-right: 2px;padding-left: 2px;box-sizing: border-box;background-image: initial;background-position: initial;background-size: initial;background-repeat: initial;background-attachment: initial;background-origin: initial;background-clip: initial;display: inline-block;">
SpeechSynthesisUtterance </span>

</code>
的实例 Adds an utterance to the utterance queue; it will be spoken when any other utterances queued before it have been spoken. </span>

<br>
</li>

</ul>


<span>详细api和说明可参考: </span>

<br>
<ul class=" list-paddingleft-2" style="list-style-type: square;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
MDN - SpeechSynthesisUtterance </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);">
MDN - SpeechSynthesis </span>

<br>
</li>

</ul>


<span>那么上面的两个方法可以写为： </span>

<br>

<ol class=" list-paddingleft-2" style="list-style-type: none;">

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 speaker =  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
new </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 window. </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
SpeechSynthesisUtterance </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
(); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
var </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 speakTimer, </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;stopTimer; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 开始朗读 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 speakText(text) { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;clearTimeout(speakTimer); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;window.speechSynthesis.cancel(); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;speakTimer = setTimeout( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 () { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;speaker.text = text; </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;window.speechSynthesis.speak(speaker); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;},  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
200 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
} </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(101, 109, 120);line-height: 20px;white-space: inherit;">
// 停止朗读 </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 stopSpeak() { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;clearTimeout(stopTimer); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;clearTimeout(speakTimer); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;stopTimer = setTimeout( </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(79, 193, 233);line-height: 20px;white-space: inherit;">
function </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 () { </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp; &nbsp; &nbsp;window.speechSynthesis.cancel(); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
 &nbsp; &nbsp;},  </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(172, 146, 236);line-height: 20px;white-space: inherit;">
20 </span>

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
); </span>

</code>
 </span>

<br>
</li>

<li>


<span style="box-sizing: border-box;color: rgb(74, 74, 74);display: block;">

<code class="" style="margin-left: -20px;box-sizing: border-box;word-wrap: normal;display: flex;overflow: initial;border-width: 0px;border-style: initial;border-color: initial;font-family: inherit;">

<span class="" style="display: block;box-sizing: border-box;color: rgb(230, 233, 237);line-height: 20px;white-space: inherit;">
} </span>

</code>
 </span>

<br>
</li>

</ol>

</pre>


<span>因为语音合成本来是个异步的操作，因此在过程中进行以上处理。 </span>

<br>

<span>现代浏览器已经内置了这个功能，两个API接口兼容性如下： </span>

<br>

<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=http://mmbiz.qpic.cn/mmbiz_png/zPh0erYjkib0QxgRhw6rmhhgQ9Yx5g0rNFkPqnGlbdwG0jmcnBibiaGvTNTWrOicakgmV84gWPq3KA5ic15crMM218A/0">

<br>

<span>
cdswyda - 网页文本朗读实现 - github </span>

<span>如果要兼容其他浏览器或者需要一种完美兼容的解决方案，可能就需要服务端完成了，根据给定文本，返回相应语音即可，百度语音 http://yuyin.baidu.com/docs就提供这样的服务。 </span>

<br>
<span>cdswyda - 网页文本朗读实现 - github（https://github.com/cdswyda/show/tree/master/demo/speaker） </span>
<br>
<span>cdswyda - 网页文本朗读实现 - demo（https://cdswyda.github.io/show/demo/speaker/） </span>
