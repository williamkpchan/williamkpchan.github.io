<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width"/>
<link rel="stylesheet" href="..\maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, .apply, div.title').click(function(){
    parent.history.back();
    return false;
    });
});
</script>
<style>
h1, h2 {color: gold;}
</style>
</head><body>
<center><h1>JavaScript language Tips & Tricks</h1></center>

<div id="toc"></div>
<br><br>

<hr>

<h2>Append an array to another array</h2>

<p>```
var a = [4,5,6];
var b = [7,8,9];
a.concat(b);
</p>

<hr>

<h2>Milliseconds since epoch</h2>

<p><pre>

+new Date() // 1259359833574
</pre>
</p>

<hr>

<h2>Simulate threads using yield operator</h2>

<p><h4>JavaScript 1.7</h4>
```
//// thread definition
function Thread( name ) {</p>

<xmp><pre>
for ( var i = 0; i &lt; 5; i++ ) {

    Print(name+': '+i);
    yield;
}
</pre>
</xmp>

<p>}</p>

<p>//// thread management
var threads = [];</p>

<p>// thread creation
threads.push( new Thread('foo') );
threads.push( new Thread('bar') );</p>

<p>// scheduler
while (threads.length) {</p>

<xmp><pre>
var thread = threads.shift();
try {
    thread.next();
    threads.push(thread);
} catch(ex if ex instanceof StopIteration) {}
</pre>
</xmp>

<p>}
<pre>

prints:
</pre>

foo: 0
bar: 0
foo: 1
bar: 1
foo: 2
bar: 2
foo: 3
bar: 3
foo: 4
bar: 4
```</p>

<hr>

<h2>prefix an integer with zeros</h2>

<p>```
function PrefixInteger(num, length) {</p>

<xmp><pre>
return (num / Math.pow(10, length)).toFixed(length).substr(2);
</pre>
</xmp>

<p>}
```</p>

<p>And more efficient:
```
function PrefixInteger(num, length) {</p>

<p>return ( "0000000000000000" + num ).substr( -length );
}
```
Thanks to fritzthe...</p>

<p>And even better:
```
function PrefixInteger(num, length) {</p>

<p>return (Array(length).join('0') + num).slice(-length);
}
```
Thanks to tobeytai...</p>

<hr>

<h2>shuffle the Array</h2>

<p><h4>JavaScript 1.?</h4>
```
var list = [1,2,3,4,5,6,7,8,9];</p>

<p>list = list.sort(function() Math.random() - 0.5);</p>

<p>Print(list); // prints something like: 4,3,1,2,9,5,6,7,8 
```</p>

<hr>

<h2>multi-line text</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

var text = &lt;&gt;
this
is
my
multi-line
text
&lt;/&gt;.toString();
Print(text);
</pre>

prints:
```</p>

<p>this
is
my
multi-line
text</p>

<p>```</p>

note

<p>If you want to support special XML chars, you can use a CDATA section:
```
&lt;&gt;

</p><blockquote>
  <blockquote>
    <blockquote>
      <p>hello</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>]]&gt;.toString();
```</p>

<hr>

<h2>Escape and unescape HTML entities</h2>

<p>```
const entityToCode = { <strong>proto</strong>: null,
apos:0x0027,quot:0x0022,amp:0x0026,lt:0x003C,gt:0x003E,nbsp:0x00A0,iexcl:0x00A1,cent:0x00A2,pound:0x00A3,
curren:0x00A4,yen:0x00A5,brvbar:0x00A6,sect:0x00A7,uml:0x00A8,copy:0x00A9,ordf:0x00AA,laquo:0x00AB,
not:0x00AC,shy:0x00AD,reg:0x00AE,macr:0x00AF,deg:0x00B0,plusmn:0x00B1,sup2:0x00B2,sup3:0x00B3,
acute:0x00B4,micro:0x00B5,para:0x00B6,middot:0x00B7,cedil:0x00B8,sup1:0x00B9,ordm:0x00BA,raquo:0x00BB,
frac14:0x00BC,frac12:0x00BD,frac34:0x00BE,iquest:0x00BF,Agrave:0x00C0,Aacute:0x00C1,Acirc:0x00C2,Atilde:0x00C3,
Auml:0x00C4,Aring:0x00C5,AElig:0x00C6,Ccedil:0x00C7,Egrave:0x00C8,Eacute:0x00C9,Ecirc:0x00CA,Euml:0x00CB,
Igrave:0x00CC,Iacute:0x00CD,Icirc:0x00CE,Iuml:0x00CF,ETH:0x00D0,Ntilde:0x00D1,Ograve:0x00D2,Oacute:0x00D3,
Ocirc:0x00D4,Otilde:0x00D5,Ouml:0x00D6,times:0x00D7,Oslash:0x00D8,Ugrave:0x00D9,Uacute:0x00DA,Ucirc:0x00DB,
Uuml:0x00DC,Yacute:0x00DD,THORN:0x00DE,szlig:0x00DF,agrave:0x00E0,aacute:0x00E1,acirc:0x00E2,atilde:0x00E3,
auml:0x00E4,aring:0x00E5,aelig:0x00E6,ccedil:0x00E7,egrave:0x00E8,eacute:0x00E9,ecirc:0x00EA,euml:0x00EB,
igrave:0x00EC,iacute:0x00ED,icirc:0x00EE,iuml:0x00EF,eth:0x00F0,ntilde:0x00F1,ograve:0x00F2,oacute:0x00F3,
ocirc:0x00F4,otilde:0x00F5,ouml:0x00F6,divide:0x00F7,oslash:0x00F8,ugrave:0x00F9,uacute:0x00FA,ucirc:0x00FB,
uuml:0x00FC,yacute:0x00FD,thorn:0x00FE,yuml:0x00FF,OElig:0x0152,oelig:0x0153,Scaron:0x0160,scaron:0x0161,
Yuml:0x0178,fnof:0x0192,circ:0x02C6,tilde:0x02DC,Alpha:0x0391,Beta:0x0392,Gamma:0x0393,Delta:0x0394,
Epsilon:0x0395,Zeta:0x0396,Eta:0x0397,Theta:0x0398,Iota:0x0399,Kappa:0x039A,Lambda:0x039B,Mu:0x039C,
Nu:0x039D,Xi:0x039E,Omicron:0x039F,Pi:0x03A0,Rho:0x03A1,Sigma:0x03A3,Tau:0x03A4,Upsilon:0x03A5,
Phi:0x03A6,Chi:0x03A7,Psi:0x03A8,Omega:0x03A9,alpha:0x03B1,beta:0x03B2,gamma:0x03B3,delta:0x03B4,
epsilon:0x03B5,zeta:0x03B6,eta:0x03B7,theta:0x03B8,iota:0x03B9,kappa:0x03BA,lambda:0x03BB,mu:0x03BC,
nu:0x03BD,xi:0x03BE,omicron:0x03BF,pi:0x03C0,rho:0x03C1,sigmaf:0x03C2,sigma:0x03C3,tau:0x03C4,
upsilon:0x03C5,phi:0x03C6,chi:0x03C7,psi:0x03C8,omega:0x03C9,thetasym:0x03D1,upsih:0x03D2,piv:0x03D6,
ensp:0x2002,emsp:0x2003,thinsp:0x2009,zwnj:0x200C,zwj:0x200D,lrm:0x200E,rlm:0x200F,ndash:0x2013,
mdash:0x2014,lsquo:0x2018,rsquo:0x2019,sbquo:0x201A,ldquo:0x201C,rdquo:0x201D,bdquo:0x201E,dagger:0x2020,
Dagger:0x2021,bull:0x2022,hellip:0x2026,permil:0x2030,prime:0x2032,Prime:0x2033,lsaquo:0x2039,rsaquo:0x203A,
oline:0x203E,frasl:0x2044,euro:0x20AC,image:0x2111,weierp:0x2118,real:0x211C,trade:0x2122,alefsym:0x2135,
larr:0x2190,uarr:0x2191,rarr:0x2192,darr:0x2193,harr:0x2194,crarr:0x21B5,lArr:0x21D0,uArr:0x21D1,
rArr:0x21D2,dArr:0x21D3,hArr:0x21D4,forall:0x2200,part:0x2202,exist:0x2203,empty:0x2205,nabla:0x2207,
isin:0x2208,notin:0x2209,ni:0x220B,prod:0x220F,sum:0x2211,minus:0x2212,lowast:0x2217,radic:0x221A,
prop:0x221D,infin:0x221E,ang:0x2220,and:0x2227,or:0x2228,cap:0x2229,cup:0x222A,int:0x222B,
there4:0x2234,sim:0x223C,cong:0x2245,asymp:0x2248,ne:0x2260,equiv:0x2261,le:0x2264,ge:0x2265,
sub:0x2282,sup:0x2283,nsub:0x2284,sube:0x2286,supe:0x2287,oplus:0x2295,otimes:0x2297,perp:0x22A5,
sdot:0x22C5,lceil:0x2308,rceil:0x2309,lfloor:0x230A,rfloor:0x230B,lang:0x2329,rang:0x232A,loz:0x25CA,
spades:0x2660,clubs:0x2663,hearts:0x2665,diams:0x2666
};</p>

<p>var charToEntity = {};
for ( var entityName in entityToCode )
    charToEntity[String.fromCharCode(entityToCode[entityName])] = entityName;</p>

<p>function UnescapeEntities(str) str.replace(/&amp;(.+?);/g, function(str, ent) String.fromCharCode( ent[0]!='#' ? entityToCode[ent] : ent[1]=='x' ? parseInt(ent.substr(2),16): parseInt(ent.substr(1)) ) );</p>

<p>function EscapeEntities(str) str.replace(/[^\x20-\x7E]/g, function(str) charToEntity[str] ? '&amp;'+charToEntity[str]+';' : str );
```</p>

<hr>

<h2>Remove an object from an array</h2>

<p><h4>JavaScript 1.8</h4>
<pre>

function RemoveArrayElement( array, element ) !!let (pos=array.lastIndexOf(element)) pos != -1 &amp;&amp; array.splice(pos, 1);
</pre>
</p>

<hr>

<h2>Creates a random alphabetic string</h2>

<p>```
function RandomString(length) {</p>

<xmp><pre>
var str = '';
for ( ; str.length &lt; length; str += Math.random().toString(36).substr(2) );
return str.substr(0, length);
</pre>
</xmp>

<p>}
```</p>

<hr>

<h2>Brainfuck interpreter</h2>

<p>```</p>

<p>var code = '++++++++++[&gt;+++++++&gt;++++++++++&gt;+++&gt;+&lt;&lt;&lt;&lt;-]&gt;++.&gt;+.+++++++..+++.&gt;++.&lt;&lt;+++++++++++++++.&gt;.+++.------.--------.&gt;+.&gt;.';
var inp = '23\n';
var out = '';</p>

<p>var codeSize = code.length;
var i = 0, ip = 0, cp = 0, dp = 0, m = {};</p>

<p>var loopIn = {}, loopOut = {};
var tmp = [];
for ( var cp = 0; cp &lt; codeSize ; cp++ )
    if ( code[cp] == '[' )
        tmp.push(cp);
    else
        if ( code[cp] == ']' )
            loopOut[loopIn[cp] = tmp.pop()] = cp;</p>

<p>for (var cp = 0; cp &lt; codeSize &amp;&amp; i &lt; 100000; cp++, i++) {</p>

<xmp><pre>
switch(code[cp]) {

    case '&gt;': dp++; break;
    case '&lt;': dp--; break;
    case '+': m[dp] = ((m[dp]||0)+1)&amp;255; break
    case '-': m[dp] = ((m[dp]||0)-1)&amp;255; break;
    case '.': out += String.fromCharCode(m[dp]); break;
    case ',': m[dp] = inp.charCodeAt(ip++)||0; break;
    case '[': m[dp]||(cp=loopOut[cp]); break;
    case ']': cp = loopIn[cp]-1; break;
}
</pre>
</xmp>

<p>}
Print(out);
```</p>

<p>This <a href="http://en.wikipedia.org/wiki/Brainfuck">Brainfuck</a> program just prints 'Hello World!'</p>

<hr>

<h2>Optional named function arguments</h2>

<p>```
function foo({ name:name, project:project}) {</p>

<xmp><pre>
Print( project );
Print( name );
</pre>
</xmp>

<p>}</p>

<p>foo({ name:'soubok', project:'jslibs' })
foo({ project:'jslibs', name:'soubok'})
```</p>

<hr>

<h2>String converter</h2>

<p><h4>JavaScript 1.8</h4>
<pre>

function CreateTranslator(translationTable)
function(s)
	s.replace(new RegExp([k for (k in translationTable)].join('|'), 'g'), function(str) translationTable[str]);
</pre>

exemple of use:
<pre>

var translationTable = { a:1, bb:2, b:3, c:4 };
var MyTranslater = CreateTranslator( translationTable );
MyTranslater('aabbbc'); // returns: 11234
</pre>
</p>

<hr>

<h2>Display the current call stack</h2>

<p>```
function Stack() { try { throw Error() } catch(ex) { return ex.stack } }</p>

<p>print( Stack() );
<pre>

prints:
</pre>

Error()@:0
Stack()@test.js:1
@test.js:3
```</p>

<hr>

<h2>Change the primitive value of an object with <em>valueOf</em></h2>

<p>```
function foo() {</p>

<p>this.valueOf = function() {</p>

<xmp><pre>
 return 'this is my value';
</pre>
</xmp>

<p>}
}</p>

<p>var bar = new foo();</p>

<p>Print( bar ); // prints: this is my value</p>

<p>Print( bar == 'this is my value' ) // prints: true</p>

<p>Print( bar === 'this is my value' ) // prints: false</p>

<p>```</p>

<hr>

<h2>Transform the <em>arguments</em> object into an array</h2>

<p><h4>JavaScript 1.6</h4>
```
function foo() {</p>

<p>var argArray = Array.slice(arguments); // is ['aa',11] 
}</p>

<p>foo('aa',11);
```</p>

<p>use also
<pre>

var argArray = Array.prototype.slice.call(arguments);
</pre>
</p>

<hr>

<h2>Convert a string into a charcode list</h2>

<p>Method 1:
<h4>JavaScript 1.6</h4>
<pre>

Array.map('foo', function(x) { return String.charCodeAt(x) }) // is [112,111,111]
</pre>
</p>

<p>Method 2:
<h4>JavaScript 1.7</h4>
<pre>

[ String.charCodeAt(x) for each ( x in 'foo' ) ] // is [112,111,111]
</pre>
</p>

<hr>

<h2>Array iteration pitfall</h2>

<p>```
var foo = [3,4,5];</p>

<p>for ( var i in foo ) {</p>

<xmp><pre>
if ( i == 1 ) {

    foo.unshift(6);
}
Print('item: '+foo[i])
</pre>
</xmp>

<p>}
Print( 'array: '+foo.toSource() )
<pre>

output:
</pre>

item: 3
item: 3
item: 4
array: [6, 3, 4, 5]
```</p>

<hr>

<h2>exceptions for non-fatal errors</h2>

<p><h4>JavaScript 1.7</h4>
```
function ERR() { throw ERR }
function CHK( v ) { return v || ERR() }</p>

<p>try {</p>

<p>var data1 = 'a/b/c';
  var arr1 = CHK(data1).split('/');</p>

<p>var data2 = '';
  var arr2 = CHK(data2).split('/'); // the exception is throw here</p>

<p>} catch(ex if ex == ERR) {</p>

<p>Print('non fatal error while decoding the data')
}
<pre>

prints:
</pre>

a b c
```</p>

<hr>

<h2>A Switch function</h2>

<p><h4>JavaScript 1.8</h4>
<pre>

function Switch(i) arguments[++i];
</pre>

usage:
<pre>

Print( Switch(2,'aa','bb','cc','dd') ); // prints: cc
Print( Switch(100,'aa','bb','cc','dd') ); // prints: undefined
</pre>
</p>

<hr>

<h2>A Match function</h2>

<p><h4>JavaScript 1.8</h4>
<pre>

function Match(v) Array.indexOf(arguments,v,1)-1;
</pre>

usage:
<pre>

Print( Match('aa', '0', 'b', 123, 'aa', 8.999 ) ); // prints: 3
Print( Match('Z', 'b', 123, 'aa', 8.999 ) ); // prints: -2 (&lt; 0 is not found)
</pre>
</p>

<hr>

<h2>new object override</h2>

<p><h4>JavaScript 1.5</h4>
```
function foo() {</p>

<p>return new Array(5,6,7);
}</p>

<p>var bar = new foo();
bar.length // is 3
```</p>

<hr>

<h2>Kind of destructuring assignments</h2>

<p><h4>JavaScript 1.7</h4>
<pre>

 var { a:x, b:y } = { a:7, b:8 };
 Print(x); // prints: 7
 Print(y); // prints: 8
</pre>
</p>

<hr>

<h2>Generator Expressions</h2>

<p><h4>JavaScript 1.7</h4>
<pre>

[ y for ( y in [5,6,7,8,9] ) ] // is [0,1,2,3,4]
</pre>
</p>

<p><strong>and</strong></p>

<p><pre>

[ y for each ( y in [5,6,7,8,9] ) ] // is [5,6,7,8,9]
</pre>
</p>

<p>Because in <strong>for</strong> extracts index names, and <strong>for each</strong> extracts the values.</p>

<hr>

<h2>Advanced use of iterators</h2>

<p><h4>JavaScript 1.7</h4>
```
Number.prototype.<strong>iterator</strong> = function() {</p>

<p>for ( let i = 0; i &lt; this; i++ )
  yield i;
};</p>

<p>for ( let i in 5 )
 print(i);
<pre>

prints:
</pre>

1
2
3
4
5
```</p>

<p>This make Number object to act as a generator.</p>

<hr>

<h2>Expression Closures</h2>

<p><h4>JavaScript 1.8</h4>
<pre>

function(x) x * x;
</pre>

Note that braces <strong>{</strong>...<strong>}</strong> and <strong>return</strong> are implicit</p>

<hr>

<h2>Function declaration and expression</h2>

<p>Function declaration:
```
bar(); // prints: bar
function bar() {</p>

<p>Print('bar');
}</p>

<p>function foo() {</p>

<p>Print('foo');
}
foo(); // prints: foo</p>

<p>```</p>

<p>Function expression:
```
(function foo() {
  Print( foo.name );
})(); // prints: foo
foo(); // rise a ReferenceError</p>

<p>!function foo() {
}
foo(); // rise a ReferenceError</p>

<p>var bar = function foo() {
}
foo(); // rise a ReferenceError
```</p>

<hr>

<h2>Factory method pattern</h2>

<p>```
Complex = new function() {</p>

<xmp><pre>
function Complex(a, b) {
    // ...
}

this.fromCartesian = function(real, mag) {

    return new Complex(real, imag);
}

this.fromPolar = function(rho, theta) {

    return new Complex(rho * Math.cos(theta), rho * Math.sin(theta));
}
</pre>
</xmp>

<p>}</p>

<p>var c = Complex.fromPolar(1, Math.pi); // Same as fromCartesian(-1, 0);
```</p>

<p><sub>see factory pattern on</sub> <a href="http://en.wikipedia.org/wiki/Factory_method_pattern">wikipedia</a></p>

<hr>

<h2>Closures by example</h2>

<p><h4>JavaScript 1.5</h4></p>

<p>```
function CreateAdder( add ) {</p>

<p>return function( value ) {</p>

<xmp><pre>
return value + add;
</pre>
</xmp>

<p>}
}
```</p>

<p>usage:
```
var myAdder5 = CreateAdder( 5 );
var myAdder6 = CreateAdder( 6 );</p>

<p>Print( myAdder5( 2 ) ); // prints 7
Print( myAdder6( 4 ) ); // prints 10
```</p>

<p><sub>Further information about</sub> <a href="http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Functions#Nested_functions_and_closures">Nested functions and closures</a></p>

<hr>

<h2>SyntaxError</h2>

<p><h4>JavaScript 1.5</h4></p>

<p>raised when a syntax error occurs while parsing code in eval()
```
try {</p>

<p>eval('1 + * 5'); // will rise a SyntaxError exception</p>

<p>} catch( ex ) {</p>

<xmp><pre>
Print( ex.constructor == SyntaxError ); // Prints true
</pre>
</xmp>

<p>}
```</p>

<p><h4>JavaScript 1.7</h4>
```
try {</p>

<p>eval('1 + * 5');</p>

<p>} catch( ex if ex instanceof SyntaxError  ) {</p>

<p>Print( 'SyntaxError !' ); // prints: SyntaxError !
}
```</p>

<hr>

<h2>ReferenceError</h2>

<p>raised when de-referencing an invalid reference.
```
try {</p>

<p>fooBar(); // will rise a ReferenceError exception</p>

<p>} catch( ex ) {</p>

<p>Print( ex.constructor == ReferenceError ); // Prints true
}
```</p>

<p><h4>JavaScript 1.7</h4>
```
try {</p>

<p>fooBar();</p>

<p>} catch( ex if ex instanceof ReferenceError ) {</p>

<p>Print( 'ReferenceError !' ); // prints: ReferenceError !
}
```</p>

<hr>

<h2>JavaScript Minifier / comment remover</h2>

<p><h4>jslibs</h4>
<pre>

var script = new Script('var a; /* this is a variable */ var b; // another variable');
Print( script.toString() );
</pre>

prints:
<pre>

var a;
var b;
</pre>
</p>

<p><h4>javascript</h4>
```
function foo() {</p>

<p>var a; // a variable
 var b = [1, 2, 3]; // an array
 var c = {x: {y: 1}};</p>

<p>function bar() { // my function</p>

<p>return 1 /* 2 */;
 }
}</p>

<p>Print( foo.toSource() );
```</p>

<hr>

<h2>JavaScript code beautifier (un-minifier)</h2>

<p><pre>

function foo() {var a;var b=[1,2,3];var c={x:{y:1}};function bar(){return 1}}
Print( foo.toSource(1) );
</pre>

prints:
```
function foo() {
 var a;
 var b = [1, 2, 3];
 var c = {x: {y: 1}};</p>

<p>function bar() {
  return 1;
 }
}
```</p>

<hr>

<h2>Auto indent JavaScript code / unobfuscator</h2>

<p><h4>Spidermonkey JavaScript engine only</h4>
<pre>

function foo() { function bar(){};var i=0;for(;i&lt;10;++i) bar(i) }
Print(foo.toSource(2));
</pre>

prints:
```
function foo() {</p>

<xmp><pre>
  function bar() {
  }

  var i = 0;
  for (; i &lt; 10; ++i) {
      bar(i);
  }
</pre>
</xmp>

<p>}
```</p>

<hr>

<h2>Objects, constructor and instanceof</h2>

<p><h4>JavaScript 1.5</h4>
```
function Foo() {
  // Foo class
}</p>

<p>var a = new Foo();</p>

<p>Bar.prototype = new Foo();
function Bar() {
  // Bar class
}</p>

<p>var b = new Bar();</p>

<p>Print( a.constructor == Foo ); // true
Print( a instanceof Foo ); // true</p>

<p>Print( b.constructor == Foo ); // true
Print( b instanceof Foo ); // true</p>

<p>Print( b.constructor == Bar ); // false !
Print( b instanceof Bar ); // true
```</p>

<hr>

<h2>Objects private and public members</h2>

<p>```
function MyConstructor( pub, priv ) {</p>

<p>var privateVariable = priv;
  this.publicVariable = pub;</p>

<p>this.SetThePrivateVariable = function( value ) {</p>

<xmp><pre>
privateVariable = value;
</pre>
</xmp>

<p>}</p>

<p>this.GetThePrivateVariable = function() {</p>

<xmp><pre>
return privateVariable;
</pre>
</xmp>

<p>}</p>

<p>this.PrintAllVariables = function() {</p>

<xmp><pre>
Print( privateVariable + ',' + this.publicVariable );
</pre>
</xmp>

<p>}
}</p>

<p>var myObject = new MyConstructor( 123, 456 );</p>

<p>Print( myObject.privateVariable ); // prints: undefined
Print( myObject.publicVariable ); // prints: 123
myObject.PrintAllVariables(); // prints 456,123
myObject.SetThePrivateVariable( 789 );
myObject.PrintAllVariables(); // prints 789,123</p>

<p>```</p>

<hr>

<h2>Stack data structure</h2>

<p><h4>JavaScript 1.5</h4>
Array object has all needed methods to be used as a stack.
```
  var stack = [];
  stack.push( 111 );
  stack.push( 2.22 );
  stack.push( 'ccc' );</p>

<p>Print( stack ); // prints: 111,2.22,ccc</p>

<p>Print( stack.pop() ); // prints: ccc
  Print( stack.pop() ); // prints: 2.22
```</p>

<hr>

<h2>Singleton pattern</h2>

<p><h4>JavaScript 1.5</h4>
The singleton pattern is a <a href="http://en.wikipedia.org/wiki/Design_pattern_%28computer_science%29">design pattern</a> that is used to restrict instantiation of a class to one object.
This is useful when exactly one object is needed to coordinate actions across the system.
```
function MySingletonClass() {</p>

<p>if ( arguments.callee._singletonInstance )
    return arguments.callee._singletonInstance;
  arguments.callee._singletonInstance = this;</p>

<p>this.Foo = function() {
    // ...
  }
}</p>

<p>var a = new MySingletonClass()
var b = MySingletonClass()
Print( a === b ); // prints: true
```</p>

<hr>

<h2>Use Functions as an Object</h2>

<p><h4>JavaScript 1.5</h4>
```
function Counter() {</p>

<p>if ( !arguments.callee.count ) {</p>

<xmp><pre>
    arguments.callee.count = 0;
}
return arguments.callee.count++;
</pre>
</xmp>

<p>}
Print( Counter() ); // prints: 0
Print( Counter() ); // prints: 1
Print( Counter() ); // prints: 2
```</p>

<hr>

<h2>E4X add nodes</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

var x = &lt;store/&gt;;
x.* += &lt;item price="10" /&gt;;
x.* += &lt;item price="15" /&gt;;
Print( x.toXMLString() );
</pre>

prints:
<pre>

&lt;store&gt;
  &lt;item price="10"/&gt;
  &lt;item price="15"/&gt;
&lt;/store&gt;
</pre>
</p>

<hr>

<h2>E4X dynamic document creation</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

var html = &lt;html/&gt;;
html.head.title = "My Page Title";
html.body.@bgcolor = "#e4e4e4";
html.body.form.@name = "myform";
html.body.form.@action = "someurl.jss";
html.body.form.@method = "post";
html.body.form.@onclick = "return somejs();";
html.body.form.input[0] = "";
html.body.form.input[0].@name = "test";
Print(html.toXMLString());
</pre>

prints:
<pre>

&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;My Page Title&lt;/title&gt;
  &lt;/head&gt;
  &lt;body bgcolor="#e4e4e4"&gt;
    &lt;form name="myform" action="someurl.jss" method="post" onclick="return somejs();"&gt;
      &lt;input name="test"&gt;&lt;/input&gt;
    &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
</p>

<hr>

<h2>E4X dynamic tag name</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

var nodeName = 'FOO';
if ( isXMLName(nodeName) ) { // assert that nodeName can be used as a node name
  var x = &lt;{nodeName}&gt;test&lt;/{nodeName}&gt;
  Print( x.toXMLString() ); // prints: &lt;FOO&gt;test&lt;/FOO&gt;
}
</pre>
</p>

<hr>

<h2>E4X dynamic content</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

var content = 'FOO';
var x = &lt;item&gt;{content}&lt;/item&gt;
Print( x.toXMLString() ); // prints: &lt;item&gt;FOO&lt;/item&gt;
</pre>
</p>

<hr>

<h2>E4X iteration</h2>

<p><h4>JavaScript 1.6</h4>
```
var sales = 

  
  
  
;</p>

<p>for each( var price in sales..@price ) {
  Print( price + '\n' );
}
<pre>

prints:
</pre>

4
3
5
```</p>

<hr>

<h2>Listen a property for changes</h2>

<p>```
function onFooChange( id, oldval, newval ) {</p>

<p>Print( id + " property changed from " + oldval + " to " + newval );
  return newval;
}</p>

<p>var o = { foo:5 };
o.watch( 'foo', onFooChange );</p>

<p>o.foo = 6;</p>

<p>delete o.foo;</p>

<p>o.foo = 7;</p>

<p>o.unwatch('foo');
o.foo = 8;
<pre>

prints:
</pre>

foo property changed from 5 to 6
foo property changed from undefined to 7
```</p>

<hr>

<h2>Logical operators tricks</h2>

<p><pre>

var a = 5;
a == 5 &amp;&amp; Print( 'a is 5 \n' );
a == 7 || Print( 'a is not 7 \n' );
</pre>

prints:
<pre>

a is 5 
a is not 7
</pre>
</p>

<hr>

<h2>Functions argument default value</h2>

<p>```
function foo( a, b ) {</p>

<p>a = a || '123';
  b = b || 55;
  Print( a + ',' + b );
}</p>

<p>foo(); // prints: 123,55
foo('bar'); // prints: bar,55
foo('x', 'y'); // prints x,y
<pre>

![http://jslibs.googlecode.com/svn/wiki/warning.png](http://jslibs.googlecode.com/svn/wiki/warning.png) but:
</pre>

foo(0,''); // prints: 123,55
```
because 0 and '' are evaluated as false !</p>

<hr>

<h2>Remove an item by value in an Array object</h2>

<p><pre>

var arr = ['a', 'b', 'c', 'd'];
var pos = arr.indexOf( 'c' );
pos &gt; -1 &amp;&amp; arr.splice( pos, 1 );
Print( arr ); // prints: a,b,d
</pre>
</p>

<hr>

<h2>Multiple-value returns</h2>

<p><h4>JavaScript 1.7</h4>
```
function f() {</p>

<p>return [1, 2];
}</p>

<p>var [a, b] = f();</p>

<p>Print( a + ' ' + b ); // prints: 1 2
```</p>

<hr>

<h2>Operator [ ] and strings ( like charAt() )</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

var str = 'foobar';
Print( str[4] );
</pre>

prints:
<pre>

a
</pre>
</p>

<hr>

<h2>indexOf() and lastIndexOf() Works on Array</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

var obj = {};
var arr = [ 'foo', 567, obj, 12.34 ];
Print( arr.indexOf(obj) ); // prints: 2
</pre>
</p>

<hr>

<h2>Using Array functions on a non-Array object</h2>

<p><h4>JavaScript 1.7</h4>
<pre>

var obj = {};
Array.push(obj, 'foo');
Array.push(obj, 123);
Array.push(obj, 5.55);
Print( obj.toSource() ); // prints: ({0:"foo", length:3, 1:123, 2:5.55})
</pre>
</p>

<hr>

<h2>Change current object (this) of a function call</h2>

<p>```
function test(arg) {</p>

<p>Print( this[0]+' '+this[1]+' '+arg );
}</p>

<p>var arr = ['foo', 'bar'];
test.call(arr, 'toto'); // prints: foo bar toto
```</p>

<hr>

<h2>Filter / intercept a function call</h2>

<p>```
function bar(a, b, c, d, e, f) {</p>

<p>Print(a, b, c, d, e, f)
}</p>

<p>function foo() {</p>

<p>bar.apply(this, arguments);
}</p>

<p>foo(1, 2, 3, 4, 5, 6); // prints: 123456
```</p>

<hr>

<h2>E4X Query ( like XPath )</h2>

<p><h4>JavaScript 1.6</h4>
```
var xml = 
 
 
</p>

<p>Print( xml.data.(@id==1).@text );
var myid = 2; 
Print( xml.data.(@id==myid).@text );
<pre>

prints:
</pre>

foo
bar
```</p>

<hr>

<h2>swap two variables</h2>

<p><h4>JavaScript 1.7</h4>
<pre>

var a = 1;
var b = 2;
[a,b] = [b,a];
</pre>
</p>

<hr>

<h2>Destructuring assignment with function arguments</h2>

<p><h4>JavaScript 1.7</h4>
```
function foo( [a,b] ) {</p>

<xmp><pre>
Print(a);
Print(b);
</pre>
</xmp>

<p>}</p>

<p>foo( [12,34] );
<pre>

Prints:
</pre>

12
34
```</p>

<hr>

<h2>JavaScript scope is not C/C++ scope</h2>

<p>```
if ( false ) { // never reach the next line</p>

<xmp><pre>
var foo = 123;
</pre>
</xmp>

<p>}</p>

<p>Print(foo); // prints: undefined ( but is defined )
Print(bar); // failed: ReferenceError: bar is not defined
```</p>

<hr>

<h2>JavaScript scope and LET instruction</h2>

<p><h4>JavaScript 1.7</h4>
<pre>

var x = 5;
var y = 0;
let (x = x+10, y = 12) {
  Print(x+y);
}
Print(x+y);
</pre>

prints:
<pre>

27
5
</pre>
</p>

<p>or,
<pre>

for ( let i=0 ; i &lt; 10 ; i++ ) {
  Print(i + ' ');
}
Print(i);
</pre>

prints:
<pre>

0 1 2 3 4 5 6 7 8 9 test.js:4: ReferenceError: i is not defined
</pre>
</p>

<hr>

<h2>Defer function calls</h2>

<p>```
var opList = [];
function deferCall( text, value ) { 
    opList.push(arguments)
}
function doCall(func) { 
    while (opList.length) 
        func.apply(this,opList.shift());
}</p>

<p>deferCall( 'one', 1 );
deferCall( 'titi', 'toto' );
deferCall( 5, 'foo' );</p>

<p>function callLater(a,b) {</p>

<p>Print(a+', '+b);
}</p>

<p>doCall( callLater )
<pre>

Prints:
</pre>

one, 1
titi, toto
5, foo
```</p>

<hr>

<h2>Insert an array in another array</h2>

<p>```
var a = [1,2,3,7,8,9]</p>

<p>var b = [4,5,6]
var insertIndex = 3;</p>

<p>a.splice.apply(a, Array.concat(insertIndex, 0, b));
Print(a); // prints: 1,2,3,4,5,6,7,8,9
```</p>

<hr>

<h2>Multiple string concatenation</h2>

<p><pre>

var html = ['aaa', 'bbb', 'ccc', ...].join('');
</pre>

Is faster than:
<pre>

var html = 'aaa' + 'bbb' + 'ccc' + ...;
</pre>

This is true with a big number of elements ( &gt; 5000 )</p>

<hr>

<h2>HTTP headers parser</h2>

<p>```
var rexp_keyval = /(.<em>?): ?(.</em>?)\r?\n/g;
function headersToObject( allHeaders ) {</p>

<xmp><pre>
var res, hdrObj = {};
for ( rexp_keyval.lastIndex = 0; res = rexp_keyval.exec(allHeaders); hdrObj[res[1]] = res[2])
return hdrObj;
</pre>
</xmp>

<p>}
```</p>

<hr>

<h2>Using 'with' scope</h2>

<p><pre>

with({ a:5 }) function toto() { return a }
toto() // returns 5
</pre>
</p>

<hr>

<h2>(object).toString()</h2>

<p><pre>

var a = { toString:function() { return '123'; }  }
Print(a); // prints '123', and not [Object object]
</pre>
</p>

<hr>

<h2>RegExpr.$1</h2>

<p><pre>

var re = /a(.*)/
'abcd'.match(re)
Print( RegExp.$1 ) // prints 'bcd'
</pre>
</p>

<hr>

<h2>Binary with XmlHTTPRequest</h2>

<p><h4>browser related example</h4>
<pre>

var req = new XMLHttpRequest();
req.open('GET', "http://code.google.com/images/code_sm.png",false);
req.overrideMimeType('text/plain; charset=x-user-defined');
//req.overrideMimeType('application/octet-stream');
req.send(null);
var val = req.responseText;
Print( escape(val.substr(0,10)) );
</pre>
</p>

<hr>

<h2>Iterate on values</h2>

<p><h4>JavaScript 1.6</h4>
<pre>

for each ( var i in [3,23,4] )
    Print(i)
</pre>

Prints:
<pre>

3
23
4
</pre>
</p>

<hr>

<h2>Exceptions Handling / conditional catch (try catch if)</h2>

<p>```
function Toto(){}
function Titi(){}</p>

<p>try {</p>

<xmp><pre>
throw new Titi()
</pre>
</xmp>

<p>} catch ( err if err instanceof Toto ) {
    Print('toto')
} catch ( err if err instanceof Titi ) {
    Print('titi')
} catch(ex) {
    throw(ex);
}
```</p>

<hr>

<h2>Special chars</h2>

<p><pre>

$=4
_=5
Print( _+$)
</pre>

prints:
<pre>

9
</pre>
</p>

<hr>

<h2>object's eval method</h2>

<p><pre>

var foo = { bar:123 };
foo.eval('bar') // returns 123
</pre>
</p>

<p><pre>

var foo = { bar:123 };
with ( foo )
 var val = eval( 'bar' );
Print( val ); // returns 123
</pre>
</p>

<hr>

<h2>eval this</h2>

<p>```
function test() {</p>

<xmp><pre>
Print(eval('this'));
</pre>
</xmp>

<p>}
test.call(123)
<pre>

prints:
</pre>

123
```</p>

<hr>

<h2>No Such Method ( noSuchMethod )</h2>

<p><pre>

var o = {}
o.__noSuchMethod__ = function(arg){ Print('unable to call "'+arg+'" function') }
o.foo(234)
</pre>

prints:
<pre>

unable to call "foo" function
</pre>
</p>

<hr>

<h2>RegExp replace</h2>

<p>```
function Replacer( conversionObject ) {</p>

<xmp><pre>
var regexpStr = '';
for ( var k in conversionObject )
    regexpStr += (regexpStr.length ? '|' : '') + k;
var regexpr = new RegExp(regexpStr,'ig'); // g: global, m:multi-line i: ignore case
return function(s) { return s.replace(regexpr, function(str, p1, p2, offset, s) { var a = conversionObject[str]; return a == undefined ? str : a }) }
</pre>
</xmp>

<p>}</p>

<p>var myReplacer = Replacer( { '<br>':'\n', '&amp;':'&amp;', '&lt;':'&lt;', '&gt;':'&gt;', '"':'"' } );</p>

<p>Print( myReplacer('aa<br>a &amp;&amp;&amp;&lt;') );
<pre>

prints:
</pre>

aa
a &amp;&amp;&amp;&lt;
```</p>

<hr>

<h2>Values comparison</h2>

<p>```
[4] === 4 // is: false
[4] == 4 // is: true</p>

<p>'0' == 0 // is: true
'0' === 0 // is: false
```</p>

<hr>

<h2>undefined, null, 0, false, '', ...</h2>

<p>```
var a = { b:undefined, c:null, d:0, f:'' }</p>

<p>a['b'] // is: undefined
a['e'] // is: undefined</p>

<p>'b' in a // is: true
'e' in a // is: false</p>

<p>Boolean(a.b) // is: false
Boolean(a.c) // is: false
Boolean(a.d) // is: false
Boolean(a.e) // is: false !
Boolean(a.f) // is: false</p>

<p>typeof( asvqwfevqwefq ) == 'undefined' // =true</p>

<p>Print( '' == false ); // prints: true
Print( 0 == false ); // prints: true
Print( [] == false ); // prints: true</p>

<p>Print( [] == '' ); // prints: true
Print( '' == 0 ); // prints: true
Print( [] == 0 ); // prints: true</p>

<p>```</p>

<hr>

<h2>constructor property ( InstanceOf + Type )</h2>

<p><pre>

var a = {};
a.constructor === Object // is: true
</pre>
</p>

<hr>

<h2>AJAX evaluation</h2>

<p>```
var a = {</p>

<xmp><pre>
b:function() { Print(123) }
</pre>
</xmp>

<p>}</p>

<p>var body = 'b();';</p>

<p>with(a) { eval(body) }; // Prints 123
```</p>

<hr>

<h2>Comma operator</h2>

<p>```
var a = 0;
var b = ( a++, 99 );</p>

<p>a // is: 1
b // is: 99</p>

<p>var i = 0;
while( Print('x '), i++&lt;10 )
    Print(i + ' ')
```
prints:
<pre>
x 1 x 2 x 3 x 4 x 5 x 6 x 7 x 8 x 9 x 10 x</pre>
</p>

<hr>

<h2>closures pitfall</h2>

<p>```
var a = [];</p>

<p>for ( var i=0; i&lt;10; i++ ) {</p>

<p>a[i] = function() { Print(i); }
}</p>

<p>a0; // is: 10
a1; // is: 10
a2; // is: 10
a3; // is: 10
```</p>

<p>simpler case:
<pre>

var i = 5;
function foo() { Print(i) }
foo(); // prints 5
i = 6;
foo(); // prints 6
</pre>
</p>

Closure definition

<p>A closure occurs when one function appears entirely within the body of another, and the inner function refers to local variables of the outer function.</p>

links

<p><a href="http://www.jibbering.com/faq/faq_notes/closures.html">obligated lecture to understand closures</a></p>

<p>In the first example, you can avoid the behavior using the let instruction:
```
var a = [];</p>

<p>for ( var i=0; i&lt;10; i++ ) {
 let j = i;
 a[i] = function() { Print(j); }
}
```
In this case, each instances of the (anonymous) inner function refer to different instances of variable j.</p>

<hr>

<h2>sharp variable</h2>

<p>```
var a = { titi:#1={}, toto:#1# };
a.titi === a.toto; // is: true</p>

<p>var a = { b:#1={ c:#1# } }
// a.b.c.c.c.c.c.c...
```</p>

<hr>

<h2>common object between 2 objects</h2>

<p>```
function a() {}</p>

<p>a.prototype = { b:{} }</p>

<p>c = new a;
d = new a;</p>

<p>c.b.e = 2;</p>

<p>c.b === d.b // is: true !
d.b.e // is: 2
```</p>

<hr>

<h2>constructor</h2>

<p>```
function a( b ) {</p>

<xmp><pre>
Print(b);
</pre>
</xmp>

<p>}</p>

<p>c.prototype = new a;</p>

<p>function c( arg ) {</p>

<xmp><pre>
this.constructor.apply( this, arg );
</pre>
</xmp>

<p>};</p>

<p>o = new c( [1,2,3] );
<pre>

prints:
</pre>

undefined
1
```</p>

<hr>

<h2>JavaScript string can contain null chars</h2>

<p><pre>

var test = '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00';
test.length // is: 10
</pre>
</p>

<hr>

<h2>'new' operator precedence</h2>

<p>```
function test() {</p>

<xmp><pre>
this.toto = 1234;
</pre>
</xmp>

<p>}</p>

<p>(new test()).toto // ok ( logical way )</p>

<p>new test().toto // ok</p>

<p>new test.toto // bad !</p>

<p>(new test).toto // ok
```</p>

<hr>

<h2>constructor usage</h2>

<p>```
function toto( val ) { // parent class</p>

<xmp><pre>
this.print = function() {

    Print( val );
}
</pre>
</xmp>

<p>}</p>

<p>titi.prototype = new toto;</p>

<p>function titi( val ) { // child class</p>

<xmp><pre>
this.constructor(val);
</pre>
</xmp>

<p>}</p>

<p>(new titi(7)).print(); // prints 7
```</p>

<hr>

<h2>To object</h2>

<p><pre>

var obj = Object(123);
obj.foo = 678;
Print( typeof( obj ) + ', ' + obj + ', ' + obj.foo ); // prints: object, 123, 678
</pre>
</p>

<hr>

<h2>Serialize or uneval a variable or an object ( can be nested )</h2>

<p>```
var o = { a:123, b:'test', c:function() { return 987; } }</p>

<p>Print( o.toSource() ); // prints: ({a:123, b:"test", c:(function () {return 987;})})</p>

<p>Print( uneval(o) ); // prints: ({a:123, b:"test", c:(function () {return 987;})})
```</p>

<hr>

<h2>JavaScript labels</h2>

<p><pre>

xxx: {
    Print( 111 )
    break xxx;
    Print( 222 )
}
</pre>

prints:
<pre>

111
</pre>
</p>

<hr>

<h2>for in loop</h2>

<p><pre>

for ( var i in function(){ return [1, 2, 3] }() )
  Print( i );
</pre>

prints:
<pre>

0
1
2
</pre>
</p>

<hr>

<h2>proto ( prototype property )</h2>

<p><pre>

var a = {}
var b = {}
a.__proto__ == b.__proto__ // is: true
</pre>
</p>

<hr>

<h2>Numbers and floating point error</h2>

<p><pre>

Print( 1000000000000000128 ); // prints 1000000000000000100
</pre>
</p>

<hr>

<h2>Number base conversion ( hexadecimal )</h2>

<p>```
(255).toString(16); // is: ff</p>

<p>parseInt( 'ff', 16 ) // is: 255</p>

<p>parseInt('0xff'); // is 255
```</p>

<hr>

<h2>try / catch / finally</h2>

<p>```
try {</p>

<p>} catch(ex) {</p>

<xmp><pre>
Print('catch')
</pre>
</xmp>

<p>} finally {</p>

<xmp><pre>
Print('finally')
</pre>
</xmp>

<p>}
<pre>

prints:
</pre>

finally
```</p>

<hr>

<h2>Object argument</h2>

<p>```
var proto = {</p>

<xmp><pre>
x: function() { return 'x' }
</pre>
</xmp>

<p>}</p>

<p>var o1 = new Object( proto );
var o2 = new Object( proto );</p>

<p>o1 == o2 // is: true
```</p>

<hr>

<h2>object and its prototype</h2>

<p>```
function obj() {}</p>

<p>obj.prototype = { x:1 };
var b = new obj;</p>

<p>obj.prototype = { x:2 };
var c = new obj;</p>

<p>c.x == b.x // is: false
```</p>

<hr>

<h2>Runtime prototype object</h2>

<p>```
var proto1 = {
    a:function(){ return 1 }
}</p>

<p>var proto2 = {
    a:function(){ return 2 }
}</p>

<p>function createObject( proto ) {</p>

<xmp><pre>
var cl = function() {}
cl.prototype = proto;
return new cl;
</pre>
</xmp>

<p>}</p>

<p>var v1 = createObject( proto1 ).a
var v2 = createObject( proto2 ).a</p>

<p>Print( v1() );
Print( v2() );</p>

<p>Print( createObject( proto1 ).a === createObject( proto1 ).a );
<pre>

prints:
</pre>

1
2
true
```</p>

<hr>

<h2>for in loop and undefined value</h2>

<p><pre>

var o = { x:undefined }
for ( var i in o )
    Print(i)
</pre>

prints:
<pre>

x
</pre>
</p>

<hr>

<h2>Call function in parent class</h2>

<p>```
toto.prototype = new function() {</p>

<xmp><pre>
this.a = function() {

    Print(456)
}
</pre>
</xmp>

<p>};</p>

<p>function toto() {</p>

<xmp><pre>
this.a=function(){

    Print(123)
    toto.prototype.a.call(this); // or: this.__proto__.a();
}
</pre>
</xmp>

<p>}</p>

<p>var o = new toto;
o.a();
<pre>

prints:
</pre>

123
456
```</p>

<hr>

<h2>getter and setter function</h2>

<p>```
abcd getter = function() {</p>

<xmp><pre>
Print(345);
</pre>
</xmp>

<p>}</p>

<p>abcd;
abcd;
abcd;
<pre>

prints:
</pre>

345
345
345
```</p>

Beware

<p>The previous syntax used to define a getter is <strong>highly deprecated</strong>, and should be replaced with:
```
<strong>defineGetter</strong>('abcd', function() {</p>

<xmp><pre>
Print(345);
</pre>
</xmp>

<p>});
```</p>

<hr>

<h2>defineGetter ( define getter )</h2>

<p><pre>

o = {}
o.__defineGetter__('x', function(){ Print('xxx')} )
o.x
</pre>

prints:
<pre>

xxx
</pre>
</p>

<hr>

<h2>check if an object or its prototype has a propery (hasOwnProperty)</h2>

<p>```
var o = { a:1 }
o.<strong>proto</strong> = { b:2 }</p>

<p>o.hasOwnProperty('a'); // is: true
o.hasOwnProperty('b'); // is: false
```</p>

<p>check this <a href="http://yuiblog.com/blog/2006/09/26/for-in-intrigue/">article</a> about hasOwnProperty function</p>

<hr>

<h2>check if a property is enumerable (propertyIsEnumerable)</h2>

<p>```
var o = { a:1 }</p>

<p>o.propertyIsEnumerable( 'a' ); // is: true</p>

<p>[].propertyIsEnumerable( 'splice' ); // is: false
```</p>

<hr>

<h2>find the getter/setter function of an object ( lookup getter )</h2>

<p>```
function test() {</p>

<xmp><pre>
this.x getter = function(){ Print( 'getter' ) }
this.x setter = function(){ Print( 'setter' ) }
</pre>
</xmp>

<p>}</p>

<p>var t = new test
Print( t.<strong>lookupGetter</strong>( 'x' ) );
<pre>

prints:
</pre>

function () {
    Print("getter");
}
```</p>

<hr>

<h2>suppress array element while iterating it</h2>

<p>the following example will failed :
```
var a = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ];
for ( var i in a ) {</p>

<xmp><pre>
if ( a[i] == 1 || a[i] == 2 )
a.splice( i, 1 );
</pre>
</xmp>

<p>}
Print( a ); // prints: 0,2,3,4,5,6,7,8,9
Print( a.length ); // prints: 9
```</p>

<p>We can use : <pre>
a[i] == undefined;</pre>

Or start from the end :
```
var a = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 ];</p>

<p>for ( var i = a.length - 1; i &gt;= 0; i-- ) {</p>

<xmp><pre>
if ( a[i] == 0 || a[i] == 8 )
a.splice( i, 1 );
</pre>
</xmp>

<p>}
Print( a ); // prints: 1,2,3,4,5,6,7,9
Print( a.length ); // prints: 8
```</p>

<hr>

<h2>JavaScript arrays</h2>

<p>```
var a = [ 1,2,3 ];
a.x = 'xxx';</p>

<p>for ( var i = 0; i &lt; a.length; i++ )
    Print('a: '+a[i]);</p>

<p>for ( var i in a )
    Print('b: '+a[i]);
<pre>

prints:
</pre>

a: 1
a: 2
a: 3
b: 1
b: 2
b: 3
b: xxx
```</p>

<hr>

<h2>delete array element</h2>

<p>The following do not work:
<pre>

var ti = [5,6,7,8];
ti.length // is: 4
delete ti[3]
ti.length // is: 4
</pre>
</p>

<p>Use 'splice' instead:
<pre>

ti.splice(3, 1);
</pre>
</p>

<hr>


<h2>store information on the viewer’s computer</h2>
Preload your images
Quick Sample
<xmp>
<script>
var images = new Array();
function preloadImages(){
    for (i=0; i < preloadImages.arguments.length; i++){
         images[i] = new Image();
        images[i].src = preloadImages.arguments[i];
    }
}
preloadImages("logo.jpg", "main_bg.jpg", "body_bg.jpg", "header_bg.jpg");
</script>
</xmp>

<h2>E-mail Validation</h2>
<xmp>
<script>
function validateEmail(theForm) {
if (/^w+([.-]?w+)*@w+([.-]?w+)*(.w{2,3})+$/.test(theForm.email-id.value)){
return(true);
}
alert("Invalid e-mail address! Please enter again carefully!.");
return(false);
}
</script>
</xmp>
Body:
<xmp>
<form onSubmit="return validateEmail(this);" action="">
E-mail Address:
<input type="text" name="emailid" />
<input type="submit" value="Submit" />
<input type="reset" value="Reset" />
</form>
</xmp>


<h2>No Right-Click</h2>
Quick Sample
<xmp>
<script>
function f1() {
  if(document.all) { return false; }
}
function f2(e) {
  if(document.layers || (document.getElementById &! document.all)) {
    if(e.which==2 || e.which==3) { return false; }
  }
}
if(document.layers) {
  document.captureEvents(Event.MOUSEDOWN);
  document.onmousedown = f1;
}
else {
  document.onmouseup = f2;
  document.oncontextmenu = f1;
}
document.oncontextmenu = new function("return false");
</script>
</xmp>

<h2>Display Random Quotes</h2>
Quick Sample
Head:
<xmp>
<script>
  writeRandomQuote = function () {
    var quotes = new Array();
    quotes[0] = "Action is the real measure of intelligence.";
    quotes[1] = "Baseball has the great advantage over cricket of being sooner ended.";
    quotes[2] = "Every goal, every action, every thought, every feeling one experiences, whether it be consciously or unconsciously known, is an attempt to increase one’s level of peace of mind.";
    quotes[3] = "A good head and a good heart are always a formidable combination.";
    var rand = Math.floor(Math.random()*quotes.length);
    document.write(quotes[rand]);
  }
  writeRandomQuote();
</script>
</xmp>
Body:
<xmp>
<script>writeRandomQuote();</script>
</xmp>

<h2>Previous/Next Links</h2>
Quick Sample
<xmp>
<a href="javascript:history.back(1)">Previous Page</a> | <a href="javascript:history.back(-1)">Next Page</a>
</xmp>
What does the JavaScript snippet do?
This snippet is great if you have multiple pages on an article or tutorial. It will allow the user the browse between the pages with ease. It is also small and light weight from a resource point of view.


<h2>Bookmark a Page</h2>
Quick Sample
<xmp>
<a href="javascript:window.external.AddFavorite(‘http://www.yoursite.com’, ‘Your Site Name’)">Add to Favorites</a>
</xmp>


<h2>Easy Print Page Link</h2>
Quick Sample
<xmp>
<a href="javascript:window.print();">Print Page</a>
</xmp>


<h2>Show Formatted Date</h2>
Quick Sample
Head:
<xmp>
<script>
  function showDate() {
    var d = new Date();
    var curr_date = d.getDate();
    var curr_month = d.getMonth() + 1; //months are zero based
    var curr_year = d.getFullYear();
    document.write(curr_date + "-" + curr_month + "-" + curr_year);
  }
</script>
</xmp>
Body:
<xmp>
<script>showDate();</script>
</xmp>


<h2>Comma Separator</h2>
Quick Sample
Head:
<xmp>
<script>
function addCommas(num) {
  num += ”;
  var n1 = num.split(‘.’);
  var n2 = n1[0];
  var n3 = n1.length > 1 ? ‘.’ + n1[1] : ”;
  var temp = /(d+)(d{3})/;
  while (temp.test(n2)) {
    n2 = n2.replace(temp, ” + ‘,’ + ”);
  }
  var out = return n2 + n3;
  document.write(out);
}
</script>
</xmp>
Body:
<xmp>
<script>addCommas("4550989023");</script>
</xmp>

<h2>Get the Display Area of a Browser</h2>
Quick Sample
<xmp>
<script>
<!–
var viewportwidth;
var viewportheight;
// the more standards compliant browsers (mozilla/netscape/opera/IE7) use window.innerWidth and window.innerHeight
if (typeof window.innerWidth != ‘undefined’)
{
      viewportwidth = window.innerWidth,
      viewportheight = window.innerHeight
}
// IE6 in standards compliant mode (i.e. with a valid doctype as the first line in the document)
else if (typeof document.documentElement != ‘undefined’
     && typeof document.documentElement.clientWidth !=
     ‘undefined’ && document.documentElement.clientWidth != 0)
{
       viewportwidth = document.documentElement.clientWidth,
       viewportheight = document.documentElement.clientHeight
}
// older versions of IE
else
{
       viewportwidth = document.getElementsByTagName(‘body’)[0].clientWidth,
       viewportheight = document.getElementsByTagName(‘body’)[0].clientHeight
}
document.write(‘<p>Your viewport width is ‘+viewportwidth+’x’+viewportheight+'</p>’);
//–>
</script>
</xmp>

<h2>Redirect with Optional Delay</h2>
Quick Sample
<xmp>
<script>
setTimeout( "window.location.href =
‘http://walkerwines.com.au/’", 5*1000 );
</script>
</xmp>

<h2>Detect iPhones</h2>
Sample
<xmp>
<script>
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i))) {
    if (document.cookie.indexOf("iphone_redirect=false") == -1) {
        window.location = "http://m.espn.go.com/wireless/?iphone&i=COMR";
    }
}
</script>
</xmp>

<h2>Print Message to Status Bar</h2>
Quick Sample
<xmp>
<script> 
<!– 
   window.status = "<TYPE YOUR MESSAGE>"; 
// –> 
</script>
</xmp>

<h2>Highlighting text</h2>
There are many jQuery plugins to highlight text.
This technique is easy without any libraries. The script returns the original text with the terms wrapped in a tag so they can be styled with CSS.
<xmp>
function highlight(text, words, tag) {
 
  // Default tag if no tag is provided
  tag = tag || 'span';
 
  var i, len = words.length, re;
  for (i = 0; i < len; i++) {
    // Global regex to highlight all matches
    re = new RegExp(words[i], 'g');
    if (re.test(text)) {
      text = text.replace(re, '<'+ tag +' class="highlight">$&</'+ tag +'>');
    }
  }
 
  return text;
}
</xmp>

<h2>unhighlight text</h2>
<xmp>
function unhighlight(text, tag) {
  // Default tag if no tag is provided
  tag = tag || 'span';
  var re = new RegExp('(<'+ tag +'.+?>|<\/'+ tag +'>)', 'g');
  return text.replace(re, '');
}
</xmp>
Usage:
<xmp>
$('p').html( highlight(
    $('p').html(), // the text
    ['foo', 'bar', 'baz', 'hello world'], // list of words or phrases to highlight
    'strong' // custom tag
));
</xmp>

<h2>Creating dynamic menus</h2>
<xmp>
function makeMenu(items, tags) {
 
  tags = tags || ['ul', 'li']; // default tags
  var parent = tags[0];
  var child = tags[1];
 
  var item, value = '';
  for (var i = 0, l = items.length; i < l; i++) {
    item = items[i];
    // Separate item and value if value is present
    if (/:/.test(item)) {
      item = items[i].split(':')[0];
      value = items[i].split(':')[1];
    }
    // Wrap the item in tag
    items[i] = '<'+ child +' '+ 
      (value && 'value="'+value+'"') +'>'+ // add value if present
        item +'</'+ child +'>';
  }
 
  return '<'+ parent +'>'+ items.join('') +'</'+ parent +'>';
}
</xmp>
Usage:
<xmp>
// Dropdown select month
makeMenu(
  ['January:JAN', 'February:FEB', 'March:MAR'], // item:value
  ['select', 'option']
);
 
// List of groceries
makeMenu(
  ['Carrots', 'Lettuce', 'Tomatos', 'Milk'],
  ['ol', 'li']
);
</xmp>
<hr>
<br>

<h2>debugging</h2>
<xmp>

x <- tryCatch( 
 expr, 
 warning=function(w){ return(paste( "Warning:", conditionMessage(w)))}, 
 error = function(e) { return(paste( "Error:", conditionMessage(e)))}, 
 finally={ print("This is try-catch output.")}
 )
</xmp>
<hr>
<br>


<h2>xmp, display html tags inside an HTML document</h2>
<xmp>

<html>
<body>This is my html inside html.</body>
</html>

Can also add styles and formatting inside <xmp> as well.

</xmp>

<hr>
<br>
<br>
<h2>1 – Don’t forget var keyword when assigning a variable’s value for the first time.</h2>
<br>
Assignment to an undeclared variable automatically results in a global variable being created. Avoid global variables.<br>
<br>
<h2>2 – use === instead of ==</h2>
<br>
The == (or !=) operator performs an automatic type conversion if needed. The === (or !==) operator will not perform any conversion. It compares the value and the type, which could be considered faster than ==.<br>
<br>
[10] === 10    // is false<br>
[10]  == 10    // is true<br>
'10' == 10     // is true<br>
'10' === 10    // is false<br>
 []   == 0     // is true<br>
 [] ===  0     // is false<br>
 '' == false   // is true but true == "a" is false<br>
 '' ===   false // is false <br>
<br>
<h2>3 – undefined, null, 0, false, NaN, '' (empty string) are all falsy.</h2>
<br>
<h2>4 – Use Semicolons for line termination</h2>
<br>
The use of semi-colons for line termination is a good practice. You won’t be warned if you forget it, because in most cases it will be inserted by the JavaScript parser. For more details about why you should use semi-colons, take a look to this artice: http://davidwalsh.name/javascript-semicolons.<br>
<br>
<h2>5 – Create an object constructor</h2>
<br>
function Person(firstName, lastName){<br>
    this.firstName =  firstName;<br>
    this.lastName = lastName;        <br>
}  <br>
<br>
var Saad = new Person("Saad", "Mousliki");<br>
<br>
<h2>6 – Be careful when using typeof, instanceof and constructor.</h2>
<br>
typeof : a JavaScript unary operator used to  return a string that represents the primitive type of a variable,  don’t forget that typeof null will return “object”, and for the majority of object types (Array, Date, and others) will return also “object”.<br>
constructor : is a property of the internal prototype property, which could be overridden by code.<br>
instanceof : is another JavaScript operator that check in all the prototypes chain the constructor it returns true if it’s found and false if not.<br>
var arr = ["a", "b", "c"];<br>
typeof arr;   // return "object" <br>
arr  instanceof Array // true<br>
arr.constructor();  //[]<br>
<br>
<h2>7 – Create a Self-calling Function</h2>
<br>
This is often called a Self-Invoked Anonymous Function or Immediately Invoked Function Expression (IIFE). It is a function that executes automatically when you create it, and has the following form:<br>
<br>
(function(){<br>
    // some private code that will be executed automatically<br>
})();  <br>
(function(a,b){<br>
    var result = a+b;<br>
    return result;<br>
})(10,20)<br>
<br>
<h2>8 – Get a random item from an array</h2>
<br>
var items = [12, 548 , 'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' , 2145 , 119];<br>
<br>
var  randomItem = items[Math.floor(Math.random() * items.length)];<br>
<br>
<h2>9 – Get a random number in a specific range</h2>
<br>
This code snippet can be useful when trying to generate fake data for testing purposes, such as a salary between min and max.<br>
<br>
var x = Math.floor(Math.random() * (max - min + 1)) + min;<br>
<br>
<h2>10 – Generate an array of numbers with numbers from 0 to max</h2>
<br>
var numbersArray = [] , max = 100;<br>
<br>
for( var i=1; numbersArray.push(i++) < max;);  // numbers = [1,2,3 ... 100] <br>
<br>
<h2>11 – Generate a random set of alphanumeric characters</h2>
<br>
function generateRandomAlphaNum(len) {<br>
    var rdmString = "";<br>
    for( ; rdmString.length < len; rdmString  += Math.random().toString(36).substr(2));<br>
    return  rdmString.substr(0, len);<br>
<br>
}<br>
<br>
<h2>12 – Shuffle an array of numbers</h2>
<br>
var numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411];<br>
numbers = numbers.sort(function(){ return Math.random() - 0.5});<br>
/* the array numbers will be equal for example to [120, 5, 228, -215, 400, 458, -85411, 122205]  */<br>
A better option could be to implement a random sort order by code (e.g. : Fisher-Yates shuffle), than using the native sort JavaScript function. For more details take a look to this discussion.<br>
<br>
<h2>13 – A string trim function</h2>
<br>
The classic trim function of Java, C#, PHP and many other language that remove whitespace from a string doesn’t exist in JavaScript, so we could add it to the String object.<br>
<br>
String.prototype.trim = function(){return this.replace(/^s+|s+$/g, "");};  <br>
A native implementation of the trim() function is available in the recent JavaScript engines.<br>
<br>
<h2>14 – Append an array to another array</h2>
<br>
var array1 = [12 , "foo" , {name "Joe"} , -2458];<br>
<br>
var array2 = ["Doe" , 555 , 100];<br>
Array.prototype.push.apply(array1, array2);<br>
/* array1 will be equal to  [12 , "foo" , {name "Joe"} , -2458 , "Doe" , 555 , 100] */<br>
<br>
<h2>15 – Transform the arguments object into an array</h2>
<br>
var argArray = Array.prototype.slice.call(arguments);<br>
<br>
<h2>16 – Verify that a given argument is a number</h2>
<br>
function isNumber(n){<br>
    return !isNaN(parseFloat(n)) && isFinite(n);<br>
}<br>
<br>
<h2>17 – Verify that a given argument is an array</h2>
<br>
function isArray(obj){<br>
    return Object.prototype.toString.call(obj) === '[object Array]' ;<br>
}<br>
Note that if the toString() method is overridden, you will not get the expected result using this trick.<br>
<br>
Or use…<br>
<br>
Array.isArray(obj); // its a new Array method<br>
You could also use instanceof if you are not working with multiple frames. However, if you have many contexts, you will get a wrong result.<br>
<br>
var myFrame = document.createElement('iframe');<br>
document.body.appendChild(myFrame);<br>
<br>
var myArray = window.frames[window.frames.length-1].Array;<br>
var arr = new myArray(a,b,10); // [a,b,10]  <br>
<br>
// instanceof will not work correctly, myArray loses his constructor <br>
// constructor is not shared between frames<br>
arr instanceof Array; // false<br>
<br>
<h2>18 – Get the max or the min in an array of numbers</h2>
<br>
var  numbers = [5, 458 , 120 , -215 , 228 , 400 , 122205, -85411]; <br>
var maxInNumbers = Math.max.apply(Math, numbers); <br>
var minInNumbers = Math.min.apply(Math, numbers);<br>
<br>
<h2>19 – Empty an array</h2>
<br>
var myArray = [12 , 222 , 1000 ];  <br>
myArray.length = 0; // myArray will be equal to [].<br>
<br>
<h2>20 – Don’t use delete to remove an item from array</h2>
<br>
Use splice instead of using delete to delete an item from an array. Using delete replaces the item with undefined instead of the removing it from the array.<br>
<br>
Instead of…<br>
<br>
var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; <br>
items.length; // return 11 <br>
delete items[3]; // return true <br>
items.length; // return 11 <br>
/* items will be equal to [12, 548, "a", undefined × 1, 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */<br>
Use…<br>
<br>
var items = [12, 548 ,'a' , 2 , 5478 , 'foo' , 8852, , 'Doe' ,2154 , 119 ]; <br>
items.length; // return 11 <br>
items.splice(3,1) ; <br>
items.length; // return 10 <br>
/* items will be equal to [12, 548, "a", 5478, "foo", 8852, undefined × 1, "Doe", 2154,       119]   */<br>
The delete method should be used to delete an object property.<br>
<br>
<h2>21 – Truncate an array using length</h2>
<br>
Like the previous example of emptying an array, we truncate it using the length property.<br>
<br>
var myArray = [12 , 222 , 1000 , 124 , 98 , 10 ];  <br>
myArray.length = 4; // myArray will be equal to [12 , 222 , 1000 , 124].<br>
As a bonus, if you set the array length to a higher value, the length will be changed and new items will be added with undefined as a value. The array length is not a read only property.<br>
<br>
myArray.length = 10; // the new array length is 10 <br>
myArray[myArray.length - 1] ; // undefined<br>
<br>
<h2>22 – Use logical AND/ OR for conditions</h2>
<br>
var foo = 10;  <br>
foo == 10 && doSomething(); // is the same thing as if (foo == 10) doSomething(); <br>
foo == 5 || doSomething(); // is the same thing as if (foo != 5) doSomething();<br>
The logical OR could also be used to set a default value for function argument.<br>
<br>
function doSomething(arg1){ <br>
    arg1 = arg1 || 10; // arg1 will have 10 as a default value if it’s not already set<br>
}<br>
<br>
<h2>23 – Use the map() function method to loop through an array’s items</h2>
<br>
var squares = [1,2,3,4].map(function (val) {  <br>
    return val * val;  <br>
}); <br>
// squares will be equal to [1, 4, 9, 16] <br>
<br>
<h2>24 – Rounding number to N decimal place</h2>
<br>
var num =2.443242342;<br>
num = num.toFixed(4);  // num will be equal to 2.4432<br>
NOTE : the toFixed() function returns a string and not a number.<br>
<br>
<h2>25 – Floating point problems</h2>
<br>
0.1 + 0.2 === 0.3 // is false <br>
9007199254740992 + 1 // is equal to 9007199254740992  <br>
9007199254740992 + 2 // is equal to 9007199254740994<br>
Why does this happen? 0.1 +0.2 is equal to 0.30000000000000004. What you need to know is that all JavaScript numbers are floating points represented internally in 64 bit binary according to the IEEE 754 standard. For more explanation, take a look to this blog post.<br>
<br>
You can use toFixed() and toPrecision() to resolve this problem.<br>
<br>
<h2>26 – Check the properties of an object when using a for-in loop</h2>
<br>
This code snippet could be useful in order to avoid iterating through the properties from the object’s prototype.<br>
<br>
for (var name in object) {  <br>
    if (object.hasOwnProperty(name)) { <br>
        // do something with name                    <br>
    }  <br>
}<br>
<br>
<h2>27 – Comma operator</h2>
<br>
var a = 0; <br>
var b = ( a++, 99 ); <br>
console.log(a);  // a will be equal to 1 <br>
console.log(b);  // b is equal to 99<br>
<br>
<h2>28 – Cache variables that need calculation or querying</h2>
<br>
In the case of a jQuery selector, we could cache the DOM element.<br>
<br>
var navright = document.querySelector('#right'); <br>
var navleft = document.querySelector('#left'); <br>
var navup = document.querySelector('#up'); <br>
var navdown = document.querySelector('#down');<br>
<br>
<h2>29 – Verify the argument before passing it to isFinite()</h2>
<br>
isFinite(0/0) ; // false <br>
isFinite("foo"); // false <br>
isFinite("10"); // true <br>
isFinite(10);   // true <br>
isFinite(undefined);  // false <br>
isFinite();   // false <br>
isFinite(null);  // true  !!! <br>
<br>
<h2>30 – Avoid negative indexes in arrays</h2>
<br>
var numbersArray = [1,2,3,4,5]; <br>
var from = numbersArray.indexOf("foo") ;  // from is equal to -1 <br>
numbersArray.splice(from,2);    // will return [5]<br>
Make sure that the arguments passed to splice are not negative.<br>
<br>
<h2>31 – Serialization and deserialization (working with JSON)</h2>
<br>
var person = {name :'Saad', age : 26, department : {ID : 15, name : "R&D"} }; <br>
var stringFromPerson = JSON.stringify(person); <br>
/* stringFromPerson is equal to "{"name":"Saad","age":26,"department":{"ID":15,"name":"R&D"}}"   */ <br>
var personFromString = JSON.parse(stringFromPerson);  <br>
/* personFromString is equal to person object  */<br>
<br>
<h2>32 – Avoid the use of eval() or the Function constructor</h2>
<br>
Use of eval or the Function constructor are expensive operations as each time they are called script engine must convert source code to executable code.<br>
<br>
var func1 = new Function(functionCode);<br>
var func2 = eval(functionCode);<br>
<br>
<h2>33 – Avoid using with() (The good part)</h2>
<br>
Using with() inserts a variable at the global scope. Thus, if another variable has the same name it could cause confusion and overwrite the value.<br>
<br>
<h2>34 – Avoid using for-in loop for arrays</h2>
<br>
Instead of using…<br>
<br>
var sum = 0;  <br>
for (var i in arrayNumbers) {  <br>
    sum += arrayNumbers[i];  <br>
}<br>
…it’s better to use…<br>
<br>
var sum = 0;  <br>
for (var i = 0, len = arrayNumbers.length; i < len; i++) {  <br>
    sum += arrayNumbers[i];  <br>
}<br>
As a bonus, the instantiation of i and len is executed once because it’s in the first statement of the for loop. Thsi is faster than using…<br>
<br>
for (var i = 0; i < arrayNumbers.length; i++)<br>
Why? The length of the array arrayNumbers is recalculated every time the loop iterates.<br>
<br>
NOTE : the issue of recalculating the length in each iteration was fixed in the latest JavaScript engines.<br>
<br>
<h2>35 – Pass functions, not strings, to setTimeout() and setInterval()</h2>
<br>
If you pass a string into setTimeout() or setInterval(), the string will be evaluated the same way as with eval, which is slow. Instead of using…<br>
<br>
setInterval('doSomethingPeriodically()', 1000);  <br>
setTimeout('doSomethingAfterFiveSeconds()', 5000);<br>
…use…<br>
<br>
setInterval(doSomethingPeriodically, 1000);  <br>
setTimeout(doSomethingAfterFiveSeconds, 5000);<br>
<br>
<h2>36 – Use a switch/case statement instead of a series of if/else</h2>
<br>
Using switch/case is faster when there are more than 2 cases, and it is more elegant (better organized code). Avoid using it when you have more than 10 cases.<br>
<br>
<h2>37 – Use switch/case statement with numeric ranges</h2>
<br>
Using a switch/case statement with numeric ranges is possible with this trick.<br>
<br>
function getCategory(age) {  <br>
    var category = "";  <br>
    switch (true) {  <br>
        case isNaN(age):  <br>
            category = "not an age";  <br>
            break;  <br>
        case (age >= 50):  <br>
            category = "Old";  <br>
            break;  <br>
        case (age <= 20):  <br>
            category = "Baby";  <br>
            break;  <br>
        default:  <br>
            category = "Young";  <br>
            break;  <br>
    };  <br>
    return category;  <br>
}  <br>
getCategory(5);  // will return "Baby"<br>
<br>
<h2>38 – Create an object whose prototype is a given object</h2>
<br>
It’s possible to write a function that creates an object whose prototype is the given argument like this…<br>
<br>
function clone(object) {  <br>
    function OneShotConstructor(){}; <br>
    OneShotConstructor.prototype= object;  <br>
    return new OneShotConstructor(); <br>
} <br>
clone(Array).prototype ;  // []<br>
<br>
<h2>39 – An HTML escaper function</h2>
<br>
function escapeHTML(text) {  <br>
    var replacements= {"<": "&lt;", ">": "&gt;","&": "&amp;", """: "&quot;"};                      <br>
    return text.replace(/[<>&"]/g, function(character) {  <br>
        return replacements[character];  <br>
    }); <br>
}<br>
<br>
<h2>40 – Avoid using try-catch-finally inside a loop</h2>
<br>
The try-catch-finally construct creates a new variable in the current scope at runtime each time the catch clause is executed where the caught exception object is assigned to a variable.<br>
<br>
Instead of using…<br>
<br>
var object = ['foo', 'bar'], i;  <br>
for (i = 0, len = object.length; i <len; i++) {  <br>
    try {  <br>
        // do something that throws an exception <br>
    }  <br>
    catch (e) {   <br>
        // handle exception  <br>
    } <br>
}<br>
…use…<br>
<br>
var object = ['foo', 'bar'], i;  <br>
try { <br>
    for (i = 0, len = object.length; i <len; i++) {  <br>
        // do something that throws an exception <br>
    } <br>
} <br>
catch (e) {   <br>
    // handle exception  <br>
} <br>
<br>
<h2>41 – Set timeouts to XMLHttpRequests</h2>
<br>
You could abort the connection if an XHR takes a long time (for example, due to a network issue), by using setTimeout() with the XHR call.<br>
<br>
var xhr = new XMLHttpRequest (); <br>
xhr.onreadystatechange = function () {  <br>
    if (this.readyState == 4) {  <br>
        clearTimeout(timeout);  <br>
        // do something with response data <br>
    }  <br>
}  <br>
var timeout = setTimeout( function () {  <br>
    xhr.abort(); // call error callback  <br>
}, 60*1000 /* timeout after a minute */ ); <br>
xhr.open('GET', url, true);  <br>
<br>
xhr.send();<br>
As a bonus, you should generally avoid synchronous XHR calls completely.<br>
<br>
<h2>42 – Deal with WebSocket timeout</h2>
<br>
Generally when a WebSocket connection is established, a server could time out your connection after 30 seconds of inactivity. The firewall could also time out the connection after a period of inactivity.<br>
<br>
To deal with the timeout issue you could send an empty message to the server periodically. To do this, add these two functions to your code: one to keep alive the connection and the other one to cancel the keep alive. Using this trick, you’ll control the timeout.<br>
<br>
Add a timerID…<br>
<br>
var timerID = 0; <br>
function keepAlive() { <br>
    var timeout = 15000;  <br>
    if (webSocket.readyState == webSocket.OPEN) {  <br>
        webSocket.send('');  <br>
    }  <br>
    timerId = setTimeout(keepAlive, timeout);  <br>
}  <br>
function cancelKeepAlive() {  <br>
    if (timerId) {  <br>
        cancelTimeout(timerId);  <br>
    }  <br>
}<br>
The keepAlive() function should be added at the end of the onOpen() method of the webSocket connection and the cancelKeepAlive() at the end of the onClose() method.<br>
<br>
<h2>43 – Keep in mind that primitive operations can be faster than function calls. Use VanillaJS.</h2>
<br>
For example, instead of using…<br>
<br>
var min = Math.min(a,b); <br>
A.push(v);<br>
…use…<br>
<br>
var min = a < b ? a : b; <br>
A[A.length] = v;<br>
<br>
<h2>44 – Don’t forget to use a code beautifier when coding. Use JSLint and minification (JSMin, for example) before going live.</h2>

<a href="https://codebeautify.org/">code beautifier</a>
. <a href="http://jsbeautifier.org/">jsbeautifier</a>

<br>
<br>
<br>
<br>

<script>
  $(function() {
    var toc = $('#toc');

    function makeLi(text, href) {
      return $('<a href="' + href + '" target="_self">' + text + '</a><br>');
    }

    $('h2').each(function(i) {
      var chapter = $(this), chapterNumber = i + 1;
      toc.append(
        makeLi(chapter.text(), '#chapter-' + chapterNumber)
      );
      chapter.attr('id', 'chapter-' + chapterNumber);
    });

  });
</script>
</body>
</html>
