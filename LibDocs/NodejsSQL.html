<base target="_blank"><html><head><title>pppp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@13.0.1/dist/lazyload.min.js"></script>
<script type='text/javascript' src='../mainscript.js'></script>
<script>
  var showTopicNumber = true;
</script>
<style>
body{width:80%;margin-left: 10%; font-size:22px;}
h1, h2 {color: gold;}
strong {color: orange;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px;}
</style></head><body onkeypress="chkKey()"><center>
<h1></h1>
<div id="toc"></div></center>

<p class="intro">Node.js can be used in database applications.</p>
<p class="intro">One of the most popular databases is MySQL.</p>

<h2>MySQL Database</h2>
<p>To be able to experiment with the code examples, you should have MySQL installed 
on your computer.</p>
<p>You can download a free MySQL database at <a href="https://www.mysql.com/downloads/" target="_blank">https://www.mysql.com/downloads/</a>.</p>
<h2>Install MySQL Driver</h2>
<p>Once you have MySQL up and running on your computer, you can access it by 
using Node.js.</p>
<p>To access a MySQL database with Node.js, you need a MySQL driver. This 
tutorial will use the &quot;mysql&quot; module, downloaded from NPM.</p>
<p>To download and install the &quot;mysql&quot; module, open the Command Terminal and execute the following:</p>

<div class="w3-example">
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;npm install mysql
</div>
</div>
<p>Now you have downloaded and installed a mysql database driver.</p>
<p>Node.js can use this module to manipulate the MySQL database:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>
    
</div>
<h2>Create Connection</h2>
<p>Start by creating a connection to the database.</p>
<p>Use the username and password from your MySQL database.</p>
<div class="w3-example">
<p>demo_db_connection.js</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;<br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_connection">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_db_connection.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_connection.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_connection.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
Connected!</div>
</div>

<p>Now you can start querying the database using SQL statements.</p>
<h2>Query a Database</h2>
<p>Use SQL statements to read from (or write to) a MySQL database. This 
is also called &quot;to query&quot; the database.</p>
<p>The connection object created in the example above, has a method for querying the database:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>
  <strong>&nbsp;
  con.query(</strong><em><strong>sql</strong></em><strong>, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp; &nbsp; console.log(&quot;Result: 
  &quot; + result);<br>&nbsp; });<br></strong>});</div>
</div>

<p>The query method takes an sql statements as a parameter and returns the 
result.</p>
<p>Learn how to read, write, delete, and update a database in the next chapters.</p>
<p>Read more about SQL statements in our <a href="/sql/default.asp">SQL Tutorial</a>.</p>






<h2>Creating a Database</h2>
<p>To create a database in MySQL, use the &quot;CREATE DATABASE&quot; statement:</p>
<div class="w3-example">
<h2>Example</h2>
<p>Create a database named "mydb":</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;<br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>&nbsp; 
  con.query(&quot;<strong>CREATE DATABASE mydb</strong>&quot;, function (err, result) {<br>
  &nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Database 
  created&quot;);<br>&nbsp; });<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_create_db">Run example &raquo;</a>
</div>

<p>Save the code above in a file called "demo_create_db.js" and run the file:</p>
<div class="w3-example">
<p>Run "demo_create_db.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_create_db.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
Connected!<br>Database created</div>
</div>



<h2>Creating a Table</h2>
<p>To create a table in MySQL, use the "CREATE TABLE" statement.</p>
<p>Make sure you define the name of the database when you create the connection:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Create a table named "customers":</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;,<br>
  <strong>&nbsp; database: &quot;mydb&quot;</strong><br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>&nbsp; 
  var sql = &quot;<strong>CREATE TABLE customers (name VARCHAR(255), 
  address VARCHAR(255)</strong>)&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) 
  throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Table created&quot;);<br>&nbsp; });<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_create_table">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_create_table.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_create_table.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_create_table.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
Connected!<br>Table created</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>
    
</div>

<h2>Primary Key</h2>
<p>When creating a table, you should also create a column with a unique key for each 
record.</p>
<p>This can be done by defining a column as &quot;INT AUTO_INCREMENT PRIMARY KEY&quot; which will insert a 
unique number for each record. Starting at 1, and increased by one for each 
record.</p>
<div class="w3-example">
  <h3>Example</h3>
<p>Create primary key when creating the table:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;,<br>
  &nbsp; database: &quot;mydb&quot;<br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>&nbsp; 
  var sql = &quot;CREATE TABLE customers (<strong>id INT AUTO_INCREMENT PRIMARY 
  KEY</strong>, name VARCHAR(255), 
  address VARCHAR(255))&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) 
  throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Table created&quot;);<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_create_table_pk">Run example &raquo;</a>
</div>

<p>If the table already exists, use the ALTER TABLE keyword:</p>
<div class="w3-example">
  <h3>Example</h3>
<p>Create primary key on an existing table:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;,<br>
  &nbsp; database: &quot;mydb&quot;<br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>&nbsp; 
  var sql = &quot;<strong>ALTER TABLE customers ADD COLUMN id INT AUTO_INCREMENT 
  PRIMARY KEY</strong>&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) 
  throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Table altered&quot;);<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_alter_table_pk">Run example &raquo;</a>
</div>



<h2>Insert Into Table</h2>
<p>To fill a table in MySQL, use the "INSERT INTO" statement.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Insert a record in the "customers" table:</p>

<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;,<br>
  &nbsp; database: &quot;mydb&quot;<br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Connected!&quot;);<br>
  <strong>&nbsp; var sql = &quot;INSERT INTO customers (name, address) 
  VALUES ('Company Inc', 'Highway 37')&quot;;<br></strong>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;1 record inserted&quot;);<br>&nbsp; });<br>});<br></div>

<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_insert">Run example &raquo;</a>
</div>

<p>Save the code above in a file called "demo_db_insert.js", and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_insert.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_insert.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
Connected!<br>1 record inserted</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Insert Multiple Records</h2>
<p>To insert more than one record, make an array containing the values, and 
insert a question mark in the sql, which will be replaced by the value array:<br>
<code class="w3-codespan">INSERT INTO customers (name, address) VALUES ?</code></p>
<div class="w3-example">
<h3>Example</h3>
<p>Fill the "customers" table with data:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; 
  password: &quot;<em>yourpassword</em>&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br><br>
  con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  console.log(&quot;Connected!&quot;);<br>&nbsp; var sql = &quot;INSERT INTO customers (name, 
  address) VALUES ?&quot;;<br>&nbsp; var values = [<br>&nbsp;&nbsp;&nbsp; ['John', 
  'Highway 71'],<br>&nbsp;&nbsp;&nbsp; ['Peter', 'Lowstreet 4'],<br>&nbsp;&nbsp;&nbsp; 
  ['Amy', 'Apple st 652'],<br>&nbsp;&nbsp;&nbsp; ['Hannah', 'Mountain 21'],<br>&nbsp;&nbsp;&nbsp; 
  ['Michael', 'Valley 345'],<br>&nbsp;&nbsp;&nbsp; ['Sandy', 'Ocean blvd 2'],<br>&nbsp;&nbsp;&nbsp; 
  ['Betty', 'Green Grass 1'],<br>&nbsp;&nbsp;&nbsp; ['Richard', 'Sky st 331'],<br>&nbsp;&nbsp;&nbsp; 
  ['Susan', 'One way 98'],<br>&nbsp;&nbsp;&nbsp; ['Vicky', 'Yellow Garden 2'],<br>&nbsp;&nbsp;&nbsp; 
  ['Ben', 'Park Lane 38'],<br>&nbsp;&nbsp;&nbsp; ['William', 'Central st 954'],<br>&nbsp;&nbsp;&nbsp; 
  ['Chuck', 'Main Road 989'],<br>&nbsp;&nbsp;&nbsp; ['Viola', 'Sideway 1633']<br>&nbsp; 
  ];<br>&nbsp; con.query(sql,<strong> [values]</strong>, function (err, result) 
  {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Number 
  of records inserted: &quot; + result.affectedRows);<br>&nbsp; });<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_insert_multiple">Run example &raquo;</a>
</div>

<p>Save the code above in a file called "demo_db_insert_multple.js", and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_insert_multiple.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_insert_multiple.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
Connected!<br>Number of records inserted: 14</div>
</div>

<h2>The Result Object</h2>
<p>When executing a query, a result object is returned.</p>
<p>The result object contains information about how the query  
affected the table.</p>
<p>The result object returned from the example above looks like this:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  {<br>&nbsp; fieldCount: 0,<br>&nbsp; affectedRows: 14,<br>&nbsp; insertId: 0,<br>&nbsp; 
  serverStatus: 2,<br>&nbsp; warningCount: 0,<br>&nbsp; message: '\'Records:14&nbsp; 
  Duplicated: 0&nbsp; Warnings: 0',<br>&nbsp; protocol41: true,<br>&nbsp; 
  changedRows: 0<br>}</div>
</div>

<p>The values of the properties can be displayed like this:</p>

<div class="w3-example">
<h3>Example</h3>
<p>Return the  number of affected rows:</p>
<div class="w3-code notranslate w3-black">
console.log(result.affectedRows)
</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
14</div>
</div>
<h2>Get Inserted ID</h2>
<p>For tables with an auto increment id field, you can get the id of the row you 
just inserted by asking the result object.</p>
<div class="w3-panel w3-note">
<p><strong>Note:</strong> To be able to get the inserted id, <strong>only one row</strong> can be inserted.</p>
</div>
<div class="w3-example">
<h3>Example</h3>
<p>Insert a record in the "customers" table, and return the ID:</p>

<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;<em>yourusername</em>&quot;,<br>&nbsp; password: &quot;<em>yourpassword</em>&quot;,<br>
  &nbsp; database: &quot;mydb&quot;<br>
  });<br><br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; var sql = &quot;INSERT INTO customers (name, address) 
  VALUES ('Michelle', 'Blue Village 1')&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;1 record inserted, 
  ID: &quot; + <strong>result.insertId</strong>);<br>&nbsp; });<br>});<br></div>

<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_insert_id">Run example &raquo;</a>
</div>

<p>Save the code above in a file called "demo_db_insert_id.js", and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_insert_id.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_insert_id.js
</div>
</div>
<p>Which will give you something like this in return:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  1 record inserted, ID: 15</div>
</div>




<h2>Selecting From a Table</h2>
<p>To select data from a table in MySQL, use the "SELECT" statement.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Select all records from the "customers" table, and display the result object:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  con.query(&quot;<strong>SELECT * FROM customers</strong>&quot;, function (err, result, fields) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_select">Run example &raquo;</a>
</div>

<div class="w3-panel w3-note">
  <p><strong>SELECT *</strong> will return <em>all</em> columns</p>
</div>

<p>Save the code above in a file called &quot;demo_db_select.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_select.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_select.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { id: 1, name: 'John', address: 'Highway 71'},<br>&nbsp; { id: 
  2, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { id: 3, name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { id: 4, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { id: 5, name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { id: 6, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { id: 7, 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { id: 8, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { id: 9, name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { id: 10, name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { id: 11, name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { id: 12, name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { id: 13, name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { id: 14, name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>
    
</div>
<h2>Selecting Columns</h2>
<p>To select only some of the columns in a table, use the "SELECT" statement followed by the column name.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Select name and address from the "customers" table, and display the return object:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  con.query(&quot;<strong>SELECT name, address FROM customers</strong>&quot;, function (err, result, fields) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_select2">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_select2.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_select2.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_select2.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { name: 'John', address: 'Highway 71'},<br>&nbsp; { name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; {  
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>

<h2>The Result Object</h2>
<p>As you can see from the result of the example above, the result object is an 
array containing each row as an object.</p>
<p>To return e.g. the address of the third record, just refer to the third array 
object's address property:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Return the address of the third record:</p>
<div class="w3-code notranslate w3-black">
  console.log(result[2].address);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Apple st 652</div>
</div>

<h2>The Fields Object</h2>
<p>The third parameter of the callback function is an array containing 
information about each field in the result.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Select all records from the "customers" table, and display the <em>fields</em> object:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  con.query(&quot;SELECT name, address FROM customers&quot;, function (err, 
  result, <strong>fields</strong>) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(<strong>fields</strong>);<br>&nbsp; });<br>
  });<br></div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_select_fields" target="_blank">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_select_fields.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_select_fields.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_select_fields.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp; catalog: 'def',<br>&nbsp;&nbsp;&nbsp; db: 
  'mydb',<br>&nbsp;&nbsp;&nbsp; table: 'customers',<br>&nbsp;&nbsp;&nbsp; 
  orgTable: 'customers',<br>&nbsp;&nbsp;&nbsp; name: 'name',<br>&nbsp;&nbsp;&nbsp; 
  orgName: 'address',<br>&nbsp;&nbsp;&nbsp; charsetNr: 33,<br>&nbsp;&nbsp;&nbsp; 
  length: 765,<br>&nbsp;&nbsp;&nbsp; type: 253,<br>&nbsp;&nbsp;&nbsp; flags: 0,<br>&nbsp;&nbsp;&nbsp; 
  decimals: 0,<br>&nbsp;&nbsp;&nbsp; default: undefined,<br>&nbsp;&nbsp;&nbsp; 
  zeroFill: false,<br>&nbsp;&nbsp;&nbsp; protocol41: true<br>&nbsp; },<br>&nbsp; {<br>&nbsp;&nbsp;&nbsp; catalog: 'def',<br>&nbsp;&nbsp;&nbsp; db: 'mydb',<br>&nbsp;&nbsp;&nbsp; 
  table: 'customers',<br>&nbsp;&nbsp;&nbsp; orgTable: 'customers',<br>&nbsp;&nbsp;&nbsp; 
  name: 'address',<br>&nbsp;&nbsp;&nbsp; orgName: 'address',<br>&nbsp;&nbsp;&nbsp; 
  charsetNr: 33,<br>&nbsp;&nbsp;&nbsp; length: 765,<br>&nbsp;&nbsp;&nbsp; type: 
  253,<br>&nbsp;&nbsp;&nbsp; flags: 0,<br>&nbsp;&nbsp;&nbsp; decimals: 0,<br>&nbsp;&nbsp;&nbsp; 
  default: undefined,<br>&nbsp;&nbsp;&nbsp; zeroFill: false,<br>&nbsp;&nbsp;&nbsp; 
  protocol41: true<br>&nbsp; {<br>]</div>
</div>


<p>As you can see from the result of the example above, the fields object is an 
array containing information about each field as an object.</p>
<p>To return e.g. the name of the second field, just refer to the second array item's name property:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Return the name of the second field:</p>
<div class="w3-code notranslate w3-black">
  console.log(fields[1].name);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  address</div>
</div>





<h2>Select With a Filter</h2>
<p>When selecting records from a table, you can filter the selection by using 
the "WHERE" statement:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Select record(s) with the address &quot;Park Lane 38&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  con.query(&quot;SELECT * FROM customers <strong>WHERE address = 'Park Lane 38'</strong>&quot;, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_where">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_where.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_where.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_where.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { id: 11, name: 'Ben', address: 'Park Lane 38'}<br>]</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>
    
</div>
<h2>Wildcard Characters</h2>
<p>You can also select the records that starts, includes, or ends with a given letter 
or phrase.</p>
<p>Use the '%' wildcard to represent zero, one or multiple characters:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Select records where the address starts with the letter 'S':</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  con.query(&quot;SELECT * FROM customers WHERE address <strong>LIKE 'S%'</strong>&quot;, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_where_s">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_where_s.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_where_s.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_where_s.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { id: 8, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { id: 14, name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>


<h2>Escaping Query Values</h2>
<p>When query values are variables provided by the user, you should escape the values.</p>
<p>This is to prevent SQL injections, which is a common web hacking technique to  
destroy or misuse your database.</p>
<p>The MySQL module has methods to escape query values:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Escape query values by using the <code class="w3-codespan">mysql.escape()</code> 
method:</p>
<div class="w3-code notranslate jsHigh">
  var adr = 'Mountain 21';<br>var sql = 'SELECT * FROM customers WHERE address = 
  ' + mysql.escape(adr);<br>con.query(sql, function (err, result) {<br>&nbsp; 
  if (err) throw err;<br>&nbsp; console.log(result);<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_where_escape">Run example &raquo;</a>

</div>
<p>You can also use a <code class="w3-codespan">?</code> as a placeholder for 
the values you want to escape.</p>
<p>In this case, the variable is sent as the second parameter in the query() 
method:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Escape query values by using the placeholder <code class="w3-codespan">?</code> 
method:</p>
<div class="w3-code notranslate jsHigh">
  var adr = 'Mountain 21';<br>var sql = 'SELECT * FROM customers WHERE address = 
  ?';<br>con.query(sql,<strong> [adr]</strong>, function (err, result) {<br>&nbsp; 
  if (err) throw err;<br>&nbsp; console.log(result);<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_where_placeholder">Run example &raquo;</a>

</div>
<p>If you have multiple placeholders, the array contains multiple values, in 
that order:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Multiple placeholders:</p>
<div class="w3-code notranslate jsHigh">
  var name = 'Amy';<br>var adr = 'Mountain 21';<br>var sql = 'SELECT * FROM 
  customers WHERE name = ? OR address = ?';<br>con.query(sql,<strong> [name, adr]</strong>, function (err, result) {<br>&nbsp; 
  if (err) throw err;<br>&nbsp; console.log(result);<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_where_placeholders">Run example &raquo;</a>

</div>




<h2>Sort the Result</h2>
<p>Use the ORDER BY statement to sort the result in ascending or descending 
order.</p>
<p>The ORDER BY keyword sorts the result ascending by default. To sort the 
result in descending order, use the DESC keyword.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Sort the result alphabetically by name:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  con.query(&quot;SELECT * FROM customers <strong>ORDER BY name</strong>&quot;, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_orderby">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_orderby.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_orderby.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_orderby.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { id: 3, name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; 
  { id: 11, name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { id: 7, 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { id: 13, name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { id: 4, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { id: 1, name: 'John', address: 'Higheay 71'},<br>&nbsp; { id: 5, name: 'Michael', address: 'Valley 345'},<br>&nbsp; { id: 
  2, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { id: 8, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; 
  { id: 6, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { id: 9, name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { id: 10, name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; { id: 14, name: 'Viola', address: 'Sideway 
  1633'},<br>&nbsp; { id: 12, name: 'William', 
  address: 'Central st 954'}<br>]</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>ORDER BY DESC</h2>
<p>Use the DESC keyword to sort the result in a descending order.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Sort the result reverse alphabetically by name:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  con.query(&quot;SELECT * FROM customers <strong>ORDER BY name DESC</strong>&quot;, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_orderby_desc">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_orderby_desc.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_orderby_desc.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_orderby_desc.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { id: 12, name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { id: 14, name: 'Viola', address: 'Sideway 
  1633'},<br>&nbsp; { id: 10, name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; { id: 9, name: 'Susan', address: 'One way 
  98'},<br>&nbsp; 
  { id: 6, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { id: 8, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { id: 
  2, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { id: 5, name: 'Michael', address: 'Valley 345'},<br>&nbsp; { id: 1, name: 'John', address: 'Higheay 71'},<br>&nbsp; { id: 4, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { id: 13, name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { id: 7, 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; 
  { id: 11, name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { id: 3, name: 'Amy', 
  address: 'Apple st 652'}<br>]</div>
</div>




<h2>Delete Record</h2>
<p>You can delete records from an existing table by using 
the "DELETE FROM" statement:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Delete any record with the address &quot;Mountain 21&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br><strong>&nbsp; 
  var sql = &quot;DELETE FROM customers WHERE address = 'Mountain 21'&quot;;<br></strong>&nbsp; 
  con.query(<strong>sql,</strong> function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Number of records 
  deleted: &quot; + result.affectedRows);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_delete">Run example &raquo;</a>

</div>
<div class="w3-panel w3-note">
<p><strong>Notice the WHERE clause in the DELETE syntax:</strong> The WHERE clause 
specifies which record or records that should be deleted. If you omit the WHERE 
clause, all records will be deleted!</p>
</div>

<p>Save the code above in a file called &quot;demo_db_delete.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_delete.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_delete.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Number of records deleted: 1</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>The Result Object</h2>
<p>When executing a query, a result object is returned.</p>
<p>The result object contains information about how the query  
affected the table.</p>
<p>The result object returned from the example above looks like this:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  {<br>&nbsp; fieldCount: 0,<br>&nbsp; affectedRows: 1,<br>&nbsp; insertId: 0,<br>&nbsp; 
  serverStatus: 34,<br>&nbsp; warningCount: 0,<br>&nbsp; message: '',<br>&nbsp; protocol41: true,<br>&nbsp; 
  changedRows: 0<br>}</div>
</div>

<p>The values of the properties can be displayed like this:</p>

<div class="w3-example">
<h3>Example</h3>
<p>Return the  number of affected rows:</p>
<div class="w3-code notranslate w3-black">
console.log(result.affectedRows)
</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  1</div>
</div>





<h2>Delete a Table</h2>
<p>You can delete an existing table by using 
the "DROP TABLE" statement:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Delete the table &quot;customers&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br><strong>&nbsp; 
  var sql = &quot;DROP TABLE customers&quot;;<br></strong>&nbsp; 
  con.query(<strong>sql,</strong> function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Table deleted&quot;);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_drop">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_drop_table.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_drop_table.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_drop_table.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Table deleted</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Drop Only if Exist</h2>
<p>If the the table you want to delete is already deleted, or for any other 
reason does not exist, you can use the IF EXISTS keyword to avoid getting an 
error.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Delete the table &quot;customers&quot; if it exists:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br><strong>&nbsp; 
  var sql = &quot;DROP TABLE IF EXISTS customers&quot;;<br></strong>&nbsp; 
  con.query(<strong>sql,</strong> function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_drop_if">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_drop_table_if.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_drop_table_if.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_drop_table_if.js
</div>
</div>
<p>If the table exist, the result object will look like this:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  {<br>&nbsp; fieldCount: 0,<br>&nbsp; affectedRows: 0,<br>&nbsp; insertId: 0,<br>&nbsp; 
  serverstatus: 2,<br>&nbsp; warningCount: 0,<br>&nbsp; message: '',<br>&nbsp; 
  protocol41: true,<br>&nbsp; changedRows: 0<br>}</div>
</div>

<p>If the table does not exist, the result object will look like this:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  {<br>&nbsp; fieldCount: 0,<br>&nbsp; affectedRows: 0,<br>&nbsp; insertId: 0,<br>&nbsp; 
  serverstatus: 2,<br>&nbsp; warningCount: 1,<br>&nbsp; message: '',<br>&nbsp; 
  protocol41: true,<br>&nbsp; changedRows: 0<br>}</div>
</div>

<p>As you can see the only differnce is that the warningCount property is set to 1 if the table does not exist.</p>



<h2>Update Table</h2>
<p>You can update existing records in a table by using 
the "UPDATE" statement:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Overwrite the address column from &quot;Valley 345&quot; to &quot;Canyon 123&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br><strong>&nbsp; 
  var sql = &quot;UPDATE customers SET address = 'Canyon 123' WHERE address = 
  'Valley 345'&quot;;<br></strong>&nbsp; 
  con.query(<strong>sql,</strong> function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result.affectedRows + &quot; 
  record(s) updated&quot;);<br>&nbsp; });<br>
  });<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_update">Run example &raquo;</a>

</div>
<div class="w3-panel w3-note">
<p><strong>Notice the WHERE clause in the UPDATE syntax:</strong> The WHERE clause 
specifies which record or records that should be updated. If you omit the WHERE 
clause, all records will be updated!</p>
</div>

<p>Save the code above in a file called &quot;demo_db_update.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_update.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_update.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  1 record(s) updated</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>The Result Object</h2>
<p>When executing a query, a result object is returned.</p>
<p>The result object contains information about how the query  
affected the table.</p>
<p>The result object returned from the example above looks like this:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  {<br>&nbsp; fieldCount: 0,<br>&nbsp; affectedRows: 1,<br>&nbsp; insertId: 0,<br>&nbsp; 
  serverStatus: 34,<br>&nbsp; warningCount: 0,<br>&nbsp; message: '(Rows 
  matched: 1 Changed: 1 Warnings: 0',<br>&nbsp; protocol41: true,<br>&nbsp; 
  changedRows: 1<br>}</div>
</div>

<p>The values of the properties can be displayed like this:</p>

<div class="w3-example">
<h3>Example</h3>
<p>Return the  number of affected rows:</p>
<div class="w3-code notranslate w3-black">
console.log(result.affectedRows)
</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  1</div>
</div>




<h2>Limit the Result</h2>
<p>You can limit the number of records returned from the query, by using the "LIMIT" statement:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Select the 5 first records in the "customers" table:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var sql = &quot;SELECT * FROM customers <strong>LIMIT 5</strong>&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_limit" target="_blank">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_db_limit.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_limit.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_limit.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { id: 1, name: 'John', address: 'Highway 71'},<br>&nbsp; { id: 
  2, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { id: 3, name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { id: 4, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { id: 5, name: 'Michael', address: 'Valley 345'}<br>]</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Start From Another Position</h2>
<p>If you want to return five records, starting from the third record, you 
can use the "OFFSET" keyword:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Start from position 3, and return the next 5 records:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var sql = &quot;SELECT * FROM customers <strong>LIMIT 5 OFFSET 2</strong>&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_offset" target="_blank">Run example &raquo;</a>
</div>
<div class="w3-panel w3-note">
<p><strong>Note:</strong> &quot;OFFSET 2&quot;, means starting from the third position, 
not the second!</p>
</div>

<p>Save the code above in a file called &quot;demo_db_offset.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_offset.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_offset.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  [<br>&nbsp; { id: 3, name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { id: 4, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { id: 5, name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { id: 6, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { id: 7, name: 'Betty', 
  address: 'Green Grass 1'}<br>]</div>
</div>

<h2>Shorter Syntax</h2>
<p>You can also write your SQL statement like this &quot;LIMIT 2, 5&quot; which 
returns the same as the offset example above:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Start from position 3, and return the next 5 records:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var sql = &quot;SELECT * FROM customers <strong>LIMIT 2, 5</strong>&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });<br></div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_limit_short" target="_blank">Run example &raquo;</a>

</div>
<div class="w3-panel w3-note">
  <p><strong>Note:</strong> The numbers are reversed: &quot;LIMIT 2, 5&quot; is the 
  same as &quot;LIMIT 5 OFFSET 2&quot;</p>
</div>






<h2>Join Two or More Tables</h2>
<p>You can combine rows from two or more tables, based on a related column 
between them, by using a JOIN statement.</p>

<p>Consider you have a "users&quot; table and a &quot;products&quot; table:</p>
<div class="w3-example">
<h3>users</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { id: 1, name: 'John', 
  favorite_product: 154},<br>&nbsp; { id: 
  2, name: 'Peter', favorite_product: 154},<br>&nbsp; { id: 3, name: 'Amy', 
  favorite_product: 155},<br>&nbsp; { id: 4, name: 'Hannah', favorite_product:},<br>&nbsp; { id: 5, name: 'Michael', 
  favorite_product:}<br>]</div>
</div>

<div class="w3-example">
<h3>products</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { id: 154, name: 
  'Chocolate Heaven' },<br>&nbsp; { id: 155, name: 'Tasty Lemons' },<br>&nbsp; { 
  id: 156, name: 'Vanilla Dreams' }<br>]</div>
</div>

<p>These two tables can be combined by using users' <code class="w3-codespan">favorite_product</code> field and products' 
<code class="w3-codespan">id</code> field.</p>

<div class="w3-example">
  <h3>Example</h3>
<p>Select records with a match in both tables:</p>
<div class="w3-code notranslate jsHigh">
  var mysql = require('mysql');<br><br>
  var con = mysql.createConnection({<br>&nbsp; 
  host: &quot;localhost&quot;,<br>&nbsp; user: &quot;yourusername&quot;,<br>&nbsp; 
  password: &quot;yourpassword&quot;,<br>&nbsp; database: &quot;mydb&quot;<br>});<br>
  <br>con.connect(function(err) {<br>&nbsp; if (err) throw err;<br>&nbsp; var 
  sql = &quot;SELECT users.name AS user, products.name AS favorite FROM users <strong>
  JOIN products ON 
  users.favorite_product = products.id</strong>&quot;;<br>&nbsp; 
  con.query(sql, function (err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp; });<br>
  });</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_join" target="_blank">Run example &raquo;</a>
</div>
<div class="w3-panel w3-note">
  <p><strong>Note:</strong> You can use INNER JOIN instead of JOIN. They will 
  both give you the same result.</p>
</div>


<p>Save the code above in a file called &quot;demo_db_join.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_db_join.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_db_join.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { user: 'John', favorite: 
  'Chocolate Heaven' },<br>&nbsp; { user: 'Peter', favorite: 'Chocolate Heaven' },<br>&nbsp; { 
  user: 'Amy', favorite: 'Tasty Lemons' }<br>]</div>
</div>
<p>As you can see from the result above, only the records with a match in both 
tables are returned.</p>
<h2>Left Join</h2>
<p>If you want to return <em>all</em> users, no matter if they have a favorite product or 
not, use the LEFT JOIN statement:</p>

<div class="w3-example">
  <h3>Example</h3>
<p>Select all users and their favorite product:</p>
<div class="w3-code notranslate">
  SELECT users.name AS user,<br>products.name AS favorite<br>FROM users<strong><br>LEFT
  JOIN</strong> products ON users.favorite_product = products.id<br></div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_left_join" target="_blank">Run example &raquo;</a>
</div>


<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { user: 'John', favorite: 
  'Chocolate Heaven' },<br>&nbsp; { user: 'Peter', favorite: 'Chocolate Heaven' },<br>&nbsp; { 
  user: 'Amy', favorite: 'Tasty Lemons' },<br>&nbsp; { 
  user: 'Hannah', favorite: null },<br>&nbsp; { user: 'Michael', favorite: null }<br>]</div>
</div>
<h2>Right Join</h2>
<p>If you want to return all products, and the users who have them as their 
favorite, even if no user have them as their favorite, use the RIGHT JOIN 
statement:</p>

<div class="w3-example">
  <h3>Example</h3>
<p>Select all products and the user who have them as their favorite:</p>
<div class="w3-code notranslate">
  SELECT users.name AS user,<br>products.name AS favorite<br>FROM users<strong><br>RIGHT
  JOIN</strong> products ON users.favorite_product = products.id</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_db_right_join" target="_blank">Run example &raquo;</a>
</div>


<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { user: 'John', favorite: 
  'Chocolate Heaven' },<br>&nbsp; { user: 'Peter', favorite: 'Chocolate Heaven' },<br>&nbsp; { 
  user: 'Amy', favorite: 'Tasty Lemons' },<br>&nbsp; { 
  user: null, favorite: 'Vanilla Dreams' }<br>]</div>
</div>
<div class="w3-panel w3-note">
  <p><strong>Note:</strong> Hannah and Michael, who have no favorite product, are not included in the result.</p>
</div>




<p class="intro">Node.js can be used in database applications.</p>
<p class="intro">One of the most popular NoSQL database is MongoDB.</p>

<h2>MongoDB</h2>
<p>To be able to experiment with the code examples, you will need access to a MongoDB database.</p>
<p>You can download a free MongoDB database at
<a href="https://www.mongodb.com/" target="_blank">https://www.mongodb.com</a>.</p>
<h2>Install MongoDB Driver</h2>
<p>Let us try to access a MongoDB database with Node.js.</p>
<p>To download and install the official MongoDB driver, open the Command Terminal and execute the following:</p>

<div class="w3-example">
<p>Download and install mongodb package:</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;npm install mongodb
</div>
</div>
<p>Now you have downloaded and installed a mongodb database driver.</p>
<p>Node.js can use this module to manipulate MongoDB databases:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  var mongo = require('mongodb');</div>
</div>






<h2>Creating a Database</h2>
<p>To create a database in MongoDB, start by creating a MongoClient object, then specify a connection URL with the 
correct ip address and the name of the database you want to create.</p>
<p>MongoDB will create the database if it does not exist, and make a connection 
to it.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Create a database called "mydb":</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/mydb&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; console.log(&quot;Database 
  created!&quot;);<br>&nbsp; db.close();<br>});<br></div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_create_mongo_db">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_create_mongo_db.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_create_mongo_db.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_create_mongo_db.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Database created!</div>
</div>
<div class="w3-panel w3-note">
  <p><strong>Important:</strong> In MongoDB, a database is not created until it 
  gets content!</p>
</div>

<p>MongoDB waits until you have created a collection (table), with at least one document (record) before it actually creates the database (and collection).</p>




<div class="w3-panel w3-note">
  <p>A <strong>collection</strong> in MongoDB is the same as a <strong>table</strong> in MySQL</p>
</div>

<h2>Creating a Collection</h2>
<p>To create a collection in MongoDB, use the <code class="w3-codespan">createCollection()</code> method:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Create a collection called "customers":</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  &nbsp; dbo.createCollection(&quot;customers&quot;, 
  function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;Collection created!&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_createcollection">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_createcollection.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_createcollection.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_createcollection.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Collection created!</div>
</div>

<div class="w3-panel w3-note">
  <p><strong>Important:</strong> In MongoDB, a collection is not created until it 
  gets content!</p>
</div>

<p>MongoDB waits until you have inserted a document before it actually creates the collection.</p>





<h2>Insert Into Collection</h2>
<p>To insert a record, or <em>document</em> as it is called in MongoDB, into a collection, we use the 
<code class="w3-codespan">insertOne()</code> method.</p>

<div class="w3-panel w3-note">
  <p>A <strong>document</strong> in MongoDB is the same as a <strong>record</strong> in MySQL</p>
</div>

<p>The first parameter of the <code class="w3-codespan">insertOne()</code> method is an object containing the 
name(s) and value(s) of each field in the document you want to insert.</p>
<p>It also takes a callback function where you can work with any errors, or the 
result of the insertion:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Insert a document in the "customers" collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myobj = { name: &quot;Company 
  Inc&quot;, address: &quot;Highway 37&quot; };<br>&nbsp; dbo.collection(&quot;customers&quot;).insertOne(myobj, function(err, res) {<br>
  &nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;1 
  document 
  inserted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_insert">Run example &raquo;</a>

</div>

<p>Save the code above in a file called &quot;demo_mongodb_insert.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_insert.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_insert.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  1 document inserted</div>
</div>

<div class="w3-panel w3-note">
<p><strong>Note:</strong> If you try to insert documents in a collection that do not 
exist, MongoDB will create the collection automatically.</p>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Insert Multiple Documents</h2>
<p>To insert multiple documents into a collection in MongoDB, we use the 
<code class="w3-codespan">insertMany()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">insertMany()</code> method 
is an array of objects, containing the data you want to 
insert.</p>
<p>It also takes a callback function where you can work with any errors, or the 
result of the insertion:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Insert multiple documents in the &quot;customers&quot; collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myobj = [<br>&nbsp;&nbsp;&nbsp; { name: 'John', address: 'Highway 71'},<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp;&nbsp;&nbsp; { name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp;&nbsp;&nbsp; { name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp;&nbsp;&nbsp; { name: 'Michael', address: 'Valley 
  345'},<br>&nbsp;&nbsp;&nbsp; { name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Betty', address: 'Green Grass 1'},<br>&nbsp;&nbsp;&nbsp; { name: 
  'Richard', address: 'Sky st 331'},<br>&nbsp;&nbsp;&nbsp; { name: 'Susan', 
  address: 'One way 98'},<br>&nbsp;&nbsp;&nbsp; { name: 'Vicky', address: 
  'Yellow Garden 2'},<br>&nbsp;&nbsp;&nbsp; { name: 'Ben', address: 'Park Lane 
  38'},<br>&nbsp;&nbsp;&nbsp; { name: 'William', address: 'Central st 954'},<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Chuck', address: 'Main Road 989'},<br>&nbsp;&nbsp;&nbsp; { name: 
  'Viola', address: 'Sideway 1633'}<br>&nbsp; ];<br>&nbsp; dbo.collection(&quot;customers&quot;).insertMany(myobj, 
  function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(&quot;Number of documents inserted: &quot; + res.insertedCount);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_insert_multiple">Run example &raquo;</a>

</div>

<p>Save the code above in a file called &quot;demo_mongodb_insert_multiple.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_insert_multiple.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_insert_multiple.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Number of documents inserted: 14</div>
</div>

<h2>The Result Object</h2>
<p>When executing the <code class="w3-codespan">insertMany()</code> method, a result object is returned.</p>
<p>The result object contains information about how the insertion affected the 
database.</p>
<p>The object returned from the example above looked like this:</p>
<div class="w3-example">
<div class="w3-code notranslate jsHigh">
  {<br>&nbsp; result: { ok: 1, n: 14 },<br>&nbsp; ops: [<br>&nbsp;&nbsp;&nbsp; { 
  name: 'John', address: 'Highway 71', _id: 58fdbf5c0ef8a50b4cdd9a84 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Peter', address: 'Lowstreet 4', _id: 58fdbf5c0ef8a50b4cdd9a85 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Amy', address: 'Apple st 652', _id: 58fdbf5c0ef8a50b4cdd9a86 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Hannah', address: 'Mountain 21', _id: 58fdbf5c0ef8a50b4cdd9a87 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Michael', address: 'Valley 345', _id: 58fdbf5c0ef8a50b4cdd9a88 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Sandy', address: 'Ocean blvd 2', _id: 58fdbf5c0ef8a50b4cdd9a89 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Betty', address: 'Green Grass 1', _id: 58fdbf5c0ef8a50b4cdd9a8a },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Richard', address: 'Sky st 331', _id: 58fdbf5c0ef8a50b4cdd9a8b },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Susan', address: 'One way 98', _id: 58fdbf5c0ef8a50b4cdd9a8c },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Vicky', address: 'Yellow Garden 2', _id: 58fdbf5c0ef8a50b4cdd9a8d },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Ben', address: 'Park Lane 38', _id: 58fdbf5c0ef8a50b4cdd9a8e },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'William', address: 'Central st 954', _id: 58fdbf5c0ef8a50b4cdd9a8f },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Chuck', address: 'Main Road 989', _id: 58fdbf5c0ef8a50b4cdd9a90 },<br>&nbsp;&nbsp;&nbsp; 
  { name: 'Viola', address: 'Sideway 1633', _id: 58fdbf5c0ef8a50b4cdd9a91 } ],<br>&nbsp; 
  insertedCount: 14,<br>&nbsp; insertedIds: [<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a84,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a85,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a86,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a87,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a88,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a89,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a8a,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a8b,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a8c,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a8d,<br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a8e,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a8f <br>&nbsp;&nbsp;&nbsp; 
  58fdbf5c0ef8a50b4cdd9a90,<br>&nbsp;&nbsp;&nbsp; 58fdbf5c0ef8a50b4cdd9a91 ]<br>
  }</div>
</div>

<p>The values of the properties can be displayed like this:</p>

<div class="w3-example">
<h3>Example</h3>
<p>Return the number of inserted documents:</p>
<div class="w3-code notranslate w3-black">
console.log(res.insertedCount)
</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
14</div>
</div>


<h2>The _id Field</h2>
<p>If you do not specify an <code class="w3-codespan">_id</code> field, then MongoDB 
will add one for you and assign a unique id for each document.</p>
<p>In the example above no <code class="w3-codespan">_id</code> field was 
specified, and as you can see from the result object, MongoDB assigned a unique 
_id for each document.</p>
<p>If you <em>do</em> specify the <code class="w3-codespan">_id</code> field, the value must 
be unique for each document:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Insert three records in a &quot;products&quot; table, with specified 
<code class="w3-codespan">_id</code> fields:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myobj = [<br>&nbsp;&nbsp;&nbsp; { <strong>_id: 154</strong>, name: 
  'Chocolate Heaven'},<br>&nbsp;&nbsp;&nbsp; { <strong>_id: 155</strong>, name: 
  'Tasty Lemon'},<br>&nbsp;&nbsp;&nbsp; { <strong>_id: 156</strong>, name: 
  'Vanilla Dream'}<br>&nbsp; ];<br>&nbsp; dbo.collection(&quot;products&quot;).insertMany(myobj, 
  function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(res);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_insert_id">Run example &raquo;</a>

</div>
<p>Save the code above in a file called &quot;demo_mongodb_insert_id.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_insert_id.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_insert_id.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  {<br>&nbsp; result: { ok: 1, n: 3 },<br>&nbsp; ops: [<br>&nbsp;&nbsp;&nbsp; { 
  _id: 154, name: 'Chocolate Heaven },<br>&nbsp;&nbsp;&nbsp; { 
  _id: 155, name: 'Tasty Lemon },<br>&nbsp;&nbsp;&nbsp; { 
  _id: 156, name: 'Vanilla Dream } ],<br>&nbsp; 
  insertedCount: 3,<br>&nbsp; insertedIds: [<br>&nbsp;&nbsp;&nbsp; 
  154,<br>&nbsp;&nbsp;&nbsp; 155,<br>&nbsp;&nbsp;&nbsp; 
  156 ]<br>
  }</div>
</div>




<div class="w3-panel w3-note">
  <p>In MongoDB we use the <strong>find</strong> and <strong>findOne</strong> methods to find data in a collection.</p>
  <p>Just like the <strong>SELECT</strong> statement is used to find data in a 
  table in a MySQL database.</p>
</div>

<h2>Find One</h2>
<p>To select data from a collection in MongoDB, we can use the
<code class="w3-codespan">findOne()</code> method.</p>
<p>The <code class="w3-codespan">findOne()</code> method returns the first 
occurrence in the selection.</p>
<p>The first parameter of the <code class="w3-codespan">findOne()</code> method 
is a query object. In this example we use an empty query object, which selects 
all documents in a collection (but returns only the first document).</p>
<div class="w3-example">
<h3>Example</h3>
<p>Find the first document in the customers collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; dbo.collection(&quot;customers&quot;).findOne({}, function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result.name);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_findone">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_findone.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_findone.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_findone.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">Company Inc.</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Find All</h2>
<p>To select data from a table in MongoDB, we can also use the
<code class="w3-codespan">find()</code> method.</p>
<p>The <code class="w3-codespan">find()</code> method returns all 
occurrences in the selection.</p>
<p>The first parameter of the <code class="w3-codespan">find()</code> method 
is a query object. In this example we use an empty query object, which selects 
all documents in the collection.</p>
<div class="w3-panel w3-note">
  <p>No parameters in the find() method gives you the same result as <strong>SELECT *</strong> in MySQL.</p>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>Find all documents in the customers collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({}).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_find.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_find.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_find.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84 , name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85 , name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86 , name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87 , name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88 , name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89 , name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a , 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b , name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c , name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d , name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e , name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f , name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90 , name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91 , name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>


<h2>Find Some</h2>
<p>The second parameter of the <code class="w3-codespan">find()</code> method 
is the <code class="w3-codespan">projection</code> object that describes which fields to include in the result.</p>
<p>This parameter is optional, and if omitted, all fields will be included in 
the result.</p>

<div class="w3-example">
<h3>Example</h3>
<p>Return the fields &quot;name&quot; and &quot;address&quot; of all documents in the customers collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { projection: { _id: 0, name: 1, address: 
  1 } }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_find_fields.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_find_fields.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_find_fields.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { name: 'John', address: 'Highway 71'},<br>&nbsp; { name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; {&nbsp;name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>

<div class="w3-panel w3-note">
<p>You are not allowed to specify both 0 and 1 values in the same object (except 
if one of the fields is the _id field). If you specify a field with the value 0, all other fields get the value 1, 
and vice versa:</p>
</div>


<div class="w3-example">
<h3>Example</h3>
<p>This example will exclude &quot;address&quot; from the result:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { projection: { address: 0 
  } }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields4">Run example &raquo;</a>
</div>

<div class="w3-panel w3-note">
<p>To exclude the _id field, you must set its value to 0:</p>
</div>


<div class="w3-example">
<h3>Example</h3>
<p>This example will return only the &quot;name&quot; field:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { projection: { _id: 0, name: 1 
  } }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields3">Run example &raquo;</a>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>This example will give you the same result as the first example; return all 
fields except the _id field:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { projection: { _id: 0 
  } }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields2">Run example &raquo;</a>
</div>

<div class="w3-example w3-warning">
<h3>Example</h3>
<p>You get an error if you specify both 0 and 1 values in the same object 
(except if one of the fields is the _id field):</p>
<div class="w3-code notranslate jsHigh" style="border-left:4px solid transparent">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find({},<strong> { projection: { name: 1, address: 0 
  } }</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_find_fields_error">Run example &raquo;</a>
</div>


<h2>The Result Object</h2>
<p>As you can see from the result of the example above, the result can be converted into an array containing each 
document as an object.</p>
<p>To return e.g. the address of the third document, just refer to the third array 
object's address property:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Return the address of the third document:</p>
<div class="w3-code notranslate w3-black">
  console.log(result[2].address);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  Apple st 652</div>
</div>





<h2>Filter the Result</h2>
<p>When finding documents in a collection, you can filter the result by using a 
query object.</p>
<p>The first argument of the <code class="w3-codespan">find()</code> method 
is a query object, and is used to limit the search.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Find documents with the address &quot;Park Lane 38&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var query = { address: &quot;Park Lane 38&quot; };<br></strong>&nbsp; dbo.collection(&quot;customers&quot;).find(<strong>query</strong>).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_query">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_query.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_query.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_query.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8e 
  , name: 'Ben', address: 'Park Lane 38' }<br>]</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Filter With Regular Expressions</h2>
<p>You can write regular expressions to find exactly what you are searching for.</p>


<div class="w3-panel w3-note">
  <p><strong>Regular expressions can only be used to query <em>strings</em>.</strong></p>
</div>

<p>To find only the documents where the &quot;address&quot; field starts with the letter "S", use the regular 
expression <code class="w3-codespan">/^S/</code>:</p>
<div class="w3-example">
<h3>Example</h3>
<p>Find documents where the address starts with the letter "S":</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  &nbsp; var query = { address: <strong>/^S/</strong> };<br>&nbsp; dbo.collection(&quot;customers&quot;).find(query).toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_query_s">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_mongodb_query_s.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_query_s.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_query_s.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b , name: 'Richard', 
  address: 'Sky st 331' },<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91 , name: 'Viola', address: 'Sideway 
  1633' }<br>]</div>
</div>






<h2>Sort the Result</h2>
<p>Use the <code class="w3-codespan">sort()</code> method to sort the result in ascending or descending order.</p>
<p>The <code class="w3-codespan">sort()</code> method takes one parameter, an 
object defining the sorting order.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Sort the result alphabetically by name:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var mysort = { name: 1 };<br></strong>&nbsp; dbo.collection(&quot;customers&quot;).find()<strong>.sort(mysort)</strong>.toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_sort">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_sort.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_sort.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_sort.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86, name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e, name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a, 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90, name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84, name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88, name: 'Michael', address: 'Valley 345'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c, name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d, name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91, name: 'Viola', address: 'Sideway 
  1633'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f, name: 'William', 
  address: 'Central st 954'}<br>]</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <div id='div-gpt-ad-1493883843099-0' style="display: inline-block">
    <script>
    googletag.cmd.push(function() { googletag.display('div-gpt-ad-1493883843099-0'); });
    </script>
  </div>
    
</div>
<h2>Sort Descending</h2>
<p>Use the value -1 in the sort object to sort descending.</p>
<div class="w3-panel w3-note">
  <p>{ name: 1 } // ascending<br>{ name: -1 } // descending</p>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>Sort the result reverse alphabetically by name:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var mysort = { name: -1 };<br></strong>&nbsp; dbo.collection(&quot;customers&quot;).find()<strong>.sort(mysort)</strong>.toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; 
  });<br>});</div>
<a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_sort_desc">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_sort_desc.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_sort_desc.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_sort_desc.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f, name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91, name: 'Viola', address: 'Sideway 
  1633'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d, name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c, name: 'Susan', address: 'One way 
  98'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89, name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b, name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85, name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88, name: 'Michael', address: 'Valley 345'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84, name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87, name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90, name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a, 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e, name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86, name: 'Amy', 
  address: 'Apple st 652'}<br>]</div>
</div>





<h2>Delete Document</h2>
<p>To delete a record, or document as it is called in MongoDB, we use the
<code class="w3-codespan">deleteOne()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">deleteOne()</code> method 
is a query object defining which document to delete.</p>
<div class="w3-panel w3-note">
<p><strong>Note:</strong> If the query finds more than one document, only the first 
occurrence is deleted.</p>
</div>

<div class="w3-example">
<h3>Example</h3>
<p>Delete the document with the address &quot;Mountain 21&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>
  MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var myquery = { address: 'Mountain 21' };<br></strong>&nbsp; 
  dbo.collection(&quot;customers&quot;).deleteOne(myquery, function(err, obj) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(&quot;1 
  document deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_delete" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_delete.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_delete.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_delete.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">1 document deleted</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Delete Many</h2>
<p>To delete more than one document, use the
<code class="w3-codespan">deleteMany()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">deleteMany()</code> method 
is a query object defining which documents to delete.</p>

<div class="w3-example">
<h3>Example</h3>
<p>Delete all documents were the address starts with the letter &quot;O&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>
  var url = &quot;mongodb://localhost:27017/&quot;;<br><br>
  MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>
  <strong>&nbsp; var myquery = { address: /^O/ };<br></strong>&nbsp; 
  dbo.collection(&quot;customers&quot;).deleteMany(myquery, function(err, obj) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(obj.result.n + &quot; 
  document(s) deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_delete_many" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_delete_many.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_delete_many.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_delete_many.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">2 document(s) deleted</div>
</div>


<h2>The Result Object</h2>
<p>The <code class="w3-codespan">deleteMany()</code> method returns an object which contains information about how 
the execution affected the database.</p>
<p>Most of the information is not important to understand, but one object inside 
the object is called &quot;result&quot; which tells us if the execution went OK, and how 
many documents were affected.</p>
<p>The result object looks like this:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  { n: 2, ok: 1 }</div>
</div>

<p>You can use this object to return the number of deleted documents:</p>


<div class="w3-example">
<h3>Example</h3>
<p>Return the number of deleted documents:</p>
<div class="w3-code notranslate w3-black">
  console.log(obj.result.n);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  2</div>
</div>





<h2>Drop Collection</h2>
<p>You can delete a table, or collection as it is called in MongoDB, by using 
the <code class="w3-codespan">drop()</code> method.</p>
<p>The <code class="w3-codespan">drop()</code> method takes a callback function 
containing the error object and the result parameter which returns true if the collection was dropped successfully, 
otherwise it returns false.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Delete the &quot;customers&quot; table:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).drop(function(err, delOK) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; if (delOK) console.log(&quot;Collection 
  deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_drop">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_drop.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_drop.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_drop.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">Collection deleted</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>db.dropCollection</h2>
<p>You can also use the <code class="w3-codespan">dropCollection()</code> method to delete a table (collection).</p>
<p>The <code class="w3-codespan">dropCollection()</code> method takes two parameters: the name of the collection 
and a callback function.</p>
<div class="w3-example">
<h3>Example</h3>
<p>Delete the &quot;customers&quot; collection, using dropCollection():</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<strong><br>&nbsp; 
  dbo.dropCollection(&quot;customers&quot;, function(err, delOK) {<br></strong>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; if (delOK) console.log(&quot;Collection 
  deleted&quot;);<br>&nbsp;&nbsp;&nbsp; db.close();<br>&nbsp; });<br>});</div>
  <a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_dropcollection">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_dropcollection.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_dropcollection.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_dropcollection.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">Collection deleted</div>
</div>





<h2>Update Document</h2>
<p>You can update a record, or document as it is called in MongoDB, by using 
the <code class="w3-codespan">updateOne()</code> method.</p>
<p>The first parameter of the <code class="w3-codespan">updateOne()</code> method 
is a query object defining which document to update.</p>
<div class="w3-panel w3-note">
<p><strong>Note:</strong> If the query finds more than one record, only the first 
occurrence is updated.</p>
</div>
<p>The second parameter  
is an object defining the new values of the document.<!-- By default, all fields in 
the 
document gets updated, (except the <code class="w3-codespan">_id</code> field) 
so remember to set the value of every field, otherwise the value will be left 
empty.--></p>


<div class="w3-example">
  <h3>Example</h3>
<p>Update the document with the address &quot;Valley 345&quot; to name=&quot;Mickey&quot; and 
address=&quot;Canyon 123&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://127.0.0.1:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myquery = { address: &quot;Valley 345&quot; };<br>&nbsp; var newvalues = { 
  $set: {name: 
  &quot;Mickey&quot;, address: &quot;Canyon 123&quot; } };<br>&nbsp; dbo.collection(&quot;customers&quot;).updateOne(myquery, 
  newvalues, function(err, res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(&quot;1 document updated&quot;);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_update_one" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_update_one.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_update_one.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_update_one.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">1 document updated</div>
</div>
<div id="midcontentadcontainer" style="overflow:auto;text-align:center">
<!-- MidContent -->

  <!--<pre>mid_content, all: [300,250][336,280][728,90][970,250][970,90][320,50][468,60]</pre>-->
  <div id="snhb-mid_content-0"></div>
    
</div>
<h2>Update Only Specific Fields</h2>
<p>When using the <code class="w3-codespan">$set</code> operator, only the 
specified fields are updated:</p>
<div class="w3-example">
  <h3>Example</h3>
<p>Update the address from &quot;Valley 345&quot; to &quot;Canyon 123&quot;:</p>
<div class="w3-code notranslate jsHigh">
  ...<br>&nbsp; var myquery = { address: &quot;Valley 345&quot; };<br>&nbsp; var newvalues 
  = { <strong>$set: { address: &quot;Canyon 123&quot; }</strong> };<br>&nbsp; dbo.collection(&quot;customers&quot;).updateOne(myquery, 
  newvalues, function(err, res) {<br>...</div>
  <a target="_blank" class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_update_set">Run example &raquo;</a>
</div>


<h2>Update Many Documents</h2>
<p>To update <em>all</em> documents that meets the criteria of the query, use 
the <code class="w3-codespan">updateMany()</code> method.</p>
<div class="w3-example">
  <h3>Example</h3>
<p>Update all documents where the name starts with the letter &quot;S&quot;:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://127.0.0.1:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  var myquery = { address: /^S/ };<br>&nbsp; var newvalues = {$set: {name: 
  &quot;Minnie&quot;} };<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).updateMany(myquery, newvalues, function(err, 
  res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(res.result.nModified + &quot; document(s) updated&quot;);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_update_many" target="_blank">Run example &raquo;</a>
</div>

<p>Save the code above in a file called &quot;demo_update_many.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_update_many.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_update_many.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">2 document(s) updated</div>
</div>

<h2>The Result Object</h2>
<p>The <code class="w3-codespan">updateOne()</code> and the
<code class="w3-codespan">updateMany()</code> methods return an object which contains information about how 
the execution affected the database.</p>
<p>Most of the information is not important to understand, but one object inside 
the object is called &quot;result&quot; which tells us if the execution went OK, and how 
many documents were affected.</p>
<p>The result object looks like this:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  { n: 1, nModified: 2, ok: 1 }</div>
</div>

<p>You can use this object to return the number of updated documents:</p>


<div class="w3-example">
<h3>Example</h3>
<p>Return the number of updated documents:</p>
<div class="w3-code notranslate w3-black">
  console.log(res.result.nModified);</div>
</div>
<p>Which will produce this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">
  2</div>
</div>





<h2>Limit the Result</h2>
<p>To limit the result in MongoDB, we use the <code class="w3-codespan">limit()</code> 
method.</p>
<p>The <code class="w3-codespan">limit()</code> method takes one parameter, a number defining how many documents 
to return.</p>

<p>Consider you have a "customers" collection:</p>
<div class="w3-example">
<h3>customers</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84 , name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85 , name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86 , name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87 , name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88 , name: 'Michael', address: 'Valley 345'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a89 , name: 'Sandy', address: 'Ocean blvd 2'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8a , 
  name: 'Betty', address: 'Green Grass 1'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a8b , name: 'Richard', 
  address: 'Sky st 331'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8c , name: 'Susan', address: 'One way 
  98'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a8d , name: 'Vicky', address: 'Yellow Garden 2'},<br>&nbsp; 
  { _id: 58fdbf5c0ef8a50b4cdd9a8e , name: 'Ben', address: 'Park Lane 38'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a8f , name: 'William', 
  address: 'Central st 954'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a90 , name: 'Chuck', address: 
  'Main Road 989'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a91 , name: 'Viola', address: 'Sideway 
  1633'}<br>]</div>
</div>


<div class="w3-example">
  <h3>Example</h3>
<p>Limit the result to only return 5 documents:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://localhost:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection(&quot;customers&quot;).find()<strong>.limit(5)</strong>.toArray(function(err, result) {<br>&nbsp;&nbsp;&nbsp; 
  if (err) throw err;<br>&nbsp;&nbsp;&nbsp; console.log(result);<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_limit" target="_blank">Run example &raquo;</a>
</div>


<p>Save the code above in a file called &quot;demo_mongodb_limit.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_limit.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_limit.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<h3>customers</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a84 , name: 'John', address: 'Highway 71'},<br>&nbsp; { _id: 
  58fdbf5c0ef8a50b4cdd9a85 , name: 'Peter', address: 'Lowstreet 4'},<br>&nbsp; { 
  _id: 58fdbf5c0ef8a50b4cdd9a86 , name: 'Amy', 
  address: 'Apple st 652'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a87 , name: 'Hannah', address: 
  'Mountain 21'},<br>&nbsp; { _id: 58fdbf5c0ef8a50b4cdd9a88 , name: 'Michael', 
  address: 'Valley 345'}<br>]</div>
</div>

<p>As you can see from the result above, only the 5 first documents were 
returned.</p>




<h2>Join Collections</h2>
<p>MongoDB is not a relational database, but you can perform a left outer join 
by using the <code class="w3-codespan">$lookup</code> stage.</p>
<p>The <code class="w3-codespan">$lookup</code> stage lets you specify which 
collection you want to join with the current collection, and which 
fields that should match.</p>

<p>Consider you have a "orders" collection and a "products" collection:</p>
<div class="w3-example">
<h3>orders</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 1, product_id: 
  154, status: 1 }<br>]</div>
</div>

<div class="w3-example">
<h3>products</h3>
<div class="w3-code notranslate w3-black">[<br>&nbsp; { _id: 154, name: 
  'Chocolate Heaven' },<br>&nbsp; { _id: 155, name: 'Tasty Lemons' },<br>&nbsp; { 
  _id: 156, name: 'Vanilla Dreams' }<br>]</div>
</div>

<div class="w3-example">
  <h3>Example</h3>
<p>Join the matching "products" document(s) to the "orders" collection:</p>
<div class="w3-code notranslate jsHigh">
  var MongoClient = require('mongodb').MongoClient;<br>var url = &quot;mongodb://127.0.0.1:27017/&quot;;<br>
  <br>MongoClient.connect(url, function(err, db) {<br>&nbsp; if (err) throw err;<br>&nbsp; 
  var dbo = db.db(&quot;mydb&quot;);<br>&nbsp; 
  dbo.collection('orders').aggregate([<br><strong>&nbsp;&nbsp;&nbsp; { $lookup:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; from: 'products',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  localField: 'product_id',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  foreignField: '_id',<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  as: 'orderdetails'<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp; 
  }<br></strong>&nbsp;&nbsp;&nbsp; ]).toArray(function(err, 
  res) {<br>&nbsp;&nbsp;&nbsp; if (err) throw err;<br>&nbsp;&nbsp;&nbsp; 
  console.log(JSON.stringify(res));<br>&nbsp;&nbsp;&nbsp; 
  db.close();<br>&nbsp; });<br>});</div>
  <a class="w3-btn w3-margin-bottom" href="shownodejs_cmd.asp?filename=demo_mongodb_join" target="_blank">Run example &raquo;</a>
</div>


<p>Save the code above in a file called &quot;demo_mongodb_join.js&quot; and run the file:</p>
<div class="w3-example">
<p>Run "demo_mongodb_join.js"</p>
<div class="w3-code notranslate w3-black">
C:\Users\<em>Your Name</em>&gt;node demo_mongodb_join.js
</div>
</div>
<p>Which will give you this result:</p>
<div class="w3-example">
<div class="w3-code notranslate w3-black">[<br>&nbsp; { &quot;_id&quot;: 1, &quot;product_id&quot;: 
  154, &quot;status&quot;: 1, &quot;orderdetails&quot;: [<br>&nbsp;&nbsp;&nbsp; { &quot;_id&quot;: 154, &quot;name&quot;: 
  &quot;Chocolate Heaven&quot; } ]<br>&nbsp; }<br>]</div>
</div>
<p>As you can see from the result above, the matching document from the products 
collection is included in the orders collection as an array.</p>



<script type='text/javascript' src='readbook.js'></script>
<script>
var lazyLoadInstance = new LazyLoad({
    elements_selector: ".lazy"
    // ... more custom settings?
});
</script>

</body></html>