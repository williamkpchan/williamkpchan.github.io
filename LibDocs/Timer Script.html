<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<style>
body {
 margin: auto;
 width: 80%;
 font-size: 24px;
 background-color: #000000;
 color: #20C030;
}
a { text-decoration: none; 
	color: #28B8B8; }
a:visited {	color: #389898; }
A:hover {	color: yellow; }
A:focus {	color: red; }
code { color: gray;  background-color: #001010}
pre { color: gray;  background-color: #001010;  font-size: 16px; }
</style>

<script>
var alarmSound = new Audio('https://freesound.org/data/previews/339/339133_2887210-lq.mp3');

function setTimer() {
	var timerValue = document.getElementById("timer").value;
	document.getElementById("msg").innerHTML = "<br><br>";
	setInterval(function(){ alarm(); }, timerValue* 1000);
}

function alarm() {
	$("body").append("<br><br>");
	$.get("http://qt.gtimg.cn/r=2&q=r_hk01157", function(data, status){process(data);})
}
function process(data) {
	theString = data
	var arr = theString.split("=");
	theString = arr[1];
	var arr = theString.split("~");
	finalString = arr[1] + "&emsp;" + arr[30] + "&emsp;" + Number(arr[3]).toFixed(2) + "&emsp;" + Number(arr[33]).toFixed(2) + "&emsp;" + Number(arr[34]).toFixed(2) + "&emsp;" + (Number(arr[37])/10000).toFixed(2) + "&emsp;" ;
	$("body").append(finalString);
	alarmSound.play();
}
</script>

</head>

<body>
<h3>Timer Script</h3>

<input type="number" id="timer" autofocus>
<button onclick="setTimer()">Set Timer</button>
<br>
<div id="msg"></div>
</body>
</html>


