<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width"/>
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, strong,  div.title').click(function(){
    parent.history.back();
    return false;
    });
});
</script>
<style>
body{width:80%;margin-left: 10%;color: grey}
strong, h1, h2 {color: gold;}
</style>
</head><body>
<center><h1>PHP MySQL</h1>
<div id="toc"></div></center>
<br>
<br>
<br>

<h2>Connecting to MySQL Database</h2>

<p>
<strong>Summary:</strong> in this tutorial, we will show you how to connect to MySQL database server using PDO object.</p>
<p>Before connecting to a MySQL database, you have to specify the following information:</p>
<ul>
<li>MySQL data source name or <code>DSN</code> :  specifies the address of the MySQL database server. 
You can use IP address or server name e.g., <code>127.0.0.1</code>  or  <code>localhost</code>
</li>
<li>MySQL database name: indicates the name of the database to which you want to connect.
</li>
<li>Username and password: specify username and password of the MySQL&#8217;s user that you use to connect to the MySQL database server. The account must have sufficient privileges to access the database specified above.
</li>
</ul>
<p>We will use:</p>
<ul>
<li>The local MySQL database server so the <code>DSN</code> is <code>localhost</code> .
</li>
<li>The <code>classicmodels</code> as the 
<a title="MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx">sample database</a>.
</li>
<li>The <code>root</code> account with a blank password, just for the sake of demonstration.
</li>
</ul>
<h3>Connecting to MySQL steps</h3>
<p>First, to make it convenient, we will create a new PHP file for database configuration named  <code>dbconfig.php</code> that holds all configured parameters:</p>
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184d338280c116377268-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c184d338280c116377268-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$host</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184d338280c116377268-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$dbname</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'classicmodels'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184d338280c116377268-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$username</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'root'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184d338280c116377268-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$password</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Second, we create a new PHP file named <code>phpmysqlconnect.php</code> :</p>
<div id="crayon-5c184d3382819783264688" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184d3382819783264688-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-2"><span class="crayon-k ">require_once</span><span class="crayon-h"> </span><span class="crayon-s">'dbconfig.php'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-3">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-4"><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$conn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=$host;dbname=$dbname"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$username</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-s">"Connected to $dbname at $host successfully."</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-7"><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$pe</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-s">"Could not connect to the database $dbname :"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$pe</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184d3382819783264688-9"><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>How the script works.</p>
<ul>
<li>We included the  <code>dbconfig.php</code> file into the script by using the  <code>require_once</code>  function.
</li>
<li>Inside the <code>try</code> block, we created a new PDO object with three arguments: connection string, username, and password. The connection string is composed of  <code>$host</code> and <code>$dbname</code>  variables in the  <code>dbconfig.php</code> file.
</li>
<li>If the connection to the MySQL database established successfully, we displayed a success message. If there was any errors or exceptions, PHP issued a <code>PDOException</code>  that contains the detailed error message. We call the <code>getMesage()</code>  method of the <code>PDOException</code> object to get the detailed message for display.
</li>
</ul>
<p>Third, let&#8217;s test the script from the web browser.</p>
<p>
<img class="border alignnone wp-image-1274" title="php mysql connect" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-connect.png" alt="php mysql connect" width="464" height="176" /></p>
<p>It works as expected. We&#8217;ve successfully connected to the MySQL server.</p>
<p>Let&#8217;s try to change something in the code to make the script display an error message. If you set the  <code>$username</code> variable to blank, you will get the following error message:</p>
<p>
<img class="border alignnone wp-image-1275 size-full" title="php mysql connect error" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-connect-error.png" alt="php mysql connect error" width="480" height="160" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-connect-error.png 480w, http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-connect-error-300x100.png 300w" sizes="(max-width: 480px) 100vw, 480px" /></p>
<p>The error message shows that:</p>
<div id="crayon-5c184d338281d675005173" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184d338281d675005173-1">Access<span class="crayon-h"> </span>denied<span class="crayon-h"> </span>for<span class="crayon-h"> </span>user<span class="crayon-h"> </span><span class="crayon-s ">''</span><span class="crayon-sy">@</span><span class="crayon-s ">'localhost'</span><span class="crayon-h"> </span>to<span class="crayon-h"> </span>database<span class="crayon-h"> </span><span class="crayon-s ">'classicmodels'</span></div></div>
</td>
</tr>
</table></div></div>
<p>because we don&#8217;t have any blank user in the <code>classicmodels</code> database.</p>
<p>When the script ends, PHP automatically closes the connection to the MySQL database server. If you want to explicitly close the database connection, you need to set the PDO object to <code>null</code> as follows:</p>
<div id="crayon-5c184d3382824777750709" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184d3382824777750709-1"><span class="crayon-v">$conn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>You can download the scripts of this tutorial via the following download link:</p>
<p>
<a href="http://www.mysqltutorial.org/wp-content/uploads/2018/10/phpmysqlconnect.zip">PHP MySQL Connect</a></p>
<p>In this tutorial, you&#8217;ve learned how to connect to MySQL using PHP PDO object and handle any exception that may occur when connecting the MySQL database.</p>


<h2>Create A New Table</h2>

<p>
<strong>Summary</strong>: in this tutorial, we will show you how to use PHP to create MySQL database table by using PDO API.</p>
<p>The following are the steps to show you how to create a new table in a database:</p>
<ul>
<li>Open a database connection to the MySQL database server.
</li>
<li>Execute the 
<a title="Creating Tables Using MySQL CREATE TABLE Statement" href="http://www.mysqltutorial.org/mysql-create-table/">CREATE TABLE</a> statement to create new tables.
</li>
</ul>
<h3>Create table example</h3>
<p>We will create a new table named <code>tasks</code> in the 
<a title="MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx">sample database</a> with the following SQL script:</p>
<div id="crayon-5c1850f27fe3c738774333" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f27fe3c738774333-1"><span class="crayon-st">CREATE</span><span class="crayon-h"> </span><span class="crayon-st">TABLE</span><span class="crayon-h"> </span><span class="crayon-st">IF NOT EXISTS</span><span class="crayon-h"> </span>tasks<span class="crayon-h"> </span>(</div>
<div class="crayon-line" id="crayon-5c1850f27fe3c738774333-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>task_id<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">INT</span><span class="crayon-h"> </span><span class="crayon-st">AUTO_INCREMENT</span><span class="crayon-h"> </span><span class="crayon-st">PRIMARY KEY</span>,</div>
<div class="crayon-line" id="crayon-5c1850f27fe3c738774333-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">subject</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">VARCHAR</span><span class="crayon-h"> </span>(255)<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-st">NULL</span>,</div>
<div class="crayon-line" id="crayon-5c1850f27fe3c738774333-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>start_date<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-t">DATE</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-st">NULL</span>,</div>
<div class="crayon-line" id="crayon-5c1850f27fe3c738774333-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>end_date<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">DATE</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-st">NULL</span>,</div>
<div class="crayon-line" id="crayon-5c1850f27fe3c738774333-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>description<span class="crayon-h"> </span><span class="crayon-t">VARCHAR</span><span class="crayon-h"> </span>(400)<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-st">NULL</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe3c738774333-7">);</div></div>
</td>
</tr>
</table></div></div>
<p>First, we create a class named <code>CreateTableDemo</code> that has DB configuration parameters. In the constructor of the <code>CreateTableDemo</code> class, we open a connection to the sample database by instantiating a new PDO object.</p>
<div id="crayon-5c1850f27fe4f235746853" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-3"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-4"><span class="crayon-c"> * PHP MySQL Create Table Demo</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-5"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-6"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">CreateTableDemo</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-9"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * database host</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-10"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_HOST</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * database name</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'classicmodels'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-17">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-19"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * database user</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-20"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_USER</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'root'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-23"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * database password</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-24"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-26">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-28"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; *</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-29"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @var type </span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-30"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-32">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-34"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Open the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-35"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// open database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$conStr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=%s;dbname=%s"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_HOST</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_NAME</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-v">$conStr</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_USER</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-45">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//...</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe4f235746853-47"><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>Next, in the destructor of the <code>CreateTabledemo</code> class, we close the database connection by assigning it the <code>null</code> value.</p>
<div id="crayon-5c1850f27fe55136656914" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f27fe55136656914-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe55136656914-2"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * close the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe55136656914-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe55136656914-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__destruct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe55136656914-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// close the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe55136656914-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe55136656914-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>Then, define the <code>createTaskTable()</code> method to create the <code>tasks</code> table:</p>
<div id="crayon-5c1850f27fe59765357613" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-2"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * create the tasks table</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return boolean returns true on success or false on failure</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-4"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">createTaskTable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;&lt;</span><span class="crayon-e">EOSQL</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-7"><span class="crayon-e">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">CREATE </span><span class="crayon-e">TABLE </span><span class="crayon-st">IF</span><span class="crayon-h"> </span><span class="crayon-st">NOT</span><span class="crayon-h"> </span><span class="crayon-e">EXISTS </span><span class="crayon-e">tasks</span><span class="crayon-h"> </span><span class="crayon-sy">(</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">task_id&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">INT</span><span class="crayon-h"> </span><span class="crayon-e">AUTO_INCREMENT </span><span class="crayon-e">PRIMARY </span><span class="crayon-cn">KEY</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">subject&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-e">VARCHAR</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-t">NULL</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">start_date&nbsp;&nbsp;</span><span class="crayon-e">DATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-t">NULL</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">end_date&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">DATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-t">NULL</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">description </span><span class="crayon-e">VARCHAR</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">400</span><span class="crayon-sy">)</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">DEFAULT</span><span class="crayon-h"> </span><span class="crayon-t">NULL</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-14"><span class="crayon-cn">EOSQL</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">exec</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe59765357613-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>To execute an SQL statement, you call the <code>exec()</code>  method of the PDO object. After that, you can create an instance of the <code>CreateTableDemo</code> class and call the <code>createTaskTable()</code> method.</p>
<div id="crayon-5c1850f27fe5c283689459" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f27fe5c283689459-1"><span class="crayon-c">// create the tasks table</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe5c283689459-2"><span class="crayon-v">$obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">CreateTableDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f27fe5c283689459-3"><span class="crayon-v">$obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">createTaskTable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Finally, you can check the <code>classicmodels</code> sample database to see if the <code>tasks</code> table has been created.</p>
<p>
<img class="alignnone size-full wp-image-2848" src="http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-create-table.png" alt="php mysql create table" width="174" height="207" />
<img class="alignnone size-full wp-image-2859" title="PHP MySQL Create table: tasks" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/tasks-table.png" alt="PHP MySQL Create table: tasks" width="184" height="184" /></p>
<p>You can download the PHP script file via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqlcreatetable.zip" target="_blank" rel="noopener">Download PHP MySQL Create Table Source Code</a></p>
<p>In this tutorial, we have shown you step by step how to use PDO object to create a table in the MySQL database.</p>
<div class="helpful-block-content wth_thumbs" data-title="">
<ul>
<li><span class="wth_title">Was this tutorial helpful ?</span>
</li>
<li>
<a data-post="2845" data-post-url="http://www.mysqltutorial.org/php-mysql-create-table/" data-post-title="Create A New Table" data-response="1" href="#" class="wth-green-btn icon-thumbs-up">Yes</a>&nbsp; &nbsp;
<a data-response="0" data-post="2845" data-post-url="http://www.mysqltutorial.org/php-mysql-create-table/" data-post-title="Create A New Table" href="#" class="wth-red-btn icon-thumbs-down">No</a>
</li>
</ul></div>
<div class='heateorSssClear'></div>
<div  class='heateor_sss_sharing_container heateor_sss_horizontal_sharing' heateor-sss-data-href='http://www.mysqltutorial.org/php-mysql-create-table/'>
<div class='heateor_sss_sharing_title' style="font-weight:bold" ></div>
<ul  class="heateor_sss_sharing_ul">
<li class="heateorSssSharingRound">
<i style="width:35px;height:35px;border-radius:999px;" alt="Facebook" Title="Facebook" class="heateorSssSharing heateorSssFacebookBackground" onclick='heateorSssPopup("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.mysqltutorial.org%2Fphp-mysql-create-table%2F")'>
<ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssFacebookSvg">
</ss>
</i>
</li>
<li class="heateorSssSharingRound">
<i style="width:35px;height:35px;border-radius:999px;" alt="Twitter" Title="Twitter" class="heateorSssSharing heateorSssTwitterBackground" onclick='heateorSssPopup("http://twitter.com/intent/tweet?text=PHP%20MySQL%3A%20Create%20A%20New%20Table&url=http%3A%2F%2Fwww.mysqltutorial.org%2Fphp-mysql-create-table%2F")'>
<ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssTwitterSvg">
</ss>
</i>
</li>
<li class="heateorSssSharingRound">
<i style="width:35px;height:35px;border-radius:999px;" alt="Reddit" Title="Reddit" class="heateorSssSharing heateorSssRedditBackground" onclick='heateorSssPopup("http://reddit.com/submit?url=http%3A%2F%2Fwww.mysqltutorial.org%2Fphp-mysql-create-table%2F&title=PHP%20MySQL%3A%20Create%20A%20New%20Table")'>
<ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssRedditSvg">
</ss>
</i>
</li>
</ul>
<div class="heateorSssClear"></div></div>
<div class='heateorSssClear'></div></div>
<div id="alternative_content_bottom"> 

<a class="prev-page-anchor" href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/" rel="prev" title="Connecting to MySQL Database"><span>Previous Tutorial:</span> Connecting to MySQL Database</a></div>
<div class="page-next">
<a class="next-page-anchor" href="http://www.mysqltutorial.org/php-querying-data-from-mysql-table/" rel="next" title="Querying Data from Database"><span>Next Tutorial:</span> Querying Data from Database</a></div></div>
</article>
</main>
<aside class="sidebar sidebar-primary widget-area" role="complementary" aria-label="Primary Sidebar" itemscope itemtype="https://schema.org/WPSideBar">
<section id="text-24" class="widget widget_text">

<h5>MySQL Quick Start</h5>
<div class="menu-mysql-quick-start-container">
<ul id="menu-mysql-quick-start" class="menu">
<li id="menu-item-4209" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4209">
<a href="http://www.mysqltutorial.org/what-is-mysql/" itemprop="url">What Is MySQL?</a>
</li>
<li id="menu-item-2320" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2320">
<a title="Install MySQL Database Server" href="http://www.mysqltutorial.org/install-mysql/" itemprop="url">Install MySQL Database Server</a>
</li>
<li id="menu-item-2324" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2324">
<a title="Download MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx" itemprop="url">Download MySQL Sample Database</a>
</li>
<li id="menu-item-2321" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2321">
<a title="How to Load Sample Database into MySQL Database Server" href="http://www.mysqltutorial.org/how-to-load-sample-database-into-mysql-database-server.aspx" itemprop="url">Load Sample Database</a>
</li>
</ul></div></div>
</section>
<section id="text-23" class="widget widget_text">


<h2>Querying Data from Database</h2>

<p>
<strong>Summary</strong>
<em>: 
</em>in this tutorial, you will learn how to query data from MySQL database by using PHP PDO. You will also learn how to use PDO prepared statement to select data securely.
<em>
<br /> 
</em></p>
<h3>PHP MySQL Querying data using simple SELECT statement</h3>
<p>To query data from the MySQL database, follow the steps below:</p>
<p>First, connect to a MySQL database. Check it out 
<a title="PHP Connecting to MySQL Database" href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/">the connecting to MySQL database using PDO tutorial for detail information</a>.</p>
<div id="crayon-5c184c89d2da3272993056" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2da3272993056-1"><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=$host;dbname=$dbname"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$username</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Then, construct a 
<a title="MySQL SELECT" href="http://www.mysqltutorial.org/mysql-select-statement-query-data.aspx">SELECT statement</a> and execute it by using the <code>query()</code> method of the PDO object.</p>
<div id="crayon-5c184c89d2dba652779159" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2dba652779159-1"><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'SELECT lastname, firstname, jobtitle </span></div>
<div class="crayon-line" id="crayon-5c184c89d2dba652779159-2"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM employees</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dba652779159-3"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ORDER BY lastname'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dba652779159-4">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dba652779159-5"><span class="crayon-v">$q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>The <code>query()</code> method of the PDO object returns a <code>PDOStatement</code> object, or <code>false</code> on failure.</p>
<p>Next, set the <code>PDO::FETCH_ASSOC</code> fetch mode for the <code>PDOStatement</code> object by using the <code>setFetchMode()</code> method. The <code>PDO::FETCH_ASSOC</code> mode instructs the <code>fetch()</code> method to return a result set as an array indexed by column name.</p>
<div id="crayon-5c184c89d2dc5580679363" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2dc5580679363-1"><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">setFetchMode</span><span class="crayon-sy">(</span><span class="crayon-v">PDO</span><span class="crayon-o">::</span><span class="crayon-v">FETCH_ASSOC</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>After that, fetch each row from the result set until there is no row left by using the <code>fetch()</code> method of the <code>PDOStatement</code> object.</p>
<div id="crayon-5c184c89d2dc8611063545" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-1"><span class="crayon-o">&lt;</span><span class="crayon-e">table </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"table table-bordered table-condensed"</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">thead</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span><span class="crayon-e">First</span><span class="crayon-h"> </span><span class="crayon-e">Name</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span><span class="crayon-e">Last</span><span class="crayon-h"> </span><span class="crayon-e">Name</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span><span class="crayon-e">Job</span><span class="crayon-h"> </span><span class="crayon-e">Title</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">thead</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">tbody</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">$r</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">htmlspecialchars</span><span class="crayon-sy">(</span><span class="crayon-v">$r</span><span class="crayon-sy">[</span><span class="crayon-s">'lastname'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">htmlspecialchars</span><span class="crayon-sy">(</span><span class="crayon-v">$r</span><span class="crayon-sy">[</span><span class="crayon-s">'firstname'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">htmlspecialchars</span><span class="crayon-sy">(</span><span class="crayon-v">$r</span><span class="crayon-sy">[</span><span class="crayon-s">'jobtitle'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-st">endwhile</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">tbody</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dc8611063545-18"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">table</span><span class="crayon-o">&gt;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Putting it all together.</p>
<div id="crayon-5c184c89d2dca230019692" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-2"><span class="crayon-k ">require_once</span><span class="crayon-h"> </span><span class="crayon-s">'dbconfig.php'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-3">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-4"><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=$host;dbname=$dbname"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$username</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-6">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'SELECT lastname,</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-8"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstname,</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jobtitle</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM employees</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-11"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ORDER BY lastname'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">setFetchMode</span><span class="crayon-sy">(</span><span class="crayon-e">PDO::</span><span class="crayon-cn">FETCH_ASSOC</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-15"><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-s">"Could not connect to the database $dbname :"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-17"><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-18"><span class="crayon-ta">?&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-19"><span class="crayon-o">&lt;</span><span class="crayon-o">!</span><span class="crayon-e">DOCTYPE </span><span class="crayon-i">html</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-20"><span class="crayon-o">&lt;</span><span class="crayon-i">html</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-i">head</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-i">title</span><span class="crayon-o">&gt;</span><span class="crayon-e">PHP </span><span class="crayon-e">MySQL </span><span class="crayon-e">Query </span><span class="crayon-e">Data </span><span class="crayon-i">Demo</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">title</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">link </span><span class="crayon-i">href</span><span class="crayon-o">=</span><span class="crayon-s">"css/bootstrap.min.css"</span><span class="crayon-h"> </span><span class="crayon-i">rel</span><span class="crayon-o">=</span><span class="crayon-s">"stylesheet"</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">link </span><span class="crayon-i">href</span><span class="crayon-o">=</span><span class="crayon-s">"css/style.css"</span><span class="crayon-h"> </span><span class="crayon-i">rel</span><span class="crayon-o">=</span><span class="crayon-s">"stylesheet"</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">head</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-i">body</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">div </span><span class="crayon-i">id</span><span class="crayon-o">=</span><span class="crayon-s">"container"</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-i">h1</span><span class="crayon-o">&gt;</span><span class="crayon-i">Employees</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">h1</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">table </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"table table-bordered table-condensed"</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">thead</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span><span class="crayon-e">First</span><span class="crayon-h"> </span><span class="crayon-e">Name</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span><span class="crayon-e">Last</span><span class="crayon-h"> </span><span class="crayon-e">Name</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span><span class="crayon-e">Job</span><span class="crayon-h"> </span><span class="crayon-e">Title</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">th</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">thead</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">tbody</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">$row</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">htmlspecialchars</span><span class="crayon-sy">(</span><span class="crayon-v">$row</span><span class="crayon-sy">[</span><span class="crayon-s">'lastname'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">htmlspecialchars</span><span class="crayon-sy">(</span><span class="crayon-v">$row</span><span class="crayon-sy">[</span><span class="crayon-s">'firstname'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">htmlspecialchars</span><span class="crayon-sy">(</span><span class="crayon-v">$row</span><span class="crayon-sy">[</span><span class="crayon-s">'jobtitle'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">td</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-e">tr</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-st">endwhile</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">tbody</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">table</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">body</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-48"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">div</span><span class="crayon-o">&gt;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dca230019692-49"><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-i">html</span><span class="crayon-o">&gt;</span></div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="alignnone size-full wp-image-2842" title="PHP PDO MySQL SELECT" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-PDO-SELECT.png" alt="PHP PDO MySQL SELECT" width="622" height="393" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-PDO-SELECT.png 622w, http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-PDO-SELECT-300x189.png 300w" sizes="(max-width: 622px) 100vw, 622px" /></p>
<h3>PHP MySQL Querying data using PDO prepared statement</h3>
<p>In practice, we often pass the argument from PHP to the SQL statement e.g., get the employee whose last name ends with <code>son</code> . To do it securely and avoid SQL injection attack, you need to use the PDO prepared statement.</p>
<p>Let&#8217;s take a look at the following example:</p>
<div id="crayon-5c184c89d2dcd705103716" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-1"><span class="crayon-o">&lt;</span><span class="crayon-sy">?</span><span class="crayon-e">php</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-3"><span class="crayon-v">require</span><span class="crayon-sy">_</span>once<span class="crayon-h"> </span><span class="crayon-s">'dbconfig.php'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-4">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-5"><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=$host;dbname=$dbname"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">username</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'SELECT lastname,</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstname,</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jobtitle</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-11"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM employees</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-12"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE lastname LIKE ?'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-13">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">'%son'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">setFetchMode</span><span class="crayon-sy">(</span><span class="crayon-v">PDO</span><span class="crayon-o">::</span><span class="crayon-v">FETCH_ASSOC</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-17">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">r</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">echo </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">'%s &lt;br/&gt;'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">r</span><span class="crayon-sy">[</span><span class="crayon-s">'lastname'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-21"><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">pe</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">die</span><span class="crayon-sy">(</span><span class="crayon-s">"Could not connect to the database $dbname :"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">pe</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2dcd705103716-23"><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>How the script works.</p>
<ul>
<li>First, we use a question mark (?) in the <code>SELECT</code> statement. PDO will replace the question mark in the query by the corresponding argument. The question mark is called positional placeholder.
</li>
<li>Next, we call the <code>prepare()</code> method of the PDO object to prepare the SQL statement for the execution.
</li>
<li>Then, we execute the statement by calling the <code>execute()</code> method of the <code>PDOStatement</code> object. In addition, we pass an argument as an array to replace the placeholder in the <code>SELECT</code> statement. By doing this, the <code>SELECT</code> statement will be translated as follows:
</li>
</ul>
<p></p>
<div id="crayon-5c184c89d2dda430805309" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2dda430805309-1"><span class="crayon-st">SELECT</span><span class="crayon-h"> </span>lastname,</div>
<div class="crayon-line" id="crayon-5c184c89d2dda430805309-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>firstname,</div>
<div class="crayon-line" id="crayon-5c184c89d2dda430805309-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>jobtitle</div>
<div class="crayon-line" id="crayon-5c184c89d2dda430805309-4"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">FROM</span><span class="crayon-h"> </span>employees</div>
<div class="crayon-line" id="crayon-5c184c89d2dda430805309-5"><span class="crayon-h"> </span><span class="crayon-st">WHERE</span><span class="crayon-h"> </span>lastname<span class="crayon-h"> </span><span class="crayon-st">LIKE</span><span class="crayon-h"> </span><span class="crayon-s">'%son'</span>;</div></div>
</td>
</tr>
</table></div></div>
<p></p>
<ul>
<li>After that, we set the fetch mode for the <code>PDOStatement</code> object.
</li>
<li>Finally, we fetch each row of the result set and display the last name field.
</li>
</ul>
<p>PHP provides you with another way to use placeholders in the prepared statement called named placeholder. The advantages of using the named placeholder are:</p>
<ul>
<li>More descriptive.
</li>
<li>If the SQL statement has multiple placeholders, it is easier pass the arguments to the <code>execute()</code> method.
</li>
</ul>
<p>Let&#8217;s take a look at the following example:</p>
<div id="crayon-5c184c89d2ddc147551669" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-3"><span class="crayon-k ">require_once</span><span class="crayon-h"> </span><span class="crayon-s">'dbconfig.php'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-4">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-5"><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=$host;dbname=$dbname"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$username</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'SELECT lastname,</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstname,</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jobtitle</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-11"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM employees</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-12"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE lastname LIKE :lname OR </span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-13"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;firstname LIKE :fname;'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-14">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// prepare statement for execution</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// pass values to the query and execute it</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">':fname'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'Le%'</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':lname'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'%son'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">setFetchMode</span><span class="crayon-sy">(</span><span class="crayon-e">PDO::</span><span class="crayon-cn">FETCH_ASSOC</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// print out the result set</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">$r</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">'%s &lt;br/&gt;'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$r</span><span class="crayon-sy">[</span><span class="crayon-s">'lastname'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-28"><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-s">"Could not connect to the database $dbname :"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c89d2ddc147551669-30"><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>The <code>:lname</code> and <code>:fname</code> are the named placeholders. They are substituted by the corresponding argument in the associative array that we pass to the execute method.</p>
<p>In this tutorial, you have learned how to query data from MySQL database using PDO objects.</p>


<h2>Insert Data Into a Table</h2>

<p>
<strong>Summary</strong>
<em>: 
</em>in this tutorial, you will learn how to use PHP PDO to insert data into a MySQL table.</p>
<p>We will use the <code>tasks</code> table that we created in the 
<a title="PHP MySQL Create Table" href="www.mysqltutorial.org/php-mysql-create-table/">PHP MySQL create table</a> tutorial. If you have not yet created the <code>tasks</code> table, please follow the tutorial and create it before going forward with this tutorial.</p>
<p>The following picture illustrates the <code>tasks</code> table:</p>
<p>
<img class="alignnone size-full wp-image-2859" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/tasks-table.png" alt="tasks table" width="184" height="184" /></p>
<p>To insert data into a table, you follow the steps below:</p>
<ul>
<li>
<a title="PHP MySQL Connect" href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/">Connect to the MySQL database</a> by creating a new instance of the PDO object.
</li>
<li><span style="line-height: 12.997159004211426px;">Construct a 
<a title="MySQL INSERT statement" href="http://www.mysqltutorial.org/mysql-insert-statement.aspx">MySQL INSERT statement</a>.</span>
</li>
<li>Call <code>exec()</code>  method of the PDO object.
</li>
</ul>
<h3>PHP MySQL Insert data examples</h3>
<h4>PHP MySQL: insert a new row into a table example</h4>
<p></p>
<div id="crayon-5c1850f53b0ff520616770" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-3"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">InsertDataDemo</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-4">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_HOST</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'classicmodels'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_USER</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'root'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-9">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-11">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-13"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Open the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// open database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$conStr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=%s;dbname=%s"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_HOST</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_NAME</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-v">$conStr</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_USER</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$pe</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-v">$pe</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f53b0ff520616770-24"><span class="crayon-c">//...</span></div></div>
</td>
</tr>
</table></div></div>
<p>The following example illustrates how to insert a new row into the <code>tasks</code> table.</p>
<div id="crayon-5c1850f53b10b646526737" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-1"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-2"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Insert a row into a table</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-4"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">insert</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"INSERT INTO tasks (</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-7"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subject,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-8"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;description,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_date,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end_date</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-11"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-12"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VALUES (</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-13"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Learn PHP MySQL Insert Dat',</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-14"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'PHP MySQL Insert data into a table',</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-15"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'2013-01-01',</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-16"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'2013-01-01'</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-17"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)"</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-18">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">exec</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10b646526737-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>We defined the <code>InsertDataDemo</code> class with a constructor that establishes the database connection and a destructor that closes the database connection. Please refer to the 
<a title="PHP MySQL Create table" href="http://www.mysqltutorial.org/php-mysql/php-mysql-create-table/">PHP MySQL create table tutorial</a> for the code these methods.</p>
<p>Inside the <code>InsertDataDemo</code> class, we define a the insert method that calls the <code>exec()</code>  method of the PDO object  to execute the <code>INSERT</code> statement.</p>
<p>The following statement creates an instance of the <code>InsertDataDemo</code> class and calls the <code>insert()</code>  method to insert a new row into the tasks table.</p>
<div id="crayon-5c1850f53b10f404559905" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b10f404559905-1"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">InsertDataDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b10f404559905-2"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">insert</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Let&#8217;s query the data in the <code>tasks</code> table:</p>
<div id="crayon-5c1850f53b111810844848" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b111810844848-1"><span class="crayon-st">SELECT</span><span class="crayon-h"> </span>*</div>
<div class="crayon-line" id="crayon-5c1850f53b111810844848-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-st">FROM</span><span class="crayon-h"> </span>tasks;</div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="border alignnone wp-image-2857 size-full" title="PHP MySQL Insert Task Example" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-Insert-Task-Example.png" alt="PHP MySQL Insert Task Example" width="570" height="41" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-Insert-Task-Example.png 570w, http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-Insert-Task-Example-300x21.png 300w" sizes="(max-width: 570px) 100vw, 570px" /></p>
<h4>PHP MySQL: insert a single row using prepared statement example</h4>
<p>To pass values from PHP to SQL statement dynamically and securely, you use the PDO prepared statement.</p>
<p>First, use MySQL statement with named placeholders as follows:</p>
<div id="crayon-5c1850f53b113407995090" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b113407995090-1"><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'INSERT INTO tasks (</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-2"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subject,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-3"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;description,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-4"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_date,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-5"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end_date</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-6"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-7"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VALUES (</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-8"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subject,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:description,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:start_date,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-11"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:end_date</span></div>
<div class="crayon-line" id="crayon-5c1850f53b113407995090-12"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);'</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>The :subject, :description, :startdate and :enddate are called named placeholders.</p>
<p>Second, call the <code>prepare()</code>  method of the PDO object to prepare the SQL statement for the execution:</p>
<div id="crayon-5c1850f53b115011179166" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b115011179166-1"><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Third, call the <code>execute()</code>  method and pass an array that contains the values which are corresponding to the named placeholders.</p>
<div id="crayon-5c1850f53b117120249023" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b117120249023-1"><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-v">$task</span><span class="crayon-sy">)</span></div></div>
</td>
</tr>
</table></div></div>
<p>Putting it all together.</p>
<div id="crayon-5c1850f53b118784986704" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b118784986704-1"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-2"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Insert a new task into the tasks table</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $subject</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-4"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $description</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-5"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $startDate</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-6"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $endDate</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-7"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return mixed returns false on failure </span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-8"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">insertSingleRow</span><span class="crayon-sy">(</span><span class="crayon-v">$subject</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$description</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$startDate</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$endDate</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$task</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">':subject'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$subject</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':description'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$description</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':start_date'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$startDate</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':end_date'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$endDate</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-14">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'INSERT INTO tasks (</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-16"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subject,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-17"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;description,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-18"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start_date,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-19"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end_date</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-20"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-21"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VALUES (</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-22"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:subject,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-23"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:description,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-24"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:start_date,</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-25"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:end_date</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-26"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-27">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-29">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-v">$task</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f53b118784986704-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>Now we can pass the task&#8217;s data to the <code>insertSingleRow()</code> method:</p>
<div id="crayon-5c1850f53b11a510640182" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f53b11a510640182-1"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">insertSingleRow</span><span class="crayon-sy">(</span><span class="crayon-s">'MySQL PHP Insert Tutorial'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f53b11a510640182-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'MySQL PHP Insert using prepared statement'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f53b11a510640182-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'2013-01-01'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f53b11a510640182-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'2013-01-02'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Le&#8217;ts check the <code>tasks</code> table:</p>
<p>
<img class="border alignnone wp-image-2858 size-full" title="PHP MySQL Insert Task Prepared Statement Example" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-Insert-Task-Prepared-Statement-Example.png" alt="PHP MySQL Insert Task Prepared Statement Example" width="608" height="62" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-Insert-Task-Prepared-Statement-Example.png 608w, http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-Insert-Task-Prepared-Statement-Example-300x30.png 300w" sizes="(max-width: 608px) 100vw, 608px" /></p>
<h4>PHP MySQL Insert multiple rows into a table example</h4>
<p>There are two ways to insert multiple rows into a table:</p>
<ul>
<li>Execute the <code>insertSingleRow()</code>  method multiple times.
</li>
<li>Construct a MySQL <code>INSERT</code> statement that inserts multiple rows and executes it.
</li>
</ul>
<h3>Download</h3>
<p>You can download the source code of this tutorial via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqlinsert.zip" target="_blank" rel="noopener">Download PHP MySQL Insert Source Code</a></p>
<p>In this tutorial, you have learned how to insert data into a MySQL table using PHP PDO prepared statement.</p>


<h2>Update Data</h2>

<p>
<strong>Summary</strong>: in this tutorial, you will learn how to update data in a MySQL table using PHP PDO prepared statement.</p>
<p>We are going to use the <code>tasks</code> table in the 
<a title="MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx">sample database </a>for practicing. If you have not yet created the <code>tasks </code>table, please follow the 
<a title="PHP MySQL Create Table Tutorial" href="http://www.mysqltutorial.org/php-mysql-create-table/">PHP MySQL create table</a> tutorial to complete it first.</p>
<p>The following picture illustrates the structure of the <code>tasks</code> table.</p>
<p>
<img class="alignnone size-full wp-image-2859" title="PHP MySQL Update : Tasks table" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/tasks-table.png" alt="PHP MySQL Update : Tasks table" width="184" height="184" /></p>
<p>To 
<a href="http://www.mysqltutorial.org/mysql-update-data.aspx">update data in a table</a>, you use the following steps:</p>
<ul>
<li>First, 
<a href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/">connect to the MySQL database</a> by creating a new PDO object.
</li>
<li>Second, construct an 
<a title="MySQL Update data" href="http://www.mysqltutorial.org/mysql-update-data.aspx">UPDATE statement</a> to update data. If you want to pass values to the <code>UPDATE</code> statement, you use the named placeholders such as <code>:name</code>.
</li>
<li>Third, call the <code>execute()</code>  method of the <code>PDOStatement</code> object with an array that contains the corresponding input values of the named placeholders specified in the <code>UPDATE</code> statement.
</li>
</ul>
<h3>update data example</h3>
<h4>PHP MySQL &#8211; update a single row</h4>
<p>Let&#8217;s take a look at the following <code>UpdateDataDemo</code> class.</p>
<div id="crayon-5c1850f800940141430039" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f800940141430039-1"><span class="crayon-o">&lt;</span><span class="crayon-sy">?</span><span class="crayon-e">php</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-3"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-4"><span class="crayon-c"> * PHP MySQL Update data demo</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-5"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-6"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">UpdateDataDemo</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_HOST</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'classicmodels'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_USER</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'root'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_PASSWORD</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * PDO instance</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @var PDO</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-16"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-18">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-20"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Open the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-21"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// open database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">connStr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=%s;dbname=%s"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_HOST</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_NAME</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">connStr</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_USER</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_PASSWORD</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">die</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-31">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-33"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Update an existing task in the tasks table</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-34"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $subject</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-35"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $description</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-36"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $startDate</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-37"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $endDate</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-38"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return bool return true on success or false on failure</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-39"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">subject</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">description</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">startDate</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">endDate</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">task</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':taskid'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">id</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':subject'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">subject</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':description'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">description</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':start_date'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">startDate</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">':end_date'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">endDate</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-47">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-48">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'UPDATE tasks</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-50"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SET subject&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= :subject,</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-51"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; start_date&nbsp;&nbsp;= :start_date,</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-52"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end_date&nbsp;&nbsp;&nbsp;&nbsp;= :end_date,</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-53"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; description = :description</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-54"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE task_id = :taskid'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-55">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-57">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-58"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">task</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-60">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-62"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * close the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-63"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__destruct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-65"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// close the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-66"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-68">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-69"><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-70">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-71"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">UpdateDataDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-72">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-73"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'MySQL PHP Update Tutorial'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-74"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'MySQL PHP Update using prepared statement'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'2013-01-01'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'2013-01-01'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">!==</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">)</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">'The task has been updated successfully'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-78"><span class="crayon-st">else</span></div>
<div class="crayon-line" id="crayon-5c1850f800940141430039-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">'Error updated the task'</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>How the script works.</p>
<ul>
<li>First, connect to the database by creating a new <code>PDO</code> instance in the constructor of the <code>UpdateDataDemo</code> class.
</li>
<li>Second, in the <code> update()</code> method, construct the <code>UPDATE</code> statement with named placeholders.
</li>
<li>Third, use a prepared statement to prepare the <code>UPDATE</code> statement for the execution and execute it with an array argument.
</li>
</ul>
<p>you can update a row with id 2 using the following script:</p>
<div id="crayon-5c1850f80094d799708683" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f80094d799708683-1"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">UpdateDataDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-3"><span class="crayon-st">if</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-4"><span class="crayon-h"> </span><span class="crayon-s">'MySQL PHP Update Tutorial'</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-5"><span class="crayon-h"> </span><span class="crayon-s">'MySQL PHP Update using prepared statement'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-6"><span class="crayon-h"> </span><span class="crayon-s">'2013-01-01'</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-7"><span class="crayon-h"> </span><span class="crayon-s">'2013-01-01'</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">!==</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">)</span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-8"><span class="crayon-h"> </span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">'The task has been updated successfully'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-9"><span class="crayon-st">else</span><span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f80094d799708683-10"><span class="crayon-h"> </span><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-s">'Error updated the task'</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>You can 
<a href="http://www.mysqltutorial.org/mysql-select-statement-query-data.aspx">query data</a> from the <code>tasks</code> table to verify the update:</p>
<div id="crayon-5c1850f800950228748221" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850f800950228748221-1"><span class="crayon-st">SELECT</span><span class="crayon-h"> </span>*<span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850f800950228748221-2"><span class="crayon-st">FROM</span></div>
<div class="crayon-line" id="crayon-5c1850f800950228748221-3"><span class="crayon-h">&nbsp;&nbsp; </span>tasks;</div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="border alignnone wp-image-2869 size-full" title="PHP MySQL update example" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-update-example.png" alt="PHP MySQL update example" width="621" height="63" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-update-example.png 621w, http://www.mysqltutorial.org/wp-content/uploads/2013/01/PHP-MySQL-update-example-300x30.png 300w" sizes="(max-width: 621px) 100vw, 621px" /></p>
<p>You can download the code via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqlupdate.zip" target="_blank" rel="noopener">Download PHP MySQL Update Source Code</a></p>
<h4>PHP MySQL &#8211; update rows in related tables</h4>
<p>There are three ways to update rows in related tables:</p>
<ul>
<li>Use the 
<a title="MySQL UPDATE JOIN" href="http://www.mysqltutorial.org/mysql-update-join/">MySQL UPDATE JOIN</a> statement.
</li>
<li>Use multiple <code>UPDATE</code> statements inside a 
<a title="MySQL Transaction" href="http://www.mysqltutorial.org/mysql-transaction.aspx">transaction</a>.
</li>
</ul>
<p>We will examine the second way in the 
<a href="http://www.mysqltutorial.org/php-mysql-transaction/">PHP MySQL transaction</a> tutorial.</p>
<p>In this tutorial, you have learned how to update data in the MySQL table using the PHP PDO prepared statement.</p>


<h2>Delete Data</h2>

<p>
<strong>Summary</strong>
<em>:
</em> in this tutorial, you will learn how to delete data from MySQL database table by using PHP PDO.</p>
<p>We will use the <code>tasks</code> table in the 
<a title="MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx">sample database</a> for the demonstration. Before going forward with this tutorial, you should follow the 
<a title="PHP MySQL Create Table" href="http://www.mysqltutorial.org/php-mysql-create-table/">PHP MySQL create table tutorial</a> to create the <code>tasks</code> table and 
<a title="PHP MySQL Insert" href="http://www.mysqltutorial.org/php-insert-data-into-mysql-table/">insert sample data</a> for practicing.</p>
<p>See the following tasks table.</p>
<p>
<img class="alignnone size-full wp-image-2859" title="PHP MySQL Delete: Tasks Table" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/tasks-table.png" alt="PHP MySQL Delete: Tasks Table" width="184" height="184" /></p>
<p>To delete data in a table, you use the following steps:</p>
<ul>
<li>
<a title="Connecting to MySQL Database" href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/">Connect to the MySQL database</a> by creating a new instance of the PDO object.
</li>
<li>Construct a 
<a title="MySQL DELETE statement" href="http://www.mysqltutorial.org/mysql-delete-statement.aspx">DELETE statement </a>to delete a row, multiple rows, or all rows in a table. If you want to delete all rows in a big table quickly and more efficiently, you use the 
<a title="MySQL TRUNCATE TABLE" href="http://www.mysqltutorial.org/mysql-truncate-table/">TRUNCATE TABLE</a> statement.
</li>
<li>Execute the <code>DELETE</code> statement by calling the <code>exec()</code>  method of the <code>PDO</code> object or the <code>execute()</code> method of the <code>PDOStatement</code> object.
</li>
</ul>
<h3>PHP MySQL Delete data examples</h3>
<h4>PHP MySQL: delete a single row example</h4>
<p>To delete a single row in a table, you use the <code>DELETE</code> statement with a 
<a title="MySQL WHERE clause" href="http://www.mysqltutorial.org/mysql-where/">WHERE clause</a> that specifies which row to delete.</p>
<p>The following script deletes a row with id 2 in the <code>tasks</code> table.</p>
<div id="crayon-5c1850fa1ab57874030000" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-1"><span class="crayon-o">&lt;</span><span class="crayon-sy">?</span><span class="crayon-e">php</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-3"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-4"><span class="crayon-c"> * PHP MySQL Delete Data Demo</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-5"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-6"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">DeleteDataDemo</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_HOST</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'classicmodels'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_USER</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'root'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-v">DB_PASSWORD</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * PDO instance</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @var PDO </span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-16"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-18">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-20"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Open a database connection to MySQL</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-21"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// open database connection</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">conStr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=%s;dbname=%s"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_HOST</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_NAME</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">conStr</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_USER</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-v">DB_PASSWORD</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">die</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-31">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-33"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Delete a task based on a specified task id</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-34"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $id</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-35"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return bool true on success or false on failure</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-36"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">delete</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">id</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-38">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'DELETE FROM tasks</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-40"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE task_id = :task_id'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-41">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-43">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">':task_id'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">id</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-46">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-48"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * close the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-49"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__destruct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">$</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-53">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-54"><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-55">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-56"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">DeleteDataDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-57"><span class="crayon-c">// delete id 2</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab57874030000-58"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">delete</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>How it works.</p>
<p>In the <code>__construct()</code>  method of the <code>DeleteDataDemo</code> class, we connect to the MySQL database by initiating an instance of the <code>PDO</code> class, and in the <code>__destruct()</code>  method, we close the database connection.</p>
<p>The <code>delete()</code>  method accepts the <code>id</code> as the argument. First, we call the <code>prepare()</code>  method of the <code>PDO</code> object to prepare the <code>DELETE</code> statement for execution, and then we pass an array that contains values corresponding to the named placeholders in the <code>DELETE</code> statement to the <code> execute()</code> method of the <code>PDOStatement</code> object.</p>
<p>To delete the task with id 2, we create an instance of the <code>DeleteDataDemo</code> class and call the <code>delete()</code> method.</p>
<h4>PHP MySQL: delete all rows in a table examples</h4>
<p>There are two ways to delete all rows in a table:</p>
<ul>
<li>Issue a <code>DELETE </code>statement without a 
<a href="http://www.mysqltutorial.org/mysql-where/">WHERE clause</a>.
</li>
<li>Issue a <code>TRUNCATE TABLE</code> statement.
</li>
</ul>
<p>The following <code> deleteAll()</code> method deletes all rows in the <code>tasks</code> table using the <code>DELETE</code> statement:</p>
<div id="crayon-5c1850fa1ab6a325126669" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-1"><span class="crayon-o">&lt;</span><span class="crayon-sy">?</span><span class="crayon-v">php</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-2"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-3"><span class="crayon-c"> * Delete all rows in the tasks table</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-4"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-5"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">deleteAll</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-6"><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'DELETE FROM tasks'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-7"><span class="crayon-h"> </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">exec</span><span class="crayon-sy">(</span><span class="crayon-sy">$</span><span class="crayon-v">sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6a325126669-8"><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>The following <code>truncateTable()</code> method removes all rows in the <code>tasks</code> table as well as resets its 
<a title="Auto increment column" href="http://www.mysqltutorial.org/mysql-sequence/">autoincrement</a> column&#8217;s value:</p>
<div id="crayon-5c1850fa1ab6f222707613" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-2"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-3"><span class="crayon-c"> * Truncate the tasks table</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-4"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-5"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">truncateTable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-6"><span class="crayon-h"> </span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'TRUNCATE TABLE tasks'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-7"><span class="crayon-h"> </span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">exec</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-8">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fa1ab6f222707613-9"><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>You can download the source code of this tutorial via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqldelete.zip" rel="noopener">Download PHP MySQL Delete Source Code</a></p>
<p>In this tutorial, we have shown you how to delete data from MySQL table using PHP PDO.</p>


<h2>Call MySQL Stored Procedures</h2>

<p>
<strong>Summary</strong>
<em>: 
</em>in this tutorial, you will learn how to call MySQL stored procedures using PHP PDO. We will show you how to call stored procedures that return a result set and stored procedures that accept input/output parameters.</p>
<h3>Calling stored procedures that return a result set</h3>
<p>The steps of calling a 
<a title="MySQL Stored Procedure" href="http://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx">MySQL stored procedure</a> that returns a result set using PHP PDO are similar to 
<a title="PHP Querying Data from MySQL Database" href="http://www.mysqltutorial.org/php-querying-data-from-mysql-table/">querying data from MySQL database table using the SELECT statement</a>. Instead of sending a <code>SELECT</code> statement to MySQL database, you send a stored procedure call statement.</p>
<p>First, create a stored procedure named <code>GetCustomers()</code>  in the 
<a title="MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx">sample database</a> for the demonstration. The <code>GetCustomers()</code> 
<em> 
</em>stored procedure  retrieves the <code>name</code> and <code>credit limit</code>  of customers from the <code>customers</code> table.</p>
<p>The following <code>GetCustomers()</code> stored procedure illustrates the logic:</p>
<div id="crayon-5c1850fc587d5356269169" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fc587d5356269169-1"><span class="crayon-st">DELIMITER</span><span class="crayon-h"> </span>$$</div>
<div class="crayon-line" id="crayon-5c1850fc587d5356269169-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc587d5356269169-3"><span class="crayon-st">CREATE</span><span class="crayon-h"> </span><span class="crayon-st">PROCEDURE</span><span class="crayon-h"> </span>GetCustomers()</div>
<div class="crayon-line" id="crayon-5c1850fc587d5356269169-4"><span class="crayon-st">BEGIN</span></div>
<div class="crayon-line" id="crayon-5c1850fc587d5356269169-5"><span class="crayon-h"> </span><span class="crayon-st">SELECT</span><span class="crayon-h"> </span>customerName,<span class="crayon-h"> </span>creditlimit</div>
<div class="crayon-line" id="crayon-5c1850fc587d5356269169-6"><span class="crayon-h"> </span><span class="crayon-st">FROM</span><span class="crayon-h"> </span>customers;</div>
<div class="crayon-line" id="crayon-5c1850fc587d5356269169-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">END</span>$$</div></div>
</td>
</tr>
</table></div></div>
<p>Second, create a new PHP file named  <code>phpmysqlstoredprocedure1.php</code> 
<em> 
</em>with the following code
<em>:
</em></p>
<div id="crayon-5c1850fc587eb727788606" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-1"><span class="crayon-n">&lt;!DOCTYPE html&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-2"><span class="crayon-r ">&lt;html&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-3"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;head&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-4"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;title&gt;</span><span class="crayon-i ">PHP MySQL Stored Procedure Demo 1</span><span class="crayon-r ">&lt;/title&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-5"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;link </span><span class="crayon-e ">rel</span><span class="crayon-o">=</span><span class="crayon-s ">"stylesheet"</span><span class="crayon-h"> </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"css/table.css"</span><span class="crayon-h"> </span><span class="crayon-e ">type</span><span class="crayon-o">=</span><span class="crayon-s ">"text/css"</span><span class="crayon-r "> /&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-6"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/head&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-7"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;body&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-8"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">require_once</span><span class="crayon-h"> </span><span class="crayon-s">'dbconfig.php'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=$host;dbname=$dbname"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$username</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// execute the stored procedure</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CALL GetCustomers()'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// call the stored procedure</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">setFetchMode</span><span class="crayon-sy">(</span><span class="crayon-e">PDO::</span><span class="crayon-cn">FETCH_ASSOC</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-s">"Error occurred:"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-ta">?&gt;</span></span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-21"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;table&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-22"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;tr&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-23"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;th&gt;</span><span class="crayon-i ">Customer Name</span><span class="crayon-r ">&lt;/th&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-24"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;th&gt;</span><span class="crayon-i ">Credit Limit</span><span class="crayon-r ">&lt;/th&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-25"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/tr&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-26"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">$r</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$q</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span></span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-27"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;tr&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-28"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;td&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-v">$r</span><span class="crayon-sy">[</span><span class="crayon-s">'customerName'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span><span class="crayon-r ">&lt;/td&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-29"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;td&gt;</span><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-s">'$'</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">number_format</span><span class="crayon-sy">(</span><span class="crayon-v">$r</span><span class="crayon-sy">[</span><span class="crayon-s">'creditlimit'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/td&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-31"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/tr&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-32"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-st">endwhile</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-ta">?&gt;</span></span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-33"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/table&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-34"><span class="crayon-i ">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r ">&lt;/body&gt;</span></div>
<div class="crayon-line" id="crayon-5c1850fc587eb727788606-35"><span class="crayon-r ">&lt;/html&gt;</span></div></div>
</td>
</tr>
</table></div></div>
<p>Everything is straightforward except the SQL query:</p>
<div id="crayon-5c1850fc587f4465537021" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fc587f4465537021-1"><span class="crayon-st">CALL</span><span class="crayon-h"> </span>GetCustomers();</div></div>
</td>
</tr>
</table></div></div>
<p>We send the statement that calls the  <code>GetCustomers()</code> 
<em> 
</em>stored procedure to MySQL. And we execute the statement to get a result set.</p>
<p>Third, test the script in the web browser to see how it works.</p>
<p>
<img class="alignnone size-full wp-image-1376" title="php mysql stored procedure" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-stored-procedure.png" alt="php mysql stored procedure" width="474" height="407" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-stored-procedure.png 474w, http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-stored-procedure-300x257.png 300w" sizes="(max-width: 474px) 100vw, 474px" /></p>
<p>You can download the script via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqlstoredprocedure.zip" target="_blank" rel="noopener">Download PHP MySQL Stored Procedure Source Code</a></p>
<h3>Calling stored procedures with an OUT parameter</h3>
<p>It is a little bit tricky to call a stored procedure with the <code>OUT</code> parameter. We will use the <code>GetCustomerLevel()</code>  stored procedure that accepts a customer number as an input parameter and returns the customer level based on credit limit.</p>
<p>Check the 
<a title="MySQL IF Statement" href="http://www.mysqltutorial.org/mysql-if-statement/">MySQL IF statement tutorial</a> for detailed information on the <code>GetCustomerLevel()</code>  stored procedure.</p>
<div id="crayon-5c1850fc58808267850671" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fc58808267850671-1"><span class="crayon-st">DELIMITER</span><span class="crayon-h"> </span>$$</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-3"><span class="crayon-st">CREATE</span><span class="crayon-h"> </span><span class="crayon-st">PROCEDURE</span><span class="crayon-h"> </span>GetCustomerLevel(</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">in</span><span class="crayon-h">&nbsp;&nbsp;</span>p_customerNumber<span class="crayon-h"> </span><span class="crayon-t">int</span>(11),<span class="crayon-h"> </span></div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">out</span><span class="crayon-h"> </span>p_customerLevel<span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-t">varchar</span>(10))</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-6"><span class="crayon-st">BEGIN</span></div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">DECLARE</span><span class="crayon-h"> </span>creditlim<span class="crayon-h"> </span><span class="crayon-t">double</span>;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-8">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">SELECT</span><span class="crayon-h"> </span>creditlimit<span class="crayon-h"> </span><span class="crayon-st">INTO</span><span class="crayon-h"> </span>creditlim</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">FROM</span><span class="crayon-h"> </span>customers</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">WHERE</span><span class="crayon-h"> </span>customerNumber<span class="crayon-h"> </span>=<span class="crayon-h"> </span>p_customerNumber;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">IF</span><span class="crayon-h"> </span>creditlim<span class="crayon-h"> </span><span class="crayon-h">&gt;</span><span class="crayon-h"> </span>50000<span class="crayon-h"> </span><span class="crayon-st">THEN</span></div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">SET</span><span class="crayon-h"> </span>p_customerLevel<span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-s">'PLATINUM'</span>;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">ELSEIF</span><span class="crayon-h"> </span>(creditlim<span class="crayon-h"> </span><span class="crayon-h">&lt;</span>=<span class="crayon-h"> </span>50000<span class="crayon-h"> </span><span class="crayon-r">AND</span><span class="crayon-h"> </span>creditlim<span class="crayon-h"> </span><span class="crayon-h">&gt;</span>=<span class="crayon-h"> </span>10000)<span class="crayon-h"> </span><span class="crayon-st">THEN</span></div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">SET</span><span class="crayon-h"> </span>p_customerLevel<span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-s">'GOLD'</span>;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">ELSEIF</span><span class="crayon-h"> </span>creditlim<span class="crayon-h"> </span><span class="crayon-h">&lt;</span><span class="crayon-h"> </span>10000<span class="crayon-h"> </span><span class="crayon-st">THEN</span></div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">SET</span><span class="crayon-h"> </span>p_customerLevel<span class="crayon-h"> </span>=<span class="crayon-h"> </span><span class="crayon-s">'SILVER'</span>;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">END IF</span>;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-20">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58808267850671-21"><span class="crayon-st">END</span>$$</div></div>
</td>
</tr>
</table></div></div>
<p>In MySQL, we can call the <code>GetCustomerLevel()</code>  stored procedure as follows:</p>
<div id="crayon-5c1850fc5880e776822120" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fc5880e776822120-1"><span class="crayon-st">CALL</span><span class="crayon-h"> </span>GetCustomerLevel(103,@level);</div>
<div class="crayon-line" id="crayon-5c1850fc5880e776822120-2"><span class="crayon-st">SELECT</span><span class="crayon-h"> </span>@level<span class="crayon-h"> </span><span class="crayon-st">AS</span><span class="crayon-h"> </span>level;</div></div>
</td>
</tr>
</table></div></div>
<p>In PHP, we have to emulate those statements:</p>
<ul>
<li>First, we need to execute the <code>GetCustomerLevel()</code>  stored procedure.
</li>
<li>Second, to get the customer level, we need to query it from the variable <code>@level</code> . It is important that we must call the method <code>closeCursor()</code>  of the <code>PDOStatement</code>  object in order to execute the next SQL statement.
</li>
</ul>
<p>Let&#8217;s take a look at how the logic is implemented in the following PHP script:</p>
<div id="crayon-5c1850fc58811092004501" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850fc58811092004501-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-3"><span class="crayon-k ">require_once</span><span class="crayon-h"> </span><span class="crayon-s">'dbconfig.php'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-4">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-5"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-6"><span class="crayon-c"> * Get customer level</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-7"><span class="crayon-c"> * @param int $customerNumber</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-8"><span class="crayon-c"> * @return string</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-9"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-10"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">getCustomerLevel</span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">$customerNumber</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=$host;dbname=$dbname"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$username</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$password</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-13">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// calling stored procedure command</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'CALL GetCustomerLevel(:id,@level)'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-16">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// prepare for execution of the stored procedure</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-19">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// pass value to the command</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindParam</span><span class="crayon-sy">(</span><span class="crayon-s">':id'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$customerNumber</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">PDO::</span><span class="crayon-cn">PARAM_INT</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-22">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// execute the stored procedure</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-25">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">closeCursor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-27">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-28"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// execute the second query to get customer's level</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$row</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-s">"SELECT @level AS level"</span><span class="crayon-sy">)</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-e">PDO::</span><span class="crayon-cn">FETCH_ASSOC</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">$row</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$row</span><span class="crayon-h"> </span><span class="crayon-o">!==</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-h"> </span><span class="crayon-sy">?</span><span class="crayon-h"> </span><span class="crayon-v">$row</span><span class="crayon-sy">[</span><span class="crayon-s">'level'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-s">"Error occurred:"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-37"><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-38">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-39"><span class="crayon-v">$customerNo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">103</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850fc58811092004501-40"><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">'Customer #%d is %s'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$customerNo</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">getCustomerLevel</span><span class="crayon-sy">(</span><span class="crayon-v">$customerNo</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>If you test the script in the web browser, you will see the following screenshot:</p>
<p>
<img class="alignnone size-full wp-image-1378" src="http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-stored-procedure-OUT-parameter.png" alt="php mysql stored procedure OUT parameter" width="483" height="157" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-stored-procedure-OUT-parameter.png 483w, http://www.mysqltutorial.org/wp-content/uploads/2013/01/php-mysql-stored-procedure-OUT-parameter-300x97.png 300w" sizes="(max-width: 483px) 100vw, 483px" /></p>
<p>You can download the script via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqlstoredprocedureoutparam.zip" target="_blank" rel="noopener">Download PHP MySQL Stored Procedure with the OUT Parameter Source Code</a></p>
<p>In this tutorial, you have learned how to call MySQL stored procedures using PHP PDO.</p>


<h2>PHP MySQL Transaction</h2>

<p>
<strong>Summary</strong>: in this tutorial, you will learn how to handle MySQL transaction in PHP to ensure data integrity of the database.</p>
<p>
<img class="size-full wp-image-2902 alignright" title="PHP MySQL Transaction" src="http://www.mysqltutorial.org/wp-content/uploads/2013/06/PHP-MySQL-Transaction.gif" alt="PHP MySQL Transaction" width="195" height="144" />A 
<a href="http://www.mysqltutorial.org/mysql-transaction.aspx">transaction</a> is a set of inter-dependent SQL statements that needs to execute in all-or-nothing mode. A transaction is successful if all SQL statements executed successfully. A failure of any statement will trigger the system to rollback to the original state to avoid data inconsistency.</p>
<p>A classic example of the transaction is a money transfer transaction from one bank account to another. It requires three steps:</p>
<ul>
<li>Check the balance of the transferred account to see if the amount is sufficient for the transfer.
</li>
<li>If the amount is sufficient, deduct the amount from the balance of the transferred account.
</li>
<li>Add the transfer amount to the balance of the receiving account.
</li>
</ul>
<p>If an error occurs in the second step, the third step should not continue. In addition, if an error occurs in the third step, the second step must be reversed. The amounts of both bank accounts are intact in case of failure or adjusted correctly if the transaction is completed successfully.</p>
<h3>MySQL transaction in PHP</h3>
<p>When you use PDO to 
<a title="PHP MySQL Connect" href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/">create a connection to the database</a> that supports the transaction, the auto-commit mode is set. It means that every query you issue is wrapped inside an implicit transaction.</p>
<p>Notice that not all 
<a title="MySQL Storage Engines" href="http://www.mysqltutorial.org/understand-mysql-table-types-innodb-myisam.aspx">storage engines</a> in MySQL support transaction e.g., MyISAM does not support the transaction, however, InnoDB does.</p>
<p>To handle MySQL transaction in PHP, you use the following steps:</p>
<ol>
<li>Start the transaction by calling the <code>beginTransaction()</code> method of the PDO object.
</li>
<li>Place the SQL statements and the  <code>commit()</code> method call in a <code>try</code> block.
</li>
<li>Rollback the transaction in the <code>catch</code> block by calling the <code>rollBack()</code> method of the PDO object.
</li>
</ol>
<h3>PHP MySQL transaction example</h3>
<p>We will 
<a title="MySQLCreate Table" href="http://www.mysqltutorial.org/mysql-create-table/">create a table</a> named <code>accounts</code> to demonstrate the money transfer between two bank accounts.</p>
<p>First, execute the following statement to create the <code>accounts</code> table:</p>
<div id="crayon-5c184c0f7cce4086423431" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7cce4086423431-1"><span class="crayon-st">CREATE</span><span class="crayon-h"> </span><span class="crayon-st">TABLE</span><span class="crayon-h"> </span>accounts<span class="crayon-h"> </span>(</div>
<div class="crayon-line" id="crayon-5c184c0f7cce4086423431-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>id<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-t">INT</span><span class="crayon-h"> </span><span class="crayon-st">AUTO_INCREMENT</span><span class="crayon-h"> </span><span class="crayon-st">PRIMARY KEY</span>,</div>
<div class="crayon-line" id="crayon-5c184c0f7cce4086423431-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>name<span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-t">VARCHAR</span><span class="crayon-h"> </span>(50)<span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">NOT NULL</span>,</div>
<div class="crayon-line" id="crayon-5c184c0f7cce4086423431-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>amount<span class="crayon-h"> </span><span class="crayon-st">DECIMAL</span><span class="crayon-h"> </span>(19,<span class="crayon-h"> </span>4)<span class="crayon-h"> </span><span class="crayon-st">NOT NULL</span></div>
<div class="crayon-line" id="crayon-5c184c0f7cce4086423431-5">);</div></div>
</td>
</tr>
</table></div></div>
<p>Second, 
<a title="MySQL INSERT statement" href="http://www.mysqltutorial.org/mysql-insert-statement.aspx">insert </a>two rows into the <code>accounts</code> table:</p>
<div id="crayon-5c184c0f7ccf6172234042" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7ccf6172234042-1"><span class="crayon-st">INSERT</span><span class="crayon-h"> </span><span class="crayon-st">INTO</span><span class="crayon-h"> </span>accounts(name,amount)</div>
<div class="crayon-line" id="crayon-5c184c0f7ccf6172234042-2"><span class="crayon-st">VALUES</span>(<span class="crayon-s">'John'</span>,25000),</div>
<div class="crayon-line" id="crayon-5c184c0f7ccf6172234042-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>(<span class="crayon-s">'Mary'</span>,95000);</div></div>
</td>
</tr>
</table></div></div>
<p>Third, 
<a title="MySQL query data" href="http://www.mysqltutorial.org/mysql-select-statement-query-data.aspx">query </a>the <code>accounts</code> table:</p>
<div id="crayon-5c184c0f7ccf9473364397" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7ccf9473364397-1"><span class="crayon-cn">SELECT</span><span class="crayon-h"> </span><span class="crayon-o">*</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccf9473364397-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-e">FROM </span><span class="crayon-i">accounts</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="border alignnone wp-image-2899 size-full" title="PHP MySQL Transaction example" src="http://www.mysqltutorial.org/wp-content/uploads/2013/06/PHP-MySQL-Transaction-example.png" alt="PHP MySQL Transaction example" width="189" height="62" /></p>
<p>Let&#8217;s take a look at the following <code>TransactionDemo</code> class:</p>
<div id="crayon-5c184c0f7ccfc518006385" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-3"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-4"><span class="crayon-c"> * PHP MySQL Transaction Demo</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-5"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-6"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">TransactionDemo</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_HOST</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'classicmodels'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_USER</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'root'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Open the database connection</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// open database connection</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$conStr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=%s;dbname=%s"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_HOST</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_NAME</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-v">$conStr</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_USER</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-25">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-27"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * PDO instance</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-28"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @var PDO </span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-29"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">private</span><span class="crayon-h"> </span><span class="crayon-v">$pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-31">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-33"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Transfer money between two accounts</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-34"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $from</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-35"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $to</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-36"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param float $amount</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-37"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return true on success or false on failure.</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-38"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">transfer</span><span class="crayon-sy">(</span><span class="crayon-v">$from</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$to</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$amount</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-40">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">beginTransaction</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-43">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// get available amount of the transferer account</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-45"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'SELECT amount FROM accounts WHERE id=:from'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">":from"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$from</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$availableAmount</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetchColumn</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">closeCursor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-50">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">$availableAmount</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">$amount</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-s">'Insufficient amount to transfer'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-53"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-t">false</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-54"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-55"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// deduct from the transferred account</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-56"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql_update_from</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'UPDATE accounts</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-57"><span class="crayon-s"> SET amount = amount - :amount</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-58"><span class="crayon-s"> WHERE id = :from'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-59"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql_update_from</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-60"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">":from"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$from</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">":amount"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$amount</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-61"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">closeCursor</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-62">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-63"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// add to the receiving account</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-64"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql_update_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'UPDATE accounts</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-65"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SET amount = amount + :amount</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-66"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE id = :to'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-67"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql_update_to</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-68"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">":to"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$to</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">":amount"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$amount</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-69">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-70"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// commit the transaction</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-71"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">commit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-72">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-73"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-s">'The amount has been transferred successfully'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-74">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-75"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-t">true</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-76"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-77"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">rollBack</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-78"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">die</span><span class="crayon-sy">(</span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-79"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-80"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-81">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-82"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-83"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * close the database connection</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-84"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-85"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__destruct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-86"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// close the database connection</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-87"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-88"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-89">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-90"><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-91">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-92"><span class="crayon-c">// test the transfer method</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-93"><span class="crayon-v">$obj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">TransactionDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-94">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-95"><span class="crayon-c">// transfer 30K from from account 1 to 2</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-96"><span class="crayon-v">$obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">transfer</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">30000</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-97">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-98">&nbsp;</div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-99"><span class="crayon-c">// transfer 5K from from account 1 to 2</span></div>
<div class="crayon-line" id="crayon-5c184c0f7ccfc518006385-100"><span class="crayon-v">$obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">transfer</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p><span style="line-height: 13px;">We 
<a title="PHP Connecting to MySQL Database" href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/">open a database connection</a> in the <code> __construct()</code> method and close it in the <code>__destruct()</code> method. </span>In the <code>transfer()</code> method:</p>
<ul>
<li><span style="line-height: 13px;">First, we query <code>amount</code> of the transferred account and compare it with the transfer amount to check if the balance of the transferred account is sufficient.</span>
</li>
<li>Second, in case the amount is sufficient, we deduct the transfer amount from the transferred account and add it to the receiving account.
</li>
<li>Third, we commit the transaction by calling the <code>commit()</code> method. If any error occurs, we call the <code>rollBack()</code> method in the <code>catch</code> block to rollback the transaction.
</li>
</ul>
<p>Let&#8217;s test the <code>transfer()</code> method.</p>
<div id="crayon-5c184c0f7cd01405118606" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7cd01405118606-1"><span class="crayon-c">// transfer 30K from from account 1 to 2</span></div>
<div class="crayon-line" id="crayon-5c184c0f7cd01405118606-2"><span class="crayon-sy">$</span><span class="crayon-v">obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">transfer</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">30000</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>We transferred 30K from John&#8217;s account to Mary&#8217;s. We got the following message:</p>
<div id="crayon-5c184c0f7cd11979205152" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7cd11979205152-1">Insufficient<span class="crayon-h"> </span>amount<span class="crayon-h"> </span>to<span class="crayon-h"> </span>transfer</div></div>
</td>
</tr>
</table></div></div>
<p>Let&#8217;s make another transfer:</p>
<div id="crayon-5c184c0f7cd14236771874" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7cd14236771874-1"><span class="crayon-c">// transfer 5K from from account 1 to 2</span></div>
<div class="crayon-line" id="crayon-5c184c0f7cd14236771874-2"><span class="crayon-v">$obj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">transfer</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5000</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>The script returns the following message:</p>
<div id="crayon-5c184c0f7cd1a675479909" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c184c0f7cd1a675479909-1">The<span class="crayon-h"> </span>amount<span class="crayon-h"> </span>has<span class="crayon-h"> </span>been<span class="crayon-h"> </span>transferred<span class="crayon-h"> </span>successfully<span class="crayon-sy">.</span></div></div>
</td>
</tr>
</table></div></div>
<p>We have transferred money between two bank accounts successfully.</p>
<p>You can download the source code via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqltransaction.zip" target="_blank" rel="noopener">Download PHP MySQL Transaction Source Code</a></p>
<p>In this tutorial, we have shown you step by step how to handle MySQL transactions in PHP to ensure data integrity.</p>


<h2>PHP MySQL BLOB</h2>

<p>
<strong>Summary</strong>: in this tutorial, you will learn how to handle BLOB data using PHP PDO. We will show you how to insert, update and select BLOB data in MySQL databases.</p>
<p>
Sometimes, for the security reasons, you may need to store large data objects e.g., images, PDF files, and videos in the MySQL database.</p>
<p>MySQL provides a BLOB type that can hold a large amount of data. BLOB stands for the binary large data object. The maximum value of a BLOB object is specified by the available memory and the communication package size. You can change the communication package size by using the  <code>max_allowed_packet</code> variable in MySQL and  <code>post_max_size</code> in the PHP settings.</p>
<p>Let&#8217;s see how PHP PDO handles the BLOB type in MySQL.</p>
<p>First, we 
<a href="http://www.mysqltutorial.org/mysql-create-table/">create a new table</a> named <code>files</code> in the 
<a title="MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx">sample database</a> for practicing.</p>
<p>The <code>files</code> table contains three columns:</p>
<ul>
<li>The id column is the 
<a href="http://www.mysqltutorial.org/mysql-primary-key/">primary key</a>, 
<a href="http://www.mysqltutorial.org/mysql-sequence/">auto-increment</a> column.
</li>
<li>The mime column stores the mime type of the file.
</li>
<li>The data column whose data type is the BLOB that is used to store the content of the file.
</li>
</ul>
<p>The following 
<a href="http://www.mysqltutorial.org/mysql-create-table/">CREATE TABLE</a> statement creates the <code>files</code> table:</p>
<div id="crayon-5c1850a2465c4503061137" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465c4503061137-1"><span class="crayon-st">CREATE</span><span class="crayon-h"> </span><span class="crayon-st">TABLE</span><span class="crayon-h"> </span>files<span class="crayon-h"> </span>(</div>
<div class="crayon-line" id="crayon-5c1850a2465c4503061137-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>id<span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-t">INT</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-st">AUTO_INCREMENT</span><span class="crayon-h"> </span><span class="crayon-st">PRIMARY KEY</span>,</div>
<div class="crayon-line" id="crayon-5c1850a2465c4503061137-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>mime<span class="crayon-h"> </span><span class="crayon-t">VARCHAR</span><span class="crayon-h"> </span>(255)<span class="crayon-h"> </span><span class="crayon-st">NOT NULL</span>,</div>
<div class="crayon-line" id="crayon-5c1850a2465c4503061137-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span>data<span class="crayon-h"> </span><span class="crayon-t">BLOB</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">NOT NULL</span></div>
<div class="crayon-line" id="crayon-5c1850a2465c4503061137-5">);</div></div>
</td>
</tr>
</table></div></div>
<p>Second, we define a class called <code>BlobDemo</code> with the following code:</p>
<div id="crayon-5c1850a2465d3551689797" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-1"><span class="crayon-ta">&lt;?php</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-3"><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-4"><span class="crayon-c"> * PHP MySQL BLOB Demo</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-5"><span class="crayon-c"> */</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-6"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">BobDemo</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_HOST</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'classicmodels'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_USER</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'root'</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * Open the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// open database connection</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$conStr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">sprintf</span><span class="crayon-sy">(</span><span class="crayon-s">"mysql:host=%s;dbname=%s;charset=utf8"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_HOST</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_NAME</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-19">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">try</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">PDO</span><span class="crayon-sy">(</span><span class="crayon-v">$conStr</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_USER</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-o">::</span><span class="crayon-cn">DB_PASSWORD</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//for prior PHP 5.3.6</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//$conn-&gt;exec("set names utf8");</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">catch</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">PDOException</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-v">$e</span><span class="crayon-o">-&gt;</span><span class="crayon-e">getMessage</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-26"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-28">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-30"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * close the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-31"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-32"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__destruct</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// close the database connection</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">null</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-36">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d3551689797-37"><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>In the <code> __construct()</code> method, we 
<a href="http://www.mysqltutorial.org/php-connecting-to-mysql-database/">open a database connection to the MySQL database</a>, and in the  <code>__destruct()</code> method, we close the connection.</p>
<h3>Insert BLOB data into the database</h3>
<p>PHP PDO provides a convenient way to work with BLOB data using the streams and prepare statements. To insert the content of a file into a BLOB column, you follow the steps below:</p>
<ul>
<li>First, open the file for reading in binary mode.
</li>
<li>Second, construct an 
<a title="MySQL INSERT" href="http://www.mysqltutorial.org/mysql-insert-statement.aspx">INSERT statement</a>.
</li>
<li>Third, bind the file handle to the prepared statement using the  <code>bindParam()</code> method and call the  <code>execute()</code> method to execute the query.
</li>
</ul>
<p>See the following  <code>insertBlob()</code> method:</p>
<div id="crayon-5c1850a2465d6699898750" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-1"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-2"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * insert blob into the files table</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $filePath</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-4"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $mime mimetype</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-5"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return bool</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-6"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">insertBlob</span><span class="crayon-sy">(</span><span class="crayon-v">$filePath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$mime</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">fopen</span><span class="crayon-sy">(</span><span class="crayon-v">$filePath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'rb'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-9">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"INSERT INTO files(mime,data) VALUES(:mime,:data)"</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindParam</span><span class="crayon-sy">(</span><span class="crayon-s">':mime'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$mime</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindParam</span><span class="crayon-sy">(</span><span class="crayon-s">':data'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$blob</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">PDO::</span><span class="crayon-cn">PARAM_LOB</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-15">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d6699898750-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p>Notice that the <code>PDO::PARAM_LOB</code> instructs PDO to map the data as a stream.</p>
<h3>Update an existing BLOB column</h3>
<p>To update a BLOB column, you use the same technique as described in the inserting data into a BLOB column. See the following  <code>updateBlob()</code> method:</p>
<div id="crayon-5c1850a2465d9865318127" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-1"><span class="crayon-h">&nbsp;&nbsp; </span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-2"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * update the files table with the new blob from the file specified</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * by the filepath</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-4"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $id</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-5"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $filePath</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-6"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param string $mime</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-7"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return bool</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-8"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">updateBlob</span><span class="crayon-sy">(</span><span class="crayon-v">$id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$filePath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$mime</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-10">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$blob</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">fopen</span><span class="crayon-sy">(</span><span class="crayon-v">$filePath</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'rb'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"UPDATE files</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-14"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SET mime = :mime,</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-15"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data = :data</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-16"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE id = :id;"</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-17">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-19">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindParam</span><span class="crayon-sy">(</span><span class="crayon-s">':mime'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$mime</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindParam</span><span class="crayon-sy">(</span><span class="crayon-s">':data'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$blob</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">PDO::</span><span class="crayon-cn">PARAM_LOB</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindParam</span><span class="crayon-sy">(</span><span class="crayon-s">':id'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$id</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-23">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465d9865318127-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p></p>
<h3>Query data from BLOB column</h3>
<p>The following steps describe how to select data from a BLOB column:</p>
<ul>
<li>First, construct a 
<a title="MySQL SELECT statement" href="http://www.mysqltutorial.org/mysql-select-statement-query-data.aspx">SELECT statement</a>.
</li>
<li>Second, bind the corresponding parameter using the  <code>bindColumn()</code> method of the <code>PDOStatement</code> object.
</li>
<li>Third, execute the statement.
</li>
</ul>
<p>See the following  <code>selectBlob()</code> method:</p>
<div id="crayon-5c1850a2465db690151221" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465db690151221-1"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/**</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-2"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * select data from the the files</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-3"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @param int $id</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-4"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; * @return array contains mime type and BLOB data</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-5"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp; */</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">selectBlob</span><span class="crayon-sy">(</span><span class="crayon-v">$id</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-7">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$sql</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"SELECT mime,</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-9"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-10"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM files</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-11"><span class="crayon-s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WHERE id = :id;"</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-12">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">pdo</span><span class="crayon-o">-&gt;</span><span class="crayon-e">prepare</span><span class="crayon-sy">(</span><span class="crayon-v">$sql</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">":id"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$id</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindColumn</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$mime</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">bindColumn</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$data</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">PDO::</span><span class="crayon-cn">PARAM_LOB</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-17">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$stmt</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fetch</span><span class="crayon-sy">(</span><span class="crayon-e">PDO::</span><span class="crayon-cn">FETCH_BOUND</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-19">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">"mime"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$mime</span><span class="crayon-sy">,</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">"data"</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$data</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465db690151221-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div></div>
</td>
</tr>
</table></div></div>
<p></p>
<h3>PHP MySQL BLOB examples</h3>
<p>In the following examples, we will use the <code>BlobDemo</code> class to save a GIF image and a PDF file into the BLOB column of the <code>files</code> table.</p>
<h4>PHP MySQL BLOB with image files</h4>
<p>First, we insert binary data from the <code>images/php-mysql-blob.gif</code> file into the BLOB column of the <code>files</code> table as follows:</p>
<div id="crayon-5c1850a2465dd454084169" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465dd454084169-1"><span class="crayon-v">$blobObj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">BlobDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465dd454084169-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465dd454084169-3"><span class="crayon-c">// test insert gif image</span></div>
<div class="crayon-line" id="crayon-5c1850a2465dd454084169-4"><span class="crayon-v">$blobObj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">insertBlob</span><span class="crayon-sy">(</span><span class="crayon-s">'images/php-mysql-blob.gif'</span><span class="crayon-sy">,</span><span class="crayon-s">"image/gif"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="alignnone size-full wp-image-2909" title="php mysql blob gif example" src="http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-gif-example.png" alt="php mysql blob gif example" width="169" height="41" /></p>
<p>Then, we can select the BLOB data and display it as a GIF image:</p>
<div id="crayon-5c1850a2465df551383531" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465df551383531-1"><span class="crayon-v">$a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$blobObj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">selectBlob</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465df551383531-2"><span class="crayon-e">header</span><span class="crayon-sy">(</span><span class="crayon-s">"Content-Type:"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$a</span><span class="crayon-sy">[</span><span class="crayon-s">'mime'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465df551383531-3"><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-v">$a</span><span class="crayon-sy">[</span><span class="crayon-s">'data'</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="alignnone size-full wp-image-2910" title="php mysql blob render gif image" src="http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-render-gif-image.png" alt="php mysql blob render gif image" width="397" height="211" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-render-gif-image.png 397w, http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-render-gif-image-300x159.png 300w" sizes="(max-width: 397px) 100vw, 397px" /></p>
<h4>PHP MySQL BLOB with PDF files</h4>
<p>The following code inserts the content of the  <code>pdf/php-mysql-blob.pdf</code> PDF file into the BLOB column:</p>
<div id="crayon-5c1850a2465e1066397897" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465e1066397897-1"><span class="crayon-v">$blobObj</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">BlobDemo</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465e1066397897-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465e1066397897-3"><span class="crayon-c">// test insert pdf</span></div>
<div class="crayon-line" id="crayon-5c1850a2465e1066397897-4"><span class="crayon-v">$blobObj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">insertBlob</span><span class="crayon-sy">(</span><span class="crayon-s">'pdf/php-mysql-blob.pdf'</span><span class="crayon-sy">,</span><span class="crayon-s">"application/pdf"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="alignnone size-full wp-image-2911" title="php mysql blob pdf example" src="http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-pdf-example.png" alt="php mysql blob pdf example" width="196" height="61" /></p>
<p>Then, we can select the PDF data and render it in the web browser as follows:</p>
<div id="crayon-5c1850a2465e8364489559" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465e8364489559-1"><span class="crayon-v">$a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$blobObj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">selectBlob</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465e8364489559-2"><span class="crayon-e">header</span><span class="crayon-sy">(</span><span class="crayon-s">"Content-Type:"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$a</span><span class="crayon-sy">[</span><span class="crayon-s">'mime'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465e8364489559-3"><span class="crayon-k ">echo</span><span class="crayon-h"> </span><span class="crayon-v">$a</span><span class="crayon-sy">[</span><span class="crayon-s">'data'</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>
<img class="alignnone size-full wp-image-2912" title="php mysql blob render PDF" src="http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-render-PDF.png" alt="php mysql blob render PDF" width="442" height="236" srcset="http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-render-PDF.png 442w, http://www.mysqltutorial.org/wp-content/uploads/2013/06/php-mysql-blob-render-PDF-300x160.png 300w" sizes="(max-width: 442px) 100vw, 442px" /></p>
<p>To replace the PDF file with the GIF image file, you use the  <code>updateBlob()</code> method as follows:</p>
<div id="crayon-5c1850a2465ea394179826" class="crayon-syntax crayon-theme-coy-copied crayon-font-liberation-mono crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 12px; margin-bottom: 12px; font-size: 22px !important; line-height: 22px !important;">
<div class="crayon-main" style="">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content" style="font-size: 22px !important; line-height: 22px !important;">
</td>
<td class="crayon-code">
<div class="crayon-pre" style="font-size: 22px !important; line-height: 22px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;">
<div class="crayon-line" id="crayon-5c1850a2465ea394179826-1"><span class="crayon-sy">$</span><span class="crayon-v">blobObj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">updateBlob</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'images/php-mysql-blob.gif'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"image/gif"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465ea394179826-2">&nbsp;</div>
<div class="crayon-line" id="crayon-5c1850a2465ea394179826-3"><span class="crayon-sy">$</span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">blobObj</span><span class="crayon-o">-&gt;</span><span class="crayon-e">selectBlob</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465ea394179826-4"><span class="crayon-e">header</span><span class="crayon-sy">(</span><span class="crayon-s">"Content-Type:"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">a</span><span class="crayon-sy">[</span><span class="crayon-s">'mime'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div>
<div class="crayon-line" id="crayon-5c1850a2465ea394179826-5"><span class="crayon-i">echo</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-v">a</span><span class="crayon-sy">[</span><span class="crayon-s">'data'</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></div></div>
</td>
</tr>
</table></div></div>
<p>You can download the source code of this tutorial via the following link:</p>
<p>
<a class="buttonDownload" href="http://www.mysqltutorial.org/wp-content/uploads/2018/03/phpmysqlblob.zip" target="_blank" rel="noopener">Download PHP MySQL BLOB Source Code</a></p>
<p>In this tutorial, we have shown you how to manage MySQL BLOB data including inserting, updating, and querying blob.</p>
<div class="helpful-block-content wth_thumbs" data-title="">
<ul>
<li><span class="wth_title">Was this tutorial helpful ?</span>
</li>
<li>
<a data-post="2905" data-post-url="http://www.mysqltutorial.org/php-mysql-blob/" data-post-title="PHP MySQL BLOB" data-response="1" href="#" class="wth-green-btn icon-thumbs-up">Yes</a>&nbsp; &nbsp;
<a data-response="0" data-post="2905" data-post-url="http://www.mysqltutorial.org/php-mysql-blob/" data-post-title="PHP MySQL BLOB" href="#" class="wth-red-btn icon-thumbs-down">No</a>
</li>
</ul></div>
<div class='heateorSssClear'></div>
<div  class='heateor_sss_sharing_container heateor_sss_horizontal_sharing' heateor-sss-data-href='http://www.mysqltutorial.org/php-mysql-blob/'>
<div class='heateor_sss_sharing_title' style="font-weight:bold" ></div>
<ul  class="heateor_sss_sharing_ul">
<li class="heateorSssSharingRound">
<i style="width:35px;height:35px;border-radius:999px;" alt="Facebook" Title="Facebook" class="heateorSssSharing heateorSssFacebookBackground" onclick='heateorSssPopup("https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.mysqltutorial.org%2Fphp-mysql-blob%2F")'>
<ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssFacebookSvg">
</ss>
</i>
</li>
<li class="heateorSssSharingRound">
<i style="width:35px;height:35px;border-radius:999px;" alt="Twitter" Title="Twitter" class="heateorSssSharing heateorSssTwitterBackground" onclick='heateorSssPopup("http://twitter.com/intent/tweet?text=PHP%20MySQL%20BLOB&url=http%3A%2F%2Fwww.mysqltutorial.org%2Fphp-mysql-blob%2F")'>
<ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssTwitterSvg">
</ss>
</i>
</li>
<li class="heateorSssSharingRound">
<i style="width:35px;height:35px;border-radius:999px;" alt="Reddit" Title="Reddit" class="heateorSssSharing heateorSssRedditBackground" onclick='heateorSssPopup("http://reddit.com/submit?url=http%3A%2F%2Fwww.mysqltutorial.org%2Fphp-mysql-blob%2F&title=PHP%20MySQL%20BLOB")'>
<ss style="display:block;border-radius:999px;" class="heateorSssSharingSvg heateorSssRedditSvg">
</ss>
</i>
</li>
</ul>
<div class="heateorSssClear"></div></div>
<div class='heateorSssClear'></div></div>
<div id="alternative_content_bottom"> 

<a class="prev-page-anchor" href="http://www.mysqltutorial.org/php-mysql-transaction/" rel="prev" title="PHP MySQL Transaction"><span>Previous Tutorial:</span> PHP MySQL Transaction</a></div>
<div class="page-next"></div></div>
</article>
</main>
<aside class="sidebar sidebar-primary widget-area" role="complementary" aria-label="Primary Sidebar" itemscope itemtype="https://schema.org/WPSideBar">
<section id="text-24" class="widget widget_text">

<h5>MySQL Quick Start</h5>
<div class="menu-mysql-quick-start-container">
<ul id="menu-mysql-quick-start" class="menu">
<li id="menu-item-4209" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4209">
<a href="http://www.mysqltutorial.org/what-is-mysql/" itemprop="url">What Is MySQL?</a>
</li>
<li id="menu-item-2320" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2320">
<a title="Install MySQL Database Server" href="http://www.mysqltutorial.org/install-mysql/" itemprop="url">Install MySQL Database Server</a>
</li>
<li id="menu-item-2324" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2324">
<a title="Download MySQL Sample Database" href="http://www.mysqltutorial.org/mysql-sample-database.aspx" itemprop="url">Download MySQL Sample Database</a>
</li>
<li id="menu-item-2321" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2321">
<a title="How to Load Sample Database into MySQL Database Server" href="http://www.mysqltutorial.org/how-to-load-sample-database-into-mysql-database-server.aspx" itemprop="url">Load Sample Database</a>
</li>
</ul></div></div>
<br>
<br>
<br>
<br>

<script>
	var toc = $('#toc');
	$('h2').each(function(i) {
		var topic = $(this), topicNumber = i + 1;
		toc.append('<a href="#topic-'+topicNumber+'" target="_self">'+topic.text()+'</a><br>');
		topic.attr('id', 'topic-' + topicNumber);
	});
</script>

</body>
</html>
