<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<style>

a:hover,a:active{color:red}
table.w3-table-all{margin:20px 0}
.top {
 position:relative;
 background-color:black;
 height:68px;
 padding-top:20px;
 line-height:50px;
 overflow:hidden;
 z-index:2;
}
body {
 background-color: #000000;
 color: MediumSeaGreen;
 margin-left: 14%;
 margin-right: 14%;
 font-size: 24px;
}
a { text-decoration: none;
	color: #58D858;}
a:visited { color: #88C898;}
A:hover {	color: yellow;}
A:focus {	color: red;}
code { color: gray; background-color: #002010}
pre { color: gray; background-color: #001010}
h1, h2, h3, h4, h5, .goldword {
	color: gold;
}
table{
	width: 100%;
	font-size: 20px;
	border-collapse: collapse;
	border: 1px solid gray;
}
th{
	border: 1px solid gray;
	font-weight:bold;
	color: lightgreen;
}
td{
	padding:10px;
	border: 1px dotted dimgray;
}
tr>th:first-child{
	width:40%;
}
tr>td:first-child{
	color: lime;

}
img{
	margin-top:1%;
	margin-bottom:2%;
}
.topic{
    color: lime;
}
.goldsha {
    color: white;
    border: 1px solid gold;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px gold inset;
}
.redsha {
    color: gold;
    border: 1px solid red;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px red inset;
}
.whitesha {
    color: red;
    border: 1px solid white;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -3px -2px 3px white inset;
}
.orangesha {
    color: yellow;
    border: 1px solid orange;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px orange inset;
}
.yellowsha {
    color: lime;
    border: 1px solid yellow;
    padding: 2px;
    border-radius: 3px;
	box-shadow: 3px 3px 3px silver;
	display: inline-block;
}
.greensha {
    color: lightblue;
    border: 1px solid green;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px green inset;
}
.left {
    position: absolute;
    left: 100px;
    color: GoldenRod;
    border: 1px solid GoldenRod;
    padding: 2px;
    font-size: 60%;
}
.bord {
    color: redpink;
    border: 1px solid GoldenRod;
    padding: 1px;
    font-size: 90%;
}
.yellowbord {
    color: lime;
    border: 1px solid yellow;
    padding: 2px;
    border-radius: 3px;
	box-shadow: 3px 3px 3px silver;
}
.bluebord {
    color: white;
    border: 1px solid lightblue;
    padding: 2px;
    border-radius: 3px;
	box-shadow: -2px -2px 3px silver inset;
}
.highlight { 
    color: white;
    background-color: #002030
  }
hr {width: 50%;}
li{
	list-style-type: decimal;
}
#toc, #tang, #san, #pill {
	margin-left: 15%;
	margin-right: 15%;
	color: gold;
	padding: 1%;
	text-align: left;
	box-shadow: 5px 5px 15px silver;
	border-radius: 5px;
	border: 1px solid DarkSlateGray;
    font-size: 90%;
}
.mywords{
    color: Crimson;
}
.orangeword{
    color: orange;
}
.remarks {
	font-size: 22px;
	color: MediumSeaGreen;
}
</STYLE>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, .topic').click(function(){
    parent.history.back();
    return false;
    });
});
</script>


</head><body>

<center><h2>Reproducible Data Science : Docker</h2></center>
<div id="toc"><ul></ul></div>
<br>
<br>
<br>


<h3 id="Introduction">Introduction</h3>
<p>My first encounter with Docker was not to solve a Data Science problem, but to install MySQL. Yes, to install MySQL! Quite an anti-climatic start, right? At times, you stumble upon jewels while going through StackOverflow and Docker was one of them. What started with a one-off use case, ended up becoming a useful tool in my daily workflow.</p>
<p>I got a taste of docker when I tried to install TensorFlow in my system. Just to give you the context, TensorFlow is a deep learning library which requires a series of steps that you ought to do for system setup. Especially it is extremely complex to install Nvidia Graphics drivers. I literally had to reinstall my Operating system countless number of times. That loop stopped only when I shifted to docker, thankfully!</p>
<p>Docker provides you with an easy way to share your working environments including libraries and drivers. This enables us to create reproducible data science workflows.</p>
<p>This article aims to provide the perfect starting point to nudge you to use Docker for your Data Science workflows! I will cover both the useful aspects of Docker &#8211; namely, setting up your system without installing the tools and creating your own data science environment.</p>
<p>&nbsp;</p>
<h3 id="Table-of-Contents">Table of Contents</h3>
<ol>
<li>What is Docker?</li>
<li>Use Cases for Data Science</li>
<li>Docker terminology</li>
<li>Docker Hello-World</li>
<li>Data Science tools without installation</li>
<li>Your first Docker Image</li>
<li>Docker eco-system</li>
</ol>
</div>
<p>&nbsp;</p>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="1.-What-is-Docker?">1. What is Docker?</h3>
<blockquote><p>Docker is a software technology providing containers, promoted by the company Docker, Inc. Docker provides an additional layer of abstraction and automation of operating-system-level virtualization on Windows and Linux.</p></blockquote>

<p>The underlying concept that Docker promotes is usage of containers<span class="st">, which are essentially “boxes” of self-<wbr />contained softwares.</span> Containers have been in existence before Docker &amp; quite successful, but 2015 saw a huge adoption by the software community in terms of containerization to solve the day-to-day issues.</p>
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="2.-Use-Cases-for-Data-Science">2. Use Cases for Data Science</h3>
<p>When you walk into a cubicle of Data Science folks, they are either doing data processing or struggling to setup something on their work-stations/laptops. Okay, that might be an exaggeration but you get the sense of helplessness. To give a small example, for someone to setup a <strong>Caffe</strong> environment there are more than <em>30 unique ways</em>. And trust me, you&#8217;ll end up creating a new blogpost just for showing all the steps!</p>
<p>You get the idea. <strong>Anaconda distribution</strong> has made virtual environments and replicating environments using a standardized method a reality&#8230;yet things do get muddled and sometimes we miss the bullet points in the <strong>README</strong> file, carefully created to replicate those.</p>
<p>To solve the above problem, <strong>bash scripts</strong> and <strong>makefiles</strong> are added which adds to more confusion. It becomes as simple as <em>untangling earphones</em>, phew!</p>
<p><strong>Docker&#8217;s learning curve</strong> might be a bit steep, but it helps to solve:</p>
<ul>
<li>
<h4>Distribution and setup of <em>Data Science</em> tools and software:</h4>
<p>The <strong>Caffe</strong> example we discussed is one of the pain points that everyone experiences in their Data Science journey. Not only <strong>Docker</strong> helps to set a consistent platform via which these tools can be shared, the time wasted in searching for <em>operating system</em> specific installers/libraries is eliminated.</li>
</ul>
<ul>
<li>
<h4>Sharing reproducible analysis and code via <em>Docker Images</em>:</h4>
<p>Along with sharing the tools (<em>docker images as installers</em>), we can share <em>Jupyter notebooks</em> or <em>scripts</em> along with their results baked inside a <em>Docker image</em>. All the other person/colleague needs to do is run the <em>Docker image</em> to find out what&#8217;s there!</li>
<li>
<h4>Sharing Data Science applications directly without a dedicated DevOps team:</h4>
<p>In <a href="https://www.analyticsvidhya.com/blog/2017/09/machine-learning-models-as-apis-using-flask/">my last article</a>, we looked at how wrapping ML model in an API helps to make it available to your consumers. This is just one part of it. With small teams with no independent DevOps team to take care of deployments, <strong>Docker and the eco-system</strong> around it &#8212; <em>docker-compose</em>, <em>docker-machine</em> helps to ease the problems at a small scale.</p>
<p>Sales guys needs to present an RShiny application but don&#8217;t want to run the code? <em>Docker</em> can help you with that!</li>
</ul>
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="3.-Docker-Terminology">3. Docker Terminology</h3>
<p>I&#8217;ve been going on about containers, containerization in the previous section. Let&#8217;s understand the <strong>Docker terminologies</strong> first.</p>
<p>For starters, <strong>containers</strong> can be thought of as mini-VMs that are light-weight, disposable. Technically though, they are just processes (threads if you might say) that are created when you fire Docker commands in your terminal via their Command Line Interface (CLI).</p>
<p>Docker also provides: <strong>images</strong> that are essentially snapshots of the <strong>containers</strong> whose running state is saved using Docker CLI or generated using <strong>Dockerfile</strong>.</p>
<p>A <strong>Dockerfile</strong> can be considered as an automated setup file. This small file helps to create/modify Docker images. All the talk makes no sense, until there&#8217;s some proof. Let&#8217;s dive in and fire up your terminals.</p>
<p>Think of the process of creating a <em>Docker image</em> as creating a <strong>layered cake</strong>. <strong>Dockerfile</strong> being your <strong>recipe</strong>, <strong>Docker image</strong> created out of various layers.</p>
<p><img class="size-medium wp-image-39622 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/16005904/cake-300x226.jpg" alt="" width="300" height="226" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/16005904/cake-300x226.jpg 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/16005904/cake-83x63.jpg 83w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/16005904/cake.jpg 336w" sizes="(max-width: 300px) 100vw, 300px" /></p>
<p>In the next few sections, we&#8217;ll try to get a feel of <strong>Docker</strong> and work with its command line commands. Also, we&#8217;ll create our own <strong>Docker Image</strong>.</p>
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="4.-Docker:-Hello-World">4. Docker: Hello-World</h3>
<ul>
<li>To install <strong>Docker</strong>, below are the links for the major operating systems:
<ul>
<li><a href="https://docs.docker.com/engine/installation/">Linux</a></li>
<li><a href="https://docs.docker.com/docker-for-mac/">Mac OS</a></li>
<li><a href="https://docs.docker.com/docker-for-windows/">Windows</a></li>
</ul>
</li>
<li>After installation, to test if <strong>Docker</strong> has been successfully installed run:</li>
</ul>
<p><span class="cke_widget_wrapper cke_widget_inline cke_image_nocaption cke_widget_selected"><img class="cke_widget_element aligncenter" src="https://raw.githubusercontent.com/pratos/pratos.github.io/master/images/docker-workflows/docker_1.png" width="900px"></span></p>
<ul>
<li>The above output means that <strong>Docker CLI</strong> is ready. Next step would be to download an image, now how do we get any <strong>Docker image</strong>. Docker has a repository for that similar to a <strong>github repo</strong> called <strong>Dockerhub</strong>. Visit <a href="https://hub.docker.com/">dockerhub</a> to know more.</li>
<li>After you have logged in, you would see your dashboard (which would be empty at first). Do a quick-search using the <strong>Search</strong> button and type in: <code>hello-world</code>. (Below is my dashboard)</li>
</ul>
<p>
<img src="https://raw.githubusercontent.com/pratos/pratos.github.io/master/images/docker-workflows/docker_2.png" width="900px" /></p>
<ul>
<li>Searching <code>hello-world</code> would give you the results below:</li>
</ul>
<p><span class="cke_widget_wrapper cke_widget_inline cke_image_nocaption cke_widget_selected"><img class="cke_widget_element aligncenter" src="https://raw.githubusercontent.com/pratos/pratos.github.io/master/images/docker-workflows/docker_3.png" width="900px"></span></p>
<ul>
<li>Click on the first result which also happens to be the official image (created by good folks at Docker, try to use the official images always if there&#8217;s a choice or create your own).</li>
</ul>
<p><span class="cke_widget_wrapper cke_widget_inline cke_image_nocaption cke_widget_selected"><img class="cke_widget_element aligncenter" src="https://raw.githubusercontent.com/pratos/pratos.github.io/master/images/docker-workflows/docker_4.png" width="900px"></span></p>
<ul>
<li>The command: <code>docker pull hello-world</code> is what you need to run on your terminal. That&#8217;s how you download images to your local system.
<ul>
<li>To know which images are already present, run: <code>docker images</code> <span class="cke_widget_wrapper cke_widget_inline cke_image_nocaption cke_widget_selected"><img class="cke_widget_element aligncenter" src="https://raw.githubusercontent.com/pratos/pratos.github.io/master/images/docker-workflows/docker_5.png" width="900px"></span></li>
</ul>
</li>
</ul>
<pre><code>- Download the `hello-world` image:
</code></pre>
<p><img class=" wp-image-39537 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113528/docker_6-300x130.png" alt="" width="589" height="255" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113528/docker_6-300x130.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113528/docker_6-768x332.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113528/docker_6-850x368.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113528/docker_6.png 980w" sizes="(max-width: 589px) 100vw, 589px" /></p>
<pre><code>- Run the image using the command: `docker run hello-world`
<img class="wp-image-39538 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113834/docker_8-300x170.png" alt="" width="614" height="348" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113834/docker_8-300x170.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113834/docker_8-768x435.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113834/docker_8-850x481.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04113834/docker_8.png 889w" sizes="(max-width: 614px) 100vw, 614px" /></code></pre>
<p>This is all we need to execute a <em>docker image</em>. <em>hello-world</em> is simple, it has to be, but let&#8217;s move on to better things. Those that will help more, next section is all about that: <strong>Data Science tools without installation</strong>, our first use case.</p>
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="5.-Data-Science-tools-without-installation:">5. Data Science tools without installation:</h3>
<p>You have a clean laptop and you need to install <strong>TensorFlow</strong> in your system, but you are lazy (yes we all are sometimes). You want to procrastinate 拖延 and not install things on your laptop, but you have <strong>Docker</strong> installed already as a standard company practice. <em>Hmm, interesting times, you ponder!</em></p>
<p>You go to <strong>Dockerhub</strong> and search for the official <strong>Docker</strong> image for <strong><a href="https://hub.docker.com/r/tensorflow/tensorflow/">TensorFlow</a></strong>. All you need to run on your terminal is: <code>docker pull tensorflow/tensorflow</code></p>
<p><img class="wp-image-39539 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114131/docker_9-300x108.png" alt="" width="700" height="252" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114131/docker_9-300x108.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114131/docker_9-768x277.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114131/docker_9-850x307.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114131/docker_9.png 955w" sizes="(max-width: 700px) 100vw, 700px" /></p>
<p>As discussed above (in <strong>Docker Terminology</strong> section), the <strong>tensorflow</strong> docker image is also a layered object that forms images. Once all the intermediate layers are downloaded, run: <code>docker images</code> to check whether our <code>docker pull</code> was successful.</p>
<p><img class="wp-image-39540 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114243/docker_10-300x191.png" alt="" width="751" height="478" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114243/docker_10-300x191.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114243/docker_10-768x489.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114243/docker_10-850x541.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114243/docker_10.png 1045w" sizes="(max-width: 751px) 100vw, 751px" /></p>
<p>To run the image, run the command: <code>docker run -it -p 8888:8888 tensorflow/tensorflow</code></p>
[<strong>NOTE:</strong> At the time of writing, port 8888 was already used up so running it on 8889. You can run it on any port though <code>*shrugs*</code>]
<p>Now the above <code>docker run</code> command packs in a few more command line argurments. A few which you need to know better are as follows:</p>
<ul>
<li><code>i</code> is running the image interactively.</li>
<li><code>t</code> is to run bash inside the docker container created.</li>
<li><code>p</code> is connect/publish the container ports to host. Here localhost:8888 to 8888 of container.</li>
<li><code>d</code> is to run the container in <strong>detached</strong> mode i.e. the container would run in the background unlike the above (<code>i</code> where once you stop the process the container gets automatically removed).</li>
</ul>
<p>Now since a docker container is created, you can visit: <a href="http://localhost:8889/">http://localhost:8889</a> where you can try out <code>tensorflow</code>.</p>
<p><img class=" wp-image-39541 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114445/docker_13-300x85.png" alt="" width="836" height="237" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114445/docker_13-300x85.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114445/docker_13-768x218.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114445/docker_13-850x241.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114445/docker_13.png 1362w" sizes="(max-width: 836px) 100vw, 836px" /></p>
<p>Wasn&#8217;t that easy? Now as a exercise, replace <code>-it</code> in the <code>docker run</code> command by <code>-d</code>. See whether you can get the tensorflow jupyter environment again or not?</p>
<p>You should get the following outputs as in the screenshot below:</p>
<p><img class=" wp-image-39542 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114542/docker_12-300x54.png" alt="" width="905" height="163" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114542/docker_12-300x54.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114542/docker_12-768x139.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114542/docker_12-850x154.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114542/docker_12.png 1351w" sizes="(max-width: 905px) 100vw, 905px" /></p>
<p><strong>Exercise:</strong> Create more containers with different ports using the <code>docker run</code> command and see how many get created.</p>
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="6.-Your-first-Docker-Image">6. Your first Docker Image</h3>
<p>We as Data Science folks are picky about what tools we use for our analysis, some like to work with <strong>R</strong> while others prefer <strong>Python</strong>. Personally, I&#8217;d whine about the above TensorFlow image. I don&#8217;t know what&#8217;s there in it (unless I look at the source code i.e. the <strong>Dockerfile</strong> aka <strong>recipe</strong>). Tensorflow isn&#8217;t enough on it&#8217;s own, suppose you want to use <strong>OpenCV</strong> too and maybe <strong>scikit-learn</strong> &amp; <strong>matplotlib</strong>.</p>
<p>Let&#8217;s see how to create your own custom <strong>TensorFlow</strong> image!</p>
<ul>
<li>First thing you need is to create a <code>requirements.txt</code> file. For reference, below is the file that you might want to use: <a href="https://gist.github.com/pratos/7953a882d3bc8221d5803d115c3fe917">requirements.txt</a></li>
<li>Our <strong>Dockerfile</strong> would be comprised of the below components:
<ul>
<li>For the base image, we&#8217;ll use the <strong>official docker image for python i.e. <a href="https://hub.docker.com/_/python/">python:3.6</a></strong>.</li>
<li>Command to update the source repositories (the image uses <strong>Debian</strong> distribution).\</li>
<li>Copy the requirements.txt file and <em>pip install</em> the python libraries from the <strong>requirements.txt</strong> file.</li>
<li>Command to expose the ports.</li>
<li>Command to run the <code>jupyter notebook</code> command.</li>
</ul>
</li>
<li>The final <strong>Dockerfile</strong> would look as below:</li>
</ul>
<pre><code># Base image
FROM python:3.6

# Updating repository sources
RUN apt-get update

# Copying requirements.txt file
COPY requirements.txt requirements.txt

# pip install 
RUN pip install --no-cache -r requirements.txt

# Exposing ports
EXPOSE 8888

# Running jupyter notebook
# --NotebookApp.token ='demo' is the password
CMD ["jupyter", "notebook", "--no-browser", "--ip=0.0.0.0", "--allow-root", "--NotebookApp.token='demo'"]</code></pre>
<ul>
<li>Next step is to build our image, below is the tree structure that can be followed:</li>
</ul>
<p><img class=" wp-image-39543 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114704/docker_14-300x47.png" alt="" width="779" height="122" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114704/docker_14-300x47.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114704/docker_14-768x120.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114704/docker_14-850x133.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114704/docker_14.png 914w" sizes="(max-width: 779px) 100vw, 779px" /></p>
<ul>
<li>To build the image, run: <code>docker build -t tensorflow-av .</code> (<strong>Note:</strong><code>-t</code> is to tag the image as you wish too. You can version it as well, eg: <code>docker build -t tensorflow-av:v1 .</code></li>
<li>The logs for all the run is provided <a href="https://gist.github.com/pratos/1514a82940277f850d25f68b320437e3">here</a>. Once the entire process is completed, the image will be visible in your local docker registry. Run: <code>docker images</code> to check!</li>
</ul>
<p><img class=" wp-image-39544 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114804/docker_15-300x23.png" alt="" width="917" height="70" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114804/docker_15-300x23.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114804/docker_15-768x60.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114804/docker_15-850x66.png 850w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114804/docker_15.png 1002w" sizes="(max-width: 917px) 100vw, 917px" /></p>
<ul>
<li>Now that you have created the image, we need to test it. Run the image using the same command you used to run the original <strong>tensorflow docker image</strong>. Run: <code>docker run -p 8887:8888 -it tensorflow-av</code></li>
</ul>
<p><img class=" wp-image-39545 aligncenter" src="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114918/docker_16-300x54.png" alt="" width="947" height="170" srcset="https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114918/docker_16-300x54.png 300w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114918/docker_16-768x139.png 768w, https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2017/11/04114918/docker_16-850x154.png 850w" sizes="(max-width: 947px) 100vw, 947px" /></p>
<ul>
<li>Congratulations! You have made your first <strong>docker image</strong>. To share it, you have two ways in which you could do it:
<ul>
<li>Upload the image to <strong>Dockerhub</strong>. Follow the steps below to do it:
<ul>
<li>Login to <strong>Dockerhub</strong> via terminal: <code>sudo docker login</code></li>
<li>Rename the docker file: <code>sudo docker tag tensorflow-av &lt;dockerhub-id&gt;/tensorflow-av</code></li>
<li>Push the image to <strong>Dockerhub</strong>: <code>sudo docker push &lt;dockerhub-id&gt;/tensorflow-av</code></li>
</ul>
</li>
<li>Export the image to <strong>.tar file</strong>.
<ul>
<li><code>docker save &lt;dockerhub-id&gt;/tensorflow-av &gt; &lt;path&gt;/tensorflow-av.tar</code></li>
</ul>
</li>
<li>We can even export the container to a <strong>.tar file</strong>, along with all the running instances/state and other meta-data.
<ul>
<li><code>docker export &lt;container-id&gt; &gt; &lt;path&gt;/tensorflow-av-run1.tar</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>&nbsp;</p>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="7.-Docker-Eco-system">7. Docker Eco-system</h3>
<p>Docker provides a good support to build up from a prototype level scale to production levels. Purely from a deployments perspective: <a href="https://docs.docker.com/machine/"><strong>docker-machine</strong></a>, <a href="https://docs.docker.com/compose/"><strong>docker-compose</strong></a> &amp; <a href="https://docs.docker.com/engine/swarm/"><strong>docker-swarm</strong></a> are components that help achieve that.</p>
<ul>
<li>Want to take your ML API &amp; deploy it to <strong>any cloud provider</strong>? <strong>docker-machine</strong> helps you do that.</li>
<li>Your deployed API is growing in usage, want to scale it up? <strong>docker-swarm</strong> is there to help you do it without many changes.</li>
<li>Want to use multiple Docker images in a single application? <strong>docker-compose</strong> makes it possible for you to do that!</li>
</ul>
<p>&nbsp;</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="End-notes:">End Notes</h3>
<p>Starting off with a new habit is a difficult task. But once the learning curve smoothens out, things start to work out and new ideas open up with the usage. It is the same with Docker, hoping that this primer makes you think about using it in your daily Data Science workflows. Comment down below, how do you plan to use <strong>Docker</strong>, starting today!</p>
<br>
<br><br><br><br><br>
<script>
  $(function() {
    var toc = $('#toc>ul');

    function makeLi(text, href) {
      return $('<a href="' + href + '" target="_self">' + text + '</a><br>');
    }

    $('h3').each(function(i) {
      var chapter = $(this), chapterNumber = i + 1;
      toc.append(
        makeLi(chapter.text(), '#chapter-' + chapterNumber)
      );
      chapter.attr('id', 'chapter-' + chapterNumber);
    });

  });
</script>
</body>
</html>
