<base target="_blank"><html><head><title>R Tutorial</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script type='text/javascript' src='../mainscript.js'></script>
<script>
  var showTopicNumber = true;
</script>
<style>
body{width:80%;margin-left: 10%; font-size:22px;}
strong, h1, h2 {color: gold;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px;}
</style></head><body onkeypress="chkKey()"><center>
<div id="toc"></div></center>
<pre>
<br>
<br>

<h2>R Tutorial</h2>
R is a programming language and software environment for statistical analysis, graphics representation and reporting. 
R was created by Ross Ihaka and Robert Gentleman at the University of Auckland, New Zealand, and is currently developed by the R Development Core Team.

The core of R is an interpreted computer language which allows branching and looping as well as modular programming using functions. 
R allows integration with the procedures written in the C, C++, .Net, Python or FORTRAN languages for efficiency.

R is freely available under the GNU General Public License, and pre-compiled binary versions are provided for various operating systems like Linux, Windows and Mac.

R is free software distributed under a GNU-style copy left, and an official part of the GNU project called <b>GNU S</b>.

<h2>Evolution of R</h2>
R was initially written by <b>Ross Ihaka</b> and <b>Robert Gentleman</b> at the Department of Statistics of the University of Auckland in Auckland, New Zealand. 
R made its first appearance in 1993.

A large group of individuals has contributed to R by sending code and bug reports.
Since mid-1997 there has been a core group (the "R Core Team") who can modify the R source code archive.

<h2>Features of R</h2>
As stated earlier, R is a programming language and software environment for statistical analysis, graphics representation and reporting. 
The following are the important features of R -

R is a well-developed, simple and effective programming language which includes conditionals, loops, user defined recursive functions and input and output facilities.
R has an effective data handling and storage facility,
R provides a suite of operators for calculations on arrays, lists, vectors and matrices.
R provides a large, coherent and integrated collection of tools for data analysis.
R provides graphical facilities for data analysis and display either directly at the computer or printing at the papers.

As a conclusion, R is world’s most widely used statistics programming language. 
It's the # 1 choice of data scientists and supported by a vibrant and talented community of contributors. 
R is taught in universities and deployed in mission critical business applications. 
This tutorial will teach you R programming along with suitable examples in simple and easy steps.

<h2>Local Environment Setup</h2>
If you are still willing to set up your environment for R, you can follow the steps given below.

<h3>Windows Installation</h3>
You can download the Windows installer version of R from <a href="https://cran.r-project.org/bin/windows/base/" target="_blank" rel="nofollow">R-3.2.2 for Windows (32/64 bit)</a> and save it in a local directory.

As it is a Windows installer (.exe) with a name "R-version-win.exe". 
You can just double click and run the installer accepting the default settings. 
If your Windows is 32-bit version, it installs the 32-bit version. 
But if your windows is 64-bit, then it installs both the 32-bit and 64-bit versions.

After installation you can locate the icon to run the Program in a directory structure "R\R3.2.2\bin\i386\Rgui.exe" under the Windows Program Files. 
Clicking this icon brings up the R-GUI which is the R console to do R Programming.

<h3>Linux Installation</h3>
R is available as a binary for many versions of Linux at the location <a href="https://cran.r-project.org/bin/linux/" target="_blank" rel="nofollow">R Binaries</a>.

The instruction to install Linux varies from flavor to flavor. 
These steps are mentioned under each type of Linux version in the mentioned link. 
However, if you are in a hurry, then you can use <b>yum</b> command to install R as follows -

$ yum install R

Above command will install core functionality of R programming along with standard packages, still you need additional package, then you can launch R prompt as follows -

$ R
R version 3.2.0 (2015-04-16) -- "Full of  Ingredients"          
Copyright (C) 2015 The R Foundation for Statistical Computing
Platform: x86_64-redhat-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many  contributors. 
                   
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.
>  

Now you can use install command at R prompt to install the required package. 
For example, the following command will install <b>plotrix</b> package which is required for 3D charts.

> install.packages("plotrix")
<h2>R - Basic Syntax</h2>
As a convention, we will start learning R programming by writing a "Hello, World!" program. 
Depending on the needs, you can program either at R command prompt or you can use an R script file to write your program. 
Let's check both one by one.

<h2>R Command Prompt</h2>
Once you have R environment setup, then it’s easy to start your R command prompt by just typing the following command at your command prompt -

$ R

This will launch R interpreter and you will get a prompt > where you can start typing your program as follows -

> myString &lt;- "Hello, World!"
> print ( myString)
[1] "Hello, World!"

Here first statement defines a string variable myString, where we assign a string "Hello, World!" and then next statement print() is being used to print the value stored in variable myString.

<h2>R Script File</h2>
Usually, you will do your programming by writing your programs in script files and then you execute those scripts at your command prompt with the help of R interpreter called <b>Rscript</b>. 
So let's start with writing following code in a text file called test.R as under -

<a href="http://tpcg.io/LnRW9U" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# My first program in R Programming
myString &lt;- "Hello, World!"

print ( myString)

Save the above code in a file test.R and execute it at Linux command prompt as given below. 
Even if you are using Windows or other system, syntax will remain same.

$ Rscript test.R 

When we run the above program, it produces the following result.

[1] "Hello, World!"
<h2>Comments</h2>
Comments are like helping text in your R program and they are ignored by the interpreter while executing your actual program. 
Single comment is written using # in the beginning of the statement as follows -

# My first program in R Programming

R does not support multi-line comments but you can perform a trick which is something as follows -

<a href="http://tpcg.io/s8fswx" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

if(FALSE) {
   "This is a demo for multi-line comments and it should be put inside either a 
      single OR double quote"
}

myString &lt;- "Hello, World!"
print ( myString)

[1] "Hello, World!"

Though above comments will be executed by R interpreter, they will not interfere with your actual program. 
You should put such comments inside, either single or double quote.

<h2>R - Data Types</h2>
Generally, while doing programming in any programming language, you need to use various variables to store various information. 
Variables are nothing but reserved memory locations to store values. 
This means that, when you create a variable you reserve some space in memory.

You may like to store information of various data types like character, wide character, integer, floating point, double floating point, Boolean etc. 
Based on the data type of a variable, the operating system allocates memory and decides what can be stored in the reserved memory.

In contrast to other programming languages like C and java in R, the variables are not declared as some data type. 
The variables are assigned with R-Objects and the data type of the R-object becomes the data type of the variable. 
There are many types of R-objects. 
The frequently used ones are -

Vectors</li>
Lists</li>    
Matrices</li>   
Arrays</li>
Factors</li>
Data Frames</li>

The simplest of these objects is the <b>vector object</b> and there are six data types of these atomic vectors, also termed as six classes of vectors. 
The other R-Objects are built upon the atomic vectors.

<table class="table table-bordered">
<tr><th style="width:20%;text-align:center;">Data Type</th>
<th style="width:30%;text-align:center;">Example</th>
<th style="text-align:center;">Verify</th></tr>
<tr><td class="ts">Logical</td>
<td class="ts">TRUE, FALSE</td>
<td>

<a href="http://tpcg.io/JTJk0B" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- TRUE 
print(class(v))

it produces the following result -

[1] "logical" 

</td></tr>
<tr><td class="ts">Numeric</td>
<td class="ts">12.3, 5, 999</td>
<td>

<a href="http://tpcg.io/xZEowl" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- 23.5
print(class(v))

it produces the following result -

[1] "numeric"

</td></tr>
<tr><td class="ts">Integer</td>
<td class="ts">2L, 34L, 0L</td>
<td>

<a href="http://tpcg.io/NxIdEM" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- 2L
print(class(v))

it produces the following result -

[1] "integer"

</td></tr>
<tr><td class="ts">Complex</td>
<td class="ts">3 + 2i</td>
<td>

<a href="http://tpcg.io/4vSOmw" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- 2+5i
print(class(v))

it produces the following result -

[1] "complex"

</td></tr>
<tr><td class="ts">Character</td>
<td class="ts">'a' , '"good", "TRUE", '23.4'</td>
<td>

<a href="http://tpcg.io/YKv1ut" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- "TRUE"
print(class(v))

it produces the following result -

[1] "character"

</td></tr>
<tr><td class="ts">Raw</td>
<td class="ts">"Hello" is stored as 48 65 6c 6c 6f</td>
<td>

<a href="http://tpcg.io/hJkXrL" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- charToRaw("Hello")
print(class(v))

it produces the following result -

[1] "raw" 

</td></tr>
</table>
In R programming, the very basic data types are the R-objects called <b>vectors</b> which hold elements of different classes as shown above. 
Please note in R the number of classes is not confined to only the above six types. 
For example, we can use many atomic vectors and create an array whose class will become array.
   
<h2>Vectors</h2>
When you want to create vector with more than one element, you should use <b>c()</b> function which means to combine the elements into a vector.

<a href="http://tpcg.io/LcQaXR" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a vector.
apple &lt;- c('red','green',"yellow")
print(apple)

# Get the class of the vector.
print(class(apple))

When we execute the above code, it produces the following result -

[1] "red"    "green"  "yellow"
[1] "character"
<h2>Lists</h2>
A list is an R-object which can contain many different types of elements inside it like vectors, functions and even another list inside it.

<a href="http://tpcg.io/pueuoc" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a list.
list1 &lt;- list(c(2,5,3),21.3,sin)

# Print the list.
print(list1)

When we execute the above code, it produces the following result -

[[1]]
[1] 2 5 3

[[2]]
[1] 21.3

[[3]]
function (x)  .Primitive("sin")
<h2>Matrices</h2>
A matrix is a two-dimensional rectangular data set. 
It can be created using a vector input to the matrix function.

<a href="http://tpcg.io/tV7jUF" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a matrix.
M = matrix( c('a','a','b','c','b','a'), nrow = 2, ncol = 3, byrow = TRUE)
print(M)

When we execute the above code, it produces the following result -

     [,1] [,2] [,3]
[1,] "a"  "a"  "b" 
[2,] "c"  "b"  "a"
<h2>Arrays</h2>
While matrices are confined to two dimensions, arrays can be of any number of dimensions. 
The array function takes a dim attribute which creates the required number of dimension. 
In the below example we create an array with two elements which are 3x3 matrices each.

<a href="http://tpcg.io/Kewzed" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create an array.
a &lt;- array(c('green','yellow'),dim = c(3,3,2))
print(a)

When we execute the above code, it produces the following result -

, , 1

     [,1]     [,2]     [,3]    
[1,] "green"  "yellow" "green" 
[2,] "yellow" "green"  "yellow"
[3,] "green"  "yellow" "green" 

, , 2

     [,1]     [,2]     [,3]    
[1,] "yellow" "green"  "yellow"
[2,] "green"  "yellow" "green" 
[3,] "yellow" "green"  "yellow"  
<h2>Factors</h2>
Factors are the r-objects which are created using a vector. 
It stores the vector along with the distinct values of the elements in the vector as labels. 
The labels are always character irrespective of whether it is numeric or character or Boolean etc. 
in the input vector. 
They are useful in statistical modeling.

Factors are created using the <b>factor()</b> function. 
The <b>nlevels</b> functions gives the count of levels.

<a href="http://tpcg.io/oKREZj" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a vector.
apple_colors &lt;- c('green','green','yellow','red','red','red','green')

# Create a factor object.
factor_apple &lt;- factor(apple_colors)

# Print the factor.
print(factor_apple)
print(nlevels(factor_apple))

When we execute the above code, it produces the following result -

[1] green  green  yellow red    red    red    green 
Levels: green red yellow
[1] 3

 
<h2>Data Frames</h2>
Data frames are tabular data objects. 
Unlike a matrix in data frame each column can contain different modes of data. 
The first column can be numeric while the second column can be character and third column can be logical. 
It is a list of vectors of equal length.

Data Frames are created using the <b>data.frame()</b> function.

<a href="http://tpcg.io/UiiDfw" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
BMI &lt;- 	data.frame(
   gender = c("Male", "Male","Female"), 
   height = c(152, 171.5, 165), 
   weight = c(81,93, 78),
   Age = c(42,38,26)
)
print(BMI)

When we execute the above code, it produces the following result -

  gender height weight Age
1   Male  152.0     81  42
2   Male  171.5     93  38
3 Female  165.0     78  26  
<h2>R - Variables</h2>
A variable provides us with named storage that our programs can manipulate. 
A variable in R can store an atomic vector, group of atomic vectors or a combination of many Robjects. 
A valid variable name consists of letters, numbers and the dot or underline characters. 
The variable name starts with a letter or the dot not followed by a number.

<table class="table table-bordered">
<tr><th style="width:25%;text-align:center;">Variable Name</th>
<th style="text-align:center;">Validity</th>
<th style="text-align:center;">Reason</th></tr>
<tr><td class="ts">var_name2.</td>
<td class="ts">valid</td>
<td>Has letters, numbers, dot and underscore</td></tr>
<tr><td class="ts">var_name%</td>
<td class="ts">Invalid</td>
<td>Has the character '%'. 
Only dot(.) and underscore allowed.</td></tr>
<tr><td class="ts">2var_name</td>
<td class="ts">invalid</td>
<td>Starts with a number</td></tr>
<tr><td style="vertical-align:middle;">.var_name,

var.name
</td>
<td class="ts">valid</td>
<td style="vertical-align:middle;">Can start with a dot(.) but the dot(.)should not be followed by a number.</td></tr>
<tr><td class="ts">.2var_name</td>
<td class="ts">invalid</td>
<td>The starting dot is followed by a number making it invalid.</td></tr>
<tr><td class="ts">_var_name</td>
<td class="ts">invalid</td>
<td>Starts with _ which is not valid</td></tr>     
</table>
<h2>Variable Assignment</h2>
The variables can be assigned values using leftward, rightward and equal to operator. 
The values of the variables can be printed using <b>print()</b> or <b>cat()</b> function. 
The <b>cat()</b> function combines multiple items into a continuous print output.

<a href="http://tpcg.io/ESMxZG" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Assignment using equal operator.
var.1 = c(0,1,2,3)           

# Assignment using leftward operator.
var.2 &lt;- c("learn","R")   

# Assignment using rightward operator. 
  
c(TRUE,1) -> var.3           

print(var.1)
cat ("var.1 is ", var.1 ,"\n")
cat ("var.2 is ", var.2 ,"\n")
cat ("var.3 is ", var.3 ,"\n")

When we execute the above code, it produces the following result -

[1] 0 1 2 3
var.1 is  0 1 2 3 
var.2 is  learn R 
var.3 is  1 1 

<b>Note</b> - The vector c(TRUE,1) has a mix of logical and numeric class. 
So logical class is coerced to numeric class making TRUE as 1.

<h2>Data Type of a Variable</h2>
In R, a variable itself is not declared of any data type, rather it gets the data type of the R - object assigned to it. 
So R is called a dynamically typed language, which means that we can change a variable’s data type of the same variable again and again when using it in a program.

<a href="http://tpcg.io/Py81lP" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

var_x &lt;- "Hello"
cat("The class of var_x is ",class(var_x),"\n")

var_x &lt;- 34.5
cat("  Now the class of var_x is ",class(var_x),"\n")

var_x &lt;- 27L
cat("   Next the class of var_x becomes ",class(var_x),"\n")

When we execute the above code, it produces the following result -

The class of var_x is  character 
   Now the class of var_x is  numeric 
      Next the class of var_x becomes  integer
<h2>Finding Variables</h2>
To know all the variables currently available in the workspace we use the <b>ls()</b> function. 
Also the ls() function can use patterns to match the variable names.

<a href="http://tpcg.io/fyjBJa" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

print(ls())

When we execute the above code, it produces the following result -

[1] "my var"     "my_new_var" "my_var"     "var.1"      
[5] "var.2"      "var.3"      "var.name"   "var_name2."
[9] "var_x"      "varname" 

<b>Note</b> - It is a sample output depending on what variables are declared in your environment.

The ls() function can use patterns to match the variable names.

<a href="http://tpcg.io/EPUA3f" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# List the variables starting with the pattern "var".
print(ls(pattern = "var"))   

When we execute the above code, it produces the following result -

[1] "my var"     "my_new_var" "my_var"     "var.1"      
[5] "var.2"      "var.3"      "var.name"   "var_name2."
[9] "var_x"      "varname"    

The variables starting with <b>dot(.)</b> are hidden, they can be listed using "all.names = TRUE" argument to ls() function.

<a href="http://tpcg.io/y2gQFx" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

print(ls(all.name = TRUE))

When we execute the above code, it produces the following result -

[1] ".cars"        ".Random.seed" ".var_name"    ".varname"     ".varname2"   
[6] "my var"       "my_new_var"   "my_var"       "var.1"        "var.2"        
[11]"var.3"        "var.name"     "var_name2."   "var_x"  
<h2>Deleting Variables</h2>
Variables can be deleted by using the <b>rm()</b> function. 
Below we delete the variable var.3. 
On printing the value of the variable error is thrown.

<a href="http://tpcg.io/5SNuEb" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

rm(var.3)
print(var.3)

When we execute the above code, it produces the following result -

[1] "var.3"
Error in print(var.3) : object 'var.3' not found

    
All the variables can be deleted by using the <b>rm()</b> and <b>ls()</b> function together.

<a href="http://tpcg.io/4S2mcP" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

rm(list = ls())
print(ls())

When we execute the above code, it produces the following result -

character(0)
<h2>R - Operators</h2>
An operator is a symbol that tells the compiler to perform specific mathematical or logical manipulations. 
R language is rich in built-in operators and provides following types of operators.

<h2>Types of Operators</h2>
We have the following types of operators in R programming -

Arithmetic Operators</li>
Relational Operators</li>
Logical Operators</li>
Assignment Operators</li>
Miscellaneous Operators</li>

<h2>Arithmetic Operators</h2>
Following table shows the arithmetic operators supported by R language. 
The operators act on each element of the vector.

<table class="table table-bordered">
<tr><th style="text-align:center;">Operator</th>
<th style="text-align:center;">Description</th>
<th style="text-align:center;">Example</th></tr>
<tr><td class="ts">+</td>
<td class="ts">Adds two vectors</td>
<td>

<a href="http://tpcg.io/y9tltI" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c( 2,5.5,6)
t &lt;- c(8, 3, 4)
print(v+t)

it produces the following result -

[1] 10.0  8.5  10.0

</td></tr>
<tr><td class="ts">-</td>
<td class="ts">Subtracts second vector from the first</td>
<td>

<a href="http://tpcg.io/vte6zy" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c( 2,5.5,6)
t &lt;- c(8, 3, 4)
print(v-t)

it produces the following result -

[1] -6.0  2.5  2.0

</td></tr>
<tr><td class="ts">*</td>
<td class="ts">Multiplies both vectors</td>
<td>

<a href="http://tpcg.io/xfsefB" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c( 2,5.5,6)
t &lt;- c(8, 3, 4)
print(v*t)

it produces the following result -

[1] 16.0 16.5 24.0

</td></tr>
<tr><td class="ts">/</td>
<td class="ts">Divide the first vector with the second</td>
<td>

<a href="http://tpcg.io/XCSdtl" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c( 2,5.5,6)
t &lt;- c(8, 3, 4)
print(v/t)

When we execute the above code, it produces the following result -

[1] 0.250000 1.833333 1.500000

</td></tr> 
<tr><td class="ts">%%</td>
<td class="ts">Give the remainder of the first vector with the second</td>
<td>

<a href="http://tpcg.io/iFsj9E" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c( 2,5.5,6)
t &lt;- c(8, 3, 4)
print(v%%t)

it produces the following result -

[1] 2.0 2.5 2.0

</td></tr>
<tr><td class="ts">%/%</td>
<td class="ts">The result of division of first vector with second (quotient)</td>
<td>

<a href="http://tpcg.io/khU9Zr" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c( 2,5.5,6)
t &lt;- c(8, 3, 4)
print(v%/%t)

it produces the following result -

[1] 0 1 1

</td></tr>
<tr><td class="ts">^</td>
<td class="ts">The first vector raised to the exponent of second vector</td>
<td>

<a href="http://tpcg.io/5eTraf" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c( 2,5.5,6)
t &lt;- c(8, 3, 4)
print(v^t)

it produces the following result -

[1]  256.000  166.375 1296.000

</td></tr>
</table> 
<h2>Relational Operators</h2>
Following table shows the relational operators supported by R language. 
Each element of the first vector is compared with the corresponding element of the second vector. 
The result of comparison is a Boolean value.

<table class="table table-bordered">
<tr><th style="text-align:center;">Operator</th>
<th style="text-align:center;">Description</th>
<th style="text-align:center;width:40%">Example</th></tr>
<tr><td class="ts">></td>
<td style="vertical-align:middle;">Checks if each element of the first vector is greater than the corresponding element of the second vector.</td>
<td>

<a href="http://tpcg.io/5hnjWV" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(2,5.5,6,9)
t &lt;- c(8,2.5,14,9)
print(v>t)

it produces the following result -

[1] FALSE  TRUE FALSE FALSE

</td></tr>
<tr><td class="ts">&lt;</td>
<td style="vertical-align:middle;">Checks if each element of the first vector is less than the corresponding element of the second vector.</td>
<td>

<a href="http://tpcg.io/McpQJP" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(2,5.5,6,9)
t &lt;- c(8,2.5,14,9)
print(v &lt; t)

it produces the following result -

[1]  TRUE FALSE  TRUE FALSE

</td></tr>
<tr><td class="ts">==</td>
<td style="vertical-align:middle;">Checks if each element of the first vector is equal to the corresponding element of the second vector.</td>
<td>

<a href="http://tpcg.io/rEmlAQ" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(2,5.5,6,9)
t &lt;- c(8,2.5,14,9)
print(v == t)

it produces the following result -

[1] FALSE FALSE FALSE  TRUE

</td></tr>
<tr><td class="ts">&lt;=</td>
<td style="vertical-align:middle;">Checks if each element of the first vector is less than or equal to the corresponding element of the second vector.</td>
<td>

<a href="http://tpcg.io/hW1nKg" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(2,5.5,6,9)
t &lt;- c(8,2.5,14,9)
print(v&lt;=t)

it produces the following result -

[1]  TRUE FALSE  TRUE  TRUE

</td></tr>
<tr><td class="ts">>=</td>
<td style="vertical-align:middle;">Checks if each element of the first vector is greater than or equal to the corresponding element of the second vector.</td>
<td>

<a href="http://tpcg.io/TGrzhB" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(2,5.5,6,9)
t &lt;- c(8,2.5,14,9)
print(v>=t)

it produces the following result -

[1] FALSE  TRUE FALSE  TRUE

</td></tr>
<tr><td class="ts">!=</td>
<td style="vertical-align:middle;">Checks if each element of the first vector is unequal to the corresponding element of the second vector.</td>
<td>

<a href="http://tpcg.io/SXHenH" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(2,5.5,6,9)
t &lt;- c(8,2.5,14,9)
print(v!=t)

it produces the following result -

[1]  TRUE  TRUE  TRUE FALSE

</td></tr>
</table> 
<h2>Logical Operators</h2>
Following table shows the logical operators supported by R language. 
It is applicable only to vectors of type logical, numeric or complex. 
All numbers greater than 1 are considered as logical value TRUE.

Each element of the first vector is compared with the corresponding element of the second vector. 
The result of comparison is a Boolean value.
 
<table class="table table-bordered">
<tr><th style="text-align:center;">Operator</th>
<th style="text-align:center;">Description</th>
<th style="text-align:center;width:40%">Example</th></tr>
<tr><td class="ts">&amp;</td>
<td style="vertical-align:middle;">It is called Element-wise Logical AND operator. 
It combines each element of the first vector with the corresponding element of the second vector and gives a output TRUE if both the elements are TRUE.</td>
<td>

<a href="http://tpcg.io/80SLpI" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(3,1,TRUE,2+3i)
t &lt;- c(4,1,FALSE,2+3i)
print(v&amp;t)

it produces the following result -

[1]  TRUE  TRUE FALSE  TRUE

</td></tr>
<tr><td class="ts">|</td>
<td style="vertical-align:middle;">It is called Element-wise Logical OR operator. 
It combines each element of the first vector with the corresponding element of the second vector and gives a output TRUE if one the elements is TRUE.</td>
<td>

<a href="http://tpcg.io/G3TeFe" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(3,0,TRUE,2+2i)
t &lt;- c(4,0,FALSE,2+3i)
print(v|t)

it produces the following result -

[1]  TRUE FALSE  TRUE  TRUE

</td></tr>
<tr><td class="ts">!</td>
<td style="vertical-align:middle;">It is called Logical NOT operator. 
Takes each element of the vector and gives the opposite logical value.</td>
<td>

<a href="http://tpcg.io/nIC8ag" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(3,0,TRUE,2+2i)
print(!v)

it produces the following result -

[1] FALSE  TRUE FALSE FALSE

</td></tr>
</table>
The logical operator &amp;&amp; and || considers only the first element of the vectors and give a vector of single element as output.
 
<table class="table table-bordered">
<tr><th style="text-align:center;">Operator</th>
<th style="text-align:center;">Description</th>
<th style="text-align:center;width:40%">Example</th></tr>
<tr><td class="ts">&amp;&amp;</td>
<td style="vertical-align:middle;">Called Logical AND operator. 
Takes first element of both the vectors and gives the TRUE only if both are TRUE.</td>
<td>

<a href="http://tpcg.io/wcjEcy" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(3,0,TRUE,2+2i)
t &lt;- c(1,3,TRUE,2+3i)
print(v&amp;&amp;t)

it produces the following result -

[1] TRUE

</td></tr>
<tr><td class="ts">||</td>
<td style="vertical-align:middle;">Called Logical OR operator. 
Takes first element of both the vectors and gives the TRUE if one of them is TRUE.</td>
<td>

<a href="http://tpcg.io/6BakcE" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(0,0,TRUE,2+2i)
t &lt;- c(0,3,TRUE,2+3i)
print(v||t)

it produces the following result -

[1] FALSE

</td></tr>
</table>
<h2>Assignment Operators</h2>
These operators are used to assign values to vectors.

<table class="table table-bordered">
<tr><th style="text-align:center;">Operator</th>
<th style="text-align:center;">Description</th>
<th style="text-align:center;width:50%">Example</th></tr>
<tr><td style="vertical-align:middle;">
&lt;-
 
or
 
=
 
or
 
&lt;&lt;-

</td>
<td class="ts">Called Left Assignment</td>
<td>

<a href="http://tpcg.io/HP9gZz" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v1 &lt;- c(3,1,TRUE,2+3i)
v2 &lt;&lt;- c(3,1,TRUE,2+3i)
v3 = c(3,1,TRUE,2+3i)
print(v1)
print(v2)
print(v3)

it produces the following result -

[1] 3+0i 1+0i 1+0i 2+3i
[1] 3+0i 1+0i 1+0i 2+3i
[1] 3+0i 1+0i 1+0i 2+3i

</td></tr>
<tr><td style="vertical-align:middle;">
->

or

->>
</td>
<td class="ts">Called Right Assignment </td>
<td>

<a href="http://tpcg.io/Q6i8ZL" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

c(3,1,TRUE,2+3i) -> v1
c(3,1,TRUE,2+3i) ->> v2 
print(v1)
print(v2)

it produces the following result -

[1] 3+0i 1+0i 1+0i 2+3i
[1] 3+0i 1+0i 1+0i 2+3i

</td></tr>
</table>
<h2>Miscellaneous Operators</h2>
These operators are used to for specific purpose and not general mathematical or logical computation.

<table class="table table-bordered">
<tr><th style="text-align:center;">Operator</th>
<th style="text-align:center;">Description</th>
<th style="text-align:center;width:45%">Example</th></tr>
<tr><td class="ts">:</td>
<td style="vertical-align:middle;">Colon operator. 
It creates the series of numbers in sequence for a vector.</td>
<td>

<a href="http://tpcg.io/vPcV3b" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- 2:8
print(v) 

it produces the following result -

[1] 2 3 4 5 6 7 8

</td></tr>	
<tr><td class="ts">%in%</td>
<td style="vertical-align:middle;">This operator is used to identify if an element belongs to a vector.</td>
<td>

<a href="http://tpcg.io/foTSf7" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v1 &lt;- 8
v2 &lt;- 12
t &lt;- 1:10
print(v1 %in% t) 
print(v2 %in% t) 

it produces the following result -

[1] TRUE
[1] FALSE

</td></tr>
<tr><td class="ts">%*%</td>
<td style="vertical-align:middle;">This operator is used to multiply a matrix with its transpose.</td>
<td>

<a href="http://tpcg.io/Q9IliU" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

M = matrix( c(2,6,5,1,10,4), nrow = 2,ncol = 3,byrow = TRUE)
t = M %*% t(M)
print(t)

it produces the following result -

      [,1] [,2]
[1,]   65   82
[2,]   82  117

</td></tr>
</table>
<h2>R - Decision making</h2>
Decision making structures require the programmer to specify one or more conditions to be evaluated or tested by the program, along with a statement or statements to be executed if the condition is determined to be <b>true</b>, and optionally, other statements to be executed if the condition is determined to be <b>false</b>.

Following is the general form of a typical decision making structure found in most of the programming languages -

<img src="/r/images/r_decision_making.png" alt="Decision Making" />
R provides the following types of decision making statements. 
Click the following links to check their detail.

<table class="table table-bordered">
<tr><th>Sr.No.</th>
<th style="text-align:center;">Statement &amp; Description</th></tr>
<tr><td class="ts">1</td>
<td>
<a href="/r/r_if_statement.htm">if statement</a>
An <b>if</b> statement consists of a Boolean expression followed by one or more statements.

</td></tr>
<tr><td class="ts">2</td>
<td>
<a href="/r/r_if_else_statement.htm">if...else statement</a>
An <b>if</b> statement can be followed by an optional <b>else</b> statement, which executes when the Boolean expression is false.

</td></tr>
<tr><td class="ts">3</td>
<td>
<a href="/r/r_switch_statement.htm">switch statement</a>
A <b>switch</b> statement allows a variable to be tested for equality against a list of values.

</td></tr>
</table>
<h2>R - Loops</h2>
There may be a situation when you need to execute a block of code several number of times. 
In general, statements are executed sequentially. 
The first statement in a function is executed first, followed by the second, and so on.

Programming languages provide various control structures that allow for more complicated execution paths.

A loop statement allows us to execute a statement or group of statements multiple times and the following is the general form of a loop statement in most of the programming languages -

<img src="/r/images/loop_architecture.jpg" alt="Loop Architecture" />
R programming language provides the following kinds of loop to handle looping requirements. 
Click the following links to check their detail.

<table class="table table-bordered">
<tr><th>Sr.No.</th>
<th style="text-align:center;">Loop Type &amp; Description</th></tr>
<tr><td class="ts">1</td>
<td>
<a href="/r/r_repeat_loop.htm">repeat loop</a>
Executes a sequence of statements multiple times and abbreviates the code that manages the loop variable.

</td></tr>
<tr><td class="ts">2</td>
<td>
<a href="/r/r_while_loop.htm">while loop</a>
Repeats a statement or group of statements while a given condition is true. 
It tests the condition before executing the loop body.

</td></tr>
<tr><td class="ts">3</td>
<td>
<a href="/r/r_for_loop.htm">for loop</a>
Like a while statement, except that it tests the condition at the end of the loop body.

</td></tr>
</table>
<h2>Loop Control Statements</h2>
Loop control statements change execution from its normal sequence. 
When execution leaves a scope, all automatic objects that were created in that scope are destroyed.

R supports the following control statements. 
Click the following links to check their detail.

<table class="table table-bordered">
<tr><th>Sr.No.</th>
<th style="text-align:center;">Control Statement &amp; Description</th></tr>
<tr><td class="ts">1</td>
<td>
<a href="/r/r_break_statement.htm">break statement</a>
Terminates the <b>loop</b> statement and transfers execution to the statement immediately following the loop.

</td></tr>
<tr><td class="ts">2</td>
<td>
<a href="/r/r_next_statement.htm">Next statement</a>
The <b>next</b> statement simulates the behavior of R switch.

</td></tr>
</table>
<h2>R - Functions</h2>
A function is a set of statements organized together to perform a specific task. 
R has a large number of in-built functions and the user can create their own functions.

In R, a function is an object so the R interpreter is able to pass control to the function, along with arguments that may be necessary for the function to accomplish the actions.

The function in turn performs its task and returns control to the interpreter as well as any result which may be stored in other objects.

<h2>Function Definition</h2>
An R function is created by using the keyword <b>function</b>. 
The basic syntax of an R function definition is as follows -

function_name &lt;- function(arg_1, arg_2, ...) {
   Function body 
}
<h2>Function Components </h2>
The different parts of a function are -

<b>Function Name</b> - This is the actual name of the function. 
It is stored in R environment as an object with this name.
<b>Arguments</b> - An argument is a placeholder. 
When a function is invoked, you pass a value to the argument. 
Arguments are optional; that is, a function may contain no arguments. 
Also arguments can have default values.
<b>Function Body</b> - The function body contains a collection of statements that defines what the function does.
<b>Return Value</b> - The return value of a function is the last expression in the function body to be evaluated.

R has many <b>in-built</b> functions which can be directly called in the program without defining them first. 
We can also create and use our own functions referred as <b>user defined</b> functions.

<h2>Built-in Function</h2>
Simple examples of in-built functions are <b>seq()</b>, <b>mean()</b>, <b>max()</b>, <b>sum(x)</b> and <b>paste(...)</b> etc. 
They are directly called by user written programs. 
You can refer <a href="https://cran.r-project.org/doc/contrib/Short-refcard.pdf" target="_blank" rel="nofollow">most widely used R functions.</a>

<a href="http://tpcg.io/pcfp4i" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a sequence of numbers from 32 to 44.
print(seq(32,44))

# Find mean of numbers from 25 to 82.
print(mean(25:82))

# Find sum of numbers frm 41 to 68.
print(sum(41:68))

When we execute the above code, it produces the following result -
 

[1] 32 33 34 35 36 37 38 39 40 41 42 43 44
[1] 53.5
[1] 1526
<h2>User-defined Function</h2>
We can create user-defined functions in R. 
They are specific to what a user wants and once created they can be used like the built-in functions. 
Below is an example of how a function is created and used.

# Create a function to print squares of numbers in sequence.
new.function &lt;- function(a) {
   for(i in 1:a) {
      b &lt;- i^2
      print(b)
   }
}	
<h2>Calling a Function</h2>

<a href="http://tpcg.io/WxqnYt" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a function to print squares of numbers in sequence.
new.function &lt;- function(a) {
   for(i in 1:a) {
      b &lt;- i^2
      print(b)
   }
}

# Call the function new.function supplying 6 as an argument.
new.function(6)

When we execute the above code, it produces the following result -
 

[1] 1
[1] 4
[1] 9
[1] 16
[1] 25
[1] 36

<h3>Calling a Function without an Argument</h3>

<a href="http://tpcg.io/QkSl0S" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a function without an argument.
new.function &lt;- function() {
   for(i in 1:5) {
      print(i^2)
   }
}	

# Call the function without supplying an argument.
new.function()

When we execute the above code, it produces the following result -

[1] 1
[1] 4
[1] 9
[1] 16
[1] 25

<h3>Calling a Function with Argument Values (by position and by name)</h3>
The arguments to a function call can be supplied in the same sequence as defined in the function or they can be supplied in a different sequence but assigned to the names of the arguments.

<a href="http://tpcg.io/vb2nHS" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a function with arguments.
new.function &lt;- function(a,b,c) {
   result &lt;- a * b + c
   print(result)
}

# Call the function by position of arguments.
new.function(5,3,11)

# Call the function by names of the arguments.
new.function(a = 11, b = 5, c = 3)

When we execute the above code, it produces the following result -

[1] 26
[1] 58

<h3>Calling a Function with Default Argument</h3>
We can define the value of the arguments in the function definition and call the function without supplying any argument to get the default result. 
But we can also call such functions by supplying new values of the argument and get non default result.

<a href="http://tpcg.io/oCyF7z" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a function with arguments.
new.function &lt;- function(a = 3, b = 6) {
   result &lt;- a * b
   print(result)
}

# Call the function without giving any argument.
new.function()

# Call the function with giving new values of the argument.
new.function(9,5)

When we execute the above code, it produces the following result -

[1] 18
[1] 45
<h2>Lazy Evaluation of Function</h2>
Arguments to functions are evaluated lazily, which means so they are evaluated only when needed by the function body.

<a href="http://tpcg.io/Uiqyta" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a function with arguments.
new.function &lt;- function(a, b) {
   print(a^2)
   print(a)
   print(b)
}

# Evaluate the function without supplying one of the arguments.
new.function(6)

When we execute the above code, it produces the following result -

[1] 36
[1] 6
Error in print(b) : argument "b" is missing, with no default
<h2>R - Strings</h2>
Any value written within a pair of single quote or double quotes in R is treated as a string. 
Internally R stores every string within double quotes, even when you create them with single quote.

<h2>Rules Applied in String Construction</h2>
The quotes at the beginning and end of a string should be both double quotes or both single quote. 
They can not be mixed.
Double quotes can be inserted into a string starting and ending with single quote.
Single quote can be inserted into a string starting and ending with double quotes.
Double quotes can not be inserted into a string starting and ending with double quotes.
Single quote can not be inserted into a string starting and ending with single quote.

<h3>Examples of Valid Strings</h3>
Following examples clarify the rules about creating a string in R.

<a href="http://tpcg.io/N7F1C1" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

a &lt;- 'Start and end with single quote'
print(a)

b &lt;- "Start and end with double quotes"
print(b)

c &lt;- "single quote ' in between double quotes"
print(c)

d &lt;- 'Double quotes " in between single quote'
print(d)

When the above code is run we get the following output -

[1] "Start and end with single quote"
[1] "Start and end with double quotes"
[1] "single quote ' in between double quote"
[1] "Double quote \" in between single quote"

<h3>Examples of Invalid Strings</h3>

<a href="http://tpcg.io/UjFguN" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

e &lt;- 'Mixed quotes" 
print(e)

f &lt;- 'Single quote ' inside single quote'
print(f)

g &lt;- "Double quotes " inside double quotes"
print(g)

When we run the script it fails giving below results.

Error: unexpected symbol in:
"print(e)
f &lt;- 'Single"
Execution halted

 
<h2>String Manipulation</h2>
<h3>Concatenating Strings - paste() function</h3>
Many strings in R are combined using the <b>paste()</b> function. 
It can take any number of arguments to be combined together.

<h3>Syntax</h3>
The basic syntax for paste function is -

paste(..., sep = " ", collapse = NULL)

Following is the description of the parameters used -

<b>...</b> represents any number of arguments to be combined.
<b>sep</b> represents any separator between the arguments. 
It is optional.
<b>collapse</b> is used to eliminate the space in between two strings. 
But not the space within two words of one string.

<h3>Example</h3>

<a href="http://tpcg.io/kbPAEL" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

a &lt;- "Hello"
b &lt;- 'How'
c &lt;- "are you? "

print(paste(a,b,c))

print(paste(a,b,c, sep = "-"))

print(paste(a,b,c, sep = "", collapse = ""))

When we execute the above code, it produces the following result -

[1] "Hello How are you? "
[1] "Hello-How-are you? "
[1] "HelloHoware you? "

<h3>Formatting numbers &amp; strings - format() function</h3>
Numbers and strings can be formatted to a specific style using <b>format()</b> function.

<h3>Syntax</h3>
The basic syntax for format function is -

format(x, digits, nsmall, scientific, width, justify = c("left", "right", "centre", "none")) 

Following is the description of the parameters used -

<b>x</b> is the vector input.
<b>digits</b> is the total number of digits displayed.
<b>nsmall</b> is the minimum number of digits to the right of the decimal point.
<b>scientific</b> is set to TRUE to display scientific notation.
<b>width</b> indicates the minimum width to be displayed by padding blanks in the beginning.
<b>justify</b> is the display of the string to left, right or center.

<h3>Example</h3>

<a href="http://tpcg.io/SoS02K" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Total number of digits displayed. 
Last digit rounded off.
result &lt;- format(23.123456789, digits = 9)
print(result)

# Display numbers in scientific notation.
result &lt;- format(c(6, 13.14521), scientific = TRUE)
print(result)

# The minimum number of digits to the right of the decimal point.
result &lt;- format(23.47, nsmall = 5)
print(result)

# Format treats everything as a string.
result &lt;- format(6)
print(result)

# Numbers are padded with blank in the beginning for width.
result &lt;- format(13.7, width = 6)
print(result)

# Left justify strings.
result &lt;- format("Hello", width = 8, justify = "l")
print(result)

# Justfy string with center.
result &lt;- format("Hello", width = 8, justify = "c")
print(result)

When we execute the above code, it produces the following result -

[1] "23.1234568"
[1] "6.000000e+00" "1.314521e+01"
[1] "23.47000"
[1] "6"
[1] "  13.7"
[1] "Hello   "
[1] " Hello  "

<h3>Counting number of characters in a string - nchar() function</h3>
This function counts the number of characters including spaces in a string.

<h3>Syntax</h3>
The basic syntax for nchar() function is -

nchar(x)

Following is the description of the parameters used -

<b>x</b> is the vector input.

<h3>Example</h3>

<a href="http://tpcg.io/ZpuUv6" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

result &lt;- nchar("Count the number of characters")
print(result)

When we execute the above code, it produces the following result -

[1] 30

<h3>Changing the case - toupper() &amp; tolower() functions</h3>
These functions change the case of characters of a string.

<h3>Syntax</h3>
The basic syntax for toupper() &amp; tolower() function is  -

toupper(x)
tolower(x)

Following is the description of the parameters used -

<b>x</b> is the vector input.

<h3>Example</h3>

<a href="http://tpcg.io/tsCqXD" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Changing to Upper case.
result &lt;- toupper("Changing To Upper")
print(result)

# Changing to lower case.
result &lt;- tolower("Changing To Lower")
print(result)

When we execute the above code, it produces the following result -

[1] "CHANGING TO UPPER"
[1] "changing to lower"

<h3>Extracting parts of a string - substring() function</h3>
This function extracts parts of a String.

<h3>Syntax</h3>
The basic syntax for substring() function is -

substring(x,first,last)

Following is the description of the parameters used -

<b>x</b> is the character vector input.
<b>first</b> is the position of the first character to be extracted.
<b>last</b> is the position of the last character to be extracted.

<h3>Example</h3>

<a href="http://tpcg.io/mZdWGS" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Extract characters from 5th to 7th position.
result &lt;- substring("Extract", 5, 7)
print(result)

When we execute the above code, it produces the following result -

[1] "act"
<h2>R - Vectors</h2>
Vectors are the most basic R data objects and there are six types of atomic vectors. 
They are logical, integer, double, complex, character and raw.

<h2>Vector Creation</h2>
<h3>Single Element Vector</h3>
Even when you write just one value in R, it becomes a vector of length 1 and belongs to one of the above vector types.

<a href="http://tpcg.io/9C7IrX" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Atomic vector of type character.
print("abc");

# Atomic vector of type double.
print(12.5)

# Atomic vector of type integer.
print(63L)

# Atomic vector of type logical.
print(TRUE)

# Atomic vector of type complex.
print(2+3i)

# Atomic vector of type raw.
print(charToRaw('hello'))

When we execute the above code, it produces the following result -

[1] "abc"
[1] 12.5
[1] 63
[1] TRUE
[1] 2+3i
[1] 68 65 6c 6c 6f

<h3>Multiple Elements Vector</h3>
<b>Using colon operator with numeric data</b>

<a href="http://tpcg.io/CVLe5X" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Creating a sequence from 5 to 13.
v &lt;- 5:13
print(v)

# Creating a sequence from 6.6 to 12.6.
v &lt;- 6.6:12.6
print(v)

# If the final element specified does not belong to the sequence then it is discarded.
v &lt;- 3.8:11.4
print(v)

When we execute the above code, it produces the following result -

[1]  5  6  7  8  9 10 11 12 13
[1]  6.6  7.6  8.6  9.6 10.6 11.6 12.6
[1]  3.8  4.8  5.8  6.8  7.8  8.8  9.8 10.8

<b>Using sequence (Seq.) operator</b>

<a href="http://tpcg.io/bkJZ0b" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create vector with elements from 5 to 9 incrementing by 0.4.
print(seq(5, 9, by = 0.4))

When we execute the above code, it produces the following result -

[1] 5.0 5.4 5.8 6.2 6.6 7.0 7.4 7.8 8.2 8.6 9.0

<b>Using the c() function</b>

The non-character values are coerced to character type if one of the elements is a character.

<a href="http://tpcg.io/qrPJfm" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# The logical and numeric values are converted to characters.
s &lt;- c('apple','red',5,TRUE)
print(s)

When we execute the above code, it produces the following result -

[1] "apple" "red"   "5"     "TRUE" 
<h2>Accessing Vector Elements</h2>
Elements of a Vector are accessed using indexing. 
The <b>[ ] brackets</b> are used for indexing. 
Indexing starts with position 1. 
Giving a negative value in the index drops that element from result.<b>TRUE</b>,<b> FALSE</b> or <b>0</b> and <b>1</b> can also be used for indexing.

<a href="http://tpcg.io/DV7P7s" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Accessing vector elements using position.
t &lt;- c("Sun","Mon","Tue","Wed","Thurs","Fri","Sat")
u &lt;- t[c(2,3,6)]
print(u)

# Accessing vector elements using logical indexing.
v &lt;- t[c(TRUE,FALSE,FALSE,FALSE,FALSE,TRUE,FALSE)]
print(v)

# Accessing vector elements using negative indexing.
x &lt;- t[c(-2,-5)]
print(x)

# Accessing vector elements using 0/1 indexing.
y &lt;- t[c(0,0,0,0,0,0,1)]
print(y)

When we execute the above code, it produces the following result -

[1] "Mon" "Tue" "Fri"
[1] "Sun" "Fri"
[1] "Sun" "Tue" "Wed" "Fri" "Sat"
[1] "Sun"
<h2>Vector Manipulation</h2>
<h3>Vector arithmetic</h3>
Two vectors of same length can be added, subtracted, multiplied or divided giving the result as a vector output.

<a href="http://tpcg.io/Xe6tYn" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two vectors.
v1 &lt;- c(3,8,4,5,0,11)
v2 &lt;- c(4,11,0,8,1,2)

# Vector addition.
add.result &lt;- v1+v2
print(add.result)

# Vector subtraction.
sub.result &lt;- v1-v2
print(sub.result)

# Vector multiplication.
multi.result &lt;- v1*v2
print(multi.result)

# Vector division.
divi.result &lt;- v1/v2
print(divi.result)

When we execute the above code, it produces the following result -

[1]  7 19  4 13  1 13
[1] -1 -3  4 -3 -1  9
[1] 12 88  0 40  0 22
[1] 0.7500000 0.7272727       Inf 0.6250000 0.0000000 5.5000000

<h3>Vector Element Recycling</h3>
If we apply arithmetic operations to two vectors of unequal length, then the elements of the shorter vector are recycled to complete the operations.

<a href="http://tpcg.io/3Sncsl" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v1 &lt;- c(3,8,4,5,0,11)
v2 &lt;- c(4,11)
# V2 becomes c(4,11,4,11,4,11)

add.result &lt;- v1+v2
print(add.result)

sub.result &lt;- v1-v2
print(sub.result)

When we execute the above code, it produces the following result -

[1]  7 19  8 16  4 22
[1] -1 -3  0 -6 -4  0

<h3>Vector Element Sorting</h3>
Elements in a vector can be sorted using the <b>sort()</b> function.

<a href="http://tpcg.io/5HGAFo" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- c(3,8,4,5,0,11, -9, 304)

# Sort the elements of the vector.
sort.result &lt;- sort(v)
print(sort.result)

# Sort the elements in the reverse order.
revsort.result &lt;- sort(v, decreasing = TRUE)
print(revsort.result)

# Sorting character vectors.
v &lt;- c("Red","Blue","yellow","violet")
sort.result &lt;- sort(v)
print(sort.result)

# Sorting character vectors in reverse order.
revsort.result &lt;- sort(v, decreasing = TRUE)
print(revsort.result)

When we execute the above code, it produces the following result -

[1]  -9   0   3   4   5   8  11 304
[1] 304  11   8   5   4   3   0  -9
[1] "Blue"   "Red"    "violet" "yellow"
[1] "yellow" "violet" "Red"    "Blue" 
<h2>R - Lists</h2>
Lists are the R objects which contain elements of different types like - numbers, strings, vectors and another list inside it. 
A list can also contain a matrix or a function as its elements. 
List is created using <b>list()</b> function.

<h2>Creating a List</h2>
Following is an example to create a list containing strings, numbers, vectors and a logical values.

<a href="http://tpcg.io/Vfm45u" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a list containing strings, numbers, vectors and a logical
# values.
list_data &lt;- list("Red", "Green", c(21,32,11), TRUE, 51.23, 119.1)
print(list_data)

When we execute the above code, it produces the following result -

[[1]]
[1] "Red"

[[2]]
[1] "Green"

[[3]]
[1] 21 32 11

[[4]]
[1] TRUE

[[5]]
[1] 51.23

[[6]]
[1] 119.1
<h2>Naming List Elements</h2>
The list elements can be given names and they can be accessed using these names.

<a href="http://tpcg.io/PlyiUw" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a list containing a vector, a matrix and a list.
list_data &lt;- list(c("Jan","Feb","Mar"), matrix(c(3,9,5,1,-2,8), nrow = 2),
   list("green",12.3))

# Give names to the elements in the list.
names(list_data) &lt;- c("1st Quarter", "A_Matrix", "A Inner list")

# Show the list.
print(list_data)

When we execute the above code, it produces the following result -

$`1st_Quarter`
[1] "Jan" "Feb" "Mar"

$A_Matrix
     [,1] [,2] [,3]
[1,]    3    5   -2
[2,]    9    1    8

$A_Inner_list
$A_Inner_list[[1]]
[1] "green"

$A_Inner_list[[2]]
[1] 12.3
<h2>Accessing List Elements</h2> 
Elements of the list can be accessed by the index of the element in the list. 
In case of named lists it can also be accessed using the names.

We continue to use the list in the above example -

<a href="http://tpcg.io/2JMmWL" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a list containing a vector, a matrix and a list.
list_data &lt;- list(c("Jan","Feb","Mar"), matrix(c(3,9,5,1,-2,8), nrow = 2),
   list("green",12.3))

# Give names to the elements in the list.
names(list_data) &lt;- c("1st Quarter", "A_Matrix", "A Inner list")

# Access the first element of the list.
print(list_data[1])

# Access the thrid element. 
As it is also a list, all its elements will be printed.
print(list_data[3])

# Access the list element using the name of the element.
print(list_data$A_Matrix)

When we execute the above code, it produces the following result -

$`1st_Quarter`
[1] "Jan" "Feb" "Mar"

$A_Inner_list
$A_Inner_list[[1]]
[1] "green"

$A_Inner_list[[2]]
[1] 12.3

     [,1] [,2] [,3]
[1,]    3    5   -2
[2,]    9    1    8
<h2>Manipulating List Elements</h2>
We can add, delete and update list elements as shown below. 
We can add and delete elements only at the end of a list. 
But we can update any element.

<a href="http://tpcg.io/Weegyj" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a list containing a vector, a matrix and a list.
list_data &lt;- list(c("Jan","Feb","Mar"), matrix(c(3,9,5,1,-2,8), nrow = 2),
   list("green",12.3))

# Give names to the elements in the list.
names(list_data) &lt;- c("1st Quarter", "A_Matrix", "A Inner list")

# Add element at the end of the list.
list_data[4] &lt;- "New element"
print(list_data[4])

# Remove the last element.
list_data[4] &lt;- NULL

# Print the 4th Element.
print(list_data[4])

# Update the 3rd Element.
list_data[3] &lt;- "updated element"
print(list_data[3])

When we execute the above code, it produces the following result -

[[1]]
[1] "New element"

$&lt;NA>
NULL

$`A Inner list`
[1] "updated element"
<h2>Merging Lists</h2>
You can merge many lists into one list by placing all the lists inside one list() function.

<a href="http://tpcg.io/NMMVz7" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two lists.
list1 &lt;- list(1,2,3)
list2 &lt;- list("Sun","Mon","Tue")

# Merge the two lists.
merged.list &lt;- c(list1,list2)

# Print the merged list.
print(merged.list)

When we execute the above code, it produces the following result -

[[1]]
[1] 1

[[2]]
[1] 2

[[3]]
[1] 3

[[4]]
[1] "Sun"

[[5]]
[1] "Mon"

[[6]]
[1] "Tue"
<h2>Converting List to Vector</h2>
A list can be converted to a vector so that the elements of the vector can be used for further manipulation. 
All the arithmetic operations on vectors can be applied after the list is converted into vectors. 
To do this conversion, we use the <b>unlist()</b> function. 
It takes the list as input and produces a vector.

<a href="http://tpcg.io/e9OQU5" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create lists.
list1 &lt;- list(1:5)
print(list1)

list2 &lt;-list(10:14)
print(list2)

# Convert the lists to vectors.
v1 &lt;- unlist(list1)
v2 &lt;- unlist(list2)

print(v1)
print(v2)

# Now add the vectors
result &lt;- v1+v2
print(result)

When we execute the above code, it produces the following result -

[[1]]
[1] 1 2 3 4 5

[[1]]
[1] 10 11 12 13 14

[1] 1 2 3 4 5
[1] 10 11 12 13 14
[1] 11 13 15 17 19
<h2> R - Matrices</h2>
Matrices are the R objects in which the elements are arranged in a two-dimensional rectangular layout. 
They contain elements of the same atomic types. 
Though we can create a matrix containing only characters or only logical values, they are not of much use. 
We use matrices containing numeric elements to be used in mathematical calculations.

A Matrix is created using the <b>matrix()</b> function.

<h3>Syntax</h3>
The basic syntax for creating a matrix in R is -

matrix(data, nrow, ncol, byrow, dimnames)

Following is the description of the parameters used -

<b>data</b> is the input vector which becomes the data elements of the matrix.
<b>nrow</b> is the number of rows to be created.
<b>ncol</b> is the number of columns to be created.
<b>byrow</b> is a logical clue. 
If TRUE then the input vector elements are arranged by row.
<b>dimname</b> is the names assigned to the rows and columns.

<h3>Example</h3>
Create a matrix taking a vector of numbers as input.

<a href="http://tpcg.io/qcpHdR" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Elements are arranged sequentially by row.
M &lt;- matrix(c(3:14), nrow = 4, byrow = TRUE)
print(M)

# Elements are arranged sequentially by column.
N &lt;- matrix(c(3:14), nrow = 4, byrow = FALSE)
print(N)

# Define the column and row names.
rownames = c("row1", "row2", "row3", "row4")
colnames = c("col1", "col2", "col3")

P &lt;- matrix(c(3:14), nrow = 4, byrow = TRUE, dimnames = list(rownames, colnames))
print(P)

When we execute the above code, it produces the following result -

     [,1] [,2] [,3]
[1,]    3    4    5
[2,]    6    7    8
[3,]    9   10   11
[4,]   12   13   14
     [,1] [,2] [,3]
[1,]    3    7   11
[2,]    4    8   12
[3,]    5    9   13
[4,]    6   10   14
     col1 col2 col3
row1    3    4    5
row2    6    7    8
row3    9   10   11
row4   12   13   14
<h2>Accessing Elements of a Matrix</h2> 
Elements of a matrix can be accessed by using the column and row index of the element. 
We consider the matrix P above to find the specific elements below.

<a href="http://tpcg.io/lZOOcQ" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Define the column and row names.
rownames = c("row1", "row2", "row3", "row4")
colnames = c("col1", "col2", "col3")

# Create the matrix.
P &lt;- matrix(c(3:14), nrow = 4, byrow = TRUE, dimnames = list(rownames, colnames))

# Access the element at 3rd column and 1st row.
print(P[1,3])

# Access the element at 2nd column and 4th row.
print(P[4,2])

# Access only the  2nd row.
print(P[2,])

# Access only the 3rd column.
print(P[,3])

When we execute the above code, it produces the following result -

[1] 5
[1] 13
col1 col2 col3 
   6    7    8 
row1 row2 row3 row4 
   5    8   11   14 
<h2>Matrix Computations</h2>
Various mathematical operations are performed on the matrices using the R operators. 
The result of the operation is also a matrix.

The dimensions (number of rows and columns) should be same for the matrices involved in the operation.

<h3>Matrix Addition &amp; Subtraction</h3>

<a href="http://tpcg.io/fnPcNK" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two 2x3 matrices.
matrix1 &lt;- matrix(c(3, 9, -1, 4, 2, 6), nrow = 2)
print(matrix1)

matrix2 &lt;- matrix(c(5, 2, 0, 9, 3, 4), nrow = 2)
print(matrix2)

# Add the matrices.
result &lt;- matrix1 + matrix2
cat("Result of addition","\n")
print(result)

# Subtract the matrices
result &lt;- matrix1 - matrix2
cat("Result of subtraction","\n")
print(result)

When we execute the above code, it produces the following result -

     [,1] [,2] [,3]
[1,]    3   -1    2
[2,]    9    4    6
     [,1] [,2] [,3]
[1,]    5    0    3
[2,]    2    9    4
Result of addition 
     [,1] [,2] [,3]
[1,]    8   -1    5
[2,]   11   13   10
Result of subtraction 
     [,1] [,2] [,3]
[1,]   -2   -1   -1
[2,]    7   -5    2

<h3>Matrix Multiplication &amp; Division</h3>

<a href="http://tpcg.io/sMc3RL" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two 2x3 matrices.
matrix1 &lt;- matrix(c(3, 9, -1, 4, 2, 6), nrow = 2)
print(matrix1)

matrix2 &lt;- matrix(c(5, 2, 0, 9, 3, 4), nrow = 2)
print(matrix2)

# Multiply the matrices.
result &lt;- matrix1 * matrix2
cat("Result of multiplication","\n")
print(result)

# Divide the matrices
result &lt;- matrix1 / matrix2
cat("Result of division","\n")
print(result)

When we execute the above code, it produces the following result -

     [,1] [,2] [,3]
[1,]    3   -1    2
[2,]    9    4    6
     [,1] [,2] [,3]
[1,]    5    0    3
[2,]    2    9    4
Result of multiplication 
     [,1] [,2] [,3]
[1,]   15    0    6
[2,]   18   36   24
Result of division 
     [,1]      [,2]      [,3]
[1,]  0.6      -Inf 0.6666667
[2,]  4.5 0.4444444 1.5000000
<h2>R - Arrays</h2>
Arrays are the R data objects which can store data in more than two dimensions. 
For example - If we create an array of dimension (2, 3, 4) then it creates 4 rectangular matrices each with 2 rows and 3 columns. 
Arrays can store only data type.

An array is created using the <b>array()</b> function. 
It takes vectors as input and uses the values in the <b>dim</b> parameter to create an array.

<h2>Example</h2>
The following example creates an array of two 3x3 matrices each with 3 rows and 3 columns.

<a href="http://tpcg.io/GWrb86" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two vectors of different lengths.
vector1 &lt;- c(5,9,3)
vector2 &lt;- c(10,11,12,13,14,15)

# Take these vectors as input to the array.
result &lt;- array(c(vector1,vector2),dim = c(3,3,2))
print(result)

When we execute the above code, it produces the following result -

, , 1

     [,1] [,2] [,3]
[1,]    5   10   13
[2,]    9   11   14
[3,]    3   12   15

, , 2

     [,1] [,2] [,3]
[1,]    5   10   13
[2,]    9   11   14
[3,]    3   12   15
<h2>Naming Columns and Rows</h2>
We can give names to the rows, columns and matrices in the array by using the <b>dimnames</b> parameter.

<a href="http://tpcg.io/1PqV0r" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two vectors of different lengths.
vector1 &lt;- c(5,9,3)
vector2 &lt;- c(10,11,12,13,14,15)
column.names &lt;- c("COL1","COL2","COL3")
row.names &lt;- c("ROW1","ROW2","ROW3")
matrix.names &lt;- c("Matrix1","Matrix2")

# Take these vectors as input to the array.
result &lt;- array(c(vector1,vector2),dim = c(3,3,2),dimnames = list(row.names,column.names,
   matrix.names))
print(result)

When we execute the above code, it produces the following result -

, , Matrix1

     COL1 COL2 COL3
ROW1    5   10   13
ROW2    9   11   14
ROW3    3   12   15

, , Matrix2

     COL1 COL2 COL3
ROW1    5   10   13
ROW2    9   11   14
ROW3    3   12   15
<h2>Accessing Array Elements</h2>

<a href="http://tpcg.io/8oMulx" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two vectors of different lengths.
vector1 &lt;- c(5,9,3)
vector2 &lt;- c(10,11,12,13,14,15)
column.names &lt;- c("COL1","COL2","COL3")
row.names &lt;- c("ROW1","ROW2","ROW3")
matrix.names &lt;- c("Matrix1","Matrix2")

# Take these vectors as input to the array.
result &lt;- array(c(vector1,vector2),dim = c(3,3,2),dimnames = list(row.names,
   column.names, matrix.names))

# Print the third row of the second matrix of the array.
print(result[3,,2])

# Print the element in the 1st row and 3rd column of the 1st matrix.
print(result[1,3,1])

# Print the 2nd Matrix.
print(result[,,2])

When we execute the above code, it produces the following result -

COL1 COL2 COL3 
   3   12   15 
[1] 13
     COL1 COL2 COL3
ROW1    5   10   13
ROW2    9   11   14
ROW3    3   12   15
<h2>Manipulating Array Elements</h2>
As array is made up matrices in multiple dimensions, the operations on elements of array are carried out by accessing elements of the matrices.

<a href="http://tpcg.io/LyNJ9b" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two vectors of different lengths.
vector1 &lt;- c(5,9,3)
vector2 &lt;- c(10,11,12,13,14,15)

# Take these vectors as input to the array.
array1 &lt;- array(c(vector1,vector2),dim = c(3,3,2))

# Create two vectors of different lengths.
vector3 &lt;- c(9,1,0)
vector4 &lt;- c(6,0,11,3,14,1,2,6,9)
array2 &lt;- array(c(vector1,vector2),dim = c(3,3,2))

# create matrices from these arrays.
matrix1 &lt;- array1[,,2]
matrix2 &lt;- array2[,,2]

# Add the matrices.
result &lt;- matrix1+matrix2
print(result)

When we execute the above code, it produces the following result -

     [,1] [,2] [,3]
[1,]   10   20   26
[2,]   18   22   28
[3,]    6   24   30
<h2>Calculations Across Array Elements</h2>
We can do calculations across the elements in an array using the <b>apply()</b> function.

<h3>Syntax</h3>

apply(x, margin, fun)

Following is the description of the parameters used -

<b>x</b> is an array.
<b>margin</b> is the name of the data set used.
<b>fun</b> is the function to be applied across the elements of the array.

<h3>Example</h3>
We use the apply() function below to calculate the sum of the elements in the rows of an array across all the matrices.

<a href="http://tpcg.io/adV7cd" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create two vectors of different lengths.
vector1 &lt;- c(5,9,3)
vector2 &lt;- c(10,11,12,13,14,15)

# Take these vectors as input to the array.
new.array &lt;- array(c(vector1,vector2),dim = c(3,3,2))
print(new.array)

# Use apply to calculate the sum of the rows across all the matrices.
result &lt;- apply(new.array, c(1), sum)
print(result)

When we execute the above code, it produces the following result -

, , 1

     [,1] [,2] [,3]
[1,]    5   10   13
[2,]    9   11   14
[3,]    3   12   15

, , 2

     [,1] [,2] [,3]
[1,]    5   10   13
[2,]    9   11   14
[3,]    3   12   15

[1] 56 68 60
<h2>R - Factors</h2>
Factors are the data objects which are used to categorize the data and store it as levels. 
They can store both strings and integers. 
They are useful in the columns which have a limited number of unique values. 
Like "Male, "Female" and True, False etc. 
They are useful in data analysis for statistical modeling.

Factors are created using the <b>factor ()</b> function by taking a vector as input.

<h2>Example</h2>

<a href="http://tpcg.io/Q04XEe" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a vector as input.
data &lt;- c("East","West","East","North","North","East","West","West","West","East","North")

print(data)
print(is.factor(data))

# Apply the factor function.
factor_data &lt;- factor(data)

print(factor_data)
print(is.factor(factor_data))

When we execute the above code, it produces the following result -

[1] "East"  "West"  "East"  "North" "North" "East"  "West"  "West"  "West"  "East" "North"
[1] FALSE
[1] East  West  East  North North East  West  West  West  East  North
Levels: East North West
[1] TRUE
<h2>Factors in Data Frame</h2>
On creating any data frame with a column of text data, R treats the text column as categorical data and creates factors on it.

<a href="http://tpcg.io/gK9Gr0" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the vectors for data frame.
height &lt;- c(132,151,162,139,166,147,122)
weight &lt;- c(48,49,66,53,67,52,40)
gender &lt;- c("male","male","female","female","male","female","male")

# Create the data frame.
input_data &lt;- data.frame(height,weight,gender)
print(input_data)

# Test if the gender column is a factor.
print(is.factor(input_data$gender))

# Print the gender column so see the levels.
print(input_data$gender)

When we execute the above code, it produces the following result -

  height weight gender
1    132     48   male
2    151     49   male
3    162     66 female
4    139     53 female
5    166     67   male
6    147     52 female
7    122     40   male
[1] TRUE
[1] male   male   female female male   female male  
Levels: female male
<h2>Changing the Order of Levels</h2>
The order of the levels in a factor can be changed by applying the factor function again with new order of the levels.

<a href="http://tpcg.io/vLA7bk" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

data &lt;- c("East","West","East","North","North","East","West",
   "West","West","East","North")
# Create the factors
factor_data &lt;- factor(data)
print(factor_data)

# Apply the factor function with required order of the level.
new_order_data &lt;- factor(factor_data,levels = c("East","West","North"))
print(new_order_data)

When we execute the above code, it produces the following result -

 [1] East  West  East  North North East  West  West  West  East  North
Levels: East North West
 [1] East  West  East  North North East  West  West  West  East  North
Levels: East West North
<h2>Generating Factor Levels</h2>
We can generate factor levels by using the <b>gl()</b> function. 
It takes two integers as input which indicates how many levels and how many times each level.

<h3>Syntax</h3>

gl(n, k, labels)

Following is the description of the parameters used -

<b>n</b> is a integer giving the number of levels.
<b>k</b> is a integer giving the number of replications.
<b>labels</b> is a vector of labels for the resulting factor levels.

<h3>Example</h3>

<a href="http://tpcg.io/IjruEj" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

v &lt;- gl(3, 4, labels = c("Tampa", "Seattle","Boston"))
print(v)

When we execute the above code, it produces the following result -

Tampa   Tampa   Tampa   Tampa   Seattle Seattle Seattle Seattle Boston 
[10] Boston  Boston  Boston 
Levels: Tampa Seattle Boston
<h2>R - Data Frames</h2>
A data frame is a table or a two-dimensional array-like structure in which each column contains values of one variable and each row contains one set of values from each column.

Following are the characteristics of a data frame.

The column names should be non-empty.</li>
The row names should be unique.</li>
The data stored in a data frame can be of numeric, factor or character type.</li>
Each column should contain same number of data items.</li>

<h2>Create Data Frame </h2>

<a href="http://tpcg.io/k9JHFY" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5), 
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25), 
   
   start_date = as.Date(c("2012-01-01", "2013-09-23", "2014-11-15", "2014-05-11",
      "2015-03-27")),
   stringsAsFactors = FALSE
)
# Print the data frame.			
print(emp.data) 

 
When we execute the above code, it produces the following result -

 emp_id    emp_name     salary     start_date
1     1     Rick        623.30     2012-01-01
2     2     Dan         515.20     2013-09-23
3     3     Michelle    611.00     2014-11-15
4     4     Ryan        729.00     2014-05-11
5     5     Gary        843.25     2015-03-27

 
<h2>Get the Structure of the Data Frame</h2>
The structure of the data frame can be seen by using <b>str()</b> function.

<a href="http://tpcg.io/RVhJeK" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5), 
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25), 
   
   start_date = as.Date(c("2012-01-01", "2013-09-23", "2014-11-15", "2014-05-11",
      "2015-03-27")),
   stringsAsFactors = FALSE
)
# Get the structure of the data frame.
str(emp.data)

When we execute the above code, it produces the following result -

'data.frame':   5 obs. 
of  4 variables:
 $ emp_id    : int  1 2 3 4 5
 $ emp_name  : chr  "Rick" "Dan" "Michelle" "Ryan" ...
 $ salary    : num  623 515 611 729 843
 $ start_date: Date, format: "2012-01-01" "2013-09-23" "2014-11-15" "2014-05-11" ...
<h2>Summary of Data in Data Frame</h2>
The statistical summary and nature of the data can be obtained by applying <b>summary()</b> function.

<a href="http://tpcg.io/lPhAAD" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5), 
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25), 
   
   start_date = as.Date(c("2012-01-01", "2013-09-23", "2014-11-15", "2014-05-11",
      "2015-03-27")),
   stringsAsFactors = FALSE
)
# Print the summary.
print(summary(emp.data))  

When we execute the above code, it produces the following result -

     emp_id    emp_name             salary        start_date        
 Min. 
  :1   Length:5           Min. 
  :515.2   Min. 
  :2012-01-01  
 1st Qu.:2   Class :character   1st Qu.:611.0   1st Qu.:2013-09-23  
 Median :3   Mode  :character   Median :623.3   Median :2014-05-11  
 Mean   :3                      Mean   :664.4   Mean   :2014-01-14  
 3rd Qu.:4                      3rd Qu.:729.0   3rd Qu.:2014-11-15  
 Max. 
  :5                      Max. 
  :843.2   Max. 
  :2015-03-27 
<h2>Extract Data from Data Frame</h2>
Extract specific column from a data frame using column name.

<a href="http://tpcg.io/dG3CGt" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5),
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25),
   
   start_date = as.Date(c("2012-01-01","2013-09-23","2014-11-15","2014-05-11",
      "2015-03-27")),
   stringsAsFactors = FALSE
)
# Extract Specific columns.
result &lt;- data.frame(emp.data$emp_name,emp.data$salary)
print(result)

When we execute the above code, it produces the following result -

  emp.data.emp_name emp.data.salary
1              Rick          623.30
2               Dan          515.20
3          Michelle          611.00
4              Ryan          729.00
5              Gary          843.25

 
Extract the first two rows and then all columns

<a href="http://tpcg.io/8szIOB" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5),
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25),
   
   start_date = as.Date(c("2012-01-01", "2013-09-23", "2014-11-15", "2014-05-11",
      "2015-03-27")),
   stringsAsFactors = FALSE
)
# Extract first two rows.
result &lt;- emp.data[1:2,]
print(result)

When we execute the above code, it produces the following result -

  emp_id    emp_name   salary    start_date
1      1     Rick      623.3     2012-01-01
2      2     Dan       515.2     2013-09-23

Extract 3<sup>rd</sup> and 5<sup>th</sup> row with 2<sup>nd</sup> and 4<sup>th</sup> column

<a href="http://tpcg.io/Kw5R7t" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5), 
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25), 
   
	start_date = as.Date(c("2012-01-01", "2013-09-23", "2014-11-15", "2014-05-11",
      "2015-03-27")),
   stringsAsFactors = FALSE
)

# Extract 3rd and 5th row with 2nd and 4th column.
result &lt;- emp.data[c(3,5),c(2,4)]
print(result)

When we execute the above code, it produces the following result -

  emp_name start_date
3 Michelle 2014-11-15
5     Gary 2015-03-27
<h2>Expand Data Frame</h2>
A data frame can be expanded by adding columns and rows.

<h3>Add Column</h3>
Just add the column vector using a new column name.

<a href="http://tpcg.io/sIwnfo" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5), 
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25), 
   
   start_date = as.Date(c("2012-01-01", "2013-09-23", "2014-11-15", "2014-05-11",
      "2015-03-27")),
   stringsAsFactors = FALSE
)

# Add the "dept" coulmn.
emp.data$dept &lt;- c("IT","Operations","IT","HR","Finance")
v &lt;- emp.data
print(v)

When we execute the above code, it produces the following result -

  emp_id   emp_name    salary    start_date       dept
1     1    Rick        623.30    2012-01-01       IT
2     2    Dan         515.20    2013-09-23       Operations
3     3    Michelle    611.00    2014-11-15       IT
4     4    Ryan        729.00    2014-05-11       HR
5     5    Gary        843.25    2015-03-27       Finance

<h3>Add Row</h3>
To add more rows permanently to an existing data frame, we need to bring in the new rows in the same structure as the existing data frame and use the <b>rbind()</b> function.

In the example below we create a data frame with new rows and merge it with the existing data frame to create the final data frame.

<a href="http://tpcg.io/YZk7nr" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the first data frame.
emp.data &lt;- data.frame(
   emp_id = c (1:5), 
   emp_name = c("Rick","Dan","Michelle","Ryan","Gary"),
   salary = c(623.3,515.2,611.0,729.0,843.25), 
   
   start_date = as.Date(c("2012-01-01", "2013-09-23", "2014-11-15", "2014-05-11",
      "2015-03-27")),
   dept = c("IT","Operations","IT","HR","Finance"),
   stringsAsFactors = FALSE
)

# Create the second data frame
emp.newdata &lt;- 	data.frame(
   emp_id = c (6:8), 
   emp_name = c("Rasmi","Pranab","Tusar"),
   salary = c(578.0,722.5,632.8), 
   start_date = as.Date(c("2013-05-21","2013-07-30","2014-06-17")),
   dept = c("IT","Operations","Fianance"),
   stringsAsFactors = FALSE
)

# Bind the two data frames.
emp.finaldata &lt;- rbind(emp.data,emp.newdata)
print(emp.finaldata)

When we execute the above code, it produces the following result -

  emp_id     emp_name    salary     start_date       dept
1      1     Rick        623.30     2012-01-01       IT
2      2     Dan         515.20     2013-09-23       Operations
3      3     Michelle    611.00     2014-11-15       IT
4      4     Ryan        729.00     2014-05-11       HR
5      5     Gary        843.25     2015-03-27       Finance
6      6     Rasmi       578.00     2013-05-21       IT
7      7     Pranab      722.50     2013-07-30       Operations
8      8     Tusar       632.80     2014-06-17       Fianance
<h2>R - Packages</h2>
R packages are a collection of R functions, complied code and sample data. 
They are stored under a directory called <b>"library"</b> in the R environment. 
By default, R installs a set of packages during installation. 
More packages are added later, when they are needed for some specific purpose. 
When we start the R console, only the default packages are available by default. 
Other packages which are already installed have to be loaded explicitly to be used by the R program that is going to use them.

All the packages available in R language are listed at <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html" target="_blank" rel="nofollow">R Packages.</a>

Below is a list of commands to be used to check, verify and use the R packages.

<h2>Check Available R Packages</h2>
Get library locations containing R packages

<a href="http://tpcg.io/MfTDys" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

.libPaths()

When we execute the above code, it produces the following result. 
It may vary depending on the local settings of your pc.

[2] "C:/Program Files/R/R-3.2.2/library"
<h2>Get the list of all the packages installed</h2>

<a href="http://tpcg.io/DEnHgl" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

library()

When we execute the above code, it produces the following result. 
It may vary depending on the local settings of your pc.

Packages in library ‘C:/Program Files/R/R-3.2.2/library’:

base                    The R Base Package
boot                    Bootstrap Functions (Originally by Angelo Canty
                        for S)
class                   Functions for Classification
cluster                 "Finding Groups in Data": Cluster Analysis
                        Extended Rousseeuw et al.
codetools               Code Analysis Tools for R
compiler                The R Compiler Package
datasets                The R Datasets Package
foreign                 Read Data Stored by 'Minitab', 'S', 'SAS',
                        'SPSS', 'Stata', 'Systat', 'Weka', 'dBase', ...
graphics                The R Graphics Package
grDevices               The R Graphics Devices and Support for Colours
                        and Fonts
grid                    The Grid Graphics Package
KernSmooth              Functions for Kernel Smoothing Supporting Wand
                        & Jones (1995)
lattice                 Trellis Graphics for R
MASS                    Support Functions and Datasets for Venables and
                        Ripley's MASS
Matrix                  Sparse and Dense Matrix Classes and Methods
methods                 Formal Methods and Classes
mgcv                    Mixed GAM Computation Vehicle with GCV/AIC/REML
                        Smoothness Estimation
nlme                    Linear and Nonlinear Mixed Effects Models
nnet                    Feed-Forward Neural Networks and Multinomial
                        Log-Linear Models
parallel                Support for Parallel computation in R
rpart                   Recursive Partitioning and Regression Trees
spatial                 Functions for Kriging and Point Pattern
                        Analysis
splines                 Regression Spline Functions and Classes
stats                   The R Stats Package
stats4                  Statistical Functions using S4 Classes
survival                Survival Analysis
tcltk                   Tcl/Tk Interface
tools                   Tools for Package Development
utils                   The R Utils Package

Get all packages currently loaded in the R environment

<a href="http://tpcg.io/VPFDZb" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

search()

When we execute the above code, it produces the following result. 
It may vary depending on the local settings of your pc.

[1] ".GlobalEnv"        "package:stats"     "package:graphics" 
[4] "package:grDevices" "package:utils"     "package:datasets" 
[7] "package:methods"   "Autoloads"         "package:base" 
<h2>Install a New Package</h2>
There are two ways to add new R packages. 
One is installing directly from the CRAN directory and another is downloading the package to your local system and installing it manually.

<h2>Install directly from CRAN</h2>
The following command gets the packages directly from CRAN webpage and installs the package in the R environment. 
You may be prompted to choose a nearest mirror. 
Choose the one appropriate to your location.

 install.packages("Package Name")
 
# Install the package named "XML".
 install.packages("XML")
<h2>Install package manually</h2>
Go to the link <a target="_blank" rel="nofollow" href="https://cran.r-project.org/web/packages/available_packages_by_name.html">R Packages</a> to download the package needed. 
Save the package as a <b>.zip</b> file in a suitable location in the local system.

Now you can run the following command to install this package in the R environment.

install.packages(file_name_with_path, repos = NULL, type = "source")

# Install the package named "XML"
install.packages("E:/XML_3.98-1.3.zip", repos = NULL, type = "source")
<h2>Load Package to Library</h2>
Before a package can be used in the code, it must be loaded to the current R environment. 
You also need to load a package that is already installed previously but not available in the current environment.

A package is loaded using the following command -

library("package Name", lib.loc = "path to library")

# Load the package named "XML"
install.packages("E:/XML_3.98-1.3.zip", repos = NULL, type = "source")
<h2>R - Data Reshaping</h2>
Data Reshaping in R is about changing the way data is organized into rows and columns. 
Most of the time data processing in R is done by taking the input data as a data frame. 
It is easy to extract data from the rows and columns of a data frame but there are situations when we need the data frame in a format that is different from format in which we received it. 
R has many functions to split, merge and change the rows to columns and vice-versa in a data frame.

<h2>Joining Columns and Rows in a Data Frame</h2>
We can join multiple vectors to create a data frame using the <b>cbind()</b>function. 
Also we can merge two data frames using <b>rbind()</b> function.

<a href="http://tpcg.io/7i2Rxu" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create vector objects.
city &lt;- c("Tampa","Seattle","Hartford","Denver")
state &lt;- c("FL","WA","CT","CO")
zipcode &lt;- c(33602,98104,06161,80294)

# Combine above three vectors into one data frame.
addresses &lt;- cbind(city,state,zipcode)

# Print a header.
cat("# # # # The First data frame\n") 

# Print the data frame.
print(addresses)

# Create another data frame with similar columns
new.address &lt;- data.frame(
   city = c("Lowry","Charlotte"),
   state = c("CO","FL"),
   zipcode = c("80230","33949"),
   stringsAsFactors = FALSE
)

# Print a header.
cat("# # # The Second data frame\n") 

# Print the data frame.
print(new.address)

# Combine rows form both the data frames.
all.addresses &lt;- rbind(addresses,new.address)

# Print a header.
cat("# # # The combined data frame\n") 

# Print the result.
print(all.addresses)

When we execute the above code, it produces the following result -

# # # # The First data frame
     city       state zipcode
[1,] "Tampa"    "FL"  "33602"
[2,] "Seattle"  "WA"  "98104"
[3,] "Hartford" "CT"   "6161" 
[4,] "Denver"   "CO"  "80294"

# # # The Second data frame
       city       state   zipcode
1      Lowry      CO      80230
2      Charlotte  FL      33949

# # # The combined data frame
       city      state zipcode
1      Tampa     FL    33602
2      Seattle   WA    98104
3      Hartford  CT     6161
4      Denver    CO    80294
5      Lowry     CO    80230
6     Charlotte  FL    33949
<h2>Merging Data Frames</h2>
We can merge two data frames by using the <b>merge()</b> function. 
The data frames must have same column names on which the merging happens.

In the example below, we consider the data sets about Diabetes in Pima Indian Women available in the library names "MASS". 
we merge the two data sets based on the values of blood pressure("bp") and body mass index("bmi"). 
On choosing these two columns for merging, the records where values of these two variables match in both data sets are combined together to form a single data frame.

<a href="http://tpcg.io/sAtL0f" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

library(MASS)
merged.Pima &lt;- merge(x = Pima.te, y = Pima.tr,
   by.x = c("bp", "bmi"),
   by.y = c("bp", "bmi")
)
print(merged.Pima)
nrow(merged.Pima)

When we execute the above code, it produces the following result -

   bp  bmi npreg.x glu.x skin.x ped.x age.x type.x npreg.y glu.y skin.y ped.y
1  60 33.8       1   117     23 0.466    27     No       2   125     20 0.088
2  64 29.7       2    75     24 0.370    33     No       2   100     23 0.368
3  64 31.2       5   189     33 0.583    29    Yes       3   158     13 0.295
4  64 33.2       4   117     27 0.230    24     No       1    96     27 0.289
5  66 38.1       3   115     39 0.150    28     No       1   114     36 0.289
6  68 38.5       2   100     25 0.324    26     No       7   129     49 0.439
7  70 27.4       1   116     28 0.204    21     No       0   124     20 0.254
8  70 33.1       4    91     32 0.446    22     No       9   123     44 0.374
9  70 35.4       9   124     33 0.282    34     No       6   134     23 0.542
10 72 25.6       1   157     21 0.123    24     No       4    99     17 0.294
11 72 37.7       5    95     33 0.370    27     No       6   103     32 0.324
12 74 25.9       9   134     33 0.460    81     No       8   126     38 0.162
13 74 25.9       1    95     21 0.673    36     No       8   126     38 0.162
14 78 27.6       5    88     30 0.258    37     No       6   125     31 0.565
15 78 27.6      10   122     31 0.512    45     No       6   125     31 0.565
16 78 39.4       2   112     50 0.175    24     No       4   112     40 0.236
17 88 34.5       1   117     24 0.403    40    Yes       4   127     11 0.598
   age.y type.y
1     31     No
2     21     No
3     24     No
4     21     No
5     21     No
6     43    Yes
7     36    Yes
8     40     No
9     29    Yes
10    28     No
11    55     No
12    39     No
13    39     No
14    49    Yes
15    49    Yes
16    38     No
17    28     No
[1] 17
<h2>Melting and Casting</h2>
One of the most interesting aspects of R programming is about changing the shape of the data in multiple steps to get a desired shape. 
The functions used to do this are called <b>melt()</b> and <b>cast()</b>.

"melt" data so that each row is a unique id-variable combination. 
"cast" the melted data into any shape you would like.

mydata
id	time	x1	x2
1	1	5	6
1	2	3	5
2	1	6	1
2	2	2	4

library(reshape)
melteddata <- melt(mydata, id=c("id","time"))

newdata
id	time	variable	value
1	1	x1	5
1	2	x1	3
2	1	x1	6
2	2	x1	2
1	1	x2	6
1	2	x2	5
2	1	x2	1
2	2	x2	4

# cast the melted data
# cast(data, formula, function)
subjmeans <- cast(melteddata, id~variable, mean)
timemeans <- cast(melteddata, time~variable, mean)

subjmeans
id	x1	x2
1	4	5.5
2	4	2.5

timemeans
time	x1	x2
1	5.5	3.5
2	2.5	4.5

Another example:
We consider the dataset called ships present in the library called "MASS".

<a href="http://tpcg.io/MfkR2b" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

library(MASS)
print(ships)

When we execute the above code, it produces the following result -

     type year   period   service   incidents
1     A   60     60        127         0
2     A   60     75         63         0
3     A   65     60       1095         3
.............

<h2>Melt the Data</h2>
Now we melt the data to organize it, converting all columns other than type and year into multiple rows.

library(reshape2)

molten.ships &lt;- melt(ships, id = c("type","year"))
print(molten.ships)

When we execute the above code, it produces the following result with diff structure

      type year  variable  value
1      A   60    period      60
2      A   60    period      75
............
41     A   60    service    127
...........
101    C   70    incidents    6
102    C   70    incidents    2
...........
<h2>Cast the Molten Data</h2>
We can cast the molten data into a new form where the aggregate of each type of ship for each year is created. 
It is done using the <b>cast()</b> function.

recasted.ship &lt;- cast(molten.ships, type+year~variable,sum)
print(recasted.ship)

When we execute the above code, it produces the following result -

     type year  period  service  incidents
1     A   60    135       190      0
2     A   65    135      2190      7
3     A   70    135      4865     24
4     A   75    135      2244     11
5     B   60    135     62058     68
6     B   65    135     48979    111
7     B   70    135     20163     56
8     B   75    135      7117     18
9     C   60    135      1731      2
10    C   65    135      1457      1
11    C   70    135      2731      8
12    C   75    135       274      1
13    D   60    135       356      0
14    D   65    135       480      0
15    D   70    135      1557     13
16    D   75    135      2051      4
17    E   60    135        45      0
18    E   65    135      1226     14
19    E   70    135      3318     17
20    E   75    135       542      1
<h2>R - CSV Files</h2>
In R, we can read data from files stored outside the R environment. 
We can also write data into files which will be stored and accessed by the operating system. 
R can read and write into various file formats like csv, excel, xml etc.

In this chapter we will learn to read data from a csv file and then write data into a csv file. 
The file should be present in current working directory so that R can read it. 
Of course we can also set our own directory and read files from there.

<h2>Getting and Setting the Working Directory</h2>
You can check which directory the R workspace is pointing to using the <b>getwd()</b> function. 
You can also set a new working directory using <b>setwd()</b>function.

# Get and print current working directory.
print(getwd())

# Set current working directory.
setwd("/web/com")

# Get and print current working directory.
print(getwd())

When we execute the above code, it produces the following result -

[1] "/web/com/1441086124_2016"
[1] "/web/com"

This result depends on your OS and your current directory where you are working.

<h2>Input as CSV File</h2>
The csv file is a text file in which the values in the columns are separated by a comma. 
Let's consider the following data present in the file named <b>input.csv</b>.

You can create this file using windows notepad by copying and pasting this data. 
Save the file as <b>input.csv</b> using the save As All files(*.*) option in notepad.

id,name,salary,start_date,dept
1,Rick,623.3,2012-01-01,IT
2,Dan,515.2,2013-09-23,Operations
3,Michelle,611,2014-11-15,IT
4,Ryan,729,2014-05-11,HR
5,Gary,843.25,2015-03-27,Finance
6,Nina,578,2013-05-21,IT
7,Simon,632.8,2013-07-30,Operations
8,Guru,722.5,2014-06-17,Finance
<h2>Reading a CSV File</h2>
Following is a simple example of <b>read.csv()</b> function to read a CSV file available in your current working directory -

data &lt;- read.csv("input.csv")
print(data)

When we execute the above code, it produces the following result -

      id,   name,    salary,   start_date,     dept
1      1    Rick     623.30    2012-01-01      IT
2      2    Dan      515.20    2013-09-23      Operations
3      3    Michelle 611.00    2014-11-15      IT
4      4    Ryan     729.00    2014-05-11      HR
5     NA    Gary     843.25    2015-03-27      Finance
6      6    Nina     578.00    2013-05-21      IT
7      7    Simon    632.80    2013-07-30      Operations
8      8    Guru     722.50    2014-06-17      Finance
<h2>Analyzing the CSV File</h2>
By default the <b>read.csv()</b> function gives the output as a data frame. 
This can be easily checked as follows. 
Also we can check the number of columns and rows.

 
data &lt;- read.csv("input.csv")

print(is.data.frame(data))
print(ncol(data))
print(nrow(data))

When we execute the above code, it produces the following result -

[1] TRUE
[1] 5
[1] 8

Once we read data in a data frame, we can apply all the functions applicable to data frames as explained in subsequent section.

<h3>Get the maximum salary</h3>

# Create a data frame.
data &lt;- read.csv("input.csv")

# Get the max salary from data frame.
sal &lt;- max(data$salary)
print(sal)

When we execute the above code, it produces the following result -

[1] 843.25

<h3>Get the details of the person with max salary</h3>
We can fetch rows meeting specific filter criteria similar to a SQL where clause.

# Create a data frame.
data &lt;- read.csv("input.csv")

# Get the max salary from data frame.
sal &lt;- max(data$salary)

# Get the person detail having max salary.
retval &lt;- subset(data, salary == max(salary))
print(retval)

When we execute the above code, it produces the following result -

      id    name  salary  start_date    dept
5     NA    Gary  843.25  2015-03-27    Finance

<h3>Get all the people working in IT department</h3>

# Create a data frame.
data &lt;- read.csv("input.csv")

retval &lt;- subset( data, dept == "IT")
print(retval)

When we execute the above code, it produces the following result -

       id   name      salary   start_date   dept
1      1    Rick      623.3    2012-01-01   IT
3      3    Michelle  611.0    2014-11-15   IT
6      6    Nina      578.0    2013-05-21   IT

<h3>Get the persons in IT department whose salary is greater than 600</h3>

# Create a data frame.
data &lt;- read.csv("input.csv")

info &lt;- subset(data, salary > 600 &amp; dept == "IT")
print(info)

When we execute the above code, it produces the following result -

       id   name      salary   start_date   dept
1      1    Rick      623.3    2012-01-01   IT
3      3    Michelle  611.0    2014-11-15   IT

<h3>Get the people who joined on or after 2014</h3>

# Create a data frame.
data &lt;- read.csv("input.csv")

retval &lt;- subset(data, as.Date(start_date) > as.Date("2014-01-01"))
print(retval)

When we execute the above code, it produces the following result -

       id   name     salary   start_date    dept
3      3    Michelle 611.00   2014-11-15    IT
4      4    Ryan     729.00   2014-05-11    HR
5     NA    Gary     843.25   2015-03-27    Finance
8      8    Guru     722.50   2014-06-17    Finance
<h2>Writing into a CSV File</h2>
R can create csv file form existing data frame. 
The <b>write.csv()</b> function is used to create the csv file. 
This file gets created in the working directory.

# Create a data frame.
data &lt;- read.csv("input.csv")
retval &lt;- subset(data, as.Date(start_date) > as.Date("2014-01-01"))

# Write filtered data into a new file.
write.csv(retval,"output.csv")
newdata &lt;- read.csv("output.csv")
print(newdata)

When we execute the above code, it produces the following result -

  X      id   name      salary   start_date    dept
1 3      3    Michelle  611.00   2014-11-15    IT
2 4      4    Ryan      729.00   2014-05-11    HR
3 5     NA    Gary      843.25   2015-03-27    Finance
4 8      8    Guru      722.50   2014-06-17    Finance

Here the column X comes from the data set newper. 
This can be dropped using additional parameters while writing the file.

# Create a data frame.
data &lt;- read.csv("input.csv")
retval &lt;- subset(data, as.Date(start_date) > as.Date("2014-01-01"))

# Write filtered data into a new file.
write.csv(retval,"output.csv", row.names = FALSE)
newdata &lt;- read.csv("output.csv")
print(newdata)

When we execute the above code, it produces the following result -

      id    name      salary   start_date    dept
1      3    Michelle  611.00   2014-11-15    IT
2      4    Ryan      729.00   2014-05-11    HR
3     NA    Gary      843.25   2015-03-27    Finance
4      8    Guru      722.50   2014-06-17    Finance
<h2>R - Excel File</h2>
Microsoft Excel is the most widely used spreadsheet program which stores data in the .xls or .xlsx format. 
R can read directly from these files using some excel specific packages. 
Few such packages are - XLConnect, xlsx, gdata etc. 
We will be using xlsx package. 
R can also write into excel file using this package.

<h2>Install xlsx Package</h2>
You can use the following command in the R console to install the "xlsx" package. 
It may ask to install some additional packages on which this package is dependent. 
Follow the same command with required package name to install the additional packages.

install.packages("xlsx")
<h2>Verify and Load the "xlsx" Package</h2>
Use the following command to verify and load the "xlsx" package.

# Verify the package is installed.
any(grepl("xlsx",installed.packages()))

# Load the library into R workspace.
library("xlsx")

When the script is run we get the following output.

[1] TRUE
Loading required package: rJava
Loading required package: methods
Loading required package: xlsxjars
<h2>Input as xlsx File</h2>
Open Microsoft excel. 
Copy and paste the following data in the work sheet named as sheet1.

id	name      salary    start_date	dept
1	Rick	    623.3	  1/1/2012	   IT
2	Dan       515.2     9/23/2013    Operations
3	Michelle  611	     11/15/2014	IT
4	Ryan	    729	     5/11/2014	   HR
5	Gary	    43.25     3/27/2015  	Finance
6	Nina	    578       5/21/2013	   IT
7	Simon	    632.8	  7/30/2013	   Operations
8	Guru	    722.5	  6/17/2014	   Finance

Also copy and paste the following data to another worksheet and rename this worksheet to "city".

name	    city
Rick	    Seattle
Dan       Tampa
Michelle  Chicago
Ryan	    Seattle
Gary	    Houston
Nina	    Boston
Simon	    Mumbai
Guru	    Dallas

Save the Excel file as "input.xlsx". 
You should save it in the current working directory of the R workspace.

<h2>Reading the Excel File</h2>
The input.xlsx is read by using the <b>read.xlsx()</b> function as shown below. 
The result is stored as a data frame in the R environment.

# Read the first worksheet in the file input.xlsx.
data &lt;- read.xlsx("input.xlsx", sheetIndex = 1)
print(data)

When we execute the above code, it produces the following result -

      id,   name,     salary,   start_date,   dept
1      1    Rick      623.30    2012-01-01    IT
2      2    Dan       515.20    2013-09-23    Operations
3      3    Michelle  611.00    2014-11-15    IT
4      4    Ryan      729.00    2014-05-11    HR
5     NA    Gary      843.25    2015-03-27    Finance
6      6    Nina      578.00    2013-05-21    IT
7      7    Simon     632.80    2013-07-30    Operations
8      8    Guru      722.50    2014-06-17    Finance
<h2>R - Binary Files</h2>
A binary file is a file that contains information stored only in form of bits and bytes.(0’s and 1’s). 
They are not human readable as the bytes in it translate to characters and symbols which contain many other non-printable characters. 
Attempting to read a binary file using any text editor will show characters like &Oslash; and &eth;.

The binary file has to be read by specific programs to be useable. 
For example, the binary file of a Microsoft Word program can be read to a human readable form only by the Word program. 
Which indicates that, besides the human readable text, there is a lot more information like formatting of characters and page numbers etc., which are also stored along with alphanumeric characters. 
And finally a binary file is a continuous sequence of bytes. 
The line break we see in a text file is a character joining first line to the next.

Sometimes, the data generated by other programs are required to be processed by R as a binary file. 
Also R is required to create binary files which can be shared with other programs.

R has two functions <b>WriteBin()</b> and <b>readBin()</b> to create and read binary files.

<h3>Syntax</h3>

writeBin(object, con)
readBin(con, what, n )

Following is the description of the parameters used -

<b>con</b> is the connection object to read or write the binary file.
<b>object</b> is the binary file which to be written.
<b>what</b> is the mode like character, integer etc. 
representing the bytes to be read.
<b>n</b> is the number of bytes to read from the binary file.

<h3>Example</h3>
We consider the R inbuilt data "mtcars". 
First we create a csv file from it and convert it to a binary file and store it as a OS file. 
Next we read this binary file created into R.

<h2>Writing the Binary File</h2>
We read the data frame "mtcars" as a csv file and then write it as a binary file to the OS.

# Read the "mtcars" data frame as a csv file and store only the columns 
   "cyl", "am" and "gear".
write.table(mtcars, file = "mtcars.csv",row.names = FALSE, na = "", 
   col.names = TRUE, sep = ",")

# Store 5 records from the csv file as a new data frame.
new.mtcars &lt;- read.table("mtcars.csv",sep = ",",header = TRUE,nrows = 5)

# Create a connection object to write the binary file using mode "wb".
write.filename = file("/web/com/binmtcars.dat", "wb")

# Write the column names of the data frame to the connection object.
writeBin(colnames(new.mtcars), write.filename)

# Write the records in each of the column to the file.
writeBin(c(new.mtcars$cyl,new.mtcars$am,new.mtcars$gear), write.filename)

# Close the file for writing so that it can be read by other program.
close(write.filename)
<h2>Reading the Binary File</h2>
The binary file created above stores all the data as continuous bytes. 
So we will read it by choosing appropriate values of column names as well as the column values.

# Create a connection object to read the file in binary mode using "rb".
read.filename &lt;- file("/web/com/binmtcars.dat", "rb")

# First read the column names. 
n = 3 as we have 3 columns.
column.names &lt;- readBin(read.filename, character(),  n = 3)

# Next read the column values. 
n = 18 as we have 3 column names and 15 values.
read.filename &lt;- file("/web/com/binmtcars.dat", "rb")
bindata &lt;- readBin(read.filename, integer(),  n = 18)

# Print the data.
print(bindata)

# Read the values from 4th byte to 8th byte which represents "cyl".
cyldata = bindata[4:8]
print(cyldata)

# Read the values form 9th byte to 13th byte which represents "am".
amdata = bindata[9:13]
print(amdata)

# Read the values form 9th byte to 13th byte which represents "gear".
geardata = bindata[14:18]
print(geardata)

# Combine all the read values to a dat frame.
finaldata = cbind(cyldata, amdata, geardata)
colnames(finaldata) = column.names
print(finaldata)

When we execute the above code, it produces the following result and chart -

 [1]    7108963 1728081249    7496037          6          6          4
 [7]          6          8          1          1          1          0
[13]          0          4          4          4          3          3

[1] 6 6 4 6 8

[1] 1 1 1 0 0

[1] 4 4 4 3 3

     cyl am gear
[1,]   6  1    4
[2,]   6  1    4
[3,]   4  1    4
[4,]   6  0    3
[5,]   8  0    3

As we can see, we got the original data back by reading the binary file in R.

<h2>R - XML Files</h2>
XML is a file format which shares both the file format and the data on the World Wide Web, intranets, and elsewhere using standard ASCII text. 
It stands for Extensible Markup Language (XML). 
Similar to HTML it contains markup tags. 
But unlike HTML where the markup tag describes structure of the page, in xml the markup tags describe the meaning of the data contained into he file.

You can read a xml file in R using the "XML" package. 
This package can be installed using following command.

install.packages("XML")
<h2>Input Data</h2>
Create a XMl file by copying the below data into a text editor like notepad. 
Save the file with a <b>.xml</b> extension and choosing the file type as <b>all files(*.*)</b>.

&lt;RECORDS>
   &lt;EMPLOYEE>
      &lt;ID>1&lt;/ID>
      &lt;NAME>Rick&lt;/NAME>
      &lt;SALARY>623.3&lt;/SALARY>
      &lt;STARTDATE>1/1/2012&lt;/STARTDATE>
      &lt;DEPT>IT&lt;/DEPT>
   &lt;/EMPLOYEE>
	
   &lt;EMPLOYEE>
      &lt;ID>2&lt;/ID>
      &lt;NAME>Dan&lt;/NAME>
      &lt;SALARY>515.2&lt;/SALARY>
      &lt;STARTDATE>9/23/2013&lt;/STARTDATE>
      &lt;DEPT>Operations&lt;/DEPT>
   &lt;/EMPLOYEE>
   
   &lt;EMPLOYEE>
      &lt;ID>3&lt;/ID>
      &lt;NAME>Michelle&lt;/NAME>
      &lt;SALARY>611&lt;/SALARY>
      &lt;STARTDATE>11/15/2014&lt;/STARTDATE>
      &lt;DEPT>IT&lt;/DEPT>
   &lt;/EMPLOYEE>
   
   &lt;EMPLOYEE>
      &lt;ID>4&lt;/ID>
      &lt;NAME>Ryan&lt;/NAME>
      &lt;SALARY>729&lt;/SALARY>
      &lt;STARTDATE>5/11/2014&lt;/STARTDATE>
      &lt;DEPT>HR&lt;/DEPT>
   &lt;/EMPLOYEE>
   
   &lt;EMPLOYEE>
      &lt;ID>5&lt;/ID>
      &lt;NAME>Gary&lt;/NAME>
      &lt;SALARY>843.25&lt;/SALARY>
      &lt;STARTDATE>3/27/2015&lt;/STARTDATE>
      &lt;DEPT>Finance&lt;/DEPT>
   &lt;/EMPLOYEE>
   
   &lt;EMPLOYEE>
      &lt;ID>6&lt;/ID>
      &lt;NAME>Nina&lt;/NAME>
      &lt;SALARY>578&lt;/SALARY>
      &lt;STARTDATE>5/21/2013&lt;/STARTDATE>
      &lt;DEPT>IT&lt;/DEPT>
   &lt;/EMPLOYEE>
   
   &lt;EMPLOYEE>
      &lt;ID>7&lt;/ID>
      &lt;NAME>Simon&lt;/NAME>
      &lt;SALARY>632.8&lt;/SALARY>
      &lt;STARTDATE>7/30/2013&lt;/STARTDATE>
      &lt;DEPT>Operations&lt;/DEPT>
   &lt;/EMPLOYEE>
   
   &lt;EMPLOYEE>
      &lt;ID>8&lt;/ID>
      &lt;NAME>Guru&lt;/NAME>
      &lt;SALARY>722.5&lt;/SALARY>
      &lt;STARTDATE>6/17/2014&lt;/STARTDATE>
      &lt;DEPT>Finance&lt;/DEPT>
   &lt;/EMPLOYEE>
	
&lt;/RECORDS>
<h2>Reading XML File</h2>
The xml file is read by R using the function <b>xmlParse()</b>. 
It is stored as a list in R.

# Load the package required to read XML files.
library("XML")

# Also load the other required package.
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Print the result.
print(result)

When we execute the above code, it produces the following result -

1
Rick
623.3
1/1/2012
IT

2
Dan
515.2
9/23/2013
Operations

3
Michelle
611
11/15/2014
IT

4
Ryan
729
5/11/2014
HR

5
Gary
843.25
3/27/2015
Finance

6
Nina
578
5/21/2013
IT

7
Simon
632.8
7/30/2013
Operations

8
Guru
722.5
6/17/2014
Finance

<h3>Get Number of Nodes Present in XML File</h3>

# Load the packages required to read XML files.
library("XML")
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Exract the root node form the xml file.
rootnode &lt;- xmlRoot(result)

# Find number of nodes in the root.
rootsize &lt;- xmlSize(rootnode)

# Print the result.
print(rootsize)

When we execute the above code, it produces the following result -

output
[1] 8
<h2>Details of the First Node</h2>
Let's look at the first record of the parsed file. 
It will give us an idea of the various elements present in the top level node.

# Load the packages required to read XML files.
library("XML")
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Exract the root node form the xml file.
rootnode &lt;- xmlRoot(result)

# Print the result.
print(rootnode[1])

When we execute the above code, it produces the following result -

$EMPLOYEE
   1
   Rick
   623.3
   1/1/2012
   IT
 

attr(,"class")
[1] "XMLInternalNodeList" "XMLNodeList" 

<h3>Get Different Elements of a Node</h3>

# Load the packages required to read XML files.
library("XML")
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Exract the root node form the xml file.
rootnode &lt;- xmlRoot(result)

# Get the first element of the first node.
print(rootnode[[1]][[1]])

# Get the fifth element of the first node.
print(rootnode[[1]][[5]])

# Get the second element of the third node.
print(rootnode[[3]][[2]])

When we execute the above code, it produces the following result -

1 
IT 
Michelle 
<h2>XML to Data Frame</h2>
To handle the data effectively in large files we read the data in the xml file as a data frame. 
Then process the data frame for data analysis.

# Load the packages required to read XML files.
library("XML")
library("methods")

# Convert the input xml file to a data frame.
xmldataframe &lt;- xmlToDataFrame("input.xml")
print(xmldataframe)

When we execute the above code, it produces the following result -

      ID    NAME     SALARY    STARTDATE       DEPT 
1      1    Rick     623.30    2012-01-01      IT
2      2    Dan      515.20    2013-09-23      Operations
3      3    Michelle 611.00    2014-11-15      IT
4      4    Ryan     729.00    2014-05-11      HR
5     NA    Gary     843.25    2015-03-27      Finance
6      6    Nina     578.00    2013-05-21      IT
7      7    Simon    632.80    2013-07-30      Operations
8      8    Guru     722.50    2014-06-17      Finance

As the data is now available as a dataframe we can use data frame related function to read and manipulate the file.

<h2>R - JSON Files</h2>
JSON file stores data as text in human-readable format. 
Json stands for JavaScript Object Notation. 
R can read JSON files using the rjson package.

<h2>Install rjson Package</h2>
In the R console, you can issue the following command to install the rjson package.

install.packages("rjson")
<h2>Input Data</h2>
Create a JSON file by copying the below data into a text editor like notepad. 
Save the file with a <b>.json</b> extension and choosing the file type as <b>all files(*.*)</b>.

{ 
   "ID":["1","2","3","4","5","6","7","8" ],
   "Name":["Rick","Dan","Michelle","Ryan","Gary","Nina","Simon","Guru" ],
   "Salary":["623.3","515.2","611","729","843.25","578","632.8","722.5" ],
   
   "StartDate":[ "1/1/2012","9/23/2013","11/15/2014","5/11/2014","3/27/2015","5/21/2013",
      "7/30/2013","6/17/2014"],
   "Dept":[ "IT","Operations","IT","HR","Finance","IT","Operations","Finance"]
}
<h2>Read the JSON File</h2>
The JSON file is read by R using the function from <b>JSON()</b>. 
It is stored as a list in R.

# Load the package required to read JSON files.
library("rjson")

# Give the input file name to the function.
result &lt;- fromJSON(file = "input.json")

# Print the result.
print(result)

When we execute the above code, it produces the following result -

$ID
[1] "1"   "2"   "3"   "4"   "5"   "6"   "7"   "8"

$Name
[1] "Rick"     "Dan"      "Michelle" "Ryan"     "Gary"     "Nina"     "Simon"    "Guru"

$Salary
[1] "623.3"  "515.2"  "611"    "729"    "843.25" "578"    "632.8"  "722.5"

$StartDate
[1] "1/1/2012"   "9/23/2013"  "11/15/2014" "5/11/2014"  "3/27/2015"  "5/21/2013"
   "7/30/2013"  "6/17/2014"

$Dept
[1] "IT"         "Operations" "IT"         "HR"         "Finance"    "IT"
   "Operations" "Finance"
<h2>Convert JSON to a Data Frame</h2>
We can convert the extracted data above to a R data frame for further analysis using the <b>as.data.frame()</b> function.

# Load the package required to read JSON files.
library("rjson")

# Give the input file name to the function.
result &lt;- fromJSON(file = "input.json")

# Convert JSON file to a data frame.
json_data_frame &lt;- as.data.frame(result)

print(json_data_frame)

When we execute the above code, it produces the following result -

      id,   name,    salary,   start_date,     dept
1      1    Rick     623.30    2012-01-01      IT
2      2    Dan      515.20    2013-09-23      Operations
3      3    Michelle 611.00    2014-11-15      IT
4      4    Ryan     729.00    2014-05-11      HR
5     NA    Gary     843.25    2015-03-27      Finance
6      6    Nina     578.00    2013-05-21      IT
7      7    Simon    632.80    2013-07-30      Operations
8      8    Guru     722.50    2014-06-17      Finance
<h2>R - Web Data</h2>
Many websites provide data for consumption by its users. 
For example the World Health Organization(WHO) provides reports on health and medical information in the form of CSV, txt and XML files. 
Using R programs, we can programmatically extract specific data from such websites. 
Some packages in R which are used to scrap data form the web are - "RCurl",XML", and "stringr". 
They are used to connect to the URL’s, identify required links for the files and download them to the local environment.

<h2>Install R Packages</h2>
The following packages are required for processing the URL’s and links to the files. 
If they are not available in your R Environment, you can install them using following commands.

install.packages("RCurl")
install.packages("XML")
install.packages("stringr")
install.packages("plyr")
<h2>Input Data</h2>
We will visit the URL <a href="https://www.geos.ed.ac.uk/~weather/jcmb_ws/" target="_blank" rel="nofollow">weather data</a> and download the CSV files using R for the year 2015.

<h2>Example</h2>
We will use the function <b>getHTMLLinks()</b> to gather the URLs of the files. 
Then we will use the function <b>download.file()</b> to save the files to the local system. 
As we will be applying the same code again and again for multiple files, we will create a function to be called multiple times. 
The filenames are passed as parameters in form of a R list object to this function.

# Read the URL.
url &lt;- "http://www.geos.ed.ac.uk/~weather/jcmb_ws/"

# Gather the html links present in the webpage.
links &lt;- getHTMLLinks(url)

# Identify only the links which point to the JCMB 2015 files. 

filenames &lt;- links[str_detect(links, "JCMB_2015")]

# Store the file names as a list.
filenames_list &lt;- as.list(filenames)

# Create a function to download the files by passing the URL and filename list.
downloadcsv &lt;- function (mainurl,filename) {
   filedetails &lt;- str_c(mainurl,filename)
   download.file(filedetails,filename)
}

# Now apply the l_ply function and save the files into the current R working directory.
l_ply(filenames,downloadcsv,mainurl = "http://www.geos.ed.ac.uk/~weather/jcmb_ws/")
<h2>Verify the File Download</h2>
After running the above code, you can locate the following files in the current R working directory.

"JCMB_2015.csv" "JCMB_2015_Apr.csv" "JCMB_2015_Feb.csv" "JCMB_2015_Jan.csv"
   "JCMB_2015_Mar.csv"
<h2>R - Databases</h2>
The data is Relational database systems are stored in a normalized format. 
So, to carry out statistical computing we will need very advanced and complex Sql queries. 
But R can connect easily to many relational databases like MySql, Oracle, Sql server etc. 
and fetch records from them as a data frame. 
Once the data is available in the R environment, it becomes a normal R data set and can be manipulated or analyzed using all the powerful packages and functions.

In this tutorial we will be using MySql as our reference database for connecting to R.

<h2>RMySQL Package</h2>
R has a built-in package named "RMySQL" which provides native connectivity between with MySql database. 
You can install this package in the R environment using the following command.

install.packages("RMySQL")
<h2>Connecting R to MySql</h2>
Once the package is installed we create a connection object in R to connect to the database. 
It takes the username, password, database name and host name as input.

# Create a connection Object to MySQL database.
# We will connect to the sampel database named "sakila" that comes with MySql installation.
mysqlconnection = dbConnect(MySQL(), user = 'root', password = '', dbname = 'sakila',
   host = 'localhost')

# List the tables available in this database.
 dbListTables(mysqlconnection)

When we execute the above code, it produces the following result -

 [1] "actor"                      "actor_info"                
 [3] "address"                    "category"                  
 [5] "city"                       "country"                   
 [7] "customer"                   "customer_list"             
 [9] "film"                       "film_actor"                
[11] "film_category"              "film_list"                 
[13] "film_text"                  "inventory"                 
[15] "language"                   "nicer_but_slower_film_list"
[17] "payment"                    "rental"                    
[19] "sales_by_film_category"     "sales_by_store"            
[21] "staff"                      "staff_list"                
[23] "store"                     
<h2>Querying the Tables</h2>
We can query the database tables in MySql using the function <b>dbSendQuery()</b>. 
The query gets executed in MySql and the result set is returned using the R <b>fetch()</b> function. 
Finally it is stored as a data frame in R.

# Query the "actor" tables to get all the rows.
result = dbSendQuery(mysqlconnection, "select * from actor")

# Store the result in a R data frame object. 
n = 5 is used to fetch first 5 rows.
data.frame = fetch(result, n = 5)
print(data.fame)

When we execute the above code, it produces the following result -

        actor_id   first_name    last_name         last_update
1        1         PENELOPE      GUINESS           2006-02-15 04:34:33
2        2         NICK          WAHLBERG          2006-02-15 04:34:33
3        3         ED            CHASE             2006-02-15 04:34:33
4        4         JENNIFER      DAVIS             2006-02-15 04:34:33
5        5         JOHNNY        LOLLOBRIGIDA      2006-02-15 04:34:33
<h2>Query with Filter Clause</h2>
We can pass any valid select query to get the result.

result = dbSendQuery(mysqlconnection, "select * from actor where last_name = 'TORN'")

# Fetch all the records(with n = -1) and store it as a data frame.
data.frame = fetch(result, n = -1)
print(data)

When we execute the above code, it produces the following result -

        actor_id    first_name     last_name         last_update
1        18         DAN            TORN              2006-02-15 04:34:33
2        94         KENNETH        TORN              2006-02-15 04:34:33
3       102         WALTER         TORN              2006-02-15 04:34:33
<h2>Updating Rows in the Tables</h2>
We can update the rows in a Mysql table by passing the update query to the dbSendQuery() function.

dbSendQuery(mysqlconnection, "update mtcars set disp = 168.5 where hp = 110")

After executing the above code we can see the table updated in the MySql Environment.

<h2>Inserting Data into the Tables</h2>

dbSendQuery(mysqlconnection,
   "insert into mtcars(row_names, mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb)
   values('New Mazda RX4 Wag', 21, 6, 168.5, 110, 3.9, 2.875, 17.02, 0, 1, 4, 4)"
)

After executing the above code we can see the row inserted into the table in the MySql Environment.

<h2>Creating Tables in MySql</h2>
We can create tables in the MySql using the function <b>dbWriteTable()</b>. 
It overwrites the table if it already exists and takes a data frame as input.

# Create the connection object to the database where we want to create the table.
mysqlconnection = dbConnect(MySQL(), user = 'root', password = '', dbname = 'sakila', 
   host = 'localhost')

# Use the R data frame "mtcars" to create the table in MySql.
# All the rows of mtcars are taken inot MySql.
dbWriteTable(mysqlconnection, "mtcars", mtcars[, ], overwrite = TRUE)

After executing the above code we can see the table created in the MySql Environment.

<h2>Dropping Tables in MySql</h2>
We can drop the tables in MySql database passing the drop table statement into the dbSendQuery() in the same way we used it for querying data from tables.

dbSendQuery(mysqlconnection, 'drop table if exists mtcars')

After executing the above code we can see the table is dropped in the MySql Environment.

<h2>R - Pie Charts</h2>
R Programming language has numerous libraries to create charts and graphs. 
A pie-chart is a representation of values as slices of a circle with different colors. 
The slices are labeled and the numbers corresponding to each slice is also represented in the chart.

In R the pie chart is created using the <b>pie()</b> function which takes positive numbers as a vector input. 
The additional parameters are used to control labels, color, title etc.

<h3>Syntax</h3>
The basic syntax for creating a pie-chart using the R is -

pie(x, labels, radius, main, col, clockwise)

Following is the description of the parameters used -

<b>x</b> is a vector containing the numeric values used in the pie chart.
<b>labels</b> is used to give description to the slices.
<b>radius</b> indicates the radius of the circle of the pie chart.(value between -1 and +1).
<b>main</b> indicates the title of the chart.
<b>col</b> indicates the color palette.
<b>clockwise</b> is a logical value indicating if the slices are drawn clockwise or anti clockwise.

<h3>Example</h3>
A very simple pie-chart is created using just the input vector and labels. 
The below script will create and save the pie chart in the current R working directory.

<a href="http://tpcg.io/9RA309" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create data for the graph.
x &lt;- c(21, 62, 10, 53)
labels &lt;- c("London", "New York", "Singapore", "Mumbai")

# Give the chart file a name.
png(file = "city.png")

# Plot the chart.
pie(x,labels)

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/city.jpg" alt="Pie Chatr using R" />
<h2>Pie Chart Title and Colors</h2>
We can expand the features of the chart by adding more parameters to the function. 
We will use parameter <b>main</b> to add a title to the chart and another parameter is <b>col</b> which will make use of rainbow colour pallet while drawing the chart. 
The length of the pallet should be same as the number of values we have for the chart. 
Hence we use length(x).

<h3>Example</h3>
The below script will create and save the pie chart in the current R working directory.

<a href="http://tpcg.io/lfj0VZ" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create data for the graph.
x &lt;- c(21, 62, 10, 53)
labels &lt;- c("London", "New York", "Singapore", "Mumbai")

# Give the chart file a name.
png(file = "city_title_colours.jpg")

# Plot the chart with title and rainbow color pallet.
pie(x, labels, main = "City pie chart", col = rainbow(length(x)))

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/city_title_colours.jpg" alt="Pie-chart with title and colours" />
<h2>Slice Percentages and Chart Legend</h2>
We can add slice percentage and a chart legend by creating additional chart variables.

<a href="http://tpcg.io/nu6DVu" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create data for the graph.
x &lt;-  c(21, 62, 10,53)
labels &lt;-  c("London","New York","Singapore","Mumbai")

piepercent&lt;- round(100*x/sum(x), 1)

# Give the chart file a name.
png(file = "city_percentage_legends.jpg")

# Plot the chart.
pie(x, labels = piepercent, main = "City pie chart",col = rainbow(length(x)))
legend("topright", c("London","New York","Singapore","Mumbai"), cex = 0.8,
   fill = rainbow(length(x)))

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/city_percentage_legends.jpg" alt="pie-chart with percentage and labels" />
<h2>3D Pie Chart</h2>
A pie chart with 3 dimensions can be drawn using additional packages. 
The package <b>plotrix</b> has a function called <b>pie3D()</b> that is used for this.

<!--<a href="http://tpcg.io/x9yt9B" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Get the library.
library(plotrix)

# Create data for the graph.
x &lt;-  c(21, 62, 10,53)
lbl &lt;-  c("London","New York","Singapore","Mumbai")

# Give the chart file a name.
png(file = "3d_pie_chart.jpg")

# Plot the chart.
pie3D(x,labels = lbl,explode = 0.1, main = "Pie Chart of Countries ")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/3d_pie_chart.jpg" alt="3D pie-chart" />
<h2>R - Bar Charts</h2>
A bar chart represents data in rectangular bars with length of the bar proportional to the value of the variable. 
R uses the function <b>barplot()</b> to create bar charts.
 R can draw both vertical and Horizontal bars in the bar chart.
In bar chart each of the bars can be given different colors.

<h3>Syntax</h3>
The basic syntax to create a bar-chart in R is -

barplot(H,xlab,ylab,main, names.arg,col)

Following is the description of the parameters used -

<b>H</b> is a vector or matrix containing numeric values used in bar chart.</li>
<b>xlab</b> is the label for x axis.</li>
<b>ylab</b> is the label for y axis.</li>
<b>main</b> is the title of the bar chart.</li>
<b>names.arg</b> is a vector of names appearing under each bar.</li>
<b>col</b> is used to give colors to the bars in the graph.</li>

<h3>Example</h3>
A simple bar chart is created using just the input vector and the name of each bar.

 The below script will create and save the bar chart in the current R working directory.

<a href="http://tpcg.io/jq3tAt" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data for the chart
H &lt;- c(7,12,28,3,41)

# Give the chart file a name
png(file = "barchart.png")

# Plot the bar chart 
barplot(H)

# Save the file
dev.off()

When we execute above code, it produces following result -

<img src="/r/images/barchart.png" alt="Bar Chart using R" />
<h2>Bar Chart Labels, Title and Colors</h2>
The features of the bar chart can be expanded by adding more parameters. 
The <b>main</b> parameter is used to add  <b>title</b>. 
The <b>col</b> parameter is used to add colors to the bars. 
The <b>args.name</b> is a vector having same number of values as the input vector to describe the meaning of each bar.

<h3>Example</h3>
The below script will create and save the bar chart in the current R working directory.

<a href="http://tpcg.io/cbEAcG" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data for the chart
H &lt;- c(7,12,28,3,41)
M &lt;- c("Mar","Apr","May","Jun","Jul")

# Give the chart file a name
png(file = "barchart_months_revenue.png")

# Plot the bar chart 
barplot(H,names.arg=M,xlab="Month",ylab="Revenue",col="blue",
main="Revenue chart",border="red")

# Save the file
dev.off()

When we execute above code, it produces following result -

<img src="/r/images/barchart_months_revenue.png" alt="Bar Chart with title using R" />
<h2>Group Bar Chart and Stacked Bar Chart</h2>
We can create bar chart with groups of bars and stacks in each bar by using a matrix as input values.

 More than two variables are represented as a matrix which is used to create the group bar chart and stacked bar chart.

<!--<a href="http://tpcg.io/KzC9Zj" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Create the input vectors.
colors = c("green","orange","brown")
months &lt;- c("Mar","Apr","May","Jun","Jul")
regions &lt;- c("East","West","North")

# Create the matrix of the values.
Values &lt;- matrix(c(2,9,3,11,9,4,8,7,3,12,5,2,8,10,11), nrow = 3, ncol = 5, byrow = TRUE)

# Give the chart file a name
png(file = "barchart_stacked.png")

# Create the bar chart
barplot(Values, main = "total revenue", names.arg = months, xlab = "month", ylab = "revenue", col = colors)

# Add the legend to the chart
legend("topleft", regions, cex = 1.3, fill = colors)

# Save the file
dev.off()

 
<img src="/r/images/barchart_stacked.png" alt=" Stacked Bar Chart using R" />
<h2>R - Boxplots</h2>
Boxplots are a measure of how well distributed is the data in a data set. 
It divides the data set into three quartiles. 
This graph represents the minimum, maximum, median, first quartile and third quartile in the data set. 
It is also useful in comparing the distribution of data across data sets by drawing boxplots for each of them.

Boxplots are created in R by using the <b>boxplot()</b> function.

<h3>Syntax</h3>
The basic syntax to create a boxplot in R is  -

boxplot(x, data, notch, varwidth, names, main)

Following is the description of the parameters used -

<b>x</b> is a vector or a formula.
<b>data</b> is the data frame.
<b>notch</b> is a logical value. 
Set as TRUE to draw a notch.
<b>varwidth</b> is a logical value. 
Set as true to draw width of the box proportionate to the sample size.
<b>names</b> are the group labels which will be printed under each boxplot.
<b>main</b> is used to give a title to the graph.

<h3>Example</h3>
We use the data set "mtcars" available in the R environment to create a basic boxplot. 
Let's look at the columns "mpg" and "cyl" in mtcars.

<a href="http://tpcg.io/5KQVSU" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

input &lt;- mtcars[,c('mpg','cyl')]
print(head(input))

When we execute above code, it produces following result -

                   mpg  cyl
Mazda RX4         21.0   6
Mazda RX4 Wag     21.0   6
Datsun 710        22.8   4
Hornet 4 Drive    21.4   6
Hornet Sportabout 18.7   8
Valiant           18.1   6
<h2>Creating the Boxplot</h2>
The below script will create a boxplot graph for the relation between mpg (miles per gallon) and cyl (number of cylinders).

<a href="http://tpcg.io/2HEgEU" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Give the chart file a name.
png(file = "boxplot.png")

# Plot the chart.
boxplot(mpg ~ cyl, data = mtcars, xlab = "Number of Cylinders",
   ylab = "Miles Per Gallon", main = "Mileage Data")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/boxplot.png" alt="Box Plot using R" />
<h2>Boxplot with Notch</h2>
We can draw boxplot with notch to find out how the medians of different data groups match with each other.

The below script will create a boxplot graph with notch for each of the data group.

<a href="http://tpcg.io/wvTPkv" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Give the chart file a name.
png(file = "boxplot_with_notch.png")

# Plot the chart.
boxplot(mpg ~ cyl, data = mtcars, 
   xlab = "Number of Cylinders",
   ylab = "Miles Per Gallon", 
   main = "Mileage Data",
   notch = TRUE, 
   varwidth = TRUE, 
   col = c("green","yellow","purple"),
   names = c("High","Medium","Low")
)
# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/boxplot_with_notch.png" alt="Box Plot with notch using R" />
<h2>R - Histograms</h2>
A histogram represents the frequencies of values of a variable bucketed into ranges. 
Histogram is similar to bar chat but the difference is it groups the values into continuous ranges. 
Each bar in histogram represents the height of the number of values present in that range.

R creates histogram using <b>hist()</b> function. 
This function takes a vector as an input and uses some more parameters to plot histograms.

<h3>Syntax</h3>
The basic syntax for creating a histogram using R is -

hist(v,main,xlab,xlim,ylim,breaks,col,border)

Following is the description of the parameters used -

<b>v</b> is a vector containing numeric values used in histogram.
<b>main</b> indicates title of the chart.
<b>col</b> is used to set color of the bars.
<b>border</b> is used to set border color of each bar.
<b>xlab</b> is used to give description of x-axis.
<b>xlim</b> is used to specify the range of values on the x-axis.
<b>ylim</b> is used to specify the range of values on the y-axis.
<b>breaks</b> is used to mention the width of each bar.

<h3>Example</h3>
A simple histogram is created using input vector, label, col and border parameters.

The script given below will create and save the histogram in the current R working directory.

<a href="http://tpcg.io/UgZNBY" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create data for the graph.
v &lt;-  c(9,13,21,8,36,22,12,41,31,33,19)

# Give the chart file a name.
png(file = "histogram.png")

# Create the histogram.
hist(v,xlab = "Weight",col = "yellow",border = "blue")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/histogram.png" alt="Histogram Of V" />
<h2>Range of X and Y values</h2>
To specify the range of values allowed in X axis and Y axis, we can use the xlim and ylim parameters.

The width of each of the bar can be decided by using breaks.

<a href="http://tpcg.io/FpQHxd" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create data for the graph.
v &lt;- c(9,13,21,8,36,22,12,41,31,33,19)

# Give the chart file a name.
png(file = "histogram_lim_breaks.png")

# Create the histogram.
hist(v,xlab = "Weight",col = "green",border = "red", xlim = c(0,40), ylim = c(0,5),
   breaks = 5)

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/histogram_lim_breaks.png" alt="Histogram Line Breaks" />
<h2>R - Line Graphs</h2>
A line chart is a graph that connects a series of points by drawing line segments between them. 
These points are ordered in one of their coordinate (usually the x-coordinate) value. 
Line charts are usually used in identifying the trends in data.

The <b>plot()</b> function in R is used to create the line graph.

<h3>Syntax</h3>
The basic syntax to create a line chart in R is -

plot(v,type,col,xlab,ylab)

Following is the description of the parameters used -

<b>v</b> is a vector containing the numeric values.
<b>type</b> takes the value "p" to draw only the points, "l" to draw only the lines and "o" to draw both points and lines.
<b>xlab</b> is the label for x axis.
<b>ylab</b> is the label for y axis.
<b>main</b> is the Title of the chart.
<b>col</b> is used to give colors to both the points and lines.

<h3>Example</h3>
A simple line chart is created using the input vector and the type parameter as "O". 
The below script will create and save a line chart in the current R working directory.

<a href="http://tpcg.io/Ua5dRH" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data for the chart.
v &lt;- c(7,12,28,3,41)

# Give the chart file a name.
png(file = "line_chart.jpg")

# Plot the bar chart. 

plot(v,type = "o")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/line_chart.jpg" alt="Line Chart using R" />
<h2>Line Chart Title, Color and Labels</h2>
The features of the line chart can be expanded by using additional parameters. 
We add color to the points and lines, give a title to the chart and add labels to the axes.

<h3>Example</h3>

<a href="http://tpcg.io/v5OW6y" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data for the chart.
v &lt;- c(7,12,28,3,41)

# Give the chart file a name.
png(file = "line_chart_label_colored.jpg")

# Plot the bar chart.
plot(v,type = "o", col = "red", xlab = "Month", ylab = "Rain fall",
   main = "Rain fall chart")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/line_chart_label_colored.jpg" alt="Line Chart Labeled with Title in R" />
<h2>Multiple Lines in a Line Chart</h2>
More than one line can be drawn on the same chart by using the <b>lines()</b>function.

After the first line is plotted, the lines() function can use an additional vector as input to draw the second line in the chart,

<a href="http://tpcg.io/ArITw9" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the data for the chart.
v &lt;- c(7,12,28,3,41)
t &lt;- c(14,7,6,19,3)

# Give the chart file a name.
png(file = "line_chart_2_lines.jpg")

# Plot the bar chart.
plot(v,type = "o",col = "red", xlab = "Month", ylab = "Rain fall", 
   main = "Rain fall chart")

lines(t, type = "o", col = "blue")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/line_chart_2_lines.jpg" alt="Line Chart with multiple lines in R" />
<h2>R - Scatterplots</h2>
Scatterplots show many points plotted in the Cartesian plane. 
Each point represents the values of two variables. 
One variable is chosen in the horizontal axis and another in the vertical axis.

The simple scatterplot is created using the <b>plot()</b> function.

<h3>Syntax</h3>
The basic syntax for creating scatterplot in R is -

plot(x, y, main, xlab, ylab, xlim, ylim, axes)

Following is the description of the parameters used -

<b>x</b> is the data set whose values are the horizontal coordinates.
<b>y</b> is the data set whose values are the vertical coordinates.
<b>main</b> is the tile of the graph.
<b>xlab</b> is the label in the horizontal axis.
<b>ylab</b> is the label in the vertical axis.
<b>xlim</b> is the limits of the values of x used for plotting.
<b>ylim</b> is the limits of the values of y used for plotting.
<b>axes</b> indicates whether both axes should be drawn on the plot.

<h3>Example</h3>
We use the data set <b>"mtcars"</b> available in the R environment to create a basic scatterplot. 
Let's use the columns "wt" and "mpg" in mtcars.

<a href="http://tpcg.io/dTE79b" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

input &lt;- mtcars[,c('wt','mpg')]
print(head(input))

When we execute the above code, it produces the following result -

                    wt      mpg
Mazda RX4           2.620   21.0
Mazda RX4 Wag       2.875   21.0
Datsun 710          2.320   22.8
Hornet 4 Drive      3.215   21.4
Hornet Sportabout   3.440   18.7
Valiant             3.460   18.1
<h2>Creating the Scatterplot</h2>
The below script will create a scatterplot graph for the relation between wt(weight) and mpg(miles per gallon).

<a href="http://tpcg.io/yVvVGa" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Get the input values.
input &lt;- mtcars[,c('wt','mpg')]

# Give the chart file a name.
png(file = "scatterplot.png")

# Plot the chart for cars with weight between 2.5 to 5 and mileage between 15 and 30.
plot(x = input$wt,y = input$mpg,
   xlab = "Weight",
   ylab = "Milage",
   xlim = c(2.5,5),
   ylim = c(15,30),		 
   main = "Weight vs Milage"
)
	 
# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/scatterplot.png" alt="Scatter Plot using R" />
<h2>Scatterplot Matrices</h2>
When we have more than two variables and we want to find the correlation between one variable versus the remaining ones we use scatterplot matrix. 
We use <b>pairs()</b> function to create matrices of scatterplots.

<h3>Syntax</h3>
The basic syntax for creating scatterplot matrices in R is -

pairs(formula, data)

Following is the description of the parameters used -

<b>formula</b> represents the series of variables used in pairs.
<b>data</b> represents the data set from which the variables will be taken.

<h3>Example</h3>
Each variable is paired up with each of the remaining variable. 
A scatterplot is plotted for each pair.

<a href="http://tpcg.io/aiaS5F" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Give the chart file a name.
png(file = "scatterplot_matrices.png")

# Plot the matrices between 4 variables giving 12 plots.

# One variable with 3 others and total 4 variables.

pairs(~wt+mpg+disp+cyl,data = mtcars,
   main = "Scatterplot Matrix")

# Save the file.
dev.off()

When the above code is executed we get the following output.

<img src="/r/images/scatterplot_matrices.png" alt="Scatter Plot Matrices using R" />
<h2>R - Mean, Median and Mode</h2>
Statistical analysis in R is performed by using many in-built functions. 
Most of these functions are part of the R base package. 
These functions take R vector as an input along with the arguments and give the result.

The functions we are discussing in this chapter are mean, median and mode.

<h2>Mean</h2>
It is calculated by taking the sum of the values and dividing with the number of values in a data series.

The function <b>mean()</b> is used to calculate this in R.

<h3>Syntax</h3>
The basic syntax for calculating mean in R is -

mean(x, trim = 0, na.rm = FALSE, ...)

Following is the description of the parameters used -

<b>x</b> is the input vector.
<b>trim</b> is used to drop some observations from both end of the sorted vector.
<b>na.rm</b> is used to remove the missing values from the input vector.

<h3>Example</h3>

<a href="http://tpcg.io/6bbZx4" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a vector. 

x &lt;- c(12,7,3,4.2,18,2,54,-21,8,-5)

# Find Mean.
result.mean &lt;- mean(x)
print(result.mean)

When we execute the above code, it produces the following result -

[1] 8.22
<h2>Applying Trim Option</h2>
When trim parameter is supplied, the values in the vector get sorted and then the required numbers of observations are dropped from calculating the mean.

When trim = 0.3, 3 values from each end will be dropped from the calculations to find mean.

In this case the sorted vector is (-21, -5, 2, 3, 4.2, 7, 8, 12, 18, 54) and the values removed from the vector for calculating mean are (-21,-5,2) from left and (12,18,54) from right.

<a href="http://tpcg.io/SMiJW4" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a vector.
x &lt;- c(12,7,3,4.2,18,2,54,-21,8,-5)

# Find Mean.
result.mean &lt;-  mean(x,trim = 0.3)
print(result.mean)

When we execute the above code, it produces the following result -

[1] 5.55
<h2>Applying NA Option</h2>
If there are missing values, then the mean function returns NA.

To drop the missing values from the calculation use na.rm = TRUE. 
which means remove the NA values.

<a href="http://tpcg.io/zok9As" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a vector. 

x &lt;- c(12,7,3,4.2,18,2,54,-21,8,-5,NA)

# Find mean.
result.mean &lt;-  mean(x)
print(result.mean)

# Find mean dropping NA values.
result.mean &lt;-  mean(x,na.rm = TRUE)
print(result.mean)

When we execute the above code, it produces the following result -

[1] NA
[1] 8.22
<h2>Median</h2>
The middle most value in a data series is called the median. 
The <b>median()</b> function is used in R to calculate this value.

<h3>Syntax</h3>
The basic syntax for calculating median in R is -

median(x, na.rm = FALSE)

Following is the description of the parameters used -

<b>x</b> is the input vector.
<b>na.rm</b> is used to remove the missing values from the input vector.

<h3>Example</h3>

<a href="http://tpcg.io/Hs6UZ9" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the vector.
x &lt;- c(12,7,3,4.2,18,2,54,-21,8,-5)

# Find the median.
median.result &lt;- median(x)
print(median.result)

When we execute the above code, it produces the following result -

[1] 5.6
<h2>Mode</h2>
The mode is the value that has highest number of occurrences in a set of data. 
Unike mean and median, mode can have both numeric and character data.

R does not have a standard in-built function to calculate mode. 
So we create a user function to calculate mode of a data set in R. 
This function takes the vector as input and gives the mode value as output.

<h3>Example</h3>

<a href="http://tpcg.io/VY0jMk" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the function.
getmode &lt;- function(v) {
   uniqv &lt;- unique(v)
   uniqv[which.max(tabulate(match(v, uniqv)))]
}

# Create the vector with numbers.
v &lt;- c(2,1,2,3,1,2,3,4,1,5,5,3,2,3)

# Calculate the mode using the user function.
result &lt;- getmode(v)
print(result)

# Create the vector with characters.
charv &lt;- c("o","it","the","it","it")

# Calculate the mode using the user function.
result &lt;- getmode(charv)
print(result)

 
When we execute the above code, it produces the following result -

[1] 2
[1] "it"
<h2>R - Linear Regression</h2>
Regression analysis is a very widely used statistical tool to establish a relationship model between two variables. 
One of these variable is called predictor variable whose value is gathered through experiments. 
The other variable is called response variable whose value is derived from the predictor variable.

In Linear Regression these two variables are related through an equation, where exponent (power) of both these variables is 1. 
Mathematically a linear relationship represents a straight line when plotted as a graph. 
A non-linear relationship where the exponent of any variable is not equal to 1 creates a curve.

The general mathematical equation for a linear regression is -
 

y = ax + b

Following is the description of the parameters used -

<b>y</b> is the response variable.
<b>x</b> is the predictor variable.
<b>a</b> and <b>b</b> are constants which are called the coefficients.

<h2>Steps to Establish a Regression</h2>
A simple example of regression is predicting weight of a person when his height is known. 
To do this we need to have the relationship between height and weight of a person.
 
The steps to create the relationship is -

Carry out the experiment of gathering a sample of observed values of height and corresponding weight.
Create a relationship model using the <b>lm()</b> functions in R.
Find the coefficients from the model created and create the mathematical equation using these
Get a summary of the relationship model to know the average error in prediction. 
Also called <b>residuals</b>.
To predict the weight of new persons, use the <b>predict()</b> function in R.

<h3>Input Data</h3>
Below is the sample data representing the observations -

# Values of height
151, 174, 138, 186, 128, 136, 179, 163, 152, 131

# Values of weight.
63, 81, 56, 91, 47, 57, 76, 72, 62, 48
<h2>lm() Function</h2>
This function creates the relationship model between the predictor and the response variable.

<h3>Syntax</h3>
The basic syntax for <b>lm()</b> function in linear regression is -

lm(formula,data)

Following is the description of the parameters used -

<b>formula</b> is a symbol presenting the relation between x and y.
<b>data</b> is the vector on which the formula will be applied.

<h3>Create Relationship Model &amp; get the Coefficients</h3>

<a href="http://tpcg.io/lkkJeu" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)

# Apply the lm() function.
relation &lt;- lm(y~x)

print(relation)

When we execute the above code, it produces the following result -

Call:
lm(formula = y ~ x)

Coefficients:
(Intercept)            x  
   -38.4551          0.6746 

   
<h3>Get the Summary of the Relationship</h3>

<a href="http://tpcg.io/zEPqnY" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)

# Apply the lm() function.
relation &lt;- lm(y~x)

print(summary(relation))

When we execute the above code, it produces the following result -

Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q     Median      3Q     Max 
-6.3002    -1.6629  0.0412    1.8944  3.9775 

Coefficients:
             Estimate Std. 
Error t value Pr(>|t|)    
(Intercept) -38.45509    8.04901  -4.778  0.00139 ** 
x             0.67461    0.05191  12.997 1.16e-06 ***
---
Signif. 
codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 3.253 on 8 degrees of freedom
Multiple R-squared:  0.9548,    Adjusted R-squared:  0.9491 
F-statistic: 168.9 on 1 and 8 DF,  p-value: 1.164e-06
<h2>predict() Function</h2>
<h3>Syntax</h3>
The basic syntax for predict() in linear regression is -

predict(object, newdata)

Following is the description of the parameters used -

<b>object</b> is the formula which is already created using the lm() function.
<b>newdata</b> is the vector containing the new value for predictor variable.

<h3>Predict the weight of new persons</h3>

<a href="http://tpcg.io/SRD50Q" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# The predictor vector.
x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)

# The resposne vector.
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)

# Apply the lm() function.
relation &lt;- lm(y~x)

# Find weight of a person with height 170.
a &lt;- data.frame(x = 170)
result &lt;-  predict(relation,a)
print(result)

When we execute the above code, it produces the following result -

       1 
76.22869 

<h3>Visualize the Regression Graphically</h3>

<a href="http://tpcg.io/A1a3fn" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create the predictor and response variable.
x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)
relation &lt;- lm(y~x)

# Give the chart file a name.
png(file = "linearregression.png")

# Plot the chart.
plot(y,x,col = "blue",main = "Height &amp; Weight Regression",
abline(lm(x~y)),cex = 1.3,pch = 16,xlab = "Weight in Kg",ylab = "Height in cm")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/linearregression.png" alt="Linear regression in R" />
<h2>R - Multiple Regression</h2>
Multiple regression is an extension of linear regression into relationship between more than two variables. 
In simple linear relation we have one predictor and one response variable, but in multiple regression we have more than one predictor variable and one response variable.

The general mathematical equation for multiple regression is -

y = a + b1x1 + b2x2 +...bnxn

Following is the description of the parameters used -

<b>y</b> is the response variable.
<b>a, b1, b2...bn</b> are the coefficients.
<b>x1, x2, ...xn</b> are the predictor variables.

We create the regression model using the <b>lm()</b> function in R. 
The model determines the value of the coefficients using the input data. 
Next we can predict the value of the response variable for a given set of predictor variables using these coefficients.

<h2>lm() Function</h2>
This function creates the relationship model between the predictor and the response variable.

<h3>Syntax</h3>
The basic syntax for <b>lm()</b> function in multiple regression is -

lm(y ~ x1+x2+x3...,data)

Following is the description of the parameters used -

<b>formula</b> is a symbol presenting the relation between the response variable and predictor variables.
<b>data</b> is the vector on which the formula will be applied.

<h2>Example</h2>
<h3>Input Data</h3>
Consider the data set "mtcars" available in the R environment. 
It gives a comparison between different car models in terms of mileage per gallon (mpg), cylinder displacement("disp"), horse power("hp"), weight of the car("wt") and some more parameters.

The goal of the model is to establish the relationship between "mpg" as a response variable with "disp","hp" and "wt" as predictor variables. 
We create a subset of these variables from the mtcars data set for this purpose.

<a href="http://tpcg.io/ITQq8l" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

input &lt;- mtcars[,c("mpg","disp","hp","wt")]
print(head(input))

When we execute the above code, it produces the following result -

                   mpg   disp   hp    wt
Mazda RX4          21.0  160    110   2.620
Mazda RX4 Wag      21.0  160    110   2.875
Datsun 710         22.8  108     93   2.320
Hornet 4 Drive     21.4  258    110   3.215
Hornet Sportabout  18.7  360    175   3.440
Valiant            18.1  225    105   3.460

<h3>Create Relationship Model &amp; get the Coefficients</h3>

<a href="http://tpcg.io/jBpA0K" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

input &lt;- mtcars[,c("mpg","disp","hp","wt")]

# Create the relationship model.
model &lt;- lm(mpg~disp+hp+wt, data = input)

# Show the model.
print(model)

# Get the Intercept and coefficients as vector elements.
cat("# # # # The Coefficient Values # # # ","\n")

a &lt;- coef(model)[1]
print(a)

Xdisp &lt;- coef(model)[2]
Xhp &lt;- coef(model)[3]
Xwt &lt;- coef(model)[4]

print(Xdisp)
print(Xhp)
print(Xwt)

When we execute the above code, it produces the following result -

Call:
lm(formula = mpg ~ disp + hp + wt, data = input)

Coefficients:
(Intercept)         disp           hp           wt  
  37.105505      -0.000937        -0.031157    -3.800891  

# # # # The Coefficient Values # # # 
(Intercept) 
   37.10551 
         disp 
-0.0009370091 
         hp 
-0.03115655 
       wt 
-3.800891 

<h3>Create Equation for Regression Model</h3>
Based on the above intercept and coefficient values, we create the mathematical equation.

Y = a+Xdisp.x1+Xhp.x2+Xwt.x3
or
Y = 37.15+(-0.000937)*x1+(-0.0311)*x2+(-3.8008)*x3

<h3>Apply Equation for predicting New Values</h3>
We can use the regression equation created above to predict the mileage when a new set of values for displacement, horse power and weight is provided.

For a car with disp = 221, hp = 102 and wt = 2.91 the predicted mileage is -

Y = 37.15+(-0.000937)*221+(-0.0311)*102+(-3.8008)*2.91 = 22.7104
<h2>R - Logistic Regression</h2>
The Logistic Regression is a regression model in which the response variable (dependent variable) has categorical values such as True/False or 0/1. 
It actually measures the probability of a binary response as the value of response variable based on the mathematical equation relating it with the predictor variables.

The general mathematical equation for logistic regression is -

y = 1/(1+e^-(a+b1x1+b2x2+b3x3+...))

Following is the description of the parameters used -

<b>y</b> is the response variable.
<b>x</b> is the predictor variable.
<b>a</b> and <b>b</b> are the coefficients which are numeric constants.

The function used to create the regression model is the <b>glm()</b> function.

<h3>Syntax</h3>
The basic syntax for <b>glm()</b> function in logistic regression is -

glm(formula,data,family)

Following is the description of the parameters used -

<b>formula</b> is the symbol presenting the relationship between the variables.
<b>data</b> is the data set giving the values of these variables.
<b>family</b> is R object to specify the details of the model. 
It's value is binomial for logistic regression.

<h3>Example</h3>
The in-built data set "mtcars" describes different models of a car with their various engine specifications. 
In "mtcars" data set, the transmission mode (automatic or manual) is described by the column am which is a binary value (0 or 1). 
We can create a logistic regression model between the columns "am" and 3 other columns - hp, wt and cyl.

<a href="http://tpcg.io/c6hBJq" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Select some columns form mtcars.
input &lt;- mtcars[,c("am","cyl","hp","wt")]

print(head(input))

When we execute the above code, it produces the following result -

                  am   cyl  hp    wt
Mazda RX4          1   6    110   2.620
Mazda RX4 Wag      1   6    110   2.875
Datsun 710         1   4     93   2.320
Hornet 4 Drive     0   6    110   3.215
Hornet Sportabout  0   8    175   3.440
Valiant            0   6    105   3.460
<h2>Create Regression Model</h2>
We use the <b>glm()</b> function to create the regression model and get its summary for analysis.

<a href="http://tpcg.io/VmrzPP" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

input &lt;- mtcars[,c("am","cyl","hp","wt")]

am.data = glm(formula = am ~ cyl + hp + wt, data = input, family = binomial)

print(summary(am.data))

When we execute the above code, it produces the following result -

Call:
glm(formula = am ~ cyl + hp + wt, family = binomial, data = input)

Deviance Residuals: 
     Min        1Q      Median        3Q       Max  
-2.17272     -0.14907  -0.01464     0.14116   1.27641  

Coefficients:
            Estimate Std. 
Error z value Pr(>|z|)  
(Intercept) 19.70288    8.11637   2.428   0.0152 *
cyl          0.48760    1.07162   0.455   0.6491  
hp           0.03259    0.01886   1.728   0.0840 .
wt          -9.14947    4.15332  -2.203   0.0276 *
---
Signif. 
codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 43.2297  on 31  degrees of freedom
Residual deviance:  9.8415  on 28  degrees of freedom
AIC: 17.841

Number of Fisher Scoring iterations: 8

<h3>Conclusion</h3>
In the summary as the p-value in the last column is more than 0.05 for the variables "cyl" and "hp", we consider them to be insignificant in contributing to the value of the variable "am". 
Only weight (wt) impacts the "am" value in this regression model.

<h2>R - Normal Distribution</h2>
In a random collection of data from independent sources, it is generally observed that the distribution of data is normal. 
Which means, on plotting a graph with the value of the variable in the horizontal axis and the count of the values in the vertical axis we get a bell shape curve. 
The center of the curve represents the mean of the data set. 
In the graph, fifty percent of values lie to the left of the mean and the other fifty percent lie to the right of the graph. 
This is referred as normal distribution in statistics.

R has four in built functions to generate normal distribution. 
They are described below.

dnorm(x, mean, sd)
pnorm(x, mean, sd)
qnorm(p, mean, sd)
rnorm(n, mean, sd)

Following is the description of the parameters used in above functions -

<b>x</b> is a vector of numbers.
<b>p</b> is a vector of probabilities.
<b>n</b> is number of observations(sample size).
<b>mean</b> is the mean value of the sample data. 
It's default value is zero.
<b>sd</b> is the standard deviation. 
It's default value is 1.

<h2>dnorm()</h2>
This function gives height of the probability distribution at each point for a given mean and standard deviation.

<a href="http://tpcg.io/BEzGxM" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a sequence of numbers between -10 and 10 incrementing by 0.1.
x &lt;- seq(-10, 10, by = .1)

# Choose the mean as 2.5 and standard deviation as 0.5.
y &lt;- dnorm(x, mean = 2.5, sd = 0.5)

# Give the chart file a name.
png(file = "dnorm.png")

plot(x,y)

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/dnorm.png" alt="dnorm() graph" />
<h2>pnorm()</h2>
This function gives the probability of a normally distributed random number to be less that the value of a given number. 
It is also called "Cumulative Distribution Function".

<a href="http://tpcg.io/yDUiFa" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a sequence of numbers between -10 and 10 incrementing by 0.2.
x &lt;- seq(-10,10,by = .2)
 
# Choose the mean as 2.5 and standard deviation as 2. 

y &lt;- pnorm(x, mean = 2.5, sd = 2)

# Give the chart file a name.
png(file = "pnorm.png")

# Plot the graph.
plot(x,y)

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/pnorm.png" alt="pnorm() graph" />
<h2>qnorm()</h2>
This function takes the probability value and gives a number whose cumulative value matches the probability value.

<a href="http://tpcg.io/17WkYW" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a sequence of probability values incrementing by 0.02.
x &lt;- seq(0, 1, by = 0.02)

# Choose the mean as 2 and standard deviation as 3.
y &lt;- qnorm(x, mean = 2, sd = 1)

# Give the chart file a name.
png(file = "qnorm.png")

# Plot the graph.
plot(x,y)

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/qnorm.png" alt="qnorm() graph" />
<h2>rnorm()</h2>
This function is used to generate random numbers whose distribution is normal. 
It takes the sample size as input and generates that many random numbers. 
We draw a histogram to show the distribution of the generated numbers.

<a href="http://tpcg.io/m4nzT4" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a sample of 50 numbers which are normally distributed.
y &lt;- rnorm(50)

# Give the chart file a name.
png(file = "rnorm.png")

# Plot the histogram for this sample.
hist(y, main = "Normal DIstribution")

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/rnorm.png" alt="rnorm() graph" />
<h2>R - Binomial Distribution</h2>
The binomial distribution model deals with finding the probability of success of an event which has only two possible outcomes in a series of experiments. 
For example, tossing of a coin always gives a head or a tail. 
The probability of finding exactly 3 heads in tossing a coin repeatedly for 10 times is estimated during the binomial distribution.

R has four in-built functions to generate binomial distribution. 
They are described below.

dbinom(x, size, prob)
pbinom(x, size, prob)
qbinom(p, size, prob)
rbinom(n, size, prob)

Following is the description of the parameters used -

<b>x</b> is a vector of numbers.
<b>p</b> is a vector of probabilities.
<b>n</b> is number of observations.
<b>size</b> is the number of trials.
<b>prob</b> is the probability of success of each trial.

<h2>dbinom()</h2>
This function gives the probability density distribution at each point.

<a href="http://tpcg.io/wZ05YE" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Create a sample of 50 numbers which are incremented by 1.
x &lt;- seq(0,50,by = 1)

# Create the binomial distribution.
y &lt;- dbinom(x,50,0.5)

# Give the chart file a name.
png(file = "dbinom.png")

# Plot the graph for this sample.
plot(x,y)

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

<img src="/r/images/dbinom.png" alt="dbinom() graph" />
<h2>pbinom()</h2>
This function gives the cumulative probability of an event. 
It is a single value representing the probability.

<a href="http://tpcg.io/SKWAGl" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Probability of getting 26 or less heads from a 51 tosses of a coin.
x &lt;- pbinom(26,51,0.5)

print(x)

When we execute the above code, it produces the following result -

[1] 0.610116
<h2>qbinom()</h2>
This function takes the probability value and gives a number whose cumulative value matches the probability value.

<a href="http://tpcg.io/IkEstq" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# How many heads will have a probability of 0.25 will come out when a coin
# is tossed 51 times.
x &lt;- qbinom(0.25,51,1/2)

print(x)

When we execute the above code, it produces the following result -

[1] 23
<h2>rbinom()</h2>
This function generates required number of random values of given probability from a given sample.

<a href="http://tpcg.io/5KLmSt" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Find 8 random values from a sample of 150 with probability of 0.4.
x &lt;- rbinom(8,150,.4)

print(x)

When we execute the above code, it produces the following result -

[1] 58 61 59 66 55 60 61 67
<h2>R - Poisson Regression</h2>
Poisson Regression involves regression models in which the response variable is in the form of counts and not fractional numbers. 
For example, the count of number of births or number of wins in a football match series. 
Also the values of the response variables follow a Poisson distribution.

The general mathematical equation for Poisson regression is -

log(y) = a + b1x1 + b2x2 + bnxn.....

Following is the description of the parameters used -

<b>y</b> is the response variable.
<b>a</b> and <b>b</b> are the numeric coefficients.
<b>x</b> is the predictor variable.

The function used to create the Poisson regression model is the <b>glm()</b> function.

<h3>Syntax</h3>
The basic syntax for <b>glm()</b> function in Poisson regression is -

glm(formula,data,family)

Following is the description of the parameters used in above functions -

<b>formula</b> is the symbol presenting the relationship between the variables.
<b>data</b> is the data set giving the values of these variables.
<b>family</b> is R object to specify the details of the model. 
It's value is 'Poisson' for Logistic Regression.

<h3>Example</h3>
We have the in-built data set "warpbreaks" which describes the effect of wool type (A or B) and tension (low, medium or high) on the number of warp breaks per loom. 
Let's consider "breaks" as the response variable which is a count of number of breaks. 
The wool "type" and "tension" are taken as predictor variables.

<b>Input Data</b>

<a href="http://tpcg.io/57SpqA" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

input &lt;- warpbreaks
print(head(input))

When we execute the above code, it produces the following result -

      breaks   wool  tension
1     26       A     L
2     30       A     L
3     54       A     L
4     25       A     L
5     70       A     L
6     52       A     L
<h2>Create Regression Model</h2>

<a href="http://tpcg.io/8pI2kC" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

output &lt;-glm(formula = breaks ~ wool+tension, data = warpbreaks,
   family = poisson)
print(summary(output))

When we execute the above code, it produces the following result -

Call:
glm(formula = breaks ~ wool + tension, family = poisson, data = warpbreaks)

Deviance Residuals: 
    Min       1Q     Median       3Q      Max  
  -3.6871  -1.6503  -0.4269     1.1902   4.2616  

Coefficients:
            Estimate Std. 
Error z value Pr(>|z|)    
(Intercept)  3.69196    0.04541  81.302  &lt; 2e-16 ***
woolB       -0.20599    0.05157  -3.994 6.49e-05 ***
tensionM    -0.32132    0.06027  -5.332 9.73e-08 ***
tensionH    -0.51849    0.06396  -8.107 5.21e-16 ***
---
Signif. 
codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 297.37  on 53  degrees of freedom
Residual deviance: 210.39  on 50  degrees of freedom
AIC: 493.06

Number of Fisher Scoring iterations: 4

In the summary we look for the p-value in the last column to be less than 0.05 to consider an impact of the predictor variable on the response variable. 
As seen the wooltype B having tension type M and H have impact on the count of breaks.

<h2>R - Analysis of Covariance</h2>
We use Regression analysis to create models which describe the effect of variation in predictor variables on the response variable. 
Sometimes, if we have a categorical variable with values like Yes/No or Male/Female etc. 
The simple regression analysis gives multiple results for each value of the categorical variable. 
In such scenario, we can study the effect of the categorical variable by using it along with the predictor variable and comparing the regression lines for each level of the categorical variable. 
Such an analysis is termed as <b>Analysis of Covariance</b> also called as <b>ANCOVA</b>.

<h2>Example</h2>
Consider the R built in data set mtcars. 
In it we observer that the field "am" represents the type of transmission (auto or manual). 
It is a categorical variable with values 0 and 1. 
The miles per gallon value(mpg) of a car can also depend on it besides the value of horse power("hp").

We study the effect of the value of "am" on the regression between "mpg" and "hp". 
It is done by using the <b>aov()</b> function followed by the <b>anova()</b> function to compare the multiple regressions.

<h2>Input Data</h2>
Create a data frame containing the fields "mpg", "hp" and "am" from the data set mtcars. 
Here we take "mpg" as the response variable, "hp" as the predictor variable and "am" as the categorical variable.

<a href="http://tpcg.io/d0P7m9" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

input &lt;- mtcars[,c("am","mpg","hp")]
print(head(input))

When we execute the above code, it produces the following result -

                   am   mpg   hp
Mazda RX4          1    21.0  110
Mazda RX4 Wag      1    21.0  110
Datsun 710         1    22.8   93
Hornet 4 Drive     0    21.4  110
Hornet Sportabout  0    18.7  175
Valiant            0    18.1  105
<h2>ANCOVA Analysis</h2>
We create a regression model taking "hp" as the predictor variable and "mpg" as the response variable taking into account the interaction between "am" and "hp".

<h3>Model with interaction between categorical variable and predictor variable</h3>

<a href="http://tpcg.io/6AKYJ3" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Get the dataset.
input &lt;- mtcars

# Create the regression model.
result &lt;- aov(mpg~hp*am,data = input)
print(summary(result))

When we execute the above code, it produces the following result -

            Df Sum Sq Mean Sq F value   Pr(>F)    
hp           1  678.4   678.4  77.391 1.50e-09 ***
am           1  202.2   202.2  23.072 4.75e-05 ***
hp:am        1    0.0     0.0   0.001    0.981    
Residuals   28  245.4     8.8                     
---
Signif. 
codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

This result shows that both horse power and transmission type has significant effect on miles per gallon as the p value in both cases is less than 0.05. 
But the interaction between these two variables is not significant as the p-value is more than 0.05.

<h3>Model without interaction between categorical variable and predictor variable</h3>

<a href="http://tpcg.io/DoUDKP" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Get the dataset.
input &lt;- mtcars

# Create the regression model.
result &lt;- aov(mpg~hp+am,data = input)
print(summary(result))

When we execute the above code, it produces the following result -

            Df  Sum Sq  Mean Sq   F value   Pr(>F)    
hp           1  678.4   678.4   80.15 7.63e-10 ***
am           1  202.2   202.2   23.89 3.46e-05 ***
Residuals   29  245.4     8.5                     
---
Signif. 
codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

This result shows that both horse power and transmission type has significant effect on miles per gallon as the p value in both cases is less than 0.05.

<h2>Comparing Two Models</h2>
Now we can compare the two models to conclude if the interaction of the variables is truly in-significant. 
For this we use the <b>anova()</b> function.

<a href="http://tpcg.io/plJyFa" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Get the dataset.
input &lt;- mtcars

# Create the regression models.
result1 &lt;- aov(mpg~hp*am,data = input)
result2 &lt;- aov(mpg~hp+am,data = input)

# Compare the two models.
print(anova(result1,result2))

When we execute the above code, it produces the following result -

Model 1: mpg ~ hp * am
Model 2: mpg ~ hp + am
  Res.Df    RSS Df  Sum of Sq     F Pr(>F)
1     28 245.43                           
2     29 245.44 -1 -0.0052515 6e-04 0.9806

As the p-value is greater than 0.05 we conclude that the interaction between horse power and transmission type is not significant. 
So the mileage per gallon will depend in a similar manner on the horse power of the car in both auto and manual transmission mode.

<h2>R - Time Series Analysis</h2>
Time series is a series of data points in which each data point is associated with a timestamp. 
A simple example is the price of a stock in the stock market at different points of time on a given day. 
Another example is the amount of rainfall in a region at different months of the year. 
R language uses many functions to create, manipulate and plot the time series data. 
The data for the time series is stored in an R object called <b>time-series object</b>. 
It is also a R data object like a vector or data frame.

The time series object is created by using the <b>ts()</b> function.

<h3>Syntax</h3>
The basic syntax for <b>ts()</b> function in time series analysis is -

timeseries.object.name &lt;-  ts(data, start, end, frequency)

Following is the description of the parameters used -

<b>data</b> is a vector or matrix containing the values used in the time series.
<b>start</b> specifies the start time for the first observation in time series.
<b>end</b> specifies the end time for the last observation in time series.
<b>frequency</b> specifies the number of observations per unit time.

Except the parameter "data" all other parameters are optional.

<h3>Example</h3>
Consider the annual rainfall details at a place starting from January 2012. 
We create an R time series object for a period of 12 months and plot it.

<a href="http://tpcg.io/UZraRG" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Get the data points in form of a R vector.
rainfall &lt;- c(799,1174.8,865.1,1334.6,635.4,918.5,685.5,998.6,784.2,985,882.8,1071)

# Convert it to a time series object.
rainfall.timeseries &lt;- ts(rainfall,start = c(2012,1),frequency = 12)

# Print the timeseries data.
print(rainfall.timeseries)

# Give the chart file a name.
png(file = "rainfall.png")

# Plot a graph of the time series.
plot(rainfall.timeseries)

# Save the file.
dev.off()

When we execute the above code, it produces the following result and chart -

Jan    Feb    Mar    Apr    May     Jun    Jul    Aug    Sep
2012  799.0  1174.8  865.1  1334.6  635.4  918.5  685.5  998.6  784.2
        Oct    Nov    Dec
2012  985.0  882.8 1071.0

The Time series chart -

<img src="/r/images/rainfall.png" alt="Time Series using R" />
<h2>Different Time Intervals</h2>
The value of the <b>frequency</b> parameter in the ts() function decides the time intervals at which the data points are measured. 
A value of 12 indicates that the time series is for 12 months. 
Other values and its meaning is as below -

<b>frequency = 12</b> pegs the data points for every month of a year.
<b>frequency = 4</b> pegs the data points for every quarter of a year.
<b>frequency = 6</b> pegs the data points for every 10 minutes of an hour.
<b>frequency = 24*6</b> pegs the data points for every 10 minutes of a day.

<h2>Multiple Time Series</h2>
We can plot multiple time series in one chart by combining both the series into a matrix.

<a href="http://tpcg.io/vETvkY" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Get the data points in form of a R vector.
rainfall1 &lt;- c(799,1174.8,865.1,1334.6,635.4,918.5,685.5,998.6,784.2,985,882.8,1071)
rainfall2 &lt;- 
           c(655,1306.9,1323.4,1172.2,562.2,824,822.4,1265.5,799.6,1105.6,1106.7,1337.8)

# Convert them to a matrix.
combined.rainfall &lt;-  matrix(c(rainfall1,rainfall2),nrow = 12)

# Convert it to a time series object.
rainfall.timeseries &lt;- ts(combined.rainfall,start = c(2012,1),frequency = 12)

# Print the timeseries data.
print(rainfall.timeseries)

# Give the chart file a name.
png(file = "rainfall_combined.png")

# Plot a graph of the time series.
plot(rainfall.timeseries, main = "Multiple Time Series")

# Save the file.
dev.off()

When we execute the above code, it produces the following result and chart -

           Series 1  Series 2
Jan 2012    799.0    655.0
Feb 2012   1174.8   1306.9
Mar 2012    865.1   1323.4
Apr 2012   1334.6   1172.2
May 2012    635.4    562.2
Jun 2012    918.5    824.0
Jul 2012    685.5    822.4
Aug 2012    998.6   1265.5
Sep 2012    784.2    799.6
Oct 2012    985.0   1105.6
Nov 2012    882.8   1106.7
Dec 2012   1071.0   1337.8

The Multiple Time series chart -

<img src="/r/images/rainfall_combined.png" alt="Combined Time series is using R" />
<h2>R - Nonlinear Least Square</h2>
When modeling real world data for regression analysis, we observe that it is rarely the case that the equation of the model is a linear equation giving a linear graph. 
Most of the time, the equation of the model of real world data involves mathematical functions of higher degree like an exponent of 3 or a sin function. 
In such a scenario, the plot of the model gives a curve rather than a line. 
The goal of both linear and non-linear regression is to adjust the values of the model's parameters to find the line or curve that comes closest to your data. 
On finding these values we will be able to estimate the response variable with good accuracy.

In Least Square regression, we establish a regression model in which the sum of the squares of the vertical distances of different points from the regression curve is minimized. 
We generally start with a defined model and assume some values for the coefficients. 
We then apply the <b>nls()</b> function of R to get the more accurate values along with the confidence intervals.

<h2>Syntax</h2>
The basic syntax for creating a nonlinear least square test in R is -

nls(formula, data, start)

Following is the description of the parameters used -

<b>formula</b> is a nonlinear model formula including variables and parameters.
<b>data</b> is a data frame used to evaluate the variables in the formula.
<b>start</b> is a named list or named numeric vector of starting estimates.

<h2>Example</h2>
We will consider a nonlinear model with assumption of initial values of its coefficients. 
Next we will see what is the confidence intervals of these assumed values so that we can judge how well these values fir into the model.

So let's consider the below equation for this purpose -

a = b1*x^2+b2

Let's assume the initial coefficients to be 1 and 3 and fit these values into nls() function.

<a href="http://tpcg.io/X3wRLp" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

xvalues &lt;- c(1.6,2.1,2,2.23,3.71,3.25,3.4,3.86,1.19,2.21)
yvalues &lt;- c(5.19,7.43,6.94,8.11,18.75,14.88,16.06,19.12,3.21,7.58)

# Give the chart file a name.
png(file = "nls.png")

# Plot these values.
plot(xvalues,yvalues)

# Take the assumed values and fit into the model.
model &lt;- nls(yvalues ~ b1*xvalues^2+b2,start = list(b1 = 1,b2 = 3))

# Plot the chart with new data by fitting it to a prediction from 100 data points.
new.data &lt;- data.frame(xvalues = seq(min(xvalues),max(xvalues),len = 100))
lines(new.data$xvalues,predict(model,newdata = new.data))

# Save the file.
dev.off()

# Get the sum of the squared residuals.
print(sum(resid(model)^2))

# Get the confidence intervals on the chosen values of the coefficients.
print(confint(model))

When we execute the above code, it produces the following result -

[1] 1.081935
Waiting for profiling to be done...
       2.5%    97.5%
b1 1.137708 1.253135
b2 1.497364 2.496484

<img src="/r/images/nls.png" alt="Non Linear least square R" />
We can conclude that the value of b1 is more close to 1 while the value of b2 is more close to 2 and not 3.

<h2>R - Decision Tree</h2>
Decision tree is a graph to represent choices and their results in form of a tree. 
The nodes in the graph represent an event or choice and the edges of the graph represent the decision rules or conditions. 
It is mostly used in Machine Learning and Data Mining applications using R.

Examples of use of decision tress is - predicting an email as spam or not spam, predicting of a tumor is cancerous or predicting a loan as a good or bad credit risk based on the factors in each of these. 
Generally, a model is created with observed data also called training data. 
Then a set of validation data is used to verify and improve the model. 
R has packages which are used to create and visualize decision trees. 
For new set of predictor variable, we use this model to arrive at a decision on the category (yes/No, spam/not spam) of the data.

The R package <b>"party"</b> is used to create decision trees.

<h2>Install R Package</h2>
Use the below command in R console to install the package. 
You also have to install the dependent packages if any.

install.packages("party")

The package "party" has the function <b>ctree()</b> which is used to create and analyze decison tree.

<h3>Syntax</h3>
The basic syntax for creating a decision tree in R is -

ctree(formula, data)

Following is the description of the parameters used -

<b>formula</b> is a formula describing the predictor and response variables.
<b>data</b> is the name of the data set used.

<h3>Input Data</h3>
We will use the R in-built data set named <b>readingSkills</b> to create a decision tree. 
It describes the score of someone's readingSkills if we know the variables "age","shoesize","score" and whether the person is a native speaker or not.

Here is the sample data.

<!--<a href="http://tpcg.io/mv47mB" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Load the party package. 
It will automatically load other
# dependent packages.
library(party)

# Print some records from data set readingSkills.
print(head(readingSkills))

When we execute the above code, it produces the following result and chart -

  nativeSpeaker   age   shoeSize      score
1           yes     5   24.83189   32.29385
2           yes     6   25.95238   36.63105
3            no    11   30.42170   49.60593
4           yes     7   28.66450   40.28456
5           yes    11   31.88207   55.46085
6           yes    10   30.07843   52.83124
Loading required package: methods
Loading required package: grid
...............................
...............................

<h3>Example</h3>
We will use the <b>ctree()</b> function to create the decision tree and see its graph.

<!--<a href="http://tpcg.io/UwrEKW" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Load the party package. 
It will automatically load other
# dependent packages.
library(party)

# Create the input data frame.
input.dat &lt;- readingSkills[c(1:105),]

# Give the chart file a name.
png(file = "decision_tree.png")

# Create the tree.
  output.tree &lt;- ctree(
  nativeSpeaker ~ age + shoeSize + score, 
  data = input.dat)

# Plot the tree.
plot(output.tree)

# Save the file.
dev.off()

When we execute the above code, it produces the following result -

null device 
          1 
Loading required package: methods
Loading required package: grid
Loading required package: mvtnorm
Loading required package: modeltools
Loading required package: stats4
Loading required package: strucchange
Loading required package: zoo

Attaching package: ‘zoo’

The following objects are masked from ‘package:base’:

   as.Date, as.Date.numeric

Loading required package: sandwich

<img src="/r/images/decision_tree.png" alt="Decision Tree using R" />
<h3>Conclusion</h3>
From the decision tree shown above we can conclude that anyone whose readingSkills score is less than 38.3 and age is more than 6 is not a native Speaker.

<h2>R - Random Forest</h2>
In the random forest approach, a large number of decision trees are created. 
Every observation is fed into every decision tree. 
The most common outcome for each observation is used as the final output. 
A new observation is fed into all the trees and taking a majority vote for each classification model.

An error estimate is made for the cases which were not used while building the tree. 
That is called an <b>OOB (Out-of-bag)</b> error estimate which is mentioned as a percentage.

The R package <b>"randomForest"</b> is used to create random forests.

<h2>Install R Package</h2>
Use the below command in R console to install the package. 
You also have to install the dependent packages if any.

install.packages("randomForest)

The package "randomForest" has the function <b>randomForest()</b> which is used to create and analyze random forests.

<h3>Syntax</h3>
The basic syntax for creating a random forest in R is -

randomForest(formula, data)

Following is the description of the parameters used -

<b>formula</b> is a formula describing the predictor and response variables.
<b>data</b> is the name of the data set used.

<h3>Input Data</h3>
We will use the R in-built data set named readingSkills to create a decision tree. 
It describes the score of someone's readingSkills if we know the variables "age","shoesize","score" and whether the person is a native speaker.

Here is the sample data.

<!--<a href="http://tpcg.io/S6MF0a" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Load the party package. 
It will automatically load other
# required packages.
library(party)

# Print some records from data set readingSkills.
print(head(readingSkills))

When we execute the above code, it produces the following result and chart -

  nativeSpeaker   age   shoeSize      score
1           yes     5   24.83189   32.29385
2           yes     6   25.95238   36.63105
3            no    11   30.42170   49.60593
4           yes     7   28.66450   40.28456
5           yes    11   31.88207   55.46085
6           yes    10   30.07843   52.83124
Loading required package: methods
Loading required package: grid
...............................
...............................

<h3>Example</h3>
We will use the <b>randomForest()</b> function to create the decision tree and see it's graph.

<!--<a href="http://tpcg.io/aX0d69" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Load the party package. 
It will automatically load other
# required packages.
library(party)
library(randomForest)

# Create the forest.
output.forest &lt;- randomForest(nativeSpeaker ~ age + shoeSize + score, 
           data = readingSkills)

# View the forest results.
print(output.forest) 

# Importance of each predictor.
print(importance(fit,type = 2)) 

When we execute the above code, it produces the following result -

Call:
 randomForest(formula = nativeSpeaker ~ age + shoeSize + score,     
                 data = readingSkills)
               Type of random forest: classification
                     Number of trees: 500
No. 
of variables tried at each split: 1

        OOB estimate of  error rate: 1%
Confusion matrix:
    no yes class.error
no  99   1        0.01
yes  1  99        0.01
         MeanDecreaseGini
age              13.95406
shoeSize         18.91006
score            56.73051

<h3>Conclusion</h3>
From the random forest shown above we can conclude that the shoesize and score are the important factors deciding if someone is a native speaker or not. 
Also the model has only 1% error which means we can predict with 99% accuracy.

<h2>R - Survival Analysis</h2>
Survival analysis deals with predicting the time when a specific event is going to occur. 
It is also known as failure time analysis or analysis of time to death. 
For example predicting the number of days a person with cancer will survive or predicting the time when a mechanical system is going to fail.

The R package named <b>survival</b> is used to carry out survival analysis. 
This package contains the function <b>Surv()</b> which takes the input data as a R formula and creates a survival object among the chosen variables for analysis. 
Then we use the function <b>survfit()</b> to create a plot for the analysis.

<h2>Install Package</h2>

install.packages("survival")

<h3>Syntax</h3>
The basic syntax for creating survival analysis in R is -

Surv(time,event)
survfit(formula)

Following is the description of the parameters used -

<b>time</b> is the follow up time until the event occurs.
<b>event</b> indicates the status of occurrence of the expected event.
<b>formula</b> is the relationship between the predictor variables.

<h3>Example</h3>
We will consider the data set named "pbc" present in the survival packages installed above. 
It describes the survival data points about people affected with primary biliary cirrhosis (PBC) of the liver. 
Among the many columns present in the data set we are primarily concerned with the fields "time" and "status". 
Time represents the number of days between registration of the patient and earlier of the event between the patient receiving a liver transplant or death of the patient.

<!--<a href="http://tpcg.io/CAodmd" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Load the library.
library("survival")

# Print first few rows.
print(head(pbc))

When we execute the above code, it produces the following result and chart -

  id time status trt      age sex ascites hepato spiders edema bili chol
1  1  400      2   1 58.76523   f       1      1       1   1.0 14.5  261
2  2 4500      0   1 56.44627   f       0      1       1   0.0  1.1  302
3  3 1012      2   1 70.07255   m       0      0       0   0.5  1.4  176
4  4 1925      2   1 54.74059   f       0      1       1   0.5  1.8  244
5  5 1504      1   2 38.10541   f       0      1       1   0.0  3.4  279
6  6 2503      2   2 66.25873   f       0      1       0   0.0  0.8  248
  albumin copper alk.phos    ast trig platelet protime stage
1    2.60    156   1718.0 137.95  172      190    12.2     4
2    4.14     54   7394.8 113.52   88      221    10.6     3
3    3.48    210    516.0  96.10   55      151    12.0     4
4    2.54     64   6121.8  60.63   92      183    10.3     4
5    3.53    143    671.0 113.15   72      136    10.9     3
6    3.98     50    944.0  93.00   63       NA    11.0     3

From the above data we are considering time and status for our analysis.

<h3>Applying Surv() and survfit() Function</h3>
Now we proceed to apply the <b>Surv()</b> function to the above data set and create a plot that will show the trend.

<!--<a href="http://tpcg.io/NBIocW" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>-->

# Load the library.
library("survival")

# Create the survival object. 

survfit(Surv(pbc$time,pbc$status == 2)~1)

# Give the chart file a name.
png(file = "survival.png")

# Plot the graph. 

plot(survfit(Surv(pbc$time,pbc$status == 2)~1))

# Save the file.
dev.off()

When we execute the above code, it produces the following result and chart -

Call: survfit(formula = Surv(pbc$time, pbc$status == 2) ~ 1)

      n  events  median 0.95LCL 0.95UCL 
    418     161    3395    3090    3853 

<img src="/r/images/survival.png" alt="Survival Analysis Using R" />
The trend in the above graph helps us predicting the probability of survival at the end of a certain number of days.

<h2>R - Chi Square Test</h2>
<b>Chi-Square test</b> is a statistical method to determine if two categorical variables have a significant correlation between them. 
Both those variables should be from same population and they should be categorical like - Yes/No, Male/Female, Red/Green etc.

For example, we can build a data set with observations on people's ice-cream buying pattern and try to correlate the gender of a person with the flavor of the ice-cream they prefer. 
If a correlation is found we can plan for appropriate stock of flavors by knowing the number of gender of people visiting.

<h2>Syntax</h2>
The function used for performing chi-Square test is <b>chisq.test()</b>.
 
The basic syntax for creating a chi-square test in R is -

chisq.test(data)

Following is the description of the parameters used -

<b>data</b> is the data in form of a table containing the count value of the variables in the observation.

<h2>Example</h2>
We will take the Cars93 data in the "MASS" library which represents the sales of different models of car in the year 1993.

<a href="http://tpcg.io/3XAlce" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

library("MASS")
print(str(Cars93))

When we execute the above code, it produces the following result -

'data.frame':   93 obs. 
of  27 variables: 
 $ Manufacturer      : Factor w/ 32 levels "Acura","Audi",..: 1 1 2 2 3 4 4 4 4 5 ... 

 $ Model             : Factor w/ 93 levels "100","190E","240",..: 49 56 9 1 6 24 54 74 73 35 ... 

 $ Type              : Factor w/ 6 levels "Compact","Large",..: 4 3 1 3 3 3 2 2 3 2 ... 

 $ Min.Price         : num  12.9 29.2 25.9 30.8 23.7 14.2 19.9 22.6 26.3 33 ... 

 $ Price             : num  15.9 33.9 29.1 37.7 30 15.7 20.8 23.7 26.3 34.7 ... 

 $ Max.Price         : num  18.8 38.7 32.3 44.6 36.2 17.3 21.7 24.9 26.3 36.3 ... 

 $ MPG.city          : int  25 18 20 19 22 22 19 16 19 16 ... 

 $ MPG.highway       : int  31 25 26 26 30 31 28 25 27 25 ... 

 $ AirBags           : Factor w/ 3 levels "Driver & Passenger",..: 3 1 2 1 2 2 2 2 2 2 ... 

 $ DriveTrain        : Factor w/ 3 levels "4WD","Front",..: 2 2 2 2 3 2 2 3 2 2 ... 

 $ Cylinders         : Factor w/ 6 levels "3","4","5","6",..: 2 4 4 4 2 2 4 4 4 5 ... 

 $ EngineSize        : num  1.8 3.2 2.8 2.8 3.5 2.2 3.8 5.7 3.8 4.9 ... 

 $ Horsepower        : int  140 200 172 172 208 110 170 180 170 200 ... 

 $ RPM               : int  6300 5500 5500 5500 5700 5200 4800 4000 4800 4100 ... 

 $ Rev.per.mile      : int  2890 2335 2280 2535 2545 2565 1570 1320 1690 1510 ... 

 $ Man.trans.avail   : Factor w/ 2 levels "No","Yes": 2 2 2 2 2 1 1 1 1 1 ... 

 $ Fuel.tank.capacity: num  13.2 18 16.9 21.1 21.1 16.4 18 23 18.8 18 ... 

 $ Passengers        : int  5 5 5 6 4 6 6 6 5 6 ... 

 $ Length            : int  177 195 180 193 186 189 200 216 198 206 ... 

 $ Wheelbase         : int  102 115 102 106 109 105 111 116 108 114 ... 

 $ Width             : int  68 71 67 70 69 69 74 78 73 73 ... 

 $ Turn.circle       : int  37 38 37 37 39 41 42 45 41 43 ... 

 $ Rear.seat.room    : num  26.5 30 28 31 27 28 30.5 30.5 26.5 35 ... 

 $ Luggage.room      : int  11 15 14 17 13 16 17 21 14 18 ... 

 $ Weight            : int  2705 3560 3375 3405 3640 2880 3470 4105 3495 3620 ... 

 $ Origin            : Factor w/ 2 levels "USA","non-USA": 2 2 2 2 2 1 1 1 1 1 ... 

 $ Make              : Factor w/ 93 levels "Acura Integra",..: 1 2 4 3 5 6 7 9 8 10 ... 

The above result shows the dataset has many Factor variables which can be considered as categorical variables. 
For our model we will consider the variables "AirBags" and "Type". 
Here we aim to find out any significant correlation between the types of car sold and the type of Air bags it has. 
If correlation is observed we can estimate which types of cars can sell better with what types of air bags.

<a href="http://tpcg.io/Tvye73" target="_blank" rel="nofollow" class="demo"><i class="fa-external-link"></i> Live Demo</a>

# Load the library.
library("MASS")

# Create a data frame from the main data set.
car.data &lt;- data.frame(Cars93$AirBags, Cars93$Type)

# Create a table with the needed variables.
car.data = table(Cars93$AirBags, Cars93$Type) 
print(car.data)

# Perform the Chi-Square test.
print(chisq.test(car.data))

When we execute the above code, it produces the following result -

                     Compact Large Midsize Small Sporty Van
  Driver &amp; Passenger       2     4       7     0      3   0
  Driver only              9     7      11     5      8   3
  None                     5     0       4    16      3   6

         Pearson's Chi-squared test

data:  car.data
X-squared = 33.001, df = 10, p-value = 0.0002723

Warning message:
In chisq.test(car.data) : Chi-squared approximation may be incorrect
<h2>Conclusion</h2>
The result shows the p-value of less than 0.05 which indicates a string correlation.

<h2>R - Interview Questions</h2>
Dear readers, these R Interview Questions have been designed specially to get you acquainted with the nature of questions you may encounter during your interview for the subject of R programming. 
As per my experience good interviewers hardly plan to ask any particular question during your interview, normally questions start with some basic concept of the subject and later they continue based on further discussion and what you answer -

<section class="toggle">
<label>What is R Programming?</label>

R is a programming language meant for statistical analysis and creating graphs for this purpose.Instead of data types, it has data objects which are used for calculations. 
It is used in the fields of data mining, Regression analysis, Probability estimation etc., using many packages available in it.

</section>
<section class="toggle">
<label>What are the different data objects in R?</label>

There are 6 data objects in R. 
They are vectors, lists, arrays, matrices, data frames and tables.

</section>
<section class="toggle">
<label>What makes a valid variable name in R?</label>

A valid variable name consists of letters, numbers and the dot or underline characters. 
The variable name starts with a letter or the dot not followed by a number.


</section>
<section class="toggle">
<label>What is the main difference between an Array and a matrix?</label>

A matrix is always two dimensional as it has only rows and columns. 
But an array can be of any number of dimensions and each dimension is a matrix. 
For example a 3x3x2 array represents 2 matrices each of dimension 3x3.

</section>
<section class="toggle">
<label>Which data object in R is used to store and process categorical data?</label>

The Factor data objects in R are used to store and process categorical data in R.

</section>
<section class="toggle">
<label>How can you load and use csv file in R?</label>

A csv file can be loaded using the read.csv function. 
R creates a data frame on reading the csv files using this function.

</section>
<section class="toggle">
<label>How do you get the name of the current working directory in R?</label>

The command getwd() gives the current working directory in the R environment.

</section>
<section class="toggle">
<label>What is R Base package?</label>

This is the package which is loaded by default when R environment is set. 
It provides the basic functionalities like input/output, arithmetic calculations etc. 
in the R environment.

</section>
<section class="toggle">
<label>How R is used in logistic regression?</label>

Logistic regression deals with measuring the probability of a binary response variable. 
In R the function glm() is used to create the logistic regression.

</section>
<section class="toggle">
<label>How do you access the element in the 2nd column and 4th row of a matrix named M?</label>

The expression M[4,2] gives the element at 4th row and 2nd column.

</section>
<section class="toggle">
<label>What is recycling of elements in a vector? Give an example.</label>

When two vectors of different length are involved in a operation then the elements of the shorter vector are reused to complete the operation. 
This is called element recycling. 
Example - v1 &lt;- c(4,1,0,6) and V2 &lt;- c(2,4) then v1*v2 gives (8,4,0,24). 
The elements 2 and 4 are repeated.

</section>
<section class="toggle">
<label>What are different ways to call a function in R?</label>

We can call a function in R in 3 ways. 
First method is to call by using position of the arguments. 
Second method id to call by using the name of the arguments and the third method is to call by default arguments.

</section>
<section class="toggle">
<label>What is lazy function evaluation in R?</label>

The lazy evaluation of a function means, the argument is evaluated only if it is used inside the body of the function. 
If there is no reference to the argument in the body of the function then it is simply ignored.

</section>
<section class="toggle">
<label>How do you install a package in R?</label>

To install a package in R we use the below command.

install.packages("package Name")


</section>
<section class="toggle">
<label>Name a R packages which is used to read XML files.</label>

The package named "XML" is used to read and process the XML files.

</section>
<section class="toggle">
<label>Can we update and delete any of the elements in a list?</label>

We can update any of the element but we can delete only the element at the end of the list.

</section>
<section class="toggle">
<label>Give the general expression to create a matrix in R.</label>

The general expression to create a matrix in R is - matrix(data, nrow, ncol, byrow, dimnames)

</section>
<section class="toggle">
<label>which function is used to create a boxplot graph in R?</label>

The boxplot() function is used to create boxplots in R. 
It takes a formula and a data frame as inputs to create the boxplots.

</section>
<section class="toggle">
<label>In doing time series analysis, what does frequency = 6 means in the ts() function?</label>

 Frequency  6 indicates the time interval for the time series data is every 10 minutes of an hour.

</section>
<section class="toggle">
<label>What is reshaping of data in R?</label>

In R the data objects can be converted from one form to another. 
For example we can create a data frame by merging many lists. 
This involves a series of R commands to bring the data into the new format. 
This is called data reshaping.

</section>
<section class="toggle">
<label>What is the output of runif(4)?</label>

It generates 4 random numbers between 0 and 1.

</section>
<section class="toggle">
<label>How to get a list of all the packages installed in R ?</label>

Use the command

installed.packages()


</section>
<section class="toggle">
<label>What is expected from running the command - strsplit(x,"e")?</label>

It splits the strings in vector x into substrings at the position of letter e.

</section>
<section class="toggle">
<label>Give a R script to extract all the unique words in uppercase from the string - "The quick brown fox jumps over the lazy dog".</label>

x &lt;- "The quick brown fox jumps over the lazy dog"
split.string &lt;- strsplit(x, " ")
extract.words &lt;- split.string[[1]]
result &lt;- unique(tolower(extract.words))
print(result)


</section>
<section class="toggle">
<label>Vector v is c(1,2,3,4) and list x is list(5:8), what is the output of v*x[1]?</label>

Error in v * x[1] : non-numeric argument to binary operator

</section>
<section class="toggle">
<label>Vector v is c(1,2,3,4) and list x is list(5:8), what is the output of v*x[[1]]?</label>

[1]  5 12 21 32s

</section>
<section class="toggle">
<label>What does unlist() do?</label>

It converts a list to a vector.

</section>
<section class="toggle">
<label>Give the R expression to get 26 or less heads from a 51 tosses of a coin using pbinom.</label>

x &lt;- pbinom(26,51,0.5)
print(x)


</section>
<section class="toggle">
<label>X is the vector c(5,9.2,3,8.51,NA), What is the output of mean(x)?</label>

NA

</section>
<section class="toggle">
<label>How do you convert the data in a JSON file to a data frame?</label>

Using the function as.data.frame()

</section>
<section class="toggle">
<label>Give a function in R that replaces all missing values of a vector x with the sum of elements of that vector?</label>

function(x) { x[is.na(x)] &lt;- sum(x, na.rm = TRUE); x }


</section>
<section class="toggle">
<label>What is the use of apply() in R?</label>

It is used to apply the same function to each of the elements in an Array. 
For example finding the mean of the rows in every row.

</section>
<section class="toggle">
<label>Is an array a matrix or a matrix an array?</label>

Every matrix can be called an array but not the reverse. 
Matrix is always two dimensional but array can be of any dimension.

</section>
<section class="toggle">
<label>How to find the help page on missing values?</label>

 ?NA

</section>
<section class="toggle">
<label>How do you get the standard deviation for a vector x?</label>

sd(x, na.rm=TRUE)

</section>
<section class="toggle">
<label>How do you set the path for current working directory in R?</label>

setwd("Path")

</section>
<section class="toggle">
<label>What is the difference between "%%" and "%/%"?</label>

"%%" gives remainder of the division of first vector with second while "%/%" gives the quotient of the division of first vector with second.

</section>
<section class="toggle">
<label>What does col.max(x) do?</label>

Find the column has the maximum value for each row.

</section>
<section class="toggle">
<label>Give the command to create a histogram.</label>

hist()

</section>
<section class="toggle">
<label>How do you remove a vector from the R workspace?</label>

rm(x)

</section>
<section class="toggle">
<label>List the data sets available in package "MASS"</label>

data(package = "MASS")

</section>
<section class="toggle">
<label>List the data sets available in all available packages.</label>

data(package = .packages(all.available = TRUE))


</section>
<section class="toggle">
<label>What is the use of the command - install.packages(file.choose(), repos=NULL)?</label>

It is used to install a r package from local directory by browsing and selecting the file.

</section>
<section class="toggle">
<label>Give the command to check if the element 15 is present in vector x.</label>

15 %in% x


</section>
<section class="toggle">
<label>Give the syntax for creating scatterplot matrices.</label>

pairs(formula, data)

Where formula represents the series of variables used in pairs and data represents the data set from which the variables will be taken.

</section>
<section class="toggle">
<label>What is the difference between subset() function and sample() function in R?</label>

The subset() functions is used to select variables and observations. 
The sample() function is used to choose a random sample of size n from a dataset.

</section>
<section class="toggle">
<label>How do you check if "m" is a matrix data object in R?</label>

is.matrix(m)  should retrun TRUE.

</section>
<section class="toggle">
<label>What is the output for the below expression all(NA==NA)?</label>

[1] NA

</section>
<section class="toggle">
<label>How to obtain the transpose of a matrix in R?</label>

The function t() is used for transposing a matrix. 
Example - t(m) , where m is a matrix.

</section>
<section class="toggle">
<label>What is the use of "next" statement in R?</label>

The "next" statement in R programming language is useful when we want to skip the current iteration of a loop without terminating it.

</section>
<h2>What is Next?</h2>
Further, you can go through your past assignments you have done with the subject and make sure you are able to speak confidently on them. 
If you are fresher then interviewer does not expect you will answer very complex questions, rather you have to make your basics concepts very strong.

Second it really doesn't matter much if you could not answer few questions but it matters that whatever you answered, you must have answered with confidence. 
So just feel confident during your interview. 
We at tutorialspoint wish you best luck to have a good interviewer and all the very best for your future endeavor. 
Cheers :-)



<h2><span class="gold">StatMethods</span></h2>
<a href="https://www.statmethods.net/r-tutorial/index.html" class="whitebut ">statmethods</a>
<h2>Obtaining R</h2>
<p>R is available for Linux, MacOS, and Windows. Software can be downloaded from <a href="http://cran.r-project.org/">The Comprehensive R Archive Network (CRAN)</a>.</p>
<h2>Startup</h2>
<p>After R is downloaded and installed, simply find and launch R from your Applications folder.</p>
<img src="https://www.statmethods.net/r-tutorial/images/r_icon.png">
<h2>Entering Commands</h2>
<p>R is a command line driven program. The user enters commands at the prompt (<strong>&gt;</strong> by default) and each command is executed one at a time.</p>
<img src="https://www.statmethods.net/r-tutorial/images/rconsole.png">
<h2><a href="https://www.statmethods.net/interface/workspace.html">The Workspace</a></h2>
<p>The workspace is your current R working environment and includes any user-defined objects (vectors, matrices, data frames, lists, functions). At the end of an R session, the user can save an image of the current workspace that is automatically reloaded the next time R is started.</p>

<h2>Graphic User Interfaces</h2>

<p>Aside from the built in R console, <a href="http://rstudio.org/">RStudio</a> is the most popular R code editor, and it interfaces with R for Windows, MacOS, and Linux platforms.</p>
<h2><a href="https://www.statmethods.net/management/operators.html">Operators in R</a></h2>
<p>R's binary and logical operators will look very familiar to programmers. Note that binary operators work on vectors and matrices as well as scalars.</p>
<p>Arithmetic Operators include:</p>
<table border="0">
  <tr>
    <td valign="top"><strong>Operator</strong></td>
    <td valign="top"><strong>Description</strong></td>
  </tr>
  <tr>
    <td valign="top"><strong>+</strong></td>
    <td valign="top">addition</td>
  </tr>
  <tr>
    <td valign="top"><strong>-</strong></td>
    <td valign="top">subtraction</td>
  </tr>
  <tr>
    <td valign="top"><strong>*</strong></td>
    <td valign="top">multiplication</td>
  </tr>
  <tr>
    <td valign="top"><strong>/</strong></td>
    <td valign="top">division</td>
  </tr>
  <tr>
    <td valign="top"><strong>^ or ** </strong></td>
    <td valign="top">exponentiation</td>
  </tr>
</table>
<p>Logical Operators include:</p>
<table border="0">

  <tr>
    <td valign="top"><strong>Operator</strong></td>
    <td valign="top"><strong>Description</strong></td>
  </tr>
  <tr>
    <td valign="top"><strong>&gt;</strong></td>
    <td valign="top">greater than </td>
  </tr>
  <tr>
    <td valign="top"><strong>&gt;=</strong></td>
    <td valign="top">greater than or equal to </td>
  </tr>
  <tr>
    <td valign="top"><strong>==</strong></td>
    <td valign="top">exactly equal to </td>
  </tr>
  <tr>
    <td valign="top"><strong>!=</strong></td>
    <td valign="top">not equal to </td>
  </tr>

</table>

<h2><a href="https://www.statmethods.net/input/datatypes.html">Data Types</a></h2>
<p>R has a wide variety of data types including scalars, vectors (numerical, character, logical), matrices, data frames, and lists.</p>
<h2><a href="https://www.statmethods.net/management/variables.html">Creating New Variables</a></h2>
<p>Use the assignment operator <strong>&lt;-</strong> to create new variables.</p>
<p><code># An example of computing the mean with variables<br />
    <br />
    mydata$sum &lt;- mydata$x1 + mydata$x2<br />
    mydata$mean &lt;- (mydata$x1 + mydata$x2)/2<br />
  </code></p>
<h2><a href="https://www.statmethods.net/management/functions.html">Functions</a></h2>
<p>Almost everything in R is done through functions. A function is a piece of code written to carry out a specified task; it may accept arguments or parameters (or not) and it may return one or more values (or not!). In R, a function is defined with the construct:</p>
<p><code>
    <strong>function</strong> ( arglist ) {body}<br />
  </code></p>
<p>The code in between the curly braces is the body of the function. Note that by using built-in functions, the only thing you need to worry about is how to effectively communicate the correct input arguments (arglist) and manage the return value/s (if any).</p>
<h2><a href="https://www.statmethods.net/input/importingdata.html">Importing Data</a></h2>
<p>Importing data into R is fairly simple. R offers options to import many file types, from CSVs to databases.</p>
<p>For example, this is how to import a CSV into R.</p>
<p><code># first row contains variable names, comma is separator <br />
    # assign the variable <em>id</em> to row names<br />
    # note the / instead of \ on mswindows systems
    <br />
    <br />
    mydata &lt;- read.table(&quot;c:/mydata.csv&quot;, header=TRUE, <br />
    &nbsp;&nbsp; sep=&quot;,&quot;, row.names=&quot;id&quot;)</code></p>
<h2><a href="https://www.statmethods.net/stats/descriptives.html">Descriptive Statistics</a></h2>
<p>R provides a wide range of functions for obtaining summary statistics. One way to get descriptive statistics is to use the <strong>sapply( )</strong> function with a specified summary statistic.</p>
<p>Below is how to get the mean with the <strong>sapply( )</strong> function:</p>
<p><code># get means for variables in data frame mydata<br />
    # excluding missing values
    <br />
    sapply(mydata, mean, na.rm=TRUE)
  </code></p>
<p>Possible functions used in <strong>sapply</strong> include <strong> mean, sd, var, min, max, median, range</strong>, and <strong>quantile</strong>.
  <h2><a href="https://www.statmethods.net/graphs/creating.html">Plotting in R</a></h2>
  <p>In R, graphs are typically created interactively. Here is an example:</p>
  <p><code># Creating a Graph<br />
      attach(mtcars)<br />
      plot(wt, mpg) <br />
      abline(lm(mpg~wt))<br />
      title(&quot;Regression of MPG on Weight&quot;)</code></p>
  <p>The <strong>plot( )</strong> function opens a graph window and plots weight vs. miles per gallon. The next line of code adds a regression line to this graph. The final line adds a title.</p>
  <img src="https://www.statmethods.net/r-tutorial/images/r_plot.png">

  <h2>Packages</h2>
  <p>Packages are collections of R functions, data, and compiled code in a well-defined format. The directory where packages are stored is called the library. R comes with a standard set of packages. Others are available for download and installation. Once installed, they have to be loaded into the session to be used.</p>
  <p><code>.libPaths() # get library location
      <br />
      library() &nbsp;&nbsp;# see all packages installed <br />
      search() &nbsp;&nbsp;&nbsp;# see packages currently loaded</code></p>
  <h2><a href="https://www.statmethods.net/interface/help.html">Getting Help</a></h2>
  <p>Once R is installed, there is a comprehensive built-in help system. At the program's command prompt you can use any of the following:</p>
  <p><code>help.start() &nbsp;&nbsp;# general help<br />
      help(<em>foo</em>) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# help about function <em>foo</em><br />
      ?<em>foo</em> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# same thing <br />
      apropos(&quot;<em>foo</em>&quot;)
      # list all functions containing string foo<br />
      example(<em>foo</em>) &nbsp;&nbsp;# show an example of function <em>foo</em> </code></p>

  <h2>Going Further</h2>
  <p>If you prefer an online interactive environment to learn R, <a href="https://www.datacamp.com/courses/free-introduction-to-r">this free R tutorial by DataCamp</a> is a great way to get started.</p>

<p><img src="https://www.statmethods.net/interface/images/interface.png"></p>
<p>R is a dialect of the <a href="http://en.wikipedia.org/wiki/S_(programming_language)">S language</a>. It is a case-sensitive, interpreted language. You can enter commands one at a time at the command prompt (&gt;) or run a set of commands from a source file. There is a wide variety of <a href="../input/datatypes.html">data types</a>, including vectors (numerical, character, logical), matrices, data frames, and lists. Most functionality is provided through built-in and user-created functions and all data objects are kept in memory during an interactive session. Basic functions are available by default. Other functions are contained in <a href="packages.html">packages</a> that can be attached to a current session as needed. </p>
<blockquote>
  <p>&nbsp; R is a case sensitive language. FOO, Foo, and foo are three different objects!</p>
</blockquote>
<p>This section describes working with the R interface. A key skill to using R effectively is learning how to use the built-in <a href="help.html">help system</a>. Other sections describe the <a href="workspace.html">working environment</a>, <a href="io.html">inputting programs </a>and<a href="io.html"> outputting results</a>, installing new functionality through <a href="packages.html">packages</a>, <a href="guis.html">GUIs</a> that have been developed for R, <a href="customizing.html">customizing</a> the environment, producing <a href="output.html">high quality output</a>, and running programs in <a href="batch.html">batch</a>. A fundamental design feature of R is that the output from most functions can be used as input to other functions. This is described in <a href="reuse.html">reusing results</a>. </p>
<h2>To Practice </h2>
<p> To explore R, try this <a href="https://www.datacamp.com/courses/working-with-the-rstudio-ide-part-1"> introduction to working with RStudio,</a> which gives an overview of installing and working with RStudio.</p>

  <div class="entry">
    <p><img src="https://www.statmethods.net/input/index/sminput.jpg"><br>
      Unlike <strong>SAS</strong>, which has DATA and PROC steps, R has data structures (vectors, matrices, arrays,
      data frames) that you can operate on through functions that perform statistical analyses and create graphs. In this way,
      R is similar to PROC IML. </p>
    <p>This section describes how to enter or import data into R, and how to prepare it for use in statistical analyses.
      Topics include R <a href="datatypes.html">data structures</a>, <a href="importingdata.html">importing data </a>
      (from Excel, SPSS, SAS, Stata, and ASCII Text Files), entering data from the <a href="keyboard.html">keyboard</a>, creating an
      interface with a <a href="dbinterface.html">database management system</a>, <a href="exportingdata.html">exporting</a> data
      (to Excel, SPSS, SAS, Stata, and Tab Delimited Text Files), annotating data (with<a href="variablelables.html"> variable
labels </a> and <a href="valuelabels.html">value labels</a>), and <a href="contents.html">listing</a> data. In addition,
      methods for handling <a href="missingdata.html">missing values</a> and <a href="dates.html">date values</a> are presented. </p>

  </div>
</div>

<h2>To Practice</h2>
<p>Loading data into R is covered in the free first chapter of this <a href="https://www.datacamp.com/courses/introduction-to-data">interactive course: Introduction to Data.</a></p>

<p><img src="https://www.statmethods.net/management/images/manage.png"></p>
<p>Once you have <a href="../input/index.html">access</a> to your data, you will want to massage it into useful form. This includes <a href="variables.html">creating new variables</a> (including recoding and renaming existing variables), <a href="sorting.html">sorting</a> and <a href="merging.html">merging</a> datasets, <a href="aggregate.html">aggregating</a> data, <a href="reshape.html">reshaping</a> data, and <a href="subset.html">subsetting</a> datasets (including selecting observations that meet criteria, randomly sampling observeration, and dropping or keeping variables). </p>
<p>Each of these activities usually involve the use of R's built-in <a href="operators.html">operators</a> (arithmetic and logical) and <a href="functions.html">functions</a> (numeric, character, and statistical). Additionally, you may need to use <a href="controlstructures.html">control structures</a> (if-then, for, while, switch) in your programs and/or create your <a href="userfunctions.html">own functions</a>. Finally you may need to <a href="typeconversion.html">convert</a> variables or datasets from one type to another (e.g. numeric to character or matrix to data frame). </p>
<p>This section describes each task from an R perspective. </p>
<h2>To Practice </h2>
<p> To practice managing data in R, try the first chapter of <a href="https://www.datacamp.com/courses/introduction-to-credit-risk-modeling-in-r">this interactive course.</a></p>

<p><img src="https://www.statmethods.net/stats/images/mileage.png"></a></p>
<p>This section describes basic (and not so basic) statistics. It includes code for obtaining <a href="descriptives.html">descriptive statistics</a>, <a href="frequencies.html">frequency counts</a> and <a href="frequencies.html">crosstabulations</a> (including tests of independence), <a href="correlations.html">correlations </a>(pearson, spearman, kendall, polychoric), <a href="ttest.html">t-tests</a> (with equal and unequal variances), <a href="nonparametric.html">nonparametric tests</a> of group differences (Mann Whitney U, Wilcoxon Signed Rank, Kruskall Wallis Test, Friedman Test), <a href="regression.html">multiple linear regression</a> (including diagnostics, cross-validation and variable selection), <a href="anova.html">analysis of variance</a> (including ANCOVA and MANOVA), and statistics based on <a href="resampling.html">resampling</a>. </p>
<p>Since modern data analyses almost always involve graphical assessments of relationships and assumptions, links to appropriate graphical methods are provided throughout. </p>
<p>It is always important to check model assumptions before making statistical inferences. Although it is somewhat artificial to separate regression modeling and an ANOVA framework in this regard, many people learn these topics separately, so I've followed the same convention here. </p>
<p><a href="rdiagnostics.html">Regression diagnostics</a> cover outliers, influential observations, non-normality, non-constant error variance, multicolinearity, nonlinearity, and non-independence of errors. <a href="anovaAssumptions.html">Classical test assumptions</a> for ANOVA/ANCOVA/MANCOVA include the assessment of normality and homogeneity of variances in the univariate case, and multivariate normality and homogeneity of covariance matrices in the multivariate case. The identification of multivariate outliers is also considered. </p>
<p><a href="power.html">Power analysis</a> provides methods of statistical power analysis and sample size estimation for a variety of designs. </p>
<p>Finally, two functions that aid in efficient processing (<a href="withby.html">with and by</a>) are described.</p>
<p>More advanced statistical modeling can be found in the <a href="../advstats/index.html">Advanced Statistics</a> section. </p>

<h2>Going Further</h2>
<p>To practice statistics in R interactively, try <a href="https://www.datacamp.com/introduction-to-statistics"> this course on the introduction to statistics.</a></p>

<p><img src="https://www.statmethods.net/advstats/images/correspondence.png"></a></p>
<p>This section describes more advanced statistical methods. This includes the discovery and exploration of complex multivariate relationships among variables. Links to appropriate graphical methods are also provided throughout. <a href="../stats/index.html">Basic statistics</a> are described in the previous section. </p>
<p>It is difficult to order these topics in a straight-forward way. I have chosen the following (admittedly arbitrary) headings.</p>
<h3>Predictive models</h3>
<p>Under predictive models, we have <a href="glm.html">generalized linear models</a> (include logistic regression, poisson regression, and survival analysis), <a href="discriminant.html">discriminant function analysis</a> (both linear and quadratic), and <a href="timeseries.html">time series modeling</a>.</p>
<h3>Latent Variable Models</h3>
<p>This includes <a href="factor.html">factor analysis</a> (principal components, exploratory and confirmatory factor analysis), <a href="ca.html">correspondence analysis</a>, and <a href="mds.html">multidimensional scaling </a>(metric and nonmetric). </p>
<h3>Partitioning Methods</h3>
<p><a href="cluster.html">Cluster Analysis</a> includes partitioning (k-means), hierarchical agglomerative, and model based approaches. <a href="cart.html">Tree-Based methods</a> (which could easily have gone under predictive models!) include classification and regression trees, random forests, and other partitioning methodologies. </p>
<h3>Other Tools </h3>
<p>This section includes tools that are broadly useful including <a href="bootstrapping.html">bootstrapping</a> in R and <a href="matrix.html"> matrix algebra</a> programming (think MATRIX in SPSS or PROC IML in SAS). </p>
<h2>Going Further</h2>
<p>Try <a href="https://www.datacamp.com/community/open-courses/kaggle-tutorial-on-machine-learing-the-sinking-of-the-titanic"> the Kaggle R Tutorial on Machine Learning</a> which includes an exercise with Random Forests.</p>

<p><img src="https://www.statmethods.net/graphs/images/simpleplots.png"></p>
<p>One of the main reasons data analysts turn to R is for its strong graphic capabilities. </p>
<p><a href="creating.html">Creating a Graph</a> provides an overview of creating and saving graphs in R. </p>
<p>The remainder of the section describes how to create basic graph types. These include <a href="density.html">density plots</a> (histograms and kernel density plots), <a href="dot.html">dot plots</a>, <a href="bar.html">bar charts</a> (simple, stacked, grouped), <a href="line.html">line charts</a>, <a href="pie.html">pie charts</a> (simple, annotated, 3D), <a href="boxplot.html">boxplots</a> (simple, notched, violin plots, bagplots) and <a href="scatterplot.html">Scatterplots</a> (simple, with fit lines, scatterplot matrices, high density plots, and 3D plots). </p>
<p>The <a href="../advgraphs/index.html">Advanced Graphs</a> section describes how to customize and annotate graphs, and covers more statistically complex types of graphs. </p>
<h2>To Practice </h2>
<p> To practice the basics of plotting in R interactively, try <a href="https://www.datacamp.com/courses/data-visualization-in-r">this course from DataCamp</a>.</p>
<p><img src="https://www.statmethods.net/advgraphs/images/advgraphs.png"></p>
<p>This section describes how to customize your graphs. It also covers more statistically sophisticated graphs. This is one of the many places that R really shines. </p>
<h2>Customization</h2>
<p><a href="parameters.html">Graphical parameters</a> describes how to change a graph's symbols, fonts, colors, and lines. <a href="axes.html">Axes and text </a>describe how to customize a graph's axes, add reference lines, text annotations and a legend. <a href="layout.html">Combining plots </a> describes how to organize multiple plots into a single graph. </p>
<h2>Advanced Graph Types </h2>
<p>The <a href="trellis.html">lattice</a> package provides a comprehensive system for visualizing multivariate data, including the ability to create plots conditioned on one or more variables. The <a href="ggplot2.html">ggplot2</a> package offers a elegant systems for generating univariate and multivariate graphs based on a grammar of graphics. Other graph types include <a href="probability.html">probability plots</a>, <a href="mosaic.html">mosaic plots</a>, and <a href="correlograms.html">correlograms</a>. Finally methods of <a href="interactive.html">interacting with graphs</a> (e.g. linking multiple graphs with color brushing, or interactive rotation in real-time) are provided. </p>
<p>For simpler, more fundamental graphs, see the <a href="../graphs/index.html">Basic Graphs</a> section. </p>
<h2>Going Further</h2>
<p>Try the first chapter of <a href="https://www.datacamp.com/courses/data-visualization-with-ggplot2-1">this interactive course on data visualization with ggplot2.</a> </p>

<h2>Why R has A Steep Learning Curve </h2>

<h3>A long answer to a simple question... </h3>
<p>I have been a hardcore SAS and SPSS programmer for more than 25 years, a Systat programmer for 15 years and a Stata programmer for 2 years. But when I started learning R recently, I found it frustratingly difficult. <strong>Why? </strong></p>
<p>I think that there are two reasons why R can be challenging to learn quickly. </p>
<p><strong>First</strong>, while there are many introductory tutorials (covering data types, basic commands, the interface), none alone are comprehensive. In part, this is because much of the advanced functionality of R comes from hundreds of user contributed packages. Hunting for what you want can be time consuming, and it can be hard to get a clear overview of what procedures are available. </p>
<p>The <strong>second </strong>reason is more ephemeral. As users of statistical packages, we tend to run one prescribed procedure for each type of analysis. Think of PROC GLM in SAS. We can carefully set up the run with all the parameters and options that we need. When we run the procedure, the resulting output may be a hundred pages long. We then sift through this output pulling out what we need and discarding the rest. </p>
<p>The paradigm in R is different. Rather than setting up a complete analysis at once, the process is highly interactive. You run a command (say fit a model), take the results and process it through another command (say a set of diagnostic plots), take those results and process it through another command (say cross-validation), etc. The cycle may include transforming the data, and looping back through the whole process again. You stop when you feel that you have fully analyzed the data. It may sound trite, but this reminds me of the paradigm shift from top-down procedural programming to object oriented programming we saw a few years ago. It is not an easy mental shift for many of us to make.</p>
<p>In that in the end, however, I believe that you will feel much more intimately in touch with your data and in control of your work. And it's fun! </p>
<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/free-introduction-to-r"> This free interactive course </a>covers the basics of R.</p>

<p>The workspace is your current R working environment and includes any user-defined objects (vectors, matrices, data frames, lists, functions). At the end of an R session, the user can save an image of the current workspace that is automatically reloaded the next time R is started. Commands are entered interactively at the R user prompt. <strong>Up</strong> and <strong>down arrow keys</strong> scroll through your command history. <br />
  <br />
  You will probably want to keep different projects in different physical directories. Here are some standard commands for managing your workspace. </p>

<p><code>getwd() # print the current working directory - cwd <br />
    ls() &nbsp;&nbsp;&nbsp;# list the objects in the current workspace</code></p>
<p><code> setwd(mydirectory) &nbsp;&nbsp;&nbsp;&nbsp; # change to mydirectory<br />
    setwd(&quot;c:/docs/mydir&quot;) &nbsp;# note / instead of \ in windows <br />
    setwd(&quot;/usr/rob/mydir&quot;) # on linux</code></p>
<p><code># view and set options for the session<br />
    help(options) # learn about available options<br />
    options() # view current option settings<br />
    options(digits=3) # number of digits to print on output
  </code></p>
<p><code># work with your previous commands<br />
    history() # display last 25 commands<br />
    history(max.show=Inf) # display all previous commands<br />
    <br />
    # save your command history <br />
    savehistory(file=&quot;<em>myfile</em>&quot;) # default is &quot;.Rhistory&quot; <br />
    <br />
    # recall your command history <br />
    loadhistory(file=&quot;<em>myfile</em>&quot;)
    # default is &quot;.Rhistory&quot;</code></p>
<p><code># save the workspace to the file .RData in the cwd
    <br />
    save.image()<br />
    <br />
    # save specific objects to a file<br />
    # if you don't specify the path, the cwd is assumed
    <br />
    save(object list,file=&quot;myfile.RData&quot;) </code></p>
<p><code># load a workspace into the current session<br />
    # if you don't specify the path, the cwd is assumed <br />
    load(&quot;myfile.RData&quot;)
  </code></p>
<p><code>q() # quit R. You will be prompted to save the workspace. </code></p>
<h2>Important Note to Windows Users:</h2>
<p>R gets confused if you use a path in your code like:
  <code>c:\mydocuments\myfile.txt</code>
  This is because R sees &quot;\&quot; as an escape character. Instead, use:
  <code>c:\\my documents\\myfile.txt<br>
    c:/mydocuments/myfile.txt</code>
  Either will work. I use the second convention throughout this website. </p>
<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/free-introduction-to-r"> This free intro to R course</a> will get you familiar with the R workspace.</p>

<p>R is a command line driven program. The user enters commands at the prompt ( <strong>&gt;</strong> by default ) and each command is executed one at a time. </p>
<p>There have been a number of attempts to create a more graphical interface, ranging from code editors that interact with R, to full-blown GUIs that present the user with menus and dialog boxes.</p>
<p><a href="images/Rstudio.png"><img src="https://www.statmethods.net/interface/guis/smRstudio.png" width="85" height="103"></a> click to view</p>
<p><a href="http://rstudio.org/">RStudio</a> is my favorite example of a code editor that interfaces with R for Windows, MacOS, and Linux platforms.</p>
https://www.statmethods.net/interface/images/smrcmdr.jpg
<p><a href="images/rcmdr.gif"><img src="https://www.statmethods.net/interface/images/smrcmdr.jpg" width="104" height="112"></a> click to view<p></p>Perhaps the most stable, full-blown GUI is <a href="http://socserv.mcmaster.ca/jfox/Misc/Rcmdr/">R Commander</a>, which can also run under Windows, Linux, and MacOS (see the documentation for technical requirements).</p>

<p>Both of these programs can make R a lot easier to use.</p>
<h2>To Practice </h2>
<p> <a href="https://www.datacamp.com/courses/working-with-the-rstudio-ide-part-1">This interactive course</a> gives an overview of installing and working with RStudio.</p>

<p>R's binary and logical operators will look very familiar to programmers. Note that binary operators work on vectors and matrices as well as scalars. </p>

<h2>Arithmetic Operators </h2>
<p>
  <table border="0">
    <tr>
      <td valign="top"><strong>Operator</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>+</strong></td>
      <td valign="top">addition</td>
    </tr>
    <tr>
      <td valign="top"><strong>-</strong></td>
      <td valign="top">subtraction</td>
    </tr>
    <tr>
      <td valign="top"><strong>*</strong></td>
      <td valign="top">multiplication</td>
    </tr>
    <tr>
      <td valign="top"><strong>/</strong></td>
      <td valign="top">division</td>
    </tr>
    <tr>
      <td valign="top"><strong>^ or ** </strong></td>
      <td valign="top">exponentiation</td>
    </tr>
    <tr>
      <td valign="top"><strong>x %% y </strong></td>
      <td valign="top">modulus (x mod y) 5%%2 is 1 </td>
    </tr>
    <tr>
      <td valign="top"><strong>x %/% y </strong></td>
      <td valign="top">integer division 5%/%2 is 2 </td>
    </tr>
  </table>

</p>
<h2>Logical Operators </h2>
<p>
  <table border="0">

    <tr>
      <td valign="top"><strong>Operator</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>&lt;</strong></td>
      <td valign="top">less than </td>
    </tr>
    <tr>
      <td valign="top"><strong>&lt;=</strong></td>
      <td valign="top">less than or equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>&gt;</strong></td>
      <td valign="top">greater than </td>
    </tr>
    <tr>
      <td valign="top"><strong>&gt;=</strong></td>
      <td valign="top">greater than or equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>==</strong></td>
      <td valign="top">exactly equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>!=</strong></td>
      <td valign="top">not equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>!x</strong></td>
      <td valign="top">Not x </td>
    </tr>
    <tr>
      <td valign="top"><strong>x | y </strong></td>
      <td valign="top">x OR y </td>
    </tr>
    <tr>
      <td valign="top"><strong>x &amp; y </strong></td>
      <td valign="top">x AND y </td>
    </tr>
    <tr>
      <td valign="top"><strong>isTRUE(x)</strong></td>
      <td valign="top">test if X is TRUE </td>
    </tr>
  </table>
</p>

<p><code># An example <br />
    x &lt;- c(1:10)<br />
    x[(x&gt;8) | (x&lt;5)]<br />
    # yields 1 2 3 4 9 10<br />
    <br />
    # How it works <br />
    x &lt;- c(1:10)<br />
    x<br />
    1 2 3 4 5 6 7 8 9 10<br />
    x &gt; 8<br />
    F F F F F F F F T T<br />
    x &lt; 5<br />
    T T T T F F F F F F<br />
    x &gt; 8 | x &lt; 5<br />
    T T T T F F F F T T<br />
    x[c(T,T,T,T,F,F,F,F,T,T)]<br />
    1 2 3 4 9 10
  </code></p>

<h2>Going Further</h2>
<p>To practice working with logical operators in R, try <a href="https://www.datacamp.com/courses/intermediate-r"> the free first chapter on conditionals of this interactive course.</a></p>

<p>R has a wide variety of data types including scalars, vectors (numerical, character, logical), matrices, data frames, and lists.</p>
<h2>Vectors</h2>
<p><code> a &lt;- c(1,2,5.3,6,-2,4) # numeric vector<br />
    b &lt;- c(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;) # character vector<br />
    c &lt;- c(TRUE,TRUE,TRUE,FALSE,TRUE,FALSE) #logical vector<br />
  </code></p>
<p>Refer to elements of a vector using subscripts. </p>
<p><code> a[c(2,4)] # 2nd and 4th elements of vector</code></p>
<h2>Matrices</h2>
<p>All columns in a matrix must have the same mode(numeric, character, etc.) and the same length. The general format is</p>
<p>mymatrix &lt;- <strong>matrix(</strong><em>vector</em>, <strong>nrow=</strong><em>r</em>, <strong>ncol=</strong><em>c</em>, <strong>byrow=</strong><em>FALSE</em>, <strong><br />
    &nbsp;&nbsp; dimnames=list(</strong><em>char_vector_rownames</em>, <em>char_vector_colnames</em><strong>)) </strong> </p>
<p><strong>byrow=TRUE</strong> indicates that the matrix should be filled by rows. <strong>byrow=FALSE</strong> indicates that the matrix should be filled by columns (the default). <strong>dimnames</strong> provides optional labels for the columns and rows. </p>
<p> <code> # generates 5 x 4 numeric matrix
    <br />
    y&lt;-matrix(1:20, nrow=5,ncol=4)<br />
    <br />
    # another example<br />
    cells &lt;- c(1,26,24,68)<br />
    rnames &lt;- c(&quot;R1&quot;, &quot;R2&quot;)<br />
    cnames &lt;- c(&quot;C1&quot;, &quot;C2&quot;)
    <br />
    mymatrix &lt;- matrix(cells, nrow=2, ncol=2, byrow=TRUE,<br />
    &nbsp;&nbsp;dimnames=list(rnames, cnames))
  </code></p>
<p>Identify rows, columns or elements using subscripts. </p>
<p><code> x[,4] # 4th column of matrix<br />
    x[3,] # 3rd row of matrix <br />
    x[2:4,1:3] # rows 2,3,4 of columns 1,2,3 </code></p>
<h2>Arrays</h2>
<p>Arrays are similar to matrices but can have more than two dimensions. See <strong>help(array)</strong> for details. </p>
<h2>Data Frames</h2>
<p>A data frame is more general than a matrix, in that different columns can have different modes (numeric, character, factor, etc.). This is similar to SAS and SPSS datasets.</p>
<p><code>d &lt;- c(1,2,3,4)<br />
    e &lt;- c(&quot;red&quot;, &quot;white&quot;, &quot;red&quot;, NA)<br />
    f &lt;- c(TRUE,TRUE,TRUE,FALSE)<br />
    mydata &lt;- data.frame(d,e,f)<br />
    names(mydata) &lt;- c(&quot;ID&quot;,&quot;Color&quot;,&quot;Passed&quot;) # variable names
  </code></p>
<p>There are a variety of ways to identify the elements of a data frame .</p>
<p><code>myframe[3:5] # columns 3,4,5 of data frame<br />
    myframe[c(&quot;ID&quot;,&quot;Age&quot;)] # columns ID and Age from data frame<br />
    myframe$X1 # variable x1 in the data frame
  </code></p>
<h2>Lists</h2>
<p>An ordered collection of objects (components). A list allows you to gather a variety of (possibly unrelated) objects under one name. </p>
<p><code># example of a list with 4 components - <br />
    #
    a string, a numeric vector, a matrix, and a scaler <br />
    w &lt;- list(name=&quot;Fred&quot;, mynumbers=a, mymatrix=y, age=5.3)<br />
    <br />
    # example of a list containing two lists <br />
    v &lt;- c(list1,list2)
  </code></p>
<p>Identify elements of a list using the [[]] convention. </p>
<p><code> mylist[[2]] # 2nd component of the list<br />
    mylist[[&quot;mynumbers&quot;]] # component named mynumbers in list</code></p>

<h2>Factors</h2>
<p>Tell R that a variable is <strong>nominal </strong> by making it a factor. The factor stores the nominal values as a vector of integers in the range [ 1... k ] (where k is the number of unique values in the nominal variable), and an internal vector of character strings (the original values) mapped to these integers. </p>
<p><code># variable gender with 20 &quot;male&quot; entries and <br />
    #
    30 &quot;female&quot; entries <br />
    gender &lt;- c(rep(&quot;male&quot;,20), rep(&quot;female&quot;, 30)) <br />
    gender &lt;- factor(gender) <br />
    # stores gender as 20 1s and 30 2s and associates<br />
    #
    1=female, 2=male internally (alphabetically)<br />
    # R now treats gender as a nominal variable <br />
    summary(gender)
  </code></p>
<p>An ordered factor is used to represent an <strong>ordinal variable</strong>. </p>
<p><code># variable rating coded as &quot;large&quot;, &quot;medium&quot;, &quot;small'<br />
    rating &lt;- ordered(rating)<br />
    # recodes rating to 1,2,3 and associates<br />
    #
    1=large, 2=medium, 3=small internally<br />
    # R now treats rating as ordinal </code></p>
<p>R will treat factors as nominal variables and ordered factors as ordinal variables in statistical proceedures and graphical analyses. You can use options in the <strong>factor( ) </strong>and <strong>ordered( )</strong> functions to control the mapping of integers to strings (overiding the alphabetical ordering). You can also use factors to create <a href="valuelabels.html">value labels</a>. For more on factors see the <a href="http://www.ats.ucla.edu/stat/R/modules/factor_variables.htm">UCLA page</a>. </p>

<h2>Useful Functions</h2>
<p><code>length(object) # number of elements or components<br />
    str(object) &nbsp;&nbsp;&nbsp;# structure of an object <br />
    class(object) &nbsp;# class or type of an object<br />
    names(object) &nbsp;# names<br />
    <br />
    c(object,object,...) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# combine objects into a vector<br />
    cbind(object, object, ...) # combine objects as columns<br />
    rbind(object, object, ...) # combine objects as rows
    <br />
    <br />
    object &nbsp;&nbsp;&nbsp;&nbsp;# prints the object<br />
    <br />
    ls() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# list current objects<br />
    rm(object) # delete an object<br />
    <br />
    newobject &lt;- edit(object) # edit copy and save as newobject <br />
    fix(object) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# edit in place
  </code></p>
<h2>To Practice </h2>
<p> To explore data types in R, try this <a href="https://www.datacamp.com/courses/free-introduction-to-r">free interactive introduction to R course</a></p>

<p>Use the assignment operator <strong>&lt;-</strong> to create new variables. A wide array of <a href="operators.html">operators</a> and <a href="functions.html">functions</a> are available here.</p>
<p><code># Three examples for doing the same computations<br />
    <br />
    mydata$sum &lt;- mydata$x1 + mydata$x2<br />
    mydata$mean &lt;- (mydata$x1 + mydata$x2)/2<br />
    <br />
    attach(mydata)<br />
    mydata$sum &lt;- x1 + x2<br />
    mydata$mean &lt;- (x1 + x2)/2<br />
    detach(mydata)<br />
    <br />
    mydata &lt;- transform( mydata,<br />
    sum = x1 + x2,<br />
    mean = (x1 + x2)/2 <br />
    )
  </code></p>
<p>(To practice working with variables in R, try the first chapter of <a href="https://www.datacamp.com/courses/free-introduction-to-r"> this free interactive course</a>.)</p>
<h2>Recoding variables </h2>
<p>In order to recode data, you will probably use one or more of R's <a href="controlstructures.html">control structures</a>. </p>
<p><code># create 2 age categories
    <br />
    mydata$agecat &lt;- ifelse(mydata$age &gt; 70, <br />
    c(&quot;older&quot;), c(&quot;younger&quot;))

    <br />
    <br />
    # another example: create 3 age categories
    <br />
    attach(mydata)<br />
    mydata$agecat[age &gt; 75] &lt;- &quot;Elder&quot;<br />
    mydata$agecat[age &gt; 45 &amp; age &lt;= 75] &lt;- &quot;Middle Aged&quot;<br />
    mydata$agecat[age &lt;= 45] &lt;- &quot;Young&quot;<br />
    detach(mydata)
  </code></p>
<h2>Renaming variables </h2>
<p>You can rename variables programmatically or interactively. </p>
<p><code> # rename interactively <br />
    fix(mydata) # results are saved on close
    <br />
    <br />
    # rename programmatically <br />
    library(reshape)<br />
    mydata &lt;- rename(mydata, c(oldname=&quot;newname&quot;))<br />
    <br />
    # you can re-enter all the variable names in order<br />
    # changing the ones you need to change.the limitation<br />
    #
    is that you need to enter all of them!<br />
    names(mydata) &lt;- c(&quot;x1&quot;,&quot;age&quot;,&quot;y&quot;, &quot;ses&quot;)
  </code></p>

<p>Almost everything in R is done through functions. Here I'm only refering to numeric and character functions that are commonly used in creating or recoding variables. </p>
<p> (To practice working with functions, try the functions sections of this <a href="https://www.datacamp.com/courses/intermediate-r-practice">this interactive course</a>.)</p>

<h2>Numeric Functions </h2>
<p>
  <table border="0">
    <tr>
      <td valign="top"><strong>Function</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>abs(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">absolute value </td>
    </tr>
    <tr>
      <td valign="top"><strong>sqrt(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">square root </td>
    </tr>
    <tr>
      <td valign="top"><strong>ceiling(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">ceiling(3.475) is 4 </td>
    </tr>
    <tr>
      <td valign="top"><strong>floor(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">floor(3.475) is 3 </td>
    </tr>
    <tr>
      <td valign="top"><strong>trunc(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">trunc(5.99) is 5 </td>
    </tr>
    <tr>
      <td valign="top"><strong>round(</strong><em>x</em><strong>, digits=</strong><em>n</em><strong>) </strong></td>
      <td valign="top">round(3.475, digits=2) is 3.48 </td>
    </tr>
    <tr>
      <td valign="top"><strong>signif(</strong><em>x</em><strong>, digits=</strong><em>n</em><strong>) </strong></td>
      <td valign="top">signif(3.475, digits=2) is 3.5 </td>
    </tr>
    <tr>
      <td valign="top"><strong>cos(</strong><em>x</em><strong>), sin(</strong><em>x</em><strong>), tan(</strong><em>x</em><strong>) </strong></td>
      <td valign="top">also acos(<em>x</em>), cosh(<em>x</em>), acosh(<em>x</em>), etc. </td>
    </tr>
    <tr>
      <td valign="top"><strong>log(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">natural logarithm</td>
    </tr>
    <tr>
      <td valign="top"><strong>log10(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">common logarithm </td>
    </tr>
    <tr>
      <td valign="top"><strong>exp(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">e^<em>x</em></td>
    </tr>
  </table>
</p>

<h2>Character Functions </h2>
<p>
  <table border="0">

    <tr>
      <td valign="top"><strong>Function</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>substr(</strong><em>x</em><strong>, start=</strong><em>n1</em><strong>, stop=</strong><em>n2</em><strong>) </strong></td>
      <td valign="top">Extract or replace substrings in a character vector.<br />
x &lt;- &quot;abcdef&quot; <br />
substr(x, 2, 4) is &quot;bcd&quot; <br />
substr(x, 2, 4) &lt;- &quot;22222&quot; is &quot;a222ef&quot; </td>
    </tr>
    <tr>
      <td valign="top"><strong>grep(</strong><em>pattern</em><strong>,</strong><em> x </em><strong>, ignore.case=</strong>FALSE<strong>, fixed=</strong>FALSE<strong>) </strong></td>
      <td valign="top">Search for <em>pattern</em> in <em>x</em>. If fixed =FALSE then <em>pattern</em> is a <a href="http://regexlib.com/CheatSheet.aspx">regular expression</a>. If fixed=TRUE then <em>pattern</em> is a text string. Returns matching indices.<br />
grep(&quot;A&quot;, c(&quot;b&quot;,&quot;A&quot;,&quot;c&quot;), fixed=TRUE) returns 2 </td>
    </tr>
    <tr>
      <td valign="top"><strong>sub(</strong><em>pattern</em><strong>, </strong><em>replacement</em><strong>, </strong><em>x</em><strong>, ignore.case =</strong>FALSE<strong>, fixed=</strong>FALSE<strong>) </strong></td>
      <td valign="top">Find <em>pattern</em> in <em>x</em> and replace with <em>replacement</em> text. If fixed=FALSE then <em>pattern</em> is a regular expression<a href="http://regexlib.com/CheatSheet.aspx">.<br />
</a> If fixed = T then <em>pattern</em> is a text string. <br />
sub(&quot;\\s&quot;,&quot;.&quot;,&quot;Hello There&quot;) returns &quot;Hello.There&quot; </td>
    </tr>
    <tr>
      <td valign="top"><strong>strsplit(</strong><em>x</em><strong>, </strong><em>split</em><strong>)</strong></td>
      <td valign="top">Split the elements of character vector <em>x</em> at <em>split</em>. <br />
strsplit(&quot;abc&quot;, &quot;&quot;) returns 3 element vector &quot;a&quot;,&quot;b&quot;,&quot;c&quot; </td>
    </tr>
    <tr>
      <td valign="top"><strong>paste(..., sep=&quot;&quot;) </strong></td>
      <td valign="top">Concatenate strings after using <em>sep</em> string to seperate them.<br />
paste(&quot;x&quot;,1:3,sep=&quot;&quot;) returns c(&quot;x1&quot;,&quot;x2&quot; &quot;x3&quot;)<br />
paste(&quot;x&quot;,1:3,sep=&quot;M&quot;) returns c(&quot;xM1&quot;,&quot;xM2&quot; &quot;xM3&quot;)<br />
paste(&quot;Today is&quot;, date()) </td>
    </tr>
    <tr>
      <td valign="top"><strong>toupper(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">Uppercase</td>
    </tr>
    <tr>
      <td valign="top"><strong>tolower(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">Lowercase</td>
    </tr>
  </table>

</p>
<h2>Statistical Probability Functions</h2>
<p>The following table describes functions related to probaility distributions. For random number generators below, you can use set.seed(1234) or some other integer to create reproducible pseudo-random numbers.</p>
<table border="0">
  <tr>
    <td valign="top"><strong>Function</strong></td>
    <td valign="top"><strong>Description</strong></td>
  </tr>
  <tr>
    <td valign="top"><strong>dnorm(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">normal density function (by default m=0 sd=1)<br />
      # plot standard normal curve<br />
      x &lt;- pretty(c(-3,3), 30)<br />
      y &lt;- dnorm(x)<br />
      plot(x, y, type='l', xlab=&quot;Normal Deviate&quot;, ylab=&quot;Density&quot;, yaxs=&quot;i&quot;) </td>
  </tr>
  <tr>
    <td valign="top"><strong>pnorm(</strong><em>q</em><strong>)</strong></td>
    <td valign="top">cumulative normal probability for q <br />
      (area under the normal curve to the left of q)<br />
      pnorm(1.96) is 0.975 </td>
  </tr>
  <tr>
    <td valign="top"><strong>qnorm(</strong><em>p</em><strong>)</strong></td>
    <td valign="top">normal quantile. <br />
      value at the p percentile of normal distribution <br />
      qnorm(.9) is 1.28 # 90th percentile </td>
  </tr>
  <tr>
    <td valign="top"><strong>rnorm(</strong><em>n</em><strong>, m=</strong>0<strong>,sd=</strong>1<strong>)</strong></td>
    <td valign="top">n random normal deviates with mean m <br />
      and standard deviation sd. <br />
      #50 random normal variates with mean=50, sd=10<br />
      x &lt;- rnorm(50, m=50, sd=10) </td>
  </tr>
  <tr>
    <td valign="top"><strong>dbinom(</strong><em>x</em><strong>,</strong><em> size</em><strong>,</strong><em> prob</em><strong>)<br />
pbinom(</strong><em>q</em><strong>, </strong><em>size</em><strong>, </strong><em>prob</em><strong>)<br />
qbinom(</strong><em>p</em><strong>, </strong><em>size</em><strong>, </strong><em>prob</em><strong>)<br />
rbinom(</strong><em>n</em><strong>,</strong><em> size</em><strong>,</strong><em> prob</em><strong>)</strong></td>
    <td valign="top">binomial distribution where size is the sample size <br />
      and prob is the probability of a heads (pi) <br />
      # prob of 0 to 5 heads of fair coin out of 10 flips<br />
      dbinom(0:5, 10, .5) <br />
      # prob of 5 or less heads of fair coin out of 10 flips<br />
      pbinom(5, 10, .5) </td>
  </tr>
  <tr>
    <td valign="top"><strong>dpois(</strong><em>x</em><strong>, </strong><em>lamda</em><strong>)<br />
ppois(</strong><em>q</em><strong>, </strong><em>lamda</em><strong>)<br />
qpois(</strong><em>p</em><strong>, </strong><em>lamda</em><strong>)<br />
rpois(</strong><em>n</em><strong>, </strong><em>lamda</em><strong>)</strong></td>
    <td valign="top">poisson distribution with m=std=lamda<br />
      #probability of 0,1, or 2 events with lamda=4<br />
      dpois(0:2, 4)<br />
      # probability of at least 3 events with lamda=4 <br />
      1- ppois(2,4) </td>
  </tr>
  <tr>
    <td valign="top"><strong>dunif(</strong><em>x</em><strong>, min=</strong>0<strong>, max=</strong>1<strong>)<br />
punif(</strong><em>q</em><strong>, min=0, max=</strong>1<strong>)<br />
qunif(</strong><em>p</em><strong>, min=</strong>0<strong>, max=</strong>1<strong>)<br />
runif(</strong><em>n</em><strong>, min=</strong>0<strong>, max=</strong>1<strong>) </strong></td>
    <td valign="top">uniform distribution, follows the same pattern <br />
      as the normal distribution above. <br />
      #10 uniform random variates<br />
      x &lt;- runif(10)</td>
  </tr>
</table>

<h2>Other Statistical Functions</h2>
<p>Other useful statistical functions are provided in the following table. Each has the option na.rm to strip missing values before calculations. Otherwise the presence of missing values will lead to a missing result. Object can be a numeric vector or data frame. </p>
<table border="0">
  <tr>
    <td valign="top"><strong>Function</strong></td>
    <td valign="top"><strong>Description</strong></td>
  </tr>
  <tr>
    <td valign="top"><strong>mean(</strong><em>x</em><strong>, trim=</strong>0<strong>,<br />
na.rm=</strong>FALSE<strong>)</strong></td>
    <td valign="top">mean of object x<br />
      # trimmed mean, removing any missing values and <br />
      # 5 percent of highest and lowest scores <br />
      mx &lt;- mean(x,trim=.05,na.rm=TRUE) </td>
  </tr>
  <tr>
    <td valign="top"><strong>sd(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">standard deviation of object(x). also look at var(x) for variance and mad(x) for median absolute deviation. </td>
  </tr>
  <tr>
    <td valign="top"><strong>median(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">median</td>
  </tr>
  <tr>
    <td valign="top"><strong>quantile(</strong><em>x</em><strong>, </strong><em>probs</em><strong>)</strong></td>
    <td valign="top">quantiles where x is the numeric vector whose quantiles are desired and probs is a numeric vector with probabilities in [0,1].<br />
      # 30th and 84th percentiles of x<br />
      y &lt;- quantile(x, c(.3,.84)) </td>
  </tr>
  <tr>
    <td valign="top"><strong>range(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">range</td>
  </tr>
  <tr>
    <td valign="top"><strong>sum(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">sum</td>
  </tr>
  <tr>
    <td valign="top"><strong>diff(</strong><em>x</em><strong>, lag=</strong><em>1</em><strong>) </strong></td>
    <td valign="top">lagged differences, with lag indicating which lag to use </td>
  </tr>
  <tr>
    <td valign="top"><strong>min(</strong><em>x</em><strong>) </strong></td>
    <td valign="top">minimum</td>
  </tr>
  <tr>
    <td valign="top"><strong>max(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">maximum</td>
  </tr>
  <tr>
    <td valign="top"><strong>scale(</strong><em>x</em><strong>, center=</strong>TRUE<strong>, scale=</strong>TRUE<strong>)</strong></td>
    <td valign="top">column center or standardize a matrix. </td>
  </tr>
</table>

<h2>Other Useful Functions </h2>
<p>
  <table width="90%" border="0">
    <tr>
      <td><strong>Function</strong></td>
      <td><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>seq(</strong><em>from</em><strong> ,</strong><em> to</em><strong>,</strong><em> by</em><strong>)</strong></td>
      <td>generate a sequence<br />
indices &lt;- seq(1,10,2)<br />
#indices is c(1, 3, 5, 7, 9) </td>
    </tr>
    <tr>
      <td valign="top"><strong>rep(</strong><em>x</em><strong>, </strong><em>ntimes</em><strong>)</strong></td>
      <td>repeat <em>x</em> <em>n</em> times<br />
y &lt;- rep(1:3, 2)<br />
# y is c(1, 2, 3, 1, 2, 3)</td>
    </tr>
    <tr>
      <td valign="top"><strong>cut(</strong><em>x</em><strong>,</strong><em> n</em><strong>)</strong> </td>
      <td>divide continuous variable in factor with <em>n</em> levels <br />
y &lt;- cut(x, 5) </td>
    </tr>
  </table>
</p>
<p>Note that while the examples on this page apply functions to individual variables, many can be applied to vectors and matrices as well. </p>

<p>Importing data into R is fairly simple. For Stata and Systat, use the <a href="http://cran.r-project.org/web/packages/foreign/index.html">foreign</a> package. For SPSS and SAS I would recommend the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package for ease and functionality. See the Quick-R section on <a href="../interface/packages.html">packages</a>, for information on obtaining and installing the these packages. Example of importing data are provided below. </p>
<h2>From A Comma Delimited Text File</h2>
<p><code># first row contains variable names, comma is separator <br />
    # assign the variable <em>id</em> to row names<br />
    # note the / instead of \ on mswindows systems
    <br />
    <br />
    mydata &lt;- read.table(&quot;c:/mydata.csv&quot;, header=TRUE, <br />
    &nbsp;&nbsp; sep=&quot;,&quot;, row.names=&quot;id&quot;)</code></p>
<p>(To practice importing a csv file, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-1/importing-data-from-flat-files-with-utils?ex=2">this exercise.</a>)</p>
<h2>From Excel</h2>
<p>One of the best ways to read an Excel file is to export it to a comma delimited file and import it using the method above. Alternatively you can use the <strong>xlsx</strong> package to access Excel files. The first row should contain variable/column names. </p>
<p>
  <code>
    # read in the first worksheet from the workbook <em>myexcel.xlsx</em><br />
    # first row contains variable names<br />
    library(xlsx)<br />
    mydata &lt;- read.xlsx(&quot;c:/myexcel.xlsx&quot;, 1)<br />
    <br />
    # read in the worksheet named <em>mysheet</em><br />
    mydata &lt;- read.xlsx(&quot;c:/myexcel.xlsx&quot;, sheetName = &quot;mysheet&quot;)
  </code>
</p>
<p>(To practice, try this <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-1/importing-excel-data?ex=3"> exercise on importing an Excel worksheet</a> into R.)</p>

<h2>From SPSS</h2>
<p><code># save SPSS dataset in trasport format<br />
    get file='c:\mydata.sav'.<br />
    export outfile='c:\mydata.por'. <br />
    <br />
    # in R
    <br />
    library(Hmisc)<br />
    mydata &lt;- spss.get(&quot;c:/mydata.por&quot;, use.value.labels=TRUE)<br />
    # last option converts value labels to R factors </code></p>
<p>(To practice importing SPSS data with the <strong>foreign</strong> package, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-2/importing-data-from-statistical-software-packages?ex=11">this exercise.</a>)</p>
<h2>From SAS</h2>
<p><code># save SAS dataset in trasport format<br />
    libname out xport 'c:/mydata.xpt';<br />
    data out.mydata;<br />
    set sasuser.mydata;<br />
    run;<br />
    <br />
    # in R
    <br />
    library(Hmisc)<br />
    mydata &lt;- sasxport.get(&quot;c:/mydata.xpt&quot;)<br />
    # character variables are converted to R factors
  </code></p>
<h2>From Stata</h2>
<p><code># input Stata file<br />
    library(foreign)<br />
    mydata &lt;- read.dta(&quot;c:/mydata.dta&quot;)
  </code></p>
<p>(To practice importing Stata data with the <strong>foreign</strong> package, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-2/importing-data-from-statistical-software-packages?ex=8">this exercise.</a>)</p>
<h2>From systat </h2>
<p><code># input Systat file<br />
    library(foreign)<br />
    mydata &lt;- read.systat(&quot;c:/mydata.dta&quot;)
  </code></p>
<h2>Going Further</h2>
<p>Try this interactive course: <a href="https://www.datacamp.com/courses/importing-data-in-r-part-1">Importing Data in R (Part 1),</a> to work with csv and xlsx files in R. To work with SAS, Stata, and other formats try <a href="https://www.datacamp.com/courses/importing-data-in-r-part-2"> Part 2</a>.</p>

<p>R provides a wide range of functions for obtaining summary statistics. One method of obtaining descriptive statistics is to use the <strong>sapply( ) </strong>function with a specified summary statistic. </p>
<p><code># get means for variables in data frame mydata<br />
    # excluding missing values
    <br />
    sapply(mydata, mean, na.rm=TRUE)
  </code></p>
<p>Possible functions used in sapply include <strong>mean, sd, var, min, max, median, range, and quantile</strong>. </p>
<p>There are also numerous R functions designed to provide a range of descriptive statistics at once. For example </p>
<p><code> # mean,median,25th and 75th quartiles,min,max<br />
    summary(mydata)<br />
    <br />
    # Tukey min,lower-hinge, median,upper-hinge,max<br />
    fivenum(x)</code></p>
<p>Using the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package</p>
<p><code>library(Hmisc)<br />
    describe(mydata) <br />
    # n, nmiss, unique, mean, 5,10,25,50,75,90,95th percentiles <br />
    # 5 lowest and 5 highest scores</code></p>
<p>Using the <strong><a href="http://cran.r-project.org/web/packages/pastecs/index.html">pastecs</a> </strong>package</p>
<p><code>library(pastecs)<br />
    stat.desc(mydata)
    <br />
    # nbr.val, nbr.null, nbr.na, min max, range, sum, <br />
    #
    median, mean, SE.mean, CI.mean, var, std.dev, coef.var
  </code></p>
<p>Using the <a href="http://cran.r-project.org/web/packages/psych/index.html">psych</a> package</p>
<p><code>library(psych)<br />
    describe(mydata)<br />
    # item name ,item number, nvalid,
    mean, sd, <br />
    #
    median, mad, min, max, skew, kurtosis, se</code></p>
<h2>Summary Statistics by Group </h2>
<p>A simple way of generating summary statistics by grouping variable is available in the <a href="http://cran.r-project.org/web/packages/psych/index.html">psych</a> package.</p>
<p><code>library(psych)<br />
    describe.by(mydata, group,...)</code></p>
<p>The <a href="http://cran.r-project.org/web/packages/doBy/index.html">doBy</a> package provides much of the functionality of SAS PROC SUMMARY. It defines the desired table using a model formula and a function. Here is a simple example. </p>
<p><code>library(doBy)<br />
    summaryBy(mpg + wt ~ cyl + vs, data = mtcars, <br />
    &nbsp; FUN = function(x) {
    c(m = mean(x), s = sd(x))
    } )<br />
    # produces mpg.m wt.m mpg.s wt.s for each <br />
    # combination of the levels of cyl and vs </code></p>
<p><strong>See also</strong>: <a href="../management/aggregate.html">aggregating data</a>. </p>
<h2>To Practice </h2>
<p> Want to practice interactively? Try <a href="https://www.datacamp.com/courses/intro-to-statistics-with-r-introduction">this free course on statistics and R</a></p>

<p>In R, graphs are typically created interactively. </p>
<p><code># Creating a Graph<br />
    attach(mtcars)<br />
    plot(wt, mpg) <br />
    abline(lm(mpg~wt))<br />
    title(&quot;Regression of MPG on Weight&quot;)</code></p>
<p> The <strong>plot( )</strong> function opens a graph window and plots weight vs. miles per gallon. <br />
  The next line of code adds a regression line to this graph. The final line adds a title. </p>
<p><a href="images/plotexample.png"><img src="https://www.statmethods.net/graphs/creating/smplotexample.jpg"></a> click to view </p>
<h2>Saving Graphs </h2>
<p>You can save the graph in a variety of formats from the menu <br />
  <strong>File -&gt; Save As</strong>. </p>
<p>You can also save the graph via code using one of the following functions.</p>
<p>
  <table>
    <tr>
      <td><strong>Function</strong></td>
      <td><strong>Output to </strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>pdf(&quot;mygraph.pdf&quot;)</strong></td>
      <td valign="top">pdf file </td>
    </tr>
    <tr>
      <td valign="top"><strong>win.metafile(&quot;mygraph.wmf&quot;)</strong></td>
      <td valign="top">windows metafile </td>
    </tr>
    <tr>
      <td valign="top"><strong>png(&quot;mygraph.png&quot;)</strong></td>
      <td valign="top">png file </td>
    </tr>
    <tr>
      <td valign="top"><strong>jpeg(&quot;mygraph.jpg&quot;)</strong></td>
      <td valign="top">jpeg file </td>
    </tr>
    <tr>
      <td valign="top"><strong>bmp(&quot;mygraph.bmp&quot;)</strong></td>
      <td valign="top">bmp file </td>
    </tr>
    <tr>
      <td valign="top"><strong>postscript(&quot;mygraph.ps&quot;)</strong></td>
      <td valign="top">postscript file </td>
    </tr>
  </table>
</p>
<p>See <a href="../interface/io.html">input/output</a> for details.</p>
<h2>Viewing Several Graphs </h2>
<p>Creating a new graph by issuing a high level plotting command (plot, hist, boxplot, etc.) will typically <strong>overwrite</strong> a previous graph. To avoid this, open a new graph window before creating a new graph. To open a new graph window use one of the functions below.</p>
<p>
  <table>
    <tr>
      <td><strong>Function</strong></td>
      <td><strong>Platform</strong></td>
    </tr>
    <tr>
      <td><strong>windows()</strong></td>
      <td>Windows</td>
    </tr>
    <tr>
      <td><strong>X11()</strong></td>
      <td>Unix</td>
    </tr>
    <tr>
      <td><strong>quartz()</strong></td>
      <td>Mac</td>
    </tr>
  </table>
</p>
<p>You can have multiple graph windows open at one time. See <strong>help(dev.cur)</strong> for more details. </p>
<p>Alternatively, after opening the first graph window, choose <strong>History -&gt; Recording </strong>from the graph window menu. Then you can use<strong> Previous</strong> and <strong>Next</strong> to step through the graphs you have created. </p>
<h2>Graphical Parameters</h2>
<p>You can specify fonts, colors, line styles, axes, reference lines, etc. by specifying <a href="../advgraphs/parameters.html">graphical parameters</a>. This allows a wide degree of customization. <a href="../advgraphs/parameters.html">Graphical parameters</a>, are covered in the <a href="../advgraphs/index.html">Advanced Graphs</a> section. The <a href="../advgraphs/index.html">Advanced Graphs</a> section also includes a more detailed coverage of <a href="../advgraphs/axes.html">axis and text </a>customization. </p>
<h2>To Practice</h2>
<p>Try the creating graph exercises in <a href="https://www.datacamp.com/courses/data-visualization-in-r"> this course on data visualization in R.</a></p>

<p>Packages are collections of R functions, data, and compiled code in a well-defined format. The directory where packages are stored is called the library. R comes with a standard set of packages. Others are available for download and installation. Once installed, they have to be loaded into the session to be used. </p>
<p><code>.libPaths() # get library location
    <br />
    library() &nbsp;&nbsp;# see all packages installed <br />
    search() &nbsp;&nbsp;&nbsp;# see packages currently loaded</code></p>

<h2>Adding Packages</h2>
<p> You can expand the types of analyses you do be adding other packages. A complete <a href="http://cran.r-project.org/web/packages/">list of contributed packages</a> is available from CRAN. </p>
<p>Follow these steps:</p>
<ol>
  <li><span>Download and install a package (you only need to do this once).</span></li>
  <li><span>To use the package, invoke the<strong> library(</strong><em>package</em><strong>)</strong> command to load it into the current session. (You need to do this once in each session, unless you <a href="customizing.html">customize your environment</a> to automatically load it each time.) </span></li>
</ol>
<p>On <strong>MS Windows</strong>:</p>
<ol>
  <li><span>Choose <strong>Install Packages</strong> from the <strong>Packages</strong> menu</span>.</li>
  <li><span>Select a <strong>CRAN Mirror. </strong>(e.g. Norway)</span></li>
  <li><span>Select a package. (e.g. boot</span>)</li>
  <li><span>Then use the <strong>library(</strong><em>package</em><strong>)</strong> function to load it for use. (e.g. library(boot)) </span></li>
</ol>
<p>On <strong>Linux</strong>:</p>
<ol>
  <li><span>Download the package of interest as a compressed file. </span></li>
  <li><span>At the command prompt, install it using <strong><br />
R CMD INSTALL <em>[options] [l-lib]</em> <em>pkgs</em> </strong></span></li>
  <li><span>Use the<strong> library(</strong><em>package</em><strong>)</strong> function within R to load it for use in the session. </span></li>
</ol>

<h2>Creating Your Own Packages</h2>
<p>To create your own packages look at <a href="http://cran.r-project.org/doc/manuals/R-exts.pdf">Writing R Extensions </a>(the definitive guide), Leisch's <a href="http://cran.r-project.org/doc/contrib/Leisch-CreatingPackages.pdf">Creating R Packages: A Tutorial</a>, and Rossi's <a href="http://www1.appstate.edu/~arnholta/Software/MakingPackagesUnderWindows.pdf">Making R packages Under Windows: A Tutorial</a>. </p>
<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/free-introduction-to-r"> This free interactive course </a>covers the basics of R.</p>

<p>Once R is installed, there is a comprehensive built-in help system. At the program's command prompt you can use any of the following:</p>

<p><code>help.start() &nbsp;&nbsp;# general help<br />
    help(<em>foo</em>) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# help about function <em>foo</em><br />
    ?<em>foo</em> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# same thing <br />
    apropos(&quot;<em>foo</em>&quot;)
    # list all functions containing string foo<br />
    example(<em>foo</em>) &nbsp;&nbsp;# show an example of function <em>foo</em> </code></p>
<p><code># search for foo in help manuals and archived mailing lists<br />
    RSiteSearch(&quot;<em>foo</em>&quot;) </code></p>
<p><code># get vignettes on using installed packages<br />
    vignette() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# show available vingettes<br />
    vignette(&quot;<em>foo</em>&quot;) # show specific vignette
  </code></p>
<h2>Sample Datasets</h2>
<p>R comes with a number of sample datasets that you can experiment with. Type <strong>data( )</strong> to see the available datasets. The results will depend on which <a href="packages.html">packages</a> you have loaded. Type <strong>help(</strong><em>datasetname</em>) for details on a sample dataset. </p>

<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/free-introduction-to-r"> This free interactive course </a>covers the basics of R.</p>

<p>Once R is installed, there is a comprehensive built-in help system. At the program's command prompt you can use any of the following:</p>

<p><code>help.start() &nbsp;&nbsp;# general help<br />
    help(<em>foo</em>) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# help about function <em>foo</em><br />
    ?<em>foo</em> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# same thing <br />
    apropos(&quot;<em>foo</em>&quot;)
    # list all functions containing string foo<br />
    example(<em>foo</em>) &nbsp;&nbsp;# show an example of function <em>foo</em> </code></p>
<p><code># search for foo in help manuals and archived mailing lists<br />
    RSiteSearch(&quot;<em>foo</em>&quot;) </code></p>
<p><code># get vignettes on using installed packages<br />
    vignette() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# show available vingettes<br />
    vignette(&quot;<em>foo</em>&quot;) # show specific vignette
  </code></p>
<h2>Sample Datasets</h2>
<p>R comes with a number of sample datasets that you can experiment with. Type <strong>data( )</strong> to see the available datasets. The results will depend on which <a href="packages.html">packages</a> you have loaded. Type <strong>help(</strong><em>datasetname</em>) for details on a sample dataset. </p>

<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/free-introduction-to-r"> This free interactive course </a>covers the basics of R.</p>

<p>The workspace is your current R working environment and includes any user-defined objects (vectors, matrices, data frames, lists, functions). At the end of an R session, the user can save an image of the current workspace that is automatically reloaded the next time R is started. Commands are entered interactively at the R user prompt. <strong>Up</strong> and <strong>down arrow keys</strong> scroll through your command history. <br />
  <br />
  You will probably want to keep different projects in different physical directories. Here are some standard commands for managing your workspace. </p>

<p><code>getwd() # print the current working directory - cwd <br />
    ls() &nbsp;&nbsp;&nbsp;# list the objects in the current workspace</code></p>
<p><code> setwd(mydirectory) &nbsp;&nbsp;&nbsp;&nbsp; # change to mydirectory<br />
    setwd(&quot;c:/docs/mydir&quot;) &nbsp;# note / instead of \ in windows <br />
    setwd(&quot;/usr/rob/mydir&quot;) # on linux</code></p>
<p><code># view and set options for the session<br />
    help(options) # learn about available options<br />
    options() # view current option settings<br />
    options(digits=3) # number of digits to print on output
  </code></p>
<p><code># work with your previous commands<br />
    history() # display last 25 commands<br />
    history(max.show=Inf) # display all previous commands<br />
    <br />
    # save your command history <br />
    savehistory(file=&quot;<em>myfile</em>&quot;) # default is &quot;.Rhistory&quot; <br />
    <br />
    # recall your command history <br />
    loadhistory(file=&quot;<em>myfile</em>&quot;)
    # default is &quot;.Rhistory&quot;</code></p>
<p><code># save the workspace to the file .RData in the cwd
    <br />
    save.image()<br />
    <br />
    # save specific objects to a file<br />
    # if you don't specify the path, the cwd is assumed
    <br />
    save(object list,file=&quot;myfile.RData&quot;) </code></p>
<p><code># load a workspace into the current session<br />
    # if you don't specify the path, the cwd is assumed <br />
    load(&quot;myfile.RData&quot;)
  </code></p>
<p><code>q() # quit R. You will be prompted to save the workspace. </code></p>
<h2>Important Note to Windows Users:</h2>
<p>R gets confused if you use a path in your code like:
  <code>c:\mydocuments\myfile.txt</code>
  This is because R sees &quot;\&quot; as an escape character. Instead, use:
  <code>c:\\my documents\\myfile.txt<br>
    c:/mydocuments/myfile.txt</code>
  Either will work. I use the second convention throughout this website. </p>
<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/free-introduction-to-r"> This free intro to R course</a> will get you familiar with the R workspace.</p>

<p>By default, launching R starts an interactive session with input from the keyboard and output to the screen. However, you can have input come from a script file (a file containing R commands) and direct output to a variety of destinations.</p>
<h2>Input </h2>
<p>The <strong>source( )</strong> function runs a script in the current session. If the filename does not include a path, the file is taken from the current working directory. </p>
<p><code># input a script<br />
    source(&quot;myfile&quot;)
  </code></p>
<h2>Output</h2>
<p>The <strong>sink( )</strong> function defines the direction of the output. </p>
<p><code># direct output to a file <br />
    sink(&quot;myfile&quot;, append=FALSE, split=FALSE)<br />
    <br />
    # return output to the terminal <br />
    sink()</code></p>
<p>The <strong>append</strong> option controls whether output overwrites or adds to a file. The <strong>split</strong> option determines if output is also sent to the screen as well as the output file.</p>
<p>Here are some examples of the <strong>sink() </strong>function. </p>
<p><code> # output directed to output.txt in c:\projects directory.<br />
    # output overwrites existing file. no output to terminal. <br />
    sink(&quot;c:/projects/output.txt&quot;)<br />
    <br />
    # output directed to myfile.txt in cwd. output is appended<br />
    # to existing file. output also send to terminal. <br />
    sink(&quot;myfile.txt&quot;, append=TRUE, split=TRUE) </code></p>
<p>When redirecting output, use the <strong>cat( )</strong> function to annotate the output. </p>
<h2>Graphs</h2>
<p><strong>sink( )</strong> will not redirect graphic output. To redirect graphic output use one of the following functions. Use <strong>dev.off( )</strong> to return output to the terminal. </p>
<table width="90%" border="0">
  <tr>
    <td><strong>Function</strong></td>
    <td><strong>Output to </strong></td>
  </tr>
  <tr>
    <td valign="top"><strong>pdf(&quot;mygraph.pdf&quot;)</strong></td>
    <td valign="top">pdf file </td>
  </tr>
  <tr>
    <td valign="top"><strong>win.metafile(&quot;mygraph.wmf&quot;)</strong></td>
    <td valign="top">windows metafile </td>
  </tr>
  <tr>
    <td valign="top"><strong>png(&quot;mygraph.png&quot;)</strong></td>
    <td valign="top">png file </td>
  </tr>
  <tr>
    <td valign="top"><strong>jpeg(&quot;mygraph.jpg&quot;)</strong></td>
    <td valign="top">jpeg file </td>
  </tr>
  <tr>
    <td valign="top"><strong>bmp(&quot;mygraph.bmp&quot;)</strong></td>
    <td valign="top">bmp file </td>
  </tr>
  <tr>
    <td valign="top"><strong>postscript(&quot;mygraph.ps&quot;)</strong></td>
    <td valign="top">postscript file </td>
  </tr>
</table>
<p>Use a full path in the file name to save the graph outside of the current working directory. </p>
<p><code># example - output graph to jpeg file <br />
    jpeg(&quot;c:/mygraphs/myplot.jpg&quot;)<br />
    plot(x)<br />
    dev.off()</code></p>
<h2>To Practice</h2>
<p> To start running scripts in R, try this <a href="https://www.datacamp.com/courses/free-introduction-to-r">free interactive introduction to R course.</a></p>

<p>Packages are collections of R functions, data, and compiled code in a well-defined format. The directory where packages are stored is called the library. R comes with a standard set of packages. Others are available for download and installation. Once installed, they have to be loaded into the session to be used. </p>
<p><code>.libPaths() # get library location
    <br />
    library() &nbsp;&nbsp;# see all packages installed <br />
    search() &nbsp;&nbsp;&nbsp;# see packages currently loaded</code></p>

<h2>Adding Packages</h2>
<p> You can expand the types of analyses you do be adding other packages. A complete <a href="http://cran.r-project.org/web/packages/">list of contributed packages</a> is available from CRAN. </p>
<p>Follow these steps:</p>
<ol>
  <li><span>Download and install a package (you only need to do this once).</span></li>
  <li><span>To use the package, invoke the<strong> library(</strong><em>package</em><strong>)</strong> command to load it into the current session. (You need to do this once in each session, unless you <a href="customizing.html">customize your environment</a> to automatically load it each time.) </span></li>
</ol>
<p>On <strong>MS Windows</strong>:</p>
<ol>
  <li><span>Choose <strong>Install Packages</strong> from the <strong>Packages</strong> menu</span>.</li>
  <li><span>Select a <strong>CRAN Mirror. </strong>(e.g. Norway)</span></li>
  <li><span>Select a package. (e.g. boot</span>)</li>
  <li><span>Then use the <strong>library(</strong><em>package</em><strong>)</strong> function to load it for use. (e.g. library(boot)) </span></li>
</ol>
<p>On <strong>Linux</strong>:</p>
<ol>
  <li><span>Download the package of interest as a compressed file. </span></li>
  <li><span>At the command prompt, install it using <strong><br />
R CMD INSTALL <em>[options] [l-lib]</em> <em>pkgs</em> </strong></span></li>
  <li><span>Use the<strong> library(</strong><em>package</em><strong>)</strong> function within R to load it for use in the session. </span></li>
</ol>

<h2>Creating Your Own Packages</h2>
<p>To create your own packages look at <a href="http://cran.r-project.org/doc/manuals/R-exts.pdf">Writing R Extensions </a>(the definitive guide), Leisch's <a href="http://cran.r-project.org/doc/contrib/Leisch-CreatingPackages.pdf">Creating R Packages: A Tutorial</a>, and Rossi's <a href="http://www1.appstate.edu/~arnholta/Software/MakingPackagesUnderWindows.pdf">Making R packages Under Windows: A Tutorial</a>. </p>
<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/free-introduction-to-r"> This free interactive course </a>covers the basics of R.</p>

<p>R is a command line driven program. The user enters commands at the prompt ( <strong>&gt;</strong> by default ) and each command is executed one at a time. </p>
<p>There have been a number of attempts to create a more graphical interface, ranging from code editors that interact with R, to full-blown GUIs that present the user with menus and dialog boxes.</p>
<p><a href="images/Rstudio.png"><img src="https://www.statmethods.net/interface/guis/smRstudio.png" width="85" height="103"></a> click to view</p>
<p><a href="http://rstudio.org/">RStudio</a> is my favorite example of a code editor that interfaces with R for Windows, MacOS, and Linux platforms.</p>

<p><a href="images/rcmdr.gif"><img src="https://www.statmethods.net/interface/images/smrcmdr.jpg" width="104" height="112"></a> click to view<p></p>Perhaps the most stable, full-blown GUI is <a href="http://socserv.mcmaster.ca/jfox/Misc/Rcmdr/">R Commander</a>, which can also run under Windows, Linux, and MacOS (see the documentation for technical requirements).</p>

<p>Both of these programs can make R a lot easier to use.</p>
<h2>To Practice </h2>
<p> <a href="https://www.datacamp.com/courses/working-with-the-rstudio-ide-part-1">This interactive course</a> gives an overview of installing and working with RStudio.</p>

<p>You can customize the R environment through a site initialization file or a directory initialization file. R will always source the <strong>Rprofile.site</strong> file first. On Windows, the file is in the <em>C:\Program Files\R\R-n.n.n\etc</em> directory. You can also place a <strong>.Rprofile</strong> file in any directory that you are going to run R from or in the user home directory. </p>
<p>At startup, R will source the <strong>Rprofile.site</strong> file. It will then look for a .<strong>Rprofile</strong> file to source in the current working directory. If it doesn't find it, it will look for one in the user's home directory. There are two special functions you can place in these files. .<strong>First( )</strong> will be run at the start of the R session and <strong>.Last( )</strong> will be run at the end of the session. </p>
<p><code># Sample Rprofile.site file
    <br />
    <br />
    # Things you might want to change<br />
    # options(papersize=&quot;a4&quot;)
    <br />
    # options(editor=&quot;notepad&quot;)
    <br />
    # options(pager=&quot;internal&quot;)<br />
    <br />
    # R interactive prompt <br />
    # options(prompt=&quot;&gt; &quot;)<br />
    # options(continue=&quot;+ &quot;)
    <br />
    <br />
    # to prefer Compiled HTML <br />
    help
    options(chmhelp=TRUE)

    <br />
    # to prefer HTML help
    <br />
    # options(htmlhelp=TRUE)

    <br />
    <br />
    #
    General options
    <br />

    options(tab.width = 2)
    <br />
    options(width = 130)<br />
    options(graphics.record=TRUE)
    <br />
    <br />
    .First &lt;- function(){<br />
    &nbsp;library(Hmisc)<br />
    &nbsp;library(R2HTML)<br />
    &nbsp;cat(&quot;\nWelcome at&quot;, date(), &quot;\n&quot;)
    <br />
    }<br />
    <br />
    .Last &lt;- function(){
    <br />
    &nbsp;cat(&quot;\nGoodbye at &quot;, date(), &quot;\n&quot;)<br />
    }<br />
  </code></p>
<h2>Going Further</h2>
<p> To explore customizing the RStudio interface, try this <a href="https://www.datacamp.com/courses/working-with-the-rstudio-ide-part-1">RStudio course</a> which is taught by Garrett Grolemund, data scientist for RStudio.</p>

<p>Compared with SAS and SPSS, R's ability to output results for publication quality reports is somewhat rudimentary (although this is evolving).
  <p>The <a href="https://www.rdocumentation.org/packages/R2HTML/versions/2.3.2">R2HTML</a> package lets you output text, tables, and graphs in HTML format. Here is a sample session, followed by an explanation. </p>
  <p><code># Sample Session <br />
      library(R2HTML)<br />
      HTMLStart(outdir=&quot;c:/mydir&quot;, file=&quot;myreport&quot;,<br />
      &nbsp;&nbsp; extension=&quot;html&quot;, echo=FALSE, HTMLframe=TRUE)<br />
      HTML.title(&quot;My Report&quot;, HR=1)<br />
      <br />
      HTML.title(&quot;Description of my data&quot;, HR=3)<br />
      summary(mydata)
      <br />
      <br />
      HTMLhr()<br />
      <br />
      HTML.title(&quot;X Y Scatter Plot&quot;, HR=2)<br />
      plot(mydata$y~mydata$x)<br />
      HTMLplot()
      <br />
      <br />
      HTMLStop()
    </code></p>
  <p>Once you invoke <strong>HTMLStart( )</strong>, the prompt will change to <strong>HTML&gt;</strong> until you end with <strong>HTMLStop()</strong>. </p>
  <p>The<strong> echo=TRUE</strong> option copies commands to the same file as the output. </p>
  <p><strong>HTMLframe=TRUE</strong> creates framed output, with commands in the left frame, linked to output in the right frame. By default, a CSS file named R2HTML.css controlling page look and feel is output to the same directory. Optionally, you can include a <strong>CSSFile=</strong> option to use your own formatting file. </p>
  <p>Use <strong>HTML.title()</strong> to annotate the output. The <strong>HR </strong>option refers to HTML title types (H1, H2, H3, etc.) . The default is HR=2. </p>
  <p><strong>HTMLhr()</strong> creates a horizontal rule. </p>
  <p>Since several interactive commands may be necessary to create a finished graph, invoke the <strong>HTMLplot() </strong>function when each graph is ready to output. </p>
  <p>The <strong>RNews</strong> article <a href="https://cran.r-project.org/doc/Rnews/Rnews_2003-3.pdf">The R2HTML Package</a> has more complex examples using titles, annotations, header and footer files, and cascading style sheets.</p>

  <h2>Other Options</h2>
  <p>The <a href="http://rmarkdown.rstudio.com/">R Markdown Package</a> from R Studio supports dozens of static and dynamic output formats including HTML, PDF, MS Word, scientific articles, websites, and more.
    (To practice R Markdown, try <a href="https://www.datacamp.com/courses/reporting-with-r-markdown">this tutorial</a> taught by Garrett Grolemund, Data Scientist for R Studio.)</p>

  <p><a href="http://www.stat.uni-muenchen.de/~leisch/Sweave/">Sweave</a> allows you to imbed R code in LaTeX, producing attractive reports if you know that markup language.</p>
  <p>The <a href="http://cran.r-project.org/web/packages/odfWeave/index.html">odfWeave</a> package has functions that allow you to imbedd R output in Open Document Format (ODF) files. These are the types of files created by <a href="http://www.openoffice.org">OpenOffice</a> software.</p>
  <p>The <a href="http://cran.r-project.org/web/packages/SWordInstaller/index.html">SWordInstaller</a> package allows you to add R output to Microsoft Word documents.</p>
  <p>The <a href="http://cran.r-project.org/web/packages/R2PPT/index.html">R2PPT</a> provides wrappers for adding R output to Microsoft PowerPoint presentations.</p>

<p>You can run R non-interactively with input from infile and send output (stdout/stderr) to another file. Here are examples. </p>

<p><code># on Linux <br />
    R CMD BATCH [options] my_script.R [outfile] </code></p>
<p><code># on Microsoft Windows (adjust the path to R.exe as needed) <br />
    &quot;C:\Program Files\R\R-2.13.1\bin\R.exe&quot; CMD BATCH <br />
    &nbsp;&nbsp; --vanilla --slave &quot;c:\my projects\my_script.R&quot; </code></p>
<p>Be sure to look at the section on <a href="io.html">I/O</a> for help writing R scripts.</p>
<p> See an <a href="http://cran.r-project.org/doc/manuals/R-intro.pdf">Introduction to R</a> (Appendix B) for information on the command line options. </p>
<h2>To Practice </h2>
<p> To start running scripts in R, try this <a href="https://www.datacamp.com/courses/free-introduction-to-r">free interactive introduction to R course.</a></p>

<p>In <strong>SAS</strong>, you can save the results of statistical analyses using the <em>Output Delivery System </em>(ODS). While ODS is a vast improvement over PROC PRINTO, it's sophistication can make some features very hard to learn (just try mastering PROC TEMPLATE). In <strong>SPSS</strong> you can do the same thing with the <em>Output Management System</em> (OMS). Again, not one of the easiest topics to learn. </p>
<p>One of the most useful design features of R is that the output of analyses can easily be saved and used as input to additional analyses. <code># Example 1 <br />
    lm(mpg~wt, data=mtcars) </code></p>
<p>This will run a simple linear regression of miles per gallon on car weight using the data frame mtcars. Results are sent to the screen. Nothing is saved.</p>
<p><code># Example 2 <br />
    fit &lt;- lm(mpg~wt, data=mtcars)
  </code></p>
<p>This time, the same regression is performed but the results are saved under the name fit. No output is sent to the screen. However, you now can manipulate the results. </p>
<p><code># Example 2 (continued...)<br />
    <br />
    str(fit) # view the contents/structure of &quot;fit&quot;</code></p>
<p>The assignment has actually created a <a href="../input/datatypes.html">list</a> called &quot;fit&quot; that contains a wide range of information (including the predicted values, residuals, coefficients, and more.</p>
<p><code># Example 2 (continued again)<br />
    # plot residuals by fitted values<br />
    plot(fit$residuals, fit$fitted.values)
  </code></p>
<p>To see what a function returns, look at the <strong>value</strong> section of the online help for that function. Here we would look at <strong>help(lm)</strong>.</p>
<p>The results can also be used by a wide range of other functions.</p>
<p><code># Example 2 (one last time, I promise)<br />
    <br />
    # produce diagnostic plots<br />
    plot(fit) <br />
    <br />
    # predict mpg from wt in a new set of data <br />
    predict(fit, mynewdata)<br />
    <br />
    # get and save influence statistics
    <br />
    cook &lt;- cooks.distance(fit) </code></p>

<h2>To Practice </h2>
<p> To practice reusing results in variables, try <a href="https://www.datacamp.com/courses/free-introduction-to-r">this interactive course</a> on the introduction to R programming from DataCamp. </p>

<p>R has a wide variety of data types including scalars, vectors (numerical, character, logical), matrices, data frames, and lists.</p>
<h2>Vectors</h2>
<p><code> a &lt;- c(1,2,5.3,6,-2,4) # numeric vector<br />
    b &lt;- c(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;) # character vector<br />
    c &lt;- c(TRUE,TRUE,TRUE,FALSE,TRUE,FALSE) #logical vector<br />
  </code></p>
<p>Refer to elements of a vector using subscripts. </p>
<p><code> a[c(2,4)] # 2nd and 4th elements of vector</code></p>
<h2>Matrices</h2>
<p>All columns in a matrix must have the same mode(numeric, character, etc.) and the same length. The general format is</p>
<p>mymatrix &lt;- <strong>matrix(</strong><em>vector</em>, <strong>nrow=</strong><em>r</em>, <strong>ncol=</strong><em>c</em>, <strong>byrow=</strong><em>FALSE</em>, <strong><br />
    &nbsp;&nbsp; dimnames=list(</strong><em>char_vector_rownames</em>, <em>char_vector_colnames</em><strong>)) </strong> </p>
<p><strong>byrow=TRUE</strong> indicates that the matrix should be filled by rows. <strong>byrow=FALSE</strong> indicates that the matrix should be filled by columns (the default). <strong>dimnames</strong> provides optional labels for the columns and rows. </p>
<p> <code> # generates 5 x 4 numeric matrix
    <br />
    y&lt;-matrix(1:20, nrow=5,ncol=4)<br />
    <br />
    # another example<br />
    cells &lt;- c(1,26,24,68)<br />
    rnames &lt;- c(&quot;R1&quot;, &quot;R2&quot;)<br />
    cnames &lt;- c(&quot;C1&quot;, &quot;C2&quot;)
    <br />
    mymatrix &lt;- matrix(cells, nrow=2, ncol=2, byrow=TRUE,<br />
    &nbsp;&nbsp;dimnames=list(rnames, cnames))
  </code></p>
<p>Identify rows, columns or elements using subscripts. </p>
<p><code> x[,4] # 4th column of matrix<br />
    x[3,] # 3rd row of matrix <br />
    x[2:4,1:3] # rows 2,3,4 of columns 1,2,3 </code></p>
<h2>Arrays</h2>
<p>Arrays are similar to matrices but can have more than two dimensions. See <strong>help(array)</strong> for details. </p>
<h2>Data Frames</h2>
<p>A data frame is more general than a matrix, in that different columns can have different modes (numeric, character, factor, etc.). This is similar to SAS and SPSS datasets.</p>
<p><code>d &lt;- c(1,2,3,4)<br />
    e &lt;- c(&quot;red&quot;, &quot;white&quot;, &quot;red&quot;, NA)<br />
    f &lt;- c(TRUE,TRUE,TRUE,FALSE)<br />
    mydata &lt;- data.frame(d,e,f)<br />
    names(mydata) &lt;- c(&quot;ID&quot;,&quot;Color&quot;,&quot;Passed&quot;) # variable names
  </code></p>
<p>There are a variety of ways to identify the elements of a data frame .</p>
<p><code>myframe[3:5] # columns 3,4,5 of data frame<br />
    myframe[c(&quot;ID&quot;,&quot;Age&quot;)] # columns ID and Age from data frame<br />
    myframe$X1 # variable x1 in the data frame
  </code></p>
<h2>Lists</h2>
<p>An ordered collection of objects (components). A list allows you to gather a variety of (possibly unrelated) objects under one name. </p>
<p><code># example of a list with 4 components - <br />
    #
    a string, a numeric vector, a matrix, and a scaler <br />
    w &lt;- list(name=&quot;Fred&quot;, mynumbers=a, mymatrix=y, age=5.3)<br />
    <br />
    # example of a list containing two lists <br />
    v &lt;- c(list1,list2)
  </code></p>
<p>Identify elements of a list using the [[]] convention. </p>
<p><code> mylist[[2]] # 2nd component of the list<br />
    mylist[[&quot;mynumbers&quot;]] # component named mynumbers in list</code></p>

<h2>Factors</h2>
<p>Tell R that a variable is <strong>nominal </strong> by making it a factor. The factor stores the nominal values as a vector of integers in the range [ 1... k ] (where k is the number of unique values in the nominal variable), and an internal vector of character strings (the original values) mapped to these integers. </p>
<p><code># variable gender with 20 &quot;male&quot; entries and <br />
    #
    30 &quot;female&quot; entries <br />
    gender &lt;- c(rep(&quot;male&quot;,20), rep(&quot;female&quot;, 30)) <br />
    gender &lt;- factor(gender) <br />
    # stores gender as 20 1s and 30 2s and associates<br />
    #
    1=female, 2=male internally (alphabetically)<br />
    # R now treats gender as a nominal variable <br />
    summary(gender)
  </code></p>
<p>An ordered factor is used to represent an <strong>ordinal variable</strong>. </p>
<p><code># variable rating coded as &quot;large&quot;, &quot;medium&quot;, &quot;small'<br />
    rating &lt;- ordered(rating)<br />
    # recodes rating to 1,2,3 and associates<br />
    #
    1=large, 2=medium, 3=small internally<br />
    # R now treats rating as ordinal </code></p>
<p>R will treat factors as nominal variables and ordered factors as ordinal variables in statistical proceedures and graphical analyses. You can use options in the <strong>factor( ) </strong>and <strong>ordered( )</strong> functions to control the mapping of integers to strings (overiding the alphabetical ordering). You can also use factors to create <a href="valuelabels.html">value labels</a>. For more on factors see the <a href="http://www.ats.ucla.edu/stat/R/modules/factor_variables.htm">UCLA page</a>. </p>

<h2>Useful Functions</h2>
<p><code>length(object) # number of elements or components<br />
    str(object) &nbsp;&nbsp;&nbsp;# structure of an object <br />
    class(object) &nbsp;# class or type of an object<br />
    names(object) &nbsp;# names<br />
    <br />
    c(object,object,...) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# combine objects into a vector<br />
    cbind(object, object, ...) # combine objects as columns<br />
    rbind(object, object, ...) # combine objects as rows
    <br />
    <br />
    object &nbsp;&nbsp;&nbsp;&nbsp;# prints the object<br />
    <br />
    ls() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# list current objects<br />
    rm(object) # delete an object<br />
    <br />
    newobject &lt;- edit(object) # edit copy and save as newobject <br />
    fix(object) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# edit in place
  </code></p>
<h2>To Practice </h2>
<p> To explore data types in R, try this <a href="https://www.datacamp.com/courses/free-introduction-to-r">free interactive introduction to R course</a></p>

<p>Importing data into R is fairly simple. For Stata and Systat, use the <a href="http://cran.r-project.org/web/packages/foreign/index.html">foreign</a> package. For SPSS and SAS I would recommend the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package for ease and functionality. See the Quick-R section on <a href="../interface/packages.html">packages</a>, for information on obtaining and installing the these packages. Example of importing data are provided below. </p>
<h2>From A Comma Delimited Text File</h2>
<p><code># first row contains variable names, comma is separator <br />
    # assign the variable <em>id</em> to row names<br />
    # note the / instead of \ on mswindows systems
    <br />
    <br />
    mydata &lt;- read.table(&quot;c:/mydata.csv&quot;, header=TRUE, <br />
    &nbsp;&nbsp; sep=&quot;,&quot;, row.names=&quot;id&quot;)</code></p>
<p>(To practice importing a csv file, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-1/importing-data-from-flat-files-with-utils?ex=2">this exercise.</a>)</p>
<h2>From Excel</h2>
<p>One of the best ways to read an Excel file is to export it to a comma delimited file and import it using the method above. Alternatively you can use the <strong>xlsx</strong> package to access Excel files. The first row should contain variable/column names. </p>
<p>
  <code>
    # read in the first worksheet from the workbook <em>myexcel.xlsx</em><br />
    # first row contains variable names<br />
    library(xlsx)<br />
    mydata &lt;- read.xlsx(&quot;c:/myexcel.xlsx&quot;, 1)<br />
    <br />
    # read in the worksheet named <em>mysheet</em><br />
    mydata &lt;- read.xlsx(&quot;c:/myexcel.xlsx&quot;, sheetName = &quot;mysheet&quot;)
  </code>
</p>
<p>(To practice, try this <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-1/importing-excel-data?ex=3"> exercise on importing an Excel worksheet</a> into R.)</p>

<h2>From SPSS</h2>
<p><code># save SPSS dataset in trasport format<br />
    get file='c:\mydata.sav'.<br />
    export outfile='c:\mydata.por'. <br />
    <br />
    # in R
    <br />
    library(Hmisc)<br />
    mydata &lt;- spss.get(&quot;c:/mydata.por&quot;, use.value.labels=TRUE)<br />
    # last option converts value labels to R factors </code></p>
<p>(To practice importing SPSS data with the <strong>foreign</strong> package, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-2/importing-data-from-statistical-software-packages?ex=11">this exercise.</a>)</p>
<h2>From SAS</h2>
<p><code># save SAS dataset in trasport format<br />
    libname out xport 'c:/mydata.xpt';<br />
    data out.mydata;<br />
    set sasuser.mydata;<br />
    run;<br />
    <br />
    # in R
    <br />
    library(Hmisc)<br />
    mydata &lt;- sasxport.get(&quot;c:/mydata.xpt&quot;)<br />
    # character variables are converted to R factors
  </code></p>
<h2>From Stata</h2>
<p><code># input Stata file<br />
    library(foreign)<br />
    mydata &lt;- read.dta(&quot;c:/mydata.dta&quot;)
  </code></p>
<p>(To practice importing Stata data with the <strong>foreign</strong> package, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-2/importing-data-from-statistical-software-packages?ex=8">this exercise.</a>)</p>
<h2>From systat </h2>
<p><code># input Systat file<br />
    library(foreign)<br />
    mydata &lt;- read.systat(&quot;c:/mydata.dta&quot;)
  </code></p>
<h2>Going Further</h2>
<p>Try this interactive course: <a href="https://www.datacamp.com/courses/importing-data-in-r-part-1">Importing Data in R (Part 1),</a> to work with csv and xlsx files in R. To work with SAS, Stata, and other formats try <a href="https://www.datacamp.com/courses/importing-data-in-r-part-2"> Part 2</a>.</p>

<p>Usually you will obtain a data frame by <a href="importingdata.html">importing</a> it from <strong>SAS</strong>, <strong>SPSS</strong>, <strong>Excel</strong>, Stata, a database, or an ASCII file. To create it interactively, you can do something like the following. </p>
<p><code># create a data frame from scratch <br />
    age &lt;- c(25, 30, 56)<br />
    gender &lt;- c(&quot;male&quot;, &quot;female&quot;, &quot;male&quot;)<br />
    weight &lt;- c(160, 110, 220)
    <br />
    mydata &lt;- data.frame(age,gender,weight)
  </code></p>
<p>You can also use R's built in spreadsheet to enter the data interactively, as in the following example. </p>
<p><code># enter data using editor <br />
    mydata &lt;- data.frame(age=numeric(0), gender=character(0), weight=numeric(0))<br />
    mydata &lt;- edit(mydata)<br />
    # note that without the assignment in the line above, <br />
    # the edits are not saved!
    <br />
  </code></p>

<h2>To Practice </h2>
<p> To practice importing data in R, try the <a href="https://www.datacamp.com/courses/importing-data-in-r-part-1">first chapter of this course from DataCamp</a> </p>

<h2>ODBC Interface </h2>
<p>The <a href="http://cran.r-project.org/web/packages/RODBC/index.html">RODBC</a> package provides access to databases (including Microsoft Access and Microsoft SQL Server) through an ODBC interface. </p>
<p>The primary functions are given below.</p>
<table>
  <tr>
    <td>
      <strong>Function</strong> </td>
    <td>
      <strong>Description </strong></td>
  </tr>
  <tr>
    <td><strong>odbcConnect(<em>dsn</em>, uid=&quot;&quot;, pwd=&quot;&quot;) </strong></td>
    <td>Open a connection to an ODBC database </td>
  </tr>
  <tr>
    <td><strong>sqlFetch(<em>channel</em>, <em>sqtable</em>) </strong></td>
    <td>Read a table from an ODBC database into a data frame </td>
  </tr>
  <tr>
    <td><strong>sqlQuery(<em>channel</em>, <em>query</em>) </strong></td>
    <td>Submit a query to an ODBC database and return the results </td>
  </tr>
  <tr>
    <td><strong>sqlSave(<em>channel</em>, <em>mydf</em>, tablename = <em>sqtable</em>, append = <em>FALSE</em>)</strong></td>
    <td>Write or update (append=True) a data frame to a table in the ODBC database </td>
  </tr>
  <tr>
    <td><strong>sqlDrop(<em>channel</em>, <em>sqtable</em>)</strong> </td>
    <td>Remove a table from the ODBC database </td>
  </tr>
  <tr>
    <td><strong>close(<em>channel</em>)</strong></td>
    <td>Close the connection </td>
  </tr>
</table>
<p><code># RODBC Example<br />
    # import 2 tables (Crime and Punishment) from a DBMS<br />
    # into R
    data frames (and call them crimedat and pundat)<br />
    <br />
    library(RODBC)<br />
    myconn &lt;-odbcConnect(&quot;mydsn&quot;, uid=&quot;Rob&quot;, pwd=&quot;aardvark&quot;)<br />
    crimedat &lt;- sqlFetch(myconn, &quot;Crime&quot;)<br />
    pundat &lt;- sqlQuery(myconn, &quot;select * from Punishment&quot;)<br />
    close(myconn)
  </code></p>
<h2>Other Interfaces</h2>
<p>The <a href="http://cran.r-project.org/web/packages/RMySQL/index.html">RMySQL </a>package provides an interface to MySQL.</p>
<p>The <a href="http://cran.r-project.org/web/packages/ROracle/index.html">ROracle</a> package provides an<strong> </strong>interface for Oracle. </p>
<p>The <a href="http://cran.r-project.org/web/packages/RJDBC/index.html">RJDBC</a> package provides access to databases through a JDBC interface. </p>

<h2>Going Further </h2>
<p> This <a href="https://www.datacamp.com/community/tutorials/importing-data-r-part-two">tutorial at DataCamp</a> has another example with the RODBC package. </p>

<p>There are numerous methods for exporting R objects into other formats . For SPSS, SAS and Stata, you will need to load the <a href="http://cran.r-project.org/web/packages/foreign/index.html">foreign</a> packages. For Excel, you will need the <a href="http://cran.r-project.org/web/packages/xlsReadWrite/index.html">xlsReadWrite</a> package. </p>
<h2>To A Tab Delimited Text File</h2>
<p><code>write.table(mydata, &quot;c:/mydata.txt&quot;, sep=&quot;\t&quot;) </code></p>
<h2>To an Excel Spreadsheet </h2>
<p><code> library(xlsx)<br />
    write.xlsx(mydata, &quot;c:/mydata.xlsx&quot;) </code></p>
<p>(To work with R and Excel, try this <a href="https://www.datacamp.com/courses/importing-data-in-r-part-1">interactive course on importing data in R.)</a></p>
<h2>To SPSS</h2>
<p><code> # write out text datafile and<br />
    # an SPSS program to read it<br />
    library(foreign)<br />
    write.foreign(mydata, &quot;c:/mydata.txt&quot;, &quot;c:/mydata.sps&quot;, &nbsp;&nbsp;package=&quot;SPSS&quot;) </code></p>
<p>(Alternatively, to practice importing SPSS data with the <strong>foreign</strong> package, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-2/importing-data-from-statistical-software-packages?ex=11">this exercise.</a>)</p>
<h2>To SAS</h2>
<p><code># write out text datafile and<br />
    # an SAS program to read it<br />
    library(foreign)<br />
    write.foreign(mydata, &quot;c:/mydata.txt&quot;, &quot;c:/mydata.sas&quot;, &nbsp;&nbsp;package=&quot;SAS&quot;)
  </code></p>
<h2>To Stata</h2>
<p><code># export data frame to Stata binary format
    <br />
    library(foreign)<br />
    write.dta(mydata, &quot;c:/mydata.dta&quot;)
  </code></p>
<p>(Alternatively, to practice importing Stata data with the <strong>foreign</strong> package, try <a href="https://campus.datacamp.com/courses/importing-data-in-r-part-2/importing-data-from-statistical-software-packages?ex=8">this exercise.</a>)</p>

<p>There are a number of functions for listing the contents of an object or dataset. </p>
<p><code># list objects in the working environment<br />
    ls() </code></p>
<p><code> # list the variables in mydata<br />
    names(mydata)</code></p>
<p><code> # list the structure of mydata<br />
    str(mydata) </code></p>
<p><code> # list levels of factor v1 in mydata<br />
    levels(mydata$v1)</code></p>
<p><code># dimensions of an object<br />
    dim(object)
  </code></p>
<p><code> # class of an object (numeric, matrix, data frame, etc)<br />
    class(object)</code></p>
<p><code> # print mydata <br />
    mydata</code></p>
<p><code> # print first 10 rows of mydata<br />
    head(mydata, n=10)</code></p>
<p><code> # print last 5 rows of mydata<br />
    tail(mydata, n=5)
  </code></p>

<h2>To Practice</h2>
<p>Try the free first chapter of <a href="https://www.datacamp.com/courses/cleaning-data-in-r"> this course on cleaning data.</a></p>

<p>R's ability to handle variable labels is somewhat unsatisfying. </p>
<p>If you use the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package, you can take advantage of some labeling features. </p>
<p><code>library(Hmisc)<br />
    label(mydata$myvar) &lt;- &quot;Variable label for variable <em>myvar</em>&quot; <br />
    describe(mydata)</code></p>
<p>Unfortunately the label is only in effect for functions provided by the <strong>Hmisc</strong> package, such as <strong>describe()</strong>. Your other option is to use the variable label as the variable name and then refer to the variable by position index.</p>
<p><code>names(mydata)[3] &lt;- &quot;This is the label for variable 3&quot;<br />
    mydata[3] # list the variable
  </code></p>

<h2>To Practice </h2>
<p> Want to practice more? Try <a href="https://campus.datacamp.com/courses/basic-statistics/lab-1-exploring-data?ex=4">this exercise on variable recoding from DataCamp</a></p>

<p>To understand value labels in R, you need to understand the data structure <a href="datatypes.html">factor</a>. </p>
<p>You can use the factor function to create your own value labels. </p>
<p><code># variable v1 is coded 1, 2 or 3<br />
    # we want to attach value labels 1=red, 2=blue, 3=green<br />
    <br />
    mydata$v1 &lt;- factor(mydata$v1,<br />
    levels = c(1,2,3),<br />
    labels = c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;))
  </code></p>
<p><code># variable y is coded 1, 3 or 5 <br />
    # we want to attach value labels 1=Low, 3=Medium, 5=High<br />
    <br />
    mydata$v1 &lt;- ordered(mydata$y,<br />
    levels = c(1,3, 5),<br />
    labels = c(&quot;Low&quot;, &quot;Medium&quot;, &quot;High&quot;))
  </code></p>
<p>Use the <strong>factor()</strong> function for <strong>nominal data</strong> and the <strong>ordered()</strong> function for <strong>ordinal data</strong>. R statistical and graphic functions will then treat the data appriopriately.</p>
<p>Note: factor and ordered are used the same way, with the same arguments. The former creates factors and the later creates ordered factors.</p>
</p>
<h2>To Practice</h2>
<p>Factors are covered in the fourth chapter of <a href="https://www.datacamp.com/courses/free-introduction-to-r"> this free interactive introduction to R course.</a></p>

<p>In R, missing values are represented by the symbol <strong>NA</strong> (not available). Impossible values (e.g., dividing by zero) are represented by the symbol <strong>NaN</strong> (not a number). Unlike SAS, R uses the same symbol for character and numeric data. </p>
<p>For more practice on working with missing data, try <a href="https://www.datacamp.com/courses/cleaning-data-in-r">this course on cleaning data in R.</a></p>
<h2>Testing for Missing Values</h2>
<p><code>is.na(x) # returns TRUE of x is missing<br />
    y &lt;- c(1,2,3,NA)<br />
    is.na(y) # returns a vector (F F F T)
  </code></p>
<h2>Recoding Values to Missing</h2>
<p><code># recode 99 to missing for variable v1<br />
    # select rows where v1 is 99 and recode column v1 <br />
    mydata$v1[mydata$v1==99] &lt;- NA
  </code></p>
<h2>Excluding Missing Values from Analyses</h2>
<p>Arithmetic functions on missing values yield missing values. </p>
<p><code>x &lt;- c(1,2,NA,3)<br />
    mean(x) # returns NA<br />
    mean(x, na.rm=TRUE) # returns 2
  </code></p>
<p>The function <strong>complete.cases()</strong> returns a logical vector indicating which cases are complete. </p>
<p><code># list rows of data that have missing values <br />
    mydata[!complete.cases(mydata),]</code></p>
<p>The function <strong>na.omit()</strong> returns the object with listwise deletion of missing values. </p>
<p><code># create new dataset without missing data <br />
    newdata &lt;- na.omit(mydata)

  </code></p>
<h2>Advanced Handling of Missing Data </h2>
<p>Most modeling functions in R offer options for dealing with missing values. You can go beyond pairwise of listwise deletion of missing values through methods such as multiple imputation. Good implementations that can be accessed through R include <a href="http://gking.harvard.edu/amelia/">Amelia II</a>, <a href="https://www.rdocumentation.org/packages/mice/versions/2.25/topics/mice">Mice</a>, and <a href="http://cran.us.r-project.org/web/packages/mitools/index.html">mitools</a>. </p>

<p>Dates are represented as the number of days since 1970-01-01, with negative values for earlier dates. </p>
<p><code># use as.Date( ) to convert strings to dates <br />
    mydates &lt;- as.Date(c(&quot;2007-06-22&quot;, &quot;2004-02-13&quot;))<br />
    # number of days between 6/22/07 and 2/13/04 <br />
    days &lt;- mydates[1] - mydates[2]</code></p>
<p><strong>Sys.Date( ) </strong>returns today's date. <br />
  <strong>date() </strong>returns the current date and time. </p>
<p>The following symbols can be used with the <strong>format( )</strong> function to print dates. </p>
<table width="90%" border="0">
  <tr>
    <td><strong>Symbol</strong></td>
    <td><strong>Meaning</strong></td>
    <td><strong>Example</strong></td>
  </tr>
  <tr>
    <td><strong>%d</strong></td>
    <td>day as a number (0-31) </td>
    <td>01-31</td>
  </tr>
  <tr>
    <td><strong>%a<br />
%A</strong></td>
    <td>abbreviated weekday <br />
      unabbreviated weekday </td>
    <td>Mon<br />
      Monday</td>
  </tr>
  <tr>
    <td><strong>%m</strong></td>
    <td>month (00-12) </td>
    <td>00-12</td>
  </tr>
  <tr>
    <td><strong>%b<br />
%B</strong></td>
    <td>abbreviated month<br />
      unabbreviated month </td>
    <td>Jan<br />
      January</td>
  </tr>
  <tr>
    <td><strong>%y<br />
%Y</strong></td>
    <td>2-digit year <br />
      4-digit year </td>
    <td>07<br />
      2007</td>
  </tr>
</table>
<p>Here is an example.</p>
<p><code># print today's date<br />
    today &lt;-
    Sys.Date()<br />
    format(today, format=&quot;%B %d %Y&quot;)<br />
    &quot;June 20 2007&quot;</code></p>
<h2>Date Conversion</h2>
<h3>Character to Date </h3>
<p>You can use the <strong>as.Date(</strong><strong><em> </em>)</strong> function to convert character data to dates. The format is <strong>as.Date(</strong><em>x</em><strong>,</strong> <em>&quot;format&quot;</em><strong>)</strong>, where <em>x</em> is the character data and <em>format</em> gives the appropriate format. </p>
<p><code># convert date info in format 'mm/dd/yyyy'<br />
    strDates &lt;- c(&quot;01/05/1965&quot;, &quot;08/16/1975&quot;)<br />
    dates &lt;- as.Date(strDates, &quot;%m/%d/%Y&quot;) </code></p>
<p>The default format is <strong>yyyy-mm-dd</strong></p>
<p><code>mydates &lt;- as.Date(c(&quot;2007-06-22&quot;, &quot;2004-02-13&quot;))</code></p>
<h3>Date to Character </h3>
<p>You can convert dates to character data using the <strong>as.Character( ) </strong>function. </p>
<p><code># convert dates to character data<br />
    strDates &lt;- as.character(dates)
  </code></p>
<h2>Learning More</h2>
<p>See<strong> help(as.Date)</strong> and <strong>help(strftime)</strong> for details on converting character data to dates. See <strong>help(ISOdatetime)</strong> for more information about formatting date/times. </p>

<h2>To Practice </h2>
<p><a href="https://www.datacamp.com/courses/intermediate-r">This intermediate R course</a> includes a section on working with times and dates.</p>

<p>Use the assignment operator <strong>&lt;-</strong> to create new variables. A wide array of <a href="operators.html">operators</a> and <a href="functions.html">functions</a> are available here.</p>
<p><code># Three examples for doing the same computations<br />
    <br />
    mydata$sum &lt;- mydata$x1 + mydata$x2<br />
    mydata$mean &lt;- (mydata$x1 + mydata$x2)/2<br />
    <br />
    attach(mydata)<br />
    mydata$sum &lt;- x1 + x2<br />
    mydata$mean &lt;- (x1 + x2)/2<br />
    detach(mydata)<br />
    <br />
    mydata &lt;- transform( mydata,<br />
    sum = x1 + x2,<br />
    mean = (x1 + x2)/2 <br />
    )
  </code></p>
<p>(To practice working with variables in R, try the first chapter of <a href="https://www.datacamp.com/courses/free-introduction-to-r"> this free interactive course</a>.)</p>
<h2>Recoding variables </h2>
<p>In order to recode data, you will probably use one or more of R's <a href="controlstructures.html">control structures</a>. </p>
<p><code># create 2 age categories
    <br />
    mydata$agecat &lt;- ifelse(mydata$age &gt; 70, <br />
    c(&quot;older&quot;), c(&quot;younger&quot;))

    <br />
    <br />
    # another example: create 3 age categories
    <br />
    attach(mydata)<br />
    mydata$agecat[age &gt; 75] &lt;- &quot;Elder&quot;<br />
    mydata$agecat[age &gt; 45 &amp; age &lt;= 75] &lt;- &quot;Middle Aged&quot;<br />
    mydata$agecat[age &lt;= 45] &lt;- &quot;Young&quot;<br />
    detach(mydata)
  </code></p>
<h2>Renaming variables </h2>
<p>You can rename variables programmatically or interactively. </p>
<p><code> # rename interactively <br />
    fix(mydata) # results are saved on close
    <br />
    <br />
    # rename programmatically <br />
    library(reshape)<br />
    mydata &lt;- rename(mydata, c(oldname=&quot;newname&quot;))<br />
    <br />
    # you can re-enter all the variable names in order<br />
    # changing the ones you need to change.the limitation<br />
    #
    is that you need to enter all of them!<br />
    names(mydata) &lt;- c(&quot;x1&quot;,&quot;age&quot;,&quot;y&quot;, &quot;ses&quot;)
  </code></p>

<p>R's binary and logical operators will look very familiar to programmers. Note that binary operators work on vectors and matrices as well as scalars. </p>

<h2>Arithmetic Operators </h2>
<p>
  <table border="0">
    <tr>
      <td valign="top"><strong>Operator</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>+</strong></td>
      <td valign="top">addition</td>
    </tr>
    <tr>
      <td valign="top"><strong>-</strong></td>
      <td valign="top">subtraction</td>
    </tr>
    <tr>
      <td valign="top"><strong>*</strong></td>
      <td valign="top">multiplication</td>
    </tr>
    <tr>
      <td valign="top"><strong>/</strong></td>
      <td valign="top">division</td>
    </tr>
    <tr>
      <td valign="top"><strong>^ or ** </strong></td>
      <td valign="top">exponentiation</td>
    </tr>
    <tr>
      <td valign="top"><strong>x %% y </strong></td>
      <td valign="top">modulus (x mod y) 5%%2 is 1 </td>
    </tr>
    <tr>
      <td valign="top"><strong>x %/% y </strong></td>
      <td valign="top">integer division 5%/%2 is 2 </td>
    </tr>
  </table>

</p>
<h2>Logical Operators </h2>
<p>
  <table border="0">

    <tr>
      <td valign="top"><strong>Operator</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>&lt;</strong></td>
      <td valign="top">less than </td>
    </tr>
    <tr>
      <td valign="top"><strong>&lt;=</strong></td>
      <td valign="top">less than or equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>&gt;</strong></td>
      <td valign="top">greater than </td>
    </tr>
    <tr>
      <td valign="top"><strong>&gt;=</strong></td>
      <td valign="top">greater than or equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>==</strong></td>
      <td valign="top">exactly equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>!=</strong></td>
      <td valign="top">not equal to </td>
    </tr>
    <tr>
      <td valign="top"><strong>!x</strong></td>
      <td valign="top">Not x </td>
    </tr>
    <tr>
      <td valign="top"><strong>x | y </strong></td>
      <td valign="top">x OR y </td>
    </tr>
    <tr>
      <td valign="top"><strong>x &amp; y </strong></td>
      <td valign="top">x AND y </td>
    </tr>
    <tr>
      <td valign="top"><strong>isTRUE(x)</strong></td>
      <td valign="top">test if X is TRUE </td>
    </tr>
  </table>
</p>

<p><code># An example <br />
    x &lt;- c(1:10)<br />
    x[(x&gt;8) | (x&lt;5)]<br />
    # yields 1 2 3 4 9 10<br />
    <br />
    # How it works <br />
    x &lt;- c(1:10)<br />
    x<br />
    1 2 3 4 5 6 7 8 9 10<br />
    x &gt; 8<br />
    F F F F F F F F T T<br />
    x &lt; 5<br />
    T T T T F F F F F F<br />
    x &gt; 8 | x &lt; 5<br />
    T T T T F F F F T T<br />
    x[c(T,T,T,T,F,F,F,F,T,T)]<br />
    1 2 3 4 9 10
  </code></p>

<h2>Going Further</h2>
<p>To practice working with logical operators in R, try <a href="https://www.datacamp.com/courses/intermediate-r"> the free first chapter on conditionals of this interactive course.</a></p>

<p>Almost everything in R is done through functions. Here I'm only refering to numeric and character functions that are commonly used in creating or recoding variables. </p>
<p> (To practice working with functions, try the functions sections of this <a href="https://www.datacamp.com/courses/intermediate-r-practice">this interactive course</a>.)</p>

<h2>Numeric Functions </h2>
<p>
  <table border="0">
    <tr>
      <td valign="top"><strong>Function</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>abs(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">absolute value </td>
    </tr>
    <tr>
      <td valign="top"><strong>sqrt(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">square root </td>
    </tr>
    <tr>
      <td valign="top"><strong>ceiling(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">ceiling(3.475) is 4 </td>
    </tr>
    <tr>
      <td valign="top"><strong>floor(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">floor(3.475) is 3 </td>
    </tr>
    <tr>
      <td valign="top"><strong>trunc(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">trunc(5.99) is 5 </td>
    </tr>
    <tr>
      <td valign="top"><strong>round(</strong><em>x</em><strong>, digits=</strong><em>n</em><strong>) </strong></td>
      <td valign="top">round(3.475, digits=2) is 3.48 </td>
    </tr>
    <tr>
      <td valign="top"><strong>signif(</strong><em>x</em><strong>, digits=</strong><em>n</em><strong>) </strong></td>
      <td valign="top">signif(3.475, digits=2) is 3.5 </td>
    </tr>
    <tr>
      <td valign="top"><strong>cos(</strong><em>x</em><strong>), sin(</strong><em>x</em><strong>), tan(</strong><em>x</em><strong>) </strong></td>
      <td valign="top">also acos(<em>x</em>), cosh(<em>x</em>), acosh(<em>x</em>), etc. </td>
    </tr>
    <tr>
      <td valign="top"><strong>log(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">natural logarithm</td>
    </tr>
    <tr>
      <td valign="top"><strong>log10(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">common logarithm </td>
    </tr>
    <tr>
      <td valign="top"><strong>exp(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">e^<em>x</em></td>
    </tr>
  </table>
</p>

<h2>Character Functions </h2>
<p>
  <table border="0">

    <tr>
      <td valign="top"><strong>Function</strong></td>
      <td valign="top"><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>substr(</strong><em>x</em><strong>, start=</strong><em>n1</em><strong>, stop=</strong><em>n2</em><strong>) </strong></td>
      <td valign="top">Extract or replace substrings in a character vector.<br />
x &lt;- &quot;abcdef&quot; <br />
substr(x, 2, 4) is &quot;bcd&quot; <br />
substr(x, 2, 4) &lt;- &quot;22222&quot; is &quot;a222ef&quot; </td>
    </tr>
    <tr>
      <td valign="top"><strong>grep(</strong><em>pattern</em><strong>,</strong><em> x </em><strong>, ignore.case=</strong>FALSE<strong>, fixed=</strong>FALSE<strong>) </strong></td>
      <td valign="top">Search for <em>pattern</em> in <em>x</em>. If fixed =FALSE then <em>pattern</em> is a <a href="http://regexlib.com/CheatSheet.aspx">regular expression</a>. If fixed=TRUE then <em>pattern</em> is a text string. Returns matching indices.<br />
grep(&quot;A&quot;, c(&quot;b&quot;,&quot;A&quot;,&quot;c&quot;), fixed=TRUE) returns 2 </td>
    </tr>
    <tr>
      <td valign="top"><strong>sub(</strong><em>pattern</em><strong>, </strong><em>replacement</em><strong>, </strong><em>x</em><strong>, ignore.case =</strong>FALSE<strong>, fixed=</strong>FALSE<strong>) </strong></td>
      <td valign="top">Find <em>pattern</em> in <em>x</em> and replace with <em>replacement</em> text. If fixed=FALSE then <em>pattern</em> is a regular expression<a href="http://regexlib.com/CheatSheet.aspx">.<br />
</a> If fixed = T then <em>pattern</em> is a text string. <br />
sub(&quot;\\s&quot;,&quot;.&quot;,&quot;Hello There&quot;) returns &quot;Hello.There&quot; </td>
    </tr>
    <tr>
      <td valign="top"><strong>strsplit(</strong><em>x</em><strong>, </strong><em>split</em><strong>)</strong></td>
      <td valign="top">Split the elements of character vector <em>x</em> at <em>split</em>. <br />
strsplit(&quot;abc&quot;, &quot;&quot;) returns 3 element vector &quot;a&quot;,&quot;b&quot;,&quot;c&quot; </td>
    </tr>
    <tr>
      <td valign="top"><strong>paste(..., sep=&quot;&quot;) </strong></td>
      <td valign="top">Concatenate strings after using <em>sep</em> string to seperate them.<br />
paste(&quot;x&quot;,1:3,sep=&quot;&quot;) returns c(&quot;x1&quot;,&quot;x2&quot; &quot;x3&quot;)<br />
paste(&quot;x&quot;,1:3,sep=&quot;M&quot;) returns c(&quot;xM1&quot;,&quot;xM2&quot; &quot;xM3&quot;)<br />
paste(&quot;Today is&quot;, date()) </td>
    </tr>
    <tr>
      <td valign="top"><strong>toupper(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">Uppercase</td>
    </tr>
    <tr>
      <td valign="top"><strong>tolower(</strong><em>x</em><strong>)</strong></td>
      <td valign="top">Lowercase</td>
    </tr>
  </table>

</p>
<h2>Statistical Probability Functions</h2>
<p>The following table describes functions related to probaility distributions. For random number generators below, you can use set.seed(1234) or some other integer to create reproducible pseudo-random numbers.</p>
<table border="0">
  <tr>
    <td valign="top"><strong>Function</strong></td>
    <td valign="top"><strong>Description</strong></td>
  </tr>
  <tr>
    <td valign="top"><strong>dnorm(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">normal density function (by default m=0 sd=1)<br />
      # plot standard normal curve<br />
      x &lt;- pretty(c(-3,3), 30)<br />
      y &lt;- dnorm(x)<br />
      plot(x, y, type='l', xlab=&quot;Normal Deviate&quot;, ylab=&quot;Density&quot;, yaxs=&quot;i&quot;) </td>
  </tr>
  <tr>
    <td valign="top"><strong>pnorm(</strong><em>q</em><strong>)</strong></td>
    <td valign="top">cumulative normal probability for q <br />
      (area under the normal curve to the left of q)<br />
      pnorm(1.96) is 0.975 </td>
  </tr>
  <tr>
    <td valign="top"><strong>qnorm(</strong><em>p</em><strong>)</strong></td>
    <td valign="top">normal quantile. <br />
      value at the p percentile of normal distribution <br />
      qnorm(.9) is 1.28 # 90th percentile </td>
  </tr>
  <tr>
    <td valign="top"><strong>rnorm(</strong><em>n</em><strong>, m=</strong>0<strong>,sd=</strong>1<strong>)</strong></td>
    <td valign="top">n random normal deviates with mean m <br />
      and standard deviation sd. <br />
      #50 random normal variates with mean=50, sd=10<br />
      x &lt;- rnorm(50, m=50, sd=10) </td>
  </tr>
  <tr>
    <td valign="top"><strong>dbinom(</strong><em>x</em><strong>,</strong><em> size</em><strong>,</strong><em> prob</em><strong>)<br />
pbinom(</strong><em>q</em><strong>, </strong><em>size</em><strong>, </strong><em>prob</em><strong>)<br />
qbinom(</strong><em>p</em><strong>, </strong><em>size</em><strong>, </strong><em>prob</em><strong>)<br />
rbinom(</strong><em>n</em><strong>,</strong><em> size</em><strong>,</strong><em> prob</em><strong>)</strong></td>
    <td valign="top">binomial distribution where size is the sample size <br />
      and prob is the probability of a heads (pi) <br />
      # prob of 0 to 5 heads of fair coin out of 10 flips<br />
      dbinom(0:5, 10, .5) <br />
      # prob of 5 or less heads of fair coin out of 10 flips<br />
      pbinom(5, 10, .5) </td>
  </tr>
  <tr>
    <td valign="top"><strong>dpois(</strong><em>x</em><strong>, </strong><em>lamda</em><strong>)<br />
ppois(</strong><em>q</em><strong>, </strong><em>lamda</em><strong>)<br />
qpois(</strong><em>p</em><strong>, </strong><em>lamda</em><strong>)<br />
rpois(</strong><em>n</em><strong>, </strong><em>lamda</em><strong>)</strong></td>
    <td valign="top">poisson distribution with m=std=lamda<br />
      #probability of 0,1, or 2 events with lamda=4<br />
      dpois(0:2, 4)<br />
      # probability of at least 3 events with lamda=4 <br />
      1- ppois(2,4) </td>
  </tr>
  <tr>
    <td valign="top"><strong>dunif(</strong><em>x</em><strong>, min=</strong>0<strong>, max=</strong>1<strong>)<br />
punif(</strong><em>q</em><strong>, min=0, max=</strong>1<strong>)<br />
qunif(</strong><em>p</em><strong>, min=</strong>0<strong>, max=</strong>1<strong>)<br />
runif(</strong><em>n</em><strong>, min=</strong>0<strong>, max=</strong>1<strong>) </strong></td>
    <td valign="top">uniform distribution, follows the same pattern <br />
      as the normal distribution above. <br />
      #10 uniform random variates<br />
      x &lt;- runif(10)</td>
  </tr>
</table>

<h2>Other Statistical Functions</h2>
<p>Other useful statistical functions are provided in the following table. Each has the option na.rm to strip missing values before calculations. Otherwise the presence of missing values will lead to a missing result. Object can be a numeric vector or data frame. </p>
<table border="0">
  <tr>
    <td valign="top"><strong>Function</strong></td>
    <td valign="top"><strong>Description</strong></td>
  </tr>
  <tr>
    <td valign="top"><strong>mean(</strong><em>x</em><strong>, trim=</strong>0<strong>,<br />
na.rm=</strong>FALSE<strong>)</strong></td>
    <td valign="top">mean of object x<br />
      # trimmed mean, removing any missing values and <br />
      # 5 percent of highest and lowest scores <br />
      mx &lt;- mean(x,trim=.05,na.rm=TRUE) </td>
  </tr>
  <tr>
    <td valign="top"><strong>sd(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">standard deviation of object(x). also look at var(x) for variance and mad(x) for median absolute deviation. </td>
  </tr>
  <tr>
    <td valign="top"><strong>median(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">median</td>
  </tr>
  <tr>
    <td valign="top"><strong>quantile(</strong><em>x</em><strong>, </strong><em>probs</em><strong>)</strong></td>
    <td valign="top">quantiles where x is the numeric vector whose quantiles are desired and probs is a numeric vector with probabilities in [0,1].<br />
      # 30th and 84th percentiles of x<br />
      y &lt;- quantile(x, c(.3,.84)) </td>
  </tr>
  <tr>
    <td valign="top"><strong>range(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">range</td>
  </tr>
  <tr>
    <td valign="top"><strong>sum(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">sum</td>
  </tr>
  <tr>
    <td valign="top"><strong>diff(</strong><em>x</em><strong>, lag=</strong><em>1</em><strong>) </strong></td>
    <td valign="top">lagged differences, with lag indicating which lag to use </td>
  </tr>
  <tr>
    <td valign="top"><strong>min(</strong><em>x</em><strong>) </strong></td>
    <td valign="top">minimum</td>
  </tr>
  <tr>
    <td valign="top"><strong>max(</strong><em>x</em><strong>)</strong></td>
    <td valign="top">maximum</td>
  </tr>
  <tr>
    <td valign="top"><strong>scale(</strong><em>x</em><strong>, center=</strong>TRUE<strong>, scale=</strong>TRUE<strong>)</strong></td>
    <td valign="top">column center or standardize a matrix. </td>
  </tr>
</table>

<h2>Other Useful Functions </h2>
<p>
  <table width="90%" border="0">
    <tr>
      <td><strong>Function</strong></td>
      <td><strong>Description</strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>seq(</strong><em>from</em><strong> ,</strong><em> to</em><strong>,</strong><em> by</em><strong>)</strong></td>
      <td>generate a sequence<br />
indices &lt;- seq(1,10,2)<br />
#indices is c(1, 3, 5, 7, 9) </td>
    </tr>
    <tr>
      <td valign="top"><strong>rep(</strong><em>x</em><strong>, </strong><em>ntimes</em><strong>)</strong></td>
      <td>repeat <em>x</em> <em>n</em> times<br />
y &lt;- rep(1:3, 2)<br />
# y is c(1, 2, 3, 1, 2, 3)</td>
    </tr>
    <tr>
      <td valign="top"><strong>cut(</strong><em>x</em><strong>,</strong><em> n</em><strong>)</strong> </td>
      <td>divide continuous variable in factor with <em>n</em> levels <br />
y &lt;- cut(x, 5) </td>
    </tr>
  </table>
</p>
<p>Note that while the examples on this page apply functions to individual variables, many can be applied to vectors and matrices as well. </p>

<p>R has the standard control structures you would expect. <strong>expr</strong> can be multiple (compound) statements by enclosing them in braces { }. It is more efficient to use built-in functions rather than control structures whenever possible.</p>
<h2>if-else</h2>
<p><code>if (<em>cond</em>) <em>expr</em><br />
    if (<em>cond</em>) <em>expr1</em> else <em>expr2</em></code></p>
<h2>for</h2>
<p><code>for (<em>var</em> in <em>seq</em>) <em>expr</em></code></p>

<h2>while</h2>
<p><code>while (<em>cond</em>) <em>expr</em> </code></p>
<h2>switch</h2>
<p><code>switch(<em>expr</em>, ...) </code></p>
<h2>ifelse</h2>
<p><code>ifelse(<em>test</em>,<em>yes</em>,<em>no</em>)</code></p>
<h2>Example</h2>
<p><code># transpose of a matrix<br />
    # a poor alternative to built-in t() function<br />
    <br />
    mytrans &lt;- function(x) { <br />
    &nbsp;&nbsp;if (!is.matrix(x)) {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;warning(&quot;argument is not a matrix: returning NA&quot;)<br />
    &nbsp;&nbsp;&nbsp;&nbsp;return(NA_real_)<br />
    &nbsp;&nbsp;}<br />
    &nbsp;&nbsp;y &lt;- matrix(1, nrow=ncol(x), ncol=nrow(x)) <br />
    &nbsp;&nbsp;for (i in 1:nrow(x)) {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;for (j in 1:ncol(x)) {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y[j,i] &lt;- x[i,j]
    <br />
    &nbsp;&nbsp;&nbsp;&nbsp;}<br />
    &nbsp;&nbsp;}<br />
    return(y)<br />
    }<br />
    <br />
    # try it<br />
    z &lt;- matrix(1:10, nrow=5, ncol=2)<br />
    tz &lt;- mytrans(z)
  </code></p>

<h2>Going Further</h2>
<p>To practice working with control structures in R, try <a href="https://www.datacamp.com/courses/intermediate-r"> the chapter on conditionals and control flow</a> of this interactive R course.</p>

<p>One of the great strengths of R is the user's ability to add functions. In fact, many of the functions in R are actually functions of functions. The structure of a function is given below.</p>
<p><code>myfunction &lt;- function(<em>arg1, arg2, ... </em>){<br />
    <em>statements</em><br />
    return(<em>object</em>)<br />
    }</code></p>
<p>Objects in the function are local to the function. The object returned can be any <a href="../input/datatypes.html">data type</a>. Here is an example.</p>
<p><code># function example - get measures of central tendency<br />
    # and spread for a numeric vector x. The user has a<br />
    # choice of measures and whether the results are printed.<br />
    <br />
    mysummary &lt;- function(x,npar=TRUE,print=TRUE) {<br />
    &nbsp;&nbsp;if (!npar) {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;center &lt;- mean(x); spread &lt;- sd(x)
    <br />
    &nbsp;&nbsp;} else {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;center &lt;- median(x); spread &lt;- mad(x) <br />
    &nbsp;&nbsp;}<br />
    &nbsp;&nbsp;if (print &amp; !npar) {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;cat(&quot;Mean=&quot;, center, &quot;\n&quot;, &quot;SD=&quot;, spread, &quot;\n&quot;)<br />
    &nbsp;&nbsp;}
    else if (print &amp; npar) {<br />
    &nbsp;&nbsp;&nbsp;&nbsp;cat(&quot;Median=&quot;, center, &quot;\n&quot;, &quot;MAD=&quot;, spread, &quot;\n&quot;)<br />
    &nbsp;&nbsp;}<br />
    &nbsp;&nbsp;result &lt;- list(center=center,spread=spread)<br />
    &nbsp;&nbsp;return(result)<br />
    }<br />
    <br />
    # invoking the function <br />
    set.seed(1234)<br />
    x &lt;- rpois(500, 4) <br />
    y &lt;- mysummary(x)<br />
    Median= 4<br />
    MAD= 1.4826
    <br />
    # y$center is the median (4)
    <br />
    # y$spread is the median absolute deviation (1.4826)<br />
    <br />
    y &lt;- mysummary(x, npar=FALSE, print=FALSE)<br />
    # no output
    <br />
    # y$center is the mean (4.052)<br />
    #
    y$spread is the standard deviation (2.01927) </code></p>
<p>It can be instructive to look at the code of a function. In R, you can view a function's code by typing the function name without the ( ). If this method fails, look at the following R Wiki link for hints on <a href="http://wiki.r-project.org/rwiki/doku.php?id=guides:stats-with-r:02programming_in_r:02functions">viewing function sourcecode</a>. </p>

<p>Finally, you may want to store your own functions, and have them available in every session. You can <a href="../interface/customizing.html">customize the R environment </a>to load your functions at start-up. </p>
<h2>To Practice</h2>
<p>Try this <a href="https://www.datacamp.com/courses/writing-functions-in-r">interactive course on writing functions in R. </a></p>

<p>To sort a data frame in R, use the <strong>order( ) </strong>function. By default, sorting is ASCENDING. Prepend the sorting variable by a minus sign to indicate DESCENDING order. Here are some examples.</p>
<p><code># sorting examples using the mtcars dataset<br />
    attach(mtcars)<br />
    <br />
    # sort by mpg<br />
    newdata &lt;- mtcars[order(mpg),]
    <br />
    <br />
    # sort by mpg and cyl<br />
    newdata &lt;- mtcars[order(mpg, cyl),]<br />
    <br />
    #sort by mpg (ascending) and cyl (descending)<br />
    newdata &lt;- mtcars[order(mpg, -cyl),]
    <br />
    <br />
    detach(mtcars)<br />
  </code></p>

<p>To practice, try <a href="https://campus.datacamp.com/courses/free-introduction-to-r/chapter-5-data-frames?ex=11">this sorting exercise </a> with the order() function.</p>

<h2>Adding Columns </h2>
<p>To merge two data frames (datasets) horizontally, use the <strong>merge</strong> function. In most cases, you join two data frames by one or more common key variables (i.e., an inner join). </p>
<p><code># merge two data frames by ID<br />
    total &lt;- merge(data frameA,data frameB,by=&quot;ID&quot;)</code></p>
<p><code># merge two data frames by ID and Country<br />
    total &lt;- merge(data frameA,data frameB,by=c(&quot;ID&quot;,&quot;Country&quot;))
  </code></p>

<h2>Adding Rows </h2>

<p>To join two data frames (datasets) vertically, use the<strong> rbind</strong> function. The two data frames <strong>must</strong> have the same variables, but they do not have to be in the same order.</p>
<p><code>total &lt;- rbind(data frameA, data frameB) </code></p>
<p>If data frameA has variables that data frameB does not, then either:</p>
<ol>
  <li><span><a href="subset.html">Delete</a> the extra variables in data frameA or</span></li>
  <li><span>Create the additional variables in data frameB and <a href="../input/missingdata.html">set them to NA</a> (missing) </span></li>
</ol>
<p>before joining them with <strong>rbind( )</strong>. </p>

<h2>Going Further</h2>
<p>To practice manipulating data frames with the dplyr package, try <a href="https://www.datacamp.com/courses/dplyr-data-manipulation-r-tutorial"> this interactive course on data frame manipulation in R.</a></p>

<p>It is relatively easy to collapse data in R using one or more BY variables and a defined function. </p>
<p><code># aggregate data frame mtcars by cyl and vs, returning means<br />
    # for numeric variables<br />
    attach(mtcars)<br />
    aggdata &lt;-aggregate(mtcars, by=list(cyl,vs), <br />
    &nbsp;&nbsp;FUN=mean, na.rm=TRUE)<br />
    print(aggdata)<br />
    detach(mtcars)<br />
  </code></p>
<p>When using the <strong>aggregate()</strong> function, the by variables must be in a list (even if there is only one). The function can be built-in or user provided. </p>
<p><strong>See also:</strong></p>
<ul>
  <li><span> <strong>summarize() </strong>in the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package</span> </li>
  <li><span><a href="../stats/descriptives.html">summaryBy()</a> in the <a href="http://cran.r-project.org/web/packages/doBy/index.html">doBy</a> package </span></li>
</ul>

<h2>Going Further</h2>
<p>To practice aggregate() and other functions, try the exercises <a href="https://www.datacamp.com/courses/dplyr-data-manipulation-r-tutorial/"> in this manipulating data tutorial.</a></p>

<p>R provides a variety of methods for reshaping data prior to analysis. </p>
<h2>Transpose </h2>
<p>Use the t() function to transpose a matrix or a data frame. In the later case, rownames become variable (column) names. </p>
<p><code># example using built-in dataset <br />
    mtcars<br />
    t(mtcars)
  </code></p>
<h2>The Reshape Package </h2>
<p>Hadley Wickham has created a comprehensive package called <a href="http://had.co.nz/reshape/">reshape</a> to massage data. Both an <a href="http://had.co.nz/reshape/introduction.pdf">introduction</a> and <a href="http://www.jstatsoft.org/v21/i12/paper">article</a> are available. There is even a <a href="http://had.co.nz/reshape/french-fries-demo.html">video</a>! </p>
<p>Basically, you &quot;melt&quot; data so that each row is a unique id-variable combination. Then you &quot;cast&quot; the melted data into any shape you would like. Here is a very simple example. </p>
<p><strong>mydata </strong></p>
<table>
  <tr>
    <td><strong>id</strong></td>
    <td><strong>time</strong></td>
    <td><strong>x1</strong></td>
    <td><strong>x2</strong></td>
  </tr>
  <tr>
    <td>1</td>
    <td>1</td>
    <td>5</td>
    <td>6</td>
  </tr>
  <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
    <td>5</td>
  </tr>
  <tr>
    <td>2</td>
    <td>1</td>
    <td>6</td>
    <td>1</td>
  </tr>
  <tr>
    <td>2</td>
    <td>2</td>
    <td>2</td>
    <td>4</td>
  </tr>
</table>
<p>&nbsp; </p>
<p><code># example of melt function
    <br />
    library(reshape)<br />
    mdata &lt;- melt(mydata, id=c(&quot;id&quot;,&quot;time&quot;))
  </code></p>
<p><strong>newdata</strong></p>
<table>
  <tr>
    <td><strong>id</strong></td>
    <td><strong>time</strong></td>
    <td><strong>variable</strong></td>
    <td><strong>value</strong></td>
  </tr>
  <tr>
    <td>1</td>
    <td>1</td>
    <td>x1</td>
    <td>5</td>
  </tr>
  <tr>
    <td>1</td>
    <td>2</td>
    <td>x1</td>
    <td>3</td>
  </tr>
  <tr>
    <td>2</td>
    <td>1</td>
    <td>x1</td>
    <td>6</td>
  </tr>
  <tr>
    <td>2</td>
    <td>2</td>
    <td>x1</td>
    <td>2</td>
  </tr>
  <tr>
    <td>1</td>
    <td>1</td>
    <td>x2</td>
    <td>6</td>
  </tr>
  <tr>
    <td>1</td>
    <td>2</td>
    <td>x2</td>
    <td>5</td>
  </tr>
  <tr>
    <td>2</td>
    <td>1</td>
    <td>x2</td>
    <td>1</td>
  </tr>
  <tr>
    <td>2</td>
    <td>2</td>
    <td>x2</td>
    <td>4</td>
  </tr>
</table>
<p><code># cast the melted data<br />
    # cast(data, formula, function) <br />
    subjmeans &lt;- cast(mdata, id~variable, mean)<br />
    timemeans &lt;- cast(mdata, time~variable, mean)
  </code></p>
<p><strong>subjmeans</strong></p>
<table>
  <tr>
    <td><strong>id</strong></td>
    <td><strong>x1</strong></td>
    <td><strong>x2</strong></td>
  </tr>
  <tr>
    <td>1</td>
    <td>4</td>
    <td>5.5</td>
  </tr>
  <tr>
    <td>2</td>
    <td>4</td>
    <td>2.5</td>
  </tr>
</table>
<p><strong>timemeans</strong></p>
<table>
  <tr>
    <td><strong>time</strong></td>
    <td><strong>x1</strong></td>
    <td><strong>x2</strong></td>
  </tr>
  <tr>
    <td>1</td>
    <td>5.5</td>
    <td>3.5</td>
  </tr>
  <tr>
    <td>2</td>
    <td>2.5</td>
    <td>4.5</td>
  </tr>
</table>
<p>There is much more that you can do with the <strong>melt( )</strong> and <strong>cast( )</strong> functions. See the documentation for more details. </p>
<h2>Going Further </h2>
<p> To practice massaging data, try <a href="https://www.datacamp.com/courses/cleaning-data-in-r">this course in cleaning data in R.</a></p>

<p>R has powerful indexing features for accessing object elements. These features can be used to select and exclude variables and observations. The following code snippets demonstrate ways to keep or delete variables and observations and to take random samples from a dataset. </p>
<h2>Selecting (Keeping) Variables </h2>
<p><code># select variables v1, v2, v3<br />
    myvars &lt;- c(&quot;v1&quot;, &quot;v2&quot;, &quot;v3&quot;)<br />
    newdata &lt;- mydata[myvars]<br />
    <br />
    # another method<br />
    myvars &lt;- paste(&quot;v&quot;, 1:3, sep=&quot;&quot;)<br />
    newdata &lt;- mydata[myvars]<br />
    <br />
    # select 1st and 5th thru 10th variables<br />
    newdata &lt;- mydata[c(1,5:10)] </code></p>
<p> To practice this interactively, try <a href="https://campus.datacamp.com/courses/free-introduction-to-r/chapter-5-data-frames?ex=6">the selection of data frame elements exercises</a> in the Data frames chapter of this <a href="https://www.datacamp.com/courses/free-introduction-to-r">introduction to R course.</a>
  <p>
    <h2>Excluding (DROPPING) Variables </h2>
    <p><code># exclude variables v1, v2, v3<br />
myvars &lt;- names(mydata) %in% c(&quot;v1&quot;, &quot;v2&quot;, &quot;v3&quot;)
<br />
newdata &lt;- mydata[!myvars]<br />
<br />
# exclude 3rd and 5th variable <br />
newdata &lt;- mydata[c(-3,-5)]<br />
<br />
# delete variables v3 and v5<br />
mydata$v3 &lt;- mydata$v5 &lt;- NULL
      </code></p>
    <h2>Selecting Observations</h2>
    <p><code># first 5 observations<br />
newdata &lt;- mydata[1:5,]<br />
<br />
# based on variable values<br />
newdata &lt;- mydata[ which(mydata$gender=='F' <br />
&amp; mydata$age &gt; 65), ]<br />
<br />
# or<br />
attach(mydata)<br />
newdata &lt;- mydata[ which(gender=='F' &amp; age &gt; 65),]<br />
detach(mydata)
      </code></p>

    <h2>Selection using the Subset Function </h2>
    <p>The <strong>subset( ) </strong>function is the easiest way to select variables and observations. In the following example, we select all rows that have a value of age greater than or equal to 20 or age less then 10. We keep the ID and Weight columns. </p>
    <p><code># using subset function <br />
newdata &lt;- subset(mydata, age &gt;= 20 | age &lt; 10, <br />
select=c(ID, Weight))
      </code></p>
    <p>In the next example, we select all men over the age of 25 and we keep variables weight <em>through</em> income (weight, income and all columns between them). </p>
    <p><code># using subset function (part 2)<br />
newdata &lt;- subset(mydata, sex==&quot;m&quot; &amp; age &gt; 25,<br />
select=weight:income)
      </code></p>
    <p> To practice the <strong>subset()</strong> function, try this <a href="https://campus.datacamp.com/courses/data-table-data-manipulation-r-tutorial/chapter-one-datatable-novice?ex=7">this interactive exercise.</a> on subsetting data.tables.</p>
    <h2> Random Samples</h2>
    <p>Use the <strong>sample( )</strong> function to take a <strong>random sample of size n</strong> from a dataset.</p>
    <p><code># take a random sample of size 50 from a dataset <em>mydata</em>
<br />
# sample without replacement<br />
mysample &lt;- mydata[sample(1:nrow(mydata), 50,<br />
&nbsp;&nbsp; replace=FALSE),]
      </code></p>

<p>Type conversions in R work as you would expect. For example, adding a character string to a numeric vector converts all the elements in the vector to character. </p>
<p>Use <strong>is.</strong><em>foo</em> to test for data type<em> foo</em>. Returns TRUE or FALSE<br />
  Use <strong>as.</strong><em>foo</em> to explicitly convert it.</p>
<p> <strong>is.numeric(), is.character(), is.vector(), is.matrix(), is.data.frame()<br />
  </strong><strong>as.numeric(), as.character(), as.vector(), as.matrix(), as.data.frame) </strong></p>
<h2>Examples</h2>

<table width="90%" border="0">
  <tr>
    <td>&nbsp;</td>
    <td><strong>to one long <br />
vector</strong></td>
    <td><strong>to<br />
matrix</strong></td>
    <td><strong>to<br />
data frame</strong></td>
  </tr>
  <tr>
    <td><strong>from<br />
vector</strong></td>
    <td>c(x,y)<br /></td>
    <td>cbind(x,y)<br />
      rbind(x,y)</td>
    <td>data.frame(x,y)</td>
  </tr>
  <tr>
    <td><strong>from<br />
matrix</strong></td>
    <td>as.vector(mymatrix)</td>
    <td>&nbsp;</td>
    <td>as.data.frame(mymatrix)</td>
  </tr>
  <tr>
    <td><strong>from<br />
data frame</strong></td>
    <td>&nbsp;</td>
    <td>as.matrix(myframe)</td>
    <td>&nbsp;</td>
  </tr>
</table>

<h2>Dates</h2>
<p>You can convert dates to and from character or numeric data. See <a href="../input/dates.html">date values </a>for more information. </p>

<h2>To Practice </h2>
<p> To explore data types in R, try this <a href="https://www.datacamp.com/courses/free-introduction-to-r">free interactive introduction to R course.</a></p>

<p>R provides a wide range of functions for obtaining summary statistics. One method of obtaining descriptive statistics is to use the <strong>sapply( ) </strong>function with a specified summary statistic. </p>
<p><code># get means for variables in data frame mydata<br />
    # excluding missing values
    <br />
    sapply(mydata, mean, na.rm=TRUE)
  </code></p>
<p>Possible functions used in sapply include <strong>mean, sd, var, min, max, median, range, and quantile</strong>. </p>
<p>There are also numerous R functions designed to provide a range of descriptive statistics at once. For example </p>
<p><code> # mean,median,25th and 75th quartiles,min,max<br />
    summary(mydata)<br />
    <br />
    # Tukey min,lower-hinge, median,upper-hinge,max<br />
    fivenum(x)</code></p>
<p>Using the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package</p>
<p><code>library(Hmisc)<br />
    describe(mydata) <br />
    # n, nmiss, unique, mean, 5,10,25,50,75,90,95th percentiles <br />
    # 5 lowest and 5 highest scores</code></p>
<p>Using the <strong><a href="http://cran.r-project.org/web/packages/pastecs/index.html">pastecs</a> </strong>package</p>
<p><code>library(pastecs)<br />
    stat.desc(mydata)
    <br />
    # nbr.val, nbr.null, nbr.na, min max, range, sum, <br />
    #
    median, mean, SE.mean, CI.mean, var, std.dev, coef.var
  </code></p>
<p>Using the <a href="http://cran.r-project.org/web/packages/psych/index.html">psych</a> package</p>
<p><code>library(psych)<br />
    describe(mydata)<br />
    # item name ,item number, nvalid,
    mean, sd, <br />
    #
    median, mad, min, max, skew, kurtosis, se</code></p>
<h2>Summary Statistics by Group </h2>
<p>A simple way of generating summary statistics by grouping variable is available in the <a href="http://cran.r-project.org/web/packages/psych/index.html">psych</a> package.</p>
<p><code>library(psych)<br />
    describe.by(mydata, group,...)</code></p>
<p>The <a href="http://cran.r-project.org/web/packages/doBy/index.html">doBy</a> package provides much of the functionality of SAS PROC SUMMARY. It defines the desired table using a model formula and a function. Here is a simple example. </p>
<p><code>library(doBy)<br />
    summaryBy(mpg + wt ~ cyl + vs, data = mtcars, <br />
    &nbsp; FUN = function(x) {
    c(m = mean(x), s = sd(x))
    } )<br />
    # produces mpg.m wt.m mpg.s wt.s for each <br />
    # combination of the levels of cyl and vs </code></p>
<p><strong>See also</strong>: <a href="../management/aggregate.html">aggregating data</a>. </p>
<h2>To Practice </h2>
<p> Want to practice interactively? Try <a href="https://www.datacamp.com/courses/intro-to-statistics-with-r-introduction">this free course on statistics and R</a></p>

<p>This section describes the creation of frequency and contingency tables from categorical variables, along with tests of independence, measures of association, and methods for graphically displaying results. </p>
<h2>Generating Frequency Tables</h2>
<p>R provides many methods for creating frequency and contingency tables. Three are described below. In the following examples, assume that A, B, and C represent categorical variables. </p>
<h3>table</h3>
<p>You can generate frequency tables using the <strong>table( )</strong> function, tables of proportions using the <strong>prop.table( )</strong> function, and marginal frequencies using <strong>margin.table( )</strong>. </p>
<p><code> # 2-Way Frequency Table <br />
    attach(mydata)<br />
    mytable &lt;- table(A,B) # A will be rows, B will be columns <br />
    mytable # print table <br />
    <br />
    margin.table(mytable, 1) # A frequencies (summed over B) <br />
    margin.table(mytable, 2) # B frequencies (summed over A)<br />
    <br />
    prop.table(mytable) # cell percentages<br />
    prop.table(mytable, 1) # row percentages <br />
    prop.table(mytable, 2) # column percentages </code></p>
<p><strong>table( )</strong> can also generate multidimensional tables based on 3 or more categorical variables. In this case, use the <strong>ftable( )</strong> function to print the results more attractively. </p>
<p><code># 3-Way Frequency Table <br />
    mytable &lt;- table(A, B, C) <br />
    ftable(mytable)
  </code></p>
<p><strong>Table ignores missing values. </strong>To include <strong>NA</strong> as a category in counts, include the table option exclude=NULL if the variable is a vector. If the variable is a factor you have to create a new factor using newfactor &lt;- factor(oldfactor, exclude=NULL). </p>
<h3>xtabs</h3>
<p>The <strong>xtabs( )</strong> function allows you to create crosstabulations using formula style input. </p>
<p><code># 3-Way Frequency Table<br />
    mytable &lt;- xtabs(~A+B+c, data=mydata)<br />
    ftable(mytable) # print table <br />
    summary(mytable) # chi-square test of indepedence
  </code></p>
<p>If a variable is included on the left side of the formula, it is assumed to be a vector of frequencies (useful if the data have already been tabulated). </p>
<h3>Crosstable </h3>
<p>The <strong>CrossTable( )</strong> function in the <a href="http://cran.r-project.org/web/packages/gmodels/index.html">gmodels</a> package produces crosstabulations modeled after PROC FREQ in <strong>SAS</strong> or CROSSTABS in SPSS. It has a wealth of options.</p>
<p><code># 2-Way Cross Tabulation<br />
    library(gmodels)<br />
    CrossTable(mydata$myrowvar, mydata$mycolvar)
  </code></p>
<p>There are options to report percentages (row, column, cell), specify decimal places, produce Chi-square, Fisher, and McNemar tests of independence, report expected and residual values (pearson, standardized, adjusted standardized), include missing values as valid, annotate with row and column titles, and format as <strong>SAS</strong> or <strong>SPSS</strong> style output! <br />
  See <strong>help(CrossTable)</strong> for details. </p>

<h2>Tests of Independence </h2>

<h3>Chi-Square Test</h3>
<p>For 2-way tables you can use <strong>chisq.test(</strong><em>mytable</em><strong>)</strong> to test independence of the row and column variable. By default, the p-value is calculated from the asymptotic chi-squared distribution of the test statistic. Optionally, the p-value can be derived via Monte Carlo simultation. </p>
<h3>Fisher Exact Test</h3>
<p><strong>fisher.test(</strong><em>x</em><strong>)</strong> provides an exact test of independence. <em>x</em> is a two dimensional contingency table in matrix form. </p>
<h3><strong>Mantel</strong>-<strong>Haenszel</strong> test </h3>
<p>Use the <strong>mantelhaen.test(</strong><em>x</em><strong>)</strong> function to perform a Cochran-Mantel-Haenszel chi-squared test of the null hypothesis that two nominal variables are conditionally independent in each stratum, assuming that there is no three-way interaction.<em> x</em> is a 3 dimensional contingency table, where the last dimension refers to the strata. </p>
<h3>Loglinear Models </h3>
<p>You can use the<strong> loglm( )</strong> function in the <strong>MASS</strong> package to produce log-linear models. For example, let's assume we have a 3-way contingency table based on variables A, B, and C. </p>
<p><code>library(MASS)<br />
    mytable &lt;- xtabs(~A+B+C, data=mydata)
  </code></p>
<p>We can perform the following tests:</p>
<p><strong>Mutual Independence</strong>: A, B, and C are pairwise independent.
  <code>loglm(~A+B+C, mytable)</code></p>
<p><strong>Partial Independence</strong>: A is partially independent of B and C (i.e., A is independent of the composite variable BC).
  <code>loglin(~A+B+C+B*C, mytable) </code></p>
<p><strong>Conditional Independence:</strong> A is independent of B, given C.
  <code>loglm(~A+B+C+A*C+B*C, mytable)</code>
  <p><strong>No Three-Way Interaction</strong>
    <code>loglm(~A+B+C+A*B+A*C+B*C, mytable)</code></p>
  <p>Martin Theus and Stephan Lauer have written an excellent article on <a href="https://pdfs.semanticscholar.org/4e31/116d2e6e0e0339e72859764242acfe8dbe30.pdf">Visualizing Loglinear Models</a>, using <a href="../advgraphs/mosaic.html">mosaic plots</a>.</p>
  <h2>Measures of Association </h2>
  <p>The <strong>assocstats(</strong><em>mytable</em><strong>) </strong>function in the <a href="http://cran.r-project.org/web/packages/vcd/index.html">vcd</a> package calculates the phi coefficient, contingency coefficient, and Cramer's V for an rxc table. The <strong>kappa(</strong><em>mytable</em>) function in the <a href="http://cran.r-project.org/web/packages/vcd/index.html">vcd</a> package calculates Cohen's kappa and weighted kappa for a confusion matrix. See Richard Darlington's article on <a href="http://node101.psych.cornell.edu/Darlington/crosstab/TABLE0.HTM">Measures of Association in Crosstab Tables</a> for an excellent review of these statistics. </p>
  <h2>Visualizing results </h2>
  <p>Use <a href="../graphs/bar.html">bar</a> and <a href="../graphs/pie.html">pie charts</a> for visualizing frequencies in one dimension. </p>
  <p>Use the <a href="../advgraphs/mosaic.html">vcd</a> package for visualizing relationships among categorical data (e.g. mosaic and association plots).</p>

  <p>Use the <a href="../advstats/ca.html">ca</a> package for correspondence analysis (visually exploring relationships between rows and columns in contingency tables). </p>

  <p>To practice making these charts, try <a href="https://www.datacamp.com/courses/data-visualization-in-r"> the data visualization course</a> at DataCamp.</p>
  <h2>Converting Frequency Tables to an &quot;Original&quot; Flat file </h2>
  <p>Finally, there may be times that you wil need the original &quot;flat file&quot; data frame rather than the frequency table. Marc Schwartz has provided code on the <a href="http://tolstoy.newcastle.edu.au/R/e2/help/06/10/3064.html">Rhelp mailing list</a> for converting a table back into a data frame.</p>

<p>You can use the <strong>cor( )</strong> function to produce correlations and the <strong>c</strong><strong>ov( )</strong> function to produces covariances. </p>
<p>A simplified format is <strong>cor(x, use=, method= )</strong> where</p>
<table width="85%">
  <tr>
    <td><strong>Option</strong></td>
    <td><strong>Description</strong></td>
  </tr>
  <tr>
    <td><strong>x</strong></td>
    <td>Matrix or data frame </td>
  </tr>
  <tr>
    <td><strong>use</strong></td>
    <td>Specifies the handling of missing data. Options are <strong>all.obs</strong> (assumes no missing data - missing data will produce an error), <strong>complete.obs</strong> (listwise deletion), and <strong>pairwise.complete.obs</strong> (pairwise deletion)</td>
  </tr>
  <tr>
    <td><strong>method</strong></td>
    <td>Specifies the type of correlation.
      Options are<strong> pearson</strong>, <strong>spearman</strong> or <strong>kendall</strong>.</td>
  </tr>
</table>
<p><code> # Correlations/covariances among numeric variables in <br />
    # data frame mtcars. Use listwise deletion of missing data. <br />
    cor(mtcars, use=&quot;complete.obs&quot;, method=&quot;kendall&quot;) <br />
    cov(mtcars, use=&quot;complete.obs&quot;) </code></p>
<p>Unfortunately, neither <strong>cor( ) </strong>or <strong>cov( )</strong> produce tests of significance, although you can use the <strong>cor.test( ) </strong>function to test a single correlation coefficient. </p>
<p>The <strong>rcorr( )</strong> function in the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package produces correlations/covariances and significance levels for pearson and spearman correlations. However, input must be a matrix and pairwise deletion is used. </p>
<p><code># Correlations with significance levels<br />
    library(Hmisc)<br />
    rcorr(x, type=&quot;pearson&quot;)
    # type can be pearson or spearman<br />
    <br />
    #mtcars is a data frame
    <br />
    rcorr(as.matrix(mtcars))
  </code></p>
<p>You can use the format <strong>cor(X, Y) </strong>or <strong>rcorr(X, Y)</strong> to generate correlations between the columns of X and the columns of Y. This similar to the VAR and WITH commands in <strong>SAS</strong> PROC CORR. </p>
<p><code># Correlation matrix from mtcars<br />
    # with
    mpg, cyl, and disp as rows <br />
    # and hp, drat, and wt as columns
    <br />
    x &lt;- mtcars[1:3]<br />
    y &lt;- mtcars[4:6]<br />
    cor(x, y)
  </code></p>
<h2>Other Types of Correlations </h2>
<p><code># polychoric correlation<br />
    # x is a contingency table of counts<br />
    library(polycor)<br />
    polychor(x) <br />
    <br />
    # heterogeneous correlations in one matrix <br />
    #
    pearson (numeric-numeric), <br />
    #
    polyserial (numeric-ordinal), <br />
    # and polychoric (ordinal-ordinal)<br />
    # x is a data frame with
    ordered factors
    <br />
    # and
    numeric variables<br />
    library(polycor)<br />
    hetcor(x) <br />
    <br />
    <br />
    # partial correlations<br />
    library(ggm)<br />
    data(mydata)<br />
    pcor(c(&quot;a&quot;, &quot;b&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;), var(mydata))<br />
    # partial corr between a and b controlling for x, y, z
  </code></p>
<h2>Visualizing Correlations </h2>
<p>Use <a href="../advgraphs/correlograms.html">corrgram( ) </a>to plot correlograms . </p>
<p>Use the <a href="../graphs/scatterplot.html">pairs() </a>or <a href="../graphs/scatterplot.html">splom( ) </a>to create scatterplot matrices.</p>
<h2>To Practice</h2>
<p>Try <a href="https://www.datacamp.com/courses/correlation-and-regression">this interactive course on correlations and regressions in R.</a></p>

<p>The <strong>t.test( )</strong> function produces a variety of t-tests. Unlike most statistical packages, the default assumes unequal variance and applies the Welsh df modification.<code># independent 2-group t-test<br />
    t.test(y~x) # where y is numeric and x is a binary factor
  </code></p>
<p><code># independent 2-group t-test<br />
    t.test(y1,y2) # where y1 and y2 are numeric </code></p>
<p><code># paired t-test<br />
    t.test(y1,y2,paired=TRUE) # where y1 &amp; y2 are numeric </code></p>
<p><code># one sample t-test<br />
    t.test(y,mu=3) # Ho: mu=3
  </code></p>
<p>You can use the <strong>var.equal = TRUE</strong> option to specify equal variances and a pooled variance estimate. You can use the <strong>alternative=&quot;less&quot;</strong> or <strong>alternative=&quot;greater&quot;</strong> option to specify a one tailed test. </p>
<p><a href="nonparametric.html">Nonparametric</a> and <a href="resampling.html">resampling</a> alternatives to t-tests are available.</p>
<h2>Visualizing Results </h2>
<p>Use <a href="../graphs/boxplot.html">box plots </a>or<a href="../graphs/density.html"> density plots </a> to visualize group differences.</p>
<h2>To Practice</h2>
<p>The chapter "Introduction to t-tests" <a href="https://www.datacamp.com/courses/intro-to-statistics-with-r-student-s-t-test"> of this online statistics in R course</a> has a number of interactive exercises on how to do t-tests in R.</p>

<p>R provides functions for carrying out Mann-Whitney U, Wilcoxon Signed Rank, Kruskal Wallis, and Friedman tests.</p>
<p><code># independent 2-group Mann-Whitney U Test <br />
    wilcox.test(y~A) <br />
    # where y is numeric and A is A binary factor
  </code></p>
<p><code># independent 2-group Mann-Whitney U Test<br />
    wilcox.test(y,x) # where y and x are numeric </code></p>
<p><code># dependent 2-group Wilcoxon Signed Rank Test <br />
    wilcox.test(y1,y2,paired=TRUE) # where y1 and y2 are numeric </code></p>
<p><code># Kruskal Wallis Test One Way Anova by Ranks <br />
    kruskal.test(y~A) # where y1 is numeric and A is a factor </code></p>
<p><code># Randomized Block Design - Friedman Test <br />
    friedman.test(y~A|B)<br />
    # where y are the data values, A is a grouping factor<br />
    # and B is a blocking factor
  </code></p>
<p>For the wilcox.test you can use the <strong>alternative=&quot;less&quot;</strong> or <strong>alternative=&quot;greater&quot;</strong> option to specify a one tailed test. </p>
<p><a href="ttest.html">Parametric</a> and <a href="resampling.html">resampling</a> alternatives are available.</p>
<p>The package <a href="https://www.rdocumentation.org/packages/pgirmess/versions/1.6.5">pgirmess</a> provides nonparametric multiple comparisons. (Note: This package has been
  withdrawn but is still available in the CRAN archives.)</p>
<p><code>library(npmc)<br />
    npmc(x) <br />
    #
    where x is a data frame containing variable 'var' <br />
    #
    (response variable) and 'class' (grouping variable)
  </code></p>
<h2>Visualizing Results </h2>
<p>Use <a href="../graphs/boxplot.html">box plots </a>or<a href="../graphs/density.html"> density plots </a> to visual group differences.</p>
<h2>To Practice </h2>
<p> <a href="https://campus.datacamp.com/courses/r-for-sas-spss-and-stata-users-r-tutorial/chapter-18-comparing-groups?ex=14">This interactive example</a> allows you to practice the Wilcoxon Signed Rank test with R.</p>

<p>R provides comprehensive support for multiple linear regression. The topics below are provided in order of increasing complexity. </p>
<h2>Fitting the Model </h2>
<p><code># Multiple Linear Regression Example
    <br />
    fit &lt;- lm(y ~ x1 + x2 + x3, data=mydata)<br />
    summary(fit) # show results</code></p>
<p><code># Other useful functions <br />
    coefficients(fit) # model coefficients<br />
    confint(fit, level=0.95) # CIs for model parameters
    <br />
    fitted(fit) # predicted values<br />
    residuals(fit) # residuals<br />
    anova(fit) # anova table <br />
    vcov(fit) # covariance matrix for model parameters <br />
    influence(fit) # regression diagnostics
  </code></p>
<h2>Diagnostic Plots </h2>
<p>Diagnostic plots provide checks for heteroscedasticity, normality, and influential observerations. </p>
<p><code># diagnostic plots <br />
    layout(matrix(c(1,2,3,4),2,2)) # optional 4 graphs/page <br />
    plot(fit)</code></p>
<p><a href="images/regdiag.png"><img src="https://www.statmethods.net/stats/regression/smregdiag.jpg"></a> click to view </p>
<p>For a more comprehensive evaluation of model fit see <a href="rdiagnostics.html">regression diagnostics</a> or the exercises in <a href="https://www.datacamp.com/courses/correlation-and-regression">this interactive course on regression.</a></p>

<h2>Comparing Models</h2>
<p>You can compare nested models with the anova( ) function. The following code provides a simultaneous test that x3 and x4 add to linear prediction above and beyond x1 and x2.</p>
<p><code># compare models<br />
    fit1 &lt;- lm(y ~ x1 + x2 + x3 + x4, data=mydata)<br />
    fit2 &lt;- lm(y ~ x1 + x2)<br />
    anova(fit1, fit2)
  </code></p>
<h2>Cross Validation</h2>
<p>You can do<a href="http://en.wikipedia.org/wiki/Cross-validation"> K-Fold cross-validation </a>using the cv.lm( ) function in the <a href="http://cran.r-project.org/web/packages/DAAG/index.html">DAAG</a> package. </p>
<p><code># K-fold cross-validation<br />
    library(DAAG)<br />
    cv.lm(df=mydata, fit, m=3) # 3 fold cross-validation</code></p>
<p>Sum the MSE for each fold, divide by the number of observations, and take the square root to get the cross-validated standard error of estimate.</p>
<p>You can assess <strong>R2 shrinkage</strong> via K-fold cross-validation. Using the <strong>crossval() </strong>function from the <strong><a href="http://cran.r-project.org/web/packages/bootstrap/index.html">bootstrap</a> </strong>package, do the following: </p>
<p><code># Assessing R2 shrinkage using 10-Fold Cross-Validation
    <br />
    <br />
    fit &lt;- lm(y~x1+x2+x3,data=mydata) <br />
    <br />
    library(bootstrap)<br />
    # define functions <br />
    theta.fit &lt;- function(x,y){lsfit(x,y)}<br />
    theta.predict &lt;- function(fit,x){cbind(1,x)%*%fit$coef}
    <br />
    <br />
    # matrix of predictors<br />
    X
    &lt;- as.matrix(mydata[c(&quot;x1&quot;,&quot;x2&quot;,&quot;x3&quot;)])<br />
    # vector of predicted values<br />
    y &lt;- as.matrix(mydata[c(&quot;y&quot;)]) <br />
    <br />
    results &lt;- crossval(X,y,theta.fit,theta.predict,ngroup=10)<br />
    cor(y, fit$fitted.values)**2 # raw R2 <br />
    cor(y,results$cv.fit)**2 # cross-validated R2 </code></p>

<h2>Variable Selection</h2>
<p>Selecting a subset of predictor variables from a larger set (e.g., stepwise selection) is a controversial topic. You can perform stepwise selection (forward, backward, both) using the <strong>stepAIC( )</strong> function from the <strong>MASS </strong>package. <strong>stepAIC( ) </strong> performs stepwise model selection by exact AIC. </p>
<p><code># Stepwise Regression<br />
    library(MASS)<br />
    fit &lt;- lm(y~x1+x2+x3,data=mydata)<br />
    step &lt;- stepAIC(fit, direction=&quot;both&quot;)<br />
    step$anova # display results </code></p>
<p> Alternatively, you can perform all-subsets regression using the <strong>leaps( )</strong> function from the <a href="http://cran.r-project.org/web/packages/leaps/index.html">leaps</a> package. In the following code nbest indicates the number of subsets of each size to report. Here, the ten best models will be reported for each subset size (1 predictor, 2 predictors, etc.). </p>
<p><code># All Subsets Regression<br />
    library(leaps)<br />
    attach(mydata)<br />
    leaps&lt;-regsubsets(y~x1+x2+x3+x4,data=mydata,nbest=10)<br />
    # view results <br />
    summary(leaps)<br />
    # plot a table of models showing variables in each model.<br />
    #
    models are ordered by the selection statistic.<br />
    plot(leaps,scale=&quot;r2&quot;)<br />
    # plot statistic by subset size <br />
    library(car)<br />
    subsets(leaps, statistic=&quot;rsq&quot;) </code></p>
<p><a href="images/leaps1.png"><img src="https://www.statmethods.net/stats/regression/smleaps1.jpg"></a> <a href="images/leaps2.png"><img src="https://www.statmethods.net/stats/regression/smleaps2.jpg"></a> click to view </p>
<p>Other options for <strong>plot( )</strong> are bic, Cp, and adjr2. Other options for plotting with<strong> <br />
    subset( )</strong> are bic, cp, adjr2, and rss. </p>
<h2>Relative Importance</h2>
<p>The <a href="http://cran.r-project.org/web/packages/relaimpo/index.html">relaimpo</a> package provides measures of relative importance for each of the predictors in the model. See help(calc.relimp) for details on the four measures of relative importance provided. </p>
<p><code># Calculate Relative Importance for Each Predictor<br />
    library(relaimpo)<br />
    calc.relimp(fit,type=c(&quot;lmg&quot;,&quot;last&quot;,&quot;first&quot;,&quot;pratt&quot;),<br />
    &nbsp;&nbsp; rela=TRUE)<br />
    <br />
    # Bootstrap Measures of Relative Importance (1000 samples) <br />
    boot &lt;- boot.relimp(fit, b = 1000, type = c(&quot;lmg&quot;, <br />
    &nbsp;&nbsp;&quot;last&quot;, &quot;first&quot;, &quot;pratt&quot;), rank = TRUE, <br />
    &nbsp; diff = TRUE, rela = TRUE)<br />
    booteval.relimp(boot) # print result<br />
    plot(booteval.relimp(boot,sort=TRUE)) # plot result </code></p>
<p><a href="images/relimp.png"><img src="https://www.statmethods.net/stats/regression/smrelimp.jpg"></a> click to view </p>
<h2>Graphic Enhancements </h2>
<p>The <a href="http://cran.r-project.org/web/packages/car/index.html">car</a> package offers a wide variety of plots for regression, including added variable plots, and <a href="rdiagnostics.html">enhanced diagnostic</a> and <a href="../graphs/scatterplot.html">Scatterplots</a>. </p>
<h2>Going Further</h2>
<h3>Nonlinear Regression </h3>
<p>The <strong>nls</strong> package provides functions for nonlinear regression. See John Fox's <a href="https://socserv.socsci.mcmaster.ca/jfox/Books/Companion/appendix/Appendix-Nonlinear-Regression.pdf">Nonlinear Regression and Nonlinear Least Squares</a> for an overview. Huet and colleagues' <a href="http://www.amazon.com/Statistical-Tools-Nonlinear-Regression-Statistics/dp/0387400818">Statistical Tools for Nonlinear Regression: A Practical Guide with S-PLUS and R Examples</a> is a valuable reference book. </p>
<h3>Robust Regression </h3>
<p>There are many functions in R to aid with robust regression. For example, you can perform robust regression with the <strong>rlm( )</strong> function in the <strong>MASS</strong> package. John Fox's (who else?) <a href="https://socserv.socsci.mcmaster.ca/jfox/Books/Companion/appendix/Appendix-Robust-Regression.pdf">Robust Regression</a> provides a good starting overview. The UCLA Statistical Computing website has <a href="http://www.ats.ucla.edu/stat/R/dae/rreg.htm">Robust Regression Examples</a>. </p>
<p>The <a href="http://cran.r-project.org/web/packages/robust/index.html">robust</a> package provides a comprehensive library of robust methods, including regression. The <a href="http://cran.r-project.org/web/packages/robustbase/index.html">robustbase</a> package also provides basic robust statistics including model selection methods. And David Olive has provided an detailed online review of <a href="http://www.math.siu.edu/olive/ol-bookp.htm">Applied Robust Statistics</a> with sample R code. </p>
<h2>To Practice</h2>
<p>This <a href="https://www.datacamp.com/courses/introduction-to-machine-learning-with-r">course in machine learning in R</a> includes excercises in multiple regression and cross validation.</p>

<p>An excellent review of regression diagnostics is provided in John Fox's aptly named <a href="http://socserv.socsci.mcmaster.ca/jfox/Courses/Brazil-2009/index.html">Overview of Regression Diagnostics.</a> Dr. Fox's <a href="http://cran.r-project.org/web/packages/car/index.html">car</a> package provides advanced utilities for regression modeling. </p>
<p><code># Assume that we are fitting a multiple linear regression<br />
    #
    on the MTCARS data<br />
    library(car)<br />
    fit &lt;- lm(mpg~disp+hp+wt+drat, data=mtcars)
  </code></p>
<p>This example is for <strong>exposition only</strong>. We will ignore the fact that this may not be a great way of modeling the this particular set of data!</p>
<h2>Outliers</h2>
<p><code># Assessing Outliers<br />
    outlierTest(fit) # Bonferonni p-value for most extreme obs<br />
    qqPlot(fit, main=&quot;QQ Plot&quot;) #qq plot for studentized resid
    <br />
    leveragePlots(fit) # leverage plots
  </code></p>
<p> <a href="images/leverage.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smleverage.jpg"></a> click to view </p>
<h2>Influential Observations</h2>
<p><code># Influential Observations<br />
    # added variable plots <br />
    av.Plots(fit)<br />
    # Cook's D plot<br />
    # identify D values &gt; 4/(n-k-1) <br />
    cutoff &lt;- 4/((nrow(mtcars)-length(fit$coefficients)-2)) <br />
    plot(fit, which=4, cook.levels=cutoff)<br />
    # Influence Plot
    <br />
    influencePlot(fit, id.method=&quot;identify&quot;, main=&quot;Influence Plot&quot;, sub=&quot;Circle size is proportial to Cook's Distance&quot; )</code></p>
<p><a href="images/avplot.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smavplot.jpg"></a> <a href="images/CooksD.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smcooksD.jpg"></a> <a href="images/influenceplot.png"><img src="https://www.statmethods.net/stats/rdiagnostics/sminfluencePlot.jpg"></a> click to view </p>
<h2>Non-normality</h2>
<p><code># Normality of Residuals<br />
    # qq plot for studentized resid<br />
    qqPlot(fit, main=&quot;QQ Plot&quot;)<br />
    # distribution of studentized residuals<br />
    library(MASS)<br />
    sresid &lt;- studres(fit) <br />
    hist(sresid, freq=FALSE, <br />
    &nbsp;&nbsp; main=&quot;Distribution of Studentized Residuals&quot;)<br />
    xfit&lt;-seq(min(sresid),max(sresid),length=40) <br />
    yfit&lt;-dnorm(xfit)
    <br />
    lines(xfit, yfit) </code></p>
<p><a href="images/qqplot2.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smqqplot2.jpg"></a> <a href="images/studresid.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smsturesid.jpg"></a> click to view </p>
<h2>Non-constant Error Variance</h2>
<p><code># Evaluate homoscedasticity<br />
    # non-constant error variance test<br />
    ncvTest(fit)<br />
    # plot
    studentized residuals vs. fitted values <br />
    spreadLevelPlot(fit)</code></p>
<p><a href="images/spread.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smspread.jpg"></a> click to view </p>
<h2>Multi-collinearity</h2>
<p><code># Evaluate Collinearity<br />
    vif(fit) # variance inflation factors <br />
    sqrt(vif(fit)) &gt; 2 # problem?</code> </p>
<h2>Nonlinearity</h2>
<p><code># Evaluate Nonlinearity<br />
    # component + residual plot <br />
    crPlots(fit)<br />
    # Ceres plots <br />
    ceresPlots(fit)</code></p>
<p><a href="images/crplot.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smcrplot.jpg"></a> <a href="images/ceres.png"><img src="https://www.statmethods.net/stats/rdiagnostics/smceres.jpg"></a> click to view </p>
<h2>Non-independence of Errors</h2>
<p><code># Test for Autocorrelated Errors<br />
    durbinWatsonTest(fit)</code></p>
<h2>Additional Diagnostic Help</h2>
<p>The <strong>gvlma( )</strong> function in the <a href="http://cran.r-project.org/web/packages/gvlma/index.html">gvlma</a> package, performs a global validation of linear model assumptions as well separate evaluations of skewness, kurtosis, and heteroscedasticity. </p>
<p><code># Global test of model assumptions<br />
    library(gvlma)<br />
    gvmodel &lt;- gvlma(fit)
    <br />
    summary(gvmodel) </code></p>
<h2>Going Further</h2>
<p>If you would like to delve deeper into regression diagnostics, two books written by John Fox can help: <a href="http://socserv.socsci.mcmaster.ca/jfox/Books/Applied-Regression-2E/index.html">Applied regression analysis and generalized linear models (2nd ed)</a> and <a href="http://socserv.socsci.mcmaster.ca/jfox/Books/Companion/index.html">An R and S-Plus companion to applied regression</a>. </p>

<p>If you have been analyzing ANOVA designs in traditional statistical packages, you are likely to find R's approach less coherent and user-friendly. A good online presentation on ANOVA in R can
  be found in <a href="http://personality-project.org/r/r.guide/r.anova.html#oneway">ANOVA</a> section of the <a href="https://personality-project.org/index.html">Personality Project</a>. (Note: I have found that these pages render fine in Chrome and Safari browsers, but can appear distorted in iExplorer.)</p>
<h3>1. Fit a Model</h3>
<p>In the following examples <strong>lower case</strong> letters are numeric variables and <strong>upper case</strong> letters are <a href="../input/datatypes.html">factors</a>. </p>
<p><code># One Way Anova (Completely Randomized Design)<br />
    fit &lt;- aov(y ~ A, data=mydataframe)
  </code></p>
<p><code># Randomized Block Design (B is the blocking factor) <br />
    fit &lt;- aov(y ~ A + B, data=mydataframe)
  </code></p>
<p><code># Two Way Factorial Design <br />
    fit &lt;- aov(y ~ A + B + A:B, data=mydataframe)<br />
    fit &lt;- aov(y ~ A*B, data=mydataframe)
    # same thing
  </code></p>
<p><code># Analysis of Covariance <br />
    fit &lt;- aov(y ~ A + x, data=mydataframe) </code></p>
<p>For within subjects designs, the data frame has to be rearranged so that each measurement on a subject is a separate observation. See <a href="http://personality-project.org/r/">R and Analysis of Variance. </a> </p>
<p><code># One Within Factor<br />
    fit &lt;- aov(y~A+Error(Subject/A),data=mydataframe)</code></p>
<p><code># Two Within Factors W1 W2, Two Between Factors B1 B2 <br />
    fit &lt;- aov(y~(W1*W2*B1*B2)+Error(Subject/(W1*W2))+(B1*B2),<br />
    &nbsp;&nbsp; data=mydataframe) </code></p>
<h3>2. Look at Diagnostic Plots </h3>
<p>Diagnostic plots provide checks for heteroscedasticity, normality, and influential observerations.<code>layout(matrix(c(1,2,3,4),2,2)) # optional layout
    <br />
    plot(fit) # diagnostic plots</code></p>
<p>For details on the evaluation of test requirements, see <a href="anovaAssumptions.html">(M)ANOVA Assumptions</a>. </p>
<h3> 3. Evaluate Model Effects </h3>
<p><strong>WARNING</strong>: R provides <a href="http://afni.nimh.nih.gov/sscc/gangc/SS.html">Type I sequential SS</a>, not the default <a href="http://afni.nimh.nih.gov/sscc/gangc/SS.html">Type III marginal SS</a> reported by SAS and SPSS. In a nonorthogonal design with more than one term on the right hand side of the equation <strong>order will matter</strong> (i.e., A+B and B+A will produce <em>different</em> results)! We will need use the <strong>drop1( )</strong> function to produce the familiar Type III results. It will compare each term with the full model. Alternatively, we can use anova(fit.model1, fit.model2) to compare nested models directly. </p>
<p><code>summary(fit) # display Type I ANOVA table<br />
    drop1(fit,~.,test=&quot;F&quot;) # type III SS and F Tests </code></p>
<p><a href="nonparametric.html">Nonparametric</a> and <a href="resampling.html">resampling</a> alternatives are available.</p>
<h2>Multiple Comparisons </h2>
<p>You can get Tukey HSD tests using the function below. By default, it calculates post hoc comparisons on each factor in the model. You can specify specific factors as an option. <strong>Again, remember that results are based on Type I SS! </strong></p>
<p><code># Tukey Honestly Significant Differences<br />
    TukeyHSD(fit) # where fit comes from aov()
  </code></p>
<h2>Visualizing Results </h2>
<p>Use <a href="../graphs/boxplot.html">box plots </a> and <a href="../graphs/line.html">line plots</a> to visualize group differences. There are also two functions specifically designed for visualizing mean differences in ANOVA layouts. <strong>interaction.plot( ) </strong>in the base stats package produces plots for two-way interactions. plotmeans( ) in the <a href="http://cran.r-project.org/web/packages/gplots/index.html">gplots </a>package produces mean plots for single factors, and includes confidence intervals.</p>
<p><code># Two-way Interaction Plot <br />
    attach(mtcars)<br />
    gears &lt;- factor(gears)<br />
    cyl &lt;- factor(cyl)<br />
    interaction.plot(cyl, gear, mpg, type=&quot;b&quot;, col=c(1:3), <br />
    &nbsp;&nbsp; leg.bty=&quot;o&quot;, leg.bg=&quot;beige&quot;, lwd=2, pch=c(18,24,22), <br />
    &nbsp;&nbsp; xlab=&quot;Number of Cylinders&quot;, <br />
    &nbsp;&nbsp; ylab=&quot;Mean Miles Per Gallon&quot;, <br />
    &nbsp;&nbsp; main=&quot;Interaction Plot&quot;)</code></p>
<p><a href="images/interaction.jpg"><img src="https://www.statmethods.net/stats/anova/sminteraction.jpg"></a> click to view</p>
<p><code># Plot Means with Error Bars<br />
    library(gplots)<br />
    attach(mtcars)<br />
    cyl &lt;- factor(cyl)<br />
    plotmeans(mpg~cyl,xlab=&quot;Number of Cylinders&quot;,<br />
    &nbsp;&nbsp;ylab=&quot;Miles Per Gallon&quot;, main=&quot;Mean Plot\nwith 95% CI&quot;)
  </code></p>
<p><a href="images/meanplot.jpg"><img src="https://www.statmethods.net/stats/anova/smmeanplot.jpg"></a> click to view </p>
<h2>MANOVA</h2>
<p>If there is more than one dependent (outcome) variable, you can test them simultaneously using a <strong>multivariate analysis of variance</strong> (MANOVA). In the following example, let Y be a matrix whose columns are the dependent variables. </p>
<p><code># 2x2 Factorial MANOVA with 3 Dependent Variables. <br />
    Y &lt;- cbind(y1,y2,y3)<br />
    fit &lt;- manova(Y ~ A*B)<br />
    summary(fit, test=&quot;Pillai&quot;)</code></p>
<p>Other test options are &quot;Wilks&quot;, &quot;Hotelling-Lawley&quot;, and &quot;Roy&quot;. Use<strong> summary.aov( )</strong> to get univariate statistics. <strong>TukeyHSD( )</strong> and <strong>plot( )</strong> will not work with a MANOVA fit. Run each dependent variable separately to obtain them. Like ANOVA, MANOVA results in R are based on Type I SS. To obtain Type III SS, vary the order of variables in the model and rerun the analyses. For example, fit y~A*B for the TypeIII B effect and y~B*A for the Type III A effect. </p>
<h2>Going Further</h2>
<p>R has excellent facilities for fitting linear and generalized linear <strong>mixed-effects models</strong>. The lastest implimentation is in package <a href="http://cran.r-project.org/web/packages/lme4/index.html">lme4</a>. See the R News Article on <a href="http://cran.r-project.org/doc/Rnews/Rnews_2005-1.pdf">Fitting Mixed Linear Models in R</a> for details. </p>

<p>In classical parametric procedures we often assume normality and constant variance for the model error term. Methods of exploring these assumptions in an ANOVA/ANCOVA/MANOVA framework are discussed here. Regression diagnostics are covered under <a href="regression.html">multiple linear regression.</a> </p>
<h2>Outliers</h2>
<p>Since outliers can severly affect normality and homogeneity of variance, methods for detecting disparate observerations are described first. </p>
<p>The <b>aq.plot()</b> function in the <a href="http://cran.r-project.org/web/packages/mvoutlier/index.html">mvoutlier</a> package allows you to identfy multivariate outliers by plotting the ordered squared robust Mahalanobis distances of the observations against the empirical distribution function of the MD<sup>2</sup><sub>i</sub>. Input consists of a matrix or data frame. The function produces 4 graphs and returns a boolean vector identifying the outliers.</p>
<p><code># Detect Outliers in the MTCARS Data<br />
    library(mvoutlier)<br />
    outliers &lt;- <br />
    aq.plot(mtcars[c(&quot;mpg&quot;,&quot;disp&quot;,&quot;hp&quot;,&quot;drat&quot;,&quot;wt&quot;,&quot;qsec&quot;)])<br />
    outliers # show list of outliers </code></p>
<p><a href="images/outliers1.png"><img src="https://www.statmethods.net/stats/anovaAssumptions/smoutliers1.jpg"></a> click to view</p>
<h2>Univariate Normality</h2>
<p>You can evaluate the normality of a variable using a <strong>Q-Q plot</strong>. </p>
<p><code># Q-Q Plot for variable MPG <br />
    attach(mtcars)<br />
    qqnorm(mpg)<br />
    qqline(mpg)</code></p>
<p><a href="images/qqplot1.jpg"><img src="https://www.statmethods.net/stats/anovaAssumptions/smqqplot.jpg"></a> click to view</p>
<p>Significant departures from the line suggest violations of normality. </p>
<p>You can also perform a Shapiro-Wilk test of normality with the <strong>shapiro.test(</strong><em>x</em><strong>)</strong> function, where <em>x</em> is a numeric vector. Additional functions for testing<strong> </strong>normality are available in <a href="http://cran.r-project.org/web/packages/nortest/index.html">nortest</a> package. </p>
<h2>Multivariate Normality </h2>
<p>MANOVA assumes <strong>multivariate normality</strong>. The function<strong> mshapiro.test( )</strong> in the <a href="http://cran.r-project.org/web/packages/mvnormtest/index.html">mvnormtest</a> package produces the Shapiro-Wilk test for multivariate normality. Input must be a numeric matrix.</p>
<p><code># Test Multivariate Normality
    <br />
    mshapiro.test(M)
  </code></p>
<p> If we have <em>p</em> x 1 multivariate normal random vector <img src="https://www.statmethods.net/stats/anovaAssumptions/mnormal.gif"><br />
  then the squared Mahalanobis distance between <strong><em>x</em></strong> and &mu; is going to be chi-square distributed with <em>p</em> degrees of freedom. We can use this fact to construct a <strong>Q-Q plot</strong> to assess multivariate normality. </p>
<p><code># Graphical Assessment of Multivariate Normality<br />
    x &lt;- as.matrix(mydata) # n x p numeric matrix<br />
    center &lt;- colMeans(x) # centroid<br />
    n &lt;- nrow(x); p &lt;- ncol(x); cov &lt;- cov(x); <br />
    d &lt;-
    mahalanobis(x,center,cov) # distances
    <br />
    qqplot(qchisq(ppoints(n),df=p),d,<br />
    &nbsp;&nbsp;main=&quot;QQ Plot Assessing Multivariate Normality&quot;,<br />
    &nbsp;&nbsp;ylab=&quot;Mahalanobis D2&quot;)<br />
    abline(a=0,b=1)
  </code></p>
<p><a href="images/mahalanobis.jpg"><img src="https://www.statmethods.net/stats/anovaAssumptions/smmahalanobis.jpg"></a> click to view </p>
<h2>Homogeneity of Variances</h2>
<p>The <strong>bartlett.test( ) </strong>function provides a parametric K-sample test of the equality of variances. The <strong>fligner.test( ) </strong>function provides a non-parametric test of the same. In the following examples <strong>y</strong> is a numeric variable and <strong>G</strong> is the grouping variable. </p>
<p><code># Bartlett Test of Homogeneity of Variances<br />
    bartlett.test(y~G, data=mydata)<br />
    <br />
    # Figner-Killeen Test of Homogeneity of Variances<br />
    fligner.test(y~G, data=mydata)
  </code></p>
<p>The <strong>hovPlot( )</strong> function in the <strong>HH</strong> package provides a graphic test of homogeneity of variances based on Brown-Forsyth. In the following example, <strong>y</strong> is numeric and <strong>G</strong> is a grouping factor. Note that G <strong>must</strong> be of type factor. </p>
<p><code># Homogeneity of Variance Plot<br />
    library(HH)<br />
    hov(y~G, data=mydata)<br />
    hovPlot(y~G,data=mydata)
  </code></p>
<p><a href="images/hov.jpg"><img src="https://www.statmethods.net/stats/anovaAssumptions/smhov.jpg"></a> click to view </p>
<h2>Homogeneity of Covariance Matrices </h2>
<p>MANOVA and LDF assume homogeneity of variance-covariance matrices. The assumption is usually tested with<strong> Box's M</strong>. Unfortunately the test is very sensitive to violations of normality, leading to rejection in most typical cases. <strong>Box's M</strong> is available via the <strong>boxM</strong> function
  in the <a href="https://cran.r-project.org/web/packages/biotools/index.html">biotools</a> package. </p>
<h2>To Practice</h2>
<p>Try the free first chapter of <a href="https://www.datacamp.com/courses/analysis-of-variance-anova"> this course on ANOVA with R.</a></p>

<p>The <a href="http://cran.r-project.org/web/packages/coin/index.html">coin</a> package provides the ability to perform a wide variety of re-randomization or permutation based statistical tests. These tests do not assume random sampling from well-defined populations. They can be a reasonable alternative to classical procedures when test assumptions can not be met. See <a href="http://finzi.psych.upenn.edu/R/library/coin/doc/coin.pdf">coin: A Computational Framework for Conditional Inference</a> for details. </p>
<p>In the examples below, <strong>lower case</strong> letters represent numerical variables and <strong>upper case</strong> letters represent categorical <a href="../input/datatypes.html">factors</a>. Monte-Carlo simulation are available for all tests. Exact tests are available for 2 group procedures. </p>
<h2>Independent Two- and K-Sample Location Tests</h2>
<p><code> # Exact Wilcoxon Mann Whitney Rank Sum Test <br />
    # where y is numeric and A is a binary factor <br />
    library(coin)<br />
    wilcox_test(y~A, data=mydata, distribution=&quot;exact&quot;) </code></p>
<p><code># One-Way Permutation Test based on 9999 Monte-Carlo <br />
    # resamplings. y is numeric and A is a categorical factor
    <br />
    library(coin)<br />
    oneway_test(y~A, data=mydata,<br />
    &nbsp;&nbsp;distribution=approximate(B=9999))</code></p>
<h2>Symmetry of a response for repeated measurements </h2>
<p><code># Exact Wilcoxon Signed Rank Test <br />
    # where y1 and y2 are repeated measures <br />
    library(coin)<br />
    wilcoxsign_test(y1~y2, data=mydata, distribution=&quot;exact&quot;)</code></p>
<p><code># Freidman Test based on 9999 Monte-Carlo resamplings.<br />
    # y is numeric, A is a grouping factor, and B is a <br />
    #
    blocking factor. <br />
    library(coin)<br />
    friedman_test(y~A|B, data=mydata, <br />
    &nbsp;&nbsp; distribution=approximate(B=9999))</code></p>
<h2>Independence of Two Numeric Variables</h2>
<p><code># Spearman Test of Independence based on 9999 Monte-Carlo<br />
    # resamplings. x and y are numeric variables.<br />
    library(coin)<br />
    spearman_test(y~x, data=mydata, <br />
    &nbsp;&nbsp; distribution=approximate(B=9999))
  </code></p>
<h2>Independence in Contingency Tables </h2>
<p><code># Independence in 2-way Contingency Table based on<br />
    # 9999 Monte-Carlo resamplings. A and B are factors.<br />
    library(coin)<br />
    chisq_test(A~B, data=mydata, <br />
    &nbsp;&nbsp; distribution=approximate(B=9999))
  </code></p>
<p><code># Cochran-Mantel-Haenzsel Test of 3-way Contingency Table<br />
    # based on 9999 Monte-Carlo resamplings. A, B, are
    factors <br />
    # and C is a stratefying factor.<br />
    library(coin)<br />
    mh_test(A~B|C, data=mydata, <br />
    &nbsp;&nbsp; distribution=approximate(B=9999))</code></p>
<p><code># Linear by Linear Association Test based on 9999 <br />
    #
    Monte-Carlo resamplings.
    A and B are ordered factors.<br />
    library(coin)<br />
    lbl_test(A~B, data=mydata, <br />
    &nbsp;&nbsp; distribution=approximate(B=9999)) </code></p>
<p>Many other univariate and multivariate tests are possible using the functions in the <strong><a href="http://cran.r-project.org/web/packages/coin/index.html">coin</a> </strong>package. See <a href="http://finzi.psych.upenn.edu/R/library/coin/doc/LegoCondInf.pdf">A Lego System for Conditional Inference</a> for more details. </p>
<h2>To Practice</h2>
<p>Try the exercises in <a href="https://www.datacamp.com/courses/foundations-of-inference"> this course on data analysis and statistical inference in R.</a></p>

<h2>Overview</h2>
<p>Power analysis is an important aspect of experimental design. It allows us to determine the sample size required to detect an effect of a given size with a given degree of confidence. Conversely, it allows us to determine the probability of detecting an effect of a given size with a given level of confidence, under sample size constraints. If the probability is unacceptably low, we would be wise to alter or abandon the experiment.</p>
<p>The following <strong>four quantities</strong> have an intimate relationship:</p>

<ol>
  <li><span>sample size</span></li>
  <li><span>effect size</span></li>
  <li><span>significance level = P(Type I error) = probability of finding an effect that is not there</span> </li>
  <li><span>power = 1 - P(Type II error) = probability of finding an effect that is there</span> </li>
</ol>

<p>Given any three, we can determine the fourth. </p>
<h2>Power Analysis in R </h2>
<p>The <a href="http://cran.r-project.org/web/packages/pwr/index.html">pwr</a> package develped by St&eacute;phane Champely, impliments power analysis as outlined by <a href="http://www.amazon.com/Statistical-Power-Analysis-Behavioral-Sciences/dp/0805802835">Cohen (!988)</a>. Some of the more important functions are listed below. </p>
<table width="85%">
  <tr>
    <td><strong>function</strong></td>
    <td><strong>power calculations for </strong></td>
  </tr>
  <tr>
    <td><strong>pwr.2p.test</strong></td>
    <td>two proportions (equal n) </td>
  </tr>
  <tr>
    <td><strong>pwr.2p2n.test</strong></td>
    <td>two proportions (unequal n) </td>
  </tr>
  <tr>
    <td><strong>pwr.anova.test</strong></td>
    <td>balanced one way ANOVA </td>
  </tr>
  <tr>
    <td><strong>pwr.chisq.test</strong></td>
    <td>chi-square test</td>
  </tr>
  <tr>
    <td><strong>pwr.f2.test</strong></td>
    <td>general linear model </td>
  </tr>
  <tr>
    <td><strong>pwr.p.test</strong></td>
    <td>proportion (one sample) </td>
  </tr>
  <tr>
    <td><strong>pwr.r.test</strong></td>
    <td>correlation</td>
  </tr>
  <tr>
    <td><strong>pwr.t.test</strong></td>
    <td>t-tests (one sample, 2 sample, paired) </td>
  </tr>
  <tr>
    <td><strong>pwr.t2n.test</strong></td>
    <td>t-test (two samples with unequal n) </td>
  </tr>
</table>
<p><strong>For each of these functions, you enter three of the four quantities (effect size, sample size, significance level, power) and the fourth is calculated. </strong></p>
<p>The significance level defaults to 0.05. Therefore, to calculate the significance level, given an effect size, sample size, and power, use the option &quot;sig.level=NULL&quot;. </p>
<p>Specifying an <a href="http://en.wikipedia.org/wiki/Effect_size">effect size</a> can be a daunting task. ES formulas and Cohen's suggestions (based on social science research) are provided below. Cohen's suggestions should only be seen as very rough guidelines. Your own subject matter experience should be brought to bear. </p>

<p>(To explore confidence intervals and drawing conclusions from samples try <a href="https://www.datacamp.com/courses/foundations-of-inference"> this interactive course on the foundations of inference.)</a></p>

<h2>t-tests</h2>
<p>For t-tests, use the following functions: </p>
<p><strong>pwr.t.test(n = , d = , sig.level = , power = ,
    type = c(&quot;two.sample&quot;, &quot;one.sample&quot;, &quot;paired&quot;)) </strong></p>
<p>where n is the sample size, d is the effect size, and type indicates a two-sample t-test, one-sample t-test or paired t-test. If you have unequal sample sizes, use </p>
<p><strong>pwr.t2n.test(n1 = , n2= , d = , sig.level =, power = )</strong></p>
<p>where n1 and n2 are the sample sizes.</p>
<p>For t-tests, the effect size is assessed as </p>
<p><img src="https://www.statmethods.net/stats/power/cohend.png"></p>
<p>Cohen suggests that d values of 0.2, 0.5, and 0.8 represent small, medium, and large effect sizes respectively. </p>
<p>You can specify alternative=&quot;two.sided&quot;, &quot;less&quot;, or &quot;greater&quot; to indicate a two-tailed, or one-tailed test. A two tailed test is the default. </p>
<h2>ANOVA</h2>
<p>For a one-way analysis of variance use </p>
<p><strong>pwr.anova.test(k = , n = , f = , sig.level = , power = ) </strong></p>
<p>where k is the number of groups and n is the common sample size in each group. </p>
<p>For a one-way ANOVA effect size is measured by f where </p>
<p><img src="https://www.statmethods.net/stats/power/cohenf.png"><br />
  Cohen suggests that f values of 0.1, 0.25, and 0.4 represent small, medium, and large effect sizes respectively. </p>
<h2>Correlations</h2>
<p>For correlation coefficients use </p>
<p><strong>pwr.r.test(n = , r = , sig.level = , power = ) </strong></p>
<p>where n is the sample size and r is the correlation. We use the population correlation coefficient as the effect size measure. Cohen suggests that r values of 0.1, 0.3, and 0.5 represent small, medium, and large effect sizes respectively.</p>
<h2>Linear Models</h2>
<p>For linear models (e.g., multiple regression) use </p>
<p><strong>pwr.f2.test(u =, v = , f2 = , sig.level = , power = ) </strong></p>
<p>where u and v are the numerator and denominator degrees of freedom. We use f2 as the effect size measure. </p>
<p><img src="https://www.statmethods.net/stats/power/cohenf2simple.png"></p>
<p><img src="https://www.statmethods.net/stats/power/cohenf2.png"></p>
<p>The first formula is appropriate when we are evaluating the impact of a set of predictors on an outcome. The second formula is appropriate when we are evaluating the impact of one set of predictors above and beyond a second set of predictors (or covariates). Cohen suggests f2 values of 0.02, 0.15, and 0.35 represent small, medium, and large effect sizes. </p>
<h2>Tests of Proportions</h2>
<p>When comparing two proportions use </p>
<p><strong>pwr.2p.test(h = , n = , sig.level =, power = ) </strong></p>
<p>where h is the effect size and n is the common sample size in each group. </p>
<p><img src="https://www.statmethods.net/stats/power/cohenh.png"></p>
<p>Cohen suggests that h values of 0.2, 0.5, and 0.8 represent small, medium, and large effect sizes respectively. </p>
<p>For unequal n's use </p>
<p><strong>pwr.2p2n.test(h = , n1 = , n2 = , sig.level = , power = ) </strong></p>
<p>To test a single proportion use </p>
<p><strong>pwr.p.test(h = , n = , sig.level = power = )</strong></p>
<p>For both two sample and one sample proportion tests, you can specify alternative=&quot;two.sided&quot;, &quot;less&quot;, or &quot;greater&quot; to indicate a two-tailed, or one-tailed test. A two tailed test is the default. </p>
<h2>Chi-square Tests</h2>
<p>For chi-square tests use </p>
<p><strong>pwr.chisq.test(w =, N = , df = , sig.level =, power = ) </strong> </p>
<p>where w is the effect size, N is the total sample size, and df is the degrees of freedom. The effect size w is defined as </p>
<p><img src="https://www.statmethods.net/stats/power/cohenw.png"></p>
<p>Cohen suggests that w values of 0.1, 0.3, and 0.5 represent small, medium, and large effect sizes respectively. </p>
<h2>Some Examples</h2>
<p><code>library(pwr)<br />
    <br />
    # For a one-way ANOVA comparing 5 groups, calculate the<br />
    # sample size needed in each group to obtain a power of<br />
    #
    0.80, when the effect size is moderate (0.25) and a<br />
    #
    significance level of 0.05 is employed.<br />
    <br />
    pwr.anova.test(k=5,f=.25,sig.level=.05,power=.8)<br />
    <br />
    # What is the power of a one-tailed t-test, with a<br />
    # significance level of 0.01, 25 people in each group, <br />
    # and an effect size equal to 0.75?<br />
    <br />
    pwr.t.test(n=25,d=0.75,sig.level=.01,alternative=&quot;greater&quot;)<br />
    <br />
    # Using a two-tailed test proportions, and assuming a<br />
    #
    significance level of 0.01 and a common sample size of <br />
    #
    30 for each
    proportion, what effect size can be detected <br />
    #
    with a power of .75? <br />
    <br />
    pwr.2p.test(n=30,sig.level=0.01,power=0.75) </code></p>
<h2>Creating Power or Sample Size Plots </h2>
<p>The functions in the <a href="http://cran.r-project.org/web/packages/pwr/index.html">pwr</a> package can be used to generate power and sample size graphs. </p>
<p><code># Plot sample size curves for detecting correlations of<br />
    # various sizes.<br />
    <br />
    library(pwr)<br />
    <br />
    # range of correlations<br />
    r &lt;- seq(.1,.5,.01)<br />
    nr &lt;- length(r)<br />
    <br />
    # power values<br />
    p &lt;- seq(.4,.9,.1)<br />
    np &lt;- length(p)<br />
    <br />
    # obtain sample sizes<br />
    samsize &lt;- array(numeric(nr*np), dim=c(nr,np))<br />
    for (i in 1:np){<br />
    &nbsp;&nbsp;for (j in 1:nr){<br />
    &nbsp;&nbsp;&nbsp;&nbsp;result &lt;- pwr.r.test(n = NULL, r = r[j],<br />
    &nbsp;&nbsp;&nbsp;&nbsp;sig.level = .05, power = p[i],<br />
    &nbsp;&nbsp;&nbsp;&nbsp;alternative = &quot;two.sided&quot;)<br />
    &nbsp;&nbsp;&nbsp;&nbsp;samsize[j,i] &lt;- ceiling(result$n)<br />
    &nbsp;&nbsp;}<br />
    }<br />
    <br />
    # set up graph<br />
    xrange &lt;- range(r)<br />
    yrange &lt;- round(range(samsize))<br />
    colors &lt;- rainbow(length(p))<br />
    plot(xrange, yrange, type=&quot;n&quot;,<br />
    &nbsp;&nbsp;xlab=&quot;Correlation Coefficient (r)&quot;,<br />
    &nbsp;&nbsp;ylab=&quot;Sample Size (n)&quot; )<br />
    <br />
    # add power curves<br />
    for (i in 1:np){<br />
    &nbsp;&nbsp;lines(r, samsize[,i], type=&quot;l&quot;, lwd=2, col=colors[i])<br />
    }<br />
    <br />
    # add annotation (grid lines, title, legend) <br />
    abline(v=0, h=seq(0,yrange[2],50), lty=2, col=&quot;grey89&quot;)<br />
    abline(h=0, v=seq(xrange[1],xrange[2],.02), lty=2,<br />
    &nbsp;&nbsp; col=&quot;grey89&quot;)<br />
    title(&quot;Sample Size Estimation for Correlation Studies\n<br />
    &nbsp;&nbsp;Sig=0.05 (Two-tailed)&quot;)<br />
    legend(&quot;topright&quot;, title=&quot;Power&quot;,
    as.character(p),<br />
    &nbsp;&nbsp; fill=colors)</code></p>
<p><a href="images/samplesize.png"><img src="https://www.statmethods.net/stats/power/smsamplesize.jpg"></a> click to view </p>

<p>There are two functions that can help write simpler and more efficient code.</p>
<h2>With</h2>
<p>The <strong>with( )</strong> function applys an expression to a dataset. It is similar to DATA= in SAS.</p>
<p><code># with(data, expression)<br />
    # example applying a t-test to a data frame mydata
    <br />
    with(mydata, t.test(y ~ group))</code></p>
<h2>By</h2>
<p>The <strong>by( )</strong> function applys a function to each level of a factor or factors. It is similar to BY processing in SAS. </p>
<p><code># by(data, factorlist, function)<br />
    # example obtain variable means separately for<br />
    # each level of byvar in data frame mydata <br />
    by(mydata, mydata$byvar, function(x) mean(x))</code></p>
<h2>To Practice </h2>
<p><a href="https://www.datacamp.com/courses/data-table-data-manipulation-r-tutorial">This data manipulation tutorial in R</a> includes excercises on using the by() function.</p>

<p>Generalized linear models are fit using the <strong>glm( )</strong> function. The form of the <strong>glm</strong> function is </p>
<p><strong>glm(</strong><em>formula</em><strong>, family=</strong><em>familytype</em><strong>(link=</strong><em>linkfunction</em><strong>), data=)</strong></p>
<table>
  <tr>
    <td>
      <strong>Family </strong></td>
    <td>
      <strong>Default Link Function </strong></td>
  </tr>
  <tr>
    <td>binomial</td>
    <td>(link = &quot;logit&quot;) </td>
  </tr>
  <tr>
    <td>gaussian</td>
    <td>(link = &quot;identity&quot;) </td>
  </tr>
  <tr>
    <td>Gamma </td>
    <td>(link = &quot;inverse&quot;)</td>
  </tr>
  <tr>
    <td>inverse.gaussian</td>
    <td>(link = &quot;1/mu^2&quot;) </td>
  </tr>
  <tr>
    <td>poisson</td>
    <td>(link = &quot;log&quot;)</td>
  </tr>
  <tr>
    <td> quasi </td>
    <td>(link = &quot;identity&quot;, variance = &quot;constant&quot;)</td>
  </tr>
  <tr>
    <td>quasibinomial</td>
    <td>(link = &quot;logit&quot;) </td>
  </tr>
  <tr>
    <td>quasipoisson</td>
    <td>(link = &quot;log&quot;)</td>
  </tr>
</table>
<p>See <strong>help(glm)</strong> for other modeling options. See <strong>help(family)</strong> for other allowable link functions for each family. Three subtypes of generalized linear models will be covered here: logistic regression, poisson regression, and survival analysis.</p>
<h2>Logistic Regression</h2>
<p>Logistic regression is useful when you are predicting a binary outcome from a set of continuous predictor variables. It is frequently preferred over <a href="discriminant.html">discriminant function</a> analysis because of its less restrictive assumptions.</p>
<p><code># Logistic Regression<br />
    # where F is a binary factor and <br />
    #
    x1-x3 are continuous predictors <br />
    fit &lt;- glm(F~x1+x2+x3,data=mydata,family=binomial())<br />
    summary(fit) # display results<br />
    confint(fit) # 95% CI for the coefficients<br />
    exp(coef(fit)) # exponentiated coefficients<br />
    exp(confint(fit)) # 95% CI for exponentiated coefficients<br />
    predict(fit, type=&quot;response&quot;) # predicted values<br />
    residuals(fit, type=&quot;deviance&quot;) # residuals
  </code></p>
<p>You can use <strong>anova(</strong><em>fit1</em><strong>,</strong><em>fit2</em><strong>, test=&quot;Chisq&quot;)</strong> to compare nested models. Additionally, <strong>cdplot(</strong><em>F</em><strong>~</strong><em>x</em><strong>, data=</strong><em>mydata</em><strong>)</strong> will display the conditional density plot of the binary outcome <em>F</em> on the continuous <em>x</em> variable. </p>
<p><a href="images/cdplot.jpg"><img src="https://www.statmethods.net/advstats/glm/smcdplot.jpg"></a> click to view </p>
<h2>Poisson Regression</h2>
<p>Poisson regression is useful when predicting an outcome variable representing counts from a set of continuous predictor variables.</p>
<p><code># Poisson Regression<br />
    # where count is a count and <br />
    #
    x1-x3 are continuous predictors
    <br />
    fit &lt;- glm(count ~ x1+x2+x3, data=mydata, family=poisson())<br />
    summary(fit) display results
  </code><br />
  If you have overdispersion (see if residual deviance is much larger than degrees of freedom), you may want to use <strong>quasipoisson()</strong> instead of <strong>poisson()</strong>.</p>
<h2>Survival Analysis</h2>
<p>Survival analysis (also called event history analysis or reliability analysis) covers a set of techniques for modeling the time to an event. Data may be <strong>right censored</strong> - the event may not have occured by the end of the study or we may have incomplete information on an observation but know that up to a certain time the event had not occured (e.g. the participant dropped out of study in week 10 but was alive at that time). </p>
<p>While generalized linear models are typically analyzed using the <strong>glm( ) </strong>function, survival analyis is typically carried out using functions from the <a href="http://cran.r-project.org/web/packages/survival/index.html">survival</a> package . The survival package can handle one and two sample problems, parametric accelerated failure models, and the Cox proportional hazards model. </p>
<p>Data are typically entered in the format <em>start time</em>, <em>stop time</em>, and <em>status</em> (1=event occured, 0=event did not occur). Alternatively, the data may be in the format <em>time to event</em> and <em>status</em> (1=event occured, 0=event did not occur). A status=0 indicates that the observation is right cencored. Data are bundled into a <strong>Surv object </strong>via the <strong>Surv( )</strong> function prior to further analyses. </p>
<p><strong>survfit( )</strong> is used to estimate a survival distribution for one or more groups.<br />
  <strong>survdiff( )</strong> tests for differences in survival distributions between two or more groups. <strong><br />
    coxph( )</strong> models the hazard function on a set of predictor variables. </p>
<p><code># Mayo Clinic Lung Cancer Data<br />
    library(survival)<br />
    <br />
    # learn about the dataset<br />
    help(lung)<br />
    <br />
    # create a Surv object
    <br />
    survobj &lt;- with(lung, Surv(time,status))<br />
    <br />
    # Plot survival distribution of the total sample<br />
    # Kaplan-Meier estimator
    <br />
    fit0 &lt;- survfit(survobj~1, data=lung)<br />
    summary(fit0)<br />
    plot(fit0, xlab=&quot;Survival Time in Days&quot;, <br />
    &nbsp;&nbsp; ylab=&quot;% Surviving&quot;, yscale=100,<br />
    &nbsp;&nbsp; main=&quot;Survival Distribution (Overall)&quot;) <br />
    <br />
    # Compare the survival distributions of men and women <br />
    fit1 &lt;- survfit(survobj~sex,data=lung)<br />
    <br />
    # plot the survival distributions by sex <br />
    plot(fit1, xlab=&quot;Survival Time in Days&quot;, <br />
    &nbsp; ylab=&quot;% Surviving&quot;, yscale=100, col=c(&quot;red&quot;,&quot;blue&quot;),<br />
    &nbsp;&nbsp;main=&quot;Survival Distributions by Gender&quot;) <br />
    &nbsp;&nbsp;legend(&quot;topright&quot;, title=&quot;Gender&quot;, c(&quot;Male&quot;, &quot;Female&quot;),<br />
    &nbsp; fill=c(&quot;red&quot;, &quot;blue&quot;))<br />
    <br />
    # test for difference between male and female <br />
    # survival curves (logrank test) <br />
    survdiff(survobj~sex, data=lung)
    <br />
    <br />
    # predict male survival from age and medical scores
    <br />
    MaleMod &lt;- coxph(survobj~age+ph.ecog+ph.karno+pat.karno,<br />
    &nbsp;&nbsp;data=lung, subset=sex==1)<br />
    <br />
    # display results <br />
    MaleMod<br />
    <br />
    # evaluate the proportional hazards assumption <br />
    cox.zph(MaleMod)
  </code></p>
<p><a href="images/survival1.png"><img src="https://www.statmethods.net/advstats/glm/smsurvival1.jpg"></a> <a href="images/survival2.png"><img src="https://www.statmethods.net/advstats/glm/smsurvival2.jpg"></a> click to view </p>
<p>See Thomas Lumley's <a href="http://cran.r-project.org/doc/Rnews/Rnews_2004-1.pdf">R news article</a> on the survival package for more information. Other good sources include Mai Zhou's <a href="https://www.r-project.org/doc/Rnews/Rnews_2004-1.pdf#page=26">Use R Software to do Survival Analysis and Simulation</a> and M. J. Crawley's chapter on <a href="http://www3.imperial.ac.uk/portal/pls/portallive/docs/1/1171928.PDF">Survival Analysis</a>. </p>
<h2>To Practice</h2>
<p>Try this <a href="https://campus.datacamp.com/courses/introduction-to-credit-risk-modeling-in-r/chapter-2-logistic-regression?ex=2">interactive exercise on basic logistic regression with R</a> using age as a predictor for credit risk.</p>

<p>The <strong>MASS</strong> package contains functions for performing linear<strong> </strong>and quadratic <strong><br />
  </strong>discriminant function analysis. Unless prior probabilities are specified, each assumes proportional prior probabilities (i.e., prior probabilities are based on sample sizes). In the examples below, <strong>lower case</strong> letters are numeric variables and <strong>upper case letters </strong>are categorical <a href="../input/datatypes.html">factors</a>. </p>
<h2>Linear Discriminant Function </h2>
<p><code> # Linear Discriminant Analysis with Jacknifed Prediction
    <br />
    library(MASS)<br />
    fit &lt;- lda(G ~ x1 + x2 + x3, data=mydata, <br />
    &nbsp;&nbsp; na.action=&quot;na.omit&quot;, CV=TRUE)<br />
    fit # show results
  </code></p>

<p>The code above performs an LDA, using listwise deletion of missing data. <strong>CV=TRUE </strong>generates jacknifed (i.e., leave one out) predictions. The code below assesses the accuracy of the prediction.</p>
<p><code># Assess the accuracy of the prediction<br />
    # percent correct for each category of G<br />
    ct &lt;- table(mydata$G, fit$class)<br />
    diag(prop.table(ct, 1))<br />
    # total percent correct<br />
    sum(diag(prop.table(ct)))</code></p>
<p><strong>lda()</strong> prints discriminant functions based on centered (not standardized) variables. The &quot;proportion of trace&quot; that is printed is the proportion of between-class variance that is explained by successive discriminant functions. No significance tests are produced. Refer to the section on <a href="../stats/anova.html">MANOVA</a> for such tests.</p>
<h2>Quadratic Discriminant Function</h2>
<p>To obtain a quadratic discriminant function use <strong>qda( )</strong> instead of <strong>lda( )</strong>. Quadratic discriminant function does not assume homogeneity of variance-covariance matrices.</p>
<p><code># Quadratic Discriminant Analysis with 3 groups applying <br />
    #
    resubstitution prediction and equal prior probabilities. <br />
    library(MASS)<br />
    fit &lt;- qda(G ~ x1 + x2 + x3 + x4, data=na.omit(mydata),<br />
    &nbsp;&nbsp;prior=c(1,1,1)/3))</code></p>
<p>Note the alternate way of specifying listwise deletion of missing data. Re-subsitution (using the same data to derive the functions and evaluate their prediction accuracy) is the default method unless CV=TRUE is specified. Re-substitution will be overly optimistic. </p>
<h2>Visualizing the Results</h2>
<p>You can plot each observation in the space of the first 2 linear discriminant functions using the following code. Points are identified with the group ID.</p>
<p><code># Scatter plot using the 1st two discriminant dimensions <br />
    plot(fit) # fit from lda</code></p>
<p><a href="images/lda1.jpg"><img src="https://www.statmethods.net/advstats/discriminant/smlda1.jpg"></a> click to view </p>
<p>The following code displays histograms and density plots for the observations in each group on the first linear discriminant dimension. There is one panel for each group and they all appear lined up on the same graph. </p>
<p><code># Panels of histograms and overlayed density plots<br />
    # for 1st discriminant function<br />
    plot(fit, dimen=1, type=&quot;both&quot;) # fit from lda
  </code></p>
<p><a href="images/lda2.jpg"><img src="https://www.statmethods.net/advstats/discriminant/smlda2.jpg"></a> click to view </p>
<p>The <strong>partimat( ) </strong>function in the <a href="http://cran.r-project.org/web/packages/klaR/index.html">klaR</a> package can display the results of a linear or quadratic classifications 2 variables at a time. </p>
<p><code># Exploratory Graph for LDA or QDA<br />
    library(klaR)<br />
    partimat(G~x1+x2+x3,data=mydata,method=&quot;lda&quot;)
  </code></p>
<p><a href="images/lda3.jpg"><img src="https://www.statmethods.net/advstats/discriminant/smlda3.jpg"></a> click to view </p>
<p>You can also produce a scatterplot matrix with color coding by group. </p>
<p><code># Scatterplot for 3 Group Problem <br />
    pairs(mydata[c(&quot;x1&quot;,&quot;x2&quot;,&quot;x3&quot;)], main=&quot;My Title &quot;, pch=22, <br />
    &nbsp;&nbsp; bg=c(&quot;red&quot;, &quot;yellow&quot;, &quot;blue&quot;)[unclass(mydata$G)]) </code></p>
<p><a href="images/lda4.jpg"><img src="https://www.statmethods.net/advstats/discriminant/smlda4.jpg"></a> click to view </p>
<h2>Test Assumptions</h2>
<p>See <a href="../stats/anovaAssumptions.html">(M)ANOVA Assumptions </a>for methods of evaluating multivariate normality and homogeneity of covariance matrices. </p>
<h2>To Practice</h2>
<p>To practice improving predictions, try the <a href="https://www.datacamp.com/community/open-courses/kaggle-tutorial-on-machine-learing-the-sinking-of-the-titanic"> Kaggle R Tutorial on Machine Learning</a></p>

<p>R has <a href="http://cran.r-project.org/web/views/TimeSeries.html">extensive facilities</a> for analyzing time series data. This section describes the creation of a time series, seasonal decomposition, modeling with exponential and ARIMA models, and forecasting with the <a href="http://cran.r-project.org/web/packages/forecast/index.html">forecast</a> package.</p>

<h2>Creating a time series</h2>
<p>The <strong>ts()</strong> function will convert a numeric vector into an R time series object. The format is <strong>ts(</strong><em>vector</em>,<strong> start=, end=, frequency=)</strong> where start and end are the times of the first and last observation and frequency is the number of observations per unit time (1=annual, 4=quartly, 12=monthly, etc.).</p>
<p><code># save a numeric vector containing 72 monthly observations<br>
    # from Jan 2009 to Dec 2014 as a time series object<br>
    myts &lt;- ts(myvector, start=c(2009, 1), end=c(2014, 12), frequency=12)
    <br><br>
    # subset the time series (June 2014 to December 2014)<br>
    myts2 &lt;- window(myts, start=c(2014, 6), end=c(2014, 12))
    <br><br>
    # plot series<br>
    plot(myts)</code></p>
<h2>Seasonal Decomposition</h2>
<p>A time series with additive trend, seasonal, and irregular components can be decomposed using the <strong>stl()</strong> function. Note that a series with multiplicative effects can often by transformed into series with additive effects through a log transformation (i.e., <em>newts</em> &lt;- <strong>log(</strong><em>myts</em><strong>)</strong>).</p>
<code>
  # Seasonal decomposition<br>
  fit &lt;- stl(myts, s.window="period")<br>
  plot(fit)<br>
  <br>
  # additional plots<br>
  monthplot(myts)<br>
  library(forecast)<br>
  seasonplot(myts)
</code>
<h2>Exponential Models</h2>
<p>Both the <strong>HoltWinters()</strong> function in the base installation, and the <strong>ets()</strong> function in the forecast package, can be used to fit exponential models.</p>
<code>
  # simple exponential - models level<br>
  fit &lt;- HoltWinters(myts, beta=FALSE, gamma=FALSE)<br>
  # double exponential - models level and trend<br>
  fit &lt;- HoltWinters(myts, gamma=FALSE)<br>
  # triple exponential - models level, trend, and seasonal components<br>
  fit &lt;- HoltWinters(myts)<br><br>
  # predictive accuracy<br>
  library(forecast)<br>
  accuracy(fit)<br><br>
  # predict next three future values<br>
  library(forecast)<br>
  forecast(fit, 3)<br>
  plot(forecast(fit, 3))
</code>
<h2>ARIMA Models</h2>
<p>The <strong>arima()</strong> function can be used to fit an autoregressive integrated moving averages model. Other useful functions include:</p>
<p>
  <table width="85%">
    <tr>
      <td>
<strong>lag(</strong><em>ts</em>, <em>k</em><strong>)</strong></td>
      <td>lagged version of time series, shifted back <em>k</em> observations</td>
    </tr>
    <tr>
      <td><strong>diff(</strong><em>ts</em>, <strong>differences=</strong><em>d</em><strong>)</strong></td>
      <td>difference the time series <em>d</em> times</td>
    </tr>
    <tr>
    <tr>
      <td><strong>ndiffs(</strong><em>ts</em><strong>)</strong></td>
      <td>Number of differences required to achieve stationarity (from the <a href="http://cran.r-project.org/web/packages/forecast/index.html">forecast</a> package)</td>
    </tr>
    <tr>
    <tr>
      <td><strong>acf(</strong><em>ts</em><strong>)</strong></td>
      <td>autocorrelation function</td>
    </tr>
    <tr>
    <tr>
      <td><strong>pacf(</strong><em>ts</em><strong>)</strong></td>
      <td>partial autocorrelation function</td>
    </tr>
    <tr>
    <tr>
      <td><strong>adf.test(</strong><em>ts</em><strong>)</strong></td>
      <td>Augemented Dickey-Fuller test. Rejecting the null hypothesis suggests that a time series is stationary (from the <a href="http://cran.r-project.org/web/packages/tseries/index.html">tseries</a> package)</td>
    </tr>
    <tr>
      <td><strong>Box.test(</strong><em>x</em>, <strong>type="Ljung-Box")</strong></td>
      <td>Pormanteau test that observations in vector or time series <em>x</em> are independent</td>
    </tr>
    <tr>
  </table>
</p>
<p>Note that the <a href="http://cran.r-project.org/web/packages/forecast/index.html">forecast</a> package has somewhat nicer versions of <strong>acf()</strong> and <strong>pacf()</strong> called <strong>Acf()</strong> and Pacf() respectively.</p>
<code>
  # fit an ARIMA model of order P, D, Q<br>
  fit &lt;- arima(myts, order=c(p, d, q)<br><br>

  # predictive accuracy<br>
  library(forecast)<br>
  accuracy(fit)<br><br>

  # predict next 5 observations<br>
  library(forecast)<br>
  forecast(fit, 5)<br>
  plot(forecast(fit, 5))
</code>

<h2>Automated Forecasting</h2>
<p>The <a href="http://cran.r-project.org/web/packages/forecast/index.html">forecast</a> package provides functions for the automatic selection of exponential and ARIMA models. The <strong>ets()</strong> function supports both additive and multiplicative models. The auto.arima() function can handle both seasonal and nonseasonal ARIMA models. Models are chosen to maximize one of several fit criteria.</p>
<code>
  library(forecast)<br>
  # Automated forecasting using an exponential model<br>
  fit &lt;- ets(myts)<br><br>
  # Automated forecasting using an ARIMA model<br>
  fit &lt;- auto.arima(myts)
</code>
<h2>Going Further</h2>
<p>
  There are many good online resources for learning time series analysis with R. These include <a href="http://a-little-book-of-r-for-time-series.readthedocs.org/en/latest/">A little book of R for time series</a> by Avril Chohlan and DataCamp's <a href="https://www.datacamp.com/courses/manipulating-time-series-data-in-r-with-xts-zoo">manipulating time series in R course</a> by Jeffrey Ryan.</p>

<p>This section covers principal components and factor analysis. The latter includes both exploratory and confirmatory methods.</p>
<h2>Principal Components</h2>
<p>The <strong>princomp( )</strong> function produces an unrotated principal component analysis. </p>
<p><code># Pricipal Components Analysis<br />
    # entering raw data and extracting PCs <br />
    #
    from the correlation matrix
    <br />
    fit &lt;- princomp(mydata, cor=TRUE)<br />
    summary(fit) # print variance accounted for <br />
    loadings(fit) # pc loadings <br />
    plot(fit,type=&quot;lines&quot;) # scree plot <br />
    fit$scores # the principal components<br />
    biplot(fit)
  </code></p>
<p><a href="images/screeplot.jpg"><img src="https://www.statmethods.net/advstats/factor/smscreeplot.jpg"></a> <a href="images/biplot.jpg"><img src="https://www.statmethods.net/advstats/factor/smbiplot.jpg"></a> click to view </p>
<p>Use <strong>cor=FALSE</strong> to base the principal components on the covariance matrix. Use the <strong>covmat=</strong> option to enter a correlation or covariance matrix directly. If entering a covariance matrix, include the option<strong> n.obs=.</strong></p>
<p>The <strong>principal( )</strong> function in the <a href="http://cran.r-project.org/web/packages/psych/index.html">psych</a> package can be used to extract and rotate principal components. </p>
<p><code># Varimax Rotated Principal Components<br />
    # retaining 5 components <br />
    library(psych)<br />
    fit &lt;- principal(mydata, nfactors=5, rotate=&quot;varimax&quot;)<br />
    fit # print results
  </code></p>
<p><em>mydata</em> can be a raw data matrix or a covariance matrix. Pairwise deletion of missing data is used. <strong>rotate </strong>can &quot;none&quot;, &quot;varimax&quot;, &quot;quatimax&quot;, &quot;promax&quot;, &quot;oblimin&quot;, &quot;simplimax&quot;, or &quot;cluster&quot;</p>
<h2>Exploratory Factor Analysis</h2>
<p>The <strong>factanal( )</strong> function produces maximum likelihood factor analysis. </p>
<p><code># Maximum Likelihood Factor Analysis<br />
    # entering raw data and extracting 3 factors, <br />
    #
    with varimax rotation
    <br />
    fit &lt;- factanal(mydata, 3, rotation=&quot;varimax&quot;)<br />
    print(fit, digits=2, cutoff=.3, sort=TRUE)<br />
    # plot factor 1 by factor 2 <br />
    load &lt;- fit$loadings[,1:2] <br />
    plot(load,type=&quot;n&quot;) # set up plot <br />
    text(load,labels=names(mydata),cex=.7) # add variable names </code></p>
<p><a href="images/efa.jpg"><img src="https://www.statmethods.net/advstats/factor/smefa.jpg"></a> click to view </p>
<p>The <strong>rotation=</strong> options include &quot;varimax&quot;, &quot;promax&quot;, and &quot;none&quot;. Add the option <strong>scores=</strong>&quot;regression&quot; or &quot;Bartlett&quot; to produce factor scores. Use the <strong>covmat=</strong> option to enter a correlation or covariance matrix directly. If entering a covariance matrix, include the option<strong> n.obs=.</strong></p>
<p>The <strong> factor.pa( ) function in the <a href="http://cran.r-project.org/web/packages/psych/index.html">psych</a> </strong>package offers a number of factor analysis related functions, including principal axis factoring. </p>
<p><code># Principal Axis Factor Analysis<br />
    library(psych)<br />
    fit &lt;- factor.pa(mydata, nfactors=3, rotation=&quot;varimax&quot;)<br />
    fit # print results
  </code></p>
<p><em>mydata</em> can be a raw data matrix or a covariance matrix. Pairwise deletion of missing data is used. Rotation can be &quot;varimax&quot; or &quot;promax&quot;. </p>

<h3>Determining the Number of Factors to Extract</h3>
<p>A crucial decision in exploratory factor analysis is how many factors to extract. The<a href="http://cran.r-project.org/web/packages/nFactors/index.html"> nFactors</a> package offer a suite of functions to aid in this decision. Details on this methodology can be found in a <a href="http://www.empowerstats.com/manuals/paper/scree.pdf#1">PowerPoint presentation</a> by Raiche, Riopel, and Blais. Of course, any factor solution must be interpretable to be useful. </p>
<p><code># Determine Number of Factors to Extract<br />
    library(nFactors)<br />
    ev &lt;- eigen(cor(mydata)) # get eigenvalues<br />
    ap &lt;- parallel(subject=nrow(mydata),var=ncol(mydata),<br />
    &nbsp;&nbsp;rep=100,cent=.05)<br />
    nS &lt;- nScree(x=ev$values, aparallel=ap$eigen$qevpea)<br />
    plotnScree(nS)
  </code></p>
<p><a href="images/nsScree.jpg"><img src="https://www.statmethods.net/advstats/factor/smnsScree.jpg"></a> click to view </p>

<h3>Going Further </h3>
<p>The<a href="http://cran.r-project.org/web/packages/FactoMineR/index.html"> FactoMineR</a> package offers a large number of additional functions for exploratory factor analysis. This includes the use of both quantitative and qualitative variables, as well as the inclusion of supplimentary variables and observations. Here is an example of the types of graphs that you can create with this package.</p>
<p><code># PCA Variable Factor Map <br />
    library(FactoMineR)<br />
    result &lt;- PCA(mydata) # graphs generated automatically
  </code></p>
<p><a href="images/factominer1.png"><img src="https://www.statmethods.net/advstats/factor/smfactominer1.jpg"></a> <a href="images/factominer2.png"><img src="https://www.statmethods.net/advstats/factor/smfactominer2.jpg"></a> click to view </p>
<p>Thye <a href="http://cran.r-project.org/web/packages/GPArotation/index.html">GPARotation</a> package offers a wealth of rotation options beyond varimax and promax.</p>
<h2>Structual Equation Modeling </h2>
<p><strong>Confirmatory Factor Analysis</strong> <strong>(CFA)</strong> is a subset of the much wider <strong>Structural Equation Modeling</strong> <strong>(SEM) </strong>methodology. SEM is provided in R via the <a href="http://cran.r-project.org/web/packages/sem/index.html">sem</a> package. Models are entered via RAM specification (similar to PROC CALIS in SAS). While sem is a comprehensive package, my recommendation is that if you are doing significant SEM work, you spring for a copy of <a href="http://www.spss.com/amos/">AMOS</a>. It can be much more user-friendly and creates more attractive and publication ready output. Having said that, here is a CFA example using sem.</p>
<p><img src="https://www.statmethods.net/advstats/factor/sem.gif">
  <p>Assume that we have six observered variables (X1, X2, ..., X6). We hypothesize that there are two unobserved latent factors (F1, F2) that underly the observed variables as described in this diagram. X1, X2, and X3 load on F1 (with loadings lam1, lam2, and lam3). X4, X5, and X6 load on F2 (with loadings lam4, lam5, and lam6). The double headed arrow indicates the covariance between the two latent factors (F1F2). e1 thru e6 represent the residual variances (variance in the observed variables not accounted for by the two latent factors). We set the variances of F1 and F2 equal to one so that the parameters will have a scale. This will result in F1F2 representing the correlation between the two latent factors. </p>
  <p>For <strong>sem</strong>, we need the covariance matrix of the observed variables - thus the <strong>cov( )</strong> statement in the code below. The CFA model is specified using the <strong>specify.model( ) </strong>function. The format is <em>arrow specification</em>, <em>parameter name</em>, <em>start value</em>. Choosing a start value of NA tells the program to choose a start value rather than supplying one yourself. Note that the variance of F1 and F2 are fixed at 1 (NA in the second column). The blank line is required to end the RAM specification. </p>
  <p><code># Simple CFA Model<br />
      library(sem)<br />
      mydata.cov &lt;- cov(mydata)<br />
      model.mydata &lt;- specify.model() <br />
      F1 -&gt; &nbsp;X1, lam1, NA<br />
      F1 -&gt; &nbsp;X2, lam2, NA <br />
      F1 -&gt; &nbsp;X3, lam3, NA <br />
      F2 -&gt; &nbsp;X4, lam4, NA <br />
      F2 -&gt; &nbsp;X5, lam5, NA <br />
      F2 -&gt; &nbsp;X6, lam6, NA <br />
      X1 &lt;-&gt; X1, e1, &nbsp;&nbsp;NA <br />
      X2 &lt;-&gt; X2, e2, &nbsp;&nbsp;NA <br />
      X3 &lt;-&gt; X3, e3, &nbsp;&nbsp;NA <br />
      X4 &lt;-&gt; X4, e4, &nbsp;&nbsp;NA <br />
      X5 &lt;-&gt; X5, e5, &nbsp;&nbsp;NA <br />
      X6 &lt;-&gt; X6, e6, &nbsp;&nbsp;NA <br />
      F1 &lt;-&gt; F1, NA, &nbsp;&nbsp;&nbsp;1 <br />
      F2 &lt;-&gt; F2, NA, &nbsp;&nbsp;&nbsp;1 <br />
      F1 &lt;-&gt; F2, F1F2, NA<br />
      <br />
      mydata.sem &lt;- sem(model.mydata, mydata.cov, nrow(mydata))<br />
      # print results (fit indices, paramters, hypothesis tests) <br />
      summary(mydata.sem)<br />
      # print standardized coefficients (loadings)
      <br />
      std.coef(mydata.sem)
    </code></p>
  <p>You can use the <strong>boot.sem( ) </strong>function to bootstrap the structual equation model. See <strong>help(boot.sem)</strong> for details. Additionally, the function <strong>mod.indices(</strong> <strong>)</strong> will produce modification indices. Using modification indices to improve model fit by respecifying the parameters moves you from a confirmatory to an exploratory analysis. </p>
  <p>For more information on <strong>sem</strong>, see <a href="http://socserv.mcmaster.ca/jfox/Misc/sem/SEM-paper.pdf">Structural Equation Modeling with the sem Package in R</a>, by John Fox. </p>
  <h2>To Practice</h2>
  <p>To practice improving predictions, try the <a href="https://www.datacamp.com/community/open-courses/kaggle-tutorial-on-machine-learing-the-sinking-of-the-titanic"> Kaggle R Tutorial on Machine Learning</a></p>

<p>Correspondence analysis provides a graphic method of exploring the relationship between variables in a contingency table. There are many options for correspondence analysis in R. I recommend the <strong><a href="http://cran.r-project.org/web/packages/ca/index.html">ca</a> </strong>package by <a href="http://www.jstatsoft.org/v20/i03/paper">Nenadic and Greenacre</a> because it supports supplimentary points, subset analyses, and comprehensive graphics. You can obtain the package <a href="http://www.jstatsoft.org/v20/i03/">here</a>. </p>
<p>Although <strong>ca</strong> can perform multiple correspondence analysis (more than two categorical variables), only simple correspondence analysis is covered here. See their <a href="http://www.jstatsoft.org/v20/i03/paper">article</a> for details on multiple CA. </p>
<h2>Simple Correspondence Analysis</h2>
<p>In the following example, <strong>A</strong> and <strong>B</strong> are categorical factors.</p>
<p><code># Correspondence Analysis<br />
    library(ca)<br />
    mytable &lt;- with(mydata, table(A,B)) # create a 2 way table<br />
    prop.table(mytable, 1) # row percentages<br />
    prop.table(mytable, 2) # column percentages<br />
    fit &lt;- ca(mytable)<br />
    print(fit) # basic results <br />
    summary(fit) # extended results <br />
    plot(fit) # symmetric map<br />
    plot(fit, mass = TRUE, contrib = &quot;absolute&quot;, map =<br />
    &nbsp;&nbsp; &quot;rowgreen&quot;, arrows = c(FALSE, TRUE)) # asymmetric map

  </code></p>
<p>The first graph is the standard symmetric representation of a simple correspondence analysis with rows and column represented by points.</p>
<p><a href="images/ca3.jpg"><img src="https://www.statmethods.net/advstats/ca/smca3.jpg"></a> click to view </p>
<p>Row points (column points) that are closer together have more similar column profiles (row profiles). Keep in mind that you can not interpret the distance between row and column points directly. </p>
<p>The second graph is asymmetric , with rows in the principal coordinates and columns in reconstructions of the standarized residuals. Additionally, mass is represented by points and columns are represented by arrows. Point intensity (shading) corresponds to the absolute contributions for the rows. This example is included to highlight some of the available options.</p>
<p><a href="images/ca4.jpg"><img src="https://www.statmethods.net/advstats/ca/smca4.jpg"></a> click to view </p>
<h2>Going Further</h2>
<p>Try this <a href="https://www.datacamp.com/courses/exploratory-data-analysis/">interactive course on exploratory data analysis.</a></p>

<p>R provides functions for both classical and nonmetric multidimensional scaling. Assume that we have N objects measured on p numeric variables. We want to represent the distances among the objects in a parsimonious (and visual) way (i.e., a lower k-dimensional space). </p>
<h2>Classical MDS</h2>
<p>You can perform a classical MDS using the <strong>cmdscale( )</strong> function. </p>
<p><code># Classical MDS<br />
    # N rows (objects) x p columns (variables)<br />
    # each row identified by a unique row name<br />
    <br />
    d &lt;- dist(mydata) # euclidean distances between the rows<br />
    fit &lt;- cmdscale(d,eig=TRUE, k=2) # k is the number of dim<br />
    fit # view results<br />
    <br />
    # plot solution <br />
    x &lt;- fit$points[,1]<br />
    y &lt;- fit$points[,2]<br />
    plot(x, y, xlab=&quot;Coordinate 1&quot;, ylab=&quot;Coordinate 2&quot;, <br />
    &nbsp;&nbsp;main=&quot;Metric MDS&quot;, type=&quot;n&quot;)<br />
    text(x, y, labels = row.names(mydata), cex=.7)
  </code></p>
<p><a href="images/mds1.jpg"><img src="https://www.statmethods.net/advstats/mds/smmds1.jpg"></a> click to view </p>
<h2>Nonmetric MDS </h2>
<p>Nonmetric MDS is performed using the<strong> isoMDS( ) </strong>function in the <strong>MASS </strong>package.</p>
<p><code># Nonmetric MDS<br />
    # N rows (objects) x p columns (variables)<br />
    # each row identified by a unique row name<br />
    <br />
    library(MASS)<br />
    d &lt;- dist(mydata) # euclidean distances between the rows<br />
    fit &lt;- isoMDS(d, k=2) # k is the number of dim<br />
    fit # view results<br />
    <br />
    # plot solution <br />
    x &lt;- fit$points[,1]<br />
    y &lt;- fit$points[,2]<br />
    plot(x, y, xlab=&quot;Coordinate 1&quot;, ylab=&quot;Coordinate 2&quot;, <br />
    &nbsp;&nbsp;main=&quot;Nonmetric MDS&quot;, type=&quot;n&quot;)<br />
    text(x, y, labels = row.names(mydata), cex=.7)
  </code></p>
<p><a href="images/mds2.jpg"><img src="https://www.statmethods.net/advstats/mds/smmds2.jpg"></a> click to view </p>
<h2>Individual Difference Scaling</h2>
<p>3-way or individual difference scaling can be completed using the <strong>indscal()</strong> function in the <a href="http://cran.r-project.org/web/packages/SensoMineR/index.html">SensoMineR</a> package. The <a href="http://cran.r-project.org/web/packages/smacof/index.html">smacof</a> package offers a three way analysis of individual differences based on stress minimization of means of majorization.</p>
<h2>To Practice</h2>
<p><a href="https://www.datacamp.com/courses/data-visualization-with-ggplot2-part-3">This tutorial on ggplot2</a> includes exercises on Distance matrices and Multi-Dimensional Scaling (MDS).</p>

<p>R has an <a href="http://wiki.math.yorku.ca/index.php/R:_Cluster_analysis">amazing variety </a>of functions for <a href="http://cran.cnr.berkeley.edu/web/views/Cluster.html">cluster analysis</a>. In this section, I will describe three of the many approaches: hierarchical agglomerative, partitioning, and model based. While there are no best solutions for the problem of determining the number of clusters to extract, several approaches are given below. </p>
<h2>Data Preparation </h2>
<p>Prior to clustering data, you may want to remove or estimate missing data and rescale variables for comparability.</p>
<p><code># Prepare Data<br />
    mydata &lt;- na.omit(mydata) # listwise deletion of missing<br />
    mydata &lt;- scale(mydata) # standardize variables
  </code></p>
<h2>Partitioning</h2>
<p><strong>K-means</strong> clustering is the most popular partitioning method. It requires the analyst to specify the number of clusters to extract. A plot of the within groups sum of squares by number of clusters extracted can help determine the appropriate number of clusters. The analyst looks for a bend in the plot similar to a scree test in factor analysis. See <a href="../about/books.html">Everitt &amp; Hothorn (pg. 251)</a>. </p>
<p><code># Determine number of clusters<br />
    wss &lt;- (nrow(mydata)-1)*sum(apply(mydata,2,var))<br />
    for (i in 2:15) wss[i] &lt;- sum(kmeans(mydata, <br />
    &nbsp;&nbsp; centers=i)$withinss)<br />
    plot(1:15, wss, type=&quot;b&quot;, xlab=&quot;Number of Clusters&quot;,<br />
    &nbsp;&nbsp;ylab=&quot;Within groups sum of squares&quot;) </code></p>
<p><code># K-Means Cluster Analysis<br />
    fit &lt;- kmeans(mydata, 5) # 5 cluster solution<br />
    # get cluster means <br />
    aggregate(mydata,by=list(fit$cluster),FUN=mean)<br />
    # append cluster assignment<br />
    mydata &lt;- data.frame(mydata, fit$cluster)
  </code></p>
<p>A robust version of<strong> K-means</strong> based on mediods can be invoked by using <strong>pam( ) </strong>instead of <strong>kmeans( )</strong>. The function <strong>pamk( )</strong> in the <strong><a href="http://cran.r-project.org/web/packages/fpc/index.html">fpc</a> </strong>package is a wrapper for pam that also prints the suggested number of clusters based on optimum average silhouette width. </p>
<h2>Hierarchical Agglomerative</h2>
<p>There are a wide range of hierarchical clustering approaches. I have had good luck with Ward's method described below. </p>
<p><code># Ward Hierarchical Clustering<br />
    d &lt;- dist(mydata,
    method = &quot;euclidean&quot;) # distance matrix<br />
    fit &lt;- hclust(d, method=&quot;ward&quot;)
    <br />
    plot(fit) # display dendogram<br />
    groups &lt;- cutree(fit, k=5) # cut tree into 5 clusters<br />
    # draw dendogram with red borders around the 5 clusters <br />
    rect.hclust(fit, k=5, border=&quot;red&quot;)
  </code></p>
<p><a href="images/cluster1.jpg"><img src="https://www.statmethods.net/advstats/cluster/smcluster1.jpg"></a> click to view </p>
<p>The <strong>pvclust( )</strong> function in the <a href="http://cran.r-project.org/web/packages/pvclust/index.html">pvclust</a> package provides p-values for hierarchical clustering based on multiscale bootstrap resampling. Clusters that are highly supported by the data will have large p values. Interpretation details are provided <a href="http://www.is.titech.ac.jp/~shimo/prog/pvclust/">Suzuki</a>. Be aware that <a href="http://cran.r-project.org/web/packages/pvclust/index.html">pvclust</a> clusters columns, not rows. Transpose your data before using. </p>
<p><code># Ward Hierarchical Clustering with Bootstrapped p values<br />
    library(pvclust)<br />
    fit &lt;-
    pvclust(mydata, method.hclust=&quot;ward&quot;,<br />
    &nbsp;&nbsp; method.dist=&quot;euclidean&quot;)<br />
    plot(fit) # dendogram with p values<br />
    # add rectangles around groups highly supported by the data<br />
    pvrect(fit, alpha=.95) </code></p>
<p><a href="images/cluster2.jpg"><img src="https://www.statmethods.net/advstats/cluster/smcluster2.jpg"></a> click to view </p>

<h2>Model Based </h2>
<p>Model based approaches assume a variety of data models and apply maximum likelihood estimation and Bayes criteria to identify the most likely model and number of clusters. Specifically, the <strong>Mclust( ) </strong>function in the <a href="http://cran.r-project.org/web/packages/mclust/index.html">mclust</a> package selects the optimal model according to BIC for EM initialized by hierarchical clustering for parameterized Gaussian mixture models. (phew!). One chooses the model and number of clusters with the largest BIC. See <a href="http://finzi.psych.upenn.edu/R/library/mclust/html/mclustModelNames.html">help(mclustModelNames)</a> to details on the model chosen as best. </p>
<p><code># Model Based Clustering<br />
    library(mclust)<br />
    fit &lt;- Mclust(mydata)<br />
    plot(fit) # plot results
    <br />
    summary(fit) # display the best model </code></p>
<p><a href="images/cluster3.jpg"><img src="https://www.statmethods.net/advstats/cluster/smcluster3.jpg"></a> <a href="images/cluster4.jpg"><img src="https://www.statmethods.net/advstats/cluster/smcluster4.jpg"></a> click to view </p>
<h2>Plotting Cluster Solutions </h2>
<p>It is always a good idea to look at the cluster results.</p>
<p><code># K-Means Clustering with 5 clusters<br />
    fit &lt;- kmeans(mydata, 5)<br />
    <br />
    # Cluster Plot against 1st 2 principal components<br />
    <br />
    # vary parameters for most readable graph<br />
    library(cluster)
    <br />
    clusplot(mydata, fit$cluster, color=TRUE, shade=TRUE, <br />
    &nbsp;&nbsp; labels=2, lines=0)<br />
    <br />
    # Centroid Plot against 1st 2 discriminant functions<br />
    library(fpc)<br />
    plotcluster(mydata, fit$cluster)
  </code></p>
<p><a href="images/cluster5.jpg"><img src="https://www.statmethods.net/advstats/cluster/smcluster5.jpg"></a> <a href="images/cluster6.jpg"><img src="https://www.statmethods.net/advstats/cluster/smcluster6.jpg"></a> click to view </p>
<h2>Validating cluster solutions</h2>
<p> The function <strong>cluster.stats() </strong>in the <a href="http://cran.r-project.org/web/packages/fpc/index.html">fpc</a> package provides a mechanism for comparing the similarity of two cluster solutions using a variety of validation criteria (Hubert's gamma coefficient, the Dunn index and the corrected rand index) </p>
<p><code># comparing 2 cluster solutions<br />
    library(fpc)<br />
    cluster.stats(d, fit1$cluster, fit2$cluster)
  </code></p>
<p>where <strong>d </strong>is a distance matrix among objects, and <strong>fit1$cluster</strong> and <strong>fit$cluste</strong>r are integer vectors containing classification results from two different clusterings of the same data.
</p>
<h2>To Practice</h2>
<p>Try the clustering exercise <a href="https://www.datacamp.com/courses/introduction-to-machine-learning-with-r"> in this introduction to machine learning course.</a></p>

<p>Recursive partitioning is a fundamental tool in data mining. It helps us explore the stucture of a set of data, while developing easy to visualize decision rules for predicting a categorical (classification tree) or continuous (regression tree) outcome. This section briefly describes CART modeling, conditional inference trees, and random forests.</p>
<h2>CART Modeling via rpart </h2>
<p>Classification and regression trees (as described by Brieman, Freidman, Olshen, and Stone) can be generated through the <a href="http://cran.r-project.org/web/packages/rpart/index.html">rpart</a> package. Detailed information on rpart is available in <a href="http://www.mayo.edu/hsr/techrpt/61.pdf">An Introduction to Recursive Partitioning
    Using the RPART Routines</a>. The general steps are provided below followed by two examples. </p>
<h3>1. Grow the Tree </h3>
<p>To grow a tree, use<br />
  <strong>rpart(</strong><em>formula</em>, <strong>data=</strong>, <strong>method=,control=)</strong> where</p>
<p>
  <table width="85%">
    <tr>
      <td>
<strong><em>formula</em></strong></td>
      <td>is in the format <em><br />
  outcome</em> ~ <em>predictor1</em>+<em>predictor2</em>+<em>predictor3</em>+ect.</td>
    </tr>
    <tr>
      <td><strong>data=</strong></td>
      <td>specifies the data frame</td>
    </tr>
    <tr>
      <td><strong>method=</strong></td>
      <td><strong>&quot;class&quot;</strong> for a classification tree <strong><br />
  &quot;anova&quot;</strong> for a regression tree </td>
    </tr>
    <tr>
      <td><strong>control=</strong></td>
      <td>optional parameters for controlling tree growth. For example, control=rpart.control(minsplit=30, cp=0.001) requires that the minimum number of observations in a node be 30 before attempting a split and that a split must decrease the overall lack of fit by a factor of 0.001 (cost complexity factor) before being attempted. </td>
    </tr>
  </table>
</p>
<h3>2. Examine the results </h3>
<p>The following functions help us to examine the results.</p>
<table width="85%">
  <tr>
    <td><strong>printcp(</strong><em>fit</em><strong>) </strong></td>
    <td>display cp table </td>
  </tr>
  <tr>
    <td><strong>plotcp(</strong><em>fit</em><strong>) </strong></td>
    <td>plot cross-validation results</td>
  </tr>
  <tr>
    <td><strong>rsq.rpart(</strong><em>fit</em><strong>)</strong></td>
    <td>plot approximate R-squared and relative error for different splits (2 plots). labels are only appropriate for the &quot;anova&quot; method. </td>
  </tr>
  <tr>
    <td><strong>print(</strong><em>fit</em><strong>) </strong></td>
    <td>print results </td>
  </tr>
  <tr>
    <td><strong>summary(</strong><em>fit</em><strong>)</strong></td>
    <td>detailed results including surrogate splits </td>
  </tr>
  <tr>
    <td><strong>plot(</strong><em>fit</em><strong>) </strong></td>
    <td>plot decision tree </td>
  </tr>
  <tr>
    <td><strong>text(</strong><em>fit</em><strong>) </strong></td>
    <td>label the decision tree plot </td>
  </tr>
  <tr>
    <td><strong>post(</strong><em>fit</em>, <strong>file=)</strong> </td>
    <td>create postscript plot of decision tree </td>
  </tr>
</table>
<p>
  In trees created by <strong>rpart( )</strong>, move to the <strong>LEFT</strong> branch when the stated condition is true (see the graphs below).</p>
<h3>3. prune tree</h3>
<p>Prune back the tree to avoid overfitting the data. Typically, you will want to select a tree size that minimizes the cross-validated error, the <strong>xerror </strong>column printed by <strong>printcp( )</strong>. </p>
<p>Prune the tree to the desired size using<br />
  <strong>prune(</strong><em>fit</em>, <strong>cp=</strong> <strong>) </strong></p>
<p>Specifically, use <strong>printcp( )</strong> to examine the cross-validated error results, select the complexity parameter associated with minimum error, and place it into the <strong>prune( )</strong> function. Alternatively, you can use the code fragment </p>
<p>&nbsp;&nbsp;&nbsp;<strong>&nbsp;&nbsp;fit$cptable[which.min(fit$cptable[,&quot;xerror&quot;]),&quot;CP&quot;]</strong></p>
<p>to automatically select the complexity parameter associated with the smallest cross-validated error. Thanks to <a href="../about/books.html">HSAUR</a> for this idea. </p>
<h3>Classification Tree example </h3>
<p>Let's use the data frame <strong>kyphosis</strong> to predict a type of deformation (kyphosis) after surgery, from age in months (Age), number of vertebrae involved (Number), and the highest vertebrae operated on (Start).</p>
<p> <code># Classification Tree with rpart<br />
    library(rpart)<br />
    <br />
    # grow tree <br />
    fit &lt;- rpart(Kyphosis ~ Age + Number + Start,<br />
    &nbsp;&nbsp; method=&quot;class&quot;, data=kyphosis)<br />
    <br />
    printcp(fit) # display the results <br />
    plotcp(fit) # visualize cross-validation results <br />
    summary(fit) # detailed summary of splits<br />
    <br />
    # plot tree <br />
    plot(fit, uniform=TRUE, <br />
    &nbsp;&nbsp; main=&quot;Classification Tree for Kyphosis&quot;)<br />
    text(fit, use.n=TRUE, all=TRUE, cex=.8)<br />
    <br />
    # create attractive postscript plot of tree <br />
    post(fit, file = &quot;c:/tree.ps&quot;, <br />
    &nbsp;&nbsp; title = &quot;Classification Tree for Kyphosis&quot;)</code></p>
<p><a href="images/cpPlot.png"><img src="https://www.statmethods.net/advstats/cart/smcpPlot.jpg"></a> <a href="images/ctree.png"><img src="https://www.statmethods.net/advstats/cart/smctree.jpg"></a> <a href="images/tree.pdf"><img src="https://www.statmethods.net/advstats/cart/smtree.jpg"></a> click to view </p>
<p><code>
    # prune the tree <br />
    pfit&lt;- prune(fit, cp= &nbsp;&nbsp;fit$cptable[which.min(fit$cptable[,&quot;xerror&quot;]),&quot;CP&quot;])<br />
    <br />
    # plot the pruned tree <br />
    plot(pfit, uniform=TRUE, <br />
    &nbsp;&nbsp; main=&quot;Pruned Classification Tree for Kyphosis&quot;)<br />
    text(pfit, use.n=TRUE, all=TRUE, cex=.8)<br />
    post(pfit, file = &quot;c:/ptree.ps&quot;, <br />
    &nbsp;&nbsp; title = &quot;Pruned Classification Tree for Kyphosis&quot;)</code></p>
<p><a href="images/pctree.png"><img src="https://www.statmethods.net/advstats/cart/smpctree.jpg"></a> <a href="images/ptree.pdf"><img src="https://www.statmethods.net/advstats/cart/smptree.jpg"></a> click to view </p>
<h3>Regression Tree example</h3>
<p>In this example we will predict car mileage from price, country, reliability, and car type. The data frame is <strong>cu.summary</strong>. </p>
<p><code># Regression Tree Example<br />
    library(rpart)<br />
    <br />
    # grow tree <br />
    fit &lt;- rpart(Mileage~Price + Country + Reliability + Type, <br />
    &nbsp;&nbsp; method=&quot;anova&quot;, data=cu.summary)<br />
    <br />
    printcp(fit) # display the results <br />
    plotcp(fit) # visualize cross-validation results
    <br />
    summary(fit) # detailed summary of splits<br />
    <br />
    # create additional plots
    <br />
    par(mfrow=c(1,2)) # two plots on one page
    <br />
    rsq.rpart(fit) # visualize cross-validation results
    &nbsp; <br />
    <br />
    # plot tree <br />
    plot(fit, uniform=TRUE, <br />
    &nbsp;&nbsp; main=&quot;Regression Tree for Mileage &quot;)<br />
    text(fit, use.n=TRUE, all=TRUE, cex=.8)<br />
    <br />
    # create attractive postcript plot of tree <br />
    post(fit, file = &quot;c:/tree2.ps&quot;, <br />
    &nbsp;&nbsp; title = &quot;Regression Tree for Mileage &quot;)</code></p>
<p> <a href="images/plotCP2.png"><img src="https://www.statmethods.net/advstats/cart/smplotCP2.jpg"></a> <a href="images/rsqplot.png"><img src="https://www.statmethods.net/advstats/cart/smrsqplot.jpg"></a><a href="images/rtree.png"><img src="https://www.statmethods.net/advstats/cart/smrtree.jpg"></a></a> <a href="images/tree2.pdf"><img src="https://www.statmethods.net/advstats/cart/smtree2.jpg"></a> click to view </p>
<p><code># prune the tree <br />
    pfit&lt;- prune(fit, cp=0.01160389) # from cptable &nbsp;&nbsp;<br />
    <br />
    # plot the pruned tree <br />
    plot(pfit, uniform=TRUE, <br />
    &nbsp;&nbsp; main=&quot;Pruned Regression Tree for Mileage&quot;)<br />
    text(pfit, use.n=TRUE, all=TRUE, cex=.8)<br />
    post(pfit, file = &quot;c:/ptree2.ps&quot;, <br />
    &nbsp;&nbsp; title = &quot;Pruned Regression Tree for Mileage&quot;)</code></p>
<p>It turns out that this produces the same tree as the original. </p>
<h2>Conditional inference trees via party </h2>
<p>The <a href="http://cran.r-project.org/web/packages/party/index.html">party</a> package provides nonparametric regression trees for nominal, ordinal, numeric, censored, and multivariate responses. <a href="http://cran.r-project.org/web/packages/party/vignettes/party.pdf">party: A laboratory for recursive partitioning</a>, provides details. </p>
<p>You can create a regression or classification tree via the function</p>
<p><strong>ctree(</strong><em>formula</em>, <strong>data=)</strong><br />
  The type of tree created will depend on the outcome variable (nominal factor, ordered factor, numeric, etc.). Tree growth is based on statistical stopping rules, so pruning should not be required. </p>
<p>The previous two examples are re-analyzed below. </p>
<p><code># Conditional Inference Tree for Kyphosis<br />
    library(party)<br />
    fit &lt;- ctree(Kyphosis ~ Age + Number + Start, <br />
    &nbsp;&nbsp; data=kyphosis)<br />
    plot(fit, main=&quot;Conditional Inference Tree for Kyphosis&quot;)</code></p>
<p><a href="images/citree.png"><img src="https://www.statmethods.net/advstats/cart/smcitree.jpg"></a> click to view </p>
<p><code># Conditional Inference Tree for Mileage<br />
    library(party)<br />
    fit2 &lt;- ctree(Mileage~Price + Country + Reliability + Type, <br />
    &nbsp;&nbsp; data=na.omit(cu.summary))</code></p>
<p><a href="images/citree2.png"><img src="https://www.statmethods.net/advstats/cart/smcitree2.jpg"></a> click to view</p>
<h2>Random Forests </h2>
<p>Random forests improve predictive accuracy by generating a large number of bootstrapped trees (based on random samples of variables), classifying a case using each tree in this new &quot;forest&quot;, and deciding a final predicted outcome by combining the results across all of the trees (an average in regression, a majority vote in classification). Breiman and Cutler's random forest approach is implimented via the <a href="http://cran.r-project.org/web/packages/randomForest/index.html">randomForest</a> package. </p>
<p>Here is an example.</p>
<p><code># Random Forest prediction of Kyphosis data<br />
    library(randomForest)<br />
    fit &lt;- randomForest(Kyphosis ~ Age + Number + Start, &nbsp;&nbsp;data=kyphosis)<br />
    print(fit) # view results
    <br />
    importance(fit) # importance of each predictor </code></p>
<p>For more details see the comprehensive <a href="https://www.stat.berkeley.edu/~breiman/RandomForests/">Random Forest website</a>. </p>
<h2>Going Further</h2>
<p>This section has only touched on the options available. To learn more, see the CRAN Task View on <a href="http://cran.r-project.org/web/views/MachineLearning.html">Machine &amp; Statistical Learning</a>. </p>
<h2>To Practice</h2>
<p>Try <a href="https://www.datacamp.com/community/open-courses/kaggle-tutorial-on-machine-learing-the-sinking-of-the-titanic"> the Kaggle R Tutorial on Machine Learning</a> which includes an exercise with Random Forests.</p>

<h2>Nonparametric Bootstrapping </h2>
<p>The <a href="http://cran.r-project.org/web/packages/boot/index.html">boot</a> package provides extensive facilities for bootstrapping and related resampling methods. You can bootstrap a single statistic (e.g. a median), or a vector (e.g., regression weights). This section will get you started with basic nonparametric bootstrapping.</p>
<p>The main bootstrapping function is <strong>boot( ) </strong>and has the following format:</p>
<p><strong><em>bootobject</em> &lt;- boot(data= , statistic= , R=, ...) </strong>where</p>
<table width="85%">
  <tr>
    <td><strong>parameter</strong></td>
    <td><strong>description</strong></td>
  </tr>
  <tr>
    <td><strong>data</strong></td>
    <td>A vector, matrix, or data frame </td>
  </tr>
  <tr>
    <td><strong>statistic</strong></td>
    <td>A function that produces the k statistics to be bootstrapped (k=1 if bootstrapping a single statistic). <br />
      The function should include an <em>indices parameter</em> that the <strong>boot()</strong> function can use to select cases for each replication (see examples below). </td>
  </tr>
  <tr>
    <td>R</td>
    <td>Number of bootstrap replicates </td>
  </tr>
  <tr>
    <td><strong>...</strong></td>
    <td>Additional parameters to be passed to the function that produces the statistic of interest </td>
  </tr>
</table>
<p><strong>boot( )</strong> calls the statistic function <em>R</em> times. Each time, it generates a set of random indices, with replacement, from the integers 1:nrow(<em>data</em>). These indices are used within the statistic function to select a sample. The statistics are calculated on the sample and the results are accumulated in the <em>bootobject</em>. The <em>bootobject</em> structure includes</p>
<table width="85%">
  <tr>
    <td><strong>element</strong></td>
    <td><strong>description</strong></td>
  </tr>
  <tr>
    <td><strong>t0</strong></td>
    <td>The observed values of k statistics applied to the orginal data. </td>
  </tr>
  <tr>
    <td><strong>t</strong></td>
    <td>An R x k matrix where each row is a bootstrap replicate of the k statistics. </td>
  </tr>
</table>
<p>You can access these as <em>bootobject</em>$t0 and <em>bootobject</em>$t.</p>
<p>Once you generate the bootstrap samples, <strong>print(</strong><em>bootobject</em><strong>)</strong> and <strong>plot(</strong><em>bootobject</em><strong>)</strong> can be used to examine the results. If the results look reasonable, you can use<strong> boot.ci(</strong><strong><em> </em>)</strong> function to obtain confidence intervals for the statistic(s). </p>
<p>The format is</p>
<p> <strong>boot.ci(</strong><em>bootobject, </em><strong>conf=, type=</strong> <strong> )</strong> where</p>
<p>
  <table width="85%">
    <tr>
      <td><strong>parameter</strong></td>
      <td><strong>description</strong></td>
    </tr>
    <tr>
      <td><strong><em>bootobject</em></strong></td>
      <td>The object returned by the boot function</td>
    </tr>
    <tr>
      <td><strong>conf</strong></td>
      <td>The desired confidence interval (default: conf=0.95)</td>
    </tr>
    <tr>
      <td><strong>type</strong></td>
      <td>The type of confidence interval returned. Possible values are &quot;norm&quot;, &quot;basic&quot;, &quot;stud&quot;, &quot;perc&quot;, &quot;bca&quot; and &quot;all&quot; (default: type=&quot;all&quot;)</td>
    </tr>
  </table>
</p>
<h3>Bootstrapping a Single Statistic (k=1) </h3>
<p>The following example generates the bootstrapped 95% confidence interval for R-squared in the linear regression of miles per gallon (mpg) on car weight (wt) and displacement (disp). The data source is mtcars. The bootstrapped confidence interval is based on 1000 replications. </p>
<p><code># Bootstrap 95% CI for R-Squared<br />
    library(boot)<br />
    # function to obtain R-Squared from the data <br />
    rsq &lt;- function(formula, data, indices)
    {<br />
    &nbsp;&nbsp;d &lt;- data[indices,] # allows boot to select sample <br />
    &nbsp;&nbsp;fit &lt;- lm(formula, data=d)<br />
    &nbsp; return(summary(fit)$r.square)<br />
    }
    <br />
    # bootstrapping with 1000 replications <br />
    results &lt;- boot(data=mtcars, statistic=rsq, <br />
    &nbsp;&nbsp; R=1000, formula=mpg~wt+disp)<br />
    <br />

    # view results<br />
    results
    <br />
    plot(results)<br />

    <br />
    # get 95% confidence interval <br />
    boot.ci(results, type=&quot;bca&quot;)</code></p>
<p><a href="images/bootstrap.png"><img src="https://www.statmethods.net/advstats/bootstrapping/smbootstrap.jpg"></a> click to view </p>
<h3>Bootstrapping several Statistics (k&gt;1) </h3>
<p>In example above, the function rsq returned a number and boot.ci returned a single confidence interval. The statistics function you provide can also return a vector. In the next example we get the 95% CI for the three model regression coefficients (intercept, car weight, displacement). In this case we add an index parameter to <strong>plot( ) and boot.ci( )</strong> to indicate which column in <em>bootobject</em>$t is to analyzed. </p>
<p><code># Bootstrap 95% CI for regression coefficients <br />
    library(boot)<br />
    # function to obtain regression weights
    <br />
    bs &lt;- function(formula, data, indices)
    {<br />
    &nbsp;&nbsp;d &lt;- data[indices,] # allows boot to select sample <br />
    &nbsp;&nbsp;fit &lt;- lm(formula, data=d)<br />
    &nbsp;&nbsp;return(coef(fit))
    <br />
    }
    <br />
    # bootstrapping with 1000 replications <br />
    results &lt;- boot(data=mtcars, statistic=bs, <br />
    &nbsp;&nbsp; R=1000, formula=mpg~wt+disp)<br />
    <br />
    # view results<br />
    results<br />
    plot(results, index=1) # intercept <br />
    plot(results, index=2) # wt <br />
    plot(results, index=3) # disp
    <br />
    <br />
    # get 95% confidence intervals <br />
    boot.ci(results, type=&quot;bca&quot;, index=1)
    # intercept <br />
    boot.ci(results, type=&quot;bca&quot;, index=2)
    # wt <br />
    boot.ci(results, type=&quot;bca&quot;, index=3)
    # disp </code></p>
<p><a href="images/bootstrap2.png"><img src="https://www.statmethods.net/advstats/bootstrapping/smbootstrap2.jpg"></a> <a href="images/bootstrap3.png"><img src="https://www.statmethods.net/advstats/bootstrapping/smbootstrap3.jpg"></a> <a href="images/bootstrap4.png"><img src="https://www.statmethods.net/advstats/bootstrapping/smbootstrap4.jpg"></a> click to view </p>
<h2>Going Further</h2>
<p>The <strong>boot( )</strong> function can generate both nonparametric and parametric resampling. For the nonparametric bootstrap, resampling methods include ordinary, balanced, antithetic and permutation. For the nonparametric bootstrap, stratified resampling is supported. Importance resampling weights can also be specified. </p>
<p>The <strong>boot.ci( ) </strong>function takes a bootobject and generates 5 different types of two-sided nonparametric confidence intervals. These include the first order normal approximation, the basic bootstrap interval, the studentized bootstrap interval, the bootstrap percentile interval, and the adjusted bootstrap percentile (BCa) interval. </p>
<p>Look at <strong>help(boot)</strong>, <strong>help(boot.ci)</strong>, and <strong>help(plot.boot) </strong>for more details. </p>
<h2>Learning More</h2>
<p>Good sources of information include <a href="http://cran.r-project.org/doc/Rnews/Rnews_2002-3.pdf">Resampling Methods in R: The boot Package</a> by Angelo Canty, <a href="http://www.mayin.org/ajayshah/KB/R/documents/boot.html">Getting started with the boot package</a> by Ajay Shah, <a href="http://cran.r-project.org/doc/contrib/Fox-Companion/appendix-bootstrapping.pdf">Bootstrapping Regression Models </a>by John Fox, and <a href="http://statwww.epfl.ch/davison/BMA/">Bootstrap Methods and Their Applications</a> by Davison and Hinkley. </p>
<h2>To Practice</h2>
<p>Try this <a href="https://campus.datacamp.com/courses/computational-finance-and-financial-econometrics-with-r/lab-6-constant-expected-return-model?ex=10/">interactive exercise with the boot package</a> from DataCamp's Intro to Computational Finance with R course.</p>

<p>Most of the methods on this website actually describe the programming of matrices. It is built deeply into the R language. This section will simply cover operators and functions specifically suited to linear algebra. Before proceeding you many want to review the sections on <a href="../input/datatypes.html">Data Types </a>and <a href="../management/operators.html">Operators</a>. </p>
<h2>Matrix facilites </h2>
<p>In the following examples, <strong>A</strong> and <strong>B</strong> are matrices and<strong> x</strong> and <strong>b </strong>are a vectors.</p>
<p>
  <table>
    <tr>
      <td><strong>Operator or Function</strong></td>
      <td><strong>Description</strong></td>
    </tr>
    <tr>
      <td><strong>A * B
</strong></td>
      <td>Element-wise multiplication</td>
    </tr>
    <tr>
      <td><strong>A %*% B</strong> </td>
      <td>Matrix multiplication </td>
    </tr>
    <tr>
      <td><strong>A %o% B </strong></td>
      <td>Outer product.<strong> AB' </strong></td>
    </tr>

    <tr>
      <td><strong>crossprod(A,B)<br />
  crossprod(A)</strong></td>
      <td><strong>A'B</strong> and <strong>A'A </strong>respectively. </td>
    </tr>
    <tr>
      <td><strong>t(A) </strong></td>
      <td>Transpose</td>
    </tr>
    <tr>
      <td><strong>diag(x)</strong></td>
      <td>Creates diagonal matrix with elements of <strong>x</strong> in the principal diagonal </td>
    </tr>
    <tr>
      <td><strong>diag(A)</strong></td>
      <td>Returns a vector containing the elements of the principal diagonal </td>
    </tr>
    <tr>
      <td><strong>diag(k)</strong></td>
      <td>If k is a scalar, this creates a k x k identity matrix. Go figure. </td>
    </tr>
    <tr>
      <td><strong>solve(A, b)</strong> </td>
      <td>Returns vector <strong>x</strong> in the equation <strong>b = Ax </strong>(i.e., <strong>A<sup>-1</sup>b</strong>) </td>
    </tr>
    <tr>
      <td><strong>solve(A)</strong></td>
      <td>Inverse of <strong>A</strong> where A is a square matrix. </td>
    </tr>
    <tr>
      <td><strong>ginv(A)</strong></td>
      <td>Moore-Penrose Generalized Inverse of <strong>A</strong>. <br />
ginv(A) requires loading the<strong> MASS</strong> package. </td>
    </tr>
    <tr>
      <td><strong>y&lt;-eigen(A)</strong></td>
      <td><strong>y$val </strong>are the eigenvalues of <strong>A</strong><br />
<strong>y$vec</strong> are the eigenvectors of <strong>A</strong> </td>
    </tr>
    <tr>
      <td><strong>y&lt;-svd(A)</strong></td>
      <td>Single value decomposition of<strong> A</strong>.<br />
<strong>y$d</strong> = vector containing the singular values of <strong>A<br />
  y$u</strong> = matrix with columns contain the left singular vectors of <strong>A</strong> <br />
<strong>y$v </strong>= matrix with columns contain the right singular vectors of <strong>A</strong> </td>
    </tr>
    <tr>
      <td><strong>R &lt;- chol(A)</strong></td>
      <td>Choleski factorization of <strong>A</strong>. Returns the upper triangular factor, such that <strong>R'R = A</strong>.</td>
    </tr>
    <tr>
      <td><strong>y &lt;- qr(A) </strong></td>
      <td>QR decomposition of <strong>A</strong>. <br />
<strong>y$qr </strong>has an upper triangle that contains the decomposition and a lower triangle that contains information on the Q decomposition.<br />
<strong> y$rank</strong> is the rank of A. <br />
<strong>y$qraux</strong> a vector which contains additional information on Q. <br />
<strong>y$pivot</strong> contains information on the pivoting strategy used. </td>
    </tr>
    <tr>
      <td><strong>cbind(A,B,...)</strong></td>
      <td>Combine matrices(vectors) horizontally. Returns a matrix. </td>
    </tr>
    <tr>
      <td><strong>rbind(A,B,...)</strong></td>
      <td>Combine matrices(vectors) vertically. Returns a matrix. </td>
    </tr>
    <tr>
      <td><strong>rowMeans(A)</strong></td>
      <td>Returns vector of row means.</td>
    </tr>
    <tr>
      <td><strong>rowSums(A)</strong></td>
      <td>Returns vector of row sums. </td>
    </tr>
    <tr>
      <td><strong>colMeans(A)</strong></td>
      <td>Returns vector of column means. </td>
    </tr>
    <tr>
      <td><strong>colSums(A)</strong></td>
      <td>Returns vector of column sums. </td>
    </tr>
  </table>
</p>

<h2>Matlab Emulation </h2>
<p>The <a href="http://cran.r-project.org/web/packages/matlab/index.html">matlab</a> package contains wrapper functions and variables used to replicate MATLAB function calls as best possible. This can help porting MATLAB applications and code to R. </p>
<h2>Going Further</h2>
<p>The <a href="http://cran.r-project.org/web/packages/Matrix/index.html">Matrix</a> package contains functions that extend R to support highly dense or sparse matrices. It provides efficient access to BLAS (Basic Linear Algebra Subroutines), Lapack
  (dense matrix), TAUCS (sparse matrix) and UMFPACK (sparse matrix)
  routines.</p>
<h2>To Practice</h2>
<p>Try some of the exercises in matrix algebra in <a href="https://www.datacamp.com/courses/intro-to-statistics-with-r-multiple-regression"> this course on intro to statistics with R.</a></p>

<p>In R, graphs are typically created interactively. </p>
<p><code># Creating a Graph<br />
    attach(mtcars)<br />
    plot(wt, mpg) <br />
    abline(lm(mpg~wt))<br />
    title(&quot;Regression of MPG on Weight&quot;)</code></p>
<p> The <strong>plot( )</strong> function opens a graph window and plots weight vs. miles per gallon. <br />
  The next line of code adds a regression line to this graph. The final line adds a title. </p>
<p><a href="images/plotexample.png"><img src="https://www.statmethods.net/graphs/creating/smplotexample.jpg"></a> click to view </p>
<h2>Saving Graphs </h2>
<p>You can save the graph in a variety of formats from the menu <br />
  <strong>File -&gt; Save As</strong>. </p>
<p>You can also save the graph via code using one of the following functions.</p>
<p>
  <table>
    <tr>
      <td><strong>Function</strong></td>
      <td><strong>Output to </strong></td>
    </tr>
    <tr>
      <td valign="top"><strong>pdf(&quot;mygraph.pdf&quot;)</strong></td>
      <td valign="top">pdf file </td>
    </tr>
    <tr>
      <td valign="top"><strong>win.metafile(&quot;mygraph.wmf&quot;)</strong></td>
      <td valign="top">windows metafile </td>
    </tr>
    <tr>
      <td valign="top"><strong>png(&quot;mygraph.png&quot;)</strong></td>
      <td valign="top">png file </td>
    </tr>
    <tr>
      <td valign="top"><strong>jpeg(&quot;mygraph.jpg&quot;)</strong></td>
      <td valign="top">jpeg file </td>
    </tr>
    <tr>
      <td valign="top"><strong>bmp(&quot;mygraph.bmp&quot;)</strong></td>
      <td valign="top">bmp file </td>
    </tr>
    <tr>
      <td valign="top"><strong>postscript(&quot;mygraph.ps&quot;)</strong></td>
      <td valign="top">postscript file </td>
    </tr>
  </table>
</p>
<p>See <a href="../interface/io.html">input/output</a> for details.</p>
<h2>Viewing Several Graphs </h2>
<p>Creating a new graph by issuing a high level plotting command (plot, hist, boxplot, etc.) will typically <strong>overwrite</strong> a previous graph. To avoid this, open a new graph window before creating a new graph. To open a new graph window use one of the functions below.</p>
<p>
  <table>
    <tr>
      <td><strong>Function</strong></td>
      <td><strong>Platform</strong></td>
    </tr>
    <tr>
      <td><strong>windows()</strong></td>
      <td>Windows</td>
    </tr>
    <tr>
      <td><strong>X11()</strong></td>
      <td>Unix</td>
    </tr>
    <tr>
      <td><strong>quartz()</strong></td>
      <td>Mac</td>
    </tr>
  </table>
</p>
<p>You can have multiple graph windows open at one time. See <strong>help(dev.cur)</strong> for more details. </p>
<p>Alternatively, after opening the first graph window, choose <strong>History -&gt; Recording </strong>from the graph window menu. Then you can use<strong> Previous</strong> and <strong>Next</strong> to step through the graphs you have created. </p>
<h2>Graphical Parameters</h2>
<p>You can specify fonts, colors, line styles, axes, reference lines, etc. by specifying <a href="../advgraphs/parameters.html">graphical parameters</a>. This allows a wide degree of customization. <a href="../advgraphs/parameters.html">Graphical parameters</a>, are covered in the <a href="../advgraphs/index.html">Advanced Graphs</a> section. The <a href="../advgraphs/index.html">Advanced Graphs</a> section also includes a more detailed coverage of <a href="../advgraphs/axes.html">axis and text </a>customization. </p>
<h2>To Practice</h2>
<p>Try the creating graph exercises in <a href="https://www.datacamp.com/courses/data-visualization-in-r"> this course on data visualization in R.</a></p>

<h2>Histograms</h2>
<p>You can create histograms with the function <strong>hist(</strong><em>x</em><strong>)</strong> where <em>x</em> is a numeric vector of values to be plotted. The option <strong> freq=FALSE</strong> plots probability densities instead of frequencies. The option <strong>breaks=</strong> controls the number of bins.</p>
<p><code># Simple Histogram<br />
    hist(mtcars$mpg)</code></p>
<p><a href="images/histogram1.jpg"><img src="https://www.statmethods.net/graphs/density/smhistogram1.jpg"></a> click to view </p>
<p><code># Colored Histogram with Different Number of Bins<br />
    hist(mtcars$mpg, breaks=12, col=&quot;red&quot;) </code></p>
<p><a href="images/histogram2.jpg"><img src="https://www.statmethods.net/graphs/density/smhistogram2.jpg"></a> click to view</p>
<p><code># Add a Normal Curve (Thanks to Peter Dalgaard)<br />
    x &lt;- mtcars$mpg <br />
    h&lt;-hist(x, breaks=10, col=&quot;red&quot;, xlab=&quot;Miles Per Gallon&quot;, <br />
    &nbsp;&nbsp; main=&quot;Histogram with Normal Curve&quot;) <br />
    xfit&lt;-seq(min(x),max(x),length=40) <br />
    yfit&lt;-dnorm(xfit,mean=mean(x),sd=sd(x)) <br />
    yfit &lt;- yfit*diff(h$mids[1:2])*length(x)
    <br />
    lines(xfit, yfit, col=&quot;blue&quot;, lwd=2) </code></p>
<p><a href="images/histogram3.jpg"><img src="https://www.statmethods.net/graphs/density/smhistogram3.jpg"></a> click to view </p>
<p> Histograms can be a poor method for determining the shape of a distribution because it is so strongly affected by the number of bins used.</p>
<p>To practice making a density plot with the hist() function, try <a href="https://campus.datacamp.com/courses/cleaning-data-in-r/chapter-1-introduction-and-exploring-raw-data?ex=10">this exercise.</a> </p>
<h2>Kernel Density Plots</h2>
<p>Kernal density plots are usually a much more effective way to view the distribution of a variable. Create the plot using <strong>plot(density(</strong><em>x</em><strong>)) </strong>where<em> x </em>is a numeric vector. </p>
<p><code># Kernel Density Plot<br />
    d &lt;- density(mtcars$mpg) # returns the density data <br />
    plot(d) # plots the results
  </code></p>
<p><a href="images/density1.jpg"><img src="https://www.statmethods.net/graphs/density/smdensity1.jpg"></a> click to view</p>
<p><code># Filled Density Plot<br />
    d &lt;- density(mtcars$mpg)<br />
    plot(d, main=&quot;Kernel Density of Miles Per Gallon&quot;)<br />
    polygon(d, col=&quot;red&quot;, border=&quot;blue&quot;)
  </code></p>
<p><a href="images/density2.jpg"><img src="https://www.statmethods.net/graphs/density/smdensity2.jpg"></a> click to view </p>
<h2>Comparing Groups VIA Kernal Density </h2>
<p>The <strong>sm.density.compare( ) </strong>function in the <strong><a href="http://cran.r-project.org/web/packages/sm/index.html">sm</a> </strong>package allows you to superimpose the kernal density plots of two or more groups. The format is <strong>sm.density.compare(</strong><em>x</em><strong>, </strong><em>factor</em>) where <em>x</em> is a numeric vector and <em>factor</em> is the grouping variable. </p>
<p><code># Compare MPG distributions for cars with <br />
    #
    4,6, or 8 cylinders<br />
    library(sm)<br />
    attach(mtcars)<br />
    <br />
    # create value labels <br />
    cyl.f &lt;- factor(cyl, levels= c(4,6,8),<br />
    &nbsp;&nbsp;labels = c(&quot;4 cylinder&quot;, &quot;6 cylinder&quot;, &quot;8 cylinder&quot;)) <br />
    <br />
    # plot densities <br />
    sm.density.compare(mpg, cyl, xlab=&quot;Miles Per Gallon&quot;)<br />
    title(main=&quot;MPG Distribution by Car Cylinders&quot;)<br />
    <br />
    # add legend via mouse click<br />
    colfill&lt;-c(2:(2+length(levels(cyl.f)))) <br />
    legend(locator(1), levels(cyl.f), fill=colfill) </code></p>
<p><a href="images/density3.png"><img src="https://www.statmethods.net/graphs/density/smdensity3.jpg"></a> click to view</p>

<p>Create dotplots with the<strong> dotchart(</strong><em>x</em><strong>, labels=)</strong> function, where <em>x</em> is a numeric vector and <strong>labels</strong> is a vector of labels for each point. You can add a<strong> groups=</strong> option to designate a factor specifying how the elements of <em>x</em> are grouped. If so, the option <strong>gcolor=</strong> controls the color of the groups label. <strong>cex</strong> controls the size of the labels. </p>
<p><code># Simple Dotplot<br />
    dotchart(mtcars$mpg,labels=row.names(mtcars),cex=.7,<br />
    &nbsp;&nbsp; main=&quot;Gas Milage for Car Models&quot;, <br />
    &nbsp;&nbsp; xlab=&quot;Miles Per Gallon&quot;)</code></p>
<p><a href="images/dotplot1.jpg"><img src="https://www.statmethods.net/graphs/dot/smdotplot1.jpg"></a> click to view </p>
<p><code># Dotplot: Grouped Sorted and Colored<br />
    # Sort by mpg, group and color by cylinder
    <br />
    x &lt;- mtcars[order(mtcars$mpg),] # sort by mpg<br />
    x$cyl &lt;- factor(x$cyl) # it must be a factor<br />
    x$color[x$cyl==4] &lt;- &quot;red&quot;<br />
    x$color[x$cyl==6] &lt;- &quot;blue&quot;<br />
    x$color[x$cyl==8] &lt;- &quot;darkgreen&quot; <br />
    dotchart(x$mpg,labels=row.names(x),cex=.7,groups= x$cyl,<br />
    &nbsp;&nbsp; main=&quot;Gas Milage for Car Models\ngrouped by cylinder&quot;,<br />
    &nbsp;&nbsp; xlab=&quot;Miles Per Gallon&quot;, gcolor=&quot;black&quot;, color=x$color)

  </code></p>
<p><a href="images/dotplot2.png"><img src="https://www.statmethods.net/graphs/dot/smdotplot2.jpg"></a> click to view </p>
<h2>Going Further </h2>
<p>Advanced dotplots can be created with the <strong>dotplot2( )</strong> function in the <a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> package and with the panel.dotplot( ) function in the <a href="http://cran.r-project.org/web/packages/lattice/index.html">lattice</a> package.</p>
<h2>To Practice</h2>
<p>To practice making a dot plot in R, try <a href="https://campus.datacamp.com/courses/foundations-of-inference/introduction-to-ideas-of-inference?ex=7"> this interactive exercise</a> from a DataCamp course.</p>

<p>Create barplots with the <strong>barplot(</strong><em>height</em><strong>)</strong> function, where <em>height</em> is a vector or matrix. If <strong>height is a vector</strong>, the values determine the heights of the bars in the plot. If <strong>height is a matrix</strong> and the option <strong>beside=FALSE</strong> then each bar of the plot corresponds to a column of height, with the values in the column giving the heights of stacked &ldquo;sub-bars&rdquo;. If <strong>height is a matrix</strong> and <strong>beside=TRUE</strong>, then the values in each column are juxtaposed rather than stacked. Include option <strong>names.arg=(</strong><em>character vector</em><strong>) </strong>to label the bars. The option <strong>horiz=TRUE</strong> to createa a horizontal barplot. </p>
<h2>Simple Bar Plot </h2>
<p><code># Simple Bar Plot <br />
    counts &lt;- table(mtcars$gear)<br />
    barplot(counts, main=&quot;Car Distribution&quot;, <br />
    &nbsp;&nbsp; xlab=&quot;Number of Gears&quot;)
  </code></p>
<p><a href="images/barplot1.jpg"><img src="https://www.statmethods.net/graphs/bar/smbarplot1.jpg"></a> click to view</p>
<p><code># Simple Horizontal Bar Plot with Added Labels <br />
    counts &lt;- table(mtcars$gear)<br />
    barplot(counts, main=&quot;Car Distribution&quot;, horiz=TRUE,<br />
    &nbsp;&nbsp;names.arg=c(&quot;3 Gears&quot;, &quot;4 Gears&quot;, &quot;5 Gears&quot;))<br />
  </code></p>
<p><a href="images/barplot2.jpg"><img src="https://www.statmethods.net/graphs/bar/smbarplot2.jpg"></a> click to view</p>
<p>(To practice making a simple bar plot in R, try this <a href="https://campus.datacamp.com/courses/data-visualization-with-ggplot2-1/chapter-4-geometries?ex=4">interactive video.</a>)</p>

<h2>Stacked Bar Plot </h2>
<p><code># Stacked Bar Plot with Colors and Legend<br />
    counts &lt;- table(mtcars$vs, mtcars$gear)<br />
    barplot(counts, main=&quot;Car Distribution by Gears and VS&quot;,<br />
    &nbsp;&nbsp;xlab=&quot;Number of Gears&quot;, col=c(&quot;darkblue&quot;,&quot;red&quot;),<br />
    &nbsp; legend = rownames(counts))
  </code></p>
<p><a href="images/barplot3.jpg"><img src="https://www.statmethods.net/graphs/bar/smbarplot3.jpg"></a> click to view</p>
<h2>Grouped Bar Plot</h2>

<p><code># Grouped Bar Plot<br />
    counts &lt;- table(mtcars$vs, mtcars$gear)<br />
    barplot(counts, main=&quot;Car Distribution by Gears and VS&quot;,<br />
    &nbsp;&nbsp;xlab=&quot;Number of Gears&quot;, col=c(&quot;darkblue&quot;,&quot;red&quot;),<br />
    &nbsp; legend = rownames(counts), beside=TRUE)</code></p>
<p><a href="images/barplot4.jpg"><img src="https://www.statmethods.net/graphs/bar/smbarplot4.jpg"></a> click to view</p>

<h2>Notes</h2>
<p>Bar plots need not be based on counts or frequencies. You can create bar plots that represent means, medians, standard deviations, etc. Use the <a href="../management/aggregate.html">aggregate( ) </a>function and pass the results to the barplot( ) function.</p>
<p> By default, the categorical axis line is suppressed. Include the option <strong>axis.lty=1</strong> to draw it. </p>
<p>With many bars, bar labels may start to overlap. You can decrease the font size using the <strong>cex.names =</strong> option. Values smaller than one will shrink the size of the label. Additionally, you can use <a href="../advgraphs/parameters.html">graphical parameters</a> such as the following to help text spacing:</p>
<p><code># Fitting Labels <br />
    par(las=2) # make label text perpendicular to axis<br />
    par(mar=c(5,8,4,2)) # increase y-axis margin.<br />
    <br />
    counts &lt;- table(mtcars$gear)<br />
    barplot(counts, main=&quot;Car Distribution&quot;, horiz=TRUE, names.arg=c(&quot;3 Gears&quot;, &quot;4 Gears&quot;, &quot;5 &nbsp;&nbsp;Gears&quot;), cex.names=0.8)</code></p>
<p> &nbsp;<a href="images/barplot5.png"><img src="https://www.statmethods.net/graphs/bar/smbarplot5.jpg"></a> click to view</p>

<h2>Overview</h2>
<p>Line charts are created with the function <strong>lines(</strong><em>x</em><strong>,</strong><em> y</em><strong>, type=)</strong> where <em>x</em> and <em>y</em> are numeric vectors of (x,y) points to connect. <strong>type=</strong> can take the following values:</p>
<p>
  <table>
    <tr>
      <td><strong>type </strong></td>
      <td><strong>description</strong></td>
    </tr>
    <tr>
      <td><strong>p</strong></td>
      <td>points</td>
    </tr>
    <tr>
      <td><strong>l</strong></td>
      <td>lines</td>
    </tr>
    <tr>
      <td><strong>o</strong></td>
      <td>overplotted points and lines </td>
    </tr>
    <tr>
      <td><strong>b, c </strong></td>
      <td>points (empty if &quot;c&quot;) joined by lines </td>
    </tr>

    <tr>
      <td><strong>s, S </strong></td>
      <td>stair steps </td>
    </tr>
    <tr>
      <td><strong>h</strong></td>
      <td>histogram-like vertical lines </td>
    </tr>
    <tr>
      <td><strong>n</strong></td>
      <td>does not produce any points or lines </td>
    </tr>
  </table>
</p>
<p>The <strong>lines( )</strong> function <em>adds</em> information to a graph. It can not produce a graph on its own. Usually it follows a <strong>plot(</strong><em>x</em><strong>, </strong><em>y</em><strong>)</strong> command that produces a graph. </p>

<p>By default, <strong>plot( ) </strong> plots the (x,y) points. Use the <strong>type=&quot;n&quot;</strong> option in the <strong>plot( )</strong> command, to create the graph with axes, titles, etc., but <em>without</em> plotting the points. </p>
<p>(To practice creating line charts with this <strong>lines( )</strong> function, try <a href="https://campus.datacamp.com/courses/data-visualization-in-r/adding-details-to-plots?ex=3">this exercise</a>.)</p>

<h2>Example</h2>
<p> In the following code each of the <strong>type=</strong> options is applied to the same dataset. The <strong>plot( )</strong> command sets up the graph, but <strong><em>does not</em></strong> plot the points. </p>
<p><code>x &lt;- c(1:5);
    y &lt;- x # create some data <br />
    par(pch=22, col=&quot;red&quot;) # plotting symbol and color <br />
    par(mfrow=c(2,4)) # all plots on one page <br />
    opts = c(&quot;p&quot;,&quot;l&quot;,&quot;o&quot;,&quot;b&quot;,&quot;c&quot;,&quot;s&quot;,&quot;S&quot;,&quot;h&quot;) <br />
    for(i in 1:length(opts)){ <br />
    &nbsp;&nbsp;heading = paste(&quot;type=&quot;,opts[i]) <br />
    &nbsp;&nbsp;plot(x, y, type=&quot;n&quot;, main=heading) <br />
    &nbsp;&nbsp;lines(x, y, type=opts[i]) <br />
    }</code></p>
<p><a href="images/lines0.png"><img src="https://www.statmethods.net/graphs/line/smlines0.jpg"></a> click to view</p>
<p>Next, we demonstrate each of the <strong>type=</strong> options when <strong>plot( )</strong> sets up the graph and <em><strong>does</strong></em> plot the points. </p>
<p><code>x &lt;- c(1:5);
    y &lt;- x # create some data<br />
    par(pch=22, col=&quot;blue&quot;) # plotting symbol and color <br />
    par(mfrow=c(2,4)) # all plots on one page <br />
    opts = c(&quot;p&quot;,&quot;l&quot;,&quot;o&quot;,&quot;b&quot;,&quot;c&quot;,&quot;s&quot;,&quot;S&quot;,&quot;h&quot;) <br />
    for(i in 1:length(opts){ <br />
    &nbsp;&nbsp;heading = paste(&quot;type=&quot;,opts[i]) <br />
    &nbsp;&nbsp;plot(x, y, main=heading) <br />
    &nbsp;&nbsp;lines(x, y, type=opts[i]) <br />
    }</code></p>
<p><a href="images/lines1.png"><img src="https://www.statmethods.net/graphs/line/smlines1.jpg"></a> click to view</p>
<p>As you can see, the <strong>type=&quot;c&quot;</strong> option only looks different from the <strong>type=&quot;b&quot;</strong> option if the plotting of points is suppressed in the <strong>plot( )</strong> command. </p>
<p>To demonstrate the creation of a more complex line chart, let's plot the growth of 5 orange trees over time. Each tree will have its own distinctive line. The data come from the dataset <strong>Orange</strong>. </p>
<p><code># Create Line Chart<br />
    <br />
    # convert factor to numeric for convenience <br />
    Orange$Tree &lt;- as.numeric(Orange$Tree) <br />
    ntrees &lt;- max(Orange$Tree)<br />
    <br />
    # get the range for the x and y axis <br />
    xrange &lt;- range(Orange$age) <br />
    yrange &lt;- range(Orange$circumference) <br />
    <br />
    # set up the plot <br />
    plot(xrange, yrange, type=&quot;n&quot;, xlab=&quot;Age (days)&quot;,<br />
    &nbsp;&nbsp; ylab=&quot;Circumference (mm)&quot; ) <br />
    colors &lt;- rainbow(ntrees) <br />
    linetype &lt;- c(1:ntrees) <br />
    plotchar &lt;- seq(18,18+ntrees,1)<br />
    <br />
    # add lines <br />
    for (i in 1:ntrees) { <br />
    &nbsp;&nbsp;tree &lt;- subset(Orange, Tree==i) <br />
    &nbsp;&nbsp;lines(tree$age, tree$circumference, type=&quot;b&quot;, lwd=1.5,<br />
    &nbsp;&nbsp;&nbsp;&nbsp;lty=linetype[i], col=colors[i], pch=plotchar[i]) <br />
    } <br />
    <br />
    # add a title and subtitle <br />
    title(&quot;Tree Growth&quot;, &quot;example of line plot&quot;)<br />
    <br />
    # add a legend <br />
    legend(xrange[1], yrange[2], 1:ntrees, cex=0.8, col=colors,<br />
    &nbsp;&nbsp; pch=plotchar, lty=linetype, title=&quot;Tree&quot;)</code></p>
<p><a href="images/linechart1.png"><img src="https://www.statmethods.net/graphs/line/smlinechart1.jpg"></a> click to view </p>
<h2>Going Further</h2>
<p>Try the exercises in <a href="https://www.datacamp.com/courses/data-visualization-in-r"> this course on plotting and data visualization in R.</a></p>

<p>Pie charts are not recommended in the R documentation, and their features are somewhat limited. The authors recommend <a href="bar.html">bar</a> or <a href="dot.html">dot plots</a> over pie charts because people are able to judge length more accurately than volume. Pie charts are created with the function <strong>pie(</strong><em>x</em><strong>, labels=)</strong> where <em>x</em> is a non-negative numeric vector indicating the area of each slice and labels= notes a character vector of names for the slices. </p>
<h2>Simple Pie Chart </h2>
<p><code># Simple Pie Chart<br />
    slices &lt;- c(10, 12,4, 16, 8)<br />
    lbls &lt;- c(&quot;US&quot;, &quot;UK&quot;, &quot;Australia&quot;, &quot;Germany&quot;, &quot;France&quot;)<br />
    pie(slices, labels = lbls, main=&quot;Pie Chart of Countries&quot;)</code></p>
<p><a href="images/pie1.jpg"><img src="https://www.statmethods.net/graphs/pie/smpie1.jpg"></a> click to view </p>
<h2>Pie Chart with Annotated Percentages </h2>
<p><code># Pie Chart with Percentages<br />
    slices &lt;- c(10, 12, 4, 16, 8)
    <br />
    lbls &lt;- c(&quot;US&quot;, &quot;UK&quot;, &quot;Australia&quot;, &quot;Germany&quot;, &quot;France&quot;)<br />
    pct &lt;- round(slices/sum(slices)*100)<br />
    lbls &lt;- paste(lbls, pct)
    # add percents to labels <br />
    lbls &lt;- paste(lbls,&quot;%&quot;,sep=&quot;&quot;) # ad % to labels <br />
    pie(slices,labels = lbls, col=rainbow(length(lbls)),<br />
    &nbsp;&nbsp; main=&quot;Pie Chart of Countries&quot;)
  </code></p>
<p><a href="images/pie2.jpg"><img src="https://www.statmethods.net/graphs/pie/smpie2.jpg"></a> click to view </p>
<h2>3D Pie Chart </h2>
<p>The <strong>pie3D( )</strong> function in the <a href="http://cran.r-project.org/web/packages/plotrix/index.html">plotrix</a> package provides 3D exploded pie charts. </p>
<p><code># 3D Exploded Pie Chart<br />
    library(plotrix)<br />
    slices &lt;- c(10, 12, 4, 16, 8) <br />
    lbls &lt;- c(&quot;US&quot;, &quot;UK&quot;, &quot;Australia&quot;, &quot;Germany&quot;, &quot;France&quot;)<br />
    pie3D(slices,labels=lbls,explode=0.1,<br />
    &nbsp;&nbsp; main=&quot;Pie Chart of Countries &quot;)</code></p>
<p><a href="images/pie3.jpg"><img src="https://www.statmethods.net/graphs/pie/smpie3.jpg"></a> click to view </p>
<h2>Creating Annotated Pies from a data frame</h2>
<p><code># Pie Chart from data frame with Appended Sample Sizes<br />
    mytable &lt;- table(iris$Species)<br />
    lbls &lt;- paste(names(mytable), &quot;\n&quot;, mytable, sep=&quot;&quot;)<br />
    pie(mytable, labels = lbls, <br />
    &nbsp;&nbsp; main=&quot;Pie Chart of Species\n (with sample sizes)&quot;)
  </code></p>
<p><a href="images/pie4.jpg"><img src="https://www.statmethods.net/graphs/pie/smpie4.jpg"></a> click to view </p>

<p>Boxplots can be created for individual variables or for variables by group. The format is <strong>boxplot(</strong><em>x</em><strong>, data=)</strong>, where <em>x</em> is a formula and <strong>data=</strong> denotes the data frame providing the data. An example of a <strong>formula </strong>is y~group where a separate boxplot for numeric variable y is generated for each value of group. Add <strong>varwidth=TRUE</strong> to make boxplot widths proportional to the square root of the samples sizes. Add <strong>horizontal=TRUE</strong> to reverse the axis orientation. </p>
<p><code># Boxplot of MPG by Car Cylinders
    <br />
    boxplot(mpg~cyl,data=mtcars,&nbsp;main=&quot;Car Milage Data&quot;, <br />
    &nbsp;&nbsp; xlab=&quot;Number of Cylinders&quot;, ylab=&quot;Miles Per Gallon&quot;)
  </code></p>
<p><a href="images/boxplot1.jpg"><img src="https://www.statmethods.net/graphs/boxplot/smboxplot1.jpg"></a> click to view </p>

<p><code># Notched Boxplot of Tooth Growth Against 2 Crossed Factors<br />
    # boxes colored for ease of interpretation
    <br />
    boxplot(len~supp*dose, data=ToothGrowth, notch=TRUE, <br />
    &nbsp; col=(c(&quot;gold&quot;,&quot;darkgreen&quot;)),<br />
    &nbsp;&nbsp;main=&quot;Tooth Growth&quot;, xlab=&quot;Suppliment and Dose&quot;) </code></p>
<p><a href="images/boxplot2.jpg"><img src="https://www.statmethods.net/graphs/boxplot/smboxplot2.jpg"></a> click to view</p>
<p>In the<strong> notched boxplot</strong>, if two boxes' notches do not overlap this is &lsquo;strong evidence&rsquo; their medians differ (Chambers <em>et al.</em>, 1983, p. 62). </p>
<p><strong>Colors recycle</strong>. In the example above, if I had listed 6 colors, each box would have its own color. Earl F. Glynn has created an easy to use <a href="http://research.stowers-institute.org/efg/R/Color/Chart/ColorChart.pdf">list of colors</a> is PDF format. </p>
<h2>Other Options </h2>
<p>The <strong>boxplot.matrix( )</strong> function in the <a href="http://cran.r-project.org/web/packages/sfsmisc/index.html">sfsmisc</a> package draws a boxplot for each column (row) in a matrix. The <strong>boxplot.n( )</strong> function in the<a href="http://cran.r-project.org/web/packages/gplots/index.html"> <strong>gplots</strong></a> package annotates each boxplot with its sample size. The bplot( ) function in the <a href="http://cran.r-project.org/web/packages/Rlab/index.html">Rlab</a> package offers many more options controlling the positioning and labeling of boxes in the output. </p>
<h2>Violin Plots</h2>
<p>A violin plot is a combination of a boxplot and a <a href="density.html">kernel density</a> plot. They can be created using the vioplot( ) function from <a href="http://cran.r-project.org/web/packages/vioplot/index.html">vioplot</a> package. </p>
<p><code># Violin Plots<br />
    library(vioplot)<br />
    x1 &lt;- mtcars$mpg[mtcars$cyl==4]<br />
    x2 &lt;- mtcars$mpg[mtcars$cyl==6]<br />
    x3 &lt;- mtcars$mpg[mtcars$cyl==8]<br />
    vioplot(x1, x2, x3, names=c(&quot;4 cyl&quot;, &quot;6 cyl&quot;, &quot;8 cyl&quot;), <br />
    &nbsp;&nbsp; col=&quot;gold&quot;)<br />
    title(&quot;Violin Plots of Miles Per Gallon&quot;)</code></p>
<p><a href="images/violin.jpg"><img src="https://www.statmethods.net/graphs/boxplot/smviolin.jpg"></a> click to view </p>
<h2>Bagplot - A 2D Boxplot Extension </h2>
<p>The <strong>bagplot(x, y)</strong> function in the <a href="http://cran.r-project.org/web/packages/aplpack/index.html">aplpack </a>package provides a bivariate version of the univariate boxplot. The bag contains 50% of all points. The bivariate median is approximated. The fence separates points in the fence from points outside. Outliers are displayed. </p>
<p><code># Example of a Bagplot<br />
    library(aplpack)<br />
    attach(mtcars)<br />
    bagplot(wt,mpg, xlab=&quot;Car Weight&quot;, ylab=&quot;Miles Per Gallon&quot;,<br />
    &nbsp;&nbsp;main=&quot;Bagplot Example&quot;) </code></p>
<p><a href="images/bagplot1.jpg"><img src="https://www.statmethods.net/graphs/boxplot/smbagplot1.jpg"></a> click to view </p>
<h2>To Practice</h2>
<p>Try the boxplot exercises in <a href="https://www.datacamp.com/courses/data-visualization-in-r"> this course on plotting and data visualization in R.</a></p>

<h2>Simple Scatterplot</h2>
<p>There are <strong>many</strong> ways to create a scatterplot in R. The basic function is <strong>plot(</strong><em>x</em><strong>, </strong><em>y</em><strong>)</strong>, where <em>x </em>and <em>y</em> are numeric vectors denoting the (x,y) points to plot. </p>
<p><code># Simple Scatterplot<br />
    attach(mtcars)<br />
    plot(wt, mpg, main=&quot;Scatterplot Example&quot;, <br />
    &nbsp;&nbsp; xlab=&quot;Car Weight &quot;, ylab=&quot;Miles Per Gallon &quot;, pch=19) </code></p>

<p><a href="images/scatterplot1.jpg"><img src="https://www.statmethods.net/graphs/scatterplot/smscatterplot1.jpg"></a> click to view </p>
<p>(To practice making a simple scatterplot, try this <a href="https://campus.datacamp.com/courses/data-visualization-in-r/a-quick-introduction-to-base-r-graphics?ex=3">interactive example from DataCamp.</a>)</p>
<p><code># Add fit lines<br />
    abline(lm(mpg~wt), col=&quot;red&quot;) # regression line (y~x) <br />
    lines(lowess(wt,mpg), col=&quot;blue&quot;) # lowess line (x,y) </code></p>
<p><a href="images/scatterplot2.jpg"><img src="https://www.statmethods.net/graphs/scatterplot/smscatterplot2.jpg"></a> click to view </p>

<p>The <strong>scatterplot( )</strong> function in the <a href="http://cran.r-project.org/web/packages/car/index.html">car</a> package offers many enhanced features, including fit lines, marginal box plots, conditioning on a factor, and interactive point identification. Each of these features is optional. </p>
<p><code># Enhanced Scatterplot of MPG vs. Weight <br />
    #
    by Number of Car Cylinders <br />
    library(car)
    <br />
    scatterplot(mpg ~ wt | cyl, data=mtcars, <br />
    &nbsp;&nbsp; xlab=&quot;Weight of Car&quot;, ylab=&quot;Miles Per Gallon&quot;, <br />
    &nbsp;&nbsp; main=&quot;Enhanced Scatter Plot&quot;, <br />
    &nbsp;&nbsp; labels=row.names(mtcars))
  </code></p>
<p><a href="images/scatterplot3.jpg"><img src="https://www.statmethods.net/graphs/scatterplot/smscatterplot3.jpg"></a> click to view</p>
<h2>Scatterplot Matrices</h2>
<p>There are at least 4 useful functions for creating scatterplot matrices. Analysts must love scatterplot matrices! </p>
<p><code># Basic Scatterplot Matrix<br />
    pairs(~mpg+disp+drat+wt,data=mtcars, <br />
    &nbsp;&nbsp; main=&quot;Simple Scatterplot Matrix&quot;)</code></p>
<p><a href="images/spmatrix1.jpg"><img src="https://www.statmethods.net/graphs/scatterplot/smspmatrix1.jpg"></a> click to view </p>
<p>The <a href="http://cran.r-project.org/web/packages/lattice/index.html">lattice </a>package provides options to condition the scatterplot matrix on a factor. </p>
<p><code># Scatterplot Matrices from the lattice Package
    <br />
    library(lattice)<br />
    splom(mtcars[c(1,3,5,6)], groups=cyl, data=mtcars,<br />
    &nbsp;&nbsp; panel=panel.superpose, <br />
    &nbsp;&nbsp; key=list(title=&quot;Three Cylinder Options&quot;,<br />
    &nbsp;&nbsp; columns=3,<br />
    &nbsp;&nbsp; points=list(pch=super.sym$pch[1:3],<br />
    &nbsp;&nbsp; col=super.sym$col[1:3]),<br />
    &nbsp;&nbsp; text=list(c(&quot;4 Cylinder&quot;,&quot;6 Cylinder&quot;,&quot;8 Cylinder&quot;))))
  </code></p>
<p><a href="images/spmatrix2.jpg"><img src="https://www.statmethods.net/graphs/scatterplot/smspmatrix2.jpg"></a> click to view </p>
<p>The <a href="http://cran.r-project.org/web/packages/car/index.html">car</a> package can condition the scatterplot matrix on a factor, and optionally include lowess and linear best fit lines, and boxplot, densities, or histograms in the principal diagonal, as well as rug plots in the margins of the cells. </p>
<p><code># Scatterplot Matrices from the car Package<br />
    library(car)<br />
    scatterplot.matrix(~mpg+disp+drat+wt|cyl, data=mtcars,<br />
    &nbsp;&nbsp; main=&quot;Three Cylinder Options&quot;)</code></p>
<p><a href="images/spmatrix3.png"><img src="https://www.statmethods.net/graphs/scatterplot/smspmatrix3.jpg"></a> click to view </p>
<p>The <a href="http://cran.r-project.org/web/packages/gclus/index.html">gclus</a> package provides options to rearrange the variables so that those with higher correlations are closer to the principal diagonal. It can also color code the cells to reflect the size of the correlations. </p>
<p><code># Scatterplot Matrices from the glus Package
    <br />
    library(gclus)<br />
    dta &lt;- mtcars[c(1,3,5,6)] # get data <br />
    dta.r &lt;- abs(cor(dta)) # get correlations<br />
    dta.col &lt;- dmat.color(dta.r) # get colors<br />
    # reorder variables so those with highest correlation<br />
    # are closest to the diagonal<br />
    dta.o &lt;- order.single(dta.r)
    <br />
    cpairs(dta, dta.o, panel.colors=dta.col, gap=.5,<br />
    main=&quot;Variables Ordered and Colored by Correlation&quot;
    )
  </code></p>
<p><a href="images/spmatrix4.jpg"><img src="https://www.statmethods.net/graphs/scatterplot/smspmatrix4.jpg"></a> click to view </p>
<h2>High Density Scatterplots</h2>
<p>When there are many data points and significant overlap, scatterplots become less useful. There are several approaches that be used when this occurs. The <strong>hexbin(x, y) </strong>function in the <a href="http://bioconductor.org/packages/2.0/bioc/html/hexbin.html">hexbin</a> package provides bivariate binning into hexagonal cells (it looks better than it sounds). </p>
<p><code># High Density Scatterplot with Binning<br />
    library(hexbin)<br />
    x &lt;- rnorm(1000)<br />
    y &lt;- rnorm(1000)<br />
    bin&lt;-hexbin(x, y, xbins=50)
    <br />
    plot(bin, main=&quot;Hexagonal Binning&quot;) </code></p>
<p><a href="images/hexbin.jpg"><img src="https://www.statmethods.net/graphs/scatterplot/smhexbin.jpg"></a> click to view </p>
<p>Another option for a scatterplot with significant point overlap is the <strong>sunflowerplot</strong>. See <strong>help(sunflowerplot) </strong>for details. </p>
<p>Finally, you can save the scatterplot in <strong>PDF</strong> format and use color transparency to allow points that overlap to show through (this idea comes from B.S. Everrit in <a href="../about/books.html">HSAUR</a>). </p>
<p><code># High Density Scatterplot with Color Transparency <br />
    pdf(&quot;c:/scatterplot.pdf&quot;)
    <br />
    x &lt;- rnorm(1000)<br />
    y &lt;- rnorm(1000)
    <br />
    plot(x,y, main=&quot;PDF Scatterplot Example&quot;, col=rgb(0,100,0,50,maxColorValue=255), pch=16)<br />
    dev.off()</code></p>
<p><a href="images/alphascatter.png"><img src="https://www.statmethods.net/graphs/scatterplot/smalphascatter.jpg"></a> click to view </p>
<p><em>Note:</em> You can use the <strong>col2rgb( ) </strong>function to get the rbg values for R colors. For example, <strong>col2rgb(&quot;</strong>darkgreen<strong>&quot;)</strong> yeilds r=0, g=100, b=0. Then add the alpha transparency level as the 4th number in the color vector. A value of zero means fully transparent. See <strong>help(rgb)</strong> for more information. </p>
<h2>3D Scatterplots </h2>
<p>You can create a 3D scatterplot with the <a href="http://cran.r-project.org/web/packages/scatterplot3d/index.html">scatterplot3d</a> package. Use the function <strong>scatterplot3d(</strong><em>x</em><strong>,</strong> <em>y</em><strong>,</strong> <em>z</em>).</p>
<p><code># 3D Scatterplot<br />
    library(scatterplot3d)<br />
    attach(mtcars)<br />
    scatterplot3d(wt,disp,mpg, main=&quot;3D Scatterplot&quot;)</code></p>
<p><a href="images/s3d1.png"><img src="https://www.statmethods.net/graphs/scatterplot/sms3d1.jpg"></a> click to view </p>
<p><code># 3D Scatterplot with Coloring and Vertical Drop Lines<br />
    library(scatterplot3d) <br />
    attach(mtcars) <br />
    scatterplot3d(wt,disp,mpg, pch=16, highlight.3d=TRUE,<br />
    &nbsp;&nbsp;type=&quot;h&quot;, main=&quot;3D Scatterplot&quot;) </code></p>
<p><a href="images/s3d2.png"><img src="https://www.statmethods.net/graphs/scatterplot/sms3d2.jpg"></a> click to view </p>
<p><code># 3D Scatterplot with Coloring and Vertical Lines<br />
    # and Regression Plane <br />
    library(scatterplot3d) <br />
    attach(mtcars) <br />
    s3d &lt;-scatterplot3d(wt,disp,mpg, pch=16, highlight.3d=TRUE,<br />
    &nbsp;&nbsp;type=&quot;h&quot;, main=&quot;3D Scatterplot&quot;)<br />
    fit &lt;- lm(mpg ~ wt+disp) <br />
    s3d$plane3d(fit)</code></p>
<p><a href="images/s3d3.png"><img src="https://www.statmethods.net/graphs/scatterplot/sms3d3.jpg"></a> click to view </p>
<h3>Spinning 3D Scatterplots </h3>
<p>You can also create an interactive 3D scatterplot using the <strong>plot3D(</strong><em>x</em><strong>,</strong><em> y</em><strong>,</strong><em> z</em><strong>) </strong>function in the <a href="http://cran.r-project.org/web/packages/rgl/index.html">rgl</a> package. It creates a spinning 3D scatterplot that can be rotated with the mouse. The first three arguments are the <strong>x, y, and z</strong> numeric vectors representing points. <strong>col=</strong> and size= control the color and size of the points respectively. </p>
<p><code># Spinning 3d Scatterplot<br />
    library(rgl)<br />
    <br />
    plot3d(wt, disp, mpg, col=&quot;red&quot;, size=3) </code></p>
<p><a href="images/plot3d.png"><img src="https://www.statmethods.net/graphs/scatterplot/smplot3d.jpg"></a> click to view</p>
<p>You can perform a similar function with the <strong>scatter3d(</strong><em>x</em><strong>, </strong><em>y</em><strong>, </strong><em>z</em><strong>)</strong> in the <strong><a href="http://cran.r-project.org/web/packages/Rcmdr/index.html">Rcmdr</a> </strong>package. </p>
<p><code># Another Spinning 3d Scatterplot<br />
    library(Rcmdr)<br />
    attach(mtcars)<br />
    scatter3d(wt, disp, mpg)
  </code></p>
<p>&nbsp;<a href="images/scatter3d.png"><img src="https://www.statmethods.net/graphs/scatterplot/smscatter3d.jpg"></a> click to view </p>
<h2>To Practice</h2>
<p>Try the creating scatterplot exercises in <a href="https://www.datacamp.com/courses/data-visualization-in-r"> this course on data visualization in R.</a></p>

<p>You can customize many features of your graphs (fonts, colors, axes, titles) through graphic options. </p>
<p>One way is to specify these options in through the <strong>par( ) </strong>function. If you set parameter values here, the changes will be in effect for the rest of the session or until you change them again. The format is <strong>par(<em>optionname</em>=</strong><em>value</em><strong>, <em>optionname</em>=</strong><em>value</em><strong>, </strong>...<strong>) </strong></p>
<p><code># Set a graphical parameter using par()<br />
    <br />
    par() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# view current settings<br />
    opar &lt;- par() &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# make a copy of current settings<br />
    par(col.lab=&quot;red&quot;) # red x and y labels <br />
    hist(mtcars$mpg)&nbsp;&nbsp;&nbsp;# create a plot with these new settings <br />
    par(opar) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# restore original settings
  </code></p>
<p>A second way to specify graphical parameters is by providing the <em><strong>optionname</strong></em>=<em>value</em> pairs directly to a high level plotting function. In this case, the options are only in effect for that specific graph.</p>
<p><code># Set a graphical parameter within the plotting function <br />
    hist(mtcars$mpg, col.lab=&quot;red&quot;)</code></p>
<p>See the help for a specific high level plotting function (e.g. plot, hist, boxplot) to determine which graphical parameters can be set this way. </p>
<p>The remainder of this section describes some of the more important graphical parameters that you can set. </p>
<h2>Text and Symbol Size </h2>
<p>The following options can be used to control text and symbol size in graphs.</p>
<p>
  <table width="85%">
    <tr>
      <td><strong>option</strong></td>
      <td><strong>description</strong></td>
    </tr>
    <tr>
      <td><strong>cex</strong></td>
      <td>number indicating the amount by which plotting text and symbols should be scaled relative to the default. 1=default, 1.5 is 50% larger, 0.5 is 50% smaller, etc. </td>
    </tr>
    <tr>
      <td><strong>cex.axis</strong></td>
      <td>magnification of axis annotation relative to cex </td>
    </tr>
    <tr>
      <td><strong>cex.lab</strong></td>
      <td>magnification of x and y labels relative to cex </td>
    </tr>
    <tr>
      <td><strong>cex.main</strong></td>
      <td>magnification of titles relative to cex </td>
    </tr>
    <tr>
      <td><strong>cex.sub</strong></td>
      <td>magnification of subtitles relative to cex </td>
    </tr>
  </table>
</p>
<h2>Plotting Symbols </h2>
<p>Use the <strong>pch=</strong> option to specify symbols to use when plotting points. For symbols 21 through 25, specify border color (col=) and fill color (bg=). </p>
<p><img src="https://www.statmethods.net/advgraphs/parameters/points.png"></p>

<h2>Lines</h2>
<p>You can change lines using the following options. This is particularly useful for reference lines, axes, and fit lines. </p>
<p>
  <table>
    <tr>
      <td><strong>option</strong></td>
      <td><strong>description</strong></td>
    </tr>
    <tr>
      <td><strong>lty</strong></td>
      <td>line type. see the chart below. </td>
    </tr>
    <tr>
      <td><strong>lwd</strong></td>
      <td>line width relative to the default (default=1). 2 is twice as wide. </td>
    </tr>
  </table>
  <p>
    <p><img src="https://www.statmethods.net/advgraphs/parameters/lines.png"> </p>

    <h2>Colors</h2>
    <p>Options that specify colors include the following.</p>
    <p>
      <table width="85%">
<tr>
  <td><strong>option</strong></td>
  <td><strong>description</strong></td>
</tr>
<tr>
  <td><strong>col</strong></td>
  <td>Default plotting color. Some functions (e.g. lines) accept a vector of values that are recycled. </td>
</tr>
<tr>
  <td><strong>col.axis</strong></td>
  <td>color for axis annotation </td>
</tr>
<tr>
  <td><strong>col.lab</strong></td>
  <td>color for x and y labels </td>
</tr>
<tr>
  <td><strong>col.main</strong></td>
  <td>color for titles </td>
</tr>
<tr>
  <td><strong>col.sub</strong></td>
  <td>color for subtitles </td>
</tr>
<tr>
  <td><strong>fg</strong></td>
  <td>plot foreground color (axes, boxes - also sets col= to same) </td>
</tr>
<tr>
  <td><strong>bg</strong></td>
  <td>plot background color </td>
</tr>
      </table>
    </p>
    <p>You can specify colors in R by index, name, hexadecimal, or RGB.<br />
      For example <strong>col=1</strong>, <strong>col=&quot;white&quot;</strong>, and <strong>col=&quot;#FFFFFF&quot;</strong> are equivalent. </p>
    <p>The following chart was produced with code developed by Earl F. Glynn. See his <a href="http://research.stowers-institute.org/efg/R/Color/Chart/index.htm">Color Chart</a> for all the details you would ever need about using colors in R. </p>
    <p><img src="https://www.statmethods.net/advgraphs/parameters/colorchart.png"></p>
    <p>You can also create a vector of <em>n</em> contiguous colors using the functions <strong>rainbow(</strong><em>n</em><strong>)</strong>, <strong>heat.colors(</strong><em>n</em><strong>)</strong>, <strong>terrain.colors(</strong><em>n</em><strong>)</strong>, <strong>topo.colors(</strong><em>n</em><strong>)</strong>, and <strong>cm.colors(</strong><em>n</em><strong>)</strong>. </p>
    <p><strong>colors() </strong>returns all available color names. </p>
    <h2>Fonts</h2>
    <p>You can easily set font size and style, but font family is a bit more complicated.</p>
    <p>
      <table width="85%">
<tr>
  <td><strong>option</strong></td>
  <td><strong>description</strong></td>
</tr>
<tr>
  <td><strong>font</strong></td>
  <td>Integer specifying font to use for text. <br />
    1=plain, 2=bold, 3=italic, 4=bold italic, 5=symbol </td>
</tr>
<tr>
  <td><strong>font.axis</strong></td>
  <td>font for axis annotation </td>
</tr>
<tr>
  <td><strong>font.lab</strong></td>
  <td>font for x and y labels </td>
</tr>
<tr>
  <td><strong>font.main</strong></td>
  <td>font for titles </td>
</tr>
<tr>
  <td><strong>font.sub</strong></td>
  <td>font for subtitles </td>
</tr>
<tr>
  <td><strong>ps</strong></td>
  <td>font point size (roughly 1/72 inch)<br />
    text size=ps*cex</td>
</tr>
<tr>
  <td><strong>family</strong></td>
  <td>font family for drawing text. Standard values are &quot;serif&quot;, &quot;sans&quot;, &quot;mono&quot;, &quot;symbol&quot;. Mapping is device dependent. </td>
</tr>
      </table>
    </p>
    <p>In windows, mono is mapped to &quot;TT Courier New&quot;, serif is mapped to&quot;TT Times New Roman&quot;, sans is mapped to &quot;TT Arial&quot;, mono is mapped to &quot;TT Courier New&quot;, and symbol is mapped to &quot;TT Symbol&quot; (TT=True Type). You can add your own mappings. </p>
    <p><code># Type family examples - creating new mappings <br />
plot(1:10,1:10,type=&quot;n&quot;)<br />
windowsFonts(<br />
&nbsp; A=windowsFont(&quot;Arial Black&quot;),<br />
&nbsp;&nbsp;B=windowsFont(&quot;Bookman Old Style&quot;),<br />
&nbsp;&nbsp;C=windowsFont(&quot;Comic Sans MS&quot;),<br />
&nbsp;&nbsp;D=windowsFont(&quot;Symbol&quot;)<br />
)<br />
text(3,3,&quot;Hello World Default&quot;)<br />
text(4,4,family=&quot;A&quot;,&quot;Hello World from Arial Black&quot;)<br />
text(5,5,family=&quot;B&quot;,&quot;Hello World from Bookman Old Style&quot;)<br />
text(6,6,family=&quot;C&quot;,&quot;Hello World from Comic Sans MS&quot;)<br />
text(7,7,family=&quot;D&quot;, &quot;Hello World from Symbol&quot;)
      </code></p>
    <p><a href="images/fonts.png"><img src="https://www.statmethods.net/advgraphs/parameters/smfonts.jpg"></a> click to view </p>
    <h2>Margins and Graph Size </h2>
    <p>You can control the margin size using the following parameters.</p>
    <p>
      <table width="85%">
<tr>
  <td><strong>option</strong></td>
  <td><strong>description</strong></td>
</tr>
<tr>
  <td><strong>mar</strong></td>
  <td>numerical vector indicating margin size c(bottom, left, top, right) in lines.
    default = c(5, 4, 4, 2) + 0.1 </td>
</tr>
<tr>
  <td><strong>mai</strong></td>
  <td>numerical vector indicating margin size c(bottom, left, top, right) in inches </td>
</tr>
<tr>
  <td><strong>pin</strong></td>
  <td>plot dimensions (width, height) in inches </td>
</tr>
      </table>
    </p>
    <p>For complete information on margins, see Earl F. Glynn's <a href="http://research.stowers-institute.org/efg/R/Graphics/Basics/mar-oma/index.htm">margin tutorial</a>. </p>
    <h2>Going Further </h2>

    <p>See <strong>help(par)</strong> for more information on graphical parameters. The customization of plotting axes and text annotations are covered <a href="axes.html">next section</a>. </p>
    <h2>To Practice </h2>
    <p>Try <a href="https://www.datacamp.com/courses/data-visualization-in-r">this course on making graphs in R.</a></p>

<p>Many high level plotting functions (plot, hist, boxplot, etc.) allow you to include axis and text options (as well as other <a href="parameters.html">graphical parameters</a>). For example </p>
<p><code># Specify axis options within plot() <br />
    plot(<em>x</em>, <em>y</em>, main=&quot;<em>title</em>&quot;, sub=&quot;<em>subtitle</em>&quot;,<br />
    &nbsp;&nbsp;xlab=&quot;<em>X-axis label</em>&quot;, ylab=&quot;<em>y-axix label</em>&quot;,<br />
    &nbsp;&nbsp;xlim=c(<em>xmin</em>, <em>xmax</em>), ylim=c(<em>ymin</em>, <em>ymax</em>)) </code></p>
<p>For finer control or for modularization, you can use the functions described below. </p>
<h2>Titles</h2>
<p>Use the <strong>title( )</strong> function to add labels to a plot. </p>
<p><code>title(main=&quot;<em>main title</em>&quot;, sub=&quot;<em>sub-title</em>&quot;, <br />
    &nbsp;&nbsp; xlab=&quot;<em>x-axis label</em>&quot;, ylab=&quot;<em>y-axis label</em>&quot;) </code></p>
<p>Many other <a href="parameters.html">graphical parameters</a> (such as text size, font, rotation, and color) can also be specified in the title( ) function.</p>
<p><code># Add a red title and a blue subtitle.
    Make x and y <br />
    #
    labels 25% smaller
    than the default and green. <br />
    title(main=&quot;My Title&quot;, col.main=&quot;red&quot;,
    <br />
    &nbsp; sub=&quot;My Sub-title&quot;, col.sub=&quot;blue&quot;,
    <br />
    &nbsp; xlab=&quot;My X label&quot;, ylab=&quot;My Y label&quot;,<br />
    &nbsp;&nbsp;col.lab=&quot;green&quot;, cex.lab=0.75)
  </code></p>
<h2>Text Annotations </h2>
<p>Text can be added to graphs using the <strong>text( )</strong> and <strong>mtext( ) </strong>functions. <strong>text( )</strong> places text within the graph while <strong>mtext( )</strong> places text in one of the four margins.</p>
<p>(To practice adding text to plots in R, try this <a href="https://campus.datacamp.com/courses/data-visualization-in-r/adding-details-to-plots?ex=10">interactive exercise.</a>)</p>

<p><code>text(<em>location,</em> &quot;<em>text to place</em>&quot;, pos, ...)<br />
    mtext(&quot;<em>text to place</em>&quot;, <em>side</em>, line=<em>n</em>, ...)
  </code></p>
<p> Common options are described below.</p>

<table width="85%">
  <tr>
    <td><strong>option</strong></td>
    <td><strong>description</strong></td>
  </tr>
  <tr>
    <td><strong>location</strong></td>
    <td>location can be an <strong>x,y coordinate</strong>. Alternatively, the text can be placed interactively via mouse by specifying location as <strong>locator(1)</strong>. </td>
  </tr>
  <tr>
    <td><strong>pos</strong></td>
    <td>position relative to location. 1=below, 2=left, 3=above, 4=right. If you specify<strong> pos</strong>, you can specify <strong>offset=</strong> in percent of character width. </td>
  </tr>
  <tr>
    <td><strong>side</strong></td>
    <td>which margin to place text. 1=bottom, 2=left, 3=top, 4=right. you can specify <strong>line= </strong>to indicate the line in the margin starting with 0 and moving out. you can also specify <strong>adj=0 </strong>for left/bottom alignment or <strong>adj=1</strong> for top/right alignment. </td>
  </tr>
</table>
<p>Other common options are <strong>cex</strong>, <strong>col,</strong> and <strong>font</strong> (for size, color, and font style respectively). </p>

<h2>Labeling points </h2>
<p>You can use the <strong>text( )</strong> function (see above) for labeling point as well as for adding other text annotations. Specify location as a set of x, y coordinates and specify the text to place as a vector of labels. The x, y, and label vectors should all be the same length. </p>
<p><code># Example of labeling points<br />
    attach(mtcars)<br />
    plot(wt, mpg, main=&quot;Milage vs. Car Weight&quot;, <br />
    &nbsp;&nbsp; xlab=&quot;Weight&quot;, ylab=&quot;Mileage&quot;, pch=18, col=&quot;blue&quot;)<br />
    text(wt, mpg, row.names(mtcars), cex=0.6, pos=4, col=&quot;red&quot;)
  </code></p>
<p><a href="images/points2.png"><img src="https://www.statmethods.net/advgraphs/axes/smpoints.jpg"></a> click to view </p>
<h2>Math Annotations </h2>
<p>You can add mathematically formulas to a graph using TEX-like rules. See <strong>help(plotmath)</strong> for details and examples. </p>
<h2>Axes</h2>
<p>You can create custom axes using the <strong>axis( )</strong> function. </p>
<p><code>axis(<em>side</em>, at=, labels=, pos=, lty=, col=, las=, tck=, ...) </code></p>
<p>where</p>
<table width="85%">
  <tr>
    <td><strong>option</strong></td>
    <td><strong>description</strong></td>
  </tr>
  <tr>
    <td><strong>side</strong></td>
    <td>an integer indicating the side of the graph to draw the axis (1=bottom, 2=left, 3=top, 4=right)</td>
  </tr>
  <tr>
    <td><strong>at</strong></td>
    <td>a numeric vector indicating where tic marks should be drawn</td>
  </tr>
  <tr>
    <td><strong>labels</strong></td>
    <td>a character vector of labels to be placed at the tickmarks <br />
      (if NULL, the <em>at </em>values will be used)</td>
  </tr>
  <tr>
    <td><strong>pos</strong></td>
    <td>the coordinate at which the axis line is to be drawn. <br />
      (i.e., the value on the other axis where it crosses)</td>
  </tr>
  <tr>
    <td><strong>lty</strong></td>
    <td>line type</td>
  </tr>
  <tr>
    <td><strong>col</strong> </td>
    <td>the line and tick mark color</td>
  </tr>
  <tr>
    <td><strong>las</strong></td>
    <td> labels are parallel (=0) or perpendicular(=2) to axis</td>
  </tr>
  <tr>
    <td><strong>tck</strong></td>
    <td>length of tick mark as fraction of plotting region (negative number is outside graph, positive number is inside, 0 suppresses ticks, 1 creates gridlines) default is -0.01 </td>
  </tr>
  <tr>
    <td>(...)</td>
    <td>other <a href="parameters.html">graphical parameters</a></td>
  </tr>
</table>
<p>If you are going to create a custom axis, you should suppress the axis automatically generated by your high level plotting function. The option <strong>axes=FALSE</strong> suppresses both x and y axes. <strong>xaxt=&quot;n&quot;</strong> and <strong>yaxt=&quot;n&quot;</strong> suppress the x and y axis respectively. Here is a (somewhat overblown) example. </p>
<p><code># A Silly Axis Example<br />
    <br />
    # specify the data
    <br />
    x &lt;- c(1:10);
    y &lt;- x;
    z &lt;- 10/x<br />
    <br />
    # create extra margin room on the right for an axis
    <br />
    par(mar=c(5, 4, 4, 8) + 0.1)<br />
    <br />
    # plot x vs. y
    <br />
    plot(x, y,type=&quot;b&quot;, pch=21, col=&quot;red&quot;, <br />
    &nbsp;&nbsp; yaxt=&quot;n&quot;, lty=3, xlab=&quot;&quot;, ylab=&quot;&quot;)<br />
    <br />
    # add x vs. 1/x
    <br />
    lines(x, z, type=&quot;b&quot;, pch=22, col=&quot;blue&quot;, lty=2)<br />
    <br />
    # draw an axis on the left <br />
    axis(2, at=x,labels=x, col.axis=&quot;red&quot;, las=2)<br />
    <br />
    # draw an axis on the right, with smaller text and ticks <br />
    axis(4, at=z,labels=round(z,digits=2),<br />
    &nbsp;&nbsp;col.axis=&quot;blue&quot;, las=2, cex.axis=0.7, tck=-.01)<br />
    <br />
    # add a title for the right axis <br />
    mtext(&quot;y=1/x&quot;, side=4, line=3, cex.lab=1,las=2, col=&quot;blue&quot;)<br />
    <br />
    # add a main title and bottom and left axis labels <br />
    title(&quot;An Example of Creative Axes&quot;, xlab=&quot;X values&quot;,<br />
    &nbsp;&nbsp; ylab=&quot;Y=X&quot;)</code></p>
<p><a href="images/axis.png"><img src="https://www.statmethods.net/advgraphs/axes/smaxis.jpg"></a> click to view</p>
<h2>Minor Tick Marks</h2>
<p>The <strong>minor.tick( ) </strong>function in the <strong><a href="http://cran.r-project.org/web/packages/Hmisc/index.html">Hmisc</a> </strong>package adds minor tick marks. </p>
<p><code># Add minor tick marks<br />
    library(Hmisc)<br />
    minor.tick(nx=<em>n</em>, ny=<em>n</em>, tick.ratio=<em>n</em>)</code></p>
<p><strong>nx</strong> is the number of minor tick marks to place between x-axis major tick marks.<br />
  <strong>ny</strong> does the same for the y-axis. <strong>tick.ratio</strong> is the size of the minor tick mark relative to the major tick mark. The length of the major tick mark is retrieved from <strong>par(</strong>&quot;tck&quot;<strong>)</strong>. </p>
<h2>Reference Lines</h2>
<p>Add reference lines to a graph using the <strong>abline( )</strong> function. </p>
<p><code>abline(h=<em>yvalues</em>, v=<em>xvalues</em>) </code></p>
<p>Other <a href="parameters.html">graphical parameters</a> (such as line type, color, and width) can also be specified in the abline( ) function. </p>
<p><code># add solid horizontal lines at y=1,5,7 <br />
    abline(h=c(1,5,7))<br />
    # add dashed blue verical lines at x = 1,3,5,7,9<br />
    abline(v=seq(1,10,2),lty=2,col=&quot;blue&quot;)
  </code></p>
<p>Note: You can also use the <strong>grid( )</strong> function to add reference lines. </p>
<h2>Legend</h2>
<p>Add a legend with the<strong> legend()</strong> function. </p>
<p><code>legend(location, title, legend, ...) </code></p>
<p>Common options are described below. </p>
<table width="85%">
  <tr>
    <td><strong>option</strong></td>
    <td><strong>description</strong></td>
  </tr>
  <tr>
    <td><strong>location</strong></td>
    <td>There are several ways to indicate the location of the legend. You can give an <strong>x,y coordinate</strong> for the upper left hand corner of the legend. You can use <strong>locator(1)</strong>, in which case you use the mouse to indicate the location of the legend. You can also use the <strong>keywords</strong> &quot;bottom&quot;, &quot;bottomleft&quot;, &quot;left&quot;, &quot;topleft&quot;, &quot;top&quot;, &quot;topright&quot;, &quot;right&quot;, &quot;bottomright&quot;, or &quot;center&quot;. If you use a keyword, you may want to use<strong> inset=</strong> to specify an amount to move the legend into the graph (as fraction of plot region). </td>
  </tr>
  <tr>
    <td><strong>title</strong></td>
    <td>A character string for the legend title (optional) </td>
  </tr>
  <tr>
    <td><strong>legend</strong></td>
    <td>A character vector with the labels </td>
  </tr>
  <tr>
    <td>...</td>
    <td>Other options. If the legend labels colored lines, specify <strong>col=</strong> and a vector of colors. If the legend labels point symbols, specify <strong>pch=</strong> and a vector of point symbols. If the legend labels line width or line style, use <strong>lwd=</strong> or <strong>lty=</strong> and a vector of widths or styles. To create colored boxes for the legend (common in bar, box, or pie charts), use <strong>fill=</strong> and a vector of colors. </td>
  </tr>
</table>
<p>Other common legend options include <strong>bty</strong> for box type,<strong> bg</strong> for background color, <strong>cex</strong> for size, and <strong>text.col</strong> for text color. Setting <strong>horiz=TRUE</strong> sets the legend horizontally rather than vertically. </p>
<p><code># Legend Example<br />
    attach(mtcars)<br />
    boxplot(mpg~cyl, main=&quot;Milage by Car Weight&quot;,<br />
    &nbsp;&nbsp; yaxt=&quot;n&quot;, xlab=&quot;Milage&quot;, horizontal=TRUE,<br />
    &nbsp;&nbsp; col=terrain.colors(3))<br />
    legend(&quot;topright&quot;, inset=.05, title=&quot;Number of Cylinders&quot;,<br />
    &nbsp;&nbsp; c(&quot;4&quot;,&quot;6&quot;,&quot;8&quot;), fill=terrain.colors(3), horiz=TRUE)</code></p>
<p><a href="images/legend.png"><img src="https://www.statmethods.net/advgraphs/axes/smlegend.jpg"></a> click to view </p>
<p>For more on legends, see <strong>help(legend)</strong>. The examples in the help are particularly informative.</p>
<h2>To Practice</h2>
<p>Try the free first chapter of <a href="https://www.datacamp.com/courses/data-visualization-in-r">this online data visualization course in R.</a></p>

<p>R makes it easy to combine multiple plots into one overall graph, using either the <strong><br />
    par( ) </strong>or <strong>layout( )</strong> function. </p>
<p>With the <strong>par( )</strong> function, you can include the option <strong>mfrow=c(</strong><em>nrows</em>, <em>ncols</em><strong>)</strong> to create a matrix of <em>nrows x ncols</em> plots that are filled in by row. <strong>mfcol=c(</strong><em>nrows</em>, <em>ncols</em><strong>)</strong> fills in the matrix by columns. </p>
<p><code># 4 figures arranged in 2 rows and 2 columns<br />
    attach(mtcars)<br />
    par(mfrow=c(2,2))<br />
    plot(wt,mpg, main=&quot;Scatterplot of wt vs. mpg&quot;)<br />
    plot(wt,disp, main=&quot;Scatterplot of wt vs disp&quot;)<br />
    hist(wt, main=&quot;Histogram of wt&quot;)<br />
    boxplot(wt, main=&quot;Boxplot of wt&quot;)</code></p>
<p><a href="images/layout1.jpg"><img src="https://www.statmethods.net/advgraphs/layout/smlayout1.jpg"></a> click to view </p>
<p><code># 3 figures arranged in 3 rows and 1 column<br />
    attach(mtcars)<br />
    par(mfrow=c(3,1))
    <br />
    hist(wt)<br />
    hist(mpg)<br />
    hist(disp)</code></p>
<p><a href="images/layout2.jpg"><img src="https://www.statmethods.net/advgraphs/layout/smlayout2.jpg"></a> click to view </p>
<p>The <strong>layout( )</strong> function has the form <strong>layout(</strong><em>mat</em><strong>)</strong> where <br />
  <em>mat</em> is a matrix object specifying the location of the N figures to plot. </p>
<p><code># One figure in row 1 and two figures in row 2<br />
    attach(mtcars)<br />
    layout(matrix(c(1,1,2,3), 2, 2, byrow = TRUE))<br />
    hist(wt)<br />
    hist(mpg)<br />
    hist(disp)</code></p>
<p><a href="images/layout3.jpg"><img src="https://www.statmethods.net/advgraphs/layout/smlayout3.jpg"></a> click to view</p>
<p>Optionally, you can include widths= and heights= options in the <strong>layout( ) </strong>function to control the size of each figure more precisely. These options have the form <br />
  <strong>widths= </strong>a vector of values for the widths of columns<br />
  <strong>heights= </strong>a vector of values for the heights of rows. </p>
<p>Relative widths are specified with numeric values. Absolute widths (in centimetres) are specified with the <strong>lcm()</strong> function.</p>
<p><code># One figure in row 1 and two figures in row 2<br />
    # row 1 is 1/3 the height of row 2<br />
    # column 2 is 1/4 the width of the column 1
    <br />
    attach(mtcars)<br />
    layout(matrix(c(1,1,2,3), 2, 2, byrow = TRUE), <br />
    &nbsp;&nbsp; widths=c(3,1), heights=c(1,2))<br />
    hist(wt)<br />
    hist(mpg)<br />
    hist(disp)</code></p>
<p><a href="images/layout3a.png"><img src="https://www.statmethods.net/advgraphs/layout/smlayout3a.jpg"></a> click to view </p>
<p>See <strong>help(layout)</strong> for more details. </p>
<h2>Creating a figure arrangement with fine control </h2>
<p>In the following example, two box plots are added to scatterplot to create an enhanced graph.</p>
<p><code># Add boxplots to a scatterplot<br />
    par(fig=c(0,0.8,0,0.8), new=TRUE)<br />
    plot(mtcars$wt, mtcars$mpg, xlab=&quot;Car Weight&quot;,<br />
    &nbsp;&nbsp;ylab=&quot;Miles Per Gallon&quot;)<br />
    par(fig=c(0,0.8,0.55,1), new=TRUE)<br />
    boxplot(mtcars$wt, horizontal=TRUE, axes=FALSE)<br />
    par(fig=c(0.65,1,0,0.8),new=TRUE)<br />
    boxplot(mtcars$mpg, axes=FALSE)<br />
    mtext(&quot;Enhanced Scatterplot&quot;, side=3, outer=TRUE, line=-3) </code></p>
<p><a href="images/layout4.jpg"><img src="https://www.statmethods.net/advgraphs/layout/smlayout4.jpg"></a> click to view </p>
<p>To understand this graph, think of the full graph area as going from (0,0) in the lower left corner to (1,1) in the upper right corner. The format of the <strong>fig=</strong> parameter is a numerical vector of the form c(x1, x2, y1, y2). The first <strong>fig=</strong> sets up the scatterplot going from 0 to 0.8 on the x axis and 0 to 0.8 on the y axis. The top boxplot goes from 0 to 0.8 on the x axis and 0.55 to 1 on the y axis. I chose 0.55 rather than 0.8 so that the top figure will be pulled closer to the scatter plot. The right hand boxplot goes from 0.65 to 1 on the x axis and 0 to 0.8 on the y axis. Again, I chose a value to pull the right hand boxplot closer to the scatterplot. You have to experiment to get it just right.</p>
<p><strong>fig=</strong> starts a new plot, so to add to an existing plot use <strong>new=TRUE</strong>. </p>
<p>You can use this to combine several plots in any arrangement into one graph. </p>
<h2>To Practice</h2>
<p>Try the free first chapter of <a href="https://www.datacamp.com/courses/data-visualization-in-r">this interactive data visualization course,</a> which covers combining plots.</p>

<p>The <a href="http://cran.r-project.org/web/packages/lattice/index.html">lattice</a> package, written by Deepayan Sarkar, attempts to improve on base <em>R</em> graphics by providing better defaults and the ability to easily display multivariate relationships. In particular, the package supports the creation of <em>trellis graphs</em> - graphs that display a variable or the relationship between variables, conditioned on one or more other variables.</p>
<p>The typical format is</p>
<p><code><em>graph_type</em>(<em>formula</em>, data=) </code></p>
<p>where <em>graph_type</em> is selected from the listed below. <em>formula</em> specifies the variable(s) to display and any conditioning variables . For example <strong> ~x|A</strong> means display numeric variable x for each level of factor A. <strong>y~x | A*B </strong>means display the relationship between numeric variables y and x separately for every combination of factor A and B levels. <strong>~x </strong>means display numeric variable x alone. </p>
<table>
  <tr>
    <td><strong>graph_type</strong></td>
    <td><strong>description</strong></td>
    <td><strong>formula examples</strong></td>
  </tr>
  <tr>
    <td>barchart</td>
    <td>bar chart </td>
    <td>x~A or A~x </td>
  </tr>
  <tr>
    <td>bwplot</td>
    <td>boxplot</td>
    <td>x~A or A~x </td>
  </tr>
  <tr>
    <td>cloud</td>
    <td>3D scatterplot </td>
    <td>z~x*y|A</td>
  </tr>
  <tr>
    <td>contourplot</td>
    <td>3D contour plot </td>
    <td>z~x*y</td>
  </tr>
  <tr>
    <td>densityplot</td>
    <td>kernal density plot </td>
    <td>~x|A*B</td>
  </tr>
  <tr>
    <td>dotplot</td>
    <td>dotplot</td>
    <td>~x|A</td>
  </tr>
  <tr>
    <td>histogram</td>
    <td>histogram</td>
    <td>~x</td>
  </tr>
  <tr>
    <td>levelplot</td>
    <td>3D level plot </td>
    <td>z~y*x</td>
  </tr>
  <tr>
    <td>parallel</td>
    <td>parallel coordinates plot </td>
    <td>data frame</td>
  </tr>
  <tr>
    <td>splom</td>
    <td>scatterplot matrix </td>
    <td>data frame</td>
  </tr>
  <tr>
    <td>stripplot</td>
    <td>strip plots </td>
    <td>A~x or x~A </td>
  </tr>
  <tr>
    <td>xyplot</td>
    <td>scatterplot </td>
    <td>y~x|A</td>
  </tr>
  <tr>
    <td>wireframe</td>
    <td>3D wireframe graph </td>
    <td>z~y*x</td>
  </tr>
</table>
<p>Here are some examples. They use the car data (mileage, weight, number of gears, number of cylinders, etc.) from the <strong>mtcars</strong> data frame. </p>
<p><code># Lattice Examples <br />
    library(lattice) <br />
    attach(mtcars)<br />
    <br />
    # create factors with value labels <br />
    gear.f&lt;-factor(gear,levels=c(3,4,5),<br />
    &nbsp;&nbsp; labels=c(&quot;3gears&quot;,&quot;4gears&quot;,&quot;5gears&quot;)) <br />
    cyl.f &lt;-factor(cyl,levels=c(4,6,8),<br />
    &nbsp;&nbsp; labels=c(&quot;4cyl&quot;,&quot;6cyl&quot;,&quot;8cyl&quot;)) <br />
    <br />
    # kernel density plot <br />
    densityplot(~mpg, <br />
    &nbsp;&nbsp; main=&quot;Density Plot&quot;, <br />
    &nbsp;&nbsp; xlab=&quot;Miles per Gallon&quot;)<br />
    <br />
    # kernel density plots by factor level <br />
    densityplot(~mpg|cyl.f, <br />
    &nbsp;&nbsp; main=&quot;Density Plot by Number of Cylinders&quot;,<br />
    &nbsp;&nbsp;&nbsp;xlab=&quot;Miles per Gallon&quot;)<br />
    <br />
    # kernel density plots by factor level (alternate layout) <br />
    densityplot(~mpg|cyl.f, <br />
    &nbsp;&nbsp; main=&quot;Density Plot by Numer of Cylinders&quot;,<br />
    &nbsp;&nbsp;&nbsp;xlab=&quot;Miles per Gallon&quot;, <br />
    &nbsp;&nbsp; layout=c(1,3))<br />
    <br />
    # boxplots for each combination of two factors <br />
    bwplot(cyl.f~mpg|gear.f,<br />
    &nbsp;&nbsp; ylab=&quot;Cylinders&quot;, xlab=&quot;Miles per Gallon&quot;, <br />
    &nbsp;&nbsp; main=&quot;Mileage by Cylinders&nbsp;and Gears&quot;, <br />
    &nbsp;&nbsp; layout=(c(1,3))<br />
    <br />
    # scatterplots for each combination of two factors <br />
    xyplot(mpg~wt|cyl.f*gear.f, <br />
    &nbsp;&nbsp; main=&quot;Scatterplots by Cylinders and Gears&quot;, <br />
    &nbsp;&nbsp; ylab=&quot;Miles per Gallon&quot;, xlab=&quot;Car Weight&quot;)<br />
    <br />
    # 3d scatterplot by factor level <br />
    cloud(mpg~wt*qsec|cyl.f, <br />
    &nbsp;&nbsp; main=&quot;3D Scatterplot by Cylinders&quot;) <br />
    <br />
    # dotplot for each combination of two factors <br />
    dotplot(cyl.f~mpg|gear.f, <br />
    &nbsp;&nbsp; main=&quot;Dotplot Plot by Number of Gears and Cylinders&quot;,<br />
    &nbsp;&nbsp; xlab=&quot;Miles Per Gallon&quot;)<br />
    <br />
    # scatterplot matrix <br />
    splom(mtcars[c(1,3,4,5,6)], <br />
    &nbsp;&nbsp; main=&quot;MTCARS Data&quot;)</code></p>
<p><a href="images/density1.png"><img src="https://www.statmethods.net/advgraphs/trellis/smdensity1.jpg"></a><a href="images/density2.png"><img src="https://www.statmethods.net/advgraphs/trellis/smdensity2.jpg"></a><a href="images/density3.png"><img src="https://www.statmethods.net/advgraphs/trellis/smdensity3.jpg"></a><a href="images/boxplot1.png"><img src="https://www.statmethods.net/advgraphs/trellis/smboxplot1.jpg"></a></p>
<p><a href="images/scatterplot1.png"><img src="https://www.statmethods.net/advgraphs/trellis/smscatterplot1.jpg"></a><a href="images/3dscatter1.png"><img src="https://www.statmethods.net/advgraphs/trellis/sm3dscatter.jpg"></a> <a href="images/dotplot1.png"><img src="https://www.statmethods.net/advgraphs/trellis/smdotplot1.jpg"></a><a href="images/scattermatrix1.png"><img src="https://www.statmethods.net/advgraphs/trellis/smscattermatrix1.jpg"></a></p>
<p>click to view </p>
<p>Note, as in graph 1, that you specifying a conditioning variable is optional. The difference between graphs 2 &amp; 3 is the use of the layout option to contol the placement of panels. </p>
<h2>Customizing Lattice Graphs</h2>
<p>Unlike base R graphs, lattice graphs are not effected by many of the options set in the <strong>par( )</strong> function. To view the options that can be changed, look at <strong>help(xyplot)</strong>. It is frequently easiest to set these options within the high level plotting functions described above. Additionally, you can write functions that modify the rendering of panels. Here is an example.</p>
<p><code># Customized Lattice Example<br />
    library(lattice)<br />
    panel.smoother &lt;- function(x, y) {<br />
    &nbsp;&nbsp;panel.xyplot(x, y) # show points <br />
    &nbsp;&nbsp;panel.loess(x, y) &nbsp;# show smoothed line <br />
    }<br />
    attach(mtcars)<br />
    hp &lt;- cut(hp,3) # divide horse power into three bands
    <br />
    xyplot(mpg~wt|hp, scales=list(cex=.8, col=&quot;red&quot;),<br />
    &nbsp;&nbsp; panel=panel.smoother,<br />
    &nbsp;&nbsp;&nbsp;xlab=&quot;Weight&quot;, ylab=&quot;Miles per Gallon&quot;, <br />
    &nbsp;&nbsp; main=&quot;MGP vs Weight by Horse Power&quot;)
  </code></p>
<p><a href="images/customtrellis.png"><img src="https://www.statmethods.net/advgraphs/trellis/smcustomtrellis.jpg"></a> click to view </p>
<h2>Going Further</h2>
<p>Lattice graphics are a comprehensive graphical system in their own right. Deepanyan Sarkar's book <a href="http://www.springer.com/statistics/computational/book/978-0-387-75968-5">Lattice: Multivariate Data Visualization with R </a> is the definitive reference. Additionally, see the <a href="http://ml.stat.purdue.edu/stat695t/writings/Trellis.User.pdf">Trellis User's Guide</a>. Dr. Ihaka has created a wonderful <a href="http://www.stat.auckland.ac.nz/~ihaka/787/lectures-trellis.pdf">set of slides</a> on the subject. An excellent early consideration of trellis graphs can be found in W.S. Cleveland's classic book <a href="https://www.amazon.com/Visualizing-Data-William-S-Cleveland/dp/0963488406">Visualizing Data</a>.</p>
<h2>To Practice</h2>
<p>Try this <a href="https://campus.datacamp.com/courses/data-visualization-in-r/a-quick-introduction-to-base-r-graphics?ex=7">interactive course on data visualization</a> which covers lattice graphs.</p>

<p>The <a href="http://cran.r-project.org/web/packages/ggplot2/index.html">ggplot2</a> package, created by Hadley Wickham, offers a powerful graphics language for creating elegant and complex plots. Its popularity in the R community has exploded in recent years. Origianlly based on Leland Wilkinson's <a href="http://www.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448">The Grammar of Graphics</a>, ggplot2 allows you to create graphs that represent both univariate and multivariate numerical and categorical data in a straightforward manner. Grouping can be represented by color, symbol, size, and transparency. The creation of trellis plots (i.e., conditioning) is relatively simple. <br /> <br />
  Mastering the <strong>ggplot2</strong> language can be challenging (see the <strong>Going Further</strong> section below for helpful resources). There is a helper function called <strong>qplot()</strong> (for quick plot) that can hide much of this complexity when creating standard graphs.</p>
<h2>qplot()</h2>
<p>The <strong>qplot()</strong> function can be used to create the most common graph types. While it does not expose <strong>ggplot</strong>'s full power, it can create a very wide range of useful plots. The format is:</p>
<p><code>
    qplot(<em>x</em>, <em>y</em>, data=, color=, shape=, size=, alpha=, geom=, method=, formula=, facets=, xlim=, ylim= xlab=, ylab=, main=, sub=)

  </code></p>
<p>where the options are:</p>
<table>
  <tr>
    <td><strong>option</strong></td>
    <td><strong>description</strong></td>
  </tr>
  <tr>
    <td>alpha</td>
    <td>Alpha transparency for overlapping elements expressed as a fraction between 0 (complete transparency) and 1 (complete opacity)</td>

  </tr>
  <tr>
    <td>color, shape, size, fill</td>
    <td>Associates the levels of variable with symbol color, shape, or size. For line plots, color associates levels of a variable with line color. For density and box plots, fill associates fill colors with a variable. Legends are drawn automatically.</td>

  </tr>
  <tr>
    <td>data</td>
    <td>Specifies a data frame</td>

  </tr>
  <tr>
    <td>facets</td>
    <td>Creates a trellis graph by specifying conditioning variables. Its value is expressed as <em>rowvar</em> ~ <em>colvar</em>. To create trellis graphs based on a single conditioning variable, use <em>rowvar</em>~. or .~<em>colvar</em>)</td>

  </tr>
  <tr>
    <td>geom</td>
    <td>Specifies the geometric objects that define the graph type. The geom option is expressed as a character vector with one or more entries. geom values include "point", "smooth", "boxplot", "line", "histogram", "density", "bar", and "jitter". </td>

  </tr>
  <tr>
    <td>main, sub</td>
    <td>Character vectors specifying the title and subtitle</td>

  </tr>
  <tr>
    <td>method, formula</td>
    <td>If geom="smooth", a loess fit line and confidence limits are added by default. When the number of observations is greater than 1,000, a more efficient smoothing algorithm is employed. Methods include "lm" for regression, "gam" for generalized additive models, and "rlm" for robust regression. The formula parameter gives the form of the fit.
      <br><br>
      For example, to add simple linear regression lines, you'd specify geom="smooth", method="lm", formula=y~x. Changing the formula to y~poly(x,2) would produce a quadratic fit. Note that the formula uses the letters x and y, not the names of the variables.
      <br><br>
      For method="gam", be sure to load the mgcv package. For method="rml", load the MASS package.

    </td>

  </tr>
  <tr>
    <td><em>x</em>, <em>y</em></td>
    <td>Specifies the variables placed on the horizontal and vertical axis. For univariate plots (for example, histograms), omit <em>y</em></td>

  </tr>
  <tr>
    <td>xlab, ylab</td>
    <td>Character vectors specifying horizontal and vertical axis labels</td>

  </tr>
  <tr>
    <td>xlim,ylim</td>
    <td>Two-element numeric vectors giving the minimum and maximum values for the horizontal and vertical axes, respectively</td>
  </tr>
</table>
<p><br /><em>Notes:</em></p>
<ul>
  <li>At present, ggplot2 cannot be used to create 3D graphs or mosaic plots.</li>
  <li>Use <strong>I(</strong><em>value</em><strong>)</strong> to indicate a specific value. For example <strong>size=z</strong> makes the size of the plotted points or lines proporational to the values of a variable z. In contrast, <strong>size=I(3)</strong> sets each point or line to three times the default size. </li>
</ul>
<p>Here are some examples using automotive data (car mileage, weight, number of gears, number of cylinders, etc.) contained in the <strong>mtcars</strong> data frame. </p>
<p><code># ggplot2 examples<br />
    library(ggplot2) <br />
    <br />
    # create factors with value labels <br />
    mtcars$gear &lt;- factor(mtcars$gear,levels=c(3,4,5),<br />
    &nbsp;&nbsp; labels=c(&quot;3gears&quot;,&quot;4gears&quot;,&quot;5gears&quot;)) <br />
    mtcars$am &lt;- factor(mtcars$am,levels=c(0,1),<br />
    &nbsp;&nbsp; labels=c(&quot;Automatic&quot;,&quot;Manual&quot;)) <br />
    mtcars$cyl &lt;- factor(mtcars$cyl,levels=c(4,6,8),<br />
    &nbsp;&nbsp; labels=c(&quot;4cyl&quot;,&quot;6cyl&quot;,&quot;8cyl&quot;)) <br /><br />
    # Kernel density plots for mpg<br />
    # grouped by number of gears (indicated by color)<br />
    qplot(mpg, data=mtcars, geom="density", fill=gear, alpha=I(.5), <br />
    &nbsp;&nbsp; main="Distribution of Gas Milage", xlab="Miles Per Gallon", <br />
    &nbsp;&nbsp; ylab="Density")<br /><br />
    # Scatterplot of mpg vs. hp for each combination of gears and cylinders<br />
    # in each facet, transmittion type is represented by shape and color<br />
    qplot(hp, mpg, data=mtcars, shape=am, color=am, <br />
    &nbsp;&nbsp; facets=gear~cyl, size=I(3),<br />
    &nbsp;&nbsp; xlab="Horsepower", ylab="Miles per Gallon")
    <br /><br />
    # Separate regressions of mpg on weight for each number of cylinders<br />
    qplot(wt, mpg, data=mtcars, geom=c("point", "smooth"), <br />
    &nbsp;&nbsp; method="lm", formula=y~x, color=cyl, <br />
    &nbsp;&nbsp; main="Regression of MPG on Weight", <br />
    &nbsp;&nbsp; xlab="Weight", ylab="Miles per Gallon")<br /><br />
    # Boxplots of mpg by number of gears <br />
    # observations (points) are overlayed and jittered<br />
    qplot(gear, mpg, data=mtcars, geom=c("boxplot", "jitter"), <br />
    &nbsp;&nbsp; fill=gear, main="Mileage by Gear Number",<br />
    &nbsp;&nbsp; xlab="", ylab="Miles per Gallon")

  </code></p>
<p>
  <a href="images/ggplotdensity.png"><img src="https://www.statmethods.net/advgraphs/ggplot2/smggplotdensity.jpg"></a>
  <a href="images/ggplotscatter.png"><img src="https://www.statmethods.net/advgraphs/ggplot2/smggplotscatter.jpg"></a>
  <a href="images/ggplotreg.png"><img src="https://www.statmethods.net/advgraphs/ggplot2/smggplotreg.jpg"></a>
  <a href="images/ggplotboxplot.png"><img src="https://www.statmethods.net/advgraphs/ggplot2/smggplotboxplot.jpg"></a></p>
<p>click to view </p>
<h2>Customizing ggplot2 Graphs</h2>
<p>Unlike base R graphs, the ggplot2 graphs are not effected by many of the options set in the <strong>par( )</strong> function. They can be modified using the <a href="http://docs.ggplot2.org/0.9.2.1/theme.html">theme()</a> function, and by adding graphic parameters within the qplot() function. For greater control, use <a href="http://docs.ggplot2.org/0.9.2.1/ggplot.html">ggplot()</a> and other functions provided by the package. Note that ggplot2 functions can be chained with "+" signs to generate the final plot.</p>
<code>
  library(ggplot2)<br /><br />
  p &lt;- qplot(hp, mpg, data=mtcars, shape=am, color=am, <br />
  &nbsp;&nbsp; facets=gear~cyl, main="Scatterplots of MPG vs. Horsepower",<br />
  &nbsp;&nbsp; xlab="Horsepower", ylab="Miles per Gallon")<br /><br />
  # White background and black grid lines<br />
  p + theme_bw()<br /><br />

  # Large brown bold italics labels<br />
  # and legend placed at top of plot<br />
  p + theme(axis.title=element_text(face="bold.italic", <br />
  &nbsp;&nbsp; size="12", color="brown"), legend.position="top")
</code></p>
<p><a href="images/ggplotcustomized.png"><img src="https://www.statmethods.net/advgraphs/ggplot2/smggplotcustomized.jpg"></a> click to view </p>
<h2>Going Further</h2>
<p>We have only scratched the surface here. To learn more, see the <a href="http://docs.ggplot2.org/">ggplot reference site</a>, and Winston Chang's excellent <a href="http://www.cookbook-r.com/">
    Cookbook for R</a> site. Though slightly out of date, <a href="http://www.amazon.com/ggplot2-Elegant-Graphics-Data-Analysis/dp/0387981403">ggplot2: Elegant Graphics for Data Anaysis</a> is still the definative book on this subject.</a></p>
<h2>To Practice</h2>
<p>Try the free first chapter of <a href="https://www.datacamp.com/courses/data-visualization-with-ggplot2-1">this interactive tutorial on ggplot2.</a></p>

<p>This section describes creating probability plots in R for both didactic purposes and for data analyses. </p>
<h2>Probability Plots for Teaching and Demonstration </h2>
<p>When I was a college professor teaching statistics, I used to have to draw normal distributions by hand. They always came out looking like bunny rabbits. What can I say?</p>
<p>R makes it easy to draw probability distributions and demonstrate statistical concepts. Some of the more common probability distributions available in R are given below. </p>
<table>
  <tr>
    <td><strong>distribution</strong></td>
    <td><strong>R name </strong></td>
    <td><strong>distribution</strong></td>
    <td><strong>R name </strong></td>
  </tr>
  <tr>
    <td><strong>Beta</strong></td>
    <td>beta</td>
    <td><strong>Lognormal</strong></td>
    <td>lnorm</td>
  </tr>
  <tr>
    <td><strong>Binomial</strong></td>
    <td>binom</td>
    <td><strong>Negative Binomial </strong></td>
    <td>nbinom</td>
  </tr>
  <tr>
    <td><strong>Cauchy</strong></td>
    <td>cauchy</td>
    <td><strong>Normal</strong></td>
    <td>norm</td>
  </tr>
  <tr>
    <td><strong>Chisquare</strong></td>
    <td>chisq</td>
    <td><strong>Poisson</strong></td>
    <td>pois</td>
  </tr>
  <tr>
    <td><strong>Exponential</strong></td>
    <td>exp</td>
    <td><strong>Student t </strong></td>
    <td>t</td>
  </tr>
  <tr>
    <td><strong>F</strong></td>
    <td>f</td>
    <td><strong>Uniform</strong></td>
    <td>unif</td>
  </tr>
  <tr>
    <td><strong>Gamma</strong></td>
    <td>gamma</td>
    <td><strong>Tukey</strong></td>
    <td>tukey</td>
  </tr>
  <tr>
    <td><strong>Geometric</strong></td>
    <td>geom</td>
    <td><strong>Weibull</strong></td>
    <td>weib</td>
  </tr>
  <tr>
    <td><strong>Hypergeometric</strong></td>
    <td>hyper</td>
    <td><strong>Wilcoxon</strong></td>
    <td>wilcox</td>
  </tr>
  <tr>
    <td><strong>Logistic</strong></td>
    <td>logis</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>
<p>For a comprehensive list, see <a href="http://en.wikibooks.org/wiki/R_Programming/Probability_Distributions">Statistical Distributions</a> on the R wiki. The functions available for each distribution follow this format: </p>
<table>
  <tr>
    <td><strong>name</strong></td>
    <td><strong>description</strong></td>
  </tr>
  <tr>
    <td><strong>d</strong><em>name</em>( ) </td>
    <td>density or probability function </td>
  </tr>
  <tr>
    <td><strong>p</strong><em>name</em>( ) </td>
    <td>cumulative density function </td>
  </tr>
  <tr>
    <td><strong>q</strong><em>name</em>( ) </td>
    <td>quantile function </td>
  </tr>
  <tr>
    <td>R<em>name</em>( ) </td>
    <td>random deviates </td>
  </tr>
</table>
<p>For example, <strong>pnorm(0)</strong> =0.5 (the area under the standard normal curve to the left of zero). <strong>qnorm(0.9)</strong> = 1.28 (1.28 is the 90th percentile of the standard normal distribution). <strong>rnorm(100) </strong>generates 100 random deviates from a standard normal distribution. </p>
<p>Each function has parameters specific to that distribution. For example, <strong>rnorm(100, m=50, sd=10)</strong> generates 100 random deviates from a normal distribution with mean 50 and standard deviation 10. </p>
<p>You can use these functions to demonstrate various aspects of probability distributions. Two common examples are given below.</p>
<p><code># Display the Student's t distributions with various<br />
    #
    degrees of freedom and compare to the normal distribution<br />
    <br />
    x &lt;- seq(-4, 4, length=100)<br />
    hx &lt;- dnorm(x)<br />
    <br />
    degf &lt;- c(1, 3, 8, 30)<br />
    colors &lt;- c(&quot;red&quot;, &quot;blue&quot;, &quot;darkgreen&quot;, &quot;gold&quot;, &quot;black&quot;)<br />
    labels &lt;- c(&quot;df=1&quot;, &quot;df=3&quot;, &quot;df=8&quot;, &quot;df=30&quot;, &quot;normal&quot;)<br />
    <br />
    plot(x, hx, type=&quot;l&quot;, lty=2, xlab=&quot;x value&quot;,<br />
    &nbsp;&nbsp;ylab=&quot;Density&quot;, main=&quot;Comparison of t Distributions&quot;)<br />
    <br />
    for (i in 1:4){<br />
    &nbsp;&nbsp;lines(x, dt(x,degf[i]), lwd=2, col=colors[i])<br />
    }<br />
    <br />
    legend(&quot;topright&quot;, inset=.05, title=&quot;Distributions&quot;,<br />
    &nbsp;&nbsp;labels, lwd=2, lty=c(1, 1, 1, 1, 2), col=colors)</code></p>
<p><a href="images/tdist.png"><img src="https://www.statmethods.net/advgraphs/probability/smtdist.jpg"></a> click to view </p>
<p><code># Children's IQ scores are normally distributed with a<br />
    # mean of 100 and a standard deviation of 15. What<br />
    # proportion of children are expected to have an IQ between<br />
    # 80 and 120?<br />
    <br />
    mean=100; sd=15<br />
    lb=80; ub=120<br />
    <br />
    x &lt;- seq(-4,4,length=100)*sd + mean<br />
    hx &lt;- dnorm(x,mean,sd)<br />
    <br />
    plot(x, hx, type=&quot;n&quot;, xlab=&quot;IQ Values&quot;, ylab=&quot;&quot;,<br />
    &nbsp;&nbsp;main=&quot;Normal Distribution&quot;, axes=FALSE)<br />
    <br />
    i &lt;- x &gt;= lb &amp; x &lt;= ub<br />
    lines(x, hx)<br />
    polygon(c(lb,x[i],ub), c(0,hx[i],0), col=&quot;red&quot;)
    <br />
    <br />
    area &lt;- pnorm(ub, mean, sd) - pnorm(lb, mean, sd)<br />
    result &lt;- paste(&quot;P(&quot;,lb,&quot;&lt; IQ &lt;&quot;,ub,&quot;) =&quot;,<br />
    &nbsp;&nbsp; signif(area, digits=3))<br />
    mtext(result,3)<br />
    axis(1, at=seq(40, 160, 20), pos=0)
  </code></p>
<p><a href="images/iq.png"><img src="https://www.statmethods.net/advgraphs/probability/smiq.jpg"></a> click to view </p>
<p>For a comprehensive view of probability plotting in R, see Vincent Zonekynd's <a href="http://zoonek2.free.fr/UNIX/48_R/07.html">Probability Distributions</a>. </p>
<h2>Fitting Distributions</h2>
<p>There are several methods of fitting distributions in R. Here are some options. </p>
<p>You can use the <strong>qqnorm( ) </strong>function to create a Quantile-Quantile plot evaluating the fit of sample data to the normal distribution. More generally, the <strong>qqplot( )</strong> function creates a Quantile-Quantile plot for any theoretical distribution. </p>
<p><code># Q-Q plots<br />
    par(mfrow=c(1,2))<br />
    <br />
    # create sample data <br />
    x &lt;- rt(100, df=3)<br />
    <br />
    # normal fit <br />
    qqnorm(x);
    qqline(x)<br />
    <br />
    # t(3Df) fit <br />
    qqplot(rt(1000,df=3), x, main=&quot;t(3) Q-Q Plot&quot;, <br />
    &nbsp;&nbsp; ylab=&quot;Sample Quantiles&quot;)<br />
    abline(0,1) </code></p>
<p><a href="images/probfit.png"><img src="https://www.statmethods.net/advgraphs/probability/smprobfit.jpg"></a> click to view</p>
<p>The <strong>fitdistr(</strong><em> </em><strong>)</strong> function in the <strong>MASS</strong> package provides maximum-likelihood fitting of univariate distributions. The format is <strong>fitdistr(</strong><em>x</em>, <em>densityfunction</em><strong>)</strong> where x is the sample data and densityfunction is one of the following: &quot;beta&quot;, &quot;cauchy&quot;, &quot;chi-squared&quot;, &quot;exponential&quot;, &quot;f&quot;, &quot;gamma&quot;, &quot;geometric&quot;, &quot;log-normal&quot;, &quot;lognormal&quot;, &quot;logistic&quot;, &quot;negative binomial&quot;, &quot;normal&quot;, &quot;Poisson&quot;, &quot;t&quot; or &quot;weibull&quot;. </p>
<p><code># Estimate parameters assuming log-Normal distribution <br />
    <br />
    # create some sample data<br />
    x &lt;- rlnorm(100)<br />
    <br />
    # estimate paramters<br />
    library(MASS)<br />
    fitdistr(x, &quot;lognormal&quot;)
  </code></p>
<p>Finally R has a wide range of goodness of fit tests for evaluating if it is reasonable to assume that a random sample comes from a specified theoretical distribution. These include chi-square, Kolmogorov-Smirnov, and Anderson-Darling. </p>
<p>For more details on fitting distributions, see Vito Ricci's <a href="http://cran.r-project.org/doc/contrib/Ricci-distributions-en.pdf">Fitting Distributions with R</a>. For general (non R) advice, see Bill Huber's <a href="http://www.quantdec.com/envstats/misc/Fitting%20data%20to%20distributions.pdf">Fitting Distributions to Data</a>. </p>
<h2>To Practice </h2>
<p><a href="https://www.datacamp.com/courses/exploratory-data-analysis">Try this interactive course</a> on exploratory data analysis.<p>

<p>The <a href="http://cran.r-project.org/web/packages/vcd/index.html">vcd </a>package provides a variety of methods for visualizing multivariate categorical data, inspired by <a href="http://www.math.yorku.ca/SCS/friendly.html">Michael Friendly</a>'s wonderful &quot;<em>Visualizing Categorical Data</em>&quot;. Extended mosaic and association plots are described here. Each provides a method of visualizng complex data and evaluating deviations from a specified independence model. For more details, see <a href="http://cran.r-project.org/web/packages/vcd/vignettes/strucplot.pdf">The Strucplot Framework.</a></p>
<h2>Mosaic Plots </h2>
<p>For extended mosaic plots, use <strong>mosaic(x, condvar=, data=)</strong> where <strong>x</strong> is a table or formula, <strong>condvar=</strong> is an optional conditioning variable, and <strong>data=</strong> specifies a data frame or a table. Include <strong>shade=TRUE</strong> to color the figure, and <strong>legend=TRUE</strong> to display a legend for the Pearson residuals. </p>
<p><code># Mosaic Plot Example<br />
    library(vcd)<br />
    mosaic(HairEyeColor, shade=TRUE, legend=TRUE) </code></p>
<p><a href="images/mosaic1.png"><img src="https://www.statmethods.net/advgraphs/mosaic/smmosaic1.png"></a> click to view</p>
<h2>Association Plots </h2>
<p>To produce an extended association plot use <strong>assoc(x, row_vars, col_vars) </strong>where <strong>x </strong>is a contingency table, <strong>row_vars</strong> is a vector of integers giving the indices of the variables to be used for the rows, and <strong>col_vars </strong>is a vector of integers giving the indices of the variables to be used for the columns of the association plot. </p>
<p><code># Association Plot Example<br />
    library(vcd)<br />
    assoc(HairEyeColor, shade=TRUE) </code></p>
<p><a href="images/assoc1.png"><img src="https://www.statmethods.net/advgraphs/mosaic/smassoc1.png"></a> click to view </p>
<h2>Going Further</h2>
<p>Both functions are complex and offer multiple input and output options. See <strong>help(mosaic) </strong>and <strong>help(assoc)</strong> for more details. </p>
<h2>To Practice </h2>
<p> To practice plotting in R, try <a href="https://www.datacamp.com/courses/data-visualization-in-r">this course in data visualization with R</a>.</p>

<p><strong>Correlograms</strong> help us visualize the data in correlation matrices. For details, see <a href="http://www.math.yorku.ca/SCS/Papers/corrgram.pdf">Corrgrams: Exploratory displays for correlation matrices</a>. </p>
<p>In R, correlograms are implimented through the <strong>corrgram(x, order = , panel=, lower.panel=, upper.panel=, text.panel=, diag.panel=)</strong> function in the <a href="http://cran.r-project.org/web/packages/corrgram/index.html">corrgram</a> package. </p>
<h2>Options</h2>
<p><strong>x </strong>is a data frame with one observation per row. </p>
<p><strong>order=TRUE</strong> will cause the variables to be ordered using principal component analysis of the correlation matrix. </p>
<p><strong>panel</strong>= refers to the off-diagonal panels. You can use<strong> lower.panel=</strong> and <strong>upper.panel</strong>= to choose different options below and above the main diagonal respectively. <strong> text.panel=</strong> and <strong>diag.panel=</strong> refer to the main diagnonal. Allowable parameters are given below. </p>
<p><strong><em>off diagonal panels</em><br />
  </strong><strong>panel.pie</strong> (the filled portion of the pie indicates the magnitude of the correlation)<br />
  <strong>panel.shade</strong> (the depth of the shading indicates the magnitude of the correlation)<br />
  <strong>panel.ellipse</strong> (confidence ellipse and smoothed line)<br />
  <strong>panel.pts</strong> (scatterplot) </p>
<p><strong><em>main diagonal panels </em><br />
  </strong><strong>panel.minmax</strong> (min and max values of the variable)<br />
  <strong>panel.txt</strong> (variable name).</p>
<p><code># First Correlogram Example<br />
    library(corrgram)<br />
    corrgram(mtcars, order=TRUE, lower.panel=panel.shade,<br />
    &nbsp;&nbsp;upper.panel=panel.pie, text.panel=panel.txt,<br />
    &nbsp;&nbsp;main=&quot;Car Milage Data in PC2/PC1 Order&quot;) </code></p>
<p><a href="images/corrgram1.png"><img src="https://www.statmethods.net/advgraphs/correlograms/smcorrgram1.jpg"></a> click to view </p>

<p><code># Second Correlogram Example<br />
    library(corrgram)<br />
    corrgram(mtcars, order=TRUE, lower.panel=panel.ellipse,<br />
    &nbsp;&nbsp;upper.panel=panel.pts,
    text.panel=panel.txt,<br />
    &nbsp;&nbsp;diag.panel=panel.minmax,
    <br />
    &nbsp; main=&quot;Car Mileage Data in PC2/PC1 Order&quot;) </code></p>
<p><a href="images/corrgram2.png"><img src="https://www.statmethods.net/advgraphs/correlograms/smcorrgram2.jpg"></a> click to view </p>

<p><code># Third Correlogram Example<br />
    library(corrgram)<br />
    corrgram(mtcars, order=NULL, lower.panel=panel.shade,<br />
    &nbsp;&nbsp;upper.panel=NULL, text.panel=panel.txt,<br />
    &nbsp;&nbsp;main=&quot;Car Milage Data (unsorted)&quot;)</code></p>
<p><a href="images/corrgram3.png"><img src="https://www.statmethods.net/advgraphs/correlograms/smcorrgram3.jpg"></a> click to view </p>
<h2>Changing the colors in a correlogram</h2>
<p>You can control the colors in a correlogram by specifying 4 colors in the <strong>colorRampPalette( ) </strong>function within the <strong>col.corrgram( )</strong> function. Here is an example.</p>
<p><code># Changing Colors in a Correlogram<br />
    library(corrgram) <br />
    col.corrgram &lt;- function(ncol){ &nbsp;&nbsp;<br />
    &nbsp;&nbsp;colorRampPalette(c(&quot;darkgoldenrod4&quot;, &quot;burlywood1&quot;,<br />
    &nbsp;&nbsp;&quot;darkkhaki&quot;, &quot;darkgreen&quot;))(ncol)} <br />
    corrgram(mtcars, order=TRUE, lower.panel=panel.shade, <br />
    &nbsp;&nbsp; upper.panel=panel.pie, text.panel=panel.txt, <br />
    &nbsp;&nbsp; main=&quot;Correlogram of Car Mileage Data (PC2/PC1 Order)&quot;)</code></p>
<p><a href="../images/corrgram.png"><img src="../images/smcorrgram.jpg"></a> click to view </p>
<h2>Going Further</h2>
<p>Try some of the exercises in this <a href="https://www.datacamp.com/courses/intro-to-statistics-with-r-correlation-and-linear-regression">interactive course</a> which covers correlational analysis.</p>

<p>There are a several ways to interact with R graphics in real time. Three methods are described below. </p>
<h2>GGobi</h2>
<p><a href="http://www.ggobi.org/">GGobi</a> is an open source visualization program for exploring high-dimensional data. It is freely available for MS Windows, Linux, and Mac platforms. It supports linked interactive scatterplots, barcharts, parallel coordinate plots and tours, with both brushing and identification. A good tutorial is included with the <a href="http://www.ggobi.org/docs/manual.pdf">GGobi manual</a>. You can download the software <a href="http://www.ggobi.org/downloads/">here</a>. </p>
<p>Once GGobi is installed, you can use the <strong>ggobi( )</strong> function in the package <strong>rggobi</strong> to run <strong>GGobi</strong> from within R <strong>.</strong> This gives you interactive graphics access to all of your R data! See <a href="http://www.ggobi.org/rggobi/introduction.pdf">An Introduction to RGGOBI</a>. </p>
<p><code># Interact with R data using GGobi<br />
    library(rggobi)<br />
    g &lt;- ggobi(mydata)
  </code></p>
<p><a href="images/ggobi.jpg"><img src="https://www.statmethods.net/advgraphs/images/ggobi.jpg"></a> click to view </p>

<h2>iPlots</h2>
<p>The <a href="https://www.rdocumentation.org/packages/iplots/versions/1.1-7">iplots</a> package provide interactive mosaic plots, bar plots, box plots, parallel plots, scatter plots and histograms that can be linked and color brushed. <strong>iplots</strong> is implimented through the Java GUI for R. For more information, see the <a href="http://www.iplots.org/">iplots website</a>. </p>
<p><code># Install iplots<br />
    install.packages(&quot;iplots&quot;,dep=TRUE)<br />
    <br />
    # Create some linked plots <br />
    library(iplots)<br />
    cyl.f &lt;- factor(mtcars$cyl)<br />
    gear.f &lt;- factor(mtcars$factor)
    <br />
    attach(mtcars)
    <br />
    ihist(mpg) # histogram <br />
    ibar(carb) # barchart<br />
    iplot(mpg, wt) # scatter plot<br />
    ibox(mtcars[c(&quot;qsec&quot;,&quot;disp&quot;,&quot;hp&quot;)]) # boxplots <br />
    ipcp(mtcars[c(&quot;mpg&quot;,&quot;wt&quot;,&quot;hp&quot;)]) # parallel coordinates<br />
    imosaic(cyl.f,gear.f) # mosaic plot
  </code></p>
<p>On windows platforms, hold down the <strong>cntrl key </strong>and move the mouse over each graph to get identifying information from points, bars, etc. </p>
<p><a href="images/iplots.jpg"><img src="https://www.statmethods.net/advgraphs/images/iplots.jpg"></a> click to view </p>

<h2>Interacting with Plots (Identifying Points) </h2>
<p> R offers two functions for identifying points and coordinate locations in plots. With <strong>identify()</strong>, clicking the mouse over points in a graph will display the row number or (optionally) the rowname for the point. This continues until you select <strong>stop </strong>. With <strong>locator() </strong>you can add points or lines to the plot using the mouse. The function returns a list of the (x,y) coordinates. Again, this continues until you select <strong>stop</strong>. </p>
<p><code># Interacting with a scatterplot <br />
    attach(mydata)<br />
    plot(x, y) # scatterplot<br />
    identify(x, y, labels=row.names(mydata)) # identify points <br />
    coords &lt;- locator(type=&quot;l&quot;) # add lines<br />
    coords # display list
  </code></p>
<h2>Other Interactive Graphs </h2>
<p>See <a href="../graphs/scatterplot.html">scatterplots</a> for a description of rotating 3D scatterplots in R. </p>
<h2>Other Visualization Programs</h2>
<p>Explore building interactive plots with ggvis from RStudio <a href="https://www.datacamp.com/courses/ggvis-data-visualization-r-tutorial">in this course.</a> </p>

<script type='text/javascript' src='readbook.js'></script>
</pre></body></html>
