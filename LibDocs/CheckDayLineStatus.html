<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<html>
<head>
<title>CheckDayLineStatus</title>
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src='https://williamkpchan.github.io/mainscript.js'></script>
<script src="https://williamkpchan.github.io/LibDocs/stkComments.js"></script>
<script src="https://williamkpchan.github.io/showAllCharts.js"></script>

<script src="https://williamkpchanhp.github.io/LibDocs/longHistList.js"></script>
<script src="https://williamkpchan.github.io/LibDocs/rchart/RGraph.common.core.js" ></script>
<script src="https://williamkpchan.github.io/LibDocs/rchart/RGraph.line.js"></script>
<script src="https://williamkpchan.github.io/LibDocs/rchart/RGraph.drawing.yaxis.js"></script>
<script src="https://williamkpchan.github.io/LibDocs/rchart/RGraph.common.dynamic.js"></script>
<script src="https://williamkpchan.github.io/LibDocs/rchart/RGraph.common.tooltips.js"></script>
<script src="https://williamkpchanhp.github.io/codeList.js"></script>
<script src="measuretrend.js"></script>
<script src='https://cdn.plot.ly/plotly-2.34.0.min.js'></script>
<script>
  var showTopicNumber = false;
  var topicEnd = "&emsp;";
  var bookid = "CheckDayLineStatus"
  var markerName = "h2"
</script>

<style>
body {width:98%;margin-left: 1%; font-size:24px;}
#dateTime {  text-align: left;}
#cmtNote, #instruction, #message, #usstock{display:none;}
#amtLst {font-size:12px;}
#actions {font-size:12px; text-align: left; tab-size: 8; margin-left: 5%;}
select {border-radius:10px; font-size:20px;background-color:black; color:brown;}
#ohlcDiv {display:inline-block; width:85%; height:700px;}
#linechart {display:inline-block; width:85%; height:700px;}
#StkStatus, #Signatures, #twoTrendLineUp, #twotrendLineDn {font-size:20px;}
@media only screen and (max-width: 1080px) {
 body {width:100%;margin-left: 0%; font-size:24px;
  white-space: pre-wrap; word-wrap: break-word;}

  .mainFrame {width:100%; font-size: 24px}
  pre {width:100%; font-size: 24px}
  img {width:100%}
  button {margin-top: 5px;}
  #schRst, #markLst {font-size: 20px}
  select option { font-size: 18px, line-height: 60%;}
}

</style>

</head>
<body onkeypress="chkKey()">

<center>
<h1>CheckDayLineStatus</h1>
<span class="goldword">&rarr;</span> <span id="dateAndTime" onclick="showDateAndTime()"><script>showDateAndTime();</script></span><br>
<div id="toc" class="toc"></div>
</center>
<br>
<pre>
<h2>statistics</h2><span class="redbut" onclick="updateStat('CheckDayLineStatus');")>Load stat history</span> <span class="greenbut" onclick="removerec('CheckDayLineStatus');")>Remove first stat record</span><span class="yellowbut" onclick="alertStat();")>copy stat</span><span class="redbut" onclick="alertM0uXM1();")>copy M0uXM1</span><span id="stkNum"></span>
<k>statistics history</k>
<div id="prevstatistics"></div>

<pk>current statistics</pk>
<div id="currentstatistics"></div>

<h2><dr>M3XM4<dr></h2>
<div class="totalcount" id="M3XM4Count"></div>
<div id="M3XM4"></div>

<h2><dr>M2XM3<dr></h2>
<div class="totalcount" id="M2XM3Count"></div>
<div id="M2XM3"></div>

<h2><r>10日线升穿20日线</r></h2>
<div id="M1uXM2"></div>

<h2><gr>10日线跌穿20日线</gr></h2>
<div id="M1dXM2"></div>

<h2><o>10日线已经升穿20日线</o></h2>
<div class="totalcount" id="M1XM2Count"></div>
<div id="M1XM2"></div>

<h2><r>5日线升穿40日线<r><br></h2>
<div class="totalcount" id="M0XM4Count"></div>
<div id="M0XM4"></div>

<h2><pk>5日线升穿10日线<pk></h2>
<div class="totalcount" id="M0uXM1Count"></div>
<div id="M0uXM1"></div>

<h2><o>5日线已经穿10日线<o></h2>
<div class="totalcount" id="M0ContUpM1Count"></div>
<div id="M0ContUpM1"></div>

<h2><gr>5日线跌穿10日线<gr></h2>
<div class="totalcount" id="M0dXM1Count"></div>
<div id="M0dXM1"></div>

<h2><gr>5日线跌穿10日线<gr></h2>
<div class="totalcount" id="M0ContDnM1Count"></div>
<div id="M0ContDnM1"></div>

<h2>StkStatus</h2>
<div id="StkStatus"></div>

<h2>twoTrendLineUp</h2>
<div class="totalcount">Total: <span id="twoTrendLineUpCnt"></span></div>
<div id="twoTrendLineUp"></div>

<h2>fiveTrendLineUp</h2>
Total: <span class="totalcount" id="LineSignaturescount"></span>
<div id="LineSignatures"></div>

<h2>twoTrendLineDn<br></h2>
<div class="totalcount">Total: <span id="twotrendLineDnCnt"></span></div>
<div id="twotrendLineDn"></div>

<h2><r>goingUp</r></h2>
<!--span class="redbut" onclick='localStorage.setItem("batchMinuteStatusCheck", batchMinuteCheckList); window.open("batchMinuteStatusCheck.html");'>store to batchMinuteStatusCheck</span-->
Total: <span class="totalcount" id="HLSignaturescount"></span>
<div id="HLSignatures"></div>

<h2>doubleUp</h2>
Total: <span class="totalcount" id="doubleUpcount"></span>
<div id="doubleUp"></div>

<h2>TripleUp</h2>
Total: <span class="totalcount" id="TripleUpcount"></span>
<div id="TripleUp"></div>

<h2><lg>GoingDn</lg></h2>
Total: <span class="totalcount" id="GoingDncount"></span>
<div id="GoingDn"></div>

<h2>doubleDn</h2>
Total: <span class="totalcount" id="doubleDncount"></span>
<div id="doubleDn"></div>

<h2>TripleDn</h2>
Total: <span class="totalcount" id="TripleDncount"></span>
<div id="TripleDn"></div>

</div>

</pre>

<script>
  // collectStkData(i) is the work horse
  codetable = ['02800','00700','09988','03690','00883','02828','01810','01024','00857','00939','02318','09926','01299','03033','03968','00941','01398','00522','09618','00388','00386','00005','01211','02899','03988','09999','01088','09888','00016','01288','02015','02269','09868','09961','01816','02382','00992','01919','01109','00981','00836','00001','09633','01093','02601','01910','00027','00669','06690','02020','00011','02388','00916','01928','00020','00175','02628','00291','01833','01378','00728','02359','09626','00002','02331','06862','01113','00780','00006','01801','01171','00762','09901','02688','03993','06618','01548','02618','09992','00288','06160','02319','01766','00285','01972','01800','00003','00960','06030','01658','00966','01138','02057','00688','06881','01336','03908','02313','01898','00968','02333','03692','03328','01347','01038','00788','03888','09987','01339','01177','02018','02328','01099','02883','00135','01193','01876','06865','02338','01209','03800','00316','01818','00358','02600','01071','01913','00241','00019','01997','03067','02380','00868','03998','02202','00322','02588','00819','00998','00384','00763','01787','02099','00101','00425','00914','03898','00570','01797','00390','00257','00267','00012','00066','06186','00270','00881','03320','02400','00136','02013','03618','01066','01908','01030','00683','06823','01798','03323','01208','03759','01952','06088','01918','01772','00467','01186','03969','01302','00921','01357','06110','09969','01929','02666','00772','06078','00696','03311','00293','00371','03900','00956','02162','02607','00991','06855','02238','00083','01776','02386','06818','00220','00576','06060','01157','00017','06830','03808','01044','02357','00142','03347','01359','06098','01415','00354','01179','00014','03110','02196','01128','00189','03032','00123','01896','02343','00934','00867','01368','00995','00177','00552','01883','00639','00151','09922','00489','00152','00148','00586','01381','01530','00853','02208','01882','00813','03360','00799','00598','02096','00667','09698','01610','01618','02888','01821','03738','06066','02186','06699','00880','02128','00884','01072','06886','00874','01070','01516','00551','06049','02669','02257','01513','09995','02255','00694','01681','01999','01508','00631','01478','01951','01385','00777','01448','00302','01055','00525','01199','02039','01060','03613','00004','00579','00338','00817','02869','02638','00856','00548','01963','06869','00081','00363','00590','00303','01958','00200','03377','00317','03709','01579','01316','00656','01119','01811','00341','06099','00909','02689','03319','00087','03958','02233','00297','01907','02145','02276','01888','01313','00861','01310','00038','06185','09668','09959','02777','00345','00010','03899','01666','02005','09966','00460','02877','00023','01238','00440','06808','00179','00855','00596','02866','02285','00347','06666','01995','01877','02362','06127','01428','01691','02158','01515','02155','03983','01600','00165','02801','00710','09911','00708','00670','02611','06837','00357','02252','00308','00823','01613','02009','02823','02822','07226','07299','02840','01858','01860','07200','07288','03037','00412','00751','02727','02356','02342','06178','03188','00778','00636','02500','07568','07522','07552','00182','07500','03606','06969','00268','00144','00564','03668','00300','06181','01698','02556','01164','01468'];
  // console.log("1: ",codetable.includes("00400"));

  // mustAdd = mustAdd.split(" ")
  // codetable = codetable.concat(mustAdd)
  // console.log("2: ",codetable.includes("00400"));

  codetable = [...new Set(codetable)]
  document.getElementById("stkNum").innerHTML = " <u>Total stks</u>: "+ codetable.length

  fraudSTK = fraudSTK.split(" ")
  ignoreSTK = ignoreSTK.split(" ")
  fraudSTK = fraudSTK.concat(ignoreSTK)
  fraudSTK = [...new Set(fraudSTK)]

  codetable = codetable.filter(val => !fraudSTK.includes(val));
  // console.log("3: ",codetable.includes("00400"));

  codetableLen = codetable.length
  allowtoplaysound = false
      // loop to collect data and chkCross, results in here
     upcrossResulttxt = "";
     NewUpcross = ""
     NewDncross = ""
     NewHUpcross = ""
     NewLDncross = ""
     HContUp = ""
     LContDn = ""
     MContUp = ""
     batchCheckList = ""
     batchMinuteCheckList = ""
     HLSignaturescount = 0
     doubleUpcount = 0
     TripleUpcount = 0
     GoingDncount = 0
     doubleDncount = 0
     TripleDncount = 0

     LineSignaturescount = 0
     upcrossCnt = 0
     dncrossCnt = 0
     hupcrossCnt = 0
     ldncrossCnt = 0
     MContUpCnt = 0
     MContDnCnt = 0

     thestkdata = [];
     dateLst = [];
     openLst = [];
     highLst = [];
     lowLst = [];
     midLst = [];
     closeLst = [];
     amtLst = [];
     startIntv = 5;
     stkName = "";
     period = 75;
     todayDay = new Date().getDate();

      dataStatus = "M"
      intv1 = startIntv  // 5
      intv2 = 2*intv1    // 10
      intv3 = 4*intv1    // 20
      intv4 = 6*intv1    // 30
      intv5 = 8*intv1    // 40
      intv6 = 9*intv1
      intv7 = 10*intv1
      intv8 = 11*intv1
      intv9 = 12*intv1
      halfNum = Math.round(intv1/2)

      stkpriceDataArr = [];
      stkList = 恒指成分.split(' ');
      stkPointer = 0;
      titleText = "";
      starti = 0;
      chartColor = ['white',
                    'red','#c80','#c60','#c40',
                    '#0f4','#066','#086','#084',
                    'purple','purple']

      attentionList = ""

      var options = '';  // build the List select option
      for (var i = 0; i < allListNames.length; i++) {
         options += '<option value="' + allListNames[i]+ '">' + allListNames[i] + '</option>';
      }
      $("#selectList").html(options);

      if (localStorage.getItem("attentionList") === null) {
        localStorage.attentionList = "07500";
      } else{
        attentionList = localStorage.getItem("attentionList").split(',');
      }

      // load localStorage.savedCodeList
      if (localStorage.getItem("savedCodeList") === null) {
        quickCodeList = ["110000"];
        localStorage.savedCodeList = quickCodeList;
      } else{
        quickCodeList = localStorage.getItem("savedCodeList").split(',');
      }

      // added extra links
      bigVolHeader = "http://www.etnet.com.hk/www/tc/stocks/realtime/quote_transaction.php?code="
      shortsellHeader = "http://www.aastocks.com/tc/stocks/analysis/stock-short-selling-ratio.aspx?symbol="
      newshead = "http://www.aastocks.com/tc/stocks/analysis/stock-aafn/"
      newstail = "/0/all/1"

      // main loop
      M3XM4Count = 0
      M2XM3Count = 0
      M1XM2Count = 0
      M0XM4Count = 0
      M0uXM1Count = 0
      M0ContUpM1Count = 0

      M0dXM1Count = 0
      M0ContDnM1Count = 0
      totalmtweight = 0

      twoTrendLineUpCnt = 0
      fiveTrendLineUpCnt = 0
      twotrendLineDnCnt = 0

// Concurrent request limit
const MAX_CONCURRENT_REQUESTS = 5; // Set the maximum number of concurrent requests

// Queue to manage concurrent requests
const requestQueue = [];
let activeRequests = 0;

// Function to process the next request in the queue
async function processQueue() {
 if (activeRequests < MAX_CONCURRENT_REQUESTS && requestQueue.length > 0) {
  activeRequests++;
  const request = requestQueue.shift();
  await request();
  activeRequests--;
  processQueue();
 }
}

// Add requests to the queue
codetable.forEach(code => {
 requestQueue.push(async () => {
  const result = await collectStkData(code);
 });
});

// Start processing the queue
processQueue();


      function updateStat(statname) {
      // update stat
        prevstat = localStorage.getItem(statname);
        if (prevstat === null) { prevstat = "" }

        currentStat = document.getElementById("currentstatistics").innerHTML
        document.getElementById("prevstatistics").innerHTML = prevstat +",<br>"+ currentStat
        localStorage.setItem(statname, 
        document.getElementById("prevstatistics").innerHTML)
        window.location = '#currentstatistics';
        window.scrollTo(window.scrollX, window.scrollY - 750);
        localStorage.setItem("batchMinuteStatusCheck", batchCheckList)
      }

      function removerec(statname) {
        currentStat = document.getElementById("prevstatistics").innerHTML
        currentStat = currentStat.split(',<br>')
        currentStat.shift();
        //currentStat.pop();
        localStorage.setItem(statname, currentStat)
        document.getElementById("prevstatistics").innerHTML = currentStat
      }

      function askforCode() {
        var tempCode = prompt("Code Number:", "");
        if (tempCode != null && tempCode != ""){

            codewidth = tempCode.length
            if(codewidth <= 5){
              theCode = "00000"+tempCode;
              codewidth = theCode.length;
              theCode = theCode.slice(codewidth-5, codewidth);
              codewidth = theCode.length; //update to be used later
            }else{
              theCode = tempCode
            }

           storeCode(theCode)
           collectStkData(theCode)
        }
      }

      function collectStkData(theCode) {

        storeCode(theCode);
          if( theCode.substring(0, 2) == "us"){
              // number of day klines shold be small to avoid slow response, even drop out
              theurl = 'https://web.ifzq.gtimg.cn/appstock/app/usfqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,42,qfq';
              imageCode = theCode
          }else{

            if(theCode == "110000"){
             theCode = "HSI"; imageCode = "110000"
            }

          codewidth = theCode.length
          if(theCode == "HSI"){
              theurl = 'https://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&param=hk' + theCode + ',day,,,42,qfq';
              imageCode = "110000"
          }else{

            if(codewidth <= 5){
              theCode = "00000"+theCode;
              codewidth = theCode.length;
              theCode = theCode.slice(codewidth-5, codewidth);
              codewidth = theCode.length; //update to be used later
              theStartCode = theCode
              imageCode = theCode
              theurl = 'https://web.ifzq.gtimg.cn/appstock/app/hkfqkline/get?_var=kline_dayqfq&param=hk' + theCode + ',day,,,42,qfq';
            }else{
              codewidth = theCode.length
              if((codewidth == 6) && !hsReservedCode.includes(theCode)){
                 if (theCode.charAt(0) == "6"){
                    imageCode = theCode+".sh"; // note this comes before following line
                    theCode = "sh"+theCode; 
                 }else{
                    imageCode = theCode+".sz";
                    theCode = "sz"+theCode
                 }
                 theStartCode = theCode
                 theurl = 'https://web.ifzq.gtimg.cn/appstock/app/fqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,42,qfq';
              }else if(codewidth == 9){
                imageCode = theCode
                theCode = theCode.substring(7, 9) + theCode.substring(0, 6);
                theStartCode = theCode

                theurl = 'https://web.ifzq.gtimg.cn/appstock/app/fqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,42,qfq';
              }else{
                theurl = 'https://web.ifzq.gtimg.cn/appstock/app/fqkline/get?_var=kline_dayqfq&param=' + theCode + ',day,,,42,qfq';
                theStartCode = theCode
                imageCode = theCode
              }
            }
          }
        }

          theStartCode = theCode;
          thedrawdata = [];
          amtLst.length = 0;

          $.get(theurl).done(function(rawJSON) { 
              rawJSON = eval(rawJSON) // this is the object already
              var keys = Object.keys(rawJSON); // read the structure keys ["code", "msg", "data"]
              const valuation = rawJSON.data[`hk${theCode}`].qt[`hk${theCode}`][44] // unit in 0.1 billion

              var insideDatakey = Object.keys(rawJSON)[2] //
              // myobj[Object.keys(myobj)[0]] this is the extract method
      
              var thedata = rawJSON[Object.keys(rawJSON)[2]]
              thestkkey = Object.keys(thedata)[0] // this is the stk key name
              var tempdata = thedata[Object.keys(thedata)[0]];
              thestkdata = tempdata[Object.keys(tempdata)[0]]; // real data here, this is whole dataset

              for(i=(thestkdata.length-12);i<thestkdata.length;i++){
                    thedate = thestkdata[i][0];  // date
                    if(codewidth <= 5){
                      theAmtIdx = 8;
                    }else{
                      theAmtIdx = 5;
                    }

                    theamt = Math.round(Number(thestkdata[i][theAmtIdx]));
                    if(codewidth > 5){
                      if(theCode.slice(0, 5) == "sh688"){
                        theamt = Math.round(theamt * Number(thestkdata[i][2])/10000);
                      }else{
                        theamt = Math.round(theamt * Number(thestkdata[i][2])/100);
                      }
                    }

                    theamt = theamt.toString().replace(/\B(?=(\d{4})+(?!\d))/g, ",");
                    $("#turnover").prepend( theamt,"w ");
              }
      
              theNameObj = tempdata[Object.keys(tempdata)[1]];
              theNameObjName  = theNameObj[Object.keys(theNameObj)[0]];
              stkName = theNameObjName[1]

              /* data is arranged in days array, tempdata[320] is last set
              tempdata[320][0]  // date, tempdata[320][1]  // open, tempdata[320][3]  // high
              tempdata[320][4]  // low, tempdata[320][2]  // close */
      
              //period + intv1, the chartwidth + max trend interval
              //starti = thestkdata.length - (parseInt(period) + parseInt(intv1)) -5; 
              starti = thestkdata.length - 41; 


              dateLst = [];
              openLst = [];
              highLst = [];
              lowLst = [];
              midLst = [];
              closeLst = [];
              amtLst = [];
              amtNumber = [];

              for (let i = starti; i < thestkdata.length; i++) {
                  dateLst.push(thestkdata[i][0]);
                  openLst.push(Number(thestkdata[i][1]));
                  highLst.push(Number(thestkdata[i][3]));
                  lowLst.push(Number(thestkdata[i][4]));
                  midLst.push((Number(thestkdata[i][3]) + Number(thestkdata[i][4]))/2);
                  closeLst.push(Number(thestkdata[i][2]));
                  amtNumber.push(Number(thestkdata[i][8]));
                  amtvalue = "&emsp;" + Math.round(Number(thestkdata[i][8])).toString().replace(/\B(?=(\d{4})+(?!\d))/g, ",") +"w ";
                  amtLst.push(amtvalue);
              }
              // redraw();  // this line must be inside the AJAX because AJAX run last

              lastPrice = closeLst[closeLst.length-1]
              prevPrice = closeLst[closeLst.length-2]
              priceDiff = (lastPrice - prevPrice)/lastPrice

              lastTradeDay = dateLst[dateLst.length-1].substring(8, 10)
              if(todayDay != lastTradeDay){
                stkName = stkName+"<y>*</y>"
              }

              // calc 10 day average
              amtavg = averageOfLastTen(amtNumber);

              lastamt = amtLst[amtLst.length-1]
              lastamt = Number(lastamt.replace(/^.*?;|w.*/g, "").replace(/,/g, ""))

              mtweight = priceDiff * lastamt/10000 // calc the mtweight for final summation

              if(lastamt > 0 & (todayDay == lastTradeDay)){
                totalmtweight = totalmtweight + mtweight // sum the totalmtweight
  
                chkCross(stkName, highLst, midLst, lowLst, closeLst, amtLst, theCode, lastPrice) // must put inside the RGraph.AJAX.getJSON

                lastpointer = closeLst.length-1
                prevpointer = lastpointer-1
                pprevpointer = lastpointer-2
                ppprevpointer = lastpointer-3

                ppprevH = highLst[ppprevpointer]
                ppprevM = midLst[ppprevpointer]
                ppprevL = lowLst[ppprevpointer]
                ppprevC = closeLst[ppprevpointer]

                pprevH = highLst[pprevpointer]
                pprevM = midLst[pprevpointer]
                pprevL = lowLst[pprevpointer]
                pprevC = closeLst[pprevpointer]

                prevH = highLst[prevpointer]
                prevM = midLst[prevpointer]
                prevL = lowLst[prevpointer]
                prevC = closeLst[prevpointer]

                curH = highLst[lastpointer]
                curM = midLst[lastpointer]
                curL = lowLst[lastpointer]
                curC = closeLst[lastpointer]

                    // calculate current position
                    lastSize = 20
                    lastlowLst = lowLst.slice(lowLst.length - lastSize)
                    lasthighLst = highLst.slice(highLst.length - lastSize)
                    minlowLst = Math.min(...lastlowLst)
                    maxhighLst = Math.max(...lasthighLst)
                    curPosition = Math.round((curC - minlowLst)*100/ (maxhighLst-minlowLst))
                    curAmtPosition = Math.round((amtNumber[amtNumber.length-1] / amtavg)*100)
                    if(curAmtPosition>100){
                      curAmtPosition = "<y>"+curAmtPosition+"</y>"
                    }

                compareMsg = compHMLC(curH, prevH, curM, prevM, curL, prevL, curC, prevC, stkName, theCode)
                $("#StkStatus").append(compMsg);

                // if up
                HLtxt = `<k id="` +theCode + `" onclick="xunbao('` + theCode + `')">`+ theCode + " <dr>" + stkName+ '</dr><md>: ' + curPosition + " - " + curAmtPosition +'</md></k>&emsp;'
                if(compareMsg ==" - H<r>></r>pH, M<r>></r>pM, L<r>></r>pL, C<r>></r>pC,"){
                  $("#HLSignatures").append( HLtxt);
                  batchMinuteCheckList = batchMinuteCheckList + " " + theCode
                  HLSignaturescount = HLSignaturescount +1
                  $("#HLSignaturescount").html(HLSignaturescount);

                  // check prev day status for double up
                  prevCompMsg = compHMLC(prevH, pprevH, prevM, pprevM, prevL, pprevL, prevC, pprevC, stkName, theCode)
                  if(prevCompMsg ==" - H<r>></r>pH, M<r>></r>pM, L<r>></r>pL, C<r>></r>pC,"){
                    $("#doubleUp").append( HLtxt);
                    doubleUpcount = doubleUpcount +1
                    $("#doubleUpcount").html(doubleUpcount);

                    // check pprev day status for triple up
                    pprevCompMsg = compHMLC(pprevH, ppprevH, pprevM, ppprevM, pprevL, ppprevL, pprevC, ppprevC, stkName, theCode)
                    if(pprevCompMsg ==" - H<r>></r>pH, M<r>></r>pM, L<r>></r>pL, C<r>></r>pC,"){
                      $("#TripleUp").append( HLtxt);
                      TripleUpcount = TripleUpcount +1
                      $("#TripleUpcount").html(TripleUpcount);
                    }
                  }
                }

                // if Dn
                if(compareMsg ==" - H<gr><</gr>pH, M<gr><</gr>pM, L<gr><</gr>pL, C<gr><</gr>pC,"){
                  $("#GoingDn").append( HLtxt);

                  GoingDncount = GoingDncount +1
                  $("#GoingDncount").html(GoingDncount);

                  // check prev day status for double Dn
                  prevCompMsg = compHMLC(prevH, pprevH, prevM, pprevM, prevL, pprevL, prevC, pprevC, stkName, theCode)
                  if(prevCompMsg ==" - H<gr><</gr>pH, M<gr><</gr>pM, L<gr><</gr>pL, C<gr><</gr>pC,"){
                    $("#doubleDn").append( HLtxt);
                    doubleDncount = doubleDncount +1
                    $("#doubleDncount").html(doubleDncount);

                    // check pprev day status for triple Dn
                    pprevCompMsg = compHMLC(pprevH, ppprevH, pprevM, ppprevM, pprevL, ppprevL, pprevC, ppprevC, stkName, theCode)
                    if(pprevCompMsg ==" - H<gr><</gr>pH, M<gr><</gr>pM, L<gr><</gr>pL, C<gr><</gr>pC,"){
                      $("#TripleDn").append( HLtxt);
                      TripleDncount = TripleDncount +1
                      $("#TripleDncount").html(TripleDncount);
                    }
                  }
                }

                $("#M3XM4Count").html("<k>Total M3XM4Count: </k><bo>"+ M3XM4Count +"</bo>");
                $("#M2XM3Count").html("<k>Total M2XM3Count: </k><bo>"+ M2XM3Count +"</bo>");
                $("#M1XM2Count").html("<k>Total M1XM2Count: </k><bo>"+ M1XM2Count +"</bo>");
                $("#M0XM4Count").html("<k>Total M0XM4Count: </k><bo>"+ M0XM4Count +"</bo>");

                $("#M0uXM1Count").html("<k>Total M0uXM1Count: "+ M0uXM1Count +"</k>");
                $("#M0ContUpM1Count").html("<k>Total M0ContUpM1Count: </k><bo>"+ M0ContUpM1Count +"</bo>");

                $("#M0dXM1Count").html("<gr>Total M0dXM1Count: </gr><blg>"+ M0dXM1Count +"</blg>");
                $("#M0ContDnM1Count").html("<gr>Total M0ContDnM1Count: </gr><blg>"+ M0ContDnM1Count +"</blg>");

                $("#currentstatistics").html("<y>"+showDate() +"</y> "+ showTime() + "<br>" +
                  "<r>Total goingUp : </r><o>"+ HLSignaturescount +"</o>" +
                  "<pk> Total M0uXM1Count: </pk><o>"+ M0uXM1Count +"</o>" + 
                  "<r> Total doubleUp: </r><o>"+ doubleUpcount +"</o>" +
                  "<r> Total TripleUp: </r><o>"+ TripleUpcount +"</o><br>" +

                  "<lg>Total GoingDn : </lg><lg>"+ GoingDncount +"</lg>" +
                  "<gr> Total M0dXM1Count: </gr><lg>"+ M0dXM1Count +"</lg>" + 
                  "<gr> Total doubleDn: </gr><lg>"+ doubleDncount +"</lg>" +
                  "<gr> Total TripleDn: </gr><lg>"+ TripleDncount +"</bld>" +

                  "<gr> mtw: </gr><mlg>"+ Math.round(totalmtweight) +"</mlg>,<br>"
                );

              }
           });

           //showActivity(theCode)
           window.scrollTo(0,0);
      }

     function chkKey() {
       var testkey = getChar(event);
       if(testkey == 't'){window.location = '#toc';}
       else if(testkey == 'q'){updateStat("CheckDayLineStatus");}

       // if(testkey == '+'){addToAttentionList();}
       else if(testkey == '-'){removeFmquickCodeList();}
       else if(testkey == 'X'){window.open("Random Charts.html");}
       else if(testkey == '.'){window.open("mlineMinutechart.html");}

       //else if(testkey == 'D'){window.location = '#image';}

       else if(testkey == 'l'){window.location = '#endpage';console.log("l: ");}
       else if(testkey == 'L'){storeBatchList()}
       else if(testkey == 'e'){window.location = '#commands';
            window.scrollTo(window.scrollX, window.scrollY + 2000);}
       else if(testkey == 's'){window.location = '#accel';
            window.scrollTo(window.scrollX, window.scrollY - 500);}
       else if(testkey == 'E'){window.location = '#filterMarkers';}
       else if(testkey == 'X'){storeCode(theCode); window.open("Random Charts.html");}
       else if(testkey == '.'){storeCode(theCode); window.open("mlineMinutechart.html");}
       else{chkOtherKeys(testkey)} 
     }

     function getChar(event) {
       if (event.which!=0 && event.charCode!=0) {
         return String.fromCharCode(event.which)   // the rest
       } else {
         return null // special key
       }
     }

     function xunbao(xunbaocode) {
       localStorage.setItem("randomcode", xunbaocode)
       localStorage.setItem("otherCode", xunbaocode)
       localStorage.setItem("stkCode", xunbaocode)

       window.open("Random Charts.html");
       // locs = ["HIghLowTrend.html", "Random Charts.html", ]
       //  window.open("HIghLowTrend.html")
     }

	function fillLineData() {
      var dataArr = prompt("Enter data array sep by space:", "");
      if (dataArr != null && dataArr != "") {
        dataArrArr = dataArr.split(' ');

        stkpriceDataArr = dataArrArr.map(Number);
        redraw()
      }
     }

      function addToquickCodeList() {
        codewidth = theCode.length
        if(codewidth <= 5){
          theCode = "00000"+theCode;
          codewidth = theCode.length;
          theCode = theCode.slice(codewidth-5, codewidth);
        }
        if (!quickCodeList.includes(theCode)) {
          quickCodeList.push(theCode);
          quickCodeList = Array.from(new Set(quickCodeList)); // set unique
          localStorage.savedCodeList = quickCodeList;
          alert(theCode + " added to quickCodeList")
        }else{alert(theCode + " already exist!")}
      }

    function usequickCodeList() {
        stkList = quickCodeList;
        alert("quickCodeList Total: " + quickCodeList.length + "\ndetails see end of this page.\nremember to modify mustadd list!")
        $("#message").text("quickCodeList Total: " + quickCodeList.length + "\n"+stkList);
    }

    function usestkListArr() {
      stkListArr = localStorage.getItem("stkListArr")
      if (stkListArr === null) {
         stkList = quickCodeList;
      } else{
         stkList = stkListArr;
      }
        alert("Use stkListArr, Total: " + stkListArr.length + " : "+stkListArr)
        $("#message").text("stkListArr Total: " + stkListArr.length + "\n"+stkList);
    }

	function addToAttentionList() {
            codewidth = theCode.length
            if(codewidth <= 5){
              theCode = "00000"+theCode;
              codewidth = theCode.length;
              theCode = theCode.slice(codewidth-5, codewidth);
              codewidth = theCode.length; //update to be used later
            }

        attentionList.push(theCode)
        attentionList = [...new Set(attentionList)]; // set unique

        ItemIndex = attentionList.indexOf("");  // remove empty items
        if (ItemIndex > -1) { attentionList.splice(ItemIndex, 1); }

        localStorage.setItem("attentionList", attentionList);
        alert(theCode + " added to attentionList!")
     }
	function removeFmquickCodeList() {
        ItemIndex = quickCodeList.indexOf(theCode);
        if (ItemIndex > -1) { quickCodeList.splice(ItemIndex, 1); }
        quickCodeList = [...new Set(quickCodeList)]; // set unique
        localStorage.setItem("quickCodeList", quickCodeList);
        alert(theCode + " removed fm quickCodeList!")
   }

     function redraw() { // includes main chart and aux charts
        initIntvSteps()
        titleText = showDate() +" "+ showTime()+", p1: "+intv1 +" w: "+(thestkdata.length-starti) +"\n"+theStartCode + " " + stkName + " 日線 ";
        $("#amtLst").html("Amt: ".concat(amtLst.slice((amtLst.length-14),amtLst.length).join("")));

 
        RGraph.reset(document.getElementById('cvs'));

        stkpriceDataArrC = closeLst
        stkpriceDataArrL = lowLst
        stkpriceDataArrM = midLst
        stkpriceDataArrH = highLst
        stdDevH = makeStd(highLst, intv3)
        stdDevL = makeStd(lowLst, intv3)

specialBackUp = lowLst.slice();  // backup array to avoid shadow changes
        newDevadd = makeMovAve(stkpriceDataArrM, intv3).map((a, i) => a + stdDevH[i]);
        newDevminus = makeMovAve(stkpriceDataArrM, intv3).map((a, i) => a - stdDevL[i]);

        mydata = [ stkpriceDataArrM]

          mydata.push(stkpriceDataArrH)
          mydata.push(makeMovAve(stkpriceDataArrH, halfNum))
          mydata.push(makeMovAve(stkpriceDataArrH, intv1))
          mydata.push(makeMovAve(stkpriceDataArrH, intv2))
          //mydata.push(makeMovAve(mydata[1], intv3))
          //mydata.push(makeMovAve(mydata[1], intv4))  // line 6

          mydata.push(stkpriceDataArrL) // line 6, index 5
          mydata.push(makeMovAve(stkpriceDataArrL, halfNum))
          mydata.push(makeMovAve(stkpriceDataArrL, intv1))
          mydata.push(makeMovAve(stkpriceDataArrL, intv2))
          //mydata.push(makeMovAve(mydata[5], intv3))
          // mydata.push(makeMovAve(mydata[5], intv4))

          //mydata.push(makeMovAve(mydata[1], intv8))
          mydata.push(newDevadd)
          mydata.push(newDevminus)  // line 8
        theMax = Math.max(...[].concat(...mydata));
        theMin = Math.min(...[].concat(...mydata));

        thedrawdata = mydata
        //thedrawdata.push(makeMovAve(thedrawdata[2], intv1));  // add one line to check results

        thedrawdata[1] = thedrawdata[1].fill(null,0,0)
        thedrawdata[2] = thedrawdata[2].fill(null,0,halfNum)
        thedrawdata[3] = thedrawdata[3].fill(null,0,intv1)
        thedrawdata[4] = thedrawdata[4].fill(null,0,intv2)

        thedrawdata[5] = thedrawdata[5].fill(null,0,0)
        thedrawdata[6] = thedrawdata[6].fill(null,0,halfNum)
        thedrawdata[7] = thedrawdata[7].fill(null,0,intv1)
        thedrawdata[8] = thedrawdata[8].fill(null,0,intv2)

        thedrawdata[9] = thedrawdata[9].fill(null,0,intv3)
        thedrawdata[10] = thedrawdata[10].fill(null,0,intv3)

        //thedrawdata[11] = thedrawdata[11].fill(null,0,intv3)
        //thedrawdata[12] = thedrawdata[12].fill(null,0,intv1)  // add one line 

lowLst = specialBackUp  // recover data

statusMsg = '<br><span class="red">price '+ mydata[0].slice(-1)[0].toFixed(3) +
'</span>, <span class="darkgreen">intvS '+ mydata[1].slice(-1)[0].toFixed(3) +
'</span>, <span class="blue">intvL '+ mydata[2].slice(-1)[0].toFixed(3) +
'</span>, <span class="purple">Top '+ mydata[3].slice(-1)[0].toFixed(3) +
'</span>, <span class="yellow">Bottom '+ mydata[4].slice(-1)[0].toFixed(3) +
'</span>, <span class="darkgreen">IntvS '+ intv1 +
'</span>, <span class="blue">IntvL '+ intv2 +
'</span>'

$("#lastValues").text("");
$("#lastValues").append(statusMsg);

       drawchart()

		// create datalog table
		 transp = transpose(mydata);
            wAveTrendRange = [];  // this is the gap diff
		  for (var row=0; row < transp.length; row++) {
		    rowRange = transp[row].slice(1, mydata.length);
      	    rowMax = Math.max(...rowRange);
      	    rowMin = Math.min(...rowRange);
      	    var rowDiff = rowMax - rowMin;
      	    wAveTrendRange.push(rowDiff);
      	  }

		wAveTrendRange.fill(null,0,intv3);
		wAvemax = Math.max(...wAveTrendRange);
		wAvemin = Math.min(...wAveTrendRange);
		drawTrend(wAveTrendRange, wAvemax, wAvemin, 'TP');

		// find derivative
		derivative = diff(makeMovAve(mydata[0], 3));
		derivative.unshift(0);
		derivative.fill(null,0,intv1+3); //array.fill(value, start, end)

		// diffaccel
		// diffaccel = thedrawdata[baseSubIdx].map(function(item, index) { return item - thedrawdata[baseMinuIdx][index]; })
		diffaccel = []
		diffaccel.push(thedrawdata[1].map(function(item, index) { return item - thedrawdata[9][index]; }))
		diffaccel.push(thedrawdata[2].map(function(item, index) { return item - thedrawdata[9][index]; }))
		diffaccel.push(thedrawdata[3].map(function(item, index) { return item - thedrawdata[9][index]; }))
		diffaccel.push(thedrawdata[4].map(function(item, index) { return item - thedrawdata[9][index]; }))
		diffaccel.push(thedrawdata[5].map(function(item, index) { return item - thedrawdata[9][index]; }))
		diffaccel.push(thedrawdata[6].map(function(item, index) { return item - thedrawdata[9][index]; }))
		diffaccel[0].fill(null,0,intv3); //array.fill(value, start, end)
		diffaccel[1].fill(null,0,intv3); //array.fill(value, start, end)
		diffaccel[2].fill(null,0,intv3); //array.fill(value, start, end)
		diffaccel[3].fill(null,0,intv3); //array.fill(value, start, end)
		diffaccel[4].fill(null,0,intv3); //array.fill(value, start, end)
		diffaccel[5].fill(null,0,intv3); //array.fill(value, start, end)

		diffaccMax = Math.max(...[].concat.apply([], diffaccel));
		diffaccMin = Math.min(...[].concat.apply([], diffaccel));
		drawTrend(diffaccel, diffaccMax, diffaccMin, 'accel');

		// ddiffaccel
		ddiffaccel = []
		ddiffaccel.push(diffaccel[0].map(function(item, index) { return item - diffaccel[1][index]; }))
		ddiffaccel.push(diffaccel[1].map(function(item, index) { return item - diffaccel[2][index]; }))
		ddiffaccel.push(diffaccel[2].map(function(item, index) { return item - diffaccel[3][index]; }))
		//ddiffaccel.push(diffaccel[3].map(function(item, index) { return item - diffaccel[4][index]; }))
		//ddiffaccel.push(diffaccel[4].map(function(item, index) { return item - diffaccel[5][index]; }))
		//ddiffaccel[0].fill(null,0,intv3); //array.fill(value, start, end)
		//ddiffaccel[1].fill(null,0,intv3); //array.fill(value, start, end)
		//ddiffaccel[2].fill(null,0,intv3); //array.fill(value, start, end)
		//ddiffaccel[3].fill(null,0,intv3); //array.fill(value, start, end)
		//ddiffaccel[4].fill(null,0,intv3); //array.fill(value, start, end)

		ddiffaccMax = Math.max(...[].concat.apply([], ddiffaccel));
		ddiffaccMin = Math.min(...[].concat.apply([], ddiffaccel));
		drawTrend(ddiffaccel, ddiffaccMax, ddiffaccMin, 'accaccel');

		// find stoch
		stoch1 = makeStoch(mydata[0], 50)
		stochmax1 = Math.max(...stoch1);
		stochmin1 = Math.min(...stoch1);
		drawTrend(stoch1, stochmax1, stochmin1, '强弱50');

        // evaluate B/S
        lastdayPtr = mydata[0].length-1
        statBegin = lastdayPtr - 29
        actionStr = ""
        for (var i = statBegin; i < (lastdayPtr+1); i++) {
          // define references
          Mvalue = mydata[0][i]
          Hvalue = mydata[1][i]
          Lvalue = mydata[5][i]
          hRefvalue = mydata[2][i]
          lRefvalue = mydata[6][i]
          h2Refvalue = mydata[3][i]
          l2Refvalue = mydata[7][i]
          acRefvalue = diffaccel[1][i]
          // compare indicators
          Hdiff = (Hvalue - hRefvalue).toFixed(2)
          Ldiff = (Lvalue - lRefvalue).toFixed(2)
          H2diff = (Hvalue - h2Refvalue).toFixed(2)
          L2diff = (Lvalue - l2Refvalue).toFixed(2)
          Mhdiff = (Mvalue - h2Refvalue).toFixed(2)
          Mldiff = (Mvalue - l2Refvalue).toFixed(2)
          acdiff = (diffaccel[0][i] - diffaccel[0][i-1]).toFixed(2)
          ac1diff = (diffaccel[0][i] - diffaccel[1][i]).toFixed(2)

          Mdiff = (mydata[0][i] - mydata[0][i-1]).toFixed(2)

          if(Hdiff >0){Hdiff = "<span class='red'>" +Hdiff + "</span>"}
          if(Ldiff >0){Ldiff = "<span class='red'>" +Ldiff + "</span>"}
          if(H2diff >0){H2diff = "<span class='red'>" +H2diff + "</span>"}
          if(L2diff >0){L2diff = "<span class='red'>" +L2diff + "</span>"}

          if(Mhdiff >0){Mhdiff = "<r>" +Mhdiff + "</r>"}
          else{Mhdiff = "<gr>" +Mhdiff + "</gr>"}
          if(Mldiff >0){Mldiff = "<r>" +Mldiff + "</r>"}
          else{Mldiff = "<gr>" +Mldiff + "</gr>"}

          if(Mdiff >0){Mdiff = "<r>" +Mdiff + "</r>"}
          else{Mdiff = "<gr>" +Mdiff + "</gr>"}

          if(acdiff >0){acdiff = "<r>" +acdiff + "</r>"}
          else{acdiff = "<gr>" +acdiff + "</gr>"}
          if(ac1diff >0){ac1diff = "<r>" +ac1diff + "</r>"}
          else{ac1diff = "<gr>" +ac1diff + "</gr>"}

          closeValue = lowLst[i]
          dateValue = dateLst[i].slice(5)

          // decision conditions
          actionStr = actionStr + dateValue + " C: " + closeValue +"\tHd: " + Hdiff + "\tLd: " + Ldiff + "\tH2d: " + H2diff + "\tL2d: " + L2diff + "\tMd: " + Mdiff + "\tacd: " + acdiff + "\tac1d: " + ac1diff + "<br>" 

          if(Hdiff>0){action = "buy"}
        }
        explanationStr = "<gr>h2d: h2 diff, l2d: L2 diff, md: M diff, acd: acc0 diff, ac1d: acc0 diff</gr>"
        actionStr = "<pre>" + actionStr + explanationStr+"</pre>"
        $("#actions").html(actionStr);

        drawOHLC()
        drawlinechart()
       }

	function makeMovAve(bigArray, intv) {
	     // the intv-1 is correct
		return bigArray.slice(0, intv-1).concat(calcMovAve(bigArray, intv));
	}
	function calcAve(aveArray) {
		add = (a, b) =>  a + b;
		return aveArray.reduce(add) / aveArray.length;
	}
	
	function calcMovAve(bigArray, intv) {
		var ma = [];
		for (var i =0 ; i < (bigArray.length-intv+1); i++) {ma[i] = calcWAve(bigArray.slice(i, i+intv));} // points to indicator
		return ma;
	}
	function calcWAve(aveArray) {
		var sum = 0
		for( var i = 1; i <= aveArray.length; i++ ) {
			sum += aveArray[i-1] * i;
		}
		return (sum / ((1 + aveArray.length)*aveArray.length/2))
	}

	function makeStoch(bigArray, intv) {
	     tempArr = bigArray.slice(0, intv-1).concat(calcStoch(bigArray, intv));
		return tempArr.fill(50,0,intv-1)
	}

	function calcStoch(bigArray, intv) {
		var stc = [];
		for (var i =0 ; i < (bigArray.length-intv+1); i++) {
			stc[i] = calc1Stoch(bigArray.slice(i, i+intv));
		}
		return stc;
	}

	function calc1Stoch(stcArray) {
			stcMax = Math.max(...stcArray)
			stcMin = Math.min(...stcArray)
			lastVal = stcArray[stcArray.length - 1]
			stcRange = stcMax - stcMin
			if(stcRange == 0){
				stcVal = 50
			}else{
				stcVal = 100*(lastVal - stcMin) / stcRange
			}
			return stcVal
	}

	function makeStd(bigArray, intv) {
	     // the intv-1 is correct
          newArray = new Array(intv-1).fill(0)
		newArray = newArray.concat(calcStd(bigArray, intv));
		return newArray
	}

	function calcStd(bigArray, intv) {
		var stdArrar = [];
		for (var i =0 ; i < (bigArray.length-intv+1); i++) {stdArrar[i] = Std(bigArray.slice(i, i+intv));} // points to indicator
		return stdArrar;
	}

	function Std(array) {
	  const n = array.length
	  const mean = array.reduce((a, b) => a + b) / n
	  return Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)
	}

	function transpose(thisArr) { // Swap rows with columns of a matrix
	    return Object.keys(thisArr[0]).map(function(column) {
	        return thisArr.map(function(row) { return row[column]; });
	    });
	}

    function useAttentionList() {
        stkList = attentionList;
        alert("AttentionList Total: " + attentionList.length + "\ndetails see end of this page.\nremember to modify mustadd list!")
        $("#message").text("Total: " + attentionList.length + "\n"+stkList);
    }

    function myfavor() {
        myfavorLst = mychips.split(" ");
        stkList = myfavorLst;
        alert("mychips Total: " + myfavorLst.length + "\ndetails see end of this page.\nremember to modify mustadd list!")
        $("#message").text("mychips Total: " + myfavorLst.length + "\n"+stkList);
    }

    function askList() {
        var theList = prompt("CodeList, Number (5 digits) sep by space： ", "");
        if (theList != null && theList != "HSI" && theList != "") {
            stkList = theList.split(" ");
            alert("Supplied List Total: " + stkList.length + "\ndetails see end of this page.\nremember to modify mustadd list!")
            $("#message").text("Supplied List Total: " + stkList.length + "\n"+stkList);
        }
        codetable = stkList
        document.getElementById("upcrossResult").innerHTML = "";

        for (var i = 0; i < codetable.length; i++) {
           collectStkData(codetable[i])
        }
    }

    function FormatNumberLength5(num) {
        var r = "" + num;
        while (r.length < 5) { r = "0" + r; }
        return r;
    }

    function jpforward() {
        if (stkPointer < stkList.length-1) {
            stkPointer = stkPointer + 1;
        } else {
            stkPointer = 0;
        }
        theCode = stkList[stkPointer];
         collectStkData(theCode)
    }

    function jpback() {
        if (stkPointer > 0) {
            stkPointer = stkPointer - 1;
        } else {
            stkPointer = stkList.length-1;
        }
        theCode = stkList[stkPointer];
         collectStkData(theCode)
    }
    function jprandom() {
        stkPointer = Math.floor(Math.random() * (stkList.length-1))
        theCode = stkList[stkPointer]
         collectStkData(theCode)
    }

    function jpTo0() {
        stkPointer = 0;
        theCode = stkList[stkPointer]
        collectStkData(theCode)
    }

    function storeCode(theCode) {
        if(typeof(Storage) !== "undefined") {
            localStorage.randomcode = theCode;
        }
    }

    function chgchartWidth() {
        newChartWidth = prompt("enter chart width:", "");
        if (newChartWidth != null && newChartWidth != "" && newChartWidth < (1000 - 2*intv1)){
          period = parseInt(newChartWidth);
          localStorage.setItem("daychartWidth", period);
          collectStkData(theCode);
        }

    }
    function chgIntv() {
        intv = prompt("intv1 value:", "");
        if (theCode != null && intv1 != ""){
          intv1 = parseInt(intv);
          initIntvSteps()
          redraw()
        }
    }
    function initIntvSteps() {
      halfNum = Math.round(intv1/2)
      intv2 = 2*intv1
      intv3 = 4*intv1
      intv4 = 6*intv1
      intv5 = 8*intv1
      intv6 = 9*intv1
      intv7 = 10*intv1
      intv8 = 11*intv1
      intv9 = 12*intv1
    }
    function setTabWidth() {
        tabWidth = prompt("set tab width:", "");
        if (tabWidth != null && tabWidth != ""){
          tabWidth = parseInt(tabWidth);
          document.getElementById("actions").style.tabSize = tabWidth;
        }
    }

    function chgHighList() {
        dataStatus = "H"
        redraw()
    }
    function chgLowList() {
        dataStatus = "L"
        redraw()
    }
    function chgMidList() {
        dataStatus = "M"
        redraw()
    }
    function chgCloseLst() {
        dataStatus = "C"
        redraw()
    }

    function largeCht() {
        imgHead = "http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=3&indpara1=3&indpara2=5&indpara3=10&indpara4=15&indpara5=20&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1600&chartheight=900&stockid=";

        imgTail = "&period=2060&type=1&logoStyle=1"
        imgURL = imgHead + theCode + imgTail
        window.open(imgURL, "_blank")
    }

function assignList(){
  newList = eval(document.getElementById("selectList").value).split(" ");
  stkList = newList;
  codeList = newList;

  document.getElementById("message").focus();
  alert(" Total: " + stkList.length + "\ndetails see end of this page.\nremember to modify mustadd list!\n" + newList)
        $("#message").text("Total: " + stkList.length + "\n"+stkList);
  $('#selectList').blur()

}

function showDateTime() {
    cmtCode = theCode // use another name not to interfere other parts
    var cmtcodewidth = cmtCode.length
    if(cmtcodewidth <= 5){
      cmtCode = "00000"+cmtCode;
      cmtcodewidth = cmtCode.length;
      cmtCode = cmtCode.slice(cmtcodewidth-5, cmtcodewidth);
    }
    else if(cmtcodewidth == 8){ cmtCode = cmtCode.slice(2, 8); }
    else if(cmtcodewidth == 9){ cmtCode = cmtCode.slice(0, 6); }
    commentName = "j" + cmtCode;

    CommentListNames = Object.keys(theCommentList); // extract the names from comments
    // to show comments
    if(CommentListNames.includes(commentName)){
      cmtLocation = CommentListNames.indexOf(commentName);
      commentTxt = theCommentList[Object.keys(theCommentList)[cmtLocation]]
    }else{commentTxt = "No data!";}

    document.getElementById("dateTime").innerHTML ="<span class='orange'>" + commentTxt + "</span>";
}

    function drawchart() {
      listItems = []
      if(dataStatus == "C"){ tooltips = closeLst
      }else if(dataStatus == "L"){ tooltips = lowLst
      }else if(dataStatus == "M"){ tooltips = midLst
      }else { tooltips = highLst}

      dataTooltips = tooltips.map(item => Math.round(item * 1000) / 1000)
      for (index = 0; index < dataTooltips.length; index++) {
        listItems[index] = dateLst[index] + "<br><span class='red'>" + dataStatus + "</span>: " + dataTooltips[index];
      }

      dataTooltips = dataTooltips.map(String)

      var line = new RGraph.Line({
        id:'cvs',
        data: thedrawdata,
        options: {
			title: titleText + " " + "MHL + trends",
			titleColor: 'grey',
			titleSize: 20,
               colors: chartColor,
            backgroundGrid: true, backgroundGridVlines: true,
            backgroundGridColor: '#001000', backgroundGridBorder: false,
            // backgroundGridDotted: true,
            backgroundGridDashed: true, 
            axisColor: '#864',  scaleDecimals: 2,
            xaxis: true,
            //xaxisLabels: ["a","b","c","d"],
            textColor: '#ccc',
            tickmarks: 'plus',
            ticksize: 1,
            linewidth:1,
			ymax: theMax,
			ymin: theMin,
      // labels control the number of grids
            // labels: ['2008','2009','2010','2011','2012','2013','2014','2015','2016','2017','2018'],
            spline: false,
            shadow: false,
            tooltips: listItems,
            gutterLeft: 0, gutterRight: 50,
            gutterTop: 25, gutterBottom: 25
            }
          }).trace();

		yminpct = 100 - (theMax-theMin)*100/theMax,
		ymaxpct = 100,

          yaxis1 = new RGraph.Drawing.YAxis('cvs', 1200)
                .Set('colors', ['gold'])
                .Set('text.color', 'gray')
                .Set('text.size', 8)
                .Set('max', ymaxpct)
                .Set('min', yminpct)
                .Set('linewidth', 2)
                .Set('tickmarkslength', 5)
                .Set('title', '% pct')
                .Draw();

    };

    function drawTrend(therange,maxValue, minValue, chartID) {
       // dataTooltips = therange.map(item => Math.round(item * 1000) / 1000)
       // dataTooltips = dataTooltips.map(String)
       RGraph.reset(document.getElementById(chartID));
       line = new RGraph.Line({
       	id:chartID, data:therange,
       	options: {
       		title: chartID + ", "+theStartCode + " " + stkName,
    			titleColor: 'grey', 
    			titleSize: 10,
       		backgroundGrid: true, axisColor: '#864', textColor: '#ccc',
    		numxticks: 0, colors: chartColor, scaleDecimals: 2,

       		tickmarksDotLinewidth: 0,ticksize: 1, linewidth: 1, 
       		ymax: maxValue, ymin: minValue,
               tickmarks: 'plus',

       		spline: false, shadow: false,
              // tooltips: dataTooltips,
			backgroundGridVlines: true,
			backgroundGridDashed: true, 
       		backgroundGridColor: '#001000',
       		gutterLeft: 0, gutterRight: 50, gutterTop: 25, gutterBottom: 25
       	}
       }).trace();
    };
    
    function diff(arr) {
      return arr.slice(1).map(function(n, i) { return n - arr[i]; });
    }

function showActivity(thecode){
    markers = filterResult.filter(element => element.includes(thecode));
    // clean the h2 tags
    markers = markers.map(element => element.replace(/<\/h2>.*/gi, ""))
    markers = markers.map(element => element.replace(/<h2>/gi, ""))

    markers = markers.map(element => formatWeekDay(element))
    if (markers.length > 50) markers.splice(0, markers.length-80);

    $('#filterMarkers').append("<b class='red'>" + thecode + " 日线特征:</b><br>")
    $('#filterMarkers').append(markers)
}

function fetchUsCode(str) {
    theCode = str; collectStkData(str); window.location = '#cvs';
    $('#usstock').toggle();
}

function handleRight( event ){
    codeListPtr = codeListPtr +1
    theCode = codeList[codeListPtr];
    collectStkData(theCode);
}

    codeList = codeList.split(' ')
    codeListPtr = 0

    // $( "html" ).on( "swiperight", handleRight );
    // $( "html" ).on( "swipeleft", askforCode );
    window.addEventListener('click', function (evt) {
        if (evt.detail === 3) { askforCode(); }
    });

    //collectStkData(theCode);

function docLoaded() {
    let script1 = document.createElement('script');
    script1.src = 'https://williamkpchan.github.io/LibDocs/readbook.js';
    document.body.appendChild(script1);
    let script = document.createElement('script');
    script.src = 'C:/R programs/!!! STKMon !!!/headerApp.js';
    document.body.appendChild(script);
    window.scrollTo(0,(document.body.scrollHeight));

}

    function drawOHLC() { // includes main chart and aux charts
      var ohlcdata = {
        close:  closeLst,
        low:  lowLst,
        open:  openLst,
        high:  highLst,
        x:  dateLst,
        line: {color: 'rgba(31,119,180,1)'}, 
        increasing: {line: {color: 'red'}},
        decreasing: {line: {color: 'green'}},
        type: 'candlestick', 
        xaxis: 'x', 
        yaxis: 'y'
      };

      var data = [ohlcdata];
      var layout = {
      title: titleText,
        dragmode: 'zoom', 
        showlegend: false,
        xaxis: { rangeslider: { visible: false } }, 
        yaxis: { autorange: true,  type: 'linear' }
      };
      Plotly.newPlot('ohlcDiv', data, layout);
    }


    function chkCross(stkName, highLst, midLst, lowLst, closeLst, amtLst, thisCode, lastPrice) {
      contUCnt = 0
        //statustxt = `<k onclick="xunbao('` + thisCode + `')">`+ thisCode + " <dr>" + stkName+ '</dr></k>&emsp;'
        statustxt = `<k id="` +thisCode + `" onclick="xunbao('` + thisCode + `')">`+ thisCode + " <dr>" + stkName+ '</dr></k>&emsp;'
        passtxt = statustxt
        $("#StkStatus").append( "<br><br>" +statustxt);

      // mid data
      dLineM0 = midLst
      dLineM1 = makeMovAve(midLst, intv1)
      dLineM2 = makeMovAve(midLst, intv2)
      dLineM3 = makeMovAve(midLst, intv3)
      dLineM4 = makeMovAve(midLst, intv4)
      dLineM5 = makeMovAve(midLst, intv5)

      indexlast = dLineM0.length-1

      curM0 = dLineM0[indexlast]
      prevM0 = dLineM0[indexlast-1]

      curM1 = dLineM1[indexlast]
      prevM1 = dLineM1[indexlast-1]

      curM2 = dLineM2[indexlast]
      prevM2 = dLineM2[indexlast-1]

      curM3 = dLineM3[indexlast]
      prevM3 = dLineM3[indexlast-1]

      curM4 = dLineM4[indexlast]
      prevM4 = dLineM4[indexlast-1]

      curM5 = dLineM5[indexlast]

      // H data
      dLineH0 = highLst
      dLineH1 = makeMovAve(highLst, intv1)
      dLineH2 = makeMovAve(highLst, intv2)

      curH0 = dLineH0[indexlast]
      prevH0 = dLineH0[indexlast-1]

      curH1 = dLineH1[indexlast]
      prevH1 = dLineH1[indexlast-1]

      curH2 = dLineH2[indexlast]
      prevH2 = dLineH2[indexlast-1]

      // Lo data
      dLineLo0 = lowLst
      dLineLo1 = makeMovAve(lowLst, intv1)
      dLineLo2 = makeMovAve(lowLst, intv2)

      curLo0 = dLineLo0[indexlast]
      prevLo0 = dLineLo0[indexlast-1]

      curLo1 = dLineLo1[indexlast]
      prevLo1 = dLineLo1[indexlast-1]

      curLo2 = dLineLo2[indexlast]
      prevLo2 = dLineLo2[indexlast-1]

      passchk = passExam(highLst, midLst, lowLst, closeLst, amtLst)
      if(passchk == "pass"){
        passchk = true
      }

      // checkX(prevL, prevS, curL, curS) check mid
      curS = curM0
      prevS = prevM0
      curL = curM1
      prevL = prevM1
      checkXMsg = "<k> M0XM1 </k>"+checkX(prevL, prevS, curL, curS)
      $("#StkStatus").append(checkXMsg);
      if(checkXMsg.includes('cont.Up')){contUCnt = contUCnt +1}


      // check if upCross
      result = /UpCross/.test(checkXMsg);
      if(result && passchk){
        //uptxt = statustxt.replace(/dr>/g, "o>");
        linktxt = `<span onclick="xunbao('` + theCode + `')">`+ theCode + "<o> " + stkName+ '</o></</span>&emsp;'
        $("#M0uXM1").append(linktxt);
        M0uXM1Count = M0uXM1Count +1
        batchCheckList = batchCheckList + " " + thisCode
      }

      // check if cont.Up
      result = /cont.Up/.test(checkXMsg);
      if(result && passchk){
        uptxt = statustxt.replace(/dr>/g, "o>");
        $("#M0ContUpM1").append(uptxt);
        M0ContUpM1Count = M0ContUpM1Count +1
      }

      // check if DownCross
      result = /DownCross/.test(checkXMsg);
      if(result){
        downtxt = statustxt.replace(/dr>/g, "gr>");
        $("#M0dXM1").append(downtxt);
        M0dXM1Count = M0dXM1Count +1
      }

      // check if cont.Dn
      result = /cont.Dn/.test(checkXMsg);
      if(result){
        downtxt = statustxt.replace(/dr>/g, "gr>");
        $("#M0ContDnM1").append(downtxt);
        M0ContDnM1Count = M0ContDnM1Count +1
      }



      curL = curM2
      prevL = prevM2
      checkXMsg = "<k> M0XM2 </k>"+checkX(prevL, prevS, curL, curS)
      $("#StkStatus").append(checkXMsg);
      if(checkXMsg.includes('cont.Up')){contUCnt = contUCnt +1}

      curL = curM3
      prevL = prevM3
      checkXMsg = "<k> M0XM3 </k>"+checkX(prevL, prevS, curL, curS)
      $("#StkStatus").append(checkXMsg);
      if(checkXMsg.includes('cont.Up')){contUCnt = contUCnt +1}

      curL = curM4
      prevL = prevM4
      checkXMsg = "<k> M0XM4 </k>"+checkX(prevL, prevS, curL, curS)
      $("#StkStatus").append(checkXMsg);
      if(checkXMsg.includes('cont.Up')){contUCnt = contUCnt +1}

      if(contUCnt == 4){
        $("#M0XM4").append(statustxt);
        M0XM4Count++;
      }

      curS = curM1
      prevS = prevM1
      curL = curM2
      prevL = prevM2
      checkXMsg = "<dr> M1XM2 </dr>"+checkX(prevL, prevS, curL, curS)
      $("#StkStatus").append(checkXMsg);

      if(checkXMsg.includes('cont.Up')){contUCnt = contUCnt +1}

      if(checkXMsg.includes('UpCross')){
        $("#M1uXM2").append(statustxt);
      }

      if(checkXMsg.includes('DownCross')){
        $("#M1dXM2").append(statustxt);
      }

      if(contUCnt == 5){
        $("#M1XM2").append(statustxt);
        M1XM2Count++;
      }

      curS = curM2
      prevS = prevM2
      curL = curM3
      prevL = prevM3
      checkXMsg = "<k> M2XM3 </k>"+checkX(prevL, prevS, curL, curS)
      $("#StkStatus").append(checkXMsg);
      if(checkXMsg.includes('cont.Up')){contUCnt = contUCnt +1}

      if(contUCnt == 6){
        $("#M2XM3").append(statustxt);
        M2XM3Count++;
      }

      curS = curM3
      prevS = prevM3
      curL = curM4
      prevL = prevM4
      checkXMsg = "<k> M3XM4 </k>"+checkX(prevL, prevS, curL, curS)
      $("#StkStatus").append(checkXMsg);
      if(checkXMsg.includes('cont.Up')){contUCnt = contUCnt +1}

      if(contUCnt == 7){
        $("#M3XM4").append(statustxt);
        M3XM4Count++;
      }
      $("#StkStatus").append("<br>");
      checkDayUpDn(dLineM1, 1)
      checkDayUpDn(dLineM2, 2)
      checkDayUpDn(dLineM3, 3)
      checkDayUpDn(dLineM4, 4)
      checkDayUpDn(dLineM5, 5)

      $("#StkStatus").append("&emsp;&emsp;");
      resultmsg = ">"
      trendLineUp = 0
      trendLineDn = 0

      resultmsg = compLines(curM0, curM1, 0, 1) // 1st check
          if(resultmsg== ">"){
            trendLineUp = trendLineUp + 1
          }else if(resultmsg== "<"){
            trendLineDn = trendLineDn + 1
          }

      resultmsg = compLines(curM1, curM2, 1, 2) //2nd check
          if(resultmsg== ">"){
            trendLineUp = trendLineUp + 1

            if(trendLineUp == 2){
              twoTrendLineUpCnt = twoTrendLineUpCnt + 1 // this is stat total
              $("#twoTrendLineUp").append(passtxt);
              $("#twoTrendLineUpCnt").text(twoTrendLineUpCnt);
            }
          }else if(resultmsg== "<"){
            trendLineDn = trendLineDn + 1
            if(trendLineDn == 2){
              twotrendLineDnCnt = twotrendLineDnCnt + 1 // this is stat total
              $("#twotrendLineDn").append(passtxt);
              $("#twotrendLineDnCnt").text(twotrendLineDnCnt);
            }
          }

      resultmsg = compLines(curM2, curM3, 2, 3) // 3rd check
          if(resultmsg== ">"){
            trendLineUp = trendLineUp + 1
          }
      resultmsg = compLines(curM3, curM4, 3, 4) //4th check
          if(resultmsg== ">"){
            trendLineUp = trendLineUp + 1
          }

      resultmsg = compLines(curM4, curM5, 4, 5) //5th check
          if(resultmsg== ">"){ 
            $("#LineSignatures").append( passtxt);
            LineSignaturescount = LineSignaturescount +1
            $("#LineSignaturescount").text(LineSignaturescount);
          }
          // window.location = '#HLSignatures'
    }


      function alertStat() {
        prevStat = document.getElementById("prevstatistics").innerHTML
        console.log("prevStat: ",prevStat)
        alert("check console to copy prev Stat")
      }

      function alertM0uXM1() {
        M0uXM1txt = document.getElementById("M0uXM1").innerHTML
        console.log("M0uXM1: ",M0uXM1txt)
        alert("check console to copy M0uXM1")
      }


     function askCodetable() {
       var theCodetable = prompt("Enter stk list seperated by space:", "");
       if (theCodetable != null && theCodetable != "") {
         theCodetable = JSON.stringify(theCodetable.split(" "))
         localStorage.setItem("codetableList", theCodetable);
         codetable = JSON.parse(theCodetable);
         location.reload();
       }
     }

     function averageOfLastTen(arr) {
         // Check if the array has at least 10 elements
         if (arr.length < 10) {
             throw new Error("Array must have at least 10 elements");
         }

         // Slice the last 10 elements
         const lastTen = arr.slice(-10);

         // Calculate the sum of the last 10 elements
         const sum = lastTen.reduce((acc, val) => acc + val, 0);

         // Calculate the average
         const average = sum / 10;
         return average;
     }

      // checkDayUpDn(linedata, lineNum)
      function checkDayUpDn(linedata, lineNum){
        lastpt = linedata.length-1
        bflastpt = linedata.length-2

        curValue = linedata[lastpt]
        prevValue = linedata[bflastpt]
        if(curValue > prevValue){
          upDnMsg = "<k> L</k> " + lineNum + "<r>Up</r>"
        }else if(curValue < prevValue){
          upDnMsg = "<k> L</k> " + lineNum + "<lg>Dn</lg>"
        }else{
          upDnMsg = "<k> L</k> " + lineNum + "<dg>--</dg>"
        }
        $("#StkStatus").append(upDnMsg);
      }

</script>

<script src='createTOC.js'></script>
<pre>
+ addToAttentionList()
- removeFmquickCodeList()
. storeCode(theCode)
. window.open("mlineMinutechart.html")
D window.location = '#image'
e window.location = '#commands';
E window.location = '#filterMarkers'
L storeBatchList()}
l window.location = '#endpage'
q updateStat("CheckDayLineStatus")
t window.location = '#toc'
X storeCode(theCode); window.open("Random Charts.html")
X window.open("Random Charts.html")

<o>活跃涡轮名单</o>：
<mb>恆生指數 騰訊控股 美團－Ｗ 阿里巴巴－Ｗ 香港交易所 中國平安 快手－Ｗ 
日經平均 小米集團－Ｗ 比亞迪股份 京東集團－ＳＷ 工商銀行 匯豐控股 建設銀行 
中國銀行 中國移動 藥明生物 長城汽車 泡泡瑪特 美的集團 平安好醫生 
吉利汽車 海爾智家 中國石油股份 中芯國際 友邦保險 電能實業 百度集團－ＳＷ 
中國海洋石油 招商銀行 瑞聲科技 長和 同程旅行 小鵬汽車－Ｗ 蔚來－ＳＷ 
金沙中國有限公司 京東物流 思摩爾國際 長實集團 閱文集團 中國軟件國際 蒙牛乳業 
中國民航信息網絡 銀河娛樂 華潤啤酒 中國人壽 福萊特玻璃 舜宇光學科技 比亞迪電子 
濰柴動力 信義玻璃 中國聯通 理想汽車－Ｗ 郵儲銀行 農夫山泉 東方海外國際 
網易－Ｓ 中國海外發展 兗礦能源 道瓊斯 美圖公司 中國中免 領展房產基金 
中國電信 新鴻基地產 安踏體育 太古股份公司Ａ 攜程集團－Ｓ 農業銀行 招金礦業 
海底撈 中國飛鶴 江西銅業股份 中國建材 美高梅中國 青島啤酒股份 永利澳門 
中銀香港 聯想集團 中國神華 微盟集團  中國鐵建 納斯達克100 
中遠海控 嗶哩嗶哩－Ｗ 創科實業 香港中華煤氣 周大福 山東黃金 東方甄選 
東岳集團 中遠海能 華潤電力 中國鐵塔 置富產業信託 中金公司 眾安在線 
中國人民保險集團 中電控股</mb>

<y>涡轮相关产品</y>
<mk>110000 恆生指數 110078 恆生科技指數 110010 國企指數 00001 長和
00002 中電控股 00003 香港中華煤氣 00004 九龍倉集團 00005 匯豐控股
00006 電能實業 00011 恆生銀行 00012 恆基地產 00016 新鴻基地產
00017 新世界發展 00019 太古股份公司Ａ 00020 商湯－Ｗ 00027 銀河娛樂
00066 港鐵公司 00135 昆侖能源 00144 招商局港口 00148 建滔集團
00168 青島啤酒股份 00175 吉利汽車 00189 東岳集團 00241 阿里健康
00257 光大環境 00267 中信股份 00268 金蝶國際 00270 粵海投資
00285 比亞迪電子 00288 萬洲國際 00291 華潤啤酒 00293 國泰航空
00300 美的集團 00316 東方海外國際 00354 中國軟件國際 00358 江西銅業股份
00384 中國燃氣 00386 中國石油化工股份 00388 香港交易所 00390 中國中鐵
00489 東風集團股份 00522 ASMPT 00576 浙江滬杭甬 00669 創科實業
00688 中國海外發展 00696 中國民航信息網絡 00700 騰訊控股 00728 中國電信
00753 中國國航 00762 中國聯通 00763 中興通訊 00772 閱文集團
00778 置富產業信託 00780 同程旅行 00788 中國鐵塔 00823 領展房產基金
00836 華潤電力 00857 中國石油股份 00867 康哲藥業 00868 信義玻璃
00880 澳博控股 00881 中升控股 00883 中國海洋石油 00902 華能國際電力股份
00914 海螺水泥 00916 龍源電力 00939 建設銀行 00941 中國移動
00956 新天綠色能源 00960 龍湖集團 00966 中國太平 00968 信義光能
00981 中芯國際 00992 聯想集團 00998 中信銀行 01024 快手－Ｗ
01038 長江基建集團 01044 恆安國際 01055 中國南方航空股份 01066 威高股份
01088 中國神華 01093 石藥集團 01109 華潤置地 01113 長實集團
01114 華晨中國 01128 永利澳門 01138 中遠海能 01157 中聯重科
01171 兗礦能源 01177 中國生物製藥 01186 中國鐵建 01193 華潤燃氣
01208 五礦資源 01209 華潤萬象生活 01211 比亞迪股份 01258 中國有色礦業
01288 農業銀行 01299 友邦保險 01308 海豐國際 01336 新華保險
01339 中國人民保險集團 01347 華虹半導體 01357 美圖公司 01368 特步國際
01378 中國宏橋 01385 上海復旦 01398 工商銀行 01415 高偉電子
01519 極兔速遞－Ｗ 01548 金斯瑞生物科技 01658 郵儲銀行 01766 中國中車
01772 贛鋒鋰業 01776 廣發証券 01787 山東黃金 01797 東方甄選
01798 大唐新能源 01799 新特能源 01800 中國交通建設 01801 信達生物
01810 小米集團－Ｗ 01816 中廣核電力 01818 招金礦業 01833 平安好醫生
01876 百威亞太 01880 中國中免 01888 建滔積層板 01898 中煤能源
01913 普拉達 01919 中遠海控 01928 金沙中國有限公司 01929 周大福
01951 錦欣生殖 01988 民生銀行 01997 九龍倉置業 02013 微盟集團
02015 理想汽車－Ｗ 02018 瑞聲科技 02020 安踏體育 02057 中通快遞－Ｗ
02196 復星醫藥 02208 金風科技 02269 藥明生物 02282 美高梅中國
02313 申洲國際 02318 中國平安 02319 蒙牛乳業 02328 中國財險
02331 李寧 02333 長城汽車 02338 濰柴動力 02357 中航科工
02359 藥明康德 02380 中國電力 02382 舜宇光學科技 02388 中銀香港
02423 貝殼－Ｗ 02600 中國鋁業 02601 中國太保 02618 京東物流
02628 中國人壽 02688 新奧能源 02689 玖龍紙業 02800 盈富基金
02822 南方Ａ５０ 02823 安碩Ａ５０ 02828 恆生中國企業 02840 ＳＰＤＲ金
02883 中海油田服務 02888 渣打集團 02899 紫金礦業 03033 南方恆生科技
03188 華夏滬深三百 03319 雅生活服務 03323 中國建材 03328 交通銀行
03606 福耀玻璃 03690 美團－Ｗ 03692 翰森製藥 03759 康龍化成
03800 協鑫科技 03808 中國重汽 03888 金山軟件 03898 時代電氣
03900 綠城中國 03908 中金公司 03968 招商銀行 03988 中國銀行
03993 洛陽鉬業 03998 波司登 06030 中信証券 06060 眾安在線
06066 中信建投証券 06110 滔搏 06186 中國飛鶴 06618 京東健康
06690 海爾智家 06837 海通證券 06862 海底撈 06865 福萊特玻璃
06881 中國銀河 06886 HTSC 06969 思摩爾國際 09618 京東集團－ＳＷ
09626 嗶哩嗶哩－Ｗ 09633 農夫山泉 09696 天齊鋰業 09698 萬國數據－ＳＷ
09863 零跑汽車 09866 蔚來－ＳＷ 09868 小鵬汽車－Ｗ 09888 百度集團－ＳＷ
09896 名創優品 09901 新東方－Ｓ 09922 九毛九 09926 康方生物
09961 攜程集團－Ｓ 09988 阿里巴巴－Ｗ 09992 泡泡瑪特 09999 網易－Ｓ
111000 道瓊斯 111101 納斯達克100 114000 標準普爾 114300 日經平均
430001 美元/日圓 430002 歐羅/美元 430007 英鎊/美元 430013 英鎊/港元
430014 歐元/港元 </mk>
<a href="http://www.aastocks.com/tc/stocks/warrantcbbc/search.aspx?tab=1" class="whitebut ">窩輪牛熊證搜尋</a>
</pre>
<div id="editregion" class="toc"></div>

</body>
</html>
