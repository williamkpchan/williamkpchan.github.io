<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">

<style>

a:hover,a:active{color:red}
table.w3-table-all{margin:20px 0}
.top {
 position:relative;
 background-color:black;
 height:68px;
 padding-top:20px;
 line-height:50px;
 overflow:hidden;
 z-index:2;
}
body {
 background-color: #000000;
 color: MediumSeaGreen;
 margin-left: 14%;
 margin-right: 14%;
 font-size: 24px;
}
a { text-decoration: none;
	color: #58D858;}
a:visited { color: #88C898;}
A:hover {	color: yellow;}
A:focus {	color: red;}
code { color: gray; background-color: #001000; font-size: 20px;}
pre { color: gray; background-color: #001010; font-size: 20px;}
h1, h2, h3, h4, h5, .goldword {
	color: gold;
}
table{
	width: 100%;
	font-size: 20px;
	border-collapse: collapse;
}
th{
	border: 1px solid gray;
	font-weight:bold;
	color: lightgreen;
}
td{
	padding:10px;
}}
tr>th:first-child{
	width:40%;
}
tr>td:first-child{
	color: lime;

}
.topic{
    color: lime;
}
.left {
    position: absolute;
    left: 100px;
    color: GoldenRod;
    border: 1px solid GoldenRod;
    padding: 2px;
    font-size: 60%;
}
.bord {
    color: redpink;
    border: 1px solid GoldenRod;
    padding: 1px;
    font-size: 90%;
}
.highlight { 
    color: white;
    background-color: #002030
  }
hr {width: 50%;}
li{
	list-style-type: decimal;
}
#toc, #tang, #san, #pill {
	margin-left: 28%;
	margin-right: 28%;
	color: gold;
	padding: 1%;
	text-align: left;
	box-shadow: 5px 5px 15px silver;
	border-radius: 5px;
	border: 1px solid DarkSlateGray;
    font-size: 90%;
}
.mywords{
    color: Crimson;
}
.orangeword{
    color: orange;
}
.remarks {
	font-size: 22px;
	color: MediumSeaGreen;
}
</STYLE>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script>
$(document).ready(function(){
    $('h1, h2, h3, h4, h5, .goldword, .topic').click(function(){
    parent.history.back();
    return false;
    });
});
</script>


</head><body>

<center><h3>Create editable Microsoft Office charts from R (and 6 more aRticles)</h3></center>
<div id="toc"><ul></ul></div>
<br>


<a style="color:#888;font-size:22px;font-family:Arial,Helvetica,sans-serif;font-weight:normal;text-decoration:none" href="https://www.r-bloggers.com" title="(https://www.r-bloggers.com)" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com&amp;source=gmail&amp;ust=1509502773500000&amp;usg=AFQjCNE3Eardidwj1KXnICDTmTExPm8wjQ">
Create editable Microsoft Office charts from R (and 6 more aRticles)
</a>
<br>



<ul style="clear:both;padding:0 0 0 1.2em;width:100%" id="m_-224555803572068892summarylist">

<li>

<a href="#m_-224555803572068892_1">
Create editable Microsoft Office charts from R
</a>

</li>

<li>

<a href="#m_-224555803572068892_2">
CRAN search based on natural language processing
</a>

</li>

<li>

<a href="#m_-224555803572068892_3">
Machine Learning Explained: Kmeans
</a>

</li>

<li>

<a href="#m_-224555803572068892_4">
A Shiny App to Create Sentimental Tweets Based on Project Gutenberg Books
</a>

</li>

<li>

<a href="#m_-224555803572068892_5">
Demo Week: Time Series Machine Learning with timetk
</a>

</li>

<li>

<a href="#m_-224555803572068892_6">
jsTree htmlwidget
</a>

</li>

<li>

<a href="#m_-224555803572068892_7">
Statistical Machine Learning with Microsoft ML
</a>

</li>

</ul>

Create editable Microsoft Office charts from R

<p>
R has a rich and infinitely flexible graphics system, and you can easily embed R graphics into Microsoft Office documents like PowerPoint or Word. The one thing I dread hearing after delivering such a document, though, is &quot;how can I tweak that graphic?&quot;. I could change the colors or fonts or dimensions in R, of course, but sometimes people just want to 
<span style="text-decoration:line-through">
watch the world burn
</span>
 tweak graphics to their hearts&#39; content. If you&#39;re in that situation, you have a couple of options for using R to create Office documents with graphics, and make those graphics 
<em>
editable
</em>
. Both options work in conjunction with the &quot;officer&quot; package, which lets you 
<a href="http://blog.revolutionanalytics.com/2017/10/officer-powerpoint.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://blog.revolutionanalytics.com/2017/10/officer-powerpoint.html&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNEoy17M8whtuubOWF4-KliZ0z1icw">
create Word and PowerPoint documents from R
</a>
. 
</p>

<p>
The first option — the 
<a href="http://mran.microsoft.com/package/rvg/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://mran.microsoft.com/package/rvg/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGxGc5HTgnB4bK4ZOfgF_sF-hh-IA">
rvg package
</a>
 — lets you use traditional R graphics commands, but allows the PowerPoint or Word user to modify the components of those graphics. Labels become text elements; lines, points and bars become shapes; and so on. The recipient can then use the standard Office tools to change fonts, resize, rotate, recolor, or add other annotations. For example, this code creates a 1-slide PowerPoint document with a standard R bar chart: 
</p>

<div>

<pre>
library(rvg)
library(ggplot2)
library(officer)
doc 
<span>
&lt;-
</span>
 read_pptx()
doc 
<span>
&lt;-
</span>
 add_slide(doc, layout 
<span>
=
</span>
 
<span style="background-color:#fff0f0">
&quot;Title and Content&quot;
</span>
, master 
<span>
=
</span>
 
<span style="background-color:#fff0f0">
&quot;Office Theme&quot;
</span>
)
doc 
<span>
&lt;-
</span>
 ph_with_vg(doc, code 
<span>
=
</span>
 barplot(sample(
<span style="color:#6600ee;font-weight:bold">
1
</span>
<span>
:
</span>
<span style="color:#6600ee;font-weight:bold">
20
</span>
,
<span style="color:#6600ee;font-weight:bold">
10
</span>
),xlab
<span>
=
</span>
<span style="background-color:#fff0f0">
&quot;
<wbr>
Day&quot;
</span>
,ylab
<span>
=
</span>
<span style="background-color:#fff0f0">
&quot;Widgets&quot;
</span>
),
                  type 
<span>
=
</span>
 
<span style="background-color:#fff0f0">
&quot;body&quot;
</span>
)
print(doc, target 
<span>
=
</span>
 
<span style="background-color:#fff0f0">
&quot;my_plot.pptx&quot;
</span>
)
</pre>

</div>

<p>
Out of the box, the slide looks like this:
</p>

<p>
<a class="m_-224555803572068892asset-img-link" href="http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b7c92d4d19970b-pi" style="display:inline" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b7c92d4d19970b-pi&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNH137AtuvH2NbaA58twkYUA8x-bPw">
<img alt="Rvg-1" border="0" class="m_-224555803572068892asset m_-224555803572068892asset-image m_-224555803572068892at-xid-6a010534b1db25970b01b7c92d4d19970b m_-224555803572068892image-full m_-224555803572068892img-responsive" src="https://ci4.googleusercontent.com/proxy/OxbKb0nME1HnA_kn8OCFpR7gakvEViWMXy8tP39iIo0TU7CQNjO5nF61HKrGZpf2t4rakWy0oGFkMnvqd-5y1_QXsz-c51IOfE9NECJZZ5IqKnr20rSU1W-eqXU-4ZwL8sNeI4MlW5vR=s0-d-e1-ft#http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b7c92d4d19970b-800wi" title="Rvg-1">
</a>
</p>

<p>
If the recipient wants to color the bars and change the label font to 
<a href="https://www.youtube.com/watch?v=jVhlJNJopOQ" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.youtube.com/watch?v%3DjVhlJNJopOQ&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHCdTQaMfUNzWPZJuCLArkDafRqMA">
Papyrus
</a>
, they can use the standard tools in Powerpoint. These changes took me about 20 seconds.
</p>

<p>
<a class="m_-224555803572068892asset-img-link" href="http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2b7bb31970c-pi" style="display:inline" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2b7bb31970c-pi&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGv1O9yEsxfiX5QTjIWxPeKaPgWOg">
<img alt="Rvg-2" border="0" class="m_-224555803572068892asset m_-224555803572068892asset-image m_-224555803572068892at-xid-6a010534b1db25970b01b8d2b7bb31970c m_-224555803572068892image-full m_-224555803572068892img-responsive" src="https://ci3.googleusercontent.com/proxy/nZJzLNQ9-P4UvvCIeJovYZ3rlJH9V0i5Yqe8SqrjO2y2ALN5xLr9ICqwc1PW_iELAbv-rkKQ0Hri75gBAp3S9pllgAsy1YyO10hvEcWbWngoiGVin6mdXGo-fWSEuzHSOIErrArHLRGz=s0-d-e1-ft#http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2b7bb31970c-800wi" title="Rvg-2">
</a>
</p>

<p>
The downside is that the chart here is just a collection of objects. It&#39;s easy to make mistakes (say, to move a single bar to a new position), and charts with many components (like scatterplots with thousands of points) can be unwieldy. It&#39;s not possible to change the structure of the chart either, say to switch from a bar chart to a line chart.
</p>

<p>
Another option is the 
<a href="http://mran.microsoft.com/package/mschart/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://mran.microsoft.com/package/mschart/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNFlb0TrXRgfmG5cT51YQIsNLDnFKw">
mschart
</a>
 package, which allows you to use data in R to create Microsoft Office charts in Word or PowerPoint documents. In this case, you won&#39;t be using the standard R graphics commands; instead, you&#39;ll be using new R functions to generate the standard Office chart types:
</p>

<ul>

<li>
Bar charts, including grouped bars and vertical and horizontal stacked bars
</li>

<li>
Line charts, including stacked line charts
</li>

<li>
Area charts
</li>

<li>
Scatter plots
</li>

</ul>

<p>
You can see several examples in the 
<a href="http://mran.microsoft.com/web/packages/mschart/vignettes/introduction.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://mran.microsoft.com/web/packages/mschart/vignettes/introduction.html&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNF3_zRH11Ny79FE3yem7zfl3qKKAw">
mschart package vignette
</a>
. While you lose the flexibility of R&#39;s graphics system, using the mschart package does mean the recipient can use the standard Office chart tools to reformat the chart while keeping the overall presentation structure. For example, I was able to change the style of 
<a href="https://view.officeapps.live.com/op/view.aspx?src=https://ardata-fr.github.io/mschart/articles/assets/pptx/gallery_bar_01.pptx" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://view.officeapps.live.com/op/view.aspx?src%3Dhttps://ardata-fr.github.io/mschart/articles/assets/pptx/gallery_bar_01.pptx&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNEMu5g0ESf-4cM8yWXWWOVyy6fQlQ">
this bar chart
</a>
 in word with a couple of clicks, and even change the labels from French to English using the Edit Data tool.
</p>

<p>
<a class="m_-224555803572068892asset-img-link" href="http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2b7bc28970c-pi" style="display:inline" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2b7bc28970c-pi&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHxWu8MYpQoq_p8X7F8BG2pasT9rQ">
<img alt="Mschart1" border="0" class="m_-224555803572068892asset m_-224555803572068892asset-image m_-224555803572068892at-xid-6a010534b1db25970b01b8d2b7bc28970c m_-224555803572068892image-full m_-224555803572068892img-responsive" src="https://ci3.googleusercontent.com/proxy/e-_cJWZZpy4PzHkgZAuB76LFMds0DvjO8wojMyeF22E0C2GPHFKRWYSh5R5ByCSAI4RNezgASvnGSXNXngZ61Ph2NZbiA6pEhZXceFIvAW3LbXzHPBTfkI6-AadXu5UdWYAw0lc20kgz=s0-d-e1-ft#http://revolution-computing.typepad.com/.a/6a010534b1db25970b01b8d2b7bc28970c-800wi" title="Mschart1">
</a>
</p>

<p>
Like the 
<a href="http://mran.microsoft.com/package/officer/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://mran.microsoft.com/package/officer/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNFyJyyknBifRneywozpSbnM8otEsQ">
officer
</a>
 package, the 
<a href="http://mran.microsoft.com/package/mschart/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://mran.microsoft.com/package/mschart/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNFlb0TrXRgfmG5cT51YQIsNLDnFKw">
mschart
</a>
 and 
<a href="http://mran.microsoft.com/package/rvg/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://mran.microsoft.com/package/rvg/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGxGc5HTgnB4bK4ZOfgF_sF-hh-IA">
rvg
</a>
 packages are maintained by David Gohel; Bob Rudis, and Francois Brunetti also contributed. Both packages are available now on CRAN, and you can install them into your R session with the 
<code>
install.packages
</code>
 function.
</p>

</div>

<p>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:13px">

<div style="text-align:center">
To 
<strong>
leave a comment
</strong>
 for the author, please follow the link and comment on their blog: 
<strong>
<a href="http://blog.revolutionanalytics.com/2017/10/office-charts.html" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://blog.revolutionanalytics.com/2017/10/office-charts.html&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNG-HXGM_9ytuxsUDE0oIf0fPhRC9g">
 Revolutions
</a>
</strong>
.
</div>

<hr>

<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHUEHOho9Egslntp6Z0bHcJ5SOcnA">
R-bloggers.com
</a>
 offers 
<strong>
<a href="https://feedburner.google.com/fb/a/mailverify?uri=RBloggers" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://feedburner.google.com/fb/a/mailverify?uri%3DRBloggers&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNE7K7TWHLwoUCACsv60FfXeJ06ejg">
daily e-mail updates
</a>
</strong>
 about 
<a title="The R Project for Statistical Computing" href="https://www.r-project.org/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-project.org/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGoeItAsLtr0wShfadA0B2Tj7qPpA">
R
</a>
 news and 
<a title="R tutorials" href="https://www.r-bloggers.com/search/tutorial" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/tutorial&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHlIOrasHkvLUbZm9WpV-D09iNLuw">
tutorials
</a>
 on topics such as: 
<a title="Data science" href="https://www.r-bloggers.com/search/data%20science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/data%2520science&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGUpOJzwU7WP1_lZrwqysqri0ZRwA">
Data science
</a>
, 
<a title="Big Data" href="https://www.r-bloggers.com/search/Big%20Data" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Big%2520Data&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNEfVMPn8LYVWDegab6YGKPapKA6pg">
Big Data, 
<a title="R jobs" href="https://www.r-users.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-users.com/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNFFh17cqt-v1j01GtMppn5CNEkY0g">
R jobs
</a>
, visualization (
<a title="ggplot and ggplot2 tutorials" href="https://www.r-bloggers.com/search/ggplot2" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/ggplot2&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHlQykkIeEsAts-gtZY8U67QVoqQQ">
ggplot2
</a>
, 
<a title="Boxplots using lattice and ggplot2 tutorials" href="https://www.r-bloggers.com/search/boxplot" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/boxplot&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNFrMTiMet5xb8qgYs98mJfYLT-wzA">
Boxplots
</a>
, 
<a title="Maps and gis" href="https://www.r-bloggers.com/search/map" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/map&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNG5wddyoqrGzG6sjS_WXV5NrmlFdA">
maps
</a>
, 
<a title="Animation in R" href="https://www.r-bloggers.com/search/animation" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/animation&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGEhhDhBokKzea6ly2e3pK5J07FtA">
animation
</a>
), programming (
<a title="RStudio IDE for R" href="https://www.r-bloggers.com/search/RStudio" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/RStudio&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNEw85JwZJgexZPFapOdztXg_GHOEw">
RStudio
</a>
, 
<a title="Sweave and literate programming" href="https://www.r-bloggers.com/search/sweave" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/sweave&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNEz2IpDvqv0eltkKSr_7CTKtjqqnA">
Sweave
</a>
, 
<a title="LaTeX in R" href="https://www.r-bloggers.com/search/LaTeX" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/LaTeX&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGSiv0Ot8BLtAv2RyJNihQbLyz1Rg">
LaTeX
</a>
, 
<a title="SQL and databases" href="https://www.r-bloggers.com/search/SQL" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/SQL&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHk8PNTtcweV3jzyhppz6Cgk4gEJw">
SQL
</a>
, 
<a title="Eclipse IDE for R" href="https://www.r-bloggers.com/search/eclipse" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/eclipse&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNF6bcF06kMbCcWIh4mkMjmc_S-8uQ">
Eclipse
</a>
, 
<a title="git and github, Version Control System" href="https://www.r-bloggers.com/search/git" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/git&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNH3S5mKI43vErOmNjd3MRHyo6kevg">
git
</a>
, 
<a title="Large data in R using Hadoop" href="https://www.r-bloggers.com/search/hadoop" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/hadoop&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHPWK7djv2NcZRd5KbxL3a4ciU_PA">
hadoop
</a>
, 
<a title="Web Scraping of google, facebook, yahoo, twitter and more using R" href="https://www.r-bloggers.com/search/Web+Scraping" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Web%2BScraping&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNEEK5a_FsaJQmn6iBoP_s--MnAEdg">
Web Scraping
</a>
) statistics (
<a title="Regressions and ANOVA analysis tutorials" href="https://www.r-bloggers.com/search/regression" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/regression&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGDbCcoTHTjXeloSJatsI-fklbx5Q">
regression
</a>
, 
<a title="principal component analysis tutorial" href="https://www.r-bloggers.com/search/PCA" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/PCA&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGP92MIb-Zu_3iMcXNbz5w47cHvXg">
PCA
</a>
, 
<a title="Time series" href="https://www.r-bloggers.com/search/time+series" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/time%2Bseries&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHytBziqJxKo_4EumdWCHFNkBBIeg">
time series
</a>
, 
<a title="finance trading" href="https://www.r-bloggers.com/search/trading" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/trading&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNFYGPbLHgC8AGN3nzuI0iW9LkdNpA">
trading
</a>
) and more...
</a>
</div>
</p>
<img src="https://ci6.googleusercontent.com/proxy/1ytsUCoDUM2FlbayXNzmBvhtiA9HjdT4LkwX55yfPaF2UmwfcSADPh3dSyEA5HvHlaIUAEiAJ3Bm5rnJNG1-CxHsfLeviv33DNYCYAXQ95RkE_H4kBoKJfmnyCEoIt0AMu9ETWepQzohuuX2aR-26Xxl3f4=s0-d-e1-ft#http://feeds.feedburner.com/~r/RBloggers/~4/CJbxlTRWCPQ?utm_source=feedburner&amp;utm_medium=email" height="1" width="1" alt="">

</div>

</td>

</tr>

<tr>

<td style="margin-bottom:0;line-height:1.4em">

<p style="margin:1em 0 3px 0">

<a name="m_-224555803572068892_2" style="font-family:Arial,Helvetica,sans-serif;font-size:19px" href="http://feedproxy.google.com/~r/RBloggers/~3/bNFiLeGwxO8/?utm_source=feedburner&amp;utm_medium=email" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://feedproxy.google.com/~r/RBloggers/~3/bNFiLeGwxO8/?utm_source%3Dfeedburner%26utm_medium%3Demail&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHabIJWpUwTEi4_xfIzK6UeSQgwdQ">
CRAN search based on natural language processing
</a>

</p>

<p style="font-size:14px;color:#555;margin:9px 0 3px 0;font-family:Arial,Helvetica,sans-serif;line-height:140%;font-size:14px">

<span>
Posted:
</span>
 24 Oct 2017 06:30 AM PDT
</p>

<div>
<p>
<div>
<div>
<div>
<div>
</div>
</div>
<div>
</div>
</div>
<div style="clear:both">
</div>
</div>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:12px">
(This article was first published on 
<strong>
<a href="http://www.bnosac.be/index.php/blog/70-cran-search-based-on-natural-language-processing" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.bnosac.be/index.php/blog/70-cran-search-based-on-natural-language-processing&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNGvKHWSQcRWXSDNvj6d-XuiM7whjA">
 bnosac :: open analytical helpers
</a>
</strong>
, and kindly contributed to 
<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNHUEHOho9Egslntp6Z0bHcJ5SOcnA">
R-bloggers)
</a>

</div>
</p>

<p>
CRAN contains up to date (October 2017) more than 11500 R packages. If you want to scroll through all of these, you probably need to spend a few days, assuming you need 5 seconds per package and there are 8 hours in a day.
</p>

<p>
Since R version 3.4, we can also get a dataset will all packages, their dependencies, the package title, the description and even the installation errors which the packages have. Which makes the CRAN database with all packages an excellent dataset for doing text mining. If you want to get that dataset, just do as follows in R:
</p>

<p>
<code>
library(tools)
<br>
crandb &lt;- CRAN_package_db()
</code>
</p>

<p>
Based on that data the following 
<strong>
CRAN NLP searcher
</strong>
 app was built as shown below. I’ts available for inspection at 
<a href="http://datatailor.be:9999/app/cran_search" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://datatailor.be:9999/app/cran_search&amp;source=gmail&amp;ust=1509502773501000&amp;usg=AFQjCNEBYxJIp8y6vJhzN6iQq1QWjeGwhw">
</a>
<a>
http://datatailor.be:9999/app/
<wbr>
cran_search 
</a>
and is a tiny wrapper around the result of annotating the package title and package description using the udpipe R package: 
<a href="https://github.com/bnosac/udpipe" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/bnosac/udpipe&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNE-Mma4iGQLf_z7r4NxO60rPoCXuQ">
https://github.com/bnosac/
<wbr>
udpipe
</a>
</p>

<p>
<img src="https://ci4.googleusercontent.com/proxy/PzHRSLVnjFVAmo4sAfW6UlPnA45jTKtb0DFVX5Z1MaxFmdpzdT_ZbXB9bjLlob5NIEQd7OJ-dEcMRneA9oGAQWE2isIkk2aiUo1nwt43sX3U9PWRHEPES_Y_8UzViOEekEmV=s0-d-e1-ft#https://i1.wp.com/www.bnosac.be/images/bnosac/blog/cran-search-corr.png?w=450" alt="udpipe rlogo" style="display:block;margin:10px auto">
</p>

<p>
If you want to easily extract what is written in text without reading it, a common way is to do Parts of Speech tagging, extract the nouns and/or the verbs and then plot all co-occurrences / correlations and frequencies of the lemmata. The updipe package allows you exactly to do that. Annotating using Parts of Speech tagging, is pretty easy with udpipe_annotate function from the the udpipe R package (
<a href="https://github.com/bnosac/udpipe" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/bnosac/udpipe&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNE-Mma4iGQLf_z7r4NxO60rPoCXuQ">
https://github.com/bnosac/
<wbr>
udpipe
</a>
). Mark that this takes a while (as in +/- 30 minutes) and is probably something you want to run as a web-service or integrated stored procedure.
</p>

<p>
<code>
library(udpipe)
<br>
ud_model &lt;- udpipe_download_model(language = &quot;english&quot;)
<br>
ud_model &lt;- udpipe_load_model(ud_model$
<wbr>
file_model)
<br>
crandb_annotated &lt;- udpipe_annotate(ud_model,
<br>
                              
<wbr>
      x = paste(crandb$Title, crandb$Description, sep = &quot; \n &quot;),
<br>
                              
<wbr>
      doc_id = crandb$Package)
<br>
crandb_annotated &lt;- as.data.frame(crandb_
<wbr>
annotated)
</code>
</p>

<p>
Once we have that data annotated, making a web application which allows you to visualise, structure and display the CRAN packages content is pretty easy with tools like 
<a href="http://rmarkdown.rstudio.com/flexdashboard/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://rmarkdown.rstudio.com/flexdashboard/&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGIV5kCgtTwgGqMRUvPERb0mKnxvA">
flexdashboard
</a>
. That’s exactly what this web application available at 
<a href="http://datatailor.be:9999/app/cran_search" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://datatailor.be:9999/app/cran_search&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGWKZRiJZUvssHL_CX_JR_4extCvw">
http://datatailor.be:9999/app/
<wbr>
cran_search
</a>
 does. The application allows you
</p>

<p>
<img src="https://ci3.googleusercontent.com/proxy/QuX9d7lW3mZjOkyAqjCuWBYvD-2mkwKfkYByOOkVKSRBfily87DQt0EzwOYm_oHNhR3ppW0-JMgYpa_JnH6UyjkCsoNRy28ZSh7PPOLlJbXQvEQU4MDZwm_VzqTg9TnxMiOJ4W5_u8Y8x4o2JTmXhYo=s0-d-e1-ft#https://i1.wp.com/www.bnosac.be/images/bnosac/blog/cran-search-cluster.png?resize=350%2C249" alt="cran search cluster" style="float:right">
</p>

<ul>

<li>
List all packages which are part of a CRAN Task View
</li>

<li>
To search for CRAN packages based on what the author has written in the 
<span style="text-decoration:underline">
package title and description
</span>
</li>

<li>
Based on the found CRAN packages which were searched for: 
<span style="text-decoration:underline">
Visualise
</span>
 the nouns and verbs in the package title and descriptions by using
<ul>

<li>
<strong>
Word-coocurrence graphs
</strong>
 indicating how many times each lemma occurs in the same package as another lemma
</li>

<li>
<strong>
Word-correlation graphs
</strong>
 showing the positive correlations between the top n most occurring lemma’s in the packages
</li>

<li>
<strong>
Word clouds
</strong>
 indicating the frequency of nouns/verbs or consecutive nouns/verbs (bigrams) in the package descriptions
</li>

<li>
Build a 
<strong>
topic model
</strong>
 (latent dirichlet allocation) to cluster packages and 
<strong>
visualise
</strong>
 them
</li>

</ul>

</li>

</ul>

<p>
The web application (flexdashboard) was launched on a small 
<a href="https://www.shinyproxy.io/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.shinyproxy.io/&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGHMk_96ryuCwIcd5st54QSXNoceA">
shinyproxy 
</a>
server and is available here: 
<a href="http://datatailor.be:9999/app/cran_search" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://datatailor.be:9999/app/cran_search&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGWKZRiJZUvssHL_CX_JR_4extCvw">
http://datatailor.be:9999/app/
<wbr>
cran_search
</a>
. Can you find topics which are not yet covered by the CRAN task views yet? Can you find the content of the Rcpp-universe or the sp package universe?
</p>

<p>
If you are interested in these techniques, you can always subscribe for our text mining with R course at the following dates:
</p>

<ul>

<li>
<strong>
08+10/11/2017: Text mining with R. Leuven (Belgium). Subscribe 
<a href="https://lstat.kuleuven.be/training/coursedescriptions/text-mining-with-r" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://lstat.kuleuven.be/training/coursedescriptions/text-mining-with-r&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFRk_V4buqoXxpunnYVHikKLZZczg">
here
</a>
</strong>
</li>

<li>
<strong>
27-28/11/2017: Text mining with R. Brussels (Belgium). 
<a href="http://di-academy.com/bootcamp/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://di-academy.com/bootcamp/&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNE5OyEiE6vfRjWkPuLYCq5Pb_Xl0A">
http://di-academy.
<wbr>
com/bootcamp
</a>
 + send mail to 
<span id="m_-224555803572068892cloak53523189d46cc983a9b7927313b099a5">
<a>
training@di-academy.com
</a>
</span>
</strong>
</li>

<li>
<span id="m_-224555803572068892cloak53523189d46cc983a9b7927313b099a5">
<a href="mailto:training@di-academy.com" rel="nofollow" target="_blank">
</a>
</span>
19-20/12/2017: Applied spatial modelling with R. Leuven (Belgium). Subscribe 
<a href="https://lstat.kuleuven.be/training/applied-spatial-modelling-with-r" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://lstat.kuleuven.be/training/applied-spatial-modelling-with-r&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGPhrfCO34DTRFpmWH5Bd9wfOmucA">
here
</a>
</li>

<li>
20-21/02/2018: Advanced R programming. Leuven (Belgium). Subscribe 
<a href="https://lstat.kuleuven.be/training/coursedescriptions/AdvancedprogramminginR.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://lstat.kuleuven.be/training/coursedescriptions/AdvancedprogramminginR.html&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFN3jqtrH8Hh8gMP_MKLPpfm1U5SA">
here
</a>
</li>

<li>
08-09/03/2018: Computer Vision with R and Python. Leuven (Belgium). Subscribe 
<a href="https://lstat.kuleuven.be/training/coursedescriptions/ComputervisionwithRandPython" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://lstat.kuleuven.be/training/coursedescriptions/ComputervisionwithRandPython&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNHdPyD9oohJgEEaYHN51pEoTUw3eQ">
here
</a>
</li>

<li>
<strong>
22-23/03/2018: Text Mining with R. Leuven (Belgium). Subscribe 
<a href="https://lstat.kuleuven.be/training/coursedescriptions/text-mining-with-r" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://lstat.kuleuven.be/training/coursedescriptions/text-mining-with-r&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFRk_V4buqoXxpunnYVHikKLZZczg">
here
</a>
</strong>
</li>

</ul>

<p>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:13px">

<div style="text-align:center">
To 
<strong>
leave a comment
</strong>
 for the author, please follow the link and comment on their blog: 
<strong>
<a href="http://www.bnosac.be/index.php/blog/70-cran-search-based-on-natural-language-processing" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.bnosac.be/index.php/blog/70-cran-search-based-on-natural-language-processing&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGxwllPanQncmUHNIGPm4nqFoJebw">
 bnosac :: open analytical helpers
</a>
</strong>
.
</div>

<hr>

<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFh8x5ag2vKPHFJH-sxQq-GcszzHg">
R-bloggers.com
</a>
 offers 
<strong>
<a href="https://feedburner.google.com/fb/a/mailverify?uri=RBloggers" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://feedburner.google.com/fb/a/mailverify?uri%3DRBloggers&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNF2kI4fMaYZR_uIYBLqypaYFOESqg">
daily e-mail updates
</a>
</strong>
 about 
<a title="The R Project for Statistical Computing" href="https://www.r-project.org/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-project.org/&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNHY1N60Z-3fPlbgaKQLZhmw9ouR6A">
R
</a>
 news and 
<a title="R tutorials" href="https://www.r-bloggers.com/search/tutorial" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/tutorial&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNEg0Fb8vt3bKUuBPdDNHgPiN2INZw">
tutorials
</a>
 on topics such as: 
<a title="Data science" href="https://www.r-bloggers.com/search/data%20science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/data%2520science&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFGTw_I2hod-9VypUpuHNSkbWSNSw">
Data science
</a>
, 
<a title="Big Data" href="https://www.r-bloggers.com/search/Big%20Data" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Big%2520Data&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFWebhEzVJLNycYEQsBWGs5B2OJVw">
Big Data, 
<a title="R jobs" href="https://www.r-users.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-users.com/&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNHZSvY7Zg0eflb8XbLf_Ykr2TXs4w">
R jobs
</a>
, visualization (
<a title="ggplot and ggplot2 tutorials" href="https://www.r-bloggers.com/search/ggplot2" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/ggplot2&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGxxxuURDKm_A0GGWqewrrH6sodhw">
ggplot2
</a>
, 
<a title="Boxplots using lattice and ggplot2 tutorials" href="https://www.r-bloggers.com/search/boxplot" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/boxplot&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNF-OEajYglOXm-vqTiathrjqmnMBQ">
Boxplots
</a>
, 
<a title="Maps and gis" href="https://www.r-bloggers.com/search/map" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/map&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNEgB-aKBF8_4DW36A4nn90yP8Vtag">
maps
</a>
, 
<a title="Animation in R" href="https://www.r-bloggers.com/search/animation" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/animation&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFDiBl9l_7zVXie_eNPmEEoizQZag">
animation
</a>
), programming (
<a title="RStudio IDE for R" href="https://www.r-bloggers.com/search/RStudio" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/RStudio&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNHO4OqTSMjskuemFgK7ggifAEPhvg">
RStudio
</a>
, 
<a title="Sweave and literate programming" href="https://www.r-bloggers.com/search/sweave" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/sweave&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNEmXlf9KJaslF7Vsw4mQlqFKr-_Sg">
Sweave
</a>
, 
<a title="LaTeX in R" href="https://www.r-bloggers.com/search/LaTeX" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/LaTeX&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNFigv-yEYioWVWMg9UxxR2Wk5YoqA">
LaTeX
</a>
, 
<a title="SQL and databases" href="https://www.r-bloggers.com/search/SQL" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/SQL&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNEeYsM85DcqkBxkrkxVS9pC1r9-dA">
SQL
</a>
, 
<a title="Eclipse IDE for R" href="https://www.r-bloggers.com/search/eclipse" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/eclipse&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNHeiYXbkmVR2Mqtsmox_HYzSHPI5A">
Eclipse
</a>
, 
<a title="git and github, Version Control System" href="https://www.r-bloggers.com/search/git" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/git&amp;source=gmail&amp;ust=1509502773502000&amp;usg=AFQjCNGcFPeCYeMdVIo6CiJmgkDmS5vm_Q">
git
</a>
, 
<a title="Large data in R using Hadoop" href="https://www.r-bloggers.com/search/hadoop" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/hadoop&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNEWPtqV5gw2DqdQ6BviGrRKWcLwlQ">
hadoop
</a>
, 
<a title="Web Scraping of google, facebook, yahoo, twitter and more using R" href="https://www.r-bloggers.com/search/Web+Scraping" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Web%2BScraping&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNHLfo63pVAO65Oetmge6u4VPdk2iQ">
Web Scraping
</a>
) statistics (
<a title="Regressions and ANOVA analysis tutorials" href="https://www.r-bloggers.com/search/regression" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/regression&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNHnUX_CnsxnmX9YUyZZknA1TIenvg">
regression
</a>
, 
<a title="principal component analysis tutorial" href="https://www.r-bloggers.com/search/PCA" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/PCA&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNF11gS3eOVsteetpncFrsZ-qxcudA">
PCA
</a>
, 
<a title="Time series" href="https://www.r-bloggers.com/search/time+series" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/time%2Bseries&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNG1zHmc9r3Ns6EX1qmQhXI3M1-FVQ">
time series
</a>
, 
<a title="finance trading" href="https://www.r-bloggers.com/search/trading" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/trading&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNE3lSv_0ifxpyuuL7Kd8kwkNzDUBw">
trading
</a>
) and more...
</a>
</div>
</p>
<img src="https://ci3.googleusercontent.com/proxy/uMA9xp-VjB2-WWr1nFgjmrInVZQXfSpL2ZX8t7VRhzEcOzTxD7PU3FSyTstj2nE9baQYjT0dE52PQOZznCmg_XEaJegtmW7XGRNpnOp8x5VgA2h9c_wZ20Ad7NPrhRzd5En2ebkLi9RvBQMi1uZ5O2o9Vhw=s0-d-e1-ft#http://feeds.feedburner.com/~r/RBloggers/~4/bNFiLeGwxO8?utm_source=feedburner&amp;utm_medium=email" height="1" width="1" alt="">

</div>

</td>

</tr>

<tr>

<td style="margin-bottom:0;line-height:1.4em">

<p style="margin:1em 0 3px 0">

<a name="m_-224555803572068892_3" style="font-family:Arial,Helvetica,sans-serif;font-size:19px" href="http://feedproxy.google.com/~r/RBloggers/~3/Kfyv3IL_Bos/?utm_source=feedburner&amp;utm_medium=email" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://feedproxy.google.com/~r/RBloggers/~3/Kfyv3IL_Bos/?utm_source%3Dfeedburner%26utm_medium%3Demail&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGZYmvjWMbQ7DOdhWe8-bqRydg6eA">
Machine Learning Explained: Kmeans
</a>

</p>

<p style="font-size:14px;color:#555;margin:9px 0 3px 0;font-family:Arial,Helvetica,sans-serif;line-height:140%;font-size:14px">

<span>
Posted:
</span>
 24 Oct 2017 06:20 AM PDT
</p>

<div>
<p>
<div>
<div>
<div>
<div>
</div>
</div>
<div>
</div>
</div>
<div style="clear:both">
</div>
</div>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:12px">
(This article was first published on 
<strong>
<a href="http://enhancedatascience.com/2017/10/24/machine-learning-explained-kmeans/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://enhancedatascience.com/2017/10/24/machine-learning-explained-kmeans/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNG2tBdPI-JCPsB58uz90P1M7S964Q">
 Enhance Data Science
</a>
</strong>
, and kindly contributed to 
<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGn-q7EZyL6aiA8p1XKlqxhQvNJXg">
R-bloggers)
</a>

</div>
</p>

<p>
Kmeans is one of the most popular and simple algorithm to discover underlying structures in your data. The goal of kmeans is simple, split your data in k different groups represented by their mean. The mean of each group is assumed to be a good summary of each observation of this cluster.
</p>

<h2>
Kmeans Algorithm
</h2>

<p>
We assume that we want to split the data into k groups, so we need to find and assign k centers. How to define and find these centers?
</p>

<p>
They are the solution to the equation:  
<span style="vertical-align:-100%">
 
<strong>
<img src="https://ci6.googleusercontent.com/proxy/ekqkyS1qup_1whHSWhNnSUqukaKihPTw12on9F0i4U0omOCOTSpVSeF5IANqoRJ_aShRaagpkiYU02U1Zj2ccy2DpU19gqQ0ZQ7Zb1v7aXVhk0eprbatSY2bGiAjjT8dojn8ohBCb_krvtCt6qHqOdUodcmcma8XT5F-8PLyFi85A2dYqUmBHbTbrdmiAK66-EYwGFMtRxPUZiKWh0_a4oxk23MFR0Kq6xFda2zo=s0-d-e1-ft#http://s0.wp.com/latex.php?latex=min+%5Csum_%7Bi%7D%5EN%C2%A0%5Csum_%7Bj%7D%5EK+O_i%5Ej%7C%7Cx_i-%5Cmu_j+%7C%7C%5E2+&amp;bg=ffffff&amp;%23038;fg=000&amp;%23038;s=0" alt="min \sum_{i}^N \sum_{j}^K O_i^j||x_i-\mu_j ||^2 " title="min \sum_{i}^N \sum_{j}^K O_i^j||x_i-\mu_j ||^2 " class="m_-224555803572068892latex">
 
</strong>
</span>
 where
<strong>
 
<span style="vertical-align:-100%">
 
<img src="https://ci6.googleusercontent.com/proxy/qpphLtYQZ_qzA8jq_xSXEbbf9XcD6-YQEbGaXWOASPiwVqBX6MJ4ZKkyopvIUggB8FNpkcjm_r7DcfypFkmuKb_NhCTNNHF-z7GA72ZK2z59UZedIPTiqqg0WkLP49Fi_DoeP1z_XN0=s0-d-e1-ft#http://s0.wp.com/latex.php?latex=O_i%5Ej+%3D+1+&amp;bg=ffffff&amp;%23038;fg=000&amp;%23038;s=0" alt="O_i^j = 1 " title="O_i^j = 1 " class="m_-224555803572068892latex">
 
</span>
  
</strong>
 if the observation
<strong>
 i
</strong>
 is assigned to the center 
<strong>
j
</strong>
 and
<strong>
 0
</strong>
 otherwise.
</p>

<p>
 
</p>

<p>
Basically, this equation means that we are looking for the k centers which will minimize the distance between them and the points of their cluster. This is an optimization problem, but since the function, we want to minimize is not convex and some variables are binary, it cannot be solved in classic ways with gradient descent.
<br>
The usual way to solve it is the following:
</p>

<ol>

<li>
Initialize randomly the centers by selecting k-observations
</li>

<li>
While some convergence criterion is not met
<ol>

<li>
Assign each observation to its closest center
</li>

<li>
Update each center. The new centers are the mean of the observation of each group.
</li>

<li>
Update the convergence criterion.
</li>

</ol>

</li>

</ol>

<h2>
K-means from scratch with R
</h2>

<p>
Now that we have the algorithm in pseudocode, let’s implement kmeans from scratch in R. First,we’ll create some toys data based on five 2D gaussian distributions.
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
require(MASS)
require(ggplot2)
set.seed(1234)
set1=mvrnorm(n = 300, c(-4,10), matrix(c(1.5,1,1,1.5),2))
set2=mvrnorm(n = 300, c(5,7), matrix(c(1,2,2,6),2))
set3=mvrnorm(n = 300, c(-1,1), matrix(c(4,0,0,4),2))
set4=mvrnorm(n = 300, c(10,-10), matrix(c(4,0,0,4),2))
set5=mvrnorm(n = 300, c(3,-3), matrix(c(4,0,0,4),2))
DF=data.frame(rbind(set1,set2,
<wbr>
set3,set4,set5),cluster=as.
<wbr>
factor(c(rep(1:5,each=300))))
ggplot(DF,aes(x=X1,y=X2,color=
<wbr>
cluster))+geom_point()
</pre>

<p>
On this dataset, Kmeans will work well since each distribution has a circular shape. Here are what the data look like:
<br>

<img class="m_-224555803572068892aligncenter m_-224555803572068892size-full m_-224555803572068892wp-image-2423" src="https://ci6.googleusercontent.com/proxy/RYKnVKuywgE8K1wTgid8VTX3TyGKa_a2vquD25jBC3QjL4-YyN4pf5Wrgce4xCjxaU2fWaANNgEszbLurmCx_an_Dt7Mpe2jG5lU6s27lezG3KTDGG3nhTLB3OxIOBnQeum88lpM0PBxrO7sF9wVfKIFtGN4P7cdDoSLfmYQMz1r=s0-d-e1-ft#https://i1.wp.com/enhancedatascience.com/wp-content/uploads/2017/10/Cluster_ex1_kmeans.png?resize=500%2C250" alt="Cluster kmeans dataset1">
</p>

<p>
Now that we have a dataset, let’s inplement kmeans.
</p>

<h3>
Initialisation of the centroids
</h3>

<p>
The initialisation of the centroids is crucial and will change how the algorithm behave. Here, we will wimply takes K random points from the data.
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
#Centroids initialisation
  centroids=data[sample.int(
<wbr>
nrow(data),K),]
##Stopping criteria initilisation. 
  current_stop_crit=10e10
##Vector where the assigned centers of each points will be saved
  cluster=rep(0,nrow(data))
##Has the alogrithm converged ?
  converged=F
  it=1
</pre>

<h3>
Assigning points to their clusters
</h3>

<p>
At each iteration, every points will be assigned to its closest cluster. To do so, the euclidian distance between each points and each centers is computed, the lowest distance and the center for which it’s reached is saved.
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
###Iterating over observations
    for (i in 1:nrow(data))
    {
##Setting a high minimum distance
      min_dist=10e10
##Iterating over centroids
      for (centroid in 1:nrow(centroids))
      {
##Computing the L2 distance
        distance_to_centroid=sum((
<wbr>
centroids[centroid,]-data[i,])
<wbr>
^2)
##This centroid is the closest centroid to the point
        if (distance_to_centroid&lt;=min_
<wbr>
dist)
        {
##The point is assigned to this centroid/cluster
          cluster[i]=centroid
          min_dist=distance_to_centroid
        }
      }
    }
</pre>

<h3>
Centroids update
</h3>

<p>
Once each point has been assigned to the closest centroids, the coordinates of each centroid are updated. The new coordinates are the means of the observations which belongs to the cluster.
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
##For each centroid
    for (i in 1:nrow(centroids))
    {
##The new coordinates are the means of the point in the cluster
      centroids[i,]=apply(data[
<wbr>
cluster==i,],2,mean)
    }
</pre>

<h3>
Stopping criterion
</h3>

<p>
We do not want the algorithm to run indefinetely, hence we need a stopping criterion to stop the algorthm when we are close enough to a minimum. The criterion is simply that when the centroids stop moving, the algorithm should stop.
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
  while(current_stop_crit&gt;=stop_
<wbr>
crit &amp; converged==F)
  {
    it=it+1
    if (current_stop_crit&lt;=stop_crit)
    {
      converged=T
    }
    old_centroids=centroids
###Run previous step
####Recompute stop criterion
current_stop_crit=mean((old_
<wbr>
centroids-centroids)^2)

</pre>

<h3>
Complete function
</h3>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
kmeans=function(data,K=4,stop_
<wbr>
crit=10e-5)
{
  #Initialisation of clusters
  centroids=data[sample.int(
<wbr>
nrow(data),K),]
  current_stop_crit=1000
  cluster=rep(0,nrow(data))
  converged=F
  it=1
  while(current_stop_crit&gt;=stop_
<wbr>
crit &amp; converged==F)
  {
    it=it+1
    if (current_stop_crit&lt;=stop_crit)
    {
      converged=T
    }
    old_centroids=centroids
    ##Assigning each point to a centroid
    for (i in 1:nrow(data))
    {
      min_dist=10e10
      for (centroid in 1:nrow(centroids))
      {
        distance_to_centroid=sum((
<wbr>
centroids[centroid,]-data[i,])
<wbr>
^2)
        if (distance_to_centroid&lt;=min_
<wbr>
dist)
        {
          cluster[i]=centroid
          min_dist=distance_to_centroid
        }
      }
    }
    ##Assigning each point to a centroid
    for (i in 1:nrow(centroids))
    {
      centroids[i,]=apply(data[
<wbr>
cluster==i,],2,mean)
    }
    current_stop_crit=mean((old_
<wbr>
centroids-centroids)^2)
  }
  return(list(data=data.frame(
<wbr>
data,cluster),centroids=
<wbr>
centroids))
}
</pre>

<p>
You can easily run the code to see your clusters:
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
res=kmeans(DF[1:2],K=5)
res$centroids$cluster=1:5
res$data$isCentroid=F
res$centroids$isCentroid=T
data_plot=rbind(res$centroids,
<wbr>
res$data)
ggplot(data_plot,aes(x=X1,y=
<wbr>
X2,color=as.factor(cluster),
<wbr>
size=isCentroid,alpha=
<wbr>
isCentroid))+geom_point()
</pre>

<p>
<img class="m_-224555803572068892aligncenter m_-224555803572068892size-full m_-224555803572068892wp-image-2426" src="https://ci5.googleusercontent.com/proxy/myDWKiHbnoRGh4fjx3Gk97iVP9X7vtmIS7gEh3PdCN8IzRmv4oIW_SkKm0yRAhNXUWG8d_UZQbPRNK9Uag681KPqG7L8FlroC-8jvGgdzSh_t2LFT0IzpmO0yv0u-k-TxuQnpKlQN8Q03wdQHguKko84kpJ-wZEJphMvAHaD6PDv0H4=s0-d-e1-ft#https://i2.wp.com/enhancedatascience.com/wp-content/uploads/2017/10/Kmeans-final-cluster.png?resize=640%2C386" alt="">
</p>

<h2>
Exploring kmeans results
</h2>

<p>
Now let’s try the algorithm on two different datasets. First, on the 5 Gaussians distributions:
<br>

<img class="m_-224555803572068892aligncenter m_-224555803572068892size-full m_-224555803572068892wp-image-2425" src="https://ci5.googleusercontent.com/proxy/7shaANpbWk-AwMEIJ2sAKfe8cMGCBJU25bkVi10vhV10y-lSmcD_wmN0ILT7_tv5bhnPkxebY70wSh2k03fTcjhLqGXLNImh05O4M8yRdM9n_Ja0ZUCKhVR0HbtXLPTTTRkgQseRqX_D7rJpVm1u-Z155Ru0vKrkRusO4dCoA1sI=s0-d-e1-ft#https://i1.wp.com/enhancedatascience.com/wp-content/uploads/2017/10/centroidsEvolution.gif?resize=480%2C480" alt="Evolution of centroids position in kmeans">
<br>
The centroids move and split the data in clusters which are very close to the original ones. Kmeas is doing a great job here.
<br>
Now, instead of having nice gaussian distributions, we will build three rings on into another.
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
##Building three sets
set1=data.frame(r=runif(300,0.
<wbr>
1,0.5),theta=runif(300,0,360),
<wbr>
set=&#39;1&#39;)
set2=data.frame(r=runif(300,1,
<wbr>
1.5),theta=runif(300,0,360),
<wbr>
set=&#39;2&#39;)
set3=data.frame(r=runif(300,3,
<wbr>
5),theta=runif(300,0,360),set=
<wbr>
&#39;3&#39;)
##Transformation in rings
data_2=rbind(set1,set2,set3)
data_2$x=data_2$r*cos(2*3.14*
<wbr>
data_2$theta)
data_2$y=(data_2$r)*sin(2*3.
<wbr>
14*data_2$theta)
</pre>

<p>
The kmeans is performing very poorly on these new data. Actually, the euclidian distance is not adapted to this kind of problem, since the data are not in a circular shape.
<br>

<img class="m_-224555803572068892aligncenter m_-224555803572068892size-full m_-224555803572068892wp-image-2428" src="https://ci6.googleusercontent.com/proxy/nN7bOxe_QveBPfxKDGPdQbgTJ-rnRJfsGNKYNZ7CODyNPrX7wlefIinHimQcfe6gEwqLEHqT9ZcTaA1MC0EX0XkACmNoGu1NoaggeGmNHQ2ZwJdEzbyhAvAp9_wLdvnp9mr_3NMSHxiV5fkL9J8kWWW7szJzkYeuqmc=s0-d-e1-ft#https://i0.wp.com/enhancedatascience.com/wp-content/uploads/2017/10/Kmeans_ring.gif?resize=480%2C480" alt="">
<br>
So before using kmeans, you should ensure that the data is in appropriate shapes, if not, you can apply transformations or change the distance you are using in the kmeans.
</p>

<h2>
The importance of a good initialisation
</h2>

<p>
The kmeans algorithm only looks for a local mimimum which is often not a global optimum. Hence, different initialisation can lead to very different results.
<br>

<img class="m_-224555803572068892aligncenter m_-224555803572068892size-full m_-224555803572068892wp-image-2429" src="https://ci4.googleusercontent.com/proxy/VIOKdCy86w3205MUUImlCmWZo_5POg1th8s8LI-6B5nRex_pBG97pFpdtY3aM_pOly5EsadHxnfIqKY1PMGgD4T3395cv2hnHepLWd5zYirNVf2lM94fgWd-xHOPR8OGlznNEf6aGJD-JcGQutAGyXt4q8kOIicaSN02mZgt85AsZLsh2Q=s0-d-e1-ft#https://i2.wp.com/enhancedatascience.com/wp-content/uploads/2017/10/Centers_different_init.gif?resize=480%2C480" alt="Importance of initialisation for kmeans">
<br>
We ran the kmean algorithm over more than 60 different starting positions.As you can see, sometimes, the algorithm results in poor centroids due to an unlucky initialization. The solution to this is simply to run kmeans several times and to take the best centroids set. The quality of initialization can also be improved with 
<a href="https://en.wikipedia.org/wiki/K-means%2B%2B" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://en.wikipedia.org/wiki/K-means%252B%252B&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNESf1939KRT3L_VbSCBIWnDr4jOTw">
kmeans ++
</a>
, the algorithm selects starting points which are less likely to perform poorly.
</p>

<p>
Want to learn more on Machine Learning ? Here is a selection of Machine Learning Explained posts:
<br>
– 
<a href="http://enhancedatascience.com/2017/07/31/machine-learning-explained-dimensionality-reduction/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://enhancedatascience.com/2017/07/31/machine-learning-explained-dimensionality-reduction/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNHjoxMe95BPj7yeahFbChs5DQgVXw">
Dimensionality reduction
</a>
<br>
– 
<a href="http://enhancedatascience.com/2017/07/19/machine-learning-explained-supervised-learning-unsupervised-learning-and-reinforcement-learning/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://enhancedatascience.com/2017/07/19/machine-learning-explained-supervised-learning-unsupervised-learning-and-reinforcement-learning/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGFjx2uyauo3o0v6CfpO-WQKOrMjQ">
Supervised vs unsupervised vs reinforcement learning
</a>
<br>
– 
<a href="http://enhancedatascience.com/2017/07/04/machine-learning-explained-regularization/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://enhancedatascience.com/2017/07/04/machine-learning-explained-regularization/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNFxWuSc2E2WfDIT-VMVyr4AS4xt2A">
Regularization in machine learning
</a>
</p>

<p>
The post 
<a rel="nofollow" href="http://enhancedatascience.com/2017/10/24/machine-learning-explained-kmeans/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://enhancedatascience.com/2017/10/24/machine-learning-explained-kmeans/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNG2tBdPI-JCPsB58uz90P1M7S964Q">
Machine Learning Explained: Kmeans
</a>
 appeared first on 
<a rel="nofollow" href="http://enhancedatascience.com/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://enhancedatascience.com/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGtyFYPjHBVtF1m3nrj17cV8Kiq8A">
Enhance Data Science
</a>
.
</p>

<p>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:13px">

<div style="text-align:center">
To 
<strong>
leave a comment
</strong>
 for the author, please follow the link and comment on their blog: 
<strong>
<a href="http://enhancedatascience.com/2017/10/24/machine-learning-explained-kmeans/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://enhancedatascience.com/2017/10/24/machine-learning-explained-kmeans/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNG2tBdPI-JCPsB58uz90P1M7S964Q">
 Enhance Data Science
</a>
</strong>
.
</div>

<hr>

<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGn-q7EZyL6aiA8p1XKlqxhQvNJXg">
R-bloggers.com
</a>
 offers 
<strong>
<a href="https://feedburner.google.com/fb/a/mailverify?uri=RBloggers" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://feedburner.google.com/fb/a/mailverify?uri%3DRBloggers&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNFBl4H-h72i39OtU_arJ4jVemyIMg">
daily e-mail updates
</a>
</strong>
 about 
<a title="The R Project for Statistical Computing" href="https://www.r-project.org/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-project.org/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGb9ie18TdQjCo11EEzrIPnF9XBYA">
R
</a>
 news and 
<a title="R tutorials" href="https://www.r-bloggers.com/search/tutorial" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/tutorial&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNEJLYPfL1uI-WBVERh5yPDsbICIsw">
tutorials
</a>
 on topics such as: 
<a title="Data science" href="https://www.r-bloggers.com/search/data%20science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/data%2520science&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNFFnbUprIRVqw42jXUrTiDGOilyqw">
Data science
</a>
, 
<a title="Big Data" href="https://www.r-bloggers.com/search/Big%20Data" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Big%2520Data&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNEFNlfRJ8iziGc_hSGVBq1NVp0xgg">
Big Data, 
<a title="R jobs" href="https://www.r-users.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-users.com/&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNHd-Jmq1uSXkomXyJI93LZizQeEVg">
R jobs
</a>
, visualization (
<a title="ggplot and ggplot2 tutorials" href="https://www.r-bloggers.com/search/ggplot2" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/ggplot2&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNEl7C8wmFBZPUhX9kn7kvsO5bfTpA">
ggplot2
</a>
, 
<a title="Boxplots using lattice and ggplot2 tutorials" href="https://www.r-bloggers.com/search/boxplot" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/boxplot&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGzzAlD6rGNfCKwnOwBk9v1bguC7Q">
Boxplots
</a>
, 
<a title="Maps and gis" href="https://www.r-bloggers.com/search/map" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/map&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNFhlS4uEyLsBiJN3ERi9osqbub81w">
maps
</a>
, 
<a title="Animation in R" href="https://www.r-bloggers.com/search/animation" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/animation&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNFUA3VKdyoOEEiB1BRTuJSeaGqDHw">
animation
</a>
), programming (
<a title="RStudio IDE for R" href="https://www.r-bloggers.com/search/RStudio" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/RStudio&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNHex--E3BOOSC0EiRFbgsLyNZLShg">
RStudio
</a>
, 
<a title="Sweave and literate programming" href="https://www.r-bloggers.com/search/sweave" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/sweave&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNH0PeiSDSzsovs1MKKlNZd9YIaMvg">
Sweave
</a>
, 
<a title="LaTeX in R" href="https://www.r-bloggers.com/search/LaTeX" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/LaTeX&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNFX_H-aE2P_CulVwqP0YqTDhDp9yA">
LaTeX
</a>
, 
<a title="SQL and databases" href="https://www.r-bloggers.com/search/SQL" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/SQL&amp;source=gmail&amp;ust=1509502773503000&amp;usg=AFQjCNGQElL4gp8D7KWRNVGUok4iwQeOhQ">
SQL
</a>
, 
<a title="Eclipse IDE for R" href="https://www.r-bloggers.com/search/eclipse" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/eclipse&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNHUTxzISc2iHHvEwfbl0APpyJrs1g">
Eclipse
</a>
, 
<a title="git and github, Version Control System" href="https://www.r-bloggers.com/search/git" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/git&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNG62g_ykCIqxiYHsukLd03EwT-zpQ">
git
</a>
, 
<a title="Large data in R using Hadoop" href="https://www.r-bloggers.com/search/hadoop" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/hadoop&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNF--zVZLIBF4_kA-e0Om4fAu7skhg">
hadoop
</a>
, 
<a title="Web Scraping of google, facebook, yahoo, twitter and more using R" href="https://www.r-bloggers.com/search/Web+Scraping" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Web%2BScraping&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNG1m-w8-lBLJINo5P98bKl2aqxGSA">
Web Scraping
</a>
) statistics (
<a title="Regressions and ANOVA analysis tutorials" href="https://www.r-bloggers.com/search/regression" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/regression&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNH_4F5I_YjslgKd0Uee82_RQHTU7w">
regression
</a>
, 
<a title="principal component analysis tutorial" href="https://www.r-bloggers.com/search/PCA" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/PCA&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGFEsri5aVg9NzXuwitC50EFi0F3g">
PCA
</a>
, 
<a title="Time series" href="https://www.r-bloggers.com/search/time+series" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/time%2Bseries&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNHjgmFAVdI9oZGGUY0BvlPxpTlOWg">
time series
</a>
, 
<a title="finance trading" href="https://www.r-bloggers.com/search/trading" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/trading&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNHeGCzJ5rGY7Y7xuuiX23gkU1s64w">
trading
</a>
) and more...
</a>
</div>
</p>
<img src="https://ci4.googleusercontent.com/proxy/T2RI_8-1VKiB7z2UEGN1ETIxFIi5EYK4XDTZR346Tqdz2HSBUFl-EuugbGIVK7PSfffsz7Z0qvik1eVg4PIK2lXZBfWDasMfGtkJBouNsJCc70GZXCEASpFWrnVcnjyRXS7crMBkS7gGiPjHRtz7siVl5S8=s0-d-e1-ft#http://feeds.feedburner.com/~r/RBloggers/~4/Kfyv3IL_Bos?utm_source=feedburner&amp;utm_medium=email" height="1" width="1" alt="">

</div>

</td>

</tr>

<tr>

<td style="margin-bottom:0;line-height:1.4em">

<p style="margin:1em 0 3px 0">

<a name="m_-224555803572068892_4" style="font-family:Arial,Helvetica,sans-serif;font-size:19px" href="http://feedproxy.google.com/~r/RBloggers/~3/qsjJTTgdZ04/?utm_source=feedburner&amp;utm_medium=email" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://feedproxy.google.com/~r/RBloggers/~3/qsjJTTgdZ04/?utm_source%3Dfeedburner%26utm_medium%3Demail&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNFQgzf5aq-jgT6uzd_2whyv45dyRw">
A Shiny App to Create Sentimental Tweets Based on Project Gutenberg Books
</a>

</p>

<p style="font-size:14px;color:#555;margin:9px 0 3px 0;font-family:Arial,Helvetica,sans-serif;line-height:140%;font-size:14px">

<span>
Posted:
</span>
 24 Oct 2017 12:00 AM PDT
</p>

<div>
<p>
<div>
<div>
<div>
<div>
</div>
</div>
<div>
</div>
</div>
<div style="clear:both">
</div>
</div>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:12px">
(This article was first published on 
<strong>
<a href="https://fronkonstin.com/2017/10/24/a-shiny-app-to-create-sentimental-tweets-based-on-project-gutenberg-books/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://fronkonstin.com/2017/10/24/a-shiny-app-to-create-sentimental-tweets-based-on-project-gutenberg-books/&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGF1hZ5VZe6AhlrV5KE2Qd7uWAe5A">
 R – Fronkonstin
</a>
</strong>
, and kindly contributed to 
<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGdM1DUKuRuFYvt7qTN4FTOjssdgA">
R-bloggers)
</a>

</div>
</p>

<div class="m_-224555803572068892twitter-share">
<a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Ffronkonstin.com%2F2017%2F10%2F24%2Fa-shiny-app-to-create-sentimental-tweets-based-on-project-gutenberg-books%2F&amp;hashtags=rstats%20%23NLP&amp;%23038;via=aschinchon" class="m_-224555803572068892twitter-share-button" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/intent/tweet?url%3Dhttps%253A%252F%252Ffronkonstin.com%252F2017%252F10%252F24%252Fa-shiny-app-to-create-sentimental-tweets-based-on-project-gutenberg-books%252F%26hashtags%3Drstats%2520%2523NLP%26%2523038;via%3Daschinchon&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNFgEQVUhZfGVklBpI5jy7qRQmcFXA">
Tweet
</a>
</div>

<blockquote>

<p>
There was something about them that made me uneasy, some longing and at the same time some deadly fear – Dracula (Stoker, Bram)
</p>

</blockquote>

<p>
Twitter is a very good source of inspiration. Some days ago I came across with this:
</p>

<div class="m_-224555803572068892twitter-tweet">

<blockquote class="m_-224555803572068892twitter-tweet">

<p lang="es" dir="ltr">
Mi presentación sobre análisis de textos con R para el primer meetup de 
<a href="https://twitter.com/RLadiesSantiago?ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/RLadiesSantiago?ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNE3o7YDY-uO5scL4xCjHl_QlIIerQ">
@RLadiesSantiago
</a>
: 
<a href="https://t.co/KPU89vyeND" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://t.co/KPU89vyeND&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGFKGvOBhXkgdcVjSKQoIjEwJPHtQ">
https://t.co/KPU89vyeND
</a>
 
<a href="https://twitter.com/hashtag/rladies?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/rladies?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNFO0QM0rGKeYwVUze2t3WKBYnz0eA">
#rladies
</a>
 
<a href="https://twitter.com/hashtag/rstatsES?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/rstatsES?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNHvZH2cgqJs3Y6_r-nCW6muuSclBA">
#rstatsES
</a>
</p>

<p>
— Riva Quiroga (@rivaquiroga) 
<a href="https://twitter.com/rivaquiroga/status/912149538495959042?ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/rivaquiroga/status/912149538495959042?ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGDJxfi662TDpqEDsr1zpZDiYsY5g">
September 25, 2017
</a>
</p>

</blockquote>

</div>

<p>
The tweet refers to a presentation (in Spanish) available 
<a href="https://t.co/KPU89vyeND" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://t.co/KPU89vyeND&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGFKGvOBhXkgdcVjSKQoIjEwJPHtQ">
here
</a>
, which is a very concise and well illustrated document about the 
<em>
state-of-the-art
</em>
 of text mining in R. I discovered there several libraries that I will try to use in the future. In this experiment I have used one of them: the 
<code>
syuzhet
</code>
 package. As can be read in the documentation:
</p>

<p>
<em>
this package extracts sentiment and sentiment-derived plot arcs from text using three sentiment dictionaries conveniently packaged for consumption by R users. Implemented dictionaries include 
<code>
syuzhet
</code>
 (default) developed in the Nebraska Literary Lab, 
<code>
afinn
</code>
 developed by Finn Arup Nielsen, 
<code>
bing
</code>
 developed by Minqing Hu and Bing Liu, and 
<code>
nrc
</code>
 developed by Mohammad, Saif M. and Turney, Peter D.
</em>
</p>

<p>
You can find a complete explanation of the package in 
<a href="https://cran.r-project.org/web/packages/syuzhet/vignettes/syuzhet-vignette.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://cran.r-project.org/web/packages/syuzhet/vignettes/syuzhet-vignette.html&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNEhk7nYuXMt7EAuWQm1yKQmQsLi7w">
its vignette
</a>
. A very interesting application of these techniques is the 
<em>
Sentiment Graph
</em>
 of a book, which represents how sentiment changes over time. This is the Sentiment Graph of 
<em>
Romeo and Juliet
</em>
, by William Shakespeare, taken from 
<a href="http://projectalexandria.net/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://projectalexandria.net/&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNEkqai3Qqu8sB_Gm4OHanmvmZMjnw">
Project Alexandria
</a>
:
</p>

<p>
<img class="m_-224555803572068892size-full m_-224555803572068892wp-image-4281 m_-224555803572068892aligncenter" src="https://ci3.googleusercontent.com/proxy/4n4iuSBLofxI3imVK6gx9Y9ArWjzFBh-LB75I95neTBlhbsIAxbz2LQRa_xzcdOjyxYEqnGzO2PPYFS4utJO13x06MDC9Q8hIO2mIxZDMP6JtSLvTf7pYUxmmbCvFZNPowXBMCzQWw5G93ETLIwuGEoH83t3QIwRAHZRWA=s0-d-e1-ft#https://i1.wp.com/fronkonstin.com/wp-content/uploads/2017/10/RomeoAndJuliet.png?resize=480%2C480&amp;ssl=1" alt="">
</p>

<p>
<em>
Darkest
</em>
 sentiments can be seen at the end of the book, where the tragedy reaches its highest level. It is also nice to see how sentiments are cyclical. This graphs can be very useful for people who just want to read happy endings books (my sister is one of those).
</p>

<p>
Inspired by this analysis, I have done another experiment in which I download a book from Project Gutenberg and measure sentiment of all its sentences. Based on this measurement, I filter top 5% (positive or negative sentiment) sentences to build tweets. I have done a Shiny app where all these steps are explained. The app is available 
<a href="http://91.134.134.147:3838/gutenberg" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://91.134.134.147:3838/gutenberg&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNE8ammeu9A8BlLNa1hiPgBwXutYJw">
here
</a>
.
</p>

<p>
From a technical point of view I used 
<a href="https://shiny.rstudio.com/articles/selectize.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://shiny.rstudio.com/articles/selectize.html&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNF7ARAT5PU6uuIc_95QzagJ_01CxA">
<code>
selectize
</code>
</a>
 JavaScript library to filter books in a flexible way. I customized as well the appearance with CSS bootstrap from 
<a href="https://bootswatch.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://bootswatch.com/&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNEOBIg4qITylv-0nkEtEhIex_cLEw">
Bootswatch
</a>
 as explained 
<a href="https://shiny.rstudio.com/articles/css.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://shiny.rstudio.com/articles/css.html&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNFP2gBJxhfkZG7I8u5lRCML7oQoNw">
here
</a>
.
</p>

<p>
This is the code of the experiment.
</p>

<p>
<code>
UI.R
</code>
:
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
library(shiny)
fluidPage(theme = &quot;bootstrap.css&quot;,
  titlePanel(h1(&quot;Sentimental Tweets from Project Gutenberg Books&quot;, align=&quot;center&quot;),
             windowTitle=&quot;Tweets from Project Gutenberg&quot;),
  sidebarLayout(
      sidebarPanel(
        selectInput(
          &#39;book&#39;, &#39;Choose a book:&#39;, 
          multiple=FALSE,
          selectize = TRUE,
          choices=c(&quot;Enter some words of title or author&quot; = &quot;&quot;, gutenberg_works$searchstr)
          ),
        
        radioButtons(inputId = &quot;sent&quot;,
             label = &quot;Choose sentiment:&quot;,
             choices = c(&quot;Dark&quot;=&quot;1&quot;, &quot;Bright&quot;=&quot;20&quot;),
             selected=&quot;1&quot;,
             inline=TRUE),
        
        radioButtons(inputId = &quot;meth&quot;,
                    label = &quot;Choose a method to measure sentiment:&quot;,
                    choices = c(&quot;syuzhet&quot;, &quot;bing&quot;, &quot;afinn&quot;, &quot;nrc&quot;),
                    selected=&quot;syuzhet&quot;,
                    inline=TRUE),
        
        radioButtons(inputId = &quot;char&quot;,
                     label = &quot;Number of characters (max):&quot;,
                     choices = list(&quot;140&quot;, &quot;280&quot;),
                     inline=TRUE),
        checkboxInput(inputId = &quot;auth&quot;,
                      label = &quot;Add author&quot;,
                      value=FALSE),
        
        checkboxInput(inputId = &quot;titl&quot;,
                      label = &quot;Add title&quot;,
                      value=FALSE),
        
        checkboxInput(inputId = &quot;post&quot;,
                      label=&quot;Add link to post (thanks!)&quot;,
                      value=TRUE),
        
        textInput(inputId = &quot;adds&quot;,
                  label=&quot;Something else?&quot;,
                  placeholder=&quot;Maybe a #hastag?&quot;),
        
        actionButton(&#39;do&#39;,&#39;Go!&#39;, 
                     class=&quot;btn btn-success action-button&quot;, 
                     css.class=&quot;btn btn-success&quot;)
  ),
  
  
  mainPanel(
     tags$br(),
     p(&quot;First of all, choose a book entering some keywords of its 
        title or author and doing dropdown navigation. Books are 
        downloaded from Project Gutenberg. You can browse the complete 
        catalog&quot;, tags$a(href = &quot;https://www.gutenberg.org/
<wbr>
catalog/&quot;, &quot;here.&quot;)),
     p(&quot;After that, choose the sentiment of tweets you want to generate. 
        There are four possible methods than can return slightly different results. 
        All of them assess the sentiment of each word of a sentence and sum up the 
        result to give a scoring for it. The more negative is this scoring, 
        the&quot;, em(&quot;darker&quot;) ,&quot;is the sentiment. The more positive, the &quot;, em(&quot;brighter.&quot;), 
        &quot; You can find a nice explanation of these techniques&quot;,
        tags$a(href = &quot;http://www.matthewjockers.
<wbr>
net/2017/01/12/resurrecting/&quot;, &quot;here.&quot;)),
        
        p(&quot;Next parameters are easy: you can add the title and author of the book where 
          sentence is extracted as well as a link to my blog and any other string you want. 
          Clicking on the lower button you will get after some seconds a tweet below. 
          Click as many times you want until you like the result.&quot;),
     
     p(&quot;Finally, copy, paste and tweet. &quot;,strong(&quot;Enjoy it!&quot;)),
     tags$br(),
     tags$blockquote(textOutput(&quot;
<wbr>
tweet1&quot;)),
     tags$br()
)))
</pre>

<p>
<code>
Server.R
</code>
:
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
library(shiny)
function(input, output) {
  
  values &lt;- reactiveValues(default = 0)
  
  observeEvent(input$do,{
    values$default &lt;- 1
  })
  book &lt;- eventReactive(input$do, {
    GetTweet(input$book, input$meth, input$sent, input$char,
             input$auth, input$titl, input$post, input$adds)
  })
  
  output$tweet1 &lt;- renderText({
    if(values$default == 0){
      &quot;Your tweet will appear here ...&quot;
    }
    else{
      book()
    }
  })
}
</pre>

<p>
<code>
Global.R
</code>
:
</p>

<pre class="m_-224555803572068892brush: m_-224555803572068892r; m_-224555803572068892title: m_-224555803572068892; notranslate">
library(gutenbergr)
library(dplyr)
library(stringr)
library(syuzhet)
x &lt;- tempdir() # Read the Project Gutenberg catalog and filter english works. I also create a column with # title and author to make searchings gutenberg_metadata %&gt;%
  filter(has_text, language==&quot;en&quot;, gutenberg_id&gt;0, !is.na(author)) %&gt;%
  mutate(searchstr=ifelse(is.na(
<wbr>
author), title, paste(title, author, sep= &quot; - &quot;))) %&gt;%
  mutate(searchstr=str_replace_
<wbr>
all(searchstr, &quot;[\r\n]&quot; , &quot;&quot;)) %&gt;%
  group_by(searchstr) %&gt;%
  summarize(gutenberg_id=min(
<wbr>
gutenberg_id)) %&gt;%
  ungroup() %&gt;%
  na.omit() %&gt;%
  filter(str_length(searchstr)&lt;
<wbr>
100)-&gt; gutenberg_works
# This function generates a tweet according the UI settings (book, method, sentiment and
# number of characters). It also appends some optional strings at the end
GetTweet = function (string, method, sentim, characters,
                     author, title, link, hastag)
 {
  # Obtain gutenberg_id from book 
  gutenberg_works %&gt;%
     filter(searchstr == string) %&gt;%
     select(gutenberg_id) %&gt;% .$gutenberg_id -&gt; result
  
  # Download text, divide into sentences and score sentiment. Save results to do it once and
  # optimize performance
  if(!file.exists(paste0(x,&quot;/&quot;,&quot;
<wbr>
book&quot;,result,&quot;_&quot;,method,&quot;.RDS&quot;
<wbr>
)))
  {
    book=gutenberg_download(
<wbr>
result)
    book[,2] %&gt;% 
      as.data.frame() %&gt;% 
      .$text %&gt;% 
      paste(collapse=&quot; &quot;) -&gt; text
    
    sentences_v &lt;- get_sentences(text)
    sentiment_v &lt;- get_sentiment(sentences_v, method=method) data.frame(sentence=sentences_
<wbr>
v, sentiment=sentiment_v) %&gt;% 
      mutate(length=str_length(
<wbr>
sentence)) -&gt; results
    saveRDS(results, paste0(x,&quot;/&quot;,&quot;book&quot;,result,&quot;_&quot;
<wbr>
,method,&quot;.RDS&quot;))
  }
   
  results=readRDS(paste0(x,&quot;/&quot;,&quot;
<wbr>
book&quot;,result,&quot;_&quot;,method,&quot;.RDS&quot;
<wbr>
))
  book_info=gutenberg_metadata %&gt;% filter(gutenberg_id==result)
  
  # Paste optional strings to append at the end
  post=&quot;&quot;
  if (title)  post=paste(&quot;-&quot;, book_info[,&quot;title&quot;], post, sep=&quot; &quot;)
  if (author) post=paste0(post, &quot; (&quot;, str_trim(book_info[,&quot;author&quot;])
<wbr>
, &quot;)&quot;)
  if (link)   post=paste(post, &quot;https://wp.me/p7VZWY-16S&quot;, sep=&quot; &quot;)
  post=paste(post, hastag, sep=&quot; &quot;)
  length_post=nchar(post)
  # Calculate 5% quantiles
  results %&gt;% 
    filter(length&lt;=(as.numeric(
<wbr>
characters)-length_post)) %&gt;%
     mutate(sentiment=jitter(
<wbr>
sentiment)) %&gt;% 
     mutate(group = cut(sentiment, 
                        include.lowest = FALSE,
                        labels = FALSE,
                        breaks = quantile(sentiment, probs = seq(0, 1, 0.05)))) -&gt; results
   
  # Obtain a sample sentence according sentiment and append optional string to create tweet
  results %&gt;% 
     filter(group==as.numeric(
<wbr>
sentim)) %&gt;% 
     sample_n(1) %&gt;% 
     select(sentence) %&gt;% 
     .$sentence %&gt;% 
     as.character() %&gt;% 
     str_replace_all(&quot;[.]&quot;, &quot;&quot;) %&gt;% 
    paste(post, sep=&quot; &quot;) -&gt; tweet
  
  return(tweet)
 }
</pre>

<p>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:13px">

<div style="text-align:center">
To 
<strong>
leave a comment
</strong>
 for the author, please follow the link and comment on their blog: 
<strong>
<a href="https://fronkonstin.com/2017/10/24/a-shiny-app-to-create-sentimental-tweets-based-on-project-gutenberg-books/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://fronkonstin.com/2017/10/24/a-shiny-app-to-create-sentimental-tweets-based-on-project-gutenberg-books/&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGF1hZ5VZe6AhlrV5KE2Qd7uWAe5A">
 R – Fronkonstin
</a>
</strong>
.
</div>

<hr>

<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNGdM1DUKuRuFYvt7qTN4FTOjssdgA">
R-bloggers.com
</a>
 offers 
<strong>
<a href="https://feedburner.google.com/fb/a/mailverify?uri=RBloggers" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://feedburner.google.com/fb/a/mailverify?uri%3DRBloggers&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNHho3f3h6XcihWONYE2aG-5ACOr_A">
daily e-mail updates
</a>
</strong>
 about 
<a title="The R Project for Statistical Computing" href="https://www.r-project.org/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-project.org/&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNH33N_N_u_4ogFgut5fYy6zrKRn3A">
R
</a>
 news and 
<a title="R tutorials" href="https://www.r-bloggers.com/search/tutorial" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/tutorial&amp;source=gmail&amp;ust=1509502773504000&amp;usg=AFQjCNH_WJP7A3nhxvuLrgxcfaITAVjsWQ">
tutorials
</a>
 on topics such as: 
<a title="Data science" href="https://www.r-bloggers.com/search/data%20science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/data%2520science&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNFUxp5Y1OzGYBARVrbyWwjJKDUCJg">
Data science
</a>
, 
<a title="Big Data" href="https://www.r-bloggers.com/search/Big%20Data" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Big%2520Data&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNEaOcIQmBcj4iOM870uP-R01y5lXw">
Big Data, 
<a title="R jobs" href="https://www.r-users.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-users.com/&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNGqDiaKvRqub_sRsVa1UaeOvj96Cw">
R jobs
</a>
, visualization (
<a title="ggplot and ggplot2 tutorials" href="https://www.r-bloggers.com/search/ggplot2" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/ggplot2&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNGsa7Plx3XSuP661ai0QTaeAZa2lA">
ggplot2
</a>
, 
<a title="Boxplots using lattice and ggplot2 tutorials" href="https://www.r-bloggers.com/search/boxplot" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/boxplot&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNH_ro1L8ZTkzmU13xxzxtXkTgqpmQ">
Boxplots
</a>
, 
<a title="Maps and gis" href="https://www.r-bloggers.com/search/map" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/map&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNEbZf9rXuFr5Ljv1v2XfWIsK-6Cng">
maps
</a>
, 
<a title="Animation in R" href="https://www.r-bloggers.com/search/animation" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/animation&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNGvTIr5uk4la0ck7s8gFgoISrqWUQ">
animation
</a>
), programming (
<a title="RStudio IDE for R" href="https://www.r-bloggers.com/search/RStudio" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/RStudio&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNHR3JjsNCAyFkhJnV60ln9qR3RUXA">
RStudio
</a>
, 
<a title="Sweave and literate programming" href="https://www.r-bloggers.com/search/sweave" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/sweave&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNG9dZlYvjjX-HNwPawZYYFMFKXMCA">
Sweave
</a>
, 
<a title="LaTeX in R" href="https://www.r-bloggers.com/search/LaTeX" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/LaTeX&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNElJ6loTmgTLaoGv0PwBl3JqqElHQ">
LaTeX
</a>
, 
<a title="SQL and databases" href="https://www.r-bloggers.com/search/SQL" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/SQL&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNEpkCshmYBm_BKrbPlJso9k35-SSw">
SQL
</a>
, 
<a title="Eclipse IDE for R" href="https://www.r-bloggers.com/search/eclipse" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/eclipse&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNGgj3j-GBJ3-83DsRc_dG3E4-FtAw">
Eclipse
</a>
, 
<a title="git and github, Version Control System" href="https://www.r-bloggers.com/search/git" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/git&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNF6wo3IXFvucVm2JjU94SqLqJWGlQ">
git
</a>
, 
<a title="Large data in R using Hadoop" href="https://www.r-bloggers.com/search/hadoop" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/hadoop&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNHA1VIZ-otxNczPA5kcDLmXMnjvyw">
hadoop
</a>
, 
<a title="Web Scraping of google, facebook, yahoo, twitter and more using R" href="https://www.r-bloggers.com/search/Web+Scraping" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Web%2BScraping&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNHJ9cJJwAsgRLIGCHpz0chWrNWgGg">
Web Scraping
</a>
) statistics (
<a title="Regressions and ANOVA analysis tutorials" href="https://www.r-bloggers.com/search/regression" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/regression&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNHQtC5PA9IWIQ3RHH_dHMkDM5k3Tg">
regression
</a>
, 
<a title="principal component analysis tutorial" href="https://www.r-bloggers.com/search/PCA" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/PCA&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNFVZi-ng6AIoqIp0HFsjCcrJZjJ7Q">
PCA
</a>
, 
<a title="Time series" href="https://www.r-bloggers.com/search/time+series" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/time%2Bseries&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNE-kNsCfYhT-eEb_83bFLuI8KDeIQ">
time series
</a>
, 
<a title="finance trading" href="https://www.r-bloggers.com/search/trading" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/trading&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNEPDPpa9hq0hWjLeiSuo6T5cb9Ghg">
trading
</a>
) and more...
</a>
</div>
</p>
<img src="https://ci6.googleusercontent.com/proxy/PE8XvNU55OQqxlpss6HIMKbk3LbK35OEVKlW6kBJHgWWhIsiS9GXbktHsXjuUC8Z-kgkF_VktwbDd0PwBon_iYlXAu8ACVsSGnv_LSdPkBDJEowqavXrY5pkx6_w6Q12Hay-0G7HMtU4s1Bm9HAk2e8OvlY=s0-d-e1-ft#http://feeds.feedburner.com/~r/RBloggers/~4/qsjJTTgdZ04?utm_source=feedburner&amp;utm_medium=email" height="1" width="1" alt="">

</div>

</td>

</tr>

<tr>

<td style="margin-bottom:0;line-height:1.4em">

<p style="margin:1em 0 3px 0">

<a name="m_-224555803572068892_5" style="font-family:Arial,Helvetica,sans-serif;font-size:19px" href="http://feedproxy.google.com/~r/RBloggers/~3/Z_Z0-lWLECc/?utm_source=feedburner&amp;utm_medium=email" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://feedproxy.google.com/~r/RBloggers/~3/Z_Z0-lWLECc/?utm_source%3Dfeedburner%26utm_medium%3Demail&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNFQnW1HteuUldFZtqFcNvne1jNXCQ">
Demo Week: Time Series Machine Learning with timetk
</a>

</p>

<p style="font-size:14px;color:#555;margin:9px 0 3px 0;font-family:Arial,Helvetica,sans-serif;line-height:140%;font-size:14px">

<span>
Posted:
</span>
 23 Oct 2017 05:00 PM PDT
</p>

<div>
<p>
<div>
<div>
<div>
<div>
</div>
</div>
<div>
</div>
</div>
<div style="clear:both">
</div>
</div>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:12px">
(This article was first published on 
<strong>
<a href="http://www.business-science.io/code-tools/2017/10/24/demo_week_timetk.html" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/code-tools/2017/10/24/demo_week_timetk.html&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNHqbUeNHMNsXc7owV9S_Ey-e1vR4A">
 business-science.io - Articles
</a>
</strong>
, and kindly contributed to 
<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNEHek9f7yxbbWDwspZlGPb6yw-NlQ">
R-bloggers)
</a>

</div>
</p>

<p>
We’re into the second day of 
<strong>
Business Science Demo Week
</strong>
. What’s demo week? Every day this week we are demoing an R package: 
<code class="m_-224555803572068892highlighter-rouge">
tidyquant
</code>
 (Monday), 
<code class="m_-224555803572068892highlighter-rouge">
timetk
</code>
 (Tuesday), 
<code class="m_-224555803572068892highlighter-rouge">
sweep
</code>
 (Wednesday), 
<code class="m_-224555803572068892highlighter-rouge">
tibbletime
</code>
 (Thursday) and 
<code class="m_-224555803572068892highlighter-rouge">
h2o
</code>
 (Friday)! 
<strong>
That’s five packages in five days
</strong>
! We’ll give you intel on 
<strong>
what you need to know about these packages to go from zero to hero
</strong>
. Second up is 
<code class="m_-224555803572068892highlighter-rouge">
timetk
</code>
, your toolkit for time series in R. Here we go!
</p>

<h4 id="m_-224555803572068892previous-demo-week-demos">
Previous Demo Week Demos
</h4>

<ul>

<li>
<a href="http://www.business-science.io/code-tools/2017/10/23/demo_week_tidyquant.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/code-tools/2017/10/23/demo_week_tidyquant.html&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNFFOihk5FH5GhR-dgPVxx3utvZMRw">
class(Monday) &lt;- tidyquant
</a>
</li>

</ul>

<h1 id="m_-224555803572068892timetk-whats-it-used-for">
timetk: What’s It Used For?
</h1>

<p>
There are three main uses:
</p>

<ol>

<li>

<p>
<strong>
Time series machine learning
</strong>
: Using regression algorithms to forecast
</p>

</li>

<li>

<p>
<strong>
Making future time series indicies
</strong>
: Extract, explore, and extend a time series index using patterns in the time-base
</p>

</li>

<li>

<p>
<strong>
Coercing (converting) between time classes
</strong>
 (e.g. between 
<code class="m_-224555803572068892highlighter-rouge">
tbl
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
xts
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
zoo
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
ts
</code>
): Consistent coercion makes working in the various time classes much easier!
</p>

</li>

</ol>

<p>
We’ll go over time series ML and coercion today. The second (extracting and making future time series) will be touched on in time series ML as this is very critical to prediction accuracy.
</p>

<p>
<img src="https://ci5.googleusercontent.com/proxy/Pe1I7oZGwMA1zQHeMRI6M-bOjb_vJ6Wq1df6KcWCKNTPoKDnlCda0_VbPOCKpmVuvhxfd9Y9y75TtIrAzpbFq8roXb6v7_83kim_F2r751xD8AcOIXYBt96pPi3762gnjA=s0-d-e1-ft#https://i0.wp.com/www.business-science.io/assets/demo-week-timetk.png?w=456" alt="Demo Week: timetk">
</p>

<h1 id="m_-224555803572068892load-libraries">
Load Libraries
</h1>

<p>
We’ll need two libraries today:
</p>

<ul>

<li>
<code class="m_-224555803572068892highlighter-rouge">
tidyquant
</code>
: For getting data and loading the tidyverse behind the scenes
</li>

<li>
<code class="m_-224555803572068892highlighter-rouge">
timetk
</code>
: Toolkit for working with time series in R
</li>

</ul>

<p>
If you haven’t done so already, install the packages:
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Install packages
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
install.packages
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892s2">
&quot;timetk&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
install.packages
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892s2">
&quot;tidyquant&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<p>
Load the libraries.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Load libraries
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
library
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
timetk
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
     
</span>
<span class="m_-224555803572068892c1">
# Toolkit for working with time series in R
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
library
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
tidyquant
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
  
</span>
<span class="m_-224555803572068892c1">
# Loads tidyverse, financial pkgs, used to get data
</span>
</code>
</pre>

</figure>

<h1 id="m_-224555803572068892data">
Data
</h1>

<p>
We’ll get data using the 
<code class="m_-224555803572068892highlighter-rouge">
tq_get()
</code>
 function from 
<code class="m_-224555803572068892highlighter-rouge">
tidyquant
</code>
. The data comes from FRED: 
<a href="https://fred.stlouisfed.org/series/S4248SM144NCEN" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://fred.stlouisfed.org/series/S4248SM144NCEN&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNE7wMRw5yjMCNt_qJHp8VXz1GYRSg">
Beer, Wine, and Distilled Alcoholic Beverages Sales
</a>
.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Beer, Wine, Distilled Alcoholic Beverages, in Millions USD
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
tq_get
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892s2">
&quot;S4248SM144NCEN&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
get
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;economic.data&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
from
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;2010-01-01&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
to
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;2016-12-31&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 84 x 2
##          date price
##        
<u>
</u>
 
<u>
</u>
##  1 2010-01-01  6558
##  2 2010-02-01  7481
##  3 2010-03-01  9475
##  4 2010-04-01  9424
##  5 2010-05-01  9351
##  6 2010-06-01 10552
##  7 2010-07-01  9077
##  8 2010-08-01  9273
##  9 2010-09-01  9420
## 10 2010-10-01  9413
## # ... with 74 more rows
</code>
</pre>

</figure>

<p>
It’s a good idea to visualize the data so we know what we’re working with. Visualization is particularly important for time series analysis and forecasting (as we see during time series machine learning). We’ll use 
<code class="m_-224555803572068892highlighter-rouge">
tidyquant
</code>
 charting tools: mainly 
<code class="m_-224555803572068892highlighter-rouge">
geom_ma(ma_fun = SMA, n = 12)
</code>
 to add a 12-period simple moving average to get an idea of the trend. We can also see there appears to be both trend (moving average is increasing in a relatively linear pattern) and some seasonality (peaks and troughs tend to occur at specific months).
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Plot Beer Sales
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
ggplot
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
aes
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
date
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
price
</span>
<span class="m_-224555803572068892p">
))
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_line
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
col
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[
</span>
<span class="m_-224555803572068892m">
1
</span>
<span class="m_-224555803572068892p">
])
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_point
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
col
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[
</span>
<span class="m_-224555803572068892m">
1
</span>
<span class="m_-224555803572068892p">
])
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_ma
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
ma_fun
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
SMA
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
n
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892m">
12
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
size
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892m">
1
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
theme_tq
</span>
<span class="m_-224555803572068892p">
()
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
scale_x_date
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
date_breaks
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;1 year&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
date_labels
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;%Y&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
labs
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
title
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;Beer Sales: 2007 through 2016&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<p>
<img src="https://ci3.googleusercontent.com/proxy/5E476UlPTKtA2tWMyNg9lBWXVYgc57JwLLI1aNqsJxxC5xYEr6zxL5CO_acLsd_LQJcm_Bow4Zl5O-eHmfrV5LMYREXoLlV7CcIexAZ6nA_MgGO0sxW3klmyINubhmyFAUYUojjVW1UjwqT-OoE9D_t3qEns6yW2CG2geN6fxAh47UoxkQ=s0-d-e1-ft#https://i1.wp.com/www.business-science.io/figure/source/2017-10-24-demo_week_timetk/unnamed-chunk-4-1.png?w=456" alt="plot of chunk unnamed-chunk-4">
</p>

<p>
Now that you have a feel for the time series we’ll be working with today, let’s move onto the demo!
</p>

<h1 id="m_-224555803572068892demo-timetk">
DEMO: timetk
</h1>

<p>
We’ve split this demo into two parts. First, we’ll follow a workflow for time series machine learning. Second, we’ll check out coercion tools.
</p>

<h2 id="m_-224555803572068892part-1-time-series-machine-learning">
Part 1: Time Series Machine Learning
</h2>

<p>
<strong>
Time series machine learning is a great way to forecast time series data
</strong>
, but before we get started here are a couple pointers for this demo:
</p>

<ul>

<li>

<p>
<strong>
Key Insight
</strong>
: The 
<strong>
time series signature
</strong>
 ~ timestamp information expanded column-wise into a feature set ~ is used to perform machine learning.
</p>

</li>

<li>

<p>
<strong>
Objective
</strong>
: We’ll predict the next 12 months of data for the time series using the time series signature.
</p>

</li>

</ul>

<p>
We’ll go through a workflow that can be used to perform time series machine learning. You’ll see how several 
<code class="m_-224555803572068892highlighter-rouge">
timetk
</code>
 functions can help with this process. We’ll do machine learning with a simple 
<code class="m_-224555803572068892highlighter-rouge">
lm()
</code>
 linear regression, and you will see how powerful and accurate this can be when a time series signature is used. Further, you should think about what other more powerful machine learning algorithms can be used such as 
<code class="m_-224555803572068892highlighter-rouge">
xgboost
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
glmnet
</code>
 (LASSO), and others.
</p>

<h4 id="m_-224555803572068892step-0-review-data">
Step 0: Review data
</h4>

<p>
Just to show our starting point, let’s print out our 
<code class="m_-224555803572068892highlighter-rouge">
beer_sales_tbl
</code>
.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Starting point
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 84 x 2
##          date price
##        
<u>
</u>
 
<u>
</u>
##  1 2010-01-01  6558
##  2 2010-02-01  7481
##  3 2010-03-01  9475
##  4 2010-04-01  9424
##  5 2010-05-01  9351
##  6 2010-06-01 10552
##  7 2010-07-01  9077
##  8 2010-08-01  9273
##  9 2010-09-01  9420
## 10 2010-10-01  9413
## # ... with 74 more rows
</code>
</pre>

</figure>

<p>
We can quickly get a feel for the time series using 
<code class="m_-224555803572068892highlighter-rouge">
tk_index()
</code>
 to extract the index and 
<code class="m_-224555803572068892highlighter-rouge">
tk_get_timeseries_summary()
</code>
 to retrieve summary information of the index. We use 
<code class="m_-224555803572068892highlighter-rouge">
glimpse()
</code>
 to output in a nice format for review.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
tk_index
</span>
<span class="m_-224555803572068892p">
()
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
tk_get_timeseries_summary
</span>
<span class="m_-224555803572068892p">
()
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
glimpse
</span>
<span class="m_-224555803572068892p">
()
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## Observations: 1
## Variables: 12
## $ n.obs        
<u>
</u>
 84
## $ start        
<u>
</u>
 2010-01-01
## $ end          
<u>
</u>
 2016-12-01
## $ units        
<u>
</u>
 &quot;days&quot;
## $ scale        
<u>
</u>
 &quot;month&quot;
## $ tzone        
<u>
</u>
 &quot;UTC&quot;
## $ diff.minimum 
<u>
</u>
 2419200
## $ diff.q1      
<u>
</u>
 2592000
## $ diff.median  
<u>
</u>
 2678400
## $ diff.mean    
<u>
</u>
 2629475
## $ diff.q3      
<u>
</u>
 2678400
## $ diff.maximum 
<u>
</u>
 2678400
</code>
</pre>

</figure>

<p>
We can see important features like start, end, units, etc. We also have the quantiles of the time-diffs (difference in seconds between observations), which is useful for assessing the degree of regularity. Because the scale is monthly, the number of seconds between each month follows an irregular distribution.
</p>

<h4 id="m_-224555803572068892step-1-augment-time-series-signature">
Step 1: Augment Time Series Signature
</h4>

<p>
The 
<code class="m_-224555803572068892highlighter-rouge">
tk_augment_timeseries_
<wbr>
signature()
</code>
 function expands out the timestamp information column-wise into a machine learning feature set, adding columns of time series information to the original data frame.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Augment (adds data frame columns)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_tbl_aug
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
tk_augment_timeseries_
<wbr>
signature
</span>
<span class="m_-224555803572068892p">
()
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_tbl_aug
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 84 x 30
##          date price  index.num    diff  year year.iso  half quarter
##        
<u>
</u>
 
<u>
</u>
      
<u>
</u>
   
<u>
</u>
 
<u>
</u>
    
<u>
</u>
 
<u>
</u>
   
<u>
</u>
##  1 2010-01-01  6558 1262304000      NA  2010     2009     1       1
##  2 2010-02-01  7481 1264982400 2678400  2010     2010     1       1
##  3 2010-03-01  9475 1267401600 2419200  2010     2010     1       1
##  4 2010-04-01  9424 1270080000 2678400  2010     2010     1       2
##  5 2010-05-01  9351 1272672000 2592000  2010     2010     1       2
##  6 2010-06-01 10552 1275350400 2678400  2010     2010     1       2
##  7 2010-07-01  9077 1277942400 2592000  2010     2010     2       3
##  8 2010-08-01  9273 1280620800 2678400  2010     2010     2       3
##  9 2010-09-01  9420 1283299200 2678400  2010     2010     2       3
## 10 2010-10-01  9413 1285891200 2592000  2010     2010     2       4
## # ... with 74 more rows, and 22 more variables: month 
<u>
</u>
,
## #   month.xts 
<u>
</u>
, month.lbl 
<u>
</u>
, day 
<u>
</u>
, hour 
<u>
</u>
,
## #   minute 
<u>
</u>
, second 
<u>
</u>
, hour12 
<u>
</u>
, am.pm 
<u>
</u>
,
## #   wday 
<u>
</u>
, wday.xts 
<u>
</u>
, wday.lbl 
<u>
</u>
, mday 
<u>
</u>
,
## #   qday 
<u>
</u>
, yday 
<u>
</u>
, mweek 
<u>
</u>
, week 
<u>
</u>
, week.iso 
<u>
</u>
,
## #   week2 
<u>
</u>
, week3 
<u>
</u>
, week4 
<u>
</u>
, mday7 
<u>
</u>
</code>
</pre>

</figure>

<h4 id="m_-224555803572068892step-2-model">
Step 2: Model
</h4>

<p>
Apply any regression model to the data. We’ll use 
<code class="m_-224555803572068892highlighter-rouge">
lm()
</code>
. Note that we drop the date and diff columns. Most algorithms do not work with dates, and the diff column is not useful for machine learning (it’s more useful for finding time gaps in the data).
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# linear regression model used, but can use any model
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
fit_lm
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
lm
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
price
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
~
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
.
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
data
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
select
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_tbl_aug
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
-
</span>
<span class="m_-224555803572068892nf">
c
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
date
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
diff
</span>
<span class="m_-224555803572068892p">
)))
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
summary
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
fit_lm
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## 
## Call:
## lm(formula = price ~ ., data = select(beer_sales_tbl_aug, -c(date, 
##     diff)))
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -447.3 -145.4  -18.2  169.8  421.4 
## 
## Coefficients: (16 not defined because of singularities)
##                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   3.660e+08  1.245e+08   2.940 0.004738 ** 
## index.num     5.900e-03  2.003e-03   2.946 0.004661 ** 
## year         -1.974e+05  6.221e+04  -3.173 0.002434 ** 
## year.iso      1.159e+04  6.546e+03   1.770 0.082006 .  
## half         -2.132e+03  6.107e+02  -3.491 0.000935 ***
## quarter      -1.239e+04  2.190e+04  -0.566 0.573919    
## month        -3.910e+03  7.355e+03  -0.532 0.597058    
## month.xts            NA         NA      NA       NA    
## month.lbl.L          NA         NA      NA       NA    
## month.lbl.Q  -1.643e+03  2.069e+02  -7.942 8.59e-11 ***
## month.lbl.C   8.368e+02  5.139e+02   1.628 0.108949    
## month.lbl^4   6.452e+02  1.344e+02   4.801 1.18e-05 ***
## month.lbl^5   7.563e+02  4.241e+02   1.783 0.079852 .  
## month.lbl^6   3.206e+02  1.609e+02   1.992 0.051135 .  
## month.lbl^7  -3.537e+02  1.867e+02  -1.894 0.063263 .  
## month.lbl^8   3.687e+02  3.217e+02   1.146 0.256510    
## month.lbl^9          NA         NA      NA       NA    
## month.lbl^10  6.339e+02  2.240e+02   2.830 0.006414 ** 
## month.lbl^11         NA         NA      NA       NA    
## day                  NA         NA      NA       NA    
## hour                 NA         NA      NA       NA    
## minute               NA         NA      NA       NA    
## second               NA         NA      NA       NA    
## hour12               NA         NA      NA       NA    
## am.pm                NA         NA      NA       NA    
## wday         -8.264e+01  1.898e+01  -4.353 5.63e-05 ***
## wday.xts             NA         NA      NA       NA    
## wday.lbl.L           NA         NA      NA       NA    
## wday.lbl.Q   -7.109e+02  1.093e+02  -6.503 2.13e-08 ***
## wday.lbl.C    2.355e+02  1.336e+02   1.763 0.083273 .  
## wday.lbl^4    8.033e+01  1.133e+02   0.709 0.481281    
## wday.lbl^5    6.480e+01  8.029e+01   0.807 0.422951    
## wday.lbl^6    2.276e+01  8.200e+01   0.278 0.782319    
## mday                 NA         NA      NA       NA    
## qday         -1.362e+02  2.418e+02  -0.563 0.575326    
## yday         -2.356e+02  1.416e+02  -1.664 0.101627    
## mweek        -1.670e+02  1.477e+02  -1.131 0.262923    
## week         -1.764e+02  1.890e+02  -0.933 0.354618    
## week.iso      2.315e+02  1.256e+02   1.842 0.070613 .  
## week2        -1.235e+02  1.547e+02  -0.798 0.428283    
## week3                NA         NA      NA       NA    
## week4                NA         NA      NA       NA    
## mday7                NA         NA      NA       NA    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 260.4 on 57 degrees of freedom
## Multiple R-squared:  0.9798,	Adjusted R-squared:  0.9706 
## F-statistic: 106.4 on 26 and 57 DF,  p-value: &lt; 2.2e-16
</code>
</pre>

</figure>

<h4 id="m_-224555803572068892step-3-build-future-new-data">
Step 3: Build Future (New) Data
</h4>

<p>
Use 
<code class="m_-224555803572068892highlighter-rouge">
tk_index()
</code>
 to extract the index.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Retrieves the timestamp information
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_idx
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
tk_index
</span>
<span class="m_-224555803572068892p">
()
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
tail
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_idx
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## [1] &quot;2016-07-01&quot; &quot;2016-08-01&quot; &quot;2016-09-01&quot; &quot;2016-10-01&quot; &quot;2016-11-01&quot;
## [6] &quot;2016-12-01&quot;
</code>
</pre>

</figure>

<p>
Make a future index from the existing index with 
<code class="m_-224555803572068892highlighter-rouge">
tk_make_future_timeseries
</code>
. The function internally checks the periodicity and returns the correct sequence. Note that we have a 
<a href="https://business-science.github.io/timetk/articles/TK02_Making_A_Future_Time_Series_Index.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://business-science.github.io/timetk/articles/TK02_Making_A_Future_Time_Series_Index.html&amp;source=gmail&amp;ust=1509502773505000&amp;usg=AFQjCNHBSNcDlbgxlJKcbvG4dcN-HpBZeA">
whole vignette on how to make future time series
</a>
, which is helpful due to the complexity of the topic.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Make future index
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
future_idx
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
beer_sales_idx
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
tk_make_future_timeseries
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
n_
<wbr>
future
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892m">
12
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
future_idx
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
##  [1] &quot;2017-01-01&quot; &quot;2017-02-01&quot; &quot;2017-03-01&quot; &quot;2017-04-01&quot; &quot;2017-05-01&quot;
##  [6] &quot;2017-06-01&quot; &quot;2017-07-01&quot; &quot;2017-08-01&quot; &quot;2017-09-01&quot; &quot;2017-10-01&quot;
## [11] &quot;2017-11-01&quot; &quot;2017-12-01&quot;
</code>
</pre>

</figure>

<p>
From the future index, use 
<code class="m_-224555803572068892highlighter-rouge">
tk_get_timeseries_signature()
</code>
 to turn index into time signature data frame.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892n">
new_data_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
future_idx
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
tk_get_timeseries_signature
</span>
<span class="m_-224555803572068892p">
()
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
new_data_tbl
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 12 x 29
##         index  index.num    diff  year year.iso  half quarter month
##        
<u>
</u>
      
<u>
</u>
   
<u>
</u>
 
<u>
</u>
    
<u>
</u>
 
<u>
</u>
   
<u>
</u>
 
<u>
</u>
##  1 2017-01-01 1483228800      NA  2017     2016     1       1     1
##  2 2017-02-01 1485907200 2678400  2017     2017     1       1     2
##  3 2017-03-01 1488326400 2419200  2017     2017     1       1     3
##  4 2017-04-01 1491004800 2678400  2017     2017     1       2     4
##  5 2017-05-01 1493596800 2592000  2017     2017     1       2     5
##  6 2017-06-01 1496275200 2678400  2017     2017     1       2     6
##  7 2017-07-01 1498867200 2592000  2017     2017     2       3     7
##  8 2017-08-01 1501545600 2678400  2017     2017     2       3     8
##  9 2017-09-01 1504224000 2678400  2017     2017     2       3     9
## 10 2017-10-01 1506816000 2592000  2017     2017     2       4    10
## 11 2017-11-01 1509494400 2678400  2017     2017     2       4    11
## 12 2017-12-01 1512086400 2592000  2017     2017     2       4    12
## # ... with 21 more variables: month.xts 
<u>
</u>
, month.lbl 
<u>
</u>
,
## #   day 
<u>
</u>
, hour 
<u>
</u>
, minute 
<u>
</u>
, second 
<u>
</u>
, hour12 
<u>
</u>
,
## #   am.pm 
<u>
</u>
, wday 
<u>
</u>
, wday.xts 
<u>
</u>
, wday.lbl 
<u>
</u>
,
## #   mday 
<u>
</u>
, qday 
<u>
</u>
, yday 
<u>
</u>
, mweek 
<u>
</u>
, week 
<u>
</u>
,
## #   week.iso 
<u>
</u>
, week2 
<u>
</u>
, week3 
<u>
</u>
, week4 
<u>
</u>
,
## #   mday7 
<u>
</u>
</code>
</pre>

</figure>

<h4 id="m_-224555803572068892step-4-predict-the-new-data">
Step 4: Predict the New Data
</h4>

<p>
Use the 
<code class="m_-224555803572068892highlighter-rouge">
predict()
</code>
 function for your regression model. Note that we drop the index and diff columns, the same as before when using the 
<code class="m_-224555803572068892highlighter-rouge">
lm()
</code>
 function.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Make predictions
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
pred
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
predict
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
fit_lm
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
newdata
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
select
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
new_data_tbl
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
-
</span>
<span class="m_-224555803572068892nf">
c
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
index
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
diff
</span>
<span class="m_-224555803572068892p">
)))
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
predictions_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
tibble
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
date
</span>
<span class="m_-224555803572068892w">
  
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
future_idx
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
value
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
pred
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
predictions_tbl
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 12 x 2
##          date     value
##        
<u>
</u>
     
<u>
</u>
##  1 2017-01-01  9509.122
##  2 2017-02-01 10909.189
##  3 2017-03-01 12281.835
##  4 2017-04-01 11378.678
##  5 2017-05-01 13080.710
##  6 2017-06-01 13583.471
##  7 2017-07-01 11529.085
##  8 2017-08-01 12984.939
##  9 2017-09-01 11859.998
## 10 2017-10-01 12331.419
## 11 2017-11-01 13047.033
## 12 2017-12-01 13940.003
</code>
</pre>

</figure>

<h4 id="m_-224555803572068892step-5-compare-actual-vs-predictions">
Step 5: Compare Actual vs Predictions
</h4>

<p>
We can use 
<code class="m_-224555803572068892highlighter-rouge">
tq_get()
</code>
 to retrieve the actual data. Note that we don’t have all of the data for comparison, but we can at least compare the first several months of actual values.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892n">
actuals_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
tq_get
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892s2">
&quot;S4248SM144NCEN&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
get
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;economic.data&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
from
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;2017-01-01&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
to
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;2017-12-31&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<p>
Visualize our forecast.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Plot Beer Sales Forecast
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
ggplot
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
aes
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
x
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
date
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
y
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
price
</span>
<span class="m_-224555803572068892p">
))
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892c1">
# Training data
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_line
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
color
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[[
</span>
<span class="m_-224555803572068892m">
1
</span>
<span class="m_-224555803572068892p">
]])
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_point
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
color
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[[
</span>
<span class="m_-224555803572068892m">
1
</span>
<span class="m_-224555803572068892p">
]])
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892c1">
# Predictions
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_line
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
aes
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
y
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
value
</span>
<span class="m_-224555803572068892p">
),
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
color
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[[
</span>
<span class="m_-224555803572068892m">
2
</span>
<span class="m_-224555803572068892p">
]],
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
data
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
predictions_tbl
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_point
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
aes
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
y
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
value
</span>
<span class="m_-224555803572068892p">
),
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
color
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[[
</span>
<span class="m_-224555803572068892m">
2
</span>
<span class="m_-224555803572068892p">
]],
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
data
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
predictions_tbl
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892c1">
# Actuals
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_line
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
color
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[[
</span>
<span class="m_-224555803572068892m">
1
</span>
<span class="m_-224555803572068892p">
]],
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
data
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
actuals_tbl
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
geom_point
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
color
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
palette_light
</span>
<span class="m_-224555803572068892p">
()[[
</span>
<span class="m_-224555803572068892m">
1
</span>
<span class="m_-224555803572068892p">
]],
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
data
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
actuals_tbl
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892c1">
# Aesthetics
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
theme_tq
</span>
<span class="m_-224555803572068892p">
()
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
+
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
labs
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
title
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;Beer Sales Forecast: Time Series Machine Learning&quot;
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
         
</span>
<span class="m_-224555803572068892n">
subtitle
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;Using basic multivariate linear regression can yield accurate results&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<p>
<img src="https://ci3.googleusercontent.com/proxy/gsI5cijfhTt1Dsn71kr3XqcuRgq_DSrX6wEWgLqp5-0s1gWxcw7Nw2OAwI7ecCq1lpgOhQ_6MEzVnh9slo9zo72p9-sEviEXT7xR6ViU_tcQb6hW1N0t2umu67kYP6P8CLVudKtnvI__ZdtlCF4MD0GiebCLwxHz1U1LmgyrBfHRPbwWHmo=s0-d-e1-ft#https://i1.wp.com/www.business-science.io/figure/source/2017-10-24-demo_week_timetk/unnamed-chunk-14-1.png?w=456" alt="plot of chunk unnamed-chunk-14">
</p>

<p>
We can investigate the error on our test set (actuals vs predictions).
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Investigate test error
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
error_tbl
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
left_join
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
actuals_tbl
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
predictions_tbl
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
rename
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
actual
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
price
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
pred
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
value
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
mutate
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892w">
        
</span>
<span class="m_-224555803572068892n">
error
</span>
<span class="m_-224555803572068892w">
     
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
actual
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
pred
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
        
</span>
<span class="m_-224555803572068892n">
error_pct
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
error
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
/
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
actual
</span>
<span class="m_-224555803572068892w">
        
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
error_tbl
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 8 x 5
##         date actual      pred     error    error_pct
##       
<u>
</u>
  
<u>
</u>
     
<u>
</u>
     
<u>
</u>
        
<u>
</u>
## 1 2017-01-01   8664  9509.122 -845.1223 -0.097544127
## 2 2017-02-01  10017 10909.189 -892.1891 -0.089067495
## 3 2017-03-01  11960 12281.835 -321.8352 -0.026909301
## 4 2017-04-01  11019 11378.678 -359.6777 -0.032641592
## 5 2017-05-01  12971 13080.710 -109.7099 -0.008458092
## 6 2017-06-01  14113 13583.471  529.5292  0.037520667
## 7 2017-07-01  10928 11529.085 -601.0854 -0.055004156
## 8 2017-08-01  12788 12984.939 -196.9386 -0.015400265
</code>
</pre>

</figure>

<p>
And we can calculate a few residuals metrics. The MAPE error is approximately 4.5% from the actual value, which is pretty good for a simple multivariate linear regression. A more complex algorithm could produce more accurate results.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Calculating test error metrics
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
test_residuals
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
error_tbl
</span>
<span class="m_-224555803572068892o">
$
</span>
<span class="m_-224555803572068892n">
error
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
test_error_pct
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
error_tbl
</span>
<span class="m_-224555803572068892o">
$
</span>
<span class="m_-224555803572068892n">
error_pct
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
*
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892m">
100
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892c1">
# Percentage error
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
me
</span>
<span class="m_-224555803572068892w">
   
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mean
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
test_residuals
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
na.rm
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892kc">
TRUE
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
rmse
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mean
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
test_residuals
</span>
<span class="m_-224555803572068892o">
^
</span>
<span class="m_-224555803572068892m">
2
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
na.rm
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892kc">
TRUE
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892o">
^
</span>
<span class="m_-224555803572068892m">
0.5
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
mae
</span>
<span class="m_-224555803572068892w">
  
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mean
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892nf">
abs
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
test_residuals
</span>
<span class="m_-224555803572068892p">
),
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
na.rm
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892kc">
TRUE
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
mape
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mean
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892nf">
abs
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
test_error_pct
</span>
<span class="m_-224555803572068892p">
),
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
na.rm
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892kc">
TRUE
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
mpe
</span>
<span class="m_-224555803572068892w">
  
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mean
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
test_error_pct
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
na.rm
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892kc">
TRUE
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
tibble
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
me
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
rmse
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mae
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mape
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
mpe
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
glimpse
</span>
<span class="m_-224555803572068892p">
()
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## Observations: 1
## Variables: 5
## $ me   
<u>
</u>
 -349.6286
## $ rmse 
<u>
</u>
 551.7818
## $ mae  
<u>
</u>
 482.0109
## $ mape 
<u>
</u>
 4.531821
## $ mpe  
<u>
</u>
 -3.593805
</code>
</pre>

</figure>

<p>
Time series machine learning can produce exceptional forecasts. For those interested in learning more, we have a whole vignette dedicated to 
<a href="https://business-science.github.io/timetk/articles/TK03_Forecasting_Using_Time_Series_Signature.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://business-science.github.io/timetk/articles/TK03_Forecasting_Using_Time_Series_Signature.html&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEAbs-GCkwDS6iopH6n-E4UnG2HgA">
time series forecasting using timetk
</a>
.
</p>

<h2 id="m_-224555803572068892part-2-coercion">
Part 2: Coercion
</h2>

<ul>

<li>

<p>
<strong>
Problem
</strong>
: Switching between various time classes in R is painful and inconsistent.
</p>

</li>

<li>

<p>
<strong>
Solution
</strong>
: 
<code class="m_-224555803572068892highlighter-rouge">
tk_tbl
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
tk_xts
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
tk_zoo
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
tk_ts
</code>
</p>

</li>

</ul>

<h4 id="m_-224555803572068892tk_xts">
tk_xts
</h4>

<p>
We are starting with a 
<code class="m_-224555803572068892highlighter-rouge">
tbl
</code>
 object. A disadvantage is that sometimes we would like to convert to an xts object to use xts-based functions from the numerous packages that deal with xts objects (
<code class="m_-224555803572068892highlighter-rouge">
xts
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
zoo
</code>
, 
<code class="m_-224555803572068892highlighter-rouge">
quantmod
</code>
, etc).
</p>

<p>
We can easily convert to an 
<code class="m_-224555803572068892highlighter-rouge">
xts
</code>
 object using 
<code class="m_-224555803572068892highlighter-rouge">
tk_xts()
</code>
. Notice that 
<code class="m_-224555803572068892highlighter-rouge">
tk_xts()
</code>
 auto-detects the time-based column and uses its values as the index for the xts object.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Coerce to xts
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_xts
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
tk_xts
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">
 

</span>
<span class="m_-224555803572068892c1">
# Show the first six rows of the xts object
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_xts
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
%&gt;%
</span>
<span class="m_-224555803572068892w">
    
</span>
<span class="m_-224555803572068892n">
head
</span>
<span class="m_-224555803572068892p">
()
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
##            price
## 2010-01-01  6558
## 2010-02-01  7481
## 2010-03-01  9475
## 2010-04-01  9424
## 2010-05-01  9351
## 2010-06-01 10552
</code>
</pre>

</figure>

<p>
We can also go from 
<code class="m_-224555803572068892highlighter-rouge">
xts
</code>
 back to 
<code class="m_-224555803572068892highlighter-rouge">
tbl
</code>
. We tack on 
<code class="m_-224555803572068892highlighter-rouge">
rename_index = &quot;date&quot;
</code>
 to have the index name match what we started with. This used to be very difficult. Notice that
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892n">
tk_tbl
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_xts
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
rename_index
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;date&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 84 x 2
##          date price
##        
<u>
</u>
 
<u>
</u>
##  1 2010-01-01  6558
##  2 2010-02-01  7481
##  3 2010-03-01  9475
##  4 2010-04-01  9424
##  5 2010-05-01  9351
##  6 2010-06-01 10552
##  7 2010-07-01  9077
##  8 2010-08-01  9273
##  9 2010-09-01  9420
## 10 2010-10-01  9413
## # ... with 74 more rows
</code>
</pre>

</figure>

<h4 id="m_-224555803572068892tk_ts">
tk_ts
</h4>

<p>
A number of packages use a different time class called 
<code class="m_-224555803572068892highlighter-rouge">
ts
</code>
. Probably the most popular is the 
<code class="m_-224555803572068892highlighter-rouge">
forecast
</code>
 package. The advantage of using the 
<code class="m_-224555803572068892highlighter-rouge">
tk_ts()
</code>
 function is two-fold:
</p>

<ol>

<li>
It’s consistent with the other 
<code class="m_-224555803572068892highlighter-rouge">
tk_
</code>
 coercion functions so coercing back and forth is straightforward and easy.
</li>

<li>
IMPORTANT: When 
<code class="m_-224555803572068892highlighter-rouge">
tk_ts()
</code>
 is used, the ts-object carries the original irregular time index (usually dates) as an index attribute. This makes keeping date and datetime information possible.
</li>

</ol>

<p>
Here’s an example. We can use 
<code class="m_-224555803572068892highlighter-rouge">
tk_ts()
</code>
 to convert to a 
<code class="m_-224555803572068892highlighter-rouge">
ts
</code>
 object. Because the ts-based system only works with regular time series, we need to add the arguments 
<code class="m_-224555803572068892highlighter-rouge">
start = 2010
</code>
 and 
<code class="m_-224555803572068892highlighter-rouge">
freq = 12
</code>
.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Coerce to ts
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_ts
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
&lt;-
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
tk_ts
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_tbl
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
start
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892m">
2010
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
freq
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892m">
12
</span>
<span class="m_-224555803572068892p">
)
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892c1">
# Show the calendar-printout
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
beer_sales_ts
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
##        Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct
## 2010  6558  7481  9475  9424  9351 10552  9077  9273  9420  9413
## 2011  6901  8014  9833  9281  9967 11344  9106 10468 10085  9612
## 2012  7486  8641  9709  9423 11342 11274  9845 11163  9532 10754
## 2013  8395  8888 10109 10493 12217 11385 11186 11462 10494 11541
## 2014  8559  9061 10058 10979 11794 11906 10966 10981 10827 11815
## 2015  8398  9061 10720 11105 11505 12903 11866 11223 12023 11986
## 2016  8540 10158 11879 11155 11916 13291 10540 12212 11786 11424
##        Nov   Dec
## 2010  9866 11455
## 2011 10328 11483
## 2012 10953 11922
## 2013 11139 12709
## 2014 10466 13303
## 2015 11510 14190
## 2016 12482 13832
</code>
</pre>

</figure>

<p>
There are two ways we can go back to 
<code class="m_-224555803572068892highlighter-rouge">
tbl
</code>
:
</p>

<ol>

<li>
Just coerce back using 
<code class="m_-224555803572068892highlighter-rouge">
tk_tbl()
</code>
 and we get the “regular” index as YEARMON data type from 
<code class="m_-224555803572068892highlighter-rouge">
zoo
</code>
.
</li>

<li>
If the object was created with 
<code class="m_-224555803572068892highlighter-rouge">
tk_ts()
</code>
 and has a 
<code class="m_-224555803572068892highlighter-rouge">
timetk_index
</code>
, we can coerce back using 
<code class="m_-224555803572068892highlighter-rouge">
tk_tbl(timetk_index = TRUE)
</code>
 and we get the original “irregular” index as Date data type.
</li>

</ol>

<p>
<strong>
Method 1
</strong>
: We go back to 
<code class="m_-224555803572068892highlighter-rouge">
tbl
</code>
. Note that the date column is YEARMON class.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892n">
tk_tbl
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_ts
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
rename_index
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;date&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 84 x 2
##             date price
##    
<u>
</u>
 
<u>
</u>
##  1      Jan 2010  6558
##  2      Feb 2010  7481
##  3      Mar 2010  9475
##  4      Apr 2010  9424
##  5      May 2010  9351
##  6      Jun 2010 10552
##  7      Jul 2010  9077
##  8      Aug 2010  9273
##  9      Sep 2010  9420
## 10      Oct 2010  9413
## # ... with 74 more rows
</code>
</pre>

</figure>

<p>
<strong>
Method 2
</strong>
: We go back to 
<code class="m_-224555803572068892highlighter-rouge">
tbl
</code>
 but specify 
<code class="m_-224555803572068892highlighter-rouge">
timetk_idx = TRUE
</code>
 to 
<strong>
return original DATE or DATETIME information
</strong>
.
</p>

<p>
First, you can check to see if the ts-object has a timetk index with 
<code class="m_-224555803572068892highlighter-rouge">
has_timetk_idx()
</code>
.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# Check for timetk index. 
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
has_timetk_idx
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_ts
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## [1] TRUE
</code>
</pre>

</figure>

<p>
If 
<code class="m_-224555803572068892highlighter-rouge">
TRUE
</code>
, then specify 
<code class="m_-224555803572068892highlighter-rouge">
timetk_idx = TRUE
</code>
 during the 
<code class="m_-224555803572068892highlighter-rouge">
tk_tbl()
</code>
 coercion. See that we now have “date” data type. This was previously very difficult to do.
</p>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-r">
<span class="m_-224555803572068892c1">
# If timetk_idx is present, can get original dates back 
</span>
<span class="m_-224555803572068892w">

</span>
<span class="m_-224555803572068892n">
tk_tbl
</span>
<span class="m_-224555803572068892p">
(
</span>
<span class="m_-224555803572068892n">
beer_sales_ts
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
timetk_idx
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892kc">
TRUE
</span>
<span class="m_-224555803572068892p">
,
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892n">
rename_index
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892o">
=
</span>
<span class="m_-224555803572068892w">
 
</span>
<span class="m_-224555803572068892s2">
&quot;date&quot;
</span>
<span class="m_-224555803572068892p">
)
</span>
</code>
</pre>

</figure>

<figure class="m_-224555803572068892highlight">

<pre>
<code class="m_-224555803572068892language-text">
## # A tibble: 84 x 2
##          date price
##        
<u>
</u>
 
<u>
</u>
##  1 2010-01-01  6558
##  2 2010-02-01  7481
##  3 2010-03-01  9475
##  4 2010-04-01  9424
##  5 2010-05-01  9351
##  6 2010-06-01 10552
##  7 2010-07-01  9077
##  8 2010-08-01  9273
##  9 2010-09-01  9420
## 10 2010-10-01  9413
## # ... with 74 more rows
</code>
</pre>

</figure>

<h1 id="m_-224555803572068892next-steps">
Next Steps
</h1>

<p>
We’ve only scratched the surface of 
<code class="m_-224555803572068892highlighter-rouge">
timetk
</code>
. There’s more to learn including working with time series indices and making future indices. Here are a few resources to help you along the way:
</p>

<ul>

<li>
<a href="http://www.business-science.io/r-packages.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/r-packages.html&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNHAywVcN5cb2HE9jP1o6oehUjQUsw">
Business Science Software Website
</a>
</li>

<li>
<a href="https://business-science.github.io/timetk/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://business-science.github.io/timetk/&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNG2PU7Qv9j0NR19-P1aaN0hCR_bBQ">
timetk documentation
</a>
 – The vignettes are must reads for time series machine learning, working with the index and creating future index that matched the desired time series pattern
</li>

<li>
<a href="https://github.com/business-science/timetk" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/business-science/timetk&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEpLyIPj_ufBTO8hiwo7ZcsVZHKwA">
timetk GitHub Page
</a>
</li>

<li>
<a href="http://www.business-science.io/blog/index.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/blog/index.html&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNFAGZtVSTQMejA_IRmgnjHkwQUJwQ">
Business Science Insights Blog
</a>
</li>

</ul>

<h1 id="m_-224555803572068892announcements-">
Announcements 
<a class="m_-224555803572068892anchor" id="m_-224555803572068892announcements">
</a>
</h1>

<p>
We have a busy couple of weeks. In addition to Demo Week, we have:
</p>

<h4 id="m_-224555803572068892datatalk">
DataTalk
</h4>

<p>
On Thursday, October 26 at 7PM EST, Matt will be giving a 
<strong>
FREE LIVE 
<a href="https://www.experian.com/blogs/news/datatalk/machine-learning-recruitment/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.experian.com/blogs/news/datatalk/machine-learning-recruitment/&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNHY0ricPlmDUrNdwxoWXikz0mHNJg">
#DataTalk
</a>
</strong>
 on Machine Learning for Recruitment and Reducing Employee Attrition. You can sign up for a reminder at the 
<a href="https://www.experian.com/blogs/news/datatalk/machine-learning-recruitment/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.experian.com/blogs/news/datatalk/machine-learning-recruitment/&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNHY0ricPlmDUrNdwxoWXikz0mHNJg">
Experian Data Lab website
</a>
.
</p>

<blockquote class="m_-224555803572068892twitter-tweet m_-224555803572068892tw-align-center">

<p lang="en" dir="ltr">
<a href="https://twitter.com/hashtag/MachineLearning?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/MachineLearning?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNHDLLfoFKRcsD-lRbYP-8hmTP5dGw">
#MachineLearning
</a>
 for Reducing Employee Attrition 
<a href="https://twitter.com/bizScienc?ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/bizScienc?ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEo5FiwXqtmYzydu0Lgn9Zt1flMKg">
@BizScienc
</a>
<a href="https://t.co/vlxmjWzKCL" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://t.co/vlxmjWzKCL&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEenFsED6NwaqmxSW9Lj7pwP3vVnQ">
https://t.co/
<wbr>
vlxmjWzKCL
</a>
<a href="https://twitter.com/hashtag/ML?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/ML?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEiWpd0mE7AIiU-PTVIjASOjC0Hrg">
#ML
</a>
 
<a href="https://twitter.com/hashtag/AI?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/AI?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEuwTB8YKsAaForMKIu81GWwZGidA">
#AI
</a>
 
<a href="https://twitter.com/hashtag/HR?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/HR?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNE-8FALcOL5kVcw0B7aVkbv0DKA5Q">
#HR
</a>
 
<a href="https://twitter.com/hashtag/IoTT?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/IoTT?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNFW6MyWkEQB7M8Sy3KWzF95zVGoCA">
#IoTT
</a>
 
<a href="https://twitter.com/hashtag/IoT?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/IoT?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEzspg-lqmQDfGHngNkInlECw9yow">
#IoT
</a>
 
<a href="https://twitter.com/hashtag/DL?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/DL?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNHZf79tqJr_0WpXURODs2NDhpkTUw">
#DL
</a>
 
<a href="https://twitter.com/hashtag/BigData?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/BigData?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773506000&amp;usg=AFQjCNEhduXE9YpujmQOvlU81pSgmm2-Ow">
#BigData
</a>
 
<a href="https://twitter.com/hashtag/Tech?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/Tech?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNF6ySTH4ehlfWhD7EayeCMMohjZoA">
#Tech
</a>
 
<a href="https://twitter.com/hashtag/Cloud?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/Cloud?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNF0aO29GvtATmNocofpIgSdLIjUiw">
#Cloud
</a>
 
<a href="https://twitter.com/hashtag/Jobs?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/Jobs?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNEhgjRHRhNc4ZfN5rFKNK8XzA3mEg">
#Jobs
</a>
 
<a href="https://t.co/dF5Znf10Sk" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://t.co/dF5Znf10Sk&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNEdoIiC1KVyZcxXczILe8HfP1QROQ">
pic.twitter.com/dF5Znf10Sk
</a>
</p>

<p>
— Experian DataLab (@ExperianDataLab) 
<a href="https://twitter.com/ExperianDataLab/status/920726153022836738?ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/ExperianDataLab/status/920726153022836738?ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNFPgE3HylEvBIss2z05ZxTUhJZ6yQ">
October 18, 2017
</a>
</p>
</blockquote>

<p>
</p>

<h4 id="m_-224555803572068892earl">
EARL
</h4>

<p>
On Friday, November 3rd, Matt will be presenting at the EARL Conference on HR Analytics: Using Machine Learning to Predict Employee Turnover.
</p>

<blockquote class="m_-224555803572068892twitter-tweet m_-224555803572068892tw-align-center">

<p lang="en" dir="ltr">
<img src="https://ci6.googleusercontent.com/proxy/IZqbATFYmipfk-ZsCGfig6Y3nLyO5rc00O4x_LJlkwIDeDlhBQqzUNL1739Vsi032DTE8u4ztpMHNr5ZrbkTUyFnH921JYj6TzGM=s0-d-e1-ft#https://s.w.org/images/core/emoji/2.3/72x72/1f600.png" alt="😀" class="m_-224555803572068892wp-smiley" style="height:1em;max-height:1em">
Hey 
<a href="https://twitter.com/hashtag/rstats?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/rstats?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNEmaewqp9ID2Z1W0v6kGvZtByaKKg">
#rstats
</a>
. I&#39;ll be presenting 
<a href="https://twitter.com/earlconf?ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/earlconf?ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHjpq3oSZsqVP2yFIeQbDQDmvdLpA">
@earlconf
</a>
 on 
<a href="https://twitter.com/hashtag/MachineLearning?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/MachineLearning?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNF5mdmaGLGNkaY7m-TwmFSsTIhYCA">
#MachineLearning
</a>
 applications in 
<a href="https://twitter.com/hashtag/HumanResources?src=hash&amp;ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/hashtag/HumanResources?src%3Dhash%26ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGYvEe2d50DvnNM0Rp_Ck6XcpDQXA">
#HumanResources
</a>
. Get 15% off tickets: 
<a href="https://t.co/b6JUQ6BSTl" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://t.co/b6JUQ6BSTl&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNG0x_gCwIR-0k5sjp759URYyc-UHQ">
https://t.co/b6JUQ6BSTl
</a>
</p>

<p>
— Matt Dancho (@mdancho84) 
<a href="https://twitter.com/mdancho84/status/918255746256695296?ref_src=twsrc%5Etfw" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/mdancho84/status/918255746256695296?ref_src%3Dtwsrc%255Etfw&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHjfvka8_MmfaXjDaXUTtnWccYgqQ">
October 11, 2017
</a>
</p>
</blockquote>

<p>
</p>

<h4 id="m_-224555803572068892courses">
Courses
</h4>

<p>
Based on recent demand, we are considering offering 
<strong>
application-specific machine learning courses for Data Scientists
</strong>
. The content will be business problems similar to our popular articles:
</p>

<ul>

<li>

<p>
<a href="http://www.business-science.io/business/2017/09/18/hr_employee_attrition.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/business/2017/09/18/hr_employee_attrition.html&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNF0ywsS4XxzHa9M0xd_PyVGd0gXbA">
HR Analytics: Using Machine Learning to Predict Employee Turnover
</a>
</p>

</li>

<li>

<p>
<a href="http://www.business-science.io/business/2017/10/16/sales_backorder_prediction.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/business/2017/10/16/sales_backorder_prediction.html&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNFDXDCti-aORpDBuRI3M7D2a4Goaw">
Sales Analytics: How To Use Machine Learning to Predict and Optimize Product Backorders
</a>
</p>

</li>

</ul>

<p>
The student will 
<strong>
learn from Business Science how to implement cutting edge data science to solve business problems
</strong>
. Please let us know if you are interested. You can leave comments as to what you would like to see at the bottom of the post in Disqus.
</p>

<h1 id="m_-224555803572068892about-business-science-">
About Business Science 
<a class="m_-224555803572068892anchor" id="m_-224555803572068892contact">
</a>
</h1>

<p>
Business Science specializes in “ROI-driven data science”. 
<strong>
Our focus is machine learning and data science in business applications. We help businesses that seek to add this competitive advantage but may not have the resources currently to implement predictive analytics
</strong>
. Business Science works with clients primarily in small to medium size businesses, guiding these organizations in expanding predictive analytics while executing on ROI generating projects. Visit the 
<a href="http://www.business-science.io/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNE9tcyhIdsHjMOUfIpWMS4fzCXapQ">
Business Science website
</a>
 or 
<a href="http://www.business-science.io/contact.html" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/contact.html&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHMeWpkdm_2KIT_2Vk817UAzBXhMQ">
contact us
</a>
 to learn more!
</p>

<h1 id="m_-224555803572068892follow-business-science-on-social-media-">
Follow Business Science on Social Media 
<a class="m_-224555803572068892anchor" id="m_-224555803572068892social">
</a>
</h1>

<ul>

<li>
<a href="https://twitter.com/bizScienc" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/bizScienc&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGHlW6JMcvC8DO4xV2t13G4PQTQrA">
@bizScienc
</a>
 is on 
<a href="https://twitter.com/bizScienc" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://twitter.com/bizScienc&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGHlW6JMcvC8DO4xV2t13G4PQTQrA">
twitter
</a>
!
</li>

<li>
Check us out on 
<a href="https://www.facebook.com/Business-Science-LLC-754699134699054/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.facebook.com/Business-Science-LLC-754699134699054/&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNFhNbbBTFdRuAKWOmLG_hANf_7sqQ">
Facebook page
</a>
!
</li>

<li>
Check us out on 
<a href="https://www.linkedin.com/company/business.science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.linkedin.com/company/business.science&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGL_D9fXHMqJrucqrE-iBqdGbw0iQ">
LinkedIn
</a>
!
</li>

<li>
Sign up for 
<a href="http://www.business-science.io/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNE9tcyhIdsHjMOUfIpWMS4fzCXapQ">
our insights blog
</a>
 to stay updated!
</li>

<li>
If you like our software, 
<a href="https://github.com/business-science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/business-science&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNEgDeuxDPZdvLR_ivy8Uy_XzHQGFA">
star our GitHub packages
</a>
!
</li>

</ul>

<p>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:13px">

<div style="text-align:center">
To 
<strong>
leave a comment
</strong>
 for the author, please follow the link and comment on their blog: 
<strong>
<a href="http://www.business-science.io/code-tools/2017/10/24/demo_week_timetk.html" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://www.business-science.io/code-tools/2017/10/24/demo_week_timetk.html&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGoz3AICGqGLzYeWGYvTUbPTLRRMQ">
 business-science.io - Articles
</a>
</strong>
.
</div>

<hr>

<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNH2PxArOiqRl2oVzzyZiE2gNeNNFA">
R-bloggers.com
</a>
 offers 
<strong>
<a href="https://feedburner.google.com/fb/a/mailverify?uri=RBloggers" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://feedburner.google.com/fb/a/mailverify?uri%3DRBloggers&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHzWwZ_t4-qczHPDJcicvbpnsD3VQ">
daily e-mail updates
</a>
</strong>
 about 
<a title="The R Project for Statistical Computing" href="https://www.r-project.org/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-project.org/&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGoeYtlc5CJFuxLgEG4GPmUF9ierw">
R
</a>
 news and 
<a title="R tutorials" href="https://www.r-bloggers.com/search/tutorial" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/tutorial&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNER1ldqLJkbpDG1PFOK4BEmzQjifw">
tutorials
</a>
 on topics such as: 
<a title="Data science" href="https://www.r-bloggers.com/search/data%20science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/data%2520science&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHkPwckM57ulYgbSKqkvgmMD758Ng">
Data science
</a>
, 
<a title="Big Data" href="https://www.r-bloggers.com/search/Big%20Data" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Big%2520Data&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNEGeRKBTSHnOIVwrk16E2DQTcj1tA">
Big Data, 
<a title="R jobs" href="https://www.r-users.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-users.com/&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHOlX__I21uCWCUCQcCPSjmXwZ_zw">
R jobs
</a>
, visualization (
<a title="ggplot and ggplot2 tutorials" href="https://www.r-bloggers.com/search/ggplot2" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/ggplot2&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNFZpb5uO42sUCijd5bBj1l5klCMZw">
ggplot2
</a>
, 
<a title="Boxplots using lattice and ggplot2 tutorials" href="https://www.r-bloggers.com/search/boxplot" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/boxplot&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNH1XMSaAuK6kNWIdMdmo-2q-RLNsQ">
Boxplots
</a>
, 
<a title="Maps and gis" href="https://www.r-bloggers.com/search/map" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/map&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNH8yK0evBBsY3nKK-VA8OPuXNLAfQ">
maps
</a>
, 
<a title="Animation in R" href="https://www.r-bloggers.com/search/animation" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/animation&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNFMosX_NMW6KyqY1QPAB1Dfz0owrw">
animation
</a>
), programming (
<a title="RStudio IDE for R" href="https://www.r-bloggers.com/search/RStudio" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/RStudio&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGyBcH2ltkjbg7WdECbP84PU877QQ">
RStudio
</a>
, 
<a title="Sweave and literate programming" href="https://www.r-bloggers.com/search/sweave" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/sweave&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHYGMOkI_gAfcAaYbvhDmNjqUDSHg">
Sweave
</a>
, 
<a title="LaTeX in R" href="https://www.r-bloggers.com/search/LaTeX" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/LaTeX&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNFBkRfNdLAzyHnzZMH-2KAIILi5Ow">
LaTeX
</a>
, 
<a title="SQL and databases" href="https://www.r-bloggers.com/search/SQL" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/SQL&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNGy4Y9cvwHEyxXWUdNg3dxNWb-CbQ">
SQL
</a>
, 
<a title="Eclipse IDE for R" href="https://www.r-bloggers.com/search/eclipse" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/eclipse&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHXoDryzds_SbUJTn3QgB3hZAhSfQ">
Eclipse
</a>
, 
<a title="git and github, Version Control System" href="https://www.r-bloggers.com/search/git" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/git&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNEZO0RkLVUYsVPqkG3XeUSBeIKCjg">
git
</a>
, 
<a title="Large data in R using Hadoop" href="https://www.r-bloggers.com/search/hadoop" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/hadoop&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNHAMWdjKR_azD88bnsl5lPb_c-mhg">
hadoop
</a>
, 
<a title="Web Scraping of google, facebook, yahoo, twitter and more using R" href="https://www.r-bloggers.com/search/Web+Scraping" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Web%2BScraping&amp;source=gmail&amp;ust=1509502773507000&amp;usg=AFQjCNElm210LdCcvZvA6LzRdvMC41G17g">
Web Scraping
</a>
) statistics (
<a title="Regressions and ANOVA analysis tutorials" href="https://www.r-bloggers.com/search/regression" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/regression&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGuyUvgydhTFc2e1Xk9qMorIa6BmQ">
regression
</a>
, 
<a title="principal component analysis tutorial" href="https://www.r-bloggers.com/search/PCA" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/PCA&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGB46ar_na9LqQeOjRBKGHKLf8K7w">
PCA
</a>
, 
<a title="Time series" href="https://www.r-bloggers.com/search/time+series" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/time%2Bseries&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGySg2aFZc2azLU9t_lZ2LJLnDZ0g">
time series
</a>
, 
<a title="finance trading" href="https://www.r-bloggers.com/search/trading" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/trading&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNHXZ-U6g14xtETdPoa89SGGmnTrIA">
trading
</a>
) and more...
</a>
</div>
</p>
<img src="https://ci6.googleusercontent.com/proxy/TqDxLI1-eRT6UZs0QdHYptg2bKfBq1Be--_4x6efTHKfaP28k0_xSKY7_wwHMgCj5BR0DW7SEshfD9Dw8G0w1GkwpJERZrSWeZAJZXh57UONdKYiCPdiK8AyQ1P5eEczoigkVaaq2MLkS2VvOuzEq-e6f1E=s0-d-e1-ft#http://feeds.feedburner.com/~r/RBloggers/~4/Z_Z0-lWLECc?utm_source=feedburner&amp;utm_medium=email" height="1" width="1" alt="">

</div>

</td>

</tr>

<tr>

<td style="margin-bottom:0;line-height:1.4em">

<p style="margin:1em 0 3px 0">

<a name="m_-224555803572068892_6" style="font-family:Arial,Helvetica,sans-serif;font-size:19px" href="http://feedproxy.google.com/~r/RBloggers/~3/yH4ErmZA4zY/?utm_source=feedburner&amp;utm_medium=email" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://feedproxy.google.com/~r/RBloggers/~3/yH4ErmZA4zY/?utm_source%3Dfeedburner%26utm_medium%3Demail&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGuII90Jpod6G7W4dSdyF6p6E_eqA">
jsTree htmlwidget
</a>

</p>

<p style="font-size:14px;color:#555;margin:9px 0 3px 0;font-family:Arial,Helvetica,sans-serif;line-height:140%;font-size:14px">

<span>
Posted:
</span>
 23 Oct 2017 05:00 PM PDT
</p>

<div>
<p>
<div>
<div>
<div>
<div>
</div>
</div>
<div>
</div>
</div>
<div style="clear:both">
</div>
</div>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:12px">
(This article was first published on 
<strong>
<a href="https://yonicd.netlify.com/post/jstree/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://yonicd.netlify.com/post/jstree/&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFug7feTPOm1AjLU3l_mnQoCOa7-w">
 Rstats on Reproducible Random Thoughts
</a>
</strong>
, and kindly contributed to 
<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNHCfxFYTwfwwyThFZ8rTjd50bI7iQ">
R-bloggers)
</a>

</div>
</p>

<p>
<br>

<br>

<br>

</p>

<p>
jsTree is a R package that is a standalone htmlwidget for the jsTree JavaScript library. It can be run from the R console directly into the Rstudio Viewer, be used in a Shiny application or be part of an Rmarkdown html output.
</p>

<div id="m_-224555803572068892installation" class="m_-224555803572068892section m_-224555803572068892level2">

<h2>
Installation
</h2>

<pre class="m_-224555803572068892r">
<code>
#CRAN
install.packages(&#39;jsTree&#39;)
#Github
devtools::install_github(&#39;
<wbr>
metrumresearchgroup/jsTree&#39;)
</code>
</pre>

<p>
The motivation for the package came from the 
<a href="https://github.com/trestletech/shinyTree" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/trestletech/shinyTree&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNG88lR_TmaOk8rbNPpMx2q61AcsBg">
shinyTree
</a>
 by Jeff Allen, which has an early version of the JavaScript library hardcoded into a Shiny application.
</p>

<p>
The input for the htmlwidget is a character vector and the heirarchy is set by the ‘/’, as to mimic the delimiter of a file path.
</p>

<p>
The main purpose of this package is vizualize folder hierarchy, much like in the 
<code>
Files
</code>
 tab in RStudio. But, instead of looking in local directories it will be used for remote repositories, such as github, bitbucket and svn repositories. This is implemented in the 
<a href="https://github.com/metrumresearchgroup/vcs" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/metrumresearchgroup/vcs&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEkkzY8h2f9SCCSD39MCvNMaI82xA">
vcs
</a>
 package and a future post will show utility that package gives.
</p>

<p>
To show the basic functionality of jsTree we will use a dataset that contains all superfund sites from the 
<a href="https://www.epa.gov/superfund/search-superfund-sites-where-you-live" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.epa.gov/superfund/search-superfund-sites-where-you-live&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGiH8v0IvRVDnh3oO1hsWwY2DVY3A">
EPA
</a>
. You can access the tibble 
<a href="https://github.com/yonicd/blog/blob/master/data/superfundsite.Rds" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/yonicd/blog/blob/master/data/superfundsite.Rds&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFkTHdyeDlwlr5n_Pon3ZrHT6ItsA">
here
</a>
. The data
</p>

<pre class="m_-224555803572068892r">
<code>
library(htmlTable)
library(jsTree)
library(widgetframe)
</code>
</pre>

<pre class="m_-224555803572068892r">
<code>
# Read in the data
superfundsite &lt;- readRDS(&#39;../../data/
<wbr>
superfundsite.Rds&#39;)
htmlTable::htmlTable(head(
<wbr>
superfundsite),rnames=FALSE)
</code>
</pre>

<table class="m_-224555803572068892gmisc_table" style="border-collapse:collapse;margin-top:1em;margin-bottom:1em">

<thead>

<tr>

<th style="border-bottom:1px solid grey;border-top:2px solid grey;text-align:center">
Region
</th>

<th style="border-bottom:1px solid grey;border-top:2px solid grey;text-align:center">
State
</th>

<th style="border-bottom:1px solid grey;border-top:2px solid grey;text-align:center">
City
</th>

<th style="border-bottom:1px solid grey;border-top:2px solid grey;text-align:center">
County
</th>

<th style="border-bottom:1px solid grey;border-top:2px solid grey;text-align:center">
Zip Code
</th>

<th style="border-bottom:1px solid grey;border-top:2px solid grey;text-align:center">
Site Name
</th>

</tr>

</thead>

<tbody>

<tr>

<td style="text-align:center">
01
</td>

<td style="text-align:center">
Massachusetts
</td>

<td style="text-align:center">
ACTON
</td>

<td style="text-align:center">
MIDDLESEX
</td>

<td style="text-align:center">
01720
</td>

<td style="text-align:center">
W.R. GRACE &amp; CO., INC. (ACTON PLANT)
</td>

</tr>

<tr>

<td style="text-align:center">
01
</td>

<td style="text-align:center">
Massachusetts
</td>

<td style="text-align:center">
AMESBURY
</td>

<td style="text-align:center">
ESSEX
</td>

<td style="text-align:center">
01913
</td>

<td style="text-align:center">
MICROFAB INC (FORMER)
</td>

</tr>

<tr>

<td style="text-align:center">
01
</td>

<td style="text-align:center">
Massachusetts
</td>

<td style="text-align:center">
ASHLAND
</td>

<td style="text-align:center">
MIDDLESEX
</td>

<td style="text-align:center">
01721
</td>

<td style="text-align:center">
NYANZA CHEMICAL WASTE DUMP
</td>

</tr>

<tr>

<td style="text-align:center">
01
</td>

<td style="text-align:center">
Massachusetts
</td>

<td style="text-align:center">
ATTLEBORO
</td>

<td style="text-align:center">
BRISTOL
</td>

<td style="text-align:center">
02703
</td>

<td style="text-align:center">
WALTON &amp; LONSBURY INC.
</td>

</tr>

<tr>

<td style="text-align:center">
01
</td>

<td style="text-align:center">
Maine
</td>

<td style="text-align:center">
AUGUSTA
</td>

<td style="text-align:center">
KENNEBEC
</td>

<td style="text-align:center">
04330
</td>

<td style="text-align:center">
O’CONNOR CO.
</td>

</tr>

<tr>

<td style="border-bottom:2px solid grey;text-align:center">
01
</td>

<td style="border-bottom:2px solid grey;text-align:center">
Connecticut
</td>

<td style="border-bottom:2px solid grey;text-align:center">
BARKHAMSTED
</td>

<td style="border-bottom:2px solid grey;text-align:center">
LITCHFIELD
</td>

<td style="border-bottom:2px solid grey;text-align:center">
06063
</td>

<td style="border-bottom:2px solid grey;text-align:center">
BARKHAMSTED-NEW HARTFORD LANDFILL
</td>

</tr>

</tbody>

</table>

</div>

<div id="m_-224555803572068892basic-usage" class="m_-224555803572068892section m_-224555803572068892level2">

<h2>
Basic Usage
</h2>

<pre class="m_-224555803572068892r">
<code>
# collapse columns to be delimited by &#39;/&#39;
myx &lt;- apply(superfundsite,1,
<wbr>
function(x) paste(x,collapse = &#39;/&#39;))
# call jsTree
j0 &lt;- jsTree(obj = myx)
# place widget in iframe to use in blog post 
# (not needed in regular usage)
frameWidget(j0)
</code>
</pre>

<h2>
Initialize tree with checked boxes
</h2>

<pre class="m_-224555803572068892r">
<code>
nodestate1 &lt;- superfundsite$State==&#39;
<wbr>
California&#39;
j1 &lt;- jsTree(myx,nodestate=
<wbr>
nodestate1)
frameWidget(j1)
</code>
</pre>


<h2>
Tooltips
</h2>

<pre class="m_-224555803572068892r">
<code>
# Use the zipcode as a tooltip on the county name
myx2 &lt;- apply(superfundsite[,-c(5)],1,
<wbr>
paste,collapse=&#39;/&#39;)
zipcode_label &lt;- superfundsite$`Zip Code`
names(zipcode_label) &lt;- superfundsite$County
j2 &lt;- jsTree(myx2,tooltips = zipcode_label)
frameWidget(j2)
</code>
</pre>

</div>

<div id="m_-224555803572068892shiny" class="m_-224555803572068892section m_-224555803572068892level2">

<h2>
Shiny
</h2>

<p>
jsTree can be used in Shiny applications and supplies observers so the Shiny can react to the tree.
</p>

<p>
<br>

</p>

<pre class="m_-224555803572068892r">
<code>
ui &lt;- shiny::fluidPage(
  
  shiny::column(width=4,jsTree::
<wbr>
jsTreeOutput(&#39;tree&#39;)),
  
  shiny::column(width=8,shiny::
<wbr>
uiOutput(&#39;chosen&#39;))
  
)
server &lt;- function(input, output,session) {
  
  network &lt;- shiny::reactiveValues()
  
  shiny::observeEvent(input$
<wbr>
tree_update,{
    
    current_selection &lt;- input$tree_update$.current_
<wbr>
tree
    if(!is.null(current_selection)
<wbr>
) 
      network$tree &lt;- jsonlite::fromJSON(current_
<wbr>
selection)
    
  })
  
  shiny::observeEvent(network$
<wbr>
tree,{
    
    output$results &lt;- shiny::renderPrint({
      
      str.out &lt;- &#39;&#39;
      
      if(length(network$tree)&gt;0)
        str.out=network$tree
      
      return(str.out)
    })    
  })
  
  output$chosen &lt;- shiny::renderUI({
    
    list(shiny::h3(&#39;Selected Items&#39;),
         
    shiny::verbatimTextOutput(
<wbr>
outputId = &quot;results&quot;))
    
  })
  
  output$tree &lt;- jsTree::renderJsTree({
    
    nested_string &lt;- myx
    
    jsTree(nested_string)
    
  })
  
}
shinyApp(ui, server)
</code>
</pre>

</div>

<p>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:13px">

<div style="text-align:center">
To 
<strong>
leave a comment
</strong>
 for the author, please follow the link and comment on their blog: 
<strong>
<a href="https://yonicd.netlify.com/post/jstree/" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://yonicd.netlify.com/post/jstree/&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFug7feTPOm1AjLU3l_mnQoCOa7-w">
 Rstats on Reproducible Random Thoughts
</a>
</strong>
.
</div>

<hr>

<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNHCfxFYTwfwwyThFZ8rTjd50bI7iQ">
R-bloggers.com
</a>
 offers 
<strong>
<a href="https://feedburner.google.com/fb/a/mailverify?uri=RBloggers" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://feedburner.google.com/fb/a/mailverify?uri%3DRBloggers&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNHaIkNT18rjms-k5eEuCHZJlebvlg">
daily e-mail updates
</a>
</strong>
 about 
<a title="The R Project for Statistical Computing" href="https://www.r-project.org/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-project.org/&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFGeuPhwhC6cDV--1JQ8gY1n2alng">
R
</a>
 news and 
<a title="R tutorials" href="https://www.r-bloggers.com/search/tutorial" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/tutorial&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEqQkxMzp6Bmu_xU-w8jhHVnVmTMA">
tutorials
</a>
 on topics such as: 
<a title="Data science" href="https://www.r-bloggers.com/search/data%20science" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/data%2520science&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFtnWlNGgAm9Mh8JaSoEdDLpMSeNA">
Data science
</a>
, 
<a title="Big Data" href="https://www.r-bloggers.com/search/Big%20Data" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Big%2520Data&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEluJEcl95gV81eF6IovW6cGo9AjA">
Big Data, 
<a title="R jobs" href="https://www.r-users.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-users.com/&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFmqEz_30uaF_MOkSvIpE-JfYzseA">
R jobs
</a>
, visualization (
<a title="ggplot and ggplot2 tutorials" href="https://www.r-bloggers.com/search/ggplot2" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/ggplot2&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEGtZzdv20HXuI7EiWpjyTcNR9tVg">
ggplot2
</a>
, 
<a title="Boxplots using lattice and ggplot2 tutorials" href="https://www.r-bloggers.com/search/boxplot" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/boxplot&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNE1JzkzCBQvc5odjkCBJYC5e0QWZw">
Boxplots
</a>
, 
<a title="Maps and gis" href="https://www.r-bloggers.com/search/map" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/map&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFXYI4zGwpKSzfaZRXmho0NeEgm8Q">
maps
</a>
, 
<a title="Animation in R" href="https://www.r-bloggers.com/search/animation" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/animation&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEQf93PW-_YcEZOTYYqNh_W_znRVg">
animation
</a>
), programming (
<a title="RStudio IDE for R" href="https://www.r-bloggers.com/search/RStudio" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/RStudio&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNHVbrWgBYn8czQSjm9LApalHb3iZg">
RStudio
</a>
, 
<a title="Sweave and literate programming" href="https://www.r-bloggers.com/search/sweave" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/sweave&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFaTrjbiCnVARB8hJEkP_QRUZ0YOA">
Sweave
</a>
, 
<a title="LaTeX in R" href="https://www.r-bloggers.com/search/LaTeX" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/LaTeX&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGvU9r70AMKz4f49IFct6Edo2dMqw">
LaTeX
</a>
, 
<a title="SQL and databases" href="https://www.r-bloggers.com/search/SQL" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/SQL&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNF3pND80yK-3vTXXVnthJfa4azwQg">
SQL
</a>
, 
<a title="Eclipse IDE for R" href="https://www.r-bloggers.com/search/eclipse" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/eclipse&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEEsY2DDKgks6ilj_-1NfZm4oW6Mg">
Eclipse
</a>
, 
<a title="git and github, Version Control System" href="https://www.r-bloggers.com/search/git" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/git&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGayO-9eozKaN4Es4Z7Hkd1Xqt0AA">
git
</a>
, 
<a title="Large data in R using Hadoop" href="https://www.r-bloggers.com/search/hadoop" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/hadoop&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNFBPYeUGek0jfJQRRWXjAw_GEMP-g">
hadoop
</a>
, 
<a title="Web Scraping of google, facebook, yahoo, twitter and more using R" href="https://www.r-bloggers.com/search/Web+Scraping" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/Web%2BScraping&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEHyf5A6poenn7VE9zAi-OHXUgc2w">
Web Scraping
</a>
) statistics (
<a title="Regressions and ANOVA analysis tutorials" href="https://www.r-bloggers.com/search/regression" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/regression&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGuyUvgydhTFc2e1Xk9qMorIa6BmQ">
regression
</a>
, 
<a title="principal component analysis tutorial" href="https://www.r-bloggers.com/search/PCA" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/PCA&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGB46ar_na9LqQeOjRBKGHKLf8K7w">
PCA
</a>
, 
<a title="Time series" href="https://www.r-bloggers.com/search/time+series" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/time%2Bseries&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNGySg2aFZc2azLU9t_lZ2LJLnDZ0g">
time series
</a>
, 
<a title="finance trading" href="https://www.r-bloggers.com/search/trading" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/search/trading&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNHXZ-U6g14xtETdPoa89SGGmnTrIA">
trading
</a>
) and more...
</a>
</div>
</p>
<img src="https://ci4.googleusercontent.com/proxy/nJnbR_trJrE3pef8K_yd5KPVUnfDadj-YwIFG6dBjgtiSvbGeBqau6UEObLs0nlzlgub7mQlL3sH_pLFcvJgm6Bqxr1jEMQgLXuoJrmfj_zvo13mCFnjXFIzyU-l6g5si6e8QIeh-ywFAN7ze1HYpMUBNhg=s0-d-e1-ft#http://feeds.feedburner.com/~r/RBloggers/~4/yH4ErmZA4zY?utm_source=feedburner&amp;utm_medium=email" height="1" width="1" alt="">

</div>

</td>

</tr>

<tr>

<td style="margin-bottom:0;line-height:1.4em">

<p style="margin:1em 0 3px 0">

<a name="m_-224555803572068892_7" style="font-family:Arial,Helvetica,sans-serif;font-size:19px" href="http://feedproxy.google.com/~r/RBloggers/~3/gSi-lj-dWyU/?utm_source=feedburner&amp;utm_medium=email" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://feedproxy.google.com/~r/RBloggers/~3/gSi-lj-dWyU/?utm_source%3Dfeedburner%26utm_medium%3Demail&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEdBusPjjBHghFcA17QyAWsxGW3ZQ">
Statistical Machine Learning with Microsoft ML
</a>

</p>

<p style="font-size:14px;color:#555;margin:9px 0 3px 0;font-family:Arial,Helvetica,sans-serif;line-height:140%;font-size:14px">

<span>
Posted:
</span>
 23 Oct 2017 01:20 PM PDT
</p>

<div>
<p>
<div>
<div>
<div>
<div>
</div>
</div>
<div>
</div>
</div>
<div style="clear:both">
</div>
</div>

<div style="border:1px solid;background:none repeat scroll 0 0 #ededed;margin:1px;font-size:12px">
(This article was first published on 
<strong>
<a href="http://blog.revolutionanalytics.com/2017/10/statistical-machine-learning-with-microsoft-ml.html" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=http://blog.revolutionanalytics.com/2017/10/statistical-machine-learning-with-microsoft-ml.html&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNEYZhLkvVEc2_chKkEZWj4C3bpquQ">
 Revolutions
</a>
</strong>
, and kindly contributed to 
<a href="https://www.r-bloggers.com/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://www.r-bloggers.com/&amp;source=gmail&amp;ust=1509502773508000&amp;usg=AFQjCNHCfxFYTwfwwyThFZ8rTjd50bI7iQ">
R-bloggers)
</a>

</div>
</p>

<div>

<p>
<a href="https://docs.microsoft.com/en-us/machine-learning-server/r-reference/microsoftml/microsoftml-package" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://docs.microsoft.com/en-us/machine-learning-server/r-reference/microsoftml/microsoftml-package&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNGE8XLGj_zGLcmipFR1QGRi9PdwSA">
MicrosoftML
</a>
 is an R package for machine learning that works in tandem with the 
<a href="https://docs.microsoft.com/en-us/machine-learning-server/r-reference/revoscaler/revoscaler" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://docs.microsoft.com/en-us/machine-learning-server/r-reference/revoscaler/revoscaler&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNGpytC6axKDhLp-oHBuai9aN2wp6A">
RevoScaleR
</a>
 package. (In order to use the MicrosoftML and RevoScaleR libraries, you need an installation of 
<a href="https://docs.microsoft.com/en-us/machine-learning-server/rebranding-microsoft-r-server" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://docs.microsoft.com/en-us/machine-learning-server/rebranding-microsoft-r-server&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNETCs8_03V-Tz1gJSAZgw3FiOpwKw">
Microsoft Machine Learning Server
</a>
 or 
<a href="https://docs.microsoft.com/en-us/machine-learning-server/r-client/what-is-microsoft-r-client" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://docs.microsoft.com/en-us/machine-learning-server/r-client/what-is-microsoft-r-client&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNFzH6LrBslE3jIk3wJG1WLERoLEjg">
Microsoft R Client
</a>
.) A great way to see what MicrosoftML can do is to take a look at the on-line book 
<a href="https://azure.github.io/learnAnalytics-MicrosoftML/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://azure.github.io/learnAnalytics-MicrosoftML/&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNFUUO_nDbmqlv3xRKOcUDlIMTYhZA">
Machine Learning with the MicrosoftML Package
</a>
 Package by Ali Zaidi.
</p>

<p>
The book includes worked examples on several topics:
</p>

<ul>

<li>
Exploratory data analysis and feature engineering
</li>

<li>
Regression models
</li>

<li>
Classification models for computer vision
</li>

<li>
Convolutional neural networks for computer vision
</li>

<li>
Natural language processing
</li>

<li>
Transfer learning with pre-trained DNNs
</li>

</ul>

<p>
The book is part of Ali&#39;s in-person workshop &quot;Statistical Machine Learning with MicrosoftML&quot;, and you can find further materials including data and scripts at this 
<a href="https://github.com/Azure/learnAnalytics-MicrosoftML" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://github.com/Azure/learnAnalytics-MicrosoftML&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNEnv-_vSQNzkQAuOsqXXL3MEJ9sCA">
Github repository
</a>
. If you&#39;d like to experience the workshop in person, Ali will be presenting it at the 
<a href="https://earlconf.com/boston/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://earlconf.com/boston/&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNGgux3txgR2fzg7FpE7zbWcmldlww">
EARL Boston conference
</a>
 on November 1.
</p>

<p>
 
</p>

<p>
Github (Azure): 
<a href="https://azure.github.io/learnAnalytics-MicrosoftML/" rel="nofollow" target="_blank" data-saferedirecturl="https://www.google.com/url?hl=en&amp;q=https://azure.github.io/learnAnalytics-MicrosoftML/&amp;source=gmail&amp;ust=1509502773509000&amp;usg=AFQjCNFUUO_nDbmqlv3xRKOcUDlIMTYhZA">
Machine Learning with the MicrosoftML Package
</a>
</p>

</div>
