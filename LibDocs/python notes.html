<base target="_blank"><html><head><title>Python Notes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="../lazyload.min.js"></script>
<script type='text/javascript' src='../mainscript.js'></script>
<script src="D:/Dropbox/Public/commonfunctions.js"></script>
<script>
  var showTopicNumber = true;
  var bookid = "pythonNotes" 
  var markerName = "h2, i"
</script>
<style>
body{width:80%;margin-left: 10%; font-size:22px;}
h1, h2 {color: gold;}
strong {color: orange;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px;}
</style></head><body onkeypress="chkKey()"><center>
<h1>Python Notes</h1>
<a href="#mustWatch" class="red goldbs" target="_self">Must Watch!</a>
<br><br>
<div id="toc"></div></center>
<br><br>
<div id="mustWatch"><center><span class="red">MustWatch</span></center><br>
<a href="https://www.youtube.com/watch?v=eJDIsFJN4OQ" class="whitebut ">code 3D Engine in Python. OpenGL Pygame Tutorial</a>

<a href="https://www.youtube.com/watch?v=M_Hx0g5vFko" class="redbut white gold2bs">code 3D Engine in Python from Scratch</a>

<a href="pythonTutorial.html" class="whitebut ">pythonTutorial</a>
<a href="python-Tutorial.html" class="whitebut ">python-Tutorial</a>
<a href="https://www.youtube.com/watch?v=CIQwJUM1XXc" class="whitebut ">超强的AI作画</a>
<pre>
C:\Users\william\AppData\Local\Programs\Python\Python310\python.exe
C:\ai

https://www.freedidi.com/6727.html

git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git

https://github.com/AUTOMATIC1111/stable-diffusion-webui/wiki/Dependencies

</pre>
<a href="https://mp.weixin.qq.com/s/0FMMtsOYxHxJ9EU0NpYWQw" class="whitebut ">PyMuPDF</a>

<a href="https://mp.weixin.qq.com/s/eUn2LmwHjRPZ6OJPliICow" class="whitebut ">梯度下降的原理、代码、调试</a>
<a href="https://mp.weixin.qq.com/s/Ayufb8NxOPCEgq3vCnCOLw" class="whitebut ">掌握自动机器学习 AutoML：PyCaret</a>
<a href="https://mp.weixin.qq.com/s/I-LFVlPeBi62smZkl6THhw" class="whitebut ">一行代码就能识别	爬虫方法</a>

<a href="https://mp.weixin.qq.com/s/2TL-dEOa6TeSUdGYAftTOA" class="whitebut ">Python 破解 WiFi 密码</a>

<a href="https://altair-viz.github.io/" class="whitebut ">Altair: Declarative Visualization</a>

<a href="https://mp.weixin.qq.com/s/TfeFfaYMN3prQtqPPuEVig" class="whitebut ">Python 数据可视化的 3 大步骤</a>

<a href="https://thonny.org/" class="whitebut ">thonny Python IDE</a>

<a href="https://www.youtube.com/watch?v=dam0GPOAvVI" class="whitebut ">Python Website Full Tutorial - Flask</a>
<a href="https://github.com/pyecharts/pyecharts" class="whitebut ">pyecharts</a>

<a href="https://codeburst.io/building-beautiful-command-line-interfaces-with-python-26c7e1bb54df" class="whitebut ">Building Command Line Interfaces with Python</a>

<a href="https://www.tutorialsteacher.com/python/python-generator" class="whitebut ">Generator Functions</a>

<a href="40 Python charts.html" class="whitebut ">40 Python charts</a>
<a href="https://github.com/willmcgugan/rich" class="whitebut ">Python library for rich text in the terminal: Rich</a>

<a href="https://www.jiqizhixin.com/articles/082602" class="whitebut ">Pandas 核心操作</a>
<a href="http://shakedzy.xyz/dython/" class="whitebut ">A set of Data analysis tools</a>

<a href="https://github.com/filebrowser/filebrowser" class="whitebut ">filebrowser provides a file managing interface</a>

<a href="https://data-flair.training/blogs/machine-learning-project-ideas/" class="whitebut ">Top 47 Machine Learning Projects</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652579572&idx=2&sn=aed34454b0969a32f813a3dc56f367c9&chksm=84650ebeb31287a897b72e0fd1aa5283a42fdc9a991703c90a24e8e094a89599bf3ef82fbfec&exportkey=AeUi7ab%2FHBjse8aGozf1E4s%3D&pass_ticket=IYqqQxaE03NCH7nAbzBr2Cvw%2BQyqPu5tlglh692pHzGdCk5dhzXX%2Bm7WaxG012x4&wx_header=0#rd" class="whitebut ">简单实用的 pandas 技巧：如何将内存占用降低90%</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652579506&idx=2&sn=da3f37f7b9b23c568c00d319cf5486f6&chksm=84650ef8b31287ee3c5ccba728e3a713142ddadd76d5ce9a3ba86d204688c8b84b49c07c77e8&exportkey=Afxln8BJVCa4F%2FsWE0n5WUc%3D&pass_ticket=IYqqQxaE03NCH7nAbzBr2Cvw%2BQyqPu5tlglh692pHzGdCk5dhzXX%2Bm7WaxG012x4&wx_header=0#rd" class="whitebut ">Pandas 75 个高频操作</a>
<a href="https://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652579451&idx=2&sn=0409c99ed3d859bab7a1aa2713b55118&chksm=84650e31b31287276b480164abb6e3d68ce2ea3d5a6209790e8e421557b995bff1268c194288&mpshare=1&scene=1&srcid=0831Mtx3dgBnpuIfws0iXNu2&sharer_sharetime=1630388951072&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AdiCmlhYWcl5wr3v0wF4Uik%3D&pass_ticket=IYqqQxaE03NCH7nAbzBr2Cvw%2BQyqPu5tlglh692pHzGdCk5dhzXX%2Bm7WaxG012x4&wx_header=0#rd" class="whitebut ">Python 数据处理全家桶</a>

<a href="https://github.com/Derrick-Sherrill/DerrickSherrill.com/blob/master/DeepARSageMaker.ipynb" class="whitebut ">code used for Automating a Supply Chain with Machine Learning, AWS, and Python</a>

<a href="https://github.com/Derrick-Sherrill/DerrickSherrill.com/blob/master/automate_supply_chain.py" class="whitebut ">automate supply chain</a>

<a href="https://www.youtube.com/watch?v=UZX5kH72Yx4" class="whitebut ">Tech With Tim to Convert any Python File to .EXE</a>

<a href="Python Extensions in Assembly.html" class="redbut goldbs goldts white">Writing Python Extensions in <b>Assembly</b></a>
<a href="https://www.w3resource.com/python-exercises/" class="whitebut ">samples</a>
<br>
<a href="https://www.youtube.com/watch?v=dam0GPOAvVI" class="whitebut ">Python Website Full Tutorial - Flask, Authentication, Databases & More</a>

<a href="pythonVideos.html" class="goldbut white blueblackgrad">pythonVideos</a>

<a href="https://www.youtube.com/channel/UC4JX40jDee_tINbkjycV4Sg" class="red bordgreen2 borRad10 whitebs">Tech With Tim</a>
<a href="https://www.youtube.com/watch?v=8DvywoWv6fI">Python for Everybody</a>

<a href="pythonTut.html" class="bordorange2 orange limebs borRad10">pythonTut</a>
<a href="https://www.youtube.com/watch?v=LosIGgon_KM">Python Urllib GET Requests</a>

<br>
<a href="https://www.youtube.com/watch?v=_1QtMPuYIVw" class="goldbut red">Spotting and solving everyday problems with machine learning</a>
<a href="recordlinkage.html" class="whitebut ">recordlinkage</a>

<br>

<a href="https://codewith.mu" class="goldbut red white2bs">Code with Mu</a>
<a href="https://thonny.org" class="bluebut green gold2bs">Thonny Python IDE</a>
<a href="https://circuitpython.org" class="whitebut ">CircuitPython</a>

<a href="https://www.codespeedy.com/category/python/">codespeedy python samples</a>
<a href="://www.youtube.com/channel/UCFtw9CfTfMKU9aHZsT2teYg" class="whitebut ">Python tutorial and other tutorials</a>
<br>

<a href="https://www.youtube.com/watch?v=AqSi1xu6kEU">Python Search Database Table</a>
<a href="https://trinket.io" class="whitebut ">Trinket run and write code in browser</a>
<a href="https://jacksonbates.wordpress.com/python-fu-gimp-scripting-tutorial-pages/" class="whitebut ">python fu gimp scripting tutorial</a>

<a href="https://docs.blender.org/manual/en/latest/advanced/scripting/introduction.html" class="whitebut ">Python Blender tutorial</a>
<a href="https://wiki.inkscape.org/wiki/index.php/PythonEffectTutorial" class="whitebut ">Inkscape PythonEffect Tutorial</a>
<a href="https://pythonprogramming.net/data-analysis-tutorials/" class="whitebut ">Python data analysis tutorials</a>
</div>
<pre>
<br>
<br>

<h2>Major Contents</h2>
<a href="https://www.youtube.com/watch?v=JeznW_7DlB0&t=4s" class="whitebut ">Python Object Oriented Programming (OOP)</a>

<a href="https://github.com/jackfrued/Python-100-Days">Python 100 Days</a>

<a href="https://www.youtube.com/watch?v=XGf2GcyHPhc">Learn Python by Building Five Games - Full Course</a>

<a href="https://www.youtube.com/watch?v=kDdTgxv2Vv0">Python Tutorial for Beginners Build a Game with Python</a>

<a href="https://www.youtube.com/watch?v=ZDa-Z5JzLYM&t=29s">Python OOP教程1：类和实例</a>

<a href="python programming examples.html">&diams;python programming examples</a>

<a href="https://www.pythonforbeginners.com/code-snippets-source-code/python-code-examples"><u class="yellowword">Python Examples</u></a>

. <a href="http://www.jianshu.com/p/3c0c36e60f41">Python的GUI编程</a>
. <a href="http://www.ruanyifeng.com/blog/">阮一峰的网络</a>
. <a href="http://stackoverflow.com/questions/1843422/get-webpage-contents-with-python">get webpage with python</a>

<a href="https://www.youtube.com/playlist?list=PLi01XoE8jYohWFPpC17Z-wWhPOSuh8Er-"><span class="greensha">Python Programming Tutorials</span></a>
. <a href="SymPy Geometry Module.html">SymPy Geometry Module</a>

<a href="http://www.openbookproject.net/thinkcs/python/english2e/">python samples</a>
. <a href="python print.html">&diams;python print</a>
. <a href="PythonDataScienceHandbook.html"><u class="goldword">&diams;Python Data Science Handbook</u></a>
. <a href="http://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652566845&idx=1&sn=6e447a40b07a50d3ba3856675e6a37f1&chksm=8464dd77b3135461805b5715a434d52ef3c617f824379cc99106834bd3166a31092cb21f6cef&scene=0#rd">Python NLP入门教程</a>

<a href="https://campus.datacamp.com/courses/feature-engineering-for-nlp-in-python/basic-features-and-readability-scores?ex=1"><span class=" borRad10 bordyellow1 cyanbs blue">feature engineering for nlp in python</span></a>

. <a href="python 爬虫技巧.html">&diams;python 爬虫技巧</a>

<a href="Python Numpy Tutorial.html" class="bordred1 green bluebs borRad10">&diams;Python Numpy Tutorial</a>
<a href="Python Numpy Tutorial1.html" class="bordred1 blue whitebs borRad10 ">&diams;Python Numpy Tutorial1</a>
. <a href="Python数据分析 Numpy.html">&diams;Python数据分析 Numpy</a>
. <a href="Numpy.html">&diams;Numpy</a>
. <a href="Numpy reshape.html"><span class="yellowsha">&diams;Numpy reshape</span></a>

<a href="http://www.codeskulptor.org/"><span class="whitesha">CodeSkulptor</span></a>
. <a href="http://github.com/BurntSushi/nfldb/wiki/Python-&-pip-Windows-installation">Python & pip Windows installation</a>
. <a href="https://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652567459&idx=1&sn=a617f42e00c844bdff5e3ee38b9197f5&chksm=8464dfe9b31356ff34980f5f384e6d04d12b14cf418dc41d361cb96e23fb9ba69f830902bef3&scene=0&pass_ticket=XiKyOfRivip8hSDFgS6EPbNSoPrIWDet2dmzAsi2dyGbuIDq6GKcCSRmo92RFFtw#rd">快速学习Python的技巧</a>
<a href="https://www.youtube.com/watch?v=apACNr7DC_s"><span class="yellowsha">Python Classes and Objects</span></a>

<a href="Python Tutorial.html">&#x25B2;<b class="brownword">Python Tutorial</b></a>
. <a href="pythonTutorial.html"><b class="greenword">&diams;pythonTutorial</b></a>
. <a href="pythonTutorial cards.html"><b class="redsha">&diams;pythonTutorial cards</b></a>

. <a href="pythonspotTutor.html">&diams;pythonspotTutor</a>
. <a href=#Python target="_self"><span class="greensha">Python</span></a>

<a href="python Reference.html">&diams;python Reference</a>
. <a href="python Mathematical functions.html">&diams;python Mathematical functions</a>
. <a href="http://www.astro.up.pt/~sousasag/Python_For_Astronomers/Python_qr.pdf">Python 2.7 Quick Reference</a>
<a href="pythontips.html" class="gold">&diams;Pythontips</a>
<a href="Python Tips.html" class="whitebut green">Python Tips</a>

<a href="JavaScriptTipsTab-starter\PythonLibHints.html"><b class="whitesha">&diams;PythonLibHints Tips</b></a>
. <a href="JavaScriptTipsTab-starter\Python Built-in Functions.html"><span class="greenb">&diams;Python Built-in Functions Tips</span></a>
. <a href="python Input and Output.html">&diams;python Input and Output</a>
. <a href="http://www.programiz.com/python-programming/methods/built-in/print"><b class="redword">python print</b></a>

<a href="http://www.cs.put.poznan.pl/csobaniec/software/python/py-qrc.html">Python Quick Reference Card</a>
. <a href="python Mathematical functionsList.html">&diams;python Mathematical functionsList</a>
. <a href="Datacamp Tutorials.html"><span class="keybut">&diams;Datacamp Tutorials</span></a>

<a href="programizList.html" class="bordred2 borRad10 white goldbs grayblackgrad">&diams;programizList Python Tutorial</a>
. <a href="Libraries.html">&diams;Python Libraries</a>
. <a href="http://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&mid=2650733750&idx=2&sn=5420df0c2ccd9ee5fd8906483551f53d&chksm=871b38c8b06cb1de36475e9965290661da8ca748b05f7d63c9cfc0d2819b95aba0a425195869&mpshare=1&scene=1&srcid=1124V7DFOxUJrAZFAKCw0tnV&pass_ticket=5SRwBeHwQ5Aj3JLYOQNoi2eButA%2FsopZV1Rkl30zTtjSd%2BpYiF7SG1ACfiKzfhUn#rd">Python数据分析库Pandas</a>
. <a href="Python Quick ReferenceScript.html">&diams;Python Quick ReferenceScript</a>

<a href="Python Quick ReferenceList.html">&diams;Python Quick ReferenceList</a>
. <a href="Python 3 – Quick Reference Card.html"><span class="goldb">&diams;Python 3 – Quick Reference Card</span></a>
. <a href="Python Built-in Functions.html">&diams;Python Built-in Functions</a>

<a href="Python NLP入门教程.html">&diams;Python NLP入门教程</a>
. <a href="Altair.html">&diams;Altair</a>
. <a href="http://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652567039&idx=1&sn=ee4c4479e3f215222cf3842a44295137&chksm=8464ddb5b31354a3a13cb801e55bd3423bc8ee101e79e1990708e683b1ddf338e12ec254df22&scene=0&pass_ticket=90tbKEwnO1JxHvOVwi%2BgVvJfYnAJO4%2FGO0%2F10rKm8AU30H%2BXXqLyHxnMNl%2BXzdcG#rd">Python数据分析</a>
<a href="http://www.analyticsvidhya.com/blog/2017/10/linear-optimization-in-python/">linear-optimization-in-python</a>

<a href="http://programminghistorian.org/lessons/creating-and-viewing-html-files-with-python">Creating and Viewing HTML Files with Python</a>
. <a href="http://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652566909&idx=1&sn=fd8a1f23673efe6d6629d5ee4ba48f49&chksm=8464dd37b31354210f8aa2f0be328aed6ba6069aec37ee5d29a542f2abb074544535ee6384ff&scene=0#rd">掌握 Python</a>
<a href="http://mypy-lang.org/"><span class="redb">MyPy</span></a>

<a href="https://www.youtube.com/watch?v=Bg9r_yLk7VY&t=9s"><span class="bluebut blue cyan2bs">Python App Tracks Amazon Prices!</span></a>

<a href="https://www.youtube.com/watch?v=Vde5SH8e1OQ"><span class="pinkbut pink red2bs">PyQt5 Tutorial - Setup and a Basic GUI Application</span></a>
<a href="https://www.youtube.com/watch?v=ksW59gYEl6Q">Python GUI's with PyQt5</a>
<a href="https://www.youtube.com/watch?v=FVpho_UiDAY">PyQt5 Tutorial - Use Qt Designer</a>

code and a written tutorial: https://nitratine.net/blog/post/python-guis-with-pyqt/

Auto Py to Exe: https://youtu.be/OZSZHmWSOeM
Convert PY to EXE: https://youtu.be/lOIJIk_maO4

PyQt5 and pyqt5-tools support Python 3.5 - 3.7. designer.exe has now been moved to pyqt5_tools\Qt\bin but can also be found in the \Scripts\ folder in the root of your Python installation.

<a href="http://scipy.org/install.html">Installing scipy</a>
. <a href="https://docs.scipy.org/doc/scipy/reference/tutorial/index.html">SciPy Tutorial</a>
. <a href="https://docs.scipy.org/doc/scipy/reference/tutorial/basic.html">Basic functions</a>
. <a href="Using Python for Android and QPython.html"><span class="bluesha">&diams;Using Python for Android and QPython</span></a>

<a href="http://www.shortcutfoo.com/app/dojos/python-regex/cheatsheet">Python Regex Cheatsheet</a>

. <a href="30 Python Projects.html"><span class="bluesha">&diams;30 Python Projects</span></a>
. <a href="https://news.codecademy.com/python-community/">Make the Most of Python’s Communities</a>

<a href="http://chuansong.me/account/PythonCoder">Python开发者</a>
. <a href="http://chuansong.me/account/LovePython">Python编程</a>
. <a href="http://chuansong.me/account/j_hao104">Pythoner每日一报</a>
. <a href="http://chuansong.me/account/Python_xiaowu">Python小屋</a>
. <a href="http://chuansong.me/account/rrbiancheng">人人可以学Python</a>

<a href="http://chuansong.me/account/guodongwei1991">机器学习算法与Python学习</a>
. <a href="https://mp.weixin.qq.com/s?__biz=MzA4OTg5NzY3NA==&mid=2649345419&idx=1&sn=e98a75aea60b877b90bf298cf87a4ebe&chksm=880e822ebf790b38bdc3ea4449ddf0372668e7377d7fd6cbe673836fcbf248efb6a679207fd5&mpshare=1&scene=1&srcid=0323cvXgfl853XLXR8ImlcgD&pass_ticket=BOhQmZK2YWJQfR1yUIr4AFiw7tx0%2BW7LxBY6S9jwwUFgJ7XLhNyJ7QHnQU5oEk98#rd">Python实现机器学习算法</a>

<a href="https://towardsdatascience.com/introducing-a-simple-and-intuitive-python-api-for-uci-machine-learning-repository-fd2ce8eb6cd4">Introducing a simple and intuitive Python API for UCI machine learning repository</a>

<a href="http://www.analyticsvidhya.com/blog/2018/02/time-series-forecasting-methods/">7 methods to perform Time Series forecasting (with Python codes)</a>

<a href="https://www.github.com/pyscripter/pyscripter">pyscripter home</a>
. <a href="https://intranet.ee.ic.ac.uk/t.clarke/ee2lab/handouts/MIC/Tools/python%20programming%20(pyscripter).pdf">pyscripter.pdf</a>
. <a href="https://www.youtube.com/watch?v=qwWiIW3z-Vo">pyscript intro</a>
. <a href="http://pyscript.sourceforge.net/pyscript.pdf">pyscript.pdf</a>
. <a href="http://pyscript.sourceforge.net/gallery.html">pyscript gallery</a>

<a href="https://www.youtube.com/watch?v=ve2pmm5JqmI">Python Tutorial: Automate Parsing and Renaming of Multiple Files</a>

<a href="https://www.youtube.com/watch?v=YYXdXT2l-Gg&list=PL-osiE80TeTskrapNbzXhwoFUiLCjGgY7">Python Tutorial for Beginners 1: Install and Setup for Mac and Windows</a>

<a href="https://cewing.github.io/training.codefellows/assignments/day01/sublime_as_ide.html">Turning Sublime Text Into a Lightweight Python IDE</a>

<a href="https://www.youtube.com/watch?v=1F_OgqRuSdI&list=PL0-84-yl1fUnRuXGFe_F7qSH1LEnn9LkW">Lesson 1 - Python Programming (Automate the Boring Stuff with Python)</a>

<a href="https://www.youtube.com/results?search_query=Task+Automation+with+Python+Scripting">Task Automation with Python Scripting</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652567440&idx=2&sn=cb7f670914e4273d08ee76cb4d965adb&chksm=8464dfdab31356cc68153e4a18910891aeff7c2237b97be7279bbd0589e645890cdb529e90c1&mpshare=1&scene=1&srcid=0410f6I7hkYrThYM8fzfAUJZ&pass_ticket=ffHA2AbUubeZmNO0YwV710%2F%2F4ddlmoyHLacbjI9AFiSmoDbzHsy0wRqDu5yHGUGA#rd">6 种 Python 数据可视化工具</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652567459&idx=1&sn=a617f42e00c844bdff5e3ee38b9197f5&chksm=8464dfe9b31356ff34980f5f384e6d04d12b14cf418dc41d361cb96e23fb9ba69f830902bef3&mpshare=1&scene=1&srcid=0410didOe6TBXAmqdk0EC88I&pass_ticket=ffHA2AbUubeZmNO0YwV710%2F%2F4ddlmoyHLacbjI9AFiSmoDbzHsy0wRqDu5yHGUGA#rd">从入门到上手写脚本/爬数据/搭网站，有哪些快速学习Python的技巧</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&mid=2650740482&idx=3&sn=f678397cc87bd4405ba26944cbe1076a&chksm=871ad37cb06d5a6a603993f5055611612e4a4501fea007a4e3a41dfd9466d92b5c219483cd4f&mpshare=1&scene=1&srcid=04106HTYObZApNNugq9AdQkk&pass_ticket=ffHA2AbUubeZmNO0YwV710%2F%2F4ddlmoyHLacbjI9AFiSmoDbzHsy0wRqDu5yHGUGA#rd">Scikit-learn中文文档：步入机器学习的完美实践教程</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&mid=2650740517&idx=1&sn=0b69d9a42f5ca18ed513cee309cc27a1&chksm=871ad35bb06d5a4d9f4d30e848c023247358db64af5b6d3fe6453412d992c1c5c49d4fe3aca6&mpshare=1&scene=1&srcid=0410Mva7hndDQZ5trRYsiFDE&pass_ticket=ffHA2AbUubeZmNO0YwV710%2F%2F4ddlmoyHLacbjI9AFiSmoDbzHsy0wRqDu5yHGUGA#rd">94页论文综述卷积神经网络：从基础技术到研究前景</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&mid=2650740583&idx=3&sn=f82637dc3fd70eb332454cbb8b03658a&chksm=871ad319b06d5a0f64d7da4d7291eaa4aa64b1cef331a84411cc2ecd8d3bdd8cf75779e3e0a3&mpshare=1&scene=1&srcid=04101OoY8VGNDnpsGxOST98T&pass_ticket=ffHA2AbUubeZmNO0YwV710%2F%2F4ddlmoyHLacbjI9AFiSmoDbzHsy0wRqDu5yHGUGA#rd">介绍机器学习中基本的数学符号</a>

<a href="https://gigadom.wordpress.com/2018/05/06/deep-learning-from-first-principles-in-python-r-and-octave-part-8/">Deep Learning from first principles in Python, R and Octave – Part 8</a>

<a href="https://towardsdatascience.com/a-weird-introduction-to-deep-learning-7828803693b0"><span class="orangeb">A weird introduction to Deep Learning</span></a>

<a href="https://towardsdatascience.com/googles-automl-will-change-how-businesses-use-machine-learning-c7d72257aba9">Google’s AutoML will change how businesses use Machine Learning</a>

<a href="https://www.codementor.io/milesak60/python-party-with-strings-jps4ek1k1?utm_swu=7179"><span class="redword">Python: party with Strings</span></a>

<a href="https://www.codementor.io/aliacetrefli/how-to-read-outlook-emails-by-python-jkp2ksk95">How to Read Outlook Emails by Python</a>

<a href="https://towardsdatascience.com/how-i-trained-a-language-detection-ai-in-20-minutes-with-a-97-accuracy-fdeca0fb7724">trained a language detection AI in 20 minutes</a>

<a href="Logistic Regression Algorithm.html">Logistic Regression Algorithm</a>

<a href="https://towardsdatascience.com/renko-brick-size-optimization-34d64400f60e">Renko brick size optimization</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzAxODI5ODMwOA==&mid=2666542062&idx=1&sn=d9d14dfbdfe61e000304b82552d15608&chksm=80dcf745b7ab7e53b75e9c7ddd0c7c319799c17e8e683c3c0abbc67e10bc19afade42c029792&mpshare=1&scene=1&srcid=0410ViWrgATIPcatOMLyUgaB&pass_ticket=ffHA2AbUubeZmNO0YwV710%2F%2F4ddlmoyHLacbjI9AFiSmoDbzHsy0wRqDu5yHGUGA#rd">DNS 解析器性能比较：Google、CloudFlare、Quad9</a>
. <a href="https://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&mid=2652567452&idx=1&sn=651833862d78ec5b3d96e660b2159ba4&chksm=8464dfd6b31356c0f9230750a409ad017b166873be46642fc6e31da558e7792b4b1258dce3f6&mpshare=1&scene=1&srcid=0410S12roKopOseS1m1XbzyW&pass_ticket=ffHA2AbUubeZmNO0YwV710%2F%2F4ddlmoyHLacbjI9AFiSmoDbzHsy0wRqDu5yHGUGA#rd">直白介绍卷积神经网络（CNN）</a>

<a href="https://www.youtube.com/watch?v=NIWwJbo-9_8">Python Tutorial: Using Try/Except Blocks for Error Handling</a>

<a href="https://www.datacamp.com/courses/intro-to-python-for-data-science">intro-to-python-for-data-science</a>

<a href="https://www.datacamp.com/onboarding">datacamp onboarding</a>

<a href="https://www.datacamp.com/tracks/data-scientist-with-python">data-scientist-with-python</a>

<a href="https://www.datacamp.com/courses/building-chatbots-in-python">building-chatbots-in-python</a>

<a href="Data Structures in Python.html"><u class="yellowword">&diams;Data Structures in Python</u></a>

<a href="https://www.r-bloggers.com/r-vs-python-a-one-on-one-comparison/">R vs Python – a One-on-One Comparison</a>

<a href="https://www.quora.com/What-is-the-difference-between-Python-and-R-language">What is the difference between Python and R language?</a>

<a href="http://opentechschool.github.io/python-data-intro/">Introduction to Data Processing with Python</a>

<a href="https://www.codementor.io/kraftycoder/classes-and-methods-in-python-l54t6q0th?utm_swu=7179">Classes and Methods In Python</a>

<a href="https://towardsdatascience.com/data-science-for-startups-r-python-2ca2cd149c5c"><span class="redb">Data Science for Startups: R -> Python</span></a>

<a href="https://towardsdatascience.com/a-complete-machine-learning-walk-through-in-python-part-one-c62152f39420">A Complete Machine Learning Project Walk-Through in Python: Part One</a>

<a href="https://www.youtube.com/watch?v=aYpNfthkPpE">Top 10 Python Programming Tricks</a>
<a href="https://docs.python.org/3.3/library/turtle.html"><span class="yellowb">turtle graphic</span></a>

<a href="https://marcobonzanini.com/2015/02/25/fuzzy-string-matching-in-python/"><span class="blueb">Fuzzy String Matching in Python</span></a>

<a href="http://www.codeceo.com/article/python-10-tips.html"><span class="redb">python 10 tips</span></a>

<a href="Python 3 入门.html"><u class="yellowword">&diams;Python 3 入门</u></a>

<a href="Setting Up Sublime Text 3 for Python Development.html"><u class="yellowsha">&diams;Setting Up Sublime Text 3 for Python Development</u></a>

<a href="https://www.youtube.com/watch?v=lOIJIk_maO4"><span class="blackinsha">Convert PY to EXE</span></a>

<a href="https://realpython.com/python-speech-recognition/">python speech recognition</a>

<a href="https://pypi.org/project/SpeechRecognition/">Speech Recognition</a>

<a href="https://realpython.com/face-recognition-with-python/">Python face recognition </a>

<a href="..\..\MyDocs\Python Documents\python exercise\python gradebook exercise.TXT">python gradebook exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python battleship exercise.TXT">python battleship exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python Bitwise operations exercise.TXT">python Bitwise operations exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python dictionary exercise.TXT">python dictionary exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python exercise.TXT">python exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python iterations exercise.txt">python iterations exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python list comprehension exercise.TXT">python list comprehension exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python list exercise.txt">python list exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python List of list exercise.TXT">python List of list exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python looping exercise.txt">python looping exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python practise exercise.txt">python practise exercise</a>
<br><a href="..\..\MyDocs\Python Documents\python exercise\python stat exercise.txt">python stat exercise</a>

<a href="https://medium.com/fintechexplained/everything-about-python-from-beginner-to-advance-level-227d52ef32d2">Everything About Python — Beginner To Advanced</a>

<a href="https://medium.com/fintechexplained/5-python-exercises-35b36f1ca742">5 Python Exercises</a>

<a href="https://medium.com/fintechexplained/how-to-implement-future-proof-applications-2a2c6a2a2313">How To Build Future Proof Applications? Programming Python Using Design Patterns</a>

<br><a href="..\..\MyDocs\Python Documents\python exercise\Topic Modeling.html">Topic Modeling</a>

<br>
==========

<h2>great marketing</h2>
building a robot that keeps your plants alive based on:
soil moisture measurements
fixed schedule
vote

not just a plant-watering robot, it's a global social experiment

https://github.com/tylerjaywood/pleasetakecareofmyplant

Python is just perfect for glueing together a bunch of existing functionality and libraries to make something new and creative.

It has great marketing: there's a website for the project and the social component built into it is simply a genius source of (free) attention.

So, if you're thinking of side projects to work on with the intent of building up a portfolio you can use in your job applications, following this example wouldn't be a bad idea at all.

What I want to say here is this:
You don't have to write another ORM or implement an AVL tree from scratch to show off your Python skills (although it's great if you can)
a playful side project can help you stand out just as much or more.

==========
<h2>Automating My Projects With Python</h2>
<a href="https://www.youtube.com/watch?v=7Y8Ppin12r4">Automating My Projects With Python</a>

<h2>Classes and Objects Tutorial</h2>
<a href="Classes and Objects Tutorial.html" class="bordwhite2 borRad10 red goldbs">Classes and Objects Tutorial</a>

<h2>Python data types:</h2>

int, or integer: a number without a fractional part.

float, or floating point: a number that has both an integer and fractional part, separated by a point. 

factor, with the value 1.10, is an example of a float.

str, or string: a type to represent text.
You can use single or double quotes to build a string.

bool, or boolean: a type to represent logical values. Can only be True or False (the capitalization is important!).

type() function
To determine the type of a, simply execute:
type(a)

Using the + operator to paste together two strings.

print("I started with $" + savings + " and now have $" + result + ". Awesome!")
This will not work, though, as you cannot simply sum strings and floats.

To fix the error, you'll need to explicitly convert the types of your variables. More specifically, you'll need str(), to convert a value into a string. str(savings), for example, will convert the float savings to a string.

Similar functions such as int(), float() and bool() will help you convert Python values into any type.

Using the + operator to paste together two strings.

print("I started with $" + savings + " and now have $" + result + ". Awesome!")
This will not work, though, as you cannot simply sum strings and floats.

To fix the error, you'll need to explicitly convert the types of your variables. More specifically, you'll need str(), to convert a value into a string. str(savings), for example, will convert the float savings to a string.

Similar functions such as int(), float() and bool() will help you convert Python values into any type.

Manipulating lists
.append()	 method
.extend()	 method on the list
.index()	method
.pop()	method

aList = [123, 'xyz', 'zara', 'abc'];
aList.append( 2009 );
print("Updated List : ", aList)

# Create a list containing the names: baby_names
baby_names = ['Ximena', 'Aliza', 'Ayden', 'Calvin']

# Extend baby_names with 'Rowen' and 'Sandeep'
baby_names.extend(['Rowen', 'Sandeep'])

# Print(baby_names)
print(baby_names)

# Find the position of 'Aliza': position
position = baby_names.index('Aliza')

# Remove 'Aliza' from baby_names
baby_names.pop(position)

# Print(baby_names)
print(baby_names)

Looping over lists
for loop
sorted()

The sorted() function returns a new list and does not affect the list you passed into the function.

A a list of this form:

['2011', 'FEMALE', 'HISPANIC', 'GERALDINE', '13', '75']

loop over this list of lists and append the names of each baby to a new list called baby_names.

baby_names =[]

for x in range(0, 3):
    print("We're on time %d" % (x))

fruits = ['banana', 'apple',  'mango']
for fruit in fruits:
   print('Current fruit :', fruit)

<a href="https://stackoverflow.com/questions/25050311/extract-first-item-of-each-sublist-in-python">extract-first-item-of-each-sublist-in-python</a>

# Create the empty list: baby_names
baby_names =[]

# Loop over records 
for baby in records:
    # Add the name to the list
    baby_names.append(baby[3])
    
# Sort the names in alphabetical order
for name in sorted(baby_names):
    # Print(each name)
    print(name)

Tuples are fixed size in nature whereas lists are dynamic.
In other words, a tuple is immutable whereas a list is mutable.

Using and unpacking tuples

Tuples are made of several items just like a list, but they cannot be modified in any way. 
It is very common for tuples to be used to represent data from a database. 

If you have a tuple like ('chocolate chip cookies', 15) and you want to access each part of the data, 

you can use an index just like a list. 
However, you can also "unpack" the tuple into multiple variables such as 
type, count = ('chocolate chip cookies', 15) 
that will set type to 'chocolate chip cookies' and count to 15.

Often you'll want to pair up multiple array data types. The zip() function does just that. It will return a list of tuples containing one element from each list passed into zip().

When looping over a list, you can also track your position in the list by using the enumerate() function. The function returns the index of the list item you are currently on in the list and the list item itself.

You'll practice using the enumerate() and zip() functions in this exercise, in which your job is to pair up the most common boy and girl names. Two lists - girl_names and boy_names - have been pre-loaded into your workspace.

Instructions
Use the zip() function to pair up girl_names and boy_names into a variable called pairs.
Use a for loop to loop through pairs, using enumerate() to keep track of your position. Unpack pairs into the variables idx and pair.
Inside the for loop:
Unpack pair into the variables girl_name and boy_name.
Print(the rank, girl name, and boy name, in that order. The rank is contained )in idx.

==========================
get webpage contents with python

<a href="https://www.youtube.com/watch?v=LosIGgon_KM" class="red bordyellow1 white2bs">Urllib - GET Requests</a>

import urllib2
response = urllib2.urlopen('http://python.org/')
html = response.read()

import urllib2
resp = urllib2.urlopen('http://hiscore.runescape.com/index_lite.ws?player=zezima')
page = resp.read()

using Python 3.1
urllib.request.urlopen('http://www.python.org/')

<a href="https://campus.datacamp.com/courses/data-types-for-data-science/fundamental-data-types?ex=6">data-types-for-data-science</a>

==========

<h2>import</h2>

import sys
print(sys.path)

import sys
for pth in sys.path:
    print(pth)

import os
os.getcwd()

os.chdir("/tmp/")

os.getcwd()

在 Python 中，import、import as 與 from import 可以出現在程式中可出現的任何位置

import xmath
print((xmath.max(10, 5)))
print((xmath.sum(1, 2, 3, 4, 5)))
 
import xmath as math # 為 xmath 模組取別名為 math
print((math.e))
 
from xmath import min  # 將 min 複製至目前模組，不建議 from modu import *，易造成名稱衝突
print((min(10, 5)))
==========
</code>

<h2>import os</h2>
<code>
os.system("your command")

print("\n")
import os
os.system("dir c:\\")
==========
</code>

<h2>print(statement without newline or space</h2>)
In Python 3, the print(statement print(without newline or space:)
<code>
print(str, end='')

</code>

<h2>Samples</h2>
<code>
max1 = a if a > b else b

def max(a, b):
    return a if a > b else b

</code>

<h2>def factorial(n):</h2>
<code>
    if n == 0:
        return 1
    else:
        return n * factorial(n-1)

</code>

<h2>import math</h2>
math.factorial(n)

<h2>Python Code Examples</h2>
You can find more Python code examples at the bottom of this page.
<a href="https://www.pythonforbeginners.com/python-on-the-web/using-pywhois/" title="pywhois">Using pywhois</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/magic-8-ball-written-in-python/" title="magic_8_ball">Magic 8-ball</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/commandlinefu-with-python/" title="command_line_fu">CommandLineFu with Python</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/port-scanner-in-python/" title="port_scanner">Port scanner in Python </a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/google-command-line-script/" title="google-command-line-script">Google Command Line Script </a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/date-and-time-script/" title="date_and_time">Date and Time Script</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/bitly-shortener-with-python/" title="bitly_api_python">Bitly Shortener with Python</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/using-python-to-send-email/" title="sending_mails_using_google">Sending Mails using Gmail</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/command-line-speedtest-net-via-tespeed/" title="commandlinespeedtest">Command Line speedtest.net via tespeed</a>
<a href="https://www.pythonforbeginners.com/systems-programming/os-walk-and-fnmatch-in-python/" title="oswalk">Search computer for specific files</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/script-get-the-geo-location-of-an-ip-address/" title="Get the Geo Location of an IP Address">Get the Geo Location of an IP Address</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/script-get-the-username-from-a-prompt/" title="Get the username from a prompts">Get the username from a prompts</a>
<a href="https://www.pythonforbeginners.com/python-on-the-web/twitter-search-using-python/" title="Tweet Search using Python">Tweet Search using Python</a>
<a href="https://www.pythonforbeginners.com/basics/python-datetime-timedelta/" title="Date and Time in Python">Date and Time in Python</a>
<a href="https://www.youtube.com/watch?v=gQP0geNsO4A" class="goldbut red limebs borRad20">Python Turtle Racing!</a>

<a href="https://www.pythonforbeginners.com/code-snippets-source-code/game-rolling-the-dice/" title="Rolling the dice">Python Game : Rolling the dice</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/python-script-monitor-apachenginx-log-file/" title="Monitor Apache / Nginx Log File">Monitor Apache / Nginx Log File</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/python-script-log-checker/" title="Log Checker in Python">Log Checker in Python</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/python-guessing-game-part-2/" title="Python : Guessing Game part 2">Python : Guessing Game part 2</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/python-guessing-game/" title="Guessing Game written in Python">Guessing Game written in Python</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/script-password-generator/" title="Python Password Generator">Python Password Generator</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/python-code-convert-kmh-to-mph/" title="Convert KM/H to MPH">Convert KM/H to MPH</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/regular-expression-re-findall/" title="Get all the links from a website">Get all the links from a website</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/python-code-celsius-and-fahrenheit-converter/" title="Celsius and Fahrenheit Converter">Celsius and Fahrenheit Converter</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/script-average-score/" title="Calculate the average score">Calculate the average score</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/check-your-external-ip-address/" title="check-your-external-ip-address">Check your external IP address</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/game-hangman/" title="Python Hangman Game">Python Hangman Game</a>
<a href="https://www.pythonforbeginners.com/code-snippets-source-code/imdb-crawler/" title="imdb-crawler">Python Command Line IMDB Scraper</a>

<h2>Python code examples</h2>
Here we link to other sites that provides Python code examples.
<a href="http://code.activestate.com/recipes/langs/python/" title="activestate_python_code">ActiveState Code - Popular Python recipes</a>
<a href="http://snipplr.com/all/language/python" title="snipplr">Snipplr.com</a>
<a href="http://nullege.com/" title="nullege">Nullege - Search engine for Python source code</a>
<a href="https://snipt.net/public/tag/python/" title="snipt.net">Snipt.net</a>

<h2>Python Programming Examples</h2>

<strong><a href="https://www.geeksforgeeks.org/category/python/">Recent Articles on Python !</a></strong><br />
<strong><a href="https://www.geeksforgeeks.org/python-multiple-choice-questions/">Python Output &amp; Multiple Choice Questions</a></strong><br />
&nbsp;<br />
<strong>Topics :</strong></p>
<strong>Basic Programs: </strong></p>
<a href="https://www.geeksforgeeks.org/python-program-to-add-two-numbers/">add two numbers</a>
<a href="https://www.geeksforgeeks.org/python-program-for-factorial-of-a-number/">factorial of a number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-simple-interest/">simple interest</a>
<a href="https://www.geeksforgeeks.org/python-program-for-compound-interest/">compound interest</a>
<a href="https://www.geeksforgeeks.org/python-program-to-check-armstrong-number/">check Armstrong Number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-program-to-find-area-of-a-circle/">Program to find area of a circle</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-all-prime-numbers-in-an-interval/">print(all Prime )numbers in an Interval</a>
<a href="https://www.geeksforgeeks.org/python-program-to-check-whether-a-number-is-prime-or-not/">check whether a number is Prime or not</a>
<a href="https://www.geeksforgeeks.org/python-program-for-n-th-fibonacci-number/">n-th Fibonacci number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-program-for-fibonacci-numbers-2/">Fibonacci numbers</a>
<a href="https://www.geeksforgeeks.org/python-program-for-how-to-check-if-a-given-number-is-fibonacci-number/">How to check if a given number is Fibonacci number?</a>
<a href="https://www.geeksforgeeks.org/python-program-for-nth-multiple-of-a-number-in-fibonacci-series/">n\’th multiple of a number in Fibonacci Series</a>
<a href="https://www.geeksforgeeks.org/program-print-ascii-value-character/">Program to print(ASCII Value of a character</a>)
<a href="https://www.geeksforgeeks.org/python-program-for-sum-of-squares-of-first-n-natural-numbers/">Sum of squares of first n natural numbers</a>
<a href="https://www.geeksforgeeks.org/python-program-for-program-for-cube-sum-of-first-n-natural-numbers/">cube sum of first n natural numbers</a>

<strong>Array Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-program-to-find-sum-of-array/">find sum of array</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-largest-element-in-an-array/">find largest element in an array</a>
<a href="https://www.geeksforgeeks.org/python-program-for-program-for-array-rotation-2/">array rotation</a>
<a href="https://www.geeksforgeeks.org/python-program-for-reversal-algorithm-for-array-rotation/">Reversal algorithm for array rotation</a>
<a href="https://www.geeksforgeeks.org/python-program-for-split-the-array-and-add-the-first-part-to-the-end/">Split the array and add the first part to the end</a>
<a href="https://www.geeksforgeeks.org/python-program-for-find-reminder-of-array-multiplication-divided-by-n/">Find reminder of array multiplication divided by n</a>
<a href="https://www.geeksforgeeks.org/reconstruct-the-array-by-replacing-arri-with-arri-11-m/">Reconstruct the array by replacing arr[i] with (arr[i-1]+1) % M</a>
<a href="https://www.geeksforgeeks.org/python-program-to-check-if-given-array-is-monotonic/">check if given array is Monotonic</a>

<strong>List Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-program-to-interchange-first-and-last-elements-in-a-list/">interchange first and last elements in a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-swap-two-elements-in-a-list/">swap two elements in a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-remove-nth-occurrence-of-the-given-word/">remove Nth occurrence of the given word</a>
<a href="https://www.geeksforgeeks.org/python-ways-to-find-length-of-list/">Python | Ways to find length of list</a>
<a href="https://www.geeksforgeeks.org/python-ways-to-check-if-element-exists-in-list/">Python | Ways to check if element exists in list</a>
<a href="https://www.geeksforgeeks.org/different-ways-to-clear-a-list-in-python/">Different ways to clear a list in Python</a>
<a href="https://www.geeksforgeeks.org/python-reversing-list/">Python | Reversing a List</a>
<a href="https://www.geeksforgeeks.org/python-cloning-copying-list/">Python | Cloning or Copying a list</a>
<a href="https://www.geeksforgeeks.org/python-count-occurrences-element-list/">Python | Count occurrences of an element in a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-sum-of-elements-in-list/">find sum of elements in list</a>
<a href="https://www.geeksforgeeks.org/python-multiply-numbers-list-3-different-ways/">Python | Multiply all numbers in the list </a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-smallest-number-in-a-list/">find smallest number in a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-largest-number-in-a-list/">find largest number in a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-second-largest-number-in-a-list/">find second largest number in a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-n-largest-elements-from-a-list/">find N largest elements from a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-even-numbers-in-a-list/">print(even numbers in a list)</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-odd-numbers-in-a-list/">print(odd numbers in a List</a>)
<a href="https://www.geeksforgeeks.org/python-program-to-print-all-even-numbers-in-a-range/">print(all even numbers )in a range</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-all-odd-numbers-in-a-range/">print(all odd numbers in )a range</a>
<a href="https://www.geeksforgeeks.org/python-program-to-count-even-and-odd-numbers-in-a-list/">count Even and Odd numbers in a List</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-positive-numbers-in-a-list/">print(positive numbers in )a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-negative-numbers-in-a-list/">print(negative numbers in )a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-all-positive-numbers-in-a-range/">print(all positive )numbers in a range</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-all-negative-numbers-in-a-range/">print(all negative )numbers in a range</a>
<a href="https://www.geeksforgeeks.org/python-program-to-count-positive-and-negative-numbers-in-a-list/">count positive and negative numbers in a list</a>
<a href="https://www.geeksforgeeks.org/remove-multiple-elements-from-a-list-in-python/">Remove multiple elements from a list in Python</a>
<a href="https://www.geeksforgeeks.org/python-remove-empty-tuples-list/">Python | Remove empty tuples from a list</a>
<a href="https://www.geeksforgeeks.org/python-program-print-duplicates-list-integers/">Python | Program to print(duplicates from a list of integers</a>)
<a href="https://www.geeksforgeeks.org/python-program-to-find-cumulative-sum-of-a-list/">find Cumulative sum of a list</a>
<a href="https://www.geeksforgeeks.org/break-list-chunks-size-n-python/">Break a list into chunks of size N in Python</a>
<a href="https://www.geeksforgeeks.org/python-sort-values-first-list-using-second-list/">Python | Sort the values of first list using second list</a>
<a href="https://www.geeksforgeeks.org/tag/python-list-programs/" rel="noopener"><strong>More >></strong></a>

<strong>String Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-program-check-string-palindrome-not/">check if a string is palindrome or not</a>
<a href="https://www.geeksforgeeks.org/reverse-words-given-string-python/">Reverse words in a given String in Python</a>
<a href="https://www.geeksforgeeks.org/ways-to-remove-ith-character-from-string-in-python/">Ways to remove i’th character from string in Python</a>
<a href="https://www.geeksforgeeks.org/python-check-substring-present-given-string/">Python | Check if a Substring is Present in a Given String</a>
<a href="https://www.geeksforgeeks.org/find-length-of-a-string-in-python-4-ways/">Find length of a string in python (4 ways)</a>
<a href="https://www.geeksforgeeks.org/python-program-to-print-even-length-words-in-a-string/">print(even length )words in a string</a>
<a href="https://www.geeksforgeeks.org/python-program-to-accept-the-strings-which-contains-all-vowels/">Python | Program to accept the strings which contains all vowels</a>
<a href="https://www.geeksforgeeks.org/python-count-the-number-of-matching-characters-in-a-pair-of-string/">Python | Count the Number of matching characters in a pair of string</a>
<a href="https://www.geeksforgeeks.org/python-program-count-number-vowels-using-sets-given-string/">count number of vowels using sets in given string</a>
<a href="https://www.geeksforgeeks.org/remove-duplicates-given-string-python/">Remove all duplicates from a given string in Python</a>
<a href="https://www.geeksforgeeks.org/python-program-check-string-contains-special-character/">Python | Program to check if a string contains any special character</a>
<a href="https://www.geeksforgeeks.org/python-program-match-string-random-strings-length/">Generating random strings until a given string is generated</a>
<a href="https://www.geeksforgeeks.org/find-words-greater-given-length-k/">Find words which are greater than given length k</a>
<a href="https://www.geeksforgeeks.org/python-program-for-removing-i-th-character-from-a-string/">removing i-th character from a string</a>
<a href="https://www.geeksforgeeks.org/python-program-split-join-string/">split and join a string</a>
<a href="https://www.geeksforgeeks.org/python-check-if-a-given-string-is-binary-string-or-not/">Python | Check if a given string is binary string or not</a>
<a href="https://www.geeksforgeeks.org/python-find-close-matches-input-string-list/">Python | Find all close matches of input string from a list</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-uncommon-words-from-two-strings/">find uncommon words from two Strings</a>
<a href="https://www.geeksforgeeks.org/python-swap-commas-dots-string/">Python | Swap commas and dots in a String</a>
<a href="https://www.geeksforgeeks.org/python-permutation-given-string-using-inbuilt-function/">Python | Permutation of a given string using inbuilt function</a>
<a href="https://www.geeksforgeeks.org/python-check-url-string/">Python | Check for URL in a String</a>
<a href="https://www.geeksforgeeks.org/execute-string-code-python/">Execute a String of Code in Python</a>
<a href="https://www.geeksforgeeks.org/string-slicing-python-rotate-string/">String slicing in Python to rotate a string</a>
<a href="https://www.geeksforgeeks.org/string-slicing-python-check-string-can-become-empty-recursive-deletion/">String slicing in Python to check if a string can become empty by recursive deletion</a>
<a href="https://www.geeksforgeeks.org/python-counter-find-duplicate-characters-string/">Python Counter| Find all duplicate characters in string</a>
<a href="https://www.geeksforgeeks.org/tag/python-string-programs/" rel="noopener"><strong>More >></strong></a>

<strong>Dictionary Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-sort-python-dictionaries-by-key-or-value/"> Python | Sort Python Dictionaries by Key or Value</a>
<a href="https://www.geeksforgeeks.org/handling-missing-keys-python-dictionaries/"> Handling missing keys in Python dictionaries</a>
<a href="https://www.geeksforgeeks.org/python-dictionary-with-keys-having-multiple-inputs/">Python dictionary with keys having multiple inputs</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-the-sum-of-all-items-in-a-dictionary/">find the sum of all items in a dictionary</a>
<a href="https://www.geeksforgeeks.org/python-ways-to-remove-a-key-from-dictionary/">Python | Ways to remove a key from dictionary</a>
<a href="https://www.geeksforgeeks.org/ways-sort-list-dictionaries-values-python-using-itemgetter/"> Ways to sort list of dictionaries by values in Python – Using itemgetter</a>
<a href="https://www.geeksforgeeks.org/ways-sort-list-dictionaries-values-python-using-lambda-function/">Ways to sort list of dictionaries by values in Python – Using lambda function</a>
<a href="https://www.geeksforgeeks.org/python-merging-two-dictionaries/">Python | Merging two Dictionaries</a>
<a href="https://www.geeksforgeeks.org/program-create-grade-calculator-in-python/">Program to create grade calculator in Python</a>
<a href="https://www.geeksforgeeks.org/using-ordereddict-python-check-order-characters-string/">Python | Check order of character in string using OrderedDict( )</a>
<a href="https://www.geeksforgeeks.org/python-dictionary-intersection-find-common-elements-three-sorted-arrays/">Python | Find common elements in three sorted arrays by dictionary intersection</a>
<a href="https://www.geeksforgeeks.org/dictionary-counter-python-find-winner-election/">Dictionary and counter in Python to find winner of election</a>
<a href="https://www.geeksforgeeks.org/python-counter-find-duplicate-characters-string/">Find all duplicate characters in string</a>
<a href="https://www.geeksforgeeks.org/print-anagrams-together-python-using-list-dictionary/">Print(anagrams together )in Python using List and Dictionary</a>
<a href="https://www.geeksforgeeks.org/kth-non-repeating-character-python-using-list-comprehension-ordereddict/">K’th Non-repeating Character in Python using List Comprehension and OrderedDict</a>
<a href="https://www.geeksforgeeks.org/python-dictionary-check-binary-representations-two-numbers-anagram/">Check if binary representations of two numbers are anagram</a>
<a href="https://www.geeksforgeeks.org/python-counter-find-size-largest-subset-anagram-words/">Python Counter to find the size of largest subset of anagram words</a>
<a href="https://www.geeksforgeeks.org/python-remove-duplicates-words-given-sentence/">Python | Remove all duplicates words from a given sentence</a>
<a href="https://www.geeksforgeeks.org/python-dictionary-find-mirror-characters-string/">Python Dictionary to find mirror characters in a string</a>
<a href="https://www.geeksforgeeks.org/counting-the-frequencies-in-a-list-using-dictionary-in-python/"> Counting the frequencies in a list using dictionary in Python</a>
<a href="https://www.geeksforgeeks.org/python-convert-list-tuples-dictionary/">Python | Convert a list of Tuples into Dictionary</a>
<a href="https://www.geeksforgeeks.org/python-counter-dictionary-intersection-example-make-string-using-deletion-rearrangement/">Python counter and dictionary intersection example (Make a string using deletion and rearrangement)</a>
<a href="https://www.geeksforgeeks.org/python-dictionary-set-counter-check-frequencies-can-become/">Python dictionary, set and counter to check if frequencies can become same</a>
<a href="https://www.geeksforgeeks.org/scraping-and-finding-ordered-words-in-a-dictionary-using-python/">Scraping And Finding Ordered Words In A Dictionary using Python</a>
<a href="https://www.geeksforgeeks.org/possible-words-using-given-characters-python/">Possible Words using given characters in Python</a>
<a href="https://www.geeksforgeeks.org/tag/python-dictionary-programs/" rel="noopener"><strong>More >></strong></a>

<strong>Tuple Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-program-to-create-a-list-of-tuples-from-given-list-having-number-and-its-cube-in-each-tuple/">Create a list of tuples from given list having number and its cube in each tuple</a>
<a href="https://www.geeksforgeeks.org/python-program-to-sort-a-list-of-tuples-by-second-item/">Sort a list of tuples by second Item</a>
<a href="https://www.geeksforgeeks.org/tag/python-tuple-programs/" rel="noopener"><strong>More >></strong></a>

<strong>Searching and Sorting Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-program-for-binary-search/">Binary Search (Recursive and Iterative)</a>
<a href="https://www.geeksforgeeks.org/python-program-for-linear-search/">Linear Search</a>
<a href="https://www.geeksforgeeks.org/python-program-for-insertion-sort/">Insertion Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-recursive-insertion-sort/">Recursive Insertion Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-quicksort/">QuickSort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-iterative-quick-sort/">Iterative Quick Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-selection-sort/">Selection Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-bubble-sort/">Bubble Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-merge-sort/">Merge Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-iterative-merge-sort/">Iterative Merge Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-heap-sort/">Heap Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-counting-sort/">Counting Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-shellsort/">ShellSort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-topological-sorting/">Topological Sorting</a>
<a href="https://www.geeksforgeeks.org/python-program-for-radix-sort/">Radix Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-binary-insertion-sort/">Binary Insertion Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-bitonic-sort/">Bitonic Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-comb-sort/">Comb Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-pigeonhole-sort/">Pigeonhole Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-cocktail-sort/">Cocktail Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-gnome-sort/">Gnome Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-odd-even-sort-brick-sort/">Odd-Even Sort / Brick Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-bogosort-or-permutation-sort/">BogoSort or Permutation Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-cycle-sort/">Cycle Sort</a>
<a href="https://www.geeksforgeeks.org/python-program-for-stooge-sort/">Stooge Sort</a>

<strong>Pattern Printing Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/program-print-pattern-g/">Program to print(the pattern ‘G’</a>)
<a href="https://www.geeksforgeeks.org/python-print-inverted-star-pattern/">Python | Print(an Inverted Star Pattern</a>)
<a href="https://www.geeksforgeeks.org/python-3-program-print-double-sided-stair-case-pattern/">Python 3 | Program to print(double sided stair-case pattern</a>)
<a href="https://www.geeksforgeeks.org/print-font-using-python/">Print(with )your own font using Python !!</a>

<strong>Date-Time Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-program-convert-time-12-hour-24-hour-format/">convert time from 12 hour to 24 hour format</a>

<strong>More Python Programs:</strong></p>
<a href="https://www.geeksforgeeks.org/python-program-for-reverse-a-linked-list/">Reverse a linked list</a>
<a href="https://www.geeksforgeeks.org/python-program-for-find-largest-prime-factor-of-a-number/">Find largest prime factor of a number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-efficient-program-to-print-all-prime-factors-of-a-given-number/">Efficient program to print(all )prime factors of a given number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-product-of-unique-prime-factors-of-a-number/">Product of unique prime factors of a number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-find-sum-of-odd-factors-of-a-number/">Find sum of odd factors of a number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-coin-change/">Coin Change</a>
<a href="https://www.geeksforgeeks.org/python-program-for-tower-of-hanoi/">Tower of Hanoi</a>
<a href="https://www.geeksforgeeks.org/python-program-for-sieve-of-eratosthenes/">Sieve of Eratosthenes</a>
<a href="https://www.geeksforgeeks.org/python-check-binary-representation-palindrome/">Check if binary representation is palindrome</a>
<a href="https://www.geeksforgeeks.org/python-program-for-basic-and-extended-euclidean-algorithms/">Basic Euclidean algorithms</a>
<a href="https://www.geeksforgeeks.org/python-program-for-basic-and-extended-euclidean-algorithms-2/">Extended Euclidean algorithms</a>
<a href="https://www.geeksforgeeks.org/python-program-for-number-of-elements-with-odd-factors-in-given-range/">Number of elements with odd factors in given range</a>
<a href="https://www.geeksforgeeks.org/python-program-for-common-divisors-of-two-numbers/">Common Divisors of Two Numbers</a>
<a href="https://www.geeksforgeeks.org/python-program-for-maximum-height-when-coins-are-arranged-in-a-triangle/">Maximum height when coins are arranged in a triangle</a>
<a href="https://www.geeksforgeeks.org/python-program-for-gcd-of-more-than-two-or-array-numbers/">GCD of more than two (or array) numbers</a>
<a href="https://www.geeksforgeeks.org/python-program-for-check-if-count-of-divisors-is-even-or-odd/">Check if count of divisors is even or odd</a>
<a href="https://www.geeksforgeeks.org/python-program-for-find-minimum-sum-of-factors-of-number/">Find minimum sum of factors of number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-difference-between-sums-of-odd-and-even-digits/">Difference between sums of odd and even digits</a>
<a href="https://www.geeksforgeeks.org/python-program-for-program-to-print-matrix-in-z-form/">Program to Print(Matrix )in Z form</a>
<a href="https://www.geeksforgeeks.org/python-program-for-largest-k-digit-number-divisible-by-x/">Largest K digit number divisible by X</a>
<a href="https://www.geeksforgeeks.org/python-program-for-smallest-k-digit-number-divisible-by-x/">Smallest K digit number divisible by X</a>
<a href="https://www.geeksforgeeks.org/python-program-for-print-number-series-without-using-any-loop/">Print(Number )series without using any loop</a>
<a href="https://www.geeksforgeeks.org/python-program-for-number-of-stopping-station-problem/">Number of stopping station problem</a>
<a href="https://www.geeksforgeeks.org/python-program-for-program-to-calculate-area-of-a-tetrahedron/">Program to calculate area of a Tetrahedron</a>
<a href="https://www.geeksforgeeks.org/python-program-for-focal-length-of-a-spherical-mirror/">focal length of a spherical mirror</a>
<a href="https://www.geeksforgeeks.org/python-program-for-find-the-perimeter-of-a-cylinder/">Find the perimeter of a cylinder</a>
<a href="https://www.geeksforgeeks.org/check-if-a-triangle-of-positive-area-is-possible-with-the-given-angles/">Check if a triangle of positive area is possible with the given angles</a>
<a href="https://www.geeksforgeeks.org/python-program-for-number-of-jump-required-of-given-length-to-reach-a-point-of-form-d-0-from-origin-in-2d-plane/">Number of jump required of given length to reach a point of form (d, 0) from origin in 2D plane</a>
<a href="https://www.geeksforgeeks.org/python-program-for-finding-the-vertex-focus-and-directrix-of-a-parabola/">Finding the vertex, focus and directrix of a parabola</a>
<a href="https://www.geeksforgeeks.org/python-program-to-find-the-most-occurring-character-and-its-count/">find the most occurring character and its count</a>
<a href="https://www.geeksforgeeks.org/python-program-for-find-sum-of-even-factors-of-a-number/">Find sum of even factors of a number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-check-if-all-digits-of-a-number-divide-it/">Check if all digits of a number divide it</a>
<a href="https://www.geeksforgeeks.org/python-program-convert-float-decimal-octal-number/">convert float decimal to Octal number</a>
<a href="https://www.geeksforgeeks.org/python-program-to-convert-floating-to-binary/">convert floating to binary</a>
<a href="https://www.geeksforgeeks.org/check-whether-a-number-has-consecutive-0s-in-the-given-base-or-not/">Check whether a number has consecutive 0’s in the given base or not</a>
<a href="https://www.geeksforgeeks.org/python-program-for-number-of-solutions-to-modular-equations/">Number of solutions to Modular Equations</a>
<a href="https://www.geeksforgeeks.org/python-program-for-triangular-matchstick-number/">Triangular Matchstick Number</a>
<a href="https://www.geeksforgeeks.org/python-program-for-legendres-conjecture/">Legendre\’s Conjecture</a>
<a href="https://www.geeksforgeeks.org/python-program-to-check-if-a-string-contains-all-unique-characters/">check if a string contains all unique characters</a>
<a href="https://www.geeksforgeeks.org/python-program-to-copy-odd-lines-of-one-file-to-other/">copy odd lines of one file to other</a>

<h2>some samples</h2>
Please note that these examples are written in Python 2, and may need some adjustment to run under Python 3. 
1 line: Output 
print('Hello, world!')
<hr />
 
2 lines: Input, assignment 
name = raw_input('What is your name?\n')
print('Hi, %s.' % name)
<hr />
 
3 lines: For loop, built-in enumerate function, new style formatting 
friends = ['john', 'pat', 'gary', 'michael']
for i, name in enumerate(friends):
    print(&quot;iteration {iteration} is {name}&quot;.format(iteration=i, )name=name)
<hr />
 
4 lines: Fibonacci, tuple assignment 
parents, babies = (1, 1)
while babies &lt; 100:
    print('This generation has {0} babies'.format(babies))
    parents, babies = (babies, parents + babies)
<hr />
 
5 lines: Functions 
def greet(name):
    print('Hello', name)
greet('Jack')
greet('Jill')
greet('Bob')
<hr />
 
6 lines: Import, regular expressions 
import re
for test_string in ['555-1212', 'ILL-EGAL']:
    if re.match(r'^\d{3}-\d{4}$', test_string):
        print(test_string, 'is a valid US local phone number')
    else:
        print(test_string, 'rejected')
<hr />
 
7 lines: Dictionaries, generator expressions 
prices = {'apple': 0.40, 'banana': 0.50}
my_purchase = {
    'apple': 1,
    'banana': 6}
grocery_bill = sum(prices[fruit] * my_purchase[fruit]
                   for fruit in my_purchase)
print('I owe the grocer $%.2f' % grocery_bill)
<hr />
 
8 lines: Command line arguments, exception handling 
# This program adds up integers in the command line
import sys
try:
    total = sum(int(arg) for arg in sys.argv[1:])
    print('sum =', total)
except ValueError:
    print('Please supply integer arguments')
<hr />
 
9 lines: Opening files 
# indent your Python code to put into an email
import glob
# glob supports Unix style pathname extensions
python_files = glob.glob('*.py')
for file_name in sorted(python_files):
    print('    ------' + file_name)

    with open(file_name) as f:
        for line in f:
            print('    ' + line.rstrip())
    print
<hr />
 
10 lines: Time, conditionals, from..import, for..else 
from time import localtime

activities = {8: 'Sleeping',
              9: 'Commuting',
              17: 'Working',
              18: 'Commuting',
              20: 'Eating',
              22: 'Resting' }

time_now = localtime()
hour = time_now.tm_hour

for activity_time in sorted(activities.keys()):
    if hour &lt; activity_time:
        print(activities[activity_time])
        break
else:
    print('Unknown, AFK or sleeping!')
<hr />
 
11 lines: Triple-quoted strings, while loop 
REFRAIN = '''
%d bottles of beer on the wall,
%d bottles of beer,
take one down, pass it around,
%d bottles of beer on the wall!
'''
bottles_of_beer = 99
while bottles_of_beer &gt; 1:
    print(REFRAIN % (bottles_of_beer, bottles_of_beer,)
        bottles_of_beer - 1)
    bottles_of_beer -= 1
<hr />
 
12 lines: Classes 
class BankAccount(object):
    def __init__(self, initial_balance=0):
        self.balance = initial_balance
    def deposit(self, amount):
        self.balance += amount
    def withdraw(self, amount):
        self.balance -= amount
    def overdrawn(self):
        return self.balance &lt; 0
my_account = BankAccount(15)
my_account.withdraw(5)
print(my_account.balance)
<hr />
 
13 lines: Unit testing with unittest 
import unittest
def median(pool):
    copy = sorted(pool)
    size = len(copy)
    if size % 2 == 1:
        return copy[(size - 1) / 2]
    else:
        return (copy[size/2 - 1] + copy[size/2]) / 2
class TestMedian(unittest.TestCase):
    def testMedian(self):
        self.failUnlessEqual(median([2, 9, 9, 7, 9, 2, 4, 5, 8]), 7)
if __name__ == '__main__':
    unittest.main()
<hr />
 
14 lines: Doctest-based testing 
def median(pool):
    '''Statistical median to demonstrate doctest.
    &gt;&gt;&gt; median([2, 9, 9, 7, 9, 2, 4, 5, 8])
    7
    '''
    copy = sorted(pool)
    size = len(copy)
    if size % 2 == 1:
        return copy[(size - 1) / 2]
    else:
        return (copy[size/2 - 1] + copy[size/2]) / 2
if __name__ == '__main__':
    import doctest
    doctest.testmod()
<hr />
 
15 lines: itertools 
from itertools import groupby
lines = '''
This is the
first paragraph.

This is the second.
'''.splitlines()
# Use itertools.groupby and bool to return groups of
# consecutive lines that either have content or don't.
for has_chars, frags in groupby(lines, bool):
    if has_chars:
        print(' '.join(frags))
# PRINTS:
# This is the first paragraph.
# This is the second.
<hr />
 
16 lines: csv module, tuple unpacking, cmp() built-in 
import csv

# write stocks data as comma-separated values
writer = csv.writer(open('stocks.csv', 'wb', buffering=0))
writer.writerows([
    ('GOOG', 'Google, Inc.', 505.24, 0.47, 0.09),
    ('YHOO', 'Yahoo! Inc.', 27.38, 0.33, 1.22),
    ('CNET', 'CNET Networks, Inc.', 8.62, -0.13, -1.49)
])

# read stocks data, print(status messages)
stocks = csv.reader(open('stocks.csv', 'rb'))
status_labels = {-1: 'down', 0: 'unchanged', 1: 'up'}
for ticker, name, price, change, pct in stocks:
    status = status_labels[cmp(float(change), 0.0)]
    print('%s is %s (%s%%)' % (name, status, pct))
<hr />
 
18 lines: 8-Queens Problem (recursion) 
BOARD_SIZE = 8

def under_attack(col, queens):
    left = right = col

    for r, c in reversed(queens):
        left, right = left - 1, right + 1

        if c in (left, col, right):
            return True
    return False

def solve(n):
    if n == 0:
        return [[]]

    smaller_solutions = solve(n - 1)

    return [solution+[(n,i+1)]
        for i in xrange(BOARD_SIZE)
            for solution in smaller_solutions
                if not under_attack(i+1, solution)]
for answer in solve(BOARD_SIZE):
    print(answer)
<hr />
 
20 lines: Prime numbers sieve w/fancy generators 
import itertools

def iter_primes():
     # an iterator of all numbers between 2 and +infinity
     numbers = itertools.count(2)

     # generate primes forever
     while True:
         # get the first number from the iterator (always a prime)
         prime = numbers.next()
         yield prime

         # this code iteratively builds up a chain of
         # filters...slightly tricky, but ponder it a bit
         numbers = itertools.ifilter(prime.__rmod__, numbers)

for p in iter_primes():
    if p &gt; 1000:
        break
    print(p)
<hr />
 
21 lines: XML/HTML parsing (using Python 2.5 or third-party library) 
dinner_recipe = '''&lt;html&gt;&lt;body&gt;&lt;table&gt;
&lt;tr&gt;&lt;th&gt;amt&lt;/th&gt;&lt;th&gt;unit&lt;/th&gt;&lt;th&gt;item&lt;/th&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;24&lt;/td&gt;&lt;td&gt;slices&lt;/td&gt;&lt;td&gt;baguette&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;2+&lt;/td&gt;&lt;td&gt;tbsp&lt;/td&gt;&lt;td&gt;olive oil&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;cup&lt;/td&gt;&lt;td&gt;tomatoes&lt;/td&gt;&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;jar&lt;/td&gt;&lt;td&gt;pesto&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;'''

# In Python 2.5 or from http://effbot.org/zone/element-index.htm
import xml.etree.ElementTree as etree
tree = etree.fromstring(dinner_recipe)

# For invalid HTML use http://effbot.org/zone/element-soup.htm
# import ElementSoup, StringIO
# tree = ElementSoup.parse(StringIO.StringIO(dinner_recipe))

pantry = set(['olive oil', 'pesto'])
for ingredient in tree.getiterator('tr'):
    amt, unit, item = ingredient
    if item.tag == &quot;td&quot; and item.text not in pantry:
        print(&quot;%s: %s %s&quot; % (item.text, amt.text, unit.text))
<hr />
 
28 lines: 8-Queens Problem (define your own exceptions) 
BOARD_SIZE = 8

class BailOut(Exception):
    pass

def validate(queens):
    left = right = col = queens[-1]
    for r in reversed(queens[:-1]):
        left, right = left-1, right+1
        if r in (left, col, right):
            raise BailOut

def add_queen(queens):
    for i in range(BOARD_SIZE):
        test_queens = queens + [i]
        try:
            validate(test_queens)
            if len(test_queens) == BOARD_SIZE:
                return test_queens
            else:
                return add_queen(test_queens)
        except BailOut:
            pass
    raise BailOut
queens = add_queen([])
print(queens)
print(&quot;\n&quot;.join(&quot;. &quot;*q + &quot;Q &quot; + &quot;. &quot;*()BOARD_SIZE-q-1) for q in queens)
<hr />
 
33 lines: &quot;Guess the Number&quot; Game (edited) from <a class="http" href="http://inventwithpython.com">http://inventwithpython.com</a> 
import random

guesses_made = 0

name = raw_input('Hello! What is your name?\n')

number = random.randint(1, 20)
print('Well, {0}, I am thinking of a number between 1 and 20.'.format(name))

while guesses_made &lt; 6:

    guess = int(raw_input('Take a guess: '))

    guesses_made += 1

    if guess &lt; number:
        print('Your guess is too low.')

    if guess &gt; number:
        print('Your guess is too high.')

    if guess == number:
        break

if guess == number:
    print('Good job, {0}! You guessed my number in {1} guesses!'.format(name, )guesses_made)
else:
    print('Nope. The number I was thinking of was {0}'.format(number))

<h2>Functions in Python Math Module</h2>

<table border="1">
	<caption>List of Functions in Python Math Module</caption>
	<tbody>
		<tr>
			<th scope="col">Function</th>
			<th scope="col">Description</th>
		</tr>
		<tr>
			<td>ceil(x)</td>
			<td>Returns the smallest integer greater than or equal to x.</td>
		</tr>
		<tr>
			<td>copysign(x, y)</td>
			<td>Returns x with the sign of y</td>
		</tr>
		<tr>
			<td>fabs(x)</td>
			<td>Returns the absolute value of x</td>
		</tr>
		<tr>
			<td>factorial(x)</td>
			<td>Returns the factorial of x</td>
		</tr>
		<tr>
			<td>floor(x)</td>
			<td>Returns the largest integer less than or equal to x</td>
		</tr>
		<tr>
			<td>fmod(x, y)</td>
			<td>Returns the remainder when x is divided by y</td>
		</tr>
		<tr>
			<td>frexp(x)</td>
			<td>Returns the mantissa and exponent of x as the pair (m, e)</td>
		</tr>
		<tr>
			<td>fsum(iterable)</td>
			<td>Returns an accurate floating point sum of values in the iterable</td>
		</tr>
		<tr>
			<td>isfinite(x)</td>
			<td>Returns True if x is neither an infinity nor a NaN (Not a Number)</td>
		</tr>
		<tr>
			<td>isinf(x)</td>
			<td>Returns True if x is a positive or negative infinity</td>
		</tr>
		<tr>
			<td>isnan(x)</td>
			<td>Returns True if x is a NaN</td>
		</tr>
		<tr>
			<td>ldexp(x, i)</td>
			<td>Returns x * (2**i)</td>
		</tr>
		<tr>
			<td>modf(x)</td>
			<td>Returns the fractional and integer parts of x</td>
		</tr>
		<tr>
			<td>trunc(x)</td>
			<td>Returns the truncated integer value of x</td>
		</tr>
		<tr>
			<td>exp(x)</td>
			<td>Returns e**x</td>
		</tr>
		<tr>
			<td>expm1(x)</td>
			<td>Returns e**x - 1</td>
		</tr>
		<tr>
			<td>log(x[, base])</td>
			<td>Returns the logarithm of x to the base (defaults to e)</td>
		</tr>
		<tr>
			<td>log1p(x)</td>
			<td>Returns the natural logarithm of 1+x</td>
		</tr>
		<tr>
			<td>log2(x)</td>
			<td>Returns the base-2 logarithm of x</td>
		</tr>
		<tr>
			<td>log10(x)</td>
			<td>Returns the base-10 logarithm of x</td>
		</tr>
		<tr>
			<td>pow(x, y)</td>
			<td>Returns x raised to the power y</td>
		</tr>
		<tr>
			<td>sqrt(x)</td>
			<td>Returns the square root of x</td>
		</tr>
		<tr>
			<td>acos(x)</td>
			<td>Returns the arc cosine of x</td>
		</tr>
		<tr>
			<td>asin(x)</td>
			<td>Returns the arc sine of x</td>
		</tr>
		<tr>
			<td>atan(x)</td>
			<td>Returns the arc tangent of x</td>
		</tr>
		<tr>
			<td>atan2(y, x)</td>
			<td>Returns atan(y / x)</td>
		</tr>
		<tr>
			<td>cos(x)</td>
			<td>Returns the cosine of x</td>
		</tr>
		<tr>
			<td>hypot(x, y)</td>
			<td>Returns the Euclidean norm, sqrt(x*x + y*y)</td>
		</tr>
		<tr>
			<td>sin(x)</td>
			<td>Returns the sine of x</td>
		</tr>
		<tr>
			<td>tan(x)</td>
			<td>Returns the tangent of x</td>
		</tr>
		<tr>
			<td>degrees(x)</td>
			<td>Converts angle x from radians to degrees</td>
		</tr>
		<tr>
			<td>radians(x)</td>
			<td>Converts angle x from degrees to radians</td>
		</tr>
		<tr>
			<td>acosh(x)</td>
			<td>Returns the inverse hyperbolic cosine of x</td>
		</tr>
		<tr>
			<td>asinh(x)</td>
			<td>Returns the inverse hyperbolic sine of x</td>
		</tr>
		<tr>
			<td>atanh(x)</td>
			<td>Returns the inverse hyperbolic tangent of x</td>
		</tr>
		<tr>
			<td>cosh(x)</td>
			<td>Returns the hyperbolic cosine of x</td>
		</tr>
		<tr>
			<td>sinh(x)</td>
			<td>Returns the hyperbolic cosine of x</td>
		</tr>
		<tr>
			<td>tanh(x)</td>
			<td>Returns the hyperbolic tangent of x</td>
		</tr>
		<tr>
			<td>erf(x)</td>
			<td>Returns the error function at x</td>
		</tr>
		<tr>
			<td>erfc(x)</td>
			<td>Returns the complementary error function at x</td>
		</tr>
		<tr>
			<td>gamma(x)</td>
			<td>Returns the Gamma function at x</td>
		</tr>
		<tr>
			<td>lgamma(x)</td>
			<td>Returns the natural logarithm of the absolute value of the Gamma function at x</td>
		</tr>
		<tr>
			<td>pi</td>
			<td>Mathematical constant, the ratio of circumference of a circle to it&#39;s diameter (3.14159...)</td>
		</tr>
		<tr>
			<td>e</td>
			<td>mathematical constant e (2.71828...)</td>
		</tr>
	</tbody>
</table>

<h2>def factorial(n):</h2>
<code>
    num = 1
    while n >= 1:

        num = num * n
        n = n - 1
    return num

</code>

<h2>from math import factorial</h2>
<code>
print(factorial(1000))

</code>

<h2>def factorial(x):</h2>
<code>
    result = 1
    for i in xrange(2, x + 1):

        result *= i
    return result

print(factorial(1000))

</code>

<h2>def factorial(n):</h2>
<code>
    if n < 2:
        return 1
    return n * factorial(n - 1)

</code>

<h2>def factorial(n):</h2>
<code>

    base = 1
    for i in range(n,0,-1):
        base = base * i
    print(base)

</code>

<h2>divmod(x, y) </h2>
<code>
returns a tuple (x / y, x % y)

</code>

<h2>The method list()</h2>
takes sequence types and converts them to lists. 
This is used to convert a given tuple into list.
Note − Tuple are very similar to lists with only difference that element values of a tuple can not be changed and 
tuple elements are put between parentheses instead of square bracket.

<h2>itertools.product()</h2>

This tool computes the cartesian product of input iterables. 
It is equivalent to nested for-loops. 
For example, product(A, B) returns the same as ((x,y) for x in A for y in B).

Sample Code

from itertools import product
print(list(product([1,2,3],repeat = 2)))

[(1, 1), (1, 2), (1, 3), (2, 1), (2, 2), (2, 3), (3, 1), (3, 2), (3, 3)]

print(list(product([1,2,3],[3,4])))
[(1, 3), (1, 4), (2, 3), (2, 4), (3, 3), (3, 4)]

A = [[1,2,3],[3,4,5]]
print(list(product(*A)))
[(1, 3), (1, 4), (1, 5), (2, 3), (2, 4), (2, 5), (3, 3), (3, 4), (3, 5)]

B = [[1,2,3],[3,4,5],[7,8]]
print(list(product(*B)))
[(1, 3, 7), (1, 3, 8), (1, 4, 7), (1, 4, 8), (1, 5, 7), (1, 5, 8), (2, 3, 7), (2, 3, 8), (2, 4, 7), (2, 4, 8), (2, 5, 7), (2, 5, 8), (3, 3, 7), (3, 3, 8), (3, 4, 7), (3, 4, 8), (3, 5, 7), (3, 5, 8)]

<h2>How to use Loops in Python</h2>

<h4>For Loop</h4>computer_brands = ["Apple", "Asus", "Dell", "Samsung"]
for brands in computer_brands:
  print(brands)

numbers = [1,10,20,30,40,50]
sum = 0
for number in numbers:
  sum = sum + number
  print(sum)

for i in range(1,10):
  print(i)

<h4>Break</h4>
To break out from a loop, you can use the keyword "break". 

for i in range(1,10):
  if i == 3:
    break
  print(i)
# will print 1 nd 2 only

<h4>Continue</h4>
The continue statement is used to tell Python to skip the rest of the statements 
in the current loop block and to continue to the next iteration of the loop.

for i in range(1,10):
  if i == 3:
    continue
  print(i)
# will not print 3 only
<h4>While Loop</h4>
computer_brands = ["Apple", "Asus", "Dell", "Samsung"]
i = 0
while i < len(computer_brands):
  print(computer_brands(i))
  i = i + 1

while True:
  answer = raw_input("Start typing...")
  if answer == "quit":
    break
  print("Your answer was", answer)

counter = 0
while counter <= 100:
  print(counter)
  counter + 2

<h4>Nested Loops</h4>for x in range(1, 11):
  for y in range(1, 11):
    print('%d * %d = %d' % (x, y, x*y))

<h2>random</h2>
import random
a = [1,2,3,4,5,6]
print(a)
random.shuffle(a)
print(a)

items = [1, 2, 3, 4, 5, 6, 7]
random.shuffle(items)
print(items)

<h2>Tkinter</h2>
<a href="https://libraries.io/search?keywords=tkinter&languages=Python">Popular Python tkinter Projects</a> <a href="Tkinter references.html" class="red bordyellow2 borRad10 whitebs">Tkinter references</a>
from Tkinter import *
root = Tk()
w = Label(root, text="Hello Tkinter!")
w.pack()
root.mainloop()
input("\n\nhit any key\n\n")

<h2>Hotel Management Systems</h2>
<a href="://www.youtube.com/watch?v=8ftcZO7iuRU" class="whitebut ">How to Create Hotel Management Systems in Python - Full Tutorial</a>
<a href="://www.youtube.com/watch?v=0rzNAGe-gUs&t=31s" class="whitebut ">Python With Tkinter & Sqlite 3</a>

<h2>Tensorflow 安装</h2>

https://morvanzhou.github.io/tutorials/machine-learning/tensorflow/1-2-install/
Tensorflow 安装

https://medium.com/@lmoroney_40129/installing-tensorflow-with-gpu-on-windows-10-3309fec55a00
Installing TensorFlow with GPU on Windows 10

pip3 install --upgrade https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.12.0-py3-none-any.whl

The script wheel.exe is installed in 'd:\python36-32\Scripts' which is not on PATH.

Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.

import platform
print(platform.python_version())

help('modules')

import tensorflow as tf
hello = tf.constant('Hello, TensorFlow!')
sess = tf.Session()
print(sess.run(hello))

<h2>Python Simple HTTP server</h2>
import SimpleHTTPServer
import SocketServer

PORT = 8000

Handler = SimpleHTTPServer.SimpleHTTPRequestHandler

httpd = SocketServer.TCPServer(("", PORT), Handler)

print("serving at port", PORT)
httpd.serve_forever()

<h2>about pip</h2>
C:\Users\User\Desktop>python -m pip install -U pylint --user
C:\Users\User\AppData\Roaming\Python\Python36\Scripts' which is not on PATH.

<h2>run Python from Sublime Text</h2>
<a href="sublime Notes.html#chapter-32"><span class="redb">use SublimeREPL</span></a>

Tools -> Build System -> (choose) Python then:
<strong>To Run:</strong>
<code>      Tools -&gt; Build
      -or-
      Ctrl + B</code>
<em>This would start your file in the console which should be at the bottom of the editor.</em>

<strong>To Stop:</strong>
<code>       Ctrl + Break or Tools -&gt; Cancel Build</code>

You can find out where your <code>Break</code> key is here:  <a href="http://en.wikipedia.org/wiki/Break_key" rel="noreferrer">http://en.wikipedia.org/wiki/Break_key</a>.    
Note: <code>CTRL + C</code> will <strong>NOT</strong> work.

<strong>What to do when <code>Ctrl + Break</code> does not work:</strong>
Go to: 
<blockquote>  Preferences -> Key Bindings - User</blockquote>

and paste the line below:  
<code>{"keys": ["ctrl+shift+c"], "command": "exec", "args": {"kill": true} } </code>
Now, you can use <code>ctrl+shift+c</code> instead of <code>CTRL+BREAK</code>

But when <kbd>Ctrl</kbd><kbd>B</kbd> <strong>does not work</strong>, Sublime Text probably can't find the Python Interpreter. 
When trying to run your program, see the log and find the reference to Python in path.
<code>[cmd:  [u'python', u'-u', u'C:\\scripts\\test.py']]
[path: ...;C:\Python27 32bit;...]
</code>

The point is that it tries to run python via command line, the cmd looks like:
<code>python -u C:\scripts\test.py</code>

If you can't run python from cmd, Sublime Text can't too.
(Try it yourself in cmd, type python in it and run it, python commandline should appear)

<h4>SOLUTION</h4>You can either change the Sublime Text build formula or the System <code>%PATH%</code>.  

To set your <code>%PATH%</code>:
*<em>You will need to restart your editor to load new <code>%PATH%</code></em>
Run Command Line* and enter this command: <em>*needs to be run as administrator</em>
<code>SETX /M PATH "%PATH%;&lt;python_folder&gt;"</code>
for example: <code>SETX /M PATH "%PATH%;C:\Python27;C:\Python27\Scripts"</code><strong>OR</strong> manually: (preferable)
Add <code>;C:\Python27;C:\Python27\Scripts</code> at the end of the string.

<h2>'calendar' has no attribute 'month'</h2>
AttributeError: module 'calendar' has no attribute 'month'
import calendar
yy = 2018
mm = 11
print(calendar.month(yy, mm))

<a href="https://stackoverflow.com/questions/35769871/python-date-and-time-attributeerror-module-object-has-no-attribute-month">AttributeError: module 'calendar' has no attribute 'month'</a>

The problem is that you used the name calendar.py for your file. 
Use any other name, and you will be able to import the python module calendar.

<h2>Reading and Writing Files</h2>
file_object  = open(“filename”, “mode”)

thisFile = open("thedatafile.txt","r")
Print(thisFile)

file = open(“testfile.txt”,”w”) 
file.write(“Hello World”)  
file.close() 

a number of ways to read a text file in Python, not just one. 
file = open(“testfile.text”, “r”) 
print(file.read() )

print(file.read(5) #read the first five characters)

readline() read a file line by line
print(file.readline(): )
print(file.readline(3): # the third line in the file)

file.readlines() return every line
print(file.readlines() )

for line in file:  # Looping over a file object
print(line,)

add an EOL character to start a new line

file.write(“This is a test”) 
file.write(“To add more lines.”)
file.close()

fh.close() to end things, close the file completely

Opening a text file:

fh = open(“hello.txt”, “r”) 
Reading a text file:  

Fh = open(“hello.txt”, “r”) 
print(fh.read() )
To read a text file one line at a time: 

fh = open(“hello.text”, “r”) 
print(fh.readline() )

To read a list of lines in a text file: 

fh = open(“hello.txt”, “r”) 
print(fh.readlines() )

To write new content or text to a file: 
fh = open(“hello.txt”, “w”) 
 
fh.write(“Put the text you want to add here”) 
fh.write(“and more lines if need be.”) 
 
fh.close() 

write multiple lines to a file at once: 

lines_of_text = [“One line of text here”, “and another line here”, “and yet another here”, “and so on and so forth”] 
fh.writelines(lines_of_text) 
fh.close() 
 
To append a file: 
fh = open(“hello.txt”, “a”) 
fh.write(“We Meet Again World”) 
fh.close 
 
With Statement

with open(“testfile.txt”) as file:  
data = file.read() 
do something with data 
 
with open(“testfile.txt”) as f: 
for line in f: 
print(line, )

the above example didn’t use the “file.close()” method because automatically execution

with open(“hello.txt”, “w”) as f: 
f.write(“Hello World”) 
 
To read a file line by line, output into a list:

with open(“hello.txt”) as f: 
data = f.readlines() 

Splitting Lines in a Text File
with open(“hello.text”, “r”) as f:
data = f.readlines()
 
for line in data:
words = line.split()
print(words)

# use a colon instead of a space to split
line.split(“:”)
======================
Python's list slice syntax can be used without indices for a few fun and useful things:

# You can clear all elements from a list:
>>> lst = [1, 2, 3, 4, 5]
>>> del lst[:]
>>> lst
[]

# You can replace all elements of a list
# without creating a new list object:
>>> a = lst
>>> lst[:] = [7, 8, 9]
>>> lst
[7, 8, 9]
>>> a
[7, 8, 9]
>>> a is lst
True

# You can also create a (shallow) copy of a list:
>>> b = lst[:]
>>> b
[7, 8, 9]
>>> b is lst
False

======================
CPython easter egg
# Here's a fun little CPython easter egg.
# Just run the following in a Python 2.7+ 
# interpreter session:

>>> import antigravity

<h2>unicodeescape codec can't decode bytes…</h2>
Unicode Error ”unicodeescape" codec can't decode bytes…
The problem is with the string
"C:\Users\Eric\Desktop\beeline.txt"
\U starts an eight-character Unicode escape, such as '\U00014321`.

<h2>findfiles</h2>
import fnmatch  # fnmatch — Unix filename pattern matching
import os

images = ['*.', '*.py']
matches = []

for root, dirnames, filenames in os.walk("D:/Users/Lawht/Desktop"):
    for extensions in images:
        for filename in fnmatch.filter(filenames, extensions):
            matches.append(os.path.join(root, filename))
            print(filename)

for root, dirnames, filenames in os.walk("C:/Users/User/Desktop"):
            print(root)
#            print(dirnames)
#            print(filenames)

for root in os.walk("C:/Users/User/Desktop"):
  print(root)

<h2>walk()</h2>
walk() generates the file names in a directory tree

import os
for root, dirs, files in os.walk("."):
   for name in files:
      print(os.path.join(root, name))
   for name in dirs:
      print(os.path.join(root, name))

<h2>add two matrices</h2>
# Program to add two matrices using nested loop
X = [[12,7,3],[4,5,6],[7,8,9]]
Y = [[5,8,1],[6,7,3],[4,5,9]]
result = [[0,0,0],[0,0,0],[0,0,0]]

# iterate through rows
for i in range(len(X)):
 # iterate through columns
 for j in range(len(X[0])):
  result[i][j] = X[i][j] + Y[i][j]

for r in result:
 print(r)

Use Matrix library

use the numpy module, which has support for this.

import numpy as np
a = np.matrix([[1,2,3], [4,5,6], [7,8,9]])
b = np.matrix([[9,8,7], [6,5,4], [3,2,1]])
print(a+b)

<h2>find the most common elements in an iterable:</h2>

>>> import collections
>>> c = collections.Counter('helloworld')

>>> c
Counter({'l': 3, 'o': 2, 'e': 1, 'd': 1, 'h': 1, 'r': 1, 'w': 1})

>>> c.most_common(3)
[('l', 3), ('o', 2), ('e', 1)]

<h2>itertools.permutations() generates permutations</h2>
# for an iterable. Time to brute-force those passwords ;-)

>>> import itertools
>>> for p in itertools.permutations('ABCD'):
...     print(p)

('A', 'B', 'C', 'D')
('A', 'B', 'D', 'C')
('A', 'C', 'B', 'D')
('A', 'C', 'D', 'B')
('A', 'D', 'B', 'C')
('A', 'D', 'C', 'B')
('B', 'A', 'C', 'D')
('B', 'A', 'D', 'C')
('B', 'C', 'A', 'D')
('B', 'C', 'D', 'A')
('B', 'D', 'A', 'C')
('B', 'D', 'C', 'A')
('C', 'A', 'B', 'D')
('C', 'A', 'D', 'B')
('C', 'B', 'A', 'D')
('C', 'B', 'D', 'A')
('C', 'D', 'A', 'B')
('C', 'D', 'B', 'A')
('D', 'A', 'B', 'C')
('D', 'A', 'C', 'B')
('D', 'B', 'A', 'C')
('D', 'B', 'C', 'A')
('D', 'C', 'A', 'B')
('D', 'C', 'B', 'A')

<h2>When To Use __repr__ vs __str__?</h2>
# Emulate what the std lib does:
>>> import datetime
>>> today = datetime.date.today()

# Result of __str__ should be readable:
>>> str(today)
'2017-02-02'

# Result of __repr__ should be unambiguous:
>>> repr(today)
'datetime.date(2017, 2, 2)'

# Python interpreter sessions use 
# __repr__ to inspect objects:
>>> today
datetime.date(2017, 2, 2)

<h2>use Python's built-in "dis"</h2>
# module to disassemble functions and
# inspect their CPython VM bytecode:

>>> def greet(name):
...     return 'Hello, ' + name + '!'

>>> greet('Dan')
'Hello, Dan!'

>>> import dis
>>> dis.dis(greet)
2   0 LOAD_CONST     1 ('Hello, ')
    2 LOAD_FAST      0 (name)
    4 BINARY_ADD
    6 LOAD_CONST     2 ('!')
    8 BINARY_ADD
   10 RETURN_VALUE

# @classmethod vs @staticmethod vs "plain" methods
# What's the difference?

class MyClass:
    def method(self):
        """
        Instance methods need a class instance and
        can access the instance through `self`.
        """
        return 'instance method called', self

    @classmethod
    def classmethod(cls):
        """
        Class methods don't need a class instance.
        They can't access the instance (self) but
        they have access to the class itself via `cls`.
        """
        return 'class method called', cls

    @staticmethod
    def staticmethod():
        """
        Static methods don't have access to `cls` or `self`.
        They work like regular functions but belong to
        the class's namespace.
        """
        return 'static method called'

# All methods types can be
# called on a class instance:
>>> obj = MyClass()
>>> obj.method()
('instance method called')
>>> obj.classmethod()
('class method called')
>>> obj.staticmethod()
'static method called'

# Calling instance methods fails
# if we only have the class object:
>>> MyClass.classmethod()
('class method called')
>>> MyClass.staticmethod()
'static method called'
>>> MyClass.method()
TypeError: 
    "unbound method method() must be called with MyClass "
    "instance as first argument (got nothing instead)"

# In Python 3.4+ you can use contextlib.suppress() to selectively ignore specific exceptions:

import contextlib

with contextlib.suppress(FileNotFoundError):
    os.remove('somefile.tmp')

# This is equivalent to:

try:
    os.remove('somefile.tmp')
except FileNotFoundError:
    pass

# Pythonic ways of checking if all items in a list are equal:

>>> lst = ['a', 'a', 'a']

>>> len(set(lst)) == 1
True

>>> all(x == lst[0] for x in lst)
True

>>> lst.count(lst[0]) == len(lst)
True

# Python's `for` and `while` loops
# support an `else` clause that executes
# only if the loops terminates without
# hitting a `break` statement.

def contains(haystack, needle):
    """
    Throw a ValueError if `needle` not
    in `haystack`.
    """
    for item in haystack:
        if item == needle:
            break
    else:
        # The `else` here is a
        # "completion clause" that runs
        # only if the loop ran to completion
        # without hitting a `break` statement.
        raise ValueError('Needle not found')

>>> contains([23, 'needle', 0xbadc0ffee], 'needle')
None

>>> contains([23, 42, 0xbadc0ffee], 'needle')
ValueError: "Needle not found"

# better way for  `for` and `while` loops support an `else` clause that executes only if the loops terminates without hitting a `break` statement., something like this:
def better_contains(haystack, needle):
    for item in haystack:
        if item == needle:
            return
    raise ValueError('Needle not found')

# Note: Typically you'd write something like this to do a membership test, which is much more Pythonic:
if needle not in haystack:
    raise ValueError('Needle not found')

# Virtual Environments ("virtualenvs") keep your project dependencies separated.

# Before creating & activating a virtualenv: `python` and `pip` map to the system version of the Python interpreter (e.g. Python 2.7)

$ which python
/usr/local/bin/python

# Let's create a fresh virtualenv using another version of Python (Python 3): $ python3 -m venv ./venv
# A virtualenv is just a "Python environment in a folder":
$ ls ./venv
bin      include    lib      pyvenv.cfg

# Activating a virtualenv configures the current shell session to use the python (and pip) commands from the virtualenv folder instead of the global environment:
$ source ./venv/bin/activate

# Note how activating a virtualenv modifies your shell prompt with a little note showing the name of the virtualenv folder:
(venv) $ echo "wee!"

# With an active virtualenv, the `python` command maps to the interpreter binary *inside the active virtualenv*:
(venv) $ which python
/Users/dan/my-project/venv/bin/python3

# Installing new libraries and frameworks with `pip` now installs them *into the virtualenv sandbox*, leaving your global environment (and any other virtualenvs) completely unmodified:
(venv) $ pip install requests

# To get back to the global Python environment, run the following command:
(venv) $ deactivate

# (See how the prompt changed back to "normal" again?)
$ echo "yay!"

# Deactivating the virtualenv flipped the `python` and `pip` commands back to the global environment:
$ which python
/usr/local/bin/python

# Python 3.3+ has a std lib module for displaying tracebacks even when Python "dies", e.g with a segfault:

import faulthandler
faulthandler.enable()

# Can also be enabled with "python -X faulthandler" from the command line.

# Learn more here: https://docs.python.org/3/library/faulthandler.html

<h2>interacting with databases</h2>
<a href="https://towardsdatascience.com/sqlalchemy-python-tutorial-79a577141a91">SQLAlchemy Python Tutorial interacting with databases</a>

# pip install PyMysql

Python 資料庫圖解流程
<img src="https://www.itread01.com/uploads/images/20180928/1538071530-9400.jpg">

Connection、Cursor比喻
<img src="https://www.itread01.com/uploads/images/20180928/1538071533-8697.jpg">

<img src="https://www.itread01.com/uploads/images/20180928/1538071548-6858.jpg">

<img src="https://www.itread01.com/uploads/images/20180928/1538071550-6362.jpg">

import sqlite3
conn = sqlite3.connect("EX.db")
cur = conn.cursor()

def table():
    cur.execute("CREATE TABLE exampl(rollno, REAL, Name TEXT, age, REAL)")

def value():
    cur.execute("INSERT INTO exampl VALUES(1, "Albert", 23)")
    conn.commit()
#    conn.close()
#    cur.close()

def show():
    cur.execute("SELECT * FROM exampl")
    data = cur.fetchall()
    print(data) # print(cur.fetchall())

table()
value()
show()

<h2>Pygame Tutorial</h2>
<a href="https://www.youtube.com/watch?v=zfvxp7PgQ6c">Python and Pygame Tutorial - Build Tetris! Full GameDev Course</a>

<a href="pygame.html" class="red bordwhite2 borRad10 gold2bs">pygame Tutorial</a>
<a href="thepythongamebook.html" class="white bordblue2 borRad10 red2bs">thepythongamebook</a>
<a href="Complete Pygame Project.html" class="white">Complete Pygame Project</a>

<h2>PyFormat</h2>
<a href="PyFormat.html">PyFormat</a>

<h2>PyInstaller</h2>
Making a Stand Alone Executable from a Python Script using PyInstaller
There are plenty of tools available for converting python script into executable. For example, checkout:

<a href="http://www.pyinstaller.org/">PyInstaller</a>
<a href="https://pypi.python.org/pypi/py2exe/0.9.2.0">py2exe</a>

<span class="lime">first install pyinstaller:
pip install pyinstaller

then run:
pyinstaller -F testnumpy.py
</span>
<a href="https://www.c-sharpcorner.com/blogs/how-to-convert-python-script-to-exe-file">Convert Python Script Into Executable .exe File</a>
<a href="https://pyinstaller.readthedocs.io/en/stable/usage.html#options">Using PyInstaller General Options</a>
<a href="https://www.youtube.com/watch?v=lOIJIk_maO4" class="orange">youtube Convert PY to EXE</a>
<a href="https://www.youtube.com/watch?v=UZX5kH72Yx4">Convert any Python File to .EXE</a>

<a href="http://www.py2exe.org/index.cgi/Tutorial">py2exe official tutorial</a>

<h2>kivy Create a package for Android</h2>
<a href="https://kivy.org/doc/stable/guide/packaging-android.html">kivy Create a package for Android</a>

<h2>Beginning Game Programming with Python</h2>
<a href="Beginning Game Programming with Python.html">Beginning Game Programming with Python</a>

<a href="https://inventwithpython.com/makinggames.pdf">Making Games with Python & Pygame</a>

<h2>Pygame</h2>
<a href="http://programarcadegames.com/index.php?lang=en">Games With Python And Pygame</a>
<a href="https://pygame.hackersir.org/Lessons/01/Pygame_install.html">Pygame 安裝</a>

<h2>python call batch file</h2>
import os
os.system("killtask.bat")

import os
os.chdir("X:\Enter location of .bat file")
os.startfile("ask.bat")

<h2>python multiple choice</h2>
<a href="https://www.sanfoundry.com/1000-python-questions-answers/">1000 python questions answers</a>
<a href="https://www.geeksforgeeks.org/python-multiple-choice-questions/">python multiple choice questions</a>
<a href="https://codereview.stackexchange.com/questions/153495/simple-multiple-choice-quiz">python simple multiple choice quiz</a>
<a href="https://qiita.com/visualskyrim/items/1922429a07ca5f974467">Python read lines of file into list</a>

<h2>Python Development Environment</h2>
<a href="https://www.youtube.com/watch?v=xFciV6Ew5r4">Setting up a Python Development Environment in Sublime Text</a>
<a href="https://www.youtube.com/watch?v=-nh9rCzPJ20&t=2301s">Setting up a Python Development Environment Visual Studio Code</a>

to install vs code, search for visual studio code but not visual studio, vs code is free

activity bar on the left:
activity bar can be called out from command pallete Ctrl+shift+P
Ctrl+shift+E: Explorer
Ctrl+shift+F: search and replace
Ctrl+shift+G: github Source Control
Ctrl+shift+D: Debug
Ctrl+shift+X: Extensions, 
	the recommendations will have reason, 
	search for sublime text keymap,
	popular extensions can be sorted according to rating, name, installs

Zen Mode Ctrl+K Z. Double Esc exits Zen Mode

python scripts:
	import sys
	print(sys.version)
	print(sys.executable)

right click on screen to select run python file in terminal

on bottom status bar click on interpreter may change to use different versions interpreter

type cls in terminal may clear screen

changing interpreter will create a .vscode folder storing runtime environment

Ctrl+shift+P: vscode command pallete
	type color theme will select color themes
	type file icon to change file icons

on bottom status bar far left a config icon called manage can select command pallete

select default terminal by pressing F1or ctrl+Shift +P
type Shell and select Default Shell

pressing F1or ctrl+Shift +P and type default setting to show defaults

ctrl + ` will open terminal, type where python will show the path
or type python to enter python, type import sys, sys.executable will show path
to exit python type exit()

import sys
import requests
print(sys.version)
print(sys.executable)
print("hello")

r = requests.get("https://google.com")
print(r.status_code)

<h2>Python beep</h2>
import winsound
frequency = 1100  # Set Frequency To 2500 Hertz
duration = 1000  # Set Duration To 1000 ms == 1 second
winsound.Beep(frequency, duration)

<h2>Python 編碼 Regex</h2>
<a href="http://xahlee.info/python/python_regex_flags.html">Python Regex Flags</a>
<a href="https://stackoverflow.com/questions/10546442/python-regular-expression-with-utf8-issue">python RE with utf8</a>
<a href="https://www.w3schools.com/python/python_regex.asp">Python RegEx</a>
<a href="https://www.programcreek.com/python/example/342/re.UNICODE">Python re.UNICODE() Examples</a>
<a href="https://docs.python.org/3/howto/unicode.html">Unicode HOWTO</a>
<a href="https://openhome.cc/Gossip/Encoding/Python.html">Python 的編碼</a>
<a href="https://zhuanlan.zhihu.com/p/33459001">谈谈R中的乱码（二）</a>

text = '測試'
print(len(text))

# 為了支援 Unicode，Python 2.x 提供了 u 前置字來產生 unicode 物件。

text = u'測試'
print(type(text))
print(len(text))

text = u'測試'
b_str = text.encode('utf-8')
type(b_str)
b_str.decode('utf-8')

<a href="https://openhome.cc/Gossip/CodeData/PythonTutorial/UnicodeBasicIOPy3.html">Python 3 Unicode 支援、基本 I/O</a>

<h2>Python Projects</h2>
<a href="Python Projects.html">Python Projects</a>

<h2>image processing library</h2>
<a href="https://www.quora.com/Which-is-the-best-image-processing-library-or-package-for-Python-and-what-is-the-right-way-to-use-it">best image processing library for Python</a>

<h2>The pass statement</h2>
The pass statement is a null operation; 
nothing happens when it executes. 

The pass is also useful in places where your code will eventually go, 
but has not been written yet (e.g., in stubs for example) −

Example

for letter in 'Python': 
   if letter == 'h':
      pass
      print('This is pass block')
   print('Current Letter :', letter)

print("Good bye!")

result −
Current Letter : P
Current Letter : y
Current Letter : t
This is pass block
Current Letter : h
Current Letter : o
Current Letter : n
Good bye!

<h2>use main() function to call functions</h2>
def main():
    data = read_input_file('data.csv')
    report = generate_report(data)
    write_report(report)

# Application entry point -> call main()
main()

<h2>contextlib.suppress() function</h2>
contextlib.suppress() function available in Python 3.4

use contextlib.suppress() to selectively ignore specific exceptions using a context manager and the "with" statement:
 
import contextlib
with contextlib.suppress(FileNotFoundError):
    os.remove('somefile.tmp')

This is equivalent to the following try/except clause:

try:
    os.remove('somefile.tmp')
except FileNotFoundError:
    pass

<h2>Parallel computing in Python</h2> (in 60 seconds or less)

<a href="https://stackoverflow.com/questions/20548628/how-to-do-parallel-programming-in-python">parallel programming in Python</a>
<a href="https://www.machinelearningplus.com/python/parallel-processing-python/">Parallel Processing in Python – A Practical Guide with Examples</a>
<a href="https://sebastianraschka.com/Articles/2014_multiprocessing.html">parallel programming using Python's multiprocessing module</a>

If your Python programs are slower than you'd like you can often speed them up by *parallelizing* them.

Basically, parallel computing allows you to carry out many calculations at the same time, thus reducing the amount of time it takes to run your program to completion.

I know, this sounds fairly vague and complicated somehow...but bear with me for the next 50 seconds or so.

Here's an end-to-end example of parallel computing in Python 2/3, using only tools built into the Python standard library—

Ready? Go!

First, we need to do some setup work. We'll import the "collections" and the "multiprocessing" module so we can use Python's parallel computing facilities and define the data structure we'll work with:

import collections
import multiprocessing
Second, we'll use "collections.namedtuple" to define a new (immutable) data type we can use to represent our data set, a collection of scientists:

Scientist = collections.namedtuple('Scientist', [
    'name',
    'born',
])

scientists = (
    Scientist(name='Ada Lovelace', born=1815),
    Scientist(name='Emmy Noether', born=1882),
    Scientist(name='Marie Curie', born=1867),
    Scientist(name='Tu Youyou', born=1930),
    Scientist(name='Ada Yonath', born=1939),
    Scientist(name='Vera Rubin', born=1928),
    Scientist(name='Sally Ride', born=1951),
)
Third, we'll write a "data processing function" that accepts a scientist object and returns a dictionary containing the scientist's name and their calculated age: 

def process_item(item):
    return {
        'name': item.name,
        'age': 2017 - item.born
    }
The process_item() function just represents a simple data transformation to keep this example short and sweet—but you could swap it out with a much more complex computation no problem. 

(20 seconds remaining)

Fourth, and this is where the real parallelization magic happens, we'll set up a "multiprocessing pool" that allows us to spread our calculations across all available CPU cores. 

Then we call the pool's map() method to apply our process_item() function to all scientist objects, in parallel batches:

pool = multiprocessing.Pool()
result = pool.map(process_item, scientists)
Note how batching and distributing the work across multiple CPU cores, performing the work, and collecting the results are all handled by the multiprocessing pool. How great is that?

Fifth, we're all done here with 5 seconds remaining—

Let's print(the results of our data transformation to the console so we can )make sure the program did what it was supposed to:

print(tuple(result))
That's the end of our little program. And here's what you should expect to see printed out on your console:

({'name': 'Ada Lovelace', 'age': 202},
 {'name': 'Emmy Noether', 'age': 135},
 {'name': 'Marie Curie', 'age': 150},
 {'name': 'Tu Youyou', 'age': 87},
 {'name': 'Ada Yonath', 'age': 78},
 {'name': 'Vera Rubin', 'age': 89},
 {'name': 'Sally Ride', 'age': 66})
Isn't Python just lovely?

Now, obviously I took some shortcuts here and picked an example that made parallelization seem effortless—

<h2>Python GuiProgramming</h2>
<a href="https://www.zhihu.com/question/32703639">Python GUI Tkinter，PyQt, wxPython</a>
<a href="wxPython by Example.html" class="bordwhite2 red goldbs borRad10 bigfont">wxPython by Example</a>
<a href="wxPython GUI Application.html" class="bordgold2 borRad10 white whiteblackgrad red2bs bigfont">wxPython GUI Application</a>
<a href="https://www.youtube.com/watch?v=AHceESCEHww" class="bordred3 borRad10 white whitebs bigfont">wxFormBuilder and wxPython Tutorial</a>

<a href="https://wiki.python.org/moin/GuiProgramming">Python GuiProgramming</a>
<a href="https://www.tutorialspoint.com/python/python_gui_programming">python gui programming</a>
<a href="https://likegeeks.com/python-gui-examples-tkinter-tutorial/">Python GUI Examples (Tkinter Tutorial) important</a>
<a href="https://build-system.fman.io/pyqt5-tutorial">PyQt5 tutorial create a Python GUI</a>
<a href="http://zetcode.com/gui/pyqt5/">PyQt5 tutorial</a> <a href="https://tkdocs.com/tutorial/" class="bordyellow2 red whitebs borRad10">Tk tutorial</a> <a href="https://tkdocs.com/tutorial/onepage.html">Tk tutorial onepage</a>
<a href="https://www.python-course.eu/python_tkinter.php" class="bordred2 green borRad10 limebs">Python Tkinter Intro</a> <a href="https://www.python-course.eu/tkinter_layout_management.php" class="bordred2 yellow borRad10 goldbs">tkinter Layout Managers</a>
尝试GUI，首先选择的就是Python自带的Tkinter，然后在网上找了Tkinter的相关文档：
第二份是2014年度辛星Tkinter教程第二版，内容浅显易懂；
第三份是Python GUI Programming Cookbook，内容详细，帮助很大。

先上结论：Tkinter真的不像大家说的那么差，基本的功能都能实现，而且简单易学容易上手。对于界面颜值没有太高要求的，用Tkinter写GUI是不错的选择。

<a href="Python GUI examples.html" class="bordred3 borRad10 whitebs gold Uline whiteline">*** Python GUI examples ***</a> <a href="http://zetcode.com/tkinter/layout/" class="bordwhite2 borRad10 bluebs gold">*** tkinter layout ***</a>
There are two kinds of widgets: containers and their children.
The containers group their children into suitable layouts.

Tkinter has three built-in layout managers: the pack, grid, and place managers.
The place geometry manager positions widgets using absolute positioning.
The pack geometry manager organises widgets in horizontal and vertical boxes.
The grid geometry manager places widgets in a two dimensional grid.

<h2>comprehensive data exploration with python</h2>
<a href="https://www.kaggle.com/pmarcelino/comprehensive-data-exploration-with-python">comprehensive data exploration with python</a>
'The most difficult thing in life is to know yourself'
This quote belongs to Thales of Miletus. 
Thales was a Greek/Phonecian philosopher, mathematician and astronomer, which is recognised as the first individual in Western civilisation known to have entertained and engaged in scientific thought.
I wouldn't say that knowing your data is the most difficult thing in data science, but it is time-consuming. 
Therefore, it's easy to overlook this initial step and jump too soon into the water.
So I tried to learn how to swim before jumping into the water. 
Based on Hair et al. (2013), chapter 'Examining your data', I did my best to follow a comprehensive, but not exhaustive, analysis of the data. 
I'm far from reporting a rigorous study in this kernel, but I hope that it can be useful for the community, so I'm sharing how I applied some of those data analysis principles to this problem.
Despite the strange names I gave to the chapters, what we are doing in this kernel is something like:
<b>Understand the problem</b>
We'll look at each variable and do a philosophical analysis about their meaning and importance for this problem.
<b>Univariable study</b>
We'll just focus on the dependent variable ('SalePrice') and try to know a little bit more about it.
<b>Multivariate study</b>
We'll try to understand how the dependent variable and independent variables relate.
<b>Basic cleaning</b>
We'll clean the dataset and handle the missing data, outliers and categorical variables.
<b>Test assumptions</b>
We'll check if our data meets the assumptions required by most multivariate techniques.
Now, it's time to have fun!
#invite people for the Kaggle party
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np
from scipy.stats import norm
from sklearn.preprocessing import StandardScaler
from scipy import stats
import warnings
warnings.filterwarnings ( 'ignore' )
% matplotlib inline
#bring in the six packs
df_train = pd.read_csv ( '../input/train.csv' )
#check the decoration
df_train.columns
Index(['Id', 'MSSubClass', 'MSZoning', 'LotFrontage', 'LotArea', 'Street',
       'Alley', 'LotShape', 'LandContour', 'Utilities', 'LotConfig',
       'LandSlope', 'Neighborhood', 'Condition1', 'Condition2', 'BldgType',
       'HouseStyle', 'OverallQual', 'OverallCond', 'YearBuilt', 'YearRemodAdd',
       'RoofStyle', 'RoofMatl', 'Exterior1st', 'Exterior2nd', 'MasVnrType',
       'MasVnrArea', 'ExterQual', 'ExterCond', 'Foundation', 'BsmtQual',
       'BsmtCond', 'BsmtExposure', 'BsmtFinType1', 'BsmtFinSF1',
       'BsmtFinType2', 'BsmtFinSF2', 'BsmtUnfSF', 'TotalBsmtSF', 'Heating',
       'HeatingQC', 'CentralAir', 'Electrical', '1stFlrSF', '2ndFlrSF',
       'LowQualFinSF', 'GrLivArea', 'BsmtFullBath', 'BsmtHalfBath', 'FullBath',
       'HalfBath', 'BedroomAbvGr', 'KitchenAbvGr', 'KitchenQual',
       'TotRmsAbvGrd', 'Functional', 'Fireplaces', 'FireplaceQu', 'GarageType',
       'GarageYrBlt', 'GarageFinish', 'GarageCars', 'GarageArea', 'GarageQual',
       'GarageCond', 'PavedDrive', 'WoodDeckSF', 'OpenPorchSF',
       'EnclosedPorch', '3SsnPorch', 'ScreenPorch', 'PoolArea', 'PoolQC',
       'Fence', 'MiscFeature', 'MiscVal', 'MoSold', 'YrSold', 'SaleType',
       'SaleCondition', 'SalePrice'],
      dtype='object')

<h4>1. So... What can we expect?</h4>
In order to understand our data, we can look at each variable and try to understand their meaning and relevance to this problem. 
I know this is time-consuming, but it will give us the flavour of our dataset.
In order to have some discipline in our analysis, we can create an Excel spreadsheet with the following columns:
<b>Variable</b> - Variable name.
<b>Type</b> - Identification of the variables' type. 
There are two possible values for this field: 'numerical' or 'categorical'. 
By 'numerical' we mean variables for which the values are numbers, and by 'categorical' we mean variables for which the values are categories.
<b>Segment</b> - Identification of the variables' segment. 
We can define three possible segments: building, space or location. 
When we say 'building', we mean a variable that relates to the physical characteristics of the building (e.g. 'OverallQual'). 
When we say 'space', we mean a variable that reports space properties of the house (e.g. 'TotalBsmtSF'). 
Finally, when we say a 'location', we mean a variable that gives information about the place where the house is located (e.g. 'Neighborhood').
<b>Expectation</b> - Our expectation about the variable influence in 'SalePrice'. 
We can use a categorical scale with 'High', 'Medium' and 'Low' as possible values.
<b>Conclusion</b> - Our conclusions about the importance of the variable, after we give a quick look at the data. 
We can keep with the same categorical scale as in 'Expectation'.
<b>Comments</b> - Any general comments that occured to us.
While 'Type' and 'Segment' is just for possible future reference, the column 'Expectation' is important because it will help us develop a 'sixth sense'. 
To fill this column, we should read the description of all the variables and, one by one, ask ourselves:
Do we think about this variable when we are buying a house? (e.g. When we think about the house of our dreams, do we care about its 'Masonry veneer type'?).
If so, how important would this variable be? (e.g. What is the impact of having 'Excellent' material on the exterior instead of 'Poor'? And of having 'Excellent' instead of 'Good'?).
Is this information already described in any other variable? (e.g. If 'LandContour' gives the flatness of the property, do we really need to know the 'LandSlope'?).
After this daunting exercise, we can filter the spreadsheet and look carefully to the variables with 'High' 'Expectation'. 
Then, we can rush into some scatter plots between those variables and 'SalePrice', filling in the 'Conclusion' column which is just the correction of our expectations.
I went through this process and concluded that the following variables can play an important role in this problem:
OverallQual (which is a variable that I don't like because I don't know how it was computed; a funny exercise would be to predict 'OverallQual' using all the other variables available).
YearBuilt.
TotalBsmtSF.
GrLivArea.
I ended up with two 'building' variables ('OverallQual' and 'YearBuilt') and two 'space' variables ('TotalBsmtSF' and 'GrLivArea'). 
This might be a little bit unexpected as it goes against the real estate mantra that all that matters is 'location, location and location'. 
It is possible that this quick data examination process was a bit harsh for categorical variables. 
For example, I expected the 'Neigborhood' variable to be more relevant, but after the data examination I ended up excluding it. 
Maybe this is related to the use of scatter plots instead of boxplots, which are more suitable for categorical variables visualization. 
The way we visualize data often influences our conclusions.
However, the main point of this exercise was to think a little about our data and expectactions, so I think we achieved our goal. 
Now it's time for 'a little less conversation, a little more action please'. 
Let's 
<b>shake it!</b> 
<h4>2. First things first: analysing 'SalePrice'</h4>
'SalePrice' is the reason of our quest. 
It's like when we're going to a party. 
We always have a reason to be there. 
Usually, women are that reason. (disclaimer: adapt it to men, dancing or alcohol, according to your preferences)
Using the women analogy, let's build a little story, the story of 'How we met 'SalePrice''.
<em>Everything started in our Kaggle party, when we were looking for a dance partner. 
After a while searching in the dance floor, we saw a girl, near the bar, using dance shoes. 
That's a sign that she's there to dance. 
We spend much time doing predictive modelling and participating in analytics competitions, so talking with girls is not one of our super powers. 
Even so, we gave it a try:
'Hi, I'm Kaggly! And you? 'SalePrice'? What a beautiful name! You know 'SalePrice', could you give me some data about you? I just developed a model to calculate the probability of a successful relationship between two people. 
I'd like to apply it to us!'
</em> 
#descriptive statistics summary
df_train [ 'SalePrice' ].describe ()
count      1460.000000
mean     180921.195890
std       79442.502883
min       34900.000000
25%      129975.000000
50%      163000.000000
75%      214000.000000
max      755000.000000
Name: SalePrice, dtype: float64

<em>'Very well... 
It seems that your minimum price is larger than zero. 
Excellent! You don't have one of those personal traits that would destroy my model! Do you have any picture that you can send me? I don't know... 
like, you in the beach... 
or maybe a selfie in the gym?'
</em> 
#histogram
sns.distplot ( df_train [ 'SalePrice' ]);

<em>'Ah! I see you that you use seaborn makeup when you're going out... 
That's so elegant! I also see that you:
<b>Deviate from the normal distribution.</b>
<b>Have appreciable positive skewness.</b>
<b>Show peakedness.</b>
This is getting interesting! 'SalePrice', could you give me your body measures?'
</em> 
#skewness and kurtosis
print(( "Skewness:  %f " % df_train [ 'SalePrice' ].skew ()))
print(( "Kurtosis:  %f " % df_train [ 'SalePrice' ].kurt ()))
Skewness: 1.882876
Kurtosis: 6.536282

<em>'Amazing! If my love calculator is correct, our success probability is 97.834657%. 
I think we should meet again! Please, keep my number and give me a call if you're free next Friday. 
See you in a while, crocodile!'
</em> 
<h4>'SalePrice', her buddies and her interests</h4>
<em>It is military wisdom to choose the terrain where you will fight. 
As soon as 'SalePrice' walked away, we went to Facebook. 
Yes, now this is getting serious. 
Notice that this is not stalking. 
It's just an intense research of an individual, if you know what I mean.
According to her profile, we have some common friends. 
Besides Chuck Norris, we both know 'GrLivArea' and 'TotalBsmtSF'. 
Moreover, we also have common interests such as 'OverallQual' and 'YearBuilt'. 
This looks promising!
To take the most out of our research, we will start by looking carefully at the profiles of our common friends and later we will focus on our common interests.
</em> 
<h4>Relationship with numerical variables</h4>
#scatter plot grlivarea/saleprice
var = 'GrLivArea'
data = pd.concat ([ df_train [ 'SalePrice' ], df_train [ var ]], axis = 1 )
data.plot.scatter ( x = var , y = 'SalePrice' , ylim = ( 0 , 800000 ));


<em>Hmmm... 
It seems that 'SalePrice' and 'GrLivArea' are really old friends, with a 
<b>linear relationship.</b>
And what about 'TotalBsmtSF'?
</em> 
#scatter plot totalbsmtsf/saleprice
var = 'TotalBsmtSF'
data = pd.concat ([ df_train [ 'SalePrice' ], df_train [ var ]], axis = 1 )
data.plot.scatter ( x = var , y = 'SalePrice' , ylim = ( 0 , 800000 ));


<em>'TotalBsmtSF' is also a great friend of 'SalePrice' but this seems a much more emotional relationship! Everything is ok and suddenly, in a 
<b>strong linear (exponential?)</b> reaction, everything changes. 
Moreover, it's clear that sometimes 'TotalBsmtSF' closes in itself and gives zero credit to 'SalePrice'.
</em> 
<h4>Relationship with categorical features</h4>
#box plot overallqual/saleprice
var = 'OverallQual'
data = pd.concat ([ df_train [ 'SalePrice' ], df_train [ var ]], axis = 1 )
f , ax = plt.subplots ( figsize = ( 8 , 6 ))
fig = sns.boxplot ( x = var , y = "SalePrice" , data = data )
fig.axis ( ymin = 0 , ymax = 800000 );


<em>Like all the pretty girls, 'SalePrice' enjoys 'OverallQual'. 
Note to self: consider whether McDonald's is suitable for the first date.
</em> 
var = 'YearBuilt'
data = pd.concat ([ df_train [ 'SalePrice' ], df_train [ var ]], axis = 1 )
f , ax = plt.subplots ( figsize = ( 16 , 8 ))
fig = sns.boxplot ( x = var , y = "SalePrice" , data = data )
fig.axis ( ymin = 0 , ymax = 800000 );
plt.xticks ( rotation = 90 );


<em>Although it's not a strong tendency, I'd say that 'SalePrice' is more prone to spend more money in new stuff than in old relics.
</em> <b>Note</b>
: we don't know if 'SalePrice' is in constant prices. 
Constant prices try to remove the effect of inflation. 
If 'SalePrice' is not in constant prices, it should be, so than prices are comparable over the years.
<h4>In summary</h4>
Stories aside, we can conclude that:
'GrLivArea' and 'TotalBsmtSF' seem to be linearly related with 'SalePrice'. 
Both relationships are positive, which means that as one variable increases, the other also increases. 
In the case of 'TotalBsmtSF', we can see that the slope of the linear relationship is particularly high.
'OverallQual' and 'YearBuilt' also seem to be related with 'SalePrice'. 
The relationship seems to be stronger in the case of 'OverallQual', where the box plot shows how sales prices increase with the overall quality.
We just analysed four variables, but there are many other that we should analyse. 
The trick here seems to be the choice of the right features (feature selection) and not the definition of complex relationships between them (feature engineering).
That said, let's separate the wheat from the chaff.
<h4>3. Keep calm and work smart</h4>
Until now we just followed our intuition and analysed the variables we thought were important. 
In spite of our efforts to give an objective character to our analysis, we must say that our starting point was subjective.
As an engineer, I don't feel comfortable with this approach. 
All my education was about developing a disciplined mind, able to withstand the winds of subjectivity. 
There's a reason for that. 
Try to be subjective in structural engineering and you will see physics making things fall down. 
It can hurt.
So, let's overcome inertia and do a more objective analysis.
<h4>The 'plasma soup'</h4>
'In the very beginning there was nothing except for a plasma soup. 
What is known of these brief moments in time, at the start of our study of cosmology, is largely conjectural. 
However, science has devised some sketch of what probably happened, based on what is known about the universe today.' (source: 
<a href="http://umich.edu/~gs265/bigbang.htm">http://umich.edu/~gs265/bigbang.htm</a>
)
To explore the universe, we will start with some practical recipes to make sense of our 'plasma soup':
Correlation matrix (heatmap style).
'SalePrice' correlation matrix (zoomed heatmap style).
Scatter plots between the most correlated variables (move like Jagger style).
<h4 id="Correlation-matrix-(heatmap-style)">
Correlation matrix (heatmap style)
</h4>
#correlation matrix
corrmat = df_train.corr()
f , ax = plt.subplots ( figsize = ( 12 , 9 ))
sns.heatmap ( corrmat , vmax =.8 , square = True );


In my opinion, this heatmap is the best way to get a quick overview of our 'plasma soup' and its relationships. (Thank you @seaborn!)
At first sight, there are two red colored squares that get my attention. 
The first one refers to the 'TotalBsmtSF' and '1stFlrSF' variables, and the second one refers to the 'Garage
<em>X
</em>
' variables. 
Both cases show how significant the correlation is between these variables. 
Actually, this correlation is so strong that it can indicate a situation of multicollinearity. 
If we think about these variables, we can conclude that they give almost the same information so multicollinearity really occurs. 
Heatmaps are great to detect this kind of situations and in problems dominated by feature selection, like ours, they are an essential tool.
Another thing that got my attention was the 'SalePrice' correlations. 
We can see our well-known 'GrLivArea', 'TotalBsmtSF', and 'OverallQual' saying a big 'Hi!', but we can also see many other variables that should be taken into account. 
That's what we will do next.
<h4 id="'SalePrice'-correlation-matrix-(zoomed-heatmap-style)">
'SalePrice' correlation matrix (zoomed heatmap style)
</h4>
#saleprice correlation matrix
k = 10 #number of variables for heatmap
cols = corrmat.nlargest ( k , 'SalePrice' )[ 'SalePrice' ].index
cm = np.corrcoef ( df_train [ cols ].values.T )
sns.set ( font_scale = 1.25 )
hm = sns.heatmap ( cm , cbar = True , annot = True , square = True , fmt = '.2f' , annot_kws = { 'size' : 10 }, yticklabels = cols.values , xticklabels = cols.values )
plt.show ()


According to our crystal ball, these are the variables most correlated with 'SalePrice'. 
My thoughts on this:
'OverallQual', 'GrLivArea' and 'TotalBsmtSF' are strongly correlated with 'SalePrice'. 
Check!
'GarageCars' and 'GarageArea' are also some of the most strongly correlated variables. 
However, as we discussed in the last sub-point, the number of cars that fit into the garage is a consequence of the garage area. 
'GarageCars' and 'GarageArea' are like twin brothers. 
You'll never be able to distinguish them. 
Therefore, we just need one of these variables in our analysis (we can keep 'GarageCars' since its correlation with 'SalePrice' is higher).
'TotalBsmtSF' and '1stFloor' also seem to be twin brothers. 
We can keep 'TotalBsmtSF' just to say that our first guess was right (re-read 'So... What can we expect?').
'FullBath'?? Really? 
'TotRmsAbvGrd' and 'GrLivArea', twin brothers again. 
Is this dataset from Chernobyl?
Ah... 
'YearBuilt'... 
It seems that 'YearBuilt' is slightly correlated with 'SalePrice'. 
Honestly, it scares me to think about 'YearBuilt' because I start feeling that we should do a little bit of time-series analysis to get this right. 
I'll leave this as a homework for you.
Let's proceed to the scatter plots.
<h4 id="Scatter-plots-between-'SalePrice'-and-correlated-variables-(move-like-Jagger-style)">
Scatter plots between 'SalePrice' and correlated variables (move like Jagger style)
</h4>
Get ready for what you're about to see. 
I must confess that the first time I saw these scatter plots I was totally blown away! So much information in so short space... 
It's just amazing. 
Once more, thank you @seaborn! You make me 'move like Jagger'!
#scatterplot
sns.set ()
cols = [ 'SalePrice' , 'OverallQual' , 'GrLivArea' , 'GarageCars' , 'TotalBsmtSF' , 'FullBath' , 'YearBuilt' ]
sns.pairplot ( df_train [ cols ], size = 2.5 )
plt.show ();


Although we already know some of the main figures, this mega scatter plot gives us a reasonable idea about variables relationships.
One of the figures we may find interesting is the one between 'TotalBsmtSF' and 'GrLiveArea'. 
In this figure we can see the dots drawing a linear line, which almost acts like a border. 
It totally makes sense that the majority of the dots stay below that line. 
Basement areas can be equal to the above ground living area, but it is not expected a basement area bigger than the above ground living area (unless you're trying to buy a bunker).
The plot concerning 'SalePrice' and 'YearBuilt' can also make us think. 
In the bottom of the 'dots cloud', we see what almost appears to be a shy exponential function (be creative). 
We can also see this same tendency in the upper limit of the 'dots cloud' (be even more creative). 
Also, notice how the set of dots regarding the last years tend to stay above this limit (I just wanted to say that prices are increasing faster now).
Ok, enough of Rorschach test for now. 
Let's move forward to what's missing: missing data!
<h4>4. Missing data</h4>
Important questions when thinking about missing data:
How prevalent is the missing data?
Is missing data random or does it have a pattern?
The answer to these questions is important for practical reasons because missing data can imply a reduction of the sample size. 
This can prevent us from proceeding with the analysis. 
Moreover, from a substantive perspective, we need to ensure that the missing data process is not biased and hidding an inconvenient truth.
#missing data
total = df_train.isnull ().sum ().sort_values ( ascending = False )
percent = ( df_train.isnull ().sum () / df_train.isnull ().count ()).sort_values ( ascending = False )
missing_data = pd.concat ([ total , percent ], axis = 1 , keys = [ 'Total' , 'Percent' ])
missing_data.head ( 20 )

<table border="1" class="dataframe">
  
<thead>
<tr style="text-align: right;">
<th>
</th>
<th>
Total
</th>
<th>
Percent
</th>
</tr>
  
</thead>
  
<tbody>
<tr>
<th>
PoolQC
</th>
<td>
1453
</td>
<td>
0.995205
</td>
</tr>
<tr>
<th>
MiscFeature
</th>
<td>
1406
</td>
<td>
0.963014
</td>
</tr>
<tr>
<th>
Alley
</th>
<td>
1369
</td>
<td>
0.937671
</td>
</tr>
<tr>
<th>
Fence
</th>
<td>
1179
</td>
<td>
0.807534
</td>
</tr>
<tr>
<th>
FireplaceQu
</th>
<td>
690
</td>
<td>
0.472603
</td>
</tr>
<tr>
<th>
LotFrontage
</th>
<td>
259
</td>
<td>
0.177397
</td>
</tr>
<tr>
<th>
GarageCond
</th>
<td>
81
</td>
<td>
0.055479
</td>
</tr>
<tr>
<th>
GarageType
</th>
<td>
81
</td>
<td>
0.055479
</td>
</tr>
<tr>
<th>
GarageYrBlt
</th>
<td>
81
</td>
<td>
0.055479
</td>
</tr>
<tr>
<th>
GarageFinish
</th>
<td>
81
</td>
<td>
0.055479
</td>
</tr>
<tr>
<th>
GarageQual
</th>
<td>
81
</td>
<td>
0.055479
</td>
</tr>
<tr>
<th>
BsmtExposure
</th>
<td>
38
</td>
<td>
0.026027
</td>
</tr>
<tr>
<th>
BsmtFinType2
</th>
<td>
38
</td>
<td>
0.026027
</td>
</tr>
<tr>
<th>
BsmtFinType1
</th>
<td>
37
</td>
<td>
0.025342
</td>
</tr>
<tr>
<th>
BsmtCond
</th>
<td>
37
</td>
<td>
0.025342
</td>
</tr>
<tr>
<th>
BsmtQual
</th>
<td>
37
</td>
<td>
0.025342
</td>
</tr>
<tr>
<th>
MasVnrArea
</th>
<td>
8
</td>
<td>
0.005479
</td>
</tr>
<tr>
<th>
MasVnrType
</th>
<td>
8
</td>
<td>
0.005479
</td>
</tr>
<tr>
<th>
Electrical
</th>
<td>
1
</td>
<td>
0.000685
</td>
</tr>
<tr>
<th>
Utilities
</th>
<td>
0
</td>
<td>
0.000000
</td>
</tr>
  
</tbody>
</table>
Let's analyse this to understand how to handle the missing data.
We'll consider that when more than 15% of the data is missing, we should delete the corresponding variable and pretend it never existed. 
This means that we will not try any trick to fill the missing data in these cases. 
According to this, there is a set of variables (e.g. 'PoolQC', 'MiscFeature', 'Alley', etc.) that we should delete. 
The point is: will we miss this data? I don't think so. 
None of these variables seem to be very important, since most of them are not aspects in which we think about when buying a house (maybe that's the reason why data is missing?). 
Moreover, looking closer at the variables, we could say that variables like 'PoolQC', 'MiscFeature' and 'FireplaceQu' are strong candidates for outliers, so we'll be happy to delete them.
In what concerns the remaining cases, we can see that 'Garage
<em>X
</em>
' variables have the same number of missing data. 
I bet missing data refers to the same set of observations (although I will not check it; it's just 5% and we should not spend 20 in 5 problems). 
Since the most important information regarding garages is expressed by 'GarageCars' and considering that we are just talking about 5% of missing data, I'll delete the mentioned 'Garage
<em>X
</em>
' variables. 
The same logic applies to 'Bsmt
<em>X
</em>
' variables.
Regarding 'MasVnrArea' and 'MasVnrType', we can consider that these variables are not essential. 
Furthermore, they have a strong correlation with 'YearBuilt' and 'OverallQual' which are already considered. 
Thus, we will not lose information if we delete 'MasVnrArea' and 'MasVnrType'.
Finally, we have one missing observation in 'Electrical'. 
Since it is just one observation, we'll delete this observation and keep the variable.
In summary, to handle missing data, we'll delete all the variables with missing data, except the variable 'Electrical'. 
In 'Electrical' we'll just delete the observation with missing data.
#dealing with missing data
df_train = df_train.drop (( missing_data [ missing_data [ 'Total' ] &gt; 1 ]).
index , 1 )
df_train = df_train.drop ( df_train.loc [ df_train [ 'Electrical' ].
isnull ()].
index )
df_train.isnull ().sum ().max () #just checking that there's no missing data missing...
0

<h4>Out liars!</h4>
Outliers is also something that we should be aware of. 
Why? Because outliers can markedly affect our models and can be a valuable source of information, providing us insights about specific behaviours.
Outliers is a complex subject and it deserves more attention. 
Here, we'll just do a quick analysis through the standard deviation of 'SalePrice' and a set of scatter plots.
<h4>Univariate analysis</h4>
The primary concern here is to establish a threshold that defines an observation as an outlier. 
To do so, we'll standardize the data. 
In this context, data standardization means converting data values to have mean of 0 and a standard deviation of 1.
#standardizing data
saleprice_scaled = StandardScaler ().fit_transform ( df_train [ 'SalePrice' ][:, np.
newaxis ]);
low_range = saleprice_scaled [ saleprice_scaled [:, 0 ].
argsort ()][: 10 ]
high_range = saleprice_scaled [ saleprice_scaled [:, 0 ].
argsort ()][ - 10 :]
print(( 'outer range (low) of the distribution:' ))
print(( low_range ))
print(( ' \n outer range (high) of the distribution:' ))
print(( high_range ))
outer range (low) of the distribution:
[[-1.83820775]
 [-1.83303414]
 [-1.80044422]
 [-1.78282123]
 [-1.77400974]
 [-1.62295562]
 [-1.6166617 ]
 [-1.58519209]
 [-1.58519209]
 [-1.57269236]]
outer range (high) of the distribution:
[[3.82758058]
 [4.0395221 ]
 [4.49473628]
 [4.70872962]
 [4.728631  ]
 [5.06034585]
 [5.42191907]
 [5.58987866]
 [7.10041987]
 [7.22629831]]

How 'SalePrice' looks with her new clothes:
Low range values are similar and not too far from 0.
High range values are far from 0 and the 7.something values are really out of range.
For now, we'll not consider any of these values as an outlier but we should be careful with those two 7.something values.
<h4>Bivariate analysis</h4>
We already know the following scatter plots by heart. 
However, when we look to things from a new perspective, there's always something to discover. 
As Alan Kay said, 'a change in perspective is worth 80 IQ points'.
#bivariate analysis saleprice/grlivarea
var = 'GrLivArea'
data = pd.concat ([ df_train [ 'SalePrice' ], df_train [ var ]], axis = 1 )
data.
plot.
scatter ( x = var , y = 'SalePrice' , ylim = ( 0 , 800000 ));
'c' argument looks like a single numeric RGB or RGBA sequence, which should be avoided as value-mapping will have precedence in case its length matches with 'x' &amp; 'y'. 
 Please use a 2-D array with a single row if you really want to specify the same RGB or RGBA value for all points.


What has been revealed:
The two values with bigger 'GrLivArea' seem strange and they are not following the crowd. 
We can speculate why this is happening. 
Maybe they refer to agricultural area and that could explain the low price. 
I'm not sure about this but I'm quite confident that these two points are not representative of the typical case. 
Therefore, we'll define them as outliers and delete them.
The two observations in the top of the plot are those 7.something observations that we said we should be careful about. 
They look like two special cases, however they seem to be following the trend. 
For that reason, we will keep them.
#deleting points
df_train.sort_values ( by = 'GrLivArea' , ascending = False )[: 2 ]
df_train = df_train.drop ( df_train [ df_train [ 'Id' ] == 1299 ].
index )
df_train = df_train.drop ( df_train [ df_train [ 'Id' ] == 524 ].
index )

#bivariate analysis saleprice/grlivarea
var = 'TotalBsmtSF'
data = pd.concat ([ df_train [ 'SalePrice' ], df_train [ var ]], axis = 1 )
data.
plot.
scatter ( x = var , y = 'SalePrice' , ylim = ( 0 , 800000 ));
'c' argument looks like a single numeric RGB or RGBA sequence, which should be avoided as value-mapping will have precedence in case its length matches with 'x' &amp; 'y'. 
 Please use a 2-D array with a single row if you really want to specify the same RGB or RGBA value for all points.


We can feel tempted to eliminate some observations (e.g. TotalBsmtSF &gt; 3000) but I suppose it's not worth it. 
We can live with that, so we'll not do anything.
<h4>5. 
Getting hard core</h4>
In Ayn Rand's novel, 'Atlas Shrugged', there is an often-repeated question: who is John Galt? A big part of the book is about the quest to discover the answer to this question.
I feel Randian now. 
Who is 'SalePrice'?
The answer to this question lies in testing for the assumptions underlying the statistical bases for multivariate analysis. 
We already did some data cleaning and discovered a lot about 'SalePrice'. 
Now it's time to go deep and understand how 'SalePrice' complies with the statistical assumptions that enables us to apply multivariate techniques.
According to 
<a href="https://amzn.to/2uC3j9p">Hair et al. (2013)</a>
, four assumptions should be tested:
<b>Normality</b> - When we talk about normality what we mean is that the data should look like a normal distribution. 
This is important because several statistic tests rely  on this (e.g. t-statistics). 
In this exercise we'll just check univariate normality for 'SalePrice' (which is a limited approach). 
Remember that univariate normality doesn't ensure multivariate normality (which is what we would like to have), but it helps. 
Another detail to take into account is that in big samples (&gt;200 observations) normality is not such an issue. 
However, if we solve normality, we avoid a lot of other problems (e.g. heteroscedacity) so that's the main reason why we are doing this analysis.
<b>Homoscedasticity</b> - I just hope I wrote it right. 
Homoscedasticity refers to the 'assumption that dependent variable(s) exhibit equal levels of variance across the range of predictor variable(s)' 
<a href="https://amzn.to/2uC3j9p">(Hair et al., 2013)</a>
Homoscedasticity is desirable because we want the error term to be the same across all values of the independent variables.
<b>Linearity</b>
- The most common way to assess linearity is to examine scatter plots and search for linear patterns. 
If patterns are not linear, it would be worthwhile to explore data transformations. 
However, we'll not get into this because most of the scatter plots we've seen appear to have linear relationships.
<b>Absence of correlated errors</b> - Correlated errors, like the definition suggests, happen when one error is correlated to another. 
For instance, if one positive error makes a negative error systematically, it means that there's a relationship between these variables. 
This occurs often in time series, where some patterns are time related. 
We'll also not get into this. 
However, if you detect something, try to add a variable that can explain the effect you're getting. 
That's the most common solution for correlated errors.
What do you think Elvis would say about this long explanation? 'A little less conversation, a little more action please'? Probably... 
By the way, do you know what was Elvis's last great hit?
(...)
The bathroom floor.
<h4>In the search for normality</h4>
The point here is to test 'SalePrice' in a very lean way. 
We'll do this paying attention to:
<b>Histogram</b> - Kurtosis and skewness.
<b>Normal probability plot</b> - Data distribution should closely follow the diagonal that represents the normal distribution.
#histogram and normal probability plot
sns.distplot ( df_train [ 'SalePrice' ], fit = norm );
fig = plt.figure ()
res = stats.
probplot ( df_train [ 'SalePrice' ], plot = plt )



Ok, 'SalePrice' is not normal. 
It shows 'peakedness', positive skewness and does not follow the diagonal line.
But everything's not lost. 
A simple data transformation can solve the problem. 
This is one of the awesome things you can learn in statistical books: in case of positive skewness, log transformations usually works well. 
When I discovered this, I felt like an Hogwarts' student discovering a new cool spell.
<em>Avada kedavra!
</em> 
#applying log transformation
df_train [ 'SalePrice' ] = np.
log ( df_train [ 'SalePrice' ])

#transformed histogram and normal probability plot
sns.distplot ( df_train [ 'SalePrice' ], fit = norm );
fig = plt.figure ()
res = stats.
probplot ( df_train [ 'SalePrice' ], plot = plt )



Done! Let's check what's going on with 'GrLivArea'.
#histogram and normal probability plot
sns.distplot ( df_train [ 'GrLivArea' ], fit = norm );
fig = plt.figure ()
res = stats.
probplot ( df_train [ 'GrLivArea' ], plot = plt )



Tastes like skewness... 

<em>Avada kedavra!
</em> 
#data transformation
df_train [ 'GrLivArea' ] = np.
log ( df_train [ 'GrLivArea' ])

#transformed histogram and normal probability plot
sns.distplot ( df_train [ 'GrLivArea' ], fit = norm );
fig = plt.figure ()
res = stats.
probplot ( df_train [ 'GrLivArea' ], plot = plt )



Next, please...
#histogram and normal probability plot
sns.distplot ( df_train [ 'TotalBsmtSF' ], fit = norm );
fig = plt.figure ()
res = stats.
probplot ( df_train [ 'TotalBsmtSF' ], plot = plt )



Ok, now we are dealing with the big boss. 
What do we have here?
Something that, in general, presents skewness.
A significant number of observations with value zero (houses without basement).
A big problem because the value zero doesn't allow us to do log transformations.
To apply a log transformation here, we'll create a variable that can get the effect of having or not having basement (binary variable). 
Then, we'll do a log transformation to all the non-zero observations, ignoring those with value zero. 
This way we can transform data, without losing the effect of having or not basement.
I'm not sure if this approach is correct. 
It just seemed right to me. 
That's what I call 'high risk engineering'.
#create column for new variable (one is enough because it's a binary categorical feature)
#if area&gt;0 it gets 1, for area==0 it gets 0
df_train [ 'HasBsmt' ] = pd.Series ( len ( df_train [ 'TotalBsmtSF' ]), index = df_train.index )
df_train [ 'HasBsmt' ] = 0 
df_train.loc [ df_train [ 'TotalBsmtSF' ] &gt; 0 , 'HasBsmt' ] = 1

#transform data
df_train.loc [ df_train [ 'HasBsmt' ] == 1 , 'TotalBsmtSF' ] = np.
log ( df_train [ 'TotalBsmtSF' ])

#histogram and normal probability plot
sns.distplot ( df_train [ df_train [ 'TotalBsmtSF' ] &gt; 0 ][ 'TotalBsmtSF' ], fit = norm );
fig = plt.figure ()
res = stats.
probplot ( df_train [ df_train [ 'TotalBsmtSF' ] &gt; 0 ][ 'TotalBsmtSF' ], plot = plt )



<h4>In the search for writing 'homoscedasticity' right at the first attempt</h4>
The best approach to test homoscedasticity for two metric variables is graphically. 
Departures from an equal dispersion are shown by such shapes as cones (small dispersion at one side of the graph, large dispersion at the opposite side) or diamonds (a large number of points at the center of the distribution).
Starting by 'SalePrice' and 'GrLivArea'...
#scatter plot
plt.scatter ( df_train [ 'GrLivArea' ], df_train [ 'SalePrice' ]);


Older versions of this scatter plot (previous to log transformations), had a conic shape (go back and check 'Scatter plots between 'SalePrice' and correlated variables (move like Jagger style)'). 
As you can see, the current scatter plot doesn't have a conic shape anymore. 
That's the power of normality! Just by ensuring normality in some variables, we solved the homoscedasticity problem.
Now let's check 'SalePrice' with 'TotalBsmtSF'.
#scatter plot
plt.scatter ( df_train [ df_train [ 'TotalBsmtSF' ] &gt; 0 ][ 'TotalBsmtSF' ], df_train [ df_train [ 'TotalBsmtSF' ] &gt; 0 ][ 'SalePrice' ]);


We can say that, in general, 'SalePrice' exhibit equal levels of variance across the range of 'TotalBsmtSF'. 
Cool!
<h4>Last but not the least, dummy variables</h4>
Easy mode.
#convert categorical variable into dummy
df_train = pd.get_dummies ( df_train )

<h4>Conclusion</h4>
That's it! We reached the end of our exercise.
Throughout this kernel we put in practice many of the strategies proposed by 
Hair et al. (2013). 
We philosophied about the variables, we analysed 'SalePrice' alone and with the most correlated variables, we dealt with missing data and outliers, we tested some of the fundamental statistical assumptions and we even transformed categorial variables into dummy variables. 
That's a lot of work that Python helped us make easier.
But the quest is not over. 
Remember that our story stopped in the Facebook research. 
Now it's time to give a call to 'SalePrice' and invite her to dinner. 
Try to predict her behaviour. 
Do you think she's a girl that enjoys regularized linear regression approaches? Or do you think she prefers ensemble methods? Or maybe something else?
It's up to you to find out.

<h4>8个Python设计小技巧</h4>这篇文章主要和大家分享一些 Python 不一样的技巧，感受 Python 带给你的乐趣吧。

1.print(打印带有颜色的信息)

大家知道 Python 中的信息打印函数 Print，一般我们会使用它打印一些东西，作为一个简单调试。

但是你知道么，这个 Print(打印出来的字体颜色是可以设置的。)

一个小例子

1. def esc (code= 0 ):
2. return f'[ {code} m'
3. print(esc( '31;1;0' ) +  'Error:' +esc()+ 'important' ) 
在控制台或者 Pycharm 运行这段代码之后你会得到结果。
Error :important
其中 Error 是红色加下划线的，important 为默认色
其设置格式为:[显示方式;前景色;背景色 m

下面可以设置的参数:

1.  说明：
2.  前景色            背景色           颜色
3. ---------------------------------------
4.  30                40              黑色
5.  31                41              红色
6.  32                42              绿色
7.  33                43              黃色
8.  34                44              蓝色
9.  35                45              紫红色
10.  36                46              青蓝色
11.  37                47              白色
12.   
13.  显示方式           意义
14. -------------------------
15.  0                终端默认设置
16.  1                高亮显示
17.  4                使用下划线
18.  5                闪烁
19.  7                反白显示
20.  8                不可见
21.   
22.  例子：
23.  [1;31;40m    &amp;lt;!--1-高亮显示 31-前景色红色  40-背景色黑色--&amp;gt;
2.在 Python 中使用定时器

今天看到一个比较人性化的定时模块 schedule，目前 star 数为 6432，还是非常的受欢迎，这个模块也是秉承这 For Humans 的原则，这里推荐给大家。
地址 https://github.com/dbader/schedule

1).通过 pip 即可安装。

pip install schedule
2.）使用案例

1.  import schedule
2.  import time
3.   
4.  def job():
5.      print( "I'm working..." )
6.   
7.  schedule.every(10 ).minutes. do (job) 
8.  schedule.every().hour . do (job)
9.  schedule.every().day .at( "10:30" ). do (job)
10.  schedule.every().monday. do (job)
11.  schedule.every().wednesday.at( "13:15" ). do (job)
12.  schedule.every().minute .at( ":17" ). do (job)
13.   
14.  while  True :
15.      schedule.run_pending()
16.      time .sleep(1 )
从单词的字面意思，你就知道这是做什么的。举个例子:

schedule.every().monday.do(job)

这句代码作用就是就是单词意思，定时器会每个周一运行函数 job，怎么样是不是很简单。

3.实现一个进度条

1. from time import sleep
2.  
3. def progress(percent=30):
4.     left = width * percent // 100
5.     right = width - left
6.     print('
[', ']',
7.           %',
8.           sep='', flush=True)
9.  
10. for i in range(101):
11.     progress(i)
12.     sleep(0.1)
展示效果

<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tOBNsl7emt2YkRvBiaISDWoYfK6nM3OA2ibr8nbXT9FWt6gIhhYZcKgHicaWVcByxECib4Nqu64eape9g/640">

别卧槽了，赶紧快试试吧。

上面的代码中的 print(有几个有用的参数，sep )的作用是已什么为分隔符，默认是空格，这里设置为空串是为了让每个字符之间更紧凑,end 参数作用是已什么结尾，默认是回车换行符，这里为了实现进度条的效果，同样设置为空串。
还有最后一个参数 flush，该参数的作用主要是刷新， 默认 flush = False，不刷新，print(到 f 中的内容先存到内存中；)
而当 flush = True 时它会立即把内容刷新并输出。

4.优雅的打印嵌套类型的数据

大家应该都有印象，在打印 json 字符串或者字典的时候，打印出的一坨东西根本就没有一个层次关系，这里主要说的就是输出格式的问题。
import json
2. my_mapping = {0xc0ffee}
3. print(json.dumps(my_mapping, indent=4, sort_keys=True))
大家可以自己试试只用 print(打印 my_mapping,和例子的这种打印方法。)
如果我们打印字典组成的列表呢，这个时候使用 json 的 dumps 方法肯定不行的，不过没关系,用标准库的 pprint(方法同样可以实现上面的方法)

1. import pprint
2. my_mapping = [{0xc0ffee}]
3. pprint.pprint(my_mapping,width=4)
5.功能简单的类使用 namedtuple 和 dataclass 的方式定义

有时候我们想实现一个类似类的功能，但是没有那么复杂的方法需要操作的时候，这个时候就可以考虑下下面两种方法了。
第一个，namedtuple 又称具名元组，带有名字的元组。
它作为 Python 标准库 collections 里的一个模块，可以实现一个类似类的一个功能。

1. from collections import namedtuple
2.  
3. # 以前简单的类可以使用 namedtuple 实现。
4. Car = namedtuple('color mileage')
5.  
6. my_car = Car(3812.4)
7. print(my_car.color)
8. print(my_car)
但是呢，所有属性需要提前定义好才能使用，比如想使用my_car.name，你就得把代码改成下面的样子。

1. from collections import namedtuple
2.  
3. # 以前简单的类可以使用 namedtuple 实现。
4. Car = namedtuple('color mileage name')
5.  
6. my_car = Car(Car:
4.     color: str
5.     mileage: float
6.  
7. my_car = Car(3812.4)
8. print(my_car.color)
9. print(my_car)

6.f-string 的 !r,!a,!s
f-string出现在Python3.6，作为当前最佳的拼接字符串的形式，看下 f-string 的结构
f ' &amp;lt;text&amp;gt; { &amp;lt;expression&amp;gt; &amp;lt;optional : format specifier&amp;gt; } &amp;lt;text&amp;gt; ... '
其中'!s' 在表达式上调用str（），'!r' 调用表达式上的repr（），'!a' 调用表达式上的ascii（）
(1.默认情况下，f-string将使用str()，但如果包含转换标志，则可以确保它们使用repr () !
1. class Comedian:
2.     def __init__(self, first_name, last_name, age):
3.         self.first_name = first_name
4.         self.last_name = last_name
5.         self.age = age
6.  
7.     def __str__(self):
8.         return f"调用
1. &amp;gt;&amp;gt;&amp;gt; new_comedian = Comedian("{new_comedian}"
3. 'Eric Idle is 74.'
4.  
5. &amp;gt;&amp;gt;&amp;gt; f'Eric Idle is 74.'
7. &amp;gt;&amp;gt;&amp;gt; f'Eric Idle is 74. Surprise!'(2.!a的例子
1. &amp;gt;&amp;gt;&amp;gt; a = 'some string'
2. &amp;gt;&amp;gt;&amp;gt; f'{a!r}'
3. 等价于
1. &amp;gt;&amp;gt;&amp;gt; f'{repr(a)}'
2. 

<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_jpg/Hlibq5A7Z6tOBNsl7emt2YkRvBiaISDWoYhsuyCxCicTrHYeEWsR1jh60a2dKdUacrIAB0ibSflNxUh9D6BzPMO9vA/640">
在python3.8中已经实现上述功能，不过不再使用!d了改为了f"{a=}"的形式，看过这个视频的发现没有!d应该很懵逼.

7.f-string 里"="的应用
在 Python3.8 里有这样一个功能

1. a = 5
2. print(a=5
是不是很方便，不用你再使用f"a={a}"了。
8.海象运算符:=的是使用
1. a =6
2. if (b:=a+6:
3.    print(b)
赋值的时候同时可以进行运算，和 Go 语言的赋值类似了。
代码的运行顺序，首先计算 a+1 得到值为 7，然后把 7 赋值给 b，到这里代码相当于下面这样了。
1. b =7
2. if b&amp;gt;6:
3.    print(b)
怎么样是不是简单了不少，不过这个功能 3.8 开始才能用哦。
总结
今天的内容就到这了，这些内容大多都是一些碎片化的知识，这里整理出来和大家分享一下。同时，这次小编也给大家准备了一批人工智能的学习资料，总共约300G，内容包括视频教程、课件、代码等，涵盖了python、机器学习、数据挖掘等11个部分，是很难得的学习资源。

<h2>Socket Programming in Python: Client, Server</h2>
<a href="https://www.pubnub.com/blog/socket-programming-in-python-client-server-p2p/">Socket Programming in Python: Client, Server, and Peer Examples</a>

<h2>list all functions in a Python module</h2>
To get the docs on all the functions at once, interactively.

print(dir(os)) # show all functions

for i in dir(module): print(i # list out one by one)

The inspect module. 
Also see the pydoc module, the help() function in the interactive interpreter and the pydoc command-line tool which generates the documentation you are after. 
help(os) 

<h2>Python Functions</h2>
<a href="https://www.youtube.com/watch?v=NE97ylAnrz4">Python Functions</a>

<h2>Python Control Flow</h2>
<a href="Python Control Flow.html">Python Control Flow</a>

<h2>Python elegant way to read lines of file into list</h2>

For most cases, to read lines of file to a list

with open(fileName) as f:
  lineList = f.readlines()

In this case, every element in the list contain a \n in the end the string, which would be extremely annoying in some cases.

And there will be same problem if you use:

lineList = list()
with open(fileName) as f:
  for line in f:
    lineList.append(line)

To overcome this, use:

lineList = [line.rstrip('\n') for line in open(fileName)]

<h2>Call a function from another file in Python</h2>

If you have a file a.py and inside you have some functions:

def b():
  # Something
  return 1

def c():
  # Something
  return 2
And you want to import them in z.py you have to write

from a import b, c

<h2>Run JavaScript from Python</h2>
<a href="https://pypi.org/project/Js2Py/" class="whitebut ">Js2Py Run JavaScript from Python</a>
<a href="https://www.youtube.com/watch?v=ByjpBvpPp8Q" class="whitebut ">Run JavaScript from Python</a>

<h2>Python and Selenium Extract Local Storage</h2>
None of the high level programming languages invoke a browser instance, they request and extract pure HTML only. 
So if we want to access the browser's local storage when scraping a page, we need to invoke both a browser instance and leverage a JavaScript interpreter to read the local storage. 
Selenium is the best solution.

A possible replacement for Selenium is <em>PhantomJS</em>, running a headless browser.

<h2>JaveScript to iterate over localStorage browser object</h2>

for (var i = 0; i < localStorage.length; i++){
    key=localStorage.key(i); 
    console.log(key+': '+localStorage.getItem(key));
}

<h2>Advanced script</h2>
As mentioned <a href="http://stackoverflow.com/a/28118108/1230477">here</a> a HTML5 featured browser should also implement <code>Array.prototype.map</code>. 
So script would be:

Array.apply(0, new Array(localStorage.length)).map(function (o, i){
 return localStorage.key(i)+':'+localStorage.getItem(localStorage.key(i)); 
})

<h2>Python with Selenium script for setting up and scraping local storage</h2>

from selenium import webdriver
driver = webdriver.Firefox() 
url='http://www.w3schools.com/'
driver.get(url)
scriptArray="""localStorage.setItem("key1", 'new item');
               localStorage.setItem("key2", 'second item'); 
			return Array.apply(0, new Array(localStorage.length)).map(function (o, i) {
				return localStorage.getItem(localStorage.key(i)); })""" 	
result = driver.execute_script(scriptArray)
print(result)

<h2>Selenium</h2>
<a href="https://www.youtube.com/watch?v=RuNolAh_4bU" class="whitebut ">Python Web-scraping with Selenium</a>
<br>
<div id="Seleniumtuttoc"><a href="#Seleniumtuttopic-0" target="_self" onclick="jumpto(0)">安装selenium库</a> <a href="#Seleniumtuttopic-1" target="_self" onclick="jumpto(1)">安装浏览器驱动</a> <a href="#Seleniumtuttopic-2" target="_self" onclick="jumpto(2)"><br><span class="orange">初始化浏览器对象</span></a> <a href="#Seleniumtuttopic-3" target="_self" onclick="jumpto(3)">访问页面</a> <a href="#Seleniumtuttopic-4" target="_self" onclick="jumpto(4)">设置浏览器大小</a> <a href="#Seleniumtuttopic-5" target="_self" onclick="jumpto(5)">刷新页面</a> <a href="#Seleniumtuttopic-6" target="_self" onclick="jumpto(6)">前进后退</a> <a href="#Seleniumtuttopic-7" target="_self" onclick="jumpto(7)"><br><span class="orange">id定位</span></a> <a href="#Seleniumtuttopic-8" target="_self" onclick="jumpto(8)">name定位</a> <a href="#Seleniumtuttopic-9" target="_self" onclick="jumpto(9)">class定位</a> <a href="#Seleniumtuttopic-10" target="_self" onclick="jumpto(10)">tag定位</a> <a href="#Seleniumtuttopic-11" target="_self" onclick="jumpto(11)">link定位</a> <a href="#Seleniumtuttopic-12" target="_self" onclick="jumpto(12)">partial定位</a> <a href="#Seleniumtuttopic-13" target="_self" onclick="jumpto(13)">xpath定位</a> <a href="#Seleniumtuttopic-14" target="_self" onclick="jumpto(14)">css定位</a> <a href="#Seleniumtuttopic-15" target="_self" onclick="jumpto(15)">find_element的By定位</a> <a href="#Seleniumtuttopic-16" target="_self" onclick="jumpto(16)">3.10. 多个元素</a> <a href="#Seleniumtuttopic-17" target="_self" onclick="jumpto(17)"><br><span class="orange">get_attribute获取属性</span></a> <a href="#Seleniumtuttopic-18" target="_self" onclick="jumpto(18)">获取文本</a> <a href="#Seleniumtuttopic-19" target="_self" onclick="jumpto(19)">获取其他属性</a> <a href="#Seleniumtuttopic-20" target="_self" onclick="jumpto(20)"><br><span class="orange">输入文本</span></a> <a href="#Seleniumtuttopic-21" target="_self" onclick="jumpto(21)">点击</a> <a href="#Seleniumtuttopic-22" target="_self" onclick="jumpto(22)">清除文本</a> <a href="#Seleniumtuttopic-23" target="_self" onclick="jumpto(23)">回车确认</a> <a href="#Seleniumtuttopic-24" target="_self" onclick="jumpto(24)">单选</a> <a href="#Seleniumtuttopic-25" target="_self" onclick="jumpto(25)">多选</a> <a href="#Seleniumtuttopic-26" target="_self" onclick="jumpto(26)">下拉框</a> <a href="#Seleniumtuttopic-27" target="_self" onclick="jumpto(27)"><br><span class="orange">Frame切换</span></a> <a href="#Seleniumtuttopic-28" target="_self" onclick="jumpto(28)">选项卡切换</a> <a href="#Seleniumtuttopic-29" target="_self" onclick="jumpto(29)"><br><span class="orange">左键</span></a> <a href="#Seleniumtuttopic-30" target="_self" onclick="jumpto(30)">右键</a> <a href="#Seleniumtuttopic-31" target="_self" onclick="jumpto(31)">双击</a> <a href="#Seleniumtuttopic-32" target="_self" onclick="jumpto(32)">拖拽</a> <a href="#Seleniumtuttopic-33" target="_self" onclick="jumpto(33)">悬停</a> <a href="#Seleniumtuttopic-34" target="_self" onclick="jumpto(34)"><br><span class="orange">强制等待</span></a> <a href="#Seleniumtuttopic-35" target="_self" onclick="jumpto(35)">隐式等待</a> <a href="#Seleniumtuttopic-36" target="_self" onclick="jumpto(36)">显式等待</a> <a href="#Seleniumtuttopic-37" target="_self" onclick="jumpto(37)"><br><span class="orange">运行JavaScript</span></a> <a href="#Seleniumtuttopic-38" target="_self" onclick="jumpto(38)">Cookie</a> <a href="#Seleniumtuttopic-39" target="_self" onclick="jumpto(39)">反屏蔽</a> </div></center>
Selenium 是一个用于 Web应用程序测试的工具。
<code>Selenium</code>测试直接运行在浏览器中，就像真正的用户在操作一样。支持的浏览器包括<code>IE</code>（7, 8, 9, 10, 11），<code>Mozilla Firefox</code>，<code>Safari</code>，<code>Google Chrome</code>，<code>Opera</code>和<code>Edge</code>等。

<strong>0. 准备工作</strong>
在开始后续功能演示之前，我们需要先安装<code>Chrome</code>浏览器并配置好<code>ChromeDriver</code>，当然也需要安装<code>selenium</code>库！
<h3 id="Seleniumtuttopic-0">安装selenium库</h3>
<code>pip install selenium</code>
<h3 id="Seleniumtuttopic-1">安装浏览器驱动</h3>
其实，有两种方式安装浏览器驱动：一种是常见的手动安装，另一种则是利用第三方库自动安装。
以下前提：大家都已经安装好了<code>Chrome</code>浏览器哈

<strong>手动安装</strong>
先查看本地<code>Chrome</code>浏览器版本：（两种方式均可）
在浏览器的地址栏键入<code>Chrome://version</code>，即可查看浏览器版本号
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltr6SPznf6Q4buxJwOxw6NlZhO4NuMicz6GfUyXN1ibSjCWJUH3fv662hQ/640">

或者点击<code>Chrome</code>菜单 <strong>帮助</strong>→<strong>关于Google Chrome</strong>，查看浏览器版本号
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltzc6TAPmaMGtkLzU8T3kfbFictCTd4qyAn0QycibFOC1SaGxT56Vs4Now/640">

再选择对应版本号的驱动版本
<blockquote>下载地址：https://chromedriver.storage.googleapis.com/index.html</blockquote>
最后进行<strong>环境变量配置</strong>，也就是将对应的<code>ChromeDriver</code>的可执行文件<code>chromedriver.exe</code>文件拖到<code>Python</code>的<code>Scripts</code>目录下。
注：当然也可以不这样做，但是在调用的时候指定<code>chromedriver.exe</code><strong>绝对路径</strong>亦可。

<strong>自动安装</strong>
自动安装需要用到第三方库<code>webdriver_manager</code>，先安装这个库，然后调用对应的方法即可。

<code>from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from webdriver_manager.chrome import ChromeDriverManager
browser = webdriver.Chrome(ChromeDriverManager().install())
browser.get('http://www.baidu.com')
search = browser.find_element_by_id('kw')
search.send_keys('python')
search.send_keys(Keys.ENTER)

# 关闭浏览器
browser.close()</code>
在上述代码中，<code>ChromeDriverManager().install()</code>方法就是自动安装驱动的操作，它会自动获取当前浏览器的版本并去下载对应的驱动到本地。

<code>====== WebDriver manager ======
Current google-chrome version is 96.0.4664
Get LATEST chromedriver version for 96.0.4664 google-chrome
There is no [win32] chromedriver for browser  in cache
Trying to download new driver from https://chromedriver.storage.googleapis.com/96.0.4664.45/chromedriver_win32.zip
Driver has been saved in cache [C:\Users\Gdc\.wdm\drivers\chromedriver\win32\96.0.4664.45]</code>
如果本地已经有该浏览器渠道，则会提示其已存在。

<code>====== WebDriver manager ======
Current google-chrome version is 96.0.4664
Get LATEST driver version for 96.0.4664
Driver [C:\Users\Gdc\.wdm\drivers\chromedriver\win32\96.0.4664.45\chromedriver.exe] found in cache</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltHoFicn1BaTYahgvUibfZdPaFPDngd7D5tgjHrYTB5EI3AMPawLQRzNNw/640">
搞定以上准备工作，我们就可以开始本文正式内容的学习啦~

<strong>1. 基本用法</strong>
这节我们就从初始化浏览器对象、访问页面、设置浏览器大小、刷新页面和前进后退等基础操作。
<h3 id="Seleniumtuttopic-2"><br><span class="orange">初始化浏览器对象</span></h3>
在准备工作部分我们提到需要将浏览器渠道添加到环境变量或者指定绝对路径，前者可以直接初始化后者则需要进行指定。

<code>from selenium import webdriver
# 初始化浏览器为chrome浏览器
browser = webdriver.Chrome()

# 指定绝对路径的方式
path = r'C:\Users\Gdc\.wdm\drivers\chromedriver\win32\96.0.4664.45\chromedriver.exe'
browser = webdriver.Chrome(path)

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltOM7Rol2LNSDXfKSIc2IuThk21ib3XX8q5J1HS0jAOxHmEMWuWIrWj0w/640">
初始化浏览器对象
可以看到以上是有界面的浏览器，我们还可以初始化浏览器为<strong>无界面的浏览器</strong>。

<code>from selenium import webdriver

# 无界面的浏览器
option = webdriver.ChromeOptions()
option.add_argument("headless")
browser = webdriver.Chrome(options=option)

# 访问百度首页
browser.get(r'https://www.baidu.com/')
# 截图预览
browser.get_screenshot_as_file('截图.png')

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltqAc2jFS7wl38uXHkhKrygUlz1H52ECdTR8Hx1OCTz1PL9CibtoLFHIg/640">
截图
完成浏览器对象的初始化后并将其赋值给了<code>browser</code>对象，接下来我们就可以调用<code>browser</code>来执行各种方法模拟浏览器的操作了。
<h3 id="Seleniumtuttopic-3">访问页面</h3>
进行页面访问使用的是<code>get</code>方法，传入参数为待访问页面的<code>URL</code>地址即可。

<code>from selenium import webdriver
# 初始化浏览器为chrome浏览器
browser = webdriver.Chrome()

# 访问百度首页
browser.get(r'https://www.baidu.com/')

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltFPibuMAeXaCRq1OSsuts9g59ibVqic3icNnLBjUJz3RgHKN3v7hW7Fe1dg/640">

<h3 id="Seleniumtuttopic-4">设置浏览器大小</h3>
<code>set_window_size()</code>方法可以用来设置浏览器大小（就是分辨率），而<code>maximize_window</code>则是设置浏览器为全屏！

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()

# 设置浏览器大小：全屏
browser.maximize_window()   
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 设置分辨率 500*500
browser.set_window_size(500,500)  
time.sleep(2)

# 设置分辨率 1000*800
browser.set_window_size(1000,800) 
time.sleep(2)

# 关闭浏览器
browser.close()</code>
这里就不截图了，大家自行演示看效果哈~
<h3 id="Seleniumtuttopic-5">刷新页面</h3>
刷新页面是我们在浏览器操作时很常用的操作，这里<code>refresh()</code>方法可以用来进行浏览器页面刷新。

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()

# 设置浏览器全屏
browser.maximize_window()   
browser.get(r'https://www.baidu.com')  
time.sleep(2)

try:
    # 刷新页面
    browser.refresh()  
    print('刷新页面')
except Exception as e:
    print('刷新失败')
   
# 关闭浏览器
browser.close()</code>
大家也是自行演示看效果哈，同<code>F5</code>快捷键。
<h3 id="Seleniumtuttopic-6">前进后退</h3>
前进后退也是我们在使用浏览器时非常常见的操作，这里<code>forward()</code>方法可以用来实现前进，<code>back()</code>可以用来实现后退。

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()

# 设置浏览器全屏
browser.maximize_window()   
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 打开淘宝页面
browser.get(r'https://www.taobao.com')  
time.sleep(2)

# 后退到百度页面
browser.back()  
time.sleep(2)

# 前进的淘宝页面
browser.forward() 
time.sleep(2)

# 关闭浏览器
browser.close()</code>

<strong>2. 获取页面基础属性</strong>
当我们用<code>selenium</code>打开某个页面，有一些基础属性如网页标题、网址、浏览器名称、页面源码等信息。

<code>from selenium import webdriver
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com') 

# 网页标题
print(browser.title)
# 当前网址
print(browser.current_url)
# 浏览器名称
print(browser.name)
# 网页源码
print(browser.page_source)</code>
输出如下：
<code>百度一下，你就知道
https://www.baidu.com/
chrome
&lt;html&gt;&lt;head&gt;&lt;script async="" src="https://passport.baidu.com/passApi/js/wrapper.js?cdnversion=1640515789507&amp;_=1640515789298"&gt;&lt;/script&gt;&lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8"&gt;&lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt;&lt;meta content="always" name="referrer"&gt;&lt;meta name="theme-color"..."</code>
需要注意的是，这里的页面源码我们就可以用<code>正则表达式</code>、<code>Bs4</code>、<code>xpath</code>以及<code>pyquery</code>等工具进行解析提取想要的信息了。

<strong>3. 定位页面元素</strong>
我们在实际使用浏览器的时候，很重要的操作有输入文本、点击确定等等。对此，<code>Selenium</code>提供了一系列的方法来方便我们实现以上操作。常说的<code>8种</code>定位页面元素的操作方式，我们一一演示一下！
我们以百度首页的搜索框节点为例，<strong>搜索python</strong>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltP9Oa7QrsJsXc6SOZTqnMJ1GYNzB2b2VHE8s3gsLWmHjVBHgzZWRTnQ/640">
搜索框
搜索框的<code>html</code>结构：

<code>&lt;input id="kw" name="wd" class="s_ipt" value="" maxlength="255" autocomplete="off"&gt;</code>
<h3 id="Seleniumtuttopic-7"><br><span class="orange">id定位</span></h3>
<code>find_element_by_id()</code>根据<code>id</code>属性获取，这里<code>id</code>属性是 <code>kw</code>
<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 在搜索框输入 python
browser.find_element_by_id('kw').send_keys('python')
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltvXbRK2ncrlXE3tkuTezSI3XszFkXHOQrLFKBG0ftCXQyfJYs5LNTXA/640">

<h3 id="Seleniumtuttopic-8">name定位</h3>
<code>find_element_by_name()</code>根据<code>name</code>属性获取，这里<code>name</code>属性是 <code>wd</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 在搜索框输入 python
browser.find_element_by_name('wd').send_keys('python')
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-9">class定位</h3>
<code>find_element_by_class_name()</code>根据<code>class</code>属性获取，这里<code>class</code>属性是<code>s_ipt</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 在搜索框输入 python
browser.find_element_by_class_name('s_ipt').send_keys('python')
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-10">tag定位</h3>
我们知道<code>HTML</code>是通过<code>tag</code>来定义功能的，比如<code>input</code>是输入，<code>table</code>是表格等等。每个元素其实就是一个<code>tag</code>，一个<code>tag</code>往往用来定义一类功能，我们查看百度首页的<code>html</code>代码，可以看到有<strong>很多同类</strong><code>tag</code>，所以其实很难通过<code>tag</code>去区分不同的元素。

<code>find_element_by_tag_name()</code>
<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 在搜索框输入 python
browser.find_element_by_tag_name('input').send_keys('python')
time.sleep(2)

# 关闭浏览器
browser.close()</code>
由于存在多个<code>input</code>，以上代码会报错。
<h3 id="Seleniumtuttopic-11">link定位</h3>
这种方法顾名思义就是用来定位文本链接的，比如百度首页上方的分类模块链接。

<code>find_element_by_link_text()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltKQwpCbw19yJU7ubF1jXTjCnex1vHrxsnbicxqYe3K3j3g2LNmEUHdDQ/640">
以新闻为例

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 点击新闻 链接
browser.find_element_by_link_text('新闻').click()
time.sleep(2)

# 关闭浏览器全部页面
browser.quit()</code>
<h3 id="Seleniumtuttopic-12">partial定位</h3>
有时候一个超链接的文本很长，我们如果全部输入，既麻烦，又显得代码很不美观，这时候我们就可以只截取一部分字符串，用这种方法模糊匹配了。

<code>find_element_by_partial_link_text()</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 点击新闻 链接
browser.find_element_by_partial_link_text('闻').click()
time.sleep(2)

# 关闭浏览器全部页面
browser.quit()</code>
<h3 id="Seleniumtuttopic-13">xpath定位</h3>
前面介绍的几种定位方法都是在理想状态下，有一定使用范围的，那就是：在当前页面中，每个元素都有一个<strong>唯一</strong>的<code>id</code>或<code>name</code>或<code>class</code>或<code>超链接文本</code>的属性，那么我们就可以通过这个唯一的属性值来定位他们。

但是在实际工作中并非有这么美好，那么这个时候我们就只能通过<code>xpath</code>或者<code>css</code>来定位了。

<code>find_element_by_xpath()</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 在搜索框输入 python
browser.find_element_by_xpath("//*[@id='kw']").send_keys('python')
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-14">css定位</h3>
这种方法相对<code>xpath</code>要简洁些，定位速度也要快些。

<code>find_element_by_css_selector()</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 在搜索框输入 python
browser.find_element_by_css_selector('#kw').send_keys('python')
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-15">find_element的By定位</h3>
除了上述的<code>8</code>种定位方法，<code>Selenium</code>还提供了一个通用的方法<code>find_element()</code>，这个方法有两个参数：定位方式和定位值。

<code># 使用前先导入By类
from selenium.webdriver.common.by import By</code>
以上的操作可以等同于以下：

<code>browser.find_element(By.ID,'kw')
browser.find_element(By.NAME,'wd')
browser.find_element(By.CLASS_NAME,'s_ipt')
browser.find_element(By.TAG_NAME,'input')
browser.find_element(By.LINK_TEXT,'新闻')
browser.find_element(By.PARTIAL_LINK_TEXT,'闻')
browser.find_element(By.XPATH,'//*[@id="kw"]')
browser.find_element(By.CSS_SELECTOR,'#kw')</code>
<h3 id="Seleniumtuttopic-16">3.10. 多个元素</h3>
如果定位的目标元素在网页中不止一个，那么则需要用到<code>find_elements</code>，得到的结果会是列表形式。简单来说，就是<code>element</code>后面多了复数标识<code>s</code>，其他操作一致。

<strong>4. 获取页面元素属性</strong>

既然我们有很多方式来定位页面的元素，那么接下来就可以考虑获取以下元素的属性了，尤其是用<code>Selenium</code>进行<strong>网络爬虫</strong>的时候。
<h3 id="Seleniumtuttopic-17"><br><span class="orange">get_attribute获取属性</span></h3>
以百度首页的logo为例，获取logo相关属性
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltjpEkLP0Y82fsI3s9tr8U0q61xwqIcicM6DMfXiaWQeIfbnNsrswnmKtg/640">
<code>&lt;img hidefocus="true" id="s_lg_img" class="index-logo-src" src="//www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png" width="270" height="129" onerror="this.src='//www.baidu.com/img/flexible/logo/pc/index.png';this.onerror=null;" usemap="#mp"&gt;</code>
<strong>获取logo的图片地址</strong>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  

logo = browser.find_element_by_class_name('index-logo-src')
print(logo)
print(logo.get_attribute('src'))

# 关闭浏览器
browser.close()</code>
输出：

<code>&lt;selenium.webdriver.remote.webelement.WebElement (session="e95b18c43a330745af019e0041f0a8a4", element="7dad5fc0-610b-45b6-b543-9e725ee6cc5d")&gt;
https://www.baidu.com/img/PCtm_d9c8750bed0b3c7d089fa7d55720d6cf.png</code>
<h3 id="Seleniumtuttopic-18">获取文本</h3>
以热榜为例，获取热榜文本和链接
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tlt2GDicwrjv2XUaaaibHW3jknVpqRDicyKpCabyKhdWLM2egQHdsz7yzKtQ/640">
<code>&lt;a class="title-content tag-width c-link c-font-medium c-line-clamp1" href="https://www.baidu.com/s?cl=3&amp;tn=baidutop10&amp;fr=top1000&amp;wd=各地贯彻十九届六中全会精神纪实&amp;rsv_idx=2&amp;rsv_dl=fyb_n_homepage&amp;sa=fyb_n_homepage&amp;hisfilter=1" target="_blank"&gt;&lt;span class="title-content-index c-index-single c-index-single-hot1"&gt;1&lt;/span&gt;&lt;span class="title-content-title"&gt;各地贯彻十九届六中全会精神纪实&lt;/span&gt;&lt;/a&gt;</code>
获取热榜的<strong>文本</strong>，用的是<code>text</code>属性，直接调用即可

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  

logo = browser.find_element_by_css_selector('#hotsearch-content-wrapper &gt; li:nth-child(1) &gt; a')
print(logo.text)
print(logo.get_attribute('href'))

# 关闭浏览器
browser.close()</code>
输出：

<code>1各地贯彻十九届六中全会精神纪实
https://www.baidu.com/s?cl=3&amp;tn=baidutop10&amp;fr=top1000&amp;wd=各地贯彻十九届六中全会精神纪实&amp;rsv_idx=2&amp;rsv_dl=fyb_n_homepage&amp;sa=fyb_n_homepage&amp;hisfilter=1</code>
<h3 id="Seleniumtuttopic-19">获取其他属性</h3>
除了属性和文本值外，还有id、位置、标签名和大小等属性。

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  

logo = browser.find_element_by_class_name('index-logo-src')
print(logo.id)
print(logo.location)
print(logo.tag_name)
print(logo.size)

# 关闭浏览器
browser.close()</code>
输出：

<code>6af39c9b-70e8-4033-8a74-7201ae09d540
{'x': 490, 'y': 46}
img
{'height': 129, 'width': 270}</code>

<strong>5. 页面交互操作</strong>

页面交互就是在浏览器的各种操作，比如上面演示过的输入文本、点击链接等等，还有像清除文本、回车确认、单选框与多选框选中等。
<h3 id="Seleniumtuttopic-20"><br><span class="orange">输入文本</span></h3>
其实，在之前的小节中我们有用过此操作。

<code>send_keys()</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 定位搜索框
input = browser.find_element_by_class_name('s_ipt')
# 输入python
input.send_keys('python')
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-21">点击</h3>
同样，我们也用过这个点击操作。

<code>click()</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 选中新闻按钮
click = browser.find_element_by_link_text('新闻')
# 点击之
click.click()
time.sleep(2)

# 关闭浏览器全部页面
browser.quit()</code>
<h3 id="Seleniumtuttopic-22">清除文本</h3>
既然有输入，这里也就有清除文本啦。

<code>clear()</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 定位搜索框
input = browser.find_element_by_class_name('s_ipt')
# 输入python
input.send_keys('python')
time.sleep(2)
# 清除python
input.clear()
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-23">回车确认</h3>
比如，在搜索框输入文本<code>python</code>，然后回车就出查询操作结果的情况。

<code>submit()</code>

<code>from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 定位搜索框
input = browser.find_element_by_class_name('s_ipt')
# 输入python
input.send_keys('python')
time.sleep(2)
# 回车查询
input.submit()
time.sleep(5)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-24">单选</h3>
单选比较好操作，<strong>先定位</strong>需要单选的某个元素，然后<strong>点击</strong>一下即可。
<h3 id="Seleniumtuttopic-25">多选</h3>
多选好像也比较容易，<strong>依次定位</strong>需要选择的元素，<strong>点击</strong>即可。
<h3 id="Seleniumtuttopic-26">下拉框</h3>
下拉框的操作相对复杂一些，需要用到<code>Select</code>模块。

先导入该类

<code>from selenium.webdriver.support.select import Select</code>
在<code>select</code>模块中有以下定位方法
<blockquote>
<code>'''1、三种选择某一选项项的方法'''

select_by_index()           # 通过索引定位；注意：index索引是从“0”开始。
select_by_value()           # 通过value值定位，value标签的属性值。
select_by_visible_text()    # 通过文本值定位，即显示在下拉框的值。

'''2、三种返回options信息的方法'''

options                     # 返回select元素所有的options
all_selected_options        # 返回select元素中所有已选中的选项
first_selected_options      # 返回select元素中选中的第一个选项                  

'''3、四种取消选中项的方法'''

deselect_all                # 取消全部的已选择项
deselect_by_index           # 取消已选中的索引项
deselect_by_value           # 取消已选中的value值
deselect_by_visible_text    # 取消已选中的文本值</code>
</blockquote>
我们来进行演示一波，由于暂时没找到合适的网页，我这边写了一个简单的网页本地测试（文件存为 帅哥.html)

<code>&lt;html&gt;

&lt;body&gt;

&lt;form&gt;
&lt;select name="帅哥"&gt;
&lt;option value="才哥"&gt;才哥&lt;/option&gt;
&lt;option value="小明" selected=""&gt;小明&lt;/option&gt;
&lt;option value="小华"&gt;小华&lt;/option&gt;
&lt;option value="草儿"&gt;小草&lt;/option&gt;
&lt;/select&gt;
&lt;/form&gt;

&lt;/body&gt;
&lt;/html&gt;</code>
然后，再演示<strong>下拉框的不同选择的方式</strong>

<code>from selenium import webdriver
from selenium.webdriver.support.select import Select
import time

url = 'file:///C:/Users/Gdc/Desktop/帅哥.html'
browser = webdriver.Chrome()
browser.get(url)
time.sleep(2)

# 根据索引选择
Select(browser.find_element_by_name("帅哥")).select_by_index("2")
time.sleep(2)
# 根据value值选择
Select(browser.find_element_by_name("帅哥")).select_by_value("草儿")
time.sleep(2)
# 根据文本值选择
Select(browser.find_element_by_name("帅哥")).select_by_visible_text("才哥")
time.sleep(2)

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_gif/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltCs25zN9tH45ecHyT8w4rHQN0bZtlvQ13BwFxBR56Y9NCEzRfbdpibLQ/640">
下拉框

<strong>6. 多窗口切换</strong>

比如同一个页面的不同子页面的节点元素获取操作，不同选项卡之间的切换以及不同浏览器窗口之间的切换操作等等。
<h3 id="Seleniumtuttopic-27"><br><span class="orange">Frame切换</span></h3>
<code>Selenium</code>打开一个页面之后，默认是在父页面进行操作，此时如果这个页面还有子页面，想要获取子页面的节点元素信息则需要切换到子页面进行擦走，这时候<code>switch_to.frame()</code>就来了。如果想回到父页面，用<code>switch_to.parent_frame()</code>即可。
<h3 id="Seleniumtuttopic-28">选项卡切换</h3>
我们在访问网页的时候会打开很多个页面，在<code>Selenium</code>中提供了一些方法方便我们对这些页面进行操作。
<blockquote>
<code>current_window_handle</code>：获取当前窗口的句柄。

<code>window_handles</code>：返回当前浏览器的所有窗口的句柄。

<code>switch_to_window()</code>：用于切换到对应的窗口。
</blockquote>
<code>from selenium import webdriver
import time
browser = webdriver.Chrome()

# 打开百度
browser.get('http://www.baidu.com')
# 新建一个选项卡
browser.execute_script('window.open()')
print(browser.window_handles)
# 跳转到第二个选项卡并打开知乎
browser.switch_to.window(browser.window_handles[1])
browser.get('http://www.zhihu.com')
# 回到第一个选项卡并打开淘宝（原来的百度页面改为了淘宝）
time.sleep(2)
browser.switch_to.window(browser.window_handles[0])
browser.get('http://www.taobao.com')</code>

<strong>7. 模拟鼠标操作</strong>

既然是模拟浏览器操作，自然也就需要能模拟鼠标的一些操作了，这里需要导入<code>ActionChains</code> 类。

<code>from selenium.webdriver.common.action_chains import ActionChains</code>
<h3 id="Seleniumtuttopic-29"><br><span class="orange">左键</span></h3>
这个其实就是页面交互操作中的点击<code>click()</code>操作。
<h3 id="Seleniumtuttopic-30">右键</h3>
<code>context_click()</code>

<code>from selenium.webdriver.common.action_chains import ActionChains
from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 定位到要右击的元素，这里选的新闻链接
right_click = browser.find_element_by_link_text('新闻')

# 执行鼠标右键操作
ActionChains(browser).context_click(right_click).perform()
time.sleep(2)

# 关闭浏览器
browser.close()</code>
在上述操作中
<blockquote>
<code>ActionChains(browser)</code>：调用<code>ActionChains()</code>类，并将浏览器驱动<code>browser</code>作为参数传入

<code>context_click(right_click)</code>：模拟鼠标双击，需要传入指定元素定位作为参数

<code>perform()</code>：执行<code>ActionChains()</code>中储存的所有操作，可以看做是执行之前一系列的操作
</blockquote><h3 id="Seleniumtuttopic-31">双击</h3>
<code>double_click()</code>

<code>from selenium.webdriver.common.action_chains import ActionChains
from selenium import webdriver
import time  
browser = webdriver.Chrome()
browser.get(r'https://www.baidu.com')  
time.sleep(2)

# 定位到要双击的元素
double_click = browser.find_element_by_css_selector('#bottom_layer &gt; div &gt; p:nth-child(8) &gt; span')

# 双击
ActionChains(browser).double_click(double_click).perform()
time.sleep(15)

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltVfUiaPns1h2KbibrMpmsmTkSvyoqkIiaMjaRteG85sqUkJu8GJsJTDCicg/640">

<h3 id="Seleniumtuttopic-32">拖拽</h3>
<code>drag_and_drop(source,target)</code>拖拽操作嘛，开始位置和结束位置需要被指定，这个常用于滑块类验证码的操作之类。

我们以菜鸟教程的一个案例来进行演示
<blockquote>
https://www.runoob.com/try/try.php?filename=jqueryui-api-droppable
</blockquote>
<code>from selenium.webdriver.common.action_chains import ActionChains
from selenium import webdriver
import time  
browser = webdriver.Chrome()
url = 'https://www.runoob.com/try/try.php?filename=jqueryui-api-droppable'
browser.get(url)  
time.sleep(2)
browser.switch_to.frame('iframeResult')

# 开始位置
source = browser.find_element_by_css_selector("#draggable")

# 结束位置
target = browser.find_element_by_css_selector("#droppable")

# 执行元素的拖放操作
actions = ActionChains(browser)
actions.drag_and_drop(source, target)
actions.perform()
# 拖拽
time.sleep(15)

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_gif/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltEjocOXndLKfutb5DOzjOAfdIG0nlCJnFz7BAr8ZNRAcS4hKr8tHkaw/640">
拖拽

<h3 id="Seleniumtuttopic-33">悬停</h3>
<code>move_to_element()</code>

<code>from selenium.webdriver.common.action_chains import ActionChains
from selenium import webdriver
import time  
browser = webdriver.Chrome()
url = 'https://www.baidu.com'
browser.get(url)  
time.sleep(2)

# 定位悬停的位置
move = browser.find_element_by_css_selector("#form &gt; span.bg.s_ipt_wr.new-pmd.quickdelete-wrap &gt; span.soutu-btn")

# 悬停操作
ActionChains(browser).move_to_element(move).perform()
time.sleep(5)

# 关闭浏览器
browser.close()</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tltqD70xAWuVPsYbiat3SwXY8K7liczQA0N0D8IzKfrjnkS8qnqTpvHXa4A/640">
悬停效果

<strong>8. 模拟键盘操作</strong>

<code>selenium</code>中的<code>Keys()</code>类提供了大部分的键盘操作方法，通过<code>send_keys()</code>方法来模拟键盘上的按键。

引入<code>Keys</code>类

<code>from selenium.webdriver.common.keys import Keys</code>
常见的键盘操作
<blockquote>
<code>send_keys(Keys.BACK_SPACE)</code>：删除键(BackSpace)

<code>send_keys(Keys.SPACE)</code>：空格键(Space)

<code>send_keys(Keys.TAB)</code>：制表键(TAB)

<code>send_keys(Keys.ESCAPE)</code>：回退键(ESCAPE)

<code>send_keys(Keys.ENTER)</code>：回车键(ENTER)

<code>send_keys(Keys.CONTRL,'a')</code>：全选(Ctrl+A)

<code>send_keys(Keys.CONTRL,'c')</code>：复制(Ctrl+C)

<code>send_keys(Keys.CONTRL,'x')</code>：剪切(Ctrl+X)

<code>send_keys(Keys.CONTRL,'v')</code>：粘贴(Ctrl+V)

<code>send_keys(Keys.F1)</code>：键盘F1

.....

<code>send_keys(Keys.F12)</code>：键盘F12
</blockquote>
实例操作演示：

<strong>定位需要操作的元素，然后操作即可！</strong>

<code>from selenium.webdriver.common.keys import Keys
from selenium import webdriver
import time
browser = webdriver.Chrome()
url = 'https://www.baidu.com'
browser.get(url)  
time.sleep(2)

# 定位搜索框
input = browser.find_element_by_class_name('s_ipt')
# 输入python
input.send_keys('python')
time.sleep(2)

# 回车
input.send_keys(Keys.ENTER)
time.sleep(5)

# 关闭浏览器
browser.close()</code>

<strong>9. 延时等待</strong>

如果遇到使用<code>ajax</code>加载的网页，页面元素可能不是同时加载出来的，这个时候尝试在<code>get</code>方法执行完成时获取网页源代码可能并非浏览器完全加载完成的页面。所以，这种情况下需要设置延时等待一定时间，确保全部节点都加载出来。

三种方式可以来玩玩：强制等待、隐式等待和显式等待
<h3 id="Seleniumtuttopic-34"><br><span class="orange">强制等待</span></h3>
就很简单了，直接<code>time.sleep(n)</code>强制等待n秒，在执行<code>get</code>方法之后执行。
<h3 id="Seleniumtuttopic-35">隐式等待</h3>
<code>implicitly_wait()</code>设置等待时间，如果到时间有元素节点没有加载出来，就会抛出异常。

<code>from selenium import webdriver
browser = webdriver.Chrome()

# 隐式等待，等待时间10秒
browser.implicitly_wait(10)  
browser.get('https://www.baidu.com')
print(browser.current_url)
print(browser.title)

# 关闭浏览器
browser.close()</code>
<h3 id="Seleniumtuttopic-36">显式等待</h3>
设置一个等待时间和一个条件，在规定时间内，每隔一段时间查看下条件是否成立，如果成立那么程序就继续执行，否则就抛出一个超时异常。

<code>from selenium import webdriver
from selenium.webdriver.support.wait import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.common.by import By
import time
browser = webdriver.Chrome()
browser.get('https://www.baidu.com')
# 设置等待时间10s
wait = WebDriverWait(browser, 10)
# 设置判断条件：等待id='kw'的元素加载完成
input = wait.until(EC.presence_of_element_located((By.ID, 'kw')))
# 在关键词输入：关键词
input.send_keys('Python')

# 关闭浏览器
time.sleep(2)
browser.close()</code>
<strong>WebDriverWait的参数说明</strong>：
<blockquote>
<code>WebDriverWait(driver,timeout,poll_frequency=0.5,ignored_exceptions=None)</code>

<code>driver</code>: 浏览器驱动

<code>timeout</code>: 超时时间，等待的最长时间（同时要考虑隐性等待时间）

<code>poll_frequency</code>: 每次检测的间隔时间，默认是0.5秒

<code>ignored_exceptions</code>:超时后的异常信息，默认情况下抛出<code>NoSuchElementException</code>异常

until(method,message='')

<code>method</code>: 在等待期间，每隔一段时间调用这个传入的方法，直到返回值不是False

<code>message</code>: 如果超时，抛出<code>TimeoutException</code>，将<code>message</code>传入异常

until_not(method,message='')

<code>until_not</code> 与<code>until</code>相反，<code>until</code>是当某元素出现或什么条件成立则继续执行，<code>until_not</code>是当某元素消失或什么条件不成立则继续执行，参数也相同。
</blockquote>
<strong>其他等待条件</strong>

<code>from selenium.webdriver.support import expected_conditions as EC

# 判断标题是否和预期的一致
title_is
# 判断标题中是否包含预期的字符串
title_contains

# 判断指定元素是否加载出来
presence_of_element_located
# 判断所有元素是否加载完成
presence_of_all_elements_located

# 判断某个元素是否可见. 可见代表元素非隐藏，并且元素的宽和高都不等于0，传入参数是元组类型的locator
visibility_of_element_located
# 判断元素是否可见，传入参数是定位后的元素WebElement
visibility_of
# 判断某个元素是否不可见，或是否不存在于DOM树
invisibility_of_element_located

# 判断元素的 text 是否包含预期字符串
text_to_be_present_in_element
# 判断元素的 value 是否包含预期字符串
text_to_be_present_in_element_value

#判断frame是否可切入，可传入locator元组或者直接传入定位方式：id、name、index或WebElement
frame_to_be_available_and_switch_to_it

#判断是否有alert出现
alert_is_present

#判断元素是否可点击
element_to_be_clickable

# 判断元素是否被选中,一般用在下拉列表，传入WebElement对象
element_to_be_selected
# 判断元素是否被选中
element_located_to_be_selected
# 判断元素的选中状态是否和预期一致，传入参数：定位后的元素，相等返回True，否则返回False
element_selection_state_to_be
# 判断元素的选中状态是否和预期一致，传入参数：元素的定位，相等返回True，否则返回False
element_located_selection_state_to_be

#判断一个元素是否仍在DOM中，传入WebElement对象，可以判断页面是否刷新了
staleness_of</code>

<strong>10. 其他</strong>

补充一些
<h3 id="Seleniumtuttopic-37"><br><span class="orange">运行JavaScript</span></h3>
还有一些操作，比如下拉进度条，模拟<code>javaScript</code>，使用<code>execute_script</code>方法来实现。

<code>from selenium import webdriver
browser = webdriver.Chrome()
# 知乎发现页
browser.get('https://www.zhihu.com/explore')
browser.execute_script('window.scrollTo(0, document.body.scrollHeight)')
browser.execute_script('alert("To Bottom")')</code>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/vQr6oPKZqgtYTcTKjJELjQz8ibE6O3tlticUkkCNfXJoapYibOCzoKrWgqxW20SbIGB4dZJVkDuM1nAY7w5gNbPNQ/640">

<h3 id="Seleniumtuttopic-38">Cookie</h3>
在<code>selenium</code>使用过程中，还可以很方便对<code>Cookie</code>进行获取、添加与删除等操作。

<code>from selenium import webdriver
browser = webdriver.Chrome()
# 知乎发现页
browser.get('https://www.zhihu.com/explore')
# 获取cookie
print(f'Cookies的值：{browser.get_cookies()}')
# 添加cookie
browser.add_cookie({'name':'才哥', 'value':'帅哥'})
print(f'添加后Cookies的值：{browser.get_cookies()}')
# 删除cookie
browser.delete_all_cookies()
print(f'删除后Cookies的值：{browser.get_cookies()}')</code>
输出：

<code>Cookies的值：[{'domain': '.zhihu.com', 'httpOnly': False, 'name': 'Hm_lpvt_98beee57fd2ef70ccdd5ca52b9740c49', 'path': '/', 'secure': False, 'value': '1640537860'}, {'domain': '.zhihu.com', ...]
添加后Cookies的值：[{'domain': 'www.zhihu.com', 'httpOnly': False, 'name': '才哥', 'path': '/', 'secure': True, 'value': '帅哥'}, {'domain': '.zhihu.com', 'httpOnly': False, 'name': 'Hm_lpvt_98beee57fd2ef70ccdd5ca52b9740c49', 'path': '/', 'secure': False, 'value': '1640537860'}, {'domain': '.zhihu.com',...]
删除后Cookies的值：[]</code>
<h3 id="Seleniumtuttopic-39">反屏蔽</h3>
发现美团直接给<code>Selenium</code>给屏蔽了，不知道怎么搞！！



<h2>Python bindings alternative to Python+Selenium</h2>
Some might argue Selenium is inefficient for only local storage extracting. 
If you think Selenium is too bulky, you might want to try a Python binding with a development framework for desktop, ex. <a href="https://riverbankcomputing.com/software/pyqt/intro" rel="nofollow">PyQt</a>. 

<h2>execute_script</h2>
Python doesn't provide a way to directly read/write the local storage, but it can be done with <b>execute_script</b>.

driver.execute_script("window.localStorage;")

or:
from selenium import webdriver
wd = webdriver.Firefox()
wd.get("http://localhost/foo/bar")
wd.execute_script("return localStorage.getItem('foo')")

or:
driver.execute_script("window.localStorage.setItem('key','value');");
driver.execute_script("window.localStorage.getItem('key');");

or define class:

class LocalStorage:

    def __init__(self, driver) :
        self.driver = driver

    def __len__(self):
        return self.driver.execute_script("return window.localStorage.length;")

    def items(self) :
        return self.driver.execute_script( \
            "var ls = window.localStorage, items = {}; " \
            "for (var i = 0, k; i < ls.length; ++i) " \
            "  items[k = ls.key(i)] = ls.getItem(k); " \
            "return items; ")

    def keys(self) :
        return self.driver.execute_script( \
            "var ls = window.localStorage, keys = []; " \
            "for (var i = 0; i < ls.length; ++i) " \
            "  keys[i] = ls.key(i); " \
            "return keys; ")

    def get(self, key):
        return self.driver.execute_script("return window.localStorage.getItem(arguments[0]);", key)

    def set(self, key, value):
        self.driver.execute_script("window.localStorage.setItem(arguments[0], arguments[1]);", key, value)

    def has(self, key):
        return key in self.keys()

    def remove(self, key):
        self.driver.execute_script("window.localStorage.removeItem(arguments[0]);", key)

    def clear(self):
        self.driver.execute_script("window.localStorage.clear();")

    def __getitem__(self, key) :
        value = self.get(key)
        if value is None :
          raise KeyError(key)
        return value

    def __setitem__(self, key, value):
        self.set(key, value)

    def __contains__(self, key):
        return key in self.keys()

    def __iter__(self):
        return self.items().__iter__()

    def __repr__(self):
        return self.items().__str__()
Usage example:

# get the local storage
storage = LocalStorage(driver)

# set an item
storage["mykey"] = 1234
storage.set("mykey2", 5678)

# get an item
print(storage["mykey"])      # raises a KeyError if the key is missing
print(storage.get("mykey"))  # returns None if the key is missing

# delete an item
storage.remove("mykey")

# iterate items
for key, value in storage.items():
  print("%s: %s" % (key, value))

# delete items
storage.clear()

<h2>to list all python packages installed</h2>
As of version 1.3 of pip you can now use 
<i>pip list</i>

Using help function
help("modules")

using python-pip
pip freeze 
pip freeze will output a list of installed packages and their versions.
It also allows you to write those packages to a file that can later be used to set up a new environment.

<h2>20 Python libraries you can't live without</h2>
Requests	Scrapy	wxPython	Pillow	SQLAlchemy	BeautifulSoup	Twisted
NumPy	SciPy	matplotlib	Pygame	Pyglet	pyQT	pyGtk	Scapy
pywin32	nltk	nose	SymPy	IPython

1. Requests. 
2. Scrapy. must have library in webscraping
3. wxPython. A gui toolkit for python. I have primarily used it in place of tkinter.
4. Pillow. A friendly fork of PIL (Python Imaging Library). It is more user friendly than PIL and is a must have for anyone who works with images.
5. SQLAlchemy. A database library. Many love it and many hate it.
6. BeautifulSoup. I know it’s slow but this xml and html parsing library is very useful for beginners.
7. Twisted. The most important tool for any network application developer. It has a very beautiful api.
8. NumPy. provides advance math functionalities to python.
9. SciPy. When we talk about NumPy then we have to talk about scipy. It is a library of algorithms and mathematical tools for python and has caused many scientists to switch from ruby to python.
10. matplotlib. A numerical plotting library. It is very useful for any data scientist or any data analyzer.
11. Pygame. game development.
12. Pyglet. A 3d animation and game creation engine. This is the engine in which the famous python port of minecraft was made
13. pyQT. A GUI toolkit for python
14. pyGtk. Another python GUI library
15. Scapy. A packet sniffer and analyzer for python made in python.
16. pywin32. A python library which provides some useful methods and classes for interacting with windows.
17. nltk. Natural Language Toolkit – I realize most people won’t be using this one, but it’s generic enough. It is a very useful library if you want to manipulate strings. But it’s capacity is beyond that. Do check it out.
18. nose. A testing framework for python. It is used by millions of python developers. It is a must have if you do test driven development.
19. SymPy. SymPy can do algebraic evaluation, differentiation, expansion, complex numbers, etc. It is contained in a pure Python distribution.
20. IPython. It is a python prompt on steroids. It has completion, history, shell capabilities, and a lot more. Make sure that you take a look at it.

Installed Python packages:

IPython             brain_curses        lazy_object_proxy   sqlite3
PdbSublimeTextSupport brain_dateutil      lesscpy             sre_compile
PyInstaller         brain_fstrings      lib2to3             sre_constants
PyQt5               brain_functools     libfuturize         sre_parse
Radiobutton         brain_gi            libpasteurize       ssl
__future__          brain_hashlib       linecache           sspi
_ast                brain_http          lineedit            sspicon
_asyncio            brain_io            locale              stat
_asyncio_d          brain_mechanize     logging             statistics
_bisect             brain_multiprocessing lzma                storemagic
_blake2             brain_namedtuple_enum macpath             string
_bootlocale         brain_nose          macurl2path         stringprep
_bz2                brain_numpy         mailbox             struct
_bz2_d              brain_pkg_resources mailcap             subprocess
_codecs             brain_pytest        markupsafe          sunau
_codecs_cn          brain_qt            marshal             symbol
_codecs_hk          brain_random        math                sympy
_codecs_iso2022     brain_re            matplotlib          sympyprinting
_codecs_jp          brain_six           mccabe              symtable
_codecs_kr          brain_ssl           mimetypes           sys
_codecs_tw          brain_subprocess    mistune             sysconfig
_collections        brain_threading     mmap                tabnanny
_collections_abc    brain_typing        mmapfile            tarfile
_compat_pickle      brain_uuid          mmsystem            telnetlib
_compression        builtins            modulefinder        tempfile
_csv                bz2                 more_itertools      tensorflow
_ctypes             cProfile            mpmath              terminado
_ctypes_d           cachetools          msilib              test
_ctypes_test        calendar            msvcrt              testpath
_ctypes_test_d      certifi             multiprocessing     tests
_datetime           cgi                 nbconvert           textwrap
_decimal            cgitb               nbformat            this
_decimal_d          chardet             netbios             threading
_dummy_thread       chunk               netrc               time
_elementtree        click               nntplib             timeit
_elementtree_d      cmath               nose                timer
_findvs             cmd                 notebook            tkinter
_functools          code                nt                  token
_hashlib            codecs              ntpath              tokenize
_hashlib_d          codeop              ntsecuritycon       toml
_heapq              collections         nturl2path          tornado
_imp                colorama            numbers             trace
_io                 colorsys            numpy               traceback
_json               commctrl            odbc                tracemalloc
_locale             compileall          opcode              traitlets
_lsprof             concurrent          operator            tty
_lzma               configparser        optparse            turtle
_lzma_d             contextlib          ordlookup           turtledemo
_markupbase         copy                os                  typed_ast
_md5                copyreg             pandas              types
_msi                crypt               pandocfilters       typing
_msi_d              csv                 parser              unicodedata
_multibytecodec     ctypes              parso               unicodedata_d
_multiprocessing    curses              past                unittest
_multiprocessing_d  cycler              pathlib             uritemplate
_opcode             cythonmagic         pdb                 urllib
_operator           datetime            pefile              urllib3
_osx_support        dateutil            perfmon             uu
_overlapped         dbi                 peutils             uuid
_overlapped_d       dbm                 pickle              venv
_pickle             dde                 pickleshare         warnings
_pydecimal          decimal             pickletools         wave
_pyio               decorator           pip                 wcwidth
_pyrsistent_version difflib             pipes               weakref
_random             dis                 pkg_resources       webbrowser
_sha1               distutils           pkgutil             webencodings
_sha256             doctest             platform            wheel
_sha3               docutils            plistlib            widgetsnbextension
_sha512             dotenv              ply                 win2kras
_signal             dummy_threading     poplib              win32api
_sitebuiltins       easy_install        posixpath           win32clipboard
_socket             email               pprint(             win32com)
_socket_d           encodings           profile             win32con
_sqlite3            ensurepip           progressbar         win32console
_sqlite3_d          entrypoints         prometheus_client   win32cred
_sre                enum                prompt_toolkit      win32crypt
_ssl                errno               pstats              win32cryptcon
_ssl_d              external            pty                 win32ctypes
_stat               faulthandler        py_compile          win32event
_string             filecmp             pyasn1              win32evtlog
_strptime           fileinput           pyasn1_modules      win32evtlogutil
_struct             fnmatch             pyclbr              win32file
_symtable           formatter           pydoc               win32gui
_testbuffer         fractions           pydoc_data          win32gui_struct
_testbuffer_d       ftplib              pyexpat             win32help
_testcapi           functools           pyexpat_d           win32inet
_testcapi_d         future              pygments            win32inetcon
_testconsole        garden              pylab               win32job
_testconsole_d      gc                  pylint              win32lz
_testimportmultiple genericpath         pymysql             win32net
_testimportmultiple_d getopt              pyparsing           win32netcon
_testmultiphase     getpass             pyqt5_tools         win32pdh
_testmultiphase_d   gettext             pyrsistent          win32pdhquery
_thread             glob                pysrt               win32pdhutil
_threading_local    google_auth_httplib2 pythoncom           win32pipe
_tkinter            googleapiclient     pytz                win32print
_tkinter_d          gzip                pywin               win32process
_tracemalloc        hashlib             pywin32_testutil    win32profile
_warnings           heapq               pywintypes          win32ras
_weakref            hmac                qtconsole           win32rcparser
_weakrefset         html                queue               win32security
_win32sysloader     html5lib            quopri              win32service
_winapi             http                radian              win32serviceutil
_winxptheme         httplib2            random              win32timezone
abc                 idlelib             rasutil             win32trace
adodbapi            idna                rchitect            win32traceutil
afxres              imaplib             re                  win32transaction
aifc                imghdr              regcheck            win32ts
altgraph            imp                 regutil             win32ui
antigravity         importlib           reprlib             win32uiole
apiclient           importlib_metadata  requests            win32verstamp
appdirs             inspect             rlcompleter         win32wnet
argparse            inventryList        rmagic              winerror
array               io                  rsa                 winioctlcon
ast                 ipaddress           runpy               winnt
astroid             ipykernel           sched               winperf
asynchat            ipykernel_launcher  scipy               winpty
asyncio             ipython_genutils    secrets             winreg
asyncore            ipywidgets          select              winsound
atexit              isapi               select_d            winsound_d
attr                isort               selectors           winxpgui
audioop             itertools           selenium            winxptheme
autoreload          jedi                send2trash          wrapt
autosub             jinja2              servicemanager      wsgiref
base64              json                setuptools          xdrlib
bdb                 json5               shelve              xml
binascii            jsonschema          shlex               xmlrpc
binhex              jupyter             shutil              xxsubtype
bisect              jupyter_client      signal              zipapp
black               jupyter_console     simplegeneric       zipfile
blackd              jupyter_core        site                zipimport
bleach              jupyterlab          six                 zipp
blib2to3            jupyterlab_server   smtpd               zlib
brain_argparse      jupyterthemes       smtplib             zmq
brain_attrs         keyword             sndhdr              
brain_builtin_inference kivy                socket              
brain_collections   kivy_deps           socketserver        wxpython

<h2>check version: python --version</h2>

<h2>first Django app</h2>
<a href="https://docs.djangoproject.com/en/3.0/contents/">first Django app</a>

https://docs.djangoproject.com/en/3.0/intro/tutorial01/
Writing your first Django app, part 1

Check Django is installed
$ python -m django --version

Install Django
$ pip install Django

Creat project
cd into a directory where you’d like to store your code
$ django-admin startproject mysite

startproject created:
mysite/
    manage.py
    mysite/
        __init__.py
        settings.py
        urls.py
        wsgi.py

manage.py: A command-line utility that lets you interact with this Django project in various ways. 
You can read all the details about manage.py in django-admin and manage.py.

The inner mysite/ directory is the actual Python package for your project. 
Its name is the Python package name you’ll need to use to import anything inside it (e.g. mysite.urls).

mysite/__init__.py: An empty file that tells Python that this directory should be considered a Python package. 
If you’re a Python beginner, read more about packages in the official Python docs.

mysite/settings.py: Settings/configuration for this Django project. 
Django settings will tell you all about how settings work.

mysite/urls.py: The URL declarations for this Django project; a “table of contents” of your Django-powered site. 
You can read more about URLs in URL dispatcher.

mysite/wsgi.py: An entry-point for WSGI-compatible web servers to serve your project. 

Change into the outer mysite directory and run the following commands:
$ python manage.py runserver

The Django development server started.
Visit http://127.0.0.1:8000/ with your Web browser to see a “Congratulations!” page!

Changing the port
$ python manage.py runserver 8080

To listen on all available public IPs (which is useful if you are running Vagrant or want to show off your work on other computers on the network), use:

$ python manage.py runserver 0:8000
0 is a shortcut for 0.0.0.0.

To create an app, type this:
$ python manage.py startapp polls

Directory polls created:

polls/
    __init__.py
    admin.py
    apps.py
    migrations/
        __init__.py
    models.py
    tests.py
    views.py

Write the first view:
polls/views.py

from django.http import HttpResponse
def index(request):
    return HttpResponse("Hello, world. You're at the polls index.")

To call the view, we need to map it to a URL - and for this we need a URLconf.

To create a URLconf in the polls directory, create a file called urls.py.
polls/urls.py
from django.urls import path

from . import views

urlpatterns = [
    path('', views.index, name='index'),
]

The next step is to point the root URLconf at the polls.urls module. 
In mysite/urls.py, add an import for django.urls.include and insert an include() in the urlpatterns list, so you have:

mysite/urls.py
from django.contrib import admin
from django.urls import include, path

urlpatterns = [
    path('polls/', include('polls.urls')),
    path('admin/', admin.site.urls),
]

It turns out I was confused because of the multiple directories named "mysite".

I wrongly created a urls.py file in the root "mysite" directory (which contains "manage.py"), then pasted in the code from the website.

To correct it I deleted this file, went into the mysite/mysite directory (which contains "settings.py"), modified the existing "urls.py" file, and replaced the code with the tutorial code.

Guessing on the basis of whatever little information provided in the question, i think you might have forget to add the following import in your urls.py file.

from django.conf.urls import include

<h2>Logging in Python</h2>
<a href="https://www.youtube.com/watch?v=g8nQ90Hk328">Logging in Python</a>
# purpose of logging: record progress and problems
# 5 levels of logging: notset, debug, info, warning, error, critical
#                        0   ,  10,    20,    30,     40,    50
import logging
dir(logging) # check what is inside
import math

# create log format to show more details
# LOG_FORMAT = "%(Levelname)s %(asctime)s - %(message)s"
LOG_FORMAT = "%(levelname)s %(asctime)s - %(message)s"

# create and configure logger
logging.basicConfig(filename = "C:\\Users\\User\\Desktop\\logfile.txt", 
                    level=logging.DEBUG,  # this set the level to record
                    format = LOG_FORMAT,  # this set the output msg format
                    filemode= "w")        # this starts a blank file
logger = logging.getLogger() # create logger object

# test the logger
# logger.debug("harmless message.")
# logger.info("just some message.")
# logger.warning("warning message.")
# logger.error("error message.")
# logger.critical("thecritical message.")
# print(logger.level)

def quadratic(a, b, c):
  """ return the quadratic solution ax^2 + bx + c =0. """
  logger.info("quadratic({0},{1},{2})".format(a, b, c))

  # compute the discriminant
  logger.debug("# compute the discriminant")
  disc = b**2 - 4*a*c

  # compute the two roots
  logger.debug("# compute the two roots")
  root1 = (-b + math.sqrt(disc)) / (2*a)
  root2 = (-b - math.sqrt(disc)) / (2*a)

  # return the roots
  logger.debug("# return the roots")
  return (root1, root2)

roots = quadratic(1,0,1)
print(roots)

<h2>Python Pandas Tutorial</h2>
<a href="Python Pandas Tutorial.html">Python Pandas SciPy Tutorial</a>

<h2>Edge Detection</h2>
<a href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_canny/py_canny.html" class="whitebut red limebs">Canny Edge Detection in OpenCV</a>

<h2>11 个最佳的 Python 编译器和解释器</h2>
大多数极客认为 Python 是解释性语言，但它也存在编译过程。
编译部分在代码执行时完成，并被删除。
然后编译内容被转换为字节码。
通过机器和操作系统进一步扩展到 Python 虚拟机。

本文介绍了适用于 Python 程序员的 11 种最佳的 Python 编译器和解释器。
最好的 Python 编译器和解释器

1.Brython
Brython 是一种流行的 Python 编译器，可将 Python 转换为 Javascript 代码。
它提供对所有 Web 浏览器（包括一种手机 Web 浏览器）的支持。
它还支持最新的 Html5/CSS3 规范，可以使用流行的 CSS 框架，如 BootStrap3 和 LESS。
https://brython.info

2. Pyjs
Pyjs 是一个丰富的 Internet 应用程序框架，也是一种轻量级的 Python 编译器，可以从  Web 浏览器直接执行 Python 脚本，可以从浏览器的 JS 控制台执行程序。
它是从 Python 到 Javascript 的编译器，可以使代码在 Web 浏览器上运行。
它带有 Ajax 框架和 Widget Set API。
http://pyjs.org

3. WinPython
它是为 Windows 操作系统设计的。
它有一些 CPython 的特性。
它预装了一些针对数据科学和机器学习的流行库，例如 Numpy、Pandas 和 Scipy。
它带有 C/C++ 编译器，大多数时候不会用到。
除此之外，它只有 Python 编译器，没有其它包。
https://winpython.github.io

4.Skulpt
Skulpt 是 Python 的浏览器版实现，可以被添加到 HTML 代码中。
此 Python 编译器使用 Javascript 编写，在客户端运行代码，无需其它插件、加工或服务器支持。
Skulpt 解释器通过导入方式，来执行保存在网站上的 .py 文件中的代码。
https://skulpt.org

5.Shed Skin
该编译器将 Python 标准库模块编译为 C++，它将静态类型的 Python 程序转换为很受限的优化的 C++ 代码。
通过将其内置的 Python 数据类型再次实现为自己的类集（可以用 C++ 高效实现），可以提高性能。
https://en.wikipedia.org/wiki/Shed_Skin

6.Active Python
这是用于 Windows、Linux 和 Mac Os 的 Python 发行版，有免费的社区版。
它支持在许多平台安装，某些不被 Python-like 的 AIX 支持的平台，它也支持。
它提供了比 Python 更多的兼容性。
https://www.activestate.com/products/activepython

7.Transcrypt
它是一种流行的将 Python 代码编译为简单易读的 Java 代码的编译器。
它是一个轻量级的 Python 编译器，支持对矩阵和向量运算进行切片。
Transcrypt 也可以在 Node.js 上运行。
分层模块、多重继承和本地类给其添加了很多功能。

8. Nutika
这是一种源码到源码的 Python 编译器，可以将 Python 源代码转换为 C/C++ 可执行代码。
它会使用到许多 Python 库和扩展模块。
它自带 Anaconda，可用于创建数据科学和机器学习项目。

9. Jython
它用 Java 编写，可以在运行 JVM 的任何平台上执行。
Jython 将 Python代码编译为 Java 字节码，从而做到跨平台。
它可用于创建 Servelets、Swing、SWT 和 AWT 软件包的解决方案。
Jython 使用 CPython 之类的全局解释器锁（GIL） 。
另外，你可以将 Java 类扩展到 Python 代码。
https://www.jython.org

10. CPython
CPython 是默认的且使用最广泛的 Python 编译器。
它是用 C 语言编写的，并使用 GIL（全局解释器锁），这使得并发 CPython 进程之间的通信很困难。
CPython 中的编译步骤包括：
解码、令牌化、解析、抽象语法树和编译。
https://compilers.pydata.org

11. IronPython
此版本的 Python 编译器是在微软的 .Net 框架和 Mono 上实现的。
它还提供了动态编译和交互式控制台。
它使得安装非常容易，并且具有跨平台兼容性。
它还具有标准库和不同的模块，主要用于实现 .Net 框架的用户界面库。
https://ironpython.net

结论
Python 是一种为许多实现提供了可能的开发语言，例如 Python 到 Java，Python 到 Javascript 或其它。

Top 7 Free Python Compilers and Interpreters
interpreter
CPython, IronPython, ActivePython, Stackless Python

compiler
Nuitka, Brython, PyJS, Shed Skin, Skulpt, Transcrypt, WinPython

PyJS translates your Python code into JavaScript to let it run in a browser
client-side web and desktop applications

<a href="https://www.guru99.com/execute-python-online.html" class="whitebut ">Execute PYTHON Online</a>
<a href="https://repl.it/languages/python3" class="whitebut ">PYTHON Online</a>
<a href="https://www.onlinegdb.com/online_python_compiler" class="whitebut ">PYTHON Online compiler</a>

<h2>Python 小贴士和技巧</h2>
元旦过完了，我们都纷纷回到了各自的工作岗位。
新的一年新气象，我想借本文为大家献上 Python 语言的30个最佳实践、小贴士和技巧，希望能对各位勤劳的程序员有所帮助，并希望大家工作顺利！ 

1. Python 版本
在此想提醒各位：自2020年1月1日起，Python 官方不再支持 Python 2。
本文中的很多示例只能在 Python 3 中运行。
如果你仍在使用 Python 2.7，请立即升级。

2. 检查 Python 的最低版本
你可以在代码中检查 Python 的版本，以确保你的用户没有在不兼容的版本中运行脚本。
检查方式如下：
if not sys.version_info &gt; (2, 7):
   # berate your user for running a 10 year
   # python version
elif not sys.version_info &gt;= (3, 5):
   # Kindly tell your user (s)he needs to upgrade
   # because you're using 3.5 features
3. IPython
<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhEKhkJ9OGu3s1k1g6xoBWLicdTnd059diax51HTgibTxgtU8eJMN37bnib8IrpZiaFH0kpWntMo4yYPAg/640">
IPython 本质上就是一个增强版的shell。
就冲着自动补齐就值得一试，而且它的功能还不止于此，它还有很多令我爱不释手的命令，例如：
%cd：改变当前的工作目录
%edit：打开编辑器，并关闭编辑器后执行键入的代码
%env：显示当前环境变量
%pip install [pkgs]：无需离开交互式shell，就可以安装软件包
%time 和 %timeit：测量执行Python代码的时间
完整的命令列表，请点击此处查看（https://ipython.readthedocs.io/en/stable/interactive/magics.html）。

还有一个非常实用的功能：引用上一个命令的输出。
In 和 Out 是实际的对象。
你可以通过 Out[3] 的形式使用第三个命令的输出。

IPython 的安装命令如下：
pip3 install ipython
4. 列表推导式
你可以利用列表推导式，避免使用循环填充列表时的繁琐。
列表推导式的基本语法如下：
[ expression for item in list if conditional ]
举一个基本的例子：用一组有序数字填充一个列表：
mylist = [i for i in range(10)]
print(mylist)
# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
由于可以使用表达式，所以你也可以做一些算术运算：
squares = [x**2 for x in range(10)]
print(squares)
# [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]
甚至可以调用外部函数：
def some_function(a):
    return (a + 5) / 2

my_formula = [some_function(i) for i in range(10)]
print(my_formula)
# [2, 3, 3, 4, 4, 5, 5, 6, 6, 7]
最后，你还可以使用 ‘if’ 来过滤列表。
在如下示例中，我们只保留能被2整除的数字：
filtered = [i for i in range(20) if i%2==0]
print(filtered)
# [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]
5. 检查对象使用内存的状况
你可以利用 sys.getsizeof() 来检查对象使用内存的状况：
import sys

mylist = range(0, 10000)
print(sys.getsizeof(mylist))
# 48
等等，为什么这个巨大的列表仅包含48个字节？
因为这里的 range 函数返回了一个类，只不过它的行为就像一个列表。
在使用内存方面，range 远比实际的数字列表更加高效。

你可以试试看使用列表推导式创建一个范围相同的数字列表： 
import sys

myreallist = [x for x in range(0, 10000)]
print(sys.getsizeof(myreallist))
# 87632
6. 返回多个值
Python 中的函数可以返回一个以上的变量，而且还无需使用字典、列表或类。
如下所示：
def get_user(id):
    # fetch user from database
    # ....
    return name, birthdate

name, birthdate = get_user(4)
如果返回值的数量有限当然没问题。
但是，如果返回值的数量超过3个，那么你就应该将返回值放入一个（数据）类中。

7. 使用数据类
Python从版本3.7开始提供数据类。
与常规类或其他方法（比如返回多个值或字典）相比，数据类有几个明显的优势：
数据类的代码量较少
你可以比较数据类，因为数据类提供了 __eq__ 方法
调试的时候，你可以轻松地输出数据类，因为数据类还提供了 __repr__ 方法
数据类需要类型提示，因此可以减少Bug的发生几率 
数据类的示例如下：
from dataclasses import dataclass

@dataclass
class Card:
    rank: str
    suit: str

card = Card("Q", "hearts")

print(card == card)
# True

print(card.rank)
# 'Q'

print(card)
Card(rank='Q', suit='hearts')
详细的使用指南请点击这里（https://realpython.com/python-data-classes/）。

8. 交换变量
如下的小技巧很巧妙，可以为你节省多行代码：
a = 1
b = 2
a, b = b, a
print((a))
# 2
print((b))
# 1
9. 合并字典（Python 3.5以上的版本）
从Python 3.5开始，合并字典的操作更加简单了：
dict1 = { 'a': 1, 'b': 2 }
dict2 = { 'b': 3, 'c': 4 }
merged = { **dict1, **dict2 }
print((merged))
# {'a': 1, 'b': 3, 'c': 4}
如果 key 重复，那么第一个字典中的 key 会被覆盖。

10. 字符串的首字母大写
如下技巧真是一个小可爱：
mystring = "10 awesome python tricks"
print(mystring.title())
'10 Awesome Python Tricks'
11. 将字符串分割成列表
你可以将字符串分割成一个字符串列表。
在如下示例中，我们利用空格分割各个单词：
mystring = "The quick brown fox"
mylist = mystring.split(' ')
print(mylist)
# ['The', 'quick', 'brown', 'fox']
12. 根据字符串列表创建字符串
与上述技巧相反，我们可以根据字符串列表创建字符串，然后在各个单词之间加入空格：
mylist = ['The', 'quick', 'brown', 'fox']
mystring = " ".join(mylist)
print(mystring)
# 'The quick brown fox'
你可能会问为什么不是 mylist.join(" ")，这是个好问题！
根本原因在于，函数 String.join() 不仅可以联接列表，而且还可以联接任何可迭代对象。
将其放在String中是为了避免在多个地方重复实现同一个功能。

13. 表情符
<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhEKhkJ9OGu3s1k1g6xoBWL7NbT1xics1Or7IQlWhicQLnbUM4p13xGAWImYJrDeygaD2vJmJRRExqw/640">
有些人非常喜欢表情符，而有些人则深恶痛绝。
我在此郑重声明：在分析社交媒体数据时，表情符可以派上大用场。

首先，我们来安装表情符模块：
pip3 install emoji
安装完成后，你可以按照如下方式使用：
import emoji
result = emoji.emojize('Python is :thumbs_up:')
print(result)
# 'Python is 👍'

# You can also reverse this:
result = emoji.demojize('Python is 👍')
print(result)
# 'Python is :thumbs_up:'
更多有关表情符的示例和文档，请点击此处（https://pypi.org/project/emoji/）。

14. 列表切片
列表切片的基本语法如下：
a[start:stop:step]
start、stop 和 step 都是可选项。
如果不指定，则会使用如下默认值：
start：0
end：字符串的结尾
step：1
示例如下：
# We can easily create a new list from 
# the first two elements of a list:
first_two = [1, 2, 3, 4, 5][0:2]
print(first_two)
# [1, 2]

# And if we use a step value of 2, 
# we can skip over every second number
# like this:
steps = [1, 2, 3, 4, 5][0:5:2]
print(steps)
# [1, 3, 5]

# This works on strings too. In Python,
# you can treat a string like a list of
# letters:
mystring = "abcdefdn nimt"[::2]
print(mystring)
# 'aced it'
15. 反转字符串和列表
你可以利用如上切片的方法来反转字符串或列表。
只需指定 step 为 -1，就可以反转其中的元素：
revstring = "abcdefg"[::-1]
print(revstring)
# 'gfedcba'

revarray = [1, 2, 3, 4, 5][::-1]
print(revarray)
# [5, 4, 3, 2, 1]
16. 显示猫猫
我终于找到了一个充分的借口可以在我的文章中显示猫猫了，哈哈！当然，你也可以利用它来显示图片。
首先你需要安装 Pillow，这是一个 Python 图片库的分支：
pip3 install Pillow
接下来，你可以将如下图片下载到一个名叫 kittens.jpg 的文件中：
<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_jpg/Pn4Sm0RsAuhEKhkJ9OGu3s1k1g6xoBWLZqI43QvLspwcjrLAMprjH6mTYOfGtgzzfOo05jjOwKwt6wSrIeHnRQ/640">
然后，你就可以通过如下 Python 代码显示上面的图片：
from PIL import Image

im = Image.open("kittens.jpg")
im.show()
print(im.format, im.size, im.mode)
# JPEG (1920, 1357) RGB
Pillow 还有很多显示该图片之外的功能。
它可以分析、调整大小、过滤、增强、变形等等。
完整的文档，请点击这里（https://pillow.readthedocs.io/en/stable/）。

17. map()
Python 有一个自带的函数叫做 map()，语法如下：
map(function, something_iterable)
所以，你需要指定一个函数来执行，或者一些东西来执行。
任何可迭代对象都可以。
在如下示例中，我指定了一个列表：
def upper(s):
    return s.upper()

mylist = list(map(upper, ['sentence', 'fragment']))
print(mylist)
# ['SENTENCE', 'FRAGMENT']

# Convert a string representation of
# a number into a list of ints.
list_of_ints = list(map(int, "1234567")))
print(list_of_ints)
# [1, 2, 3, 4, 5, 6, 7]
你可以仔细看看自己的代码，看看能不能用 map() 替代某处的循环。

18. 获取列表或字符串中的唯一元素
如果你利用函数 set() 创建一个集合，就可以获取某个列表或类似于列表的对象的唯一元素：
mylist = [1, 1, 2, 3, 4, 5, 5, 5, 6, 6]
print((set(mylist)))
# {1, 2, 3, 4, 5, 6}

# And since a string can be treated like a 
# list of letters, you can also get the 
# unique letters from a string this way:
print((set("aaabbbcccdddeeefff")))
# {'a', 'b', 'c', 'd', 'e', 'f'}
19. 查找出现频率最高的值
<br  />
你可以通过如下方法查找出现频率最高的值：
test = [1, 2, 3, 4, 2, 2, 3, 1, 4, 4, 4]
print(max(set(test), key = test.count))
# 4
你能看懂上述代码吗？想法搞明白上述代码再往下读。

没看懂？我来告诉你吧：
max() 会返回列表的最大值。
参数 key 会接受一个参数函数来自定义排序，在本例中为 test.count。
该函数会应用于迭代对象的每一项。

test.count 是 list 的内置函数。
它接受一个参数，而且还会计算该参数的出现次数。
因此，test.count(1) 将返回2，而 test.count(4) 将返回4。

set(test) 将返回 test 中所有的唯一值，也就是 {1, 2, 3, 4}。

因此，这一行代码完成的操作是：首先获取 test 所有的唯一值，即{1, 2, 3, 4}；然后，max 会针对每一个值执行 list.count，并返回最大值。

这一行代码可不是我个人的发明。

20. 创建一个进度条
你可以创建自己的进度条，听起来很有意思。
但是，更简单的方法是使用 progress 包：
pip3 install progress
接下来，你就可以轻松地创建进度条了：
from progress.bar import Bar

bar = Bar('Processing', max=20)
for i in range(20):
    # Do some work
    bar.next()
bar.finish()
21. 在交互式shell中使用_（下划线运算符）
你可以通过下划线运算符获取上一个表达式的结果，例如在 IPython 中，你可以这样操作：
In [1]: 3 * 3
Out[1]: 9In [2]: _ + 3
Out[2]: 12
Python Shell 中也可以这样使用。
另外，在 IPython shell 中，你还可以通过 Out[n] 获取表达式 In[n] 的值。
例如，在如上示例中，Out[1] 将返回数字9。

22. 快速创建Web服务器
你可以快速启动一个Web服务，并提供当前目录的内容：
python3 -m http.server
当你想与同事共享某个文件，或测试某个简单的HTML网站时，就可以考虑这个方法。

23. 多行字符串
虽然你可以用三重引号将代码中的多行字符串括起来，但是这种做法并不理想。
所有放在三重引号之间的内容都会成为字符串，包括代码的格式，如下所示。

我更喜欢另一种方法，这种方法不仅可以将多行字符串连接在一起，而且还可以保证代码的整洁。
唯一的缺点是你需要明确指定换行符。

s1 = """Multi line strings can be put
        between triple quotes. It's not ideal
        when formatting your code though"""

print((s1))
# Multi line strings can be put
#         between triple quotes. It's not ideal
#         when formatting your code though

s2 = ("You can also concatenate multiple\n" +
        "strings this way, but you'll have to\n"
        "explicitly put in the newlines")

print(s2)
# You can also concatenate multiple
# strings this way, but you'll have to
# explicitly put in the newlines
24. 条件赋值中的三元运算符
这种方法可以让代码更简洁，同时又可以保证代码的可读性：
[on_true] if [expression] else [on_false]
示例如下：
x = "Success!" if (y == 2) else "Failed!"
25. 统计元素的出现次数
你可以使用集合库中的 Counter 来获取列表中所有唯一元素的出现次数，Counter 会返回一个字典：
from collections import Counter

mylist = [1, 1, 2, 3, 4, 5, 5, 5, 6, 6]
c = Counter(mylist)
print(c)
# Counter({1: 2, 2: 1, 3: 1, 4: 1, 5: 3, 6: 2})

# And it works on strings too:
print(Counter("aaaaabbbbbccccc"))
# Counter({'a': 5, 'b': 5, 'c': 5})
26. 比较运算符的链接
你可以在 Python 中将多个比较运算符链接到一起，如此就可以创建更易读、更简洁的代码：
x = 10

# Instead of:
if x &gt; 5 and x &lt; 15:
    print("Yes")
# yes

# You can also write:
if 5 &lt; x &lt; 15:
    print("Yes")
# Yes
27. 添加颜色
<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Pn4Sm0RsAuhEKhkJ9OGu3s1k1g6xoBWLqRMLzz40uop3ic2s5lJC9JDCQ6pVdesGLr1UJLg2sibabRy82mjpiaRFg/640">
你可以通过 Colorama，设置终端的显示颜色：
from colorama import Fore, Back, Style

print(Fore.RED + 'some red text')
print(Back.GREEN + 'and with a green background')
print(Style.DIM + 'and in dim text')
print(Style.RESET_ALL)
print('back to normal now')
28. 日期的处理
python-dateutil 模块作为标准日期模块的补充，提供了非常强大的扩展，你可以通过如下命令安装： 
pip3 install python-dateutil 
你可以利用该库完成很多神奇的操作。
在此我只举一个例子：模糊分析日志文件中的日期：
from dateutil.parser import parse

logline = 'INFO 2020-01-01T00:00:01 Happy new year, human.'
timestamp = parse(log_line, fuzzy=True)
print(timestamp)
# 2020-01-01 00:00:01
你只需记住：当遇到常规 Python 日期时间功能无法解决的问题时，就可以考虑 python-dateutil ！
29.整数除法
<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_jpg/Pn4Sm0RsAuhEKhkJ9OGu3s1k1g6xoBWLlgNjzE7mIC7VzFH2ib6zAGOhbTWvcLafZCW7ickKGiaYFPLXm0ibicccL1Q/640">
在 Python 2 中，除法运算符（/）默认为整数除法，除非其中一个操作数是浮点数。
因此，你可以这么写：
# Python 2
5 / 2 = 2
5 / 2.0 = 2.5
在 Python 3 中，除法运算符（/）默认为浮点除法，而整数除法的运算符为 //。
因此，你需要这么写：
Python 3
5 / 2 = 2.5
5 // 2 = 2
这项变更背后的动机，请参阅 PEP-0238（https://www.python.org/dev/peps/pep-0238/）。

30. 通过chardet 来检测字符集
你可以使用 chardet 模块来检测文件的字符集。
在分析大量随机文本时，这个模块十分实用。
安装方法如下：
pip install chardet
安装完成后，你就可以使用命令行工具 chardetect 了，使用方法如下：
chardetect somefile.txt
somefile.txt: ascii with confidence 1.0
你也可以在编程中使用该库，完整的文档请点击这里（https://chardet.readthedocs.io/en/latest/usage.html）。

<h2>Python Creating a Menu</h2>
def menu :
    print("welcome, \n Option 1\n Option 2\n Option 3\n")
    choice = input()
    if choice == "1";
      print("Option 1")
      menu()
    if choice == "2";
      print("Option 2")
      menu()
    if choice == "3";
      print("Option 3")
      menu()

menu()

<h2>Python Lambda Functions</h2>
<a href="https://www.guru99.com/python-lambda-function.html" class="whitebut ">Python Lambda Functions</a>

Lambdas, also known as anonymous functions, are small, restricted functions which do not need a name (i.e., an identifier). 

Today, many modern programming languages like Java, Python, C#, and C++ support lambda functions to add functionality to the languages.

Syntax and Examples
lambda arguments : expression
lambda p1, p2: expression 

x = lambda a : a + 10
print(x(5))
15

adder = lambda x, y: x + y
print((adder (1, 2)))
3

#A REGULAR FUNCTION
def guru( funct, *args ):
funct( *args )
def printer_one( arg ):
return print((arg))
def printer_two( arg ):
print(arg)

#CALL A REGULAR FUNCTION 
guru( printer_one, 'printer 1 REGULAR CALL' )
guru( printer_two, 'printer 2 REGULAR CALL \n' )
#CALL A REGULAR FUNCTION THRU A LAMBDA
guru(lambda: printer_one('printer 1 LAMBDA CALL'))
guru(lambda: printer_two('printer 2 LAMBDA CALL'))

<h2>mysql</h2>
import mysql.connector
db = mysql.connector.connect(
  host="localhost",
  user="root",
  passwd="asdf1234",
  database="demo"
)
mycursor = db.cursor()
#mycursor.execute("CREATE TABLE urlTable (titleName varchar(50), urlAddr varchar(100), id int PRIMARY KEY )")
mycursor.execute("INSERT INTO urlTable (titleName, urlAddr) VALUES (%s,%s), ('google', 'google.com')")
db.commit()

<h2>subprocess module</h2>
The subprocess module allows you to spawn new processes, connect to their input/output/error pipes, and obtain their return codes. This module intends to replace several older modules and functions:

os.system
os.spawn*

The recommended approach to invoking subprocesses is to use the run() function for all use cases it can handle. For more advanced use cases, the underlying Popen interface can be used directly.

subprocess.run(args, *, stdin=None, input=None, stdout=None, stderr=None, capture_output=False, shell=False, cwd=None, timeout=None, check=False, encoding=None, errors=None, text=None, env=None, universal_newlines=None)

Examples:
>>> subprocess.run(["ls", "-l"])  # doesn't capture output

>>> subprocess.run("exit 1", shell=True, check=True)

>>> subprocess.run(["ls", "-l", "/dev/null"], capture_output=True)
CompletedProcess(args=['ls', '-l', '/dev/null'], returncode=0,
stdout=b'crw-rw-rw- 1 root root 1, 3 Jan 23 16:23 /dev/null\n', stderr=b'')

Popen Constructor
Execute a child program in a new process.

example of passing some arguments to an external program as a sequence:
Popen(["/usr/bin/git", "commit", "-m", "Fixes a bug."])

example to break a shell command into a sequence of arguments. shlex.split() can illustrate how to determine the correct tokenization for args:

>>> import shlex, subprocess
>>> command_line = input()
/bin/vikings -input eggs.txt -output "spam spam.txt" -cmd "echo '$MONEY'"
>>> args = shlex.split(command_line)
>>> print(args)
['/bin/vikings', '-input', 'eggs.txt', '-output', 'spam spam.txt', '-cmd', "echo '$MONEY'"]
>>> p = subprocess.Popen(args) # Success!

<h2>SVG drawings</h2>
<a href="https://pypi.org/project/svgwrite/" class="whitebut ">python svgwrite</a>
A Python library to create SVG drawings.

<a href="https://wiki.inkscape.org/wiki/index.php/Python_modules_for_extensions" class="whitebut ">Python modules for Inkscape extensions</a>
svgwrite

A Python library to create SVG drawings.

a simple example:

import svgwrite

dwg = svgwrite.Drawing('test.svg', profile='tiny')
dwg.add(dwg.line((0, 0), (10, 0), stroke=svgwrite.rgb(10, 10, 16, '%')))
dwg.add(dwg.text('Test', insert=(0, 0.2), fill='red'))
dwg.save()

As the name svgwrite implies, svgwrite creates new SVG drawings, it does not read existing drawings and also does not import existing drawings, but you can always include other SVG drawings by the &lt;image> entity.

Installation
with pip:

pip install svgwrite
or from source:
python setup.py install

Documentation
http://readthedocs.org/docs/svgwrite/

svgwrite can be found on GitHub.com at:
http://github.com/mozman/svgwrite.git

<a href="https://medium.com/@xaviju/inkscape-extensions-by-non-developers-for-non-developers-a-primer-b272dda360fe" class="whitebut ">Inkscape extensions by non developers</a>
<a href="Inkscape extensions.html" class="whitebut red whitets goldbs">Inkscape extensions</a>
<h2>Python Extract Local Storage</h2>
http://scraping.pro/extract-browsers-local-storage-with-python/

<h3>Python and Selenium</h3>
To access the browser's local storage when scraping a page, we need to invoke both a browser instance and leverage a JavaScript interpreter to read the local storage. 
For my money, Selenium is the best solution.

A possible replacement for Selenium is <em>PhantomJS</em>, running a headless browser.

<h3>JaveScript to iterate over <em>localStorage</em> browser object</h3>for (var i = 0; i &amp;lt; localStorage.length; i++){
    key=localStorage.key(i); 
    console.log(key+': '+localStorage.getItem(key));
}

<h3>Advanced script</h3>As mentioned <a href="http://stackoverflow.com/a/28118108/1230477">here</a> a HTML5 featured browser should also implement <code>Array.prototype.map</code>. 
So script would be:

Array.apply(0, new Array(localStorage.length)).map(function (o, i) 
   { return localStorage.key(i)+':'+localStorage.getItem(localStorage.key(i)); }
)

<h3>Python with Selenium script for setting up and scraping local storage</h3>from selenium import webdriver
driver = webdriver.Firefox() 
url='http://www.w3schools.com/'
driver.get(url)
scriptArray="""localStorage.setItem("key1", 'new item');
               localStorage.setItem("key2", 'second item'); 
				return Array.apply(0, new Array(localStorage.length)).map(function (o, i) { return localStorage.getItem(localStorage.key(i)); }
				)""" 	
result = driver.execute_script(scriptArray)
print(result)

<h3>Python bindings alternative to Python+Selenium</h3>Some might argue Selenium is inefficient for only local storage extracting. 
If you think Selenium is too bulky, you might want to try a Python binding with a development framework for desktop, ex. 
<a href="https://riverbankcomputing.com/software/pyqt/intro" rel="nofollow">PyQt</a>. 
Something I might touch on in a later post.

<h2>List of Python Modules</h2>

Web:
Requests: https://pypi.org/project/requests/
Django: https://pypi.org/project/Django/
Flask: https://pypi.org/project/Flask/
Twisted: https://twistedmatrix.com/trac/
BeautifulSoup: https://pypi.org/project/beautifulsoup4/
Selenium: https://selenium-python.readthedocs.io/

Data science:
Numpy: https://numpy.org/
Pandas: https://pandas.pydata.org/
Matplotlib: https://matplotlib.org/
Nltk: https://www.nltk.org/
Opencv: https://opencv-python-tutroals.readth...

Machine Learning:
Tensorflow: https://www.tensorflow.org/
Keras: https://keras.io/
PyTorch: https://pytorch.org/
Sci-kit Learn: https://scikit-learn.org/stable/

GUI:
Kivy: https://kivy.org/#home
PyQt5: https://pypi.org/project/PyQt5/
Tkinter: https://wiki.python.org/moin/TkInter

Bonus:
Pygame: https://www.pygame.org/docs/

<h2><span class="red">Running Python in the Browser</span></h2>
Running Python in the web browser has been getting a lot of attention lately. 
Shaun Taylor-Morgan knows what he's talking about here &#8211; he works for&nbsp;<a href="https://anvil.works/">Anvil</a>, a full-featured application platform for writing full-stack web apps with nothing but Python. 
So I invited him to give us an overview and comparison of the open-source solutions for running Python code in your web browser.</em>

In the past, if you wanted to build a web UI, your only choice was JavaScript. 

That's no longer true. 
There are quite a few ways to run Python in your web browser. 
This is a survey of what's available.

I'm looking at six systems that all take a different approach to the problem. 
Here's a diagram that sums up their differences.

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/python-in-browser.png">

The x-axis answers the question: when does Python get compiled? At one extreme, you run a command-line script to compile Python yourself. 
At the other extreme, the compilation gets done in the user's browser as they write Python code.

The y-axis answers the question: what does Python get compiled to? Three systems make a direct conversion between the Python you write and some equivalent JavaScript. 
The other three actually run a live Python interpreter in your browser, each in a slightly different way.

<h2>1. TRANSCRYPT</h2>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/transcrypt.png">

Transcrypt gives you a command-line tool you can run to compile a Python script into a JavaScript file.

You interact with the page structure (the DOM) using a toolbox of specialized Python objects and functions. 
For example, if you&nbsp;<code>import document</code>, you can find any object on the page by using&nbsp;<code>document</code>&nbsp;like a dictionary. 
To get the element whose ID is&nbsp;<code>name-box</code>, you would use&nbsp;<code>document["name-box"]</code>. 
Any readers familiar with JQuery will be feeling very at home.

Here's a basic example. 
I wrote a Hello, World page with just an input box and a button:

&lt;input id=&quot;name-box&quot; placeholder=&quot;Enter your name&quot;>
&lt;button id=&quot;greet-button&quot;>Say Hello&lt;/button>

To make it do something, I wrote some Python. 
When you click the button, an event handler fires that displays an alert with a greeting:

def greet():
    alert("Hello " + document.getElementById("name-box").value + "!")

document.getElementById("greet-button").addEventListener('click', greet)

I wrote this in a file called&nbsp;<code>hello.py</code>&nbsp;and compiled it using&nbsp;<code>transcrypt hello.py</code>. 
The compiler spat out a JavaScript version of my file, called&nbsp;<code>hello.js</code>.

Transcrypt makes the conversion to JavaScript at the earliest possible time &#8211; before the browser is even running. 
Next we'll look at Brython, which makes the conversion on page load.

<h2>2. BRYTHON</h2>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/brython.png">

Brython lets you write Python in script tags in exactly the same way you write JavaScript. 
Just as with Transcrypt, it has a&nbsp;<code>document</code>&nbsp;object for interacting with the DOM.

The same widget I wrote above can be written in a script tag like this:

&lt;script type=&quot;text/python&quot;>
from browser import document, alert

def greet(event):
    alert(&quot;Hello &quot; + document[&quot;name-box&quot;].value + &quot;!&quot;)

document[&quot;greet-button&quot;].bind(&quot;click&quot;, greet)
&lt;/script>

Pretty cool, huh? A script tag whose type is&nbsp;<code>text/python</code>!

There's a good explanation of how it works on the&nbsp;<a href="https://github.com/brython-dev/brython/wiki/How%20Brython%20works">Brython GitHub page</a>. 
In short, you run a function when your page loads:

  &lt;body onload=&quot;brython()&quot;>

that transpiles anything it finds in a Python script tag:

  &lt;script type=&quot;text/python&quot;>&lt;/script>

which results in some machine-generated JavaScript that it runs using JS's&nbsp;<code>eval()</code>&nbsp;function.

<h2>3. SKULPT</h2>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/skulpt.png">

Skulpt sits at the far end of our diagram &#8211; it compiles Python to JavaScript at runtime. 
This means the Python doesn't have to be written until&nbsp;<em>after the page has loaded</em>.

The&nbsp;<a href="http://www.skulpt.org/">Skulpt website</a>&nbsp;has a Python REPL that runs in your browser. 
It's not making requests back to a Python interpreter on a server somewhere, it's actually running on your machine.

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/skulpt-repl.gif">

Skulpt does not have a built-in way to interact with the DOM. 
This can be an advantage, because you can build your own DOM manipulation system depending on what you're trying to achieve. 
More on this later.

Skulpt was originally created to produce educational tools that need a live Python session on a web page (example:&nbsp;<a href="https://trinket.io/">Trinket.io</a>). 
While Transcrypt and Brython are designed as direct replacements for JavaScript, Skulpt is more suited to building Python programming environments on the web (such as the full-stack app platform,&nbsp;<a href="https://anvil.works/">Anvil</a>).

We've reached the end of the x-axis in our diagram. 
Next we head in the vertical direction: our final three technologies don't compile Python to JavaScript, they actually implement a Python runtime in the web browser.

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/x-axis-done.png">

<h2>4. PYPY.JS</h2>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/pypyjs.png">

<a href="https://pypyjs.org/">PyPy.js</a>&nbsp;is a JavaScript implementation of a Python interpreter. 
The developers took a C-to-JavaScript compiler called&nbsp;<a href="https://emscripten.org/">emscripten</a>&nbsp;and ran it on the source code of&nbsp;<a href="https://pypy.org/">PyPy</a>. 
The result is PyPy, but running in your browser.

<strong>Advantages:</strong> It's a very faithful implementation of Python, and code gets executed quickly. 

<strong>Disadvantages:</strong> A web page that embeds PyPy.js contains an entire Python interpreter, so it's pretty big as web pages go (think megabytes).

You import the interpreter using&nbsp;<code>&lt;script></code>&nbsp;tags, and you get an object called&nbsp;<code>pypyjs</code>&nbsp;in the global JS scope.

There are three main functions for interacting with the interpreter. 
To execute some Python, run&nbsp;<code>pypyjs.exec(&lt;python code>)</code>. 
To pass values between JavaScript and Python, use&nbsp;<code>pypyjs.set(variable, value)</code>&nbsp;and&nbsp;<code>pypyjs.get(variable)</code>.

Here's a script that uses PyPy.js to calculate the first ten square numbers:

&lt;script type=&quot;text/javascript&quot;>
  pypyjs.exec(
    // Run some Python
    'y = [x**2. 
for x in range(10)]'
  ).then(function() {
    // Transfer the value of y from Python to JavaScript
    pypyjs.get('y')
  }).then(function(result) {
    // Display an alert box with the value of y in it
    alert(result)
  });
&lt;/script>

PyPy.js has a few features that make it feel like a native Python environment &#8211; there's even an in-memory filesystem so you can read and write files. 
There's also a&nbsp;<code>document</code>&nbsp;object that gives you access to the DOM from Python.

<a href="https://github.com/pypyjs/pypyjs/blob/master/README.dist.rst">The project has a great readme</a>&nbsp;if you're interested in learning more.

<h2>5. BATAVIA</h2>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/batavia.png">

Batavia is a bit like PyPy.js, but it runs bytecode rather than Python. 
Here's a Hello, World script written in Batavia:

&lt;script id=&quot;batavia-helloworld&quot; type=&quot;application/python-bytecode&quot;>
    7gwNCkIUE1cWAAAA4wAAAAAAAAAAAAAAAAIAAABAAAAAcw4AAABlAABkAACDAQABZAEAUykCegtI
    ZWxsbyBXb3JsZE4pAdoFcHJpbnSpAHICAAAAcgIAAAD6PC92YXIvZm9sZGVycy85cC9uenY0MGxf
    OTc0ZGRocDFoZnJjY2JwdzgwMDAwZ24vVC90bXB4amMzZXJyddoIPG1vZHVsZT4BAAAAcwAAAAA=
&lt;/script>

Bytecode is the ‘assembly language' of the Python virtual machine &#8211; if you've ever looked at the <code>.pyc</code> files Python generates, that's what they contain (<a href="https://pythontips.com/2019/02/26/python-dis-module-and-constant-folding/">Yasoob dug into some bytecode</a> in a recent post on this blog). 
This example doesn't look like assembly language because it's base64-encoded.

Batavia is potentially faster than PyPy.js, since it doesn't have to compile your Python to bytecode. 
It also makes the download smaller &#8211;&nbsp;<a href="https://batavia.readthedocs.io/en/latest/background/faq.html">around 400kB</a>. 
The disadvantage is that your code needs to be written and compiled in a native (non-browser) environment, as was the case with Transcrypt.

Again, Batavia lets you manipulate the DOM using a Python module it provides (in this case it's called&nbsp;<code>dom</code>).

The Batavia project is quite promising because it fills an otherwise unfilled niche &#8211; ahead-of-time compiled Python in the browser that runs in a full Python VM. 
Unfortunately, the GitHub repo's commit rate seems to have slowed in the past year or so. 
If you're interested in helping out,&nbsp;<a href="https://beeware.org/contributing/how/first-time/">here's their developer guide</a>.

<h2>6. PYODIDE</h2>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/pyodide.png">

<a href="https://github.com/iodide-project/pyodide/">Mozilla's Pyodide</a>&nbsp;was announced in April 2019. 
It solves a difficult problem: interactive data visualisation in Python, in the browser.

Python has become a favourite language for data science thanks to libraries such as&nbsp;<a href="https://www.numpy.org/">NumPy</a>,&nbsp;<a href="https://www.scipy.org/">SciPy</a>,&nbsp;<a href="https://matplotlib.org/">Matplotlib</a>&nbsp;and&nbsp;<a href="https://pandas.pydata.org/">Pandas</a>. 
We already have&nbsp;<a href="https://jupyter.org/">Jupyter Notebooks</a>, which are a great way to present a data pipeline online, but they must be hosted on a server somewhere.

If you can put the data processing on the user's machine, they avoid the round-trip to your server so real-time visualisation is more powerful. 
And you can scale to so many more users if their own machines are providing the compute.

It's easier said than done. 
Fortunately, the Mozilla team came across a version of the reference Python implementation (<a href="https://en.wikipedia.org/wiki/CPython">CPython</a>) that was compiled into&nbsp;<a href="https://webassembly.org/">WebAssembly</a>. 
WebAssembly is a low-level compliment to JavaScript that performs closer to native speeds, which opens the browser up for performance-critical applications like this.

Mozilla took charge of the WebAssembly CPython project and recompiled NumPy, SciPy, Matplotlib and Pandas into WebAssembly too. 
The result is a lot like Jupyter Notebooks in the browser &#8211;&nbsp;<a href="https://alpha.iodide.io/notebooks/300/">here's an introductory notebook</a>.

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/pyodide-screen.png">

It's an even bigger download than PyPy.js (that example is around 50MB), but as Mozilla point out, a good browser will cache that for you. 
And for a data processing notebook, waiting a few seconds for the page to load is not a problem.

You can write HTML, MarkDown and JavaScript in Pyodide Notebooks too. 
And yes, there's a&nbsp;<code>document</code>&nbsp;object to access the DOM. 
It's a really promising project!

<h2>MAKING A CHOICE</h2>
I've given you six different ways to write Python in the browser, and you might be able to find more. 
Which one to choose? This summary table may help you decide.<br>

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/screen-shot-2019-05-22-at-1.34.17-pm.png">

There's a more general point here too: the fact that there <em>is</em> a choice.

As a web developer, it often feels like you&nbsp;<em>have</em>&nbsp;to write JavaScript, you&nbsp;<em>have</em>&nbsp;to build an HTTP API, you&nbsp;<em>have</em>&nbsp;to write SQL and HTML and CSS. 
The six systems we've looked at make JavaScript seem more like a language that gets&nbsp;<em>compiled to</em>, and you choose what to compile to it (And WebAssembly is actually&nbsp;<em>designed</em>&nbsp;to be used this way).

Why not treat the whole web stack this way? The future of web development is to move beyond the technologies that we've always ‘had' to use. 
The future is to build abstractions on top of those technologies, to reduce the unnecessary complexity and optimise developer efficiency. 
That's why Python itself is so popular &#8211; it's a language that puts developer efficiency first.

<h2>ONE UNIFIED SYSTEM</h2>
There should be one way to represent data, from the database all the way to the UI. 
Since we're Pythonistas, we'd like everything to be a Python object, not an SQL SELECT statement followed by a Python object followed by JSON followed by a JavaScript object followed by a DOM element.

That's what&nbsp;<a href="https://anvil.works/blog/hello-world">Anvil</a>&nbsp;does &#8211; it's a full-stack Python environment that abstracts away the complexity of the web.&nbsp;<a href="https://anvil.works/blog/hello-world">Here's a 7-minute video</a>&nbsp;that covers how it works.

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://freepythontips.files.wordpress.com/2019/05/web-stacks.png">

Remember I said that it can be an advantage that Skulpt doesn't have a built-in way to interact with the DOM? This is why. 
If you want to go beyond ‘Python in the browser' and build a fully-integrated Python environment, your abstraction of the User Interface needs to fit in with your overall abstraction of the web system.

So Python in the browser is just the start of something bigger. 
I like to live dangerously, so I'm going to make a prediction. 
In 5 years' time, more than 50% of web apps will be built with tools that sit one abstraction level higher than JavaScript frameworks such as React and Angular. 
It has already happened for static sites: most people who want a static site will use WordPress or Wix rather than firing up a text editor and writing HTML. 
As systems mature, they become unified and the amount of incidental complexity gradually minimises.

<h2><span class="lime">Brython tutorial</span></h2>
This tutorial explains how to develop an application that runs in the browser using the Python programming language. 
We will take the example of writing a calculator.

You will need a text editor, and of course a browser with an Internet access.

The contents of this tutorial assumes that you have at least a basic knowledge of HTML (general page structure, most usual tags), of stylesheets (CSS) and of the Python language.

In the text editor, create an HTML page with the following content:

&lt;!doctype html>
&lt;html>

&lt;head>
    &lt;meta charset="utf-8">
    &lt;script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/brython@3.8.9/brython.min.js">
    &lt;/script>
&lt;/head>

&lt;body onload="brython()">

&lt;script type="text/python">
from browser import document

document &lt;= "Hello !"
&lt;/script>

&lt;/body>

&lt;/html>

In an empty directory, save this page as <B><code>index.html</code></B>. 
To read it in the browser, you have two options:

use the File/Open menu: it is the most simple solution. 
It brings <a href="/static_doc/en/file_or_http.html">some limitations</a> for an advanced use, but it works perfectly for this tutorial
launch a web server : for instance, if the Python interpreter available from python.org is available on your machine, run <code>python -m http.server</code> in the file directory, then enter <I>localhost:8000/index.html</I> in the browser address bar

When you open the page, you should see the message "Hello !" printed on the browser window.

<H3>Page structure</h3>Let's take a look at the page contents. 
In the <code>&lt;head></code> zone we load the script <B><code>brython.js</code></B> : it is the Brython engine, the program that will find and execute the Python scripts included in the page. 
In this example we get it from a CDN, so that there is nothing to install on the PC. 
Note the version number (<code>brython@3.8.9</code>) : it can be updated for each new Brython version.

The <code>&lt;body></code> tag has an attribute <code>onload="brython()"</code>. 
It means that when the page has finished loading, the browser has to call the function <code>brython()</code>, which is defined in the Brython engine loaded in the page. 
The function searches all the <code>&lt;script></code>tags that have the attribute <code>type="text/python"</code> and executes them.

Our <B><code>index.html</code></B> page embeds this script:

from browser import document

document &lt;= "Hello !"

This is a standard Python program, starting by the import of a module, <B><code>browser</code></B> (in this case, a module shipped with the Brython engine <B><code>brython.js</code></B>). 
The module has an attribute <code>document</code> which references the content displayed in the browser window.

To add a text to the document - concretely, to display a text in the browser - the syntax used by Brython is

document &lt;= "Hello !"

You can think of the <code>&lt;=</code> sign as a left arrow : the document "receives" a new element, here the string "Hello !". 
You will see later that it is always possible to use the standardized DOM syntax to interact with the page, by Brython provides a few shortcuts to make the code less verbose.

<H3>Text formatting with HTML tags</h3>HTML tags allow text formatting, for instance to write it in bold letters (<code>&lt;B></code> tag), in italic (<code>&lt;I></code>), etc.

With Brython, these tags are available as functions defined in module <B><code>html</code></B> of the <B><code>browser</code></B> package. 
Here is how to use it:

from browser import document, html

document &lt;= html.B("Hello !")

Tags can be nested:

document &lt;= html.B(html.I("Hello !"))

Tags can also be added to each other, as well as strings:

document &lt;= html.B("Hello, ") + "world !"

The first argument of a tag function can be a string, a number, another tag. 
It can also be a Python "iterable" (list, comprehension, generator): in this case, all the elements produced in the iteration are added to the tag:

document &lt;= html.UL(html.LI(i) for i in range(5))

Tag attributes are passed as keyword arguments to the function:

html.A("Brython", href="http://brython.info")

<H3>Drawing the calculator</h3>We can draw our calculator as an HTML table.

The first line is made of the result zone, followed by a reset button. 
The next 3 lines are the calculator touches, digits and operations.

from browser import document, html

calc = html.TABLE()
calc &lt;= html.TR(html.TH(html.DIV("0", id="result"), colspan=3) +
                html.TH("C", id="clear"))
lines = ["789/",
         "456&#42;",
         "123-",
         "0.=+"]

calc &lt;= (html.TR(html.TD(x) for x in line) for line in lines)

document &lt;= calc

Note the use of Python generators to reduce the program size, while keeping it readable.

Let's add style to the <code>&lt;TD></code> tags in a stylesheet so that the calculator looks better:

&lt;style>
&#42;{
    font-family: sans-serif;
    font-weight: normal;
    font-size: 1.1em;
}
td{
    background-color: #ccc;
    padding: 10px 30px 10px 30px;
    border-radius: 0.2em;
    text-align: center;
    cursor: default;
}
#result{
    border-color: #000;
    border-width: 1px;
    border-style: solid;
    padding: 10px 30px 10px 30px;
    text-align: right;
}
&lt;/style>

<H3>Event handling</h3>The next step is to trigger an action when the user presses the calculator touches:

for digits and operations : print(the digit or operation in the result )zone
for the = sign : execute the operation and print(the result, or an error )message if the input is invalid
for the C letter : reset the result zone


To handle the elements printed in the page, the program need first to get a reference to them. 
The buttons have been created as <code>&lt;TD></code> tags; to get a reference to all these tags, the syntax is

document.select("td")

The result of <code>select()</code> is always a list of elements.

The events that can occur on the elements of a page have a normalized name: when the user clicks on a button, the event called "click" is triggered. 
In the program, this event will provoque the execution of a function. 
The association betweeen element, event and function is defined by the syntax

element.bind("click", action)

For the calculator, we can associate the same function to the "click" event on all buttons by:

for button in document.select("td"):
    button.bind("click", action)

To be compliant to Python syntax, the function <code>action()</code> must have been defined somewhere before in the program. 
Such "callback" functions take a single parameter, an object that represents the event.

<H3>Complete program</h3>Here is the code that manages a minimal version of the calculator. 
The most important part is in the function <code>action(event)</code>.

from browser import document, html

# Construction de la calculatrice
calc = html.TABLE()
calc &lt;= html.TR(html.TH(html.DIV("0", id="result"), colspan=3) +
                html.TD("C"))
lines = ["789/", "456&#42;", "123-", "0.=+"]

calc &lt;= (html.TR(html.TD(x) for x in line) for line in lines)

document &lt;= calc

result = document["result"] # direct acces to an element by its id

def action(event):
    """Handles the "click" event on a button of the calculator."""
    # The element the user clicked on is the attribute "target" of the
    # event object
    element = event.target
    # The text printed on the button is the element's "text" attribute
    value = element.text
    if value not in "=C":
        # update the result zone
        if result.text in ["0", "error"]:
            result.text = value
        else:
            result.text = result.text + value
    elif value == "C":
        # reset
        result.text = "0"
    elif value == "=":
        # execute the formula in result zone
        try:
            result.text = eval(result.text)
        except:
            result.text = "error"

# Associate function action() to the event "click" on all buttons
for button in document.select("td"):
    button.bind("click", action)

<h2>Python in the browser with Brython</h2>
<a href="https://www.youtube.com/watch?v=VJj-H4we71g" class="whitebut ">Python In The Browser</a>
    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.8.8/brython.js" integrity="sha256-rA89wPrTJJQFWJaZveKW8jpdmC3t5F9rRkPyBjz8G04=" crossorigin="anonymous">&lt;/script>

    &lt;script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.8.8/brython_stdlib.js" integrity="sha256-Gnrw9tIjrsXcZSCh/wos5Jrpn0bNVNFJuNJI9d71TDs=" crossorigin="anonymous">&lt;/script>

&lt;body onload="brython()">
    &lt;h1>Brython Crash Course&lt;/h1>

    &lt;h2 id="hello">&lt;/h2>
    &lt;button id="alert-btn">Alert & Insert&lt;/button>

    &lt;input type="text" id="text" placeholder="Enter something">
    &lt;span id="output">&lt;/span>

    &lt;h2 id="greet">Hello {name}&lt;/h2>

    &lt;button id="joke-btn">Get Joke&lt;/button>
    &lt;div id="joke" class="card">Click the "get joke" button&lt;/div>

    &lt;input type="file" id="file-upload">
    &lt;br>
    &lt;textarea id="file-text" cols="60" rows="10">&lt;/textarea>

    &lt;div class="card">
        &lt;button id="rotate-btn">Rotate&lt;/button>
        &lt;div id="rotate-box" class="box">&lt;/div>
    &lt;/div>

    &lt;h2>Saved Item: &lt;span id="item">&lt;/span>&lt;/h2>
    &lt;input type="text" id="item-input" placeholder="Add to local storage">
    &lt;button id="add-btn" style="display: inline;">Add&lt;/button>
    &lt;button id="remove-btn" style="display: inline;">Remove&lt;/button>

    &lt;!-- Alert & DOM insert -->
    &lt;script type="text/python" id="script0">
        from browser import document, console, alert

        def show(e):
            console.log(e)
            alert('Hello World')
            document['hello'] &lt;= 'Hello World'

        document['alert-btn'].bind('click', show)
    &lt;/script>

    &lt;!-- Text bind -->
    &lt;script type="text/python" id="script1">
        from browser import document

        def show_text(e):
            document['output'].textContent = e.target.value;

        document['text'].bind('input', show_text)
    &lt;/script>

    &lt;!-- Template and variable -->
    &lt;script type="text/python" id="script2">
        from browser import document
        from browser.template import Template

        Template(document['greet']).render(name='Brad')
    &lt;/script>

    &lt;!-- Ajax call -->
    &lt;script type="text/python" id="script3">
        from browser import document, ajax

        url = 'https://api.chucknorris.io/jokes/random'

        def on_complete(req):
            import json
            data = json.loads(req.responseText)
            joke = data['value']
            document['joke'].text = joke

        def get_joke(e):
            req = ajax.ajax()
            req.open('GET', url, True)
            req.bind('complete', on_complete)
            document['joke'].text = 'Loading...'
            req.send()

        document['joke-btn'].bind('click', get_joke)
    &lt;/script>

    &lt;!-- Load file data -->
    &lt;script type="text/python" id="script4">
        from browser import document, window

        def file_read(e):
            def onload(e):
                document['file-text'].value = e.target.result 
            
            file = document['file-upload'].files[0]
            reader = window.FileReader.new()
            reader.readAsText(file)
            reader.bind('load', onload)
        
        document['file-upload'].bind('input', file_read)
    &lt;/script>

    &lt;!-- Rotate - manipulate style -->
    &lt;script type="text/python" id="script5">
        from browser import document, html

        box = document['rotate-box']
        angle = 10

        def change(e):
            global angle
            box.style.transform = f"rotate({angle}deg)"
            angle += 10

        document['rotate-btn'].bind('click', change)
    &lt;/script>

    &lt;!-- Local storage -->
    &lt;script type="text/python" id="script6">
        from browser import document, html, window, console

        storage = window.localStorage

        if storage.getItem('item'):
            document['item'] &lt;= storage.getItem('item')

        def add_item(e):
            item = document['item-input'].value
            storage.setItem('item', item)
            document['item'].textContent = item

        def remove_item(e):
            storage.removeItem('item')
            document['item'].textContent = ''

        document['add-btn'].bind('click', add_item)
        document['remove-btn'].bind('click', remove_item)
    &lt;/script>
&lt;/body>
&lt;/html>

<h2>Python Selenium</h2>
<a href="https://www.youtube.com/watch?v=U6gbGk5WPws&list=PLzMcBGfZo4-n40rB1XaJ0ak1bemvlqumQ" class="whitebut ">selenium with Tim</a>

<a href="https://www.youtube.com/watch?v=Xjv1sY630Uc" class="whitebut ">Python Selenium Tutorial #1 - Web Scraping, Bots & Testing</a>
<a href="https://www.youtube.com/watch?v=b5jt2bhSeXs" class="whitebut ">Locating Elements From HTML</a>

<a href="https://selenium-python.readthedocs.io/" class="whitebut gold redts">Selenium with Python</a>

from selenium import webdriver # note! this file name cannot be selenium.py because this is not the library

PATH = "D:\Python36-32\chromedriver.exe"
driver = webdriver.Chrome(PATH)

driver.get("https://williamkpchan.github.io/LibDocs/python%20notes.html")
#driver.close() # this close the tab only if more than on tab on browser
print(driver.title)
driver.quit()

Tech with Tim sample:
From selenium import webdriver
from selenium.webdriver.common.Keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected conditions as EC
import time
PATH = "Program Files\Chromedriver.exe"
driver = webdriver.Chrome(PATH) 

driver.get("https://techwithtim.net")
print(driver.title) 
search = driver.find_element_by_name("s") search.send_keys("test")
search.send_keys(Keys.RETURN) 
try:
    main = WebDriverWait(driver, 10).until(
      EC.presence_of_element_located((By.ID, "main"))
    )

    articles = mal.n.find_e/ements by tag name("article")
    for article in articles:
      header = article.find_element_by_class_name("entry-summary")
      print(header.text) 

finally:
   driver.quit() 


<h2>Python call an external command</h2>
import subprocess
subprocess.run(["ls", "-l"])

import os
os.system("your command")

stream = os.popen("some_command with args")

subprocess.call(['ping', 'localhost'])

print subprocess.Popen("echo Hello World", shell=True, stdout=subprocess.PIPE).stdout.read()

print os.popen("echo Hello World").read()

return_code = subprocess.call("echo Hello World", shell=True)  

print subprocess.Popen("echo %s " % user_input, stdout=PIPE).stdout.read()

import subprocess

p = subprocess.Popen('ls', shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
for line in p.stdout.readlines():
    print line,
retval = p.wait()

<h2>常用 Matplotlib 图的 Python 代码</h2>
# !pip install brewer2mpl
import numpy as np
import pandas as pd
import matplotlib as mpl
import matplotlib.pyplot as plt
import seaborn as sns
import warnings; warnings.filterwarnings(action='once')

large = 22; med = 16; small = 12
params = {'axes.titlesize': large,
          'legend.fontsize': med,
          'figure.figsize': (16, 10),
          'axes.labelsize': med,
          'axes.titlesize': med,
          'xtick.labelsize': med,
          'ytick.labelsize': med,
          'figure.titlesize': large}
plt.rcParams.update(params)
plt.style.use('seaborn-whitegrid')
sns.set_style("white")
%matplotlib inline

# Version
print(mpl.__version__)  #> 3.0.0
print(sns.__version__)  #> 0.9.0

1. 散点图

Scatteplot是用于研究两个变量之间关系的经典和基本图。
如果数据中有多个组，则可能需要以不同颜色可视化每个组。
在Matplotlib，你可以方便地使用。
# Import dataset 
midwest = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv")

# Prepare Data 
# Create as many colors as there are unique midwest['category']
categories = np.unique(midwest['category'])
colors = [plt.cm.tab10(i/float(len(categories)-1)) for i in range(len(categories))]

# Draw Plot for Each Category
plt.figure(figsize=(16, 10), dpi= 80, facecolor='w', edgecolor='k')

for i, category in enumerate(categories):
    plt.scatter('area', 'poptotal', 
                data=midwest.loc[midwest.category==category, :], 
                s=20, c=colors[i], label=str(category))

# Decorations
plt.gca().set(xlim=(0.0, 0.1), ylim=(0, 90000),
              xlabel='Area', ylabel='Population')

plt.xticks(fontsize=12); plt.yticks(fontsize=12)
plt.title("Scatterplot of Midwest Area vs Population", fontsize=22)
plt.legend(fontsize=12)    
plt.show()    


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XonZhr7JHCvIRfpKoicB0ic5Ql9x58FibdkhYM5vhS8Yne9NzGXUf3nUIdg/640">

2. 带边界的气泡图

有时，您希望在边界内显示一组点以强调其重要性。
在此示例中，您将从应该被环绕的数据帧中获取记录，并将其传递给下面的代码中描述的记录。
encircle()

from matplotlib import patches
from scipy.spatial import ConvexHull
import warnings; warnings.simplefilter('ignore')
sns.set_style("white")

# Step 1: Prepare Data
midwest = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/midwest_filter.csv")

# As many colors as there are unique midwest['category']
categories = np.unique(midwest['category'])
colors = [plt.cm.tab10(i/float(len(categories)-1)) for i in range(len(categories))]

# Step 2: Draw Scatterplot with unique color for each category
fig = plt.figure(figsize=(16, 10), dpi= 80, facecolor='w', edgecolor='k')    

for i, category in enumerate(categories):
    plt.scatter('area', 'poptotal', data=midwest.loc[midwest.category==category, :], s='dot_size', c=colors[i], label=str(category), edgecolors='black', linewidths=.5)

# Step 3: Encircling
# https://stackoverflow.com/questions/44575681/how-do-i-encircle-different-data-sets-in-scatter-plot
def encircle(x,y, ax=None, **kw):
    if not ax: ax=plt.gca()
    p = np.c_[x,y]
    hull = ConvexHull(p)
    poly = plt.Polygon(p[hull.vertices,:], **kw)
    ax.add_patch(poly)

# Select data to be encircled
midwest_encircle_data = midwest.loc[midwest.state=='IN', :]                         

# Draw polygon surrounding vertices    
encircle(midwest_encircle_data.area, midwest_encircle_data.poptotal, ec="k", fc="gold", alpha=0.1)
encircle(midwest_encircle_data.area, midwest_encircle_data.poptotal, ec="firebrick", fc="none", linewidth=1.5)

# Step 4: Decorations
plt.gca().set(xlim=(0.0, 0.1), ylim=(0, 90000),
              xlabel='Area', ylabel='Population')

plt.xticks(fontsize=12); plt.yticks(fontsize=12)
plt.title("Bubble Plot with Encircling", fontsize=22)
plt.legend(fontsize=12)    
plt.show()    

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XowGiatRTtgalU6aKbsGRBe3UnSuUE2ib61oZ0AFxdrNYQyvPBDLh33Kicg/640">

3. 带线性回归最佳拟合线的散点图

如果你想了解两个变量如何相互改变，那么最合适的线就是要走的路。
下图显示了数据中各组之间最佳拟合线的差异。
要禁用分组并仅为整个数据集绘制一条最佳拟合线，请从下面的调用中删除该参数。

# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv")
df_select = df.loc[df.cyl.isin([4,8]), :]

# Plot
sns.set_style("white")
gridobj = sns.lmplot(x="displ", y="hwy", hue="cyl", data=df_select, 
                     height=7, aspect=1.6, robust=True, palette='tab10', 
                     scatter_kws=dict(s=60, linewidths=.7, edgecolors='black'))

# Decorations
gridobj.set(xlim=(0.5, 7.5), ylim=(0, 50))
plt.title("Scatterplot with line of best fit grouped by number of cylinders", fontsize=20)

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoxNSmR6jATNibHlbk2Pib901oKc5m4722MV3Vo3ia2W99JiamC4eobEfchg/640">

每个回归线都在自己的列中

或者，您可以在其自己的列中显示每个组的最佳拟合线。
你可以通过在里面设置参数来实现这一点。

# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv")
df_select = df.loc[df.cyl.isin([4,8]), :]

# Each line in its own column
sns.set_style("white")
gridobj = sns.lmplot(x="displ", y="hwy", 
                     data=df_select, 
                     height=7, 
                     robust=True, 
                     palette='Set1', 
                     col="cyl",
                     scatter_kws=dict(s=60, linewidths=.7, edgecolors='black'))

# Decorations
gridobj.set(xlim=(0.5, 7.5), ylim=(0, 50))
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoW0fQ9OicssPqSBntvWTnic86KjPkdZcEhotT1opWf60wn2dwFDQavPBA/640">

4. 抖动图

通常，多个数据点具有完全相同的X和Y值。
结果，多个点相互绘制并隐藏。
为避免这种情况，请稍微抖动点，以便您可以直观地看到它们。
这很方便使用
# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv")

# Draw Stripplot
fig, ax = plt.subplots(figsize=(16,10), dpi= 80)    
sns.stripplot(df.cty, df.hwy, jitter=0.25, size=8, ax=ax, linewidth=.5)

# Decorations
plt.title('Use jittered plots to avoid overlapping of points', fontsize=22)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoVntP6xJMo7MeFsPCpCiawMllDicxVntkSOR0AqibLcTwyd9rOocIwicoxw/640">

5. 计数图

避免点重叠问题的另一个选择是增加点的大小，这取决于该点中有多少点。
因此，点的大小越大，周围的点的集中度就越大。

# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv")
df_counts = df.groupby(['hwy', 'cty']).size().reset_index(name='counts')

# Draw Stripplot
fig, ax = plt.subplots(figsize=(16,10), dpi= 80)    
sns.stripplot(df_counts.cty, df_counts.hwy, size=df_counts.counts*2, ax=ax)

# Decorations
plt.title('Counts Plot - Size of circle is bigger as more points overlap', fontsize=22)
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoVxjdSJia5Ma018SXc7qC2Vf19s7oL8GNJa1Tn25zs9FcH0qdXKPjF2A/640">

6. 边缘直方图

边缘直方图具有沿X和Y轴变量的直方图。
这用于可视化X和Y之间的关系以及单独的X和Y的单变量分布。
该图如果经常用于探索性数据分析（EDA）。
# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv")

# Create Fig and gridspec
fig = plt.figure(figsize=(16, 10), dpi= 80)
grid = plt.GridSpec(4, 4, hspace=0.5, wspace=0.2)

# Define the axes
ax_main = fig.add_subplot(grid[:-1, :-1])
ax_right = fig.add_subplot(grid[:-1, -1], xticklabels=[], yticklabels=[])
ax_bottom = fig.add_subplot(grid[-1, 0:-1], xticklabels=[], yticklabels=[])

# Scatterplot on main ax
ax_main.scatter('displ', 'hwy', s=df.cty*4, c=df.manufacturer.astype('category').cat.codes, alpha=.9, data=df, cmap="tab10", edgecolors='gray', linewidths=.5)

# histogram on the right
ax_bottom.hist(df.displ, 40, histtype='stepfilled', orientation='vertical', color='deeppink')
ax_bottom.invert_yaxis()

# histogram in the bottom
ax_right.hist(df.hwy, 40, histtype='stepfilled', orientation='horizontal', color='deeppink')

# Decorations
ax_main.set(title='Scatterplot with Histograms 
 displ vs hwy', xlabel='displ', ylabel='hwy')
ax_main.title.set_fontsize(20)
for item in ([ax_main.xaxis.label, ax_main.yaxis.label] + ax_main.get_xticklabels() + ax_main.get_yticklabels()):
    item.set_fontsize(14)

xlabels = ax_main.get_xticks().tolist()
ax_main.set_xticklabels(xlabels)
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59Xo9yS8yPiaTLnvPzr6AL56koZ8cR1DvVo5Wib4lkibhttWTUjKsic3xYEj6Q/640">

7.边缘箱形图

边缘箱图与边缘直方图具有相似的用途。
然而，箱线图有助于精确定位X和Y的中位数，第25和第75百分位数。

# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/mpg_ggplot2.csv")

# Create Fig and gridspec
fig = plt.figure(figsize=(16, 10), dpi= 80)
grid = plt.GridSpec(4, 4, hspace=0.5, wspace=0.2)

# Define the axes
ax_main = fig.add_subplot(grid[:-1, :-1])
ax_right = fig.add_subplot(grid[:-1, -1], xticklabels=[], yticklabels=[])
ax_bottom = fig.add_subplot(grid[-1, 0:-1], xticklabels=[], yticklabels=[])

# Scatterplot on main ax
ax_main.scatter('displ', 'hwy', s=df.cty*5, c=df.manufacturer.astype('category').cat.codes, alpha=.9, data=df, cmap="Set1", edgecolors='black', linewidths=.5)

# Add a graph in each part
sns.boxplot(df.hwy, ax=ax_right, orient="v")
sns.boxplot(df.displ, ax=ax_bottom, orient="h")

# Decorations ------------------
# Remove x axis name for the boxplot
ax_bottom.set(xlabel='')
ax_right.set(ylabel='')

# Main Title, Xlabel and YLabel
ax_main.set(title='Scatterplot with Histograms 
 displ vs hwy', xlabel='displ', ylabel='hwy')

# Set font size of different components
ax_main.title.set_fontsize(20)
for item in ([ax_main.xaxis.label, ax_main.yaxis.label] + ax_main.get_xticklabels() + ax_main.get_yticklabels()):
    item.set_fontsize(14)

plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoCRBib2Ir4icG5p0jJt6OiaXa4QD197IdvX0y7Le7YYCib6aYaV4ZNQQSWg/640">

8. 相关图

Correlogram用于直观地查看给定数据帧（或2D数组）中所有可能的数值变量对之间的相关度量。

# Import Dataset
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mtcars.csv")

# Plot
plt.figure(figsize=(12,10), dpi= 80)
sns.heatmap(df.corr(), xticklabels=df.corr().columns, yticklabels=df.corr().columns, cmap='RdYlGn', center=0, annot=True)

# Decorations
plt.title('Correlogram of mtcars', fontsize=22)
plt.xticks(fontsize=12)
plt.yticks(fontsize=12)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoXBibLHgnfS2MJhEIsLibsicicIACsW2unaH18N9PnIKEbVcnOIic4B9nglw/640">

9. 矩阵图

成对图是探索性分析中的最爱，以理解所有可能的数字变量对之间的关系。
它是双变量分析的必备工具。

# Load Dataset
df = sns.load_dataset('iris')

# Plot
plt.figure(figsize=(10,8), dpi= 80)
sns.pairplot(df, kind="scatter", hue="species", plot_kws=dict(s=80, edgecolor="white", linewidth=2.5))
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XopclwpDws4b1kkSETWAWguOq3qvRgobzRdIFxHbn3MV61w32flgNNSg/640">
# Load Dataset
df = sns.load_dataset('iris')

# Plot
plt.figure(figsize=(10,8), dpi= 80)
sns.pairplot(df, kind="reg", hue="species")
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoydNM0FiaYELibzsRJB0cuXhIDBGknrZKEiaW3sPhkIVHzSPQ5bl8EzpBw/640">

偏差

10. 发散型条形图

如果您想根据单个指标查看项目的变化情况，并可视化此差异的顺序和数量，那么发散条是一个很好的工具。
它有助于快速区分数据中组的性能，并且非常直观，并且可以立即传达这一点。

# Prepare Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mtcars.csv")
x = df.loc[:, ['mpg']]
df['mpg_z'] = (x - x.mean())/x.std()
df['colors'] = ['red' if x < 0 else 'green' for x in df['mpg_z']]
df.sort_values('mpg_z', inplace=True)
df.reset_index(inplace=True)

# Draw plot
plt.figure(figsize=(14,10), dpi= 80)
plt.hlines(y=df.index, xmin=0, xmax=df.mpg_z, color=df.colors, alpha=0.4, linewidth=5)

# Decorations
plt.gca().set(ylabel='$Model$', xlabel='$Mileage$')
plt.yticks(df.index, df.cars, fontsize=12)
plt.title('Diverging Bars of Car Mileage', fontdict={'size':20})
plt.grid(linestyle='--', alpha=0.5)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoxZrDLSW3jK4POnCVPq75EdECKiaVx0AogRmerltmykfcYKH3icGepxvQ/640">

11. 发散型文本

分散的文本类似于发散条，如果你想以一种漂亮和可呈现的方式显示图表中每个项目的价值，它更喜欢。


# Prepare Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mtcars.csv")
x = df.loc[:, ['mpg']]
df['mpg_z'] = (x - x.mean())/x.std()
df['colors'] = ['red' 
if x &lt; 0 
else 'green' 
for x 
in df['mpg_z']]
df.sort_values('mpg_z', inplace=True)
df.reset_index(inplace=True)

# Draw plot
plt.figure(figsize=(14,14), dpi= 80)
plt.hlines(y=df.index, xmin=0, xmax=df.mpg_z)

for x, y, tex 
in zip(df.mpg_z, df.index, df.mpg_z):
    t = plt.text(x, y, round(tex, 2), horizontalalignment='right' 
if x &lt; 0 
else 'left', 
                 verticalalignment='center', fontdict={'color':'red' 
if x &lt; 0 
else 'green', 'size':14})

# Decorations    
plt.yticks(df.index, df.cars, fontsize=12)
plt.title('Diverging Text Bars of Car Mileage', fontdict={'size':20})
plt.grid(linestyle='--', alpha=0.5)
plt.xlim(-2.5, 2.5)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XobKDYs3VHf8ESImoC6goQWPutibLIHCkvdoYLTTn5I9HxOicFAxrbVKWw/640">

12. 发散型包点图

发散点图也类似于发散条。
然而，与发散条相比，条的不存在减少了组之间的对比度和差异。

# Prepare Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mtcars.csv")
x = df.loc[:, ['mpg']]
df['mpg_z'] = (x - x.mean())/x.std()
df['colors'] = ['red' if x < 0 else 'darkgreen' for x in df['mpg_z']]
df.sort_values('mpg_z', inplace=True)
df.reset_index(inplace=True)

# Draw plot
plt.figure(figsize=(14,16), dpi= 80)
plt.scatter(df.mpg_z, df.index, s=450, alpha=.6, color=df.colors)
for x, y, tex in zip(df.mpg_z, df.index, df.mpg_z):
    t = plt.text(x, y, round(tex, 1), horizontalalignment='center', 
                 verticalalignment='center', fontdict={'color':'white'})

# Decorations
# Lighten borders
plt.gca().spines["top"].set_alpha(.3)
plt.gca().spines["bottom"].set_alpha(.3)
plt.gca().spines["right"].set_alpha(.3)
plt.gca().spines["left"].set_alpha(.3)

plt.yticks(df.index, df.cars)
plt.title('Diverging Dotplot of Car Mileage', fontdict={'size':20})
plt.xlabel('$Mileage$')
plt.grid(linestyle='--', alpha=0.5)
plt.xlim(-2.5, 2.5)
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoPuSlT2eU5ibOfdIfcDxBmN8XADE4RLqD1osiart5wT4rv5VsqE3U6wnw/640">

13. 带标记的发散型棒棒糖图

带标记的棒棒糖通过强调您想要引起注意的任何重要数据点并在图表中适当地给出推理，提供了一种可视化分歧的灵活方式。

# Prepare Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mtcars.csv")
x = df.loc[:, ['mpg']]
df['mpg_z'] = (x - x.mean())/x.std()
df['colors'] = 'black'

# color fiat differently
df.loc[df.cars == 'Fiat X1-9', 'colors'] = 'darkorange'
df.sort_values('mpg_z', inplace=True)
df.reset_index(inplace=True)


# Draw plot
import matplotlib.patches as patches

plt.figure(figsize=(14,16), dpi= 80)
plt.hlines(y=df.index, xmin=0, xmax=df.mpg_z, color=df.colors, alpha=0.4, linewidth=1)
plt.scatter(df.mpg_z, df.index, color=df.colors, s=[600 if x == 'Fiat X1-9' else 300 for x in df.cars], alpha=0.6)
plt.yticks(df.index, df.cars)
plt.xticks(fontsize=12)

# Annotate
plt.annotate('Mercedes Models', xy=(0.0, 11.0), xytext=(1.0, 11), xycoords='data', 
            fontsize=15, ha='center', va='center',
            bbox=dict(boxstyle='square', fc='firebrick'),
            arrowprops=dict(arrowstyle='-[, widthB=2.0, lengthB=1.5', lw=2.0, color='steelblue'), color='white')

# Add Patches
p1 = patches.Rectangle((-2.0, -1), width=.3, height=3, alpha=.2, facecolor='red')
p2 = patches.Rectangle((1.5, 27), width=.8, height=5, alpha=.2, facecolor='green')
plt.gca().add_patch(p1)
plt.gca().add_patch(p2)

# Decorate
plt.title('Diverging Bars of Car Mileage', fontdict={'size':20})
plt.grid(linestyle='--', alpha=0.5)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoWRHdqOhiaSBOiaAOqAm2kMJRBZKHA3PiacKNRrVPdBVaVdUFDRibLft0ibA/640">

14.面积图

通过对轴和线之间的区域进行着色，区域图不仅强调峰值和低谷，而且还强调高点和低点的持续时间。
高点持续时间越长，线下面积越大。

import numpy as np
import pandas as pd

# Prepare Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/economics.csv", parse_dates=['date']).head(100)
x = np.arange(df.shape[0])
y_returns = (df.psavert.diff().fillna(0)/df.psavert.shift(1)).fillna(0) * 100

# Plot
plt.figure(figsize=(16,10), dpi= 80)
plt.fill_between(x[1:], y_returns[1:], 0, where=y_returns[1:] >= 0, facecolor='green', interpolate=True, alpha=0.7)
plt.fill_between(x[1:], y_returns[1:], 0, where=y_returns[1:] <= 0, facecolor='red', interpolate=True, alpha=0.7)

# Annotate
plt.annotate('Peak 
1975', xy=(94.0, 21.0), xytext=(88.0, 28),
             bbox=dict(boxstyle='square', fc='firebrick'),
             arrowprops=dict(facecolor='steelblue', shrink=0.05), fontsize=15, color='white')


# Decorations
xtickvals = [str(m)[:3].upper()+"-"+str(y) for y,m in zip(df.date.dt.year, df.date.dt.month_name())]
plt.gca().set_xticks(x[::6])
plt.gca().set_xticklabels(xtickvals[::6], rotation=90, fontdict={'horizontalalignment': 'center', 'verticalalignment': 'center_baseline'})
plt.ylim(-35,35)
plt.xlim(1,100)
plt.title("Month Economics Return %", fontsize=22)
plt.ylabel('Monthly returns %')
plt.grid(alpha=0.5)
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoiaKZB9EIrbKYlwoKbeVsPlM8nYsdXsRAnMS8n68ufvhYg7fMC2aWrLg/640">

15. 有序条形图

有序条形图有效地传达了项目的排名顺序。
但是，在图表上方添加度量标准的值，用户可以从图表本身获取精确信息。

# Prepare Data
df_raw = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")
df = df_raw[['cty', 'manufacturer']].groupby('manufacturer').apply(lambda x: x.mean())
df.sort_values('cty', inplace=True)
df.reset_index(inplace=True)

# Draw plot
import matplotlib.patches as patches

fig, ax = plt.subplots(figsize=(16,10), facecolor='white', dpi= 80)
ax.vlines(x=df.index, ymin=0, ymax=df.cty, color='firebrick', alpha=0.7, linewidth=20)

# Annotate Text
for i, cty in enumerate(df.cty):
    ax.text(i, cty+0.5, round(cty, 1), horizontalalignment='center')


# Title, Label, Ticks and Ylim
ax.set_title('Bar Chart for Highway Mileage', fontdict={'size':22})
ax.set(ylabel='Miles Per Gallon', ylim=(0, 30))
plt.xticks(df.index, df.manufacturer.str.upper(), rotation=60, horizontalalignment='right', fontsize=12)

# Add patches to color the X axis labels
p1 = patches.Rectangle((.57, -0.005), width=.33, height=.13, alpha=.1, facecolor='green', transform=fig.transFigure)
p2 = patches.Rectangle((.124, -0.005), width=.446, height=.13, alpha=.1, facecolor='red', transform=fig.transFigure)
fig.add_artist(p1)
fig.add_artist(p2)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XonZGbaCNzhbUmRX3NMIfe17Pf82EYTo6PM7vgw9MCODPYNdUaoEwibQg/640">

16. 棒棒糖图

棒棒糖图表以一种视觉上令人愉悦的方式提供与有序条形图类似的目的。

# Prepare Data
df_raw = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")
df = df_raw[['cty', 'manufacturer']].groupby('manufacturer').apply(lambda x: x.mean())
df.sort_values('cty', inplace=True)
df.reset_index(inplace=True)

# Draw plot
fig, ax = plt.subplots(figsize=(16,10), dpi= 80)
ax.vlines(x=df.index, ymin=0, ymax=df.cty, color='firebrick', alpha=0.7, linewidth=2)
ax.scatter(x=df.index, y=df.cty, s=75, color='firebrick', alpha=0.7)

# Title, Label, Ticks and Ylim
ax.set_title('Lollipop Chart for Highway Mileage', fontdict={'size':22})
ax.set_ylabel('Miles Per Gallon')
ax.set_xticks(df.index)
ax.set_xticklabels(df.manufacturer.str.upper(), rotation=60, fontdict={'horizontalalignment': 'right', 'size':12})
ax.set_ylim(0, 30)

# Annotate
for row in df.itertuples():
    ax.text(row.Index, row.cty+.5, s=round(row.cty, 2), horizontalalignment= 'center', verticalalignment='bottom', fontsize=14)

plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XomQZhULsahcTMS9D8icLEKfxGMggTd09ibHeZEScvxl3SBgBNUMfmbQ8A/640">

17. 包点图

点图表传达了项目的排名顺序。
由于它沿水平轴对齐，因此您可以更容易地看到点彼此之间的距离。
# Prepare Data
df_raw = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")
df = df_raw[['cty', 'manufacturer']].groupby('manufacturer').apply(lambda x: x.mean())
df.sort_values('cty', inplace=True)
df.reset_index(inplace=True)

# Draw plot
fig, ax = plt.subplots(figsize=(16,10), dpi= 80)
ax.hlines(y=df.index, xmin=11, xmax=26, color='gray', alpha=0.7, linewidth=1, linestyles='dashdot')
ax.scatter(y=df.index, x=df.cty, s=75, color='firebrick', alpha=0.7)

# Title, Label, Ticks and Ylim
ax.set_title('Dot Plot for Highway Mileage', fontdict={'size':22})
ax.set_xlabel('Miles Per Gallon')
ax.set_yticks(df.index)
ax.set_yticklabels(df.manufacturer.str.title(), fontdict={'horizontalalignment': 'right'})
ax.set_xlim(10, 27)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59Xo9G1TEjdUYKOFjkYlbn7YdweyYWhN9RE9UibXyR9yXnNHlqQV6pxN9cg/640">

18. 坡度图

斜率图最适合比较给定人/项目的“之前”和“之后”位置。

import matplotlib.lines as mlines
# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/gdppercap.csv")

left_label = [str(c) + ', '+ str(round(y)) for c, y in zip(df.continent, df['1952'])]
right_label = [str(c) + ', '+ str(round(y)) for c, y in zip(df.continent, df['1957'])]
klass = ['red' if (y1-y2) < 0 else 'green' for y1, y2 in zip(df['1952'], df['1957'])]

# draw line
# https://stackoverflow.com/questions/36470343/how-to-draw-a-line-with-matplotlib/36479941
def newline(p1, p2, color='black'):
    ax = plt.gca()
    l = mlines.Line2D([p1[0],p2[0]], [p1[1],p2[1]], color='red' if p1[1]-p2[1] > 0 else 'green', marker='o', markersize=6)
    ax.add_line(l)
    return l

fig, ax = plt.subplots(1,1,figsize=(14,14), dpi= 80)

# Vertical Lines
ax.vlines(x=1, ymin=500, ymax=13000, color='black', alpha=0.7, linewidth=1, linestyles='dotted')
ax.vlines(x=3, ymin=500, ymax=13000, color='black', alpha=0.7, linewidth=1, linestyles='dotted')

# Points
ax.scatter(y=df['1952'], x=np.repeat(1, df.shape[0]), s=10, color='black', alpha=0.7)
ax.scatter(y=df['1957'], x=np.repeat(3, df.shape[0]), s=10, color='black', alpha=0.7)

# Line Segmentsand Annotation
for p1, p2, c in zip(df['1952'], df['1957'], df['continent']):
    newline([1,p1], [3,p2])
    ax.text(1-0.05, p1, c + ', ' + str(round(p1)), horizontalalignment='right', verticalalignment='center', fontdict={'size':14})
    ax.text(3+0.05, p2, c + ', ' + str(round(p2)), horizontalalignment='left', verticalalignment='center', fontdict={'size':14})

# 'Before' and 'After' Annotations
ax.text(1-0.05, 13000, 'BEFORE', horizontalalignment='right', verticalalignment='center', fontdict={'size':18, 'weight':700})
ax.text(3+0.05, 13000, 'AFTER', horizontalalignment='left', verticalalignment='center', fontdict={'size':18, 'weight':700})

# Decoration
ax.set_title("Slopechart: Comparing GDP Per Capita between 1952 vs 1957", fontdict={'size':22})
ax.set(xlim=(0,4), ylim=(0,14000), ylabel='Mean GDP Per Capita')
ax.set_xticks([1,3])
ax.set_xticklabels(["1952", "1957"])
plt.yticks(np.arange(500, 13000, 2000), fontsize=12)

# Lighten borders
plt.gca().spines["top"].set_alpha(.0)
plt.gca().spines["bottom"].set_alpha(.0)
plt.gca().spines["right"].set_alpha(.0)
plt.gca().spines["left"].set_alpha(.0)
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoZVrrI8nEfLYOzxVaJ7rp1Mhntluh1Z4gVic2Xnj39DxJqTLoib0BO9Sw/640">

19. 哑铃图

哑铃图传达各种项目的“前”和“后”位置以及项目的排序。
如果您想要将特定项目/计划对不同对象的影响可视化，那么它非常有用。

import matplotlib.lines as mlines

# Import Data
df = pd.read_csv("https://raw.githubusercontent.com/selva86/datasets/master/health.csv")
df.sort_values('pct_2014', inplace=True)
df.reset_index(inplace=True)

# Func to draw line segment
def newline(p1, p2, color='black'):
    ax = plt.gca()
    l = mlines.Line2D([p1[0],p2[0]], [p1[1],p2[1]], color='skyblue')
    ax.add_line(l)
    return l

# Figure and Axes
fig, ax = plt.subplots(1,1,figsize=(14,14), facecolor='#f7f7f7', dpi= 80)

# Vertical Lines
ax.vlines(x=.05, ymin=0, ymax=26, color='black', alpha=1, linewidth=1, linestyles='dotted')
ax.vlines(x=.10, ymin=0, ymax=26, color='black', alpha=1, linewidth=1, linestyles='dotted')
ax.vlines(x=.15, ymin=0, ymax=26, color='black', alpha=1, linewidth=1, linestyles='dotted')
ax.vlines(x=.20, ymin=0, ymax=26, color='black', alpha=1, linewidth=1, linestyles='dotted')

# Points
ax.scatter(y=df['index'], x=df['pct_2013'], s=50, color='#0e668b', alpha=0.7)
ax.scatter(y=df['index'], x=df['pct_2014'], s=50, color='#a3c4dc', alpha=0.7)

# Line Segments
for i, p1, p2 in zip(df['index'], df['pct_2013'], df['pct_2014']):
    newline([p1, i], [p2, i])

# Decoration
ax.set_facecolor('#f7f7f7')
ax.set_title("Dumbell Chart: Pct Change - 2013 vs 2014", fontdict={'size':22})
ax.set(xlim=(0,.25), ylim=(-1, 27), ylabel='Mean GDP Per Capita')
ax.set_xticks([.05, .1, .15, .20])
ax.set_xticklabels(['5%', '15%', '20%', '25%'])
ax.set_xticklabels(['5%', '15%', '20%', '25%'])    
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoahXbCAXON3Z9b5aksAficXeufOqZLy95G6rz5RF3EaBmMKxZBC1JSHg/640">

20. 连续变量的直方图

直方图显示给定变量的频率分布。
下面的表示基于分类变量对频率条进行分组，从而更好地了解连续变量和串联变量。

# Import Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")

# Prepare data
x_var = 'displ'
groupby_var = 'class'
df_agg = df.loc[:, [x_var, groupby_var]].groupby(groupby_var)
vals = [df[x_var].values.tolist() for i, df in df_agg]

# Draw
plt.figure(figsize=(16,9), dpi= 80)
colors = [plt.cm.Spectral(i/float(len(vals)-1)) for i in range(len(vals))]
n, bins, patches = plt.hist(vals, 30, stacked=True, density=False, color=colors[:len(vals)])

# Decoration
plt.legend({group:col for group, col in zip(np.unique(df[groupby_var]).tolist(), colors[:len(vals)])})
plt.title(f"Stacked Histogram of ${x_var}$ colored by ${groupby_var}$", fontsize=22)
plt.xlabel(x_var)
plt.ylabel("Frequency")
plt.ylim(0, 25)
plt.xticks(ticks=bins[::3], labels=[round(b,1) for b in bins[::3]])
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59Xo32GHKrfDgAE3O0G3Rb0sicXBOwicR2tj0gn5YjiahhUM2rGtbg9xLlicqw/640">

21. 类型变量的直方图

分类变量的直方图显示该变量的频率分布。
通过对条形图进行着色，您可以将分布与表示颜色的另一个分类变量相关联。

# Import Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")

# Prepare data
x_var = 'manufacturer'
groupby_var = 'class'
df_agg = df.loc[:, [x_var, groupby_var]].groupby(groupby_var)
vals = [df[x_var].values.tolist() for i, df in df_agg]

# Draw
plt.figure(figsize=(16,9), dpi= 80)
colors = [plt.cm.Spectral(i/float(len(vals)-1)) for i in range(len(vals))]
n, bins, patches = plt.hist(vals, df[x_var].unique().__len__(), stacked=True, density=False, color=colors[:len(vals)])

# Decoration
plt.legend({group:col for group, col in zip(np.unique(df[groupby_var]).tolist(), colors[:len(vals)])})
plt.title(f"Stacked Histogram of ${x_var}$ colored by ${groupby_var}$", fontsize=22)
plt.xlabel(x_var)
plt.ylabel("Frequency")
plt.ylim(0, 40)
plt.xticks(ticks=bins, labels=np.unique(df[x_var]).tolist(), rotation=90, horizontalalignment='left')
plt.show()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XoJsibvuR3QoYQrrnVPqRyXPX8icHovWdnuoHPQXpMjFxpF3M2NUoRqLmw/640">

22. 密度图

密度图是一种常用工具，可视化连续变量的分布。
通过“响应”变量对它们进行分组，您可以检查X和Y之间的关系。
以下情况，如果出于代表性目的来描述城市里程的分布如何随着汽缸数的变化而变化。

# Import Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")

# Draw Plot
plt.figure(figsize=(16,10), dpi= 80)
sns.kdeplot(df.loc[df['cyl'] == 4, "cty"], shade=True, color="g", label="Cyl=4", alpha=.7)
sns.kdeplot(df.loc[df['cyl'] == 5, "cty"], shade=True, color="deeppink", label="Cyl=5", alpha=.7)
sns.kdeplot(df.loc[df['cyl'] == 6, "cty"], shade=True, color="dodgerblue", label="Cyl=6", alpha=.7)
sns.kdeplot(df.loc[df['cyl'] == 8, "cty"], shade=True, color="orange", label="Cyl=8", alpha=.7)

# Decoration
plt.title('Density Plot of City Mileage by n_Cylinders', fontsize=22)
plt.legend()


<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XodE1LdEjDavOGpaHJMRuV0Z0we5O3aIt9GtTIf4J9Zgy6DJznan6EWg/640">

23. 直方密度线图

带有直方图的密度曲线将两个图表传达的集体信息汇集在一起，这样您就可以将它们放在一个图形而不是两个图形中。

# Import Data
df = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")

# Draw Plot
plt.figure(figsize=(13,10), dpi= 80)
sns.distplot(df.loc[df['class'] == 'compact', "cty"], color="dodgerblue", label="Compact", hist_kws={'alpha':.7}, kde_kws={'linewidth':3})
sns.distplot(df.loc[df['class'] == 'suv', "cty"], color="orange", label="SUV", hist_kws={'alpha':.7}, kde_kws={'linewidth':3})
sns.distplot(df.loc[df['class'] == 'minivan', "cty"], color="g", label="minivan", hist_kws={'alpha':.7}, kde_kws={'linewidth':3})
plt.ylim(0, 0.35)

# Decoration
plt.title('Density Plot of City Mileage by Vehicle Type', fontsize=22)
plt.legend()
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XogqCf9HBALD5xc0QVa8PqIicn8S6Iy1PETQO2aTgCnWAzoG0tQic5ja0Q/640">

24. Joy Plot

Joy Plot允许不同组的密度曲线重叠，这是一种可视化相对于彼此的大量组的分布的好方法。
它看起来很悦目，并清楚地传达了正确的信息。
它可以使用joypy基于的包来轻松构建matplotlib。

# !pip install joypy
# Import Data
mpg = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")

# Draw Plot
plt.figure(figsize=(16,10), dpi= 80)
fig, axes = joypy.joyplot(mpg, column=['hwy', 'cty'], by="class", ylim='own', figsize=(14,10))

# Decoration
plt.title('Joy Plot of City and Highway Mileage by Class', fontsize=22)
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59Xo8TX7eODBUgiacumFNI4ic7fgPiaTnscicAFvvKRQrc0mvsRzqfLdNZibgyg/640">

25. 分布式点图

分布点图显示按组分割的点的单变量分布。
点数越暗，该区域的数据点集中度越高。
通过对中位数进行不同着色，组的真实定位立即变得明显。

import matplotlib.patches as mpatches

# Prepare Data
df_raw = pd.read_csv("https://github.com/selva86/datasets/raw/master/mpg_ggplot2.csv")
cyl_colors = {4:'tab:red', 5:'tab:green', 6:'tab:blue', 8:'tab:orange'}
df_raw['cyl_color'] = df_raw.cyl.map(cyl_colors)

# Mean and Median city mileage by make
df = df_raw[['cty', 'manufacturer']].groupby('manufacturer').apply(lambda x: x.mean())
df.sort_values('cty', ascending=False, inplace=True)
df.reset_index(inplace=True)
df_median = df_raw[['cty', 'manufacturer']].groupby('manufacturer').apply(lambda x: x.median())

# Draw horizontal lines
fig, ax = plt.subplots(figsize=(16,10), dpi= 80)
ax.hlines(y=df.index, xmin=0, xmax=40, color='gray', alpha=0.5, linewidth=.5, linestyles='dashdot')

# Draw the Dots
for i, make in enumerate(df.manufacturer):
    df_make = df_raw.loc[df_raw.manufacturer==make, :]
    ax.scatter(y=np.repeat(i, df_make.shape[0]), x='cty', data=df_make, s=75, edgecolors='gray', c='w', alpha=0.5)
    ax.scatter(y=i, x='cty', data=df_median.loc[df_median.index==make, :], s=75, c='firebrick')

# Annotate    
ax.text(33, 13, "$red ; dots ; are ; the : median$", fontdict={'size':12}, color='firebrick')

# Decorations
red_patch = plt.plot([],[], marker="o", ms=10, ls="", mec=None, color='firebrick', label="Median")
plt.legend(handles=red_patch)
ax.set_title('Distribution of City Mileage by Make', fontdict={'size':22})
ax.set_xlabel('Miles Per Gallon (City)', alpha=0.7)
ax.set_yticks(df.index)
ax.set_yticklabels(df.manufacturer.str.title(), fontdict={'horizontalalignment': 'right'}, alpha=0.7)
ax.set_xlim(1, 40)
plt.xticks(alpha=0.7)
plt.gca().spines["top"].set_visible(False)    
plt.gca().spines["bottom"].set_visible(False)    
plt.gca().spines["right"].set_visible(False)    
plt.gca().spines["left"].set_visible(False)   
plt.grid(axis='both', alpha=.4, linewidth=.1)
plt.show()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/Rm6KfjqOnWypN2HXibLe70Z9G5dXW59XodhaTaviaYQvOnYolSvN1XbksgIibE0fPcHiaAk4e9Qj0VgwTkopWDlvpQ/640">

<h2>Machine Learning Project Walk-Through in Python: Part One</h2>
Reading through a data science book or taking a course, it can feel like you have the individual pieces, but don’t quite know how to put them together. 
Taking the next step and solving a complete machine learning problem can be daunting, but preserving and completing a first project will give you the confidence to tackle any data science problem. 
This series of articles will walk through a complete machine learning solution with a real-world dataset to let you see how all the pieces come together.
We’ll follow the general machine learning workflow step-by-step:
<li>Data cleaning and formatting</li><li>Exploratory data analysis</li><li>Feature engineering and selection</li><li>Compare several machine learning models on a performance metric</li><li>Perform hyperparameter tuning on the best model</li><li>Evaluate the best model on the testing set</li><li>Interpret the model results</li><li>Draw conclusions and document work</li>
Along the way, we’ll see how each step flows into the next and how to specifically implement each part in Python. 
The <a href="https://github.com/WillKoehrsen/machine-learning-project-walkthrough" target="_blank" rel="noopener nofollow">complete project</a> is available on GitHub, with the <a href="https://github.com/WillKoehrsen/machine-learning-project-walkthrough/blob/master/Machine%20Learning%20Project%20Part%201.ipynb" target="_blank" rel="noopener nofollow">first notebook here.</a> This first article will cover steps 1–3 with the rest addressed in subsequent posts.
(As a note, this problem was originally given to me as an “assignment” for a job screen at a start-up. 
After completing the work, I was offered the job, but then the CTO of the company quit and they weren’t able to bring on any new employees. 
I guess that’s how things go on the start-up scene!)

<h3>Problem Definition</h3>The first step before we get coding is to understand the problem we are trying to solve and the available data. 
In this project, we will work with <a href="http://www.nyc.gov/html/gbee/html/plan/ll84_scores.shtml" target="_blank" rel="noopener nofollow">publicly available building energy data</a> from New York City.
<strong>The objective is to use the energy data to build a model that can predict the Energy Star Score of a building and interpret the results to find the factors influence the score.</strong>
The data includes the Energy Star Score, makes this a supervised regression machine learning task:
<ul><li><strong>Supervised:</strong> we have access to both the features and the target and our goal is to train a model that can learn a mapping between the two</li><li><strong>Regression: </strong>The Energy Star score is a continuous variable</li></ul>We want to develop a model that is both <strong>accurate </strong>— it can predict the Energy Star Score close to the true value — and <strong>interpretable</strong> — we can understand the model predictions. 
Once we know the goal, we can use it to guide our decisions as we dig into the data and build models.
<h3>Data Cleaning</h3>Contrary to what most data science courses would have you believe, not every dataset is a perfectly curated group of observations with no missing values or anomalies (looking at you <a href="http://stat.ethz.ch/R-manual/R-devel/library/datasets/html/mtcars.html" target="_blank" rel="noopener nofollow">mtcars</a> and<a href="https://archive.ics.uci.edu/ml/datasets/iris" target="_blank" rel="noopener nofollow"> iris</a> datasets). 
Real-world data is messy means we need to<a href="https://www.springboard.com/blog/data-wrangling/" target="_blank" rel="noopener nofollow"> clean and wrangle</a> it into an acceptable format before we can even start the analysis. 
Data cleaning is an un-glamorous, but necessary part of most actual data science problems.
First, we can load in the data as a Pandas <code>DataFrame</code> and take a look:
import pandas as pd
import numpy as np
# Read in data into a dataframe 
data = pd.read_csv(&#x27;data/Energy_and_Water_Data_Disclosure_for_Local_Law_84_2017__Data_for_Calendar_Year_2016_.csv&#x27;)
# Display top of dataframe
data.head()

<img src="https://miro.medium.com/max/552/1*lBRxdBwvf5seFNwnJH7s8Q.png">

What Actual Data Looks Like!
This is a subset of the full data contains 60 columns. 
Already, we can see a couple issues: first, we know that we want to predict the <code>ENERGY STAR Score</code> but we don’t know what any of the columns mean. 
While this isn’t necessarily an issue — we can often make an accurate model without any knowledge of the variables — we want to focus on interpretability, and it might be important to understand at least some of the columns.
When I originally got the assignment from the start-up, I didn’t want to ask what all the column names meant, so I looked at the name of the file,

<img src="https://miro.medium.com/max/552/1*VBR172ne94Os6bnOIRGDmw.png">

and decided to search for “Local Law 84”. 
That led me to <a href="http://www.nyc.gov/html/gbee/html/plan/ll84.shtml" target="_blank" rel="noopener nofollow">this page </a>explains this is an NYC law requiring all buildings of a certain size to report their energy use. 
More searching brought me to <a href="http://www.nyc.gov/html/gbee/downloads/misc/nyc_benchmarking_disclosure_data_definitions_2017.pdf" target="_blank" rel="noopener nofollow">all the definitions of the columns.</a> Maybe looking at a file name is an obvious place to start, but for me this was a reminder to go slow so you don’t miss anything important!
We don’t need to study all of the columns, but we should at least understand the Energy Star Score, is described as:
A 1-to-100 percentile ranking based on self-reported energy usage for the reporting year. 
The <a href="https://www.energystar.gov/buildings/facility-owners-and-managers/existing-buildings/use-portfolio-manager/interpret-your-results/what" target="_blank" rel="noopener nofollow">Energy Star score </a>is a relative measure used for comparing the energy efficiency of buildings.
That clears up the first problem, but the second issue is that missing values are encoded as “Not Available”. 
This is a string in Python means that even the columns with numbers will be stored as <code>object</code> datatypes because Pandas converts a column with any strings into a column of all strings. 
We can see the datatypes of the columns using the <code>dataframe.info()</code>method:
# See the column data types and non-missing values
data.info()

<img src="https://miro.medium.com/max/552/1*eNySZpSyjMZ3qaFGm9Fx4w.png">

Sure enough, some of the columns that clearly contain numbers (such as ft²), are stored as objects. 
We can’t do numerical analysis on strings, so these will have to be converted to number (specifically <code>float</code>) data types!
Here’s a little Python code that replaces all the “Not Available” entries with not a number ( <code>np.nan</code>), can be interpreted as numbers, and then converts the relevant columns to the <code>float</code> datatype:

Once the correct columns are numbers, we can start to investigate the data.
<h3>Missing Data and Outliers</h3>In addition to incorrect datatypes, another common problem when dealing with real-world data is missing values. 
These can arise for many reasons and have to be either filled in or removed before we train a machine learning model. 
First, let’s get a sense of how many missing values are in each column (see the <a href="https://github.com/WillKoehrsen/machine-learning-project-walkthrough/blob/master/Machine%20Learning%20Project%20Part%201.ipynb" target="_blank" rel="noopener nofollow">notebook for code</a>).

<img src="https://miro.medium.com/max/552/1*sMBTwTO63m_mM-Y-6VFveA.png">

(To create this table, I used a function from this <a href="https://stackoverflow.com/questions/26266362/how-to-count-the-nan-values-in-a-column-in-pandas-dataframe/39734251#39734251" target="_blank" rel="noopener nofollow">Stack Overflow Forum</a>).
While we always want to be careful about removing information, if a column has a high percentage of missing values, then it probably will not be useful to our model. 
The threshold for removing columns should depend on the problem (<a href="https://discuss.analyticsvidhya.com/t/what-should-be-the-allowed-percentage-of-missing-values/2456" target="_blank" rel="noopener nofollow">here is a discussion</a>), and for this project, we will remove any columns with more than 50% missing values.
At this point, we may also want to remove outliers. 
These can be due to typos in data entry, mistakes in units, or they could be legitimate but extreme values. 
For this project, we will remove anomalies based on the <a href="https://www.itl.nist.gov/div898/handbook/prc/section1/prc16.htm" target="_blank" rel="noopener nofollow">definition of extreme outliers</a>:
<ul><li>Below the first quartile − 3 ∗ interquartile range</li><li>Above the third quartile + 3 ∗ interquartile range</li></ul>(For the code to remove the columns and the anomalies, see the notebook). 
At the end of the data cleaning and anomaly removal process, we are left with over 11,000 buildings and 49 features.

<h3>Exploratory Data Analysis</h3>Now that the tedious — but necessary — step of data cleaning is complete, we can move on to exploring our data! <a href="https://en.wikipedia.org/wiki/Exploratory_data_analysis" target="_blank" rel="noopener nofollow">Exploratory Data Analysis </a>(EDA) is an open-ended process where we calculate statistics and make figures to find trends, anomalies, patterns, or relationships within the data.
In short, the goal of EDA is to learn what our data can tell us. 
It generally starts out with a high level overview, then narrows in to specific areas as we find interesting parts of the data. 
The findings may be interesting in their own right, or they can be used to inform our modeling choices, such as by helping us decide features to use.
<h3>Single Variable Plots</h3>The goal is to predict the Energy Star Score (renamed to <code>score</code> in our data) so a reasonable place to start is examining the distribution of this variable. 
A histogram is a simple yet effective way to visualize the distribution of a single variable and is easy to make using <code>matplotlib</code>.
import matplotlib.pyplot as plt
# Histogram of the Energy Star Score
plt.style.use(&#x27;fivethirtyeight&#x27;)
plt.hist(data[&#x27;score&#x27;].dropna(), bins = 100, edgecolor = &#x27;k&#x27;);
plt.xlabel(&#x27;Score&#x27;); plt.ylabel(&#x27;Number of Buildings&#x27;); 
plt.title(&#x27;Energy Star Score Distribution&#x27;);

<img src="https://miro.medium.com/max/552/1*1OWn-GlBnERW5xs0M83a5Q.png">

This looks quite suspicious! The Energy Star score is a percentile rank, means we would expect to see a uniform distribution, with each score assigned to the same number of buildings. 
However, a disproportionate number of buildings have either the highest, 100, or the lowest, 1, score (higher is better for the Energy Star score).
If we go back to the definition of the score, we see that it is based on “self-reported energy usage” might explain the very high scores. 
Asking building owners to report their own energy usage is like asking students to report their own scores on a test! As a result, this probably is not the most objective measure of a building’s energy efficiency.
If we had an unlimited amount of time, we might want to investigate why so many buildings have very high and very low scores we could by selecting these buildings and seeing what they have in common. 
However, our objective is only to predict the score and not to devise a better method of scoring buildings! We can make a note in our report that the scores have a suspect distribution, but our main focus in on predicting the score.
<h3>Looking for Relationships</h3>A major part of EDA is searching for relationships between the features and the target. 
Variables that are correlated with the target are useful to a model because they can be used to predict the target. 
One way to examine the effect of a categorical variable (takes on only a limited set of values) on the target is through a density plot using the <code>seaborn</code> library.

A <a href="https://towardsdatascience.com/histograms-and-density-plots-in-python-f6bda88f5ac0">density plot can be thought of as a smoothed histogram</a> because it shows the distribution of a single variable. 
We can color a density plot by class to see how a categorical variable changes the distribution. 
The following code makes a density plot of the Energy Star Score colored by the the type of building (limited to building types with more than 100 data points):

<img src="https://miro.medium.com/max/552/1*WGNYzKjgXSnahDwacrbdLw.png">

We can see that the building type has a significant impact on the Energy Star Score. 
Office buildings tend to have a higher score while Hotels have a lower score. 
This tells us that we should include the building type in our modeling because it does have an impact on the target. 
As a categorical variable, we will have to one-hot encode the building type.
A similar plot can be used to show the Energy Star Score by borough:

<img src="https://miro.medium.com/max/552/1*ZSY_DEr-Gi2uSLp7tPSFVQ.png">

The borough does not seem to have as large of an impact on the score as the building type. 
Nonetheless, we might want to include it in our model because there are slight differences between the boroughs.
To quantify relationships between variables, we can use the <a href="http://www.statisticshowto.com/probability-and-statistics/correlation-coefficient-formula/" target="_blank" rel="noopener nofollow">Pearson Correlation Coefficient</a>. 
This is a measure of the strength and direction of a linear relationship between two variables. 
A score of +1 is a perfectly linear positive relationship and a score of -1 is a perfectly negative linear relationship. 
Several values of the correlation coefficient are shown below:

<img src="https://miro.medium.com/max/552/1*5pIn2VmzWxL2mzY8Z433hg.png">

Values of the Pearson Correlation Coefficient (<a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient" target="_blank" rel="noopener nofollow">Source</a>)
While the correlation coefficient cannot capture non-linear relationships, it is a good way to start figuring out how variables are related. 
In Pandas, we can easily calculate the correlations between any columns in a dataframe:
# Find all correlations with the score and sort 
correlations_data = data.corr()[&#x27;score&#x27;].sort_values()
The most negative (left) and positive (right) correlations with the target:

<img src="https://miro.medium.com/max/552/1*1Vm0gHqc0cXoDAgH0eiP_w.png">

<img src="https://miro.medium.com/max/552/1*mNju0CER7cYrvbr-4vx-Fw.png">

There are several strong negative correlations between the features and the target with the most negative the different categories of EUI (these measures vary slightly in how they are calculated). 
The <a href="https://www.energystar.gov/buildings/facility-owners-and-managers/existing-buildings/use-portfolio-manager/understand-metrics/what-energy" target="_blank" rel="noopener nofollow">EUI — Energy Use Intensity</a> — is the amount of energy used by a building divided by the square footage of the buildings. 
It is meant to be a measure of the efficiency of a building with a lower score being better. 
Intuitively, these correlations make sense: as the EUI increases, the Energy Star Score tends to decrease.
<h3>Two-Variable Plots</h3>To visualize relationships between two continuous variables, we use scatterplots. 
We can include additional information, such as a categorical variable, in the color of the points. 
For example, the following plot shows the Energy Star Score vs. 
Site EUI colored by the building type:

<img src="https://miro.medium.com/max/552/1*C8K7UQDrD9ASsKU-diTN_Q.png">

This plot lets us visualize what a correlation coefficient of -0.7 looks like. 
As the Site EUI decreases, the Energy Star Score increases, a relationship that holds steady across the building types.
The final exploratory plot we will make is known as the <a href="https://towardsdatascience.com/visualizing-data-with-pair-plots-in-python-f228cf529166">Pairs Plot. </a>
This is a great exploration tool because it lets us see relationships between multiple pairs of variables as well as distributions of single variables. 
Here we are using the seaborn visualization library and the <code>PairGrid</code> function to create a Pairs Plot with scatterplots on the upper triangle, histograms on the diagonal, and 2D kernel density plots and correlation coefficients on the lower triangle.

<img src="https://miro.medium.com/max/552/1*eHKEmJk0LrIQc8yxUYWhIg.png">

To see interactions between variables, we look for where a row intersects with a column. 
For example, to see the correlation of <code>Weather Norm EUI</code> with <code>score</code>, we look in the <code>Weather Norm EUI</code> row and the <code>score</code> column and see a correlation coefficient of -0.67. 
In addition to looking cool, plots such as these can help us decide variables to include in modeling.
<h3>Feature Engineering and Selection</h3><a href="https://elitedatascience.com/feature-engineering-best-practices" target="_blank" rel="noopener nofollow">Feature engineering and selection</a> often provide the greatest return on time invested in a machine learning problem. 
First of all, let’s define what these two tasks are:
<ul><li><a href="https://machinelearningmastery.com/discover-feature-engineering-how-to-engineer-features-and-how-to-get-good-at-it/" target="_blank" rel="noopener nofollow">Feature engineering:</a> The process of taking raw data and extracting or creating new features. 
This might mean taking transformations of variables, such as a natural log and square root, or one-hot encoding categorical variables so they can be used in a model. 
Generally, I think of feature engineering as creating additional features from the raw data.</li><li><a href="https://machinelearningmastery.com/an-introduction-to-feature-selection/" target="_blank" rel="noopener nofollow">Feature selection:</a> The process of choosing the most relevant features in the data. 
In feature selection, we remove features to help the model generalize better to new data and create a more interpretable model. 
Generally, I think of feature selection as subtracting features so we are left with only those that are most important.</li></ul>A machine learning model can only learn from the data we provide it, so ensuring that data includes all the relevant information for our task is crucial. 
If we don’t feed a model the correct data, then we are setting it up to fail and we should not expect it to learn!
For this project, we will take the following feature engineering steps:
<ul><li>One-hot encode categorical variables (borough and property use type)</li><li>Add in the natural log transformation of the numerical variables</li></ul><a href="https://hackernoon.com/what-is-one-hot-encoding-why-and-when-do-you-have-to-use-it-e3c6186d008f" target="_blank" rel="noopener nofollow">One-hot encoding</a> is necessary to include categorical variables in a model. 
A machine learning algorithm cannot understand a building type of “office”, so we have to record it as a 1 if the building is an office and a 0 otherwise.
Adding transformed features can help our model learn non-linear relationships within the data. 
<a href="https://datascience.stackexchange.com/questions/21650/feature-transformation-on-input-data" target="_blank" rel="noopener nofollow">Taking the square root, natural log, or various powers of features</a> is common practice in data science and can be based on domain knowledge or what works best in practice. 
Here we will include the natural log of all numerical features.
The following code selects the numeric features, takes log transformations of these features, selects the two categorical features, one-hot encodes these features, and joins the two sets together. 
This seems like a lot of work, but it is relatively straightforward in Pandas!

After this process we have over 11,000 observations (buildings) with 110 columns (features). 
Not all of these features are likely to be useful for predicting the Energy Star Score, so now we will turn to feature selection to remove some of the variables.
<h3>Feature Selection</h3>Many of the 110 features we have in our data are redundant because they are highly correlated with one another. 
For example, here is a plot of Site EUI vs Weather Normalized Site EUI have a correlation coefficient of 0.997.

<img src="https://miro.medium.com/max/552/1*apjbGlP15KRg8blBwq_96A.png">

Features that are strongly correlated with each other are known as <a href="https://en.wikipedia.org/wiki/Multicollinearity" target="_blank" rel="noopener nofollow">collinear</a> and removing one of the variables in these pairs of features can often help a <a href="https://www.quora.com/Why-is-multicollinearity-bad-in-laymans-terms-In-feature-selection-for-a-regression-model-intended-for-use-in-prediction-why-is-it-a-bad-thing-to-have-multicollinearity-or-highly-correlated-independent-variables" target="_blank" rel="noopener nofollow">machine learning model generalize and be more interpretable</a>. 
(I should point out we are talking about correlations of features with other features, not correlations with the target, help our model!)
There are a number of methods to calculate collinearity between features, with one of the most common the <a href="http://www.statisticshowto.com/variance-inflation-factor/" target="_blank" rel="noopener nofollow">variance inflation factor</a>. 
In this project, we will use thebcorrelation coefficient to identify and remove collinear features. 
We will drop one of a pair of features if the correlation coefficient between them is greater than 0.6. 
For the implementation, take a look at the notebook (and <a href="https://stackoverflow.com/a/43104383" target="_blank" rel="noopener nofollow">this Stack Overflow answer</a>)
While this value may seem arbitrary, I tried several different thresholds, and this choice yielded the best model. 
Machine learning is an<a href="http://www.dictionary.com/browse/empirical" target="_blank" rel="noopener nofollow"> empirical field</a> and is often about experimenting and finding what performs best! After feature selection, we are left with 64 total features and 1 target.
# Remove any columns with all na values
features  = features.dropna(axis=1, how = &#x27;all&#x27;)
print(features.shape)
<strong>(11319, 65)</strong>
<h3>Establishing a Baseline</h3>We have now completed data cleaning, exploratory data analysis, and feature engineering. 
The final step to take before getting started with modeling is establishing a naive baseline. 
This is essentially a guess against we can compare our results. 
If the machine learning models do not beat this guess, then we might have to conclude that machine learning is not acceptable for the task or we might need to try a different approach.
For regression problems, a reasonable naive baseline is to guess the median value of the target on the training set for all the examples in the test set. 
This sets a relatively low bar for any model to surpass.
The metric we will use is <a href="https://en.wikipedia.org/wiki/Mean_absolute_error" target="_blank" rel="noopener nofollow"><strong>mean absolute error </strong>(mae)</a> measures the average absolute error on the predictions. 
There are many metrics for regression, but I like <a href="https://www.coursera.org/learn/machine-learning-projects/lecture/wIKkC/single-number-evaluation-metric" target="_blank" rel="noopener nofollow">Andrew Ng’s advice</a> to pick a single metric and then stick to it when evaluating models. 
The mean absolute error is easy to calculate and is interpretable.
Before calculating the baseline, we need to split our data into a training and a testing set:
<li>The <strong>training set</strong> of features is what we provide to our model during training along with the answers. 
The goal is for the model to learn a mapping between the features and the target.</li><li>The <strong>testing set</strong> of features is used to evaluate the trained model. 
The model is not allowed to see the answers for the testing set and must make predictions using only the features. 
We know the answers for the test set so we can compare the test predictions to the answers.</li>
We will use 70% of the data for training and 30% for testing:
# Split into 70% training and 30% testing set
X, X_test, y, y_test = train_test_split(features, targets, 
                                        test_size = 0.3, 
                                        random_state = 42)
Now we can calculate the naive baseline performance:

<strong>The baseline guess is a score of 66.00
Baseline Performance on the test set: MAE = 24.5164</strong>
The naive estimate is off by about 25 points on the test set. 
The score ranges from 1–100, so this represents an error of 25%, quite a low bar to surpass!
<h3>Conclusions</h3>In this article we walked through the first three steps of a machine learning problem. 
After defining the question, we:
<li>Cleaned and formatted the raw data</li><li>Performed an exploratory data analysis to learn about the dataset</li><li>Developed a set of features that we will use for our models</li>
Finally, we also completed the crucial step of establishing a baseline against we can judge our machine learning algorithms.
The second post (<a href="https://towardsdatascience.com/a-complete-machine-learning-project-walk-through-in-python-part-two-300f1f8147e2">available here</a>) will show how to evaluate machine learning models using <a href="http://scikit-learn.org/stable/" target="_blank" rel="noopener nofollow">Scikit-Learn</a>, select the best model, and perform hyperparameter tuning to optimize the model. 
The third post, dealing with model interpretation and reporting results, <a href="https://towardsdatascience.com/a-complete-machine-learning-walk-through-in-python-part-three-388834e8804b">is here</a>.

<h2>Keras vs PyTorch 深度学习</h2>
深度学习有很多框架和库。
这篇文章对两个流行库 Keras 和 Pytorch 进行了对比，因为二者都很容易上手，初学者能够轻松掌握。

我们同时用 Keras 和 PyTorch 训练一个简单的模型。

这两个工具最大的区别在于：PyTorch 默认为 eager 模式，而 Keras 基于 TensorFlow 和其他框架运行（现在主要是 TensorFlow），其默认模式为图模式。
最新版本的 TensorFlow 也提供类似 PyTorch 的 eager 模式，但是速度较慢。
如果你熟悉 NumPy，你可以将 PyTorch 视为有 GPU 支持的 NumPy。

此外，现在有多个具备高级 API（如 Keras）且以 PyTorch 为后端框架的库，如 Fastai、Lightning、Ignite 等。
如果你对它们感兴趣，那你选择 PyTorch 的理由就多了一个。

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnkLHhLOiccsEJMicfxticFsMj4IricCvib54H1Wm2yyBV7icibKsByjmw76qjsQ/640">
Keras 自带一些样本数据集，如 MNIST 手写数字数据集。
以上代码可以加载这些数据，数据集图像是 NumPy 数组格式。
Keras 还做了一点图像预处理，使数据适用于模型。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnk7HBc9pCmO4KiavqKdliaiaedD1aIjDZIMLQxqWWtBj6lb1Yic8pHIYvIEA/640">
以上代码展示了模型。
在 Keras（TensorFlow）上，我们首先需要定义要使用的东西，然后立刻运行。
在 Keras 中，我们无法随时随地进行试验，不过 PyTorch 可以。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnkHkibLfGNH3H3dSvFOZV47a9bM3Y96ONk5GE60mvOdg8vSKnB4TkfBEg/640">
以上的代码用于训练和评估模型。
我们可以使用 save() 函数来保存模型，以便后续用 load_model() 函数加载模型。
predict() 函数则用来获取模型在测试数据上的输出。
现在我们概览了 Keras 基本模型实现过程，现在来看 PyTorch。
PyTorch 中的模型实现研究人员大多使用 PyTorch，因为它比较灵活，代码样式也是试验性的。
你可以在 PyTorch 中调整任何事，并控制全部，但控制也伴随着责任。
在 PyTorch 里进行试验是很容易的。
因为你不需要先定义好每一件事再运行。
我们能够轻松测试每一步。
因此，在 PyTorch 中 debug 要比在 Keras 中容易一些。
接下来，我们来看简单的数字识别模型实现。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnkGlRVm9hznQEgiapBU9qNOeOkYiams85U0sBM6S5xDKSS1HJakT8v7UUw/640">
以上代码导入了必需的库，并定义了一些变量。
n_epochs、momentum 等变量都是必须设置的超参数。
此处不讨论细节，我们的目的是理解代码的结构。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnkgUwG2Obtldwq6UEPJaIFWhmBwtme3KOIW2oPJCIwHUQUW99HV3iaBAg/640">
以上代码旨在声明用于加载训练所用批量数据的数据加载器。
下载数据有很多种方式，不受框架限制。
如果你刚开始学习深度学习，以上代码可能看起来比较复杂。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnk0xn97kqIe8SO15nSxdcbm0E9jpZn1y0Nz0qsfYpeWFAr71dkVTvlyQ/640">
在此，我们定义了模型。
这是一种创建网络的通用方法。
我们扩展了 nn.Module，在前向传递中调用 forward() 函数。
PyTorch 的实现比较直接，且能够根据需要进行修改。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnkmTsBaO8jPpP6BdDPTMXtVw4icoVsicianicCdq2Tpeq7YoHqibLct3OrQyQ/640">
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnkOtJvtc4FNr71JxVpWQLibEgicJW4ttHZ3M4ceviauNglNp3c6Y9lhqdVA/640">
以上代码段定义了训练和测试函数。
在 Keras 中，我们需要调用 fit() 函数把这些事自动做完。
但是在 PyTorch 中，我们必须手动执行这些步骤。
像 Fastai 这样的高级 API 库会简化它，训练所需的代码也更少。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/KmXPKA19gWicUJnpRAfebKNAZ98tFecnkWX59j3xXHpNgfue0SSpt9Qj13cAcHB4YN5G5EcHVZr9nePO3GgkpLQ/640">
最后，保存和加载模型，以进行二次训练或预测。
这部分没有太多差别。
PyTorch 模型通常有 pt 或 pth 扩展。
关于框架选择的建议学会一种模型并理解其概念后，再转向另一种模型，并不是件难事，只是需要一些时间。

Colab 链接：PyTorch：https://colab.research.google.com/drive/1irYr0byhK6XZrImiY4nt9wX0fRp3c9mx?usp=sharing
Keras：https://colab.research.google.com/drive/1QH6VOY_uOqZ6wjxP0K8anBAXmI0AwQCm?usp=sharing
<em>原文链接：https://medium.com/@karan_jakhar/keras-vs-pytorch-dilemma-dc434e5b5ae0</em>
<a href="https://mp.weixin.qq.com/s?__biz=MzA3MzI4MjgzMw==&mid=2650787158&idx=5&sn=9be648a38ac3cec96709479b940cba9b&chksm=871a0928b06d803e20574397686e32d7fd1c376d53c00f6a83d8056d4d15d8952aa807faca9e&scene=0&xtrack=1#rd" class="whitebut ">自动化数据增强：实践、理论和新方向</a>

<h2>使用 CMake 构建 Python C/C++ 扩展</h2>
众所周知，Python 语言的性能相比其他语言如 C/C++ 等要弱很多，所以当我们需要高性能的时候往往借助于 Python 的 C/C++ 扩展或者 Cython。

通常构建 Python C/C++ 扩展会使用 distutils 的 Extension 类，需要在 setup.py 中配置头文件包含路径 include_dirs、C/C++ 源文件路径 sources 等，比如下面这个Python 官方文档上的例子：

from distutils.core import setup, Extension

module1 = Extension(
    'demo',
    define_macros=[
        ('MAJOR_VERSION', '1'),
        ('MINOR_VERSION', '0')
    ],
    include_dirs=['/usr/local/include'],
    libraries =['tcl83'],
    library_dirs=['/usr/local/lib'],
    sources=['demo.c']
)

setup(
    name='PackageName',
    version='1.0',
    description='This is a demo package',
    author='Martin v. Loewis',
    author_email='martin@v.loewis.de',
    url='https://docs.python.org/extending/building',
    long_description='''
This is really just a demo package.
''',
    ext_modules=[module1]
)
这种方式对于绝大多数简单的项目应该是足够了，而当你需要用到一些 C/C++ 第三方库的时候可能会遇到因为某些原因需要将三方库的源码和项目源码一起进行编译的情况（比如 abseil-cpp），这个情况下往往会遇到 C/C++ 依赖管理的问题，CMake 则是常用的 C/C++ 依赖管理工具，本文将总结、分享一下使用 CMake 来构建 Python C/C++ 扩展的方案。

调研可选方案
首先来看一下 CMake 项目本身一般是如何构建的，一般 CMake 项目都会在项目根目录下有个 CMakeLists.txt 的 CMake 项目定义文件，构建方式通常如下：

mkdir build
cd build
cmake ..
make
那基本的思路就是在 Python 包构建过程中（pip install 或者 python setup.py install 等）调用上述命令完成扩展构建。通过 Google 搜索可以发现，一个方案是通过继承 distutils 的 Extension 来手工实现，另一个方案则是用别人写好的现成的封装库 scikit-build。

方案一 distutils CMake extension
这个方案有个现成的例子，pybind11 的 CMake 示例项目，BTW，pybind11 也是一个写 Python C++ 扩展的项目。看一下它的 setup.py 的代码：

import os
import re
import sys
import platform
import subprocess

from setuptools import setup, Extension
from setuptools.command.build_ext import build_ext
from distutils.version import LooseVersion


class CMakeExtension(Extension):
    def __init__(self, name, sourcedir=''):
        Extension.__init__(self, name, sources=[])
        self.sourcedir = os.path.abspath(sourcedir)


class CMakeBuild(build_ext):
    def run(self):
        try:
            out = subprocess.check_output(['cmake', '--version'])
        except OSError:
            raise RuntimeError("CMake must be installed to build the following extensions: " +
                               ", ".join(e.name for e in self.extensions))

        if platform.system() == "Windows":
            cmake_version = LooseVersion(re.search(r'version\s*([\d.]+)', out.decode()).group(1))
            if cmake_version < '3.1.0':
                raise RuntimeError("CMake >= 3.1.0 is required on Windows")

        for ext in self.extensions:
            self.build_extension(ext)

    def build_extension(self, ext):
        extdir = os.path.abspath(os.path.dirname(self.get_ext_fullpath(ext.name)))
        # required for auto-detection of auxiliary "native" libs
        if not extdir.endswith(os.path.sep):
            extdir += os.path.sep

        cmake_args = ['-DCMAKE_LIBRARY_OUTPUT_DIRECTORY=' + extdir,
                      '-DPYTHON_EXECUTABLE=' + sys.executable]

        cfg = 'Debug' if self.debug else 'Release'
        build_args = ['--config', cfg]

        if platform.system() == "Windows":
            cmake_args += ['-DCMAKE_LIBRARY_OUTPUT_DIRECTORY_{}={}'.format(cfg.upper(), extdir)]
            if sys.maxsize > 2**32:
                cmake_args += ['-A', 'x64']
            build_args += ['--', '/m']
        else:
            cmake_args += ['-DCMAKE_BUILD_TYPE=' + cfg]
            build_args += ['--', '-j2']

        env = os.environ.copy()
        env['CXXFLAGS'] = '{} -DVERSION_INFO=\\"{}\\"'.format(env.get('CXXFLAGS', ''),
                                                              self.distribution.get_version())
        if not os.path.exists(self.build_temp):
            os.makedirs(self.build_temp)
        subprocess.check_call(['cmake', ext.sourcedir] + cmake_args, cwd=self.build_temp, env=env)
        subprocess.check_call(['cmake', '--build', '.'] + build_args, cwd=self.build_temp)

setup(
    name='cmake_example',
    version='0.0.1',
    author='Dean Moldovan',
    author_email='dean0x7d@gmail.com',
    description='A test project using pybind11 and CMake',
    long_description='',
    ext_modules=[CMakeExtension('cmake_example')],
    cmdclass=dict(build_ext=CMakeBuild),
    zip_safe=False,
)
可以看出，它通过重写 setuptools 的 build_ext cmdclass 在构建过程中调用了 cmake 命令完成扩展的构建。

这个方案比较适合 pybind11 的项目，因为它已经提供了很多 CMake 的 module 比如怎么找到 Python.h、libpython 等，打开示例项目的 CMakeLists.txt 可以发现它使用了一个 pybind11 提供的 CMake 函数 pybind11_add_module 来定义 Python 扩展，免去了很多繁琐的配置。

cmake_minimum_required(VERSION 2.8.12)
project(cmake_example)

add_subdirectory(pybind11)
pybind11_add_module(cmake_example src/main.cpp)
如果不使用 pybind11 则比较麻烦，看看 Apache Arrow Python 包的 CMakeLists.txt 感受一下。

方案二 scikit-build
scikit-build 是一个增强的 Python C/C++/Fortan/Cython 扩展构建系统生成器，本质上也是 Python setuptools 和 CMake 的胶水。

我们看一下 sciket-build 的 hello-cpp 示例：

setup.py
import sys

from skbuild import setup

# Require pytest-runner only when running tests
pytest_runner = (['pytest-runner>=2.0,&lt;3dev']
                 if any(arg in sys.argv for arg in ('pytest', 'test'))
                 else [])

setup_requires = pytest_runner

setup(
    name="hello-cpp",
    version="1.2.3",
    description="a minimal example package (cpp version)",
    author='The scikit-build team',
    license="MIT",
    packages=['hello'],
    tests_require=['pytest'],
    setup_requires=setup_requires
)
基本上就是一个 setuptools.setup 的完整替代，不再使用 from setuptools import set 转用 from skbuild import setup。

CMakeLists.txt
cmake_minimum_required(VERSION 3.4.0)

project(hello)

find_package(PythonExtensions REQUIRED)

add_library(_hello MODULE hello/_hello.cxx)
python_extension_module(_hello)
install(TARGETS _hello LIBRARY DESTINATION hello)
这里没有看到类似上面 pybind11 CMake 示例中的 add_subdirectory(pybind11) 语句，而是直接用的 find_package(PythonExtensions REQUIRED) 和 python_extension_module CMake 函数：

PythonExtensions 的 CMake 定义已经打包在 scikit-build 中
调用 skbuild.setup 的过程中 scikit-build 自动把它打包的 CMake 定义文件加载了所以上面才不需要像 pybind11 那样做
install(TARGETS _hello LIBRARY DESTINATION hello) 将构建好的扩展的动态链接库复制到 hello/ 目录中，从而可以在 Python 中使用 from hello._hello import hello 导入扩展中的 hello 函数
通常还会增加 pyproject.toml 来安装 pip 构建时候需要的依赖包：

[build-system]
requires = ["setuptools", "wheel", "scikit-build", "cmake", "ninja"]
比较有意思的是，scikit-build 并不需要你的系统上全局安装 CMake/Ninja，它打包了 manylinux 的 CMake 和 Ninja 的二进制 wheels 并发布到了 PyPi 上，cool.

scikit-build 还支持类似的方式构建使用 Cython 和 pybind11 等的扩展，功能强大非常方便。

后记
最近工作中完成了使用 CMake 和 scikit-build 改造一个 C++ 和 Cython 写的 Python 扩展项目以便能够使用 abseil-cpp 的 Swiss Tables 优化性能，这篇文章差不多就是 brain dump 一下调研的过程，后面我想写一下如何在 Cython 中使用 abseil-cpp 的 containers 的文章，stay tuned.

<a href="https://schemingdeveloper.com/2019/03/31/generating-c-code-using-python-and-cmake/" class="whitebut ">GENERATING C++ CODE USING PYTHON AND CMAKE</a>

<a href="https://www.benjack.io/2017/06/12/python-cpp-tests.html" class="whitebut ">Building and testing a hybrid Python/C++ package</a>

<a href="https://abseil.io/docs/cpp/" class="whitebut ">C++ Developer Guide</a>

<a href="https://messense.me/" class="whitebut ">Cython</a>

<a href="https://messense.me/use-abseil-cpp-with-cython" class="whitebut ">在 Cython 项目中使用 abseil-cpp</a>

<h2>Python Exception Handling Using try, except and finally statement</h2>

Exceptions in Python
Python has many built-in exceptions that are raised when your program encounters an error.

When these exceptions occur, the Python interpreter stops the current process and passes it to the calling process until it is handled. 
If not handled, the program will crash.

For example, let us consider a program where we have a function A that calls function B, which in turn calls function C. 
If an exception occurs in function C but is not handled in C, the exception passes to B and then to A.

If never handled, an error message is displayed and our program comes to a sudden unexpected halt.

Catching Exceptions in Python
In Python, exceptions can be handled using a try statement.

The critical operation which can raise an exception is placed inside the try clause. 
The code that handles the exceptions is written in the except clause.

We can thus choose what operations to perform once we have caught the exception. 

Here is a simple example.

# import module sys to get the type of exception
import sys
randomList = ['a', 0, 2]

for entry in randomList:
    try:
        print("The entry is", entry)
        r = 1/int(entry)
        break
    except:
        print("Oops!", sys.exc_info()[0], "occurred.")
        print("Next entry.")
        print()
print("The reciprocal of", entry, "is", r)


Output

The entry is a
Oops! &lt;class 'ValueError'> occurred.
Next entry.

The entry is 0
Oops! &lt;class 'ZeroDivisionError'> occured.
Next entry.

The entry is 2
The reciprocal of 2 is 0.5
In this program, we loop through the values of the randomList list. 
As previously mentioned, the portion that can cause an exception is placed inside the try block.

If no exception occurs, the except block is skipped and normal flow continues(for last value). 
But if any exception occurs, it is caught by the except block (first and second values).

Here, we print the name of the exception using the exc_info() function inside sys module. 
We can see that a causes ValueError and 0 causes ZeroDivisionError.

Since every exception in Python inherits from the base Exception class, we can also perform the above task in the following way:

# import module sys to get the type of exception
import sys

randomList = ['a', 0, 2]

for entry in randomList:
    try:
        print("The entry is", entry)
        r = 1/int(entry)
        break
    except Exception as e:
        print("Oops!", e.__class__, "occurred.")
        print("Next entry.")
        print()
print("The reciprocal of", entry, "is", r)

This program has the same output as the above program.

Catching Specific Exceptions in Python
In the above example, we did not mention any specific exception in the except clause.

This is not a good programming practice as it will catch all exceptions and handle every case in the same way. 
We can specify which exceptions an except clause should catch.

A try clause can have any number of except clauses to handle different exceptions, however, only one will be executed in case an exception occurs.

We can use a tuple of values to specify multiple exceptions in an except clause. 
Here is an example pseudo code.

try:
   # do something
   pass

except ValueError:
   # handle ValueError exception
   pass

except (TypeError, ZeroDivisionError):
   # handle multiple exceptions
   # TypeError and ZeroDivisionError
   pass

except:
   # handle all other exceptions
   pass
Raising Exceptions in Python
In Python programming, exceptions are raised when errors occur at runtime. 
We can also manually raise exceptions using the raise keyword.

We can optionally pass values to the exception to clarify why that exception was raised.

>>> raise KeyboardInterrupt
Traceback (most recent call last):
...
KeyboardInterrupt

>>> raise MemoryError("This is an argument")
Traceback (most recent call last):
...
MemoryError: This is an argument

>>> try:
... 
    a = int(input("Enter a positive integer: "))
... 
    if a &lt;= 0:
... 
        raise ValueError("That is not a positive number!")
... 
except ValueError as ve:
... 
    print(ve)
... 
   
Enter a positive integer: -2
That is not a positive number!
Python try...finally
The try statement in Python can have an optional finally clause. 
This clause is executed no matter what, and is generally used to release external resources.

For example, we may be connected to a remote data center through the network or working with a file or a Graphical User Interface (GUI).

In all these circumstances, we must clean up the resource before the program comes to a halt whether it successfully ran or not. 
These actions (closing a file, GUI or disconnecting from network) are performed in the finally clause to guarantee the execution.

Here is an example of file operations to illustrate this.

try:
   f = open("test.txt",encoding = 'utf-8')
   # perform file operations
finally:
   f.close()
This type of construct makes sure that the file is closed even if an exception occurs during the program execution.

<h2><span class="orange">10 行以下 Python 高端操作</span></h2>
<h2>一、生成二维码</h2>
二维码作为一种信息传递的工具，在当今社会发挥了重要作用。而生成一个二维码也非常简单，在Python中我们可以通过MyQR模块了生成二维码，而生成一个二维码我们只需要2行代码，我们先安装MyQR模块，这里选用国内的源下载：

<code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ myqr</code>

安装完成后我们就可以开始写代码了：

<code>from MyQR import myqr    # 注意大小写
myqr.run(words='http://www.baidu.com')    # 如果为网站则会自动跳转，文本直接显示，不支持中文</code>

我们执行代码后会在项目下生成一张二维码。当然我们还可以丰富二维码：

<code>from MyQR import myqr
myqr.run(
    words='http://www.baidu.com',    # 包含信息
    picture='lbxx.jpg',            # 背景图片
    colorized=True,            # 是否有颜色，如果为False则为黑白
    save_name='code.png'    # 输出文件名
)</code>

效果图如下：
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/ISp5MHPxrhoDYgtgAgYyHKO17prNQtXic8yPOK67ghg8U6yqjTtuvfAXJGH06iaqTBfrXkxxf0o9GGznrrhia7O9g/640">

另外MyQR还支持动态图片。

<h2>二、生成词云</h2>

词云是数据可视化的一种非常优美的方式，我们通过词云可以很直观的看出一些词语出现的频率高低。使用Python我们可以通过wordcloud模块生成词云，我们先安装wordcloud模块：

<code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ wordcloud</code>

然后我们就可以写代码了：

<code>from wordcloud import WordCloud
wc = WordCloud()    # 创建词云对象
wc.generate('Do not go gentle into that good night')    # 生成词云
wc.to_file('wc.png')    # 保存词云</code>

执行代码后生成如下词云：
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/ISp5MHPxrhoDYgtgAgYyHKO17prNQtXicn0YlxmfXd51WKrFee1vBeQwN8uudzs3OwMx78V48MuAw5L1SdSQVHQ/640">
当然这只是最简单的词云，词云更详细的操作可以参见WordCloud生成卡卡西忍术词云[1]。

<h2>三、批量抠图</h2>

抠图的实现需要借助百度飞桨的深度学习工具paddlepaddle，我们需要安装两个模块就可以很快的实现批量抠图了，第一个是PaddlePaddle：

<code>python -m pip install paddlepaddle -i https://mirror.baidu.com/pypi/simple</code>

还有一个是paddlehub模型库：

<code>pip install -i https://mirror.baidu.com/pypi/simple paddlehub</code>

更详细的安装事项可以参见飞桨官网：https://www.paddlepaddle.org.cn/

接下来我们只需要5行代码就能实现批量抠图：

<code>import os, paddlehub as hub
humanseg = hub.Module(name='deeplabv3p_xception65_humanseg')        # 加载模型
path = 'D:/CodeField/Workplace/PythonWorkplace/GrapImage/'    # 文件目录
files = [path + i for i in os.listdir(path)]    # 获取文件列表
results = humanseg.segmentation(data={'image':files})    # 抠图</code>

抠图效果如下：
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/ISp5MHPxrhoDYgtgAgYyHKO17prNQtXicoTTfl69PkwqznKxzic6iaOLoZfU0foascnytfbFjV2JvfIYpogRZqnqA/640">
其中左边为原图，右边为抠图后填充黄色背景图。

<h2>四、文字情绪识别</h2>

在paddlepaddle面前，自然语言处理也变得非常简单。实现文字情绪识别我们同样需要安装PaddlePaddle和Paddlehub，具体安装参见三中内容。然后就是我们的代码部分了：

<code>import paddlehub as hub        
senta = hub.Module(name='senta_lstm')        # 加载模型
sentence = [    # 准备要识别的语句
    '你真美', '你真丑', '我好难过', '我不开心', '这个游戏好好玩', '什么垃圾游戏',
]
results = senta.sentiment_classify(data={"text":sentence})    # 情绪识别
# 输出识别结果
for result in results:
    print(result)</code>

识别的结果是一个字典列表：

<code>{'text': '你真美', 'sentiment_label': 1, 'sentiment_key': 'positive', 'positive_probs': 0.9602, 'negative_probs': 0.0398}
{'text': '你真丑', 'sentiment_label': 0, 'sentiment_key': 'negative', 'positive_probs': 0.0033, 'negative_probs': 0.9967}
{'text': '我好难过', 'sentiment_label': 1, 'sentiment_key': 'positive', 'positive_probs': 0.5324, 'negative_probs': 0.4676}
{'text': '我不开心', 'sentiment_label': 0, 'sentiment_key': 'negative', 'positive_probs': 0.1936, 'negative_probs': 0.8064}
{'text': '这个游戏好好玩', 'sentiment_label': 1, 'sentiment_key': 'positive', 'positive_probs': 0.9933, 'negative_probs': 0.0067}
{'text': '什么垃圾游戏', 'sentiment_label': 0, 'sentiment_key': 'negative', 'positive_probs': 0.0108, 'negative_probs': 0.9892}</code>

其中sentiment_key字段包含了情绪信息，详细分析可以参见Python自然语言处理只需要5行代码[2]。

<h2>五、识别是否带了口罩</h2>

这里同样是使用PaddlePaddle的产品，我们按照上面步骤安装好PaddlePaddle和Paddlehub，然后就开始写代码：

<code>import paddlehub as hub
# 加载模型
module = hub.Module(name='pyramidbox_lite_mobile_mask')
# 图片列表
image_list = ['face.jpg']
# 获取图片字典
input_dict = {'image':image_list}
# 检测是否带了口罩
module.face_detection(data=input_dict)</code>

执行上述程序后，项目下会生成detection_result文件夹，识别结果都会在里面，识别效果如下：
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/ISp5MHPxrhoDYgtgAgYyHKO17prNQtXicre5zicL89eibvjUoqW5uibC9KTF6JD7h2icOMvWLF4DDNTEuLXEXAjf8PA/640">

<h2>六、简易信息轰炸</h2>

Python控制输入设备的方式有很多种，我们可以通过win32或者pynput模块。我们可以通过简单的循环操作来达到信息轰炸的效果，这里以pynput为例，我们需要先安装模块：

<code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ pynput</code>

在写代码之前我们需要手动获取输入框的坐标：

<code>from pynput import mouse
# 创建一个鼠标
m_mouse = mouse.Controller()
# 输出鼠标位置
print(m_mouse.position)</code>

可能有更高效的方法，但是我不会。

获取后我们就可以记录这个坐标，消息窗口不要移动。然后我们执行下列代码并将窗口切换至消息页面：

<code>import time
from pynput import mouse, keyboard
time.sleep(5)
m_mouse = mouse.Controller()    # 创建一个鼠标
m_keyboard = keyboard.Controller()  # 创建一个键盘
m_mouse.position = (850, 670)       # 将鼠标移动到指定位置
m_mouse.click(mouse.Button.left) # 点击鼠标左键
while(True):
    m_keyboard.type('你好')        # 打字
    m_keyboard.press(keyboard.Key.enter)    # 按下enter
    m_keyboard.release(keyboard.Key.enter)    # 松开enter
    time.sleep(0.5)    # 等待 0.5秒</code>

我承认，这个超过了10行代码，而且也不高端。
使用前QQ给小号发信息效果如下：

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/ISp5MHPxrhoDYgtgAgYyHKO17prNQtXicHCVl1wKjjib5x9icyh5DsicW4tUeZjTRmmCnlk54bGutKuz69j83XfMIw/640">

<h2>七、识别图片中的文字</h2>

我们可以通过Tesseract来识别图片中的文字，在Python中实现起来非常简单，但是前期下载文件、配置环境变量等稍微有些繁琐，所以本文只展示代码：

<code>import pytesseract
from PIL import Image
img = Image.open('text.jpg')
text = pytesseract.image_to_string(img)
print(text)</code>

其中text就是识别出来的文本。如果对准确率不满意的话，还可以使用百度的通用文字接口。

<h2>八、绘制函数图像</h2>

图标是数据可视化的重要工具，在Python中matplotlib在数据可视化中发挥重要作用，下面我们来看看使用matplotlib如何绘制一个函数图像：
<code>import numpy as np 
from matplotlib import pyplot as plt

x = np.arange(1,11)     # x轴数据
y =  x * x +  5         # 函数关系
plt.title("y=x*x+5")     # 图像标题
plt.xlabel("x")     # x轴标签
plt.ylabel("y")     # y轴标签
plt.plot(x,y)     # 生成图像
plt.show()    # 显示图像</code>

生成图像如下：
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/ISp5MHPxrhoDYgtgAgYyHKO17prNQtXic8icIPyb3gw8WnxSrd3s27mAmhcPLkpLBMVFQs8FtA4YiammnMMZR3c2g/640">

<h2>九、人工智能</h2>

下面给大家介绍的是独家的AI人工智能，一般不外传的。这个人工智能可以回答许多问题，当然人工智能现在还在发展阶段，想要理解人类的语言还差很多。废话不多说，下面来看看我们的人工智能Fdj：

<code>while(True):
    question = input()
    answer = question.replace('吗', '呢')
    answer = answer.replace('？', '！')
    print(answer)</code>

下面我们来看看简单的测试：

<code>你好吗？
我好呢！
你吃饭了吗？
我吃饭了呢！
你要睡了吗？
我要睡了呢！</code>

看来我们“小复”还是比较智能的。

<h3>References</h3>[1] WordCloud生成卡卡西忍术词云: https://blog.csdn.net/ZackSock/article/details/103517841

<h2>Density and Contour Plots</h2>
Sometimes it is useful to display three-dimensional data in two dimensions using contours or color-coded regions.
There are three Matplotlib functions that can be helpful for this task: <code>plt.contour</code> for contour plots, <code>plt.contourf</code> for filled contour plots, and <code>plt.imshow</code> for showing images.
This section looks at several examples of using these. 
We'll start by setting up the notebook for plotting and importing the functions we will use:

In [1]:

%matplotlib inline
import matplotlib.pyplot as plt
plt.style.use('seaborn-white')
import numpy as np

<h2>Visualizing a Three-Dimensional Function</h2>

We'll start by demonstrating a contour plot using a function $z = f(x, y)$, using the following particular choice for $f$ (we've seen this before in <a href="02.05-computation-on-arrays-broadcasting.html">Computation on Arrays: Broadcasting</a>, when we used it as a motivating example for array broadcasting):

In [2]:

def f(x, y):
    return np.sin(x) ** 10 + np.cos(10 + y * x) * np.cos(x)

A contour plot can be created with the <code>plt.contour</code> function.
It takes three arguments: a grid of <em>x</em> values, a grid of <em>y</em> values, and a grid of <em>z</em> values.
The <em>x</em> and <em>y</em> values represent positions on the plot, and the <em>z</em> values will be represented by the contour levels.
Perhaps the most straightforward way to prepare such data is to use the <code>np.meshgrid</code> function, which builds two-dimensional grids from one-dimensional arrays:

In [3]:

x = np.linspace(0, 5, 50)
y = np.linspace(0, 5, 40)

X, Y = np.meshgrid(x, y)
Z = f(X, Y)

Now let's look at this with a standard line-only contour plot:

In [4]:

plt.contour(X, Y, Z, colors='black');

Notice that by default when a single color is used, negative values are represented by dashed lines, and positive values by solid lines.
Alternatively, the lines can be color-coded by specifying a colormap with the <code>cmap</code> argument.
Here, we'll also specify that we want more lines to be drawn—20 equally spaced intervals within the data range:

In [5]:

plt.contour(X, Y, Z, 20, cmap='RdGy');

Here we chose the <code>RdGy</code> (short for <em>Red-Gray</em>) colormap, which is a good choice for centered data.
Matplotlib has a wide range of colormaps available, which you can easily browse in IPython by doing a tab completion on the <code>plt.cm</code> module:

<code>plt.cm.&lt;TAB&gt;</code>
Our plot is looking nicer, but the spaces between the lines may be a bit distracting.
We can change this by switching to a filled contour plot using the <code>plt.contourf()</code> function (notice the <code>f</code> at the end), which uses largely the same syntax as <code>plt.contour()</code>.

Additionally, we'll add a <code>plt.colorbar()</code> command, which automatically creates an additional axis with labeled color information for the plot:

In [6]:

plt.contourf(X, Y, Z, 20, cmap='RdGy')
plt.colorbar();

The colorbar makes it clear that the black regions are "peaks," while the red regions are "valleys."

One potential issue with this plot is that it is a bit "splotchy." That is, the color steps are discrete rather than continuous, which is not always what is desired.
This could be remedied by setting the number of contours to a very high number, but this results in a rather inefficient plot: Matplotlib must render a new polygon for each step in the level.
A better way to handle this is to use the <code>plt.imshow()</code> function, which interprets a two-dimensional grid of data as an image.

The following code shows this:

In [7]:

plt.imshow(Z, extent=[0, 5, 0, 5], origin='lower',
           cmap='RdGy')
plt.colorbar()
plt.axis(aspect='image');

There are a few potential gotchas with <code>imshow()</code>, however:

<ul>
<li><code>plt.imshow()</code> doesn't accept an <em>x</em> and <em>y</em> grid, so you must manually specify the <em>extent</em> [<em>xmin</em>, <em>xmax</em>, <em>ymin</em>, <em>ymax</em>] of the image on the plot.</li>
<li><code>plt.imshow()</code> by default follows the standard image array definition where the origin is in the upper left, not in the lower left as in most contour plots. 
This must be changed when showing gridded data.</li>
<li><code>plt.imshow()</code> will automatically adjust the axis aspect ratio to match the input data; this can be changed by setting, for example, <code>plt.axis(aspect='image')</code> to make <em>x</em> and <em>y</em> units match.</li>
</ul>

Finally, it can sometimes be useful to combine contour plots and image plots.
For example, here we'll use a partially transparent background image (with transparency set via the <code>alpha</code> parameter) and overplot contours with labels on the contours themselves (using the <code>plt.clabel()</code> function):

In [8]:

contours = plt.contour(X, Y, Z, 3, colors='black')
plt.clabel(contours, inline=True, fontsize=8)

plt.imshow(Z, extent=[0, 5, 0, 5], origin='lower',
           cmap='RdGy', alpha=0.5)
plt.colorbar();

The combination of these three functions—<code>plt.contour</code>, <code>plt.contourf</code>, and <code>plt.imshow</code>—gives nearly limitless possibilities for displaying this sort of three-dimensional data within a two-dimensional plot.
For more information on the options available in these functions, refer to their docstrings.
If you are interested in three-dimensional visualizations of this type of data, see <a href="04.12-three-dimensional-plotting.html">Three-dimensional Plotting in Matplotlib</a>.

<a href="https://observablehq.com/@d3/density-contours" class="whitebut ">Density Contours</a>

Example simple contour plot

<code>import numpy as np
from matplotlib.colors import LogNorm
from matplotlib import pyplot as plt

plt.interactive(True)
fig=plt.figure(1)
plt.clf()

# generate input data; you already have that
x1 = np.random.normal(0,10,100000)
y1 = np.random.normal(0,7,100000)/10.
x2 = np.random.normal(-15,7,100000)
y2 = np.random.normal(-10,10,100000)/10.
x=np.concatenate([x1,x2])
y=np.concatenate([y1,y2])

# calculate the 2D density of the data given
counts,xbins,ybins=np.histogram2d(x,y,bins=100,normed=LogNorm())
# make the contour plot
plt.contour(counts.transpose(),extent=[xbins.min(),xbins.max(),
    ybins.min(),ybins.max()],linewidths=3,colors='black',
    linestyles='solid')
plt.show()
</code>

produces a nice contour plot. 

The contour function offers a lot of fancy adjustments, for example let's set the levels by hand:

<code>plt.clf()
mylevels=[1.e-4, 1.e-3, 1.e-2]
plt.contour(counts.transpose(),mylevels,extent=[xbins.min(),xbins.max(),
    ybins.min(),ybins.max()],linewidths=3,colors='black',
    linestyles='solid')
plt.show()
</code>

producing this plot:
<img src="https://i.stack.imgur.com/sMch8.png" alt="contour plot with adjusted levels">

And finally, in SM one can do contour plots on linear and log scales, so I spent a little time trying to figure out how to do this in matplotlib. 
Here is an example when the y points need to be plotted on the log scale and the x points still on the linear scale:

<code>plt.clf()
# this is our new data which ought to be plotted on the log scale
ynew=10**y
# but the binning needs to be done in linear space
counts,xbins,ybins=np.histogram2d(x,y,bins=100,normed=LogNorm())
mylevels=[1.e-4,1.e-3,1.e-2]
# and the plotting needs to be done in the data (i.e., exponential) space
plt.contour(xbins[:-1],10**ybins[:-1],counts.transpose(),mylevels,
    extent=[xbins.min(),xbins.max(),ybins.min(),ybins.max()],
    linewidths=3,colors='black',linestyles='solid')
plt.yscale('log')
plt.show()
</code>

This produces a plot which looks very similar to the linear one, but with a nice vertical log axis, which is what was intended: 
<img src="https://i.stack.imgur.com/Vu5MB.png" alt="contour plot with log axis">

<h2>repeatingtimer</h2>
<a href="https://gist.github.com/alexbw/1187132/5de3149db6e744502c166711114bebc97af928f3" class="whitebut ">repeatingtimer.py</a>

from threading import _Timer
class Timer(_Timer):
    """
    See: https://hg.python.org/cpython/file/2.7/Lib/threading.py#l1079
    """

    def run(self):
        while not self.finished.is_set():
            self.finished.wait(self.interval)
            self.function(*self.args, **self.kwargs)

        self.finished.set()

<h2>Python Data Analysis</h2>
<h3>A Note About Python Versions</h3>All examples in this cheat sheet use Python 3. 
We recommend using the latest stable version of Python, for example, Python 3.8. 
You can check which version you have installed on your machine by running the following command in the system shell:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.14.03-PM.png">

Sometimes, a development machine will have Python 2 and Python 3 installed side by side. 
Having two Python versions available is common on macOS. 
If that is the case for you, you can use the <strong>python3</strong> command to run Python 3 even if Python 2 is the default in your environment:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.16.45-PM.png">

If you don’t have Python 3 installed yet, visit the <a rel="noreferrer noopener" target="_blank" href="https://www.python.org/downloads/">Python Downloads page</a> for instructions on installing it.

Launch a Python interpreter by running the python3 command in your shell:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.19.13-PM.png">

<h3>Libraries and Imports</h3>The easiest way to install Python modules that are needed for <a href="https://www.udacity.com/course/data-analyst-nanodegree--nd002">data analysis</a> is to use pip. 
Installing NumPy and Pandas takes only a few seconds:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.20.08-PM.png">

Once you’ve installed the modules, use the <strong>import</strong> statement to make the modules available in your program:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.21.15-PM.png">

<h3>Getting Help With Python Data Analysis Functions</h3>If you get stuck, the built-in Python docs are a great place to check for tips and ways to solve the problem. 
The Python <strong>help()</strong> function displays the help article for a method or a class:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.22.20-PM.png">

The help function uses the system text pagination program, also known as the pager, to display the documentation. 
Many systems use less as the default text pager, just in case you aren’t familiar with the Vi shortcuts here are the basics:

<ul><li><strong>j</strong> and <strong>k</strong> navigate up and down line by line.</li><li><strong>/</strong> searches for content in a documentation page.<ul><li>After pressing<strong> / </strong>type in the search query, press Enter to go to the first occurrence.</li><li>Press <strong>n</strong> and <strong>N</strong> to go forward and back through the search results.</li></ul></li><li><strong>Ctrl+d </strong>and <strong>Ctrl+u</strong> move the cursor one page down and one page up, respectively.</li></ul>

Another useful place to check out for help articles is the online documentation for Python data analysis modules like Pandas and NumPy. 
For example, the <a target="_blank" href="https://pandas.pydata.org/docs/user_guide/index.html#user-guide" rel="noreferrer noopener">Pandas user guides</a> cover all the Pandas functionality with explanations and examples.

<h3>Basic language features</h3>A quick tour through the Python basics:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.27.05-PM.png">

<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.27.20-PM.png">

There are many more useful string methods in Python, find out more about them in the <a rel="noreferrer noopener" target="_blank" href="https://docs.python.org/3.8/library/stdtypes.html#string-methods">Python string docs</a>.

<h3>Working with data sources</h3>Pandas provides a number of easy-to-use data import methods, including CSV and TSV import, copying from the system clipboard, and reading and writing JSON files. 
This is sufficient for most Python data analysis tasks:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.30.05-PM.png">

Find all other Pandas data import functions in the <a rel="noreferrer noopener" target="_blank" href="https://pandas.pydata.org/pandas-docs/stable/reference/io.html">Pandas docs</a>.

<h3>Working with Pandas Data Frames</h3>Pandas data frames are a great way to explore, clean, tweak, and filter your data sets while doing data analysis in Python. 
This section covers a few of the things you can do with your Pandas data frames.

<h4><strong>Exploring data</strong> </h4>Here are a few functions that allow you to easily know more about the data set you are working on:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.55.42-PM.png">
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-3.57.08-PM.png">

<h3>Statistical operations</h3>All standard statistical operations like minimums, maximums, and custom quantiles are present in Pandas:
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.12.42-PM.png">

<h4><strong>Cleaning the Data</strong></h4>It is quite common to have not-a-number <strong>(NaN)</strong> values in your data set. 
To be able to operate on a data set with statistical methods, you’ll first need to clean up the data. 
The <strong>fillna</strong> and <strong>dropna</strong> Pandas functions are a convenient way to replace the <strong>NaN</strong> values with something more representative for your data set, for example, a zero, or to remove the rows with NaN values from the data frame.
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.17.59-PM.png">

<h4>
<strong>Filtering and sorting</strong></h4>Here are some basic commands for filtering and sorting the data in your data frames.
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.19.09-PM.png">
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.19.27-PM.png">
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.19.37-PM.png">

<h3>Machine Learning</h3>While machine learning algorithms can be incredibly complex, Python’s popular modules make creating a machine learning program straightforward. 
Below is an example of a simple ML algorithm that uses Python and its data analysis and machine learning modules, namely NumPy, TensorFlow, Keras, and SciKit-Learn. 

In this program, we generate a sample data set with pizza diameters and their respective prices, train the model on this data set, and then use the model to predict the price of a pizza of a diameter that we choose.
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.22.25-PM.png">
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.22.40-PM.png">
<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.22.51-PM-1.png">

Once the model is set up we can use it to predict a result:

<img class="lazy" src="https://blog.udacity.com/wp-content/uploads/2020/04/Screen-Shot-2020-04-29-at-4.22.59-PM.png">

For more details on the functionality available in Pandas, visit the <a rel="noreferrer noopener" target="_blank" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/index.html">Pandas user guides</a>. 
For more powerful math with NumPy (it can be used together with Pandas), check out the <a rel="noreferrer noopener" target="_blank" href="https://numpy.org/doc/1.18/user/quickstart.html">NumPy getting started guide</a>.

<h2>pytest 自动化测试</h2>
<a hraf="https://www.youtube.com/watch?v=CDBcNB2RrvE">pytest</a>

<h2>pandas 教程</h2>
有一个用于数据科学的包绝对是必需的，它就是 pandas。
pandas 最有趣的地方在于里面隐藏了很多包。
它是一个核心包，里面有很多其他包的功能。
这点很棒，因为你只需要使用 pandas 就可以完成工作。
pandas 相当于 python 中 excel：它使用表（也就是 dataframe)，能在数据上做各种变换，但还有其他很多功能。
如果你早已熟知 python 的使用，可以直接跳到第三段。
让我们开始吧!
<h3>pandas 最基本的功能</h3>

<h3>读取数据</h3>
data = pd.read_csv( my_file.csv )data = pd.read_csv( my_file.csv , sep= ; , encoding= latin-1 , nrows=1000, skiprows=[2,5])

sep 代表的是分隔符。
如果你在使用法语数据，excel 中 csv 分隔符是「;」，因此你需要显式地指定它。
编码设置为 latin-1 来读取法语字符。
nrows=1000 表示读取前 1000 行数据。
skiprows=[2,5] 表示你在读取文件的时候会移除第 2 行和第 5 行。
最常用的功能：read_csv, read_excel其他一些很棒的功能：read_clipboard, read_sql

写数据

data.to_csv( my_new_file.csv , index=None)

index=None 表示将会以数据本来的样子写入。
如果没有写 index=None，你会多出一个第一列，内容是 1，2，3，...，一直到最后一行。
我通常不会去使用其他的函数，像.to_excel, .to_json, .to_pickle 等等，因为.to_csv 就能很好地完成工作，并且 csv 是最常用的表格保存方式。

<h3>检查数据</h3>
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudiahwdkpu3tRA0hRjANXCQIFT5d30fRyGL3ENJxkdGFxSqKL45iczszanw/640">

Gives (#rows, #columns)

给出行数和列数。

data.describe()

计算基本的统计数据。

<h3>查看数据</h3>
data.head(3)
打印出数据的前 3 行。
与之类似，.tail() 对应的是数据的最后一行。
data.loc[8]
打印出第八行。
data.loc[8,  column_1 ]
打印第八行名为「column_1」的列。
data.loc[range(4,6)]
第四到第六行（左闭右开）的数据子集。

<h3>pandas 的基本函数</h3>

<h3>逻辑运算</h3>
data[data[ column_1 ]== french ]data[(data[ column_1 ]== french ) &amp; (data[ year_born ]==1990)]data[(data[ column_1 ]== french ) &amp; (data[ year_born ]==1990) &amp; ~(data[ city ]== London )]
通过逻辑运算来取数据子集。
要使用 &amp; (AND)、 ~ (NOT) 和 | (OR)，必须在
逻辑运算前后加上“（”和“）”。

data[data[ column_1 ].isin([ french ,  english ])]
除了可以在同一列使用多个 OR，你还可以使用.isin() 函数。
基本绘图
matplotlib 包使得这项功能成为可能。
正如我们在介绍中所说，它可以直接在 pandas 中使用。
data[ column_numerical ].plot()

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudiapr563RzWpffpyCgTRibkyaNow77tVSOic5MjlK6VlP8EsmCUpjqYSYfA/640">

.plot() 输出的示例data[ column_numerical ].hist()

画出数据分布（直方图）

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudiaGSiaDWvMCz2CXs9mjkJicN626icAKjic774Rxo3iautG7LCexej3pcTeHtA/640">

.hist() 输出的示例%matplotlib inline

如果你在使用 Jupyter，不要忘记在画图之前加上以上代码。

<h3>更新数据</h3>
data.loc[8,  column_1 ] =  english将第八行名为 column_1 的列替换为「english」
data.loc[data[ column_1 ]== french ,  column_1 ] =  French

在一行代码中改变多列的值。
好了，现在你可以做一些在 excel 中可以轻松访问的事情了。
下面让我们深入研究 excel 中无法实现的一些令人惊奇的操作吧。

<h3>中级函数</h3>
统计出现的次数
data[ column_1 ].value_counts()
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudiaHewFdHN06r5qdVib9puATtbRiabrC82nQhqFPNZ0WtbIDDZ5V3nJ7Efg/640">
image
.value_counts() 函数输出示例
<h3>在所有的行、列或者全数据上进行操作</h3>
data[ column_1 ].map(len)

len() 函数被应用在了「column_1」列中的每一个元素上.map() 运算给一列中的每一个元素应用一个函数data[ column_1 ].map(len).map(lambda x: x/100).plot()
pandas 的一个很好的功能就是链式方法（https://tomaugspurger.github.io/method-chaining）。
它可以帮助你在一行中更加简单、高效地执行多个操作（.map() 和.plot()）。

data.apply(sum)

.apply() 会给一个列应用一个函数。
.applymap() 会给表 (DataFrame) 中的所有单元应用一个函数。

<h3>tqdm, 唯一的</h3>
在处理大规模数据集时，pandas 会花费一些时间来进行.map()、.apply()、.applymap() 等操作。
tqdm 是一个可以用来帮助预测这些操作的执行何时完成的包（是的，我说谎了，我之前说我们只会使用到 pandas）。
from tqdm import tqdm_notebooktqdm_notebook().pandas()
用 pandas 设置 tqdmdata[ column_1 ].progress_map(lambda x: x.count( e ))
用 .progress_map() 代替.map()、.apply() 和.applymap() 也是类似的。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudiauCajCDj8UwGq1vGh1iaibvVnQIZ1zXqpxGMUkbjMXfyWic7MCDvqRqmIw/640">
image
在 Jupyter 中使用 tqdm 和 pandas 得到的进度条

<h3>相关性和散射矩阵</h3>
data.corr()data.corr().applymap(lambda x: int(x*100)/100)

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudia11yWMlFvicibznl4tia66w5jPc0YOcfiasSJXfN2H6MYglZ9Q8G5pvchxg/640">
image
.corr() 会给出相关性矩阵
pd.plotting.scatter_matrix(data, figsize=(12,8))

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudiajby275qrxdIYbO6s3YrPib05TtUWBScicQwqu9KgKLRUbfgSWdtqOauQ/640">
image
散点矩阵的例子。
它在同一幅图中画出了两列的所有组合。

<h3>pandas 中的高级操作</h3>

<h3>The SQL 关联</h3>
在 pandas 中实现关联是非常非常简单的
data.merge(other_data, on=[ column_1 ,  column_2 ,  column_3 ])

关联三列只需要一行代码

<h3>分组</h3>
一开始并不是那么简单，你首先需要掌握语法，然后你会发现你一直在使用这个功能。

data.groupby( column_1 )[ column_2 ].apply(sum).reset_index()

按一个列分组，选择另一个列来执行一个函数。
.reset_index() 会将数据重构成一个表。
<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/sz_mmbiz/X94yJ5S0e7CB20brVzVR69gWoicib2kudiaC4JsLQgOC3fsyC3ObbGeeZYpHR6FZbDMRfrxiahLLicgDa2SHNvn97pQ/640">
image
正如前面解释过的，为了优化代码，在一行中将你的函数连接起来。

<h3>行迭代</h3>
dictionary = {}for i,row in data.iterrows(): dictionary[row[ column_1 ]] = row[ column_2 ]
.iterrows() 使用两个变量一起循环：行索引和行的数据 (上面的 i 和 row)。
总而言之，pandas 是 python 成为出色的编程语言的原因之一。
我本可以展示更多有趣的 pandas 功能，但是已经写出来的这些足以让人理解为何数据科学家离不开 pandas。
总结一下，pandas 有以下优点：易用，将所有复杂、抽象的计算都隐藏在背后了；直观；快速，即使不是最快的也是非常快的。
它有助于数据科学家快速读取和理解数据，提高其工作效率。
原文链接：
https://towardsdatascience.com/be-a-more-efficient-data-scientist-today-master-pandas-with-this-guide-ea362d27386

<h2>Python Beautiful Web Scraping</h2>
https://www.youtube.com/c/KGMIT/playlists
Keith Galli

https://www.youtube.com/watch?v=GjKQ6V_ViQE
Comprehensive Python Beautiful Soup Web Scraping Tutorial! (find/find_all, css select, scrape table)

https://github.com/KeithGalli/web-scraping/blob/master/web_scraping_tutorial.ipynb
SAMPLE CODE

https://www.youtube.com/watch?v=zucvHSQsKHA&t=241s
Python Web Scraping - Should I use Selenium, Beautiful Soup or Scrapy? [2020]

https://www.digitalocean.com/community/tutorials/how-to-crawl-a-web-page-with-scrapy-and-python-3
How To Crawl A Web Page with Scrapy and Python 3

import requests 
from bs4 import BeautifulSoup 
  
URL = "http://www.values.com/inspirational-quotes"
r = requests.get(URL) 
  
soup = BeautifulSoup(r.content, 'html5lib') # If this line causes an error, run 'pip install html5lib' or install html5lib 
print(soup.prettify()) 

soup = BeautifulSoup(r.content, 'html5lib')

URL = "http://www.values.com/inspirational-quotes"
r = requests.get(URL) 
   
soup = BeautifulSoup(r.content, 'html5lib') 
   
quotes=[]  # a list to store quotes 
   
table = soup.find('div', attrs = {'id':'all_quotes'})  
   
for row in table.findAll('div', 
                         attrs = {'class':'col-6 col-lg-3 text-center margin-30px-bottom sm-margin-30px-top'}): 
    quote = {} 
    quote['theme'] = row.h5.text 
    quote['url'] = row.a['href'] 
    quote['img'] = row.img['src'] 
    quote['lines'] = row.img['alt'].split(" #")[0] 
    quote['author'] = row.img['alt'].split(" #")[1] 
    quotes.append(quote) 
   
filename = 'inspirational_quotes.csv'
with open(filename, 'w', newline='') as f: 
    w = csv.DictWriter(f,['theme','url','img','lines','author']) 
    w.writeheader() 
    for quote in quotes: 
        w.writerow(quote) 

<h2>Python能批量抠图的开源神器</h2>
简介

rembg 是使用 Python 实现的用于移除背景图片的工具，要求 Python 3.8 或更高版本，支持批量操作，使用方式比较灵活，可以直接使用命令行、作为服务运行、在 docker 中使用，还可以作为库调用。

下载安装

项目的源码地址是：
https://github.com/danielgatis/rembg

要求 Python 3.8 或更高版本，使用以下命令进行安装：
pip install rembg

简单使用

1、在命令行中使用

在命令行中可以对服务端图片、本地图片以及整个文件夹图片进行操作，如下：
（1）对远程图片进行操作：
curl -s http://input.png | rembg &gt; output.png
（2）对本地图片进行操作：
rembg -o path/to/output.png path/to/input.png
（3）对整个文件夹里的图片进行操作：
rembg -p path/to/inputs

2、作为服务使用
（1）启动服务

rembg-server
（2）如果图片可以直接链接访问，则可以通过浏览器直接打开以下地址操作：
http://localhost:5000?url=http://image.png
也可以使用HTML表单通过上传文件的形式进行操作：
&lt;form action="http://localhost:5000" method="post" enctype="multipart/form-data"&gt;    &lt;input type="file" name="file"/&gt;    &lt;input type="submit" value="upload"/&gt; &lt;/form&gt;

3、在docker中使用

在docker中使用也很方便，直接运行以下命令：
curl -s http://input.png | docker run -i -v ~/.u2net:/root/.u2net danielgatis/rembg:latest &gt; output.png

4、作为库调用

直接在脚本里调用也很简便，先创建app.py，内容如下：
import&nbsp;sysfrom&nbsp;rembg.bg&nbsp;import&nbsp;removesys.stdout.buffer.write(remove(sys.stdin.buffer.read()))
再执行命令运行：
cat input.png | python app.py &gt; out.png
项目样例使用效果：

<img class="lazy" data-srcclass="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/DSU8cv1j3ibSndibichkTYRw3afyL4TN5uLWOl6kKjkJyMlRcMyk1ZNzyYbZXbzXBk3P8tcJLNNE2YtxYvCROll4g/640">

高级使用

有些图片可能使用alpha matting模式（即使用-a -ae 15选项）处理效果会更加完美，命令如下：
curl&nbsp;-s&nbsp;http://input.png&nbsp;|&nbsp;rembg&nbsp;-a&nbsp;-ae&nbsp;15&nbsp;&gt;&nbsp;output.png
效果对比图如下：

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://mmbiz.qpic.cn/mmbiz_png/DSU8cv1j3ibSndibichkTYRw3afyL4TN5uLmCia1hPpWhPBly2U60ORbAGVEn6eWN3wU3FTHMOp69K3ZncyTlKIm8Q/640">

结语

remgb简单介绍就到这里了

Creating a Proxy Webserver in Python

Socket programming in python is very user friendly as compared to c. 
The programmer need not worry about minute details regarding sockets. 

In this tutorial we would be developing a simple multi-threaded proxy server capable of handling HTTP traffic. 
It would be mostly based on the basic socket programming ideas. 

This is a naive implementation of a proxy server. 
We would be gradually developing it into a quite useful server in the upcoming tutorials.

<strong>To begin with, we would achieve the process in 3 easy steps</strong>

<strong>1. Creating an incoming socket</strong>

We create a socket serverSocket in the __init__ method of the Server Class. 
This creates a socket for the incoming connections. 
We then bind the socket and then wait for the clients to connect.

def __init__(self, config):
    # Shutdown on Ctrl+C
    signal.signal(signal.SIGINT, self.shutdown) 

    # Create a TCP socket
    self.serverSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    # Re-use the socket
    self.serverSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

    # bind the socket to a public host, and a port   
    self.serverSocket.bind((config['HOST_NAME'], config['BIND_PORT']))
    
    self.serverSocket.listen(10) # become a server socket
    self.__clients = {}

<strong>2. Accept client and process</strong>

This is the easiest yet the most important of all the steps. 
We wait for the client's connection request and once a successful connection is made, we dispatch the request in a separate thread, making ourselves available for the next request. 
This allows us to handle multiple requests simultaneously which boosts the performance of the server multifold times.

while True:
    # Establish the connection
    (clientSocket, client_address) = self.serverSocket.accept() 
    
    d = threading.Thread(name=self._getClientName(client_address), 
    target = self.proxy_thread, args=(clientSocket, client_address))
    d.setDaemon(True)
    d.start()

<strong>3. Redirecting the traffic</strong>

The main feature of a proxy server is to act as an intermediate between source and destination. 
Here, we would be fetching data from source and then pass it to the client.


First, we extract the URL from the received request data.

# get the request from browser
request = conn.recv(config['MAX_REQUEST_LEN']) 

# parse the first line
first_line = request.split('\n')[0]

# get url
url = first_line.split(' ')[1]

Then, we find the destination address of the request. 
Address is a tuple of <strong>(destination_ip_address, destination_port_no)</strong>. 
We will be receiving data from this address.


http_pos = url.find("://") # find pos of ://
if (http_pos==-1):
    temp = url
else:
    temp = url[(http_pos+3):] # get the rest of url

port_pos = temp.find(":") # find the port pos (if any)

# find end of web server
webserver_pos = temp.find("/")
if webserver_pos == -1:
    webserver_pos = len(temp)

webserver = ""
port = -1
if (port_pos==-1 or webserver_pos &lt; port_pos): 

    # default port 
    port = 80 
    webserver = temp[:webserver_pos] 

else: # specific port 
    port = int((temp[(port_pos+1):])[:webserver_pos-port_pos-1])
    webserver = temp[:port_pos] 


Now, we setup a new connection to the destination server (or remote server), and then send a copy of the original request to the server. 
The server will then respond with a response. 
All the response messages use the generic message format of <strong>RFC 822</strong>.


s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
s.settimeout(config['CONNECTION_TIMEOUT'])
s.connect((webserver, port))
s.sendall(request)


We then redirect the server's response to the client. 
conn is the original connection to the client. 
The response may be bigger then MAX_REQUEST_LEN that we are receiving in one call, so, a null response marks the end of the response.


while 1:
    # receive data from web server
    data = s.recv(config['MAX_REQUEST_LEN'])

    if (len(data) &gt; 0):
        conn.send(data) # send to browser/client
    else:
        break

We then close the server connections appropriately and do the error handling to make sure the server works as expected.

<strong>How to test the server?</strong>

1. Run the server on a terminal. 
Keep it running and switch to your favorite browser.

2. Go to your browser's proxy settings and change the proxy server to &#8216;localhost' and port to &#8216;12345'.

3. Now open any HTTP website (not HTTPS), for eg. 
geeksforgeeks.org and volla !! you should be able to access the content on the browser.

Once the server is running, we can monitor the requests coming to the client. 
We can use that data to monitor the content that is going or we can develop statistics based on the content.

We can even restrict access to a website or blacklist an IP address. 
We would be dealing with more such features in the upcoming tutorials.

What next?

We would be adding the following features in our proxy server in the upcoming tutorials.

- Blacklisting Domains
- Content monitoring
- Logging
- HTTP WebServer + ProxyServer

The whole working source code of this tutorial is available <a href="https://drive.google.com/file/d/0Bw6qkH-Uvw8Zbnl4RU5xcjNEOHc/view">here</a>

<a href="https://www.geeksforgeeks.org/kruskals-algorithm-using-stl-in-c/">Creating a Proxy Webserver in Python | Set 2</a>

<a href="https://ledinhcuong99.medium.com/build-simple-proxy-server-in-python-365bda288a52" class="whitebut ">Build simple proxy server in Python</a>
<a href="https://proxiesapi.com/blog/how-to-build-a-super-simple-http-proxy-in-python-i.php" class="whitebut ">Build Simple proxy in Python in just 17 lines of code</a>

<h2>OpenCV Python Tutorial</h2>
<a href="https://www.youtube.com/watch?v=qCR2Weh64h4" class="whitebut ">OpenCV Python Tutorial</a>

import cv2

img = cv2.imread('assets/logo.jpg', 1)
img = cv2.resize(img, (0, 0), fx=0.5, fy=0.5)
img = cv2.rotate(img, cv2.cv2.ROTATE_90_CLOCKWISE)

cv2.imwrite('new_img.jpg', img)

cv2.imshow('Image', img)
cv2.waitKey(0)
cv2.destroyAllWindows() 


import cv2
import random

img = cv2.imread('assets/logo.jpg', -1)

# Change first 100 rows to random pixels
for i in range(100):
	for j in range(img.shape[1]):
		img[i][j] = [random.randint(0, 255), random.randint(0, 255), random.randint(0, 255)]

# Copy part of image
tag = img[500:700, 600:900]
img[100:300, 650:950] = tag

cv2.imshow('Image', img)
cv2.waitKey(0)
cv2.destroyAllWindows() 


import numpy as np
import cv2

cap = cv2.VideoCapture(0)

while True:
    ret, frame = cap.read()
    width = int(cap.get(3))
    height = int(cap.get(4))

    image = np.zeros(frame.shape, np.uint8)
    smaller_frame = cv2.resize(frame, (0, 0), fx=0.5, fy=0.5)
    image[:height//2, :width//2] = cv2.rotate(smaller_frame, cv2.cv2.ROTATE_180)
    image[height//2:, :width//2] = smaller_frame
    image[:height//2, width//2:] = cv2.rotate(smaller_frame, cv2.cv2.ROTATE_180)
    image[height//2:, width//2:] = smaller_frame

    cv2.imshow('frame', image)

    if cv2.waitKey(1) == ord('q'):
        break

cap.release()
cv2.destroyAllWindows() 


import numpy as np
import cv2

cap = cv2.VideoCapture(0)

while True:
    ret, frame = cap.read()
    width = int(cap.get(3))
    height = int(cap.get(4))

    img = cv2.line(frame, (0, 0), (width, height), (255, 0, 0), 10)
    img = cv2.line(img, (0, height), (width, 0), (0, 255, 0), 5)
    img = cv2.rectangle(img, (100, 100), (200, 200), (128, 128, 128), 5)
    img = cv2.circle(img, (300, 300), 60, (0, 0, 255), -1)
    font = cv2.FONT_HERSHEY_SIMPLEX
    img = cv2.putText(img, 'Tim is Great!', (10, height - 10), font, 2, (0, 0, 0), 5, cv2.LINE_AA)

    cv2.imshow('frame', img)

    if cv2.waitKey(1) == ord('q'):
        break

cap.release()
cv2.destroyAllWindows() 


import numpy as np
import cv2

cap = cv2.VideoCapture(0)

while True:
    ret, frame = cap.read()
    width = int(cap.get(3))
    height = int(cap.get(4))

    hsv = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)
    lower_blue = np.array([90, 50, 50])
    upper_blue = np.array([130, 255, 255])

    mask = cv2.inRange(hsv, lower_blue, upper_blue)

    result = cv2.bitwise_and(frame, frame, mask=mask)

    cv2.imshow('frame', result)
    cv2.imshow('mask', mask)

    if cv2.waitKey(1) == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()


import numpy as np
import cv2

img = cv2.imread('assets/chessboard.png')
img = cv2.resize(img, (0, 0), fx=0.75, fy=0.75)
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

corners = cv2.goodFeaturesToTrack(gray, 100, 0.01, 10)
corners = np.int0(corners)

for corner in corners:
	x, y = corner.ravel()
	cv2.circle(img, (x, y), 5, (255, 0, 0), -1)

for i in range(len(corners)):
	for j in range(i + 1, len(corners)):
		corner1 = tuple(corners[i][0])
		corner2 = tuple(corners[j][0])
		color = tuple(map(lambda x: int(x), np.random.randint(0, 255, size=3)))
		cv2.line(img, corner1, corner2, color, 1)

cv2.imshow('Frame', img)
cv2.waitKey(0)
cv2.destroyAllWindows() 


import numpy as np
import cv2

img = cv2.resize(cv2.imread('assets/soccer_practice.jpg', 0), (0, 0), fx=0.8, fy=0.8)
template = cv2.resize(cv2.imread('assets/shoe.PNG', 0), (0, 0), fx=0.8, fy=0.8)
h, w = template.shape

methods = [cv2.TM_CCOEFF, cv2.TM_CCOEFF_NORMED, cv2.TM_CCORR,
            cv2.TM_CCORR_NORMED, cv2.TM_SQDIFF, cv2.TM_SQDIFF_NORMED]

for method in methods:
    img2 = img.copy()

    result = cv2.matchTemplate(img2, template, method)
    min_val, max_val, min_loc, max_loc = cv2.minMaxLoc(result)
    if method in [cv2.TM_SQDIFF, cv2.TM_SQDIFF_NORMED]:
        location = min_loc
    else:
        location = max_loc

    bottom_right = (location[0] + w, location[1] + h)    
    cv2.rectangle(img2, location, bottom_right, 255, 5)
    cv2.imshow('Match', img2)
    cv2.waitKey(0)
    cv2.destroyAllWindows() 



import numpy as np
import cv2

cap = cv2.VideoCapture(0)
face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')
eye_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_eye.xml')

while True:
    ret, frame = cap.read()

    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    faces = face_cascade.detectMultiScale(gray, 1.3, 5)
    for (x, y, w, h) in faces:
        cv2.rectangle(frame, (x, y), (x + w, y + h), (255, 0, 0), 5)
        roi_gray = gray[y:y+w, x:x+w]
        roi_color = frame[y:y+h, x:x+w]
        eyes = eye_cascade.detectMultiScale(roi_gray, 1.3, 5)
        for (ex, ey, ew, eh) in eyes:
            cv2.rectangle(roi_color, (ex, ey), (ex + ew, ey + eh), (0, 255, 0), 5)

    cv2.imshow('frame', frame)

    if cv2.waitKey(1) == ord('q'):
        break

cap.release()
cv2.destroyAllWindows() 


import numpy as np
import cv2

cap = cv2.VideoCapture(0)
face_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_frontalface_default.xml')
eye_cascade = cv2.CascadeClassifier(cv2.data.haarcascades + 'haarcascade_eye.xml')

while True:
    ret, frame = cap.read()

    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    faces = face_cascade.detectMultiScale(gray, 1.3, 5)
    for (x, y, w, h) in faces:
        cv2.rectangle(frame, (x, y), (x + w, y + h), (255, 0, 0), 5)
        roi_gray = gray[y:y+w, x:x+w]
        roi_color = frame[y:y+h, x:x+w]
        eyes = eye_cascade.detectMultiScale(roi_gray, 1.3, 5)
        for (ex, ey, ew, eh) in eyes:
            cv2.rectangle(roi_color, (ex, ey), (ex + ew, ey + eh), (0, 255, 0), 5)

    cv2.imshow('frame', frame)

    if cv2.waitKey(1) == ord('q'):
        break

cap.release()
cv2.destroyAllWindows() 

<a href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_tutorials.html" class="whitebut ">OpenCV-Python Tutorials</a>
<a href="https://stackoverflow.com/questions/20801015/recommended-values-for-opencv-detectmultiscale-parameters" class="whitebut ">Values for OpenCV detectMultiScale() parameters</a>

<h2>Python3 find the circle center from 3 pts</h2>
from math import sqrt 

def findCircle(x1, y1, x2, y2, x3, y3) : 
    x12 = x1 - x2;  
    x13 = x1 - x3;  
  
    y12 = y1 - y2;  
    y13 = y1 - y3;  
  
    y31 = y3 - y1;  
    y21 = y2 - y1;  
  
    x31 = x3 - x1;  
    x21 = x2 - x1;  
  
    # x1^2 - x3^2  
    sx13 = pow(x1, 2) - pow(x3, 2);  
  
    # y1^2 - y3^2  
    sy13 = pow(y1, 2) - pow(y3, 2);  
  
    sx21 = pow(x2, 2) - pow(x1, 2);  
    sy21 = pow(y2, 2) - pow(y1, 2);  
  
    f = (((sx13) * (x12) + (sy13) * 
          (x12) + (sx21) * (x13) + 
          (sy21) * (x13)) // (2 * 
          ((y31) * (x12) - (y21) * (x13)))); 
              
    g = (((sx13) * (y12) + (sy13) * (y12) + 
          (sx21) * (y13) + (sy21) * (y13)) // 
          (2 * ((x31) * (y12) - (x21) * (y13))));  
  
    c = (-pow(x1, 2) - pow(y1, 2) - 
         2 * g * x1 - 2 * f * y1);  
  
    # eqn of circle be x^2 + y^2 + 2*g*x + 2*f*y + c = 0  
    # where centre is (h = -g, k = -f) and  
    # radius r as r^2 = h^2 + k^2 - c  
    h = -g;  
    k = -f;  
    sqr_of_r = h * h + k * k - c;  
  
    # r is the radius  
    r = round(sqrt(sqr_of_r), 5);  
  
    print("Centre = (", h, ", ", k, ")");  
    print("Radius = ", r);  
  
# Driver code  
if __name__ == "__main__" :  
      
    x1 = 1 ; y1 = 1;  
    x2 = 2 ; y2 = 4;  
    x3 = 5 ; y3 = 3;  
    findCircle(x1, y1, x2, y2, x3, y3);  

<h2>Finding the “center of gravity” of multiple points</h2>
where points have unequal weights

import math
import nummpy
import math

def toCartesian(t):
        latD,longD = t
        latR = math.radians(latD)
        longR = math.radians(longD)
        return (
            math.cos(latR)*math.cos(longR), 
            math.cos(latR)*math.sin(longR), 
            math.sin(latR)
            )

def toSpherical(t):
    x,y,z = t

    r = math.hypot(x,y)
    if r == 0:
        if z > 0:
            return (90,0)
        elif z&lt; 0:
            return (-90,0)
        else:
            return None
    else:
        return (math.degrees(math.atan2(z, r)), math.degrees(math.atan2(y,x)))


xyz = numpy.asarray([0.0,0.0,0.0])
total = 0
for p in points:
        weight = p["weight"]
        total += weight
        xyz += numpy.asarray(toCartesian((p["lat"],p["long"])))*weight

avgXYZ = xyz/total
avgLat, avgLong = toSpherical(avgXYZ)
print avgLat,avgLong

<h2>django find center of points</h2>
https://stackoverflow.com/questions/6671183/calculate-the-center-point-of-multiple-latitude-longitude-coordinate-pairs
from django.contrib.gis.geos import Point, MultiPoint

points = [
    Point((145.137075, -37.639981)),
    Point((144.137075, -39.639981)),
]
multipoint = MultiPoint(*points)
point = multipoint.centroid

<h2>myro</h2>
<a href="https://www.youtube.com/watch?v=KzF2LFc39zc" class="whitebut ">Interactive Graphics in Python</a>
<a href="myro.html" class="whitebut ">myro</a>
<a href="https://www.youtube.com/watch?v=nYhxBVDW7sM" class="whitebut ">Python Graphics Programming</a>

<h2>Python 提取 PDF</h2>
简单文本类型数据

import pdfplumber as pr
import pandas as pd
pdf = pr.open('关于使用自有资金购买银行理财产品的进展公告.PDF')
ps = pdf.pages
pg = ps[3]
tables = pg.extract_tables()
table = tables[0]
print(table)
df = pd.DataFrame(table[1:],columns = table[0])
for i in range(len(table)):
    for j in range(len(table[i])):
        table[i][j] = table[i][j].replace('\n','')
df1 = pd.DataFrame(table[1:],columns = table[0])
df1.to_excel('page2.xlsx')

复杂型表格提取
import pdfplumber as pr
import pandas as pd
pdf = pr.open('关于使用自有资金购买银行理财产品的进展公告.PDF')
ps = pdf.pages
pg = ps[4]
tables = pg.extract_tables()
table = tables[0]
print(table)
df = pd.DataFrame(table[1:],columns = table[0])
for i in range(len(table)):
    for j in range(len(table[i])):
        table[i][j] = table[i][j].replace('\n','')
df1 = pd.DataFrame(table[1:],columns = table[0])
df2 = df1.iloc[2:,:]
df2 = df2.rename(columns = {"2019年12月31日":"2019年1-12月","2020年9月30日":"2020年1-9月"})
df2 = df2.loc[3:,:]
df1 = df1.loc[:1,:]
with pd.ExcelWriter('公司影响.xlsx') as i:
    df1.to_excel(i,sheet_name='资产', index=False, header=True) #放入资产数据
    df2.to_excel(i,sheet_name='营业',index=False, header=True) #放入营业数据

图片型表格提取
pip install pytesseract
http://digi.bib.uni-mannheim.de/tesseract/tesseract-ocr-setup-4.00.00dev.exe

import pytesseract
from PIL import Image
import pandas as pd
pytesseract.pytesseract.tesseract_cmd = 'C://Program Files (x86)/Tesseract-OCR/tesseract.exe'
tiqu = pytesseract.image_to_string(Image.open('图片型.jpg'))
print(tiqu)
tiqu = tiqu.split('\n')
while '' in tiqu:    #不能使用for
  tiqu.remove('')
  first = tiqu[:6]
  second = tiqu[6:12]
  third =  tiqu[12:]
  df = pd.DataFrame()
  df[first[0]] = first[1:]
  df[second[0]] = second[1:]
  df[third[0]] = third[1:]
#df.to_excel('图片型表格.xlsx')  #转为xlsx文件

我们的思路是用Tesseract-OCR来解析图片，得到一个字符串，接着对字符串运用split函数，把字符串变成列表同时删除\n。

<h2>encrypt and decrypt a string in python</h2>
USE cryptography.fernet.Fernet

Initialize a cryptographic key by calling cryptography.fernet.Fernet.generate_key().

Configure the encryption type to symmetric encryption by calling the function cryptography.fernet.Fernet(key) with the cryptographic key from step 1 as key.

Encrypt the string by calling cryptography.fernet.Fernet.encrypt(data) with data as the byte representation of a string.

Decrypt an encrypted string by using the key generated from step 1 and the encryption scheme from step 2. Call cryptography.fernet.Fernet.decrypt(token) with the encrypted message as token to get the original message.

key = Fernet.generate_key()
encryption_type = Fernet(key)
encrypted_message = encryption_type.encrypt(b"Hello World")
encode message

print(encrypted_message)
OUTPUT
b'gAAAAABefl-Ur385W0q0YNZM7rbUL_ImiFKBI05hEMIqhgf4FeUKyZFDUzIi3tqnCt6N4mAR2o8-ryPOOyJH32bvZEVjAG-YLg=='

decrypted_message = encryption_type.decrypt(encrypted_message)

<h2>Load a file into the python console</h2>
From the shell command line:

python file.py
From the Python command line

import file
or

from file import *


<h2>print colored text to the terminal</h2>
# install the <a href="https://pypi.org/project/termcolor/" class="whitebut ">Python termcolor</a> module

from termcolor import colored
in Python 3:
print(colored('hello', 'red'), colored('world', 'green'))

<h2>1、合并两个字典</h2>
Python3.5之后，合并字典变得容易起来。
我们可以通过**符号解压字典，并将多个字典传入{}中，实现合并。

def Merge(dict1, dict2):
     res = {**dict1, **dict2}
     return res
# 两个字典
dict1 = {"name": "Joy", "age": 25}
dict2 = {"name": "Joy", "city": "New York"}
dict3 = Merge(dict1, dict2) print(dict3)

输出：
{'name': 'Joy', 'age': 25, 'city': 'New York'}

<h2>2、链式比较</h2>
python有链式比较的机制，在一行里支持多种运算符比较。
相当于拆分多个逻辑表达式，再进行逻辑与操作。

a = 5
print(2 &lt; a &lt; 8)
print(1 == a &lt; 3)

输出：
TrueFalse

<h2>3、重复打印字符串</h2>将一个字符串重复打印多次，一般使用循环实现，但有更简易的方式可以实现。

n = 5string = "Hello!"print(string * n)

输出：
Hello!Hello!Hello!Hello!Hello!

<h2>4、检查文件是否存在</h2>我们知道Python有专门处理系统交互的模块-os，它可以处理文件的各种增删改查操作。

那如何检查一个文件是否存在呢？os模块可以轻松实现。

from os import path
def check_for_file():
    print("Does file exist:", path.exists("data.csv"))
if __name__=="__main__":
    check_for_file()

输出：
Does file exist: False

<h2>5、检索列表最后一个元素</h2>在使用列表的时候，有时会需要取最后一个元素，有下面几种方式可以实现。

my_list = ['banana', 'apple', 'orange', 'pineapple']
#索引方法last_element = my_list[-1]
#pop方法last_element = my_list.pop()

输出：
'pineapple'

<h2>6、列表推导式</h2>列表推导式是for循环的简易形式，可以在一行代码里创建一个新列表，同时能通过if语句进行判断筛选
def get_vowels(string):
    return [vowel for vowel in string if vowel in 'aeiou'] print("Vowels are:", get_vowels('This is some random string'))

输出：
Vowels are:  ['i', 'i', 'o', 'e', 'a', 'o', 'i']

<h2>7、计算代码执行时间</h2>python中time模块提供了时间处理相关的各种函数方法，我们可以使用它来计算代码执行的时间。

import time
start_time = time.time()
total = 0
for i in range(10):
  total += i
print("Sum:", total)
end_time = time.time()
time_taken = end_time - start_time
print("Time: ", time_taken)

输出：
Sum: 45Time:  0.0009975433349609375

<h2>8、查找出现次数最多的元素</h2>使用max方法找出列表中出现次数最多的元素。

def most_frequent(list):
  return max(set(list), key=list.count)
mylist = [1,1,2,3,4,5,6,6,2,2]
print("出现次数最多的元素是:", most_frequent(mylist))

输出：
出现次数最多的元素是: 2

<h2>9、将两个列表转换为字典</h2>有两个列表，将列表A里的元素作为键，将列表B里的对应元素作为值，组成一个字典。

def list_to_dictionary(keys, values):
  return dict(zip(keys, values))
list1 = [1, 2, 3]
list2 = ['one', 'two', 'three']
print(list_to_dictionary(list1, list2))

输出：
{1: 'one', 2: 'two', 3: 'three'}

<h2>10、异常处理</h2>Python提供了try...except...finally的方式来处理代码异常，当然还有其他组合的方式。

a, b = 1,0
try:
    print(a/b)
except ZeroDivisionError:
    print("Can not divide by zero")
finally:
    print("Executing finally block")

输出：
Can not divide by zeroExecuting finally block

<h2>11、反转字符串</h2>使用切片操作对字符串进行反转，这是比较直接有效的方式。
这也可以用来检测回文数。

str = "Hello World"
print("反转后字符串是:", str[::-1])

输出：
反转后字符串是: dlroW olleH

<h2>12、字符串列表组成单个字符串</h2>使用join方法将字符串列表组成单个字符串。

list = ["Hello", "world", "Ok", "Bye!"]
combined_string = " ".join(list)
print(combined_string)

输出：
Hello world Ok Bye!

<h2>13、返回字典缺失键的默认值</h2>字典中的get方法用于返回指定键的值，如果键不在字典中返回默认值 None 或者设置的默认值。

dict = {1:'one', 2:'two', 4:'four'}
#returning three as default value
print(dict.get(3, 'three'))
print("原始字典:", dict)

输出：
three原始字典: {1: 'one', 2: 'two', 4: 'four'}

<h2>14、交换两个变量的值</h2>在不使用临时变量的前提下，交换两个变量的值。

a, b = 5, 10
# 方法1
a, b = b, a
# 方法2
def swap(a,b):
  return b,a
swap(a,b)

<h2>15、正则表达式</h2>正则表达式用来匹配处理字符串，python中的re模块提供了全部的正则功能。

import re
text = "The rain in spain"
result = re.search("rain", text)
print(True if result else False)

输出：
True

<h2>16、筛选值</h2>python中的filter方法可以用来进行值的筛选。

my_list = [0,1,2,3,6,7,9,11]
result = filter(lambda x: x % 2!=0, my_list)
print(list(result))

输出：
[1, 3, 7, 9, 11]

<h2>17、统计字频</h2>判断字符串每个元素出现的次数，可以用collections模块中的Counter方法来实现，非常简洁。

from collections import Counter
result = Counter('banana')
print(result)

输出：
Counter({'a': 3, 'n': 2, 'b': 1})

<h2>18、变量的内存占用</h2>如何输出python中变量的内存占用大小，可以通过sys模块来实现。

import sys
var1 = 15list1 = [1,2,3,4,5]
print(sys.getsizeof(var1))
print(sys.getsizeof(list1))

输出：
28
104

<h2>19、链式函数调用</h2>在一行代码中调用多个函数。

def add(a, b):
    return a + b
def subtract(a, b):
    return a - b
a, b = 5, 10
print((add if b &gt; a else subtract)(a,b))

输出：
15

<h2>20、从列表中删除重复项</h2>删除列表中重复项一般可以通过遍历来筛选去重，或者直接使用集合方法。

list1 = [1,2,3,3,4,'John', 'Ana', 'Mark', 'John']
# 方法1
def remove_duplicate(list_value):
    return list(set(list_value))
print(remove_duplicate(list1))
# 方法2
result = []
[result.append(x) for x in list1 if x not in result]
print(result)

输出：
[1, 2, 3, 4, 'Ana', 'John', 'Mark']
[1, 2, 3, 4, 'John', 'Ana', 'Mark']

<h2>Linear Regression Machine Learning example</h2>
""" Linear Regression Machine Learning example:
### Uses data for machine age and time between failures ###
### Predict a model for the data, supervised ML ####
https://www.youtube.com/watch?v=2BusGJyn77E  """

## Import packages
import tensorflow as tf
import numpy
import pandas as pd
import matplotlib.pyplot as plt
rng = numpy.random

#Define your spreadsheet
spreadsheet = 'LR_ML.xlsx'
data = pd.read_excel(spreadsheet)

#Define your useful columns of data
months = data['Machine Age (Months)'].values
MTBF = data['Mean Time Between Failure (Days)'].values

# HyperParameters
learning_rate = 0.02
training_epochs = 3000

#Parameter
display_step = 50

# Training Data (X,Y) Sets
train_X = numpy.asarray(months)
train_Y = numpy.asarray(MTBF)

#Specifying the length of the train_x data
n_samples = train_X.shape[0]

# tf Graph Input --- Setting the dtype for the placeholder information
X = tf.placeholder("float")
Y = tf.placeholder("float")

# Set model weights This is initializing the guesses of the model for weight and bias
W = tf.Variable(rng.randn(), name="weight")
b = tf.Variable(rng.randn(), name="bias")

# Construct a linear model (y=WX+b)
pred = tf.add(tf.multiply(X, W), b)

# Mean squared error This is the error in the calculation to try to minimize
error = tf.reduce_sum(tf.pow(pred-Y, 2))/(2*n_samples)
# Gradient descent
#  Note, minimize() knows to modify W and b because Variable objects are trainable=True by default
optimizer = tf.train.GradientDescentOptimizer(learning_rate).minimize(error)

# Initialize the variables (i.e. assign their default value)
init = tf.global_variables_initializer()

# Start training
with tf.Session() as sess:

    # Run the initializer
    sess.run(init)

    # Fit all training data
    for epoch in range(training_epochs):
        for (x, y) in zip(train_X, train_Y):
            sess.run(optimizer, feed_dict={X: x, Y: y})

        # Display logs per epoch step
        if (epoch+1) % display_step == 0:
            c = sess.run(error, feed_dict={X: train_X, Y:train_Y})
            print("Epoch:", '%04d' % (epoch+1), "error=", "{:.9f}".format(c), \
                "W=", sess.run(W), "b=", sess.run(b))

    print("Optimization Finished!")
    training_error = sess.run(error, feed_dict={X: train_X, Y: train_Y})
    print("Training error=", training_error, "W=", sess.run(W), "b=", sess.run(b), '\n')

    # Graphic display
    plt.plot(train_X, train_Y, 'ro', label='Original data')
    plt.plot(train_X, sess.run(W) * train_X + sess.run(b), label='Fitted line')
    plt.legend()
    plt.show()

    # Testing example, as requested (Issue #2)
    test_X = numpy.asarray([2,4,6,8,10])
    test_Y = numpy.asarray([25,23,21,19,17])

    print("Testing... (Mean square loss Comparison)")
    testing_error = sess.run(
        tf.reduce_sum(tf.pow(pred - Y, 2)) / (2 * test_X.shape[0]),
        feed_dict={X: test_X, Y: test_Y})  # same function as cost above
    print("Testing error=", testing_error)
    print("Absolute mean square loss difference:", abs(
        training_error - testing_error))

    plt.plot(test_X, test_Y, 'bo', label='Testing data')
    plt.plot(train_X, sess.run(W) * train_X + sess.run(b), label='Fitted line')
    plt.legend()
    plt.show()

<h2>python stock market realtime monitoring</h2>
Alpha vantage website:
https://www.alphavantage.co/

Full code from the video:
https://github.com/Derrick-Sherrill/DerrickSherrill.com/blob/master/stocks.py
stocks.py

import pandas as pd
from alpha_vantage.timeseries import TimeSeries
import time

api_key = 'RNZPXZ6Q9FEFMEHM'

ts = TimeSeries(key=api_key, output_format='pandas')
data, meta_data = ts.get_intraday(symbol='MSFT', interval = '1min', outputsize = 'full')
print(data)

i = 1
#while i==1:
#    data, meta_data = ts.get_intraday(symbol='MSFT', interval = '1min', outputsize = 'full')
#    data.to_excel("output.xlsx")
#    time.sleep(60)

close_data = data['4. close']
percentage_change = close_data.pct_change()

print(percentage_change)

last_change = percentage_change[-1]

if abs(last_change) > 0.0004:
    print("MSFT Alert:" + str(last_change))

<h2>python file server</h2>
python -m http.server 8000
ip on hp
192.168.128.93:8000
ip on acer
192.168.128.77:8000


<h2>python ftp server</h2>
<a href="https://stackoverflow.com/questions/4994638/one-line-ftp-server-in-python" class="whitebut ">One line ftp server in python</a>

<a href="https://twistedmatrix.com/trac/" class="whitebut ">Twisted is an event-driven networking engine written in Python</a>
pip install twisted
code:
from twisted.protocols.ftp import FTPFactory, FTPRealm
from twisted.cred.portal import Portal
from twisted.cred.checkers import AllowAnonymousAccess, FilePasswordDB
from twisted.internet import reactor

reactor.listenTCP(21, FTPFactory(Portal(FTPRealm('./'), [AllowAnonymousAccess()])))
reactor.run()

<h3>pyftpdlib</h3>
pyftpdlib is one of the very best ftp servers out there for python.
pip3 install pyftpdlib
python -m pyftpdlib

code:
from pyftpdlib import servers
from pyftpdlib.handlers import FTPHandler
address = ("0.0.0.0", 21)  # listen on every IP on my machine on port 21
server = servers.FTPServer(address, FTPHandler)
server.serve_forever()

To get a list of command line options:
python3 -m pyftpdlib --help

To setup port 21 and writable
python -m pyftpdlib -p 21 -w


Usage: python -m pyftpdlib [options]
Start a stand alone anonymous FTP server.
Options:
  -h, --help.  show this help message and exit
  -i ADDRESS, --interface=ADDRESS.  specify the interface to run on (default all interfaces)
  -p PORT, --port=PORT.  specify port number to run on (default 2121)
  -w, --write.  grants write access for logged in user (default read-only)
  -d FOLDER, --directory=FOLDER.  specify the directory to share (default current directory)
  -n ADDRESS, --nat-address=ADDRESS.  the NAT address to use for passive connections
  -r FROM-TO, --range=FROM-TO.  the range of TCP ports to use for passive connections (e.g. -r 8000-9000)
  -D, --debug.  enable DEBUG logging evel
  -v, --version.  print pyftpdlib version and exit
  -V, --verbose.  activate a more verbose logging
  -u USERNAME, --username=USERNAME.  specify username to login with (anonymous login will be disabled and password required if supplied)
  -P PASSWORD, --password=PASSWORD.  specify a password to login with (username required to be useful)

<h2>enable FTP through Chrome on all Windows devices</h2>
In Chrome 81, FTP support is disabled by default, but you can enable it using the # enable-ftp flag.

Open Chrome and type “chrome://flags” in the address bar.
Once in the flags area, type “enable-ftp” in the search bar stating “search flags”.
When you see the “Enable support for FTP URLs” option tap where it says “Default”.
Tap “Enable” option.
Hit “Relaunch Now” option at the bottom of the page.

FTP using Chrome
You can download content via ftp://username:password@your-domain.com. 
But at the moment Chrome does not support uploading of content via FTP.

To upload your files you may want to use FileZilla or CuteFTP. 
Some web browsers, such as Microsoft Internet Explorer, can also be used for FTP purposes and konsoleH includes the File Manager, which allows you to transfer files to and from your upload area.

<h2>create a simple message box in Python</h2>
import ctypes  # An included library with Python install.   
ctypes.windll.user32.MessageBoxW(0, "Your text", "Your title", 1)

Or define a function (Mbox) like so:
import ctypes  # An included library with Python install.
def Mbox(title, text, style):
    return ctypes.windll.user32.MessageBoxW(0, text, title, style)
Mbox('Your title', 'Your text', 1)

Note the styles are as follows:

##  Styles:
##  0 : OK
##  1 : OK | Cancel
##  2 : Abort | Retry | Ignore
##  3 : Yes | No | Cancel
##  4 : Yes | No
##  5 : Retry | Cancel 
##  6 : Cancel | Try Again | Continue
Note: edited to use MessageBoxW instead of MessageBoxA


<h2>Python For Bluetooth</h2>
https://ukbaz.github.io/en/html/reference/bluetooth_overview/index.html
Back in 2015 I became aware of Bluetooth BLE Beacons and some of the things that could be done with them. 
At the same time I was helping on a STEM initiative called Go4SET where I would help students build out ideas of how to solve problems they had observed in the world around them.
Their solution would show how electronics and software could be used to solve the problems. 
As Python was the language of choice in the schools I was working with, I started to investigate how to scan for BLE Beacons using a Raspberry Pi.
Here we are in 2020 and I still don’t have a great solution for how to do this, but things have got better in that time and I’ve learnt some things along the way.
One of the keys things I’ve learnt is that there is a lot of out-of-date information on the internet about Bluetooth.
While I suspect my writings will (in time)  add to the volume of out-of-date information on the internet about Bluetooth. 
For now I am aiming for it to be of some help to someone coming to the topic a new.
So here is some Python-Linux-Bluetooth information that might help someone starting.
<h2>Bad Information</h2>
Many tutorials on the internet are done with command-line tools that have been deprecated, such as hcitool and hcidump.
If you see tutorials using the <a href="https://en.wikipedia.org/wiki/List_of_Bluetooth_protocols#HCI">HCI (Host Controller Interface)</a> socket then it is either out-of-date or at such a low level that it is best to stay away.
The command-line tools recommended by the BlueZ developers are
<cite>bluetoothctl</cite> or, if you need more control, <cite>btmgmt</cite>. 
And instead of using
<cite>hcidump</cite>, use <cite>btmon</cite>.
I would also be very nervous about using a library that uses <cite>HCI sockets</cite>
for interfacing with the Bluetooth hardware on Linux. 
More on the different programming interfaces later.
<h2>But BlueZ…Really?</h2>
During the years I’ve been playing around with Bluetooth on Linux I’ve seen people show their frustration with the way that BlueZ handles things.
And I see peoples point. 
An example is that the HCI tools were deprecated and removed. 
It is hard to find tutorials on how to use the new tools and answers to <a href="https://www.spinics.net/lists/linux-bluetooth/msg70489.html">questions on the mailing list</a> expect a certain level of knowledge. 
It is also common for questions to go unanswered on the mailing list. 
This is Open Source so they don’t owe anyone an answer.
However, I have also seen the developers show their frustration that people go off and do crazy things rather than how they had intended things to work.
I spent many years of my professional life as an Application Engineer for a software company. 
My big learning from that time is that if you don’t show people how to use your tool (and make using it the way you wanted the easiest)
then smart people will workout their own way of doing it.
Having said all of that, the developers have settled on the DBus API and it is getting better and better. 
The biggest barrier for most people is finding the “on-ramp” to learning about how to use it.
There are examples <a href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/test/test-profile">Python examples</a>
in the repository, but frankly they are often of limited value.
<h2>BlueZ API</h2>
A list of the possible API’s starting from lowest level and going to the highest. 
For most people, the higher the better.
<h3>HCI Socket</h3>
As I said earlier, this bypasses the <cite>bluetoothd</cite> that is running on the Linux system that is used by the desktop tools. 
Using this is not a great idea unless you really, really know what you are doing.
All the information is available in the Bluetooth <a href="https://www.bluetooth.com/specifications/bluetooth-core-specification/">Core Specification</a>
which runs to about 3,256 pages for the 5.2 version of the spec.
<h3>MGMT Socket</h3>
The BlueZ <a href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/mgmt-api.txt">Bluetooth Mamagement API</a>
is the next step up and the lowest level that the BlueZ developer recommend.
The problem for Python users is <a href="https://bugs.python.org/issue36132">this bug</a>
makes it difficult to access the mgmt socket. 
There are other duplicate bugs on this in the system. 
Until they are fixed, this remains off bounds for many Python users.
<h3>DBus API</h3>
This should be the go to level for most people wanting to interact with the BlueZ API’s. 
However, it seems the number of people that have done things with DBus previously is a relatively small group and it is another level of indirection to learn.
There are a number of Python libraries that offer <a href="https://www.freedesktop.org/wiki/Software/DBusBindings/">DBus bindings</a>
for Python.
However, there isn’t just one library that is correct for all cases.
<a href="https://pypi.org/project/pydbus/">pydbus</a> is one of the easier ones to get started with.
The BlueZ DBus API for interacting with the Bluetooth Adapter on your Raspberry Pi is documented at
<a href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/adapter-api.txt">https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/adapter-api.txt</a>
This allows you to know that the DBus Service is (<cite>org.bluez</cite>). 
The Object Path is less obvious from the documentation but is <cite>/org/bluez/hci0</cite> by default on most Linux machines.
With this information we can quickly look to see properties from the adapter using Python. 
The example below looks at name, if it is powered, and its mac adderess:
<img src="https://ukbaz.github.io/en/html/_images/pydbus_example.png" />
<h2>Python For Bluetooth</h2>
If you write applications on iOS or Android, then you will have seen there are some great libraries with API’s that hide much of the gnarly-ness of Bluetooth.
With Python there are not those libraries around with that level of abstraction for most things you might want to do.
So you might end up going a little deeper and needing to know some of the details of Bluetooth.
<h2>Libraries to help you Bluetooth</h2>
There are plenty of them out there. 
I keep a list of many of them at:
<a href="https://github.com/ukBaz/python-bluezero/wiki">https://github.com/ukBaz/python-bluezero/wiki</a>
Most of them are pretty niche in what they do. 
There are a number of them that are abondonware. 
This isn’t surprising given how big Bluetooth is and the many things you can do with it.
It is also really hard to automate the testing of Python Bluetooth libraries and I think this is what ends up being the main reason why the libraries stay niche or abandoned.
<h2>More than one Bluetooth</h2>
Depending on where you are starting from there can be a number of details that can trip people up when they first engage with Bluetooth and code.
The first is that there are two different types of Bluetooth.
These are generally referred to as Classic and BLE. 
Devices like the Raspberry Pi support both. 
While the BBC micro:bit is BLE only.
If you try to use Classic (aka BR/EDR, aka rfcomm,
aka Serial port profile, aka spp, aka 1101,
aka 00001101-0000-1000-8000-00805f9b34fb) on the Raspberry Pi then it will never speak sensibly with a micro:bit.
Bluetooth Classic (BR/EDR) supports speeds up to about 24Mbps.
It was version 4.0 of the standard that introduced a low energy mode,
Bluetooth Low Energy (BLE or LE, also known as “Bluetooth Smart”),
that operates at 1Mbps. 
This mode allows devices to leave their transmitters off most of the time. 
As a result it is “Low Energy”.
These two modes have a different philosophy of how they behave. 
Classic is a cable replacement. 
It makes the connection and stays connected.
BLE is similar to a database where the transmitter is only on when it is being written to or read from. 
Clients can also subscribe to notifications when data changes in the Generic ATTribute Profile (GATT).
<img src="https://ukbaz.github.io/en/html/_images/two_bluetooth_types.jpeg" />
In classic mode there is a server and a client. 
The server advertises and the client connects.
With BLE there are different terms of peripheral and central. 
A peripheral advertises and a central scans and connects.
In BLE you can also have a Broadcaster (beacon) which is a transmitter only
(connectionless) application. 
The Observer (scanner) role is for receiver only connectionless applications.
<h2>Endianness</h2>
As with most communication protocols, data is chopped up in to bytes that are sent between the two devices.
When this is done there is a choice of what order those bytes are transmitted in.
This is referred to as <a href="https://en.wikipedia.org/wiki/Endianness">endianness</a>
The Bluetooth standard is little-endian which often trips people up that are looking at Bluetooth for the first time.
The exception to this is when looking at beacons. 
As far as I can tell this seems to be because Apple did this when they brought out the iBeacon and many have followed that example.
<h2>Binary</h2>
Because Bluetooth has come out of the embedded world there are lots of binary numbers referring to things rather than nice string names. 
Lots of values are
128-bits in length.
This means that when I want to look at the status of button A on a micro:bit I need to look in the GATT database for <cite>E95DDA90-251D-470A-A062-FA1922DFA9A8</cite>
In classic mode, the <a href="https://www.bluetooth.com/specifications/assigned-numbers/service-discovery/">Serial Port Profile</a>
(SPP) is normally referred to by the 16-bit hex value of <cite>0x1101</cite>.
However, it is really an 128-bit value but because it is an official profile it can be shortened to a 16-bit value
<h3>Bluetooth Special Interest Group (SIG) Reserved Values</h3>
The SIG has the following number reserved and the <cite>xxxx</cite> below is replaced with the 16-bit value.
<cite>0000xxxx-0000-1000-8000-00805f9b34fb</cite>
If you see a tutorial that is using 16-bit values without using official SIG profiles then be suspicious if that is a good tutorial.
<h2>Asynchronous</h2>
There are parts of Bluetooth that just needs to be asynchronous. 
Examples are when scanning for new devices or getting notifications from a peripheral.
While this is possible to do with Python, asynchronous isn’t the way most people learn Python.
For BlueZ, it works with the GLib event loop which will be familiar to people that have coded GUI’s in Python.
<h2>Pairing and Connecting</h2>
I have seen confusion between these two terms when people come to programming Bluetooth.
Pairing is about the two devices exchanging information so that the devices can communicate securely. 
So pairing is a one-off activity to exchange credentials. 
It is not always required as sometimes it is OK for devices to exchange information without being secure. 
Especially if you are just learning as it simplifies the processes involved.
Connection needs to be done every time you want the devices to start communicating. 
It is a straight forward step in the two devices already know about each other.
I typically recommend that the one-off setup of scanning and pairing is done manually with <cite>bluetoothctl</cite>.
<h2>RFCOMM (Or is that SPP?)</h2>
This is the most useful profile in classic mode for many activities in the maker community when you want ot exchange information between two boards that support Bluetooth serial connection. 
From Python 3.3 this is supported within the standard socket library. 
Below is an example of a client connecting to a server. 
This assumes the pairing has already happened and will do the connection.
>>> import socket
>>> s = socket.socket(socket.AF_BLUETOOTH, socket.SOCK_STREAM, socket.BTPROTO_RFCOMM)
>>> s.connect(('B8:27:EB:22:57:E0', 1))
>>> s.send(b'Hello')
>>> s.recv(1024)
b'world'
>>> s.close()

If this just works then life is great. 
If there are issues, then this is when Bluetooth can become more frustating. 
Debugging is probably a separate post.
<h2>BLE (Or is that GATT)</h2>
With BLE there is not the same level of support from native Python so it is required to use the DBus API. 
This means using the
<a href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/device-api.txt">Device</a>
and
<a href="https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/doc/gatt-api.txt">GATT</a>.
The difficult piece with these is that it is not known ahead of connection what the DBus <cite>Object Path</cite> will be for the devices, GATT Services,
and GATT Characteristics we are interested in.
This results in the need to do a reverse look-up from the UUID to the object path. 
This was the subject of a
<a href="https://github.com/campug/bzero_kata">kata</a>
I held at my local Python user group.
<h2>Good To Know</h2>
This talk at Embedded Linux Conference gave lots of good insight in to how things are done with BlueZ. 
It is worth a watch if you are interested in learning more.
<iframe src="https://www.youtube.com/embed/VMDyebKT5c4"></iframe>
<h2>Python, Bluetooth, and Windows…</h2>
In Python 3.9 it is going to be easier to use Bluetooth RFCOMM (Serial Port Profile) thanks to this submission: <a href="https://bugs.python.org/issue36590">https://bugs.python.org/issue36590</a>

範例 findmyphone.py 演示了使用一個 Python 小程式去尋找附近名稱為 My Phone 的藍芽裝置。範例如下所示，請自行修改 target_name 成你要尋找的藍芽裝置名稱即可，

import bluetooth

target_name = "My Phone"
target_address = None

nearby_devices = bluetooth.discover_devices()

for bdaddr in nearby_devices:
    if target_name == bluetooth.lookup_name( bdaddr ):
        target_address = bdaddr
        break

if target_address is not None:
    print "found target bluetooth device with address ", target_address
else:
    print "could not find target bluetooth device nearby"

藍芽位址是由 xx:xx:xx:xx:xx:xx 的形式所組成，xx 為十六進制，怎麼查詢藍芽位址請看這篇，每個藍芽裝置都有個獨一無二的藍芽位址。但是如果我們要找”某個名稱”的藍芽裝置，而不是用藍芽位址去找，那會分成兩步驟：

以上述 findmyphone.py 為例，首先程式會先掃描附近的藍芽裝置，呼叫 discover_devices() 尋找附近的裝置(大概10秒)，然後回傳一個列表，

再來，使用 lookup_name() 去連接上每個已偵測到的裝置，請求它們的裝置名稱，並且順便判斷名稱是不是我們要尋找的 My Phone target name，是的話會顯示找到並印出藍芽位址。

在區域內掃描藍芽裝置和查找裝置名稱這過程有時可能會失敗(空氣中其他的干擾等等不定因素，裝置很多，裝置在移動？！)，discover_devices() 有會回傳 None，意味著無法用裝置名稱來進行後續的匹配，這時最好的解決方式就是多試幾次看看XD。

https://people.csail.mit.edu/albert/bluez-intro/c212.html

<h2>Ciphey</h2>
Installation
python3 -m pip install ciphey --upgrade

Windows Python defaults to install 32-bit.
Ciphey only supports 64-bit.
Make sure you're using 64-bit Python.

There are 3 ways to run Ciphey.
File Input <code>ciphey -f encrypted.txt</code>
Unqualified input <code>ciphey -- "Encrypted input"</code>
Normal way <code>ciphey -t "Encrypted input"</code>

<img class="lazy" data-src="https://youwuqiong.top/wp-admin/img.php?imgUrl=https://github.com/Ciphey/Ciphey/raw/master/Pictures_for_README/3ways.gif">

To get rid of the progress bars, probability table, and all the noise use the quiet mode.

<code>ciphey -t "encrypted text here" -q</code>

For a full list of arguments, run <code>ciphey --help</code>.

Importing Ciphey

You can import Ciphey's main and use it in your own programs and code. <code>from Ciphey.__main__ import main</code>
<h2>47 个 Python 人工智能库</h2>
<div>
<a href="#pythonLibtopic-0">The List</a><br>
<a href="#pythonLibtopic-1">Python 核心库</a><br>
<a href="#pythonLibtopic-2">Python 机器学习</a><br>
<a href="#pythonLibtopic-3">Python 深度学习</a><br>
<a href="#pythonLibtopic-4">Python 分布式深度学习库</a><br>
<a href="#pythonLibtopic-5">Python 自然语言处理</a><br>
<a href="#pythonLibtopic-6">Python 计算机视觉</a><br>
<a href="#pythonLibtopic-7">Python 生物/化学</a><br>
</div>
<h3 id="pythonLibtopic-0">The List</h3>
Numpy 库 https://www.numpy.org.cn/
SciPy 库 https://www.scipy.org/
Pandas 库 https://pandas.pydata.org/ 
statsmodels 库 https://www.statsmodels.org/
Scikit-Learn 库 https://scikit-learn.org.cn/
LightGBM 库 https://lightgbm.readthedocs.io
CatBoost 库 https://catboost.ai/
Eli5 库 https://eli5.readthedocs.io
Theano 库 https://pypi.org/project/Theano/
PyBrain库 https://github.com/pybrain/pybrain/
Shogun库 https://github.com/shogun-toolbox/shogun
Chainer库 https://www.cnpython.com/pypi/chainerrl
PyLearn2库 http://github.com/lisa-lab/pylearn2
Hebel库 https://www.oschina.net/p/hebel/
Neurolab库 https://pythonhosted.org/neurolab/
TensorFlow 库 https://www.tensorflow.org/
PyTorch 库 https://pytorch.org/
Keras 库 https://keras.io/zh/
Caffe2 库 http://caffe.berkeleyvision.org/
dist-Keras 库 https://joerihermans.com/work/distributed-keras/
elephas 库 https://pypi.org/project/elephas/
Spark-Deep-Learning 库 https://databricks.github.io/spark-deep-learning/
Mxnet库 https://pypi.org/project/mxnet/
Sklearn-theano库 https://github.com/sklearn-theano/
NLTK 库 https://www.nltk.org/
SpaCy 库 https://spacy.io/
PKUSeg 库 https://pypi.org/project/pkuseg/
Gensim 库 https://radimrehurek.com/gensim/
CoreNLP 库 https://stanfordnlp.github.io/CoreNLP/
TextBlob 库 https://pypi.org/project/textblob/
Stanfordnlp 库 https://github.com/stanfordnlp/stanfordnlp
openCV 库 https://opencv.org/
Scikit-Image 库 https://scikit-image.org/
Pillow/PIL 库 https://pillow.readthedocs.io/en/stable
SimpleCV 库 http://simplecv.org/
Mahotas 库 https://pypi.org/project/mahotas/0.99/
ITK 库 https://itk.org/
Pgmagick 库 https://pythonhosted.org/pgmagick/index.html
Pycairo 库 https://www.cairographics.org/pycairo/
Fastai库 https://pypi.org/project/fastai/
Imutils库 https://pypi.org/project/imutils/
PyTorchCV库 https://pytorch-cn.readthedocs.io/zh/latest/
BioPython 库 https://biopython-cn.readthedocs.io/
DashBio 库 http://dash.plot.ly/dash-bio
RDKit 库 http://www.rdkit.org/

<h3 id="pythonLibtopic-1">Python 核心库</h3>
1.Numpy 库 https://www.numpy.org.cn/
特点：NumPy (Numerical Python) 是 Python 语言的一个扩展程序库，支持大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库。
NumPy 通常 SciPy（Scientific Python）和 Matplotlib（绘图库）一起使用，这种组合广泛用于替代 MatLab，是一个强大的科学计算环境，有助于我们通过 Python 学习数据科学或者机器学习。

2.SciPy 库 https://www.scipy.org/
特点：SciPy 是一个开源的 Python 算法库和数学工具包。SciPy 包含的模块有最优化、线性代数、积分、插值、特殊函数、快速傅里叶变换、信号处理和图像处理、常微分方程求解和其他科学与工程中常用的计算。它用于有效计算 Numpy 矩阵，使 Numpy 和 Scipy 协同工作，高效解决问题。

3.Pandas 库 https://pandas.pydata.org/ 
特点：Pandas 是 Python 语言的一个扩展程序库，用于数据分析。Pandas 是一个开放源码、BSD许可的库，提供高性能、易于使用的数据结构和数据分析工具，基础是 Numpy（提供高性能的矩阵运算），可以从各种文件格式比如CSV、JSON、SQL、Excel导入数据。Pandas 可以对各种数据进行运算操作，比如归并、再成形、选择，还有数据清洗和数据加工特征。Pandas 广泛应用在学术、金融、统计学等各个数据分析领域。

4.statsmodels 库 https://www.statsmodels.org/
特点：statsmodels 是一个 Python 库，用于拟合多种统计模型，执行统计测试以及数据探索和可视化。statsmodels 包含更多的“经典”频率学派统计方法，而贝叶斯方法和机器学习模型可在其他库中找到。包含在 statsmodels 中的一些模型：线性模型，广义线性模型和鲁棒线性模型，线性混合效应模型，方差分析（ANOVA）方法，时间序列过程和状态空间模型，广义的矩量法。

<h3 id="pythonLibtopic-2">Python 机器学习</h3>

5.Scikit-Learn 库 https://scikit-learn.org.cn/
特点：Scikit-learn（以前称为scikits.learn，也称为sklearn）是针对 Python 编程语言的免费软件机器学习库。它具有各种分类，回归和聚类算法，包括支持向量机，随机森林，梯度提升，k均值和DBSCAN，并且旨在与 Python 数值科学库 NumPy 和 SciPy 联合使用。

//  6.XGBoost 库 https://xgboost.ai/
特点：XGBoost是一个优化的分布式梯度增强库，旨在实现高效，灵活和便携。它在 Boosting框架下实现机器学习算法。XGBoost提供并行树提升（也称为GBDT，GBM），可以快速准确地解决许多数据科学问题。相同的代码在主要的分布式环境（Hadoop，SGE，MPI）上运行，并且可以解决数十亿个示例之外的问题。

7.LightGBM 库 https://lightgbm.readthedocs.io
特点：LightGBM（Light Gradient Boosting Machine） 是微软开源的一个实现 GBDT 算法的框架，支持高效率的并行训练。LightGBM 提出的主要原因是为了解决 GBDT 在海量数据遇到的问题，让 GBDT 可以更好更快地用于工业实践。其具有以下优点：更快的训练速度、更低的内存消耗、更好的准确率、分布式支持，可以快速处理海量数据。

8.CatBoost 库 https://catboost.ai/
特点：CatBoost 是由 Yandex 的研究人员和工程师开发的基于梯度提升决策树的机器学习方法，现已开源。CatBoost 在 Yandex 公司内广泛使用，用于排列任务、预测和提出建议。CatBoost 是通用的，可应用于广泛的领域和各种各样的问题。

9.Eli5 库 https://eli5.readthedocs.io
特点：ELI5 是一个 Python 库，允许使用统一API可视化地调试各种机器学习模型。它内置了对多个ML框架的支持，并提供了一种解释黑盒模型的方法。它有助于调试机器学习分类器并解释它们的预测。

10.Theano 库 https://pypi.org/project/Theano/
特点：Theano 是一个 Python 库，专门用于定义、优化、求值数学表达式，效率高，适用于多维数组。特别适合做机器学习。一般来说，使用时需要安装 Python 和 Numpy 。

11.PyBrain库 https://github.com/pybrain/pybrain/
特点：PyBrain的概念是将一系列的数据处理的算法封装到被称之为Module的模块中。一个最小的Module通常包含基于机器学习算法的可调整的参数集合。

12.Shogun库 https://github.com/shogun-toolbox/shogun
特点：Shogun是一个开源机器学习库，它提供广泛的高效和统一的机器学习方法，如多种数据表示、算法类和通用工具的组合，用于快速原型设计数据管道。

<h3 id="pythonLibtopic-3">Python 深度学习</h3>
13.Chainer库 https://www.cnpython.com/pypi/chainerrl
特点：ChainerCV是一个基于Chainer用于训练和运行计算机视觉任务的神经网络工具。它涵盖了计算机视觉模型的高质量实现,以及开展计算机视觉研究的必备工具集。

14. PyLearn2库 http://github.com/lisa-lab/pylearn2
特点：Pylearn2是一个基于Theano的机器学习库,它的大部分功能是基于Theano顶层实现的。这意味着用户可以用数学表达式去编写Pylearn2插件(新模型、算法等)。

15.Hebel库 https://www.oschina.net/p/hebel/
特点：Hebel 是一个通过 PyCUDA 库使用 GPU CUDA 来加速建立神经网络的深度学习库。它实现了几类最重要的神经网络模型，提供各种激活函数和训练模型。

16.Neurolab库 https://pythonhosted.org/neurolab/
特点：neurolab是一个简单而强大的Python神经网络库。包含基于神经网络、训练算法和灵活的框架来创建和探索其他神经网络类型。

17.TensorFlow 库 https://www.tensorflow.org/
特点：TensorFlow 是一个基于数据流编程（dataflow programming）的符号数学系统，被广泛应用于各类机器学习（machine learning）算法的编程实现，其前身是谷歌的神经网络算法库 DistBelief 。Tensorflow 拥有多层级结构，可部署于各类服务器、PC终端和网页并支持GPU和TPU高性能数值计算，被广泛应用于谷歌内部的产品开发和各领域的科学研究。

18.PyTorch 库 https://pytorch.org/
特点：PyTorch 是一个开源的 Python 机器学习库，基于 Torch，用于自然语言处理等应用程序。PyTorch 的前身是 Torch ，其底层和 Torch 框架一样，但是使用 Python 重新写了很多内容，不仅更加灵活，支持动态图，而且提供了 Python接口。它是由 Torch7 团队开发，是一个以 Python 优先的深度学习框架，不仅能够实现强大的GPU加速，同时还支持动态神经网络。PyTorch 既可以看作加入了GPU支持的 Numpy，同时也可以看成一个拥有自动求导功能的强大的深度神经网络。除了 Facebook 外，它已经被Twitter、CMU 和 Salesforce 等机构采用。

19.Keras 库 https://keras.io/zh/
特点：Keras 是一个由 Python 编写的开源人工神经网络库，可以作为 Tensorflow、 Microsoft-CNTK 和 Theano 的高阶应用程序接口，进行深度学习模型的设计、调试、评估、应用和可视化。Keras 在代码结构上由面向对象方法编写，完全模块化并具有可扩展性。Keras 支持现代人工智能领域的主流算法，包括前馈结构和递归结构的神经网络，也可以通过封装参与构建统计学习模型。在硬件和开发环境方面，Keras 支持多操作系统下的多GPU并行计算，可以根据后台设置转化为 Tensorflow、Microsoft-CNTK 等系统下的组件。

20.Caffe2 库 http://caffe.berkeleyvision.org/
特点：Caffe是由Berkeley Vision and Learning Center(BVLC)建立的深度学习框架。它是模块化的，速度极快。

<h3 id="pythonLibtopic-4">Python 分布式深度学习库</h3>
21.dist-Keras 库 https://joerihermans.com/work/distributed-keras/
特点：dist-Keras 是在 Apache Spark 和 Keras 之上构建的分布式深度学习框架，其重点是“最先进的”分布式优化算法。以易于实现新的分布式优化器的方式设计了框架，从而使人们能够专注于研究。支持多种分布式方法，例如但不限于使用数据并行方法训练合奏和模型。

22.elephas 库 https://pypi.org/project/elephas/
特点：elephas 是一个把 Python 深度学习框架 Keras 衔接到 Spark 集群的第三方 python 包。

23.Spark-Deep-Learning 库 https://databricks.github.io/spark-deep-learning/
特点：Spark-Deep-Learning 为使用 Apache Spark 的 Python 中可伸缩的深度学习提供了高级api。该库来自 Databricks ，并利用 Spark 实现了两个最强大的方面：本着 Spark 和 Spark MLlib 的精神，它提供了易于使用的API，能够在很少的代码行中进行深入学习；它使用 Spark 强大的分布式引擎来扩展对海量数据集的深度学习。 

24.Mxnet库 https://pypi.org/project/mxnet/
特点：MXNet 是一款设计为效率和灵活性的深度学习框架。它允许你混合符号编程和命令式编程,从而最大限度提高效率和生产力。

25.Sklearn-theano库 https://github.com/sklearn-theano/
特点：sklearn-theano的功能所在。你不能用它从头到尾的训练一个模型，但它的神奇之处就是可以把网络作为特征提取器。

<h3 id="pythonLibtopic-5">Python 自然语言处理</h3>
26.NLTK 库 https://www.nltk.org/
特点：NLTK（Natural Language Toolkit）自然语言处理工具包，是 NLP 研究领域常用的一个 Python 库，由宾夕法尼亚大学的 Steven Bird 和 Edward Loper 在 Python 的基础上开发的一个模块，至今已有超过十万行的代码。这是一个开源项目，包含数据集、  Python 模块、教程等。

27.SpaCy 库 https://spacy.io/
特点：SpaCy 是一个 Python 和 CPython 的 NLP 自然语言文本处理库。SpaCy主要功能包括分词、词性标注、词干化、命名实体识别、名词短语提取等等。

28.PKUSeg 库 https://pypi.org/project/pkuseg/
特点：PKUSeg-Python 是由北京大学语言计算与机器学习研究组研制推出的一个高准确度的中文分词工具包。PKUSeg-Python 简单易用，支持多领域分词，在不同领域的数据上都大幅提高了分词的准确率。

29.Gensim 库 https://radimrehurek.com/gensim/
特点：Gensim 是一个相当专业的主题模型 Python 工具包。在文本处理中，比如商品评论挖掘，有时需要了解每个评论分别和商品的描述之间的相似度，以此衡量评论的客观性。评论和商品描述的相似度越高，说明评论的用语比较官方，不带太多感情色彩，比较注重描述商品的属性和特性，角度更客观。Gensim 就是  Python 里面计算文本相似度的程序包。

30.CoreNLP 库 https://stanfordnlp.github.io/CoreNLP/
特点：Stanford CoreNLP 提供了一套人类语言技术工具。支持多种自然语言处理基本功能，Stanford CoreNLP 是它的一个 Python 接口。Stanford CoreNLP 主要功能包括分词、词性标注、命名实体识别、句法结构分析和依存分析等等。

31.TextBlob 库 https://pypi.org/project/textblob/
特点：用于处理文本数据的Python库。它提供一个简单的API，可用于深入研究常见的NLP任务，如词性标注、名词短语提取、情感分析、文本翻译、分类等。

32.Stanfordnlp 库 https://github.com/stanfordnlp/stanfordnlp
特点：Stanford NLP提供了一系列自然语言分析工具。它能够给出基本的词形、词性，并且能够标记句子的结构，语法形式和字词的依赖，指明那些名字指向同样的实体，指明情绪，提取发言中的开放关系等。

<h3 id="pythonLibtopic-6">Python 计算机视觉</h3>
33.openCV 库 https://opencv.org/
特点：OpenCV 是一个基于BSD许可（开源）发行的跨平台计算机视觉和机器学习软件库，可以运行在 Linux、Windows、Android 和 MacOS 操作系统上。它轻量级而且高效——由一系列 C 函数和少量 C++ 类构成，同时提供了 Python、Ruby、MATLAB 等语言的接口，实现了图像处理和计算机视觉方面的很多通用算法。

34.Scikit-Image 库 https://scikit-image.org/
特点：Scikit-Image 是图像处理算法的集合，采用 Python 语言编写。它实现了用于研究、教育和工业应用的算法和实用程序。它是一个相当简单和直接的库，即使对于 Python 生态系统的新手也是如此。

35.Pillow/PIL 库 https://pillow.readthedocs.io/en/stable
特点：PIL（Python Imaging Library）已经是 Python 平台事实上的图像处理标准库了。PIL 功能非常强大，但API却非常简单易用。由于 PIL 仅支持到 Python2.7，加上年久失修，于是一群志愿者在 PIL 的基础上创建了兼容的版本，名字叫 Pillow，支持最新Python 3.x，又加入了许多新特性。

36.SimpleCV 库 http://simplecv.org/
特点：SimpleCV 将很多强大的开源计算机视觉库包含在一个便捷的 Python 包中。使用 SimpleCV，你可以在统一的框架下使用高级算法，例如特征检测、滤波和模式识别。使用者不用清楚一些细节，比如图像比特深度、文件格式、颜色空间、缓冲区管理、特征值还有矩阵和图像的存储。

37.Mahotas 库 https://pypi.org/project/mahotas/0.99/
特点：Mahotas 是一个 Python 的图像处理库，包含大量的图像处理算法，使用 C++ 实现的算法，处理性能相当好。

38.ITK 库 https://itk.org/
特点：ITK（ Insight Segmentation and Registration Toolkit）是美国国家卫生院下属的国立医学图书馆开发的一款医学图像处理软件包，是一个开源的、跨平台的影像分析扩展软件工具。

39.Pgmagick 库 https://pythonhosted.org/pgmagick/index.html
特点：Pgmagick 是 GraphicsMagick 库的一个基于 Python 的包装器。图像处理系统有时被称为图像处理的瑞士军刀。它提供了一个健壮而高效的工具和库集合，支持以88种主要格式（包括重要格式，如DPX、GIF、JPEG、JPEG-2000、PNG、PDF、PNM和TIFF）读取、写入和操作图像。

40.Pycairo 库 https://www.cairographics.org/pycairo/
特点：pyCairo 是一个 Python 的优秀2D图形渲染库。

41.Fastai库 https://pypi.org/project/fastai/
特点：计算机视觉、文本、表格数据、时间序列、协同过滤等常见深度学习应用提供单一一致界面的深度学习库。

42.Imutils库 https://pypi.org/project/imutils/
特点：imutils是在OPenCV基础上的一个封装,达到更为简结的调用OPenCV接口的目的,它可以轻松的实现图像的平移,旋转,缩放,骨架化等一系列的操作。

43.PyTorchCV库 https://pytorch-cn.readthedocs.io/zh/latest/
特点：TorchCV 支持图像分类、语义分割、目标检测、姿态检测、实例分割、生成对抗网络等任务中的多个常见模型。

<h3 id="pythonLibtopic-7">Python 生物/化学</h3>
45.BioPython 库 https://biopython-cn.readthedocs.io/
特点：Biopython 项目是旨在减少计算生物学中代码重复的开源项目之一，由国际开发人员协会创建。它包含表示生物序列和序列注释的类，并且能够读取和写入各种文件格式（FASTA，FASTQ，GenBank 和 Clustal 等），支持以程序化方式访问生物信息的在线数据库（例如，NCBI）。独立的模块扩展了 Biopython 的序列比对，蛋白质结构，群体遗传学，系统发育，序列基序和机器学习等功能。

46.DashBio 库 http://dash.plot.ly/dash-bio
特点：Dash Bio 是一个免费的开源 Python 库,用于生物信息学和药物开发应用。 

47.RDKit 库 http://www.rdkit.org/
特点：RDKit 是一个用于化学信息学的开源工具包，基于对化合物2D和3D分子操作，利用机器学习方法进行化合物描述符生成，fingerprint 生成，化合物结构相似性计算，2D和3D分子展示等。基于Python语言进行调取使用。


<h2>Python 爬虫 pyquery</h2>
在使用之前，请确保已经安装好qyquery库。安装教程如下所示：

<code>pip install pyquery</code>
<h3 id="pyquerytopic-0">初始化</h3>
和Beautiul Soup一样，在初始化pyquery的时候，也需要传入html文本来初始化一个pyquery对象。

初始化的时候一般有三种传入方式：传入字符串、传入URL、传入html文件。
<strong>字符串初始化</strong>

<code>html = '''
&lt;div&gt;
    &lt;ul&gt;
        &lt;li class="item-0"&gt;first-item&lt;/li&gt;
        &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item=-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
    &lt;/ul&gt;
&lt;/div&gt;
'''

from pyquery import PyQuery as pq

doc = pq(html)
print(doc)
print(type(doc))
print(doc('li'))</code>

先对上面的代码做简单的描述：

首先引入PyQuery对象，取名为pq。然后声明一个长HTML字符串，并将其当作参数传给PyQuery类，这样就成功的进行了初始化。

接下来将css选择器作为参数传入初始化对象，在这个示例中我们传入<code>li</code>节点，这样就可以选择所有的<code>li</code>节点.。
<strong>URL初始化</strong>

初始化对象的参数不仅可以是字符串，还可以是网页的URL，这时可以将URL作为参数传入初始化对象。

具体代码如下所示：

<code>from pyquery import PyQuery as pq

doc = pq('https://www.baidu.com', encoding='utf-8')
print(doc)
print(type(doc))
print(doc('title'))</code>

试着运行上面的代码你会发现，我们成功的获取到了百度的<code>title</code>节点和网页信息。

PyQuery对象会先请求这个URL，然后用得到的HTML内容完成初始化，这其实就相当于网页源代码以字符串的形式传递给初始化对象。

因此，还可以这样写代码：

<code>from pyquery import PyQuery as pq
import requests

url = 'https://www.baidu.com'
doc = pq(requests.get(url).content.decode('utf-8'))
print(doc)
print(type(doc))
print(doc('title'))</code>

运行结果与上面那段代码的运行结果是一致的。
<strong>文件初始化</strong>

除了传递URL以外还可以传递本地的文件名，此时只要传递本地文件名，此时将参数指定为filename即可。

具体代码如下所示：

<code>from pyquery import PyQuery as pq

doc = pq(filename='baidu.html')
print(doc)
print(type(doc))
print(doc('title'))</code>

以上三种初始化的方式都是可以的，当然最常用的初始化方式还是以字符串的形式传递。
<h3 id="pyquerytopic-1">基本CSS选择器</h3>
<code>html = '''
&lt;div id="container"&gt;
    &lt;ul class="list"&gt;
        &lt;li class="item-0"&gt;first-item&lt;/li&gt;
        &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item=-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
    &lt;/ul&gt;
&lt;/div&gt;
'''

from pyquery import PyQuery as pq

doc = pq(html)
print(doc('#container .list li'))
print(type(doc('#container .list li')))
</code>

初始化PyQuery对象之后，传入CSS选择器<code>#container .list li</code>将所有符合条件的节点输出，并且运行上面的代码之后你会发现它的类型依然还是PyQuery类型。
<h3 id="pyquerytopic-2">查找节点</h3>
下面介绍一些常用的查询函数，这些函数与jQuery函数的用法是完全相同的。
<strong>子节点</strong>

查找子节点时需要用到<code>find()</code>方法，并传入的参数是CSS选择器，以前面的html为例子。

<code>from pyquery import PyQuery as pq

doc = pq(html)
print(doc.find('li'))
print(type(doc.find('li')))</code>

调用<code>find()</code>方法，将节点名称<code>li</code>传入该方法，获取所有符合条件的内容。类型依然还是PyQuery。

当然我们还可以这样写：

<code>from pyquery import PyQuery as pq

doc = pq(html)
items = doc('.list')
print(type(items))
lis = items.find('li')
print(type(lis))
print(lis)</code>

首先先选取class为<code>list</code>的节点，然后调用<code>find()</code>方法，传入CSS选择器，选取内部的``li`节点，最后打印输出。

其实<code>find()</code>方法是查找所有的子孙节点，要获取所有的子节点可以调用<code>chirdren()</code>方法。具体代码如下所示：

<code>from pyquery import PyQuery as pq

doc = pq(html)
items = doc('.list')
lis = items.children()
print(lis)
print(type(lis))</code>

如果想要筛选子节点中符合条件的节点，可以向<code>chirdren()</code>方法传入CSS选择器。具体代码如下所示：

<code>from pyquery import PyQuery as pq

doc = pq(html)
items = doc('.list')
lis = items.children('.active')
print(lis)
print(type(lis))</code>

试着运行上面的代码你会发现，这里已经成功获取到了class为<code>active</code>的节点。
<strong>父节点</strong>

我们可以调用<code>parent()</code>方法来获取某个节点的父节点。

<code>html = '''
&lt;div id="container"&gt;
    &lt;ul class="list"&gt;
        &lt;li class="item-0"&gt;first-item&lt;/li&gt;
        &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item=-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
        &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
    &lt;/ul&gt;
&lt;/div&gt;
'''

from pyquery import PyQuery as pq

doc = pq(html)
items = doc('.list')
container = items.parent()
print(container)
print(type(container))</code>

先对上面的代码做简要的说明：

首先选取class为<code>list</code>的节点，然后再调用<code>parent()</code>方法得到其父节点，其类型依然还是PyQuery类型。

这里的父节点是直接父节点，但是如果要获取祖父节点，可以调用<code>parents()</code>方法。

<code>html = '''
&lt;div class="wrap"&gt;
    &lt;div id="container"&gt;
        &lt;ul class="list"&gt;
            &lt;li class="item-0"&gt;first-item&lt;/li&gt;
            &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item=-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
        &lt;/ul&gt;
    &lt;/div&gt;

&lt;/div&gt;

'''

from pyquery import PyQuery as pq

doc = pq(html)
items = doc('.list')
container = items.parents()
print(container)
print(type(container))</code>

运行上面的代应为码之后，你会发现这里输出的内容有四个，因为class为<code>list</code>节点的祖父节点有四个，分别是：container、wrap、body、html。在初始化对象的时候已经添加上了body和html节点。
<strong>兄弟节点</strong>

除了可以获取到父节点和子节点之外，还可以获取到兄弟节点。如果需要获取兄弟节点，可以调用<code>siblings()</code>方法。

具体代码如下所示：

<code>html = '''
&lt;div class="wrap"&gt;
    &lt;div id="container"&gt;
        &lt;ul class="list"&gt;
            &lt;li class="item-0"&gt;first-item&lt;/li&gt;
            &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
        &lt;/ul&gt;
    &lt;/div&gt;

&lt;/div&gt;

'''

from pyquery import PyQuery as pq

doc = pq(html)
items = doc('.list .item-0.active')
print(items.siblings())</code>

这里首先选取类为<code>.item-0.active</code>的节点，再调用<code>siblings()</code>方法获取到该节点的兄弟节点。

试着运行上面的代码，你会发现获取到其他四个兄弟节点。
<h3 id="pyquerytopic-3">遍历</h3>
通过上面的代码可以观察到，pyquery的选择结果可能是多个节点，也可能是单个节点，类型都是PyQuery类型，并没有向Beautiful Soup那样的列表。

对于单个节点来说，可以直接打印输出，也可以直接转成字符串。

<code>from pyquery import PyQuery as pq

doc = pq(html)
items = doc('.list .item-0.active')
print(items)
print(str(items))
print(type(items))</code>

对于多个节点，可以通过调用<code>item()</code>方法，将获取的内容转换成生成器类型，在通过遍历的方式输出。

具体代码如下所示：

<code>from pyquery import PyQuery as pq

doc = pq(html)
lis = doc('li').items()
print(lis)
for li in lis:
    print(li, type(li))</code>

运行上面的代码，你会发现输出变量<code>lis</code>的结果是生成器，因此可以遍历输出。
<h3 id="pyquerytopic-4">获取信息</h3>
一般来说，在网页里面我们需要获取的信息有两类：一类是文本内容，另一类是节点属性值。
<strong>获取属性</strong>

获取到某个PyQuery类型的节点之后，就可以通过<code>attr()</code>方法来获取属性。

具体代码如下所示：

<code>from pyquery import PyQuery as pq

doc = pq(html)
a = doc('.list .item-0.active a')
print(a.attr('href'))</code>

先获取class为<code>list</code>下面的class为<code>item-0 active</code>的节点下的<code>a</code>节点，这时变量<code>a</code>是PyQuery类型，再调用<code>attr()</code>方法并传入属性值<code>href</code>。

当然也可以通过调用attr属性来获取属性。

<code>print(a.attr.href)</code>

你会发现输出结果与上面的代码是一样的。

当然，我们也可以获取到所有<code>a</code>节点的属性，具体代码如下所示：

<code>html = '''
&lt;div class="wrap"&gt;
    &lt;div id="container"&gt;
        &lt;ul class="list"&gt;
            &lt;li class="item-0"&gt;first-item&lt;/li&gt;
            &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
        &lt;/ul&gt;
    &lt;/div&gt;

&lt;/div&gt;

'''

from pyquery import PyQuery as pq

doc = pq(html)
a = doc('a').items()
for item in a:
    print(item.attr('href'))</code>

但是如果代码这样写：

<code>from pyquery import PyQuery as pq

doc = pq(html)
a = doc('a')
print(a.attr('href'))</code>

运行上面的代码之后，你会发现只获取到第一个<code>a</code>节点的<code>href</code>属性。

所有这个是需要注意的地方！！
<strong>提取文本</strong>

提取文本与提取属性的逻辑是一样的，首先获取到class为PyQuery的节点，再调用<code>text()</code>方法获取文本。

首先来获取一个节点的文本内容。具体代码如下所示：

<code>html = '''
&lt;div class="wrap"&gt;
    &lt;div id="container"&gt;
        &lt;ul class="list"&gt;
            &lt;li class="item-0"&gt;first-item&lt;/li&gt;
            &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
        &lt;/ul&gt;
    &lt;/div&gt;

&lt;/div&gt;

'''

from pyquery import PyQuery as pq

doc = pq(html)
a = doc('.list .item-0.active a')
print(a.text())</code>

试着运行上面的代码你会发现成功获取<code>a</code>节点的文本内容。

接下来我们就来获取多个<code>li</code>节点的文本内容。

具体代码如下所示：

<code>html = '''
&lt;div class="wrap"&gt;
    &lt;div id="container"&gt;
        &lt;ul class="list"&gt;
            &lt;li class="item-0"&gt;first-item&lt;/li&gt;
            &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
        &lt;/ul&gt;
    &lt;/div&gt;

&lt;/div&gt;

'''

from pyquery import PyQuery as pq

doc = pq(html)
items = doc('li')
print(items.text())</code>

运行上面的代码，你会发现该代码成功获取到了所有节点名称为<code>li</code>的文本内容，中间用空格隔开。

如果你想要一个一个获取，那还是少不了生成器，具体代码如下所示：

<code>from pyquery import PyQuery as pq

doc = pq(html)
items = doc('li').items()
for item in items:
    print(item.text())</code>
<h3 id="pyquerytopic-5">节点操作</h3>
pyquery提供了一系列方法对节点进行动态修改，比如为某个节点添加一个class，移除某个节点，这些操作有时会为提取信息带来便利。
<strong>add_class和remove_class</strong>

<code>html = '''
&lt;div class="wrap"&gt;
    &lt;div id="container"&gt;
        &lt;ul class="list"&gt;
            &lt;li class="item-0"&gt;first-item&lt;/li&gt;
            &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
        &lt;/ul&gt;
    &lt;/div&gt;

&lt;/div&gt;

'''

from pyquery import PyQuery as pq

doc = pq(html)
li = doc('.list .item-0.active')
print(li)
li.remove_class('active')
print(li)
li.add_class('active')
print(li)</code>

运行结果如下所示：

<code>&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="" bold=""&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            
&lt;li class="item-0"&gt;&lt;a href="link3.html"&gt;&lt;span class="" bold=""&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            
&lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class="" bold=""&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;</code>

上面有三段输出内容，首先先获取一个<code>li</code>节点，然后再删除<code>active</code>类属性，第三段代码是添加<code>active</code>类属性。
<h3 id="pyquerytopic-6">伪类选择器</h3>
CSS选择器之所以强大，还有一个很重要的原因，那就是它可以支持多种多样的伪类选择器，例如选择第一个节点、最后一个节点、奇偶数节点、包含某一文本的节点。

<code>html = '''
&lt;div class="wrap"&gt;
    &lt;div id="container"&gt;
        &lt;ul class="list"&gt;
            &lt;li class="item-0"&gt;first-item&lt;/li&gt;
            &lt;li class="item-1"&gt;&lt;a href="link2.html"&gt;second item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0 active"&gt;&lt;a href="link3.html"&gt;&lt;span class=""bold&gt;third item&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-1 active"&gt;&lt;a href="link4.html"&gt;fourth item&lt;/a&gt;&lt;/li&gt;
            &lt;li class="item-0"&gt;&lt;a href="link5.html"&gt;fifth item&lt;/a&gt;&lt;/li&gt;        
        &lt;/ul&gt;
    &lt;/div&gt;

&lt;/div&gt;

'''

from pyquery import PyQuery as pq

doc = pq(html)
li = doc('li:first-child') # 第一个li节点
print(li)
li = doc('li:last-child') # 最后一个li节点
print(li)
li = doc('li:nth-child(2)') # 第二个位置的li节点
print(li)
li = doc('li:gt(2)') # 第三个之后的li节点
print(li)
li = doc('li:nth-child(2n)') # 偶数位置的li节点
print(li)
li = doc('li:contains(second)') # 包含second文本的li节点
print(li)</code>

至此，关于pyquery的所有内容都讲完了，接下来就进入实战了，光说不练肯定是不行的，只有通过实战才能正真学会刚刚所学会的知识。
<h1>实战</h1>
本次我带来的实战内容是爬取猫眼电影的TOP100的排行榜及评分情况。
<h3 id="pyquerytopic-7">准备</h3>
<strong>工欲善其事，必先利其器</strong>。首先，我们要准备几个库：pyquery、requests。

安装过程如下：

<code>pip install pyquery
pip install requests</code>
<h3 id="pyquerytopic-8">前言</h3>
寒假又到来了，小伙伴们准备怎么过呢？

在大冬天里，躲在被窝刷剧是最舒服的，好怀念当年的生活啊~

所以今天就来爬取猫眼电影的TOP100排行榜，为冬眠做好准备。

网站链接：

<code>https://maoyan.com/board/4</code>
<h3 id="pyquerytopic-9">需求分析与功能实现</h3><h3 id="pyquerytopic-10">获取电影名称</h3>
需要的信息藏在class为<code>board-item-main</code>的<code>div</code>标签下的<code>a</code>标签内，因此我们需要获取其文本信息。

核心代码如下所示：

<code>movie_name = doc('.board-item-main .board-item-content .movie-item-info p a').text()</code>
<h3 id="pyquerytopic-11">获取主演信息</h3>

从上图可以看到，主演的信息位于<code>board-item-main</code>的子节点<code>p</code>标签内，因此我们可以这样获取主演信息。

核心代码如下所示：

<code>p = doc('.board-item-main .board-item-content .movie-item-info')
star = p.children('.star').text()</code>
<h3 id="pyquerytopic-12">获取上映时间</h3>
从前面的图片也可以看到，上映时间的信息与主演信息的节点是兄弟节点，所以我们可以这样写代码。

<code>p = doc('.board-item-main .board-item-content .movie-item-info')
time = p.children('.releasetime').text()</code>
<h3 id="pyquerytopic-13">获取评分</h3>
要获取每一部电影的评分相对要复杂一些，为什么这样说呢？我们来看下面的图片。

从上面的图片可以看到，整数部分与小数部分被分割了成了两部分。因此需要分别获取两部分的数据，在进行拼接即可。

核心代码如下所示：

<code>score1 = doc('.board-item-main .movie-item-number.score-num .integer').text().split()
score2 = doc('.board-item-main .movie-item-number.score-num .fraction').text().split()
score = [score1[i]+score2[i] for i in range(0, len(score1))]</code>
<h3 id="pyquerytopic-14">关于翻页</h3>
打开网页的时候，你会发现榜单一共有10页，每一页的URL都不相同，那该怎么办呢？总不能每一次都手动更换URL地址吧。

先来观察前四页的URL地址吧。

<code>https://maoyan.com/board/4 # 第一页
https://maoyan.com/board/4?offset=10 # 第二页
https://maoyan.com/board/4?offset=20 # 第三页
https://maoyan.com/board/4?offset=30 # 第四页</code>

观察完之后，我想不需要我过多叙述它的特点了吧。

接下来我们就可以构建每一页的URL地址了，具体代码如下所示：

<code>    def get_url(self, page):
        url = f'https://maoyan.com/board/4?offset={page}'
        return url
    if __name__ == '__main__':
    maoyan = MaoYan()
    for page in range(10):
        url = maoyan.get_url(page*10)</code>


<h2>反爬虫</h2>
<a href="https://cloud.tencent.com/developer/column/5263" class="whitebut ">未闻Code</a>
<a href="https://www.gushiciku.cn/pla/未聞Code" class="whitebut ">未聞Code</a>
<a href="https://www.gushiciku.cn/pl/gnve/zh-hk" class="whitebut ">逃不掉被反爬蟲</a>
<h3>一、为什么要反爬虫</h3>
1、爬虫占总PV比例较高，这样浪费钱（尤其是三月份爬虫）。

三月份爬虫是个什么概念呢？
每年的三月份我们会迎接一次爬虫高峰期。

最初我们百思不得其解。
直到有一次，四月份的时候，我们删除了一个url，然后有个爬虫不断的爬取url，导致大量报错，测试开始找我们麻烦。
我们只好特意为这个爬虫发布了一次站点，把删除的url又恢复回去了。

但是当时我们的一个组员表示很不服，说，我们不能干掉爬虫，也就罢了，还要专门为它发布，这实在是太没面子了。
于是出了个主意，说：url可以上，但是，绝对不给真实数据。

于是我们就把一个静态文件发布上去了。
报错停止了，爬虫没有停止，也就是说对方并不知道东西都是假的。
这个事情给了我们一个很大的启示，也直接成了我们反爬虫技术的核心：变更。

后来有个学生来申请实习。
我们看了简历发现她爬过携程。
后来面试的时候确认了下，果然她就是四月份害我们发布的那个家伙。
不过因为是个妹子，技术也不错，后来就被我们招安了。
现在已经快正式入职了。

后来我们一起讨论的时候，她提到了，有大量的硕士在写论文的时候会选择爬取OTA数据，并进行舆情分析。
因为五月份交论文，所以嘛，大家都是读过书的，你们懂的，前期各种DotA，LOL，到了三月份了，来不及了，赶紧抓数据，四月份分析一下，五月份交论文。

就是这么个节奏。

<strong>2、公司可免费查询的资源被批量抓走，丧失竞争力，这样少赚钱。</strong>
OTA的价格可以在非登录状态下直接被查询，这个是底线。
如果强制登陆，那么可以通过封杀账号的方式让对方付出代价，这也是很多网站的做法。
但是我们不能强制对方登录。
那么如果没有反爬虫，对方就可以批量复制我们的信息，我们的竞争力就会大大减少。

竞争对手可以抓到我们的价格，时间长了用户就会知道，只需要去竞争对手那里就可以了，没必要来携程。
这对我们是不利的。

<strong>3、爬虫是否涉嫌违法？如果是的话，是否可以起诉要求赔偿？这样可以赚钱。</strong>
这个问题我特意咨询了法务，最后发现这在国内还是个擦边球，就是有可能可以起诉成功，也可能完全无效。
所以还是需要用技术手段来做最后的保障。

<h3>二、反什么样的爬虫</h3>
<strong>1、十分低级的应届毕业生</strong>
开头我们提到的三月份爬虫，就是一个十分明显的例子。
应届毕业生的爬虫通常简单粗暴，根本不管服务器压力，加上人数不可预测，很容易把站点弄挂。

顺便说下，通过爬携程来获取offer这条路已经行不通了。
因为我们都知道，第一个说漂亮女人像花的人，是天才。
而第二个。。。你们懂的吧？

<strong>2、十分低级的创业小公司</strong>
现在的创业公司越来越多，也不知道是被谁忽悠的然后大家创业了发现不知道干什么好，觉得大数据比较热，就开始做大数据。

分析程序全写差不多了，发现自己手头没有数据。

怎么办？写爬虫爬啊。
于是就有了不计其数的小爬虫，出于公司生死存亡的考虑，不断爬取数据。

<strong>3、不小心写错了没人去停止的失控小爬虫</strong>
携程上的点评有的时候可能高达60%的访问量是爬虫。
我们已经选择直接封锁了，它们依然孜孜不倦地爬取。

什么意思呢？
就是说，他们根本爬不到任何数据，除了http code是200以外，一切都是不对的，可是爬虫依然不停止这个很可能就是一些托管在某些服务器上的小爬虫，已经无人认领了，依然在辛勤地工作着。

<strong>4、成型的商业对手</strong>
这个是最大的对手，他们有技术，有钱，要什么有什么，如果和你死磕，你就只能硬着头皮和他死磕。

<strong>5、抽风的搜索引擎</strong>
大家不要以为搜索引擎都是好人，他们也有抽风的时候，而且一抽风就会导致服务器性能下降，请求量跟网络攻击没什么区别。

<h3>三、什么是爬虫和反爬虫</h3>
因为反爬虫暂时是个较新的领域，因此有些定义要自己下。
我们内部定义是这样的：
<li>爬虫：使用任何技术手段，批量获取网站信息的一种方式。关键在于批量。</li>
<li>反爬虫：使用任何技术手段，阻止别人批量获取自己网站信息的一种方式。
关键也在于批量。</li>
<li>误伤：在反爬虫的过程中，错误的将普通用户识别为爬虫。
误伤率高的反爬虫策略，效果再好也不能用。</li>
<li>拦截：成功地阻止爬虫访问。这里会有拦截率的概念。
通常来说，拦截率越高的反爬虫策略，误伤的可能性就越高。因此需要做个权衡。</li>
<li>资源：机器成本与人力成本的总和。</li>
这里要切记，人力成本也是资源，而且比机器更重要。
因为，根据摩尔定律，机器越来越便宜。
而根据IT行业的发展趋势，程序员工资越来越贵。
因此，让对方加班才是王道，机器成本并不是特别值钱。

<h3>四、知己知彼：如何编写简单爬虫</h3>
要想做反爬虫，我们首先需要知道如何写个简单的爬虫。

目前网络上搜索到的爬虫资料十分有限，通常都只是给一段python代码。
python是一门很好的语言，但是用来针对有反爬虫措施的站点做爬虫，真的不是最优选择。

更讽刺的是，通常搜到的python爬虫代码都会使用一个lynx的user-agent。
你们应该怎么处理这个user-agent，就不用我来说了吧？

通常编写爬虫需要经过这么几个过程：
<li>分析页面请求格式</li>
<li>创建合适的http请求</li>
<li>批量发送http请求，获取数据</li>
举个例子，直接查看携程生产url。
在详情页点击“确定”按钮，会加载价格。
假设价格是你想要的，那么抓出网络请求之后，哪个请求才是你想要的结果呢？

答案出乎意料的简单，你只需要用根据网络传输数据量进行倒序排列即可。
因为其他的迷惑性的url再多再复杂，开发人员也不会舍得加数据量给他。

<h3>五、知己知彼：如何编写高级爬虫</h3>
那么爬虫进阶应该如何做呢？
通常所谓的进阶有以下几种：

<strong>分布式</strong>
通常会有一些教材告诉你，为了爬取效率，需要把爬虫分布式部署到多台机器上。
这完全是骗人的。
分布式唯一的作用是：防止对方封IP。
封IP是终极手段，效果非常好，当然，误伤起用户也是非常爽的。

<strong>模拟JavaScript</strong>
有些教程会说，模拟javascript，抓取动态网页，是进阶技巧。
但是其实这只是个很简单的功能。
因为，如果对方没有反爬虫，你完全可以直接抓ajax本身，而无需关心js怎么处理的。
如果对方有反爬虫，那么javascript必然十分复杂，重点在于分析，而不仅仅是简单的模拟。

换句话说：这应该是基本功。

<strong>PhantomJs</strong>
这个是一个极端的例子。
这个东西本意是用来做自动测试的，结果因为效果很好，很多人拿来做爬虫。
但是这个东西有个硬伤，就是：效率。
此外PhantomJs也是可以被抓到的，出于多方面原因，这里暂时不讲。
　

<h3>六、不同级别爬虫的优缺点</h3>
越是低级的爬虫，越容易被封锁，但是性能好，成本低。
越是高级的爬虫，越难被封锁，但是性能低，成本也越高。

当成本高到一定程度，我们就可以无需再对爬虫进行封锁。
经济学上有个词叫边际效应。
付出成本高到一定程度，收益就不是很多了。

那么如果对双方资源进行对比，我们就会发现，无条件跟对方死磕，是不划算的。
应该有个黄金点，超过这个点，那就让它爬好了。
毕竟我们反爬虫不是为了面子，而是为了商业因素。

<h3>七、如何设计一个反爬虫系统(常规架构)</h3>
有个朋友曾经给过我这样一个架构：
1、对请求进行预处理，便于识别；
2、识别是否是爬虫；
3、针对识别结果，进行适当的处理；

当时我觉得，听起来似乎很有道理，不愧是架构，想法就是和我们不一样。
后来我们真正做起来反应过来不对了。
因为：

如果能识别出爬虫，哪还有那么多废话？
想怎么搞它就怎么搞它。
如果识别不出来爬虫，你对谁做适当处理？

三句话里面有两句是废话，只有一句有用的，而且还没给出具体实施方式。
那么：这种架构(师)有什么用？

因为当前存在一个架构师崇拜问题，所以很多创业小公司以架构师名义招开发。
给出的title都是：初级架构师，架构师本身就是个高级岗位，为什么会有初级架构。
这就相当于：初级将军/初级司令。

最后去了公司，发现十个人，一个CTO，九个架构师，而且可能你自己是初级架构师，其他人还是高级架构师。
不过初级架构师还不算坑爹了，有些小创业公司还招CTO做开发呢。

<strong>传统反爬虫手段</strong>
1、后台对访问进行统计，如果单个IP访问超过阈值，予以封锁。
这个虽然效果还不错，但是其实有两个缺陷，一个是非常容易误伤普通用户，另一个就是，IP其实不值钱，几十块钱甚至有可能买到几十万个IP。
所以总体来说是比较亏的。
不过针对三月份呢爬虫，这点还是非常有用的。

2、后台对访问进行统计，如果单个session访问超过阈值，予以封锁。
这个看起来更高级了一些，但是其实效果更差，因为session完全不值钱，重新申请一个就可以了。

3、后台对访问进行统计，如果单个userAgent访问超过阈值，予以封锁。
这个是大招，类似于抗生素之类的，效果出奇的好，但是杀伤力过大，误伤非常严重，使用的时候要非常小心。
至今为止我们也就只短暂封杀过mac下的火狐。

4、以上的组合
组合起来能力变大，误伤率下降，在遇到低级爬虫的时候，还是比较好用的。

由以上我们可以看出，其实爬虫反爬虫是个游戏，RMB玩家才最牛逼。
因为上面提到的方法，效果均一般，所以还是用JavaScript比较靠谱。

也许有人会说：javascript做的话，不是可以跳掉前端逻辑，直接拉服务吗？
怎么会靠谱呢？
因为啊，我是一个标题党啊。
JavaScript不仅仅是做前端。
跳过前端不等于跳过JavaScript。
也就是说：我们的服务器是nodejs做的。

<blockquote>思考题：我们写代码的时候，最怕碰到什么代码？
什么代码不好调试？

</blockquote>
<strong>eval</strong>
eval已经臭名昭著了，它效率低下，可读性糟糕。
正是我们所需要的。

<strong>goto</strong>
js对goto支持并不好，因此需要自己实现goto。

<strong>混淆</strong>
目前的minify工具通常是minify成abcd之类简单的名字，这不符合我们的要求。
我们可以minify成更好用的，比如阿拉伯语。
为什么呢？
 因为阿拉伯语有的时候是从左向右写，有的时候是从右向左写，还有的时候是从下向上写。
除非对方雇个阿拉伯程序员，否则非头疼死不可。

<strong>不稳定代码</strong>
什么bug不容易修？
不容易重现的bug不好修。
因此，我们的代码要充满不确定性，每次都不一样。

<strong>代码演示</strong>
下载代码本身，可以更容易理解。
这里简短介绍下思路：
<li>纯JAVASCRIPT反爬虫DEMO，通过更改连接地址，来让对方抓取到错误价格。
这种方法简单，但是如果对方针对性的来查看，十分容易被发现。</li>
<li>纯JAVASCRIPT反爬虫DEMO，更改key。
这种做法简单，不容易被发现。
但是可以通过有意爬取错误价格的方式来实现。</li>
<li>纯JAVASCRIPT反爬虫DEMO，更改动态key。
这种方法可以让更改key的代价变为0，因此代价更低。</li>
<li>纯JAVASCRIPT反爬虫DEMO，十分复杂的更改key。
这种方法，可以让对方很难分析，如果加了后续提到的浏览器检测，更难被爬取。</li>
到此为止。

前面我们提到了边际效应，就是说，可以到此为止了。
后续再投入人力就得不偿失了。
除非有专门的对手与你死磕。
不过这个时候就是为了尊严而战，不是为了商业因素了。

<strong>浏览器检测</strong>
针对不同的浏览器，我们的检测方式是不一样的。
<li>IE 检测bug；</li>
<li>FF 检测对标准的严格程度；</li>
<li>Chrome 检测强大特性。</li>
<h3>八、我抓到你了——然后该怎么办</h3>
不会引发生产事件——直接拦截

可能引发生产事件——给假数据(也叫投毒)

此外还有一些发散性的思路。
例如是不是可以在响应里做SQL注入？
毕竟是对方先动的手。
不过这个问题法务没有给具体回复，也不容易和她解释。
因此暂时只是设想而已。

<strong>1、技术压制</strong>
我们都知道，DotA AI里有个de命令，当AI被击杀后，它获取经验的倍数会提升。
因此，前期杀AI太多，AI会一身神装，无法击杀。

正确的做法是，压制对方等级，但是不击杀。
反爬虫也是一样的，不要一开始就搞太过分，逼人家和你死磕。

<strong>2、心理战</strong>
挑衅、怜悯、嘲讽、猥琐。

以上略过不提，大家领会精神即可。

<strong>3、放水</strong>
这个可能是是最高境界了。

程序员都不容易，做爬虫的尤其不容易。
可怜可怜他们给他们一小口饭吃吧。
没准过几天你就因为反爬虫做得好，改行做爬虫了。

<h2>Python simple message box</h2>
import ctypes  # An included library with Python install.   
ctypes.windll.user32.MessageBoxW(0, "Your text", "Your title", 1)

Or define a function (Mbox) like so:
import ctypes  # An included library with Python install.
def Mbox(title, text, style):
    return ctypes.windll.user32.MessageBoxW(0, text, title, style)
Mbox('Your title', 'Your text', 1)

Note: edited to use MessageBoxW instead of MessageBoxA

Note the styles are as follows:

##  Styles:
##  0 : OK
##  1 : OK | Cancel
##  2 : Abort | Retry | Ignore
##  3 : Yes | No | Cancel
##  4 : Yes | No
##  5 : Retry | Cancel 
##  6 : Cancel | Try Again | Continue


<h2>Importing EasyGui</h2>
In order to use EasyGui, you must import it. The simplest import statement is:

import easygui
If you use this form, then to access the EasyGui functions, you must prefix them with the name “easygui”, this way:
easygui.msgbox(...)

One alternative is to import EasyGui this way:
from easygui import *
This makes it easier to invoke the EasyGui functions; you won’t have to prefix the function names with “easygui”. You can just code something like this:
msgbox(...)

A third alternative is to use something like the following import statement:
import easygui as g
This allows you to keep the EasyGui namespace separate with a minimal amount of typing. You can access easgui functions like this:
g.msgbox(...)
This third alterative is actually the best way to do it once you get used to python and easygui.

<h3>Using EasyGui</h3>
Once your module has imported EasyGui, GUI operations are a simple a matter of invoking EasyGui functions with a few parameters. For example, using EasyGui, the famous “Hello, world!” program looks like this:

from easygui import *
msgbox("Hello, world!")
To see a demo of what EasyGui output looks like, invoke easyGui from the command line, this way:

python easygui.py
To see examples of code that invokes the EasyGui functions, look at the demonstration code at the end of easygui.py.

<h3>Default arguments for EasyGui functions</h3>
For all of the boxes, the first two arguments are for message and title, in that order. In some cases, this might not be the most user-friendly arrangement (for example, the dialogs for getting directory and filenames ignore the message argument), but I felt that keeping this consistent across all widgets was a consideration that is more important.

Most arguments to EasyGui functions have defaults.
Almost all of the boxes display a message and a title. The title defaults to the empty string, and the message usually has a simple default.

This makes it is possible to specify as few arguments as you need in order to get the result that you want. For instance, the title argument to msgbox is optional, so you can call msgbox specifying only a message, this way:

msgbox("Danger, Will Robinson!")
or specifying a message and a title, this way:

msgbox("Danger, Will Robinson!", "Warning!")
On the various types of buttonbox, the default message is “Shall I continue?”, so you can (if you wish) invoke them without arguments at all. Here we invoke ccbox (the close/cancel box, which returns a boolean value) without any arguments at all:

if ccbox():
    pass  # user chose to continue else:
    return      # user chose to cancel


<h3>Using keyword arguments when calling EasyGui functions</h3>
It is possible to use keyword arguments when calling EasyGui functions.

Suppose for instance that you wanted to use a buttonbox, but
(for whatever reason) did not want to specify the title (second) positional argument. You could still specify the choices argument (the third argument)
using a keyword, this way:

choices = ["Yes","No","Only on Friday"]
reply = choicebox("Do you like to eat fish?", choices=choices)


<h3>Using buttonboxes</h3>
There are a number of functions built on top of buttonbox() for common needs.
<h3>msgbox</h3>
msgbox displays a message and offers an OK button. You can send whatever message you want, along with whatever title you want. You can even over-ride the default text of “OK” on the button if you wish. Here is the signature of the msgbox function:

def msgbox(msg="(Your message goes here)", title=", ok_button="OK"):
    ....
The clearest way to over-ride the button text is to do it with a keyword argument, like this:

msgbox("Backup complete!", ok_button="Good job!")
Here are a couple of examples:

msgbox("Hello, world!")
<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_msgbox.png" />
msg = "Do you want to continue?"
title = "Please Confirm"
if ccbox(msg, title):     # show a Continue/Cancel dialog
    pass  # user chose Continue else:  # user chose Cancel
    sys.exit(0)
<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_ccbox.png" />
<h3>ccbox</h3>
ccbox offers a choice of Continue and Cancel, and returns either True (for continue) or False (for cancel).

<h3>ynbox</h3>
ynbox offers a choice of Yes and No, and returns either True of False.

<h3>buttonbox</h3>
To specify your own set of buttons in a buttonbox, use the buttonbox() function.

The buttonbox can be used to display a set of buttons of your choice. When the user clicks on a button, buttonbox() returns the text of the choice. If the user cancels or closes the buttonbox, the default choice (the first choice) is returned.

buttonbox displays a message, a title, and a set of buttons. Returns the text of the button that the user selected.

<h3>indexbox</h3>
indexbox displays a message, a title, and a set of buttons. Returns the index of the user’s choice. For example, if you invoked index box with three choices (A, B, C), indexbox would return 0 if the user picked A, 1 if he picked B, and 2 if he picked C.

<h3>boolbox</h3>
boolbox (boolean box) displays a message, a title, and a set of buttons. Returns returns 1 if the first button is chosen. Otherwise returns 0.

Here is a simple example of a boolbox():

message = "What does she say?"
title = "
if boolbox(message, title, ["She loves me", "She loves me not"]):
    sendher("Flowers") # This is just a sample function that you might write.
else:
    pass

<h3>How to show an image in a buttonbox</h3>
<dl class="docutils">
<dt>When you invoke the buttonbox function (or other functions that display a button box, such as msgbox, indexbox, ynbox,</dt>
<dd>etc.), you can specify the keyword argument image=xxx where xxx is the filename of an image.  The file can be .gif.</dd>
</dl>
Usually, you can use other image formats such as .png.
Note

The types of files supported depends on how you installed python.  If other formats don’t work, you may need to install the PIL library.
If an image argument is specified, the image file will be displayed after the message.

Here is some sample code from EasyGui’s demonstration routine:

image = "python_and_check_logo.gif"
msg = "Do you like this picture?"
choices = ["Yes","No","No opinion"]
reply = buttonbox(msg, image=image, choices=choices)
If you click on one of the buttons on the bottom, its value will be returned in ‘reply’.  You may also click on the image.
In that case, the image filename is returned.

<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_buttonbox_with_image.png" />
<h3>Letting the user select from a list of choices</h3>

<h3>choicebox</h3>
Buttonboxes are good for offering the user a small selection of short choices. But if there are many choices, or the text of the choices is long, then a better strategy is to present them as a list.

choicebox provides a way for a user to select from a list of choices. The choices are specified in a sequence (a tuple or a list). The choices will be given a case-insensitive sort before they are presented.

The keyboard can be used to select an element of the list.

Pressing “g” on the keyboard, for example, will jump the selection to the first element beginning with “g”. Pressing “g” again, will jump the cursor to the next element beginning with “g”. At the end of the elements beginning with “g”, pressing “g” again will cause the selection to wrap around to the beginning of the list and jump to the first element beginning with “g”.

If there is no element beginning with “g”, then the last element that occurs before the position where “g” would occur is selected. If there is no element before “g”, then the first element in the list is selected:

msg ="What is your favorite flavor?"
title = "Ice Cream Survey"
choices = ["Vanilla", "Chocolate", "Strawberry", "Rocky Road"]
choice = choicebox(msg, title, choices)
<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_choicebox_icecream.png" />
Another example of a choicebox:

<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_choicebox.png" />
<h3>multchoicebox</h3>
The multchoicebox() function provides a way for a user to select from a list of choices. The interface looks just like the choicebox, but the user may select zero, one, or multiple choices.

The choices are specified in a sequence (a tuple or a list). The choices will be given a case-insensitive sort before they are presented.

<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_multchoicebox.png" />

<h3>Letting the user enter information</h3>

<h3>enterbox</h3>
enterbox is a simple way of getting a string from the user

<h3>integerbox</h3>
integerbox is a simple way of getting an integer from the user.

<h3>multenterbox</h3>
multenterbox is a simple way of showing multiple enterboxes on a single screen.

<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_multenterbox_vista.png" />
In the multenterbox:

<blockquote>
<ul class="simple">
<li>If there are fewer values than names, the list of values is padded with empty strings until the number of values is the same as the number of names.</li>
<li>If there are more values than names, the list of values is truncated so that there are as many values as names.</li>
</ul>
</div></blockquote>
Returns a list of the values of the fields, or None if the user cancels the operation.

Here is some example code, that shows how values returned from multenterbox can be checked for validity before they are accepted:

from __future__ import print_function msg = "Enter your personal information"
title = "Credit Card Application"
fieldNames = ["Name", "Street Address", "City", "State", "ZipCode"]
fieldValues = multenterbox(msg, title, fieldNames)
if fieldValues is None:
    sys.exit(0)
# make sure that none of the fields were left blank while 1:
    errmsg = "
    for i, name in enumerate(fieldNames):
        if fieldValues[i].strip() == ":
          errmsg += "{} is a required field.\n\n".format(name)
    if errmsg == ":
        break # no problems found
    fieldValues = multenterbox(errmsg, title, fieldNames, fieldValues)
    if fieldValues is None:
        break print("Reply was:{}".format(fieldValues))

Note

The first line ‘from __future__’ is only necessary if you are using Python 2.*, and is only needed for this demo.

<h3>Letting the user enter password information</h3>

<h3>passwordbox</h3>
A passwordbox box is like an enterbox, but used for entering passwords. The text is masked as it is typed in.

<h3>multpasswordbox</h3>
multpasswordbox has the same interface as multenterbox, but when it is displayed, the last of the fields is assumed to be a password, and is masked with asterisks.

<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_passwordbox.png" />

<h3>Displaying text</h3>
EasyGui provides functions for displaying text.
<h3>textbox</h3>
The textbox() function displays text in a proportional font. The text will word-wrap.

<h3>codebox</h3>
The codebox() function displays text in a monospaced font and does not wrap.

<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_codebox_vista.png" />
Note that you can pass codebox() and textbox() either a string or a list of strings. A list of strings will be converted to text before being displayed. This means that you can use these functions to display the contents of a file this way:

import os filename = os.path.normcase("c:/autoexec.bat")
f = open(filename, "r")
text = f.readlines()
f.close()
codebox("Contents of file " + filename, "Show File Contents", text)

<h3>Working with files</h3>
A common need is to ask the user for a filename or for a directory. EasyGui provides a few basic functions for allowing a user to navigate through the file system and choose a directory or a file. (These functions are wrappers around widgets and classes in lib-tk.)

Note that in the current version of EasyGui, the startpos argument is not supported.
<h3>diropenbox</h3>
diropenbox returns the name of a directory

<h3>fileopenbox</h3>
fileopenbox returns the name of a file

<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_fileopenbox_vista.png" />
<h3>filesavebox</h3>
filesavebox returns the name of a file


<h3>Remembering User Settings</h3>

<h3>EgStore</h3>
A common need is to ask the user for some setting, and then to “persist it”, or store it on disk, so that the next time the user uses your application, you can remember his previous setting.

In order to make the process of storing and restoring user settings, EasyGui provides a class called EgStore. In order to remember some settings, your application must define a class (let’s call it Settings, although you can call it anything you want) that inherits from EgStore.

Your application must also create an object of that class (let’s call the object settings).

The constructor (the __init__ method) of the Settings class can initialize all of the values that you wish to remember.

Once you have done this, you can remember the settings simply by assigning values to instance variables in the settings object, and use the settings.store() method to persist the settings object to disk.

Here is an example of code using the Settings class:

from easygui import EgStore

# -----------------------------------------------------------------------
# define a class named Settings as a subclass of EgStore
# -----------------------------------------------------------------------
class Settings(EgStore):

    def __init__(self, filename):  # filename is required
        # -------------------------------------------------
        # Specify default/initial values for variables that
        # this particular application wants to remember.
        # -------------------------------------------------
        self.userId = "
        self.targetServer = "

        # -------------------------------------------------
        # For subclasses of EgStore, these must be
        # the last two statements in  __init__
        # -------------------------------------------------
        self.filename = filename  # this is required
        self.restore()

# Create the settings object.
# If the settingsFile exists, this will restore its values
# from the settingsFile.
# create "settings", a persistent Settings object
# Note that the "filename" argument is required.
# The directory for the persistent file must already exist.

settingsFilename = "settings.txt"
settings = Settings(settingsFilename)

# Now use the settings object.
# Initialize the "user" and "server" variables
# In a real application, we&#39;d probably have the user enter them via enterbox user    = "obama_barak"
server  = "whitehouse1"

# Save the variables as attributes of the "settings" object settings.userId = user settings.targetServer = server settings.store()    # persist the settings print("\nInitial settings")
print settings

# Run code that gets a new value for userId
# then persist the settings with the new value user    = "biden_joe"
settings.userId = user settings.store()
print("\nSettings after modification")
print settings

# Delete setting variable del settings.userId print("\nSettings after deletion of userId")
print settings
Here is an example of code using a dedicated function to create the Settings class:

from easygui import read_or_create_settings

# Create the settings object.
settings = read_or_create_settings(&#39;settings1.txt&#39;)

# Save the variables as attributes of the "settings" object settings.userId = "obama_barak"
settings.targetServer = "whitehouse1"
settings.store()    # persist the settings print("\nInitial settings")
print settings

# Run code that gets a new value for userId
# then persist the settings with the new value user    = "biden_joe"
settings.userId = user settings.store()
print("\nSettings after modification")
print settings

# Delete setting variable del settings.userId print("\nSettings after deletion of userId")
print settings

<h3>Trapping Exceptions</h3>

<h3>exceptionbox</h3>
Sometimes exceptions are raised… even in EasyGui applications. Depending on how you run your application, the stack trace might be thrown away, or written to stdout while your application crashes.

EasyGui provides a better way of handling exceptions via exceptionbox. Exceptionbox displays the stack trace in a codebox and may allow you to continue processing.

Exceptionbox is easy to use. Here is a code example:

try:
    someFunction()  # this may raise an exception except:
    exceptionbox()
<img class="lazy" src="https://easygui.readthedocs.io/en/latest/_images/screenshot_exceptionbox_vista.png" />

<h2>Create a package for Android</h2>
You can create a package for android using the <a href="https://github.com/kivy/python-for-android">python-for-android</a> project. 
This page explains how to download and use it directly on your own machine (see Packaging with python-for-android) or use the Buildozer tool to automate the entire process. 
You can also see Packaging your application for the Kivy Launcher to run kivy programs without compiling them.

For new users, we recommend using Buildozer as the easiest way to make a full APK. 
You can also run your Kivy app without a compilation step with the Kivy Launcher app.

Kivy applications can be released on an Android market such as the Play store, with a few extra steps to create a fully signed APK.

The Kivy project includes tools for accessing Android APIs to accomplish vibration, sensor access, texting etc. 
These, along with information on debugging on the device, are documented at the
<a href="https://kivy.org/doc/stable/guide/android.html">main Android page</a>.

<h3>Buildozer</h3>
Buildozer is a tool that automates the entire build process. 
It downloads and sets up all the prequisites for python-for-android,
including the android SDK and NDK, then builds an apk that can be automatically pushed to the device.

Buildozer currently works only in Linux, and is a beta release, but it already works well and can significantly simplify the apk build.

You can get buildozer at <a href="https://github.com/kivy/buildozer">https://github.com/kivy/buildozer</a>:

git clone https://github.com/kivy/buildozer.git cd buildozer sudo python setup.py install

This will install buildozer in your system. 
Afterwards, navigate to your project directory and run:

buildozer init

This creates a <cite>buildozer.spec</cite> file controlling your build configuration. 
You should edit it appropriately with your app name etc. 
You can set variables to control most or all of the parameters passed to python-for-android.

Install buildozer’s <a href="https://buildozer.readthedocs.io/en/latest/installation.html#targeting-android">dependencies</a>.

Finally, plug in your android device and run:

buildozer android debug deploy run

to build, push and automatically run the apk on your device.

Buildozer has many available options and tools to help you, the steps above are just the simplest way to build and run your APK. 
The full documentation is available <a href="http://buildozer.readthedocs.org/en/latest/">here</a>. 
You can also check the Buildozer README at <a href="https://github.com/kivy/buildozer">https://github.com/kivy/buildozer</a>.

<h3>Packaging with python-for-android</h3>
You can also package directly with python-for-android, which can give you more control but requires you to manually download parts of the Android toolchain.

See the <a href="https://python-for-android.readthedocs.io/en/latest/quickstart/">python-for-android documentation</a>
for full details.

<h3>Packaging your application for the Kivy Launcher</h3>
The <a href="https://play.google.com/store/apps/details?id=org.kivy.pygame&amp;hl=en">Kivy launcher</a>
is an Android application that runs any Kivy examples stored on your SD Card.
To install the Kivy launcher, you must:

Go to the <a href="https://market.android.com/details?id=org.kivy.pygame">Kivy Launcher page</a>
on the Google Play Store

Click on Install

Select your phone… And you’re done!

If you don’t have access to the Google Play Store on your phone/tablet,
you can download and install the APK manually from  <a href="http://kivy.org/#download">http://kivy.org/#download</a>.

Once the Kivy launcher is installed, you can put your Kivy applications in the Kivy directory in your external storage directory
(often available at /sdcard even in devices where this memory is internal), e.g.

/sdcard/kivy/&lt;yourapplication&gt;

&lt;yourapplication&gt; should be a directory containing:

# Your main application file:
main.py
# Some info Kivy requires about your app on android:
android.txt

The file <cite>android.txt</cite> must contain:

title=&lt;Application Title&gt;
author=&lt;Your Name&gt;
orientation=&lt;portrait|landscape&gt;

These options are just a very basic configuration. 
If you create your own APK using the tools above, you can choose many other settings.

<h3>Installation of Examples</h3>
Kivy comes with many examples, and these can be a great place to start trying the Kivy launcher. 
You can run them as below:

#. 
Download the `Kivy demos for Android &lt;https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/kivy/kivydemo-for-android.zip&gt;`_
#. 
Unzip the contents and go to the folder `kivydemo-for-android`
#. 
Copy all the the subfolders here to

/sdcard/kivy

Run the launcher and select one of the Pictures, Showcase, Touchtracer, Cymunk or other demos…

<h3>Release on the market</h3>
If you have built your own APK with Buildozer or with python-for-android, you can create a release version that may be released on the Play store or other Android markets.

To do this, you must run Buildozer with the release parameter
(e.g. buildozer android release), or if using python-for-android use the --release option to build.py. 
This creates a release APK in the bin directory, which you must properly sign and zipalign.
The procedure for doing this is described in the Android documentation at <a href="https://developer.android.com/studio/publish/app-signing.html#signing-manually">https://developer.android.com/studio/publish/app-signing.html#signing-manually</a> -
all the necessary tools come with the Android SDK.

<h3>Targeting Android</h3>
Kivy is designed to operate identically across platforms and as a result, makes some clear design decisions. 
It includes its own set of widgets and by default,
builds an APK with all the required core dependencies and libraries.

It is possible to target specific Android features, both directly and in a (somewhat) cross-platform way. 
See the <cite>Using Android APIs</cite> section of the <a href="android.html">Kivy on Android documentation</a> for more details.


<h2>Python 一行代码</h2>
在学习Python的过程中，总会发现Python能够轻易的解决许多问题。
一些复杂的任务，甚至可以使用一行Python代码就能搞定。
下面给大家介绍50个有趣的Python一行代码，都很实用。
希望大家能从中找到对自己有帮助的技巧。

<h3>1、字母异位词</h3>
两个单词如果包含相同的字母，次序不同，则称为字母易位词(anagram)。
例如，“silent”和“listen”是字母易位词，而“apple”和“aplee”不是易位词。
from collections import Counter

s1 = 'below'
s2 = 'elbow'

print('anagram') if Counter(s1) == Counter(s2) else print('not an anagram')

使用一行Python代码，就能判断出来了。

<h3>2、二进制转十进制</h3>
decimal = int('1010', 2)
print(decimal) #10

<h3>3、将字符串转换为小写</h3>
print("Hi my name is XiaoF".lower())
# 'hi my name is xiaof'

print("Hi my name is XiaoF".casefold())
# 'hi my name is xiaof'

<h3>4、将字符串转换为大写</h3>
print("hi my name is XiaoF".upper())
# 'HI MY NAME IS XIAOF'

<h3>5、将字符串转换为字节</h3>
print("convert string to bytes using encode method".encode())
# b'convert string to bytes using encode method'

<h3>6、拷贝文件</h3>
import shutil

shutil.copyfile('source.txt', 'dest.txt')

<h3>7、快速排序</h3>
qsort = lambda l: l if len(l) &lt;= 1 else qsort([x for x in l[1:] if x &lt; l[0]]) + [l[0]] + qsort([x for x in l[1:] if x &gt;= l[0]])

print(qsort([17, 29, 11, 97, 103, 5]))
# [5, 11, 17, 29, 97, 103]

<h3>8、n个连续数的和</h3>
n = 10

print(sum(range(0, n+1)))
# 55

<h3>9、交换两个变量的值</h3>
a,b = b,a

<h3>10、斐波纳契数列</h3>
fib = lambda x: x if x&lt;=1 else fib(x-1) + fib(x-2)

print(fib(20))
# 6765

<h3>11、将嵌套列表合并为一个列表</h3>
main_list = [[0, 1, 2], [11, 12, 13], [52, 53, 54]]

result = [item for sublist in main_list for item in sublist]
print(result)

&gt;
[0, 1, 2, 11, 12, 13, 52, 53, 54]

<h3>12、运行一个HTTP服务器</h3>
python3 -m http.server 8000
python2 -m SimpleHTTPServer

<h3>13、反转列表</h3>
numbers = [0, 1, 2, 11, 12, 13, 52, 53, 54]

print(numbers[::-1])
# [54, 53, 52, 13, 12, 11, 2, 1, 0]

<h3>14、阶乘</h3>
import math

fact_5 = math.factorial(5)
print(fact_5)
# 120

<h3>15、在列表推导式中使用for和if</h3>
even_list = [number for number in [1, 2, 3, 4] if number % 2 == 0]

print(even_list)
# [2, 4]

<h3>16、列表中最长的字符串</h3>
words = ['This', 'is', 'a', 'list', 'of', 'words']

result = max(words, key=len)
print(result)
# 'words'

<h3>17、列表推导式</h3>
li = [num for num in range(0, 10)]

print(li)
# [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

<h3>18、集合推导式</h3>
num_set = {num for num in range(0, 10)}

print(num_set)
# {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}

<h3>19、字典推导式</h3>
dict_numbers = {x: x*x for x in range(1, 5)}

print(dict_numbers)
# {1: 1, 2: 4, 3: 9, 4: 16}

<h3>20、if-else</h3>
print("even") if 4 % 2==0 else print("odd")

<h3>21、无限循环</h3>
while 1:0

<h3>22、检查数据类型</h3>
print(isinstance(2, int))
# True

print(isinstance("allwin", str))
# True

print(isinstance([3, 4, 1997], list))
# True

<h3>23、While循环</h3>
a = 5

while a &gt; 0:
    a = a - 1

print(a)
# 0

<h3>24、使用print语句写入文件</h3>
print("Hello, World!", file=open('file.txt', 'w'))

既可打印出信息，还能将信息保存文件。

<h3>25、计算一个字符在字符串中出现的频率</h3>
print("umbrella".count('l'))
# 2

<h3>26、合并列表</h3>
list1 = [1, 2, 4]
list2 = ['XiaoF']
list1.extend(list2)

print(list1)
# [1, 2, 4, 'XiaoF']

<h3>27、合并字典</h3>
dict1 = {'name': 'weiwei', 'age': 23}
dict2 = {'city': 'Beijing'}
dict1.update(dict2)

print(dict1)
# {'name': 'weiwei', 'age': 23, 'city': 'Beijing'}

<h3>28、合并集合</h3>
set1 = {0, 1, 2}
set2 = {11, 12, 13}
set1.update(set2)

print(set1)
# {0, 1, 2, 11, 12, 13}

<h3>29、时间戳</h3>
import time

print(time.time())

<h3>30、列表中出现次数最多的元素</h3>
test_list = [9, 4, 5, 4, 4, 5, 9, 5, 4]
most_frequent_element = max(set(test_list), key=test_list.count)

print(most_frequent_element)
# 4

<h3>31、嵌套列表</h3>
numbers = [[num] for num in range(10)]

print(numbers)
# [[0], [1], [2], [3], [4], [5], [6], [7], [8], [9]]

<h3>32、八进制转十进制</h3>
print(int('30', 8)) 
# 24

<h3>33、将键值对转换为字典</h3>
result = dict(name='XiaoF', age=23)

print(result)
# {'name': 'XiaoF', 'age': 23}

<h3>34、求商和余数</h3>
quotient, remainder = divmod(4, 5)

print(quotient, remainder)
# 0 4

divmod()函数返回当参数1除以参数2时，包含商和余数的元组。

<h3>35、删除列表中的重复项</h3>
print(list(set([4, 4, 5, 5, 6])))
# [4, 5, 6]

<h3>36、按升序排序列表</h3>
print(sorted([5, 2, 9, 1]))
# [1, 2, 5, 9]

<h3>37、按降序排序列表</h3>
print(sorted([5, 2, 9, 1], reverse=True))
# [9, 5, 2, 1]

<h3>38、获取小写字母表</h3>
import string

print(string.ascii_lowercase)
# abcdefghijklmnopqrstuvwxyz

<h3>39、获取大写字母表import string</h3>

print(string.ascii_uppercase)
# ABCDEFGHIJKLMNOPQRSTUVWXYZ

<h3>40、获取0到9字符串</h3>
import string

print(string.digits)
# 0123456789

<h3>41、十六进制转十进制</h3>
print(int('da9', 16))
# 3497

<h3>42、日期时间</h3>
import time

print(time.ctime())
# Thu Aug 13 20:00:00 2021

<h3>43、将列表中的字符串转换为整数</h3>
print(list(map(int, ['1', '2', '3'])))
# [1, 2, 3]

<h3>44、用键对字典进行排序</h3>
d = {'one': 1, 'four': 4, 'eight': 8}
result = {key: d[key] for key in sorted(d.keys())}

print(result)
# {'eight': 8, 'four': 4, 'one': 1}

<h3>45、用键值对字典进行排序</h3>
x = {1: 2, 3: 4, 4: 3, 2: 1, 0: 0}
result = {k: v for k, v in sorted(x.items(), key=lambda item: item[1])}

print(result)
# {0: 0, 2: 1, 1: 2, 4: 3, 3: 4}

<h3>46、列表旋转</h3>
li = [1, 2, 3, 4, 5]

# li[n:] + li[:n], 右变左
print(li[2:] + li[:2])
# [3, 4, 5, 1, 2]

# li[-n:] + li[:-n], 左变右
print(li[-1:] + li[:-1])
# [5, 1, 2, 3, 4]

<h3>47、将字符串中的数字移除</h3>
message = ''.join(list(filter(lambda x: x.isalpha(), 'abc123def4fg56vcg2')))

print(message)
# abcdeffgvcg

<h3>48、矩阵变换</h3>
old_list = [[1, 2, 3], [3, 4, 6], [5, 6, 7]]
result = list(list(x) for x in zip(*old_list))

print(result)
# [[1, 3, 5], [2, 4, 6], [3, 6, 7]]

<h3>49、列表过滤</h3>
result = list(filter(lambda x: x % 2 == 0, [1, 2, 3, 4, 5, 6]))

print(result)
# [2, 4, 6]

<h3>50、解包</h3>
a, *b, c = [1, 2, 3, 4, 5]

print(a) # 1
print(b) # [2, 3, 4]
print(c) # 5

<h2>Web Scrapingwith Mechanical Soup</h2>
<a href="https://www.youtube.com/watch?v=MkGQmZoMuRM" class="whitebut ">Web Scraping Databases with Mechanical Soup and SQlite</a>
import mechanicalsoup
import pandas as pd
import sqlite3

# create browser object & open URL
browser = mechanicalsoup.StatefulBrowser()
browser.open("https://en.wikipedia.org/wiki/Comparison_of_Linux_distributions")

# extract all table headers (entire "Distribution" column)
th = browser.page.find_all("th", attrs={"class": "table-rh"})
# tidy up and slice off non-table elements 
distribution = [value.text.replace("\n", "") for value in th]
distribution = distribution[:95]

# extract table data (the rest of the table)
td = browser.page.find_all("td")
# tidy up and slice off non-table elements
columns = [value.text.replace("\n", "") for value in td]
columns = columns[6:1051]

column_names = ["Founder", 
                "Maintainer", 
                "Initial_Release_Year", 
                "Current_Stable_Version", 
                "Security_Updates", 
                "Release_Date", 
                "System_Distribution_Commitment", 
                "Forked_From", 
                "Target_Audience", 
                "Cost", 
                "Status"]

dictionary = {"Distribution": distribution}

# insert column names and their data into a dictionary
for idx, key in enumerate(column_names):
    dictionary[key] = columns[idx:][::11]

# convert dictionary to data frame
df = pd.DataFrame(data = dictionary)

# create new database and cursor
connection = sqlite3.connect("linux_distro.db")
cursor = connection.cursor()

# create database table and insert all data frame rows
cursor.execute("create table linux (Distribution, " + ",".join(column_names)+ ")")
for i in range(len(df)):
    cursor.execute("insert into linux values (?,?,?,?,?,?,?,?,?,?,?,?)", df.iloc[i])

# PERMANENTLY save inserted data in "linux_distro.db"
connection.commit()

connection.close()


<h2>GUI 神器</h2>
<a href="https://github.com/chriskiehl/Gooey" class="whitebut ">transform aommand line applications into GUI</a>
<a href="https://pythonrepo.com/repo/chriskiehl-Gooey-python-graphical-user-interface-applications" class="whitebut ">TurnPython command line program into a GUI application</a>

GUI是一个人机交互的界面，换句话说，它是人类与计算机交互的一种方法。
GUI主要使用窗口，图标和菜单，也可以通过鼠标和键盘进行操作。

GUI库包含部件。
部件是一系列图形控制元素的集合。
在构建GUI程序时，通常使用层叠方式。

众多图形控制元素直接叠加起来。
当使用python编写应用程序时，你就必须使用GUI库来完成。
对于Python GUI库，你可以有很多的选择。

最多的是 Tkinter ，这个 GUI 库比较灵活，可以做出比较复杂的界面。
但是在页面布局和控件使用上比较复杂，想画出一个好看的界面还是要花很多功夫的。
今天介绍一个 GUI 库 —— Gooey ，一行代码就可以快速生成 GUI 应用程序。

<h3>安装</h3>安装方法毫无新意，跟以前我们安装其他库一样：
pip install Gooey<h3>简单示例</h3><code>
from gooey import Gooey, GooeyParser


@Gooey(program_name="简单的实例")
def main():
    parser = GooeyParser(description="第一个示例!")
    parser.add_argument('文件路径', widget="FileChooser")      # 文件选择框
    parser.add_argument('日期', widget="DateChooser")          # 日期选择框
    args = parser.parse_args()                                 # 接收界面传递的参数
    print(args)


if   __name__ == '__main__':
    main()

</code>这里看代码应该大致知道界面有些什么控件：
文件选择框、日期选择框。

运行之后的效果如下：
<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGY7kk9Ivg2bXYs6v8SJlkoobvblB5DNNYNvzl5ibnndkTopBOjZAh8ZA/640>

<h3>组件</h3>GUI 界面都是由一个个组件排列组成的，上面的例子中我们使用了 FileChooser 和 DateChooser 这两个组件，使用起来是不是很简单？
我们来看看 Gooey 还有哪些组件。
<code>

控件名			控件类型
FileChooser		文件选择器
MultiFileChooser	文件多选器
DirChooser		目录选择器
MultiDirChooser	目录多选器
FileSaver			文件保存
DateChooser		日期选择
TextField			文本输入框
Dropdown			下拉列表
Counter			计数器
CheckBox			复选框
RadioGroup		单选框

</code>这些组件基本上看名称就知道是什么样子的了，都是我们平时常用的页面组件。

<h3>配置</h3>配置参数主要是对Gooey界面做全局配置，配置方法如下：
<code>

@Gooey(program_name='全局配置Demo')
def main():
    ...

</code>这里就使用了 program_name 这个配置，主要是配置显示程序的名称。
除此之外，Gooey 还有好多其他的配置参数：
参数				类型				简介
advanced			Boolean			切换显示全部设置还是仅仅是简化版本
show_config		Boolean			跳过所有配置并立即运行程序
language			str				指定从 gooey/languages 目录读取哪个语言包
program_name		str				GUI 窗口显示的程序名。默认会显 sys.argv[0]。
program_description	str				Settings 窗口顶栏显示的描述性文字。默认值从 ArgumentParser 中获取。
default_size		tuple			窗口默认大小，(600,400)
required_cols		int				设置必选参数行数。
optional_cols		int				设置可选参数行数。
dump_build_config	Boolean			将设置以 JSON 格式保存在硬盘中以供编辑/重用。
richtext_controls	Boolean			打开/关闭控制台对终端控制序列的支持（对字体粗细和颜色的有限支持）

比如我们上面的例子中除了我们自己设置的，其他的控件例如选择按钮、确定按钮等默认都是英文的，我们可以通过 language 参数来设置语言。
语言包在 Gooey 的 GitHub 源码中有：

<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGh318nJMxPSaRJKKh0vUaCfbubiciafnrl4iaqdQvwBoWSa5WDmM5icaia7A/640>
我们使用语言配置：
<code>
from gooey import Gooey, GooeyParser


@Gooey(program_name="简单的实例", language='chinese')
def main():
    parser = GooeyParser(description="第一个示例!")
    parser.add_argument('文件路径', widget="FileChooser")      # 文件选择框
    parser.add_argument('日期', widget="DateChooser")          # 日期选择框
    args = parser.parse_args()                                 # 接收界面传递的参数
    print(args)


if   __name__ == '__main__':
    main()

</code>这里加了一个 language 参数，我们看看运行后效果：
<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGsOdca4cBcmUCmuldWjVXtveiaicawiayxbhcIVmZw9bf2iaM9ibhxaibt89A/640>
我们可以看到，界面上的文字都变成中文了。

<h3>结构布局</h3>通过使用一些简单的自定义，您可以使用Gooey实现相当灵活的布局。
我们可以通过Gooey装饰器的各种参数来控制总体布局选项。
show_sidebar=True
<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGZiaZSx1Xet6aca2UFK5wGnu8Bwqo03sZW8Yib3FL3pcC3I9CibZOKKNIw/640>

show_sidebar=False
<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGRS5exaq0tgWMnX8m4lOW5FFiaCLZLSM3wibyLrKpOKwPqeiaKqG6ia5mwg/640>

navigation='TABBED'
<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGd3Nmr9HCGsvpeDKtcc77RTfadXb68ibaBFbFsNq97OwxY5vLwE8sF4g/640>

tabbed_groups=True
<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGd6SQNulq5CM8HfSBflMNOyHTLQ9KAHgeGr4aWQTdwjMZJWYRG2TOWw/640>
<h3>实例</h3>我们通过一个小栗子来看看运行的效果吧。

<code>
fromgooeyimportGooey,GooeyParser@Gooey(richtext_controls=True,#打from gooey import Gooey, GooeyParser


@Gooey(
    richtext_controls=True,                 # 打开终端对颜色支持
    program_name="MQTT连接订阅小工具",        # 程序名称
    encoding="utf-8",                       # 设置编码格式，打包的时候遇到问题
    progress_regex=r"^progress: (\d+)%$"    # 正则，用于模式化运行时进度信息
)
def main():
    settings_msg = 'MQTT device activation information subscription'
    parser = GooeyParser(description=settings_msg)

    subs = parser.add_subparsers(help='commands', dest='command')

    my_parser = subs.add_parser('MQTT消息订阅')
    my_parser.add_argument("connect", metavar='运行环境',help="请选择开发环境",choices=['dev环境','staging环境'], default='dev环境')
    my_parser.add_argument("device_type",metavar='设备类型',help="请选择设备类型",choices=['H2','H3'],default='H2')
    my_parser.add_argument("serialNumber", metavar='设备SN号',default='LKVC19060047',help='多个请用逗号或空格隔开')

    siege_parser = subs.add_parser('进度条控制')
    siege_parser.add_argument('num',help='请输入数字',default=100)

    args = parser.parse_args()
    print(args, flush=True)    # flush=True在打包的时候会用到


if __name__ == '__main__':
    main()
</code>这个例子运行的效果如下：
<img src="https://mmbiz.qpic.cn/mmbiz_gif/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGUEltAAs98ZjJtROEE3qs1hQR3iaxbmpb0yDI6wnrt4MKAKMFjqL3Zfw/640>
<h3>打包成应用程序</h3>第一步，先安装我们的打包库：
pip install pyinstaller
第二步，执行打包命令：
pyinstaller -F gooeydemo.py -w

等待执行完成，我们就可以在代码目录下看到这样的结构：
<img src="https://mmbiz.qpic.cn/mmbiz_png/pbRNVEA1d2yFSVflGghcE5VCkAVqQpLGWEqNkibgiaTj4rNW8gjwy872NWBbncIP6ibqm4WWZAkbxACxSgH9q11zw/640>
我们的 exe 可执行文件就在 dist 文件夹下。
<h3>总结</h3>今天给大家介绍了 Gooey 的一些简单使用，个人觉得比 Tkinter 要好用一些，应对一些简单的 GUI 界面，我们使用 Gooey 可以快速生成，而使用 Tkinter 的话，可能就需要耗费一些时间了。

当然，Gooey 还有一些其他的特性，大家有兴趣可以去探索！


<h2>爬虫利器 Playwright</h2>
<a href="https://www.scrapingbee.com/blog/playwright-web-scraping/" class="whitebut ">Scraping the web with Playwright</a>
<a href="https://oxylabs.io/blog/playwright-web-scraping" class="whitebut ">Web Scraping with Playwright Tutorial</a>
<a href="https://blog.apify.com/how-to-scrape-the-web-with-playwright-ece1ced75f73/" class="whitebut ">How to scrape the web with Playwright</a>

Playwright 是微软在 2020 年初开源的新一代自动化测试工具，它的功能类似于 Selenium、Pyppeteer 等，都可以驱动浏览器进行各种自动化操作。
它的功能也非常强大，对市面上的主流浏览器都提供了支持，API 功能简洁又强大。

虽然诞生比较晚，但是现在发展得非常火热。
因为 Playwright 是一个类似 Selenium 一样可以支持网页页面渲染的工具，再加上其强大又简洁的 API，Playwright 同时也可以作为网络爬虫的一个爬取利器。
<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo9HR1K6mEPU1MUYexC6bDicHsRGDh5Z5rDdicbPdAydyvTjCnaeiaK6vvRQ/640>
<h3>1. Playwright 的特点</h3>
Playwright 支持当前所有主流浏览器，包括 Chrome 和 Edge（基于 Chromium）、Firefox、Safari（基于 WebKit） ，提供完善的自动化控制的 API。

Playwright 支持移动端页面测试，使用设备模拟技术可以使我们在移动 Web 浏览器中测试响应式 Web 应用程序。

Playwright 支持所有浏览器的 Headless 模式和非 Headless 模式的测试。


Playwright 的安装和配置非常简单，安装过程中会自动安装对应的浏览器和驱动，不需要额外配置 WebDriver 等。

Playwright 提供了自动等待相关的 API，当页面加载的时候会自动等待对应的节点加载，大大简化了 API 编写复杂度。

本节我们就来了解下 Playwright 的使用方法。

<h3>2. 安装</h3>Playwright 目前提供了 Python 和 Node.js 的 API，下面我们针对 Python 版的 Playwright 进行介绍。
要使用 Playwright，需要 Python 3.7 版本及以上，请确保 Python 的版本符合要求。

要安装 Playwright，可以直接使用 pip3，命令如下：
<code>
pip3 install playwright
</code>
安装完成之后需要进行一些初始化操作：
<code>
playwright install
</code>
这时候 Playwrigth 会安装 Chromium, Firefox and WebKit 浏览器并配置一些驱动，我们不必关心中间配置的过程，Playwright 会为我们配置好。

具体的安装说明可以参考：
https://setup.scrape.center/playwright。
安装完成之后，我们便可以使用 Playwright 启动 Chromium 或 Firefox 或 WebKit 浏览器来进行自动化操作了。

<h3>3. 基本使用</h3>Playwright 支持两种编写模式，一种是类似 Pyppetter 一样的异步模式，另一种是像 Selenium 一样的同步模式，我们可以根据实际需要选择使用不同的模式。
我们先来看一个基本同步模式的例子：

<code>
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    for browser_type in [p.chromium, p.firefox, p.webkit]:
        browser = browser_type.launch(headless=False)
        page = browser.new_page()
        page.goto('https://www.baidu.com')
        page.screenshot(path=f'screenshot-{browser_type.name}.png')
        print(page.title())
        browser.close()
</code>
首先我们导入了 sync_playwright 方法，然后直接调用了这个方法，该方法返回的是一个 PlaywrightContextManager 对象，可以理解是一个浏览器上下文管理器，我们将其赋值为变量 p。
接着我们调用了 PlaywrightContextManager 对象的 chromium、firefox、webkit 属性依次创建了一个 Chromium、Firefox 以及 Webkit 浏览器实例，接着用一个 for 循环依次执行了它们的 launch 方法，同时设置了 headless 参数为 False。
“注意：

如果不设置为 False，默认是无头模式启动浏览器，我们看不到任何窗口。
”launch 方法返回的是一个 Browser 对象，我们将其赋值为 browser 变量。
然后调用 browser 的 new_page 方法，相当于新建了一个选项卡，返回的是一个 Page 对象，将其赋值为 page，这整个过程其实和 Pyppeteer 非常类似。

接着我们就可以调用 page 的一系列 API 来进行各种自动化操作了，比如调用 goto，就是加载某个页面，这里我们访问的是百度的首页。
接着我们调用了 page 的 screenshot 方法，参数传一个文件名称，这样截图就会自动保存为该图片名称，这里名称中我们加入了 browser_type 的 name 属性，代表浏览器的类型，结果分别就是 chromium, firefox, webkit。
另外我们还调用了 title 方法，该方法会返回页面的标题，即 HTML 中 title 节点中的文字，也就是选项卡上的文字，我们将该结果打印输出到控制台。

最后操作完毕，调用 browser 的 close 方法关闭整个浏览器，运行结束。
运行一下，这时候我们可以看到有三个浏览器依次启动并加载了百度这个页面，分别是 Chromium、Firefox 和 Webkit 三个浏览器，页面加载完成之后，生成截图、控制台打印结果就退出了。
这时候当前目录便会生成三个截图文件，都是百度的首页，文件名中都带有了浏览器的名称，如图所示：

<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo9NNO6GCJQeXk7xNH2VnfxRibTfIibHMApnqPoWibjq8NrmGAgwDVW0zc1g/640>
控制台运行结果如下：
<code>
百度一下，你就知道
百度一下，你就知道
百度一下，你就知道
</code>
通过运行结果我们可以发现，我们非常方便地启动了三种浏览器并完成了自动化操作，并通过几个 API 就完成了截图和数据的获取，整个运行速度是非常快的，者就是 Playwright 最最基本的用法。
当然除了同步模式，Playwright 还提供异步的 API，如果我们项目里面使用了 asyncio，那就应该使用异步模式，写法如下：

<code>
import asyncio
from playwright.async_api import async_playwright

async def main():
    async with async_playwright() as p:
        for browser_type in [p.chromium, p.firefox, p.webkit]:
            browser = await browser_type.launch()
            page = await browser.new_page()
            await page.goto('https://www.baidu.com')
            await page.screenshot(path=f'screenshot-{browser_type.name}.png')
            print(await page.title())
            await browser.close()

asyncio.run(main())

</code>
可以看到整个写法和同步模式基本类似，导入的时候使用的是 async_playwright 方法，而不再是 sync_playwright 方法。
写法上添加了 async/await 关键字的使用，最后的运行效果是一样的。
另外我们注意到，这例子中使用了 with as 语句，with 用于上下文对象的管理，它可以返回一个上下文管理器，也就对应一个 PlaywrightContextManager 对象，无论运行期间是否抛出异常，它能够帮助我们自动分配并且释放 Playwright 的资源。

<h3>4. 代码生成</h3>Playwright 还有一个强大的功能，那就是可以录制我们在浏览器中的操作并将代码自动生成出来，有了这个功能，我们甚至都不用写任何一行代码，这个功能可以通过 playwright 命令行调用 codegen 来实现，我们先来看看 codegen 命令都有什么参数，输入如下命令：
<code>
playwright codegen --help
</code>
结果类似如下：

<code>

Usage: npx playwright codegen [options] [url]

open page and generate code for user actions

Options:
  -o, --output <file name>     saves the generated script to a file
  --target <language>          language to use, one of javascript, python, python-async, csharp (default: "python")
  -b, --browser <browserType>  browser to use, one of cr, chromium, ff, firefox, wk, webkit (default: "chromium")
  --channel <channel>          Chromium distribution channel, "chrome", "chrome-beta", "msedge-dev", etc
  --color-scheme <scheme>      emulate preferred color scheme, "light" or "dark"
  --device <deviceName>        emulate device, for example  "iPhone 11"
  --geolocation <coordinates>  specify geolocation coordinates, for example "37.819722,-122.478611"
  --load-storage <filename>    load context storage state from the file, previously saved with --save-storage
  --lang <language>            specify language / locale, for example "en-GB"
  --proxy-server <proxy>       specify proxy server, for example "http://myproxy:3128" or "socks5://myproxy:8080"
  --save-storage <filename>    save context storage state at the end, for later use with --load-storage
  --timezone <time zone>       time zone to emulate, for example "Europe/Rome"
  --timeout <timeout>          timeout for Playwright actions in milliseconds (default: "10000")
  --user-agent <ua string>     specify user agent string
  --viewport-size <size>       specify browser viewport size in pixels, for example "1280, 720"
  -h, --help                   display help for command

Examples:

  $ codegen
  $ codegen --target=python
  $ codegen -b webkit https://example.com
</code>
可以看到这里有几个选项，比如 -o 代表输出的代码文件的名称；
--target 代表使用的语言，默认是 python，即会生成同步模式的操作代码，如果传入 python-async 就会生成异步模式的代码；
-b 代表的是使用的浏览器，默认是 Chromium，其他还有很多设置，比如 --device 可以模拟使用手机浏览器，比如 iPhone 11，--lang 代表设置浏览器的语言，--timeout 可以设置页面加载超时时间。

好，了解了这些用法，那我们就来尝试启动一个 Firefox 浏览器，然后将操作结果输出到 script.py 文件，命令如下：
<code>
playwright codegen -o script.py -b firefox
</code>
这时候就弹出了一个 Firefox 浏览器，同时右侧会输出一个脚本窗口，实时显示当前操作对应的代码。
我们可以在浏览器中做任何操作，比如打开百度，然后点击输入框并输入 nba，然后再点击搜索按钮，浏览器窗口如下：

<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo9lRvbIf1abnqMzorHKtLEIzCv5HVu5IFubUV6DtVuuM9pUO8xia7bNCg/640>
可以看见浏览器中还会高亮显示我们正在操作的页面节点，同时还显示了对应的选择器字符串<code>
input[name="wd"]
</code>
，右侧的窗口如图所示：
<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo9rk4ZNzIg8xSlicSyYVIMTPTAgAKyanicWibZFmltwTSBhTRkzZRGTlt9w/640>
在操作过程中，该窗口中的代码就实时变化，可以看到这里生成了我们一系列操作的对应代码，比如在搜索框中输入 nba，就对应如下代码：
<code>
page.fill("input[name=\"wd\"]", "nba")
</code>
操作完毕之后，关闭浏览器，Playwright 会生成一个 script.py 文件，内容如下：

<code>
from playwright.sync_api import sync_playwright

def run(playwright):
    browser = playwright.firefox.launch(headless=False)
    context = browser.new_context()

    # Open new page
    page = context.new_page()

    # Go to https://www.baidu.com/
    page.goto("https://www.baidu.com/")

    # Click input[name="wd"]
    page.click("input[name=\"wd\"]")

    # Fill input[name="wd"]
    page.fill("input[name=\"wd\"]", "nba")

    # Click text=百度一下
    with page.expect_navigation():
        page.click("text=百度一下")

    context.close()
    browser.close()

with sync_playwright() as playwright:
    run(playwright)
</code>
可以看到这里生成的代码和我们之前写的示例代码几乎差不多，而且也是完全可以运行的，运行之后就可以看到它又可以复现我们刚才所做的操作了。
所以，有了这个功能，我们甚至都不用编写任何代码，只通过简单的可视化点击就能把代码生成出来，可谓是非常方便了！
另外这里有一个值得注意的点，仔细观察下生成的代码，和前面的例子不同的是，这里 new_page 方法并不是直接通过 browser 调用的，而是通过 context 变量调用的，这个 context 又是由 browser 通过调用 new_context 方法生成的。

有读者可能就会问了，这个 context 究竟是做什么的呢？
其实这个 context 变量对应的是一个 BrowserContext 对象，BrowserContext 是一个类似隐身模式的独立上下文环境，其运行资源是单独隔离的，在做一些自动化测试过程中，每个测试用例我们都可以单独创建一个 BrowserContext 对象，这样可以保证每个测试用例之间互不干扰，具体的 API 可以参考https://playwright.dev/python/docs/api/class-browsercontext。
<h3>5. 移动端浏览器支持</h3>Playwright 另外一个特色功能就是可以支持移动端浏览器的模拟，比如模拟打开 iPhone 12 Pro Max 上的 Safari 浏览器，然后手动设置定位，并打开百度地图并截图。
首先我们可以选定一个经纬度，比如故宫的经纬度是 39.913904, 116.39014，我们可以通过 geolocation 参数传递给 Webkit 浏览器并初始化。
示例代码如下：

<code>
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    iphone_12_pro_max = p.devices['iPhone 12 Pro Max']
    browser = p.webkit.launch(headless=False)
    context = browser.new_context(
        **iphone_12_pro_max,
        locale='zh-CN',
        geolocation={'longitude': 116.39014, 'latitude': 39.913904},
        permissions=['geolocation']
    )
    page = context.new_page()
    page.goto('https://amap.com')
    page.wait_for_load_state(state='networkidle')
    page.screenshot(path='location-iphone.png')
    browser.close()
</code>
这里我们先用 PlaywrightContextManager 对象的 devices 属性指定了一台移动设备，这里传入的是手机的型号，比如 iPhone 12 Pro Max，当然也可以传其他名称，比如 iPhone 8，Pixel 2 等。
前面我们已经了解了 BrowserContext 对象，BrowserContext 对象也可以用来模拟移动端浏览器，初始化一些移动设备信息、语言、权限、位置等信息，这里我们就用它来创建了一个移动端 BrowserContext 对象，通过 geolocation 参数传入了经纬度信息，通过 permissions 参数传入了赋予的权限信息，最后将得到的 BrowserContext 对象赋值为 context 变量。
接着我们就可以用 BrowserContext 对象来新建一个页面，还是调用 new_page 方法创建一个新的选项卡，然后跳转到高德地图，并调用了 wait_for_load_state 方法等待页面某个状态完成，这里我们传入的 state 是 networkidle，也就是网络空闲状态。

因为在页面初始化和加载过程中，肯定是伴随有网络请求的，所以加载过程中肯定不算 networkidle 状态，所以这里我们传入 networkidle 就可以标识当前页面和数据加载完成的状态。
加载完成之后，我们再调用 screenshot 方法获取当前页面截图，最后关闭浏览器。
运行下代码，可以发现这里就弹出了一个移动版浏览器，然后加载了高德地图，并定位到了故宫的位置，如图所示：

<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo98KP21icUAKHZL2f1nVJ6ajNkesbD4iavQ2Xp9KBwCQa7mJI0dia3QIIDg/640>
输出的截图也是浏览器中显示的结果。
所以这样我们就成功实现了移动端浏览器的模拟和一些设置，其操作 API 和 PC 版浏览器是完全一样的。
<h3>6. 选择器</h3>前面我们注意到 click 和 fill 等方法都传入了一个字符串，这些字符串有的符合 CSS 选择器的语法，有的又是 text= 开头的，感觉似乎没太有规律的样子，它到底支持怎样的匹配规则呢？
下面我们来了解下。
传入的这个字符串，我们可以称之为 Element Selector，它不仅仅支持 CSS 选择器、XPath，Playwright 还扩展了一些方便好用的规则，比如直接根据文本内容筛选，根据节点层级结构筛选等等。

<h3>文本选择</h3>文本选择支持直接使用<code>
text=
</code>
这样的语法进行筛选，示例如下：
<code>
page.click("text=Log in")
</code>
这就代表选择文本是 Log in 的节点，并点击。
<h3>CSS 选择器</h3>CSS 选择器之前也介绍过了，比如根据 id 或者 class 筛选：

<code>
page.click("button")
page.click("#nav-bar .contact-us-item")
</code>
根据特定的节点属性筛选：
<code>
page.click("[data-test=login-button]")
page.click("[aria-label='Sign in']")
</code>
<h3>CSS 选择器 + 文本</h3>我们还可以使用 CSS 选择器结合文本值进行海选，比较常用的就是 has-text 和 text，前者代表包含指定的字符串，后者代表字符串完全匹配，示例如下：
<code>
page.click("article:has-text('Playwright')")
page.click("#nav-bar :text('Contact us')")
</code>
第一个就是选择文本中包含 Playwright 的 article 节点，第二个就是选择 id 为 nav-bar 节点中文本值等于 Contact us 的节点。

<h3>CSS 选择器 + 节点关系</h3>还可以结合节点关系来筛选节点，比如使用 has 来指定另外一个选择器，示例如下：
<code>
page.click(".item-description:has(.item-promo-banner)")
</code>
比如这里选择的就是选择 class 为 item-description 的节点，且该节点还要包含 class 为 item-promo-banner 的子节点。
另外还有一些相对位置关系，比如 right-of 可以指定位于某个节点右侧的节点，示例如下：

<code>
page.click("input:right-of(:text('Username'))")
</code>
这里选择的就是一个 input 节点，并且该 input 节点要位于文本值为 Username 的节点的右侧。
<h3>XPath</h3>当然 XPath 也是支持的，不过 xpath 这个关键字需要我们自行制定，示例如下：
<code>
page.click("xpath=//button")
</code>
这里需要在开头指定<code>xpath=</code>
字符串，代表后面是一个 XPath 表达式。

关于更多选择器的用法和最佳实践，可以参考官方文档：
https://playwright.dev/python/docs/selectors。
<h3>7. 常用操作方法</h3>上面我们了解了浏览器的一些初始化设置和基本的操作实例，下面我们再对一些常用的操作 API 进行说明。
常见的一些 API 如点击 click，输入 fill 等操作，这些方法都是属于 Page 对象的，所以所有的方法都从 Page 对象的 API 文档查找就好了，文档地址：
https://playwright.dev/python/docs/api/class-page。

下面介绍几个常见的 API 用法。
<h3>事件监听</h3>Page 对象提供了一个 on 方法，它可以用来监听页面中发生的各个事件，比如 close、console、load、request、response 等等。
比如这里我们可以监听 response 事件，response 事件可以在每次网络请求得到响应的时候触发，我们可以设置对应的回调方法获取到对应 Response 的全部信息，示例如下：

<code>
from playwright.sync_api import sync_playwright

def on_response(response):
    print(f'Statue {response.status}: {response.url}')

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.on('response', on_response)
    page.goto('https://spa6.scrape.center/')
    page.wait_for_load_state('networkidle')
    browser.close()

</code>
这里我们在创建 Page 对象之后，就开始监听 response 事件，同时将回调方法设置为 on_response，on_response 对象接收一个参数，然后把 Response 的状态码和链接都输出出来了。
运行之后，可以看到控制台输出结果如下：
<code>
Statue 200: https://spa6.scrape.center/
Statue 200: https://spa6.scrape.center/css/app.ea9d802a.css
Statue 200: https://spa6.scrape.center/js/app.5ef0d454.js
Statue 200: https://spa6.scrape.center/js/chunk-vendors.77daf991.js
Statue 200: https://spa6.scrape.center/css/chunk-19c920f8.2a6496e0.css
...
Statue 200: https://spa6.scrape.center/css/chunk-19c920f8.2a6496e0.css
Statue 200: https://spa6.scrape.center/js/chunk-19c920f8.c3a1129d.js
Statue 200: https://spa6.scrape.center/img/logo.a508a8f0.png
Statue 200: https://spa6.scrape.center/fonts/element-icons.535877f5.woff
Statue 301: https://spa6.scrape.center/api/movie?limit=10&offset=0&token=NGMwMzFhNGEzMTFiMzJkOGE0ZTQ1YjUzMTc2OWNiYTI1Yzk0ZDM3MSwxNjIyOTE4NTE5
Statue 200: https://spa6.scrape.center/api/movie/?limit=10&offset=0&token=NGMwMzFhNGEzMTFiMzJkOGE0ZTQ1YjUzMTc2OWNiYTI1Yzk0ZDM3MSwxNjIyOTE4NTE5
Statue 200: https://p0.meituan.net/movie/da64660f82b98cdc1b8a3804e69609e041108.jpg@464w_644h_1e_1c
Statue 200: https://p0.meituan.net/movie/283292171619cdfd5b240c8fd093f1eb255670.jpg@464w_644h_1e_1c
....
Statue 200: https://p1.meituan.net/movie/b607fba7513e7f15eab170aac1e1400d878112.jpg@464w_644h_1e_1c
</code>
“注意：

这里省略了部分重复的内容。
”可以看到，这里的输出结果其实正好对应浏览器 Network 面板中所有的请求和响应内容，和下图是一一对应的：
<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo9y4pIfJ8EKWpYlPKXJmnmZRanxDpYYedI1bJAOGUQFHO8aV2o7pGUkg/640>
这个网站我们之前分析过，其真实的数据都是 Ajax 加载的，同时 Ajax 请求中还带有加密参数，不好轻易获取。

但有了这个方法，这里如果我们想要截获 Ajax 请求，岂不是就非常容易了？
改写一下判定条件，输出对应的 JSON 结果，改写如下：
<code>
from playwright.sync_api import sync_playwright

def on_response(response):
    if '/api/movie/' in response.url and response.status == 200:
        print(response.json())

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.on('response', on_response)
    page.goto('https://spa6.scrape.center/')
    page.wait_for_load_state('networkidle')
    browser.close()

</code>
控制台输入如下：

<code>
{'count': 100, 'results': [{'id': 1, 'name': '霸王别姬', 'alias': 'Farewell My Concubine', 'cover': 'https://p0.meituan.net/movie/ce4da3e03e655b5b88ed31b5cd7896cf62472.jpg@464w_644h_1e_1c', 'categories': ['剧情', '爱情'], 'published_at': '1993-07-26', 'minute': 171, 'score': 9.5, 'regions': ['中国大陆', '中国香港']}, 
...
'published_at': None, 'minute': 103, 'score': 9.0, 'regions': ['美国']}, {'id': 10, 'name': '狮子王', 'alias': 'The Lion King', 'cover': 'https://p0.meituan.net/movie/27b76fe6cf3903f3d74963f70786001e1438406.jpg@464w_644h_1e_1c', 'categories': ['动画', '歌舞', '冒险'], 'published_at': '1995-07-15', 'minute': 89, 'score': 9.0, 'regions': ['美国']}]}
</code>
简直是得来全不费工夫，我们直接通过这个方法拦截了 Ajax 请求，直接把响应结果拿到了，即使这个 Ajax 请求有加密参数，我们也不用关心，因为我们直接截获了 Ajax 最后响应的结果，这对数据爬取来说实在是太方便了。
另外还有很多其他的事件监听，这里不再一一介绍了，可以查阅官方文档，参考类似的写法实现。
<h3>获取页面源码</h3>要获取页面的 HTML 代码其实很简单，我们直接通过 content 方法获取即可，用法如下：

<code>
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto('https://spa6.scrape.center/')
    page.wait_for_load_state('networkidle')
    html = page.content()
    print(html)
    browser.close()

</code>
运行结果就是页面的 HTML 代码。
获取了 HTML 代码之后，我们通过一些解析工具就可以提取想要的信息了。
<h3>页面点击</h3>刚才我们通过示例也了解了页面点击的方法，那就是 click，这里详细说一下其使用方法。

页面点击的 API 定义如下：
<code>
page.click(selector, **kwargs)
</code>
这里可以看到必传的参数是 selector，其他的参数都是可选的。
第一个 selector 就代表选择器，可以用来匹配想要点击的节点，如果传入的选择器匹配了多个节点，那么只会用第一个节点。

这个方法的内部执行逻辑如下：

根据 selector 找到匹配的节点，如果没有找到，那就一直等待直到超时，超时时间可以由额外的 timeout 参数设置，默认是 30 秒。

等待对该节点的可操作性检查的结果，比如说如果某个按钮设置了不可点击，那它会等待该按钮变成了可点击的时候才去点击，除非通过 force 参数设置跳过可操作性检查步骤强制点击。


如果需要的话，就滚动下页面，将需要被点击的节点呈现出来。

调用 page 对象的 mouse 方法，点击节点中心的位置，如果指定了 position 参数，那就点击指定的位置。

click 方法的一些比较重要的参数如下：


click_count：
点击次数，默认为 1。

timeout：

等待要点击的节点的超时时间，默认是 30 秒。

position：
需要传入一个字典，带有 x 和 y 属性，代表点击位置相对节点左上角的偏移位置。


force：
即使不可点击，那也强制点击。
默认是 False。


具体的 API 设置参数可以参考官方文档：
https://playwright.dev/python/docs/api/class-page/#pageclickselector-kwargs。
<h3>文本输入</h3>文本输入对应的方法是 fill，API 定义如下：

<code>
page.fill(selector, value, **kwargs)
</code>
这个方法有两个必传参数，第一个参数也是 selector，第二个参数是 value，代表输入的内容，另外还可以通过 timeout 参数指定对应节点的最长等待时间。
<h3>获取节点属性</h3>除了对节点进行操作，我们还可以获取节点的属性，方法就是 get_attribute，API 定义如下：
<code>
page.get_attribute(selector, name, **kwargs)
</code>
这个方法有两个必传参数，第一个参数也是 selector，第二个参数是 name，代表要获取的属性名称，另外还可以通过 timeout 参数指定对应节点的最长等待时间。

示例如下：
<code>
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto('https://spa6.scrape.center/')
    page.wait_for_load_state('networkidle')
    href = page.get_attribute('a.name', 'href')
    print(href)
    browser.close()
</code>
这里我们调用了 get_attribute 方法，传入的 selector 是<code>a.name</code>，选定了 class 为 name 的 a 节点，然后第二个参数传入了 href，获取超链接的内容，输出结果如下：
<code>
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWIx
</code>
可以看到对应 href 属性就获取出来了，但这里只有一条结果，因为这里有个条件，那就是如果传入的选择器匹配了多个节点，那么只会用第一个节点。

那怎么获取所有的节点呢？
<h3>获取多个节点</h3>获取所有节点可以使用 query_selector_all 方法，它可以返回节点列表，通过遍历获取到单个节点之后，我们可以接着调用单个节点的方法来进行一些操作和属性获取，示例如下：
<code>
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto('https://spa6.scrape.center/')
    page.wait_for_load_state('networkidle')
    elements = page.query_selector_all('a.name')
    for element in elements:
        print(element.get_attribute('href'))
        print(element.text_content())
    browser.close()

</code>
这里我们通过 query_selector_all 方法获取了所有匹配到的节点，每个节点对应的是一个 ElementHandle 对象，然后 ElementHandle 对象也有 get_attribute 方法来获取节点属性，另外还可以通过 text_content 方法获取节点文本。

运行结果如下：
<code>
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWIx
霸王别姬 - Farewell My Concubine
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWIy
这个杀手不太冷 - Léon
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWIz
肖申克的救赎 - The Shawshank Redemption
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWI0
泰坦尼克号 - Titanic
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWI1
罗马假日 - Roman Holiday
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWI2
唐伯虎点秋香 - Flirting Scholar
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWI3
乱世佳人 - Gone with the Wind
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWI4
喜剧之王 - The King of Comedy
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWI5
楚门的世界 - The Truman Show
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWIxMA==
狮子王 - The Lion King
</code>
<h3>获取单个节点</h3>获取单个节点也有特定的方法，就是 query_selector，如果传入的选择器匹配到多个节点，那它只会返回第一个节点，示例如下：
<code>
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()
    page.goto('https://spa6.scrape.center/')
    page.wait_for_load_state('networkidle')
    element = page.query_selector('a.name')
    print(element.get_attribute('href'))
    print(element.text_content())
    browser.close()
</code>
运行结果如下：

<code>
/detail/ZWYzNCN0ZXVxMGJ0dWEjKC01N3cxcTVvNS0takA5OHh5Z2ltbHlmeHMqLSFpLTAtbWIx
霸王别姬 - Farewell My Concubine
</code>
可以看到这里只输出了第一个匹配节点的信息。
<h3>网络劫持</h3>最后再介绍一个实用的方法 route，利用 route 方法，我们可以实现一些网络劫持和修改操作，比如修改 request 的属性，修改 response 响应结果等。
看一个实例：

<code>
from playwright.sync_api import sync_playwright
import re

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()

    def cancel_request(route, request):
        route.abort()

    page.route(re.compile(r"(\.png)|(\.jpg)"), cancel_request)
    page.goto("https://spa6.scrape.center/")
    page.wait_for_load_state('networkidle')
    page.screenshot(path='no_picture.png')
    browser.close()
</code>
这里我们调用了 route 方法，第一个参数通过正则表达式传入了匹配的 URL 路径，这里代表的是任何包含<code>
.png
</code>
或<code>
.jpg
</code>
的链接，遇到这样的请求，会回调 cancel_request 方法处理，cancel_request 方法可以接收两个参数，一个是 route，代表一个 CallableRoute 对象，另外一个是 request，代表 Request 对象。
这里我们直接调用了 route 的 abort 方法，取消了这次请求，所以最终导致的结果就是图片的加载全部取消了。
观察下运行结果，如图所示：

<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo9BMUWxc4ROcUmTfacCCe7zoS3wwOoNZnjsgcuPyGEDwia4S1WR20iaicZQ/640>
可以看到图片全都加载失败了。
这个设置有什么用呢？
其实是有用的，因为图片资源都是二进制文件，而我们在做爬取过程中可能并不想关心其具体的二进制文件的内容，可能只关心图片的 URL 是什么，所以在浏览器中是否把图片加载出来就不重要了。

所以如此设置之后，我们可以提高整个页面的加载速度，提高爬取效率。
另外，利用这个功能，我们还可以将一些响应内容进行修改，比如直接修改 Response 的结果为自定义的文本文件内容。
首先这里定义一个 HTML 文本文件，命名为 custom_response.html，内容如下：

<code>
&lt;!DOCTYPE html>
&lt;html>
  &lt;head>
    &lt;title>Hack Response&lt;/title>
  &lt;/head>
  &lt;body>
    &lt;h3>Hack Response&lt;/h3>
  &lt;/body>
&lt;/html>
</code>
代码编写如下：
<code>
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch(headless=False)
    page = browser.new_page()

    def modify_response(route, request):
        route.fulfill(path="./custom_response.html")

    page.route('/', modify_response)
    page.goto("https://spa6.scrape.center/")
    browser.close()
</code>
这里我们使用 route 的 fulfill 方法指定了一个本地文件，就是刚才我们定义的 HTML 文件，运行结果如下：
<img src="https://mmbiz.qpic.cn/mmbiz_png/DAE6TYB3GWibwYv8CSPkcL8ql6DCtsYo9j80gsu2gafSNiaxDGCeLsAtxuK9puIewJSb802U8X1nNUG0FIDo7dNg/640>
可以看到，Response 的运行结果就被我们修改了，URL 还是不变的，但是结果已经成了我们修改的 HTML 代码。

所以通过 route 方法，我们可以灵活地控制请求和响应的内容，从而在某些场景下达成某些目的。
<h3>8. 
总结</h3>本节介绍了 Playwright 的基本用法，其 API 强大又易于使用，同时具备很多 Selenium、Pyppeteer 不具备的更好用的 API，是新一代 JavaScript 渲染页面的爬取利器。

本节代码：
https://github.com/Python3WebSpider/PlaywrightTest

<h3>scrape with Playwright</h3>
Playwright is a rising star in the web scraping and automation space. 
If you thought Puppeteer was powerful, Playwright will blow your mind.

<a href="https://github.com/microsoft/playwright">Playwright</a> is a browser automation library very similar to <a href="https://github.com/puppeteer/puppeteer">Puppeteer</a>. 
Both allow you to control a web browser with only a few lines of code. 
The possibilities are endless. 
From automating mundane tasks and testing web applications to data mining.

With Playwright you can run Firefox and Safari (WebKit), not only Chromium based browsers. 
It will also save you time, because Playwright automates away repetitive code, such as waiting for buttons to appear in the page.
<blockquote>You don’t need to be familiar with Playwright, Puppeteer or web scraping to enjoy this tutorial, but knowledge of HTML, CSS and JavaScript is expected.</blockquote>
In this tutorial you’ll learn how to:

<strong>Start a browser with Playwright</strong>
<strong>Click buttons and wait for actions</strong>
<strong>Extract data from a website</strong>
<h3>The Project</h3>
To showcase the basics of Playwright, we will create a simple scraper that extracts data about <a href="https://github.com/topics">GitHub Topics</a>. 
You’ll be able to select a topic and the scraper will return information about repositories tagged with this topic.
<img src="https://blog.apify.com/content/images/max/2000/1-gNQkSVS-2f4tk11yVIW4Cw.png">
The page for JavaScript GitHub Topic

We will use Playwright to start a browser, open the GitHub topic page, click the <em>Load more</em> button to display more repositories, and then extract the following information:

Owner
Name
URL
Number of stars
Description
List of repository topics
<h3>Installation</h3>
To use Playwright you’ll need <a href="https://nodejs.org/">Node.js</a> version higher than 10 and a package manager. 
We’ll use <code>npm</code>, which comes preinstalled with Node.js. 
You can confirm their existence on your machine by running:

<code>node -v &amp;&amp; npm -v</code>

If you’re missing either Node.js or NPM, visit the <a href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm">installation tutorial</a> to get started.

Now that we know our environment checks out, let’s create a new project and install Playwright.

<code>mkdir playwright-scraper &amp;&amp; cd playwright-scraper
npm init -y
npm i playwright</code>
<blockquote>The first time you install Playwright, it will download browser binaries, so the installation may take a bit longer.</blockquote><h3>Building a scraper</h3>
Creating a scraper with Playwright is surprisingly easy, even if you have no previous scraping experience. 
If you understand JavaScript and CSS, it will be a piece of cake.

In your project folder, create a file called <code>scraper.js</code> (or choose any other name) and open it in your favorite code editor. 
First, we will confirm that Playwright is correctly installed and working by running a simple script.
<script src="https://gist.github.com/mnmkng/b517605fe5b4d4982cc5f1a52f56bd56.js"></script>

Now run it using your code editor or by executing the following command in your project folder.

<code>node scraper.js</code>

If you saw a Chromium window open and the GitHub Topics page successfully loaded, congratulations, you just robotized your web browser with Playwright!
<img src="https://blog.apify.com/content/images/max/2000/1--g0d8utMzc4sGG7ACHOt7Q.png">
JavaScript GitHub topic
<h3>Loading more repositories</h3>
When you first open the topic page, the number of displayed repositories is limited to 30. 
You can load more by clicking the <em>Load more…</em> button at the bottom of the page.
<img src="https://blog.apify.com/content/images/max/2000/1-XgVRjVfZ7f-H4GGgAclBaQ.png">
</figure>
There are two things we need to tell Playwright to load more repositories:

<strong>Click</strong> the <em>Load more…</em> button.
<strong>Wait</strong> for the repositories to load.

Clicking buttons is extremely easy with Playwright. 
By prefixing <code>text=</code> to a string you’re looking for, Playwright will find the element that includes this string and click it. 
It will also wait for the element to appear if it’s not rendered on the page yet.
<img src="https://blog.apify.com/content/images/max/2000/1-3c8mpVdheQFEGZDRhew-0A.png">
Clicking a button

This is a huge improvement over Puppeteer and it makes Playwright lovely to work with.

After clicking, we need to wait for the repositories to load. 
If we didn’t, the scraper could finish before the new repositories show up on the page and we would miss that data. 
<code><a href="https://playwright.dev/#version=v1.2.1&amp;path=docs%2Fapi.md&amp;q=pagewaitforfunctionpagefunction-arg-options">page.waitForFunction()</a></code> allows you to execute a function inside the browser and wait until the function returns <code>true</code> .
<img src="https://blog.apify.com/content/images/max/2000/1-qX1qjuy6E4mpFQDVIjHq9g.png">
Waiting for

To find that <code>article.border</code> selector, we used browser Dev Tools, which you can open in most browsers by right-clicking anywhere on the page and selecting <strong>Inspect</strong>. 
It means: Select the <code>&lt;article&gt;</code> tag with the <code>border</code> class.
<img src="https://blog.apify.com/content/images/2021/10/1-T4qVh-PhMS3TVLYvpT-J-Q-min.png">
Chrome Dev Tools

Let’s plug this into our code and do a test run.
<script src="https://gist.github.com/mnmkng/0ace1f4e1035f92d8da4f4ae1080f026.js"></script>

If you watch the run, you’ll see that the browser first scrolls down and clicks the <em>Load more…</em> button, which changes the text into <em>Loading more</em>. 
After a second or two, you’ll see the next batch of 30 repositories appear. 
Great job!
<h3>Extracting data</h3>
Now that we know how to load more repositories, we will extract the data we want. 
To do this, we’ll use the <code><a href="https://playwright.dev/#version=v1.2.1&amp;path=docs%2Fapi.md&amp;q=pageevalselector-pagefunction-arg-1">page.$$eval</a></code> function. 
It tells the browser to find certain elements and then execute a JavaScript function with those elements.
<img src="https://blog.apify.com/content/images/2021/09/carbon-12-.png">
Extracting data from page

It works like this: <code>page.$$eval</code>finds our repositories and executes the provided function in the browser. 
We get <code>repoCards</code> which is an <code>Array</code> of all the repo elements. 
The return value of the function becomes the return value of the <code>page.$$eval</code> call. 
Thanks to Playwright, you can pull data out of the browser and save them to a variable in Node.js. 
Magic!

If you’re struggling to understand the extraction code itself, be sure to check out <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Selectors">this guide on working with CSS selectors</a> and <a href="https://javascript.info/searching-elements-dom#querySelectorAll">this tutorial on using those selectors to find HTML elements</a>.

And here’s the code with extraction included. 
When you run it, you’ll see 60 repositories with their information printed to the console.
<script src="https://gist.github.com/mnmkng/3390066cd11c68a35d8998d2e4497c1c.js"></script>
<h3>Conclusion</h3>
In this tutorial we learned how to start a browser with <a href="https://playwright.dev/">Playwright</a>, and control its actions with some of Playwright’s most useful functions: <code>page.click()</code> to emulate mouse clicks, <code>page.waitForFunction()</code> to wait for things to happen and <code>page.$$eval()</code> to extract data from a browser page.

But we’ve only scratched the surface of what’s possible with Playwright. 
You can log into websites, fill forms, intercept network communication, and most importantly, use almost any browser in existence. 
Where will you take this project next? How about turning it into a command-line interface (CLI) tool that takes a topic and number of repositories on input and outputs a file with the repositories? You can do it now.


<h2>Python - Command Line Arguments</h2>
Python provides a <b>getopt</b> module that helps you parse command-line options and arguments.

$ python test.py arg1 arg2 arg3

The Python <b>sys</b> module provides access to any command-line arguments via the <b>sys.argv</b>. This serves two purposes &minus;

<li>sys.argv is the list of command-line arguments.</li>
<li>len(sys.argv) is the number of command-line arguments.</li>

Here sys.argv[0] is the program ie. script name.
Example
Consider the following script test.py &minus;

#!/usr/bin/python

import sys
print( 'Number of arguments:', len(sys.argv), 'arguments.')
print( 'Argument List:', str(sys.argv))

Now run above script as follows &minus;

$ python test.py arg1 arg2 arg3

This produce following result &minus;

Number of arguments: 4 arguments.
Argument List: ['test.py', 'arg1', 'arg2', 'arg3']

<b>NOTE</b> &minus; As mentioned above, first argument is always script name and it is also being counted in number of arguments.

<h3>Parsing Command-Line Arguments</h3>
Python provided a <b>getopt</b> module that helps you parse command-line options and arguments. This module provides two functions and an exception to enable command line argument parsing.

getopt.getopt method
This method parses command line options and parameter list. Following is simple syntax for this method &minus;

getopt.getopt(args, options, [long_options])

Here is the detail of the parameters &minus;

<li><b>args</b> &minus; This is the argument list to be parsed.</li>
<li><b>options</b> &minus; This is the string of option letters that the script wants to recognize, with options that require an argument should be followed by a colon (:).</li>
<li><b>long_options</b> &minus; This is optional parameter and if specified, must be a list of strings with the names of the long options, which should be supported. Long options, which require an argument should be followed by an equal sign ('='). To accept only long options, options should be an empty string.</li>
<li>This method returns value consisting of two elements: the first is a list of <b>(option, value)</b> pairs. The second is the list of program arguments left after the option list was stripped.</li>
<li>Each option-and-value pair returned has the option as its first element, prefixed with a hyphen for short options (e.g., '-x') or two hyphens for long options (e.g., '--long-option').</li>

<h3>Exception getopt.GetoptError</h3>
This is raised when an unrecognized option is found in the argument list or when an option requiring an argument is given none.
The argument to the exception is a string indicating the cause of the error. The attributes <b>msg</b> and <b>opt</b> give the error message and related option.
<h3>Example</h3>
Consider we want to pass two file names through command line and we also want to give an option to check the usage of the script. Usage of the script is as follows &minus;

usage: test.py -i &lt;inputfile&gt; -o &lt;outputfile&gt;

Here is the following script to test.py &minus;

#!/usr/bin/python

import sys, getopt

def main(argv):
   inputfile = ''
   outputfile = ''
   try:
      opts, args = getopt.getopt(argv,"hi:o:",["ifile=","ofile="])
   except getopt.GetoptError:
      print( 'test.py -i &lt;inputfile&gt; -o &lt;outputfile&gt;')
      sys.exit(2)
   for opt, arg in opts:
      if opt == '-h':
         print( 'test.py -i &lt;inputfile&gt; -o &lt;outputfile&gt;')
         sys.exit()
      elif opt in ("-i", "--ifile"):
         inputfile = arg
      elif opt in ("-o", "--ofile"):
         outputfile = arg
   print( 'Input file is "', inputfile)
   print( 'Output file is "', outputfile)

Now, run above script as follows &minus;

$ test.py -h
usage: test.py -i &lt;inputfile&gt; -o &lt;outputfile&gt;

$ test.py -i BMP -o
usage: test.py -i &lt;inputfile&gt; -o &lt;outputfile&gt;

$ test.py -i inputfile
Input file is " inputfile
Output file is "

<h3>process command line arguments</h3>
import sys

print("\n".join(sys.argv))
sys.argv is a list that contains all the arguments passed to the script on the command line.
sys.argv[0] is the script name.

import sys
print(sys.argv[1:])

from argparse import ArgumentParser

parser = ArgumentParser()
parser.add_argument("-f", "--file", dest="filename",
                    help="write report to FILE", metavar="FILE")
parser.add_argument("-q", "--quiet",
                    action="store_false", dest="verbose", default=True,
                    help="don't print status messages to stdout")

args = parser.parse_args()

<h2>streamlit</h2>
https://hackernoon.com/how-to-use-streamlit-and-python-to-build-a-data-science-app
Use Streamlit and Python to Build a Data Science App

https://github.com/streamlit/streamlit
streamlit


<h2>Uninstalling/removing Python packages</h2>
PIP uninstall camelot

<h2>Extract text from PDF</h2>
import PyPDF2 
pdfFileObj = open('acer aspire 515.pdf', 'rb') 

pdfReader = PyPDF2.PdfFileReader(pdfFileObj) 
print(pdfReader.numPages) 
pageObj = pdfReader.getPage(0) 
print(pageObj.extractText()) 
    
# closing the pdf file object 
pdfFileObj.close() 

<h2>Python 项目</h2>
<div id="PythonProjtoc" class="toc"><a href="#PythonProjtopic-0" target="_self"><span class="orange">界面应用</span></a><br><a href="#PythonProjtopic-1" target="_self">1、计算器</a><br><a href="#PythonProjtopic-2" target="_self">2、记事本</a><br><a href="#PythonProjtopic-3" target="_self">3、登录和注册</a><br><a href="#PythonProjtopic-4" target="_self"><span class="orange">游戏开发</span></a><br><a href="#PythonProjtopic-5" target="_self">1、2048</a><br><a href="#PythonProjtopic-6" target="_self">2、贪吃蛇</a><br><a href="#PythonProjtopic-7" target="_self">3、俄罗斯方块</a><br><a href="#PythonProjtopic-8" target="_self">4、连连看</a><br></div>
<br><br>
<h3 id="PythonProjtopic-0"><span class="orange">界面应用</span></h3>
<h3 id="PythonProjtopic-1">1、计算器</h3>
<strong>1. 案例介绍</strong>
本例利用 Python 开发一个可以进行简单的四则运算的图形化计算器，会用到 Tkinter 图形组件进行开发。
主要知识点：
Python Tkinter 界面编程；
计算器逻辑运算实现。
本例难度为初级，适合具有 Python 基础和 Tkinter 组件编程知识的用户学习。

<strong>2. 设计原理</strong>
要制作一个计算器，首先需要知道它由哪些部分组成。
示意如下图所示。
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHbtFFSWA48U43aUibjFNySwTwPRn6BXcnp0Lz0tCrzJg5jFbNkIpBzNA/640">
从结构上来说，一个简单的图形界面，需要由界面组件、组件的事件监听器(响应各类事件的逻辑)和具体的事件处理逻辑组成。
界面实现的主要工作是创建各个界面组件对象，对其进行初始化，以及控制各组件之间的层次关系和布局。

<strong>3. 示例效果</strong>
<img data-src="https://mmbiz.qpic.cn/mmbiz_gif/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHKUnIsnv7hJfcajZ28C9jmZJDSlbOERAT7GS3M2zDM9BUUdoXkAeK5g/640">

<strong>4. 示例源码</strong>
<code>import tkinter
import math
import tkinter.messagebox
class Calculator(object):

# 界面布局方法
def __init__(self):

# 创建主界面，并且保存到成员属性中
self.root = tkinter.Tk()
self.root.minsize(280, 450)
self.root.maxsize(280, 470)
self.root.title('计算器')

# 设置显式面板的变量
self.result = tkinter.StringVar()
self.result.set(0)

# 设置一个全局变量  运算数字和f符号的列表
self.lists = []

# 添加一个用于判断是否按下运算符号的标志
self.ispresssign = False

# 界面布局
self.menus()
self.layout()
self.root.mainloop()

# 计算器菜单界面摆放
def menus(self):

# 添加菜单

# 创建总菜单
allmenu = tkinter.Menu(self.root)

# 添加子菜单
filemenu = tkinter.Menu(allmenu, tearoff=0)

# 添加选项卡
filemenu.add_command(
label='标准型(T)            Alt+1', command=self.myfunc)
filemenu.add_command(
label='科学型(S)            Alt+2', command=self.myfunc)
filemenu.add_command(
label='程序员(P)            Alt+3', command=self.myfunc)
filemenu.add_command(label='统计信息(A)        Alt+4', command=self.myfunc)

# 添加分割线
filemenu.add_separator()

# 添加选项卡
filemenu.add_command(label='历史记录(Y)      Ctrl+H', command=self.myfunc)
filemenu.add_command(label='数字分组(I)', command=self.myfunc)

# 添加分割线
filemenu.add_separator()

# 添加选项卡
filemenu.add_command(
label='基本(B)             Ctrl+F4', command=self.myfunc)
filemenu.add_command(label='单位转换(U)      Ctrl+U', command=self.myfunc)
filemenu.add_command(label='日期计算(D)      Ctrl+E', command=self.myfunc)
menu1 = tkinter.Menu(filemenu, tearoff=0)
menu1.add_command(label='抵押(M)', command=self.myfunc)
menu1.add_command(label='汽车租赁(V)', command=self.myfunc)
menu1.add_command(label='油耗(mpg)(F)', command=self.myfunc)
menu1.add_command(label='油耗(l/100km)(U)', command=self.myfunc)
filemenu.add_cascade(label='工作表(W)', menu=menu1)
allmenu.add_cascade(label='查看(V)', menu=filemenu)

# 添加子菜单2
editmenu = tkinter.Menu(allmenu, tearoff=0)

# 添加选项卡
editmenu.add_command(label='复制(C)         Ctrl+C', command=self.myfunc)
editmenu.add_command(label='粘贴(V)         Ctrl+V', command=self.myfunc)

# 添加分割线
editmenu.add_separator()

# 添加选项卡
menu2 = tkinter.Menu(filemenu, tearoff=0)
menu2.add_command(label='复制历史记录(I)', command=self.myfunc)
menu2.add_command(
label='编辑(E)                      F2', command=self.myfunc)
menu2.add_command(label='取消编辑(N)            Esc', command=self.myfunc)
menu2.add_command(label='清除(L)    Ctrl+Shift+D', command=self.myfunc)
editmenu.add_cascade(label='历史记录(H)', menu=menu2)
allmenu.add_cascade(label='编辑(E)', menu=editmenu)

# 添加子菜单3
helpmenu = tkinter.Menu(allmenu, tearoff=0)

# 添加选项卡
helpmenu.add_command(label='查看帮助(V)       F1', command=self.myfunc)

# 添加分割线
helpmenu.add_separator()

# 添加选项卡
helpmenu.add_command(label='关于计算器(A)', command=self.myfunc)
allmenu.add_cascade(label='帮助(H)', menu=helpmenu)
self.root.config(menu=allmenu)

# 计算器主界面摆放
def layout(self):

# 显示屏
result = tkinter.StringVar()
result.set(0)
show_label = tkinter.Label(self.root, bd=3, bg='white', font=(
'宋体', 30), anchor='e', textvariable=self.result)
show_label.place(x=5, y=20, width=270, height=70)

# 功能按钮MC
button_mc = tkinter.Button(self.root, text='MC', command=self.wait)
button_mc.place(x=5, y=95, width=50, height=50)

# 功能按钮MR
button_mr = tkinter.Button(self.root, text='MR', command=self.wait)
button_mr.place(x=60, y=95, width=50, height=50)

# 功能按钮MS
button_ms = tkinter.Button(self.root, text='MS', command=self.wait)
button_ms.place(x=115, y=95, width=50, height=50)

# 功能按钮M+
button_mjia = tkinter.Button(self.root, text='M+', command=self.wait)
button_mjia.place(x=170, y=95, width=50, height=50)

# 功能按钮M-
button_mjian = tkinter.Button(self.root, text='M-', command=self.wait)
button_mjian.place(x=225, y=95, width=50, height=50)

# 功能按钮←
button_zuo = tkinter.Button(self.root, text='←', command=self.dele_one)
button_zuo.place(x=5, y=150, width=50, height=50)

# 功能按钮CE
button_ce = tkinter.Button(
self.root, text='CE', command=lambda: self.result.set(0))
button_ce.place(x=60, y=150, width=50, height=50)

# 功能按钮C
button_c = tkinter.Button(self.root, text='C', command=self.sweeppress)
button_c.place(x=115, y=150, width=50, height=50)

# 功能按钮±
button_zf = tkinter.Button(self.root, text='±', command=self.zf)
button_zf.place(x=170, y=150, width=50, height=50)

# 功能按钮√
button_kpf = tkinter.Button(self.root, text='√', command=self.kpf)
button_kpf.place(x=225, y=150, width=50, height=50)

# 数字按钮7
button_7 = tkinter.Button(
self.root, text='7', command=lambda: self.pressnum('7'))
button_7.place(x=5, y=205, width=50, height=50)

# 数字按钮8
button_8 = tkinter.Button(
self.root, text='8', command=lambda: self.pressnum('8'))
button_8.place(x=60, y=205, width=50, height=50)

# 数字按钮9
button_9 = tkinter.Button(
self.root, text='9', command=lambda: self.pressnum('9'))
button_9.place(x=115, y=205, width=50, height=50)

# 功能按钮/
button_division = tkinter.Button(
self.root, text='/', command=lambda: self.presscalculate('/'))
button_division.place(x=170, y=205, width=50, height=50)

# 功能按钮%
button_remainder = tkinter.Button(
self.root, text='//', command=lambda: self.presscalculate('//'))
button_remainder.place(x=225, y=205, width=50, height=50)

# 数字按钮4
button_4 = tkinter.Button(
self.root, text='4', command=lambda: self.pressnum('4'))
button_4.place(x=5, y=260, width=50, height=50)

# 数字按钮5
button_5 = tkinter.Button(
self.root, text='5', command=lambda: self.pressnum('5'))
button_5.place(x=60, y=260, width=50, height=50)

# 数字按钮6
button_6 = tkinter.Button(
self.root, text='6', command=lambda: self.pressnum('6'))
button_6.place(x=115, y=260, width=50, height=50)

# 功能按钮*
button_multiplication = tkinter.Button(
self.root, text='*', command=lambda: self.presscalculate('*'))
button_multiplication.place(x=170, y=260, width=50, height=50)

# 功能按钮1/x
button_reciprocal = tkinter.Button(
self.root, text='1/x', command=self.ds)
button_reciprocal.place(x=225, y=260, width=50, height=50)

# 数字按钮1
button_1 = tkinter.Button(
self.root, text='1', command=lambda: self.pressnum('1'))
button_1.place(x=5, y=315, width=50, height=50)

# 数字按钮2
button_2 = tkinter.Button(
self.root, text='2', command=lambda: self.pressnum('2'))
button_2.place(x=60, y=315, width=50, height=50)

# 数字按钮3
button_3 = tkinter.Button(
self.root, text='3', command=lambda: self.pressnum('3'))
button_3.place(x=115, y=315, width=50, height=50)

# 功能按钮-
button_subtraction = tkinter.Button(
self.root, text='-', command=lambda: self.presscalculate('-'))
button_subtraction.place(x=170, y=315, width=50, height=50)

# 功能按钮=
button_equal = tkinter.Button(
self.root, text='=', command=lambda: self.pressequal())
button_equal.place(x=225, y=315, width=50, height=105)

# 数字按钮0
button_0 = tkinter.Button(
self.root, text='0', command=lambda: self.pressnum('0'))
button_0.place(x=5, y=370, width=105, height=50)

# 功能按钮.
button_point = tkinter.Button(
self.root, text='.', command=lambda: self.pressnum('.'))
button_point.place(x=115, y=370, width=50, height=50)

# 功能按钮+
button_plus = tkinter.Button(
self.root, text='+', command=lambda: self.presscalculate('+'))
button_plus.place(x=170, y=370, width=50, height=50)

# 计算器菜单功能
def myfunc(self):
tkinter.messagebox.showinfo('', '预留接口，学成之后，你是不是有冲动添加该功能.')

# 数字方法
def pressnum(self, num):

# 全局化变量

# 判断是否按下了运算符号
if self.ispresssign == False:
pass
else:
self.result.set(0)

# 重置运算符号的状态
self.ispresssign = False
if num == '.':
num = '0.'

# 获取面板中的原有数字
oldnum = self.result.get()

# 判断界面数字是否为0
if oldnum == '0':
self.result.set(num)
else:

# 连接上新按下的数字
newnum = oldnum + num

# 将按下的数字写到面板中
self.result.set(newnum)

# 运算函数
def presscalculate(self, sign):

# 保存已经按下的数字和运算符号

# 获取界面数字
num = self.result.get()
self.lists.append(num)

# 保存按下的操作符号
self.lists.append(sign)

# 设置运算符号为按下状态
self.ispresssign = True

# 获取运算结果
def pressequal(self):

# 获取所有的列表中的内容（之前的数字和操作）

# 获取当前界面上的数字
curnum = self.result.get()

# 将当前界面的数字存入列表
self.lists.append(curnum)

# 将列表转化为字符串
calculatestr = ''.join(self.lists)

# 使用eval执行字符串中的运算即可
endnum = eval(calculatestr)

# 将运算结果显示在界面中
self.result.set(str(endnum)[:10])
if self.lists != 0:
self.ispresssign = True

# 清空运算列表
self.lists.clear()

# 暂未开发说明
def wait(self):
tkinter.messagebox.showinfo('', '更新中......')

# ←按键功能
def dele_one(self):
if self.result.get() == '' or self.result.get() == '0':
self.result.set('0')
return
else:
num = len(self.result.get())
if num &gt; 1:
strnum = self.result.get()
strnum = strnum[0:num - 1]
self.result.set(strnum)
else:
self.result.set('0')

# ±按键功能
def zf(self):
strnum = self.result.get()
if strnum[0] == '-':
self.result.set(strnum[1:])
elif strnum[0] != '-' and strnum != '0':
self.result.set('-' + strnum)

# 1/x按键功能
def ds(self):
dsnum = 1 / int(self.result.get())
self.result.set(str(dsnum)[:10])
if self.lists != 0:
self.ispresssign = True

# 清空运算列表
self.lists.clear()

# C按键功能
def sweeppress(self):
self.lists.clear()
self.result.set(0)

# √按键功能
def kpf(self):
strnum = float(self.result.get())
endnum = math.sqrt(strnum)
if str(endnum)[-1] == '0':
self.result.set(str(endnum)[:-2])
else:
self.result.set(str(endnum)[:10])
if self.lists != 0:
self.ispresssign = True

# 清空运算列表
self.lists.clear()

# 实例化对象
my_calculator = Calculator()
</code>
<h3 id="PythonProjtopic-2">2、记事本</h3>
<strong>1. 案例介绍</strong>
tkinter 是 Python下面向 tk 的图形界面接口库，可以方便地进行图形界面设计和交互操作编程。
tkinter 的优点是简单易用、与 Python 的结合度好。
tkinter 在 Python 3.x 下默认集成，不需要额外的安装操作；
不足之处为缺少合适的可视化界面设计工具，需要通过代码来完成窗口设计和元素布局。
本例采用的 Python 版本为 3.8，如果想在 python 2.x下使用 tkinter，请先进行安装。
需要注意的是，不同 Python 版本下的 tkinter 使用方式可能略有不同，建议采用 Python3.x 版本。
本例难度为中级，适合具有 Python 基础和 Tkinter 组件编程知识的用户学习。

<strong>2. 示例效果</strong>
<img data-src="https://mmbiz.qpic.cn/mmbiz_gif/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPH6VEjiaVKhqmM0AfMc3DZfwjiaXzaqo8De5uuAuY1p642icsb6KsncQZuA/640">

<strong>3. 示例源码</strong>
<code>from tkinter import *
from tkinter.filedialog import *
from tkinter.messagebox import *
import os
filename = ""
def author():
showinfo(title="作者", message="Python")
def power():
showinfo(title="版权信息", message="课堂练习")
def mynew():
global top, filename, textPad
top.title("未命名文件")
filename = None
textPad.delete(1.0, END)
def myopen():
global filename
filename = askopenfilename(defaultextension=".txt")
if filename == "":
filename = None
else:
top.title("记事本" + os.path.basename(filename))
textPad.delete(1.0, END)
f = open(filename, 'r')
textPad.insert(1.0, f.read())
f.close()
def mysave():
global filename
try:
f = open(filename, 'w')
msg = textPad.get(1.0, 'end')
f.write(msg)
f.close()
except:
mysaveas()
def mysaveas():
global filename
f = asksaveasfilename(initialfile="未命名.txt", defaultextension=".txt")
filename = f
fh = open(f, 'w')
msg = textPad.get(1.0, END)
fh.write(msg)
fh.close()
top.title("记事本 " + os.path.basename(f))
def cut():
global textPad
textPad.event_generate("&lt;&lt;Cut&gt;&gt;")
def copy():
global textPad
textPad.event_generate("&lt;&lt;Copy&gt;&gt;")
def paste():
global textPad
textPad.event_generate("&lt;&lt;Paste&gt;&gt;")
def undo():
global textPad
textPad.event_generate("&lt;&lt;Undo&gt;&gt;")
def redo():
global textPad
textPad.event_generate("&lt;&lt;Redo&gt;&gt;")
def select_all():
global textPad

# textPad.event_generate("&lt;&lt;Cut&gt;&gt;")
textPad.tag_add("sel", "1.0", "end")
def find():
t = Toplevel(top)
t.title("查找")
t.geometry("260x60+200+250")
t.transient(top)
Label(t, text="查找：
").grid(row=0, column=0, sticky="e")
v = StringVar()
e = Entry(t, width=20, textvariable=v)
e.grid(row=0, column=1, padx=2, pady=2, sticky="we")
e.focus_set()
c = IntVar()
Checkbutton(t, text="不区分大小写", variable=c).grid(row=1, column=1, sticky='e')
Button(t, text="查找所有", command=lambda: search(v.get(), c.get(),
textPad, t, e)).grid(row=0, column=2, sticky="e" + "w", padx=2,
pady=2)
def close_search():
textPad.tag_remove("match", "1.0", END)
t.destroy()
t.protocol("WM_DELETE_WINDOW", close_search)
def mypopup(event):

# global editmenu
editmenu.tk_popup(event.x_root, event.y_root)
def search(needle, cssnstv, textPad, t, e):
textPad.tag_remove("match", "1.0", END)
count = 0
if needle:
pos = "1.0"
while True:
pos = textPad.search(needle, pos, nocase=cssnstv, stopindex=END)
if not pos:
break
lastpos = pos + str(len(needle))
textPad.tag_add("match", pos, lastpos)
count += 1
pos = lastpos
textPad.tag_config('match', fg='yellow', bg="green")
e.focus_set()
t.title(str(count) + "个被匹配")
top = Tk()
top.title("记事本")
top.geometry("600x400+100+50")
menubar = Menu(top)

# 文件功能
filemenu = Menu(top)
filemenu.add_command(label="新建", accelerator="Ctrl+N", command=mynew)
filemenu.add_command(label="打开", accelerator="Ctrl+O", command=myopen)
filemenu.add_command(label="保存", accelerator="Ctrl+S", command=mysave)
filemenu.add_command(label="另存为", accelerator="Ctrl+shift+s", command=mysaveas)
menubar.add_cascade(label="文件", menu=filemenu)

# 编辑功能
editmenu = Menu(top)
editmenu.add_command(label="撤销", accelerator="Ctrl+Z", command=undo)
editmenu.add_command(label="重做", accelerator="Ctrl+Y", command=redo)
editmenu.add_separator()
editmenu.add_command(label="剪切", accelerator="Ctrl+X", command=cut)
editmenu.add_command(label="复制", accelerator="Ctrl+C", command=copy)
editmenu.add_command(label="粘贴", accelerator="Ctrl+V", command=paste)
editmenu.add_separator()
editmenu.add_command(label="查找", accelerator="Ctrl+F", command=find)
editmenu.add_command(label="全选", accelerator="Ctrl+A", command=select_all)
menubar.add_cascade(label="编辑", menu=editmenu)

# 关于 功能
aboutmenu = Menu(top)
aboutmenu.add_command(label="作者", command=author)
aboutmenu.add_command(label="版权", command=power)
menubar.add_cascade(label="关于", menu=aboutmenu)
top['menu'] = menubar

# shortcutbar = Frame(top, height=25, bg='light sea green')

# shortcutbar.pack(expand=NO, fill=X)

# Inlabe = Label(top, width=2, bg='antique white')

# Inlabe.pack(side=LEFT, anchor='nw', fill=Y)
textPad = Text(top, undo=True)
textPad.pack(expand=YES, fill=BOTH)
scroll = Scrollbar(textPad)
textPad.config(yscrollcommand=scroll.set)
scroll.config(command=textPad.yview)
scroll.pack(side=RIGHT, fill=Y)

# 热键绑定
textPad.bind("&lt;Control-N&gt;", mynew)
textPad.bind("&lt;Control-n&gt;", mynew)
textPad.bind("&lt;Control-O&gt;", myopen)
textPad.bind("&lt;Control-o&gt;", myopen)
textPad.bind("&lt;Control-S&gt;", mysave)
textPad.bind("&lt;Control-s&gt;", mysave)
textPad.bind("&lt;Control-A&gt;", select_all)
textPad.bind("&lt;Control-a&gt;", select_all)
textPad.bind("&lt;Control-F&gt;", find)
textPad.bind("&lt;Control-f&gt;", find)
textPad.bind("&lt;Button-3&gt;", mypopup)
top.mainloop()
</code>
<h3 id="PythonProjtopic-3">3、登录和注册</h3>
<strong>1. 案例介绍</strong>
本例设计一个用户登录和注册模块，使用 Tkinter 框架构建界面，主要用到画布、文本框、按钮等组件。
涉及知识点：
Python Tkinter 界面编程、pickle 数据存储。
本例实现了基本的用户登录和注册互动界面，并提供用户信息存储和验证。
pickle 是 python 语言的一个标准模块，安装 python 后已包含 pickle 库，不需要单独再安装。
pickle 模块实现了基本的数据序列化和反序列化。
通过 pickle 模块的序列化操作能够将程序中运行的对象信息保存到文件中去，永久存储；
通过 pickle 模块的反序列化操作，能够从文件中创建上一次程序保存的对象。
本例难度为中级，适合具有 Python 基础和 Tkinter 组件编程知识的用户学习。

<strong>2. 示例效果</strong>
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHIsb2aO7LYmylJI5vDVh0BKic0fXMibFWk2FmuUtKvsCC4NfclClrmRQw/640">
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHZ8MAXtI8r4aZKnmS5ic671Xc1bF4O3Qwrde9W8Vhkeic31rsB7Cr0JjA/640">

<strong>3. 示例源码</strong>
<code>import tkinter as tk
import pickle
import tkinter.messagebox
from PIL import Image, ImageTk

# 设置窗口---最开始的母体窗口
window = tk.Tk()  # 建立一个窗口
window.title('欢迎登录')
window.geometry('450x300')  # 窗口大小为300x200

# 画布
canvas = tk.Canvas(window, height=200, width=900)

# 加载图片
im = Image.open("images/01.png")
image_file = ImageTk.PhotoImage(im)

# image_file = tk.PhotoImage(file='images/01.gif')
image = canvas.create_image(100, 40, anchor='nw', image=image_file)
canvas.pack(side='top')

# 两个文字标签，用户名和密码两个部分
tk.Label(window, text='用户名').place(x=100, y=150)
tk.Label(window, text='密  码').place(x=100, y=190)
var_usr_name = tk.StringVar()  # 讲文本框的内容，定义为字符串类型
var_usr_name.set('amoxiang@163.com')  # 设置默认值
var_usr_pwd = tk.StringVar()

# 第一个输入框-用来输入用户名的。

# textvariable 获取文本框的内容
entry_usr_name = tk.Entry(window, textvariable=var_usr_name)
entry_usr_name.place(x=160, y=150)

# 第二个输入框-用来输入密码的。
entry_usr_pwd = tk.Entry(window, textvariable=var_usr_pwd, show='*')
entry_usr_pwd.place(x=160, y=190)
def usr_login():
usr_name = var_usr_name.get()
usr_pwd = var_usr_pwd.get()
try:
with open('usrs_info.pickle', 'rb') as usr_file:
usrs_info = pickle.load(usr_file)
except FileNotFoundError:
with open('usrs_info.pickle', 'wb') as usr_file:
usrs_info = {'admin': 'admin'}
pickle.dump(usrs_info, usr_file)
if usr_name in usrs_info:
if usr_pwd == usrs_info[usr_name]:
tk.messagebox.showinfo(
title='欢迎光临', message=usr_name + '：
请进入个人首页，查看最新资讯')
else:
tk.messagebox.showinfo(message='错误提示：
密码不对，请重试')
else:
is_sign_up = tk.messagebox.askyesno('提示', '你还没有注册，请先注册')
print(is_sign_up)
if is_sign_up:
usr_sign_up()

# 注册按钮
def usr_sign_up():
def sign_to_Mofan_Python():
np = new_pwd.get()
npf = new_pwd_confirm.get()
nn = new_name.get()

# 上面是获取数据，下面是查看一下是否重复注册过
with open('usrs_info.pickle', 'rb') as usr_file:
exist_usr_info = pickle.load(usr_file)
if np != npf:
tk.messagebox.showerror('错误提示', '密码和确认密码必须一样')
elif nn in exist_usr_info:
tk.messagebox.showerror('错误提示', '用户名早就注册了！
')
else:
exist_usr_info[nn] = np
with open('usrs_info.pickle', 'wb') as usr_file:
pickle.dump(exist_usr_info, usr_file)
tk.messagebox.showinfo('欢迎', '你已经成功注册了')
window_sign_up.destroy()

# 点击注册之后，会弹出这个窗口界面。
window_sign_up = tk.Toplevel(window)
window_sign_up.title('欢迎注册')
window_sign_up.geometry('360x200')  # 中间是x，而不是*号

# 用户名框--这里输入用户名框。
new_name = tk.StringVar()
new_name.set('amoxiang@163.com')  # 设置的是默认值
tk.Label(window_sign_up, text='用户名').place(x=10, y=10)
entry_new_name = tk.Entry(window_sign_up, textvariable=new_name)
entry_new_name.place(x=100, y=10)

# 新密码框--这里输入注册时候的密码
new_pwd = tk.StringVar()
tk.Label(window_sign_up, text='密  码').place(x=10, y=50)
entry_usr_pwd = tk.Entry(window_sign_up, textvariable=new_pwd, show='*')
entry_usr_pwd.place(x=100, y=50)

# 密码确认框
new_pwd_confirm = tk.StringVar()
tk.Label(window_sign_up, text='确认密码').place(x=10, y=90)
entry_usr_pwd_confirm = tk.Entry(
window_sign_up, textvariable=new_pwd_confirm, show='*')
entry_usr_pwd_confirm.place(x=100, y=90)
btn_confirm_sign_up = tk.Button(
window_sign_up, text=' 注  册 ', command=sign_to_Mofan_Python)
btn_confirm_sign_up.place(x=120, y=130)

# 创建注册和登录按钮
btn_login = tk.Button(window, text=' 登  录 ', command=usr_login)
btn_login.place(x=150, y=230)  # 用place来处理按钮的位置信息。
btn_sign_up = tk.Button(window, text=' 注  册 ', command=usr_sign_up)
btn_sign_up.place(x=250, y=230)
window.mainloop()
</code>

<h3 id="PythonProjtopic-4"><span class="orange">游戏开发</span></h3>
<h3 id="PythonProjtopic-5">1、2048</h3>
<strong>1. 游戏简介</strong>
2048 是一款比较流行的数字游戏。
游戏规则：
每次可按上、下、左、右方向键滑动数字，每滑动一次，所有数字都会往滑动方向靠拢，同时在空白位置随机出现一个数字，相同数字在靠拢时会相加。
不断叠加最终拼出 2048 这个数字算成功。
2048 最早于 2014年3月20日发行。
原版 2048 首先在 GitHub 上发布，原作者是 Gabriele Cirulli，后被移植到各个平台。
本例难度为初级，适合具有 Python 基础和 Pygame 编程知识的用户学习。

<strong>2. 设计原理</strong>
这个游戏的本质是二维列表，就以 4*4 的二位列表来分析关键的逻辑以及实现。
二维列表如下图：
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHhQuouje7oYIXFhpMG0xO12DbSapQOdjfkHupibmzvz08po9G9g4aoWA/640">
所有的操作都是对这个二维列表的数据的操作。
分为上下左右四个方向。
先说向左的方向(如图)。
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHgsuYd1x57iaIqKicicIJRvGyBJibfYHtpIzknQZrbexnC4XibNXImjx8pqQ/640">
向左操作的结果如下图；
当向左的方向是，所有的数据沿着水平方向向左跑。
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPH1RkiatPQ8HFEbDdgia3KLBxhay8cUqLrIzWulvsibl3RSF5zceSicruetg/640">
水平说明操作的是二维列表的一行，而垂直操作的则是二位列表的一列。
这样就可以将二维列表的操作变成遍历后对一维列表的操作。
向左说明数据的优先考虑的位置是从左开始的。
这样就确定了一维列表的遍历开始的位置。
上面第 2 个图共四行，每一个行都能得到一个列表。
<code>list1：
[0,0,2,0]
list2：
[0,4,2,0]
list3：
[0,0,4,4]
list4：
[2,0,2,0]
</code>这样一来向左的方向就变成。
从上到下获得每一行的列表，方向向左。
参数(row,left)。
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHCc2A08MMIIAAFickeavGbgyxOgNa6sRgK2sic3IYZ8mNZJDhV5Jib7NjQ/640">
其他的三个方向在开始的时候记住是怎样获得以为列表的，等操作完才放回去这样就能实现了。

<strong>3. 示例效果</strong>
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHpAfk0fzw6Hx3E2FxFo29Mtr7arjxxCBA1lSFXCap693AYeFKKGjDVw/640">

<strong>4. 示例源码</strong>
<code>import random
import sys
import pygame
from pygame.locals import *
PIXEL = 150
SCORE_PIXEL = 100
SIZE = 4

# 地图的类
class Map:
def __init__(self, size):
self.size = size
self.score = 0
self.map = [[0 for i in range(size)] for i in range(size)]
self.add()
self.add()

# 新增2或4，有1/4概率产生4
def add(self):
while True:
p = random.randint(0, self.size * self.size - 1)
if self.map[int(p / self.size)][int(p % self.size)] == 0:
x = random.randint(0, 3) &gt; 0 and 2 or 4
self.map[int(p / self.size)][int(p % self.size)] = x
self.score += x
break

# 地图向左靠拢，其他方向的靠拢可以通过适当旋转实现，返回地图是否更新
def adjust(self):
changed = False
for a in self.map:
b = []
last = 0
for v in a:
if v != 0:
if v == last:
b.append(b.pop() &lt;&lt; 1)
last = 0
else:
b.append(v)
last = v
b += [0] * (self.size - len(b))
for i in range(self.size):
if a[i] != b[i]:
changed = True
a[:] = b
return changed

# 逆时针旋转地图90度
def rotate90(self):
self.map = [[self.map[c][r]
for c in range(self.size)] for r in reversed(range(self.size))]

# 判断游戏结束
def over(self):
for r in range(self.size):
for c in range(self.size):
if self.map[r][c] == 0:
return False
for r in range(self.size):
for c in range(self.size - 1):
if self.map[r][c] == self.map[r][c + 1]:
return False
for r in range(self.size - 1):
for c in range(self.size):
if self.map[r][c] == self.map[r + 1][c]:
return False
return True
def moveUp(self):
self.rotate90()
if self.adjust():
self.add()
self.rotate90()
self.rotate90()
self.rotate90()
def moveRight(self):
self.rotate90()
self.rotate90()
if self.adjust():
self.add()
self.rotate90()
self.rotate90()
def moveDown(self):
self.rotate90()
self.rotate90()
self.rotate90()
if self.adjust():
self.add()
self.rotate90()
def moveLeft(self):
if self.adjust():
self.add()

# 更新屏幕
def show(map):
for i in range(SIZE):
for j in range(SIZE):

# 背景颜色块
screen.blit(map.map[i][j] == 0 and block[(i + j) % 2]
or block[2 + (i + j) % 2], (PIXEL * j, PIXEL * i))

# 数值显示
if map.map[i][j] != 0:
map_text = map_font.render(
str(map.map[i][j]), True, (106, 90, 205))
text_rect = map_text.get_rect()
text_rect.center = (PIXEL * j + PIXEL / 2,
PIXEL * i + PIXEL / 2)
screen.blit(map_text, text_rect)

# 分数显示
screen.blit(score_block, (0, PIXEL * SIZE))
score_text = score_font.render((map.over(
) and "Game over with score " or "Score: ") + str(map.score), True, (106, 90, 205))
score_rect = score_text.get_rect()
score_rect.center = (PIXEL * SIZE / 2, PIXEL * SIZE + SCORE_PIXEL / 2)
screen.blit(score_text, score_rect)
pygame.display.update()
map = Map(SIZE)
pygame.init()
screen = pygame.display.set_mode((PIXEL * SIZE, PIXEL * SIZE + SCORE_PIXEL))
pygame.display.set_caption("2048")
block = [pygame.Surface((PIXEL, PIXEL)) for i in range(4)]

# 设置颜色
block[0].fill((152, 251, 152))
block[1].fill((240, 255, 255))
block[2].fill((0, 255, 127))
block[3].fill((225, 255, 255))
score_block = pygame.Surface((PIXEL * SIZE, SCORE_PIXEL))
score_block.fill((245, 245, 245))

# 设置字体
map_font = pygame.font.Font(None, int(PIXEL * 2 / 3))
score_font = pygame.font.Font(None, int(SCORE_PIXEL * 2 / 3))
clock = pygame.time.Clock()
show(map)
while not map.over():

# 12为实验参数
clock.tick(12)
for event in pygame.event.get():
if event.type == QUIT:
sys.exit()

# 接收玩家操作
pressed_keys = pygame.key.get_pressed()
if pressed_keys[K_w] or pressed_keys[K_UP]:
map.moveUp()
elif pressed_keys[K_s] or pressed_keys[K_DOWN]:
map.moveDown()
elif pressed_keys[K_a] or pressed_keys[K_LEFT]:
map.moveLeft()
elif pressed_keys[K_d] or pressed_keys[K_RIGHT]:
map.moveRight()
show(map)

# 游戏结束
pygame.time.delay(3000)
</code>
<h3 id="PythonProjtopic-6">2、贪吃蛇</h3>
<strong>1. 案例介绍</strong>
贪吃蛇是一款经典的益智游戏，简单又耐玩。
该游戏通过控制蛇头方向吃蛋，从而使得蛇变得越来越长。
通过上下左右方向键控制蛇的方向，寻找吃的东西，每吃一口就能得到一定的积分，而且蛇的身子会越吃越长，身子越长玩的难度就越大，不能碰墙，不能咬到自己的身体，更不能咬自己的尾巴，等到了一定的分数，就能过关，然后继续玩下一关。
本例难度为中级，适合具有 Python 基础和 Pygame 编程知识的用户学习。

<strong>2. 设计要点</strong>
游戏是基于 PyGame 框架制作的，程序核心逻辑如下：
游戏界面分辨率是 640*480，蛇和食物都是由 1 个或多个 20*20 像素的正方形块儿(为了方便，下文用点表示 20*20 像素的正方形块儿) 组成，这样共有 32*24 个点，使用 pygame.draw.rect 来绘制每一个点；
初始化时蛇的长度是 3，食物是 1 个点，蛇初始的移动的方向是右，用一个数组代表蛇，数组的每个元素是蛇每个点的坐标，因此数组的第一个坐标是蛇尾，最后一个坐标是蛇头；
游戏开始后，根据蛇的当前移动方向，将蛇运动方向的前方的那个点 append 到蛇数组的末位，再把蛇尾去掉，蛇的坐标数组就相当于往前挪了一位；
如果蛇吃到了食物，即蛇头的坐标等于食物的坐标，那么在第 2 点中蛇尾就不用去掉，就产生了蛇长度增加的效果；
食物被吃掉后，随机在空的位置(不能与蛇的身体重合) 再生成一个；
通过 PyGame 的 event 监控按键，改变蛇的方向，例如当蛇向右时，下一次改变方向只能向上或者向下；
当蛇撞上自身或墙壁，游戏结束，蛇头装上自身，那么蛇坐标数组里就有和舌头坐标重复的数据，撞上墙壁则是蛇头坐标超过了边界，都很好判断；
其他细节：
做了个开始的欢迎界面；
食物的颜色随机生成；
吃到实物的时候有声音提示等。

<strong>3. 示例效果</strong>
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPH4JlJDGhzWrxBfjWkta3rn2uP2KBz6y5D1eOE7hgQNa1UxKZwfWFqjg/640">

<strong>4. 示例源码</strong>
<code>import pygame
from os import path
from sys import exit
from time import sleep
from random import choice
from itertools import product
from pygame.locals import QUIT, KEYDOWN
def direction_check(moving_direction, change_direction):
directions = [['up', 'down'], ['left', 'right']]
if moving_direction in directions[0] and change_direction in directions[1]:
return change_direction
elif moving_direction in directions[1] and change_direction in directions[0]:
return change_direction
return moving_direction
class Snake:
colors = list(product([0, 64, 128, 192, 255], repeat=3))[1:-1]
def __init__(self):
self.map = {(x, y): 0 for x in range(32) for y in range(24)}
self.body = [[100, 100], [120, 100], [140, 100]]
self.head = [140, 100]
self.food = []
self.food_color = []
self.moving_direction = 'right'
self.speed = 4
self.generate_food()
self.game_started = False
def check_game_status(self):
if self.body.count(self.head) &gt; 1:
return True
if self.head[0] &lt; 0 or self.head[0] &gt; 620 or self.head[1] &lt; 0 or self.head[1] &gt; 460:
return True
return False
def move_head(self):
moves = {
'right': (20, 0),
'up': (0, -20),
'down': (0, 20),
'left': (-20, 0)
}
step = moves[self.moving_direction]
self.head[0] += step[0]
self.head[1] += step[1]
def generate_food(self):
self.speed = len(
self.body) // 16 if len(self.body) // 16 &gt; 4 else self.speed
for seg in self.body:
x, y = seg
self.map[x // 20, y // 20] = 1
empty_pos = [pos for pos in self.map.keys() if not self.map[pos]]
result = choice(empty_pos)
self.food_color = list(choice(self.colors))
self.food = [result[0] * 20, result[1] * 20]
def main():
key_direction_dict = {
119: 'up',  # W
115: 'down',  # S
97: 'left',  # A
100: 'right',  # D
273: 'up',  # UP
274: 'down',  # DOWN
276: 'left',  # LEFT
275: 'right',  # RIGHT
}
fps_clock = pygame.time.Clock()
pygame.init()
pygame.mixer.init()
snake = Snake()
sound = False
if path.exists('eat.wav'):
sound_wav = pygame.mixer.Sound("eat.wav")
sound = True
title_font = pygame.font.SysFont('simsunnsimsun', 32)
welcome_words = title_font.render(
'贪吃蛇', True, (0, 0, 0), (255, 255, 255))
tips_font = pygame.font.SysFont('simsunnsimsun', 20)
start_game_words = tips_font.render(
'点击开始', True, (0, 0, 0), (255, 255, 255))
close_game_words = tips_font.render(
'按ESC退出', True, (0, 0, 0), (255, 255, 255))
gameover_words = title_font.render(
'游戏结束', True, (205, 92, 92), (255, 255, 255))
win_words = title_font.render(
'蛇很长了，你赢了！
', True, (0, 0, 205), (255, 255, 255))
screen = pygame.display.set_mode((640, 480), 0, 32)
pygame.display.set_caption('贪吃蛇')
new_direction = snake.moving_direction
while 1:
for event in pygame.event.get():
if event.type == QUIT:
exit()
elif event.type == KEYDOWN:
if event.key == 27:
exit()
if snake.game_started and event.key in key_direction_dict:
direction = key_direction_dict[event.key]
new_direction = direction_check(
snake.moving_direction, direction)
elif (not snake.game_started) and event.type == pygame.MOUSEBUTTONDOWN:
x, y = pygame.mouse.get_pos()
if 213 &lt;= x &lt;= 422 and 304 &lt;= y &lt;= 342:
snake.game_started = True
screen.fill((255, 255, 255))
if snake.game_started:
snake.moving_direction = new_direction  # 在这里赋值，而不是在event事件的循环中赋值，避免按键太快
snake.move_head()
snake.body.append(snake.head[:])
if snake.head == snake.food:
if sound:
sound_wav.play()
snake.generate_food()
else:
snake.body.pop(0)
for seg in snake.body:
pygame.draw.rect(screen, [0, 0, 0], [
seg[0], seg[1], 20, 20], 0)
pygame.draw.rect(screen, snake.food_color, [
snake.food[0], snake.food[1], 20, 20], 0)
if snake.check_game_status():
screen.blit(gameover_words, (241, 310))
pygame.display.update()
snake = Snake()
new_direction = snake.moving_direction
sleep(3)
elif len(snake.body) == 512:
screen.blit(win_words, (33, 210))
pygame.display.update()
snake = Snake()
new_direction = snake.moving_direction
sleep(3)
else:
screen.blit(welcome_words, (240, 150))
screen.blit(start_game_words, (246, 310))
screen.blit(close_game_words, (246, 350))
pygame.display.update()
fps_clock.tick(snake.speed)
if __name__ == '__main__':
main()
</code>
<h3 id="PythonProjtopic-7">3、俄罗斯方块</h3>
<strong>1. 案例介绍</strong>
俄罗斯方块是由 4 个小方块组成不同形状的板块，随机从屏幕上方落下，按方向键调整板块的位置和方向，在底部拼出完整的一行或几行。
这些完整的横条会消失，给新落下来的板块腾出空间，并获得分数奖励。
没有被消除掉的方块不断堆积，一旦堆到顶端，便告输，游戏结束。
本例难度为高级，适合具有 Python 进阶和 Pygame 编程技巧的用户学习。

<strong>2. 设计要点</strong>
边框――由 15*25 个空格组成，方块就落在这里面。
盒子――组成方块的其中小方块，是组成方块的基本单元。
方块――从边框顶掉下的东西，游戏者可以翻转和改变位置。
每个方块由 4 个盒子组成。
形状――不同类型的方块。
这里形状的名字被叫做 T, S, Z ,J, L, I , O。
如下图所示：
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHviaz4GFp0O4U1fN7DHdfPnYMtXY8NEsjOFgexT6fhRNCSjMiaIInurJw/640">
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHiatoAa8ViaT0zZzWWSD5md4MEGnDKzjNxo9UibZFS3Y2R8hn8SgMn9Q2g/640">
模版――用一个列表存放形状被翻转后的所有可能样式。
全部存放在变量里，变量名字如 S or J。
着陆――当一个方块到达边框的底部或接触到在其他的盒子话，就说这个方块着陆了。
那样的话，另一个方块就会开始下落。

<strong>3. 示例效果</strong>
<img data-src="https://mmbiz.qpic.cn/mmbiz_gif/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHYRajW5I8YpjOicrdyGiboH88sXXqUZv6zptguTN0fiaHYSI3vzFQqzZEg/640">

<strong>4. 示例源码</strong>
<code>import pygame
import random
import os
pygame.init()
GRID_WIDTH = 20
GRID_NUM_WIDTH = 15
GRID_NUM_HEIGHT = 25
WIDTH, HEIGHT = GRID_WIDTH * GRID_NUM_WIDTH, GRID_WIDTH * GRID_NUM_HEIGHT
SIDE_WIDTH = 200
SCREEN_WIDTH = WIDTH + SIDE_WIDTH
WHITE = (0xff, 0xff, 0xff)
BLACK = (0, 0, 0)
LINE_COLOR = (0x33, 0x33, 0x33)
CUBE_COLORS = [
(0xcc, 0x99, 0x99), (0xff, 0xff, 0x99), (0x66, 0x66, 0x99),
(0x99, 0x00, 0x66), (0xff, 0xcc, 0x00), (0xcc, 0x00, 0x33),
(0xff, 0x00, 0x33), (0x00, 0x66, 0x99), (0xff, 0xff, 0x33),
(0x99, 0x00, 0x33), (0xcc, 0xff, 0x66), (0xff, 0x99, 0x00)
]
screen = pygame.display.set_mode((SCREEN_WIDTH, HEIGHT))
pygame.display.set_caption("俄罗斯方块")
clock = pygame.time.Clock()
FPS = 30
score = 0
level = 1
screen_color_matrix = [[None] * GRID_NUM_WIDTH for i in range(GRID_NUM_HEIGHT)]

# 设置游戏的根目录为当前文件夹
base_folder = os.path.dirname(__file__)
def show_text(surf, text, size, x, y, color=WHITE):
font_name = os.path.join(base_folder, 'font/font.ttc')
font = pygame.font.Font(font_name, size)
text_surface = font.render(text, True, color)
text_rect = text_surface.get_rect()
text_rect.midtop = (x, y)
surf.blit(text_surface, text_rect)
class CubeShape(object):
SHAPES = ['I', 'J', 'L', 'O', 'S', 'T', 'Z']
I = [[(0, -1), (0, 0), (0, 1), (0, 2)],
[(-1, 0), (0, 0), (1, 0), (2, 0)]]
J = [[(-2, 0), (-1, 0), (0, 0), (0, -1)],
[(-1, 0), (0, 0), (0, 1), (0, 2)],
[(0, 1), (0, 0), (1, 0), (2, 0)],
[(0, -2), (0, -1), (0, 0), (1, 0)]]
L = [[(-2, 0), (-1, 0), (0, 0), (0, 1)],
[(1, 0), (0, 0), (0, 1), (0, 2)],
[(0, -1), (0, 0), (1, 0), (2, 0)],
[(0, -2), (0, -1), (0, 0), (-1, 0)]]
O = [[(0, 0), (0, 1), (1, 0), (1, 1)]]
S = [[(-1, 0), (0, 0), (0, 1), (1, 1)],
[(1, -1), (1, 0), (0, 0), (0, 1)]]
T = [[(0, -1), (0, 0), (0, 1), (-1, 0)],
[(-1, 0), (0, 0), (1, 0), (0, 1)],
[(0, -1), (0, 0), (0, 1), (1, 0)],
[(-1, 0), (0, 0), (1, 0), (0, -1)]]
Z = [[(0, -1), (0, 0), (1, 0), (1, 1)],
[(-1, 0), (0, 0), (0, -1), (1, -1)]]
SHAPES_WITH_DIR = {
'I': I, 'J': J, 'L': L, 'O': O, 'S': S, 'T': T, 'Z': Z
}
def __init__(self):
self.shape = self.SHAPES[random.randint(0, len(self.SHAPES) - 1)]

# 骨牌所在的行列
self.center = (2, GRID_NUM_WIDTH // 2)
self.dir = random.randint(0, len(self.SHAPES_WITH_DIR[self.shape]) - 1)
self.color = CUBE_COLORS[random.randint(0, len(CUBE_COLORS) - 1)]
def get_all_gridpos(self, center=None):
curr_shape = self.SHAPES_WITH_DIR[self.shape][self.dir]
if center is None:
center = [self.center[0], self.center[1]]
return [(cube[0] + center[0], cube[1] + center[1])
for cube in curr_shape]
def conflict(self, center):
for cube in self.get_all_gridpos(center):

# 超出屏幕之外，说明不合法
if cube[0] &lt; 0 or cube[1] &lt; 0 or cube[0] &gt;= GRID_NUM_HEIGHT or \
cube[1] &gt;= GRID_NUM_WIDTH:
return True

# 不为None，说明之前已经有小方块存在了，也不合法
if screen_color_matrix[cube[0]][cube[1]] is not None:
return True
return False
def rotate(self):
new_dir = self.dir + 1
new_dir %= len(self.SHAPES_WITH_DIR[self.shape])
old_dir = self.dir
self.dir = new_dir
if self.conflict(self.center):
self.dir = old_dir
return False
def down(self):

# import pdb; pdb.set_trace()
center = (self.center[0] + 1, self.center[1])
if self.conflict(center):
return False
self.center = center
return True
def left(self):
center = (self.center[0], self.center[1] - 1)
if self.conflict(center):
return False
self.center = center
return True
def right(self):
center = (self.center[0], self.center[1] + 1)
if self.conflict(center):
return False
self.center = center
return True
def draw(self):
for cube in self.get_all_gridpos():
pygame.draw.rect(screen, self.color,
(cube[1] * GRID_WIDTH, cube[0] * GRID_WIDTH,
GRID_WIDTH, GRID_WIDTH))
pygame.draw.rect(screen, WHITE,
(cube[1] * GRID_WIDTH, cube[0] * GRID_WIDTH,
GRID_WIDTH, GRID_WIDTH),
1)
def draw_grids():
for i in range(GRID_NUM_WIDTH):
pygame.draw.line(screen, LINE_COLOR,
(i * GRID_WIDTH, 0), (i * GRID_WIDTH, HEIGHT))
for i in range(GRID_NUM_HEIGHT):
pygame.draw.line(screen, LINE_COLOR,
(0, i * GRID_WIDTH), (WIDTH, i * GRID_WIDTH))
pygame.draw.line(screen, WHITE,
(GRID_WIDTH * GRID_NUM_WIDTH, 0),
(GRID_WIDTH * GRID_NUM_WIDTH, GRID_WIDTH * GRID_NUM_HEIGHT))
def draw_matrix():
for i, row in zip(range(GRID_NUM_HEIGHT), screen_color_matrix):
for j, color in zip(range(GRID_NUM_WIDTH), row):
if color is not None:
pygame.draw.rect(screen, color,
(j * GRID_WIDTH, i * GRID_WIDTH,
GRID_WIDTH, GRID_WIDTH))
pygame.draw.rect(screen, WHITE,
(j * GRID_WIDTH, i * GRID_WIDTH,
GRID_WIDTH, GRID_WIDTH), 2)
def draw_score():
show_text(screen, u'得分：
{}'.format(score), 20, WIDTH + SIDE_WIDTH // 2, 100)
def remove_full_line():
global screen_color_matrix
global score
global level
new_matrix = [[None] * GRID_NUM_WIDTH for i in range(GRID_NUM_HEIGHT)]
index = GRID_NUM_HEIGHT - 1
n_full_line = 0
for i in range(GRID_NUM_HEIGHT - 1, -1, -1):
is_full = True
for j in range(GRID_NUM_WIDTH):
if screen_color_matrix[i][j] is None:
is_full = False
continue
if not is_full:
new_matrix[index] = screen_color_matrix[i]
index -= 1
else:
n_full_line += 1
score += n_full_line
level = score // 20 + 1
screen_color_matrix = new_matrix
def show_welcome(screen):
show_text(screen, u'俄罗斯方块', 30, WIDTH / 2, HEIGHT / 2)
show_text(screen, u'按任意键开始游戏', 20, WIDTH / 2, HEIGHT / 2 + 50)
running = True
gameover = True
counter = 0
live_cube = None
while running:
clock.tick(FPS)
for event in pygame.event.get():
if event.type == pygame.QUIT:
running = False
elif event.type == pygame.KEYDOWN:
if gameover:
gameover = False
live_cube = CubeShape()
break
if event.key == pygame.K_LEFT:
live_cube.left()
elif event.key == pygame.K_RIGHT:
live_cube.right()
elif event.key == pygame.K_DOWN:
live_cube.down()
elif event.key == pygame.K_UP:
live_cube.rotate()
elif event.key == pygame.K_SPACE:
while live_cube.down() == True:
pass
remove_full_line()

# level 是为了方便游戏的难度，level 越高 FPS // level 的值越小

# 这样屏幕刷新的就越快，难度就越大
if gameover is False and counter % (FPS // level) == 0:

# down 表示下移骨牌，返回False表示下移不成功，可能超过了屏幕或者和之前固定的

# 小方块冲突了
if live_cube.down() == False:
for cube in live_cube.get_all_gridpos():
screen_color_matrix[cube[0]][cube[1]] = live_cube.color
live_cube = CubeShape()
if live_cube.conflict(live_cube.center):
gameover = True
score = 0
live_cube = None
screen_color_matrix = [[None] * GRID_NUM_WIDTH for i in range(GRID_NUM_HEIGHT)]

# 消除满行
remove_full_line()
counter += 1

# 更新屏幕
screen.fill(BLACK)
draw_grids()
draw_matrix()
draw_score()
if live_cube is not None:
live_cube.draw()
if gameover:
show_welcome(screen)
pygame.display.update()
</code>
<h3 id="PythonProjtopic-8">4、连连看</h3>
<strong>1. 案例介绍</strong>
连连看是一款曾经非常流行的小游戏。
游戏规则：
<ol><li>点击选中两个相同的方块。
</li><li>两个选中的方块之间连接线的折点不超过两个(接线由X轴和Y轴的平行线组成)。
</li><li>每找出一对，它们就会自动消失。
</li><li>连线不能从尚未消失的图案上经过。
</li><li>把所有的图案全部消除即可获得胜利。
</li></ol>
<strong>2. 设计思路</strong>
<ol><li>生成成对的图片元素。
</li><li>将图片元素打乱排布。
</li><li>定义什么才算 <code>相连</code>(两张图片的连线不多于3跟直线，或者说转角不超过2个)。
</li><li>实现 <code>相连</code> 判断算法。
</li><li>消除图片元素并判断是否消除完毕。
</li></ol>
<strong>3. 示例效果</strong>
<img data-src="https://mmbiz.qpic.cn/mmbiz_gif/ULibHgXIt3jxicPrfwF9p6rQnZMOGSuYPHHagN5icromRJicGl7JHmwwPSasXexBmKFNywwWqHAdB2ibveo7S3hPKzg/640">

<strong>4. 示例源码</strong>
<code>from tkinter import *
from tkinter.messagebox import *
from threading import Timer
import time
import random
class Point:

# 点类
def __init__(self, x, y):
self.x = x
self.y = y

# --------------------------------------
'''
判断选中的两个方块是否可以消除
'''
def IsLink(p1, p2):
if lineCheck(p1, p2):
return True
if OneCornerLink(p1, p2):  # 一个转弯（折点）的联通方式
return True
if TwoCornerLink(p1, p2):  # 两个转弯（折点）的联通方式
return True
return False

# ---------------------------
def IsSame(p1, p2):
if map[p1.x][p1.y] == map[p2.x][p2.y]:
print("clicked at IsSame")
return True
return False
def callback(event):  # 鼠标左键事件代码
global Select_first, p1, p2
global firstSelectRectId, SecondSelectRectId

# print ("clicked at", event.x, event.y,turn)
x = (event.x) // 40  # 换算棋盘坐标
y = (event.y) // 40
print("clicked at", x, y)
if map[x][y] == " ":
showinfo(title="提示", message="此处无方块")
else:
if Select_first == False:
p1 = Point(x, y)

# 画选定（x1,y1)处的框线
firstSelectRectId = cv.create_rectangle(x * 40, y * 40, x * 40 + 40, y * 40 + 40, width=2, outline="blue")
Select_first = True
else:
p2 = Point(x, y)

# 判断第二次点击的方块是否已被第一次点击选取，如果是则返回。
if (p1.x == p2.x) and (p1.y == p2.y):
return

# 画选定（x2,y2)处的框线
print('第二次点击的方块', x, y)

# SecondSelectRectId=cv.create_rectangle(100,20,x*40+40,y*40+40,width=2,outline="yellow")
SecondSelectRectId = cv.create_rectangle(x * 40, y * 40, x * 40 + 40, y * 40 + 40, width=2,
outline="yellow")
print('第二次点击的方块', SecondSelectRectId)
cv.pack()

# 判断是否连通
if IsSame(p1, p2) and IsLink(p1, p2):
print('连通', x, y)
Select_first = False

# 画选中方块之间连接线
drawLinkLine(p1, p2)

# clearTwoBlock()

# time.sleep(0.6)

# clearFlag=True
t = Timer(timer_interval, delayrun)  # 定时函数
t.start()
else:  # 重新选定第一个方块

# 清除第一个选定框线
cv.delete(firstSelectRectId)
cv.delete(SecondSelectRectId)

# print('清除第一个选定框线')

# firstSelectRectId=SecondSelectRectId

# p1=Point(x,y)           #设置重新选定第一个方块的坐标
Select_first = False
timer_interval = 0.3  # 0.3秒

# --------------------------------------
def delayrun():
clearTwoBlock()  # 清除连线及方块
def clearTwoBlock():  # 清除连线及方块

# 延时0.1秒

# time.sleep(0.1)

# 清除第一个选定框线
cv.delete(firstSelectRectId)

# 清除第2个选定框线
cv.delete(SecondSelectRectId)

# 清空记录方块的值
map[p1.x][p1.y] = " "
cv.delete(image_map[p1.x][p1.y])
map[p2.x][p2.y] = " "
cv.delete(image_map[p2.x][p2.y])
Select_first = False
undrawConnectLine()  # 清除选中方块之间连接线
def drawQiPan():  # 画棋盘
for i in range(0, 15):
cv.create_line(20, 20 + 40 * i, 580, 20 + 40 * i, width=2)
for i in range(0, 15):
cv.create_line(20 + 40 * i, 20, 20 + 40 * i, 580, width=2)
cv.pack()
def print_map():  # 输出map地图
global image_map
for x in range(0, Width):  # 0--14
for y in range(0, Height):  # 0--14
if (map[x][y] != ' '):
img1 = imgs[int(map[x][y])]
id = cv.create_image((x * 40 + 20, y * 40 + 20), image=img1)
image_map[x][y] = id
cv.pack()
for y in range(0, Height):  # 0--14
for x in range(0, Width):  # 0--14
print(map[x][y], end=' ')
print(",", y)
'''
* 同行同列情况消除方法 原理：
如果两个相同的被消除元素之间的 空格数
spaceCount等于他们的（行/列差-1）则 两者可以联通消除
* x代表列，y代表行
* param p1 第一个保存上次选中点坐标的点对象
* param p2 第二个保存上次选中点坐标的点对象
'''

# 直接连通
def lineCheck(p1, p2):
absDistance = 0
spaceCount = 0
if (p1.x == p2.x or p1.y == p2.y):  # 同行同列的情况吗？
print("同行同列的情况------")

# 同列的情况
if (p1.x == p2.x and p1.y != p2.y):
print("同列的情况")

# 绝对距离(中间隔着的空格数)
absDistance = abs(p1.y - p2.y) - 1

# 正负值
if p1.y - p2.y &gt; 0:
zf = -1
else:
zf = 1
for i in range(1, absDistance + 1):
if (map[p1.x][p1.y + i * zf] == " "):

# 空格数加1
spaceCount += 1
else:
break;  # 遇到阻碍就不用再探测了

# 同行的情况
elif (p1.y == p2.y and p1.x != p2.x):
print(" 同行的情况")
absDistance = abs(p1.x - p2.x) - 1

# 正负值
if p1.x - p2.x &gt; 0:
zf = -1
else:
zf = 1
for i in range(1, absDistance + 1):
if (map[p1.x + i * zf][p1.y] == " "):

# 空格数加1
spaceCount += 1
else:
break;  # 遇到阻碍就不用再探测了
if (spaceCount == absDistance):

# 可联通
print(absDistance, spaceCount)
print("行/列可直接联通")
return True
else:
print("行/列不能消除！
")
return False
else:

# 不是同行同列的情况所以直接返回false
return False;

# --------------------------------------

# 第二种，直角连通
'''
直角连接，即X,Y坐标都不同的，可以用这个方法尝试连接
param first:选中的第一个点
param second:选中的第二个点
'''
def OneCornerLink(p1, p2):

# 第一个直角检查点，如果这里为空则赋予相同值供检查
checkP = Point(p1.x, p2.y)

# 第二个直角检查点，如果这里为空则赋予相同值供检查
checkP2 = Point(p2.x, p1.y);

# 第一个直角点检测
if (map[checkP.x][checkP.y] == " "):
if (lineCheck(p1, checkP) and lineCheck(checkP, p2)):
linePointStack.append(checkP)
print("直角消除ok", checkP.x, checkP.y)
return True

# 第二个直角点检测
if (map[checkP2.x][checkP2.y] == " "):
if (lineCheck(p1, checkP2) and lineCheck(checkP2, p2)):
linePointStack.append(checkP2)
print("直角消除ok", checkP2.x, checkP2.y)
return True
print("不能直角消除")
return False;

# -----------------------------------------
'''

#第三种，双直角连通
双直角联通判定可分两步走：
1. 
在p1点周围4个方向寻找空格checkP
2. 
调用OneCornerLink(checkP, p2)
3. 
即遍历 p1 4 个方向的空格，使之成为 checkP,然后调用 OneCornerLink(checkP, 
p2)判定是否为真，如果为真则可以双直角连同，否则当所有的空格都遍历完而没有找
到一个checkP使OneCornerLink(checkP, p2)为真，则两点不能连同
具体代码：
双直角连接方法
@param p1 第一个点
@param p2 第二个点
'''
def TwoCornerLink(p1, p2):
checkP = Point(p1.x, p1.y)

# 四向探测开始
for i in range(0, 4):
checkP.x = p1.x
checkP.y = p1.y

# 向下
if (i == 3):
checkP.y += 1
while ((checkP.y &lt; Height) and map[checkP.x][checkP.y] == " "):
linePointStack.append(checkP)
if (OneCornerLink(checkP, p2)):
print("下探测OK")
return True
else:
linePointStack.pop()
checkP.y += 1
print("ssss", checkP.y, Height - 1)

# 补充两个折点都在游戏区域底侧外部
if checkP.y == Height:  # 出了底部，则仅需判断p2能否也达到底部边界
z = Point(p2.x, Height - 1)  # 底部边界点
if lineCheck(z, p2):  # 两个折点在区域外部的底侧
linePointStack.append(Point(p1.x, Height))
linePointStack.append(Point(p2.x, Height))
print("下探测到游戏区域外部OK")
return True

# 向右
elif (i == 2):
checkP.x += 1
while ((checkP.x &lt; Width) and map[checkP.x][checkP.y] == " "):
linePointStack.append(checkP)
if (OneCornerLink(checkP, p2)):
print("右探测OK")
return True
else:
linePointStack.pop()
checkP.x += 1

# 补充两个折点都在游戏区域右侧外部
if checkP.x == Width:  # 出了右侧，则仅需判断p2能否也达到右部边界
z = Point(Width - 1, p2.y)  # 右部边界点
if lineCheck(z, p2):  # 两个折点在区域外部的底侧
linePointStack.append(Point(Width, p1.y))
linePointStack.append(Point(Width, p2.y))
print("右探测到游戏区域外部OK")
return True

# 向左
elif (i == 1):
checkP.x -= 1
while ((checkP.x &gt;= 0) and map[checkP.x][checkP.y] == " "):
linePointStack.append(checkP)
if (OneCornerLink(checkP, p2)):
print("左探测OK")
return True
else:
linePointStack.pop()
checkP.x -= 1

# 向上
elif (i == 0):
checkP.y -= 1
while ((checkP.y &gt;= 0) and map[checkP.x][checkP.y] == " "):
linePointStack.append(checkP)
if (OneCornerLink(checkP, p2)):
print("上探测OK")
return True
else:
linePointStack.pop()
checkP.y -= 1

# 四个方向都寻完都没找到适合的checkP点
print("两直角连接没找到适合的checkP点")
return False;

# ---------------------------

# 画连接线
def drawLinkLine(p1, p2):
if (len(linePointStack) == 0):
Line_id.append(drawLine(p1, p2))
else:
print(linePointStack, len(linePointStack))
if (len(linePointStack) == 1):
z = linePointStack.pop()
print("一折连通点z", z.x, z.y)
Line_id.append(drawLine(p1, z))
Line_id.append(drawLine(p2, z))
if (len(linePointStack) == 2):
z1 = linePointStack.pop()
print("2折连通点z1", z1.x, z1.y)
Line_id.append(drawLine(p2, z1))
z2 = linePointStack.pop()
print("2折连通点z2", z2.x, z2.y)
Line_id.append(drawLine(z1, z2))
Line_id.append(drawLine(p1, z2))

# 删除连接线
def undrawConnectLine():
while len(Line_id) &gt; 0:
idpop = Line_id.pop()
cv.delete(idpop)
def drawLine(p1, p2):
print("drawLine p1,p2", p1.x, p1.y, p2.x, p2.y)

# cv.create_line( 40+20, 40+20,200,200,width=5,fill='red')
id = cv.create_line(p1.x * 40 + 20, p1.y * 40 + 20, p2.x * 40 + 20, p2.y * 40 + 20, width=5, fill='red')

# cv.pack()
return id

# --------------------------------------
def create_map():  # 产生map地图
global map

# 生成随机地图

# 将所有匹配成对的动物物种放进一个临时的地图中
tmpMap = []
m = (Width) * (Height) // 10
print('m=', m)
for x in range(0, m):
for i in range(0, 10):  # 每种方块有10个
tmpMap.append(x)
random.shuffle(tmpMap)
for x in range(0, Width):  # 0--14
for y in range(0, Height):  # 0--14
map[x][y] = tmpMap[x * Height + y]

# --------------------------------------
def find2Block(event):  # 自动查找
global firstSelectRectId, SecondSelectRectId
m_nRoW = Height
m_nCol = Width
bFound = False;

# 第一个方块从地图的0位置开始
for i in range(0, m_nRoW * m_nCol):

# 找到则跳出循环
if (bFound):
break

# 算出对应的虚拟行列位置
x1 = i % m_nCol
y1 = i // m_nCol
p1 = Point(x1, y1)

# 无图案的方块跳过
if (map[x1][y1] == ' '):
continue

# 第二个方块从前一个方块的后面开始
for j in range(i + 1, m_nRoW * m_nCol):

# 算出对应的虚拟行列位置
x2 = j % m_nCol
y2 = j // m_nCol
p2 = Point(x2, y2)

# 第二个方块不为空 且与第一个方块的动物相同
if (map[x2][y2] != ' ' and IsSame(p1, p2)):

# 判断是否可以连通
if (IsLink(p1, p2)):
bFound = True
break

# 找到后自动消除
if (bFound):  # p1（x1,y1）与p2（x2,y2）连通
print('找到后', p1.x, p1.y, p2.x, p2.y)

# 画选定（x1,y1)处的框线
firstSelectRectId = cv.create_rectangle(x1 * 40, y1 * 40, x1 * 40 + 40, y1 * 40 + 40, width=2, outline="red")

# 画选定（x2,y2)处的框线
secondSelectRectId = cv.create_rectangle(x2 * 40, y2 * 40, x2 * 40 + 40, y2 * 40 + 40, width=2, outline="red")

# t=Timer(timer_interval,delayrun)#定时函数

# t.start()
return bFound

# 游戏主逻辑
root = Tk()
root.title("Python连连看 ")
imgs = [PhotoImage(file='images\\bar_0' + str(i) + '.gif') for i in range(0, 10)]  # 所有图标图案
Select_first = False  # 是否已经选中第一块
firstSelectRectId = -1  # 被选中第一块地图对象
SecondSelectRectId = -1  # 被选中第二块地图对象
clearFlag = False
linePointStack = []
Line_id = []
Height = 10
Width = 10
map = [[" " for y in range(Height)] for x in range(Width)]
image_map = [[" " for y in range(Height)] for x in range(Width)]
cv = Canvas(root, bg='green', width=440, height=440)

# drawQiPan( )
cv.bind("&lt;Button-1&gt;", callback)  # 鼠标左键事件
cv.bind("&lt;Button-3&gt;", find2Block)  # 鼠标右键事件
cv.pack()
create_map()  # 产生map地图
print_map()  # 打印map地图
root.mainloop()
</code>

<h2>Python获取全部股票代码信息</h2>
<a href="https://juejin.cn/user/2604119467234270" class="whitebut ">Angryshark128</a>

# 保存股票信息至本地 save_stocks()
# 获取全部股票代码及名称 _get_all_stocks()
# 获取股票信息 _get_stocks(base_url, stock)

# 保存股票信息至本地
def save_stocks():
    all_stocks = target_util._get_all_stocks()
    with open ("stock.csv",'a+') as f:
        f.write("股票代码,股票名称,市场,分类,类型\n")
        for stock in all_stocks:
            f.write("{stock[id]},{stock[name]},{stock[category]},{stock[tag]},{stock[type]}\n".format(
                stock=stock
            ))

    logging.info("全部股票信息写入完成！")
    
if __name__ == "__main__":
    save_stocks()


# 获取全部股票代码及名称
def _get_all_stocks():
    base_url = "http://54.push2.eastmoney.com/api/qt/clist/get?pn={page_num}&pz={page_size}&po=1&np=1&fltt=2&invt=2&fid=f3&fs={time_id}&fields=f12,f14"
    stocks = [
        {
            "category": "A股",
            "tag": "沪深A股",
            "type": "股票",
            "time_id": "m:0+t:6,m:0+t:80,m:1+t:2,m:1+t:23"
        },
        {
            "category": "A股",
            "tag": "上证A股",
            "type": "股票",
            "time_id": "m:1+t:2,m:1+t:23"
        },
        {
            "category": "A股",
            "tag": "深证A股",
            "type": "股票",
            "time_id": "m:0+t:6,m:0+t:80"
        },
        {
            "category": "A股",
            "tag": "新股",
            "type": "股票",
            "time_id": "m:0+f:8,m:1+f:8"
        },
        {
            "category": "A股",
            "tag": "创业板",
            "type": "股票",
            "time_id": "m:0+t:80"
        },
        {
            "category": "A股",
            "tag": "科创板",
            "type": "股票",
            "time_id": "m:1+t:23"
        },
        {
            "category": "A股",
            "tag": "沪股通",
            "type": "股票",
            "time_id": "b:BK0707"
        },
        {
            "category": "A股",
            "tag": "深股通",
            "type": "股票",
            "time_id": "b:BK0804"
        },
        {
            "category": "B股",
            "tag": "B股",
            "type": "股票",
            "time_id": "m:0+t:7,m:1+t:3"
        },
        {
            "category": "A-B股",
            "tag": "上证AB股比价",
            "type": "股票",
            "time_id": "m:1+b:BK0498"
        },
        {
            "category": "A-B股",
            "tag": "深证AB股比价",
            "type": "股票",
            "time_id": "m:0+b:BK0498"
        },
        {
            "category": "A-B股",
            "tag": "风险警示板",
            "type": "股票",
            "time_id": "m:0+f:4,m:1+f:4"
        },
        {
            "category": "A-B股",
            "tag": "两网及退市",
            "type": "股票",
            "time_id": "m:0+s:3"
        },
        {
            "category": "美股",
            "tag": "美股",
            "type": "股票",
            "time_id": "m:105,m:106,m:107"
        },
        {
            "category": "港股",
            "tag": "港股",
            "type": "股票",
            "time_id": "m:128+t:3,m:128+t:4,m:128+t:1,m:128+t:2"
        },
        {
            "category": "英股",
            "tag": "英股",
            "type": "股票",
            "time_id": "m:155+t:1,m:155+t:2,m:155+t:3,m:156+t:1,m:156+t:2,m:156+t:5,m:156+t:6,m:156+t:7,m:156+t:8"
        }
    ]

    all_stocks = []
    for stock in stocks:
        all_stocks.extend(_get_stocks(base_url, stock))

    logging.warning("全部股票信息共{0}条。".format(len(all_stocks)))
    return all_stocks


# 获取股票信息
def _get_stocks(base_url, stock):
    max_page_num = 50
    page_size = 100
    result = []

    for page_num in range(1, max_page_num):
        url = base_url.format(time_id=stock["time_id"], page_num=page_num, page_size=page_size)
        resp = requests.get(url)

        if not resp.ok:
            logging.error("{0}-{1}-{2}请求失败：{3}".format(stock["type"],
                                                       stock["category"],
                                                       stock["tag"],
                                                       url))

        resp_json = resp.json()
        if not resp_json["data"]:
            logging.warning("当前页无数据，将不再继续请求！")
            break

        stocks = resp_json["data"]["diff"]
        result.extend(list(
            map(lambda s: {"id": s["f12"].replace(" ", "").replace("'", "_"),
                           "name": s["f14"].replace(" ", "").replace("'", "_"),
                           "category": stock["category"],
                           "tag": stock["tag"],
                           "type": stock["type"]},
                stocks)))

    logging.info("{0}-{1}-{2}信息爬取完成，共{3}条。".format(stock["type"], stock["category"], stock["tag"], len(result)))
    return result


<h2>YYDS 分析股票数据特征</h2>
<div id="YYDStoc"><a href="#YYDStopic-0" target="_self">数据准备</a><br><a href="#YYDStopic-1" target="_self">特征构造</a><br><a href="#YYDStopic-2" target="_self">描述性统计</a><br><a href="#YYDStopic-3" target="_self">缺失值分析</a><br><a href="#YYDStopic-4" target="_self">特征间相关性分析</a><br><a href="#YYDStopic-5" target="_self">特征值分布</a><br><a href="#YYDStopic-6" target="_self">特征间的关系</a><br><a href="#YYDStopic-7" target="_self"><span class="orange">特征重要性</span></a><br><a href="#YYDStopic-8" target="_self">线性回归系数大小排序</a><br><a href="#YYDStopic-9" target="_self">随机森林特征重要性排序</a><br><a href="#YYDStopic-10" target="_self">RandomizedLasso</a><br><a href="#YYDStopic-11" target="_self">RFE递归特征消除特征排序</a><br><a href="#YYDStopic-12" target="_self">RFECV</a><br><a href="#YYDStopic-13" target="_self">LarsCV</a><br><a href="#YYDStopic-14" target="_self">创建特征排序矩阵</a><br><a href="#YYDStopic-15" target="_self">绘制特征重要性排序图</a><br></div></center>
<br><br>

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx4aynvrr0g2Lm4cFLqFQVhrozxfXLP29ASlnGF2sTJXpR8piaUOx35Uw/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx4aynvrr0g2Lm4cFLqFQVhrozxfXLP29ASlnGF2sTJXpR8piaUOx35Uw/640" data-was-processed="true">

本文主要从股市数据变量的<strong>特征分布及特征重要性</strong>两个角度对数据进行分析。

通过绘制图表等方法分析特征本身对分布状况或特征间相互关系。
通过机器学习模型方法分析出特种重要性排序，选出对结果贡献较大对那几个特征，这对后面建模对模型效果有着不可小觑对效果。

<h3 id="YYDStopic-0">数据准备</h3>此处数据获取可参见<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&amp;mid=2652587312&amp;idx=2&amp;sn=e49850868c977904ac5d803c43acabb7&amp;chksm=84656d7ab312e46c7de429cac932623c276ce51a47e567144cd70e8c5ab9ad1b6351652b38a0&amp;scene=21#wechat_redirect" textvalue="金融数据准备">金融数据准备</a>。

df.info()

&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 1260 entries, 2015-12-31 to 2020-12-31
Data columns (total 6 columns):
 #   Column     Non-Null Count  Dtype  
---  ------     --------------  -----  
 0   Open       1260 non-null   float64
 1   High       1260 non-null   float64
 2   Low        1260 non-null   float64
 3   Close      1260 non-null   float64
 4   Adj Close  1260 non-null   float64
 5   Volume     1260 non-null   int64  
dtypes: float64(5), int64(1)
memory usage: 68.9 KB

<h3 id="YYDStopic-1">特征构造</h3>
df['H-L'] = df['High'] - df['Low']
df['O-C'] = df['Adj Close'] - df['Open']
df['3day MA'] = df['Adj Close'].shift(1).rolling(window=3).mean()
df['10day MA'] = df['Adj Close'].shift(1).rolling(window=10).mean()
df['30day MA'] = df['Adj Close'].shift(1).rolling(window=30).mean()
df['Std_dev'] = df['Adj Close'].rolling(5).std()
df.dtypes

<h3 id="YYDStopic-2">描述性统计</h3>
df.describe().T

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxJ3ornzD0zAgmda1AaIEYm7j3qL6McTG21bstYp95Ea4SWUiasQOSNqA/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxJ3ornzD0zAgmda1AaIEYm7j3qL6McTG21bstYp95Ea4SWUiasQOSNqA/640" data-was-processed="true">

<h3 id="YYDStopic-3">缺失值分析</h3><h4>检查缺失值</h4>
df.isnull().sum() 

Open          0
High          0
Low           0
Close         0
Adj Close     0
Volume        0
H-L           0
O-C           0
3day MA       3
10day MA     10
30day MA     30
Std_dev       4
dtype: int64

<h4>缺失值可视化</h4>这里使用Series的属性plot直接绘制条形图。

df_missing_count = df.isnull().sum() 
# -1表示缺失数据
# 另一个不常见的设置画布的方法
plt.rcParams['figure.figsize'] = (15,8)
df_missing_count.plot.bar()
plt.show()

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxsA7wmd9uK7K4iaKIjiblHw9YVEibe0ACJmc2bUI3aPXHX8FSCgPx6sCHw/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxsA7wmd9uK7K4iaKIjiblHw9YVEibe0ACJmc2bUI3aPXHX8FSCgPx6sCHw/640" data-was-processed="true">

for column in df:
   print("column nunique  NaN")
    print("{0:15} {1:6d} {2:6}".format(
          column, df[column].nunique(), 
          (df[column] == -1).sum()))

column            nunique   NaN
Open              1082      0
High              1083      0
Low               1025      0
Close             1098      0
Adj Close         1173      0
Volume            1250      0
H-L                357      0
O-C               1237      2
3day MA           1240      0
10day MA          1244      0
30day MA          1230      0
Std_dev           1252      0

<h3 id="YYDStopic-4">特征间相关性分析</h3>
import seaborn as sns
# 一个设置色板的方法
# cmap = sns.diverging_palette(220, 10,
                        as_cmap=True)
sns.heatmap(df.iloc[:df.shape[0]].corr()
        ,annot = True, cmap = 'Blues')

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx0EkIqYxwwyiagC4iasZjPKPmzZhekGLWGdvQicxKzB0n4iaDA1dj37uHicQ/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx0EkIqYxwwyiagC4iasZjPKPmzZhekGLWGdvQicxKzB0n4iaDA1dj37uHicQ/640" data-was-processed="true">

<h3 id="YYDStopic-5">特征值分布</h3><h4>直方图</h4>
columns_multi = [x for x in list(df.columns)]
df.hist(layout = (3,4), column = columns_multi)
# 一种不常用的调整画布大小的方法
fig=plt.gcf()
fig.set_size_inches(20,9)

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx8mgEf6eibb8u1GMMLKOkiczN6yMRVSeqBjLHW8VsF4VY94uNgia1z2OQQ/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx8mgEf6eibb8u1GMMLKOkiczN6yMRVSeqBjLHW8VsF4VY94uNgia1z2OQQ/640" data-was-processed="true">

<h4>密度图</h4>
names = columns_multi
df.plot(kind='density', subplots=True, 
        layout=(3,4), sharex=False)

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxXPR9mXSTC4XsK1MOicPGyt7dGhO54TAcCwq7RPhFQ2sFL0QdqFOBQhA/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxXPR9mXSTC4XsK1MOicPGyt7dGhO54TAcCwq7RPhFQ2sFL0QdqFOBQhA/640" data-was-processed="true">

<h3 id="YYDStopic-6">特征间的关系</h3><strong>函数可视化探索数据特征间的关系</strong>

sns.pairplot(df, size=3, 
             diag_kind="kde")

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbZlibm15O9H3ribG7TDl2C1TaXwT0a7WGEia9g7FhZnTTmiajMtGXJHQHuNkEziaEL5UZ5QIpib6smVn2gw/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbZlibm15O9H3ribG7TDl2C1TaXwT0a7WGEia9g7FhZnTTmiajMtGXJHQHuNkEziaEL5UZ5QIpib6smVn2gw/640" data-was-processed="true">

<h3 id="YYDStopic-7"><span class="orange">特征重要性</span></h3>通过多种方式对特征重要性进行评估，将每个特征的特征重要的得分取均值，最后以均值大小排序绘制特征重要性排序图，直观查看特征重要性。

<h4>导入相关模块</h4>
from sklearn.feature_selection import RFE,RFECV, f_regression
from sklearn.linear_model import (LinearRegression, Ridge, Lasso，LarsCV)
from stability_selection import StabilitySelection, RandomizedLasso
from sklearn.preprocessing import MinMaxScaler
from sklearn.ensemble import RandomForestRegressor
from sklearn.ensemble import RandomForestClassifier
from sklearn.svm import SVR

<h3 id="YYDStopic-8">线性回归系数大小排序</h3>回归系数(regression coefficient)在回归方程中表示自变量 x 对因变量 y 影响大小的参数。
回归系数越大表示 x 对 y 影响越大。

<h4>创建排序函数</h4>
df = df.dropna()
Y = df['Adj Close'].values
X = df.values
colnames = df.columns

# 定义字典来存储的排名
ranks = {}
# 创建函数，它将特征排名存储到rank字典中
def ranking(ranks, names, order=1):
    minmax = MinMaxScaler()
    ranks = minmax.fit_transform(order*np.array([ranks]).T).T[0]
    ranks = map(lambda x: round(x,2), ranks)
    res = dict(zip(names, ranks))
    return res

<h4>多个回归模型系数排序</h4>
# 使用线性回归
lr = LinearRegression(normalize=True)
lr.fit(X,Y)
ranks["LinReg"] = ranking(np.abs(lr.coef_), colnames)
# 使用 Ridge 
ridge = Ridge(alpha = 7)
ridge.fit(X,Y)
ranks['Ridge'] = ranking(np.abs(ridge.coef_), colnames)
# 使用 Lasso
lasso = Lasso(alpha=.05)
lasso.fit(X, Y)
ranks["Lasso"] = ranking(np.abs(lasso.coef_), colnames)

<h3 id="YYDStopic-9">随机森林特征重要性排序</h3>随机森林得到的特征重要性的原理是我们平时用的较频繁的一种方法，无论是对分类型任务还是连续型任务，都有较好对效果。
在随机森林中某个特征X的重要性的计算方法如下：
对于随机森林中的每一颗决策树， 使用相应的OOB(袋外数据)数据来计算它的袋外数据误差 ，记为errOOB1.

随机地对袋外数据OOB所有样本的特征X加入噪声干扰 (就可以随机的改变样本在特征X处的值)， 再次计算它的袋外数据误差 ，记为errOOB2.

假设随机森林中有Ntree 棵树，那么对于特征X的重要性<img style="width:200px; background-color:gray;" src="https://mmbiz.qlogo.cn/mmbiz_svg/47CicbLQOxtUxCJwVFD9RPfiaaSzNh2nT7oaX11CiaDeiaXbCsJK0UaQL4YqCIhvbib4bhX8NdicWMacKvDvyicLicNsefkr7HSs92Qic/0">，之所以可以用这个表达式来作为相应特征的重要性的度量值是因为：若给某个特征随机加入噪声之后，袋外的准确率大幅度降低，则说明这个特征对于样本的分类结果影响很大，也就是说它的重要程度比较高。

<h4>连续型特征重要性</h4>对于连续型任务的特征重要性，可以使用回归模型<strong>RandomForestRegressor</strong>中<code>feature_importances_</code>属性。

X_1 = dataset[['Open', 'High', 'Low', 'Volume', 
               'Increase_Decrease','Buy_Sell_on_Open', 'Buy_Sell', 'Returns']]
y_1 = dataset['Adj Close']

# 创建决策树分类器对象
clf = RandomForestRegressor(random_state=0, n_jobs=-1)
# 训练模型
model = clf.fit(X_1, y_1)
# 计算特征重要性
importances = model.feature_importances_
# 按降序排序特性的重要性
indices = np.argsort(importances)[::-1]
# 重新排列特性名称，使它们与已排序的特性重要性相匹配
names = [dataset.columns[i] for i in indices]
# 创建画布
plt.figure(figsize=(10,6))
# 添加标题
plt.title("Feature Importance")
# 添加柱状图
plt.bar(range(X.shape[1]), importances[indices])
# 为x轴添加特征名
plt.xticks(range(X.shape[1]), names, rotation=90)

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxbCZP3O64tOy646UtJobBTVOmA9YtU5RNQ9fVTBhP1YsOonQoeQkXLg/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxbCZP3O64tOy646UtJobBTVOmA9YtU5RNQ9fVTBhP1YsOonQoeQkXLg/640" data-was-processed="true">

<h4>分类型特征重要性</h4>当该任务是分类型，需要用分类型模型时，可以使用<strong>RandomForestClassifier</strong>中的<code>feature_importances_</code>属性。

X2 = dataset[['Open', 'High', 'Low','Adj Close', 'Volume', 'Buy_Sell_on_Open', 
              'Buy_Sell', 'Returns']]
y2 = dataset['Increase_Decrease']

clf = RandomForestClassifier(random_state=0, n_jobs=-1)
model = clf.fit(X2, y2)
importances = model.feature_importances_
indices = np.argsort(importances)[::-1]
names = [dataset.columns[i] for i in indices]
plt.figure(figsize=(10,6))
plt.title("Feature Importance")
plt.bar(range(X2.shape[1]), importances[indices])
plt.xticks(range(X2.shape[1]), names, rotation=90)
plt.show()

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx3TUnNyxEic5pDJ1a2t1JvxYX5tQLZmiafW6KDqMCg2ViaxXYqctWXmQLQ/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx3TUnNyxEic5pDJ1a2t1JvxYX5tQLZmiafW6KDqMCg2ViaxXYqctWXmQLQ/640" data-was-processed="true">

<h4>本案例中使用回归模型</h4>
rf = RandomForestRegressor(n_jobs=-1, n_estimators=50, verbose=3)
rf.fit(X,Y)
ranks["RF"] = ranking(rf.feature_importances_, colnames);

下面介绍两个顶层特征选择算法，之所以叫做顶层，是因为他们都是建立在基于模型的特征选择方法基础之上的，例如回归和SVM，在不同的子集上建立模型，然后汇总最终确定特征得分。

<h3 id="YYDStopic-10">RandomizedLasso</h3><strong>RandomizedLasso的选择稳定性方法排序。</strong>
稳定性选择是一种基于二次抽样和选择算法相结合较新的方法，选择算法可以是回归、SVM或其他类似的方法。
它的主要思想是在不同的数据子集和特征子集上运行特征选择算法，不断的重复，最终汇总特征选择结果，比如可以统计某个特征被认为是重要特征的频率（被选为重要特征的次数除以它所在的子集被测试的次数）。

理想情况下，重要特征的得分会接近100%。
稍微弱一点的特征得分会是非0的数，而最无用的特征得分将会接近于0。

lambda_grid = np.linspace(0.001, 0.5, num=100)
rlasso = RandomizedLasso(alpha=0.04)
selector = StabilitySelection(base_estimator=rlasso, lambda_name='alpha',
                              lambda_grid=lambda_grid, threshold=0.9, verbose=1)
selector.fit(X, Y)
# 运行随机Lasso的选择稳定性方法
ranks["rlasso/Stability"] = ranking(np.abs(selector.stability_scores_.max(axis=1)), colnames)
print('finished')

{'Open': 1.0, 'High': 1.0, 'Low': 0.76, 
'Close': 1.0, 'Adj Close': 0.99, 'Volume': 0.0, 
'H-L': 0.0, 'O-C': 1.0, '3day MA': 1.0, 
'10day MA': 0.27, '30day MA': 0.75, 'Std_dev': 0.0}
finished

<h4>稳定性得分可视化</h4>
fig, ax = plot_stability_path(selector)
fig.set_size_inches(15,6)
fig.show()

<img class="lazy loaded" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx3PO9hdqCVeEUVukqUseQiaPCbOmvHD5RyAVLoSUYWiaMOlkKWho6ZWLA/640" src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdx3PO9hdqCVeEUVukqUseQiaPCbOmvHD5RyAVLoSUYWiaMOlkKWho6ZWLA/640" data-was-processed="true">

<h4>查看得分超过阈值的变量索引及其得分</h4>
# 获取所选特征的掩码或整数索引
selected_variables = selector.get_support(indices=True)
selected_scores = selector.stability_scores_.max(axis=1)
print('Selected variables are:')
print('-----------------------')
for idx, (variable, score) in enumerate(
          zip(selected_variables, selected_scores[selected_variables])):
    print('Variable %d: [%d], 
          score %.3f' % (idx + 1, variable, score))

Selected variables are:
-----------------------
Variable 1: [0], score 1.000
Variable 2: [1], score 1.000
Variable 3: [3], score 1.000
Variable 4: [4], score 0.990
Variable 5: [7], score 1.000
Variable 6: [8], score 1.000

<h3 id="YYDStopic-11">RFE递归特征消除特征排序</h3>基于递归特征消除的特征排序。

给定一个给特征赋权的外部评估器(如线性模型的系数)，递归特征消除(RFE)的目标是通过递归地考虑越来越小的特征集来选择特征。

主要思想是反复的构建模型(如SVM或者回归模型)然后选出最好的(或者最差的)的特征(可以根据系数来选)。

首先，在初始特征集上训练评估器，并通过任何特定属性或可调用属性来获得每个特征的重要性。

然后，从当前的特征集合中剔除最不重要的特征。

这个过程在训练集上递归地重复，直到最终达到需要选择的特征数。

这个过程中特征被消除的次序就是特征的排序。
因此，这是一种寻找最优特征子集的贪心算法。

RFE的稳定性很大程度上取决于在迭代的时候底层用哪种模型。
例如，假如RFE采用的普通的回归，没有经过正则化的回归是不稳定的，那么RFE就是不稳定的；假如采用的是Ridge，而用Ridge正则化的回归是稳定的，那么RFE就是稳定的。

sklearn.feature_selection.RFE(estimator, *, n_features_to_select=None,
        step=1, verbose=0, importance_getter='auto')

<strong>estimator</strong> <em>Estimator instance</em>
一种带有""拟合""方法的监督学评估器，它提供关于特征重要性的信息(例如"coef_"、"feature_importances_")。

<strong>n_features_to_select</strong> <em>int or float, default=None</em>
要选择的功能的数量。
如果'None'，则选择一半的特性。
如果为整数，则该参数为要选择的特征的绝对数量。
如果浮点数在0和1之间，则表示要选择的特征的分数。

<strong>step</strong> <em>int or float, default=1</em>
如果大于或等于1，那么'step'对应于每次迭代要删除的(整数)特征数。
如果在(0.0,1.0)范围内，则'step'对应于每次迭代中要删除的特性的百分比(向下舍入)。

<strong>verbose</strong> <em>int, default=0</em>
控制输出的冗长。

<strong>importance_getter</strong> <em>str or callable, default='auto'</em>
如果是'auto'，则通过估计器的'coef_'或'feature_importances_'属性使用特征重要性。


lr = LinearRegression(normalize=True)
lr.fit(X,Y)
# 当且仅当剩下最后一个特性时停止搜索
rfe = RFE(lr, n_features_to_select=1, verbose =3)
rfe.fit(X,Y)
ranks["RFE"] = ranking(list(map(float, rfe.ranking_)),
                       colnames, order=-1)

Fitting estimator with 12 features.
...
Fitting estimator with 2 features.

<h3 id="YYDStopic-12">RFECV</h3><strong>递归特征消除交叉验证。</strong>
Sklearn提供了 <code>RFE</code> 包，可以用于特征消除，还提供了 <code>RFECV</code> ，可以通过交叉验证来对的特征进行排序。

# 实例化估计器和特征选择器
svr_mod = SVR(kernel="linear")
rfecv = RFECV(svr_mod, cv=5)

# 训练模型
rfecv.fit(X, Y)
ranks["RFECV"] = ranking(list(map(float, rfecv.ranking_)), colnames, order=-1)
# Print support and ranking
print(rfecv.support_)
print(rfecv.ranking_)
print(X.columns)

<h3 id="YYDStopic-13">LarsCV</h3><strong>最小角度回归模型(Least Angle Regression)交叉验证。</strong>

# 删除第二步中不重要的特征
# X = X.drop('sex', axis=1)
# 实例化
larscv = LarsCV(cv=5, normalize=False)
# 训练模型
larscv.fit(X, Y)
ranks["LarsCV"] = ranking(list(map(float, larscv.ranking_)), colnames, order=-1)
# 输出r方和估计alpha值
print(larscv.score(X, Y))
print(larscv.alpha_)

以上是两个交叉验证，在对特征重要性要求高时可以使用。
因运行时间有点长，这里大家可以自行运行得到结果。

<h3 id="YYDStopic-14">创建特征排序矩阵</h3>创建一个空字典来存储所有分数，并求其平均值。

r = {}
for name in colnames:
    r[name] = round(np.mean([ranks[method][name] 
                             for method in ranks.keys()]), 2)
methods = sorted(ranks.keys())
ranks["Mean"] = r
methods.append("Mean")

print("\t%s" % "\t".join(methods))
for name in colnames:
    print("%s\t%s" % (name, "\t".join(map(str, 
                         [ranks[method][name] for method in methods]))))

	Lasso	LinReg	RF	RFE	Ridge	rlasso/Stability	Mean
Open	1.0	1.0	0.02	0.91	0.47	1.0	0.73
High	0.14	0.0	0.1	0.36	0.06	1.0	0.28
Low	0.02	0.0	0.08	0.73	0.05	0.76	0.27
Close	0.14	0.0	0.64	0.55	0.32	1.0	0.44
Adj Close	0.02	1.0	1.0	0.82	1.0	0.99	0.8
Volume	0.0	0.0	0.0	0.0	0.0	0.0	0.0
H-L	0.0	0.0	0.0	0.45	0.01	0.0	0.08
O-C	0.85	1.0	0.0	1.0	0.53	1.0	0.73
3day MA	0.0	0.0	0.0	0.27	0.01	1.0	0.21
10day MA	0.0	0.0	0.02	0.09	0.0	0.27	0.06
30day MA	0.0	0.0	0.0	0.18	0.0	0.75	0.16
Std_dev	0.0	0.0	0.0	0.64	0.01	0.0	0.11

<h3 id="YYDStopic-15">绘制特征重要性排序图</h3>将平均得到创建<strong>DataFrame</strong>数据框，从高到低排序，并利用可视化方法将结果展示出。
这样就一目了然，每个特征重要性大小。

meanplot = pd.DataFrame(list(r.items()), columns= ['Feature','Mean Ranking'])
# 排序
meanplot = meanplot.sort_values('Mean Ranking', ascending=False)
g=sns.factorplot(x="Mean Ranking", y="Feature", data = meanplot, kind="bar", 
               size=14, aspect=1.9, palette='coolwarm')

<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/CBC1V6TTLbYo7n7x3u3cfJ2l6p8AeCdxTvX7CvcwOuGlXaEb5ayJPI35c5I3e7xFpT8ObxBKQ3REIMLibI85rLw/640">

推荐阅读
1、<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&amp;mid=2652586506&amp;idx=2&amp;sn=8b226620468ebf3b69c514401ca4b735&amp;chksm=84656a40b312e356a765a4f64cc27d3315bbdbdc8ccd88c4eccf9b431b64d131f6329e5d1bb7&amp;scene=21#wechat_redirect" textvalue="一文详解 RNN 股票预测实战（Python代码）" linktype="text" imgurl="" imgdata="null" data-itemshowtype="11" tab="innerlink" data-linktype="2">一文详解 RNN 股票预测实战（Python代码）</a>
2、<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&amp;mid=2652581207&amp;idx=2&amp;sn=bb077138fd4b0e8b81e2e11a44682f01&amp;chksm=8465051db3128c0ba7fcff26fb50b72c284622cd9e7eefc000fa8b456c8f3b5206cd9d4ce5e6&amp;scene=21#wechat_redirect" textvalue="关于“数据分析”如何快速入门一些基本思路" linktype="text" imgurl="" imgdata="null" data-itemshowtype="11" tab="innerlink" data-linktype="2">关于“数据分析”如何快速入门一些基本思路</a>
3、<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzA4MjEyNTA5Mw==&amp;mid=2652587312&amp;idx=2&amp;sn=e49850868c977904ac5d803c43acabb7&amp;chksm=84656d7ab312e46c7de429cac932623c276ce51a47e567144cd70e8c5ab9ad1b6351652b38a0&amp;scene=21#wechat_redirect" textvalue="超级攻略！Pandas\NumPy\Matrix 用于金融数据准备" linktype="text" imgurl="" imgdata="null" data-itemshowtype="11" tab="innerlink" data-linktype="2">超级攻略！Pandas\NumPy\Matrix 用于金融数据准备</a>




<h2>Handy Automation Scripts</h2>
<div id="AutomationScriptstoc"><a href="#AutomationScriptstopic-0" target="_self">Your Friend For Reading Articles</a><br><a href="#AutomationScriptstopic-1" target="_self">One-Click Sketching</a><br><a href="#AutomationScriptstopic-2" target="_self">Stay Up With Top Headlines</a><br><a href="#AutomationScriptstopic-3" target="_self">Stocks Updates On The Start</a><br><a href="#AutomationScriptstopic-4" target="_self">Bulk Email Sender</a><br><a href="#AutomationScriptstopic-5" target="_self">No Time For EDA</a><br><a href="#AutomationScriptstopic-6" target="_self">Smart Login To Different Sites</a><br><a href="#AutomationScriptstopic-7" target="_self">Be Safe &amp; Watermark Your Images</a><br><a href="#AutomationScriptstopic-8" target="_self">Remember That</a><br><a href="#AutomationScriptstopic-9" target="_self">Google Scraper</a><br><a href="#AutomationScriptstopic-10" target="_self">Converting PDF To Audio Files</a><br><a href="#AutomationScriptstopic-11" target="_self">Playing Random Music From The List</a><br><a href="#AutomationScriptstopic-12" target="_self">No BookMarks Anymore</a><br><a href="#AutomationScriptstopic-13" target="_self">Getting Wikipedia Information</a><br><a href="#AutomationScriptstopic-14" target="_self">Smart Weather Information</a><br><a href="#AutomationScriptstopic-15" target="_self">Sending Emails With Attachment</a><br><a href="#AutomationScriptstopic-16" target="_self">Shorting URLs</a><br><a href="#AutomationScriptstopic-17" target="_self">Downloading Youtube Videos</a><br><a href="#AutomationScriptstopic-18" target="_self">Cleaning Download Folder</a><br><a href="#AutomationScriptstopic-19" target="_self">Sending Text Messages</a><br><a href="#AutomationScriptstopic-20" target="_self">Converting hours to seconds</a><br><a href="#AutomationScriptstopic-21" target="_self">Raising a number to the power</a><br><a href="#AutomationScriptstopic-22" target="_self">If/else statement</a><br><a href="#AutomationScriptstopic-23" target="_self">Convert images to JPEG</a><br><a href="#AutomationScriptstopic-24" target="_self">Download Google images</a><br><a href="#AutomationScriptstopic-25" target="_self">Read battery level of Bluetooth device</a><br><a href="#AutomationScriptstopic-26" target="_self">Delete Telegram messages</a><br><a href="#AutomationScriptstopic-27" target="_self">Get song lyrics</a><br><a href="#AutomationScriptstopic-28" target="_self">Heroku hosting</a><br><a href="#AutomationScriptstopic-29" target="_self">Github activity</a><br><a href="#AutomationScriptstopic-30" target="_self">Removing duplicate code</a><br><a href="#AutomationScriptstopic-31" target="_self">Sending emails</a><br><a href="#AutomationScriptstopic-32" target="_self">Find specific files on your system</a><br><a href="#AutomationScriptstopic-33" target="_self">Generating random passwords</a><br><a href="#AutomationScriptstopic-34" target="_self">Print odd numbers</a><br><a href="#AutomationScriptstopic-35" target="_self">Get date value</a><br><a href="#AutomationScriptstopic-36" target="_self">Removing items from a list</a><br><a href="#AutomationScriptstopic-37" target="_self">Count list items</a><br><a href="#AutomationScriptstopic-38" target="_self">Text grabber</a><br><a href="#AutomationScriptstopic-39" target="_self">Tweet search</a><br></div></center>
<br>
<br>
<a href="https://medium.com/pythoneers/10-really-helpful-automation-scripts-you-need-to-try-using-python-7dda9408fa74">Automation scripts you need to try</a>.
<h3 id="AutomationScriptstopic-0">Your Friend For Reading Articles</h3>
This automation script scrapes the article content from medium and then reads it loud and clear. 
If you change the script a little bit then it can be used to read articles from other websites too. 
I use this script when I am not in the mood to read but to listen.
<b>Libraries:-</b>
<b>Beautiful Soup</b> is a Python package for parsing HTML and XML documents.
<b>requests</b> Let’s You Establish a Connection Between Client and Server With Just One Line of Code.
<b>Pyttsx3, </b>converts text into speech, with control over rate, frequency, and voice.
import pyttsx3
import requests
from bs4 import BeautifulSoup
engine = pyttsx3.init('sapi5')
voices = engine.getProperty('voices')
newVoiceRate = 130                       ## Reduce The Speech Rate
engine.setProperty('rate',newVoiceRate)
engine.setProperty('voice', voices[1].id)
def speak(audio):
  engine.say(audio)
  engine.runAndWait()
text = str(input("Paste article\n"))
res = requests.get(text)
soup = BeautifulSoup(res.text,'html.parser')
articles = []
for i in range(len(soup.select('.p'))):
    article = soup.select('.p')[i].getText().strip()
    articles.append(article)
text = " ".join(articles)
speak(text)
# engine.save_to_file(text, 'test.mp3') ## If you want to save the speech as a audio file
engine.runAndWait()
<h4>Script Applications:-</h4>
AudioBooks
Read Wikipedia Articles
Q&amp;A Bots
<h3 id="AutomationScriptstopic-1">One-Click Sketching</h3>
I just love this script. 
It lets you convert your amazing images into a pencil sketch with a few lines of code. 
You can use this script to impress someone by gifting them their pencil sketch.
<b>Libraries:-
Opencv, </b>is a python library that is designed to solve Computer Vision problems. 
It has many inbuilt methods to perform the biggest tasks in fewer lines of code.
  """ Photo Sketching Using Python """
  import cv2
  img = cv2.imread("elon.jpg")
  ## Image to Gray Image
  gray_image = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
  ## Gray Image to Inverted Gray Image
  inverted_gray_image = 255-gray_image
  ## Blurring The Inverted Gray Image
  blurred_inverted_gray_image = cv2.GaussianBlur(inverted_gray_image, (19,19),0)
  ## Inverting the blurred image
  inverted_blurred_image = 255-blurred_inverted_gray_image
  ### Preparing Photo sketching
  sketck = cv2.divide(gray_image, inverted_blurred_image,scale= 256.0)
  cv2.imshow("Original Image",img)
  cv2.imshow("Pencil Sketch", sketck)
  cv2.waitKey(0)
<img class="lazy" data-src="https://miro.medium.com/max/875/1*LOUJzRP_JJwOQbqswIJKQA.png">
Result — Image By Author
<h4>Script Applications:-</h4>
Building OCR Software
Detecting Number Plate
Detecting Edges, Creating Funky Images
<h3 id="AutomationScriptstopic-2">Stay Up With Top Headlines</h3>
Everyone wants to stay up to date with the latest and trending news of your country. 
This automation script can do the work for you. 
It uses an external API to extract all the trending news of your country, state, city, etc. 
This script increases productivity and knowledge.
The external API that is used in the script is news API by google. 
It offers the latest and trending news, different articles about a particular topic like tesla, business headlines, articles published by a journal, trending news between a timeline, etc.
<b>Libraries:-
Pyttsx3 </b>is a text-to-speech Library In Python<b>. 
&amp; Requests.</b>
import pyttsx3 
import requests

engine = pyttsx3.init('sapi5')
voices = engine.getProperty('voices')
engine.setProperty('voice', voices[0].id)

def speak(audio):
    engine.say(audio)
    engine.runAndWait()

def trndnews(): 
    url = " http://newsapi.org/v2/top-headlines?country=us&amp;apiKey=GET_YOUR_OWN"
    page = requests.get(url).json() 
    article = page["articles"] 
    results = [] 
    for ar in article: 
        results.append(ar["title"]) 
    for i in range(len(results)): 
        print(i + 1, results[i]) 
    speak(results)
    
trndnews() 


<h4>Script Applications:-</h4>
ML Fake News Detection.
<h3 id="AutomationScriptstopic-3">Stocks Updates On The Start</h3>
Buying and selling stocks is one of the trendiest ways of earning money nowadays. 
A stock known as equity represents the ownership of a fraction of a corporation.
This automation script will give you the stock price of stock whenever you open your desktop. 
Also with the same script, you can generate past years' data of the stock for better knowledge of the stock.
To Run This Script On The Start, You Can Simply Add it to the <a href="https://stackoverflow.com/questions/4438020/how-to-start-a-python-file-while-windows-starts" target="_blank">window startup folder</a>. 
Just Press win+r and then type <code>shell:startup</code> paste your script there.
<b>Libraries:- Pyfinance, yahoo_fin</b>
''' Live price of The Stock '''
from yahoo_fin import stock_info
live_price = stock_info.get_live_price("TSLA")
print(round(live_price,2)," USD")


''' Stock Price From 2019 to 2021 '''
import yfinance as yf
stockSymbol = 'TSLA'
stockData = yf.Ticker(stockSymbol)
stockDf_past_2 = stockData.history(period='5d', start='2019-1-1', end='2021-12-31')
print(stockDf_past_2)

<h4>Script Applications:-</h4>
This Script Can Be Used For Creating Algo Trading Bots, Stock Analysis, Researches, etc.
<h3 id="AutomationScriptstopic-4">Bulk Email Sender</h3>
In My Previous Article About <a href="https://medium.com/pythoneers/10-really-helpful-automation-scripts-you-need-to-try-using-python-7dda9408fa74">Automation Scripts</a>, I talked about how you can automate sending emails with attachments. 
This automation script is a level up to that script. 
It allows you to send multiple emails at a time with the same or different data, and messages.
<b>Libraries:-
Email, </b>is a python library that is used to manage emails.
<b>Smtlib</b>, defines a session object over which we can send emails and files.
<b>Pandas</b>, Reading the CSV or Excel file.
import smtplib 
from email.message import EmailMessage
import pandas as pd

def send_email(remail, rsubject, rcontent):
    email = EmailMessage()                          ## Creating a object for EmailMessage
    email['from'] = 'The Pythoneer Here'            ## Person who is sending
    email['to'] = remail                            ## Whom we are sending
    email['subject'] = rsubject                     ## Subject of email
    email.set_content(rcontent)                     ## content of email
    with smtplib.SMTP(host='smtp.gmail.com',port=587)as smtp:     
        smtp.ehlo()                                 ## server object
        smtp.starttls()                             ## used to send data between server and client
        smtp.login(SENDER_EMAIL,SENDER_PSWRD)       ## login id and password of gmail
        smtp.send_message(email)                    ## Sending email
        print("email send to ",remail)              ## Printing success message



if __name__ == '__main__':
    df = pd.read_excel('list.xlsx')
    length = len(df)+1

    for index, item in df.iterrows():
        email = item[0]
        subject = item[1]
        content = item[2]

        send_email(email,subject,content)


<h4>Script Applications:-</h4>
Can Be Used For Sending Newsletters.
Stay Connected With All Your Clients.
Become a Genuine Medium Member With The Cost of One Pizza. 
It’s Just <b>5$ </b>a month. 
You Can Use <a href="https://abhayparashar31.medium.com/membership">My Referral Link</a> To Become One. 
“Don’t Just Read, Support The Writer Too”
<h3 id="AutomationScriptstopic-5">No Time For EDA</h3>
Eda(exploratory data analysis) refers to the initial investigation done to understand the data more clearly. 
It is one of the most important stages of the data science project lifecycle. 
It is also referred to as the decision-making stage because, by the output analysis of this stage model, algorithms, parameters, weights everything is chosen.
Anyone who knows a little bit about data science will agree with me that EDA is a time-consuming process. 
Well, not anymore. 
This automation script used an amazing library <a href="https://github.com/man-group/dtale" target="_blank">Dtale</a> and generate a quick summary report of the data given to it with just one line of code.
There are also many similar libraries that can also generate a quick summary like Dtale for example Autoviz, Sweetviz, etc.
import seaborn as sns

### Printing Inbuilt Datasets of Seaborn Library
print(sns.get_dataset_names())


### Loading Titanic Dataset
df=sns.load_dataset('titanic')

### Importing The Library
import dtale

#### Generating Quick Summary
dtale.show(df)

<h4>Script Applications:-</h4>
Gives a Quick Review About The Dataset. 
Best for beginners.
<h3 id="AutomationScriptstopic-6">Smart Login To Different Sites</h3>
To prevent yourself from hackers you should always log out from your social media account like Facebook, Twitter, Instagram, etc. 
Once you are done with your session. 
Entering use id and password each time is not very joyful work to do. 
This automation script will log in to different sites for you and once you are done the session is closed automatically.
<b>Libraries:-
Selenium </b>is an open-source web automation tool used for testing and automation.
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
import time
PATH = 'chromedriver.exe' ##Same Directory as Python Program

driver = webdriver.Chrome(executable_path=PATH)


##### Login Functions 
def login_fb(fid,fpsd):
    driver.get("https://www.facebook.com/")

    def login(id,password):
        email = driver.find_element_by_id("email")
        email.send_keys(id)
        Password = driver.find_element_by_id("pass")
        Password.send_keys(password)
        button = driver.find_element_by_id("u_0_d_Dw").click()
        pass

    login(fid,fpsd)

### Like Facebook Write Login Function For Other Platforms Too.
def login_insta():
    pass

def login_medium():
    pass

def login_twitter():
    pass

def login_linkedin():
    pass


login_fb("YOUR_LOGIN_ID", "YOUR_PASSWORD")
login_insta()
login_medium()
login_twitter()
login_linkedin()

<a href="https://medium.com/pythoneers/automate-facebook-posts-using-python-4d17b3a26100">Related Article</a>
This Automation Script Saves Time, and Increase Productivity.
<h3 id="AutomationScriptstopic-7">Be Safe &amp; Watermark Your Images</h3>
Internet is filled with digital thieves, who always look for other people’s work to use it as their own without giving proper attribution. 
Images are one of the most stoled properties on the internet. 
You clicked a masterpiece, upload it on the internet to showcase it to the world and some thief come and stole it and published it with their own name. 
To prevent this you should always watermark all images with your unique sign. 
This automation script will do the work for you.
<b>Libraries:- Opencv</b>
<b>Process:- </b>We are basically overlaying one image (watermark) on top of another image (original image) with center coordinates. 
with little changes and a loop, you can watermark hundreds of images in minutes.
import cv2
watermark = cv2.imread("watermark.png")
img = cv2.imread("no-problem.jpg")


h_img, w_img, _ = img.shape
center_x = int(w_img/2)
center_y = int(h_img/2)

h_watermark, w_watermark, _ = watermark.shape
top_y = center_y - int(h_watermark/2)
left_x = center_x - int(w_watermark/2)
bottom_y = top_y + h_watermark
right_x = left_x + w_watermark

position = img[top_y:bottom_y, left_x:right_x]
result = cv2.addWeighted(position, 1, watermark, 0.5, 0)

img[top_y:bottom_y, left_x:right_x] = result
cv2.imwrite("watermarked_image.jpg", img)
cv2.imshow("Image With Watermark", img)
cv2.waitKey(0)
cv2.destroyAllWindows()

<h4>Script Applications:-</h4>
Overlaying Two Images.
Image Filtering &amp; Masking.
<h3 id="AutomationScriptstopic-8">Remember That</h3>
Sometimes when working on a project you get disturbed by some other task that also needs to be done the same day and most of the time you forgot it. 
Now anymore, this script will remember everything for you and remind you about it after a certain time as a desktop notification.
<b>Libraries:- win10toast </b>is python library that sends a desktop notification.
from win10toast import ToastNotifier
import time
toaster = ToastNotifier()

header = input("What You Want Me To Remember\n")
text = input("Releated Message\n")
time_min=float(input("In how many minutes?\n"))

time_min = time_min * 60
print("Setting up reminder..")
time.sleep(2)
print("all set!")
time.sleep(time_min)
toaster.show_toast(f"{header}", f"{text}", duration=10, threaded=True)
while toaster.notification_active(): time.sleep(0.005)     
<h3 id="AutomationScriptstopic-9">Google Scraper</h3>
Google is one of the biggest and most used search engines. 
There are over 3.8 million searches done per minute around the globe. 
Most of them are just queries that get answered on the first result page. 
This script will scrape the results from google search and generate answers without even going to actual google.
<b>Libraries:- requests, BeautifulSoup, and Tkinter </b>a GUI library in python.
<b>Process:- </b>At first with the help of Tkinter, a GUI is created that is used to take the query of the user. 
Once the user entered the query it is sent to the google scraper function that scrapes the results based on the query and generates the answers. 
Then with the help of the showinfo class in Tkinter, the results are shown as a pop-up notification.

from tkinter import *
from tkinter.messagebox import showinfo
from bs4 import BeautifulSoup 
import requests

headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3'}

def action():
    ### Code For Receiving Query
    query=textF.get()
    textF.delete(0,END)
    print(query)
    def google(query):
        query = query.replace(" ","+")
        try:
            url = f'https://www.google.com/search?q={query}&amp;oq={query}&amp;aqs=chrome..69i57j46j69i59j35i39j0j46j0l2.4948j0j7&amp;sourceid=chrome&amp;ie=UTF-8'
            res = requests.get(url,headers=headers)
            soup = BeautifulSoup(res.text,'html.parser')
        except:
            print("Make sure you have a internet connection")
        try:
            try:
                ans = soup.select('.RqBzHd')[0].getText().strip()
            
            except:
                try:
                    title=soup.select('.AZCkJd')[0].getText().strip()
                    try:
                        ans=soup.select('.e24Kjd')[0].getText().strip()
                    except:
                        ans=""
                    ans=f'{title}\n{ans}'
                    
                except:
                    try:
                        ans=soup.select('.hgKElc')[0].getText().strip()
                    except:
                        ans=soup.select('.kno-rdesc span')[0].getText().strip()
        
        except:
            ans = "can't find on google"
        return ans
    
    result = google(str(query))
    showinfo(title="Result For Your Query", message=result)



main = Tk()
main.geometry("300x100")
main.title("Karl")
top = Frame(main)
top.pack(side=TOP)

textF = Entry(main,font=("helvetica",14,"bold"))
textF.focus()
textF.pack(fill=X,pady=5)
textF.insert(0,"Enter your query")
textF.configure(state=DISABLED)

def on_click(event):
    textF.configure(state=NORMAL)
    textF.delete(0,END)
    textF.unbind('&lt;Button-1&gt;',on_click_id)

on_click_id = textF.bind('&lt;Button-1&gt;',on_click)



btn = Button(main,text="Search",font=("Verdana",16),command=action)
btn.pack()
main.mainloop()


<h3 id="AutomationScriptstopic-10">Converting PDF To Audio Files</h3>This automation task is one of my favorites. 
I use it almost every day. 
Here our task is to write a python script that can convert pdfs into audio files.
<b>Libraries:- 
PyPDF, is a library in python that is used to read text from a pdf file.
Pyttsx3, is a text-to-speech convert library.
Process:- </b>We first use the PyPDF library to read text from the pdf file and then we convert the text into speech and save it as an audio file.

import pyttsx3,PyPDF2
pdfreader = PyPDF2.PdfFileReader(open('story.pdf','rb'))
speaker = pyttsx3.init()
for page_num in range(pdfreader.numPages):   
    text = pdfreader.getPage(page_num).extractText()  ## extracting text from the PDF
    cleaned_text = text.strip().replace('\n',' ')  ## Removes unnecessary spaces and break lines
    print(cleaned_text)    ## Print the text from PDF
    #speaker.say(cleaned_text)    ## Let The Speaker Speak The Text
    speaker.save_to_file(cleaned_text,'story.mp3')  ## Saving Text In a audio file 'story.mp3'
    speaker.runAndWait()
speaker.stop()

<h4>Script Applications:-</h4>

Audiobooks.
Storyteller.
By Adding Little Bit of Web Scraping, The Same Script Can Be Used To Read Articles From Sites Like Medium and WordPress.
<h3 id="AutomationScriptstopic-11">Playing Random Music From The List</h3>I have a good collection of songs that I love to listen to while working on my projects. 
For a music lover like me, this script is very useful. 
It randomly picks a song from a folder of songs.
<b>Libraries:-
OS, is a module in python that deals with different tasks related to operating systems Like Opening, deleting, renaming, closing a file, etc.
random, module provides randomness.
Process:- </b>At First With The Help of the OS Module We Detect All The Music Files Inside The Folder and store them in a list, then we generate a random number in the range of length of the folder. 
After Generating the random number we use it to run the music file using <code>os.startfile()</code> function.

music_dir = 'G:\\new english songs'
songs = os.listdir(music_dir)
song = random.randint(0,len(songs))
print(songs[song])  ## Prints The Song Name
os.startfile(os.path.join(music_dir, songs[0])) 

<h4>Script Features:-</h4>
Playing Music, Videos.
Can Be Used To Run Random Files Inside a Folder.
<h3 id="AutomationScriptstopic-12">No BookMarks Anymore</h3>Every day before going to bed i search the internet to find some good content to read the next day. 
Most of the time i bookmark the website or article i came across but day by day my bookmarks have increased so much that now i have over 100+ bookmarks around my browsers. 
So i figured out a different way to tackle this problem with the help of python. 
Now i copy-paste the link to those websites in a text file and every morning i run my script that opens all those websites again in my browser.
<b>Libraries:-
webbrowser, is a library in python that opens URLs inside the default browser automatically.
Process:- </b>The Process is pretty simple, the script reads different URLs from the files and opens each URL in the browser with the help of a web browser's library.
<img class="lazy" data-src="https://miro.medium.com/max/875/1*cT9CLCOmVkVls_Un0OXCAg.png">
<h3 id="AutomationScriptstopic-13">Getting Wikipedia Information</h3>Wikipedia is a great source of knowledge and information. 
This script lets you fetch every information from Wikipedia directly from your command line.
<b>Libraries:-
Wikipedia is a python library that makes parsing data from Wikipedia super easy.</b>
Working:- The Script Will Takes a Query, Parse The Results From Wikipedia For It and Then Speaks The Results Out Loud.
import wikipedia
import pyttsx3 
engine = pyttsx3.init('sapi5')
voices = engine.getProperty('voices')
engine.setProperty('voice', voices[0].id)
def speak(audio):
    engine.say(audio)
    engine.runAndWait()
query = input("What You Want To Ask ??")
results = wikipedia.summary(query, sentences=2)
speak("According to Wikipedia\n")
print(results)
speak(results)

<h3 id="AutomationScriptstopic-14">Smart Weather Information</h3>No one wants to get stuck in the rain or heavy snowfall. 
Everyone wants to be updated with the weather forecast. 
This automation script will send weather information as a desktop notification whenever you opened your pc.
<b>Libraries:-
requests, the library that makes sending HTTP requests simpler and more human-friendly with one single line of code it can establish a connection between client and target server.
Beautiful Soup </b>is a Python package for parsing HTML and XML documents.
ToastNotifier, a python library that sends a desktop notification.

headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3'}

def weather(city):
    city=city.replace(" ","+")
    res = requests.get(f'https://www.google.com/search?q={city}&amp;oq={city}&amp;aqs=chrome.0.35i39l2j0l4j46j69i60.6128j1j7&amp;sourceid=chrome&amp;ie=UTF-8',headers=headers)
    soup = BeautifulSoup(res.text,'html.parser')   
    location = soup.select('#wob_loc')[0].getText().strip()  
    current_time = soup.select('#wob_dts')[0].getText().strip()    
    info = soup.select('#wob_dc')[0].getText().strip() 
    weather = soup.select('#wob_tm')[0].getText().strip()
    information = f"{location} \n {current_time} \n {info} \n {weather} °C "
    
    toaster = ToastNotifier()
    toaster.show_toast("Weather Information",
    f"{information}",
    duration=10,
    threaded=True)
    while toaster.notification_active(): time.sleep(0.005)   

# print("enter the city name")
# city=input()
city = "London"
city=city+" weather"
weather(city)

<a rel="noopener" href="/pythoneers/python-script-that-sends-weather-information-as-notification-693aca5edc90">Understand The Code Better</a>

<h3 id="AutomationScriptstopic-15">Sending Emails With Attachment</h3>As a freelancer every day, I need to send multiple emails that look almost the same with little difference. 
This script helps us to send multiple emails at the same time with different names and content.
<b>Libraries:-
Email, is a python library that is used to manage emails.
Smtlib, defines a session object over which we can send emails and files.</b>
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.mime.base import MIMEBase
from email import encoders
body = '''
Hello, Admin
I am attaching The Sales Files With This Email.
This Year We Got a Wooping 200% Profit One Our Sales.

Regards,
Team Sales
xyz.com
'''
#Sender Email addresses and password
senders_email = 'deltadelta371@gmail.com'
sender_password = 'delta@371'
reveiver_email = 'parasharabhay13@gmail.com'

#MIME Setup
message = MIMEMultipart()
message['From'] = senders_email
message['To'] = reveiver_email
message['Subject'] = 'Sales Report 2021-- Team Sales'
message.attach(MIMEText(body, 'plain'))

## File
attach_file_name = 'car-sales.csv'
attach_file = open(attach_file_name, 'rb') 
payload = MIMEBase('application', 'octate-stream')
payload.set_payload((attach_file).read())
encoders.encode_base64(payload) 
payload.add_header('Content-Decomposition', 'attachment', filename=attach_file_name)
message.attach(payload)

#SMTP Connection For Sending Email
session = smtplib.SMTP('smtp.gmail.com', 587) #use gmail with port
session.starttls() #enable security
session.login(senders_email, sender_password) #login with mail_id and password
text = message.as_string()
session.sendmail(senders_email, reveiver_email, text)
session.quit()
print('Mail Sent')

<h3 id="AutomationScriptstopic-16">Shorting URLs</h3>Sometimes those big URLs become very annoying to read and share. 
This script uses an external API to short the URL.
from __future__ import with_statement
import contextlib
try:
	from urllib.parse import urlencode
except ImportError:
	from urllib import urlencode
try:
	from urllib.request import urlopen
except ImportError:
	from urllib2 import urlopen
import sys

def make_tiny(url):
	request_url = ('http://tinyurl.com/api-create.php?' + 
	urlencode({'url':url}))
	with contextlib.closing(urlopen(request_url)) as response:
		return response.read().decode('utf-8')

def main():
	for tinyurl in map(make_tiny, sys.argv[1:]):
		print(tinyurl)

if __name__ == '__main__':
	main()
    

'''

-----------------------------OUTPUT------------------------
python url_shortener.py https://www.wikipedia.org/
https://tinyurl.com/buf3qt3

'''
    

<h3 id="AutomationScriptstopic-17">Downloading Youtube Videos</h3>I use youtube for 2–3 hours every day sometimes even more. 
Most of my learnings come from youtube because it is free and contains a vast amount of information. 
There are certain videos that stand out from others that I want to store with me to watch later even when I don’t have an internet connection. 
This script does the job for me, by downloading the youtube video for me. 
It uses an external API to do the job.
<b>Libraries:-
pytube, is a lightweight Python library for downloading youtube videos.
Tkinter, is one of the most famous and useful GUI Development Library That Makes It Super Easy to Create Awesome GUIs With Fewer Efforts.</b>
Why Tkinter:-
The Whole Concept of the script is to create an interface through which you can download youtube videos by just putting a link. 
That Interface can’t be our CLI so we are going to create a simple GUI for our script. 
You Can make it even better by <a rel="noopener" href="/pythoneers/python-without-console-330be0c288ac">running your python code without a console with just one click</a>.

<figure><figcaption><a href="https://gist.github.com/Abhayparashar31/9508ecdb5fa7ca16f6283db56cf7a604" rel="noopener ugc nofollow" target="_blank">Complete GUI Code</a>
from pytube import  YouTube  
import pytube  
try:
    video_url = 'https://www.youtube.com/watch?v=lTTajzrSkCw'   
    youtube = pytube.YouTube(video_url)  
    video = youtube.streams.first()  
    video.download('C:/Users/abhay/Desktop/')  
    print("Download Successfull !!")
except:
    print("Something Went Wrong !!")

<h3 id="AutomationScriptstopic-18">Cleaning Download Folder</h3>One of the messiest things in this world is the download folder of a developer. 
When writing a blog, working on a project, something similar we just download images and save them with ugly and funny names like asdfg.jpg.
This python script will clean your download folder by renaming and deleting certain files based on some condition.
<b>Libraries:- OS</b>
import os
folder_location = 'C:\\Users\\user\\Downloads\\demo'

os.chdir(folder_location)
list_of_files = os.listdir()

## Selecting All Images
images = [content for content in list_of_files if content.endswith(('.png','.jpg','.jpeg'))] 

for index, image in  enumerate(images):
    os.rename(image,f'{index}.png')


## Deleting All Images
################## Write Your Script Here ######## Try To Create Your Own Code 

<h3 id="AutomationScriptstopic-19">Sending Text Messages</h3>There are many free text message services available on the internet like Twillo, fast2sms, etc.
Fast2sms provide 50 free messages with a prebuild template to connect your script with their API. 
This script will let us send text SMS to any number directly through our command-line interface.
import requests
import json
def send_sms(number, message):
    url = 'https://www.fast2sms.com/dev/bulk'
    params = {
    'authorization': 'FIND_YOUR_OWN',
    'sender_id': 'FSTSMS',
    'message': message,
    'language': 'english',
    'route': 'p',
    'numbers': number
    }
    response = requests.get(url, params=params)
    dic = response.json()
    #print(dic)
    return dic.get('return')


num = int(input("Enter The Number:\n"))
msg = input("Enter The Message You Want To Send:\n")
s = send_sms(num, msg)
if s:
    print("Successfully sent")
else:
    print("Something went wrong..")

<h3 id="AutomationScriptstopic-20">Converting hours to seconds</h3>
When working on projects that require you to convert hours into seconds, you can use the following Python script.
<code>def convert(seconds):
    seconds = seconds % (24 * 3600)
    hour = seconds // 3600
    seconds %= 3600
    minutes = seconds // 60
    seconds %= 60
    return "%d:%02d:%02d" % (hour, minutes, seconds)
# Driver program
n = 12345
print(convert(n))</code>
<h3 id="AutomationScriptstopic-21">Raising a number to the power</h3>
Another popular Python script calculates the power of a number. For example, 2 to the power of 4. Here, there are at least three methods to choose from. You can use the <em>math.pow(),</em> <em>pow(),</em> or **. Here is the script.
<code>import math
# Assign values to x and n
x = 4
n = 3
# Method 1
power = x ** n
print("%d to the power %d is %d" % (x,n,power))
# Method 2
power = pow(x,n)
print("%d to the power %d is %d" % (x,n,power))
# Method 3
power = math.pow(2,6.5)
print("%d to the power %d is %5.2f" % (x,n,power))</code>
<h3 id="AutomationScriptstopic-22">If/else statement</h3>
This is arguably one of the most used <a href="https://codesource.io/ways-to-implement-python-switch-case-statement/">statements in Python</a>. It allows your code to execute a function if a certain condition is met. Unlike other languages, you don’t need to use curly braces. Here is a simple if/else script.
<code># Assign a value
number = 50
# Check the is more than 50 or not
if (number &gt;= 50):
    print("You have passed")
else:
    print("You have not passed")</code>
<h3 id="AutomationScriptstopic-23">Convert images to JPEG</h3>
The most conventional systems rarely accept image formats such as PNG. As such, you’ll be required to convert them into JPEG files. Luckily, there’s a Python script that allows you to automate this process.
<code>import os
import sys
from PIL import Image
if len(sys.argv) &gt; 1:
    if os.path.exists(sys.argv[1]):
        im = Image.open(sys.argv[1])
        target_name = sys.argv[1] + ".jpg"
        rgb_im = im.convert('RGB')
        rgb_im.save(target_name)
        print("Saved as " + target_name)
    else:
        print(sys.argv[1] + " not found")
else:
    print("Usage: convert2jpg.py &lt;file&gt;")</code>
<h3 id="AutomationScriptstopic-24">Download Google images</h3>
If you are working on a project that demands many images, there’s a Python script that enables you to do so. With it, you can download hundreds of images simultaneously. However, you should avoid violating copyright terms. <a href="https://awesomeopensource.com/project/hardikvasa/google-images-download">Click here for more information</a>.
<h3 id="AutomationScriptstopic-25">Read battery level of Bluetooth device</h3>
This script allows you to read the battery level of your Bluetooth headset. This is especially crucial if the level does not display on your PC. However, it does not support all Bluetooth headsets. For it to run, you need to have Docker on your system. <a href="https://awesomeopensource.com/project/TheWeirdDev/Bluetooth_Headset_Battery_Level">Click here for more information</a>.
<h3 id="AutomationScriptstopic-26">Delete Telegram messages</h3>
Let’s face it, messaging apps do chew up much of your device’s storage space. And Telegram is no different. Luckily, this script allows you to delete all supergroups messages. You need to enter the supergroup’s information for the script to run. <a href="https://awesomeopensource.com/project/gurland/telegram-delete-all-messages">Click here for more information.</a>
<h3 id="AutomationScriptstopic-27">Get song lyrics</h3>
This is yet another popular Python script that enables you to scrape lyrics from the Genius site. It primarily works with Spotify, however, other media players with DBus MediaPlayer2 can also use the script. With it, you can sing along to your favorite song. <a href="https://awesomeopensource.com/project/kenogo/spotify-lyrics-cli">Click here for more information</a>.
<h3 id="AutomationScriptstopic-28">Heroku hosting</h3>
Heroku is one of the most preferred hosting services. Used by thousands of developers, it allows you to build apps for free. Likewise, you can host your Python applications and scripts on Heroku with this script. <a href="https://awesomeopensource.com/project/michaelkryukov/heroku-python-script">Click here for more information</a>.
<h3 id="AutomationScriptstopic-29">Github activity</h3>
If you contribute to open source projects, keeping a record of your contributions is recommended. Not only do you track your contributions, but also appear professional when displaying your work to other people. With this script, you can generate a robust activity graph. <a href="https://awesomeopensource.com/project/Shpota/github-activity-generator">Click here for information</a>.
<h3 id="AutomationScriptstopic-30">Removing duplicate code</h3>
When creating large apps or working on projects, it is normal to have duplicates in your list. This not only makes coding strenuous, but also makes your code appear unprofessional. With <a href="https://www.geeksforgeeks.org/python-ways-to-remove-duplicates-from-list/">this script</a>, you can remove duplicates seamlessly.
<h3 id="AutomationScriptstopic-31">Sending emails</h3>
Emails are crucial to any businesses’ communication avenues. With Python, you can enable sites and web apps to send them without hiccups. However, businesses do not want to send each email manually, instead, they prefer to automate the process. <a href="https://www.pythonforbeginners.com/code-snippets-source-code/using-python-to-send-email">This script</a> allows you to choose which emails to reply to.
<h3 id="AutomationScriptstopic-32">Find specific files on your system</h3>
Often, you forget the names or location of files on your system. This is not only annoying but also consumes time navigating through different folders. While there are programs that help you search for files, you need one that can automate the process.
Luckily, <a href="https://www.pythonforbeginners.com/code-snippets-source-code/os-walk-and-fnmatch-in-python">this script</a> enables you to choose which files and file types to search for. For example, if want to search for MP3 files, you can use this script.
<code>import fnmatch
import os
rootPath = '/'
pattern = '*.mp3'
for root, dirs, files in os.walk(rootPath):
    for filename in fnmatch.filter(files, pattern):
        print( os.path.join(root, filename))</code>
<h3 id="AutomationScriptstopic-33">Generating random passwords</h3>
Passwords bolster the privacy of app and website users. Besides, they prevent fraudulent use of accounts by cyber criminals. As such, you need to create an app or website that can generate random strong passwords. With <a href="https://www.pythonforbeginners.com/code-snippets-source-code/script-password-generator">this script</a>, you can seamlessly generate them.
<code>import string
from random import *
characters = string.ascii_letters + string.punctuation  + string.digits
password =  "".join(choice(characters) for x in range(randint(8, 16)))
print (password)</code>
<h3 id="AutomationScriptstopic-34">Print odd numbers</h3>
Some projects may require you to print odd numbers within a specific range. While you can do this manually, it is time-consuming and prone to error. This means you need a program that can automate the process. Thanks to <a href="https://www.sanfoundry.com/python-program-print-odd-numbers-given-range/">this script</a>, you can achieve this.
<h3 id="AutomationScriptstopic-35">Get date value</h3>
Python allows you to format a date value in numerous ways. With the DateTime module, this script allows you to read the current date and set a custom value.
<h3 id="AutomationScriptstopic-36">Removing items from a list</h3>
You’ll often have to modify lists on your projects. Python enables you to do this using the Insert() and remove() methods. Here is a script you can use to achieve this.
<code># Declare a fruit list
fruits = ["Mango","Orange","Guava","Banana"]
# Insert an item in the 2nd position
fruits.insert(1, "Grape")
# Displaying list after inserting
print("The fruit list after insert:")
print(fruits)
# Remove an item
fruits.remove("Guava")
# Print the list after delete
print("The fruit list after delete:")
print(fruits)</code>
<h3 id="AutomationScriptstopic-37">Count list items</h3>
Using the count() method, you can print how many times a string appears in another string. You need to provide the string that Python will search. Here is a script to help you do so.
<code># Define the string
string = 'Python Bash Java PHP PHP PERL'
# Define the search string
search = 'P'
# Store the count value
count = string.count(search)
# Print the formatted output
print("%s appears %d times" % (search, count))</code>
<h3 id="AutomationScriptstopic-38">Text grabber</h3>
With this Python script, you can take a screenshot and copy the text in it. <a href="https://awesomeopensource.com/project/ianzhao05/textshot">Click here for more information</a>.
<h3 id="AutomationScriptstopic-39">Tweet search</h3>
Ever searched for a tweet to no avail? Annoying, right! Well, why not use <a href="https://towardsdatascience.com/searching-for-tweets-with-python-f659144b225f">this script</a> and let it do the legwork for you.


<h2>反爬虫代码 直接炸了爬虫服务器</h2>
很多人的爬虫是使用Requests来写的，如果你阅读过Requests的文档，那么你可能在文档中的Binary Response Content[1]这一小节，看到这样一句话：
The gzip and deflate transfer-encodings are automatically decoded for you.
（Request）会自动为你把gzip和deflate转码后的数据进行解码网站服务器可能会使用gzip压缩一些大资源，这些资源在网络上传输的时候，是压缩后的二进制格式。

客户端收到返回以后，如果发现返回的Headers里面有一个字段叫做<code>Content-Encoding</code>，其中的值包含gzip，那么客户端就会先使用gzip对数据进行解压，解压完成以后再把它呈现到客户端上面。
浏览器自动就会做这个事情，用户是感知不到这个事情发生的。
而<code>requests</code>、<code>Scrapy</code>这种网络请求库或者爬虫框架，也会帮你做这个事情，因此你不需要手动对网站返回的数据解压缩。

这个功能原本是一个方便开发者的功能，但我们可以利用这个功能来做报复爬虫的事情。
我们首先写一个客户端，来测试一下返回gzip压缩数据的方法。
我首先在硬盘上创建一个文本文件<code>text.txt</code>，里面有两行内容，如下图所示：

<img src="https://mmbiz.qpic.cn/mmbiz_png/ohoo1dCmvqcSiaBY6GEBTWnsh4kpssWnmK4HkBalmTALTcPw3pwr4ibOkUdEm6y4CGMib5vMor0kEjia8zxMACkAqw/640">

然后，我是用gzip命令把它压缩成一个<code>.gz</code>文件：
<code>cattext.txt|gzip&gt;data.gz</code>

接下来，我们使用FastAPI写一个HTTP服务器<code>server.py</code>：

<code>from fastapi import FastAPI, Response
from fastapi.responses import FileResponse

app = FastAPI()
@app.get('/')

def index():
    resp = FileResponse('data.gz')
    return resp
</code>
然后使用命令<code>uvicorn server:app</code>启动这个服务。

接下来，我们使用requests来请求这个接口，会发现返回的数据是乱码，如下图所示：
<img src="https://mmbiz.qpic.cn/mmbiz_png/ohoo1dCmvqcSiaBY6GEBTWnsh4kpssWnmTGM1MGUzFMFIVibKcLgzD38pk02RWlK8un3jMfr1NL5xzCU55Ws3CJQ/640">
返回的数据是乱码，这是因为服务器没有告诉客户端，这个数据是gzip压缩的，因此客户端只有原样展示。
由于压缩后的数据是二进制内容，强行转成字符串就会变成乱码。

现在，我们稍微修改一下<code>server.py</code>的代码，通过Headers告诉客户端，这个数据是经过gzip压缩的：

<code>
from fastapi import FastAPI, Response
from fastapi.responses import FileResponse

app = FastAPI()

@app.get('/')
def index():
    resp = FileResponse('data.gz')
    resp.headers['Content-Encoding'] = 'gzip'  # 说明这是gzip压缩的数据
    return resp
</code>
修改以后，重新启动服务器，再次使用requests请求，发现已经可以正常显示数据了：
<img src="https://mmbiz.qpic.cn/mmbiz_png/ohoo1dCmvqcSiaBY6GEBTWnsh4kpssWnm0YsFj2lpcoPxllPOUdObVM243w7sO7nGviaoj8olw1s7CogzkKo4MTQ/640">

这个功能已经展示完了，那么我们怎么利用它呢？

这就不得不提到压缩文件的原理了。
文件之所以能压缩，是因为里面有大量重复的元素，这些元素可以通过一种更简单的方式来表示。
压缩的算法有很多种，其中最常见的一种方式，我们用一个例子来解释。

假设有一个字符串，它长成下面这样：
<code>111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</code>我们可以用5个字符来表示：
<code>192个1</code>。

这就相当于把192个字符压缩成了5个字符，压缩率高达97.4%。
如果我们可以把一个1GB的文件压缩成1MB，那么对服务器来说，仅仅是返回了1MB的二进制数据，不会造成任何影响。
但是对客户端或者爬虫来说，它拿到这个1MB的数据以后，就会在内存中把它还原成1GB的内容。

这样一瞬间爬虫占用的内存就增大了1GB。
如果我们再进一步增大这个原始数据，那么很容易就可以把爬虫所在的服务器内存全部沾满，轻者服务器直接杀死爬虫进程，重则爬虫服务器直接死机。
你别以为这个压缩比听起来很夸张，其实我们使用很简单的一行命令就可以生成这样的压缩文件。

如果你用的是Linux，那么请执行命令：
<code>
dd if=/dev/zero bs=1M count=1000 | gzip > boom.gz
</code>
如果你的电脑是macOS，那么请执行命令：
<code>
dd if=/dev/zero bs=1048576 count=1000 | gzip > boom.gz
</code>
执行过程如下图所示：

<img src="https://mmbiz.qpic.cn/mmbiz_png/ohoo1dCmvqcSiaBY6GEBTWnsh4kpssWnm3ibGeQ7hro8e5hrUmE1UuRVzDEhzxREp2lgUppXtxqibnfAt5adibbo0w/640">
生成的这个<code>boom.gz</code>文件只有995KB。
但是如果我们使用<code>gzip -d boom.gz</code>对这个文件解压缩，就会发现生成了一个1GB的boom文件，如下图所示：

<img src="https://mmbiz.qpic.cn/mmbiz_png/ohoo1dCmvqcSiaBY6GEBTWnsh4kpssWnm8lgkicNohcib3BDE6yHk77l0UhmtjIG6iaia7Aq6aGJyeXLplQf0xRRR3Q/640">
只要大家把命令里面的<code>count=1000</code>改成一个更大的数字，就能得到更大的文件。

我现在把<code>count</code>改成<code>10</code>，给大家做一个演示（不敢用1GB的数据来做测试，害怕我的Jupyter崩溃）。
生成的<code>boom.gz</code>文件只有10KB：
<img src="https://mmbiz.qpic.cn/mmbiz_png/ohoo1dCmvqcSiaBY6GEBTWnsh4kpssWnmv3icSpupBmrJdggbGE7tW1kHKicy68JlQ7jevG89DbWte8sH9VtFs2KA/640">

服务器返回一个10KB的二进制数据，没有任何问题。
现在我们用requests去请求这个接口，然后查看一下<code>resp</code>这个对象占用的内存大小：
<img src="https://mmbiz.qpic.cn/mmbiz_png/ohoo1dCmvqcSiaBY6GEBTWnsh4kpssWnmJHoWJhCQWx1ZdlMfRzdt791e14ibgoStObYxJSicpLlelYHBP1qK50kQ/640">
可以看到，由于requests自动会对返回的数据解压缩，因此最终获得的resp对象竟然有10MB这么大。
如果大家想使用这个方法，一定要先确定这个请求是爬虫发的，再使用。

否则被你干死的不是爬虫而是真实用户就麻烦了。
本文的写作过程中，参考了文章网站gzip炸弹
网站gzip炸弹 http://da.dadaaierer.com/?p=577

<h2>Fancier Output Formatting</h2>
https://docs.python.org/3/tutorial/

So far we’ve encountered two ways of writing values: <em>expression statements</em> and the <code>print()</code> function. 

(A third way is using the <code>write()</code> method of file objects; the standard output file can be referenced as <code>sys.stdout</code>.
See the Library Reference for more information on this.)

Often you’ll want more control over the formatting of your output than simply printing space-separated values. 
There are several ways to format output.


To use formatted string literals, begin a string with <code>f</code> or <code>F</code> before the opening quotation mark or triple quotation mark.

Inside this string, you can write a Python expression between <code>{</code> and <code>}</code>
characters that can refer to variables or literal values.
>>> year = 2016

>>> event = "Referendum"
>>> f"Results of the {year} {event}"
"Results of the 2016 Referendum"


The <code>str.format()</code> method of strings requires more manual effort. 

You’ll still use <code>{</code> and <code>}</code> to mark where a variable will be substituted and can provide detailed formatting directives,
but you’ll also need to provide the information to be formatted.

>>> yes_votes = 42_572_654
>>> no_votes = 43_132_495
>>> percentage = yes_votes / (yes_votes + no_votes)

>>> "{:-9} YES votes  {:2.2%}".format(yes_votes, percentage)
" 42572654 YES votes  49.67%"

Finally, you can do all the string handling yourself by using string slicing and concatenation operations to create any layout you can imagine. 
The string type has some methods that perform useful operations for padding strings to a given column width.</li>

When you don’t need fancy output but just want a quick display of some variables for debugging purposes, you can convert any value to a string with the <code>repr()</code> or <code>str()</code> functions.

The <code>str()</code> function is meant to return representations of values which are fairly human-readable, while <code>repr()</code> is meant to generate representations which can be read by the interpreter (or will force a <code>SyntaxError</code> if there is no equivalent syntax). 
For objects which don’t have a particular representation for human consumption, <code>str()</code> will return the same value as

<code>repr()</code>. 
Many values, such as numbers or structures like lists and dictionaries, have the same representation using either function. 

Strings, in particular, have two distinct representations.
Some examples:

>>> s = "Hello, world."
>>> str(s)
"Hello, world."

>>> repr(s)
""Hello, world.""
>>> str(1/7)

"0.14285714285714285"
>>> x = 10 * 3.25
>>> y = 200 * 200

>>> s = "The value of x is " + repr(x) + ", and y is " + repr(y) + "..."
>>> print(s)
The value of x is 32.5, and y is 40000...

>>> # The repr() of a string adds string quotes and backslashes:
... 
hello = "hello, world\n"

>>> hellos = repr(hello)
>>> print(hellos)
"hello, world\n"

>>> # The argument to repr() may be any Python object:
... 
repr((x, y, ("spam", "eggs")))

"(32.5, 40000, ("spam", "eggs"))"
The <code>string</code> module contains a <code>Template</code> class that offers yet another way to substitute values into strings, using placeholders like

<code>$x</code> and replacing them with values from a dictionary, but offers much less control of the formatting.
<i>7.1.1. Formatted String Literals</i>
Formatted string literals (also called f-strings for short) let you include the value of Python expressions inside a string by prefixing the string with <code>f</code> or <code>F</code> and writing expressions as
<code>{expression}</code>.
An optional format specifier can follow the expression. 

This allows greater control over how the value is formatted. 
The following example rounds pi to three places after the decimal:
>>> import math
>>> print(f"The value of pi is approximately {math.pi:.3f}.")

The value of pi is approximately 3.142.
Passing an integer after the <code>':'</code> will cause that field to be a minimum number of characters wide. 

This is useful for making columns line up.
>>> table = {"Sjoerd": 4127, "Jack": 4098, "Dcab": 7678}
>>> for name, phone in table.items():

... 
print(f"{name:10} ==> {phone:10d}")
...

Sjoerd     ==>       4127
Jack       ==>       4098
Dcab       ==>       7678

Other modifiers can be used to convert the value before it is formatted.
<code>'!a'</code> applies <code>ascii()</code>, <code>'!s'</code> applies <code>str()</code>, and <code>'!r'</code>
applies <code>repr()</code>:

>>> animals = "eels"
>>> print(f"My hovercraft is full of {animals}.")
My hovercraft is full of eels.

>>> print(f"My hovercraft is full of {animals!r}.")
My hovercraft is full of "eels".
The <code>=</code> specifier can be used to expand an expression to the text of the expression, an equal sign, then the representation of the evaluated expression:
>>> bugs = "roaches"
>>> count = 13

>>> area = "living room"
>>> print(f"Debugging {bugs=} {count=} {area=}")
Debugging bugs="roaches" count=13 area="living room"

See self-documenting expressions for more information on the <code>=</code> specifier. 
For a reference on these format specifications, see the reference guide for the Format Specification Mini-Language.
<i>7.1.2. The String format() Method</i>

Basic usage of the <code>str.format()</code> method looks like this:
>>> print("We are the {} who say "{}!"".format("knights", "Ni"))
We are the knights who say "Ni!"

The brackets and characters within them (called format fields) are replaced with the objects passed into the <code>str.format()</code> method. 
A number in the brackets can be used to refer to the position of the object passed into the
<code>str.format()</code> method.
>>> print("{0} and {1}".format("spam", "eggs"))

spam and eggs
>>> print("{1} and {0}".format("spam", "eggs"))
eggs and spam If keyword arguments are used in the <code>str.format()</code> method, their values are referred to by using the name of the argument.
>>> print("This {food} is {adjective}.".format(

... 
food="spam", adjective="absolutely horrible"))
This spam is absolutely horrible.

Positional and keyword arguments can be arbitrarily combined:
>>> print("The story of {0}, {1}, and {other}.".format("Bill", "Manfred",
... 

other="Georg"))
The story of Bill, Manfred, and Georg.
If you have a really long format string that you don’t want to split up, it would be nice if you could reference the variables to be formatted by name instead of by position. 
This can be done by simply passing the dict and using square brackets <code>'[]'</code> to access the keys.
>>> table = {"Sjoerd": 4127, "Jack": 4098, "Dcab": 8637678}
>>> print("Jack: {0[Jack]:d}; Sjoerd: {0[Sjoerd]:d}; "

... 
"Dcab: {0[Dcab]:d}".format(table))
Jack: 4098; Sjoerd: 4127; Dcab: 8637678

This could also be done by passing the <code>table</code> dictionary as keyword arguments with the <code>**</code>
notation.
>>> table = {"Sjoerd": 4127, "Jack": 4098, "Dcab": 8637678}

>>> print("Jack: {Jack:d}; Sjoerd: {Sjoerd:d}; Dcab: {Dcab:d}".format(**table))
Jack: 4098; Sjoerd: 4127; Dcab: 8637678
This is particularly useful in combination with the built-in function

<code>vars()</code>, which returns a dictionary containing all local variables.
As an example, the following lines produce a tidily aligned set of columns giving integers and their squares and cubes:

>>> for x in range(1, 11):
... 
print("{0:2d} {1:3d} {2:4d}".format(x, x*x, x*x*x))

...
1   1    1
2   4    8

3   9   27
4  16   64
5  25  125

6  36  216
7  49  343
8  64  512

9  81  729
10 100 1000
For a complete overview of string formatting with <code>str.format()</code>, see Format String Syntax.
<i>7.1.3. Manual String Formatting</i>

Here’s the same table of squares and cubes, formatted manually:
>>> for x in range(1, 11):
... 

print(repr(x).rjust(2), repr(x*x).rjust(3), end=" ")
... 
# Note use of "end" on previous line

... 
print(repr(x*x*x).rjust(4))
...

1   1    1
2   4    8
3   9   27

4  16   64
5  25  125
6  36  216

7  49  343
8  64  512
9  81  729

10 100 1000
(Note that the one space between each column was added by the way <code>print()</code> works: it always adds spaces between its arguments.)

The <code>str.rjust()</code> method of string objects right-justifies a string in a field of a given width by padding it with spaces on the left. 
There are similar methods <code>str.ljust()</code> and <code>str.center()</code>. 
These methods do not write anything, they just return a new string. 

If the input string is too long, they don’t truncate it, but return it unchanged; this will mess up your column lay-out but that’s usually better than the alternative, which would be lying about a value. 
(If you really want truncation you can always add a slice operation, as in <code>x.ljust(n)[:n]</code>.)

There is another method, <code>str.zfill()</code>, which pads a numeric string on the left with zeros. 
It understands about plus and minus signs:

>>> "12".zfill(5)
"00012"
>>> "-3.14".zfill(7)

"-003.14"
>>> "3.14159265359".zfill(5)
"3.14159265359"

<i>7.1.4. Old string formatting</i>
The % operator (modulo) can also be used for string formatting. 

Given <code>'string'
% values</code>, instances of <code>%</code> in <code>string</code> are replaced with zero or more elements of <code>values</code>. 

This operation is commonly known as string interpolation. 
For example:

>>> import math
>>> print("The value of pi is approximately %5.3f." % math.pi)
The value of pi is approximately 3.142.

More information can be found in the printf-style String Formatting section.
<h2>Reading and Writing Files</h2>

<code>open()</code> returns a file object, and is most commonly used with two positional arguments and one keyword argument:
<code>open(filename, mode, encoding=None)</code>

>>> f = open("workfile", "w", encoding="utf-8")

The first argument is a string containing the filename. 
The second argument is another string containing a few characters describing the way in which the file will be used. 
<em>mode</em> can be <code>'r'</code> when the file will only be read, <code>'w'</code> for only writing (an existing file with the same name will be erased), and <code>'a'</code> opens the file for appending; any data written to the file is automatically added to the end. 

<code>'r+'</code> opens the file for both reading and writing. 
The <em>mode</em> argument is optional; <code>'r'</code> will be assumed if it’s omitted.
Normally, files are opened in <em>text mode</em>, that means, you read and write strings from and to the file, which are encoded in a specific <em>encoding</em>.

If <em>encoding</em> is not specified, the default is platform dependent (see <code>open()</code>).
Because UTF-8 is the modern de-facto standard, <code>encoding="utf-8"</code> is recommended unless you know that you need to use a different encoding.
Appending a <code>'b'</code> to the mode opens the file in <em>binary mode</em>.
Binary mode data is read and written as <code>bytes</code> objects.

You can not specify <em>encoding</em> when opening file in binary mode.
In text mode, the default when reading is to convert platform-specific line endings (<code>\n</code> on Unix, <code>\r\n</code> on Windows) to just <code>\n</code>. 

When writing in text mode, the default is to convert occurrences of <code>\n</code> back to platform-specific line endings. 

This behind-the-scenes modification to file data is fine for text files, but will corrupt binary data like that in
<code>JPEG</code> or <code>EXE</code> files. 

Be very careful to use binary mode when reading and writing such files.
It is good practice to use the <code>with</code> keyword when dealing with file objects. 
The advantage is that the file is properly closed after its suite finishes, even if an exception is raised at some point. 
Using <code>with</code> is also much shorter than writing equivalent <code>try</code>-<code>finally</code> blocks:

>>> with open("workfile", encoding="utf-8") as f:
... 
read_data = f.read()

>>> # We can check that the file has been automatically closed.
>>> f.closed True If you’re not using the <code>with</code> keyword, then you should call <code>f.close()</code> to close the file and immediately free up any system resources used by it.

Warning Calling <code>f.write()</code> without using the <code>with</code> keyword or calling <code>f.close()</code> <strong>might</strong> result in the arguments of <code>f.write()</code> not being completely written to the disk, even if the program exits successfully.
After a file object is closed, either by a <code>with</code> statement or by calling <code>f.close()</code>, attempts to use the file object will automatically fail.
>>> f.close()
>>> f.read()

Traceback (most recent call last):
File "&lt;stdin>", line 1, in &lt;module>

ValueError: I/O operation on closed file.
<i>7.2.1. Methods of File Objects</i>

The rest of the examples in this section will assume that a file object called <code>f</code> has already been created.
To read a file’s contents, call <code>f.read(size)</code>, which reads some quantity of data and returns it as a string (in text mode) or bytes object (in binary mode).
<em>size</em> is an optional numeric argument. 
When <em>size</em> is omitted or negative, the entire contents of the file will be read and returned; it’s your problem if the file is twice as large as your machine’s memory. 
Otherwise, at most <em>size</em> characters (in text mode) or <em>size</em> bytes (in binary mode) are read and returned.
If the end of the file has been reached, <code>f.read()</code> will return an empty string (<code>''</code>).

>>> f.read()
"This is the entire file.\n"

>>> f.read()
""

<code>f.readline()</code> reads a single line from the file; a newline character (<code>\n</code>) is left at the end of the string, and is only omitted on the last line of the file if the file doesn’t end in a newline. 
This makes the return value unambiguous; if <code>f.readline()</code> returns an empty string, the end of the file has been reached, while a blank line is represented by <code>'\n'</code>, a string containing only a single newline.
>>> f.readline()
"This is the first line of the file.\n"

>>> f.readline()
"Second line of the file\n"

>>> f.readline()
""
For reading lines from a file, you can loop over the file object. 

This is memory efficient, fast, and leads to simple code:
>>> for line in f:

... 
print(line, end=")
...

This is the first line of the file.
Second line of the file If you want to read all the lines of a file in a list you can also use

<code>list(f)</code> or <code>f.readlines()</code>.
<code>f.write(string)</code> writes the contents of <em>string</em> to the file, returning the number of characters written.

>>> f.write("This is a test\n")
15
Other types of objects need to be converted – either to a string (in text mode) or a bytes object (in binary mode) – before writing them:
>>> value = ("the answer", 42)
>>> s = str(value)  # convert the tuple to string

>>> f.write(s)
18
<code>f.tell()</code> returns an integer giving the file object’s current position in the file represented as number of bytes from the beginning of the file when in binary mode and an opaque number when in text mode.
To change the file object’s position, use <code>f.seek(offset, whence)</code>. 

The position is computed from adding <em>offset</em> to a reference point; the reference point is selected by the <em>whence</em> argument. 

A <em>whence</em> value of 0 measures from the beginning of the file, 1 uses the current file position, and 2 uses the end of the file as the reference point. 

<em>whence</em> can be omitted and defaults to 0, using the beginning of the file as the reference point.
>>> f = open("workfile", "rb+")

>>> f.write(b"0123456789abcdef")
16
>>> f.seek(5)      # Go to the 6th byte in the file

5
>>> f.read(1)
b"5"

>>> f.seek(-3, 2)  # Go to the 3rd byte before the end
13
>>> f.read(1)

b"d"
In text files (those opened without a <code>b</code> in the mode string), only seeks relative to the beginning of the file are allowed (the exception being seeking to the very file end with <code>seek(0, 2)</code>) and the only valid <em>offset</em> values are those returned from the <code>f.tell()</code>, or zero. 
Any other <em>offset</em> value produces undefined behaviour.
File objects have some additional methods, such as <code>isatty()</code> and
<code>truncate()</code> which are less frequently used; consult the Library Reference for a complete guide to file objects.
<i>7.2.2. Saving structured data with <code>json</code></i>

Strings can easily be written to and read from a file. 
Numbers take a bit more effort, since the <code>read()</code> method only returns strings, which will have to be passed to a function like <code>int()</code>, which takes a string like <code>'123'</code> and returns its numeric value 123. 
When you want to save more complex data types like nested lists and dictionaries, parsing and serializing by hand becomes complicated.
Rather than having users constantly writing and debugging code to save complicated data types to files, Python allows you to use the popular data interchange format called JSON (JavaScript Object Notation). 
The standard module called <code>json</code> can take Python data hierarchies, and convert them to string representations; this process is called <em>serializing</em>. 
Reconstructing the data from the string representation is called <em>deserializing</em>. 
Between serializing and deserializing, the string representing the object may have been stored in a file or data, or sent over a network connection to some distant machine.
Note The JSON format is commonly used by modern applications to allow for data exchange. 
Many programmers are already familiar with it, which makes it a good choice for interoperability.

If you have an object <code>x</code>, you can view its JSON string representation with a simple line of code:
>>> import json

>>> x = [1, "simple", "list"]
>>> json.dumps(x)
"[1, "simple", "list"]"

Another variant of the <code>dumps()</code> function, called <code>dump()</code>, simply serializes the object to a text file. 
So if <code>f</code> is a text file object opened for writing, we can do this:
json.dump(x, f)
To decode the object again, if <code>f</code> is a binary file or text file object which has been opened for reading:
x = json.load(f)
Note JSON files must be encoded in UTF-8. 
Use <code>encoding="utf-8"</code> when opening JSON file as a text file for both of reading and writing.

This simple serialization technique can handle lists and dictionaries, but serializing arbitrary class instances in JSON requires a bit of extra effort.
The reference for the <code>json</code> module contains an explanation of this.

See also
<code>pickle</code> - the pickle module Contrary to JSON, <em>pickle</em> is a protocol which allows the serialization of arbitrarily complex Python objects. 
As such, it is specific to Python and cannot be used to communicate with applications written in other languages. 
It is also insecure by default: deserializing pickle data coming from an untrusted source can execute arbitrary code, if the data was crafted by a skilled attacker.

<h2>Python Dictionaries</h2>
A dictionary is a collection which is ordered, changeable and do not allow duplicates.
Dictionaries are used to store data values in key:value pairs.

Dictionaries cannot have two items with the same key.
Duplicate values will overwrite existing values.

thisdict = {
  "brand": "Ford",
  "model": "Mustang",
  "year": 1964
}
print(thisdict["brand"])









<br><br><br>
<script type='text/javascript' src='readbook.js'></script>
<script>
var lazyLoadInstance = new LazyLoad({ elements_selector: ".lazy"});
$("[src~='.png']").css("background-color", "#002010"); 
</script>
</pre>

</body>
</html>
