<base target="_blank"><html><head><title>Electronics Notes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="https://williamkpchan.github.io/lazyload.min.js"></script>
<script src='https://williamkpchan.github.io/mainscript.js'></script>
<script src="https://williamkpchan.github.io/commonfunctions.js"></script>
<script>
  var showTopicNumber = false;
  var topicEnd = "<br>";
  var bookid = "Electronics Notes"
  var markerName = "h2"
</script>
<style>
body{width:80%;margin-left: 10%; font-size:24px;}
h1, h2 {color: gold;}
strong {color: orange;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px;}
</style></head><body onkeypress="chkKey()"><center>
<h1>Electronics Notes</h1>

<div id="toc"></div></center>
<br>
<br>
<pre>
<a href="https://fritzing.org/" class="whitebut ">fritzing online breadboard a..6</a>

<h2 id="mustWatch"><span class="red">MustWatch</span></h2>
<a href="https://how2electronics.com/" class="whitebut ">how2electronics</a>

<a href="https://www.instructables.com/Convert-2-LED-Lamp-to-50-Smart-Lamp/" class="whitebut ">Convert LED Lamp to Smart Lamp</a>

<a href="https://www.youtube.com/watch?v=Gv3x8UObt20" class="whitebut ">找电线的断点</a>

<a href="https://www.youtube.com/watch?v=aHKsAMxAITc" class="whitebut ">电烙铁氧化变黑不沾锡</a>

<a href="https://www.youtube.com/watch?v=q7P47QDGMo8" class="whitebut ">Quick Tips #6 : Measuring High Voltages</a>

<a href="https://www.youtube.com/watch?v=OeQaNMdneS8" class="whitebut ">體感震動椅</a>

<a href="https://www.youtube.com/watch?v=qGqIrKXc3lg" class="whitebut ">維修移動電源</a>
<a href="https://www.youtube.com/watch?v=QE2u96W1lbk" class="whitebut ">低成本微型熱像儀</a>

<a href="http://mpy-tut.zoic.org/tut/motors.html" class="whitebut ">MicroPython: Motor Control DC motors</a>

<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639599&idx=3&sn=f1063192f99db9461ccb84e139c1fac3&chksm=bd140cb58a6385a3dd491fb42a4ea94489ac1493151fffb9aa2a71848df574fb3d39f00086be&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605749466&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AdpEFy8YQjUKo2gd3xBT1bY%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">关键信号布线</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639600&idx=1&sn=ea6fca74105e34284e12ad5d1e43f104&chksm=bd140caa8a6385bc2a1c578db64aa88359964f64a0ab5dd45c0de646c717c283954baab4da25&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605723353&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=ATwAYNhphVROEOFibJZCwec%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">自制闪光灯</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639606&idx=2&sn=7dcf35db428b80c1fd8cb0f989aa0e92&chksm=bd140cac8a6385bace9f620f43effdd5b28aca92d0c23e69c2141a892f7a697e695ef421415d&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605700730&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AXxx1Ep0%2FGq7YLoyh7pA5i8%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">去除地环路干扰</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639607&idx=1&sn=d006deca5cf5d575b20b14b8cc86991f&chksm=bd140cad8a6385bb66ca0385042c06155576dad88ced327bd880edba26f9d87137bff71ed8a0&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605681013&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AZtdUPRZIpDhSwrCBdma0ZU%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">7段数码管DIY</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651641374&idx=2&sn=d2d779bc4e0d96309282fb6eb965aba1&chksm=bd1415848a639c9251f4788db0bd6f25ed8982640a0bc2b86f372257ad99725f59f24cc9ad9c&mpshare=1&scene=1&srcid=&sharer_sharetime=1589591158215&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AeLimdTGZJ9UHtxkEZ5x%2BCg%3D&pass_ticket=RBEqydqlLbTZNYB3KFblh9KagxwD4F9tAsPsCrfGKgBrNNOIG3yiYl%2BYcjS7%2BspB#rd" class="whitebut ">集成式收发器支持实现小型相控阵雷达平台</a>
<h2>激光扫描仪的应用</h2>激光器——用于通过辐射受激发射来放大光线器件的缩写——是一种能发出一束或多束相干光的电子装置。
相干表示频率和波形相同、相位差不变的电磁波。
激光可用于：切割、蚀刻、焊接和切片应用——如精密雕刻、钻孔、半导体精加工、机械表面再修复以及（医疗领域的）LASIK 眼科手术。
成像和投影——如全息、共聚焦显微镜、高清晰度测量（用于创建点云）、激光光谱。
数据传输——如条形码阅读器以及光纤和 DVD 技术。
定位——如工作单元安防系统、3D 打印和光探测与测距 (LiDAR) 系统。
激光扫描——使用扫描或偏转激光束阵列——是许多此类应用的核心。
本文将回顾几种工业自动化领域最常见的激光扫描应用。
在最简单的实施方案中，激光信号作为点光源产生，然后通过精确控制的内部镜面反射扫过一个活动角度。
内部光探测器读取反射信号。
由于激光束的投射角和飞行时间 (ToF)已知，扫描仪的电子装置可以使用返回信号来构建扫描范围内的详细结构图。
虽然概念简单，但要使激光扫描技术在现实世界中发挥作用，就必须克服一系列开发难题。
其中更具挑战性的是环境光变化、平台移动、实现一致输出所需的光源校准，以及耐受工业环境中的灰尘和污垢。
我们已经找到了应对这些技术挑战的办法；现在，最复杂的一些应用是地面自主车辆 (AGV) 所采用的 360˚ 3D 扫描。
今天，建筑业中使用自流平激光扫描仪进行精密挂板或地面找平也是很常见的应用。
然而，激光扫描仪的另一个应用则是经纬仪测量，帮助土木工程师将道路等级规划到毫米级分辨率。
这些都是针对特殊功能专门设计的激光扫描设备例子——尽管激光扫描仪的真正用途是在工厂车间。
<h3>工业安全激光扫描仪</h3>
我们来考虑自动化领域中一个重要的激光扫描应用——保护危险工作单元。
在基本装置中，激光扫描仪的位置固定，同时激光扫过一个平面。
这种扫描仪用作安全监控系统的光幕。
光幕应安装在一个能够保护危险性设备上特定部分的位置，并监视任何光束中断。
响应中断时，光幕会使关键设备上的部件减速或停止，或提供报警信号。
必须将扫描仪定位，且激光束的几何形状必须能够监测任何可能的操作者进入点。
正如上述响应模式所暗示的那样，扫描仪通常与其他安全设备（防护装置、警报器和截止开关）配套使用，以确保操作人员在接近设备时不会受到伤害。
在光学扫描技术出现之前，采用机械联锁方式来保障危险工作单元的安全。
在维修期间，工作单元的电源切断并采取上锁挂牌措施。
众所周知，人类是最不可靠，因为有些人总会绕过防护设施。
光学互锁更可靠——特别是与硬复位或双操作控制面板配合使用时，用来确保单人操作不会启动重启功能。
如需详细了解，请参阅 Digi-Key 文章《安全激光扫描仪保护操作者》。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsr7durqxMe5onhiaNSJr8icCLBfUU8loMQXicHuemWoAXqfYuK093LXdcoA/640">
飞行时间 (ToF) 技术说明：使用 ToF 技术时，能够根据极坐标精确地绘制物体的位置：光束角度、在被观测区域内与物体之间的距离。
这些信息可用于创建扫描仪观察区域的地图，并将其分为若干区域。
当考虑与协作机器人 (cobots) 配合使用的下一个特殊情况时，这点至关重要。
根据设计，协作机器人的目的是在协作活动中与操作人员一起工作。
这要求紧密靠近以及随之而来的风险。
在使用工作空间地图进行编程后，扫描仪可以根据机器人的位置和操作员的移动情况，确定允许机器人移动的范围。
在机器人以及扫描仪市场，这是一个新兴增长领域，所以新应用一直在向前发展。
<h3>用于 AGV 和定位任务的激光扫描仪</h3>
现在，我们考虑下在移动平台上使用 ToF 的、基于激光扫描仪的光探测和测距 (LiDAR) 技术的优缺点。
用于自主地面车辆 (AGV）中时，此类系统依赖 AGV 定位的内部地图，因此所有物体探测都上下关联。
这种能力被称为同步定位和映射或&nbsp;SLAM。
这会增加系统复杂性，因为位置定位误差会直接影响障碍物或目标的映射定位。
使用本地应答器、教学编程或地板嵌入式轨道有助于缓解这一问题。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrwPibvXSfO8tnEgG1kPCV98vgKXSdaicgEOHLvPUk8fHZe5AyzId21RQw/640">
扫描技术会根据环境光的变化而改变其信噪比 (SNR)。
最坏的情况是全日照，这种情况下光线可能比扫描照度高几个数量级。
目前有几种县城的解决方案，包括调制源、结构化扫描、使用窄频和滤波。
幸运的是，AGV 大多在光控仓库内工作，无需这些技术。
对于室外工作车辆，目前正在密集研究和探索针对性解决方案。
激光扫描仪由视距设备定义。
这意味着它们被限制在正前方的视野中。
如果正面是一列柱子，那么扫描仪只能看到这列柱子中最前面的那根。
扫描仪需要改变视角才能探测其他的柱子，假设这些柱子在扫描仪观察范围内。
移动车辆上的 LiDAR 极其重要——尤其是在当 LiDAR 与其他传感器组合使用，以应对仓库环境实时变化的情况。
在这里，LIDAR 有助于提高交付率，减少人员要求并最大限度地减少事故。
在 LIDAR 系统中选择合适的扫描功能意味着指定线性范围、扫描窗口角度以及这些测量值的线性和角度分辨率。
带宽或更新率是另一个关键因素，它可以限制 AGV 的运行速度。
最后但也是很重要的一点，功耗将确定充电周期，以及在任何给定时间内可以部署的设备数量。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrIGibkQxnVTN5ZJgHIPiaTicCiaNwAhSyFQnGxZzLFCLbDtWVXn1TjBluNg/640">
<h3></h3><h3>AGV 中 LiDAR 的电气和机械注意事项</h3>
LiDAR 正在持续发展，其主要推动力自自动驾驶汽车市场。
因此，在性能、功能、价位上都存在很大差异。
这也意味着目前还没有出现安装或连接标准。
当考虑在应用中使用 AGV 时，这个过程就是将现有的产品与系统要求相匹配，并从中指定物理结构。
目前，有几家公司可进行系统设计，提供完整的或可定制 LiDAR 系统。
根据不同的需求，预先设计的解决方案可能只是形成更优化解决方案的起点。
美国国家标准与技术研究所 (NIST) 率先制定了 AGV 安全标准。
目前这些标准主要集中在碰撞方面上，具体包括：折叠式保险杠：在多数老款车型中，保险杠将包含力检测功能，并在撞上障碍物时启动停车功能，限制碰撞接触力。
非接触方法：现代 AGV 应能探测到物体，并在不造成碰撞的情况下停车。
在测试时已使用了近似于人形的测试物，不过仍建议在未来的测试中更多地使用类似于人形和姿势的测试物。
突然出现的障碍物：安全区域内突然出现的障碍物。
预计 AGV 会启动紧急停车，然而并不期待避免发生碰撞。
预测被遮挡的障碍物：这些障碍包括 AGV 车道附近的设备或人员。
预计在与 AGV 车道的间隙小于 0.5 m 的地方会有指定的慢速区。
在预测未来 AGV 的使用过程中，他们还会制定机器人安全标准，以便开始研究各种测试方法，其中会涉及到 AGV 底盘固定的机械臂。
LIDAR 领域的主流趋势之一就是在不牺牲性能的前提下，推动激光雷达体积、重量和成本的降低。
这在过去十年取得了进展，使这些属性已减少了一个数量级。
我们前文提到，SLAM 或者本地化越来越受关注。
理想的解决方案是，AGV 能够从任何地方出发并绘制用于行驶时参照的自用内部世界地图。
执行此类任务需要依赖 LIDAR 与包括 GPS、轮速传感器和摄像头在内的其他类型传感器的集成。
<h3>激光扫描仪用于数据通信</h3>
线性条形码扫描仪的概念很简单：一种由线条和空格组合而成且读取方便的摩斯码。
测量由扫描仪发出并由条形码反射回的光线。
测量反射回的环境光根据应用的不同，全球常用线性条形码有九种。
虽然激光扫描仪是条形码扫描的主流，但条形码不一定需要激光光源的精度，下面就是一些例外。
大多数情况下，条形码内容的读取和翻译都是在扫描仪内部完成。
通常，条形码扫描仪将解码后的值直接发送至数据库。
少数领域要求条形码激光仪具有高分辨率。
对于空间受限的地方，标准条形码带的物理标准较窄。
这就需要高分辨率扫描仪，激光扫描仪恰好满足这一条件。
条形码距离较远时也存在类似情况（比如在如仓库货架上），这会有效地减小代码角度。
有时，环境光不足以保证条形码与空间之间具有良好对比度。
这种情况下，类似激光这样的已知光源就适合用来照射代码，使其易于阅读。
即使是经常逛杂货店的消费者，也很熟悉自助收银台使用的手持扫描仪。
因为条形码扫描能从无限多的方向进行，所以扫描仪在这些设置中必须产生紧密交叉的激光扫描线矩阵。
这就保证了无论条形码如何呈现，至少有一条扫描线会截取全部代码。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrpJArOhXPtbUycej0ibVEdFwJKOlpgYx5Yn9zykUy2sO4WOofXLcicCxw/640">
二维条形码扫描仪：&nbsp;二维 (2D) 代码不同于上述线性代码。
二维码的信息密度高，具有错误检查功能以及即使损坏也可读取的特点，因此越来越受欢迎。
二维条形码的复杂性意味着它们不适合与激光扫描仪一起使用，而是依赖摄像头进行解码。
常用的二维条形码有四种类型，不过大多数消费者熟悉的是快速反应型 (QR) 码，大多数智能手机都能轻松读取。
当机器制造商和最终用户在条形码和扫描仪之间进行权衡时，应考虑三个主要方面：<ol class="list-paddingleft-2">扫描仪在哪里使用？用于仓库盘点、生产线上生产零件的跟踪，还是用于销售点？需要多少数据、物品上有多大物理空间用来粘贴条形码？在什么表面上打印条形码——以及该表面能够保持多高的打印分辨率？</ol>一旦解决了这三个问题，就能在备选方案中选择了。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrk1xticIBFhibEH7zp7tjpFzU97ST1uI2iavIM7VOIpV4FOXQc73rKGrlA/640">
其他阅读器和基于摄像头的替代品：上文已经介绍了条形码扫描仪的大多数变化形式。
值得一提的是，有些条形码扫描仪会使用一排长长的 LED 灯照亮代码，并配合一排相匹配的电荷耦合器件 (CCD) 探测器来检测反射光。
这种扫描仪被称为 LED 阅读器。
还有采用专门设计和配置的摄像系统，可以有效快速地读取二维码。
<h3>关于激光扫描仪应用的结论</h3>
自 1960 年发明激光以来，基于激光的设备和用途便一直层出不穷，令人瞠目结舌。
虽然条形码比激光早 11 年，但通过相干光扫描读取信息已成为黄金标准。
基于激光的位置跟踪和检测扫描也已经成为工业领域的常用解决方案。
对大多数工业制造和跟踪应用而言，无论是从零开始设计系统还是改进现有工艺，激光扫描方法的某些变化可能是极有价值的。
考虑到技术已发展到现在的地步，如果现在还没有确切的配置，那么就会有一些非常适合的东西出现。


<h2>RS-485</h2>
RS-485概述RS-485和RS-232一样，都是串行通信标准，现在的标准名称是TIA485/EIA-485-A，但是人们会习惯称为RS-485标准，RS-485常用在工业、自动化、汽车和建筑物管理等领域。
RS-485总线弥补了RS-232通信距离短，速率低的缺点，RS-485的速率可高达10Mbit/s，理论通讯距离可达1200米；RS-485和RS-232的单端传输不一样，是差分传输，使用一对双绞线，其中一根线定义为A，另一个定义为B。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjnj8r2lXL6EhaXLxAOCtROgbrXBU11LyvuB02xQULRCdTtfTnGibpOLg/640">
双绞线 RS-485物理层RS-485的物理层负责在设备和物理传输介质之间传输原始数据。
它处理电信号到数字数据的转换，同时定义电压、时序、数据速率等。
① 差分信号长距离布线会有信号衰减，而且引入噪声和干扰的可能性更大，在线缆A和B上的表现就是电压幅度的变化，但是，采用差分线的好处就是，差值相减就会忽略掉干扰依旧能输出正常的信号，把这种差分接收器忽略两条信号线上相同电压的能力称为共模抑制。

<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjiasVYVWYe1Wbeicicic9y97E3Y6k36X3IXbAFfI0pf7FB8ucgh753vS1ibQ/640">
标准规定了，逻辑1：+2V to +6V；逻辑0：-6V to -2V。
RS-485不需要使用特定的总线电压，只看最小差分电压，在较长的电缆长度上，接收器接收到的电压可能会降低到+/- 200 mV，这对于RS-485仍然是完全可以接受的，这也是RS-485的优点之一。

<img ="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVj7Q6vXST6eK1uByxM1W4utRWiaXpCCupfk1TSic6ibdtUic7kaSicTiboNUFA/640">
很多收发器的标准达到甚至超过TIA/EIA-485A规范，在实际使用中，以器件的SPEC参数为主，如下某收发器的负输入阈值最小也是-200mV。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjib0gK997aDvQPqHNJwPUebxwN4x8l8MiaAicgNicibR6eXtBaTgoSCS21jg/640">
② 信号定义现在很多的RS-485转换器都是兼容RS-422的，所以看到很多转换器上面的信号都是T/R+、T/R-，即对应RS-485的A+和B-。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjINDrXgFHPknZJetFe5iaAicibD0TkYibqEP0kSemNA4Eb9esz7Qbzibs1qA/640">
对于DB9针型的母头，RS-485有如下的接线定义示意，Pin6~Pin9为N/A不接。
	DB9	输出信号	RS-422全双工接线	RS-485半双工接线
	1	T/R+	发（A+）	RS-485（A+）
	2	T/R-	发（B-）	RS-485（B-）
	3	RXD+	收（A+）	空
	4	RXD-	收（B-）	空
	5	GND	地线	地线
③&nbsp;拓扑结构RS485有两线制和四线制两种接线，四线制只能实现点对点的通信方式，现很少采用，多采用的是两线制接线方式，这种接线方式为总线拓扑结构，在同一总线上最多可以挂接32个节点。
RS-485总线同I2C，也是主从模式，支持点对点单从机模式，也支持多从机模式，不支持多主机模式。

<img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVj08myDhpkicyxOPxJS5OWVT0mj0ptEUHRy51gmjWUibYZZCPPPmFxMczw/640">
</p> RS-485收发器RS-485是差分传输，如果用单片机控制RS-485接口的设备，需要用到收发器，这一点和CAN总线是类似的，如下是一个MCU控制一个RS-485的图示。

<img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjG4Q5oaJeibkib9FHRgEUYbqmgTcR4icjSqN1iciaJExZT6rImwGrjaxztAg/640">
收发器内部是一个接收器（上半部分）加一个发送器（下半部分），下面简单说说收发器的原理，便于理解MCU是如何和485设备通信的。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjOQS1UT1gOVb1iaNx4uVpaJaD9wc13fFsDlVQKpTKtfzuSwZkUb4icw4w/640">
RS-485收发器内部结构其中：A和B为总线；</p>R为接收器输入；</p>RE为接收器使能信号；</p>DE为发送器使能信号；</p>D为发送器输出；</p>对于使能信号，字母上面加一横的为低电平有效（如上图RE），不加的为高电平有效（如DE）。
对于发送器，有如下的真值表：1、当驱动器使能引脚DE为逻辑高时，差分输出A和B遵循数据输入D处的逻辑状态。
D处的逻辑高导致A转为高，B转为低。
在这种情况下，定义为VOD=VA-VB的差分输出电压为正。
当D为低时，输出状态反转，B变高，A变低，VOD为负。
2、当DE低时，两个输出都变成高阻抗。
在这种情况下，与D处的逻辑状态是不相关的。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjUyaXLSXgQZH2uP1RxmVqyRh6fLtQINrawGXqMT8zOYibXhCfwe4YIgw/640">
发送器真值表对于接收器，有如下的真值表：1、当接收器使能引脚RE逻辑低时，接收器被激活。
当定义为VID=VA–VB的差分输入电压为正且高于正输入阈值VIT+时，接收机输出R变高。
当VID为负且低于负输入阈值VIT-，接收机输出R变低。
如果VID在VIT+和VIT-之间，则输出不确定。
2、当RE为逻辑高或悬空时，接收机输出为高阻抗，VID的大小和极性无关。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjqUEpFBVtmibhlG7B5XP2btytZYUXhmebNcdyOe53wM6vysY4rPmnibpQ/640">
接收器真值表 RS-485数据链路上面讲到的RS-485收发器的工作原理，下面简单描述RS-485的数据链路。
<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzIwMDU3MjE2Nw==&amp;mid=2652695793&amp;idx=1&amp;sn=60d2913da6bfd372a8a08af33301d075&amp;chksm=8d136099ba64e98f6111bc2e40d634eda0d0517c8ae21a115f337bd2b32b50d854b109e8585c&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2"></a>
<img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjia81gVCKWGhQ9Q1DRjvBeHD9okZcKGFkZmicYbyOZtibWMOQfKJP96azA/640">
主机发送给从机或者从机发送给主机，都会占用到A和B线，所以RS-485多用在半双工模式。
主机的GPIO会控制RS-485收发器的DE管脚，设置发送模式，从UART TXD线向RS-485收发器的数据（D或DI）线发送一个字节，收发器将在A和B线上将单端UART位流转换为差分位流，数据离开收发器后，主机立即将收发器的模式切换为接收模式。
从机和主机是类似的，从机控制RS-485收发器的/RE管脚，设置为接收模式，接收主机发送的比特流，将其转换为单端信号，通过从机的UART RXD线接收，当从机准备好响应时，它按主机原来的方式进行发送，而主机变为接收。
 RS-232和RS-485转换RS-232和RS-485之间可以转换，一个方法是RS-232转换成TTL，再由TTL转换为RS-485，当然也有芯片支持将RS-232直接转换成RS-485，网上有很多模块。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjEImcZ2cralccm0QfOJSlicuxq8q0MzYwD4HCkyeliatdVQmdxXXkK6icA/640">
RS-232和RS-485转换模块 RS-485和CAN的区别虽说RS-485没有标准的数据协议格式，但和CAN总线在很多地方是有相似的，比如A&amp;B和CANH&amp;CANL都是差分信号，通信都需要收发器，都需要120欧姆的匹配电阻等等。


	总线特性	CAN总线	RS-485总线
	硬件成本	稍高	低廉
	总线利用率	优先级自动仲裁，利用率高	采用轮询，利用率低
	数据传输率	高	低
	错误检测机制	控制器带校验机制，保证底层数据传输正确	只有物理层规范，无数据链路层规定
	单节点故障影响	&nbsp;总线无影响	总线瘫痪
	开发成本	软件开发灵活，时间成本低	开发难度较大
	系统成本	较低&nbsp;	高
 RS-485常用电路网上找的一个常用的RS-485电路，其中需要注意两点：
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjWOBvTaibIibicicJ1Y3J6FicBiaL3ic149KcZcoHibw97JliazWnEj7WD3OHtDA/640">
1、使能信号RE和DE可采用一个GPIO控制，节省资源，GPIO25输出高电平，RE=DE=0V，进入接收模式；GPIO25输出低电平，RE=DE=3.3V，进入发送模式。
2、有一些电路中会在A上加上拉，B上加下拉电阻，主要原因是：RS-485总线在idle状态，电平是不固定的，即电平在-200mV~+200mV之间，收发器可能输出高也可能输出低，UART在空闲时需要保持高电平的，如果此时收发器输出一个低电平，对UART来说是一个start bit，会导致通信异常，关于Ru和Rd的阻值在这里不作过多赘述，后面有机会会详细写一篇文章。
关于第二点，需要注意：① A上加上拉，B上加下拉，接反数据通信也可能出错。
② 某些收发器内部集成上下拉电阻，则外部不需要再添加。

<h2>BLDC Motor Control: Sensorless Brushless DC Motor Controllers</h2>
A Quick Review of Brushed and Brushless DC Motors
<a href="https://www.allaboutcircuits.com/textbook/alternating-current/chpt-13/brushless-dc-motor/" target="_blank">Brushless DC (BLDC) motors</a> have become extremely popular over their predecessor, the brushed DC motor (see figure below). 
As the name implies, "brushed" DC motors use brushes, and a commutator, for controlling the movement of the motor's rotor.

<img alt="Brushed DC motors use brushes and a commutator" src="https://www.allaboutcircuits.com/uploads/articles/Brushed_DC_Motor.jpg">
<strong>Figure 1. </strong>Brushed DC motors use brushes and a commutator. 

Again, as implied by its name, brushless DC motors don't utilize brushes; motor movement is controlled by means of carefully designed drive signals. 
Compared to brushed motors, <a href="https://eepower.com/test-and-measurement/2015/07/dual-channel-brushless-dc-motor-controller-3" target="_blank">brushless motors offer improved reliability, longer life, smaller size, and lower weight</a>. 
BLDC motors have become more popular in applications where efficiency is a critical concern&nbsp;and, generally speaking, a BLDC motor is considered to be a high-performance motor capable of providing large amounts of torque over a wide speed range.

Some BLDC motors use <a href="https://www.allaboutcircuits.com/technical-articles/understanding-and-applying-the-hall-effect/" target="_blank">Hall-effect</a> sensors for detecting the position of the motor's rotor with respect to the motor's stator (see Figure 2 below).

<img alt="BLDC motor using Hall-effect sensors" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_with_Hall_Effect_Sensors-1.jpg">

<em><strong>Figure 2. </strong>BLDC motor using Hall-effect sensors. 
Image courtesy of <a href="http://www.nidec.com/en-EU/technology/motor/basic/00005/" target="_blank">Nidec.com</a>.</em>

Other motors don’t have sensors; they’re referred to as sensorless BLDC motors. 
In place of using Hall-effect sensors for determining the rotor's position and/or speed, a phenomenon called back EMF is employed (see Figure 3 below).

<img alt="Sensorless BLDC motor control using back EMF" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless.jpg">

<em><strong>Figure 3. </strong>Sensorless BLDC motor control using back EMF. 
Image courtesy of <a href="http://ww1.microchip.com/downloads/en/AppNotes/00970A.pdf" target="_blank">Microchip (page 4)</a>.</em>
<h3>Sensorless BLDC Motor Control</h3>

Sensorless BLDC motor control—sometimes called sensorless trapezoidal control of BLDC motors—uses back EMF (BEMF) for determining the location of the motor's rotor (the motor's rotating part) with respect to the motor's stator (the stationary part).

A voltage applied across a motor's winding forces the motor's rotor to turn. 
The movement of the rotor through the motor’s magnetic field, however, is analogous to the behavior of a generator, and consequently the motor not only receives an applied voltage but also generates its own voltage. 
This voltage is referred to as back electromotive force, or back EMF, and it is proportional to the motor's rotational speed. 
Back EMF can be used to determine a motor's rotor speed and position—no sensors are required. 
Controlling a motor by means of back EMF is not a simple task; most sensorless BLDC motors are controlled using a microcontroller, a digital signal processor, or a dedicated driver IC. 
The figure below shows a typical sensorless BLDC motor driver.

<img alt="Typical sensorless BLDC motor drive" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_sensorless_BLDC_motor_drive-1.jpg">

<em><strong>Figure 4.</strong>Typical sensorless BLDC motor drive.</em>


The <a href="https://www.allaboutcircuits.com/electronic-components/datasheet/DRV10983PWPR-Texas-Instruments/" target="_blank">DRV10983</a> from Texas Instruments is a three-phase sensorless motor driver with integrated power MOSFETs capable of providing a continuous drive current of up to 2 A. 
It is highly integrated and requires few external components.

<img alt="TI's DRV10983 Sensorless BLDC motor control driver" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_TIs_DRV10983.jpg">

<em><strong>Figure 5. </strong>TI's DRV10983 Sensorless BLDC motor control driver. 
Image courtesy of <a href="https://www.ti.com/lit/ds/symlink/drv10983.pdf" target="_blank">Texas Instruments (page 1)</a>.</em>

Not all sensorless BLDC motor controllers have integrated MOSFETs. 
Consider, for example, the <a href="https://www.allaboutcircuits.com/electronic-components/datasheet/A4964KEVTR-J-Allegro-MicroSystems/" target="_blank">A4964</a> from Allegro. 
This part requires the use of external N-channel power MOSFETs; it can operate in conjunction with a microcontroller or as an independent single-chip motor controller.

<img alt="Allegro's A4964 sensorless BLDC controller can operate either with a microcontroller or as an independent motor controller" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_Allegros_A4964.jpg">

<em><strong>Figure 6. </strong>Allegro's A4964 sensorless BLDC controller can operate either with a microcontroller or as an independent motor controller. 
Image taken from the A4964 <a href="http://www.allegromicro.com/~/media/Files/Datasheets/A4964-Datasheet.ashx" target="_blank">datasheet</a>.</em>

As mentioned earlier, the term <em>trapezoidal</em> is sometimes used when describing sensorless BLDC motor controllers. 
And when viewing the figure below, it's easy to see why: the voltage waveforms for each of the three motor phases have a trapezoidal shape.

<img alt="Microchip's AN970 showing Hall-effect sensor waveforms and corresponding back-EMF trapezoidal waveforms" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_Trapezoidal_waveform.jpg">

<em><strong>Figure 7. </strong>Microchip's AN970 showing Hall-effect sensor waveforms and corresponding back-EMF trapezoidal waveforms. 
Image courtesy of <a href="http://ww1.microchip.com/downloads/en/AppNotes/00970A.pdf" target="_blank">Microchip (page 3)</a>.</em>
<h3>Disadvantages of Sensorless BLDC Motor Controllers</h3>

When the rotor of a sensorless BLDC motor is rotating, its sensorless scheme can work perfectly. 
However, this is not the case when the motor's rotor is stationary, and this leads us to one major disadvantage of using sensorless BLDC motors. 
When the motor's rotor is not turning, no back EMF generated. 
Without back EMF, the drive circuitry lacks the information it needs to properly control the motor.

For this problem, Texas Instruments offers two solutions as stated in their DRV10983 datasheet (page 17):

Use the DRV10983's <em>initial position detect</em> (IPD) feature to determine the rotor position "based on the deterministic inductance variation, which is often present in BLDC motors."

Or, use the <em>align-and-go</em> technique. 
With this method, a voltage is applied across one of the phases to force the rotor into a known alignment.

Another disadvantage of using sensorless BLDC motors is related to the relationship between back EMF and angular speed. 
Lower speed means less back EMF, and consequently Hall-effect BLDC motors might be more effective than sensorless BLDC motors in low-speed applications.

<h3>In Conclusion</h3>

Brushless DC motors offer significant advantages over standard brushed motors. 
Brushless DC implementations can be sensorless or based on Hall-effect sensors integrated into the motor (a third option is the use of an <a href="https://www.allaboutcircuits.com/technical-articles/convenient-rotational-measurements-a-new-angle-sensor-soc-from-allegro/" target="_blank">external angular position sensor</a>). 
Sensorless systems reduce cost and require fewer interconnects between the driver module and the motor; they can be somewhat complex, but high-performance integrated circuits help to simplify the design task. 
Though sensorless systems are usually preferable, the use of Hall-effect sensors may be a better choice for low-speed applications.

<h2>逆变H桥IGBT单管驱动+保护</h2>
IGBT单管相当的脆弱，同样电流容量的IGBT单管，比同样电流容量的MOSFET脆弱多了，也就是说，在逆变H桥里头，MOSFET上去没有问题，但是IGBT上去，可能开机带载就炸了。
这一点很多人估计都深有体会。
当时我看到做鱼机的哥们用FGH25N120AND这个，反映很容易就烧了，当时不以为然。
只到我在工作中遇到，一定要使用IGBT的时候，我才发现我错了，当初我非常天真的认为，一个IRFP460,20A/500V的MOSFET，我用个SGH40N60UFD40A/600V的IGBT上去怎么样也不会炸的吧，实际情况却是，带载之后，突然加负载和撤销负载，几次下来就炸了，我以为是电路没有焊接好，然后同样的换上去，照样炸掉，这样白白浪费了好多IGBT。
后来发现一些规律，就是采用峰值电流保护的措施就能让IGBT不会炸，下面我就会将这些东西一起详细的说一说，说的不好请大家见谅，这个帖子会慢慢更新，也希望高手们多多提出意见。
我们将这个问题看出几个部分来解决：1，驱动电路;2，电流采集电流;3，保护机制;一、驱动电路这次采用的IGBT为IXYS的，IXGH48N60B3D1，详细规格书如下：IXGH48N60B3D1驱动电路如下：

<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz/GFk2abHRMHT3L0fP9LGJcjjtib0tCIeqgibbTG7TT5AOAicMfa6I6GAjgH5icibSiapnje7qicPOFeelrGyfDhUbia1rVg/640">
这是一个非常典型的应用电路，完全可以用于IGBT或者MOSFET，但是也有些不一样的地方。
1，有负压产生电路，2，隔离驱动，3，单独电源供电。
首先我们来总体看看，这个电路没有保护，用在逆变上100%炸，但是我们可以将这个电路的实质摸清楚。
先讲讲重点：1：驱动电阻R2，这个在驱动里头非常重要，图上还有D1配合关闭的时候，让IGBT的CGE快速的放电，实际上看需要，这个D1也可以不要，也可以在D1回路里头串联一个电阻做0FF关闭时候的栅极电阻。

下面发几个波形照片，不同的栅极电阻，和高压HV+400V共同产生作用的时候，上下2个IGBT栅极的实际情况。

<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz/GFk2abHRMHT3L0fP9LGJcjjtib0tCIeqglJDQF1RPaR66AnKdtAicm5pG2sXn3VaahdPic4ia1tdm3zUCsrE9mEf6A/640?" data-type="jpeg" data-w="320" style="width: 320px !important;height: 502px !important;">

上面的图，是在取消负压的时候，上下2管之间的栅极波形，栅极电阻都是在10R情况下。
上面的图是在不加DC400V情况下测量2管G极波形，下图是在DC400V情况下，2管的栅极波形。

为何第二个图会有一个尖峰呢。
这个要从IGBT的内部情况说起，简单来说，IGBT的GE上有一个寄生的电容，它和另外的CGC一个寄生电容共同组成一个水池子，那就是QG，其实这个和MOSFET也很像的。

那么在来看看为何400V加上去，就会在下管上的G级上产生尖峰。
借花献佛，抓个图片来说明：

<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz/GFk2abHRMHT3L0fP9LGJcjjtib0tCIeqgmHn8kNk6AwVrAAkDiclPpH440cYU1kpCI0pA2t6ZJYx7najMJ9DyPbg/640?" data-type="jpeg" data-w="450" style="width: 450px !important;height: 372px !important;">

如上图所示，当上官开通的时候，此时是截止的，由于上官开通的时候，这个时候要引入DV/DT的概念，这个比较抽象，先不管它，简单通俗的说就是上管开通的时候，上管等效为直通了，+DC400V电压立马加入到下管的C级上，这么高的电压立刻从IGBT的寄生电容上通过产生一个感应电流，这个感应电流上图有公式计算，这个电流在RG电阻和驱动内阻的共同作用下，在下管的栅极上构成一个尖峰电压，如上面那个示波器的截图所示。
到目前为止，没有引入米勒电容的概念，理解了这些，然后对着规格书一看，米勒电容是什么，对电路有何影响，就容易理解多了。
这个尖峰有许多坏处，从上面示波器截图可以看出来，在尖峰时刻，下管实际上已经到7V电压了，也就是说，在尖峰的这个时间段内，上下2个管子是共同导通的。
下管的导通时间短，但是由于有TON的时间关系在里面，所以这个电流不会太大。
管子不会炸，但是会发热，随着传输的功率越大，这个情况会更加严重，大大影响效率。
本来是要发出加入负压之后波形照片，负压可以使这个尖峰在安全的电平范围内。
示波器需要U盘导出位图，这样清晰，今天发懒没有摸仪器了，后面再去补上去。

二，电流采集电路说到这一步，就是离保护不远了，我的经验就是电流采集速度要很快，这样才能在过流或短路的时候迅速告诉后面的电路-&gt;，这里出问题了。

让IGBT迅速安全的关闭。
这个电路该如何实现呢？对于逆变电路，我们可以直接用电阻采样，也可以用VCE管压降探测方式。
管压降探测这个论坛里有多次讨论出现过，但是都没有一个真正能用，真正实际应用过，测试过的电路（专用驱动芯片例外），这是因为每种实际应用的参数大不一样，比如IGBT参数不同，需要调整的参数很多，需要一定的经验做调整。
我们可以从最简单的方式入手，采用电阻检测这个电流，短路来了，可以在电阻上产生压降，用比较器和这个电压进行比较，得出最终是否有过流或者短路信号。
用这个图就可以了，因为原理非常简单，就一个比较的作用，大家实现起来会非常容易，没有多少参数可以调整的。

<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz/GFk2abHRMHT3L0fP9LGJcjjtib0tCIeqgWFWk1XnGDlsg2sd3de209OJrNGsncmUdiap5b5mic0icUs5DicSg7AuEow/640?" data-type="jpeg" data-w="500" style="width: 500px !important;height: 303px !important;">上图是采样H桥对地的电流，举个例子：如果IGBT是40A，我们可以采取2倍左右的峰值电流，也就是80A，对应上图，RS为0.01R,如果流入超过80A脉冲电流那么在该电阻上产生0.01R*80A=0.8V电压，此电压经过R11，C11消隐之后到比较器的+端，与来自-端的基准电压相比较，图上的-端参考电阻设置不对，实际中请另外计算，本例可以分别采用5.1K和1K电阻分压变成0.81V左右到-端，此时如果采样电阻RS上的电压超过0.8V以上，比较器立即翻转，输出SD5V电平到外部的电路中。
这个变化的电平信号就是我们后面接下来需要使用的是否短路过流的信号了。
有了这个信号了，那我们如何关闭IGBT呢？我们可以看情形是否采取软关闭，也可以采取直接硬关闭。
采取软关闭，可以有效防止在关闭的瞬间造成电路的电压升高的情况，关闭特性非常软，很温柔，非常适合于高压大功率的驱动电路。
如果采取硬关闭，可能会造成高压DC上的电压过冲，比如第一图中的DC400V高压可能变成瞬间变成DC600V也说不定，当时我看一些资料上的记载的时候，非常难以理解：关就关了嘛，高压难道还自己升上去了？实际情况却是真实存在的。
如果大家难以理解，可以做个试验，家里有水塔的，最清楚，水塔在很高的楼上，水龙头在一楼，打开水龙头，水留下来了，然后用极快的速度关闭这个水龙头，你会听到水管子有响声，连水管子都会要震动一下（不知道说的对不对，请高手指正，在此引入水龙头这个例子还得感谢我读书的时候，老师看我们太笨了，讲三极管特性原理的时候打的比喻，在此我要感谢他），IGBT在桥电路的原理同样如此。
在IGBT严重短路的时候，如果立马硬关闭IGBT，轻则只是会在母线上造成过冲的感应电压（至于为何会过冲可以查相关资料，很多资料都说到了），管子能抗过去，比如你在直流高压母线上并联了非常好的吸收电容，有多重吸收电路等等……重则，管子关闭的时候会失效，关了也没有用，IGBT还是会被过冲电压击穿短路，而且这个短路是没有办法恢复的，会立即损坏非常多的电路。

有时候没有过压也能引起这种现象，这个失效的原理具体模型本人未知，但是可以想象的是可能是由于管子相关的其他寄生电容和米勒电容共同引起失效的，或者是由于在过流，短路信号发生时候，IGBT已经发生了擎柱效应就算去关，关也关不死了。
还有第三种方式，是叫做：二级关闭，这种方式简单来说，就是检测到了短路，过流信号，PWM此时这个脉冲并没有打算软关闭或直接关闭，而是立即将此时刻对应的VGE驱动脉冲电压降低到8V左右以此来判断是否还是在过流或短路区域，如果还是，继续沿用这个8V的驱动，一直到设定的时间，比如多个个us还是这样就会立即关了，如果是，PWM将会恢复正常。
这种方式一般可能见到不多，所以我们不做深入研究。
理解了这些，我们可以看情况来具体采用那些关闭的方式，我认为在2KW级别中，DC380V内，直接采取硬关闭已经可以满足要求了，只需要在H桥上并联吸收特性良好的一个电容，就可以用600V的IGBT了。
关键的一点就是检测时候要快速，检测之后要关闭快速，只有做到了快，IGBT就不会烧。

<h2>增加電池能量</h2>
要增加蓄電池能夠儲存的能量，需要增加電池中在正極和負極之間移動的金屬離子的數量。
蓄電池也是通過離子從正極向負極移動來儲存電能。
如果增加金屬離子的數量，即可使蓄電池獲得高容量，但正極能保持的離子的數量存在極限，這成為蓄電池開發的障礙。

如果讓氧原子擁有的電子也成為能量的搬運工，即可飛躍式增加能儲存的能量。

這一思路以往就有，但存在利用氧原子的電子的材料容易發熱這一缺點。
失去電子的氧原子由於結構變得不穩定，將與附近的氧原子結合。
這時就會産生熱量並失去儲存的能量。
這一點成為實用化的障礙。

由鈉、錳和氧混合而成的名為「Na2Mn3O7」的材料。
如果將這種材料用於蓄電池的正極材料，即使讓氧原子的電子成為能量的搬運工，氧原子之間也不會在正極電極相互結合。

<h2>天线增益、发射角、阵列</h2>
<img src="https://youwuqiong.top/wp-admin/img.php?imgUrl=http://mmbiz.qpic.cn/mmbiz/GFk2abHRMHSHN3iccnZT4HsB5VySFCR415F9yruhcU0U5teV8prRc9XOCjFk7MKH0fmjGBItRIq71yM3Yeo66Yw/640"  />

一、关于增益：

电波是一种能量，根据能量守恒定律，高增益天线并不是把电波的总能量增强了，而是把电波集中到较窄的某一空间，在该空间的电波密度得到加强。
低增益天线把电波散射到较广的空间。

最合适的比喻就是手电筒，天线相当与手电筒的反射镜，调整手电筒反射镜，可能让光线聚焦在一个较小的点上，你会发现被照射的这个点很亮，但周边比较暗，适合看较远物品，视野窄；把手电筒调到散光状态，周边光线强度都比较平均，适合看近距离物品，视野广。

光波能量守恒，在同一条件下，手电筒的反射镜并没有改变灯泡的自身的发光亮度。

电波的也一样，天线并没有改变发射机的功率，更加没有放大发射机的功率。

二、关于发射（仰）角

1、短波

天线的发射角主要包括水平发射角和垂直发射角，在这一小节，我们只讨论水平发射角（也就是我们短波通信中常叫的“发射仰角”）。

短波通联，要玩的痛快，就必须掌握发射仰角与波瓣一些常识，楼主已经分析的很透彻，在这里用通俗的方式描述一下，天线发射仰角越小，通过电离层一次发射跳跃的距离越远，适合远距离通信，一般情况下，发射仰角小于30度的天线适合远距离DX通信，如高架设的多单元短波八木天线，但近距离通信会出现盲区，这类天线不适合国内（省内）通联。

我们会发现，国内通联，高发射仰角的倒V天线，综合效果往往会比高增益的八木天线效果好，斜拉天线仰角更大，通常500公里以内的短波无盲区通信会使用。

我的个人经验：发射仰角的30-60度的适合国内中短距离通联，发射仰角的小于30度的适合远距离DX，发射仰角的小于20度的，适合猎奇，如南美东岸。

天线架设高度与发射仰角（增益）有很大关系，默认情况，天线的设计增益参考高度都是1/2波长高度，比如，一个设计发射仰角为25度（增益为12dbi）的对数周期短波天线，如果架设高度只有1/4波长高度，发射仰角可能会变成40度，增益也会降到大概9dbi；如果架设高度达到1个波长高度，发射仰角可能会变成小于20度，增益也会增加到13dbi以上。

条件好的比赛基地，通常会使用可升降塔来安装定向天线，这样不单是因为防风的问题，更主要因数是参赛者可以按照通联的目的地距离，升降天线高度，来改变天线增益和发射仰角，达到通联不同地区的目的。

关于波瓣，楼主说的非常清晰了，通常，短波天线的架设高度和波瓣数量有很大关系，架设高度大于1/2波长时，波瓣会增加，大于1个波长时，波瓣会变的尖锐，多个尖锐波瓣对于DX主叫是一件好事，通常会有很好的收获，滩主很容易就做成了，这种方式我们通常笑话是“对多个特定地区播种”。

多波瓣分为水平多波瓣和垂直多波瓣，这里就不再深入了。

2、超短波（U/V段）

在U/V段，通常采用垂直极化方式，视距传播，发射角一般有两个含义，一是水平发射角、一个是垂直发射角。

全方向的GP天线垂直发射角是360度，水平发射角因为增益不同而不同，增益越大，水平发射角越小，假如是一个增益10dbi的玻璃钢天线，水平发射角大约是25度，U/V段GP天线主要通过改变水平方向上的电波密度，实现改变增益。

对数周期天线具有较强的方向性，垂直发射角跟对数周期天线的单元数目关系最大，水平发射角次之，一个12单元的U段八木，垂直发射角发射角大约是30度，水平发射角35度，U/V段对数周期天线主要通过改变垂直方向上的电波密度，实现改变增益。

对于使用U/V段中继，了解垂直发射角与水平发射角非常有必要。

架设在城市高楼的中继台，为了确保中短距离的中继效果，一般会选择较低增益的玻璃钢天线（约6DBI），因为低增益GP天线的水平发射角较大，减少了近距离中继盲区。

一般高山中继会采用高增益玻璃钢天线（大于10DBI），较小的水平发射角，满足了中远距离的中继通信需要。

对于使用中继的电台，天线的选型也一样，经常在中继台5公里范围内上中继的电台，尽量使用低增益，较大水平发射角的天线，如果使用高增益GP天线，会出现中继覆盖盲区，效果反而会变差。
对于经常使用30公里以上远程中继的电台，建议使用高增益的天线。

三、关于天线阵

兜了一个大圈，才回到本贴主题，简直是唐僧再世。

<strong>先来看看天线阵的几种组阵方法：</strong>

<strong>1、等幅并行馈电组阵：</strong>

用于同一指向、同一结构的天线组阵，各单元天线输出的功率相同、相位相同，同方向的增益加大，这是我们业余无线电常用的组阵方法。

<strong>2、中央串行馈电组阵：</strong>

用于同一结构的天线组阵，各单元天线的功率和相位对应，用于分解承受大功率，如电视发射塔天线、雷达天线等。

<strong>3、总线馈电组阵：</strong>

用于多个方向天线组阵，各单元天线的功率和相位不同，可以根据控制系统进行分配。

<strong>再来看看我们生活应用最广的天线阵：</strong>

<strong>1、电视信号接收天线阵：</strong>

我们要接收不同方向电视发射站的信号，往往需要多个不同方向的八木天线接收，通过合路器连接到电视机，往往还包括VHF、UHF不同频率的天线进行合路，最典型的案例就是在深圳了，周遍各方向有数十个电视发射站信号，包括深圳、香港、珠三角等地。

在我们工作室，要接收时下最流行的地面数字高请电视，我使用三个八木天线进行合路，一个7单元水平极化八木天线接收深圳台节目（正东方向，706MHZ）；用了一个5单元垂直极化八木天线接收央视高清节目（正东方向，786MHZ，真不明白电视台采用垂直极化发射的目的，估计不想太多人看到，影响有线电视的生意）；用了一个3单元4阵列的水平极化八木阵（同方向中央串行馈电组阵）用于接收香港高清信号（东南方向，586、602、650MHZ）。
三个天线合路到一个数字接收机，苦难重重，两个或三个天线可能同时接收到同一发射站信号，出现信号抵消想象，采用了物理隔离办法（阻挡非接收方向）、滤波隔离（只允许某一频率通过），终于把能收到的22个地面无线高清节目通过一根馈线全部拿下。

这个小试验，是一个大的“总线馈电”天线阵中还包括了一个“串行馈电”子天线阵，可以看出采用“总线馈电组阵”的难度比较大，影响因数比较复杂。

<strong>2、蜂窝移动电话天线阵：</strong>

蜂窝移动是贝尔实验最伟大的发明，改变了整个世界的生活方式，蜂窝移动电话系统的核心之一就是数字控制天线阵，整个蜂窝系统其实就是一个庞大的数以万计的蜂窝天线阵，这是一项非常成熟的应用技术，在这里，我们只简单解剖一下单个基站天线阵的情况。

现在的蜂窝移动基站一般由多个天线组成，每个天线有一定的发射角，有低容量的120度3天线阵基站，也有高容量的60度6天线阵基站，甚至更多的，等等。
360度多天线系统，主要功能有二，一是解决数据通信用户容量问题，二是解决了天线增益与信噪比问题，我们来看看用户位置与基站天线的选择，系统是通过计算机软件控制，根据用户到基站各天线之间的信号强度，电子合路切换，选择所需的天线。

蜂窝移动的天线阵技术虽然很成熟，但要在我们业余无线电里应用，难度还是非常大，假如我们想做一套4个或六个方向的360度覆盖的八木阵，通过计算机，根据来源信号强度来控制所需的收发天线，需要投入资金不是一般个人能承受的。

<strong>问题1：用两个4单元八木组成天线阵,指向一个方向。</strong>

技术上完全可行，减去功分合路器等中间环节的损耗，会增加大约3dbi的增益，同时发射角变小，波瓣变尖。
相对来说能通到的更远的电台，除此之外，也会带来很多的副作用：一是带宽减小，二是SWR增大，三是阻抗匹配难度增加，四是需要更精准的转向器。

算了一下这笔帐，还不如做一个6单元八木天线来的直接，效果和这个阵列相当，但轻松多了。

以下这些情况使用这种方式，成本很合算：一是八木天线到达一定的单元极限，电性能和物理性能都不允许增加单元了，二是高波段的八木，如6米波、2米波等，阵列难度和成本都很低；三是高带宽的对数周期天线，14-30MHZ对数周期天线要增加3dbi增益，需要增加约2.5倍的材料，而且主梁会过长，物理性能无法保障，所以做成阵列的成本更低。

<strong>问题2：用两个4单元八木冲着不同的方向,但是使用一个转向机。</strong>

这个问题有点复杂了，在回答这个问题之前，我在上面举了两个例子，电视接收天线阵和蜂窝移动天线阵，要实现不同方向的天线阵合路功分控制，会带来很多的副面影响，只有蜂窝移动通过数字控制技术真正解决了这个问题，我们业余无线电不建议采用这方式，除非你有海量的资金或庞大技术力量，研发出强大的信号分配控制系统。

不过，假如我有两个你那样的八木，尝试一下也不坏。

<strong>问题3：想在比赛中通过调整天线系统来加强20米波段的成绩。</strong>

这个问题变得简单了，作为比赛电台，最有效的办法是配置一个10至40米电动可升降铁塔，根据通联目的地需求，调整铁塔高度，改变天线增益和仰角，铁塔就是一个天线增益调整器，非常凑效。



<h2>电磁炉原理讲解</h2>
一、原理简介
电磁炉是应用电磁感应加热原理，利用电流通过线圈产生磁场，该磁场的磁力线通过铁质锅底部的磁条形成闭合回路时会产生无数小涡流，使铁质锅体的铁分子高速动动产生热量，然后加热锅中的食物。
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuAUlHxeprs9iaWweWMTxTqMsTfK0fibwa6Z3b2uZEzUv7AiaMzicuuSkm7w/640">

二、电磁炉的原理方块图
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuicvWy4mRaBA1EVoebm4pEkltibibA5BzTYRcsCFN8VOEYvczILOd5dPbQ/640">

三、电磁炉工作原理说明
1. 主回路
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLupicZiam4ibbTa3bthOobDpscRwBGAXVMM6OqADKaKOzFTG8UQbiadyPRbA/640">

图中整流桥DB1将工频(50HZ)电流变成直流电流，L1为扼流圈，L2是电磁线圈，IGBT由控制电路发出的矩形脉冲驱动，IGBT导通时，流过L2的电流迅速增加。
IGBT截止时，L2、C12发生串联谐振，IGBT的C极对地产生高压脉冲。
当该脉冲降至为零时，驱动脉冲再次加到IGBT上使之导通。
上述过程周而复始，最终产生25KHZ左右的主频电磁波，使陶瓷板上放置的铁质锅底感应出涡流并使锅发热。
串联谐振的频率取之L2、C12的参数。
C11为电源滤波电容，CNR1为压敏电阻(突波吸收器)。
当AC电源电压因故突然升在时，即瞬间短路，使保险丝迅速熔断，以保护电路。
2. 副电源
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLujpcGLictuZ3B1bQFcCTpMeOUhfqmS3E557hyVyLWt2Of8w0Ze17xkMA/640">

开关电源式主板共有+5V，+18V两种稳压回路，其中桥式整流后的+18V供IGBT的驱动回路和供主控IC 
LM339和风扇驱动回路使用，由三端稳压电路稳压后的+5V供主控MCU使用。

3. 冷却风扇
主控IC发出风扇驱动信号(FAN)，使风扇持续转动，吸入外冷空气至机体内，再从机体后侧排出热空气，以达到机内散热目的，避免零件因高温工作环境造成损坏故障。
当风扇停转或散热不良，IGBT表贴热敏电阻将超温信号传送到CPU，停止加热，实现保护。
通电瞬间CPU会发出一个风扇检测信号，以后整机正常运行时CPU发出风扇驱动信号使其工作。
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLutSEXOddPIfMmnn2WT1ibqVCtnWs7coVNAHRuriatc5mk6krQc9GJpUYQ/640">

4. 定温控制及过热保护电路
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuvkZWrib4Tlo5AY4VsWJy3mbM0YRBdZOqenrfiaKzsiczcGAsn2KL4zw9A/640">

该电路主要功能为依据置于陶板下方的热敏电阻(RT1)和IGBT上的热敏电阻(负温度系数)探测温度而改变电阻的一随温度变化的电压单位传送至主控IC(CPU)，CPU经A/D转后对照温度设定值比较而做出运行或停止运行信号。

5. 灯板排线引脚功能
12V电压，触摸供电用。
炉面测温反馈电压。
IGBT测温反馈电压。
蜂鸣器驱动信号 
风扇驱动信号 
开关K信号
锅具检知信号
PWM功率控制
中断信号(过流或脉冲检测) 
+5V (11) 地 
高低压检测
电流检测反馈(功率大小判断)

6.负载电流检知电路
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLumVxuMGuHDwtvOCtINiba37Tz7Uqas9icS5zd7NjxYqSGhhUtXahdGjnA/640">

该电路中T2(互感器)串接在DB1(桥式整流器)前的线路上，因此T2二次侧的AC电压可反映输入电流的变化，此AC电压再经D6-D9全波整流为DC电压，该电压经R42分压后直接送到CPU的AD脚，CPU根据转换后的AD值判断电流大小结合软件计算功率，并控制PWM输出大小来控制功率及检知负载。

7.驱动电路
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuFpJLpJ9FGGkOMqteSuL5BHGUx4nJwaj9xUNxOqWkHIX4RMfbhWibE6w/640">

该电路将来自脉宽调整电路输出的脉冲信号放大到足以驱动IGBT开启和关闭的信号强度，输入脉冲宽度愈宽IGBT开启时间愈长，线盘锅具输出功率愈大，即火力愈高。

8.同步振荡回路
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLutU8TXIlCdcHQbHmaOFSFT2VbKuOyU4zquNjNgyd6CLRm5Nh1RLMqSA/640">

由R4、R5 、R7、R19、R20、R22、R23、C1、C2 、C13与339组成同步检测回路; 
由D3、R8、R15、R9、C7组成的振荡电路(锯齿波发生器)，振荡频率在PWM的调制下 
下与锅具工作频率实现同步，经339第13脚输出同步脉冲至驱动实现平稳运行。

9.浪涌保护电路
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLunQ9f33icx0ic7DfII8HwkJORDBpoEl2ibIj0EbCAarbS6OIHVziaicYJosQ/640">

由R45、R13、R16、R47、R39、R40、C20、C18组成浪涌保护电路。
当浪涌到来时，通过互感器传递在R45 
上形成同幅度的负压，使339比较端翻转，2脚输出低电平，一方面通知MUC停功率，另一方面通过D4把K信号关断，关闭驱动输出。

10.动态电压检测电路
D13、D14 R18、R2、R52、D8、EC2和DB的另两端组成电压检测电路，由CPU直接将整流脉动波AD转后，检测电源电压是否在145V~270V范围。

11.瞬间高压控制
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLu7BaszEyzxwK1t9l9ZKTl14HMmdNS2hBFkTr4dsNFiaa1Lxnaxic877TQ/640">

R22、R23、R24、R26和339组成，电压正常时该电路不起作用，当反压瞬间高压超过1100V 
时，339输出低电平，拉低PWM，降低输出功率，控制反压，保护IGBT不会过压击穿。

四、故障与维修
故障1.不通电和按键无反应
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLu3XibFnUibVINy8a7Qfs9M2CjI1ofKhzG7Mr72musXQ735fj7yvOibGGdQ/640">

故障2.不启动(启动一会关机，蜂鸣器隔几秒响一次)
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuMupSsaA5994jzI9XZx5b9QgYfks9D6vRUiaQdNRQkbibIGJjhCddib5WA/640">

故障3.自动关机(开几分钟关机，或者不定期关机)
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuDZhHJApOjMP2IDVJIZGdW5d74M2nfJy2SEo7nWm7Bic2do9uYNjc7SA/640">

故障4.加热慢、加热断断续续或火力过低
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLumibNe54h7ekfOcApu595kchwwfibov4pJ1KpTkqMC1ElV1XxGpcr74aA/640">

故障5.噪声大
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuHnFRGlKHkwpZpwIv5wP9fZUtTKUOsLRpKev2a79wMdIsK0PDgMSgfg/640">

故障6. 风扇故障
(1)风扇有异响 
风扇扇叶是否断裂; 
是否有异物干扰; 
风叶变形，有质量问题或受外力原因造成。
(2)风扇不转
风扇18V供电是否开路; 
风扇插座及连线是否开路，风扇扇叶是否卡死; 
风扇电机因缺油干涸损坏; 
风扇驱动三极管Q1，CE极开路或BE极短路。
单片机控制风扇输出口在开机状态无高电平输出，I/O口损坏。
(3)风扇上电自转失控
驱动三极管Q1 CE极短路。
单片机输出口损坏，一直保持高电平。
故障7.蜂鸣器长鸣或者不响。
(1) 长鸣，是否伴随有其它故障，单片机失控;
(2) 不响，蜂鸣器损坏;R29是否开路，虚焊;单片机控制蜂鸣I/0口损坏。
<img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuNS6OEoqyefgGIdDt57rcTqMtmQ1exWVrYE6tLduJibmXd38PuuergdQ/640">

故障8.功率不可调，偏大或偏小
(1) 功率“加，减”按键是否失控，而其它功能档可调节，换按键;
(2) 检查功率调节电位器VR1是否接触不良/开路;
(3) 检查电流互感器T2是否变质/漏电;
(4) 检查D6、D7、D8、D9、 四个IN4148其中是否开路或短路;
(5) 检查微晶板表面与线盘表面之间间距是否在正常范围10—11mm。
(6) 检查线盘是否变形，表面是否变黑。
(7) 检查PWM滤波电容EC8是否漏电。
(8) 检查C11 (5uF)高压滤波电容容量是否变小。
(9) 查电压检测回路EC2是否漏电，R2、R52阻值是否变大，D2是否击穿。
故障9.功率不稳定(开开停停)
(1)用万用表测电网是否波动太大，使浪涌保护工作;
(2)检查C12、C11高压电容引脚是否虚焊打火，线盘接线端是否松动打火，造成单片机保护。
(3)检查插座插头是否松动打火。
(4)查C11(5Uf)高压电容容量是否减小。
(5) 查供电 
18V、5V是否正常，代换LM339。
(6)查互感器次级是否开路，D6、D7、D8、D9是否击穿，EC7是否漏电。
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/NMBmZoISq1LeuVgxBleULmhVbfdicHQLueOKvqZN3EFDNibcOavM8TwBhs1xocdBwRQX6Uwroic2UqrtmAF028aXQ/640">

故障10.工作过程中锅底有异响
(1) 检查锅具是否太薄，使加热过程中振动太大。
(2) 检查电网杂波是否太大，使电磁炉工作受到调制。
(3) 检查18V、5V滤波电容EC6、EC13、C10、C8、EC5是否失效;
(4) 检查PWM电容EC8容量是否有变小。

故障11. 显示操作正常，无E0，无功率输出。
(1)电网干扰太大，使冲击保护电路一直功作。
(2)查过流/冲击保护电路是否误工作，C6、C20、C18是否失效，R15阻值是否变大。
单片机中断脚(INT)是否为低电平。
(3)检查互感器是否漏电，使单片机电流检测脚在待机状态电平高于0.5V;
(4)检查C11与C12高压电容是否失效;
(5)代换LM339，灯板排插是否有接触不良。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuAMmYVQklneKC7kjc6mC24qzGmnxqbvicfrlwRibNUdCaF4EnVPvibILlQ/640">

故障12 .开机显E0
(1)检查锅的材质和尺寸&gt;10cm是否规定范围;
(2)检查灯板排插是否有氧化接触不良;
(3) 查Z1是否漏电，击穿。
(4)检查振荡回路C3、D3是否已损坏。
(5)查同步回路R19、R20、R22、R23、R4、R5、R7是否开路，C1、C2、C13是否漏电，代换339。
(6)查Q2、Q3是否损坏，R49是否开路使驱动无18V。

故障13.不开机，上电有鸣叫
(1) 检查灯板排插是否氧化接触不良;
(2) 检查开机按键是否良好;检查其它按键是否有短路现象。

故障14.上电无声、无反应
(1)检查220伏电源线是否正常，插头是否烧黑;
(2)检查电源接插件，保险是否虚焊。
(3)检查主板是否有断裂;
(4)查开关电源供电是否正常，D5、L4，Z3，IC1是否正常。
(5)单片机5V供电是否正常，查IC2(78L05)，代换Y1 晶振，单片机;
(6)检查灯板排线是否氧化、松脱;
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_jpg/NMBmZoISq1LeuVgxBleULmhVbfdicHQLuVYcj7M1BqiaCxI1Xbibe5VnajWRHetZfGtCftOOzSKnsYN8SZicPDXFZg/640">

故障15.工作正常，只是数码管显示缺笔少画
(1)数码管是否损坏;
(2)164是否正常;
(3)发光二极管是否有漏电短路损坏现象;
(4)线路板是否有虚焊、裂痕、进水;
(5)单片机是否正常。

故障16.炸机
(1)只烧保险，查压敏电阻ZNR或保险质量不良，直接更换。
(2)烧IGBT、桥堆、保险 
查无原因，元器件质量问题或电网冲击太大，直接更换。
(3) 炸机存在以下原因：
高压电容C11、C12容量变质，虚焊打火。
线盘接线柱虚焊，连接松动打火。
线盘烧黑损坏。
驱动电路Q6、Z1损坏。
18V供电降低&lt;12V(风机损坏或滤波电容漏电)，使IGBT驱动不良迅速发热损坏。
LM339不良。
硅脂干涸使IGBT散热不良，令贴在IGBT表面的热敏电阻测温不准，综合损坏。
机板进水，进蟑螂短路打火。
开关电源损坏，使18V供电瞬间升高损坏。
PWM滤波电容EC8开路或无容量

<h2>氮化镓 相控阵雷达</h2>
相控阵雷达的出现可以说是雷达探测技术的一大飞跃；
而有源相控阵雷达又是相控阵雷达中的高端模式。

那么有源相控阵雷达到底强在哪里呢？
有源相控阵雷达可以对几百个目标同时实现全程跟踪与监测。
可以引导导弹同时攻击十几个到几十个最有威胁性的重点目标。
甚至可以对大多数非隐身目标直接三维成像；
并且对真假目标快速识别。

不但对过去传统的空中目标有如此强悍的功能，就是把有源相控阵雷达设置在高空，那么对地面与海面的所有目标也可以实现超快速与超大容量的识别跟踪引导与三维成像。

相控阵雷达的原理很早就被提出；
不过早期的有源相控阵雷达都是电子管体制，如果集成起来则面积与发射总耗电量都相当惊人，只能用作对太空目标的战略预警雷达之用。

是著名的7010工程
7010战略预警雷达历时10年建成，此后又正常运行了另外10年，取得了一批重大成果，曾经在世界上最准确预测了一些核动力卫星的坠落轨迹，震惊全球。

虽然7010工程整体效果尚可，不过到了1990年代以后，全球相控阵技术向高端集成电路发展。
此时最重要的TR发射与接收组件的生产技术国内无法突破。

但是在有源相控阵雷达的整体设计、组件的巧妙布局减重以及软件算法上却居于全球超一流的地位。

于是作为“交换”条件，开始与某军工强国合作研发大型预警机。
并且创造性的提出了：背负式、超大圆盘、三面有源的整体方案，同时也负责算法与主要核心软件的开发。

外方主要提供先进TR组件的生产工艺以及高成品率的品控管理技术。
为以防万一，在与外方合作的同时还在国内开始了并行研发工程。

果不其然，在超级大国的干涉下，与外方的合作被迫中止。
但是自家的并行工程却大获成功，最终被称为“争气机”。
此后则一发不可收拾。

仅仅用不到20年的时间，就把有源相控阵技术彻底推到了全球绝对第一的位置，而且属于搞成了白菜化并且玩出了花。

各种有源相控阵不但陆地空中海上太空无处不在，多的让人眼花缭乱。
甚至在民用灭蚊器上都用上了氮化镓有源相控阵！
所有这一切，有一人居功至伟！
王小谟院士永垂不朽！

王小謨從事雷達研製工作50餘年，先後主持研製過中國第一部三座標雷達等多部世界先進雷達，在國內率先力主發展國產預警機裝備，提出中國預警機技術發展路線圖，構建預警機裝備發展體系，主持研製中國第一代機載預警系統，引領中國預警機事業實現跨越式、系列化發展，並邁向國際先進水平。

氮化镓（GaN）是一种非常坚硬且在机械方面非常稳定的宽带隙半导体材料。
由于具有更高的击穿强度、更快的开关、更高的热导率和更低的导通电阻，氮化镓基功率器件明显比硅基器件更优越。
氮化镓晶体可以在各种衬底上生长，包括蓝宝石、碳化硅（SiC）和硅（Si）。

在硅上生长GaN外延层可以使用现有的硅制造基础设施，从而无需使用成本很高的特定生产设施，而且可采用低成本、大直径的硅晶片。

氮化镓材料用于制造半导体功率器件,也可以用于制造射频元件和发光二极管（LED）。
氮化镓技术展示出它可以在功率转换、射频及模拟应用中，替代硅基半导体技术。

把电子性能提升至另一个更高的水平及使得摩尔定律复活的领先侯选原材料，就是氮化镓材料。

与硅基器件相比，氮化镓器件传导电子的效率可以高出1000倍，而同时比硅器件的制造成本较低。
硅器件的技术发展已经到了极限，而一种新兴并具有较高性能的半导体材料正在冒起–它就是氮化镓半导体。
<img class="lazy" data-src="/epc/portals/0/epc/GaN-value-48-V-converters.png"/>

幸运的是，制造氮化镓器件的成本比制造MOSFET器件的成本为低，这是由于目前用来制造传统硅基半导体的相同工厂中，采用制造硅器件的标准步骤来制造氮化镓器件，从而使得具有相同性能的氮化镓器件的体积可以小型化很多。

由于每个氮化镓器件都比硅基器件小很多，因此每块晶圆可以生产出更多的氮化镓器件，这样，与等效硅基器件相比，制造氮化镓器件的成本就总是更低。

<h2>监控摄像头的焦距</h2>
<img class="lazy" data-src="https://picx.zhimg.com/v2-df1030ef59b7916aae3c005ebbd3e7c0_1440w.jpg">

<img class="lazy" data-src="https://pic3.zhimg.com/v2-b8e7dcfcd87f7281f71967b376712f1a_b.jpg">
这也导致了很多朋友在选择监控摄像头时非常的纠结，而其中纠结的比较多的一个问题就是如何选择监控摄像头的焦距，这篇文章咱们就来仔细聊聊监控摄像头的焦距选择问题。
<h3>一、什么是焦距？</h3>
焦距，在光学系统中是指平行光入射时从透镜光心到光聚集之焦点的距离。
<img class="lazy" data-src="https://pic3.zhimg.com/v2-4ebb3d37a1709cfea035d066474f9bc6_b.jpg">
也是指监控摄像机中，从镜头镜片光学中心点到摄像机的CCD/CMOS感光元件之间的距离。
<img class="lazy" data-src="https://pic3.zhimg.com/v2-c954a1ec371b112b30d34d9ef919807e_b.jpg">
对于监控摄像机来说，这个焦距的大小就决定了拍摄画面的成像大小、视场角大小和景深大小。

视场角：
以镜头为顶点，以观察目标的物像可通过镜头的最大范围的两条边缘构成的夹角。

景深：
指在摄像机镜头能够取得清晰图像的成像时被拍摄物体前后距离范围，简言之，景深就是我们能够看清楚的距离范围。

PS：
景深与摄像机的焦距、镜头光圈和物距也都有关系，焦距只是其中一个因素。

<img class="lazy" data-src="https://pic2.zhimg.com/v2-693b26818e0d58ba35cf2cec8ff47701_b.jpg">
<h3>二、不同焦距的效果如何？</h3>
现在主流的监控摄像头都是网络监控摄像头，焦距一般为2.8mm、3.6mm/4mm、6mm、8mm、12mm、16mm等，有些还具有变焦功能，那么不同的焦距区别在哪里呢？
简单来说：


✅ 焦距越大，看的越远，视角范围越小；
✅ 焦距越小，看的越近，视角范围越大；
<img  data-caption="" data-size="normal" data-raw data-raw  data-original="https://pic3.zhimg.com/v2-4e8fa23bf561b4d40240c0fd6601c662_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-4e8fa23bf561b4d40240c0fd6601c662_b.jpg">
借用网络上的一张焦距效果对比图来做个参考：

<img  data-caption="" data-size="normal" data-raw data-raw  data-original="https://pic3.zhimg.com/v2-80e4977e3f42b1bc5470b1b922b7b80e_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-80e4977e3f42b1bc5470b1b922b7b80e_b.jpg">
可以看到：

✅ 在同样的距离下(如第一列)，焦距越大，能看到的视角范围越小，但是相对细节越清晰。

✅ 在同样的焦距下(如第一行)，距离越远，能看到的视角范围越广，但是识别度就越低。

✅ 想要看清人脸或人形，距离越远，需要的焦距越大(斜对角)。
<h3>三、如何选择监控摄像头焦距？</h3>
前面看了不同焦距的拍摄效果，那实际中监控摄像头的焦距到底该怎么选择呢？

我们可以从以下几个维度考虑：
<h3>1、监控范围</h3>监控摄像头的焦距决定了监控画面的大小和有效可视距离，也就是监控的范围。
☆ 对于监控范围较小，取景角度大的情况，如家庭的客厅、小型商铺，可以选择焦距较小的监控摄像头。

比如3.6mm或4mm焦距的摄像头，视角范围可以达到75°-90°，有效监控距离可达5米以上，可以覆盖40²-80²的空间。
☆ 对于监控范围较大，如10m*10m以上的空间，需要选择焦距较大的监控摄像头。
但是由于焦距大，相应的监控角度就会变小，为了实现完全监控，就需要我们考虑使用云台球机，或者安装多台监控摄像头来保证完全覆盖。

☆ 对于监控范围固定，但是距离非常远的情况，比如需要监控30米外的停车位，就需要选择更大焦距的摄像头，比如12mm以上的监控摄像头。
下图可以做一个简单的参考：
<img  data-caption="" data-size="normal" data-raw data-raw  data-original="https://pic3.zhimg.com/v2-fdbb63a6f70b1f7e346265dc3e322582_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-fdbb63a6f70b1f7e346265dc3e322582_b.jpg">
<h3>2、使用场景</h3>很多时候，我们选择监控摄像头，都是针对具体的场景需求来的。

如果不想过多了解那些繁琐的焦距参数的话，我们可以粗略的按照下面的使用场景来判断选择摄像头焦距：

✅ 车库、储藏间等狭小空间，建议选择2.8mm焦距，最佳监控距离3m以内
✅ 家庭室内或小商铺等环境中，建议选择4mm焦距，最佳监控距离3-5m
✅ 家庭庭院、阳台、门口等场景，建议选择6mm焦距，最佳监控距离5-10m
✅ 室外的道路、胡同等场景，建议选择8mm焦距，最佳监控距离10-20m
✅ 某些远距离固定位置的监控，建议选择12mm焦距，最近监控距离为20-30米左右
✅ 还有一些摄像头镜头是可变焦的，可以根据监控场景范围来调整镜头大小<h3>3、实际需求</h3>前面介绍了很多监控摄像头焦距的具体选择方式，都有一个共同的前提：
在能够有效看清人或物的情况下。

而实际中，我们可能关注的点也有些不同，比如：
☆ 有时我们可能不在意是否能看清人或物，我们只需要监控范围足够大，这时就可以选择焦距小如2.8mm的摄像头，还有一些鱼眼摄像头，监控视角甚至能达到180°，镜头前的范围都能一览无余。
☆ 有时我们可能更在意很远距离下的很小的一片固定区域，比如50米外的固定车位，这时就可以选择16mm以上的摄像头，不求范围，只关注很小一片区域。

☆ 还有，有时我们需要监控的范围是个狭长的区域，比如5*30m的范围，焦距小的远处看不清，焦距大的近处看不到，我们就可以考虑带双摄甚至三摄变焦功能的摄像头，能够同时兼顾远处和近处的监控。

<h2>computer keyboard</h2>
A computer keyboard consists of many switches, one for each key which you can press.
All of these switches are electrically arranged into groups.
For discussion purposes, we call these groups rows and columns, but those groups do not physically correspond to the physical location of the key on the keyboard.
 
Below is an example schematic diagram showing how the switches in a specific keyboard were arranged.
<img  src="https://qph.cf2.quoracdn.net/main-qimg-baef2fba59463a9f83a96fb31789bdac.webp">

A special integrated circuit is <k>built into your laptop’s motherboard</k>.
(For desktop computers, an equivalent integrated circuit is <k>inside of the keyboard itself</k>.) This integrated circuit has the job of constantly scanning the keyboard to look at which switches are currently pressed.
It does this by momentarily sending out a signal along the wiring feeding each column of the keyboard, one column at a time, and looking for a return signal from the wires connected to each of the rows.
When it finds a return signal, the currently activated column and the row which has a return signal identify which key is currently being pressed.
The keyboard controller integrated circuit uses this information along with a table of values describing the arrangement of the key switches in the keyboard to return a specific code number to the computer identifying the key in a standardized way.
 
If the wiring connected to either a column or a row of the keyboard becomes damaged, it will affect every key in that specific column or row.
In the example schematic above, if the wire identified as 1Y0 had been cut, the keyboard keys for N, H, Y, 6, B, G, T, and 5 would all be disabled.
There is no possibility of generating the same signals those specific keys would have created without repairing or replacing the damaged part.
 
So, no, there is no combination of keys which you could type to get those keys to come back.
 
But, not all hope is lost.
 
Generally, when a laptop keyboard has stopped functioning in the way yours has, it is because something was spilled into the keyboard, and that something has either created a short-circuit killing a column or row or has gotten intot he connector for the keyboard cable, preventing a signal from being transmitted properly.
 
This can sometimes be corrected by following the disassembly procedures for your specific make and model of laptop to remove the keyboard and then spraying the keyboard connector (on the motherboard) with a non-residue contact cleaning solution.
Sometimes the keyboard can be salvaged using contact cleaner as well.
(I say sometimes, because it is often difficult to get the contact cleaner to fully penetrate into the keyboard, as you cannot disassemble the keyboard itself.
As such, it is usually better to replace the keyboard.)
 
If you were to do this repair yourself, the total cost would be around $30 USD.
If you take it to a repair shop, it will cost you a bit more as they have to charge for labor.
If you are uncomfortable working inside of computer devices (which includes many very small, easy to lose screws and other components as well as easily broken cables and connectors) then take your machine to someone who has some experience.
 
As an alternative, it is also possible to simply connect an to your laptop.
While this will not fix the damage to your laptop and can be cumbersome with a machine you bought for its mobility, it will provide you with an alternative keyboard which is working at, potentially, an even lower price.

<h2>3 Best LED Bulb Circuits</h2>
<div id="LEDtoc" class="toc"><a href="#LEDtopic-0" target="_self" >the finalized design</a><br><a href="#LEDtopic-1" target="_self" >Improving the above Design</a><br><a href="#LEDtopic-2" target="_self" ><span class="orange">Why use LEDs</span></a><br><a href="#LEDtopic-3" target="_self" ><span class="orange">How the Circuit Functions</span></a><br><a href="#LEDtopic-4" target="_self" ><span class="orange">High Watt LED Bulb using 1 watt LEDs and Capacitor</span></a><br><a href="#LEDtopic-5" target="_self" >Circuit Diagram#2</a><br><a href="#LEDtopic-6" target="_self" >Surge Controlled Voltage Regulation</a><br><a href="#LEDtopic-7" target="_self" ><span class="orange">Solid State LED Bulb Circuit with Dimmer Control using IC IRS2530D</span></a><br><a href="#LEDtopic-8" target="_self" >Introduction</a><br><a href="#LEDtopic-9" target="_self" >How the LED Controller Functions</a><br><a href="#LEDtopic-10" target="_self" >Circuit Diagram#3</a><br></div></center>

After doing a lot of research in the field of cheap LED bulbs, I could finally come up with a universal cheap yet reliable circuit that ensures a fail-proof safety to the LED series without involving costly SMPS topology. 

<h3 id="LEDtopic-0">the finalized design</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
<img src="https://www.homemade-circuits.com/wp-content/uploads/2022/04/LED-power-supply.jpg">
<k>Universal Design, Developed by Swagatam</k>

<img src="https://www.homemade-circuits.com/wp-content/uploads/2022/10/caution.jpg">
You just have to adjust the pot to set the output according to the total forward drop of the LED series string.
Meaning, if the total voltage of the LED series is say 3.3V x 50nos =  165V, then adjust the pot to get this output level and then connect it with the LED string.

This will instantly illuminate the LEDs at full brightness and with complete over voltage and over current or surge inrush current protections.
R2 can be calculated using the formula: <k>0.6 / Max LED current Limit</k>
<h3 id="LEDtopic-1">Improving the above Design</h3> <a href="#top" target="_self"><b>⇧</b></a><br>Although the above simple current controlled MOSFET LED driver looks easy and safe for illuminating high watt LEDs, it has one serious drawback.

The MOSFET can generate a lot of heat if the output is adjusted for low voltage LED strings.
The heat dissipation is basically due to the bridge rectifier and the C1 which converts the full AC cycle to DC, causing a lot of stress on the MOSFETs.
This aspect can be improved drastically by replacing the bridge rectifier with a single diode and moving the C1 capacitor parallel to the output LED, as shown in the following diagram:

<img src="https://www.homemade-circuits.com/wp-content/uploads/2022/12/simple-led-driver.jpg">
In the above diagram due to the presence a single diode D1 only half AC cycles are delivered across the MOSFET, causing 50% less stress and heat dissipation on the MOSFET.
However, the capacitor C1 parallel to the LED string ensures that the LED keeps getting the required power even during the absence of the other AC half cycles.

You can add more number of LEDs in series, a maximum upto 300 / 3.3 = 90 LEDs.
Make sure to adjust the P1 pot accordingly to adjust the output voltage to match the LED string's max forward voltage.
Likewise. 

adjust the base/emitter resistor of T2 (BC547) to match the LED max current spec.
<h3 id="LEDtopic-2"><span class="orange">Why use LEDs</span></h3> <a href="#top" target="_self"><b>⇧</b></a><br>
LEDs are being Incorporated in vast magnitudes today for everything that may involve lights and illuminations.

White LEDs have especially become very popular due to their mini size, dramatic illuminating capabilities and high efficiency with power consumptions. 
In one of my earlier post I discussed how to make a super simple LED tube light circuit, here the concept is quite similar but the product is a bit different with its specs.
Here we are discussing the making of a simple LED bulb CIRCUIT DIAGRAM, By the word "bulb" we mean the shape of the unit and the fitting secs will be similar to that of an ordinary incandescent bulb, but actually the whole body of the "bulb" would involve discrete LEDs fitted in rows over a cylindrical housing.

The cylindrical housing ensures proper and equal distribution of the generated illumination across the entire 360 degrees so that the entire premise is equally illuminated. 
The image below explains how the LEDs needs to be installed over the proposed housing.
The circuit of a LED bulb explained here is very easy to build and the circuit is very reliable and long lasting.

The reasonably smart surge protection feature included in the circuit ensures an ideal shielding of the unit from all electrical power ON surges.
<h3 id="LEDtopic-3"><span class="orange">How the Circuit Functions</span></h3> <a href="#top" target="_self"><b>⇧</b></a><br>
The diagram shows a single long series of LEDs connected one behind the other to form a long LED chain.

To be precise we see that basically 40 LEDs have been used which are connected in series. 
Actually for a 220V input, you could probably invorporate around 90 LEDs in series, and for 120V input around 45 would suffice.
These figures are obtained by dividing the rectified 310V DC (from 220V AC) by the forward voltage of the LED.

Therefore, 310/3.3 = 93 numbers, and for 120V inputs it's calculated as 150/3.3 = 45 numbers. 
Remember as we go on reducing the number of LEDs below these figures, the risk of switch ON surge increases proportionately, and vice versa.
The power supply circuit used for powering this array is derived from a high voltage capacitor, whose reactance value is optimized for stepping down the high current input to a lower current suitable for the circuit.

The two resistors and a capacitor at the at the positive supply are positioned for suppressing the initial power ON surge and other fluctuations during voltage fluctuations. 
In fact the real surge correction is done by C2 introduced after the bridge (in between R2 and R3).
All instantaneous voltage surges are effectively sunk by this capacitor, providing a clean and safe voltage to the integrated LEDs at the next stage of the circuit.

<k>CAUTION: THE CIRCUIT SHOWN BELOW IS NOT ISOLATED FROM THE AC MAINS, THEREFORE IS EXTREMELY DANGEROUS TO TOUCH IN POWERED POSITION.</k><k>Circuit Diagram#1</k>
<img src="https://www.homemade-circuits.com/wp-content/uploads/2012/04/led-bulb-circuit-1024x728-1.png">
<h4>Parts List</h4>
R1 = 1M 1/4 watt
R2, R3 = 100 Ohms 1watt,
C1 = 474/400V or 0.5uF/400V PPC
C2, C3 = 4.7uF/250V
D1---D4 = 1N4007
All LEDs = white 5mm straw-hat type input = 220/120V mains...

The above design lacks a genuine surge protection feature and therefore could be severely prone to damage in the long run....in order to safeguard and guarantee the design against all sorts of <a href="https://www.homemade-circuits.com/using-ntc-resistor-as-surge-suppressor/">surge and transients</a>The LEDs in the above discussed LED lamp circuit can be also protected and their life increased by adding a zener diode across the supply lines as shown in the following image. 
The zener value shown is 310V/2 watt, and is suitable if the LED light includes around 93 to 96V LEDs. 
For other lower number of LED strings, simply reduce the zener value as per the total forward voltage calculation of the LED string.

For example if a 50 LED string is used, multiply 50 with the forward drop of each LED that is 3.3 V which gives 50 x 3.3 = 165V, therefore a 170V zener will keep the LED well protected from any sort of voltage surge or fluctuations....and so on
<img src="https://www.homemade-circuits.com/wp-content/uploads/2012/04/led-bulb-circuit-1.png">
Video clip showing an LED circuit circuit using 108 numbers of LED (two 54 LED series strings connected in parallel) <iframe src="https://www.youtube.com/embed/xwjPZYyYdcY?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<h3 id="LEDtopic-4"><span class="orange">High Watt LED Bulb using 1 watt LEDs and Capacitor</span></h3> <a href="#top" target="_self"><b>⇧</b></a><br>A simple high power LED bulb can be built using 3 or 4nos 1 watt LEDs in series, although the LEDs would be operated only at their 30% capacity, still the illumination will be amazingly high compared to the ordinary 20mA/5mm LEDs as shown below.
<img src="https://www.homemade-circuits.com/wp-content/uploads/2012/04/1-watt-led.png">
Moreover you won't require a heatsink for the LEDs since these are being operated at only 30% of their actual capacity.

Likewise, by joining 90nos of 1 watt LEDs in the above design you could achieve a 25 watt high bright, highly efficient bulb.
You may think that getting 25 watt from 90 LEDs is "inefficient", but actually it is not.
Because these 90nos of 1 watt LEDs would be running at 70% less current, and therefore at zero stress level, which would allow them to last almost forever.

Next, these would be comfortably working without a heatsink, so the entire design could be configured into a much compact unit.
No heatsink also means minimum effort and time consumed for the construction. 
So all these benefits ultimately makes this 25 watt LED more efficient and cost effective than the traditional approach.

<h3 id="LEDtopic-5">Circuit Diagram#2</h3> <a href="#top" target="_self"><b>⇧</b></a><br>
<h3 id="LEDtopic-6">Surge Controlled Voltage Regulation</h3> <a href="#top" target="_self"><b>⇧</b></a><br>If you require an improved or a confirmed surge control and voltage regulation for the LED bulb, then the following shunt regulator could be applied with the above 3 watt LED design:
<img src="https://www.homemade-circuits.com/wp-content/uploads/2012/04/led-shunt.png">

<k>Video Clip:</k><iframe src="https://www.youtube.com/embed/YKUpugsmxZk" frameborder="0" allowfullscreen="allowfullscreen"></iframe>
<b>In the videosabove I have purposely flickered the LEDs by twitching the supply wire just to test ensure that the circuit is 100% surge proof.</b>
<h3 id="LEDtopic-7"><span class="orange">Solid State LED Bulb Circuit with Dimmer Control using IC IRS2530D</span></h3> <a href="#top" target="_self"><b>⇧</b></a><br>A simple yet efficient mains transformerless solid state LED controller circuit is explained here using a single full bridge driver IC IRS2530D.

<k>Highly Recommended for you: <a href="https://www.homemade-circuits.com/2014/02/simple-1-watt-to-12-watt-smps-led.html">Simple Highly Reliable Non-Isolated LED Driver</a> - Don't Miss this, Fully Tested</k>
<h3 id="LEDtopic-8">Introduction</h3> <a href="#top" target="_self"><b>⇧</b></a><br>Normally LED control circuits are based on buck boost or flyback principles, where the circuit is configured to produce a constant DC for illuminating an LED series.
The above LED control systems have their respective drawbacks and the positives in which the range of operating voltage and the number of LEDs at the output decide the efficiency of the circuit.

Other factors like whether the LEDs are included in parallel or series or whether they need to bedimmed or not, also affects the above typologies.
These considerations make these LED control circuits rather dicey and complicated.
The circuit explained here employs a different approach and relies on a resonant mode of application.

Though the circuit does not provide direct isolation from the input AC, it has the features of driving many LEDs with current levels as high as 750 mA. 
The soft switching process involved in the circuit ensures greater efficiency to the unit.
<h3 id="LEDtopic-9">How the LED Controller Functions</h3> <a href="#top" target="_self"><b>⇧</b></a><br>Basically the mains transformerless LED control circuit is designed around the fluorescent lamp dimmer control IC IRS2530D. 

The circuit diagram shows how the IC has been wired up and how its output has been modified for controlling LEDs in place of the usual fluorescent lamp.
The usual preheating stage required for a tube light utilized a resonant tank which is now effectively replaced by a LC circuit suitable for driving LEDs.
Because the current at the output is an AC, the need of a bridge rectifier at the output became imperative; this makes sure that current is continuously passing through the LEDs during every switching cycle of the frequency.

The AC current sensing is done by the resistor RCS, placed across the common and the bottom of the rectifier.
This provides an instant AC measurement of the amplitude of the rectified LED current.
The DIM pin of the IC receives the above AC measurement via the resistor RFB and capacitor CFB.This allows the dimmer control loop of the IC to keep track of the LED current amplitude and regulates it by instantaneously varying the frequency of the half bridge switching circuit, such that the voltage across the LED maintains a correct RMS value.

The dimmer loop also helps to keep the LED current constant irrespective of the line voltage, load current and temperature changes.
Whether a single LED is connected or a group in series, the LED parameters is always maintained correctly by the IC.Alternatively the configuration may also be used as a high current transformerless power supply circuit.
<h3 id="LEDtopic-10">Circuit Diagram#3</h3> <a href="#top" target="_self"><b>⇧</b></a><br>

<img src="https://www.homemade-circuits.com/wp-content/uploads/2012/04/solid-state-LED-bulb-with-dimmer.png">
Original article can be found<a href="https://www.homemade-circuits.com/wp-content/uploads/2020/08/Infineon-Lighting_resonant_mode_LED-Article-v01_01-EN-2_compressed.pdf" target="_blank" rel="nofollow noopener noreferrer">here</a>

<h2>Getting Started With NodeMCU (ESP8266)</h2>

<h3>Introduction to NodeMCU (ESP8266)</h3>

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/NodeMCU-Devkit-Pinouts-1024x859.png">

The ESP8266 is a low cost microcontroller with on-board WiFi functionality.
Here are the technical specifications.
<k>Specifications:</k>
Operating Voltage : 3.0 ~ 3.6V
Average Operating Current : 80mA
Tensilica Xtensa LX106 32 bit RISC CPU running at 80 MHz
16 GPIO Pins
SPI
I<sup>2</sup>C
I<sup>2</sup>S
UART – 2x TX and 1x RX
1x 10bit ADC
Operating Temperature : -40°C ~ 125°C
Frequency Range : 2400 ~ 2483.5MHz

This can be used in multiple projects like <a href="https://www.learnrobotics.org/blog/3-projects-using-relays-arduino-for-home-automation/" target="_blank">Home automation</a>, <a href="https://www.learnrobotics.org/blog/wemos-wifi-controlled-robot-using-l298n/" target="_blank">WiFi controlled Robots</a>, <a href="https://www.learnrobotics.org/blog/connect-arduino-to-ifttt-for-iot-projects/" target="_blank">weather stations</a>, and more.
<h3>Materials for this Project</h3>

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/nodemcu-project.jpg">

<k>Hardware Components</k>
NodeMCU with OLED screen)
BreadBoard, Jumper Wires, LEDs, I/O

<k>Software</k>
<a href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a>.
<a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">CP210X Driver</a>.

That's everything we need, Let's move on to the next part to set up the IDE.
<h3>Set up the IDE for NodeMCU</h3>
First, download and install the <a href="https://www.arduino.cc/en/Main/Software" target="_blank">Arduino IDE</a> from the Arduino website.
You can also use the <a href="https://learnrobotics.ck.page/products/editor" target="_blank" aria-label="Learn Robotics Cloud IDE (opens in a new tab)" rel="noreferrer noopener">Learn Robotics Cloud IDE</a> if you'd like the flexibility from programming in the browser!

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/Screenshot-227-1024x576.png">

Now to program the ESP development board, the Arduino IDE should have list of boards.
For that we have to install all the ESP boards.
First Goto >> Files >> Preferences >>  and paste the following link in '<k>Additional board manager URL's</k>' and click on '<k>OK</k>'.
https://arduino.esp8266.com/stable/package_esp8266com_index.json

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/1-1024x576.jpg">

Then, Goto >> Tools >> Board >> Board Manager.
Scroll down to find '<k>ESP8266</k> 'install it.This will add all the ESP based development boards to the IDE.

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/2-1024x576.jpg">

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/3-1024x576.jpg">

Now to connect the NodeMCU to your PC, you have to install CP210X driver.
Download the latest version compatible to your OS from <a href="https://www.silabs.com/products/development-tools/software/usb-to-uart-bridge-vcp-drivers">this website</a>.
Select the right board from the downloaded list.
In this article I have used NodeMCU 1.0 (ESP-12E Module), so I will select that.
Goto >> Tools >> Board >> Select the ESP board you have.
After selecting the correct board, keep the settings as follows:
Flash Size : "4M (3M SPIFFS)"
Debug Port : "Disabled"
Debug Level: "None"
IWIP Variant: "V2 Lower Memory"
CPU Frequency: "80Mhz"
Upload Speed: "921600"
Erase Flash: "Sketch On"
Port : "COM port available" (where the device is connected should show up)

Now the board is ready to be programmed.

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/Screenshot-228.png">

<h3>Upload the Sketch to NodeMCU</h3>

<img src="https://www.learnrobotics.org/wp-content/uploads/2018/11/Screenshot-229.png">

Now that the IDE is setup for NodeMCU you can test it by uploading an Example sketch as follows :-
Files >> Examples >> ESP8266.
Select the Blink example and upload it.

The on board LED should start to blink.
Now the on board LED is connected to Pin D0 of the MCU.
You can connect an external LED to the pin D0.
Now to write sketches for NodeMCU you should know the Pins as NodeMCU have different pin mapping.
You can either use D0...D10 or use the following :-
D0 = 16
D1 = 5
D2 = 4
D3 = 0
D4 = 2
D5 = 14
D6 = 12
D7 = 13
D8 = 15
D9 = 3
D10 = 1

Hope you enjoyed this post and found it informative.
If you have any questions, you can ask them in the comments, below.
Next time we will see how Projects can be controlled over the Internet through your Web Browser.
<a href="/blog/getting-started-with-nodemcu-esp8266-using-arduino-ide">Getting Started With NodeMCU (ESP8266) Using Arduino IDE</a>In this article, I will be sharing with you...
how to get started with NodeMCU ESP8266 development board how you can program it easily using good old Arduino IDE and take your project to next level with WiFi connectivity.
Before we get started, I assume that you have a basic knowledge about Arduino and its development

<h2>Home automation</h2>
<a href="https://randomnerdtutorials.com/hack-pir-motion-sensor-esp8266-hlk-pm03/">Hack a PIR Motion Sensor with an ESP8266</a>
<a href="https://randomnerdtutorials.com/raspberry-pi-motion-detector-photo-capture/">Raspberry Pi Motion Detector with Photo Capture</a>
<a href="https://randomnerdtutorials.com/car-plate-recognition-system-with-raspberry-pi-and-node-red/" target="_blank">Car Plate Recognition System with Raspberry Pi and Node-RED</a>
<a href="https://randomnerdtutorials.com/cctv-raspberry-pi-based-system-storage-motioneyeos/" target="_blank">CCTV Raspberry Pi Based System with Storage using MotionEyeOS</a>
<a href="https://randomnerdtutorials.com/sonoff-basic-switch-esp-easy-firmware-node-red/" target="_blank">Control Sonoff Basic Switch with ESP Easy Firmware and Node-RED</a>
<a href="https://randomnerdtutorials.com/reprogram-sonoff-smart-switch-with-web-server/" target="_blank">Reprogram Sonoff Smart Switch with Web Server</a>
<a href="https://randomnerdtutorials.com/alexa-echo-with-esp32-and-esp8266/" target="_blank">Alexa (Echo) with ESP32 and ESP8266 – Voice Controlled Relay</a>
<a href="https://randomnerdtutorials.com/esp8266-wi-fi-button-diy-amazon-dash-button-clone/" target="_blank">ESP8266 Wi-Fi Button – DIY Amazon Dash Button Clone</a>
<a href="https://randomnerdtutorials.com/esp8266-multisensor-shield/" target="_blank">Build a Multisensor Shield for ESP8266</a>
<a href="https://randomnerdtutorials.com/esp8266-multisensor-shield-with-node-red/" target="_blank">ESP8266 Multisensor Shield with Node-RED</a>
<a href="https://randomnerdtutorials.com/nextion-display-with-esp8266-touchscreen-user-interface-for-node-red/" target="_blank">Nextion Display with ESP8266 – Touchscreen User Interface for Node-RED</a>
<a href="https://randomnerdtutorials.com/esp8266-publishing-dht22-readings-to-sqlite-database/" target="_blank">ESP8266 Publishing DHT22 Readings to SQLite Database</a>
<a href="https://randomnerdtutorials.com/esp8266-publishing-dht22-readings-with-mqtt-to-raspberry-pi/" target="_blank">ESP8266 Publishing DHT22 Readings with MQTT to Raspberry Pi</a>
<a href="https://randomnerdtutorials.com/esp8266-wireless-weather-station-with-data-logging-to-excel/" target="_blank">ESP8266 – Wireless Weather Station with Data Logging to Excel</a>
<a href="https://randomnerdtutorials.com/raspberry-pi-publishing-mqtt-messages-to-esp8266/" target="_blank">Raspberry Pi Publishing MQTT Messages to ESP8266</a>
<a href="https://randomnerdtutorials.com/node-red-with-xiaomi-mijia-bedside-lamp/" target="_blank">Node-RED with Xiaomi Mijia Bedside Lamp (Wi-Fi and Bluetooth)</a>
<a href="https://randomnerdtutorials.com/node-red-with-xiaomi-yeelight-rgbw-smart-bulb/" target="_blank">Node-RED with Xiaomi Yeelight RGBW Smart Bulb</a>
<a href="https://randomnerdtutorials.com/node-red-with-ws2812b-addressable-rgb-led-strip/" target="_blank">Node-RED with WS2812B Addressable RGB LED Strip</a>
<a href="https://randomnerdtutorials.com/node-red-with-raspberry-pi-camera-take-photos/" target="_blank">Node-RED with Raspberry Pi Camera (Take Photos)</a>
<a href="https://randomnerdtutorials.com/video-streaming-with-raspberry-pi-camera/" target="_blank">Video Streaming with Raspberry Pi Camera</a>
<a href="https://randomnerdtutorials.com/esp8266-and-node-red-with-mqtt/" target="_blank">ESP8266 and Node-RED with MQTT (Publish and Subscribe)</a>
<a href="https://randomnerdtutorials.com/exporting-and-backing-up-your-node-red-nodes/" target="_blank">Exporting and Backing Up your Node-RED Nodes</a>
<a href="https://randomnerdtutorials.com/what-is-mqtt-and-how-it-works/" target="_blank">What is MQTT and How It Works</a>
<a href="https://randomnerdtutorials.com/10-diy-wifi-rgb-led-mood-light-with-esp8266-step-by-step/" target="_blank">$10 DIY WiFi RGB LED Mood Light with ESP8266</a>
<a href="https://randomnerdtutorials.com/9-home-automation-open-source-platforms-for-your-projects/" target="_blank">9 Home Automation Open-Source Platforms for Your projects</a>
<a href="https://randomnerdtutorials.com/build-a-home-automation-system-for-100/" target="_blank">Build a Home Automation System for $100</a>
<a href="https://randomnerdtutorials.com/control-a-12v-lamp-via-sms-with-arduino/" target="_blank">Control a 12V Lamp via SMS with Arduino</a>
<k>Getting started guides</k>
<a href="https://randomnerdtutorials.com/getting-started-with-node-red-on-raspberry-pi/" target="_blank">Getting Started with Node-RED on Raspberry Pi</a>
<a href="https://randomnerdtutorials.com/getting-started-with-node-red-dashboard/" target="_blank">Getting Started with Node-RED Dashboard</a>
<a href="https://randomnerdtutorials.com/getting-started-with-home-assistant-on-raspberry-pi/" target="_blank">Getting Started with Home Assistant on Raspberry Pi</a>
<a href="https://randomnerdtutorials.com/install-motioneyeos-on-raspberry-pi-surveillance-camera-system/" target="_blank">Install MotionEyeOS on Raspberry Pi – Surveillance Camera System</a>
<a href="https://randomnerdtutorials.com/guide-to-raspberry-pi-camera-v2-module/" target="_blank">Guide to Raspberry Pi Camera V2 Module</a>
<a href="https://randomnerdtutorials.com/sonoff-5-wifi-wireless-smart-switch-introduction/" target="_blank">Sonoff – $5 WiFi Wireless Smart Switch Introduction</a>
<a href="https://randomnerdtutorials.com/how-to-flash-a-custom-firmware-to-sonoff/" target="_blank">How to Flash a Custom Firmware to Sonoff</a>

<h2>Channel State Information</h2>
信道状态信息 是无线通信中描述信道状态的详细数据。
它通过分析 Wi-Fi 信号在不同子载波上传输时的幅度和相位变化，提供了信道的状态信息。

Wi-Fi 信号从路由器传输到 ESP32
人的动作会干扰 Wi-Fi 信号的传播路径，导致信道状态发生变化。
CSI 可以捕捉这些变化，并通过算法分析来推断环境中的活动情况。

当动作检测或者存在检测的计算结果超出了阈值，ESP32 就会判定室内有人在活动。
控制灯光调亮并打开电扇。
当人体停止动作后，动作检测的结果会低于阈值。

但是 CSI 依然可以通过存在检测判断室内是否有人。
ESP32 可以根据结果保持灯光继续点亮，并将风扇切换成更舒适的自然风。
当人离开屋子后，检测算法的结果会低于阈值，从而确认室内无人，并自动关闭家中电器，以达到节省能源的效果。

当一段时间窗口内出现多次计算结果超过阈值的情形，就可以判断环境中发生了动作。
其他应用
Wi-Fi CSI 还可以用于高精度的室内定位。

通过分析多个 Wi-Fi 接入点（AP）或多个终端设备（STA）之间的 CSI 数据，定位算法（如指纹定位、到达角度（AoA）分析等可以计算出人所在的位置。
随着人体移动，CSI 数据会持续变化，定位系统可以通过这些变化实时更新位置，实现动态追踪。
我们还可以让室内的智能家居与 CSI 产生联动。

例如，当走到书桌前，台灯会自动打开；
风扇根据人的位置调整风向。

开发资源
<a href="https://oshwhub.com/esp-college/esp-bldc" class="whitebut ">ESP 无感方波ADC方案</a>

<a href="https://github.com/espressif/esp-csi:" class="whitebut ">ESP32 CSI Introduction and examples</a>











<script src='https://williamkpchan.github.io/LibDocs/readbook.js'></script>
<script>
var lazyLoadInstance = new LazyLoad({
    elements_selector: ".lazy"
    // ... more custom settings?
});
</script>

</pre></body></html>