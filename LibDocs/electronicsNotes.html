<base target="_blank"><html><head><title>Electronics Notes</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://williamkpchan.github.io/maincss.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.js"></script>
<script src="https://williamkpchan.github.io/lazyload.min.js"></script>
<script src='https://williamkpchan.github.io/mainscript.js'></script>
<script src="https://williamkpchan.github.io/commonfunctions.js"></script>
<script>
  var showTopicNumber = true;
  var bookid = "Electronics Notes"
  var markerName = "h2"
</script>
<style>
body{width:80%;margin-left: 10%; font-size:24px;}
h1, h2 {color: gold;}
strong {color: orange;}
img {max-width:90%; display: inline-block; margin-top: 2%;margin-bottom: 1%; border-radius:3px;}
</style></head><body onkeypress="chkKey()"><center>
<h1>Electronics Notes</h1>

<div id="toc"></div></center>
<br>
<br>
<pre>

<h2 id="mustWatch"><span class="red">MustWatch</span></h2>
<a href="https://www.youtube.com/watch?v=q7P47QDGMo8" class="whitebut ">Quick Tips #6 : Measuring High Voltages</a>

<a href="https://www.youtube.com/watch?v=OeQaNMdneS8" class="whitebut ">體感震動椅</a>

<a href="https://www.youtube.com/watch?v=qGqIrKXc3lg" class="whitebut ">維修移動電源</a>
<a href="https://www.youtube.com/watch?v=QE2u96W1lbk" class="whitebut ">低成本微型熱像儀</a>

<a href="http://mpy-tut.zoic.org/tut/motors.html" class="whitebut ">MicroPython: Motor Control DC motors</a>

<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639599&idx=3&sn=f1063192f99db9461ccb84e139c1fac3&chksm=bd140cb58a6385a3dd491fb42a4ea94489ac1493151fffb9aa2a71848df574fb3d39f00086be&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605749466&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AdpEFy8YQjUKo2gd3xBT1bY%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">关键信号布线</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639600&idx=1&sn=ea6fca74105e34284e12ad5d1e43f104&chksm=bd140caa8a6385bc2a1c578db64aa88359964f64a0ab5dd45c0de646c717c283954baab4da25&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605723353&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=ATwAYNhphVROEOFibJZCwec%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">自制闪光灯</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639606&idx=2&sn=7dcf35db428b80c1fd8cb0f989aa0e92&chksm=bd140cac8a6385bace9f620f43effdd5b28aca92d0c23e69c2141a892f7a697e695ef421415d&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605700730&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AXxx1Ep0%2FGq7YLoyh7pA5i8%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">去除地环路干扰</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651639607&idx=1&sn=d006deca5cf5d575b20b14b8cc86991f&chksm=bd140cad8a6385bb66ca0385042c06155576dad88ced327bd880edba26f9d87137bff71ed8a0&mpshare=1&scene=1&srcid=&sharer_sharetime=1580605681013&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AZtdUPRZIpDhSwrCBdma0ZU%3D&pass_ticket=daNe5g8VQUHTlW195ix0S6x%2F9Q5FduCHhbV9zn0yFxuqUaKUdC6Sa%2BueAElE9J%2Fj#rd" class="whitebut ">7段数码管DIY</a>
<a href="https://mp.weixin.qq.com/s?__biz=MjM5NjIzMDkwMQ==&mid=2651641374&idx=2&sn=d2d779bc4e0d96309282fb6eb965aba1&chksm=bd1415848a639c9251f4788db0bd6f25ed8982640a0bc2b86f372257ad99725f59f24cc9ad9c&mpshare=1&scene=1&srcid=&sharer_sharetime=1589591158215&sharer_shareid=47f00304d1fa31d80011c2064f702c8f&exportkey=AeLimdTGZJ9UHtxkEZ5x%2BCg%3D&pass_ticket=RBEqydqlLbTZNYB3KFblh9KagxwD4F9tAsPsCrfGKgBrNNOIG3yiYl%2BYcjS7%2BspB#rd" class="whitebut ">集成式收发器支持实现小型相控阵雷达平台</a>
<h2>激光扫描仪的应用</h2>激光器——用于通过辐射受激发射来放大光线器件的缩写——是一种能发出一束或多束相干光的电子装置。
相干表示频率和波形相同、相位差不变的电磁波。
激光可用于：切割、蚀刻、焊接和切片应用——如精密雕刻、钻孔、半导体精加工、机械表面再修复以及（医疗领域的）LASIK 眼科手术。
成像和投影——如全息、共聚焦显微镜、高清晰度测量（用于创建点云）、激光光谱。
数据传输——如条形码阅读器以及光纤和 DVD 技术。
定位——如工作单元安防系统、3D 打印和光探测与测距 (LiDAR) 系统。
激光扫描——使用扫描或偏转激光束阵列——是许多此类应用的核心。
本文将回顾几种工业自动化领域最常见的激光扫描应用。
在最简单的实施方案中，激光信号作为点光源产生，然后通过精确控制的内部镜面反射扫过一个活动角度。
内部光探测器读取反射信号。
由于激光束的投射角和飞行时间 (ToF)已知，扫描仪的电子装置可以使用返回信号来构建扫描范围内的详细结构图。
虽然概念简单，但要使激光扫描技术在现实世界中发挥作用，就必须克服一系列开发难题。
其中更具挑战性的是环境光变化、平台移动、实现一致输出所需的光源校准，以及耐受工业环境中的灰尘和污垢。
我们已经找到了应对这些技术挑战的办法；现在，最复杂的一些应用是地面自主车辆 (AGV) 所采用的 360˚ 3D 扫描。
今天，建筑业中使用自流平激光扫描仪进行精密挂板或地面找平也是很常见的应用。
然而，激光扫描仪的另一个应用则是经纬仪测量，帮助土木工程师将道路等级规划到毫米级分辨率。
这些都是针对特殊功能专门设计的激光扫描设备例子——尽管激光扫描仪的真正用途是在工厂车间。
<h3>工业安全激光扫描仪</h3>
我们来考虑自动化领域中一个重要的激光扫描应用——保护危险工作单元。
在基本装置中，激光扫描仪的位置固定，同时激光扫过一个平面。
这种扫描仪用作安全监控系统的光幕。
光幕应安装在一个能够保护危险性设备上特定部分的位置，并监视任何光束中断。
响应中断时，光幕会使关键设备上的部件减速或停止，或提供报警信号。
必须将扫描仪定位，且激光束的几何形状必须能够监测任何可能的操作者进入点。
正如上述响应模式所暗示的那样，扫描仪通常与其他安全设备（防护装置、警报器和截止开关）配套使用，以确保操作人员在接近设备时不会受到伤害。
在光学扫描技术出现之前，采用机械联锁方式来保障危险工作单元的安全。
在维修期间，工作单元的电源切断并采取上锁挂牌措施。
众所周知，人类是最不可靠，因为有些人总会绕过防护设施。
光学互锁更可靠——特别是与硬复位或双操作控制面板配合使用时，用来确保单人操作不会启动重启功能。
如需详细了解，请参阅 Digi-Key 文章《安全激光扫描仪保护操作者》。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsr7durqxMe5onhiaNSJr8icCLBfUU8loMQXicHuemWoAXqfYuK093LXdcoA/640">
飞行时间 (ToF) 技术说明：使用 ToF 技术时，能够根据极坐标精确地绘制物体的位置：光束角度、在被观测区域内与物体之间的距离。
这些信息可用于创建扫描仪观察区域的地图，并将其分为若干区域。
当考虑与协作机器人 (cobots) 配合使用的下一个特殊情况时，这点至关重要。
根据设计，协作机器人的目的是在协作活动中与操作人员一起工作。
这要求紧密靠近以及随之而来的风险。
在使用工作空间地图进行编程后，扫描仪可以根据机器人的位置和操作员的移动情况，确定允许机器人移动的范围。
在机器人以及扫描仪市场，这是一个新兴增长领域，所以新应用一直在向前发展。
<h3>用于 AGV 和定位任务的激光扫描仪</h3>
现在，我们考虑下在移动平台上使用 ToF 的、基于激光扫描仪的光探测和测距 (LiDAR) 技术的优缺点。
用于自主地面车辆 (AGV）中时，此类系统依赖 AGV 定位的内部地图，因此所有物体探测都上下关联。
这种能力被称为同步定位和映射或&nbsp;SLAM。
这会增加系统复杂性，因为位置定位误差会直接影响障碍物或目标的映射定位。
使用本地应答器、教学编程或地板嵌入式轨道有助于缓解这一问题。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrwPibvXSfO8tnEgG1kPCV98vgKXSdaicgEOHLvPUk8fHZe5AyzId21RQw/640">
扫描技术会根据环境光的变化而改变其信噪比 (SNR)。
最坏的情况是全日照，这种情况下光线可能比扫描照度高几个数量级。
目前有几种县城的解决方案，包括调制源、结构化扫描、使用窄频和滤波。
幸运的是，AGV 大多在光控仓库内工作，无需这些技术。
对于室外工作车辆，目前正在密集研究和探索针对性解决方案。
激光扫描仪由视距设备定义。
这意味着它们被限制在正前方的视野中。
如果正面是一列柱子，那么扫描仪只能看到这列柱子中最前面的那根。
扫描仪需要改变视角才能探测其他的柱子，假设这些柱子在扫描仪观察范围内。
移动车辆上的 LiDAR 极其重要——尤其是在当 LiDAR 与其他传感器组合使用，以应对仓库环境实时变化的情况。
在这里，LIDAR 有助于提高交付率，减少人员要求并最大限度地减少事故。
在 LIDAR 系统中选择合适的扫描功能意味着指定线性范围、扫描窗口角度以及这些测量值的线性和角度分辨率。
带宽或更新率是另一个关键因素，它可以限制 AGV 的运行速度。
最后但也是很重要的一点，功耗将确定充电周期，以及在任何给定时间内可以部署的设备数量。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrIGibkQxnVTN5ZJgHIPiaTicCiaNwAhSyFQnGxZzLFCLbDtWVXn1TjBluNg/640">
<h3></h3><h3>AGV 中 LiDAR 的电气和机械注意事项</h3>
LiDAR 正在持续发展，其主要推动力自自动驾驶汽车市场。
因此，在性能、功能、价位上都存在很大差异。
这也意味着目前还没有出现安装或连接标准。
当考虑在应用中使用 AGV 时，这个过程就是将现有的产品与系统要求相匹配，并从中指定物理结构。
目前，有几家公司可进行系统设计，提供完整的或可定制 LiDAR 系统。
根据不同的需求，预先设计的解决方案可能只是形成更优化解决方案的起点。
美国国家标准与技术研究所 (NIST) 率先制定了 AGV 安全标准。
目前这些标准主要集中在碰撞方面上，具体包括：折叠式保险杠：在多数老款车型中，保险杠将包含力检测功能，并在撞上障碍物时启动停车功能，限制碰撞接触力。
非接触方法：现代 AGV 应能探测到物体，并在不造成碰撞的情况下停车。
在测试时已使用了近似于人形的测试物，不过仍建议在未来的测试中更多地使用类似于人形和姿势的测试物。
突然出现的障碍物：安全区域内突然出现的障碍物。
预计 AGV 会启动紧急停车，然而并不期待避免发生碰撞。
预测被遮挡的障碍物：这些障碍包括 AGV 车道附近的设备或人员。
预计在与 AGV 车道的间隙小于 0.5 m 的地方会有指定的慢速区。
在预测未来 AGV 的使用过程中，他们还会制定机器人安全标准，以便开始研究各种测试方法，其中会涉及到 AGV 底盘固定的机械臂。
LIDAR 领域的主流趋势之一就是在不牺牲性能的前提下，推动激光雷达体积、重量和成本的降低。
这在过去十年取得了进展，使这些属性已减少了一个数量级。
我们前文提到，SLAM 或者本地化越来越受关注。
理想的解决方案是，AGV 能够从任何地方出发并绘制用于行驶时参照的自用内部世界地图。
执行此类任务需要依赖 LIDAR 与包括 GPS、轮速传感器和摄像头在内的其他类型传感器的集成。
<h3>激光扫描仪用于数据通信</h3>
线性条形码扫描仪的概念很简单：一种由线条和空格组合而成且读取方便的摩斯码。
测量由扫描仪发出并由条形码反射回的光线。
测量反射回的环境光根据应用的不同，全球常用线性条形码有九种。
虽然激光扫描仪是条形码扫描的主流，但条形码不一定需要激光光源的精度，下面就是一些例外。
大多数情况下，条形码内容的读取和翻译都是在扫描仪内部完成。
通常，条形码扫描仪将解码后的值直接发送至数据库。
少数领域要求条形码激光仪具有高分辨率。
对于空间受限的地方，标准条形码带的物理标准较窄。
这就需要高分辨率扫描仪，激光扫描仪恰好满足这一条件。
条形码距离较远时也存在类似情况（比如在如仓库货架上），这会有效地减小代码角度。
有时，环境光不足以保证条形码与空间之间具有良好对比度。
这种情况下，类似激光这样的已知光源就适合用来照射代码，使其易于阅读。
即使是经常逛杂货店的消费者，也很熟悉自助收银台使用的手持扫描仪。
因为条形码扫描能从无限多的方向进行，所以扫描仪在这些设置中必须产生紧密交叉的激光扫描线矩阵。
这就保证了无论条形码如何呈现，至少有一条扫描线会截取全部代码。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrpJArOhXPtbUycej0ibVEdFwJKOlpgYx5Yn9zykUy2sO4WOofXLcicCxw/640">
二维条形码扫描仪：&nbsp;二维 (2D) 代码不同于上述线性代码。
二维码的信息密度高，具有错误检查功能以及即使损坏也可读取的特点，因此越来越受欢迎。
二维条形码的复杂性意味着它们不适合与激光扫描仪一起使用，而是依赖摄像头进行解码。
常用的二维条形码有四种类型，不过大多数消费者熟悉的是快速反应型 (QR) 码，大多数智能手机都能轻松读取。
当机器制造商和最终用户在条形码和扫描仪之间进行权衡时，应考虑三个主要方面：<ol class="list-paddingleft-2">扫描仪在哪里使用？用于仓库盘点、生产线上生产零件的跟踪，还是用于销售点？需要多少数据、物品上有多大物理空间用来粘贴条形码？在什么表面上打印条形码——以及该表面能够保持多高的打印分辨率？</ol>一旦解决了这三个问题，就能在备选方案中选择了。
<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/Hlibq5A7Z6tMXStgtPQ3rR5HlhTKmjtsrk1xticIBFhibEH7zp7tjpFzU97ST1uI2iavIM7VOIpV4FOXQc73rKGrlA/640">
其他阅读器和基于摄像头的替代品：上文已经介绍了条形码扫描仪的大多数变化形式。
值得一提的是，有些条形码扫描仪会使用一排长长的 LED 灯照亮代码，并配合一排相匹配的电荷耦合器件 (CCD) 探测器来检测反射光。
这种扫描仪被称为 LED 阅读器。
还有采用专门设计和配置的摄像系统，可以有效快速地读取二维码。
<h3>关于激光扫描仪应用的结论</h3>
自 1960 年发明激光以来，基于激光的设备和用途便一直层出不穷，令人瞠目结舌。
虽然条形码比激光早 11 年，但通过相干光扫描读取信息已成为黄金标准。
基于激光的位置跟踪和检测扫描也已经成为工业领域的常用解决方案。
对大多数工业制造和跟踪应用而言，无论是从零开始设计系统还是改进现有工艺，激光扫描方法的某些变化可能是极有价值的。
考虑到技术已发展到现在的地步，如果现在还没有确切的配置，那么就会有一些非常适合的东西出现。


<h2>RS-485</h2>
RS-485概述RS-485和RS-232一样，都是串行通信标准，现在的标准名称是TIA485/EIA-485-A，但是人们会习惯称为RS-485标准，RS-485常用在工业、自动化、汽车和建筑物管理等领域。
RS-485总线弥补了RS-232通信距离短，速率低的缺点，RS-485的速率可高达10Mbit/s，理论通讯距离可达1200米；RS-485和RS-232的单端传输不一样，是差分传输，使用一对双绞线，其中一根线定义为A，另一个定义为B。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjnj8r2lXL6EhaXLxAOCtROgbrXBU11LyvuB02xQULRCdTtfTnGibpOLg/640">
双绞线 RS-485物理层RS-485的物理层负责在设备和物理传输介质之间传输原始数据。
它处理电信号到数字数据的转换，同时定义电压、时序、数据速率等。
① 差分信号长距离布线会有信号衰减，而且引入噪声和干扰的可能性更大，在线缆A和B上的表现就是电压幅度的变化，但是，采用差分线的好处就是，差值相减就会忽略掉干扰依旧能输出正常的信号，把这种差分接收器忽略两条信号线上相同电压的能力称为共模抑制。

<img class="lazy" data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjiasVYVWYe1Wbeicicic9y97E3Y6k36X3IXbAFfI0pf7FB8ucgh753vS1ibQ/640">
标准规定了，逻辑1：+2V to +6V；逻辑0：-6V to -2V。
RS-485不需要使用特定的总线电压，只看最小差分电压，在较长的电缆长度上，接收器接收到的电压可能会降低到+/- 200 mV，这对于RS-485仍然是完全可以接受的，这也是RS-485的优点之一。

<img ="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVj7Q6vXST6eK1uByxM1W4utRWiaXpCCupfk1TSic6ibdtUic7kaSicTiboNUFA/640">
很多收发器的标准达到甚至超过TIA/EIA-485A规范，在实际使用中，以器件的SPEC参数为主，如下某收发器的负输入阈值最小也是-200mV。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjib0gK997aDvQPqHNJwPUebxwN4x8l8MiaAicgNicibR6eXtBaTgoSCS21jg/640">
② 信号定义现在很多的RS-485转换器都是兼容RS-422的，所以看到很多转换器上面的信号都是T/R+、T/R-，即对应RS-485的A+和B-。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjINDrXgFHPknZJetFe5iaAicibD0TkYibqEP0kSemNA4Eb9esz7Qbzibs1qA/640">
对于DB9针型的母头，RS-485有如下的接线定义示意，Pin6~Pin9为N/A不接。
	DB9	输出信号	RS-422全双工接线	RS-485半双工接线
	1	T/R+	发（A+）	RS-485（A+）
	2	T/R-	发（B-）	RS-485（B-）
	3	RXD+	收（A+）	空
	4	RXD-	收（B-）	空
	5	GND	地线	地线
③&nbsp;拓扑结构RS485有两线制和四线制两种接线，四线制只能实现点对点的通信方式，现很少采用，多采用的是两线制接线方式，这种接线方式为总线拓扑结构，在同一总线上最多可以挂接32个节点。
RS-485总线同I2C，也是主从模式，支持点对点单从机模式，也支持多从机模式，不支持多主机模式。

<img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVj08myDhpkicyxOPxJS5OWVT0mj0ptEUHRy51gmjWUibYZZCPPPmFxMczw/640">
</p> RS-485收发器RS-485是差分传输，如果用单片机控制RS-485接口的设备，需要用到收发器，这一点和CAN总线是类似的，如下是一个MCU控制一个RS-485的图示。

<img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjG4Q5oaJeibkib9FHRgEUYbqmgTcR4icjSqN1iciaJExZT6rImwGrjaxztAg/640">
收发器内部是一个接收器（上半部分）加一个发送器（下半部分），下面简单说说收发器的原理，便于理解MCU是如何和485设备通信的。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjOQS1UT1gOVb1iaNx4uVpaJaD9wc13fFsDlVQKpTKtfzuSwZkUb4icw4w/640">
RS-485收发器内部结构其中：A和B为总线；</p>R为接收器输入；</p>RE为接收器使能信号；</p>DE为发送器使能信号；</p>D为发送器输出；</p>对于使能信号，字母上面加一横的为低电平有效（如上图RE），不加的为高电平有效（如DE）。
对于发送器，有如下的真值表：1、当驱动器使能引脚DE为逻辑高时，差分输出A和B遵循数据输入D处的逻辑状态。
D处的逻辑高导致A转为高，B转为低。
在这种情况下，定义为VOD=VA-VB的差分输出电压为正。
当D为低时，输出状态反转，B变高，A变低，VOD为负。
2、当DE低时，两个输出都变成高阻抗。
在这种情况下，与D处的逻辑状态是不相关的。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjUyaXLSXgQZH2uP1RxmVqyRh6fLtQINrawGXqMT8zOYibXhCfwe4YIgw/640">
发送器真值表对于接收器，有如下的真值表：1、当接收器使能引脚RE逻辑低时，接收器被激活。
当定义为VID=VA–VB的差分输入电压为正且高于正输入阈值VIT+时，接收机输出R变高。
当VID为负且低于负输入阈值VIT-，接收机输出R变低。
如果VID在VIT+和VIT-之间，则输出不确定。
2、当RE为逻辑高或悬空时，接收机输出为高阻抗，VID的大小和极性无关。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjqUEpFBVtmibhlG7B5XP2btytZYUXhmebNcdyOe53wM6vysY4rPmnibpQ/640">
接收器真值表 RS-485数据链路上面讲到的RS-485收发器的工作原理，下面简单描述RS-485的数据链路。
<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzIwMDU3MjE2Nw==&amp;mid=2652695793&amp;idx=1&amp;sn=60d2913da6bfd372a8a08af33301d075&amp;chksm=8d136099ba64e98f6111bc2e40d634eda0d0517c8ae21a115f337bd2b32b50d854b109e8585c&amp;scene=21#wechat_redirect" data-itemshowtype="0" tab="innerlink" data-linktype="2"></a>
<img data-src="https://mmbiz.qpic.cn/mmbiz_jpg/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjia81gVCKWGhQ9Q1DRjvBeHD9okZcKGFkZmicYbyOZtibWMOQfKJP96azA/640">
主机发送给从机或者从机发送给主机，都会占用到A和B线，所以RS-485多用在半双工模式。
主机的GPIO会控制RS-485收发器的DE管脚，设置发送模式，从UART TXD线向RS-485收发器的数据（D或DI）线发送一个字节，收发器将在A和B线上将单端UART位流转换为差分位流，数据离开收发器后，主机立即将收发器的模式切换为接收模式。
从机和主机是类似的，从机控制RS-485收发器的/RE管脚，设置为接收模式，接收主机发送的比特流，将其转换为单端信号，通过从机的UART RXD线接收，当从机准备好响应时，它按主机原来的方式进行发送，而主机变为接收。
 RS-232和RS-485转换RS-232和RS-485之间可以转换，一个方法是RS-232转换成TTL，再由TTL转换为RS-485，当然也有芯片支持将RS-232直接转换成RS-485，网上有很多模块。

<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjEImcZ2cralccm0QfOJSlicuxq8q0MzYwD4HCkyeliatdVQmdxXXkK6icA/640">
RS-232和RS-485转换模块 RS-485和CAN的区别虽说RS-485没有标准的数据协议格式，但和CAN总线在很多地方是有相似的，比如A&amp;B和CANH&amp;CANL都是差分信号，通信都需要收发器，都需要120欧姆的匹配电阻等等。


	总线特性	CAN总线	RS-485总线
	硬件成本	稍高	低廉
	总线利用率	优先级自动仲裁，利用率高	采用轮询，利用率低
	数据传输率	高	低
	错误检测机制	控制器带校验机制，保证底层数据传输正确	只有物理层规范，无数据链路层规定
	单节点故障影响	&nbsp;总线无影响	总线瘫痪
	开发成本	软件开发灵活，时间成本低	开发难度较大
	系统成本	较低&nbsp;	高
 RS-485常用电路网上找的一个常用的RS-485电路，其中需要注意两点：
<img data-src="https://mmbiz.qpic.cn/mmbiz_png/eSTNcxMia1ThAu5psfZ28icNRpUmlcfaVjWOBvTaibIibicicJ1Y3J6FicBiaL3ic149KcZcoHibw97JliazWnEj7WD3OHtDA/640">
1、使能信号RE和DE可采用一个GPIO控制，节省资源，GPIO25输出高电平，RE=DE=0V，进入接收模式；GPIO25输出低电平，RE=DE=3.3V，进入发送模式。
2、有一些电路中会在A上加上拉，B上加下拉电阻，主要原因是：RS-485总线在idle状态，电平是不固定的，即电平在-200mV~+200mV之间，收发器可能输出高也可能输出低，UART在空闲时需要保持高电平的，如果此时收发器输出一个低电平，对UART来说是一个start bit，会导致通信异常，关于Ru和Rd的阻值在这里不作过多赘述，后面有机会会详细写一篇文章。
关于第二点，需要注意：① A上加上拉，B上加下拉，接反数据通信也可能出错。
② 某些收发器内部集成上下拉电阻，则外部不需要再添加。

<h2>BLDC Motor Control: Sensorless Brushless DC Motor Controllers</h2>
A Quick Review of Brushed and Brushless DC Motors
<a href="https://www.allaboutcircuits.com/textbook/alternating-current/chpt-13/brushless-dc-motor/" target="_blank">Brushless DC (BLDC) motors</a> have become extremely popular over their predecessor, the brushed DC motor (see figure below). 
As the name implies, "brushed" DC motors use brushes, and a commutator, for controlling the movement of the motor's rotor.

<img alt="Brushed DC motors use brushes and a commutator" src="https://www.allaboutcircuits.com/uploads/articles/Brushed_DC_Motor.jpg">
<strong>Figure 1. </strong>Brushed DC motors use brushes and a commutator. 

Again, as implied by its name, brushless DC motors don't utilize brushes; motor movement is controlled by means of carefully designed drive signals. 
Compared to brushed motors, <a href="https://eepower.com/test-and-measurement/2015/07/dual-channel-brushless-dc-motor-controller-3" target="_blank">brushless motors offer improved reliability, longer life, smaller size, and lower weight</a>. 
BLDC motors have become more popular in applications where efficiency is a critical concern&nbsp;and, generally speaking, a BLDC motor is considered to be a high-performance motor capable of providing large amounts of torque over a wide speed range.

Some BLDC motors use <a href="https://www.allaboutcircuits.com/technical-articles/understanding-and-applying-the-hall-effect/" target="_blank">Hall-effect</a> sensors for detecting the position of the motor's rotor with respect to the motor's stator (see Figure 2 below).

<img alt="BLDC motor using Hall-effect sensors" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_with_Hall_Effect_Sensors-1.jpg">

<em><strong>Figure 2. </strong>BLDC motor using Hall-effect sensors. 
Image courtesy of <a href="http://www.nidec.com/en-EU/technology/motor/basic/00005/" target="_blank">Nidec.com</a>.</em>

Other motors don’t have sensors; they’re referred to as sensorless BLDC motors. 
In place of using Hall-effect sensors for determining the rotor's position and/or speed, a phenomenon called back EMF is employed (see Figure 3 below).

<img alt="Sensorless BLDC motor control using back EMF" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless.jpg">

<em><strong>Figure 3. </strong>Sensorless BLDC motor control using back EMF. 
Image courtesy of <a href="http://ww1.microchip.com/downloads/en/AppNotes/00970A.pdf" target="_blank">Microchip (page 4)</a>.</em>
<h3>Sensorless BLDC Motor Control</h3>

Sensorless BLDC motor control—sometimes called sensorless trapezoidal control of BLDC motors—uses back EMF (BEMF) for determining the location of the motor's rotor (the motor's rotating part) with respect to the motor's stator (the stationary part).

A voltage applied across a motor's winding forces the motor's rotor to turn. 
The movement of the rotor through the motor’s magnetic field, however, is analogous to the behavior of a generator, and consequently the motor not only receives an applied voltage but also generates its own voltage. 
This voltage is referred to as back electromotive force, or back EMF, and it is proportional to the motor's rotational speed. 
Back EMF can be used to determine a motor's rotor speed and position—no sensors are required. 
Controlling a motor by means of back EMF is not a simple task; most sensorless BLDC motors are controlled using a microcontroller, a digital signal processor, or a dedicated driver IC. 
The figure below shows a typical sensorless BLDC motor driver.

<img alt="Typical sensorless BLDC motor drive" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_sensorless_BLDC_motor_drive-1.jpg">

<em><strong>Figure 4.</strong>Typical sensorless BLDC motor drive.</em>


The <a href="https://www.allaboutcircuits.com/electronic-components/datasheet/DRV10983PWPR-Texas-Instruments/" target="_blank">DRV10983</a> from Texas Instruments is a three-phase sensorless motor driver with integrated power MOSFETs capable of providing a continuous drive current of up to 2 A. 
It is highly integrated and requires few external components.

<img alt="TI's DRV10983 Sensorless BLDC motor control driver" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_TIs_DRV10983.jpg">

<em><strong>Figure 5. </strong>TI's DRV10983 Sensorless BLDC motor control driver. 
Image courtesy of <a href="https://www.ti.com/lit/ds/symlink/drv10983.pdf" target="_blank">Texas Instruments (page 1)</a>.</em>

Not all sensorless BLDC motor controllers have integrated MOSFETs. 
Consider, for example, the <a href="https://www.allaboutcircuits.com/electronic-components/datasheet/A4964KEVTR-J-Allegro-MicroSystems/" target="_blank">A4964</a> from Allegro. 
This part requires the use of external N-channel power MOSFETs; it can operate in conjunction with a microcontroller or as an independent single-chip motor controller.

<img alt="Allegro's A4964 sensorless BLDC controller can operate either with a microcontroller or as an independent motor controller" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_Allegros_A4964.jpg">

<em><strong>Figure 6. </strong>Allegro's A4964 sensorless BLDC controller can operate either with a microcontroller or as an independent motor controller. 
Image taken from the A4964 <a href="http://www.allegromicro.com/~/media/Files/Datasheets/A4964-Datasheet.ashx" target="_blank">datasheet</a>.</em>

As mentioned earlier, the term <em>trapezoidal</em> is sometimes used when describing sensorless BLDC motor controllers. 
And when viewing the figure below, it's easy to see why: the voltage waveforms for each of the three motor phases have a trapezoidal shape.

<img alt="Microchip's AN970 showing Hall-effect sensor waveforms and corresponding back-EMF trapezoidal waveforms" src="https://www.allaboutcircuits.com/uploads/articles/BLDC_DC_Motor_Sensorless_Trapezoidal_waveform.jpg">

<em><strong>Figure 7. </strong>Microchip's AN970 showing Hall-effect sensor waveforms and corresponding back-EMF trapezoidal waveforms. 
Image courtesy of <a href="http://ww1.microchip.com/downloads/en/AppNotes/00970A.pdf" target="_blank">Microchip (page 3)</a>.</em>
<h3>Disadvantages of Sensorless BLDC Motor Controllers</h3>

When the rotor of a sensorless BLDC motor is rotating, its sensorless scheme can work perfectly. 
However, this is not the case when the motor's rotor is stationary, and this leads us to one major disadvantage of using sensorless BLDC motors. 
When the motor's rotor is not turning, no back EMF generated. 
Without back EMF, the drive circuitry lacks the information it needs to properly control the motor.

For this problem, Texas Instruments offers two solutions as stated in their DRV10983 datasheet (page 17):

Use the DRV10983's <em>initial position detect</em> (IPD) feature to determine the rotor position "based on the deterministic inductance variation, which is often present in BLDC motors."

Or, use the <em>align-and-go</em> technique. 
With this method, a voltage is applied across one of the phases to force the rotor into a known alignment.

Another disadvantage of using sensorless BLDC motors is related to the relationship between back EMF and angular speed. 
Lower speed means less back EMF, and consequently Hall-effect BLDC motors might be more effective than sensorless BLDC motors in low-speed applications.

<h3>In Conclusion</h3>

Brushless DC motors offer significant advantages over standard brushed motors. 
Brushless DC implementations can be sensorless or based on Hall-effect sensors integrated into the motor (a third option is the use of an <a href="https://www.allaboutcircuits.com/technical-articles/convenient-rotational-measurements-a-new-angle-sensor-soc-from-allegro/" target="_blank">external angular position sensor</a>). 
Sensorless systems reduce cost and require fewer interconnects between the driver module and the motor; they can be somewhat complex, but high-performance integrated circuits help to simplify the design task. 
Though sensorless systems are usually preferable, the use of Hall-effect sensors may be a better choice for low-speed applications.










<script src='https://williamkpchan.github.io/LibDocs/readbook.js'></script>
<script>
var lazyLoadInstance = new LazyLoad({
    elements_selector: ".lazy"
    // ... more custom settings?
});
</script>

</pre></body></html>