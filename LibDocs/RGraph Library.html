<base href=http://www.sendesignz.com/>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
  a {text-decoration: none}
  A:hover { color: yellow }
  A:focus { color: red }
 #newtype { color: pink}
 #redword { color: red}
 #yellowword { color: yellow}
 #greenword { color: green}
 #orangeword { color: orange}
 #whiteword { color: white}
 #grayword { color: gray}
 .highlight { 
    color: gray;
    background-color: #101A08
  }
 #brownword { color: #ff8000}
}
</STYLE>
</head>
<body bgcolor="#000000" text="#109030" leftmargin="10" topmargin="10" marginwidth="150" link="#08C8A8" vlink="#389898" alink="#28B8B8" target=_blank>
<FONT size=3>


<h2>HTML5 Canvas Graph with RGraph Graph Library</h2>
 
<p>HTML5 introduces a new HTML element: the CANVAS tag. This tag allows for two dimensional drawing easily using Javascript. This makes it perfect for producing graphs. You've already seen how to draw basic shaps in my previous tutorial <a href="/index.php/web-development/79-drawing-on-the-canvas" target="_self">Drawing on the Canvas</a>, but drawing something complex requires a lot more JavaScript. We need a graphing library to help us along.
<p> 
<h3><strong>RGraph Library</strong></h3>
<p>RGraph is a HTML5 canvas graph library based on the canvas tag. Like most graph library, RGraph support wide variety of graph types including bar chart, pie chart, radar chart, etc.
<p>It ridiculously simple to draw graphs using the HTML5 canvas. It's a pure JavaScript solution, though, so it won't work for those user agents that don't have JavaScript available, but then again, neither will the canvas.
<p>Here's the code for a very simple bar graph:<br /><script type="text/javascript">
	SyntaxHighlighter.config.clipboardSwf = "http://www.sendesignz.com/plugins/content/codehighlight/scripts/clipboard.swf";
	SyntaxHighlighter.defaults["auto-links"] = true;
	SyntaxHighlighter.defaults["collapse"] = false;
	SyntaxHighlighter.defaults["gutter"] = true;
	SyntaxHighlighter.defaults["smart-tabs"] = true;
	SyntaxHighlighter.defaults["tab-size"] = 4;
	SyntaxHighlighter.defaults["toolbar"] = true;
	SyntaxHighlighter.defaults["wrap-lines"] = true;	
	SyntaxHighlighter.all();
</script><div style="overflow: hidden; display: block; height: auto; width: ;"><pre class="brush:text;">var bar = new RGraph.Bar('sales', [558,1155,711,248]);
<p>bar.Set('chart.gutter', 50);
<p>bar.Set('chart.colors', ['green']);
<p>bar.Set('chart.title', "A bar graph of car sales in America" );
<p>bar.Set('chart.labels', ["Audi" , "BMW" , "Lexus" , "Volvo" ]);
<p>bar.Draw();</pre></div><br />All we have to do is create a couple of JavaScript arrays, and the library draws the graph on the canvas for us.
<h3><strong>Drawing Simple Graph</strong></h3>
<p>Download the <a href="http://www.rgraph.net/" target="_blank">Rgraph html 5.0 canvas libraries</a>, and place the files in libraries folder into  the 'js' folder.
<p>We're using bar graph, so we need both the RGraph Bar graph library and ' the core RGraph library. We'll also use jQuery to grab the data out of the document. In the head section of the HTML page, we need to load the libraries we need.
<p><strong><br />Full Code<br /></strong><div style="overflow: hidden; display: block; height: auto; width: ;"><pre class="brush:text;">&lt;!DOCTYPE html&gt;
<p>&lt;html&gt;
<p>&lt;head&gt;
<p>&lt;title&gt;HTML5 Canvas Graphing with RGraph graph Library&lt;/title&gt;
<p>&lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"&gt;&lt;/script&gt;
<p>&lt;script src="/js/RGraph.common.core.js" &gt;&lt;/script&gt;
<p>&lt;script src="/js/RGraph.bar.js" &gt;&lt;/script&gt;
<p>&lt;script type="text/javascript"&gt;
<p>var drawGraph = function(){
<p>var canvas = document.getElementById('sales');
<p>var context = canvas.getContext('2d');
<p>' 
<p>var bar = new RGraph.Bar('sales', [558,1155,711,248]);
<p>bar.Set('chart.gutter', 50);
<p>bar.Set('chart.colors', ['green']);
<p>bar.Set('chart.title', "A bar graph of car sales in America" );
<p>bar.Set('chart.labels', ["Audi" , "BMW" , "Lexus" , "Volvo" ]);
<p>bar.Draw();
<p>};
<p>$(function(){
<p>var canvas = document.getElementById('sales');
<p>if (canvas.getContext){
<p>drawGraph();
<p>}
<p>});
<p>&lt;/script&gt;
<p>&lt;/head&gt;
<p>&lt;body&gt;
<p>&lt;canvas id="sales" width="500" height="200"&gt;
<p>Fallback content here
<p>&lt;/canvas&gt;
<p>&lt;/body&gt;
<p>&lt;/html&gt;</pre></div>
<h2><a href="/Demo/WebDevelopment/canvas/simpleGraph.htm" target="_blank">Demo</a><br /><br /></h2>
<p> 
<ul>
<li><strong>chart.gutter</strong>-Outside area of the X and Y axis - where the labels go.<br /><br /></li>
<li><strong>chart.colors</strong>-Bar Color<br /><br /></li>
<li><strong>chart.title</strong>-Title of the Chart<br /><br /></li>
<li><strong>chart.labels</strong>-An array of the labels to be used on graph.</li>
</ul>
<p> 
<h3><strong>Describing Data with HTML</strong></h3>
<p><div style="overflow: hidden; display: block; height: auto; width: ;"><pre class="brush:text;">&lt;div id="graph_data"&gt;
<p>&lt;h1&gt;Browser share for this site&lt;/h1&gt;
<p>&lt;ul&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Safari 4" data-percent="15"&gt;
<p>Safari 4 - 15%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Internet Explorer" data-percent="55"&gt;
<p>Internet Explorer - 55%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Firefox" data-percent="14"&gt;
<p>Firefox - 14%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Google Chrome" data-percent="16"&gt;
<p>Google Chrome - 16%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;/ul&gt;
<p>&lt;/div&gt;</pre></div><br />We'€™ r e using the HTML5 data attributes to store the browser names and the percentages. Although we have that information in the text.
<p><strong>Output</strong>
<p><img id="img4425"  src="http://www.sendesignz.com/images/stories/Canvas/fallback.png" border="0" /><br /><br />
<p>This will be your fallback content for mobile devices and other users where either the canvas element or JavaScript is not available.
<p> 
<h3><strong>Turning HTML into Graph</strong></h3>
<p><div style="overflow: hidden; display: block; height: auto; width: ;"><pre class="brush:text;">function canvasGraph(){
<p>var title = $('#graph_data h1').text();
<p> 
<p>var labels = $("#graph_data&gt;ul&gt;li&gt;p[data-name]").map(function(){
<p>return $(this).attr("data-name");
<p>});
<p> 
<p>var percents = $("#graph_data&gt;ul&gt;li&gt;p[data-percent]").map(function(){
<p>return parseInt($(this).attr("data-percent"));
<p>});
<p> 
<p>var bar = new RGraph.Bar('sales', percents);
<p>bar.Set('chart.gutter', 50);
<p>bar.Set('chart.colors', ['blue']);
<p>bar.Set('chart.title', title);
<p>bar.Set('chart.labels', labels);
<p>bar.Draw();
<p> 
<p>}
<p> 
<p>var canvas = document.getElementById('sales');
<p>if (canvas.getContext){
<p>$('#graph_data').hide();
<p>canvasGraph();
<p>}</pre></div><br />First, on line 2, we grab the text for the header. Then, on line 4, we select all the elements that have the data-name attribute. We use jQuery'€™s map function to turn the values from those elements into an array.
<p>We use that same logic again on line 8 to grab an array of the percentages.
<p>We simply leave the data outside the canvas and then hide it with jQuery once we'€™ve checked that the canvas exists.<br /><br />
<p><strong>Full Code</strong>
<p><div style="overflow: hidden; display: block; height: auto; width: ;"><pre class="brush:text;">&lt;!DOCTYPE html&gt;
<p>&lt;html&gt;
<p>&lt;head&gt;
<p>&lt;title&gt;HTML5 Canvas Graphing with RGraph graph Library&lt;/title&gt;
<p>&lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"&gt;&lt;/script&gt;
<p>&lt;script src="/js/RGraph.common.core.js" &gt;&lt;/script&gt;
<p>&lt;script src="/js/RGraph.bar.js" &gt;&lt;/script&gt;
<p>&lt;script type="text/javascript"&gt;
<p>var drawGraph = function(){
<p>var canvas = document.getElementById('sales');
<p>var context = canvas.getContext('2d');
<p> 
<p>function canvasGraph(){
<p>var title = $('#graph_data h1').text();
<p> 
<p>var labels = $("#graph_data&gt;ul&gt;li&gt;p[data-name]").map(function(){
<p>return $(this).attr("data-name");
<p>});
<p> 
<p>var percents = $("#graph_data&gt;ul&gt;li&gt;p[data-percent]").map(function(){
<p>return parseInt($(this).attr("data-percent"));
<p>});
<p> 
<p>var bar = new RGraph.Bar('sales', percents);
<p>bar.Set('chart.gutter', 50);
<p>bar.Set('chart.colors', ['blue']);
<p>bar.Set('chart.title', title);
<p>bar.Set('chart.labels', labels);
<p>bar.Draw();
<p>}
<p>var canvas = document.getElementById('sales');
<p>if (canvas.getContext){
<p>$('#graph_data').hide();
<p>canvasGraph();
<p>}
<p>};
<p>$(function(){
<p>var canvas = document.getElementById('sales');
<p>if (canvas.getContext){
<p>drawGraph();
<p>}
<p>});
<p>&lt;/script&gt;
<p>&lt;/head&gt;
<p>&lt;body&gt;
<p>&lt;canvas id="sales" width="500" height="200"&gt;
<p>Fallback content here
<p>&lt;/canvas&gt;
<p>&lt;div id="graph_data"&gt;
<p>&lt;h1&gt;Browser share for this site&lt;/h1&gt;
<p>&lt;ul&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Safari 4" data-percent="15"&gt;
<p>Safari 4 - 15%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Internet Explorer" data-percent="55"&gt;
<p>Internet Explorer - 55%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Firefox" data-percent="14"&gt;
<p>Firefox - 14%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;li&gt;
<p>&lt;p data-name="Google Chrome" data-percent="16"&gt;
<p>Google Chrome - 16%
<p>&lt;/p&gt;
<p>&lt;/li&gt;
<p>&lt;/ul&gt;
<p>&lt;/div&gt;
<p>&lt;/body&gt;
<p>&lt;/html&gt;</pre></div>
<h2><a href="/Demo/WebDevelopment/canvas/graph.htm" target="_blank">Demo</a></h2>
<p><br />Now that you know a little about how the canvas works, you can start thinking of other ways you might use it. You could use it to create a game, create a user interface for a media player, or use it to build a better image gallery. All you need to start painting is a little bit of JavaScript and a little bit of imagination.
