

<!DOCTYPE html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>尋寶機</title>

<link href="..\maincss.css" rel="stylesheet" type="text/css">
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="..\js\jquery.mobile-1.4.5.min.js"></script>

<style>
html,body { -webkit-text-size-adjust:none; }
body {
  background-color: black  !important;
  color: gray;
  justify-content: center;
  align-content: center;
}
#stkChart {font-size: 18px; font-weight:lighter;}
img{width:100%;}
a:visited { color: #389898;}

</style>

</head>

<body onkeypress="chkKey()">
<center>
	<div id="mainFrame">

	<button class="orangeb" onclick=showSmallChart()>尋寶</button>
	<button id="jumpButton" onclick=jpButClick()>Stks Left: <span id="stkChartsLeft"></span></button>
	<button onclick=jpback()>back</button>


	<div id="stkChart" style="text-align:center;"> </div><br>
	</div>
  </center>

<br><br><br><br>
<script>
// List of Q & A
var stkChartList = [
'1',
'10',
'1023',
'103',
'1031',
'1065',
'1070',
'1072',
'1086',
'1088',
'11',
'1103',
'1112',
'1113',
'1128',
'1138',
'1157',
'1169',
'1171',
'1186',
'1199',
'12',
'1211',
'1222',
'123',
'1233',
'1238',
'1258',
'1266',
'129',
'1292',
'1297',
'1299',
'13',
'131',
'1313',
'132',
'1330',
'1336',
'1339',
'1340',
'135',
'1359',
'1363',
'138',
'1398',
'14',
'1415',
'142',
'145',
'147',
'148',
'15',
'1508',
'151',
'16',
'1610',
'1613',
'1618',
'1638',
'165',
'1651',
'1658',
'1696',
'17',
'1700',
'1727',
'173',
'175',
'1766',
'1776',
'178',
'1788',
'18',
'1800',
'1812',
'1816',
'182',
'1833',
'189',
'1898',
'1899',
'19',
'191',
'1918',
'1928',
'1997',
'1998',
'1999',
'2',
'20',
'200',
'2007',
'2009',
'2017',
'2018',
'2020',
'2039',
'2091',
'2099',
'21',
'2128',
'215',
'2199',
'22',
'2208',
'23',
'2313',
'2318',
'2328',
'2333',
'2357',
'2380',
'2382',
'2383',
'2389',
'24',
'242',
'2480',
'26',
'2607',
'2628',
'2669',
'2688',
'27',
'2727',
'2768',
'2777',
'2779',
'2799',
'28',
'2800',
'2822',
'2823',
'2828',
'288',
'2888',
'2899',
'29',
'293',
'3',
'30',
'308',
'31',
'312',
'315',
'317',
'32',
'323',
'326',
'327',
'3308',
'3311',
'3323',
'3333',
'3396',
'341',
'345',
'347',
'35',
'355',
'357',
'358',
'36',
'3618',
'363',
'3686',
'3698',
'37',
'371',
'3799',
'3800',
'3808',
'3823',
'3836',
'3839',
'384',
'386',
'388',
'3886',
'3888',
'390',
'3918',
'392',
'3983',
'3988',
'3993',
'4',
'40',
'400',
'405',
'412',
'425',
'43',
'435',
'440',
'45',
'451',
'46',
'460',
'467',
'489',
'49',
'493',
'5',
'50',
'500',
'52',
'521',
'525',
'57',
'586',
'590',
'6',
'6030',
'606',
'6060',
'61',
'617',
'6198',
'63',
'639',
'64',
'65',
'651',
'656',
'658',
'659',
'66',
'665',
'67',
'670',
'6808',
'6823',
'6837',
'6869',
'688',
'6881',
'6886',
'697',
'698',
'7',
'70',
'700',
'716',
'719',
'7228',
'728',
'7300',
'731',
'7312',
'7321',
'7328',
'7341',
'7388',
'74',
'75',
'751',
'762',
'763',
'77',
'78',
'799',
'8',
'806',
'81',
'815',
'8153',
'816',
'817',
'818',
'8193',
'823',
'825',
'8313',
'839',
'84',
'848',
'857',
'859',
'867',
'876',
'88',
'883',
'887',
'89',
'9',
'902',
'906',
'914',
'921',
'934',
'939',
'94',
'941',
'95',
'951',
'956',
'958',
'96',
'960',
'966',
'97',
'98',
'981',
'983',
'992',
'998',
'110000',
'110001',
'110002',
'110003',
'110010',
'110030',
'110050',
'111000',
'111100',
'221000',
'222000',
];

var remainChtNo = stkChartList.length;

function shuffle() {
 var listlen = stkChartList.length, j = 0, temp;

 while (listlen--) {
  j = Math.floor(Math.random() * (listlen+1));

  temp = stkChartList[listlen];
  stkChartList[listlen] = stkChartList[j];
  stkChartList[j] = temp;
 }
}

function showSTKChart() {
  remainChtNo = remainChtNo - 1;
  var pointer = remainChtNo;
  var thecode = stkChartList[pointer];

  document.querySelector('#stkChartsLeft').innerHTML = remainChtNo;
  sSCt(thecode);
  document.querySelector('#jumpButton').focus();
}


function jpButClick() {
  var jpBut = document.querySelector('#jumpButton');
  if (remainChtNo > 0) {showSTKChart();}
  if (remainChtNo === 0) {
      jpBut.innerHTML = 'Bye!';
      jpBut.classList.add('disabled');
  }
}

function jpback() {
  remainChtNo = remainChtNo + 2;
  if (remainChtNo <= stkChartList.length){
	jpButClick();
  } else {
	remainChtNo = stkChartList.length -1;
  }
}


function chkKey() {
  var testkey = getChar(event);
  if(testkey == 'f'){jpButClick();}
  if(testkey == 'b'){jpback();}
  if(testkey == 's'){showSmallChart();}
  jQuery("#mainframe").on( "swipeleft", function( event ) {jpback();} );
  jQuery("#mainframe").on( "swiperight", function( event ) {jpButClick();});
}
function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}

function showSmallChart() {
    var thecode = prompt("Code Number:", "");
    if (thecode != null && thecode != "") {sSCt(thecode);}
}

function sSCt(stkcode) {
  imgHead = "<img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1050&chartheight=690&stockid=";
  imgPCode= "&period=";
  imgTail="&type=1&logoStyle=1'><br>";

  intv = [4, 7, 11, 12];
  newshead = "http://www.aastocks.com/tc/stocks/analysis/stock-aafn/"
  newstail = "/0/all/1"
  newsStr = newshead + stkcode + newstail
  imgAdr = "<a href='" + newsStr + "' target = _blank>" + stkcode + "</a><br>" 

  for( var imgPeriod = 0; imgPeriod < intv.length; imgPeriod++){
    imgAdr = imgAdr + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
  };
    document.getElementById("stkChart").innerHTML = imgAdr;
}

$("body").on("swiperight",function(){
	jpButClick();
});
$("body").on("swipeleft",function(){
	jpback();
});


shuffle();
showSTKChart();

</script>
</body>
</html>
