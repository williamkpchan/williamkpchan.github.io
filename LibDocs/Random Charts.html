

<!DOCTYPE html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>尋寶機</title>

<link href="..\maincss.css" rel="stylesheet" type="text/css">
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="..\js\jquery.mobile-1.4.5.min.js"></script>
<script type='text/javascript' src='..\mainscript.js'></script>

<style>
html,body { -webkit-text-size-adjust:none; }
body {
  background-color: black  !important;
  color: gray;
  justify-content: center;
  align-content: center;
}
#stkChart {font-size: 18px; font-weight:lighter;}
img{width:100%;}
a:visited { color: #389898;}

</style>

</head>

<body onkeypress="chkKey()">
<center>
	<div id="mainFrame">
	<b class="ulleft" onclick="window.open('mailto:williamkpchan@gmail.com?subject=HK Stk Chart Suggestion&body=some suggestions:');">Suggestions</b>

	<button class="orangeb" onclick=showSmallChart()>尋寶</button>
	<button class="greenb" onclick=shortSCt()>分鐘圖</button>
	<button class="goldb" onclick=addToHeedCodeList()>&hearts;</button>
	<a href="heedChart.html" target="_blank"><span class="whiteb">關注組</span></a> 


	<button id="jumpButton" onclick=jpButClick()>Stks Left: <span id="stkChartsLeft"></span></button>
	<button onclick=jpback()>back</button>
	<br>
	<div id="dateTime" style="text-align:center;"> </div>

	<div id="stkChart" style="text-align:center;"> </div><br>
	</div>
</center>

<script>
// List of Q & A
var stkChartList = [
'1',
'10',
'1003',
'1004',
'101',
'1030',
'1031',
'1038',
'1044',
'1051',
'1055',
'1060',
'1065',
'1066',
'1070',
'1071',
'1072',
'1083',
'1086',
'1088',
'1089',
'1093',
'1099',
'11',
'1106',
'1109',
'1112',
'1113',
'1114',
'1115',
'1128',
'1131',
'1138',
'1157',
'1169',
'1171',
'1177',
'1186',
'119',
'1193',
'1199',
'12',
'1208',
'1211',
'1212',
'123',
'1233',
'1234',
'1238',
'1243',
'1257',
'1265',
'1266',
'1269',
'128',
'1288',
'1297',
'1299',
'1302',
'1310',
'1313',
'1316',
'1317',
'1330',
'1333',
'1336',
'1337',
'1339',
'1347',
'135',
'1357',
'1359',
'136',
'1361',
'1363',
'1368',
'1378',
'1381',
'1382',
'1383',
'139',
'1398',
'14',
'1415',
'142',
'144',
'1448',
'1458',
'1475',
'1478',
'148',
'1508',
'151',
'1513',
'1515',
'152',
'1528',
'1530',
'1548',
'1558',
'1569',
'1573',
'1579',
'1585',
'1598',
'16',
'1600',
'1613',
'1618',
'1622',
'1628',
'1632',
'1638',
'1647',
'165',
'1651',
'1658',
'1666',
'1668',
'168',
'1681',
'17',
'171',
'1717',
'1720',
'1727',
'1728',
'173',
'175',
'1752',
'1766',
'177',
'1776',
'1777',
'1778',
'178',
'1788',
'1789',
'179',
'1800',
'1806',
'1811',
'1812',
'1813',
'1815',
'1816',
'1818',
'1828',
'1829',
'1833',
'1862',
'1882',
'1883',
'1888',
'1889',
'189',
'1898',
'1899',
'19',
'1908',
'1910',
'1913',
'1918',
'1919',
'1928',
'1929',
'1958',
'1963',
'1966',
'1970',
'1972',
'1988',
'1997',
'1999',
'2',
'20',
'200',
'2001',
'2003',
'2005',
'2006',
'2007',
'2009',
'2018',
'2020',
'2022',
'2038',
'2039',
'2098',
'2099',
'2119',
'2128',
'215',
'2186',
'2188',
'2196',
'220',
'2202',
'2208',
'2233',
'2238',
'2268',
'2269',
'2282',
'23',
'2313',
'2314',
'2318',
'2319',
'2328',
'2329',
'2331',
'2333',
'2338',
'2343',
'2357',
'2362',
'2380',
'2382',
'2386',
'2388',
'2389',
'24',
'241',
'242',
'257',
'2588',
'2600',
'2601',
'2607',
'2611',
'2628',
'2638',
'2666',
'2669',
'267',
'2678',
'268',
'2688',
'2689',
'27',
'270',
'272',
'2727',
'2768',
'2777',
'2779',
'279',
'2799',
'2800',
'2822',
'2823',
'2828',
'285',
'2858',
'2866',
'2868',
'2869',
'2877',
'288',
'2883',
'2888',
'2899',
'291',
'293',
'3',
'303',
'308',
'31',
'312',
'315',
'316',
'317',
'322',
'323',
'327',
'330',
'3301',
'3306',
'3308',
'3311',
'3319',
'3320',
'3323',
'3328',
'3329',
'3333',
'3337',
'3339',
'3360',
'3377',
'338',
'3380',
'3383',
'3396',
'34',
'341',
'342',
'345',
'347',
'35',
'354',
'357',
'358',
'3606',
'3618',
'363',
'3633',
'3669',
'3686',
'3698',
'371',
'3738',
'3799',
'3800',
'3808',
'3818',
'3836',
'384',
'386',
'388',
'3883',
'3888',
'3898',
'3899',
'390',
'3900',
'3908',
'3918',
'392',
'3933',
'3958',
'3968',
'3969',
'3983',
'3988',
'3993',
'3998',
'4',
'400',
'405',
'410',
'425',
'435',
'440',
'45',
'451',
'460',
'467',
'486',
'489',
'493',
'494',
'5',
'506',
'511',
'512',
'52',
'520',
'522',
'525',
'54',
'546',
'548',
'551',
'552',
'570',
'575',
'576',
'581',
'582',
'586',
'59',
'590',
'598',
'6',
'6030',
'604',
'606',
'6060',
'6068',
'607',
'6088',
'6098',
'6099',
'61',
'612',
'6158',
'6169',
'6198',
'631',
'639',
'656',
'658',
'659',
'66',
'665',
'669',
'670',
'6808',
'6818',
'6823',
'683',
'6837',
'6869',
'688',
'6881',
'6886',
'6889',
'69',
'694',
'696',
'698',
'699',
'700',
'708',
'709',
'716',
'7228',
'728',
'729',
'7300',
'7312',
'7321',
'7328',
'7341',
'7388',
'743',
'751',
'753',
'754',
'762',
'763',
'772',
'777',
'787',
'799',
'8',
'806',
'81',
'813',
'815',
'816',
'817',
'818',
'819',
'821',
'823',
'825',
'826',
'83',
'836',
'839',
'853',
'855',
'857',
'860',
'867',
'868',
'87',
'874',
'880',
'881',
'883',
'884',
'887',
'895',
'902',
'906',
'914',
'916',
'921',
'934',
'939',
'941',
'950',
'951',
'956',
'958',
'960',
'966',
'968',
'980',
'981',
'991',
'992',
'998',
'999',
];

var remainChtNo = stkChartList.length;
var thecode ="";

function shuffle() {
 var listlen = stkChartList.length, j = 0, temp;

 while (listlen--) {
  j = Math.floor(Math.random() * (listlen+1));

  temp = stkChartList[listlen];
  stkChartList[listlen] = stkChartList[j];
  stkChartList[j] = temp;
 }
}

function showSTKChart() {
  remainChtNo = remainChtNo - 1;
  var pointer = remainChtNo;
  thecode = stkChartList[pointer];

  document.querySelector('#stkChartsLeft').innerHTML = remainChtNo;
  sSCt(thecode);
  document.querySelector('#jumpButton').focus();
}


function jpButClick() {
  var jpBut = document.querySelector('#jumpButton');
  if (remainChtNo > 0) {showSTKChart();}
  if (remainChtNo === 0) {
      jpBut.innerHTML = 'Bye!';
      jpBut.classList.add('disabled');
  }
}

function jpback() {
  remainChtNo = remainChtNo + 2;
  if (remainChtNo <= stkChartList.length){
	jpButClick();
  } else {
	remainChtNo = stkChartList.length -1;
  }
}


function chkKey() {
  var testkey = getChar(event);
  if(testkey == 'f'){jpButClick();}
  if(testkey == 'b'){jpback();}
  if(testkey == 'c'){showSmallChart();}
  if(testkey == '+'){addToHeedCodeList();}
  if(testkey == 'g'){window.open("heedChart.html", "_blank");}
  if(testkey == 'h'){window.open("Hour STK Charts.html", "_blank");}
  if(testkey == 'm'){shortSCt();}

  jQuery("#mainframe").on( "swipeleft", function( event ) {jpback();} );
  jQuery("#mainframe").on( "swiperight", function( event ) {jpButClick();});
}
function getChar(event) {
  if (event.which!=0 && event.charCode!=0) {
    return String.fromCharCode(event.which)   // the rest
  } else {
    return null // special key
  }
}

function showSmallChart() {
    thecode = prompt("Code Number:", "");
    if (thecode != null && thecode != "") {sSCt(thecode);}
}

function sSCt(stkcode) {
  imgHead = "<img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1050&chartheight=690&stockid=";
  imgPCode= "&period=";
  imgTail="&type=1&logoStyle=1'><br>";

  intv = [4, 7, 11, 12];
  newshead = "http://www.aastocks.com/tc/stocks/analysis/stock-aafn/"
  newstail = "/0/all/1"
  newsStr = newshead + stkcode + newstail
  imgAdr = "<a href='" + newsStr + "' target = _blank>" + stkcode + "</a><br>" 

  for( var imgPeriod = 0; imgPeriod < intv.length; imgPeriod++){
    imgAdr = imgAdr + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
  };
    document.getElementById("stkChart").innerHTML = imgAdr;
    showDateTime();
}

function shortSCt() {
  var stkcode = thecode;
  imgHead = "<img src='http://charts.aastocks.com/servlet/Charts?fontsize=12&15MinDelay=F&lang=1&titlestyle=1&vol=1&Indicator=9&indpara1=20&indpara2=2&indpara3=0&indpara4=0&indpara5=0&subChart1=3&ref1para1=5&ref1para2=10&ref1para3=3&subChart2=3&ref2para1=12&ref2para2=26&ref2para3=9&subChart3=12&ref3para1=0&ref3para2=0&ref3para3=0&scheme=3&com=100&chartwidth=1050&chartheight=690&stockid=";
  imgPCode= "&period=";
  imgTail="&type=1&logoStyle=1'><br>";

  intv = [5000,2];
  newshead = "http://www.aastocks.com/tc/stocks/analysis/stock-aafn/"
  newstail = "/0/all/1"
  newsStr = newshead + stkcode + newstail
  imgAdr = "<a href='" + newsStr + "' target = _blank>" + stkcode + "</a><br>" 

  for( var imgPeriod = 0; imgPeriod < intv.length; imgPeriod++){
    imgAdr = imgAdr + imgHead + stkcode + imgPCode + intv[imgPeriod] + imgTail;
  };
    document.getElementById("stkChart").innerHTML = imgAdr;
    showDateTime();
}

if (localStorage.getItem("savedCodeList") === null) {
  heedCodeList = [];
  localStorage.savedCodeList = JSON.stringify(heedCodeList);
} else{
  heedCodeList = JSON.parse(localStorage.savedCodeList);
}

function addToHeedCodeList() {
  heedCodeList = JSON.parse(localStorage.savedCodeList);
  if (!heedCodeList.includes(thecode)) {
    heedCodeList.push(thecode);
    heedCodeList = Array.from(new Set(heedCodeList))
    localStorage.savedCodeList = JSON.stringify(heedCodeList);
  }
}

function showDateTime() {
    var theDateTime = showDate() +" "+ showTime();
    document.getElementById("dateTime").innerHTML = theDateTime;
}

shuffle();
showSTKChart();

</script>
</body>
</html>
