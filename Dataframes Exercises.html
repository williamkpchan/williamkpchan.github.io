<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" target=_blank>
<style type="text/css">a {text-decoration: none}</style>
</head>
<body bgcolor="#000000" text="#109030" leftmargin="200" topmargin="10" marginwidth="200" link="#00CCCC" vlink="#CC66CC" alink="#FFFF00" target=_blank>
<FONT size=3>
<h1>Merging Dataframes Exercises</h1>

<p>
When combining separate dataframes, (in the R programming language), into a single dataframe, using the cbind() function usually requires use of the “Match()” function. To simulate the database joining functionality in SQL, the “Merge()” function in R accomplishes dataframe merging with the following protocols;</p>
<p>“Inner Join” where the left table has matching rows from one, or more, key variables from the right table.<br />
“Outer Join” where all the rows from both tables are joined.<br />
“Left  Join” where all rows from the left table, and any rows with matching keys from the right table are returned.<br />
“Right Join” where all rows from the right table, and any rows with matching keys from the left table are returned.</p>
<p>Answers to the exercises are available <a href="http://r-exercises.com/2016/4/14/merging-dataframes-solutions/">here</a>.</p>
<p><strong>Exercise 1</strong><br />
Create the dataframes to merge:<br />
<code>buildings &lt;- data.frame(location=c(1, 2, 3), name=c(&quot;building1&quot;, &quot;building2&quot;, &quot;building3&quot;))</p>
<p>data &lt;- data.frame(survey=c(1,1,1,2,2,2), location=c(1,2,3,2,3,1),<br />
efficiency=c(51,64,70,71,80,58))<br />
</code></p>
<p>The dataframes, <code>buildings</code> and <code>data</code> have a common key variable called, &#8220;location”. Use the merge() function to merge the two dataframes by “location”, into a new dataframe, “buildingStats”. </p>
<p><strong>Exercise 2</strong><br />
Give the dataframes different key variable names:<br />
<code>buildings &lt;- data.frame(location=c(1, 2, 3), name=c(&quot;building1&quot;, &quot;building2&quot;, &quot;building3&quot;))<br />
data &lt;- data.frame(survey=c(1,1,1,2,2,2), LocationID=c(1,2,3,2,3,1),<br />
efficiency=c(51,64,70,71,80,58))<br />
</code></p>
<p>The dataframes, <code>buildings</code> and <code>data</code> now have corresponding variables called, <code>location</code>, and <code>LocationID</code>. Use the merge() function to merge the columns of the two dataframes by the corresponding variables.</p>
<p><strong>Exercise 3</strong><br />
Inner Join:<br />
The R merge() function automatically joins the frames by common variable names. In that case, demonstrate how you would perform the merge in Exercise 1 without specifying the key variable.</p>
<p><strong>Exercise 4</strong><br />
Outer Join:<br />
Merge the two dataframes from Exercise 1. Use the “all=” parameter in the merge() function to return all records from both tables. Also, merge with the key variable, “location”.</p>
<p><strong>Exercise 5</strong><br />
Left Join:<br />
Merge the two dataframes from Exercise 1, and return all rows from the left table. Specify the matching key from Exercise 1.</p>
<p><strong>Exercise 6</strong><br />
Right Join:<br />
Merge the two dataframes from Exercise 1, and return all rows from the right table. Use the matching key from Exercise 1 to return matching rows from the left table.</p>
<p><strong>Exercise 7</strong><br />
Cross Join:<br />
Merge the two dataframes from Exercise 1, into a “Cross Join” with each row of “buildings” matched to each row of “data”. What new column names are created in “buildingStats”?</p>
<p><strong>Exercise 8</strong><br />
Merging Dataframe rows:<br />
To join two data frames (datasets) vertically, use the rbind function. The two data frames must have the same variables, but they do not have to be in the same order.</p>
<p>Merge the rows of the following two dataframes:<br />
<code><br />
buildings &lt;- data.frame(location=c(1, 2, 3), name=c(&quot;building1&quot;, &quot;building2&quot;, &quot;building3&quot;))<br />
buildings2 &lt;- data.frame(location=c(5, 4, 6), name=c(&quot;building5&quot;, &quot;building4&quot;, &quot;building6&quot;))<br />
</code></p>
<p>Also, specify a new dataframe, “allBuidings”.</p>
<p><strong>Exercise 9</strong><br />
A new dataframe, <code>buildings3</code>, has variables not found in the previous dataframes<br />
<code><br />
buildings3 &lt;- data.frame(location=c(7, 8, 9),<br />
name=c(&quot;building7&quot;, &quot;building8&quot;, &quot;building9&quot;),<br />
startEfficiency=c(75,87,91))<br />
</code></p>
<p>Create a new <code>buildings3</code> without the extra variables.</p>
<p><strong>Exercise 10</strong><br />
Instead of deleting the extra variables from <code>buildings3</code>. append the <code>buildings</code>, and <code>buildings2</code> with the new variable in <code>buildings3</code>, (from Exercise 9). Set the new data in <code>buildings</code> and <code>buildings2</code> , (from Exercise 8), to NA.</p>

