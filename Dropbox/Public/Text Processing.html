<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css" target=_blank>a {text-decoration: none}</style>
</head>
<body bgcolor="#000000" text="#109030" leftmargin="150" topmargin="10" marginwidth="150" link="#00CCCC" vlink="#CC66CC" alink="#FFFF00" target=_blank>
<FONT size=3>

<h1>R Programming/Text Processing</h1>


</div>
<p>This page includes all the material you need to deal with strings in R. The section on regular expressions may be useful to understand the rest of the page, even if it is not necessary if you only need to perform some simple tasks.</p>
<p>This page may be useful to&#160;:</p>
<ul>
<li>perform statistical text analysis.</li>
<li>collect data from an unformatted text file.</li>
<li>deal with character variables.</li>
</ul>
<p>In this page, we learn how to read a text file and how to use R functions for characters. There are two kind of function for characters, simple functions and regular expressions. Many functions are part of the standard R <b>base</b> package.</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
help.search<span class="p">(</span>keyword <span class="o">=</span> <span class="s">"character"</span><span class="p">,</span> package <span class="o">=</span> <span class="s">"base"</span><span class="p">)</span>
</pre></div>
<p>However, their name and their syntax is not intuitive to all users. Hadley Wickham has developed the <b>stringr</b> package which defines functions with similar behaviour but their names are easier to retain and their syntax much more systematic<sup id="cite_ref-stringr_1-0" class="reference"><a href="#cite_note-stringr-1">[1]</a></sup>.</p>
<ul>
<li>Keywords&#160;: <i>text mining</i>, <i>natural language processing</i></li>
<li>See CRAN Task view on Natural Language Processing<sup id="cite_ref-2" class="reference"><a href="#cite_note-2">[2]</a></sup></li>
<li>See also the following packages <b>tm</b>, <b>tau</b>, <b>languageR</b>, <b>scrapeR</b>.</li>
</ul>
<p><br /></p>
<p></p>
<div id="toc" class="toc">
<div id="toctitle">
<h2>Contents</h2>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Reading_and_writing_text_files"><span class="tocnumber">1</span> <span class="toctext">Reading and writing text files</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Character_encoding"><span class="tocnumber">2</span> <span class="toctext">Character encoding</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Example"><span class="tocnumber">2.1</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Regular_Expressions"><span class="tocnumber">3</span> <span class="toctext">Regular Expressions</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Functions_which_use_regular_expressions_in_R"><span class="tocnumber">3.1</span> <span class="toctext">Functions which use regular expressions in R</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Extended_regular_expressions_.28The_default.29"><span class="tocnumber">3.2</span> <span class="toctext">Extended regular expressions (The default)</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Perl-like_regular_expressions"><span class="tocnumber">3.3</span> <span class="toctext">Perl-like regular expressions</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#Examples"><span class="tocnumber">3.3.1</span> <span class="toctext">Examples</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#See_also"><span class="tocnumber">3.3.2</span> <span class="toctext">See also</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Concatenating_strings"><span class="tocnumber">4</span> <span class="toctext">Concatenating strings</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Examples_2"><span class="tocnumber">4.1</span> <span class="toctext">Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Splitting_a_string"><span class="tocnumber">5</span> <span class="toctext">Splitting a string</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Counting_the_number_of_characters_in_a_string"><span class="tocnumber">6</span> <span class="toctext">Counting the number of characters in a string</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Detecting_the_presence_of_a_substring"><span class="tocnumber">7</span> <span class="toctext">Detecting the presence of a substring</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Detecting_a_pattern_in_a_string_.3F"><span class="tocnumber">7.1</span> <span class="toctext">Detecting a pattern in a string&#160;?</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Counting_the_occurrence_of_each_pattern_in_a_string_.3F"><span class="tocnumber">7.2</span> <span class="toctext">Counting the occurrence of each pattern in a string&#160;?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#Extracting_the_position_of_a_substring_or_a_pattern_in_a_string"><span class="tocnumber">8</span> <span class="toctext">Extracting the position of a substring or a pattern in a string</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="#Extracting_the_position_of_a_substring_.3F"><span class="tocnumber">8.1</span> <span class="toctext">Extracting the position of a substring&#160;?</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Extracting_the_position_of_a_pattern_in_a_string_.3F"><span class="tocnumber">8.2</span> <span class="toctext">Extracting the position of a pattern in a string&#160;?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Extracting_a_substring_from_a_string"><span class="tocnumber">9</span> <span class="toctext">Extracting a substring from a string</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Extracting_a_fixed_width_substring_.3F"><span class="tocnumber">9.1</span> <span class="toctext">Extracting a fixed width substring&#160;?</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Extracting_the_first_word_in_a_string_.3F"><span class="tocnumber">9.2</span> <span class="toctext">Extracting the first word in a string&#160;?</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Extracting_a_pattern_in_a_string_.3F"><span class="tocnumber">9.3</span> <span class="toctext">Extracting a pattern in a string&#160;?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Making_some_substitution_inside_a_string"><span class="tocnumber">10</span> <span class="toctext">Making some substitution inside a string</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Substituting_a_pattern_in_a_string"><span class="tocnumber">10.1</span> <span class="toctext">Substituting a pattern in a string</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Substituting_characters_in_a_string_.3F"><span class="tocnumber">10.2</span> <span class="toctext">Substituting characters in a string&#160;?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-27"><a href="#Converting_letters_to_lower_or_upper-case"><span class="tocnumber">11</span> <span class="toctext">Converting letters to lower or upper-case</span></a></li>
<li class="toclevel-1 tocsection-28"><a href="#Filling_a_string_with_some_character"><span class="tocnumber">12</span> <span class="toctext">Filling a string with some character</span></a></li>
<li class="toclevel-1 tocsection-29"><a href="#Removing_leading_and_trailing_spaces"><span class="tocnumber">13</span> <span class="toctext">Removing leading and trailing spaces</span></a></li>
<li class="toclevel-1 tocsection-30"><a href="#Comparing_two_strings"><span class="tocnumber">14</span> <span class="toctext">Comparing two strings</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#Assessing_if_they_are_identical"><span class="tocnumber">14.1</span> <span class="toctext">Assessing if they are identical</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Computing_distance_between_strings"><span class="tocnumber">14.2</span> <span class="toctext">Computing distance between strings</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#Example_with_utils"><span class="tocnumber">14.2.1</span> <span class="toctext">Example with utils</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#Example_with_MiscPsycho"><span class="tocnumber">14.2.2</span> <span class="toctext">Example with MiscPsycho</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#Approximate_matching"><span class="tocnumber">14.2.3</span> <span class="toctext">Approximate matching</span></a></li>
</ul>
</li>
</ul>
</li>

<li class="toclevel-1 tocsection-36"><a href="#Miscellaneous"><span class="tocnumber">15</span> <span class="toctext">Miscellaneous</span></a></li>
<li class="toclevel-1 tocsection-37"><a href="#References"><span class="tocnumber">16</span> <span class="toctext">References</span></a></li>
</ul>
</div>
<p></p>
<h2><span class="mw-headline" id="Reading_and_writing_text_files">Reading and writing text files</span><span class="mw-editsection"></span></h2>
<p><b>R</b> can read any text file using <code>readLines()</code> or <code>scan()</code>. It is possible to specify the encoding of the imported text file with <code>readLines()</code>. The entire contents of the text file can be read into an R object (e.g., a character vector). <code>scan()</code> is more flexible. The kind of data expected can be specified in the second argument (e.g., character(0) for a string).</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
text <span class="o">&lt;-</span> <span class="kp">readLines</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">,</span>encoding<span class="o">=</span><span class="s">"UTF-8"</span><span class="p">)</span>
<span class="kp">scan</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">,</span> <span class="kt">character</span><span class="p">(</span><span class="m">0</span><span class="p">))</span> <span class="c1"># separate each word</span>
<span class="kp">scan</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">,</span> <span class="kt">character</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> quote <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span> <span class="c1"># get rid of quotes</span>
<span class="kp">scan</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">,</span> <span class="kt">character</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> sep <span class="o">=</span> <span class="s">"."</span><span class="p">)</span> <span class="c1"># separate each sentence</span>
<span class="kp">scan</span><span class="p">(</span><span class="s">"file.txt"</span><span class="p">,</span> <span class="kt">character</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> sep <span class="o">=</span> <span class="s">"\n"</span><span class="p">)</span> <span class="c1"># separate each line</span>
</pre></div>
<p>We can write the content of an R object into a text file using <code>cat()</code> or <code>writeLines()</code>. By default <code>cat()</code> concatenates vectors when writing to the text file. You can change it by adding options <code>sep="\n"</code> or <code>fill=TRUE</code>. The default encoding depends on your computer.</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="kp">cat</span><span class="p">(</span>text<span class="p">,</span>file<span class="o">=</span><span class="s">"file.txt"</span><span class="p">,</span>sep<span class="o">=</span><span class="s">"\n"</span><span class="p">)</span>
<span class="kp">writeLines</span><span class="p">(</span>text<span class="p">,</span> con <span class="o">=</span> <span class="s">"file.txt"</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">"\n"</span><span class="p">,</span> useBytes <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
<p>Before reading a text file, you can look at its properties. <code>nlines()</code> (<b>parser</b> package) and <code>countLines()</code> (<b>R.utils</b> package) count the number of lines in the file. <code>count.chars()</code> (<b>parser</b> package) counts the number of bytes and characters in each line of a file. You can also display a text file using <code>file.show()</code>.</p>
<h2><span class="mw-headline" id="Character_encoding">Character encoding</span></h2>
<table class="plainlinks noprint messagebox notice" style="width:250px; float:right; clear:right; margin:0px; margin-left:10px;">
<tr style="vertical-align:middle;">
<td style="padding:0.1em; text-align:center; vertical-align:middle; width:45px; border:none;"></td>
<td style="color:black; text-align:left; vertical-align:middle; padding:0.5em; padding-left:0em; border:none;">
<p><a href="//en.wikipedia.org/wiki/" class="extiw" title="w:">Wikipedia</a> has related information at <a class="external text" href="//en.wikipedia.org/wiki/Character_encoding"><i><b>Character encoding</b></i></a></p>
</td>
</tr>
</table>
<div style="width:250px; float:right; clear:right; margin:0px; margin-top:10px !important;"></div>
<p>R provides functions to deal with various set of encoding schemes. This is useful if you deal with text file which have been created with another operating system and especially if the language is not English and has many accents and specific characters. For instance, the standard encoding scheme in Linux is "UTF-8" whereas the standard encoding scheme in Windows is "Latin1". The <code>Encoding()</code> functions returns the encoding of a string. <code>iconv()</code> is similar to the unix command <a href="//en.wikipedia.org/wiki/iconv" class="extiw" title="w:iconv">iconv</a> and converts the encoding.</p>
<ul>
<li><code>iconvlist()</code> gives the list of available encoding scheme on your computer.</li>
<li><code>readLines()</code>, <code>scan()</code> and <code>file.show()</code> have also an encoding option.</li>
<li><code>is.utf8()</code> (<b>tau</b>) tests if the encoding is "utf8".</li>
<li><code>is.locale()</code> (<b>tau</b>) tests if encoding is the same as the default encoding on your computer.</li>
<li><code>translate()</code> (<b>tau</b>) translates the encoding into the current locale.</li>
<li><code>fromUTF8()</code> (<b>descr</b>) is less general than <code>iconv()</code>.</li>
<li><code>utf8ToInt()</code> (<b>base</b>)</li>
</ul>
<h3><span class="mw-headline" id="Example">Example</span></h3>
<p>The following example was run under Windows. Thus, the default encoding is "latin1".</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> texte <span class="o">&lt;-</span> <span class="s">"Hé hé"</span>
<span class="o">&gt;</span> <span class="kp">Encoding</span><span class="p">(</span>texte<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"latin1"</span>
<span class="o">&gt;</span> texte2 <span class="o">&lt;-</span>  <span class="kp">iconv</span><span class="p">(</span>texte<span class="p">,</span><span class="s">"latin1"</span><span class="p">,</span><span class="s">"UTF-8"</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="kp">Encoding</span><span class="p">(</span>texte2<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"UTF-8"</span>
</pre></div>
<h2><span class="mw-headline" id="Regular_Expressions">Regular Expressions</span></h2>
<table class="plainlinks noprint messagebox notice" style="width:250px; float:right; clear:right; margin:0px; margin-left:10px;">
<tr style="vertical-align:middle;">
<td style="padding:0.1em; text-align:center; vertical-align:middle; width:45px; border:none;"></td>
<td style="color:black; text-align:left; vertical-align:middle; padding:0.5em; padding-left:0em; border:none;">
<p>Also see the <i><a href="/wiki/Regular_expressions" title="Regular expressions" class="mw-redirect">Regular expressions</a></i> book.</p>
</td>
</tr>
</table>
<p>A regular expression is a specific pattern in a set of strings. For instance, one could have the following pattern&#160;: 2 digits, 2 letters and 4 digits. <b>R</b> provides powerful functions to deal with regular expressions. Two types of regular expressions are used in <b>R</b></p>
<ul>
<li>extended regular expressions, used by <code>‘perl = FALSE’</code> (the default),</li>
<li>Perl-like regular expressions used by <code>‘perl = TRUE’</code>.</li>
</ul>
<p>There is a also an option called <code>‘fixed = TRUE’</code> which can be considered as a literal regular expression. <code>fixed()</code> (<b>stringr</b>) is equivalent to <code>fixed=TRUE</code> in the standard regex functions. These functions are by default case sensitive. This can be changed by specifying the option <code>ignore.case = TRUE</code>.</p>
<p>If you are not a specialist in regular expression you my find the <code>glob2rx()</code> useful. This function suggests some regular expression for a specific pattern&#160;:</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> glob2rx<span class="p">(</span><span class="s">"abc.*"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"^abc\\."</span>
</pre></div>
<h3><span class="mw-headline" id="Functions_which_use_regular_expressions_in_R">Functions which use regular expressions in R</span></span></h3>
<ul>
<li><code>sub()</code>, <code>gsub()</code>, <code>str_replace()</code> (<b>stringr</b>) make some substitutions in a string.</li>
<li><code>grep()</code>, <code>str_extract()</code> (<b>stringr</b>) extract some value</li>
<li><code>grepl()</code>, <code>str_detect()</code> (<b>stringr</b>) detect the presence of a pattern.</li>
<li>see also <code>splitByPattern()</code> (<b>R.utils</b>)</li>
<li>See also <code>gsubfn()</code> in the <b>gsubfn</b> package.</li>
</ul>
<h3><span class="mw-headline" id="Extended_regular_expressions_.28The_default.29">Extended regular expressions (The default)</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=6" title="Edit section: Extended regular expressions (The default)">edit</a></span></h3>
<ul>
<li><code>"."</code> stands for any character.</li>
<li><code>"[ABC]"</code> means A,B or C.</li>
<li><code>"[A-Z]"</code> means any upper letter between A and Z.</li>
<li><code>"[0-9]"</code> means any digit between 0 and 9.</li>
</ul>
<p>Here is the list of metacharacters <code>‘$ * + .&#160;? [ ] ^ { } | ( ) \’</code>. If you need to use one of those characters, precede them with a doubled backslash.</p>
<p>Here are some classes of regular expressions&#160;: For numbers&#160;:</p>
<ul>
<li><code>‘[:digit:]’</code> Digits: <code>‘0 1 2 3 4 5 6 7 8 9’</code>.</li>
</ul>
<p>For letters&#160;:</p>
<ul>
<li><code>‘[:alpha:]’</code> Alphabetic characters: <code>‘[:lower:]’</code> and <code>‘[:upper:]’</code>.</li>
<li><code>‘[:upper:]’</code> Upper-case letters.</li>
<li><code>‘[:lower:]’</code> Lower-case letters.</li>
</ul>
<p>Note that the set of alphabetic characters includes accents such as <code>é è ê</code> which are very common in some languages like French. Therefore, it is more general than <code>"[A-Za-z]"</code> which does not include letters with accent.</p>
<p>For other characters&#160;:</p>
<ul>
<li><code>‘[:punct:]’</code> Punctuation characters: <code>‘! " # $&#160;% &amp; ' ( ) * + , - . /&#160;:&#160;; &lt; = &gt;&#160;? @ [ \ ] ^ _ ` { | } ~’</code>.</li>
<li><code>‘[:space:]’</code> Space characters: tab, newline, vertical tab, form feed, carriage return, and space.</li>
<li><code>‘[:blank:]’</code> Blank characters: space and tab.</li>
<li><code>‘[:cntrl:]’</code> Control characters.</li>
</ul>
<p>For combination of other classes&#160;:</p>
<ul>
<li><code>[:alnum:]</code> Alphanumeric characters: <code>‘[:alpha:]’</code> and <code>‘[:digit:]’</code>.</li>
<li><code>‘[:graph:]’</code> Graphical characters: <code>‘[:alnum:]’</code> and <code>‘[:punct:]’</code>.</li>
<li><code>‘[:print:]’</code> Printable characters: <code>‘[:alnum:]’</code>, <code>‘[:punct:]’</code> and space.</li>
<li><code>‘[:xdigit:]’</code> Hexadecimal digits: <code>‘0 1 2 3 4 5 6 7 8 9 A B C D E F a b c d e f’</code>.</li>
</ul>
<p>You can quantify the number of repetition by adding after the regular expression the following characters&#160;:</p>
<ul>
<li><code>‘?’</code> The preceding item is optional and will be matched at most once.</li>
<li><code>‘*’</code> The preceding item will be matched zero or more times.</li>
<li><code>‘+’</code> The preceding item will be matched one or more times.</li>
<li><code>‘{n}’</code> The preceding item is matched exactly ‘n’ times.</li>
<li><code>‘{n,}’</code> The preceding item is matched ‘n’ or more times.</li>
<li><code>‘{n,m}’</code> The preceding item is matched at least ‘n’ times, but not more than ‘m’ times.</li>
</ul>
<ul>
<li><code>^</code> to force the regular expression to be at the beginning of the string</li>
<li><code>$</code> to force the regular expression to be at the end of the string</li>
</ul>
<p>If you want to know more, have a look at the 2 following help files&#160;:</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;?</span>regexp <span class="c1"># gives some general explanations</span>
<span class="o">&gt;?</span>grep <span class="c1"># help file for grep(),regexpr(),sub(),gsub(),etc</span>
</pre></div>
<h3><span class="mw-headline" id="Perl-like_regular_expressions">Perl-like regular expressions</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=7" title="Edit section: Perl-like regular expressions">edit</a></span></h3>
<table class="metadata plainlinks ambox ambox-content" style="">
<tr>
<td class="mbox-image">
</td>
<td class="mbox-text" style=""><b>This section is a stub.</b><br />
You can help Wikibooks by <a class="external text" href="//en.wikibooks.org/w/index.php?title=R_Programming/Text_Processing&amp;action=edit">expanding it</a>.</td>
</tr>
</table>
<p>It is also possible to use "perl-like" regular expressions. You just need to use the option <code>perl=TRUE</code>.</p>
<h4><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=8" title="Edit section: Examples">edit</a></span></h4>
<p>If you want to remove space characters in a string, you can use the <code>\\s</code> Perl macro.</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="kp">sub</span><span class="p">(</span><span class="s">'\\s'</span><span class="p">,</span> <span class="s">''</span><span class="p">,</span>x<span class="p">,</span> perl <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
<h4><span class="mw-headline" id="See_also">See also</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=9" title="Edit section: See also">edit</a></span></h4>
<ul>
<li><a href="/wiki/Perl_Programming/Regular_Expressions" title="Perl Programming/Regular Expressions" class="mw-redirect">Perl Programming/Regular Expressions</a></li>
</ul>
<h2><span class="mw-headline" id="Concatenating_strings">Concatenating strings</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=10" title="Edit section: Concatenating strings">edit</a></span></h2>
<ul>
<li><code>paste()</code> concatenates strings.</li>
<li><code>str_c()</code> (<b>stringr</b>) does a similar job.</li>
<li><code>cat()</code> prints and concatenates strings.</li>
</ul>
<h3><span class="mw-headline" id="Examples_2">Examples</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=11" title="Edit section: Examples">edit</a></span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">paste</span><span class="p">(</span><span class="s">"toto"</span><span class="p">,</span><span class="s">"tata"</span><span class="p">,</span>sep<span class="o">=</span><span class="s">' '</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"toto tata"</span>
<span class="o">&gt;</span> <span class="kp">paste</span><span class="p">(</span><span class="s">"toto"</span><span class="p">,</span><span class="s">"tata"</span><span class="p">,</span>sep<span class="o">=</span><span class="s">","</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"toto,tata"</span>
<span class="o">&gt;</span> str_c<span class="p">(</span><span class="s">"toto"</span><span class="p">,</span><span class="s">"tata"</span><span class="p">,</span>sep<span class="o">=</span><span class="s">","</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"toto,tata"</span>
<span class="o">&gt;</span> x <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span><span class="s">"b"</span><span class="p">,</span><span class="s">"c"</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="kp">paste</span><span class="p">(</span>x<span class="p">,</span>collapse<span class="o">=</span><span class="s">" "</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"a b c"</span>
<span class="o">&gt;</span> str_c<span class="p">(</span>x<span class="p">,</span> collapse <span class="o">=</span> <span class="s">" "</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"a b c"</span>
<span class="o">&gt;</span> <span class="kp">cat</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span><span class="s">"b"</span><span class="p">,</span><span class="s">"c"</span><span class="p">),</span> sep <span class="o">=</span> <span class="s">"+"</span><span class="p">)</span>
a<span class="o">+</span>b<span class="o">+</span><span class="kt">c</span>
</pre></div>
<h2><span class="mw-headline" id="Splitting_a_string">Splitting a string</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=12" title="Edit section: Splitting a string">edit</a></span></h2>
<ul>
<li><code>strsplit()</code>&#160;: Split the elements of a character vector ‘x’ into substrings according to the matches to substring ‘split’ within them.</li>
<li>See also <code>str_split()</code> (<b>stringr</b>).</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">unlist</span><span class="p">(</span><span class="kp">strsplit</span><span class="p">(</span><span class="s">"a.b.c"</span><span class="p">,</span> <span class="s">"\\."</span><span class="p">))</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"a"</span> <span class="s">"b"</span> <span class="s">"c"</span>
</pre></div>
<ul>
<li><code>tokenize()</code> (<b>tau</b>) split a string into tokens.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> tokenize<span class="p">(</span><span class="s">"abc defghk"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abc"</span>    <span class="s">" "</span>      <span class="s">"defghk"</span>
</pre></div>
<h2><span class="mw-headline" id="Counting_the_number_of_characters_in_a_string">Counting the number of characters in a string</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=13" title="Edit section: Counting the number of characters in a string">edit</a></span></h2>
<ul>
<li><code>nchar()</code> gives the length of a string.</li>
<li>See also <code>str_length()</code> (<b>stringr</b>).</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">nchar</span><span class="p">(</span><span class="s">"abcdef"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">6</span>
<span class="o">&gt;</span> str_length<span class="p">(</span><span class="s">"abcdef"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">6</span>
<span class="o">&gt;</span> <span class="kp">nchar</span><span class="p">(</span><span class="kc">NA</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span>
<span class="o">&gt;</span> str_length<span class="p">(</span><span class="kc">NA</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">NA</span>
</pre></div>
<h2><span class="mw-headline" id="Detecting_the_presence_of_a_substring">Detecting the presence of a substring</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=14" title="Edit section: Detecting the presence of a substring">edit</a></span></h2>
<h3><span class="mw-headline" id="Detecting_a_pattern_in_a_string_.3F">Detecting a pattern in a string&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=15" title="Edit section: Detecting a pattern in a string ?">edit</a></span></h3>
<ul>
<li><code>grepl()</code> returns a logical expression (TRUE or FALSE).</li>
<li><code>str_detect()</code> (<b>stringr</b>) does a similar job.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> string <span class="o">&lt;-</span> <span class="s">"23 mai 2000"</span>
<span class="o">&gt;</span> string2 <span class="o">&lt;-</span> <span class="s">"1 mai 2000"</span>
<span class="o">&gt;</span> regexp <span class="o">&lt;-</span> <span class="s">"([[:digit:]]{2}) ([[:alpha:]]+) ([[:digit:]]{4})"</span>
<span class="o">&gt;</span> <span class="kp">grepl</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> x <span class="o">=</span> string<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">TRUE</span>
<span class="o">&gt;</span> str_detect<span class="p">(</span>string<span class="p">,</span> regexp<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">TRUE</span>
<span class="o">&gt;</span> <span class="kp">grepl</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> x <span class="o">=</span> string2<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span>
</pre></div>
<p>The 1st one is true and the second one is false since there is only one digit in the first number.</p>
<h3><span class="mw-headline" id="Counting_the_occurrence_of_each_pattern_in_a_string_.3F">Counting the occurrence of each pattern in a string&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=16" title="Edit section: Counting the occurrence of each pattern in a string ?">edit</a></span></h3>
<ul>
<li><code>textcnt()</code> (<b>tau</b>) counts the occurrence of each pattern or each term in a text.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> string <span class="o">&lt;-</span> <span class="s">"blabla 23 mai 2000 blabla 18 mai 2004"</span>
<span class="o">&gt;</span> textcnt<span class="p">(</span>string<span class="p">,</span>n<span class="o">=</span><span class="m">1L</span><span class="p">,</span>method<span class="o">=</span><span class="s">"string"</span><span class="p">)</span>
blabla    mai 
     <span class="m">2</span>      <span class="m">2</span> 
<span class="kp">attr</span><span class="p">(,</span><span class="s">"class"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"textcnt"</span>
</pre></div>
<h2><span class="mw-headline" id="Extracting_the_position_of_a_substring_or_a_pattern_in_a_string">Extracting the position of a substring or a pattern in a string</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=17" title="Edit section: Extracting the position of a substring or a pattern in a string">edit</a></span></h2>
<h3><span class="mw-headline" id="Extracting_the_position_of_a_substring_.3F">Extracting the position of a substring&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=18" title="Edit section: Extracting the position of a substring ?">edit</a></span></h3>
<ul>
<li><code>cpos()</code> (<b>cwhmisc</b>) returns the position of a substring in a string.</li>
<li><code>substring.location()</code> (<b>cwhmisc</b>) does the same job but returns the first and the last position.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
 
<span class="o">&gt;</span> cpos<span class="p">(</span><span class="s">"abcdefghijklmnopqrstuvwxyz"</span><span class="p">,</span><span class="s">"p"</span><span class="p">,</span>start<span class="o">=</span><span class="m">1</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">16</span>
<span class="o">&gt;</span> substring.location<span class="p">(</span><span class="s">"abcdefghijklmnopqrstuvwxyz"</span><span class="p">,</span><span class="s">"def"</span><span class="p">)</span>
<span class="o">$</span>first
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">4</span>

<span class="o">$</span>last
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">6</span>
</pre></div>
<h3><span class="mw-headline" id="Extracting_the_position_of_a_pattern_in_a_string_.3F">Extracting the position of a pattern in a string&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=19" title="Edit section: Extracting the position of a pattern in a string ?">edit</a></span></h3>
<ul>
<li><code>regexpr()</code> returns the position of the regular expression. <code>str_locate()</code> (<b>stringr</b>) does the same job. <code>gregexpr()</code> is similar to <code>regexpr()</code> but the starting position of every match is returned. <code>str_locate_all()</code> (<b>stringr</b>) does the same job.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> regexp <span class="o">&lt;-</span> <span class="s">"([[:digit:]]{2}) ([[:alpha:]]+) ([[:digit:]]{4})"</span>
<span class="o">&gt;</span> string <span class="o">&lt;-</span> <span class="s">"blabla 23 mai 2000 blabla 18 mai 2004"</span>
<span class="o">&gt;</span> <span class="kp">regexpr</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> text <span class="o">=</span> string<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">8</span>
<span class="kp">attr</span><span class="p">(,</span><span class="s">"match.length"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">11</span>
<span class="o">&gt;</span> <span class="kp">gregexpr</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> text <span class="o">=</span> string<span class="p">)</span>
<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="m">8</span> <span class="m">27</span>
<span class="kp">attr</span><span class="p">(,</span><span class="s">"match.length"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">11</span> <span class="m">11</span>
<span class="o">&gt;</span> str_locate<span class="p">(</span>string<span class="p">,</span>regexp<span class="p">)</span>
     start end
<span class="p">[</span><span class="m">1</span><span class="p">,]</span>     <span class="m">8</span>  <span class="m">18</span>
<span class="o">&gt;</span> str_locate_all<span class="p">(</span>string<span class="p">,</span>regexp<span class="p">)</span>
<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
     start end
<span class="p">[</span><span class="m">1</span><span class="p">,]</span>     <span class="m">8</span>  <span class="m">18</span>
<span class="p">[</span><span class="m">2</span><span class="p">,]</span>    <span class="m">27</span>  <span class="m">37</span>
</pre></div>
<h2><span class="mw-headline" id="Extracting_a_substring_from_a_string">Extracting a substring from a string</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=20" title="Edit section: Extracting a substring from a string">edit</a></span></h2>
<h3><span class="mw-headline" id="Extracting_a_fixed_width_substring_.3F">Extracting a fixed width substring&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=21" title="Edit section: Extracting a fixed width substring ?">edit</a></span></h3>
<ul>
<li><code>substr()</code> takes a sub string.</li>
<li><code>str_sub()</code> (<b>stringr</b>) is similar.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">substr</span><span class="p">(</span><span class="s">"simple text"</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"sim"</span>
<span class="o">&gt;</span> str_sub<span class="p">(</span><span class="s">"simple text"</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"sim"</span>
</pre></div>
<h3><span class="mw-headline" id="Extracting_the_first_word_in_a_string_.3F">Extracting the first word in a string&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=22" title="Edit section: Extracting the first word in a string ?">edit</a></span></h3>
<ul>
<li><code>first.word()</code> First Word in a String or Expression in the <b>Hmisc</b> package</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> first.word<span class="p">(</span><span class="s">"abc def ghk"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abc"</span>
</pre></div>
<h3><span class="mw-headline" id="Extracting_a_pattern_in_a_string_.3F">Extracting a pattern in a string&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=23" title="Edit section: Extracting a pattern in a string ?">edit</a></span></h3>
<ul>
<li><code>grep()</code> returns the value or the position of the regular expression if <code>value=T</code> and its position if <code>value=F</code>.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">grep</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> x <span class="o">=</span> string <span class="p">,</span> value <span class="o">=</span> <span class="bp">T</span><span class="p">)</span> 
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"23 mai 2000"</span>
<span class="o">&gt;</span> <span class="kp">grep</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> x <span class="o">=</span> string2 <span class="p">,</span> value <span class="o">=</span> <span class="bp">T</span><span class="p">)</span> 
<span class="kt">character</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="kp">grep</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> x <span class="o">=</span> string <span class="p">,</span> value <span class="o">=</span> <span class="bp">F</span><span class="p">)</span> 
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">1</span>
<span class="o">&gt;</span> <span class="kp">grep</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> x <span class="o">=</span> string2 <span class="p">,</span> value <span class="o">=</span> <span class="bp">F</span><span class="p">)</span> 
<span class="kt">integer</span><span class="p">(</span><span class="m">0</span><span class="p">)</span>
</pre></div>
<ul>
<li><code>str_extract()</code>, <code>str_extract_all()</code>, <code>str_match()</code>, <code>str_match_all()</code> (<b>stringr</b>) and <code>m()</code> (<b>caroline</b> package) are similar to <code>grep()</code>. <code>str_extract()</code> and <code>str_extract_all()</code> return a vector. <code>str_match()</code> and <code>str_match_all()</code> return a matrix and <code>m()</code> a dataframe.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kn">library</span><span class="p">(</span><span class="s">"stringr"</span><span class="p">)</span>
<span class="o">&gt;</span> regexp <span class="o">&lt;-</span> <span class="s">"([[:digit:]]{2}) ([[:alpha:]]+) ([[:digit:]]{4})"</span>
<span class="o">&gt;</span> string <span class="o">&lt;-</span> <span class="s">"blabla 23 mai 2000 blabla 18 mai 2004"</span>
<span class="o">&gt;</span> str_extract<span class="p">(</span>string<span class="p">,</span>regexp<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"23 mai 2000"</span>
<span class="o">&gt;</span> str_extract_all<span class="p">(</span>string<span class="p">,</span>regexp<span class="p">)</span>
<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"23 mai 2000"</span> <span class="s">"18 mai 2004"</span>

<span class="o">&gt;</span> str_match<span class="p">(</span>string<span class="p">,</span>regexp<span class="p">)</span>
     <span class="p">[,</span><span class="m">1</span><span class="p">]</span>          <span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="p">[,</span><span class="m">3</span><span class="p">]</span>  <span class="p">[,</span><span class="m">4</span><span class="p">]</span>  
<span class="p">[</span><span class="m">1</span><span class="p">,]</span> <span class="s">"23 mai 2000"</span> <span class="s">"23"</span> <span class="s">"mai"</span> <span class="s">"2000"</span>
<span class="o">&gt;</span> str_match_all<span class="p">(</span>string<span class="p">,</span>regexp<span class="p">)</span>
<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
     <span class="p">[,</span><span class="m">1</span><span class="p">]</span>          <span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="p">[,</span><span class="m">3</span><span class="p">]</span>  <span class="p">[,</span><span class="m">4</span><span class="p">]</span>  
<span class="p">[</span><span class="m">1</span><span class="p">,]</span> <span class="s">"23 mai 2000"</span> <span class="s">"23"</span> <span class="s">"mai"</span> <span class="s">"2000"</span>
<span class="p">[</span><span class="m">2</span><span class="p">,]</span> <span class="s">"18 mai 2004"</span> <span class="s">"18"</span> <span class="s">"mai"</span> <span class="s">"2004"</span>
<span class="o">&gt;</span> <span class="kn">library</span><span class="p">(</span><span class="s">"caroline"</span><span class="p">)</span>
<span class="o">&gt;</span> m<span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> vect <span class="o">=</span> string<span class="p">,</span> names <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"day"</span><span class="p">,</span><span class="s">"month"</span><span class="p">,</span><span class="s">"year"</span><span class="p">),</span> types <span class="o">=</span> <span class="kp">rep</span><span class="p">(</span><span class="s">"character"</span><span class="p">,</span><span class="m">3</span><span class="p">))</span>
  day month year
<span class="m">1</span>  <span class="m">18</span>   mai <span class="m">2004</span>
</pre></div>
<ul>
<li>Named capture regular expressions can be used to define column names in the regular expression (this also serves to document the regular expression). Install the <b>namedCapture</b> package via <code>devtools::install_github("tdhock/namedCapture")</code> to use <code>str_match_all_named()</code>. It uses the base function <code>gregexpr(perl=TRUE)</code> to parse a Perl-Compatible Regular Expression, and returns a list of match matrices with column names:</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> named.regexp <span class="o">&lt;-</span> <span class="kp">paste0</span><span class="p">(</span>
<span class="o">+</span>   <span class="s">"(?&lt;day&gt;[[:digit:]]{2})"</span><span class="p">,</span>
<span class="o">+</span>   <span class="s">" "</span><span class="p">,</span>
<span class="o">+</span>   <span class="s">"(?&lt;month&gt;[[:alpha:]]+)"</span><span class="p">,</span>
<span class="o">+</span>   <span class="s">" "</span><span class="p">,</span>
<span class="o">+</span>   <span class="s">"(?&lt;year&gt;[[:digit:]]{4})"</span><span class="p">)</span>
<span class="o">&gt;</span> namedCapture<span class="o">::</span>str_match_all_named<span class="p">(</span>string<span class="p">,</span> named.regexp<span class="p">)</span>
<span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
     day  month year  
<span class="p">[</span><span class="m">1</span><span class="p">,]</span> <span class="s">"23"</span> <span class="s">"mai"</span> <span class="s">"2000"</span>
<span class="p">[</span><span class="m">2</span><span class="p">,]</span> <span class="s">"18"</span> <span class="s">"mai"</span> <span class="s">"2004"</span>
</pre></div>
<h2><span class="mw-headline" id="Making_some_substitution_inside_a_string">Making some substitution inside a string</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=24" title="Edit section: Making some substitution inside a string">edit</a></span></h2>
<h3><span class="mw-headline" id="Substituting_a_pattern_in_a_string">Substituting a pattern in a string</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=25" title="Edit section: Substituting a pattern in a string">edit</a></span></h3>
<ul>
<li><code>sub()</code> makes a substitution.</li>
<li><code>gsub()</code> is similar to <code>sub()</code> but replace all occurrences of the pattern whereas <code>sub()</code> only replaces the first occurrence.</li>
<li><code>str_replace()</code> (<b>stringr</b>) is similar to sub, <code>str_replace_all()</code> (<b>stringr</b>) is similar to gsub.</li>
</ul>
<p>In the following example, we have a French date. The regular pattern is the following&#160;: 2 digits, a blank, some letters, a blank, 4 digits. We capture the 2 digits with the <code>[[:digit:]]{2}</code> expression, the letters with <code>[[:alpha:]]+</code> and the 4 digits with <code>[[:digit:]]{4}</code>. Each of these three substrings is surrounded with parenthesis. The first substring is stored in <code>"\\1"</code>, the second one in <code>"\\2"</code> and the 3rd one in <code>"\\3"</code>.</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
string <span class="o">&lt;-</span> <span class="s">"23 mai 2000"</span>
regexp <span class="o">&lt;-</span> <span class="s">"([[:digit:]]{2}) ([[:alpha:]]+) ([[:digit:]]{4})"</span>
<span class="kp">sub</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> replacement <span class="o">=</span> <span class="s">"\\1"</span><span class="p">,</span> x <span class="o">=</span> string<span class="p">)</span> <span class="c1"># returns the first part of the regular expression</span>
<span class="kp">sub</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> replacement <span class="o">=</span> <span class="s">"\\2"</span><span class="p">,</span> x <span class="o">=</span> string<span class="p">)</span> <span class="c1"># returns the second part</span>
<span class="kp">sub</span><span class="p">(</span>pattern <span class="o">=</span> regexp<span class="p">,</span> replacement <span class="o">=</span> <span class="s">"\\3"</span><span class="p">,</span> x <span class="o">=</span> string<span class="p">)</span> <span class="c1"># returns the third part</span>
</pre></div>
<p>In the following example, we compare the outcome of <code>sub()</code> and <code>gsub()</code>. The first one removes the first space whereas the second one removes all spaces in the text.</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> text <span class="o">&lt;-</span> <span class="s">"abc def ghk"</span>
<span class="o">&gt;</span> <span class="kp">sub</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">" "</span><span class="p">,</span> replacement <span class="o">=</span> <span class="s">""</span><span class="p">,</span>  x <span class="o">=</span> text<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abcdef ghk"</span>
<span class="o">&gt;</span> <span class="kp">gsub</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">" "</span><span class="p">,</span> replacement <span class="o">=</span> <span class="s">""</span><span class="p">,</span>  x <span class="o">=</span> text<span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abcdefghk"</span>
</pre></div>
<h3><span class="mw-headline" id="Substituting_characters_in_a_string_.3F">Substituting characters in a string&#160;?</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=26" title="Edit section: Substituting characters in a string ?">edit</a></span></h3>
<ul>
<li><code>chartr()</code> substitutes characters in an expression. It stands for "character translation".</li>
<li><code>replacechar()</code> (<b>cwhmisc</b>) does the same job ...</li>
<li>as well as <code>str_replace_all()</code> (<b>stringr</b>).</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">chartr</span><span class="p">(</span>old<span class="o">=</span><span class="s">"a"</span><span class="p">,</span>new<span class="o">=</span><span class="s">"o"</span><span class="p">,</span>x<span class="o">=</span><span class="s">"baba"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"bobo"</span>
<span class="o">&gt;</span> <span class="kp">chartr</span><span class="p">(</span>old<span class="o">=</span><span class="s">"ab"</span><span class="p">,</span>new<span class="o">=</span><span class="s">"ot"</span><span class="p">,</span>x<span class="o">=</span><span class="s">"baba"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"toto"</span>
<span class="o">&gt;</span> replacechar<span class="p">(</span><span class="s">"abc.def.ghi.jkl"</span><span class="p">,</span><span class="s">"."</span><span class="p">,</span><span class="s">"_"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abc_def_ghi_jkl"</span>
<span class="o">&gt;</span> str_replace_all<span class="p">(</span><span class="s">"abc.def.ghi.jkl"</span><span class="p">,</span><span class="s">"\\."</span><span class="p">,</span><span class="s">"_"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abc_def_ghi_jkl"</span>
</pre></div>
<h2><span class="mw-headline" id="Converting_letters_to_lower_or_upper-case">Converting letters to lower or upper-case</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=27" title="Edit section: Converting letters to lower or upper-case">edit</a></span></h2>
<ul>
<li><code>tolower()</code> converts upper-case characters to lower-case.</li>
<li><code>toupper()</code> converts lower-case characters to upper-case.</li>
<li><code>capitalize()</code> (<b>Hmisc</b>) capitalize the first letter of a string</li>
<li>See also <code>cap()</code>, <code>capitalize()</code>, <code>lower()</code>, <code>lowerize()</code> and <code>CapLeading()</code> in the <b>cwhmisc</b> package.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">tolower</span><span class="p">(</span><span class="s">"ABCdef"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abcdef"</span>
<span class="o">&gt;</span> <span class="kp">toupper</span><span class="p">(</span><span class="s">"ABCdef"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"ABCDEF"</span>
<span class="o">&gt;</span> capitalize<span class="p">(</span><span class="s">"abcdef"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"Abcdef"</span>
</pre></div>
<h2><span class="mw-headline" id="Filling_a_string_with_some_character">Filling a string with some character</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=28" title="Edit section: Filling a string with some character">edit</a></span></h2>
<ul>
<li><code>padding()</code> (<b>cwhmisc</b>) fills a string with some characters to fit a given length. See also <code>str_pad()</code> (<b>stringr</b>).</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kn">library</span><span class="p">(</span><span class="s">"cwhmisc"</span><span class="p">)</span>
<span class="o">&gt;</span> padding<span class="p">(</span><span class="s">"abc"</span><span class="p">,</span><span class="m">10</span><span class="p">,</span><span class="s">" "</span><span class="p">,</span><span class="s">"center"</span><span class="p">)</span> <span class="c1"># adds blanks such that the length of the string is 10.</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"   abc    "</span>
<span class="o">&gt;</span> str_pad<span class="p">(</span><span class="s">"abc"</span><span class="p">,</span>width<span class="o">=</span><span class="m">10</span><span class="p">,</span>side<span class="o">=</span><span class="s">"center"</span><span class="p">,</span> pad <span class="o">=</span> <span class="s">"+"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"+++abc++++"</span>
<span class="o">&gt;</span> str_pad<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">"1"</span><span class="p">,</span><span class="s">"11"</span><span class="p">,</span><span class="s">"111"</span><span class="p">,</span><span class="s">"1111"</span><span class="p">),</span><span class="m">3</span><span class="p">,</span>side<span class="o">=</span><span class="s">"left"</span><span class="p">,</span>pad<span class="o">=</span><span class="s">"0"</span><span class="p">)</span> 
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"001"</span>  <span class="s">"011"</span>  <span class="s">"111"</span>  <span class="s">"1111"</span>
</pre></div>
<p>Note that <code>str_pad()</code> is very slow. For instance for a vector of length 10,000, we have a very long computing time. <code>padding()</code>does not seem to handle character vectors but the best solution may be to use the <code>sapply()</code> and <code>padding()</code> functions together.</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span><span class="kn">library</span><span class="p">(</span><span class="s">"stringr"</span><span class="p">)</span>
<span class="o">&gt;</span><span class="kn">library</span><span class="p">(</span><span class="s">"cwhmisc"</span><span class="p">)</span>
<span class="o">&gt;</span>a <span class="o">&lt;-</span> <span class="kp">rep</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">10</span><span class="o">^</span><span class="m">4</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="kp">system.time</span><span class="p">(</span>b <span class="o">&lt;-</span> str_pad<span class="p">(</span>a<span class="p">,</span><span class="m">3</span><span class="p">,</span>side<span class="o">=</span><span class="s">"left"</span><span class="p">,</span>pad<span class="o">=</span><span class="s">"0"</span><span class="p">))</span>
utilisateur     système      écoulé 
     <span class="m">50.968</span>       <span class="m">0.208</span>      <span class="m">73.322</span> 
<span class="o">&gt;</span> <span class="kp">system.time</span><span class="p">(</span><span class="kt">c</span> <span class="o">&lt;-</span> <span class="kp">sapply</span><span class="p">(</span>a<span class="p">,</span> padding<span class="p">,</span> space <span class="o">=</span> <span class="m">3</span><span class="p">,</span> with <span class="o">=</span> <span class="s">"0"</span><span class="p">,</span> to <span class="o">=</span> <span class="s">"left"</span><span class="p">))</span>
utilisateur     système      écoulé 
      <span class="m">7.700</span>       <span class="m">0.020</span>      <span class="m">12.206</span>
</pre></div>
<h2><span class="mw-headline" id="Removing_leading_and_trailing_spaces">Removing leading and trailing spaces</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=29" title="Edit section: Removing leading and trailing spaces">edit</a></span></h2>
<ul>
<li><code>trimws()</code> (<b>memisc</b> package) trim leading and trailing white spaces.</li>
<li><code>trim()</code> (<b>gdata</b> package) does the same job.</li>
<li>See also <code>str_trim()</code> (<b>stringr</b>)</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kn">library</span><span class="p">(</span><span class="s">"memisc"</span><span class="p">)</span>
<span class="o">&gt;</span> trimws<span class="p">(</span><span class="s">"  abc def   "</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abc def"</span> 
<span class="o">&gt;</span> <span class="kn">library</span><span class="p">(</span><span class="s">"gdata"</span><span class="p">)</span>
<span class="o">&gt;</span> trim<span class="p">(</span><span class="s">" abc def "</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abc def"</span>
<span class="o">&gt;</span> str_trim<span class="p">(</span><span class="s">"  abd def  "</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"abd def"</span>
</pre></div>
<h2><span class="mw-headline" id="Comparing_two_strings">Comparing two strings</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=30" title="Edit section: Comparing two strings">edit</a></span></h2>
<h3><span class="mw-headline" id="Assessing_if_they_are_identical">Assessing if they are identical</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=31" title="Edit section: Assessing if they are identical">edit</a></span></h3>
<ul>
<li><code>==</code> returns TRUE if both strings are the same and false otherwise.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="s">"abc"</span><span class="o">==</span><span class="s">"abc"</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">TRUE</span>
<span class="o">&gt;</span> <span class="s">"abc"</span><span class="o">==</span><span class="s">"abd"</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span>
</pre></div>
<h3><span class="mw-headline" id="Computing_distance_between_strings">Computing distance between strings</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=32" title="Edit section: Computing distance between strings">edit</a></span></h3>
<p>Few packages implement the <a href="//en.wikipedia.org/wiki/Levenshtein_distance" class="extiw" title="w:Levenshtein distance">Levenshtein distance</a> between two strings:</p>
<ul>
<li><code>adist()</code> in base package <b>utils</b></li>
<li><code>stringMatch()</code> in <b>MiscPsycho</b></li>
<li><code>stringdist()</code> in <b>stringdist</b></li>
<li><code>levenshteinDist()</code> in <b>RecordLinkage</b></li>
</ul>
<p>A benchmark comparing the speed of <code>levenshteinDist()</code> and <code>stringdist()</code> is available here: <a rel="nofollow" class="external autonumber" href="http://www.markvanderloo.eu/yaRb/2013/09/07/a-bit-of-benchmarking-with-string-distances/">[1]</a>.</p>
<h4><span class="mw-headline" id="Example_with_utils">Example with utils</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=33" title="Edit section: Example with utils">edit</a></span></h4>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> adist<span class="p">(</span><span class="s">"test"</span><span class="p">,</span><span class="s">"tester"</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span>
</pre></div>
<h4><span class="mw-headline" id="Example_with_MiscPsycho">Example with MiscPsycho</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=34" title="Edit section: Example with MiscPsycho">edit</a></span></h4>
<p><code>stringMatch()</code> (<b>MiscPsycho</b>) computes If <code>normalize="YES"</code> the levenshtein distance is divided by the maximum length of each string.</p>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kn">library</span><span class="p">(</span><span class="s">"MiscPsycho"</span><span class="p">)</span>
<span class="o">&gt;</span> stringMatch<span class="p">(</span><span class="s">"test"</span><span class="p">,</span><span class="s">"tester"</span><span class="p">,</span>normalize<span class="o">=</span><span class="s">"NO"</span><span class="p">,</span>penalty<span class="o">=</span><span class="m">1</span><span class="p">,</span>case.sensitive <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span>
</pre></div>
<h4><span class="mw-headline" id="Approximate_matching">Approximate matching</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=35" title="Edit section: Approximate matching">edit</a></span></h4>
<p><code>agrep()</code> search for approximate matches using the <a href="//en.wikipedia.org/wiki/Levenshtein_distance" class="extiw" title="w:Levenshtein distance">Levenshtein distance</a>.</p>
<ul>
<li>If 'value = TRUE', this returns the value of the string</li>
<li>If 'value = FALSE' this returns the position of the string</li>
<li><i>max</i> returns the maximal levenshtein distance.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span>  <span class="kp">agrep</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">"laysy"</span><span class="p">,</span> x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"1 lazy"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"1 LAZY"</span><span class="p">),</span> max <span class="o">=</span> <span class="m">2</span><span class="p">,</span> value <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"1 lazy"</span>
<span class="o">&gt;</span>  <span class="kp">agrep</span><span class="p">(</span><span class="s">"laysy"</span><span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"1 lazy"</span><span class="p">,</span> <span class="s">"1"</span><span class="p">,</span> <span class="s">"1 LAZY"</span><span class="p">),</span> max <span class="o">=</span> <span class="m">3</span><span class="p">,</span> value <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"1 lazy"</span>
</pre></div>
<h2><span class="mw-headline" id="Miscellaneous">Miscellaneous</span><span class="mw-editsection"><a href="/w/index.php?title=R_Programming/Text_Processing&amp;action=edit&amp;section=36" title="Edit section: Miscellaneous">edit</a></span></h2>
<ul>
<li><code>deparse()</code>&#160;: Turn unevaluated expressions into character strings.</li>
<li><code>char.expand()</code> (<b>base</b>) expands a string with respect to a target.</li>
<li><code>pmatch()</code> (<b>base</b>) and <code>charmatch()</code> (<b>base</b>) seek matches for the elements of their first argument among those of their second.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">pmatch</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span><span class="s">"b"</span><span class="p">,</span><span class="s">"c"</span><span class="p">,</span><span class="s">"d"</span><span class="p">),</span>table <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"b"</span><span class="p">,</span><span class="s">"c"</span><span class="p">),</span> nomatch <span class="o">=</span> <span class="m">0</span><span class="p">)</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0</span> <span class="m">1</span> <span class="m">2</span> <span class="m">0</span>
</pre></div>
<ul>
<li><code>make.unique()</code> makes a character string unique. This is useful if you want to use a string as an identifier in your data.</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr">
<pre>
<span class="o">&gt;</span> <span class="kp">make.unique</span><span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"a"</span><span class="p">,</span> <span class="s">"a"</span><span class="p">))</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">"a"</span>   <span class="s">"a.1"</span> <span class="s">"a.2"</span>
</pre></div>
