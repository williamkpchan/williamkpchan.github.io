<head>
<meta http-equiv="Content-Type" content="text/html;  charset=utf-8">

<style type="text/css">

body {
 margin-top: 5%; 
 margin-bottom: 5%; 
 margin-right: 10%; 
 margin-left: 10%; 
 background-color: #000000; 
 color: #109080; 
 font-size: 24px; 
}
a { text-decoration: none; 
	color: #28B8B8; }
a:visited {	color: #389898; }
A:hover {	color: yellow; }
A:focus {	color: red; }
code { color: #28B8B8;  background-color: #002030}
pre { color: gray;  background-color: #001010;  font-size: 16px; }
div {display: inline-block;  width: 48%;  padding: 2px;  border-radius: 4px;  
border: 1px solid gray;  margin: 3px;  vertical-align:middle; }
</STYLE>
</head>
<body>

Data wrangling exercise<br>
<br>
Data wrangling is the process of importing, cleaning and transforming raw data into actionable information for analysis.<br>
<br>
read.csv<br>
read.table, <br>
read_excel<br>
fromJSON<br>
as.data.frame<br>
xmlParse<br>
xmlToList<br>
write.csv<br>
write.table<br>
write.xlsx<br>
toJSON<br>
write<br>
write.xml<br>
<br>
libraries:<br>
readxl<br>
xlsx<br>
rjson<br>
plyr<br>
XML<br>
kulife<br>
<br>
Exercise 1<br>
Import the data.csv file to the csv_file object.<br>
csv_file <- read.csv("data.csv", header = TRUE)<br>
<br>
Exercise 2<br>
Import the data.txt file to the txt_file object.<br>
txt_file <- read.table("data.txt")<br>
<br>
Exercise 3<br>
Import the data.xls file to the xls_file object.<br>
xls_file <- read_excel("data.xls", sheet = 1)<br>
#OR <br>
xls_file <- read.xlsx("data.xls",1)<br>
<br>
Exercise 4<br>
Import the data.xlsx file to the xlsx_file object.<br>
xlsx_file <- read_excel("data.xlsx", sheet = 1)<br>
#OR <br>
xlsx_file <- read.xlsx("data.xlsx",1)<br>
<br>
Exercise 5<br>
Import the data.json file to the json_file object.<br>
json_file <- fromJSON(file="data.json")<br>
# It returns a list, you will probably require a data frame, therefore use <br>
# the command below in order to transform it.<br>
json_file <- as.data.frame(json_file)<br>
<br>
Exercise 6<br>
Import the data.xml file to the xml_file object.<br>
xml_file <- ldply(xmlToList("data.xml"), data.frame)<br>
<br>
Exercise 7<br>
Export the csv_file as “data.csv” and txt_file as “data.txt”.<br>
write.csv(csv_file, file = "data.csv")<br>
#OR <br>
write.table(csv_file, file = "data.csv", sep = ",")<br>
write.table(txt_file, file = "data.txt", sep="\t")<br>
<br>
<br>
<br>
Exercise 8<br>
Export the xls_file as “data.xls” and xlsx_file as “data.xlsx”.<br>
write.xlsx(xls_file, "data.xls")<br>
write.xlsx(xlsx_file, "data.xlsx")<br>
<br>
<br>
Exercise 9<br>
Export the json_file as “data.json”.<br>
data_json <- toJSON(json_file)<br>
write(data_json, "data.json")<br>
<br>
<br>
Exercise 10<br>
Export the xml_file as “data.xml”.<br>
write.xml(xml_file, file="data.xml")<br>
<br>
<br>
<p>Before proceeding, it might be helpful to look over the help pages for the <code>getURL</code>, <code>fromJSON</code>, <code>ldply</code>, <code>xmlToList</code>, <code>read_html</code>, <code>html_nodes</code>, <code>html_table</code>, <code>readHTMLTable</code>, <code>htmltab</code>.</p>
<p>Moreover please load the following libraries.<br/>
<code>install.packages("RCurl")</code><br/>
<code>library(RCurl)</code><br/>
<code>install.packages("rjson")</code><br/>
<code>library(rjson)</code><br/>
<code>install.packages("XML")</code><br/>
<code>library(XML)</code><br/>
<code>install.packages("plyr")</code><br/>
<code>library(plyr)</code><br/>
<code>install.packages("rvest")</code><br/>
<code>library(rvest)</code><br/>
<code>install.packages("htmltab")</code><br/>
<code>library(htmltab)</code></p>
<p>Answers to the exercises are available <a href="http://www.r-exercises.com/2017/06/07/data-wrangling-io-part-2-solutions">here</a>.</p>
<p>If you obtained a different (correct) answer than those listed on the solutions page, please feel free to post your answer as a comment on that page.</p>
<p>Exercise 1</p>

<p>Retrieve the source of the web page &#8220;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-1/data.csv&#8221; and assign it to the object &#8220;url&#8221;</p>
<pre>
####################
#                  #
#    Exercise 1    #
#                  #
####################

url &lt;- getURL(&quot;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-1/data.csv&quot;)
</pre>

<p>Exercise 2</p>
<p>Read the csv file and assign it to the &#8220;csv_file&#8221; object.</p>
<pre>
####################
#                  #
#    Exercise 2    #
#                  #
####################

csv_file &lt;- read.csv(text = url)
</pre>

<p>Exercise 3</p>
<p>Do the same as exercise 1, but with the url: &#8220;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-2/data.txt&#8221; and then assign it to the &#8220;txt_file&#8221; object.<br/>
Note: it is a txt file, so you should use the adequate function in order to import it.</p>
<pre>
####################
#                  #
#    Exercise 3    #
#                  #
####################

url &lt;- getURL(&quot;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-2/data.txt&quot;)

txt_file &lt;- read.table(text = url)
</pre>

<p>Exercise 4</p>
<p>Do the same as exercise 1, but with the url: &#8220;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-2/data.json&#8221; and then assign it to the &#8220;json_file&#8221; object.<br/>
Note: it is a json file, so you should use the adequate function in order to import it.</p>
<pre>
####################
#                  #
#    Exercise 4    #
#                  #
####################

url &lt;- getURL(&quot;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-2/data.json&quot;)

json_file &lt;- fromJSON(url)
</pre>

<p>Exercise 5</p>
<p>Do the same as exercise 1, but with the url: &#8220;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-2/data.xml&#8221; and then assign it to the &#8220;xml_file&#8221; object.<br/>
Note: it is a xml file, so you should use the adequate function in order to import it.</p>
<pre>
####################
#                  #
#    Exercise 5    #
#                  #
####################

url &lt;- getURL(&quot;https://raw.githubusercontent.com/VasTsak/r-exercises-dw/master/part-2/data.xml&quot;)
xml_file &lt;- ldply(xmlToList(url), data.frame)

</pre>

<p>Exercise 6</p>
<p>We will go through web scraping now. Read the html file &#8220;http://www.worldatlas.com/articles/largest-cities-in-europe-by-population.html&#8221; and assign it to the object &#8220;url&#8221;.<br/>
hint: consider using <code>read_html</code></p>
<pre><pre>
####################
#                  #
#    Exercise 6    #
#                  #
####################

url &lt;- read_html(&quot;http://www.worldatlas.com/articles/largest-cities-in-europe-by-population.html&quot;)
</pre>

<p>Exercise 7</p>
<p>Select the &#8220;table&#8221; nodes from the html document you retrieved before.<br/>
hint: consider using <code>html_nodes</code></p>
<pre>
####################
#                  #
#    Exercise 7    #
#                  #
####################

tbls &lt;- html_nodes(url, &quot;table&quot;)
</pre>

<p>Exercise 8 </p>
<p>Convert the node you retrieved at exercise 7, to an actionable list for processing.<br/>
hint: consider using <code>html_table</code></p>
<pre>
####################
#                  #
#    Exercise 8    #
#                  #
####################

tbls_read &lt;- url %&gt;%
  html_nodes(&quot;table&quot;) %&gt;%
  html_table(fill = TRUE)
</pre>

<p>Exercise 9 </p>
<p>Let&#8217;s go to a faster and more straight forward function, retrieve the html document like you did at exercise 6 and make it an actionable list using the function <code>readHTMLTable</code>.</p>
<pre>
####################
#                  #
#    Exercise 9    #
#                  #
####################

url &lt;- &quot;http://www.worldatlas.com/articles/largest-cities-in-europe-by-population.html&quot;
tbls_xml &lt;- readHTMLTable(url)
</pre>

<p>Exercise 10 </p>
<p>This may be a bit tricky, but give it a try. Retrieve the html document like you did at exercise 6 and make it an actionable data frame using the function <code>htmltab</code>.</p>
<pre>
####################
#                  #
#    Exercise 10   #
#                  #
####################

df_pop &lt;- htmltab(doc = url, which = &quot;//th[text() = 'Rank']/ancestor::table&quot;)
</pre>
