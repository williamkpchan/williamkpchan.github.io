<!doctype html>
<base href=http://jamesknelson.com/>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
<meta charset="UTF-8">

<link rel="stylesheet" type="text/css" href="http://jamesknelson.com/wp-content/themes/read/style.css">
<style type="text/css">
body {
 margin: 10%;
 font-size: 24px;
 background-color: #000000;
 color: #109030;
}
a { text-decoration: none;
	color: #28B8B8;}
a:visited {	color: #389898;}
A:hover {	color: yellow;}
A:focus {	color: red;}
code { color: pink; background-color: #001000}
pre { color: gray; background-color: #001010}

h1.site-title a {
  border-bottom: none !important;  
}

.main-navigation {
  border: none !important;
display: none;
}

.spoiler {
position: relative;
}

.spoiler .spoiler-mask {
background-color: #fafae0;
position: absolute;
top: 0;
bottom: 0;
left: 0;
right: 0;
z-index: 50;
}

.spoiler:hover .spoiler-mask {
display: none;
}

.site-header {
  padding-bottom: 1em;
}

h2 a, h3 a {
color: #444;
}

.entry-meta a, .nav-single a, .comment-meta a, .comment-reply-link, .navigation a, .post-pagination a, .related-posts a, .archives a, .tabs .tab-titles li a {
  color: #b30e2f;
}

.mailing-list {
  background-color: #E2F1FF;
  font-weight: bold;
  font-size: 16px;
  padding: 15px;
  width: 80%;
  margin: 0 auto;
  border-radius: 4px;
  text-align: center;
}
.mailing-list form {
  text-align: center;
  margin: 15px 0;
}
.mailing-list input {
  font-size: 16px;
  line-height: 24px;
  padding: 4px 8px;
  margin: 5px 0;
}
.mailing-list input[type=submit] {
  margin: 15px 0 0;
  font-size: 16px;
  line-height: 24px;
  padding: 4px 8px;
  border-radius: 4px;
  background-color: #b30e2f;
}

.ssba > div {
  margin-top: 80px;
  text-align: center !important;
}





pre.prettyprint > code {
        display: block;
}

h1.site-title {
  font-size: 4em;
}

.hint {
  background-color: #252007;
  border: 1px solid white;
  border-radius: 4px; 
  padding: 15px;
  margin-top: 20px;
}

h1 code,
h2 code,
h3 code,
h4 code,
h5 code,
h6 code {
  font-size: inherit;
}

.inline-mailing-list {
  width: 280px;
  margin: 0 auto;
  text-align: center;
  padding: 15px;
  border-radius: 6px;
  background-color: #f0f0f0;
}
.inline-mailing-list h4 {
  border-left: none;
  padding-left: 0;
  font-size: 18px;
  margin: 0;
}
.inline-mailing-list form {
  text-align: center;
  margin: 5px 0;
}
.inline-mailing-list input {
  font-size: 14px;
  line-height: 18px;
  padding: 4px 8px;
  margin: 5px 0;
  border-radius: 3px !important;
  width: 100% !important;
}
.inline-mailing-list button[type=submit] {
  margin: 5px 0 0;
  font-size: 16px;
  line-height: 24px;
  padding: 6px 8px;
  border-radius: 4px;
  background-color: #b30e2f;
  width: 100%;
}

blockquote {
  margin: 1em 0 0 0;
  padding: 1em 3em 1em 3em;
}
</style>
</head>
<header class="entry-header">
<h1 class="entry-title" >Learn Raw React &#8212; no JSX, no Flux, no ES6, no Webpack&#8230;</h1>
</header>

<p>So you&#8217;ve heard all the fuss about React.js &#8211; apparently it is the best thing since <code>XMLHttpRequest</code>. But you&#8217;ve spent a couple hours investigating, only to find so many buzzwords that it just feels <em>overwhelming</em>. JSX and flux and ES6 and webpack and react-router and <em>all I want is somebody to just tell me how to use <strong>React</strong> already</em>!</p>
<p>Luckily for you, that&#8217;s exactly what this series will do! Don&#8217;t believe me? That&#8217;s OK &#8211; you will after you&#8217;ve built your first React app in about <em>2 minutes time</em>. Without downloading anything. Just by following this exercise:</p>
<p><span id="more-356"></span></p>
<h2>Exercise 1 &#8211; Write a single-file React.js app</h2>
<p>Have you worked with JavaScript, CSS and HTML before? Great! That means you can do this exercise!</p>
<p>The result of this exercise is a single HTML file, which contains your first React app. There are three steps, starting with:</p>
<h3>Step 1</h3>
<p>Copy this HTML into a new file and save it somewhere:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8" /&gt;
    &lt;title&gt;I'm in a React app!&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="react-app"&gt;&lt;/div&gt;

    &lt;script src="https://cdn.jsdelivr.net/react/0.14.0-rc1/react.js"&gt;&lt;/script&gt;
    &lt;script src="https://cdn.jsdelivr.net/react/0.14.0-rc1/react-dom.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>This HTML file does two important things &#8211; it creates the <code>div</code> where your rendered content will live (with id <code>react-app</code>), and it loads the two library files where React lives.</p>
<p>With that done, let&#8217;s move on to:</p>
<h3>Step 2</h3>
<p>Type this script into a new <code>&lt;script&gt;</code> tag at the end of your HTML file.</p>
<div class="hint">
Why type it out instead of copy and paste? Well, typing forces you to process each of the individual commands, drilling them into your head in the process &#8211; while copying and pasting just gives you a short feeling of cleverness and a shot of dopamine. And if you just want dopamine, quit reading and play flappy bird or something.
</div>
<pre><code>var rootElement =
  React.createElement('div', {}, 
    React.createElement('h1', {}, "Contacts"),
    React.createElement('ul', {},
      React.createElement('li', {},
        React.createElement('h2', {}, "James Nelson"),
        React.createElement('a', {href: 'mailto:james@jamesknelson.com'}, 'james@jamesknelson.com')
      ),
      React.createElement('li', {},
        React.createElement('h2', {}, "Joe Citizen"),
        React.createElement('a', {href: 'mailto:joe@example.com'}, 'joe@example.com')
      )
    )
  )

ReactDOM.render(rootElement, document.getElementById('react-app'))
</code></pre>
<p>Phew, that was a bit of work, wasn&#8217;t it? But, hopefully all the repetition will have given you an idea of what that <a href="https://facebook.github.io/react/docs/top-level-api.html#react.createelement"><code>createElement</code></a> method does. If not, maybe step three will help.</p>
<h3>Step 3</h3>
<p>Open your HTML file in a web browser, and check that the output looks like this:</p>
<p><iframe width="100%" height="300" src="//jsfiddle.net/61ohft4r/embedded/result,js,html/" frameborder="0"></iframe></p>
<p>Got it? In that case, congratulations! You&#8217;ve made your first React.js app, without even installing <code>npm</code>. And to celebrate, let&#8217;s have a look at how it works.</p>
<h2>Introducing React</h2>
<p>At it&#8217;s most basic, React is a tool for rendering HTML with JavaScript. <code>ReactDOM.render</code> takes a <code>ReactElement</code> object describing what to render, adding the result to the given <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Introduction">DOM</a> node. But how do you create <code>ReactElement</code> objects? That&#8217;s where <code>React.createElement</code> comes in.</p>
<p><code>React.createElement</code> takes three parameters, and returns a <code>ReactElement</code>. From the <a href="https://facebook.github.io/react/docs/top-level-api.html#react.createelement">React documentation</a>:</p>
<p><code>createElement(string/ReactClass type, [object props], [children ...]) -&gt; ReactElement</code></p>
<p>The <code>type</code> argument lets us specify what type of HTML element to use; it also lets us specify <em>custom</em> elements (which we&#8217;ll learn about later). The <code>props</code> argument is a way of specifying which attributes are defined on the HTML element, as you may have guessed from the <code>mailto</code> link in the exercise. Finally, the <code>children</code> arguments are strings or <code>ReactElement</code> objects (or arrays of the same) which will be used for the returned element&#8217;s content. By choosing to omit or specify <code>children</code>, you can return a single <code>ReactElement</code> or an entire tree.</p>
<p>Since <code>createElement</code> is just plain JavaScript, you can mix in loops, <code>if</code> statements, and anything else JavaScript allows. You can also easily substitute in data stored in JSON. For example, if you had a list of contacts but didn&#8217;t want to render the ones without e-mail addresses, you could do something like this:</p>
<pre><code>var contacts = [
  {key: 1, name: "James Nelson", email: "james@jamesknelson.com"},
  {key: 2, name: "Bob"}
]

var listElements = contacts
  .filter(function(contact) { return contact.email; })
  .map(function(contact) {
    return React.createElement('li', {key: contact.key},
      React.createElement('h2', {}, contact.name),
      React.createElement('a', {href: 'mailto:'+contact.email}, contact.email)
    )
  })

var rootElement =
  React.createElement('div', {}, 
    React.createElement('h1', {}, "Contacts"),

    // If your `children` is an array, you'll need to give each one a unique `key`
    // prop. I'll explain why a little later.
    React.createElement('ul', {}, listElements)
  )

ReactDOM.render(rootElement, document.getElementById('react-app'))
</code></pre>
<p>Neat. So React can be used as a very verbose JavaScript-based templating system! But&#8230; surely that wouldn&#8217;t explain the cult-like following it has received. What gives?</p>
<h2>Components</h2>
<p>Did you notice the little <code>ReactClass</code> in the type signature of <code>React.createElement</code>? I skipped over it because we hadn&#8217;t used it yet, but can you guess what it does?</p>
<hr />
<p>The answer is &#8230; <em>drum roll please</em>:  <code>React.createElement</code> isn&#8217;t limited to standard HTML. It also lets you create your very own components!</p>
<p>How? With <code>React.createClass</code>:</p>
<pre><code>var ContactItem = React.createClass({
  propTypes: {
    name: React.PropTypes.string.isRequired,
  },

  render: function() {
    return (
      React.createElement('li', {className: 'Contact'},
        React.createElement('h2', {className: 'Contact-name'}, this.props.name)
      )
    )
  },
});
</code></pre>
<p>This little snippet defines a new component called <code>ContactItem</code>. Like HTML elements, a <code>ContactItem</code> accepts a list of attributes (called <code>props</code>). Unlike HTML elements, you can define whatever <code>props</code> you need!</p>
<p>You&#8217;d use the above component like so:</p>
<pre><code>var element = React.createElement(ContactItem, {name: "James K Nelson"})
</code></pre>
<p>And just as you may expect, <code>element</code> would now contain the value returned by your component&#8217;s <code>render</code> function.</p>
<div class="hint">
If you pass a <code>children</code> argument to <code>createElement</code>, it&#8217;s value will be available under <code>this.props.children</code>
</div>
<p>Let&#8217;s test your understanding with another exercise:</p>
<h2>Exercise 2 &#8211; Refactor your contact list</h2>
<p>Refactor your solution to the first exercise using what you&#8217;ve learned. In particular:</p>
<ul>
<li>Create a <code>ContactItem</code> class which accepts three properties: <code>name</code>, <code>email</code> and <code>description</code></li>
<li>Filter out contacts with no e-mail address</li>
<li>Store your data in an array instead of passing it directly to <code>createElement</code></li>
</ul>
<p>Use the following data:</p>
<div></div>
<pre><code>var contacts = [
    {key: 1, name: "James K Nelson", email: "james@jamesknelson.com", description: "Front-end Unicorn"},
    {key: 2, name: "Jim", email: "jim@example.com"},
    {key: 3, name: "Joe"},
]
</code></pre>
<p>When you&#8217;re done, check your work against this fiddle:</p>
<p><iframe width="100%" height="300" src="//jsfiddle.net/6L0da2sw/1/embedded/result,js,html/" frameborder="0"></iframe></p>
<h2><code>propTypes</code></h2>
<p>You may have noticed that my solution to Exercise Two uses two different values for the <code>propTypes</code> object &#8211; one with <code>isRequired</code>, and one without. This suffix can be applied to any of React&#8217;s available <a href="https://facebook.github.io/react/docs/reusable-components.html#prop-validation">prop types</a> to indicate that the specific prop <em>must</em> be passed to <code>React.createElement</code>.</p>
<p>But wait a minute, you say. What does the <code>propTypes</code> object <em>actually do?</em></p>
<p>The secret is that in most cases, <code>propTypes</code> doesn&#8217;t actually do <em>anything</em>. In fact, we could completely remove it, and our app would still function identically. So why is it there?</p>
<p><code>propTypes</code> is a debugging mechanism; it lets React check in real time that the <code>props</code> argument passed to<code>createElement</code> actually makes sense. If it doesn&#8217;t, React will log a warning to the console:</p>
<p><img src="http://jamesknelson.com/console-warning.png"></p>
<p>I&#8217;ve included <code>propTypes</code> in this guide because <em>it&#8217;ll save you a lot of pain in the long run</em> &#8211; even if it isn&#8217;t strictly necessary. And you can make it even <em>less</em> painful by printing out the cheatsheet PDF you&#8217;ll get when you sign up for my newsletter &#8211; but I digress! Now that we know how to display some data, let&#8217;s learn how to update it.</p>



<h2>Displaying new data</h2>
<p>So far, our app has only had to take a static set of data, and render it to the DOM <em>once</em>. But what happens when our data changes?</p>
<p>Despite what you may expect from a tool called <strong>React</strong>, <em>nothing</em> changes. Unlike the automatically-updating views in so many other JavaScript frameworks, React waits for us to manually order a re-render. So how do we do it?</p>
<pre><code>// Render our app to the DOM element with id `react-app`
var rootElement = React.createElement(ApplicationComponent, initialData)
ReactDOM.render(rootElement, document.getElementById('react-app'))

// Actually, there is no re-render. Just render.
var nextRootElement = React.createElement(ApplicationComponent, updatedData)
ReactDOM.render(nextRootElement, document.getElementById('react-app'))
</code></pre>
<p>But where our first <code>render</code> call creates an entire new tree of HTML elements under <code>#react-app</code>, our second call <em>only changes the parts which have actually changed</em>. This is where React gets it&#8217;s reputation for performance. In fact, if we were to do this:</p>
<pre><code>var rootElement = React.createElement(ApplicationComponent, data)
ReactDOM.render(rootElement, document.getElementById('react-app'))
ReactDOM.render(rootElement, document.getElementById('react-app'))
</code></pre>
<p>The second call to render would do <em>absolutely nothing</em>. Nothing &#8211; that is &#8211; unless you are rendering an <em>array</em> of elements without assigning a unique <code>key</code> prop to each. To understand why this is, you&#8217;ll need to know a little about how <code>render</code> works under the hood.</p>
<h2>How <code>ReactDOM.render</code> works</h2>
<p>The first call to <code>ReactDOM.render</code> is simple &#8211; it walks through the passed in <code>ReactElement</code> and creates a corresponding HTML tree under <code>#react-app</code>. But as I mentioned above, the second and subsequent calls don&#8217;t modify previously rendered HTML elements unless the corresponding <code>ReactElement</code> objects have changed. Why?</p>
<p>In order to decide <em>what</em> to change, React compares the new <code>ReactElement</code> tree with the previous one. It uses a number of <a href="https://facebook.github.io/react/docs/reconciliation.html">rules</a> to decide what to do:</p>
<ul>
<li><code>ReactElement</code>s with differing types are trashed and re-rendered</li>
<li><code>ReactElement</code>s with differing props or children are re-rendered in place</li>
<li>Identical <code>ReactElement</code>s which have been re-ordered within an array are moved to reflect the new order</li>
</ul>
<p>There&#8217;s one catch &#8211; when React encounters an array of <code>ReactElement</code>s with identical <code>type</code> and <code>props</code>, despite <em>looking</em> identical from the outside it cannot know that they are <em>really</em> identical. This is because elements can have internal state &#8211; for example, whether the element currently has user focus. This becomes a problem when React goes to re-render those elements, as it cannot tell one from another &#8211; and thus doesn&#8217;t know if their order within the array has changed.</p>
<p>This is where the <code>key</code> property from the earlier examples comes in. It lets React distinguish between elements, and keep the DOM aligned with our <code>ReactElement</code> tree.</p>
<p>But enough theory, let&#8217;s talk about something practical.</p>
<h2>Forms</h2>
<p>You now know enough to add a form to your app! That is, as long as you don&#8217;t mind that users won&#8217;t be able to interact with it yet. But why this limitation?</p>
<p>In React, input elements aren&#8217;t actually all that special. They take a <code>value</code> prop, and they&#8217;ll display what that <code>value</code> is. And since <em>a component can&#8217;t directly change the props which are passed in from the outside world</em> &#8211; user input won&#8217;t cause any change in the displayed value.</p>
<p>Take a moment to let that sink in. If you type into a form input with a <code>value</code> attribute, <em>nothing changes</em>. This isn&#8217;t to say the value <em>can&#8217;t</em> change &#8211; if you listen to the <code>input</code> events and update the value accordingly, you can change it however you&#8217;d like. More about this later, though.</p>
<p>In addition to <code>value</code>, input elements take the props you&#8217;d expect them to. With a few minor <a href="https://facebook.github.io/react/docs/tags-and-attributes.html">exceptions</a>, the attributes you can pass to a HTML <code>&lt;input&gt;</code> are also available as <code>props</code>. There are two exceptions worth keeping in mind:</p>
<ul>
<li>React <code>textarea</code> elements take their content as a <code>value</code> prop, not as <code>children</code></li>
<li>The HTML <code>for</code> attribute is bound to the <code>htmlFor</code> prop (as <code>for</code> is a reserved word in JavaScript)</li>
</ul>
<p>These exceptions are listed on the React cheatsheet you&#8217;ll receive after signing up for my newsletter.</p>
<h2>Exercise 3: Add a read-only form</h2>
<p>Let&#8217;s create a new <code>ContactForm</code> component class, with the following <code>propTypes</code>:</p>
<pre><code>propTypes: {
  contact: React.PropTypes.object.isRequired
},
</code></pre>
<p>It should render a <code>&lt;form&gt;</code> element containing <code>&lt;input&gt;</code> elements for <code>name</code> and <code>email</code>, a <code>&lt;textarea&gt;</code> for <code>description</code>, and a <code>&lt;button type="submit"&gt;</code>. For simplicity, use placeholders instead of labels. And remember &#8211; the React <code>textarea</code> component accepts it&#8217;s <code>value</code> under <code>props</code>, not <code>children</code>.</p>
<p>Once you&#8217;ve built your <code>ContactForm</code> class, add it beneath your contact list with a blank contact passed in for the <code>contact</code> prop. I&#8217;ll wait here until you&#8217;re done.</p>
<hr />
<p>Done? Great! Now check how your implementation compares to mine &#8211; take note of any differences, but don&#8217;t get too hung up on matching my implementation line-for-line. The important thing is that you write something which works.</p>
<p><iframe width="100%" height="300" src="//jsfiddle.net/adhrfmLy/embedded/result,js,html/" frameborder="0"></iframe></p>
<h2>Making your app beautiful</h2>
<p>You haven&#8217;t even finished this article, and you&#8217;re <em>already on your way to killing salesforce</em>. But nobody is going to buy your product if it looks shit. So let&#8217;s add some <em>style</em>.</p>
<p>How should we go about this? Well, since this app is tiny, we <em>could</em> just style it using HTML selectors:</p>
<pre><code>ul {
  background: #ff0000;
}
</code></pre>
<p>But this will stop working if our app ever gains another list &#8211; so let&#8217;s avoid headaches later and assign classes to our elements. To avoid conflicts,  we&#8217;ll namespace them with their parent component&#8217;s class name.</p>
<p>For our <code>ContactItem</code> component, this will look something like this:</p>
<pre><code>render: function() {
  return (
    React.createElement('li', {className: 'ContactItem'},
      React.createElement('h2', {className: 'ContactItem-name'}, this.props.name),
      React.createElement('a', {className: 'ContactItem-email', href: 'mailto:'+this.props.email}, this.props.email),
      React.createElement('div', {className: 'ContactItem-description'}, this.props.description)
    )
  )
},
</code></pre>
<div class="hint">
Note that like the DOM, React uses the <code>className</code> property to assign CSS classes (as <code>class</code> is a reserved word in JavaScript).<br />

</div>
<p>But how do we pick class names for our <code>createElement</code> calls which aren&#8217;t part of a component <code>render</code> function?</p>
<p>You&#8217;ll generally find that React projects organise <em>everything</em> into classes, with a single <code>React.createElement</code> call rendering a top-level element which is directly passed to <code>ReactDOM.render</code>. For this app, let&#8217;s use a top-level <code>ContactView</code> with this signature:</p>
<pre><code>propTypes: {
  contacts: React.PropTypes.array.isRequired,
  newContact: React.PropTypes.object.isRequired,
},
</code></pre>
<h2>Exercise 4 (optional):</h2>
<p>If you&#8217;d like to style your new app, create the <code>ContactView</code> class as defined above, add <code>className</code> props where relevant, and add a stylesheet to your HTML file.</p>
<p>Need ideas? Here is a fiddle I prepared earlier:</p>
<p><iframe width="100%" height="300" src="//jsfiddle.net/adhrfmLy/1/embedded/result,js,css,html/" frameborder="0"></iframe></p>
<h2>Nobody likes a read-only app</h2>
<p>You now know enough to make <em>pretty</em> apps, but how do you learn to make <em>interactive</em> ones?</p>
<p>This article is only the first in a series on <em>Raw React</em>. I aim to release a new article every week, and won&#8217;t be stopping until you can use them to make a <em>real app</em> with React. That means an app which:</p>
<ul>
<li>Handles form events</li>
<li>Handles navigation/routing</li>
<li>Communicates with your API</li>
<li>Manages user authentication</li>
</ul>
<p><em>Update: <a href="http://jamesknelson.com/learn-raw-react-ridiculously-simple-forms/">Part 2: Ridiculously Simple Forms</a> has been released.</em></p>
<p>In return for your e-mail address, I&#8217;ll send you the complete series via e-mail <em>as it is released</em>. And as a bonus you&#8217;ll immediately receive 3 <em>print-optimised</em> PDF cheatsheets &#8211; on <a href="http://jamesknelson.com/wp-content/uploads/2015/09/react-cheatsheet-thumbnail.png">React</a>, <a href="http://jamesknelson.com/wp-content/uploads/2015/09/es6-cheatsheet-thumbnail.png">ES6</a> and <a href="http://jamesknelson.com/wp-content/uploads/2015/09/promises-cheatsheet-thumbnail.png">JavaScript promises</a>.</p>



<h2>Read more</h2>
<ul>
<li><a href="http://jamesknelson.com/learn-raw-react-ridiculously-simple-forms/">Learn Raw React Part 2: Ridiculously Simple Forms</a></li>
<li><a href="http://jamesknelson.com/routing-with-raw-react/">Learn Raw React Part 3: Routing</a></li>
<li><a href="http://jamesknelson.com/react-js-by-example-interacting-with-the-dom/">Interacting with the DOM in React</a></li>
</ul>

</body>
</html>