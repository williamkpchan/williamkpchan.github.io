
<base target="_blank">

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">



<style type="text/css">
a {	text-decoration: none;}
A:hover {	color: yellow;}
A:focus {	color: red;}
#newtype { color: pink}
#redpink { color: #cc0099}
#redword { color: red}
#yellowword { color: yellow}
#greenword { color: green}
#orangeword { color: orange}
#whiteword { color: white}
#grayword { color: gray}
#brownword { color: #ff8000}

.highlight { 
    color: gray;
    background-color: #002030
  }

.idl-code { 
	white-space: pre; 
	color: orange;
	background-color: #002020; 
}
.java-code { 
	white-space: pre; 
	color: orange;
	background-color: #002020; 
}
.code-block { 
	white-space: pre; 
	color: orange;
	background-color: #002020; 
}
.ecma-block { 
	color: orange;
	background-color: #002020; 
}

.interface-name {
        font-weight: bold
}


.attribute-name {  
        color: orange;
        background-color: #002030;
}

.method-name {  
        color: orange;
        background-color: #002030;
}

.parameter-name {
	margin-top: 1%;
        background-color: #002030; 
        color: orange;
}

UL.toc, OL.toc {list-style: none}
DIV.toc UL UL, DIV.toc OL OL {margin-left: 0}
DIV.toc UL UL UL, DIV.toc OL OL OL {margin-left: 1em}
DIV.toc UL UL UL UL, DIV.toc OL OL OL OL {margin-left: 0}
LI.tocline1 {font-weight: bold}
LI.tocline2 {font-weight: normal}
LI.tocline4 {font-style: italic}

</STYLE>


</head>

<body bgcolor="#000000" text="#109030" leftmargin="10" topmargin="10" marginwidth="150" link="#08C8A8" vlink="#389898" alink="#28B8B8">

<FONT size=3>


<h1>JavaScript Tutorial: Functions and Classes
</h1>


<h2>Functions
</h2>

<p>The most basic purpose of a function is to contain code. A function's advanced features are that it can take parameters and return values.
<br />
<br />Once we have defined a function, we can call it from anywhere, and any number of times.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Functions&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function hello() {
<br />document.write('Hello');
<br />}
<br />hello();
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />As we see, Hello is written to the screen.
<br />
<br />In JavaScript, we do not have to define the function before we use it, so we could equally type:
<br />
<br />hello();
<br />function hello() {
<br />document.write('Hello');
<br />}
<br />
<br />To see the power of functions, we could also type:
<br />
<br />function hello() {
<br />document.write('Hello');
<br />}
<br />hello();
<br />hello();
<br />
<br />Now we see two Hello's - because we have called the function twice.
<br />
<br />Note that the code for a function MUST be contained by curly brackets {}, even if the code is only one line. So,
<br />
<br />function hello() document.write('Hello');
<br />
<br />is not legal JavaScript, although it looks like it should be.
<br />Parameters
<br />
<br />Functions can become more powerful. They can take parameters, which means that we can pass variables to a function for the function to work on.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Parameters&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function greeting(greetStr) {
<br />document.write(greetStr);
<br />}
<br />greeting('Hello');
<br />greeting('Goodbye');
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />(See example) Now, when we call the function we pass a string to it. Inside the function, this string becomes greetStr, and we can manipulate greetStr using terms we covered in previous tutorials.
<br />
<br />So, if we change the function to:
<br />
<br />document.write(greetStr+'?');
<br />
<br />our example would now produce the output: Hello?Goodbye?.
<br />
<br />JavaScript's loosely-typed nature can be seen here - try:
<br />
<br />greeting(5);
<br />
<br />You will see 5.
<br />
<br />We can also pass variables, try:
<br />
<br />FName='Jon';
<br />greeting('Hello '+FName);
<br />
<br />and you will see Hello Jon.
</p>

<h2>Multiple Parameters
</h2>

<p>We can pass a list of parameters to a function, and we do not need to pass all of them, although we must be precise about their order.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Multiple Parameters&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function greeting(greetStr,number) {
<br />if (number!=parseInt(number)||number&lt;=0) number=1;
<br />for (iter=0;iter&lt;number;iter++) document.write(greetStr+'&lt;BR&gt;');
<br />}
<br />greeting('Hello',5);
<br />greeting('Goodbye');
<br />greeting('HelloZero',0);
<br />greeting('HelloThreePointOne',3.1);
<br />greeting('HelloABC','ABC');
<br />greeting('HelloMinusTen',-10);
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />This program vastly increases the power of our greeting function. We can now tell the function to display a string an exact number of times, according to the number we specify.
<br />
<br />But we do need to be careful. As you can see, when we write 'Goodbye', we do not pass a number parameter. The lack of number must be handled from inside the function, and we deal with it using the line:
<br />
<br />if (number!=parseInt(number)||number&lt;=0) number=1;
<br />
<br />parseInt(number) returns the number in the string up-to the first non-digit (and accepts a minus sign), So,
<br />
<br />parseInt(5) equals 5
<br />parseInt(null) equals NaN
<br />parseInt(3.1) equals 3
<br />parseInt(0) equals 0
<br />parseInt('ABC') equals NaN
<br />parseInt(-10) equals -10
<br />
<br />Note that if we haven't set a number in the parameter list, then number is null. Also that NaN is 'Not a Number'.
<br />
<br />The following program demonstrates parsing:
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;parseInt &lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function displayparseInt(n) {
<br />document.write('parseInt of '+n+' equals '+parseInt(n)+'&lt;BR&gt;');
<br />}
<br />displayparseInt(5);
<br />displayparseInt(null);
<br />displayparseInt(3.1);
<br />displayparseInt(0);
<br />displayparseInt('ABC');
<br />displayparseInt(-10);
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />Any integer will match its parseInt() value, all other values will fail, including the decimal. We can use this fact to detect whether the number parameter is usable or not, by using the 'NOT EQUAL TO' operator, '!='.
<br />
<br />But equally, number&lt;=0 is a problem. Our loop wouldn't do anything, so we catch this condition as well with the OR ('||') logical operator.
<br />
<br />If number fails our test, we use an arbitary number=1 for the remainder of the function.
<br />
<br />We then pass number to the loop, which causes number of greetStr to be written to the document.
<br />Returning values from functions
<br />
<br />Sometimes we wish to get a result from a function. The function will quite happily calculate x squared, for example, but not tell us what the answer is.
<br />
<br />To get the answer, we use the return keyword.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Return&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function square(x) {
<br />return x*x;
<br />}
<br />document.write(square(5) +'&lt;BR&gt;');
<br />ninesquared=square(9);
<br />document.write(ninesquared);
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />square(5) invokes the function, and the function returns x squared. We can either directly act upon this value, or store it in a variable, as we have done with ninesquared.
</p>

<h2>Local Variables
</h2>

<p>Functions have another quirk, which is that they can house local variables. A local variable is a variable that cannot be seen outside its scope, and behaves independently from other variables of the same name.
<br />
<br />This is useful if we are running short of inspired variable names.
<br />
<br />To declare a local variable, we use the var keyword.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Local&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />x=5;
<br />function changex() {
<br />var x=10;
<br />document.write('Local x equals '+x+'&lt;BR&gt;');
<br />}
<br />document.write('Global x equals '+x+'&lt;BR&gt;');
<br />changex(x);
<br />document.write('Global x equals '+x);
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />This code gives us the strange output:
<br />
<br />Global x equals 5
<br />Local x equals 10
<br />Global x equals 5
<br />
<br />This occurs because we have two x's in the program, the global x and the local x, and the two variables do not interfere with each other. So, our x starts as 5, and we display this. Then we call the changex() function, which creates a local variable x, and initialises this to 10, and displays the local x value. But outside the function, the global x is unchanged, as we see when we write it to the screen again.
<br />
<br />We can refer to the global x from the function as well. Add:
<br />
<br />document.write('Global x equals '+<font color="red">window.x</font>+'&lt;BR&gt;');
<br />
<br />to the changex() function (see example). The global x is seen as a property of the window object.
<br />
<h2>Classes</h2>
<br />Classes can seem off-putting at first, but once you see the point of them, their use can be invaluable.
<br />
<br />We have already met objects. A computer object is a representation of a real object. For an estate agent the object may be a house, including information about the number of rooms and the price.
<br />
<br />An estate agent may have a lot of houses available. These houses all have different characteristics, and as objects they all go through the same processes. They are viewed, surveyed and bought, and so on.
<br />
<br />A full estate agent program would be difficult to demonstrate here, but we can introduce the use of classes.
<br />
<br />In this example, we have the house class. The house class produces house objects, all with object properties, such as number of rooms and price, and all having access to the same methods, such as sold and bought.
<br />
<br />So a class can create objects with a group of properties and methods.
<br />
<br />JavaScript doesn't have a keyword specific to class, so we must go back to basics and develop classes in a different way. This isn't very difficult.
</p>

<h2>Class Properties
</h2>

<p>Let us examine a very small estate agent program.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Estate Agent&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function House(rooms,price,garage) {
<br />this.rooms=rooms;
<br />this.price=price;
<br />this.garage=garage;
<br />}
<br />house1=new House(4,100000,false);
<br />house2=new House(5,200000,true);
<br />with (house1) document.write('House 1 has '+rooms+' rooms, '+(garage?'a':'no')+' garage, and costs &pound;'+price+'&lt;BR&gt;');
<br />with (house2) document.write('House 2 has '+rooms+' rooms, '+(garage?'a':'no')+' garage, and costs &pound;'+price+'&lt;BR&gt;');
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />We define a House function that takes three parameters, rooms, price and garage. The function uses the this keyword to create an object.
<br />
<br />When we call the House function, we assign the result to our variable, which becomes an object.
<br />
<br />So, identical code would be:
<br />
<br />house1=new Object();
<br />house1.rooms=4;
<br />house1.price=100000;
<br />house1.garage=false;
<br />
<br />We would have to type this in for all houses, which would be very tedious and is why we use the class structure instead.
<br />
<br />When we display the details for a house, I have introduced the ternary operator, '?:'. The ternary operator is a compacted version of:
<br />
<br />if (garage) str='a'; else str='no';
<br />
<br />(garage?'a':'no') means if garage is true, return 'a' else return 'no'. Using the ternary operator removes a line of code, and avoids having to create a new variable.
<br />Class Methods
<br />
<br />The House class we have so far defined only contains object properties. We could add a method to replace the document.write() action we used before. (See example)
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Estate Agent 2&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function House(name,rooms,price,garage) {
<br />this.name=name;
<br />this.rooms=rooms;
<br />this.price=price;
<br />this.garage=garage;
<br />this.view=view;
<br />}
<br />function view() {
<br />with (this) document.write(name+' has '+rooms+' rooms, '+(garage?'a':'no')+' garage, and costs &pound;'+price+'&lt;BR&gt;');
<br />}
<br />house1=new House('House 1',4,100000,false);
<br />house2=new House('Big House',5,200000,true);
<br />house1.view();
<br />house2.view();
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />Much better!
<br />
<br />Note how we must add another property, name, so that we can identify the house in question. This offers more flexibility than re-using the variable name, and the variable name is inaccessible anyway, i.e. it is very difficult, if not impossible, to get the view() function to use the string 'house1'.
<br />
<br />There is one further improvement that we can make, by using prototype.
</p>

<h2>Prototype Methods
</h2>

<p>Continuing the Estate Agent example, each House object has to have its own view() function. This can be very expensive on memory, 1000 houses would involve 1000 view() functions.
<br />
<br />We can remove the excess functions by using the prototype keyword. Prototype means that if a class is inherited from another class, then it can borrow all of its methods, so we don't need to redefine them.
<br />
<br />Any class that we create has a prototype. This prototype is available to all of the objects of the class.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Estate Agent 3&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function House(name,rooms,price,garage) {
<br />this.name=name;
<br />this.rooms=rooms;
<br />this.price=price;
<br />this.garage=garage;
<br />}
<br />function view() {
<br />with (this) document.write(name+' has '+rooms+' rooms, '+(garage?'a':'no')+' garage, and costs &pound;'+price+'&lt;BR&gt;');
<br />}
<br />House.prototype.view=view;
<br />house1=new House('House 1',4,100000,false);
<br />house2=new House('Big House',5,200000,true);
<br />house1.view();
<br />house2.view();
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />(See example) We can drop the view from the object construction, which saves memory.
<br />
<br />We can declare the House.prototype.view method to be that of our view function.
<br />
<br />What this ultimately means is that now all objects of the House class have access to the view function, but the view function is only created once.
</p>

<h2>Prototype Constants
</h2>

<p>We can add prototype constants to classes as well, although these have limited appeal.
<br />
<br />If the estate agent program becomes financial active for example, we may decide to define:
<br />
<br />House.prototype.salecommission=.01;
<br />House.prototype.survey=1000;
<br />
<br />Which indicate that the commission for a sale is 1%, and that surveying fees are &pound;1000.
<br />
<br />These two constants are available to any house object, so adding:
<br />
<br />document.write(house1.survey);
<br />
<br />displays 1000.
<br />
<br />The advantage of this is that it keeps variables of a related type together.
<br />
<br />&lt;HTML&gt;
<br />&lt;HEAD&gt;
<br />&lt;TITLE&gt;Estate Agent 4&lt;/TITLE&gt;
<br />&lt;SCRIPT&gt;
<br />function House(name,rooms,price,garage) {
<br />this.name=name;
<br />this.rooms=rooms;
<br />this.price=price;
<br />this.garage=garage;
<br />}
<br />function view() {
<br />with (this) document.write(name+' has '+rooms+' rooms, '+(garage?'a':'no')+' garage, and costs &pound;'+price+'&lt;BR&gt;');
<br />}
<br />function totalcost() {
<br />with (this) document.write(name+' has a total cost involved of &pound;'+eval(price+survey+price*salescommission)+'&lt;BR&gt;');
<br />}
<br />House.prototype.view=view;
<br />House.prototype.totalcost=totalcost;
<br />House.prototype.salescommission=.01;
<br />House.prototype.survey=1000;
<br />house1=new House('House 1',4,100000,false);
<br />house2=new House('Big House',5,200000,true);
<br />house1.view();
<br />house2.view();
<br />house1.totalcost();
<br />house2.totalcost();
<br />&lt;/SCRIPT&gt;
<br />&lt;/HEAD&gt;
<br />&lt;/HTML&gt;
<br />
<br />eval() forces the expressions enclosed in the brackets to be interpreted as numbers. (See example)
<br />
<br />Every object of the House class has both constants as properties, and so we can refer to these values through the objects of the class (instances of the class).
</p>


<div id="olal-container">

<script language="javascript" src="http://www.htmlgoodies.com/sl/assetlisting/?wsn=www.htmlgoodies.com&amp;wpu=/beyond/javascript/javascript-tutorial-functions-and-classes.html&amp;lurl=http://o1.qnsr.com/cgi/r?WT.qs_dlk=V2uVJQrIZ7sAABIyH@8AAAAu;;n=203;c=1395308;s=9517;x=7936;f=201308291451280;u=j;z=TIMESTAMP;k=http://assetform.htmlgoodies.com/controller&amp;wpos=onelineassetlisting&amp;lyt=l6&css=http://www.htmlgoodies.com/css/onePaidAsset.css&wi=19738410">

</script>

</div>

<div style="clear:both;">
</div>

<p>
<em>This article originally appeared on WebDevelopersJournal.com.
</em>
</p>	   
